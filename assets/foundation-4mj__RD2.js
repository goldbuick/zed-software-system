var tfe=Object.defineProperty;var nfe=n=>{throw TypeError(n)};var ife=(n,e,t)=>e in n?tfe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var c1=(n,e,t)=>ife(n,typeof e!="symbol"?e+"":e,t);var u1=(n,e,t)=>e.has(n)?nfe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);function rfe(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function sfe(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var IK={exports:{}},r2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var afe=Symbol.for("react.transitional.element"),ofe=Symbol.for("react.fragment");function NK(n,e,t){var i=null;if(t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),"key"in e){t={};for(var r in e)r!=="key"&&(t[r]=e[r])}else t=e;return e=t.ref,{$$typeof:afe,type:n,key:i,ref:e!==void 0?e:null,props:t}}r2.Fragment=ofe;r2.jsx=NK;r2.jsxs=NK;IK.exports=r2;var $a=IK.exports;function lfe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var PK={exports:{}},Ka=PK.exports={},hp,dp;function r4(){throw new Error("setTimeout has not been defined")}function s4(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?hp=setTimeout:hp=r4}catch{hp=r4}try{typeof clearTimeout=="function"?dp=clearTimeout:dp=s4}catch{dp=s4}})();function DK(n){if(hp===setTimeout)return setTimeout(n,0);if((hp===r4||!hp)&&setTimeout)return hp=setTimeout,setTimeout(n,0);try{return hp(n,0)}catch{try{return hp.call(null,n,0)}catch{return hp.call(this,n,0)}}}function cfe(n){if(dp===clearTimeout)return clearTimeout(n);if((dp===s4||!dp)&&clearTimeout)return dp=clearTimeout,clearTimeout(n);try{return dp(n)}catch{try{return dp.call(null,n)}catch{return dp.call(this,n)}}}var fg=[],VE=!1,k_,EO=-1;function ufe(){!VE||!k_||(VE=!1,k_.length?fg=k_.concat(fg):EO=-1,fg.length&&kK())}function kK(){if(!VE){var n=DK(ufe);VE=!0;for(var e=fg.length;e;){for(k_=fg,fg=[];++EO<e;)k_&&k_[EO].run();EO=-1,e=fg.length}k_=null,VE=!1,cfe(n)}}Ka.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];fg.push(new LK(n,e)),fg.length===1&&!VE&&DK(kK)};function LK(n,e){this.fun=n,this.array=e}LK.prototype.run=function(){this.fun.apply(null,this.array)};Ka.title="browser";Ka.browser=!0;Ka.env={};Ka.argv=[];Ka.version="";Ka.versions={};function Gg(){}Ka.on=Gg;Ka.addListener=Gg;Ka.once=Gg;Ka.off=Gg;Ka.removeListener=Gg;Ka.removeAllListeners=Gg;Ka.emit=Gg;Ka.prependListener=Gg;Ka.prependOnceListener=Gg;Ka.listeners=function(n){return[]};Ka.binding=function(n){throw new Error("process.binding is not supported")};Ka.cwd=function(){return"/"};Ka.chdir=function(n){throw new Error("process.chdir is not supported")};Ka.umask=function(){return 0};var hfe=PK.exports;const ss=lfe(hfe);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const mx="176",dfe={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ffe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},UK=0,a4=1,BK=2,pfe=3,FK=0,s2=1,aw=2,Jd=3,Ip=0,Bo=1,Eu=2,nc=0,G_=1,o4=2,l4=3,c4=4,zK=5,sy=100,jK=101,HK=102,VK=103,GK=104,qK=200,$K=201,WK=202,YK=203,AI=204,MI=205,XK=206,KK=207,ZK=208,JK=209,QK=210,eZ=211,tZ=212,nZ=213,iZ=214,RI=0,OI=1,II=2,lb=3,NI=4,PI=5,DI=6,kI=7,iA=0,rZ=1,sZ=2,lf=0,aZ=1,oZ=2,lZ=3,g6=4,cZ=5,uZ=6,hZ=7,u4="attached",dZ="detached",a2=300,Ig=301,Fy=302,Gw=303,qw=304,gx=306,pT=1e3,ud=1001,$w=1002,Pa=1003,v6=1004,mfe=1004,TE=1005,gfe=1005,Ls=1006,ow=1007,vfe=1007,_p=1008,yfe=1008,Ya=1009,y6=1010,_6=1011,mT=1012,o2=1013,Np=1014,Zl=1015,t0=1016,l2=1017,c2=1018,cb=1020,b6=35902,S6=1021,E6=1022,Fo=1023,gT=1026,ub=1027,vx=1028,rA=1029,u2=1030,h2=1031,_fe=1032,d2=1033,lw=33776,cw=33777,uw=33778,hw=33779,LI=35840,UI=35841,BI=35842,FI=35843,zI=36196,jI=37492,HI=37496,VI=37808,GI=37809,qI=37810,$I=37811,WI=37812,YI=37813,XI=37814,KI=37815,ZI=37816,JI=37817,QI=37818,eN=37819,tN=37820,nN=37821,dw=36492,iN=36494,rN=36495,T6=36283,sN=36284,aN=36285,oN=36286,fZ=2200,pZ=2201,mZ=2202,Ww=2300,lN=2301,TO=2302,L_=2400,U_=2401,Yw=2402,f2=2500,x6=2501,bfe=0,Sfe=1,Efe=2,n0=3200,gZ=3201,Tfe=3202,xfe=3203,i0=0,vZ=1,sf="",Mr="srgb",Pp="srgb-linear",Xw="linear",Wr="srgb",wfe=0,S_=7680,Cfe=7681,Afe=7682,Mfe=7683,Rfe=34055,Ofe=34056,Ife=5386,Nfe=512,Pfe=513,Dfe=514,kfe=515,Lfe=516,Ufe=517,Bfe=518,h4=519,yZ=512,_Z=513,bZ=514,w6=515,SZ=516,EZ=517,TZ=518,xZ=519,Kw=35044,d4=35048,Ffe=35040,zfe=35045,jfe=35049,Hfe=35041,Vfe=35046,Gfe=35050,qfe=35042,$fe="100",f4="300 es",hd=2e3,Zw=2001,Wfe={COMPUTE:"compute",RENDER:"render"},Yfe={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Xfe={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class Ch{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const ql=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let iG=1234567;const q_=Math.PI/180,vT=180/Math.PI;function vh(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ql[n&255]+ql[n>>8&255]+ql[n>>16&255]+ql[n>>24&255]+"-"+ql[e&255]+ql[e>>8&255]+"-"+ql[e>>16&15|64]+ql[e>>24&255]+"-"+ql[t&63|128]+ql[t>>8&255]+"-"+ql[t>>16&255]+ql[t>>24&255]+ql[i&255]+ql[i>>8&255]+ql[i>>16&255]+ql[i>>24&255]).toLowerCase()}function Ti(n,e,t){return Math.max(e,Math.min(t,n))}function C6(n,e){return(n%e+e)%e}function Kfe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Zfe(n,e,t){return n!==e?(t-n)/(e-n):0}function fw(n,e,t){return(1-t)*n+t*e}function Jfe(n,e,t,i){return fw(n,e,1-Math.exp(-t*i))}function Qfe(n,e=1){return e-Math.abs(C6(n,e*2)-e)}function epe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function tpe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function npe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function ipe(n,e){return n+Math.random()*(e-n)}function rpe(n){return n*(.5-Math.random())}function spe(n){n!==void 0&&(iG=n);let e=iG+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ape(n){return n*q_}function ope(n){return n*vT}function lpe(n){return(n&n-1)===0&&n!==0}function cpe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function upe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function hpe(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+i)/2),u=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),f=s((i-e)/2),m=a((i-e)/2);switch(r){case"XYX":n.set(o*u,l*h,l*d,o*c);break;case"YZY":n.set(l*d,o*u,l*h,o*c);break;case"ZXZ":n.set(l*h,l*d,o*u,o*c);break;case"XZX":n.set(o*u,l*m,l*f,o*c);break;case"YXY":n.set(l*f,o*u,l*m,o*c);break;case"ZYZ":n.set(l*m,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Uc(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Oi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const dpe={DEG2RAD:q_,RAD2DEG:vT,generateUUID:vh,clamp:Ti,euclideanModulo:C6,mapLinear:Kfe,inverseLerp:Zfe,lerp:fw,damp:Jfe,pingpong:Qfe,smoothstep:epe,smootherstep:tpe,randInt:npe,randFloat:ipe,randFloatSpread:rpe,seededRandom:spe,degToRad:ape,radToDeg:ope,isPowerOfTwo:lpe,ceilPowerOfTwo:cpe,floorPowerOfTwo:upe,setQuaternionFromProperEuler:hpe,normalize:Oi,denormalize:Uc};class gt{constructor(e=0,t=0){gt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ti(this.x,e.x,t.x),this.y=Ti(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ti(this.x,e,t),this.y=Ti(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ti(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ti(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ai{constructor(e,t,i,r,s,a,o,l,c){Ai.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],h=i[7],d=i[2],f=i[5],m=i[8],v=r[0],_=r[3],y=r[6],S=r[1],T=r[4],x=r[7],I=r[2],R=r[5],N=r[8];return s[0]=a*v+o*S+l*I,s[3]=a*_+o*T+l*R,s[6]=a*y+o*x+l*N,s[1]=c*v+u*S+h*I,s[4]=c*_+u*T+h*R,s[7]=c*y+u*x+h*N,s[2]=d*v+f*S+m*I,s[5]=d*_+f*T+m*R,s[8]=d*y+f*x+m*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,d=o*l-u*s,f=c*s-a*l,m=t*h+i*d+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=h*v,e[1]=(r*c-u*i)*v,e[2]=(o*i-r*a)*v,e[3]=d*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-o*t)*v,e[6]=f*v,e[7]=(i*l-c*t)*v,e[8]=(a*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(i3.makeScale(e,t)),this}rotate(e){return this.premultiply(i3.makeRotation(-e)),this}translate(e,t){return this.premultiply(i3.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const i3=new Ai;function wZ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const fpe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xE(n,e){return new fpe[n](e)}function Jw(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function CZ(){const n=Jw("canvas");return n.style.display="block",n}const rG={};function xO(n){n in rG||(rG[n]=!0,console.warn(n))}function ppe(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function mpe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function gpe(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const sG=new Ai().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),aG=new Ai().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function vpe(){const n={enabled:!0,workingColorSpace:Pp,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Wr&&(r.r=xg(r.r),r.g=xg(r.g),r.b=xg(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Wr&&(r.r=GE(r.r),r.g=GE(r.g),r.b=GE(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===sf?Xw:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Pp]:{primaries:e,whitePoint:i,transfer:Xw,toXYZ:sG,fromXYZ:aG,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Mr},outputColorSpaceConfig:{drawingBufferColorSpace:Mr}},[Mr]:{primaries:e,whitePoint:i,transfer:Wr,toXYZ:sG,fromXYZ:aG,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Mr}}}),n}const or=vpe();function xg(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function GE(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let RS;class AZ{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{RS===void 0&&(RS=Jw("canvas")),RS.width=e.width,RS.height=e.height;const r=RS.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=RS}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Jw("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=xg(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(xg(t[i]/255)*255):t[i]=xg(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ype=0,dy=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ype++}),this.uuid=vh(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(r3(r[a].image)):s.push(r3(r[a]))}else s=r3(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function r3(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?AZ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _pe=0;class Js extends Ch{constructor(e=Js.DEFAULT_IMAGE,t=Js.DEFAULT_MAPPING,i=ud,r=ud,s=Ls,a=_p,o=Fo,l=Ya,c=Js.DEFAULT_ANISOTROPY,u=sf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_pe++}),this.uuid=vh(),this.name="",this.source=new dy(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ai,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==a2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pT:e.x=e.x-Math.floor(e.x);break;case ud:e.x=e.x<0?0:1;break;case $w:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pT:e.y=e.y-Math.floor(e.y);break;case ud:e.y=e.y<0?0:1;break;case $w:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Js.DEFAULT_IMAGE=null;Js.DEFAULT_MAPPING=a2;Js.DEFAULT_ANISOTROPY=1;class cr{constructor(e=0,t=0,i=0,r=1){cr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],m=l[9],v=l[2],_=l[6],y=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-v)<.01&&Math.abs(m-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+v)<.1&&Math.abs(m+_)<.1&&Math.abs(c+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(c+1)/2,x=(f+1)/2,I=(y+1)/2,R=(u+d)/4,N=(h+v)/4,L=(m+_)/4;return T>x&&T>I?T<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(T),r=R/i,s=N/i):x>I?x<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(x),i=R/r,s=L/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=N/s,r=L/s),this.set(i,r,s,t),this}let S=Math.sqrt((_-m)*(_-m)+(h-v)*(h-v)+(d-u)*(d-u));return Math.abs(S)<.001&&(S=1),this.x=(_-m)/S,this.y=(h-v)/S,this.z=(d-u)/S,this.w=Math.acos((c+f+y-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ti(this.x,e.x,t.x),this.y=Ti(this.y,e.y,t.y),this.z=Ti(this.z,e.z,t.z),this.w=Ti(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ti(this.x,e,t),this.y=Ti(this.y,e,t),this.z=Ti(this.z,e,t),this.w=Ti(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ti(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class p2 extends Ch{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new cr(0,0,e,t),this.scissorTest=!1,this.viewport=new cr(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ls,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new Js(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new dy(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xa extends p2{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class sA extends Js{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Pa,this.minFilter=Pa,this.wrapR=ud,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class bpe extends Xa{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new sA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class m2 extends Js{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Pa,this.minFilter=Pa,this.wrapR=ud,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Spe extends Xa{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new m2(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jc{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const d=s[a+0],f=s[a+1],m=s[a+2],v=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=d,e[t+1]=f,e[t+2]=m,e[t+3]=v;return}if(h!==v||l!==d||c!==f||u!==m){let _=1-o;const y=l*d+c*f+u*m+h*v,S=y>=0?1:-1,T=1-y*y;if(T>Number.EPSILON){const I=Math.sqrt(T),R=Math.atan2(I,y*S);_=Math.sin(_*R)/I,o=Math.sin(o*R)/I}const x=o*S;if(l=l*_+d*x,c=c*_+f*x,u=u*_+m*x,h=h*_+v*x,_===1-o){const I=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=I,c*=I,u*=I,h*=I}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[a],d=s[a+1],f=s[a+2],m=s[a+3];return e[t]=o*m+u*h+l*f-c*d,e[t+1]=l*m+u*d+c*h-o*f,e[t+2]=c*m+u*f+o*d-l*h,e[t+3]=u*m-o*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),h=o(s/2),d=l(i/2),f=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"YXZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"ZXY":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"ZYX":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"YZX":this._x=d*u*h+c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h-d*f*m;break;case"XZY":this._x=d*u*h-c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h+d*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=i+o+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(a-r)*f}else if(i>o&&i>h){const f=2*Math.sqrt(1+i-o-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(s+c)/f}else if(o>h){const f=2*Math.sqrt(1+o-i-h);this._w=(s-c)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-i-o);this._w=(a-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ti(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*h+this._w*d,this._x=i*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Re{constructor(e=0,t=0,i=0){Re.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(oG.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oG.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),u=2*(o*t-s*r),h=2*(s*i-a*t);return this.x=t+l*c+a*h-o*u,this.y=i+l*u+o*c-s*h,this.z=r+l*h+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ti(this.x,e.x,t.x),this.y=Ti(this.y,e.y,t.y),this.z=Ti(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ti(this.x,e,t),this.y=Ti(this.y,e,t),this.z=Ti(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ti(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return s3.copy(this).projectOnVector(e),this.sub(s3)}reflect(e){return this.sub(s3.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ti(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const s3=new Re,oG=new jc;class ic{constructor(e=new Re(1/0,1/0,1/0),t=new Re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Yd.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Yd.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Yd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Yd):Yd.fromBufferAttribute(s,a),Yd.applyMatrix4(e.matrixWorld),this.expandByPoint(Yd);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),MM.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),MM.copy(i.boundingBox)),MM.applyMatrix4(e.matrixWorld),this.union(MM)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yd),Yd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(h1),RM.subVectors(this.max,h1),OS.subVectors(e.a,h1),IS.subVectors(e.b,h1),NS.subVectors(e.c,h1),Nv.subVectors(IS,OS),Pv.subVectors(NS,IS),r_.subVectors(OS,NS);let t=[0,-Nv.z,Nv.y,0,-Pv.z,Pv.y,0,-r_.z,r_.y,Nv.z,0,-Nv.x,Pv.z,0,-Pv.x,r_.z,0,-r_.x,-Nv.y,Nv.x,0,-Pv.y,Pv.x,0,-r_.y,r_.x,0];return!a3(t,OS,IS,NS,RM)||(t=[1,0,0,0,1,0,0,0,1],!a3(t,OS,IS,NS,RM))?!1:(OM.crossVectors(Nv,Pv),t=[OM.x,OM.y,OM.z],a3(t,OS,IS,NS,RM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Yd).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Wm[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Wm[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Wm[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Wm[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Wm[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Wm[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Wm[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Wm[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Wm),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wm=[new Re,new Re,new Re,new Re,new Re,new Re,new Re,new Re],Yd=new Re,MM=new ic,OS=new Re,IS=new Re,NS=new Re,Nv=new Re,Pv=new Re,r_=new Re,h1=new Re,RM=new Re,OM=new Re,s_=new Re;function a3(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){s_.fromArray(n,s);const o=r.x*Math.abs(s_.x)+r.y*Math.abs(s_.y)+r.z*Math.abs(s_.z),l=e.dot(s_),c=t.dot(s_),u=i.dot(s_);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const Epe=new ic,d1=new Re,o3=new Re;class Il{constructor(e=new Re,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Epe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;d1.subVectors(e,this.center);const t=d1.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(d1,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(o3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(d1.copy(e.center).add(o3)),this.expandByPoint(d1.copy(e.center).sub(o3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ym=new Re,l3=new Re,IM=new Re,Dv=new Re,c3=new Re,NM=new Re,u3=new Re;class yx{constructor(e=new Re,t=new Re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ym)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ym.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ym.copy(this.origin).addScaledVector(this.direction,t),Ym.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){l3.copy(e).add(t).multiplyScalar(.5),IM.copy(t).sub(e).normalize(),Dv.copy(this.origin).sub(l3);const s=e.distanceTo(t)*.5,a=-this.direction.dot(IM),o=Dv.dot(this.direction),l=-Dv.dot(IM),c=Dv.lengthSq(),u=Math.abs(1-a*a);let h,d,f,m;if(u>0)if(h=a*l-o,d=a*o-l,m=s*u,h>=0)if(d>=-m)if(d<=m){const v=1/u;h*=v,d*=v,f=h*(h+a*d+2*o)+d*(a*h+d+2*l)+c}else d=s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+c;else d<=-m?(h=Math.max(0,-(-a*s+o)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=m?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(a*s+o)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=a>0?-s:s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(l3).addScaledVector(IM,d),f}intersectSphere(e,t){Ym.subVectors(e.center,this.origin);const i=Ym.dot(this.direction),r=Ym.dot(Ym)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ym)!==null}intersectTriangle(e,t,i,r,s){c3.subVectors(t,e),NM.subVectors(i,e),u3.crossVectors(c3,NM);let a=this.direction.dot(u3),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Dv.subVectors(this.origin,e);const l=o*this.direction.dot(NM.crossVectors(Dv,NM));if(l<0)return null;const c=o*this.direction.dot(c3.cross(Dv));if(c<0||l+c>a)return null;const u=-o*Dv.dot(u3);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yn{constructor(e,t,i,r,s,a,o,l,c,u,h,d,f,m,v,_){Yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,u,h,d,f,m,v,_)}set(e,t,i,r,s,a,o,l,c,u,h,d,f,m,v,_){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=a,y[9]=o,y[13]=l,y[2]=c,y[6]=u,y[10]=h,y[14]=d,y[3]=f,y[7]=m,y[11]=v,y[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/PS.setFromMatrixColumn(e,0).length(),s=1/PS.setFromMatrixColumn(e,1).length(),a=1/PS.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=a*u,f=a*h,m=o*u,v=o*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+m*c,t[5]=d-v*c,t[9]=-o*l,t[2]=v-d*c,t[6]=m+f*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,m=c*u,v=c*h;t[0]=d+v*o,t[4]=m*o-f,t[8]=a*c,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=f*o-m,t[6]=v+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,m=c*u,v=c*h;t[0]=d-v*o,t[4]=-a*h,t[8]=m+f*o,t[1]=f+m*o,t[5]=a*u,t[9]=v-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*u,f=a*h,m=o*u,v=o*h;t[0]=l*u,t[4]=m*c-f,t[8]=d*c+v,t[1]=l*h,t[5]=v*c+d,t[9]=f*c-m,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,f=a*c,m=o*l,v=o*c;t[0]=l*u,t[4]=v-d*h,t[8]=m*h+f,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=f*h+m,t[10]=d-v*h}else if(e.order==="XZY"){const d=a*l,f=a*c,m=o*l,v=o*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+v,t[5]=a*u,t[9]=f*h-m,t[2]=m*h-f,t[6]=o*u,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Tpe,e,xpe)}lookAt(e,t,i){const r=this.elements;return sh.subVectors(e,t),sh.lengthSq()===0&&(sh.z=1),sh.normalize(),kv.crossVectors(i,sh),kv.lengthSq()===0&&(Math.abs(i.z)===1?sh.x+=1e-4:sh.z+=1e-4,sh.normalize(),kv.crossVectors(i,sh)),kv.normalize(),PM.crossVectors(sh,kv),r[0]=kv.x,r[4]=PM.x,r[8]=sh.x,r[1]=kv.y,r[5]=PM.y,r[9]=sh.y,r[2]=kv.z,r[6]=PM.z,r[10]=sh.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],h=i[5],d=i[9],f=i[13],m=i[2],v=i[6],_=i[10],y=i[14],S=i[3],T=i[7],x=i[11],I=i[15],R=r[0],N=r[4],L=r[8],k=r[12],z=r[1],Z=r[5],H=r[9],q=r[13],U=r[2],ee=r[6],W=r[10],Q=r[14],X=r[3],Y=r[7],ae=r[11],se=r[15];return s[0]=a*R+o*z+l*U+c*X,s[4]=a*N+o*Z+l*ee+c*Y,s[8]=a*L+o*H+l*W+c*ae,s[12]=a*k+o*q+l*Q+c*se,s[1]=u*R+h*z+d*U+f*X,s[5]=u*N+h*Z+d*ee+f*Y,s[9]=u*L+h*H+d*W+f*ae,s[13]=u*k+h*q+d*Q+f*se,s[2]=m*R+v*z+_*U+y*X,s[6]=m*N+v*Z+_*ee+y*Y,s[10]=m*L+v*H+_*W+y*ae,s[14]=m*k+v*q+_*Q+y*se,s[3]=S*R+T*z+x*U+I*X,s[7]=S*N+T*Z+x*ee+I*Y,s[11]=S*L+T*H+x*W+I*ae,s[15]=S*k+T*q+x*Q+I*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],m=e[3],v=e[7],_=e[11],y=e[15];return m*(+s*l*h-r*c*h-s*o*d+i*c*d+r*o*f-i*l*f)+v*(+t*l*f-t*c*d+s*a*d-r*a*f+r*c*u-s*l*u)+_*(+t*c*h-t*o*f-s*a*h+i*a*f+s*o*u-i*c*u)+y*(-r*o*u-t*l*h+t*o*d+r*a*h-i*a*d+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],v=e[13],_=e[14],y=e[15],S=h*_*c-v*d*c+v*l*f-o*_*f-h*l*y+o*d*y,T=m*d*c-u*_*c-m*l*f+a*_*f+u*l*y-a*d*y,x=u*v*c-m*h*c+m*o*f-a*v*f-u*o*y+a*h*y,I=m*h*l-u*v*l-m*o*d+a*v*d+u*o*_-a*h*_,R=t*S+i*T+r*x+s*I;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/R;return e[0]=S*N,e[1]=(v*d*s-h*_*s-v*r*f+i*_*f+h*r*y-i*d*y)*N,e[2]=(o*_*s-v*l*s+v*r*c-i*_*c-o*r*y+i*l*y)*N,e[3]=(h*l*s-o*d*s-h*r*c+i*d*c+o*r*f-i*l*f)*N,e[4]=T*N,e[5]=(u*_*s-m*d*s+m*r*f-t*_*f-u*r*y+t*d*y)*N,e[6]=(m*l*s-a*_*s-m*r*c+t*_*c+a*r*y-t*l*y)*N,e[7]=(a*d*s-u*l*s+u*r*c-t*d*c-a*r*f+t*l*f)*N,e[8]=x*N,e[9]=(m*h*s-u*v*s-m*i*f+t*v*f+u*i*y-t*h*y)*N,e[10]=(a*v*s-m*o*s+m*i*c-t*v*c-a*i*y+t*o*y)*N,e[11]=(u*o*s-a*h*s-u*i*c+t*h*c+a*i*f-t*o*f)*N,e[12]=I*N,e[13]=(u*v*r-m*h*r+m*i*d-t*v*d-u*i*_+t*h*_)*N,e[14]=(m*o*r-a*v*r-m*i*l+t*v*l+a*i*_-t*o*_)*N,e[15]=(a*h*r-u*o*r+u*i*l-t*h*l-a*i*d+t*o*d)*N,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,h=o+o,d=s*c,f=s*u,m=s*h,v=a*u,_=a*h,y=o*h,S=l*c,T=l*u,x=l*h,I=i.x,R=i.y,N=i.z;return r[0]=(1-(v+y))*I,r[1]=(f+x)*I,r[2]=(m-T)*I,r[3]=0,r[4]=(f-x)*R,r[5]=(1-(d+y))*R,r[6]=(_+S)*R,r[7]=0,r[8]=(m+T)*N,r[9]=(_-S)*N,r[10]=(1-(d+v))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=PS.set(r[0],r[1],r[2]).length();const a=PS.set(r[4],r[5],r[6]).length(),o=PS.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Xd.copy(this);const c=1/s,u=1/a,h=1/o;return Xd.elements[0]*=c,Xd.elements[1]*=c,Xd.elements[2]*=c,Xd.elements[4]*=u,Xd.elements[5]*=u,Xd.elements[6]*=u,Xd.elements[8]*=h,Xd.elements[9]*=h,Xd.elements[10]*=h,t.setFromRotationMatrix(Xd),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=hd){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),h=(t+e)/(t-e),d=(i+r)/(i-r);let f,m;if(o===hd)f=-(a+s)/(a-s),m=-2*a*s/(a-s);else if(o===Zw)f=-a/(a-s),m=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=hd){const l=this.elements,c=1/(t-e),u=1/(i-r),h=1/(a-s),d=(t+e)*c,f=(i+r)*u;let m,v;if(o===hd)m=(a+s)*h,v=-2*h;else if(o===Zw)m=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const PS=new Re,Xd=new Yn,Tpe=new Re(0,0,0),xpe=new Re(1,1,1),kv=new Re,PM=new Re,sh=new Re,lG=new Yn,cG=new jc;class Ru{constructor(e=0,t=0,i=0,r=Ru.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Ti(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ti(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ti(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ti(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Ti(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return lG.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lG,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return cG.setFromEuler(this),this.setFromQuaternion(cG,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ru.DEFAULT_ORDER="XYZ";class yT{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let wpe=0;const uG=new Re,DS=new jc,Xm=new Yn,DM=new Re,f1=new Re,Cpe=new Re,Ape=new jc,hG=new Re(1,0,0),dG=new Re(0,1,0),fG=new Re(0,0,1),pG={type:"added"},Mpe={type:"removed"},kS={type:"childadded",child:null},h3={type:"childremoved",child:null};class mr extends Ch{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wpe++}),this.uuid=vh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mr.DEFAULT_UP.clone();const e=new Re,t=new Ru,i=new jc,r=new Re(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Yn},normalMatrix:{value:new Ai}}),this.matrix=new Yn,this.matrixWorld=new Yn,this.matrixAutoUpdate=mr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new yT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return DS.setFromAxisAngle(e,t),this.quaternion.multiply(DS),this}rotateOnWorldAxis(e,t){return DS.setFromAxisAngle(e,t),this.quaternion.premultiply(DS),this}rotateX(e){return this.rotateOnAxis(hG,e)}rotateY(e){return this.rotateOnAxis(dG,e)}rotateZ(e){return this.rotateOnAxis(fG,e)}translateOnAxis(e,t){return uG.copy(e).applyQuaternion(this.quaternion),this.position.add(uG.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hG,e)}translateY(e){return this.translateOnAxis(dG,e)}translateZ(e){return this.translateOnAxis(fG,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xm.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?DM.copy(e):DM.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),f1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xm.lookAt(f1,DM,this.up):Xm.lookAt(DM,f1,this.up),this.quaternion.setFromRotationMatrix(Xm),r&&(Xm.extractRotation(r.matrixWorld),DS.setFromRotationMatrix(Xm),this.quaternion.premultiply(DS.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(pG),kS.child=e,this.dispatchEvent(kS),kS.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Mpe),h3.child=e,this.dispatchEvent(h3),h3.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xm.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xm.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xm),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(pG),kS.child=e,this.dispatchEvent(kS),kS.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(f1,e,Cpe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(f1,Ape,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?{min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}:void 0,boundingSphere:o.boundingSphere?{radius:o.boundingSphere.radius,center:o.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),h=a(e.shapes),d=a(e.skeletons),f=a(e.animations),m=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),m.length>0&&(i.nodes=m)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}mr.DEFAULT_UP=new Re(0,1,0);mr.DEFAULT_MATRIX_AUTO_UPDATE=!0;mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Kd=new Re,Km=new Re,d3=new Re,Zm=new Re,LS=new Re,US=new Re,mG=new Re,f3=new Re,p3=new Re,m3=new Re,g3=new cr,v3=new cr,y3=new cr;class Tu{constructor(e=new Re,t=new Re,i=new Re){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Kd.subVectors(e,t),r.cross(Kd);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Kd.subVectors(r,t),Km.subVectors(i,t),d3.subVectors(e,t);const a=Kd.dot(Kd),o=Kd.dot(Km),l=Kd.dot(d3),c=Km.dot(Km),u=Km.dot(d3),h=a*c-o*o;if(h===0)return s.set(0,0,0),null;const d=1/h,f=(c*l-o*u)*d,m=(a*u-o*l)*d;return s.set(1-f-m,m,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Zm)===null?!1:Zm.x>=0&&Zm.y>=0&&Zm.x+Zm.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,Zm)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Zm.x),l.addScaledVector(a,Zm.y),l.addScaledVector(o,Zm.z),l)}static getInterpolatedAttribute(e,t,i,r,s,a){return g3.setScalar(0),v3.setScalar(0),y3.setScalar(0),g3.fromBufferAttribute(e,t),v3.fromBufferAttribute(e,i),y3.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(g3,s.x),a.addScaledVector(v3,s.y),a.addScaledVector(y3,s.z),a}static isFrontFacing(e,t,i,r){return Kd.subVectors(i,t),Km.subVectors(e,t),Kd.cross(Km).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kd.subVectors(this.c,this.b),Km.subVectors(this.a,this.b),Kd.cross(Km).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Tu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Tu.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Tu.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Tu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Tu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;LS.subVectors(r,i),US.subVectors(s,i),f3.subVectors(e,i);const l=LS.dot(f3),c=US.dot(f3);if(l<=0&&c<=0)return t.copy(i);p3.subVectors(e,r);const u=LS.dot(p3),h=US.dot(p3);if(u>=0&&h<=u)return t.copy(r);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(LS,a);m3.subVectors(e,s);const f=LS.dot(m3),m=US.dot(m3);if(m>=0&&f<=m)return t.copy(s);const v=f*c-l*m;if(v<=0&&c>=0&&m<=0)return o=c/(c-m),t.copy(i).addScaledVector(US,o);const _=u*m-f*h;if(_<=0&&h-u>=0&&f-m>=0)return mG.subVectors(s,r),o=(h-u)/(h-u+(f-m)),t.copy(r).addScaledVector(mG,o);const y=1/(_+v+d);return a=v*y,o=d*y,t.copy(i).addScaledVector(LS,a).addScaledVector(US,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const MZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lv={h:0,s:0,l:0},kM={h:0,s:0,l:0};function _3(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class dn{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Mr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,or.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=or.workingColorSpace){return this.r=e,this.g=t,this.b=i,or.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=or.workingColorSpace){if(e=C6(e,1),t=Ti(t,0,1),i=Ti(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=_3(a,s,e+1/3),this.g=_3(a,s,e),this.b=_3(a,s,e-1/3)}return or.toWorkingColorSpace(this,r),this}setStyle(e,t=Mr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Mr){const i=MZ[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xg(e.r),this.g=xg(e.g),this.b=xg(e.b),this}copyLinearToSRGB(e){return this.r=GE(e.r),this.g=GE(e.g),this.b=GE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Mr){return or.fromWorkingColorSpace($l.copy(this),e),Math.round(Ti($l.r*255,0,255))*65536+Math.round(Ti($l.g*255,0,255))*256+Math.round(Ti($l.b*255,0,255))}getHexString(e=Mr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=or.workingColorSpace){or.fromWorkingColorSpace($l.copy(this),t);const i=$l.r,r=$l.g,s=$l.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=u<=.5?h/(a+o):h/(2-a-o),a){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=or.workingColorSpace){return or.fromWorkingColorSpace($l.copy(this),t),e.r=$l.r,e.g=$l.g,e.b=$l.b,e}getStyle(e=Mr){or.fromWorkingColorSpace($l.copy(this),e);const t=$l.r,i=$l.g,r=$l.b;return e!==Mr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Lv),this.setHSL(Lv.h+e,Lv.s+t,Lv.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Lv),e.getHSL(kM);const i=fw(Lv.h,kM.h,t),r=fw(Lv.s,kM.s,t),s=fw(Lv.l,kM.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $l=new dn;dn.NAMES=MZ;let Rpe=0;class Wo extends Ch{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Rpe++}),this.uuid=vh(),this.name="",this.type="Material",this.blending=G_,this.side=Ip,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=AI,this.blendDst=MI,this.blendEquation=sy,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new dn(0,0,0),this.blendAlpha=0,this.depthFunc=lb,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=h4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=S_,this.stencilZFail=S_,this.stencilZPass=S_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==G_&&(i.blending=this.blending),this.side!==Ip&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==AI&&(i.blendSrc=this.blendSrc),this.blendDst!==MI&&(i.blendDst=this.blendDst),this.blendEquation!==sy&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==lb&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==h4&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==S_&&(i.stencilFail=this.stencilFail),this.stencilZFail!==S_&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==S_&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class r0 extends Wo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ru,this.combine=iA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ug=Ope();function Ope(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function gu(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ti(n,-65504,65504),ug.floatView[0]=n;const e=ug.uint32View[0],t=e>>23&511;return ug.baseTable[t]+((e&8388607)>>ug.shiftTable[t])}function G1(n){const e=n>>10;return ug.uint32View[0]=ug.mantissaTable[ug.offsetTable[e]+(n&1023)]+ug.exponentTable[e],ug.floatView[0]}class Ipe{static toHalfFloat(e){return gu(e)}static fromHalfFloat(e){return G1(e)}}const ho=new Re,LM=new gt;let Npe=0;class Vr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Npe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Kw,this.updateRanges=[],this.gpuType=Zl,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)LM.fromBufferAttribute(this,t),LM.applyMatrix3(e),this.setXY(t,LM.x,LM.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyMatrix3(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyMatrix4(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyNormalMatrix(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.transformDirection(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Uc(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Oi(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Uc(t,this.array)),t}setX(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Uc(t,this.array)),t}setY(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Uc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Uc(t,this.array)),t}setW(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array),s=Oi(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Kw&&(e.usage=this.usage),e}}class Ppe extends Vr{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Dpe extends Vr{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class kpe extends Vr{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Lpe extends Vr{constructor(e,t,i){super(new Int16Array(e),t,i)}}class A6 extends Vr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Upe extends Vr{constructor(e,t,i){super(new Int32Array(e),t,i)}}class M6 extends Vr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Bpe extends Vr{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=G1(this.array[e*this.itemSize]);return this.normalized&&(t=Uc(t,this.array)),t}setX(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize]=gu(t),this}getY(e){let t=G1(this.array[e*this.itemSize+1]);return this.normalized&&(t=Uc(t,this.array)),t}setY(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+1]=gu(t),this}getZ(e){let t=G1(this.array[e*this.itemSize+2]);return this.normalized&&(t=Uc(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+2]=gu(t),this}getW(e){let t=G1(this.array[e*this.itemSize+3]);return this.normalized&&(t=Uc(t,this.array)),t}setW(e,t){return this.normalized&&(t=Oi(t,this.array)),this.array[e*this.itemSize+3]=gu(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array)),this.array[e+0]=gu(t),this.array[e+1]=gu(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array)),this.array[e+0]=gu(t),this.array[e+1]=gu(i),this.array[e+2]=gu(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array),s=Oi(s,this.array)),this.array[e+0]=gu(t),this.array[e+1]=gu(i),this.array[e+2]=gu(r),this.array[e+3]=gu(s),this}}class Tn extends Vr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Fpe=0;const Yh=new Yn,b3=new mr,BS=new Re,ah=new ic,p1=new ic,nl=new Re;class xi extends Ch{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fpe++}),this.uuid=vh(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wZ(e)?M6:A6)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ai().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yh.makeRotationFromQuaternion(e),this.applyMatrix4(Yh),this}rotateX(e){return Yh.makeRotationX(e),this.applyMatrix4(Yh),this}rotateY(e){return Yh.makeRotationY(e),this.applyMatrix4(Yh),this}rotateZ(e){return Yh.makeRotationZ(e),this.applyMatrix4(Yh),this}translate(e,t,i){return Yh.makeTranslation(e,t,i),this.applyMatrix4(Yh),this}scale(e,t,i){return Yh.makeScale(e,t,i),this.applyMatrix4(Yh),this}lookAt(e){return b3.lookAt(e),b3.updateMatrix(),this.applyMatrix4(b3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(BS).negate(),this.translate(BS.x,BS.y,BS.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Tn(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ic);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Re(-1/0,-1/0,-1/0),new Re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ah.setFromBufferAttribute(s),this.morphTargetsRelative?(nl.addVectors(this.boundingBox.min,ah.min),this.boundingBox.expandByPoint(nl),nl.addVectors(this.boundingBox.max,ah.max),this.boundingBox.expandByPoint(nl)):(this.boundingBox.expandByPoint(ah.min),this.boundingBox.expandByPoint(ah.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Il);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Re,1/0);return}if(e){const i=this.boundingSphere.center;if(ah.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];p1.setFromBufferAttribute(o),this.morphTargetsRelative?(nl.addVectors(ah.min,p1.min),ah.expandByPoint(nl),nl.addVectors(ah.max,p1.max),ah.expandByPoint(nl)):(ah.expandByPoint(p1.min),ah.expandByPoint(p1.max))}ah.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)nl.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(nl));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)nl.fromBufferAttribute(o,c),l&&(BS.fromBufferAttribute(e,c),nl.add(BS)),r=Math.max(r,i.distanceToSquared(nl))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Vr(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let L=0;L<i.count;L++)o[L]=new Re,l[L]=new Re;const c=new Re,u=new Re,h=new Re,d=new gt,f=new gt,m=new gt,v=new Re,_=new Re;function y(L,k,z){c.fromBufferAttribute(i,L),u.fromBufferAttribute(i,k),h.fromBufferAttribute(i,z),d.fromBufferAttribute(s,L),f.fromBufferAttribute(s,k),m.fromBufferAttribute(s,z),u.sub(c),h.sub(c),f.sub(d),m.sub(d);const Z=1/(f.x*m.y-m.x*f.y);isFinite(Z)&&(v.copy(u).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(Z),_.copy(h).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(Z),o[L].add(v),o[k].add(v),o[z].add(v),l[L].add(_),l[k].add(_),l[z].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let L=0,k=S.length;L<k;++L){const z=S[L],Z=z.start,H=z.count;for(let q=Z,U=Z+H;q<U;q+=3)y(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const T=new Re,x=new Re,I=new Re,R=new Re;function N(L){I.fromBufferAttribute(r,L),R.copy(I);const k=o[L];T.copy(k),T.sub(I.multiplyScalar(I.dot(k))).normalize(),x.crossVectors(R,k);const Z=x.dot(l[L])<0?-1:1;a.setXYZW(L,T.x,T.y,T.z,Z)}for(let L=0,k=S.length;L<k;++L){const z=S[L],Z=z.start,H=z.count;for(let q=Z,U=Z+H;q<U;q+=3)N(e.getX(q+0)),N(e.getX(q+1)),N(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Vr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const r=new Re,s=new Re,a=new Re,o=new Re,l=new Re,c=new Re,u=new Re,h=new Re;if(e)for(let d=0,f=e.count;d<f;d+=3){const m=e.getX(d+0),v=e.getX(d+1),_=e.getX(d+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,_),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,_),o.add(u),l.add(u),c.add(u),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)nl.fromBufferAttribute(e,t),nl.normalize(),e.setXYZ(t,nl.x,nl.y,nl.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,h=o.normalized,d=new c.constructor(l.length*u);let f=0,m=0;for(let v=0,_=l.length;v<_;v++){o.isInterleavedBufferAttribute?f=l[v]*o.data.stride+o.offset:f=l[v]*u;for(let y=0;y<u;y++)d[m++]=c[f++]}return new Vr(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xi,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,i);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gG=new Yn,a_=new yx,UM=new Il,vG=new Re,BM=new Re,FM=new Re,zM=new Re,S3=new Re,jM=new Re,yG=new Re,HM=new Re;class Na extends mr{constructor(e=new xi,t=new r0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){jM.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],h=s[l];u!==0&&(S3.fromBufferAttribute(h,e),a?jM.addScaledVector(S3,u):jM.addScaledVector(S3.sub(t),u))}t.add(jM)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),UM.copy(i.boundingSphere),UM.applyMatrix4(s),a_.copy(e.ray).recast(e.near),!(UM.containsPoint(a_.origin)===!1&&(a_.intersectSphere(UM,vG)===null||a_.origin.distanceToSquared(vG)>(e.far-e.near)**2))&&(gG.copy(s).invert(),a_.copy(e.ray).applyMatrix4(gG),!(i.boundingBox!==null&&a_.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,a_)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,v=d.length;m<v;m++){const _=d[m],y=a[_.materialIndex],S=Math.max(_.start,f.start),T=Math.min(o.count,Math.min(_.start+_.count,f.start+f.count));for(let x=S,I=T;x<I;x+=3){const R=o.getX(x),N=o.getX(x+1),L=o.getX(x+2);r=VM(this,y,e,i,c,u,h,R,N,L),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const m=Math.max(0,f.start),v=Math.min(o.count,f.start+f.count);for(let _=m,y=v;_<y;_+=3){const S=o.getX(_),T=o.getX(_+1),x=o.getX(_+2);r=VM(this,a,e,i,c,u,h,S,T,x),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,v=d.length;m<v;m++){const _=d[m],y=a[_.materialIndex],S=Math.max(_.start,f.start),T=Math.min(l.count,Math.min(_.start+_.count,f.start+f.count));for(let x=S,I=T;x<I;x+=3){const R=x,N=x+1,L=x+2;r=VM(this,y,e,i,c,u,h,R,N,L),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const m=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let _=m,y=v;_<y;_+=3){const S=_,T=_+1,x=_+2;r=VM(this,a,e,i,c,u,h,S,T,x),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function zpe(n,e,t,i,r,s,a,o){let l;if(e.side===Bo?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Ip,o),l===null)return null;HM.copy(o),HM.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(HM);return c<t.near||c>t.far?null:{distance:c,point:HM.clone(),object:n}}function VM(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,BM),n.getVertexPosition(l,FM),n.getVertexPosition(c,zM);const u=zpe(n,e,t,i,BM,FM,zM,yG);if(u){const h=new Re;Tu.getBarycoord(yG,BM,FM,zM,h),r&&(u.uv=Tu.getInterpolatedAttribute(r,o,l,c,h,new gt)),s&&(u.uv1=Tu.getInterpolatedAttribute(s,o,l,c,h,new gt)),a&&(u.normal=Tu.getInterpolatedAttribute(a,o,l,c,h,new Re),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new Re,materialIndex:0};Tu.getNormal(BM,FM,zM,d.normal),u.face=d,u.barycoord=h}return u}class Lb extends xi{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],h=[];let d=0,f=0;m("z","y","x",-1,-1,i,t,e,a,s,0),m("z","y","x",1,-1,i,t,-e,a,s,1),m("x","z","y",1,1,e,i,t,r,a,2),m("x","z","y",1,-1,e,i,-t,r,a,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Tn(c,3)),this.setAttribute("normal",new Tn(u,3)),this.setAttribute("uv",new Tn(h,2));function m(v,_,y,S,T,x,I,R,N,L,k){const z=x/N,Z=I/L,H=x/2,q=I/2,U=R/2,ee=N+1,W=L+1;let Q=0,X=0;const Y=new Re;for(let ae=0;ae<W;ae++){const se=ae*Z-q;for(let ue=0;ue<ee;ue++){const Ne=ue*z-H;Y[v]=Ne*S,Y[_]=se*T,Y[y]=U,c.push(Y.x,Y.y,Y.z),Y[v]=0,Y[_]=0,Y[y]=R>0?1:-1,u.push(Y.x,Y.y,Y.z),h.push(ue/N),h.push(1-ae/L),Q+=1}}for(let ae=0;ae<L;ae++)for(let se=0;se<N;se++){const ue=d+se+ee*ae,Ne=d+se+ee*(ae+1),ve=d+(se+1)+ee*(ae+1),_e=d+(se+1)+ee*ae;l.push(ue,Ne,_e),l.push(Ne,ve,_e),X+=6}o.addGroup(f,X,k),f+=X,d+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lb(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _T(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Dc(n){const e={};for(let t=0;t<n.length;t++){const i=_T(n[t]);for(const r in i)e[r]=i[r]}return e}function jpe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function RZ(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:or.workingColorSpace}const OZ={clone:_T,merge:Dc};var Hpe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Vpe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jo extends Wo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Hpe,this.fragmentShader=Vpe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_T(e.uniforms),this.uniformsGroups=jpe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class aA extends mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yn,this.projectionMatrix=new Yn,this.projectionMatrixInverse=new Yn,this.coordinateSystem=hd}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Uv=new Re,_G=new gt,bG=new gt;let ko=class extends aA{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=vT*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(q_*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vT*2*Math.atan(Math.tan(q_*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Uv.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Uv.x,Uv.y).multiplyScalar(-e/Uv.z),Uv.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Uv.x,Uv.y).multiplyScalar(-e/Uv.z)}getViewSize(e,t){return this.getViewBounds(e,_G,bG),t.subVectors(bG,_G)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(q_*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const FS=-90,zS=1;class IZ extends mr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ko(FS,zS,e,t);r.layers=this.layers,this.add(r);const s=new ko(FS,zS,e,t);s.layers=this.layers,this.add(s);const a=new ko(FS,zS,e,t);a.layers=this.layers,this.add(a);const o=new ko(FS,zS,e,t);o.layers=this.layers,this.add(o);const l=new ko(FS,zS,e,t);l.layers=this.layers,this.add(l);const c=new ko(FS,zS,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===hd)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Zw)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class oA extends Js{constructor(e=[],t=Ig,i,r,s,a,o,l,c,u){super(e,t,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class NZ extends Xa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new oA(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ls}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Lb(5,5,5),s=new jo({name:"CubemapFromEquirect",uniforms:_T(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Bo,blending:nc});s.uniforms.tEquirect.value=t;const a=new Na(r,s),o=t.minFilter;return t.minFilter===_p&&(t.minFilter=Ls),new IZ(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class B_ extends mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Gpe={type:"move"};class wO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new B_,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new B_,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new B_,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const v of e.hand.values()){const _=t.getJointPose(v,i),y=this._getHandJoint(c,v);_!==null&&(y.matrix.fromArray(_.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=_.radius),y.visible=_!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,m=.005;c.inputState.pinching&&d>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Gpe)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new B_;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class g2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new dn(e),this.density=t}clone(){return new g2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class v2{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new dn(e),this.near=t,this.far=i}clone(){return new v2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bT extends mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ru,this.environmentIntensity=1,this.environmentRotation=new Ru,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class y2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Kw,this.updateRanges=[],this.version=0,this.uuid=vh()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vh()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vh()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Nc=new Re;class hb{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Nc.fromBufferAttribute(this,t),Nc.applyMatrix4(e),this.setXYZ(t,Nc.x,Nc.y,Nc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Nc.fromBufferAttribute(this,t),Nc.applyNormalMatrix(e),this.setXYZ(t,Nc.x,Nc.y,Nc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Nc.fromBufferAttribute(this,t),Nc.transformDirection(e),this.setXYZ(t,Nc.x,Nc.y,Nc.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Uc(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Oi(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Uc(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Uc(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Uc(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Uc(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Oi(t,this.array),i=Oi(i,this.array),r=Oi(r,this.array),s=Oi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Vr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new hb(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class R6 extends Wo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new dn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jS;const m1=new Re,HS=new Re,VS=new Re,GS=new gt,g1=new gt,PZ=new Yn,GM=new Re,v1=new Re,qM=new Re,SG=new gt,E3=new gt,EG=new gt;class DZ extends mr{constructor(e=new R6){if(super(),this.isSprite=!0,this.type="Sprite",jS===void 0){jS=new xi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new y2(t,5);jS.setIndex([0,1,2,0,2,3]),jS.setAttribute("position",new hb(i,3,0,!1)),jS.setAttribute("uv",new hb(i,2,3,!1))}this.geometry=jS,this.material=e,this.center=new gt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),HS.setFromMatrixScale(this.matrixWorld),PZ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),VS.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&HS.multiplyScalar(-VS.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;$M(GM.set(-.5,-.5,0),VS,a,HS,r,s),$M(v1.set(.5,-.5,0),VS,a,HS,r,s),$M(qM.set(.5,.5,0),VS,a,HS,r,s),SG.set(0,0),E3.set(1,0),EG.set(1,1);let o=e.ray.intersectTriangle(GM,v1,qM,!1,m1);if(o===null&&($M(v1.set(-.5,.5,0),VS,a,HS,r,s),E3.set(0,1),o=e.ray.intersectTriangle(GM,qM,v1,!1,m1),o===null))return;const l=e.ray.origin.distanceTo(m1);l<e.near||l>e.far||t.push({distance:l,point:m1.clone(),uv:Tu.getInterpolation(m1,GM,v1,qM,SG,E3,EG,new gt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $M(n,e,t,i,r,s){GS.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(g1.x=s*GS.x-r*GS.y,g1.y=r*GS.x+s*GS.y):g1.copy(GS),n.copy(e),n.x+=g1.x,n.y+=g1.y,n.applyMatrix4(PZ)}const WM=new Re,TG=new Re;class kZ extends mr{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){WM.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(WM);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){WM.setFromMatrixPosition(e.matrixWorld),TG.setFromMatrixPosition(this.matrixWorld);const i=WM.distanceTo(TG)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const xG=new Re,wG=new cr,CG=new cr,qpe=new Re,AG=new Yn,YM=new Re,T3=new Il,MG=new Yn,x3=new yx;class LZ extends Na{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=u4,this.bindMatrix=new Yn,this.bindMatrixInverse=new Yn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ic),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,YM),this.boundingBox.expandByPoint(YM)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Il),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,YM),this.boundingSphere.expandByPoint(YM)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),T3.copy(this.boundingSphere),T3.applyMatrix4(r),e.ray.intersectsSphere(T3)!==!1&&(MG.copy(r).invert(),x3.copy(e.ray).applyMatrix4(MG),!(this.boundingBox!==null&&x3.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,x3)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new cr,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===u4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===dZ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;wG.fromBufferAttribute(r.attributes.skinIndex,e),CG.fromBufferAttribute(r.attributes.skinWeight,e),xG.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=CG.getComponent(s);if(a!==0){const o=wG.getComponent(s);AG.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(qpe.copy(xG).applyMatrix4(AG),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class O6 extends mr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class cf extends Js{constructor(e=null,t=1,i=1,r,s,a,o,l,c=Pa,u=Pa,h,d){super(null,a,o,l,c,u,r,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const RG=new Yn,$pe=new Yn;class _2{constructor(e=[],t=[]){this.uuid=vh(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Yn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Yn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:$pe;RG.multiplyMatrices(o,t[s]),RG.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new _2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new cf(t,e,e,Fo,Zl);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new O6),this.bones.push(a),this.boneInverses.push(new Yn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class ST extends Vr{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qS=new Yn,OG=new Yn,XM=[],IG=new ic,Wpe=new Yn,y1=new Na,_1=new Il;class UZ extends Na{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ST(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Wpe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ic),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,qS),IG.copy(e.boundingBox).applyMatrix4(qS),this.boundingBox.union(IG)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Il),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,qS),_1.copy(e.boundingSphere).applyMatrix4(qS),this.boundingSphere.union(_1)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let o=0;o<i.length;o++)i[o]=r[a+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(y1.geometry=this.geometry,y1.material=this.material,y1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_1.copy(this.boundingSphere),_1.applyMatrix4(i),e.ray.intersectsSphere(_1)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,qS),OG.multiplyMatrices(i,qS),y1.matrixWorld=OG,y1.raycast(e,XM);for(let a=0,o=XM.length;a<o;a++){const l=XM[a];l.instanceId=s,l.object=this,t.push(l)}XM.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ST(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new cf(new Float32Array(r*this.count),r,this.count,vx,Zl));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<i.length;c++)a+=i[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=r*e;s[l]=o,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const w3=new Re,Ype=new Re,Xpe=new Ai;let Zv=class{constructor(e=new Re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=w3.subVectors(i,t).cross(Ype.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(w3),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Xpe.getNormalMatrix(e),r=this.coplanarPoint(w3).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const o_=new Il,KM=new Re;class _x{constructor(e=new Zv,t=new Zv,i=new Zv,r=new Zv,s=new Zv,a=new Zv){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=hd){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],f=r[8],m=r[9],v=r[10],_=r[11],y=r[12],S=r[13],T=r[14],x=r[15];if(i[0].setComponents(l-s,d-c,_-f,x-y).normalize(),i[1].setComponents(l+s,d+c,_+f,x+y).normalize(),i[2].setComponents(l+a,d+u,_+m,x+S).normalize(),i[3].setComponents(l-a,d-u,_-m,x-S).normalize(),i[4].setComponents(l-o,d-h,_-v,x-T).normalize(),t===hd)i[5].setComponents(l+o,d+h,_+v,x+T).normalize();else if(t===Zw)i[5].setComponents(o,h,v,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),o_.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),o_.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(o_)}intersectsSprite(e){return o_.center.set(0,0,0),o_.radius=.7071067811865476,o_.applyMatrix4(e.matrixWorld),this.intersectsSphere(o_)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(KM.x=r.normal.x>0?e.max.x:e.min.x,KM.y=r.normal.y>0?e.max.y:e.min.y,KM.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(KM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const rp=new Yn,sp=new _x;class b2{constructor(){this.coordinateSystem=hd}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(rp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),sp.setFromProjectionMatrix(rp,this.coordinateSystem),sp.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(rp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),sp.setFromProjectionMatrix(rp,this.coordinateSystem),sp.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(rp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),sp.setFromProjectionMatrix(rp,this.coordinateSystem),sp.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(rp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),sp.setFromProjectionMatrix(rp,this.coordinateSystem),sp.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(rp.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),sp.setFromProjectionMatrix(rp,this.coordinateSystem),sp.containsPoint(e))return!0}return!1}clone(){return new b2}}function C3(n,e){return n-e}function Kpe(n,e){return n.z-e.z}function Zpe(n,e){return e.z-n.z}class Jpe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const pu=new Yn,Qpe=new dn(1,1,1),NG=new _x,eme=new b2,ZM=new ic,l_=new Il,b1=new Re,PG=new Re,tme=new Re,A3=new Jpe,Wl=new Na,JM=[];function nme(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function c_(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class BZ extends Na{constructor(e,t,i=t*2,r){super(new xi,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new cf(t,e,e,Fo,Zl);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new cf(t,e,e,rA,Np);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new cf(t,e,e,Fo,Zl);i.colorSpace=or.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:c}=a,u=new o.constructor(i*l),h=new Vr(u,l,c);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Vr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ic);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,pu),this.getBoundingBoxAt(s,ZM).applyMatrix4(pu),e.union(ZM)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Il);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,pu),this.getBoundingSphereAt(s,l_).applyMatrix4(pu),e.union(l_)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(C3),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;pu.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(Qpe.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(C3),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const h=t.getAttribute(u),d=i.getAttribute(u);nme(h,d,l);const f=h.itemSize;for(let m=h.count,v=c;m<v;m++){const _=l+m;for(let y=0;y<f;y++)d.setComponent(_,y,0)}d.needsUpdate=!0,d.addUpdateRange(l*f,c*f)}if(r){const u=o.indexStart,h=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let d=0;d<a.count;d++)s.setX(u+d,l+a.getX(d));for(let d=a.count,f=h;d<f;d++)s.setX(u+d,l);s.needsUpdate=!0,s.addUpdateRange(u,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,o)=>o).sort((a,o)=>i[a].vertexStart-i[o].vertexStart),s=this.geometry;for(let a=0,o=i.length;a<o;a++){const l=r[a],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:h,reservedIndexCount:d}=c,f=s.index,m=f.array,v=e-h;for(let _=u;_<u+d;_++)m[_]=m[_]+v;f.array.copyWithin(t,u,u+d),f.addUpdateRange(t,d),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:h}=c,d=s.attributes;for(const f in d){const m=d[f],{array:v,itemSize:_}=m;v.copyWithin(e*_,u*_,(u+h)*_),m.addUpdateRange(e*_,h*_)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new ic,a=i.index,o=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;a&&(u=a.getX(u)),s.expandByPoint(b1.fromBufferAttribute(o,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Il;this.getBoundingBoxAt(e,ZM),ZM.getCenter(s.center);const a=i.index,o=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let h=c;a&&(h=a.getX(h)),b1.fromBufferAttribute(o,h),l=Math.max(l,s.center.distanceToSquared(b1))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(C3);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);c_(this._multiDrawCounts,r),c_(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),c_(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),c_(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),c_(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xi,this._initializeGeometry(s));const a=this.geometry;s.index&&c_(s.index.array,a.index.array);for(const o in s.attributes)c_(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Wl.material=this.material,Wl.geometry.index=a.index,Wl.geometry.attributes=a.attributes,Wl.geometry.boundingBox===null&&(Wl.geometry.boundingBox=new ic),Wl.geometry.boundingSphere===null&&(Wl.geometry.boundingSphere=new Il);for(let o=0,l=i.length;o<l;o++){if(!i[o].visible||!i[o].active)continue;const c=i[o].geometryIndex,u=r[c];Wl.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(o,Wl.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Wl.geometry.boundingBox),this.getBoundingSphereAt(c,Wl.geometry.boundingSphere),Wl.raycast(e,JM);for(let h=0,d=JM.length;h<d;h++){const f=JM[h];f.object=this,f.batchId=o,t.push(f)}JM.length=0}Wl.material=null,Wl.geometry.index=null,Wl.geometry.attributes={},Wl.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,h=this._geometryInfo,d=this.perObjectFrustumCulled,f=this._indirectTexture,m=f.image.data,v=i.isArrayCamera?eme:NG;d&&!i.isArrayCamera&&(pu.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),NG.setFromProjectionMatrix(pu,e.coordinateSystem));let _=0;if(this.sortObjects){pu.copy(this.matrixWorld).invert(),b1.setFromMatrixPosition(i.matrixWorld).applyMatrix4(pu),PG.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(pu);for(let T=0,x=l.length;T<x;T++)if(l[T].visible&&l[T].active){const I=l[T].geometryIndex;this.getMatrixAt(T,pu),this.getBoundingSphereAt(I,l_).applyMatrix4(pu);let R=!1;if(d&&(R=!v.intersectsSphere(l_,i)),!R){const N=h[I],L=tme.subVectors(l_.center,b1).dot(PG);A3.push(N.start,N.count,L,T)}}const y=A3.list,S=this.customSort;S===null?y.sort(s.transparent?Zpe:Kpe):S.call(this,y,i);for(let T=0,x=y.length;T<x;T++){const I=y[T];c[_]=I.start*o,u[_]=I.count,m[_]=I.index,_++}A3.reset()}else for(let y=0,S=l.length;y<S;y++)if(l[y].visible&&l[y].active){const T=l[y].geometryIndex;let x=!1;if(d&&(this.getMatrixAt(y,pu),this.getBoundingSphereAt(T,l_).applyMatrix4(pu),x=!v.intersectsSphere(l_,i)),!x){const I=h[T];c[_]=I.start*o,u[_]=I.count,m[_]=y,_++}}f.needsUpdate=!0,this._multiDrawCount=_,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Gc extends Wo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new dn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const cN=new Re,uN=new Re,DG=new Yn,S1=new yx,QM=new Il,M3=new Re,kG=new Re;class zy extends mr{constructor(e=new xi,t=new Gc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)cN.fromBufferAttribute(t,r-1),uN.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=cN.distanceTo(uN);e.setAttribute("lineDistance",new Tn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),QM.copy(i.boundingSphere),QM.applyMatrix4(r),QM.radius+=s,e.ray.intersectsSphere(QM)===!1)return;DG.copy(r).invert(),S1.copy(e.ray).applyMatrix4(DG);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=i.index,d=i.attributes.position;if(u!==null){const f=Math.max(0,a.start),m=Math.min(u.count,a.start+a.count);for(let v=f,_=m-1;v<_;v+=c){const y=u.getX(v),S=u.getX(v+1),T=eR(this,e,S1,l,y,S,v);T&&t.push(T)}if(this.isLineLoop){const v=u.getX(m-1),_=u.getX(f),y=eR(this,e,S1,l,v,_,m-1);y&&t.push(y)}}else{const f=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count);for(let v=f,_=m-1;v<_;v+=c){const y=eR(this,e,S1,l,v,v+1,v);y&&t.push(y)}if(this.isLineLoop){const v=eR(this,e,S1,l,m-1,f,m-1);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function eR(n,e,t,i,r,s,a){const o=n.geometry.attributes.position;if(cN.fromBufferAttribute(o,r),uN.fromBufferAttribute(o,s),t.distanceSqToSegment(cN,uN,M3,kG)>i)return;M3.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(M3);if(!(c<e.near||c>e.far))return{distance:c,point:kG.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const LG=new Re,UG=new Re;class jp extends zy{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)LG.fromBufferAttribute(t,r),UG.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+LG.distanceTo(UG);e.setAttribute("lineDistance",new Tn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class FZ extends zy{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class I6 extends Wo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new dn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const BG=new Yn,p4=new yx,tR=new Il,nR=new Re;class zZ extends mr{constructor(e=new xi,t=new I6){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),tR.copy(i.boundingSphere),tR.applyMatrix4(r),tR.radius+=s,e.ray.intersectsSphere(tR)===!1)return;BG.copy(r).invert(),p4.copy(e.ray).applyMatrix4(BG);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,h=i.attributes.position;if(c!==null){const d=Math.max(0,a.start),f=Math.min(c.count,a.start+a.count);for(let m=d,v=f;m<v;m++){const _=c.getX(m);nR.fromBufferAttribute(h,_),FG(nR,_,l,r,e,t,this)}}else{const d=Math.max(0,a.start),f=Math.min(h.count,a.start+a.count);for(let m=d,v=f;m<v;m++)nR.fromBufferAttribute(h,m),FG(nR,m,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function FG(n,e,t,i,r,s,a){const o=p4.distanceSqToPoint(n);if(o<t){const l=new Re;p4.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class jZ extends Js{constructor(e,t,i,r,s=Ls,a=Ls,o,l,c){super(e,t,i,r,s,a,o,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ime extends jZ{constructor(e,t,i,r,s,a,o,l){super({},e,t,i,r,s,a,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class rme extends Js{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Pa,this.minFilter=Pa,this.generateMipmaps=!1,this.needsUpdate=!0}}class S2 extends Js{constructor(e,t,i,r,s,a,o,l,c,u,h,d){super(null,a,o,l,c,u,r,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class sme extends S2{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ud,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ame extends S2{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ig),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ome extends Js{constructor(e,t,i,r,s,a,o,l,c){super(e,t,i,r,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bx extends Js{constructor(e,t,i=Np,r,s,a,o=Pa,l=Pa,c,u=gT){if(u!==gT&&u!==ub)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new dy(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class lme extends bx{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class E2 extends xi{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const a=[],o=[],l=[],c=[],u=t/2,h=Math.PI/2*e,d=t,f=2*h+d,m=i*2+s,v=r+1,_=new Re,y=new Re;for(let S=0;S<=m;S++){let T=0,x=0,I=0,R=0;if(S<=i){const k=S/i,z=k*Math.PI/2;x=-u-e*Math.cos(z),I=e*Math.sin(z),R=-e*Math.cos(z),T=k*h}else if(S<=i+s){const k=(S-i)/s;x=-u+k*t,I=e,R=0,T=h+k*d}else{const k=(S-i-s)/i,z=k*Math.PI/2;x=u+e*Math.sin(z),I=e*Math.cos(z),R=e*Math.sin(z),T=h+d+k*h}const N=Math.max(0,Math.min(1,T/f));let L=0;S===0?L=.5/r:S===m&&(L=-.5/r);for(let k=0;k<=r;k++){const z=k/r,Z=z*Math.PI*2,H=Math.sin(Z),q=Math.cos(Z);y.x=-I*q,y.y=x,y.z=I*H,o.push(y.x,y.y,y.z),_.set(-I*q,R,I*H),_.normalize(),l.push(_.x,_.y,_.z),c.push(z+L,N)}if(S>0){const k=(S-1)*v;for(let z=0;z<r;z++){const Z=k+z,H=k+z+1,q=S*v+z,U=S*v+z+1;a.push(Z,H,q),a.push(H,U,q)}}}this.setIndex(a),this.setAttribute("position",new Tn(o,3)),this.setAttribute("normal",new Tn(l,3)),this.setAttribute("uv",new Tn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E2(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class T2 extends xi{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new Re,u=new gt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=i+h/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[d]/e+1)/2,u.y=(a[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Tn(a,3)),this.setAttribute("normal",new Tn(o,3)),this.setAttribute("uv",new Tn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new T2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class lA extends xi{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],d=[],f=[];let m=0;const v=[],_=i/2;let y=0;S(),a===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(u),this.setAttribute("position",new Tn(h,3)),this.setAttribute("normal",new Tn(d,3)),this.setAttribute("uv",new Tn(f,2));function S(){const x=new Re,I=new Re;let R=0;const N=(t-e)/i;for(let L=0;L<=s;L++){const k=[],z=L/s,Z=z*(t-e)+e;for(let H=0;H<=r;H++){const q=H/r,U=q*l+o,ee=Math.sin(U),W=Math.cos(U);I.x=Z*ee,I.y=-z*i+_,I.z=Z*W,h.push(I.x,I.y,I.z),x.set(ee,N,W).normalize(),d.push(x.x,x.y,x.z),f.push(q,1-z),k.push(m++)}v.push(k)}for(let L=0;L<r;L++)for(let k=0;k<s;k++){const z=v[k][L],Z=v[k+1][L],H=v[k+1][L+1],q=v[k][L+1];(e>0||k!==0)&&(u.push(z,Z,q),R+=3),(t>0||k!==s-1)&&(u.push(Z,H,q),R+=3)}c.addGroup(y,R,0),y+=R}function T(x){const I=m,R=new gt,N=new Re;let L=0;const k=x===!0?e:t,z=x===!0?1:-1;for(let H=1;H<=r;H++)h.push(0,_*z,0),d.push(0,z,0),f.push(.5,.5),m++;const Z=m;for(let H=0;H<=r;H++){const U=H/r*l+o,ee=Math.cos(U),W=Math.sin(U);N.x=k*W,N.y=_*z,N.z=k*ee,h.push(N.x,N.y,N.z),d.push(0,z,0),R.x=ee*.5+.5,R.y=W*.5*z+.5,f.push(R.x,R.y),m++}for(let H=0;H<r;H++){const q=I+H,U=Z+H;x===!0?u.push(U,U+1,q):u.push(U+1,U,q),L+=3}c.addGroup(y,L,x===!0?1:2),y+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lA(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cA extends lA{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new cA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class s0 extends xi{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),c(i),u(),this.setAttribute("position",new Tn(s,3)),this.setAttribute("normal",new Tn(s.slice(),3)),this.setAttribute("uv",new Tn(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const T=new Re,x=new Re,I=new Re;for(let R=0;R<t.length;R+=3)f(t[R+0],T),f(t[R+1],x),f(t[R+2],I),l(T,x,I,S)}function l(S,T,x,I){const R=I+1,N=[];for(let L=0;L<=R;L++){N[L]=[];const k=S.clone().lerp(x,L/R),z=T.clone().lerp(x,L/R),Z=R-L;for(let H=0;H<=Z;H++)H===0&&L===R?N[L][H]=k:N[L][H]=k.clone().lerp(z,H/Z)}for(let L=0;L<R;L++)for(let k=0;k<2*(R-L)-1;k++){const z=Math.floor(k/2);k%2===0?(d(N[L][z+1]),d(N[L+1][z]),d(N[L][z])):(d(N[L][z+1]),d(N[L+1][z+1]),d(N[L+1][z]))}}function c(S){const T=new Re;for(let x=0;x<s.length;x+=3)T.x=s[x+0],T.y=s[x+1],T.z=s[x+2],T.normalize().multiplyScalar(S),s[x+0]=T.x,s[x+1]=T.y,s[x+2]=T.z}function u(){const S=new Re;for(let T=0;T<s.length;T+=3){S.x=s[T+0],S.y=s[T+1],S.z=s[T+2];const x=_(S)/2/Math.PI+.5,I=y(S)/Math.PI+.5;a.push(x,1-I)}m(),h()}function h(){for(let S=0;S<a.length;S+=6){const T=a[S+0],x=a[S+2],I=a[S+4],R=Math.max(T,x,I),N=Math.min(T,x,I);R>.9&&N<.1&&(T<.2&&(a[S+0]+=1),x<.2&&(a[S+2]+=1),I<.2&&(a[S+4]+=1))}}function d(S){s.push(S.x,S.y,S.z)}function f(S,T){const x=S*3;T.x=e[x+0],T.y=e[x+1],T.z=e[x+2]}function m(){const S=new Re,T=new Re,x=new Re,I=new Re,R=new gt,N=new gt,L=new gt;for(let k=0,z=0;k<s.length;k+=9,z+=6){S.set(s[k+0],s[k+1],s[k+2]),T.set(s[k+3],s[k+4],s[k+5]),x.set(s[k+6],s[k+7],s[k+8]),R.set(a[z+0],a[z+1]),N.set(a[z+2],a[z+3]),L.set(a[z+4],a[z+5]),I.copy(S).add(T).add(x).divideScalar(3);const Z=_(I);v(R,z+0,S,Z),v(N,z+2,T,Z),v(L,z+4,x,Z)}}function v(S,T,x,I){I<0&&S.x===1&&(a[T]=S.x-1),x.x===0&&x.z===0&&(a[T]=I/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function y(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s0(e.vertices,e.indices,e.radius,e.details)}}class x2 extends s0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new x2(e.radius,e.detail)}}const iR=new Re,rR=new Re,R3=new Re,sR=new Tu;class HZ extends xi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(q_*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),d={},f=[];for(let m=0;m<l;m+=3){a?(c[0]=a.getX(m),c[1]=a.getX(m+1),c[2]=a.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:v,b:_,c:y}=sR;if(v.fromBufferAttribute(o,c[0]),_.fromBufferAttribute(o,c[1]),y.fromBufferAttribute(o,c[2]),sR.getNormal(R3),h[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,h[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const T=(S+1)%3,x=h[S],I=h[T],R=sR[u[S]],N=sR[u[T]],L=`${x}_${I}`,k=`${I}_${x}`;k in d&&d[k]?(R3.dot(d[k].normal)<=s&&(f.push(R.x,R.y,R.z),f.push(N.x,N.y,N.z)),d[k]=null):L in d||(d[L]={index0:c[S],index1:c[T],normal:R3.clone()})}}for(const m in d)if(d[m]){const{index0:v,index1:_}=d[m];iR.fromBufferAttribute(o,v),rR.fromBufferAttribute(o,_),f.push(iR.x,iR.y,iR.z),f.push(rR.x,rR.y,rR.z)}this.setAttribute("position",new Tn(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class bf{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const u=i[r],d=i[r+1]-u,f=(a-u)/d;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new gt:new Re);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Re,r=[],s=[],a=[],o=new Re,l=new Yn;for(let f=0;f<=e;f++){const m=f/e;r[f]=this.getTangentAt(m,new Re)}s[0]=new Re,a[0]=new Re;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),d<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Ti(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(o,m))}a[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(Ti(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(f=-f);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),a[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class w2 extends bf{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new gt){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class VZ extends w2{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function N6(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,h){let d=(a-s)/c-(o-s)/(c+u)+(o-a)/u,f=(o-a)/u-(l-a)/(u+h)+(l-o)/h;d*=u,f*=u,r(a,o,d,f)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const aR=new Re,O3=new N6,I3=new N6,N3=new N6;class GZ extends bf{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Re){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(aR.subVectors(r[0],r[1]).add(r[0]),c=aR);const h=r[o%s],d=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(aR.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=aR),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(d),f),_=Math.pow(d.distanceToSquared(u),f);v<1e-4&&(v=1),m<1e-4&&(m=v),_<1e-4&&(_=v),O3.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,m,v,_),I3.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,m,v,_),N3.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,m,v,_)}else this.curveType==="catmullrom"&&(O3.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),I3.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),N3.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return i.set(O3.calc(l),I3.calc(l),N3.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Re().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zG(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function cme(n,e){const t=1-n;return t*t*e}function ume(n,e){return 2*(1-n)*n*e}function hme(n,e){return n*n*e}function pw(n,e,t,i){return cme(n,e)+ume(n,t)+hme(n,i)}function dme(n,e){const t=1-n;return t*t*t*e}function fme(n,e){const t=1-n;return 3*t*t*n*e}function pme(n,e){return 3*(1-n)*n*n*e}function mme(n,e){return n*n*n*e}function mw(n,e,t,i,r){return dme(n,e)+fme(n,t)+pme(n,i)+mme(n,r)}class P6 extends bf{constructor(e=new gt,t=new gt,i=new gt,r=new gt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new gt){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(mw(e,r.x,s.x,a.x,o.x),mw(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class qZ extends bf{constructor(e=new Re,t=new Re,i=new Re,r=new Re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Re){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(mw(e,r.x,s.x,a.x,o.x),mw(e,r.y,s.y,a.y,o.y),mw(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class D6 extends bf{constructor(e=new gt,t=new gt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new gt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new gt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $Z extends bf{constructor(e=new Re,t=new Re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Re){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class k6 extends bf{constructor(e=new gt,t=new gt,i=new gt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new gt){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(pw(e,r.x,s.x,a.x),pw(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L6 extends bf{constructor(e=new Re,t=new Re,i=new Re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Re){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(pw(e,r.x,s.x,a.x),pw(e,r.y,s.y,a.y),pw(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class U6 extends bf{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new gt){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return i.set(zG(o,l.x,c.x,u.x,h.x),zG(o,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new gt().fromArray(r))}return this}}var hN=Object.freeze({__proto__:null,ArcCurve:VZ,CatmullRomCurve3:GZ,CubicBezierCurve:P6,CubicBezierCurve3:qZ,EllipseCurve:w2,LineCurve:D6,LineCurve3:$Z,QuadraticBezierCurve:k6,QuadraticBezierCurve3:L6,SplineCurve:U6});class WZ extends bf{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new hN[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new hN[r.type]().fromJSON(r))}return this}}class dN extends WZ{constructor(e){super(),this.type="Path",this.currentPoint=new gt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new D6(this.currentPoint.clone(),new gt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new k6(this.currentPoint.clone(),new gt(e,t),new gt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new P6(this.currentPoint.clone(),new gt(e,t),new gt(i,r),new gt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new U6(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const c=new w2(e,t,i,r,s,a,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class $_ extends dN{constructor(e){super(e),this.uuid=vh(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new dN().fromJSON(r))}return this}}function gme(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=YZ(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c;if(i&&(s=Sme(n,e,s,t)),n.length>80*t){o=1/0,l=1/0;let u=-1/0,h=-1/0;for(let d=t;d<r;d+=t){const f=n[d],m=n[d+1];f<o&&(o=f),m<l&&(l=m),f>u&&(u=f),m>h&&(h=m)}c=Math.max(u-o,h-l),c=c!==0?32767/c:0}return Qw(s,a,t,o,l,c,0),a}function YZ(n,e,t,i,r){let s;if(r===Nme(n,e,t,i)>0)for(let a=e;a<t;a+=i)s=jG(a/i|0,n[a],n[a+1],s);else for(let a=t-i;a>=e;a-=i)s=jG(a/i|0,n[a],n[a+1],s);return s&&ET(s,s.next)&&(tC(s),s=s.next),s}function db(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(ET(t,t.next)||ca(t.prev,t,t.next)===0)){if(tC(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Qw(n,e,t,i,r,s,a){if(!n)return;!a&&s&&Cme(n,i,r,s);let o=n;for(;n.prev!==n.next;){const l=n.prev,c=n.next;if(s?yme(n,i,r,s):vme(n)){e.push(l.i,n.i,c.i),tC(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=_me(db(n),e),Qw(n,e,t,i,r,s,2)):a===2&&bme(n,e,t,i,r,s):Qw(db(n),e,t,i,r,s,1);break}}}function vme(n){const e=n.prev,t=n,i=n.next;if(ca(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,l=t.y,c=i.y,u=Math.min(r,s,a),h=Math.min(o,l,c),d=Math.max(r,s,a),f=Math.max(o,l,c);let m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=h&&m.y<=f&&q1(r,o,s,l,a,c,m.x,m.y)&&ca(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function yme(n,e,t,i){const r=n.prev,s=n,a=n.next;if(ca(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,f=Math.min(o,l,c),m=Math.min(u,h,d),v=Math.max(o,l,c),_=Math.max(u,h,d),y=m4(f,m,e,t,i),S=m4(v,_,e,t,i);let T=n.prevZ,x=n.nextZ;for(;T&&T.z>=y&&x&&x.z<=S;){if(T.x>=f&&T.x<=v&&T.y>=m&&T.y<=_&&T!==r&&T!==a&&q1(o,u,l,h,c,d,T.x,T.y)&&ca(T.prev,T,T.next)>=0||(T=T.prevZ,x.x>=f&&x.x<=v&&x.y>=m&&x.y<=_&&x!==r&&x!==a&&q1(o,u,l,h,c,d,x.x,x.y)&&ca(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;T&&T.z>=y;){if(T.x>=f&&T.x<=v&&T.y>=m&&T.y<=_&&T!==r&&T!==a&&q1(o,u,l,h,c,d,T.x,T.y)&&ca(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;x&&x.z<=S;){if(x.x>=f&&x.x<=v&&x.y>=m&&x.y<=_&&x!==r&&x!==a&&q1(o,u,l,h,c,d,x.x,x.y)&&ca(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function _me(n,e){let t=n;do{const i=t.prev,r=t.next.next;!ET(i,r)&&KZ(i,t,t.next,r)&&eC(i,r)&&eC(r,i)&&(e.push(i.i,t.i,r.i),tC(t),tC(t.next),t=n=r),t=t.next}while(t!==n);return db(t)}function bme(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Rme(a,o)){let l=ZZ(a,o);a=db(a,a.next),l=db(l,l.next),Qw(a,e,t,i,r,s,0),Qw(l,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function Sme(n,e,t,i){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,c=YZ(n,o,l,i,!1);c===c.next&&(c.steiner=!0),r.push(Mme(c))}r.sort(Eme);for(let s=0;s<r.length;s++)t=Tme(r[s],t);return t}function Eme(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Tme(n,e){const t=xme(n,e);if(!t)return e;const i=ZZ(t,n);return db(i,i.next),db(t,t.next)}function xme(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;if(ET(n,t))return t;do{if(ET(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>s&&(s=h,a=t.x<t.next.x?t:t.next,h===i))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;t=a;do{if(i>=t.x&&t.x>=l&&i!==t.x&&XZ(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)){const h=Math.abs(r-t.y)/(i-t.x);eC(t,n)&&(h<u||h===u&&(t.x>a.x||t.x===a.x&&wme(a,t)))&&(a=t,u=h)}t=t.next}while(t!==o);return a}function wme(n,e){return ca(n.prev,n,e.prev)<0&&ca(e.next,n,n.next)<0}function Cme(n,e,t,i){let r=n;do r.z===0&&(r.z=m4(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Ame(r)}function Ame(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let a=i,o=0;for(let c=0;c<t&&(o++,a=a.nextZ,!!a);c++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||i.z<=a.z)?(r=i,i=i.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=a}s.nextZ=null,t*=2}while(e>1);return n}function m4(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Mme(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function XZ(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function q1(n,e,t,i,r,s,a,o){return!(n===a&&e===o)&&XZ(n,e,t,i,r,s,a,o)}function Rme(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Ome(n,e)&&(eC(n,e)&&eC(e,n)&&Ime(n,e)&&(ca(n.prev,n,e.prev)||ca(n,e.prev,e))||ET(n,e)&&ca(n.prev,n,n.next)>0&&ca(e.prev,e,e.next)>0)}function ca(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ET(n,e){return n.x===e.x&&n.y===e.y}function KZ(n,e,t,i){const r=lR(ca(n,e,t)),s=lR(ca(n,e,i)),a=lR(ca(t,i,n)),o=lR(ca(t,i,e));return!!(r!==s&&a!==o||r===0&&oR(n,t,e)||s===0&&oR(n,i,e)||a===0&&oR(t,n,i)||o===0&&oR(t,e,i))}function oR(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function lR(n){return n>0?1:n<0?-1:0}function Ome(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&KZ(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function eC(n,e){return ca(n.prev,n,n.next)<0?ca(n,e,n.next)>=0&&ca(n,n.prev,e)>=0:ca(n,e,n.prev)<0||ca(n,n.next,e)<0}function Ime(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function ZZ(n,e){const t=g4(n.i,n.x,n.y),i=g4(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function jG(n,e,t,i){const r=g4(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function tC(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function g4(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Nme(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Pme{static triangulate(e,t,i=2){return gme(e,t,i)}}class of{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return of.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];HG(e),VG(i,e);let a=e.length;t.forEach(HG);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,VG(i,t[l]);const o=Pme.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function HG(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function VG(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class C2 extends xi{constructor(e=new $_([new gt(.5,.5),new gt(-.5,.5),new gt(-.5,-.5),new gt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new Tn(r,3)),this.setAttribute("uv",new Tn(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:f-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Dme;let T,x=!1,I,R,N,L;y&&(T=y.getSpacedPoints(u),x=!0,d=!1,I=y.computeFrenetFrames(u,!1),R=new Re,N=new Re,L=new Re),d||(_=0,f=0,m=0,v=0);const k=o.extractPoints(c);let z=k.shape;const Z=k.holes;if(!of.isClockWise(z)){z=z.reverse();for(let V=0,Ae=Z.length;V<Ae;V++){const Se=Z[V];of.isClockWise(Se)&&(Z[V]=Se.reverse())}}function q(V){const Se=10000000000000001e-36;let ge=V[0];for(let fe=1;fe<=V.length;fe++){const Ce=fe%V.length,ke=V[Ce],he=ke.x-ge.x,ie=ke.y-ge.y,Me=he*he+ie*ie,Fe=Math.max(Math.abs(ke.x),Math.abs(ke.y),Math.abs(ge.x),Math.abs(ge.y)),Ve=Se*Fe*Fe;if(Me<=Ve){V.splice(Ce,1),fe--;continue}ge=ke}}q(z),Z.forEach(q);const U=Z.length,ee=z;for(let V=0;V<U;V++){const Ae=Z[V];z=z.concat(Ae)}function W(V,Ae,Se){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),V.clone().addScaledVector(Ae,Se)}const Q=z.length;function X(V,Ae,Se){let ge,fe,Ce;const ke=V.x-Ae.x,he=V.y-Ae.y,ie=Se.x-V.x,Me=Se.y-V.y,Fe=ke*ke+he*he,Ve=ke*Me-he*ie;if(Math.abs(Ve)>Number.EPSILON){const We=Math.sqrt(Fe),Ut=Math.sqrt(ie*ie+Me*Me),_t=Ae.x-he/We,tn=Ae.y+ke/We,de=Se.x-Me/Ut,$=Se.y+ie/Ut,K=((de-_t)*Me-($-tn)*ie)/(ke*Me-he*ie);ge=_t+ke*K-V.x,fe=tn+he*K-V.y;const me=ge*ge+fe*fe;if(me<=2)return new gt(ge,fe);Ce=Math.sqrt(me/2)}else{let We=!1;ke>Number.EPSILON?ie>Number.EPSILON&&(We=!0):ke<-Number.EPSILON?ie<-Number.EPSILON&&(We=!0):Math.sign(he)===Math.sign(Me)&&(We=!0),We?(ge=-he,fe=ke,Ce=Math.sqrt(Fe)):(ge=ke,fe=he,Ce=Math.sqrt(Fe/2))}return new gt(ge/Ce,fe/Ce)}const Y=[];for(let V=0,Ae=ee.length,Se=Ae-1,ge=V+1;V<Ae;V++,Se++,ge++)Se===Ae&&(Se=0),ge===Ae&&(ge=0),Y[V]=X(ee[V],ee[Se],ee[ge]);const ae=[];let se,ue=Y.concat();for(let V=0,Ae=U;V<Ae;V++){const Se=Z[V];se=[];for(let ge=0,fe=Se.length,Ce=fe-1,ke=ge+1;ge<fe;ge++,Ce++,ke++)Ce===fe&&(Ce=0),ke===fe&&(ke=0),se[ge]=X(Se[ge],Se[Ce],Se[ke]);ae.push(se),ue=ue.concat(se)}let Ne;if(_===0)Ne=of.triangulateShape(ee,Z);else{const V=[],Ae=[];for(let Se=0;Se<_;Se++){const ge=Se/_,fe=f*Math.cos(ge*Math.PI/2),Ce=m*Math.sin(ge*Math.PI/2)+v;for(let ke=0,he=ee.length;ke<he;ke++){const ie=W(ee[ke],Y[ke],Ce);bt(ie.x,ie.y,-fe),ge===0&&V.push(ie)}for(let ke=0,he=U;ke<he;ke++){const ie=Z[ke];se=ae[ke];const Me=[];for(let Fe=0,Ve=ie.length;Fe<Ve;Fe++){const We=W(ie[Fe],se[Fe],Ce);bt(We.x,We.y,-fe),ge===0&&Me.push(We)}ge===0&&Ae.push(Me)}}Ne=of.triangulateShape(V,Ae)}const ve=Ne.length,_e=m+v;for(let V=0;V<Q;V++){const Ae=d?W(z[V],ue[V],_e):z[V];x?(N.copy(I.normals[0]).multiplyScalar(Ae.x),R.copy(I.binormals[0]).multiplyScalar(Ae.y),L.copy(T[0]).add(N).add(R),bt(L.x,L.y,L.z)):bt(Ae.x,Ae.y,0)}for(let V=1;V<=u;V++)for(let Ae=0;Ae<Q;Ae++){const Se=d?W(z[Ae],ue[Ae],_e):z[Ae];x?(N.copy(I.normals[V]).multiplyScalar(Se.x),R.copy(I.binormals[V]).multiplyScalar(Se.y),L.copy(T[V]).add(N).add(R),bt(L.x,L.y,L.z)):bt(Se.x,Se.y,h/u*V)}for(let V=_-1;V>=0;V--){const Ae=V/_,Se=f*Math.cos(Ae*Math.PI/2),ge=m*Math.sin(Ae*Math.PI/2)+v;for(let fe=0,Ce=ee.length;fe<Ce;fe++){const ke=W(ee[fe],Y[fe],ge);bt(ke.x,ke.y,h+Se)}for(let fe=0,Ce=Z.length;fe<Ce;fe++){const ke=Z[fe];se=ae[fe];for(let he=0,ie=ke.length;he<ie;he++){const Me=W(ke[he],se[he],ge);x?bt(Me.x,Me.y+T[u-1].y,T[u-1].x+Se):bt(Me.x,Me.y,h+Se)}}}Le(),He();function Le(){const V=r.length/3;if(d){let Ae=0,Se=Q*Ae;for(let ge=0;ge<ve;ge++){const fe=Ne[ge];Ct(fe[2]+Se,fe[1]+Se,fe[0]+Se)}Ae=u+_*2,Se=Q*Ae;for(let ge=0;ge<ve;ge++){const fe=Ne[ge];Ct(fe[0]+Se,fe[1]+Se,fe[2]+Se)}}else{for(let Ae=0;Ae<ve;Ae++){const Se=Ne[Ae];Ct(Se[2],Se[1],Se[0])}for(let Ae=0;Ae<ve;Ae++){const Se=Ne[Ae];Ct(Se[0]+Q*u,Se[1]+Q*u,Se[2]+Q*u)}}i.addGroup(V,r.length/3-V,0)}function He(){const V=r.length/3;let Ae=0;$e(ee,Ae),Ae+=ee.length;for(let Se=0,ge=Z.length;Se<ge;Se++){const fe=Z[Se];$e(fe,Ae),Ae+=fe.length}i.addGroup(V,r.length/3-V,1)}function $e(V,Ae){let Se=V.length;for(;--Se>=0;){const ge=Se;let fe=Se-1;fe<0&&(fe=V.length-1);for(let Ce=0,ke=u+_*2;Ce<ke;Ce++){const he=Q*Ce,ie=Q*(Ce+1),Me=Ae+ge+he,Fe=Ae+fe+he,Ve=Ae+fe+ie,We=Ae+ge+ie;Lt(Me,Fe,Ve,We)}}}function bt(V,Ae,Se){l.push(V),l.push(Ae),l.push(Se)}function Ct(V,Ae,Se){Gt(V),Gt(Ae),Gt(Se);const ge=r.length/3,fe=S.generateTopUV(i,r,ge-3,ge-2,ge-1);qt(fe[0]),qt(fe[1]),qt(fe[2])}function Lt(V,Ae,Se,ge){Gt(V),Gt(Ae),Gt(ge),Gt(Ae),Gt(Se),Gt(ge);const fe=r.length/3,Ce=S.generateSideWallUV(i,r,fe-6,fe-3,fe-2,fe-1);qt(Ce[0]),qt(Ce[1]),qt(Ce[3]),qt(Ce[1]),qt(Ce[2]),qt(Ce[3])}function Gt(V){r.push(l[V*3+0]),r.push(l[V*3+1]),r.push(l[V*3+2])}function qt(V){s.push(V.x),s.push(V.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return kme(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new hN[r.type]().fromJSON(r)),new C2(i,e.options)}}const Dme={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new gt(s,a),new gt(o,l),new gt(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],d=e[r*3],f=e[r*3+1],m=e[r*3+2],v=e[s*3],_=e[s*3+1],y=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new gt(a,1-l),new gt(c,1-h),new gt(d,1-m),new gt(v,1-y)]:[new gt(o,1-l),new gt(u,1-h),new gt(f,1-m),new gt(_,1-y)]}};function kme(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class A2 extends s0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new A2(e.radius,e.detail)}}class M2 extends xi{constructor(e=[new gt(0,-.5),new gt(.5,0),new gt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Ti(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,h=new Re,d=new gt,f=new Re,m=new Re,v=new Re;let _=0,y=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,y=e[S+1].y-e[S].y,f.x=y*1,f.y=-_,f.z=y*0,v.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:_=e[S+1].x-e[S].x,y=e[S+1].y-e[S].y,f.x=y*1,f.y=-_,f.z=y*0,m.copy(f),f.x+=v.x,f.y+=v.y,f.z+=v.z,f.normalize(),l.push(f.x,f.y,f.z),v.copy(m)}for(let S=0;S<=t;S++){const T=i+S*u*r,x=Math.sin(T),I=Math.cos(T);for(let R=0;R<=e.length-1;R++){h.x=e[R].x*x,h.y=e[R].y,h.z=e[R].x*I,a.push(h.x,h.y,h.z),d.x=S/t,d.y=R/(e.length-1),o.push(d.x,d.y);const N=l[3*R+0]*x,L=l[3*R+1],k=l[3*R+0]*I;c.push(N,L,k)}}for(let S=0;S<t;S++)for(let T=0;T<e.length-1;T++){const x=T+S*e.length,I=x,R=x+e.length,N=x+e.length+1,L=x+1;s.push(I,R,L),s.push(N,L,R)}this.setIndex(s),this.setAttribute("position",new Tn(a,3)),this.setAttribute("uv",new Tn(o,2)),this.setAttribute("normal",new Tn(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M2(e.points,e.segments,e.phiStart,e.phiLength)}}class uA extends s0{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uA(e.radius,e.detail)}}class Sx extends xi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,h=e/o,d=t/l,f=[],m=[],v=[],_=[];for(let y=0;y<u;y++){const S=y*d-a;for(let T=0;T<c;T++){const x=T*h-s;m.push(x,-S,0),v.push(0,0,1),_.push(T/o),_.push(1-y/l)}}for(let y=0;y<l;y++)for(let S=0;S<o;S++){const T=S+c*y,x=S+c*(y+1),I=S+1+c*(y+1),R=S+1+c*y;f.push(T,x,R),f.push(x,I,R)}this.setIndex(f),this.setAttribute("position",new Tn(m,3)),this.setAttribute("normal",new Tn(v,3)),this.setAttribute("uv",new Tn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sx(e.width,e.height,e.widthSegments,e.heightSegments)}}class R2 extends xi{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let h=e;const d=(t-e)/r,f=new Re,m=new gt;for(let v=0;v<=r;v++){for(let _=0;_<=i;_++){const y=s+_/i*a;f.x=h*Math.cos(y),f.y=h*Math.sin(y),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,u.push(m.x,m.y)}h+=d}for(let v=0;v<r;v++){const _=v*(i+1);for(let y=0;y<i;y++){const S=y+_,T=S,x=S+i+1,I=S+i+2,R=S+1;o.push(T,x,R),o.push(x,I,R)}}this.setIndex(o),this.setAttribute("position",new Tn(l,3)),this.setAttribute("normal",new Tn(c,3)),this.setAttribute("uv",new Tn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class O2 extends xi{constructor(e=new $_([new gt(0,.5),new gt(-.5,-.5),new gt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Tn(r,3)),this.setAttribute("normal",new Tn(s,3)),this.setAttribute("uv",new Tn(a,2));function c(u){const h=r.length/3,d=u.extractPoints(t);let f=d.shape;const m=d.holes;of.isClockWise(f)===!1&&(f=f.reverse());for(let _=0,y=m.length;_<y;_++){const S=m[_];of.isClockWise(S)===!0&&(m[_]=S.reverse())}const v=of.triangulateShape(f,m);for(let _=0,y=m.length;_<y;_++){const S=m[_];f=f.concat(S)}for(let _=0,y=f.length;_<y;_++){const S=f[_];r.push(S.x,S.y,0),s.push(0,0,1),a.push(S.x,S.y)}for(let _=0,y=v.length;_<y;_++){const S=v[_],T=S[0]+h,x=S[1]+h,I=S[2]+h;i.push(T,x,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Lme(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new O2(i,e.curveSegments)}}function Lme(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class hA extends xi{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],h=new Re,d=new Re,f=[],m=[],v=[],_=[];for(let y=0;y<=i;y++){const S=[],T=y/i;let x=0;y===0&&a===0?x=.5/t:y===i&&l===Math.PI&&(x=-.5/t);for(let I=0;I<=t;I++){const R=I/t;h.x=-e*Math.cos(r+R*s)*Math.sin(a+T*o),h.y=e*Math.cos(a+T*o),h.z=e*Math.sin(r+R*s)*Math.sin(a+T*o),m.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),_.push(R+x,1-T),S.push(c++)}u.push(S)}for(let y=0;y<i;y++)for(let S=0;S<t;S++){const T=u[y][S+1],x=u[y][S],I=u[y+1][S],R=u[y+1][S+1];(y!==0||a>0)&&f.push(T,x,R),(y!==i-1||l<Math.PI)&&f.push(x,I,R)}this.setIndex(f),this.setAttribute("position",new Tn(m,3)),this.setAttribute("normal",new Tn(v,3)),this.setAttribute("uv",new Tn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hA(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class I2 extends s0{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new I2(e.radius,e.detail)}}class N2 extends xi{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new Re,h=new Re,d=new Re;for(let f=0;f<=i;f++)for(let m=0;m<=r;m++){const v=m/r*s,_=f/i*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(v),h.y=(e+t*Math.cos(_))*Math.sin(v),h.z=t*Math.sin(_),o.push(h.x,h.y,h.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(m/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let m=1;m<=r;m++){const v=(r+1)*f+m-1,_=(r+1)*(f-1)+m-1,y=(r+1)*(f-1)+m,S=(r+1)*f+m;a.push(v,_,S),a.push(_,y,S)}this.setIndex(a),this.setAttribute("position",new Tn(o,3)),this.setAttribute("normal",new Tn(l,3)),this.setAttribute("uv",new Tn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class P2 extends xi{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[],h=new Re,d=new Re,f=new Re,m=new Re,v=new Re,_=new Re,y=new Re;for(let T=0;T<=i;++T){const x=T/i*s*Math.PI*2;S(x,s,a,e,f),S(x+.01,s,a,e,m),_.subVectors(m,f),y.addVectors(m,f),v.crossVectors(_,y),y.crossVectors(v,_),v.normalize(),y.normalize();for(let I=0;I<=r;++I){const R=I/r*Math.PI*2,N=-t*Math.cos(R),L=t*Math.sin(R);h.x=f.x+(N*y.x+L*v.x),h.y=f.y+(N*y.y+L*v.y),h.z=f.z+(N*y.z+L*v.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),c.push(d.x,d.y,d.z),u.push(T/i),u.push(I/r)}}for(let T=1;T<=i;T++)for(let x=1;x<=r;x++){const I=(r+1)*(T-1)+(x-1),R=(r+1)*T+(x-1),N=(r+1)*T+x,L=(r+1)*(T-1)+x;o.push(I,R,L),o.push(R,N,L)}this.setIndex(o),this.setAttribute("position",new Tn(l,3)),this.setAttribute("normal",new Tn(c,3)),this.setAttribute("uv",new Tn(u,2));function S(T,x,I,R,N){const L=Math.cos(T),k=Math.sin(T),z=I/x*T,Z=Math.cos(z);N.x=R*(2+Z)*.5*L,N.y=R*(2+Z)*k*.5,N.z=R*Math.sin(z)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class D2 extends xi{constructor(e=new L6(new Re(-1,-1,0),new Re(-1,1,0),new Re(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new Re,l=new Re,c=new gt;let u=new Re;const h=[],d=[],f=[],m=[];v(),this.setIndex(m),this.setAttribute("position",new Tn(h,3)),this.setAttribute("normal",new Tn(d,3)),this.setAttribute("uv",new Tn(f,2));function v(){for(let T=0;T<t;T++)_(T);_(s===!1?t:0),S(),y()}function _(T){u=e.getPointAt(T/t,u);const x=a.normals[T],I=a.binormals[T];for(let R=0;R<=r;R++){const N=R/r*Math.PI*2,L=Math.sin(N),k=-Math.cos(N);l.x=k*x.x+L*I.x,l.y=k*x.y+L*I.y,l.z=k*x.z+L*I.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=u.x+i*l.x,o.y=u.y+i*l.y,o.z=u.z+i*l.z,h.push(o.x,o.y,o.z)}}function y(){for(let T=1;T<=t;T++)for(let x=1;x<=r;x++){const I=(r+1)*(T-1)+(x-1),R=(r+1)*T+(x-1),N=(r+1)*T+x,L=(r+1)*(T-1)+x;m.push(I,R,L),m.push(R,N,L)}}function S(){for(let T=0;T<=t;T++)for(let x=0;x<=r;x++)c.x=T/t,c.y=x/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new D2(new hN[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class JZ extends xi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new Re,s=new Re;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,f=h.count;for(let m=d,v=d+f;m<v;m+=3)for(let _=0;_<3;_++){const y=o.getX(m+_),S=o.getX(m+(_+1)%3);r.fromBufferAttribute(a,y),s.fromBufferAttribute(a,S),GG(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,h=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,h),GG(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Tn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function GG(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var qG=Object.freeze({__proto__:null,BoxGeometry:Lb,CapsuleGeometry:E2,CircleGeometry:T2,ConeGeometry:cA,CylinderGeometry:lA,DodecahedronGeometry:x2,EdgesGeometry:HZ,ExtrudeGeometry:C2,IcosahedronGeometry:A2,LatheGeometry:M2,OctahedronGeometry:uA,PlaneGeometry:Sx,PolyhedronGeometry:s0,RingGeometry:R2,ShapeGeometry:O2,SphereGeometry:hA,TetrahedronGeometry:I2,TorusGeometry:N2,TorusKnotGeometry:P2,TubeGeometry:D2,WireframeGeometry:JZ});class QZ extends Wo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new dn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class eJ extends jo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class B6 extends Wo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new dn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i0,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ru,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tJ extends B6{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new dn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new dn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new dn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nJ extends Wo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new dn(16777215),this.specular=new dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i0,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ru,this.combine=iA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iJ extends Wo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new dn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i0,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class F6 extends Wo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i0,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class rJ extends Wo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i0,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ru,this.combine=iA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z6 extends Wo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=n0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class j6 extends Wo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class sJ extends Wo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new dn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i0,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aJ extends Gc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function F_(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function oJ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lJ(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function v4(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function H6(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push(...a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function Ume(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],d=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*r;if(!(m<t||m>=i)){h.push(c.times[f]);for(let v=0;v<u;++v)d.push(c.values[f*u+v])}}h.length!==0&&(c.times=F_(h,c.times.constructor),c.values=F_(d,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function Bme(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(y){return y.name===o.name&&y.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const m=o.times.length-1;let v;if(s<=o.times[0]){const y=u,S=h-u;v=o.values.slice(y,S)}else if(s>=o.times[m]){const y=m*h+u,S=y+h-u;v=o.values.slice(y,S)}else{const y=o.createInterpolant(),S=u,T=h-u;y.evaluate(s),v=y.resultBuffer.slice(S,T)}l==="quaternion"&&new jc().fromArray(v).normalize().conjugate().toArray(v);const _=c.times.length;for(let y=0;y<_;++y){const S=y*f+d;if(l==="quaternion")jc.multiplyQuaternionsFlat(c.values,S,v,0,c.values,S);else{const T=f-d*2;for(let x=0;x<T;++x)c.values[S+x]-=v[x]}}}return n.blendMode=x6,n}class Fme{static convertArray(e,t){return F_(e,t)}static isTypedArray(e){return oJ(e)}static getKeyframeOrder(e){return lJ(e)}static sortedArray(e,t,i){return v4(e,t,i)}static flattenJSON(e,t,i,r){H6(e,t,i,r)}static subclip(e,t,i,r,s=30){return Ume(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return Bme(e,t,i,r)}}class dA{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cJ extends dA{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:L_,endingEnd:L_}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case U_:s=e,o=2*t-i;break;case Yw:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case U_:a=e,l=2*i-t;break;case Yw:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,m=(i-t)/(r-t),v=m*m,_=v*m,y=-d*_+2*d*v-d*m,S=(1+d)*_+(-1.5-2*d)*v+(-.5+d)*m+1,T=(-1-f)*_+(1.5+f)*v+.5*m,x=f*_-f*v;for(let I=0;I!==o;++I)s[I]=y*a[u+I]+S*a[c+I]+T*a[l+I]+x*a[h+I];return s}}class V6 extends dA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-t)/(r-t),h=1-u;for(let d=0;d!==o;++d)s[d]=a[c+d]*h+a[l+d]*u;return s}}class uJ extends dA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cd{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=F_(t,this.TimeBufferType),this.values=F_(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:F_(e.times,Array),values:F_(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new uJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new V6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ww:t=this.InterpolantFactoryMethodDiscrete;break;case lN:t=this.InterpolantFactoryMethodLinear;break;case TO:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ww;case this.InterpolantFactoryMethodLinear:return lN;case this.InterpolantFactoryMethodSmooth:return TO}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&oJ(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===TO,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const h=o*i,d=h-i,f=h+i;for(let m=0;m!==i;++m){const v=t[h+m];if(v!==t[d+m]||v!==t[f+m]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*i,d=a*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,c=0;c!==i;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Cd.prototype.ValueTypeName="";Cd.prototype.TimeBufferType=Float32Array;Cd.prototype.ValueBufferType=Float32Array;Cd.prototype.DefaultInterpolation=lN;class Ub extends Cd{constructor(e,t,i){super(e,t,i)}}Ub.prototype.ValueTypeName="bool";Ub.prototype.ValueBufferType=Array;Ub.prototype.DefaultInterpolation=Ww;Ub.prototype.InterpolantFactoryMethodLinear=void 0;Ub.prototype.InterpolantFactoryMethodSmooth=void 0;class G6 extends Cd{constructor(e,t,i,r){super(e,t,i,r)}}G6.prototype.ValueTypeName="color";class nC extends Cd{constructor(e,t,i,r){super(e,t,i,r)}}nC.prototype.ValueTypeName="number";class hJ extends dA{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)jc.slerpFlat(s,0,a,c-o,a,c,l);return s}}class fA extends Cd{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new hJ(this.times,this.values,this.getValueSize(),e)}}fA.prototype.ValueTypeName="quaternion";fA.prototype.InterpolantFactoryMethodSmooth=void 0;class Bb extends Cd{constructor(e,t,i){super(e,t,i)}}Bb.prototype.ValueTypeName="string";Bb.prototype.ValueBufferType=Array;Bb.prototype.DefaultInterpolation=Ww;Bb.prototype.InterpolantFactoryMethodLinear=void 0;Bb.prototype.InterpolantFactoryMethodSmooth=void 0;class iC extends Cd{constructor(e,t,i,r){super(e,t,i,r)}}iC.prototype.ValueTypeName="vector";class rC{constructor(e="",t=-1,i=[],r=f2){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=vh(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(jme(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(Cd.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=lJ(l);l=v4(l,1,u),c=v4(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new nC(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=r[h];d||(r[h]=d=[]),d.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,d,f,m,v){if(f.length!==0){const _=[],y=[];H6(f,_,y,m),_.length!==0&&v.push(new h(d,_,y))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let v=0;v<d[m].morphTargets.length;v++)f[d[m].morphTargets[v]]=-1;for(const v in f){const _=[],y=[];for(let S=0;S!==d[m].morphTargets.length;++S){const T=d[m];_.push(T.time),y.push(T.morphTarget===v?1:0)}r.push(new nC(".morphTargetInfluence["+v+"]",_,y))}l=f.length*a}else{const f=".bones["+t[h].name+"]";i(iC,f+".position",d,"pos",r),i(fA,f+".quaternion",d,"rot",r),i(iC,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zme(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nC;case"vector":case"vector2":case"vector3":case"vector4":return iC;case"color":return G6;case"quaternion":return fA;case"bool":case"boolean":return Ub;case"string":return Bb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function jme(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zme(n.type);if(n.times===void 0){const t=[],i=[];H6(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const pg={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class q6{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],m=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const dJ=new q6;class Bu{constructor(e){this.manager=e!==void 0?e:dJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Bu.DEFAULT_MATERIAL_NAME="__DEFAULT";const Jm={};class Hme extends Error{constructor(e,t){super(e),this.response=t}}class Ng extends Bu{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=pg.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Jm[e]!==void 0){Jm[e].push({onLoad:t,onProgress:i,onError:r});return}Jm[e]=[],Jm[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Jm[e],h=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=d?parseInt(d):0,m=f!==0;let v=0;const _=new ReadableStream({start(y){S();function S(){h.read().then(({done:T,value:x})=>{if(T)y.close();else{v+=x.byteLength;const I=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:f});for(let R=0,N=u.length;R<N;R++){const L=u[R];L.onProgress&&L.onProgress(I)}y.enqueue(x),S()}},T=>{y.error(T)})}}});return new Response(_)}else throw new Hme(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o==="")return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{pg.add(e,c);const u=Jm[e];delete Jm[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Jm[e];if(u===void 0)throw this.manager.itemError(e),c;delete Jm[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vme extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ng(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=rC.parse(e[i]);t.push(r)}return t}}class Gme extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new S2,l=new Ng(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(d){const f=s.parse(d,!0);a[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(o.minFilter=Ls),o.image=a,o.format=f.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let m=0;m<f;m++){a[m]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)a[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+v]),a[m].format=d.format,a[m].width=d.width,a[m].height=d.height}o.image=a}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=Ls),o.format=d.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class sC extends Bu{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=pg.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Jw("img");function l(){u(),pg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class qme extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=new oA;s.colorSpace=Mr;const a=new sC(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class $me extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new cf,o=new Ng(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:ud,a.wrapT=c.wrapT!==void 0?c.wrapT:ud,a.magFilter=c.magFilter!==void 0?c.magFilter:Ls,a.minFilter=c.minFilter!==void 0?c.minFilter:Ls,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=_p),c.mipmapCount===1&&(a.minFilter=Ls),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},i,r),a}}class Wme extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=new Js,a=new sC(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class a0 extends mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new dn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class fJ extends a0{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new dn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const P3=new Yn,$G=new Re,WG=new Re;class $6{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gt(512,512),this.mapType=Ya,this.map=null,this.mapPass=null,this.matrix=new Yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _x,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new cr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;$G.setFromMatrixPosition(e.matrixWorld),t.position.copy($G),WG.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(WG),t.updateMatrixWorld(),P3.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(P3),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(P3)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yme extends $6{constructor(){super(new ko(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=vT*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class pJ extends a0{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Yme}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const YG=new Yn,E1=new Re,D3=new Re;class Xme extends $6{constructor(){super(new ko(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gt(4,2),this._viewportCount=6,this._viewports=[new cr(2,1,1,1),new cr(0,1,1,1),new cr(3,1,1,1),new cr(1,1,1,1),new cr(3,0,1,1),new cr(1,0,1,1)],this._cubeDirections=[new Re(1,0,0),new Re(-1,0,0),new Re(0,0,1),new Re(0,0,-1),new Re(0,1,0),new Re(0,-1,0)],this._cubeUps=[new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,0,1),new Re(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),E1.setFromMatrixPosition(e.matrixWorld),i.position.copy(E1),D3.copy(i.position),D3.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(D3),i.updateMatrixWorld(),r.makeTranslation(-E1.x,-E1.y,-E1.z),YG.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YG)}}class mJ extends a0{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Xme}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let Ex=class extends aA{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};class Kme extends $6{constructor(){super(new Ex(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gJ extends a0{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.shadow=new Kme}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class vJ extends a0{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class yJ extends a0{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _J{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class bJ extends a0{constructor(e=new _J,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class k2 extends Bu{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new Ng(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new dn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new dn().setHex(a.value);break;case"v2":r.uniforms[s].value=new gt().fromArray(a.value);break;case"v3":r.uniforms[s].value=new Re().fromArray(a.value);break;case"v4":r.uniforms[s].value=new cr().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Ai().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Yn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new gt().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new gt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return k2.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:QZ,SpriteMaterial:R6,RawShaderMaterial:eJ,ShaderMaterial:jo,PointsMaterial:I6,MeshPhysicalMaterial:tJ,MeshStandardMaterial:B6,MeshPhongMaterial:nJ,MeshToonMaterial:iJ,MeshNormalMaterial:F6,MeshLambertMaterial:rJ,MeshDepthMaterial:z6,MeshDistanceMaterial:j6,MeshBasicMaterial:r0,MeshMatcapMaterial:sJ,LineDashedMaterial:aJ,LineBasicMaterial:Gc,Material:Wo};return new t[e]}}class y4{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SJ extends xi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class EJ extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ng(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(f,m){if(t[m]!==void 0)return t[m];const _=f.interleavedBuffers[m],y=s(f,_.buffer),S=xE(_.type,y),T=new y2(S,_.stride);return T.uuid=_.uuid,t[m]=T,T}function s(f,m){if(i[m]!==void 0)return i[m];const _=f.arrayBuffers[m],y=new Uint32Array(_).buffer;return i[m]=y,y}const a=e.isInstancedBufferGeometry?new SJ:new xi,o=e.data.index;if(o!==void 0){const f=xE(o.type,o.array);a.setIndex(new Vr(f,1))}const l=e.data.attributes;for(const f in l){const m=l[f];let v;if(m.isInterleavedBufferAttribute){const _=r(e.data,m.data);v=new hb(_,m.itemSize,m.offset,m.normalized)}else{const _=xE(m.type,m.array),y=m.isInstancedBufferAttribute?ST:Vr;v=new y(_,m.itemSize,m.normalized)}m.name!==void 0&&(v.name=m.name),m.usage!==void 0&&v.setUsage(m.usage),a.setAttribute(f,v)}const c=e.data.morphAttributes;if(c)for(const f in c){const m=c[f],v=[];for(let _=0,y=m.length;_<y;_++){const S=m[_];let T;if(S.isInterleavedBufferAttribute){const x=r(e.data,S.data);T=new hb(x,S.itemSize,S.offset,S.normalized)}else{const x=xE(S.type,S.array);T=new Vr(x,S.itemSize,S.normalized)}S.name!==void 0&&(T.name=S.name),v.push(T)}a.morphAttributes[f]=v}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,m=h.length;f!==m;++f){const v=h[f];a.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new Re;d.center!==void 0&&f.fromArray(d.center),a.boundingSphere=new Il(f,d.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Zme extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?y4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Ng(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?y4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ng(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let h=!1;for(const d in a)if(a[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new $_().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new _2().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new EJ;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in qG?o=qG[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new k2;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=rC.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return a(u)}else return l.data?{data:xE(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new q6(t);s=new sC(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],d=h.url;if(Array.isArray(d)){const f=[];for(let m=0,v=d.length;m<v;m++){const _=d[m],y=o(_);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new cf(y.data,y.width,y.height)))}r[h.uuid]=new dy(f)}else{const f=o(h.url);r[h.uuid]=new dy(f)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:xE(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new sC(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h],m=await s(f);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new cf(m.data,m.width,m.height)))}i[l.uuid]=new dy(u)}else{const u=await s(l.url);i[l.uuid]=new dy(u)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new oA,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new cf:u=new Js,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=i(o.mapping,Jme)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=i(o.wrap[0],XG),u.wrapT=i(o.wrap[1],XG)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.minFilter!==void 0&&(u.minFilter=i(o.minFilter,KG)),o.magFilter!==void 0&&(u.magFilter=i(o.magFilter,KG)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,t,i,r,s){let a;function o(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let m=0,v=d.length;m<v;m++){const _=d[m];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),f.push(i[_])}return f}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let u,h;switch(e.type){case"Scene":a=new bT,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new dn(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new v2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new g2(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new ko(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ex(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new vJ(e.color,e.intensity);break;case"DirectionalLight":a=new gJ(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new mJ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new yJ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new pJ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new fJ(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new bJ().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),h=l(e.material),a=new LZ(u,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),h=l(e.material),a=new Na(u,h);break;case"InstancedMesh":u=o(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,m=e.instanceColor;a=new UZ(u,h,d),a.instanceMatrix=new ST(new Float32Array(f.array),16),m!==void 0&&(a.instanceColor=new ST(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":u=o(e.geometry),h=l(e.material),a=new BZ(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),a.geometry=u,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(v=>{let _=null,y=null;return v.boundingBox!==void 0&&(_=new ic,_.min.fromArray(v.boundingBox.min),_.max.fromArray(v.boundingBox.max)),v.boundingSphere!==void 0&&(y=new Il,y.radius=v.boundingSphere.radius,y.center.fromArray(v.boundingSphere.center)),{...v,boundingBox:_,boundingSphere:y}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=c(e.matricesTexture.uuid),a._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new Il,a.boundingSphere.center.fromArray(e.boundingSphere.center),a.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(a.boundingBox=new ic,a.boundingBox.min.fromArray(e.boundingBox.min),a.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":a=new kZ;break;case"Line":a=new zy(o(e.geometry),l(e.material));break;case"LineLoop":a=new FZ(o(e.geometry),l(e.material));break;case"LineSegments":a=new jp(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new zZ(o(e.geometry),l(e.material));break;case"Sprite":a=new DZ(l(e.material));break;case"Group":a=new B_;break;case"Bone":a=new O6;break;default:a=new mr}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)a.add(this.parseObject(d[f],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const m=d[f];a.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const m=d[f],v=a.getObjectByProperty("uuid",m.object);v!==void 0&&a.addLevel(v,m.distance,m.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new mr}})}}const Jme={UVMapping:a2,CubeReflectionMapping:Ig,CubeRefractionMapping:Fy,EquirectangularReflectionMapping:Gw,EquirectangularRefractionMapping:qw,CubeUVReflectionMapping:gx},XG={RepeatWrapping:pT,ClampToEdgeWrapping:ud,MirroredRepeatWrapping:$w},KG={NearestFilter:Pa,NearestMipmapNearestFilter:v6,NearestMipmapLinearFilter:TE,LinearFilter:Ls,LinearMipmapNearestFilter:ow,LinearMipmapLinearFilter:_p};class Qme extends Bu{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=pg.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return pg.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),pg.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});pg.add(e,l),s.manager.itemStart(e)}}let cR,W6=class{static getContext(){return cR===void 0&&(cR=new(window.AudioContext||window.webkitAudioContext)),cR}static setContext(e){cR=e}};class ege extends Bu{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Ng(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);W6.getContext().decodeAudioData(c,function(h){t(h)}).catch(o)}catch(c){o(c)}},i,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const ZG=new Yn,JG=new Yn,u_=new Yn;class tge{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ko,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ko,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,u_.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(q_*t.fov*.5)/t.zoom;let o,l;JG.elements[12]=-r,ZG.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,u_.elements[0]=2*t.near/(l-o),u_.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(u_),o=-a*t.aspect-s,l=a*t.aspect-s,u_.elements[0]=2*t.near/(l-o),u_.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(u_)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JG),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ZG)}}class TJ extends ko{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let Y6=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=QG(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=QG();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function QG(){return performance.now()}const h_=new Re,eq=new jc,nge=new Re,d_=new Re;class ige extends mr{constructor(){super(),this.type="AudioListener",this.context=W6.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Y6}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(h_,eq,nge),d_.set(0,0,-1).applyQuaternion(eq),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(h_.x,r),t.positionY.linearRampToValueAtTime(h_.y,r),t.positionZ.linearRampToValueAtTime(h_.z,r),t.forwardX.linearRampToValueAtTime(d_.x,r),t.forwardY.linearRampToValueAtTime(d_.y,r),t.forwardZ.linearRampToValueAtTime(d_.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(h_.x,h_.y,h_.z),t.setOrientation(d_.x,d_.y,d_.z,i.x,i.y,i.z)}}class xJ extends mr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const f_=new Re,tq=new jc,rge=new Re,p_=new Re;class sge extends xJ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(f_,tq,rge),p_.set(0,0,1).applyQuaternion(tq);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(f_.x,i),t.positionY.linearRampToValueAtTime(f_.y,i),t.positionZ.linearRampToValueAtTime(f_.z,i),t.orientationX.linearRampToValueAtTime(p_.x,i),t.orientationY.linearRampToValueAtTime(p_.y,i),t.orientationZ.linearRampToValueAtTime(p_.z,i)}else t.setPosition(f_.x,f_.y,f_.z),t.setOrientation(p_.x,p_.y,p_.z)}}class age{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class wJ{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){jc.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;jc.multiplyQuaternionsFlat(e,a,e,t,e,i),jc.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const X6="\\[\\]\\.:\\/",oge=new RegExp("["+X6+"]","g"),K6="[^"+X6+"]",lge="[^"+X6.replace("\\.","")+"]",cge=/((?:WC+[\/:])*)/.source.replace("WC",K6),uge=/(WCOD+)?/.source.replace("WCOD",lge),hge=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",K6),dge=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",K6),fge=new RegExp("^"+cge+uge+hge+dge+"$"),pge=["material","materials","bones","map"];class mge{constructor(e,t,i){const r=i||_r.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class _r{constructor(e,t,i){this.path=t,this.parsedPath=i||_r.parseTrackName(t),this.node=_r.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new _r.Composite(e,t,i):new _r(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(oge,"")}static parseTrackName(e){const t=fge.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);pge.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=_r.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_r.Composite=mge;_r.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_r.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_r.prototype.GetterByBindingType=[_r.prototype._getValue_direct,_r.prototype._getValue_array,_r.prototype._getValue_arrayElement,_r.prototype._getValue_toArray];_r.prototype.SetterByBindingTypeAndVersioning=[[_r.prototype._setValue_direct,_r.prototype._setValue_direct_setNeedsUpdate,_r.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_array,_r.prototype._setValue_array_setNeedsUpdate,_r.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_arrayElement,_r.prototype._setValue_arrayElement_setNeedsUpdate,_r.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_r.prototype._setValue_fromArray,_r.prototype._setValue_fromArray_setNeedsUpdate,_r.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gge{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vh(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],f=d.uuid;let m=t[f];if(m===void 0){m=l++,t[f]=m,e.push(d);for(let v=0,_=a;v!==_;++v)s[v].push(new _r(d,i[v],r[v]))}else if(m<c){o=e[m];const v=--c,_=e[v];t[_.uuid]=m,e[m]=_,t[f]=v,e[v]=d;for(let y=0,S=a;y!==S;++y){const T=s[y],x=T[v];let I=T[m];T[m]=x,I===void 0&&(I=new _r(d,i[y],r[y])),T[v]=I}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,d=e[h];t[d.uuid]=u,e[u]=d,t[c]=h,e[h]=l;for(let f=0,m=r;f!==m;++f){const v=i[f],_=v[h],y=v[u];v[u]=_,v[h]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const d=--s,f=e[d],m=--a,v=e[m];t[f.uuid]=h,e[h]=f,t[v.uuid]=d,e[d]=v,e.pop();for(let _=0,y=r;_!==y;++_){const S=i[_],T=S[d],x=S[m];S[h]=T,S[d]=x,S.pop()}}else{const d=--a,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let m=0,v=r;m!==v;++m){const _=i[m];_[h]=_[d],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(h);for(let d=u,f=l.length;d!==f;++d){const m=l[d];h[d]=new _r(m,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class CJ{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:L_,endingEnd:L_};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pZ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case x6:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case f2:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===mZ;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===fZ){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=U_,r.endingEnd=U_):(e?r.endingStart=this.zeroSlopeAtStart?U_:L_:r.endingStart=Yw,t?r.endingEnd=this.zeroSlopeAtEnd?U_:L_:r.endingEnd=Yw)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const vge=new Float32Array(1);class yge extends Ch{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const d=r[h],f=d.name;let m=u[f];if(m!==void 0)++m.referenceCount,a[h]=m;else{if(m=a[h],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;m=new wJ(_r.create(i,f,v),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),a[h]=m}o[h].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new V6(new Float32Array(2),new Float32Array(2),1,vge),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?rC.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=f2),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new CJ(this,a,t,i);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?rC.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class _ge extends p2{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new m2(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class bge extends p2{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new sA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Mi{constructor(e){this.value=e}clone(){return new Mi(this.value.clone===void 0?this.value:this.value.clone())}}let Sge=0;class Ege extends Ch{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Sge++}),this.name="",this.usage=Kw,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Tge extends y2{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class xge{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const nq=new Yn;class Z6{constructor(e,t,i=0,r=1/0){this.ray=new yx(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new yT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return nq.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(nq),this}intersectObject(e,t=!0,i=[]){return _4(e,this,i,t),i.sort(iq),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)_4(e[r],this,i,t);return i.sort(iq),i}}function iq(n,e){return n.distance-e.distance}function _4(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,o=s.length;a<o;a++)_4(s[a],e,t,!0)}}class wge{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ti(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ti(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cge{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class J6{constructor(e,t,i,r){J6.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const rq=new gt;class Age{constructor(e=new gt(1/0,1/0),t=new gt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=rq.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rq).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sq=new Re,uR=new Re;class Mge{constructor(e=new Re,t=new Re){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){sq.subVectors(e,this.start),uR.subVectors(this.end,this.start);const i=uR.dot(uR);let s=uR.dot(sq)/i;return t&&(s=Ti(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const aq=new Re;class Rge extends mr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new xi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new Tn(r,3));const s=new Gc({fog:!1,toneMapped:!1});this.cone=new jp(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),aq.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(aq),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bv=new Re,hR=new Yn,k3=new Yn;class Oge extends jp{constructor(e){const t=AJ(e),i=new xi,r=[],s=[],a=new dn(0,0,1),o=new dn(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new Tn(r,3)),i.setAttribute("color",new Tn(s,3));const l=new Gc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");k3.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(hR.multiplyMatrices(k3,o.matrixWorld),Bv.setFromMatrixPosition(hR),r.setXYZ(a,Bv.x,Bv.y,Bv.z),hR.multiplyMatrices(k3,o.parent.matrixWorld),Bv.setFromMatrixPosition(hR),r.setXYZ(a+1,Bv.x,Bv.y,Bv.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function AJ(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...AJ(n.children[t]));return e}class Ige extends Na{constructor(e,t,i){const r=new hA(t,4,2),s=new r0({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Nge=new Re,oq=new dn,lq=new dn;class Pge extends mr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new uA(t);r.rotateY(Math.PI*.5),this.material=new r0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Vr(a,3)),this.add(new Na(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");oq.copy(this.light.color),lq.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?oq:lq;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Nge.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Dge extends jp{constructor(e=10,t=10,i=4473924,r=8947848){i=new dn(i),r=new dn(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let d=0,f=0,m=-o;d<=t;d++,m+=a){l.push(-o,0,m,o,0,m),l.push(m,0,-o,m,0,o);const v=d===s?i:r;v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3}const u=new xi;u.setAttribute("position",new Tn(l,3)),u.setAttribute("color",new Tn(c,3));const h=new Gc({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class kge extends jp{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new dn(s),a=new dn(a);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,m=Math.cos(d)*e;o.push(0,0,0),o.push(f,0,m);const v=h&1?s:a;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<i;h++){const d=h&1?s:a,f=e-e/i*h;for(let m=0;m<r;m++){let v=m/r*(Math.PI*2),_=Math.sin(v)*f,y=Math.cos(v)*f;o.push(_,0,y),l.push(d.r,d.g,d.b),v=(m+1)/r*(Math.PI*2),_=Math.sin(v)*f,y=Math.cos(v)*f,o.push(_,0,y),l.push(d.r,d.g,d.b)}}const c=new xi;c.setAttribute("position",new Tn(o,3)),c.setAttribute("color",new Tn(l,3));const u=new Gc({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cq=new Re,dR=new Re,uq=new Re;class Lge extends mr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new xi;r.setAttribute("position",new Tn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gc({fog:!1,toneMapped:!1});this.lightPlane=new zy(r,s),this.add(this.lightPlane),r=new xi,r.setAttribute("position",new Tn([0,0,0,0,0,1],3)),this.targetLine=new zy(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cq.setFromMatrixPosition(this.light.matrixWorld),dR.setFromMatrixPosition(this.light.target.matrixWorld),uq.subVectors(dR,cq),this.lightPlane.lookAt(dR),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(dR),this.targetLine.scale.z=uq.length()}}const fR=new Re,Ea=new aA;class Uge extends jp{constructor(e){const t=new xi,i=new Gc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,v){l(m),l(v)}function l(m){r.push(0,0,0),s.push(0,0,0),a[m]===void 0&&(a[m]=[]),a[m].push(r.length/3-1)}t.setAttribute("position",new Tn(r,3)),t.setAttribute("color",new Tn(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new dn(16755200),u=new dn(16711680),h=new dn(43775),d=new dn(16777215),f=new dn(3355443);this.setColors(c,u,h,d,f)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Ea.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===hd?-1:0;Ha("c",t,e,Ea,0,0,s),Ha("t",t,e,Ea,0,0,1),Ha("n1",t,e,Ea,-1,-1,s),Ha("n2",t,e,Ea,i,-1,s),Ha("n3",t,e,Ea,-1,r,s),Ha("n4",t,e,Ea,i,r,s),Ha("f1",t,e,Ea,-1,-1,1),Ha("f2",t,e,Ea,i,-1,1),Ha("f3",t,e,Ea,-1,r,1),Ha("f4",t,e,Ea,i,r,1),Ha("u1",t,e,Ea,i*.7,r*1.1,s),Ha("u2",t,e,Ea,-1*.7,r*1.1,s),Ha("u3",t,e,Ea,0,r*2,s),Ha("cf1",t,e,Ea,-1,0,1),Ha("cf2",t,e,Ea,i,0,1),Ha("cf3",t,e,Ea,0,-1,1),Ha("cf4",t,e,Ea,0,r,1),Ha("cn1",t,e,Ea,-1,0,s),Ha("cn2",t,e,Ea,i,0,s),Ha("cn3",t,e,Ea,0,-1,s),Ha("cn4",t,e,Ea,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ha(n,e,t,i,r,s,a){fR.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],fR.x,fR.y,fR.z)}}const pR=new ic;class Bge extends jp{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new xi;s.setIndex(new Vr(i,1)),s.setAttribute("position",new Vr(r,3)),super(s,new Gc({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&pR.setFromObject(this.object),pR.isEmpty())return;const e=pR.min,t=pR.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fge extends jp{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new xi;s.setIndex(new Vr(i,1)),s.setAttribute("position",new Tn(r,3)),super(s,new Gc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class zge extends zy{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new xi;a.setAttribute("position",new Tn(s,3)),a.computeBoundingSphere(),super(a,new Gc({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new xi;l.setAttribute("position",new Tn(o,3)),l.computeBoundingSphere(),this.add(new Na(l,new r0({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const hq=new Re;let mR,L3;class jge extends mr{constructor(e=new Re(0,0,1),t=new Re(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",mR===void 0&&(mR=new xi,mR.setAttribute("position",new Tn([0,0,0,0,1,0],3)),L3=new cA(.5,1,5,1),L3.translate(0,-.5,0)),this.position.copy(t),this.line=new zy(mR,new Gc({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Na(L3,new r0({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{hq.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(hq,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Hge extends jp{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new xi;r.setAttribute("position",new Tn(t,3)),r.setAttribute("color",new Tn(i,3));const s=new Gc({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new dn,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Vge{constructor(){this.type="ShapePath",this.color=new dn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new dN,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const S=[];for(let T=0,x=y.length;T<x;T++){const I=y[T],R=new $_;R.curves=I.curves,S.push(R)}return S}function i(y,S){const T=S.length;let x=!1;for(let I=T-1,R=0;R<T;I=R++){let N=S[I],L=S[R],k=L.x-N.x,z=L.y-N.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(N=S[R],k=-k,L=S[I],z=-z),y.y<N.y||y.y>L.y)continue;if(y.y===N.y){if(y.x===N.x)return!0}else{const Z=z*(y.x-N.x)-k*(y.y-N.y);if(Z===0)return!0;if(Z<0)continue;x=!x}}else{if(y.y!==N.y)continue;if(L.x<=y.x&&y.x<=N.x||N.x<=y.x&&y.x<=L.x)return!0}}return x}const r=of.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new $_,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],d=[];let f=[],m=0,v;d[m]=void 0,f[m]=[];for(let y=0,S=s.length;y<S;y++)o=s[y],v=o.getPoints(),a=r(v),a=e?!a:a,a?(!u&&d[m]&&m++,d[m]={s:new $_,p:v},d[m].s.curves=o.curves,u&&m++,f[m]=[]):f[m].push({h:o,p:v[0]});if(!d[0])return t(s);if(d.length>1){let y=!1,S=0;for(let T=0,x=d.length;T<x;T++)h[T]=[];for(let T=0,x=d.length;T<x;T++){const I=f[T];for(let R=0;R<I.length;R++){const N=I[R];let L=!0;for(let k=0;k<d.length;k++)i(N.p,d[k].p)&&(T!==k&&S++,L?(L=!1,h[k].push(N)):y=!0);L&&h[T].push(N)}}S>0&&y===!1&&(f=h)}let _;for(let y=0,S=d.length;y<S;y++){l=d[y].s,c.push(l),_=f[y];for(let T=0,x=_.length;T<x;T++)l.holes.push(_[T].h)}return c}}class Gge extends Ch{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function qge(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function $ge(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Wge(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function b4(n,e,t,i){const r=Yge(i);switch(t){case S6:return n*e;case vx:return n*e/r.components*r.byteLength;case rA:return n*e/r.components*r.byteLength;case u2:return n*e*2/r.components*r.byteLength;case h2:return n*e*2/r.components*r.byteLength;case E6:return n*e*3/r.components*r.byteLength;case Fo:return n*e*4/r.components*r.byteLength;case d2:return n*e*4/r.components*r.byteLength;case lw:case cw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case uw:case hw:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case UI:case FI:return Math.max(n,16)*Math.max(e,8)/4;case LI:case BI:return Math.max(n,8)*Math.max(e,8)/2;case zI:case jI:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case HI:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case VI:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case GI:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case qI:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case $I:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case WI:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case YI:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case XI:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case KI:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case ZI:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case JI:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case QI:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case eN:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case tN:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case nN:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case dw:case iN:case rN:return Math.ceil(n/4)*Math.ceil(e/4)*16;case T6:case sN:return Math.ceil(n/4)*Math.ceil(e/4)*8;case aN:case oN:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Yge(n){switch(n){case Ya:case y6:return{byteLength:1,components:1};case mT:case _6:case t0:return{byteLength:2,components:1};case l2:case c2:return{byteLength:2,components:4};case Np:case o2:case Zl:return{byteLength:4,components:1};case b6:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Xge{static contain(e,t){return qge(e,t)}static cover(e,t){return $ge(e,t)}static fill(e){return Wge(e)}static getByteLength(e,t,i,r){return b4(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:mx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=mx);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function MJ(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Kge(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,h=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,u),o.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:h}}function i(o,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,o),h.length===0)n.bufferSubData(c,0,u);else{h.sort((f,m)=>f.start-m.start);let d=0;for(let f=1;f<h.length;f++){const m=h[d],v=h[f];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++d,h[d]=v)}h.length=d+1;for(let f=0,m=h.length;f<m;f++){const v=h[f];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}var Zge=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Jge=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Qge=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,eve=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tve=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nve=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ive=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rve=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sve=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ave=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ove=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lve=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cve=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uve=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hve=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dve=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,fve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mve=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gve=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_ve=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,bve=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Sve=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Eve=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Tve=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xve=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,wve=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Cve=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ave="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mve=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Rve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ove=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ive=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Nve=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Pve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Dve=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kve=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Lve=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Uve=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Bve=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Fve=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zve=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jve=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Hve=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Vve=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Gve=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qve=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,$ve=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Wve=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Yve=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Xve=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Kve=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Zve=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Jve=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Qve=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eye=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tye=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nye=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,iye=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rye=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sye=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aye=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oye=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lye=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cye=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,uye=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hye=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dye=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,fye=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pye=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mye=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gye=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vye=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yye=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_ye=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bye=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Sye=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Eye=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Tye=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xye=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wye=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Cye=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Aye=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Mye=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Rye=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Oye=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Iye=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Nye=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Pye=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Dye=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,kye=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lye=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Uye=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Bye=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Fye=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zye=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,jye=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Hye=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Vye=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Gye=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,qye=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,$ye=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Wye=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Yye=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Xye=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Kye=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Zye=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jye=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qye=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,e0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,t0e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,n0e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,i0e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,r0e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,s0e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,a0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,o0e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,l0e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c0e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,u0e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,h0e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d0e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,f0e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,m0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,v0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,y0e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_0e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,S0e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E0e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T0e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x0e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,w0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,C0e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,A0e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,M0e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ni={alphahash_fragment:Zge,alphahash_pars_fragment:Jge,alphamap_fragment:Qge,alphamap_pars_fragment:eve,alphatest_fragment:tve,alphatest_pars_fragment:nve,aomap_fragment:ive,aomap_pars_fragment:rve,batching_pars_vertex:sve,batching_vertex:ave,begin_vertex:ove,beginnormal_vertex:lve,bsdfs:cve,iridescence_fragment:uve,bumpmap_pars_fragment:hve,clipping_planes_fragment:dve,clipping_planes_pars_fragment:fve,clipping_planes_pars_vertex:pve,clipping_planes_vertex:mve,color_fragment:gve,color_pars_fragment:vve,color_pars_vertex:yve,color_vertex:_ve,common:bve,cube_uv_reflection_fragment:Sve,defaultnormal_vertex:Eve,displacementmap_pars_vertex:Tve,displacementmap_vertex:xve,emissivemap_fragment:wve,emissivemap_pars_fragment:Cve,colorspace_fragment:Ave,colorspace_pars_fragment:Mve,envmap_fragment:Rve,envmap_common_pars_fragment:Ove,envmap_pars_fragment:Ive,envmap_pars_vertex:Nve,envmap_physical_pars_fragment:Vve,envmap_vertex:Pve,fog_vertex:Dve,fog_pars_vertex:kve,fog_fragment:Lve,fog_pars_fragment:Uve,gradientmap_pars_fragment:Bve,lightmap_pars_fragment:Fve,lights_lambert_fragment:zve,lights_lambert_pars_fragment:jve,lights_pars_begin:Hve,lights_toon_fragment:Gve,lights_toon_pars_fragment:qve,lights_phong_fragment:$ve,lights_phong_pars_fragment:Wve,lights_physical_fragment:Yve,lights_physical_pars_fragment:Xve,lights_fragment_begin:Kve,lights_fragment_maps:Zve,lights_fragment_end:Jve,logdepthbuf_fragment:Qve,logdepthbuf_pars_fragment:eye,logdepthbuf_pars_vertex:tye,logdepthbuf_vertex:nye,map_fragment:iye,map_pars_fragment:rye,map_particle_fragment:sye,map_particle_pars_fragment:aye,metalnessmap_fragment:oye,metalnessmap_pars_fragment:lye,morphinstance_vertex:cye,morphcolor_vertex:uye,morphnormal_vertex:hye,morphtarget_pars_vertex:dye,morphtarget_vertex:fye,normal_fragment_begin:pye,normal_fragment_maps:mye,normal_pars_fragment:gye,normal_pars_vertex:vye,normal_vertex:yye,normalmap_pars_fragment:_ye,clearcoat_normal_fragment_begin:bye,clearcoat_normal_fragment_maps:Sye,clearcoat_pars_fragment:Eye,iridescence_pars_fragment:Tye,opaque_fragment:xye,packing:wye,premultiplied_alpha_fragment:Cye,project_vertex:Aye,dithering_fragment:Mye,dithering_pars_fragment:Rye,roughnessmap_fragment:Oye,roughnessmap_pars_fragment:Iye,shadowmap_pars_fragment:Nye,shadowmap_pars_vertex:Pye,shadowmap_vertex:Dye,shadowmask_pars_fragment:kye,skinbase_vertex:Lye,skinning_pars_vertex:Uye,skinning_vertex:Bye,skinnormal_vertex:Fye,specularmap_fragment:zye,specularmap_pars_fragment:jye,tonemapping_fragment:Hye,tonemapping_pars_fragment:Vye,transmission_fragment:Gye,transmission_pars_fragment:qye,uv_pars_fragment:$ye,uv_pars_vertex:Wye,uv_vertex:Yye,worldpos_vertex:Xye,background_vert:Kye,background_frag:Zye,backgroundCube_vert:Jye,backgroundCube_frag:Qye,cube_vert:e0e,cube_frag:t0e,depth_vert:n0e,depth_frag:i0e,distanceRGBA_vert:r0e,distanceRGBA_frag:s0e,equirect_vert:a0e,equirect_frag:o0e,linedashed_vert:l0e,linedashed_frag:c0e,meshbasic_vert:u0e,meshbasic_frag:h0e,meshlambert_vert:d0e,meshlambert_frag:f0e,meshmatcap_vert:p0e,meshmatcap_frag:m0e,meshnormal_vert:g0e,meshnormal_frag:v0e,meshphong_vert:y0e,meshphong_frag:_0e,meshphysical_vert:b0e,meshphysical_frag:S0e,meshtoon_vert:E0e,meshtoon_frag:T0e,points_vert:x0e,points_frag:w0e,shadow_vert:C0e,shadow_frag:A0e,sprite_vert:M0e,sprite_frag:R0e},an={common:{diffuse:{value:new dn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ai},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ai}},envmap:{envMap:{value:null},envMapRotation:{value:new Ai},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ai}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ai}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ai},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ai},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ai},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ai}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ai}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ai}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0},uvTransform:{value:new Ai}},sprite:{diffuse:{value:new dn(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ai},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0}}},ef={basic:{uniforms:Dc([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.fog]),vertexShader:Ni.meshbasic_vert,fragmentShader:Ni.meshbasic_frag},lambert:{uniforms:Dc([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.fog,an.lights,{emissive:{value:new dn(0)}}]),vertexShader:Ni.meshlambert_vert,fragmentShader:Ni.meshlambert_frag},phong:{uniforms:Dc([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.fog,an.lights,{emissive:{value:new dn(0)},specular:{value:new dn(1118481)},shininess:{value:30}}]),vertexShader:Ni.meshphong_vert,fragmentShader:Ni.meshphong_frag},standard:{uniforms:Dc([an.common,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.roughnessmap,an.metalnessmap,an.fog,an.lights,{emissive:{value:new dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ni.meshphysical_vert,fragmentShader:Ni.meshphysical_frag},toon:{uniforms:Dc([an.common,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.gradientmap,an.fog,an.lights,{emissive:{value:new dn(0)}}]),vertexShader:Ni.meshtoon_vert,fragmentShader:Ni.meshtoon_frag},matcap:{uniforms:Dc([an.common,an.bumpmap,an.normalmap,an.displacementmap,an.fog,{matcap:{value:null}}]),vertexShader:Ni.meshmatcap_vert,fragmentShader:Ni.meshmatcap_frag},points:{uniforms:Dc([an.points,an.fog]),vertexShader:Ni.points_vert,fragmentShader:Ni.points_frag},dashed:{uniforms:Dc([an.common,an.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ni.linedashed_vert,fragmentShader:Ni.linedashed_frag},depth:{uniforms:Dc([an.common,an.displacementmap]),vertexShader:Ni.depth_vert,fragmentShader:Ni.depth_frag},normal:{uniforms:Dc([an.common,an.bumpmap,an.normalmap,an.displacementmap,{opacity:{value:1}}]),vertexShader:Ni.meshnormal_vert,fragmentShader:Ni.meshnormal_frag},sprite:{uniforms:Dc([an.sprite,an.fog]),vertexShader:Ni.sprite_vert,fragmentShader:Ni.sprite_frag},background:{uniforms:{uvTransform:{value:new Ai},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ni.background_vert,fragmentShader:Ni.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ai}},vertexShader:Ni.backgroundCube_vert,fragmentShader:Ni.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ni.cube_vert,fragmentShader:Ni.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ni.equirect_vert,fragmentShader:Ni.equirect_frag},distanceRGBA:{uniforms:Dc([an.common,an.displacementmap,{referencePosition:{value:new Re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ni.distanceRGBA_vert,fragmentShader:Ni.distanceRGBA_frag},shadow:{uniforms:Dc([an.lights,an.fog,{color:{value:new dn(0)},opacity:{value:1}}]),vertexShader:Ni.shadow_vert,fragmentShader:Ni.shadow_frag}};ef.physical={uniforms:Dc([ef.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ai},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ai},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ai},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ai},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ai},sheen:{value:0},sheenColor:{value:new dn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ai},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ai},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ai},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ai},attenuationDistance:{value:0},attenuationColor:{value:new dn(0)},specularColor:{value:new dn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ai},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ai},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ai}}]),vertexShader:Ni.meshphysical_vert,fragmentShader:Ni.meshphysical_frag};const gR={r:0,b:0,g:0},m_=new Ru,O0e=new Yn;function I0e(n,e,t,i,r,s,a){const o=new dn(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function m(T){let x=T.isScene===!0?T.background:null;return x&&x.isTexture&&(x=(T.backgroundBlurriness>0?t:e).get(x)),x}function v(T){let x=!1;const I=m(T);I===null?y(o,l):I&&I.isColor&&(y(I,1),x=!0);const R=n.xr.getEnvironmentBlendMode();R==="additive"?i.buffers.color.setClear(0,0,0,1,a):R==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||x)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(T,x){const I=m(x);I&&(I.isCubeTexture||I.mapping===gx)?(u===void 0&&(u=new Na(new Lb(1,1,1),new jo({name:"BackgroundCubeMaterial",uniforms:_T(ef.backgroundCube.uniforms),vertexShader:ef.backgroundCube.vertexShader,fragmentShader:ef.backgroundCube.fragmentShader,side:Bo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,N,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),m_.copy(x.backgroundRotation),m_.x*=-1,m_.y*=-1,m_.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(m_.y*=-1,m_.z*=-1),u.material.uniforms.envMap.value=I,u.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(O0e.makeRotationFromEuler(m_)),u.material.toneMapped=or.getTransfer(I.colorSpace)!==Wr,(h!==I||d!==I.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=I,d=I.version,f=n.toneMapping),u.layers.enableAll(),T.unshift(u,u.geometry,u.material,0,0,null)):I&&I.isTexture&&(c===void 0&&(c=new Na(new Sx(2,2),new jo({name:"BackgroundMaterial",uniforms:_T(ef.background.uniforms),vertexShader:ef.background.vertexShader,fragmentShader:ef.background.fragmentShader,side:Ip,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=I,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=or.getTransfer(I.colorSpace)!==Wr,I.matrixAutoUpdate===!0&&I.updateMatrix(),c.material.uniforms.uvTransform.value.copy(I.matrix),(h!==I||d!==I.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=I,d=I.version,f=n.toneMapping),c.layers.enableAll(),T.unshift(c,c.geometry,c.material,0,0,null))}function y(T,x){T.getRGB(gR,RZ(n)),i.buffers.color.setClear(gR.r,gR.g,gR.b,x,a)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return o},setClearColor:function(T,x=1){o.set(T),l=x,y(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,y(o,l)},render:v,addToRenderList:_,dispose:S}}function N0e(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=d(null);let s=r,a=!1;function o(z,Z,H,q,U){let ee=!1;const W=h(q,H,Z);s!==W&&(s=W,c(s.object)),ee=f(z,q,H,U),ee&&m(z,q,H,U),U!==null&&e.update(U,n.ELEMENT_ARRAY_BUFFER),(ee||a)&&(a=!1,x(z,Z,H,q),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(U).buffer))}function l(){return n.createVertexArray()}function c(z){return n.bindVertexArray(z)}function u(z){return n.deleteVertexArray(z)}function h(z,Z,H){const q=H.wireframe===!0;let U=i[z.id];U===void 0&&(U={},i[z.id]=U);let ee=U[Z.id];ee===void 0&&(ee={},U[Z.id]=ee);let W=ee[q];return W===void 0&&(W=d(l()),ee[q]=W),W}function d(z){const Z=[],H=[],q=[];for(let U=0;U<t;U++)Z[U]=0,H[U]=0,q[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Z,enabledAttributes:H,attributeDivisors:q,object:z,attributes:{},index:null}}function f(z,Z,H,q){const U=s.attributes,ee=Z.attributes;let W=0;const Q=H.getAttributes();for(const X in Q)if(Q[X].location>=0){const ae=U[X];let se=ee[X];if(se===void 0&&(X==="instanceMatrix"&&z.instanceMatrix&&(se=z.instanceMatrix),X==="instanceColor"&&z.instanceColor&&(se=z.instanceColor)),ae===void 0||ae.attribute!==se||se&&ae.data!==se.data)return!0;W++}return s.attributesNum!==W||s.index!==q}function m(z,Z,H,q){const U={},ee=Z.attributes;let W=0;const Q=H.getAttributes();for(const X in Q)if(Q[X].location>=0){let ae=ee[X];ae===void 0&&(X==="instanceMatrix"&&z.instanceMatrix&&(ae=z.instanceMatrix),X==="instanceColor"&&z.instanceColor&&(ae=z.instanceColor));const se={};se.attribute=ae,ae&&ae.data&&(se.data=ae.data),U[X]=se,W++}s.attributes=U,s.attributesNum=W,s.index=q}function v(){const z=s.newAttributes;for(let Z=0,H=z.length;Z<H;Z++)z[Z]=0}function _(z){y(z,0)}function y(z,Z){const H=s.newAttributes,q=s.enabledAttributes,U=s.attributeDivisors;H[z]=1,q[z]===0&&(n.enableVertexAttribArray(z),q[z]=1),U[z]!==Z&&(n.vertexAttribDivisor(z,Z),U[z]=Z)}function S(){const z=s.newAttributes,Z=s.enabledAttributes;for(let H=0,q=Z.length;H<q;H++)Z[H]!==z[H]&&(n.disableVertexAttribArray(H),Z[H]=0)}function T(z,Z,H,q,U,ee,W){W===!0?n.vertexAttribIPointer(z,Z,H,U,ee):n.vertexAttribPointer(z,Z,H,q,U,ee)}function x(z,Z,H,q){v();const U=q.attributes,ee=H.getAttributes(),W=Z.defaultAttributeValues;for(const Q in ee){const X=ee[Q];if(X.location>=0){let Y=U[Q];if(Y===void 0&&(Q==="instanceMatrix"&&z.instanceMatrix&&(Y=z.instanceMatrix),Q==="instanceColor"&&z.instanceColor&&(Y=z.instanceColor)),Y!==void 0){const ae=Y.normalized,se=Y.itemSize,ue=e.get(Y);if(ue===void 0)continue;const Ne=ue.buffer,ve=ue.type,_e=ue.bytesPerElement,Le=ve===n.INT||ve===n.UNSIGNED_INT||Y.gpuType===o2;if(Y.isInterleavedBufferAttribute){const He=Y.data,$e=He.stride,bt=Y.offset;if(He.isInstancedInterleavedBuffer){for(let Ct=0;Ct<X.locationSize;Ct++)y(X.location+Ct,He.meshPerAttribute);z.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let Ct=0;Ct<X.locationSize;Ct++)_(X.location+Ct);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Ct=0;Ct<X.locationSize;Ct++)T(X.location+Ct,se/X.locationSize,ve,ae,$e*_e,(bt+se/X.locationSize*Ct)*_e,Le)}else{if(Y.isInstancedBufferAttribute){for(let He=0;He<X.locationSize;He++)y(X.location+He,Y.meshPerAttribute);z.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let He=0;He<X.locationSize;He++)_(X.location+He);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let He=0;He<X.locationSize;He++)T(X.location+He,se/X.locationSize,ve,ae,se*_e,se/X.locationSize*He*_e,Le)}}else if(W!==void 0){const ae=W[Q];if(ae!==void 0)switch(ae.length){case 2:n.vertexAttrib2fv(X.location,ae);break;case 3:n.vertexAttrib3fv(X.location,ae);break;case 4:n.vertexAttrib4fv(X.location,ae);break;default:n.vertexAttrib1fv(X.location,ae)}}}}S()}function I(){L();for(const z in i){const Z=i[z];for(const H in Z){const q=Z[H];for(const U in q)u(q[U].object),delete q[U];delete Z[H]}delete i[z]}}function R(z){if(i[z.id]===void 0)return;const Z=i[z.id];for(const H in Z){const q=Z[H];for(const U in q)u(q[U].object),delete q[U];delete Z[H]}delete i[z.id]}function N(z){for(const Z in i){const H=i[Z];if(H[z.id]===void 0)continue;const q=H[z.id];for(const U in q)u(q[U].object),delete q[U];delete H[z.id]}}function L(){k(),a=!0,s!==r&&(s=r,c(s.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:L,resetDefaultState:k,dispose:I,releaseStatesOfGeometry:R,releaseStatesOfProgram:N,initAttributes:v,enableAttribute:_,disableUnusedAttributes:S}}function P0e(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function a(c,u,h){h!==0&&(n.drawArraysInstanced(i,c,u,h),t.update(u,i,h))}function o(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,h);let f=0;for(let m=0;m<h;m++)f+=u[m];t.update(f,i,1)}function l(c,u,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let m=0;m<c.length;m++)a(c[m],u[m],d[m]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,d,0,h);let m=0;for(let v=0;v<h;v++)m+=u[v]*d[v];t.update(m,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function D0e(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(N){return!(N!==Fo&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(N){const L=N===t0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==Ya&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==Zl&&!L)}function l(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),T=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),I=m>0,R=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:f,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:_,maxAttributes:y,maxVertexUniforms:S,maxVaryings:T,maxFragmentUniforms:x,vertexTextures:I,maxSamples:R}}function k0e(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Zv,o=new Ai,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||i!==0||r;return r=d,i=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const m=h.clippingPlanes,v=h.clipIntersection,_=h.clipShadows,y=n.get(h);if(!r||m===null||m.length===0||s&&!_)s?u(null):c();else{const S=s?0:i,T=S*4;let x=y.clippingState||null;l.value=x,x=u(m,d,T,f);for(let I=0;I!==T;++I)x[I]=t[I];y.clippingState=x,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,d,f,m){const v=h!==null?h.length:0;let _=null;if(v!==0){if(_=l.value,m!==!0||_===null){const y=f+v*4,S=d.matrixWorldInverse;o.getNormalMatrix(S),(_===null||_.length<y)&&(_=new Float32Array(y));for(let T=0,x=f;T!==v;++T,x+=4)a.copy(h[T]).applyMatrix4(S,o),a.normal.toArray(_,x),_[x+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,_}}function L0e(n){let e=new WeakMap;function t(a,o){return o===Gw?a.mapping=Ig:o===qw&&(a.mapping=Fy),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===Gw||o===qw)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new NZ(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const wE=4,dq=[.125,.215,.35,.446,.526,.582],I_=20,U3=new Ex,fq=new dn;let B3=null,F3=0,z3=0,j3=!1;const E_=(1+Math.sqrt(5))/2,$S=1/E_,pq=[new Re(-E_,$S,0),new Re(E_,$S,0),new Re(-$S,0,E_),new Re($S,0,E_),new Re(0,E_,-$S),new Re(0,E_,$S),new Re(-1,1,-1),new Re(1,1,-1),new Re(-1,1,1),new Re(1,1,1)],U0e=new Re;class S4{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:a=256,position:o=U0e}=s;B3=this._renderer.getRenderTarget(),F3=this._renderer.getActiveCubeFace(),z3=this._renderer.getActiveMipmapLevel(),j3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=vq(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gq(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(B3,F3,z3),this._renderer.xr.enabled=j3,e.scissorTest=!1,vR(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ig||e.mapping===Fy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),B3=this._renderer.getRenderTarget(),F3=this._renderer.getActiveCubeFace(),z3=this._renderer.getActiveMipmapLevel(),j3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ls,minFilter:Ls,generateMipmaps:!1,type:t0,format:Fo,colorSpace:Pp,depthBuffer:!1},r=mq(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mq(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=B0e(s)),this._blurMaterial=F0e(s,e,t)}return r}_compileMaterial(e){const t=new Na(this._lodPlanes[0],e);this._renderer.compile(t,U3)}_sceneToCubeUV(e,t,i,r,s){const l=new ko(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,f=h.toneMapping;h.getClearColor(fq),h.toneMapping=lf,h.autoClear=!1;const m=new r0({name:"PMREM.Background",side:Bo,depthWrite:!1,depthTest:!1}),v=new Na(new Lb,m);let _=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,_=!0):(m.color.copy(fq),_=!0);for(let S=0;S<6;S++){const T=S%3;T===0?(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[S],s.y,s.z)):T===1?(l.up.set(0,0,c[S]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[S],s.z)):(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[S]));const x=this._cubeSize;vR(r,T*x,S>2?x:0,x,x),h.setRenderTarget(r),_&&h.render(v,l),h.render(e,l)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=f,h.autoClear=d,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ig||e.mapping===Fy;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=vq()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gq());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Na(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;vR(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,U3)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=pq[(r-s-1)%pq.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Na(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*I_-1),v=s/m,_=isFinite(s)?1+Math.floor(u*v):I_;_>I_&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${I_}`);const y=[];let S=0;for(let N=0;N<I_;++N){const L=N/v,k=Math.exp(-L*L/2);y.push(k),N===0?S+=k:N<_&&(S+=2*k)}for(let N=0;N<y.length;N++)y[N]=y[N]/S;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=y,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:T}=this;d.dTheta.value=m,d.mipInt.value=T-i;const x=this._sizeLods[r],I=3*x*(r>T-wE?r-T+wE:0),R=4*(this._cubeSize-x);vR(t,I,R,3*x,2*x),l.setRenderTarget(t),l.render(h,U3)}}function B0e(n){const e=[],t=[],i=[];let r=n;const s=n-wE+1+dq.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-wE?l=dq[a-n+wE-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,m=6,v=3,_=2,y=1,S=new Float32Array(v*m*f),T=new Float32Array(_*m*f),x=new Float32Array(y*m*f);for(let R=0;R<f;R++){const N=R%3*2/3-1,L=R>2?0:-1,k=[N,L,0,N+2/3,L,0,N+2/3,L+1,0,N,L,0,N+2/3,L+1,0,N,L+1,0];S.set(k,v*m*R),T.set(d,_*m*R);const z=[R,R,R,R,R,R];x.set(z,y*m*R)}const I=new xi;I.setAttribute("position",new Vr(S,v)),I.setAttribute("uv",new Vr(T,_)),I.setAttribute("faceIndex",new Vr(x,y)),e.push(I),r>wE&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function mq(n,e,t){const i=new Xa(n,e,t);return i.texture.mapping=gx,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function vR(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function F0e(n,e,t){const i=new Float32Array(I_),r=new Re(0,1,0);return new jo({name:"SphericalGaussianBlur",defines:{n:I_,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Q6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:nc,depthTest:!1,depthWrite:!1})}function gq(){return new jo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Q6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:nc,depthTest:!1,depthWrite:!1})}function vq(){return new jo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Q6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:nc,depthTest:!1,depthWrite:!1})}function Q6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function z0e(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Gw||l===qw,u=l===Ig||l===Fy;if(c||u){let h=e.get(o);const d=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==d)return t===null&&(t=new S4(n)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const f=o.image;return c&&f&&f.height>0||u&&f&&r(f)?(t===null&&(t=new S4(n)),h=c?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function j0e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&xO("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function H0e(n,e,t,i){const r={},s=new WeakMap;function a(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);d.removeEventListener("dispose",a),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(h,d){return r[d.id]===!0||(d.addEventListener("dispose",a),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const f in d)e.update(d[f],n.ARRAY_BUFFER)}function c(h){const d=[],f=h.index,m=h.attributes.position;let v=0;if(f!==null){const S=f.array;v=f.version;for(let T=0,x=S.length;T<x;T+=3){const I=S[T+0],R=S[T+1],N=S[T+2];d.push(I,R,R,N,N,I)}}else if(m!==void 0){const S=m.array;v=m.version;for(let T=0,x=S.length/3-1;T<x;T+=3){const I=T+0,R=T+1,N=T+2;d.push(I,R,R,N,N,I)}}else return;const _=new(wZ(d)?M6:A6)(d,1);_.version=v;const y=s.get(h);y&&e.remove(y),s.set(h,_)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function V0e(n,e,t){let i;function r(d){i=d}let s,a;function o(d){s=d.type,a=d.bytesPerElement}function l(d,f){n.drawElements(i,f,s,d*a),t.update(f,i,1)}function c(d,f,m){m!==0&&(n.drawElementsInstanced(i,f,s,d*a,m),t.update(f,i,m))}function u(d,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,d,0,m);let _=0;for(let y=0;y<m;y++)_+=f[y];t.update(_,i,1)}function h(d,f,m,v){if(m===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let y=0;y<d.length;y++)c(d[y]/a,f[y],v[y]);else{_.multiDrawElementsInstancedWEBGL(i,f,0,s,d,0,v,0,m);let y=0;for(let S=0;S<m;S++)y+=f[S]*v[S];t.update(y,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function G0e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function q0e(n,e,t){const i=new WeakMap,r=new cr;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=u!==void 0?u.length:0;let d=i.get(o);if(d===void 0||d.count!==h){let k=function(){N.dispose(),i.delete(o),o.removeEventListener("dispose",k)};d!==void 0&&d.texture.dispose();const f=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,_=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],S=o.morphAttributes.color||[];let T=0;f===!0&&(T=1),m===!0&&(T=2),v===!0&&(T=3);let x=o.attributes.position.count*T,I=1;x>e.maxTextureSize&&(I=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const R=new Float32Array(x*I*4*h),N=new sA(R,x,I,h);N.type=Zl,N.needsUpdate=!0;const L=T*4;for(let z=0;z<h;z++){const Z=_[z],H=y[z],q=S[z],U=x*I*4*z;for(let ee=0;ee<Z.count;ee++){const W=ee*L;f===!0&&(r.fromBufferAttribute(Z,ee),R[U+W+0]=r.x,R[U+W+1]=r.y,R[U+W+2]=r.z,R[U+W+3]=0),m===!0&&(r.fromBufferAttribute(H,ee),R[U+W+4]=r.x,R[U+W+5]=r.y,R[U+W+6]=r.z,R[U+W+7]=0),v===!0&&(r.fromBufferAttribute(q,ee),R[U+W+8]=r.x,R[U+W+9]=r.y,R[U+W+10]=r.z,R[U+W+11]=q.itemSize===4?r.w:1)}}d={count:h,texture:N,size:new gt(x,I)},i.set(o,d),o.addEventListener("dispose",k)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let f=0;for(let v=0;v<c.length;v++)f+=c[v];const m=o.morphTargetsRelative?1:1-f;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function $0e(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const RJ=new Js,yq=new bx(1,1),OJ=new sA,IJ=new m2,NJ=new oA,_q=[],bq=[],Sq=new Float32Array(16),Eq=new Float32Array(9),Tq=new Float32Array(4);function Tx(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=_q[r];if(s===void 0&&(s=new Float32Array(r),_q[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Ho(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Vo(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function L2(n,e){let t=bq[e];t===void 0&&(t=new Int32Array(e),bq[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function W0e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Y0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ho(t,e))return;n.uniform2fv(this.addr,e),Vo(t,e)}}function X0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ho(t,e))return;n.uniform3fv(this.addr,e),Vo(t,e)}}function K0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ho(t,e))return;n.uniform4fv(this.addr,e),Vo(t,e)}}function Z0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ho(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vo(t,e)}else{if(Ho(t,i))return;Tq.set(i),n.uniformMatrix2fv(this.addr,!1,Tq),Vo(t,i)}}function J0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ho(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vo(t,e)}else{if(Ho(t,i))return;Eq.set(i),n.uniformMatrix3fv(this.addr,!1,Eq),Vo(t,i)}}function Q0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ho(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vo(t,e)}else{if(Ho(t,i))return;Sq.set(i),n.uniformMatrix4fv(this.addr,!1,Sq),Vo(t,i)}}function e_e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function t_e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ho(t,e))return;n.uniform2iv(this.addr,e),Vo(t,e)}}function n_e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ho(t,e))return;n.uniform3iv(this.addr,e),Vo(t,e)}}function i_e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ho(t,e))return;n.uniform4iv(this.addr,e),Vo(t,e)}}function r_e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function s_e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ho(t,e))return;n.uniform2uiv(this.addr,e),Vo(t,e)}}function a_e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ho(t,e))return;n.uniform3uiv(this.addr,e),Vo(t,e)}}function o_e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ho(t,e))return;n.uniform4uiv(this.addr,e),Vo(t,e)}}function l_e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(yq.compareFunction=w6,s=yq):s=RJ,t.setTexture2D(e||s,r)}function c_e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||IJ,r)}function u_e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||NJ,r)}function h_e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||OJ,r)}function d_e(n){switch(n){case 5126:return W0e;case 35664:return Y0e;case 35665:return X0e;case 35666:return K0e;case 35674:return Z0e;case 35675:return J0e;case 35676:return Q0e;case 5124:case 35670:return e_e;case 35667:case 35671:return t_e;case 35668:case 35672:return n_e;case 35669:case 35673:return i_e;case 5125:return r_e;case 36294:return s_e;case 36295:return a_e;case 36296:return o_e;case 35678:case 36198:case 36298:case 36306:case 35682:return l_e;case 35679:case 36299:case 36307:return c_e;case 35680:case 36300:case 36308:case 36293:return u_e;case 36289:case 36303:case 36311:case 36292:return h_e}}function f_e(n,e){n.uniform1fv(this.addr,e)}function p_e(n,e){const t=Tx(e,this.size,2);n.uniform2fv(this.addr,t)}function m_e(n,e){const t=Tx(e,this.size,3);n.uniform3fv(this.addr,t)}function g_e(n,e){const t=Tx(e,this.size,4);n.uniform4fv(this.addr,t)}function v_e(n,e){const t=Tx(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function y_e(n,e){const t=Tx(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function __e(n,e){const t=Tx(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function b_e(n,e){n.uniform1iv(this.addr,e)}function S_e(n,e){n.uniform2iv(this.addr,e)}function E_e(n,e){n.uniform3iv(this.addr,e)}function T_e(n,e){n.uniform4iv(this.addr,e)}function x_e(n,e){n.uniform1uiv(this.addr,e)}function w_e(n,e){n.uniform2uiv(this.addr,e)}function C_e(n,e){n.uniform3uiv(this.addr,e)}function A_e(n,e){n.uniform4uiv(this.addr,e)}function M_e(n,e,t){const i=this.cache,r=e.length,s=L2(t,r);Ho(i,s)||(n.uniform1iv(this.addr,s),Vo(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||RJ,s[a])}function R_e(n,e,t){const i=this.cache,r=e.length,s=L2(t,r);Ho(i,s)||(n.uniform1iv(this.addr,s),Vo(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||IJ,s[a])}function O_e(n,e,t){const i=this.cache,r=e.length,s=L2(t,r);Ho(i,s)||(n.uniform1iv(this.addr,s),Vo(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||NJ,s[a])}function I_e(n,e,t){const i=this.cache,r=e.length,s=L2(t,r);Ho(i,s)||(n.uniform1iv(this.addr,s),Vo(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||OJ,s[a])}function N_e(n){switch(n){case 5126:return f_e;case 35664:return p_e;case 35665:return m_e;case 35666:return g_e;case 35674:return v_e;case 35675:return y_e;case 35676:return __e;case 5124:case 35670:return b_e;case 35667:case 35671:return S_e;case 35668:case 35672:return E_e;case 35669:case 35673:return T_e;case 5125:return x_e;case 36294:return w_e;case 36295:return C_e;case 36296:return A_e;case 35678:case 36198:case 36298:case 36306:case 35682:return M_e;case 35679:case 36299:case 36307:return R_e;case 35680:case 36300:case 36308:case 36293:return O_e;case 36289:case 36303:case 36311:case 36292:return I_e}}class P_e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=d_e(t.type)}}class D_e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=N_e(t.type)}}class k_e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const H3=/(\w+)(\])?(\[|\.)?/g;function xq(n,e){n.seq.push(e),n.map[e.id]=e}function L_e(n,e,t){const i=n.name,r=i.length;for(H3.lastIndex=0;;){const s=H3.exec(i),a=H3.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){xq(t,c===void 0?new P_e(o,n,e):new D_e(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new k_e(o),xq(t,h)),t=h}}}class CO{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);L_e(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function wq(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const U_e=37297;let B_e=0;function F_e(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const Cq=new Ai;function z_e(n){or._getMatrix(Cq,or.workingColorSpace,n);const e=`mat3( ${Cq.elements.map(t=>t.toFixed(4))} )`;switch(or.getTransfer(n)){case Xw:return[e,"LinearTransferOETF"];case Wr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Aq(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+F_e(n.getShaderSource(e),a)}else return r}function j_e(n,e){const t=z_e(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function H_e(n,e){let t;switch(e){case aZ:t="Linear";break;case oZ:t="Reinhard";break;case lZ:t="Cineon";break;case g6:t="ACESFilmic";break;case uZ:t="AgX";break;case hZ:t="Neutral";break;case cZ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const yR=new Re;function V_e(){or.getLuminanceCoefficients(yR);const n=yR.x.toFixed(4),e=yR.y.toFixed(4),t=yR.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function G_e(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($1).join(`
`)}function q_e(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function $_e(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function $1(n){return n!==""}function Mq(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Rq(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const W_e=/^[ \t]*#include +<([\w\d./]+)>/gm;function E4(n){return n.replace(W_e,X_e)}const Y_e=new Map;function X_e(n,e){let t=Ni[e];if(t===void 0){const i=Y_e.get(e);if(i!==void 0)t=Ni[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return E4(t)}const K_e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Oq(n){return n.replace(K_e,Z_e)}function Z_e(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Iq(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function J_e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===s2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===aw?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Jd&&(e="SHADOWMAP_TYPE_VSM"),e}function Q_e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ig:case Fy:e="ENVMAP_TYPE_CUBE";break;case gx:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ebe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Fy:e="ENVMAP_MODE_REFRACTION";break}return e}function tbe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case iA:e="ENVMAP_BLENDING_MULTIPLY";break;case rZ:e="ENVMAP_BLENDING_MIX";break;case sZ:e="ENVMAP_BLENDING_ADD";break}return e}function nbe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function ibe(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=J_e(t),c=Q_e(t),u=ebe(t),h=tbe(t),d=nbe(t),f=G_e(t),m=q_e(s),v=r.createProgram();let _,y,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter($1).join(`
`),_.length>0&&(_+=`
`),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter($1).join(`
`),y.length>0&&(y+=`
`)):(_=[Iq(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($1).join(`
`),y=[Iq(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==lf?"#define TONE_MAPPING":"",t.toneMapping!==lf?Ni.tonemapping_pars_fragment:"",t.toneMapping!==lf?H_e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ni.colorspace_pars_fragment,j_e("linearToOutputTexel",t.outputColorSpace),V_e(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($1).join(`
`)),a=E4(a),a=Mq(a,t),a=Rq(a,t),o=E4(o),o=Mq(o,t),o=Rq(o,t),a=Oq(a),o=Oq(o),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,_=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,y=["#define varying in",t.glslVersion===f4?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===f4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const T=S+_+a,x=S+y+o,I=wq(r,r.VERTEX_SHADER,T),R=wq(r,r.FRAGMENT_SHADER,x);r.attachShader(v,I),r.attachShader(v,R),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function N(Z){if(n.debug.checkShaderErrors){const H=r.getProgramInfoLog(v).trim(),q=r.getShaderInfoLog(I).trim(),U=r.getShaderInfoLog(R).trim();let ee=!0,W=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,v,I,R);else{const Q=Aq(r,I,"vertex"),X=Aq(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+Z.name+`
Material Type: `+Z.type+`

Program Info Log: `+H+`
`+Q+`
`+X)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(q===""||U==="")&&(W=!1);W&&(Z.diagnostics={runnable:ee,programLog:H,vertexShader:{log:q,prefix:_},fragmentShader:{log:U,prefix:y}})}r.deleteShader(I),r.deleteShader(R),L=new CO(r,v),k=$_e(r,v)}let L;this.getUniforms=function(){return L===void 0&&N(this),L};let k;this.getAttributes=function(){return k===void 0&&N(this),k};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=r.getProgramParameter(v,U_e)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=B_e++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=I,this.fragmentShader=R,this}let rbe=0;class sbe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new abe(e),t.set(e,i)),i}}class abe{constructor(e){this.id=rbe++,this.code=e,this.usedTimes=0}}function obe(n,e,t,i,r,s,a){const o=new yT,l=new sbe,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(k){return c.add(k),k===0?"uv":`uv${k}`}function _(k,z,Z,H,q){const U=H.fog,ee=q.geometry,W=k.isMeshStandardMaterial?H.environment:null,Q=(k.isMeshStandardMaterial?t:e).get(k.envMap||W),X=Q&&Q.mapping===gx?Q.image.height:null,Y=m[k.type];k.precision!==null&&(f=r.getMaxPrecision(k.precision),f!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",f,"instead."));const ae=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,se=ae!==void 0?ae.length:0;let ue=0;ee.morphAttributes.position!==void 0&&(ue=1),ee.morphAttributes.normal!==void 0&&(ue=2),ee.morphAttributes.color!==void 0&&(ue=3);let Ne,ve,_e,Le;if(Y){const St=ef[Y];Ne=St.vertexShader,ve=St.fragmentShader}else Ne=k.vertexShader,ve=k.fragmentShader,l.update(k),_e=l.getVertexShaderID(k),Le=l.getFragmentShaderID(k);const He=n.getRenderTarget(),$e=n.state.buffers.depth.getReversed(),bt=q.isInstancedMesh===!0,Ct=q.isBatchedMesh===!0,Lt=!!k.map,Gt=!!k.matcap,qt=!!Q,V=!!k.aoMap,Ae=!!k.lightMap,Se=!!k.bumpMap,ge=!!k.normalMap,fe=!!k.displacementMap,Ce=!!k.emissiveMap,ke=!!k.metalnessMap,he=!!k.roughnessMap,ie=k.anisotropy>0,Me=k.clearcoat>0,Fe=k.dispersion>0,Ve=k.iridescence>0,We=k.sheen>0,Ut=k.transmission>0,_t=ie&&!!k.anisotropyMap,tn=Me&&!!k.clearcoatMap,de=Me&&!!k.clearcoatNormalMap,$=Me&&!!k.clearcoatRoughnessMap,K=Ve&&!!k.iridescenceMap,me=Ve&&!!k.iridescenceThicknessMap,Pe=We&&!!k.sheenColorMap,Ue=We&&!!k.sheenRoughnessMap,at=!!k.specularMap,ft=!!k.specularColorMap,Cn=!!k.specularIntensityMap,ze=Ut&&!!k.transmissionMap,It=Ut&&!!k.thicknessMap,nt=!!k.gradientMap,Et=!!k.alphaMap,Wt=k.alphaTest>0,Kt=!!k.alphaHash,je=!!k.extensions;let tt=lf;k.toneMapped&&(He===null||He.isXRRenderTarget===!0)&&(tt=n.toneMapping);const yt={shaderID:Y,shaderType:k.type,shaderName:k.name,vertexShader:Ne,fragmentShader:ve,defines:k.defines,customVertexShaderID:_e,customFragmentShaderID:Le,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:f,batching:Ct,batchingColor:Ct&&q._colorsTexture!==null,instancing:bt,instancingColor:bt&&q.instanceColor!==null,instancingMorph:bt&&q.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:He===null?n.outputColorSpace:He.isXRRenderTarget===!0?He.texture.colorSpace:Pp,alphaToCoverage:!!k.alphaToCoverage,map:Lt,matcap:Gt,envMap:qt,envMapMode:qt&&Q.mapping,envMapCubeUVHeight:X,aoMap:V,lightMap:Ae,bumpMap:Se,normalMap:ge,displacementMap:d&&fe,emissiveMap:Ce,normalMapObjectSpace:ge&&k.normalMapType===vZ,normalMapTangentSpace:ge&&k.normalMapType===i0,metalnessMap:ke,roughnessMap:he,anisotropy:ie,anisotropyMap:_t,clearcoat:Me,clearcoatMap:tn,clearcoatNormalMap:de,clearcoatRoughnessMap:$,dispersion:Fe,iridescence:Ve,iridescenceMap:K,iridescenceThicknessMap:me,sheen:We,sheenColorMap:Pe,sheenRoughnessMap:Ue,specularMap:at,specularColorMap:ft,specularIntensityMap:Cn,transmission:Ut,transmissionMap:ze,thicknessMap:It,gradientMap:nt,opaque:k.transparent===!1&&k.blending===G_&&k.alphaToCoverage===!1,alphaMap:Et,alphaTest:Wt,alphaHash:Kt,combine:k.combine,mapUv:Lt&&v(k.map.channel),aoMapUv:V&&v(k.aoMap.channel),lightMapUv:Ae&&v(k.lightMap.channel),bumpMapUv:Se&&v(k.bumpMap.channel),normalMapUv:ge&&v(k.normalMap.channel),displacementMapUv:fe&&v(k.displacementMap.channel),emissiveMapUv:Ce&&v(k.emissiveMap.channel),metalnessMapUv:ke&&v(k.metalnessMap.channel),roughnessMapUv:he&&v(k.roughnessMap.channel),anisotropyMapUv:_t&&v(k.anisotropyMap.channel),clearcoatMapUv:tn&&v(k.clearcoatMap.channel),clearcoatNormalMapUv:de&&v(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$&&v(k.clearcoatRoughnessMap.channel),iridescenceMapUv:K&&v(k.iridescenceMap.channel),iridescenceThicknessMapUv:me&&v(k.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&v(k.sheenColorMap.channel),sheenRoughnessMapUv:Ue&&v(k.sheenRoughnessMap.channel),specularMapUv:at&&v(k.specularMap.channel),specularColorMapUv:ft&&v(k.specularColorMap.channel),specularIntensityMapUv:Cn&&v(k.specularIntensityMap.channel),transmissionMapUv:ze&&v(k.transmissionMap.channel),thicknessMapUv:It&&v(k.thicknessMap.channel),alphaMapUv:Et&&v(k.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(ge||ie),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ee.attributes.uv&&(Lt||Et),fog:!!U,useFog:k.fog===!0,fogExp2:!!U&&U.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:$e,skinning:q.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:ue,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:k.dithering,shadowMapEnabled:n.shadowMap.enabled&&Z.length>0,shadowMapType:n.shadowMap.type,toneMapping:tt,decodeVideoTexture:Lt&&k.map.isVideoTexture===!0&&or.getTransfer(k.map.colorSpace)===Wr,decodeVideoTextureEmissive:Ce&&k.emissiveMap.isVideoTexture===!0&&or.getTransfer(k.emissiveMap.colorSpace)===Wr,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Eu,flipSided:k.side===Bo,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:je&&k.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(je&&k.extensions.multiDraw===!0||Ct)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return yt.vertexUv1s=c.has(1),yt.vertexUv2s=c.has(2),yt.vertexUv3s=c.has(3),c.clear(),yt}function y(k){const z=[];if(k.shaderID?z.push(k.shaderID):(z.push(k.customVertexShaderID),z.push(k.customFragmentShaderID)),k.defines!==void 0)for(const Z in k.defines)z.push(Z),z.push(k.defines[Z]);return k.isRawShaderMaterial===!1&&(S(z,k),T(z,k),z.push(n.outputColorSpace)),z.push(k.customProgramCacheKey),z.join()}function S(k,z){k.push(z.precision),k.push(z.outputColorSpace),k.push(z.envMapMode),k.push(z.envMapCubeUVHeight),k.push(z.mapUv),k.push(z.alphaMapUv),k.push(z.lightMapUv),k.push(z.aoMapUv),k.push(z.bumpMapUv),k.push(z.normalMapUv),k.push(z.displacementMapUv),k.push(z.emissiveMapUv),k.push(z.metalnessMapUv),k.push(z.roughnessMapUv),k.push(z.anisotropyMapUv),k.push(z.clearcoatMapUv),k.push(z.clearcoatNormalMapUv),k.push(z.clearcoatRoughnessMapUv),k.push(z.iridescenceMapUv),k.push(z.iridescenceThicknessMapUv),k.push(z.sheenColorMapUv),k.push(z.sheenRoughnessMapUv),k.push(z.specularMapUv),k.push(z.specularColorMapUv),k.push(z.specularIntensityMapUv),k.push(z.transmissionMapUv),k.push(z.thicknessMapUv),k.push(z.combine),k.push(z.fogExp2),k.push(z.sizeAttenuation),k.push(z.morphTargetsCount),k.push(z.morphAttributeCount),k.push(z.numDirLights),k.push(z.numPointLights),k.push(z.numSpotLights),k.push(z.numSpotLightMaps),k.push(z.numHemiLights),k.push(z.numRectAreaLights),k.push(z.numDirLightShadows),k.push(z.numPointLightShadows),k.push(z.numSpotLightShadows),k.push(z.numSpotLightShadowsWithMaps),k.push(z.numLightProbes),k.push(z.shadowMapType),k.push(z.toneMapping),k.push(z.numClippingPlanes),k.push(z.numClipIntersection),k.push(z.depthPacking)}function T(k,z){o.disableAll(),z.supportsVertexTextures&&o.enable(0),z.instancing&&o.enable(1),z.instancingColor&&o.enable(2),z.instancingMorph&&o.enable(3),z.matcap&&o.enable(4),z.envMap&&o.enable(5),z.normalMapObjectSpace&&o.enable(6),z.normalMapTangentSpace&&o.enable(7),z.clearcoat&&o.enable(8),z.iridescence&&o.enable(9),z.alphaTest&&o.enable(10),z.vertexColors&&o.enable(11),z.vertexAlphas&&o.enable(12),z.vertexUv1s&&o.enable(13),z.vertexUv2s&&o.enable(14),z.vertexUv3s&&o.enable(15),z.vertexTangents&&o.enable(16),z.anisotropy&&o.enable(17),z.alphaHash&&o.enable(18),z.batching&&o.enable(19),z.dispersion&&o.enable(20),z.batchingColor&&o.enable(21),k.push(o.mask),o.disableAll(),z.fog&&o.enable(0),z.useFog&&o.enable(1),z.flatShading&&o.enable(2),z.logarithmicDepthBuffer&&o.enable(3),z.reverseDepthBuffer&&o.enable(4),z.skinning&&o.enable(5),z.morphTargets&&o.enable(6),z.morphNormals&&o.enable(7),z.morphColors&&o.enable(8),z.premultipliedAlpha&&o.enable(9),z.shadowMapEnabled&&o.enable(10),z.doubleSided&&o.enable(11),z.flipSided&&o.enable(12),z.useDepthPacking&&o.enable(13),z.dithering&&o.enable(14),z.transmission&&o.enable(15),z.sheen&&o.enable(16),z.opaque&&o.enable(17),z.pointsUvs&&o.enable(18),z.decodeVideoTexture&&o.enable(19),z.decodeVideoTextureEmissive&&o.enable(20),z.alphaToCoverage&&o.enable(21),k.push(o.mask)}function x(k){const z=m[k.type];let Z;if(z){const H=ef[z];Z=OZ.clone(H.uniforms)}else Z=k.uniforms;return Z}function I(k,z){let Z;for(let H=0,q=u.length;H<q;H++){const U=u[H];if(U.cacheKey===z){Z=U,++Z.usedTimes;break}}return Z===void 0&&(Z=new ibe(n,z,k,s),u.push(Z)),Z}function R(k){if(--k.usedTimes===0){const z=u.indexOf(k);u[z]=u[u.length-1],u.pop(),k.destroy()}}function N(k){l.remove(k)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:y,getUniforms:x,acquireProgram:I,releaseProgram:R,releaseShaderCache:N,programs:u,dispose:L}}function lbe(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function cbe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Nq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Pq(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(h,d,f,m,v,_){let y=n[e];return y===void 0?(y={id:h.id,object:h,geometry:d,material:f,groupOrder:m,renderOrder:h.renderOrder,z:v,group:_},n[e]=y):(y.id=h.id,y.object=h,y.geometry=d,y.material=f,y.groupOrder=m,y.renderOrder=h.renderOrder,y.z=v,y.group=_),e++,y}function o(h,d,f,m,v,_){const y=a(h,d,f,m,v,_);f.transmission>0?i.push(y):f.transparent===!0?r.push(y):t.push(y)}function l(h,d,f,m,v,_){const y=a(h,d,f,m,v,_);f.transmission>0?i.unshift(y):f.transparent===!0?r.unshift(y):t.unshift(y)}function c(h,d){t.length>1&&t.sort(h||cbe),i.length>1&&i.sort(d||Nq),r.length>1&&r.sort(d||Nq)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function ube(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new Pq,n.set(i,[a])):r>=s.length?(a=new Pq,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function hbe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Re,color:new dn};break;case"SpotLight":t={position:new Re,direction:new Re,color:new dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Re,color:new dn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Re,skyColor:new dn,groundColor:new dn};break;case"RectAreaLight":t={color:new dn,position:new Re,halfWidth:new Re,halfHeight:new Re};break}return n[e.id]=t,t}}}function dbe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fbe=0;function pbe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mbe(n){const e=new hbe,t=dbe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new Re);const r=new Re,s=new Yn,a=new Yn;function o(c){let u=0,h=0,d=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let f=0,m=0,v=0,_=0,y=0,S=0,T=0,x=0,I=0,R=0,N=0;c.sort(pbe);for(let k=0,z=c.length;k<z;k++){const Z=c[k],H=Z.color,q=Z.intensity,U=Z.distance,ee=Z.shadow&&Z.shadow.map?Z.shadow.map.texture:null;if(Z.isAmbientLight)u+=H.r*q,h+=H.g*q,d+=H.b*q;else if(Z.isLightProbe){for(let W=0;W<9;W++)i.probe[W].addScaledVector(Z.sh.coefficients[W],q);N++}else if(Z.isDirectionalLight){const W=e.get(Z);if(W.color.copy(Z.color).multiplyScalar(Z.intensity),Z.castShadow){const Q=Z.shadow,X=t.get(Z);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,i.directionalShadow[f]=X,i.directionalShadowMap[f]=ee,i.directionalShadowMatrix[f]=Z.shadow.matrix,S++}i.directional[f]=W,f++}else if(Z.isSpotLight){const W=e.get(Z);W.position.setFromMatrixPosition(Z.matrixWorld),W.color.copy(H).multiplyScalar(q),W.distance=U,W.coneCos=Math.cos(Z.angle),W.penumbraCos=Math.cos(Z.angle*(1-Z.penumbra)),W.decay=Z.decay,i.spot[v]=W;const Q=Z.shadow;if(Z.map&&(i.spotLightMap[I]=Z.map,I++,Q.updateMatrices(Z),Z.castShadow&&R++),i.spotLightMatrix[v]=Q.matrix,Z.castShadow){const X=t.get(Z);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,i.spotShadow[v]=X,i.spotShadowMap[v]=ee,x++}v++}else if(Z.isRectAreaLight){const W=e.get(Z);W.color.copy(H).multiplyScalar(q),W.halfWidth.set(Z.width*.5,0,0),W.halfHeight.set(0,Z.height*.5,0),i.rectArea[_]=W,_++}else if(Z.isPointLight){const W=e.get(Z);if(W.color.copy(Z.color).multiplyScalar(Z.intensity),W.distance=Z.distance,W.decay=Z.decay,Z.castShadow){const Q=Z.shadow,X=t.get(Z);X.shadowIntensity=Q.intensity,X.shadowBias=Q.bias,X.shadowNormalBias=Q.normalBias,X.shadowRadius=Q.radius,X.shadowMapSize=Q.mapSize,X.shadowCameraNear=Q.camera.near,X.shadowCameraFar=Q.camera.far,i.pointShadow[m]=X,i.pointShadowMap[m]=ee,i.pointShadowMatrix[m]=Z.shadow.matrix,T++}i.point[m]=W,m++}else if(Z.isHemisphereLight){const W=e.get(Z);W.skyColor.copy(Z.color).multiplyScalar(q),W.groundColor.copy(Z.groundColor).multiplyScalar(q),i.hemi[y]=W,y++}}_>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=an.LTC_FLOAT_1,i.rectAreaLTC2=an.LTC_FLOAT_2):(i.rectAreaLTC1=an.LTC_HALF_1,i.rectAreaLTC2=an.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=h,i.ambient[2]=d;const L=i.hash;(L.directionalLength!==f||L.pointLength!==m||L.spotLength!==v||L.rectAreaLength!==_||L.hemiLength!==y||L.numDirectionalShadows!==S||L.numPointShadows!==T||L.numSpotShadows!==x||L.numSpotMaps!==I||L.numLightProbes!==N)&&(i.directional.length=f,i.spot.length=v,i.rectArea.length=_,i.point.length=m,i.hemi.length=y,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=x,i.spotShadowMap.length=x,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=x+I-R,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=N,L.directionalLength=f,L.pointLength=m,L.spotLength=v,L.rectAreaLength=_,L.hemiLength=y,L.numDirectionalShadows=S,L.numPointShadows=T,L.numSpotShadows=x,L.numSpotMaps=I,L.numLightProbes=N,i.version=fbe++)}function l(c,u){let h=0,d=0,f=0,m=0,v=0;const _=u.matrixWorldInverse;for(let y=0,S=c.length;y<S;y++){const T=c[y];if(T.isDirectionalLight){const x=i.directional[h];x.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(_),h++}else if(T.isSpotLight){const x=i.spot[f];x.position.setFromMatrixPosition(T.matrixWorld),x.position.applyMatrix4(_),x.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),x.direction.sub(r),x.direction.transformDirection(_),f++}else if(T.isRectAreaLight){const x=i.rectArea[m];x.position.setFromMatrixPosition(T.matrixWorld),x.position.applyMatrix4(_),a.identity(),s.copy(T.matrixWorld),s.premultiply(_),a.extractRotation(s),x.halfWidth.set(T.width*.5,0,0),x.halfHeight.set(0,T.height*.5,0),x.halfWidth.applyMatrix4(a),x.halfHeight.applyMatrix4(a),m++}else if(T.isPointLight){const x=i.point[d];x.position.setFromMatrixPosition(T.matrixWorld),x.position.applyMatrix4(_),d++}else if(T.isHemisphereLight){const x=i.hemi[v];x.direction.setFromMatrixPosition(T.matrixWorld),x.direction.transformDirection(_),v++}}}return{setup:o,setupView:l,state:i}}function Dq(n){const e=new mbe(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function a(u){i.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function gbe(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new Dq(n),e.set(r,[o])):s>=a.length?(o=new Dq(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const vbe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ybe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _be(n,e,t){let i=new _x;const r=new gt,s=new gt,a=new cr,o=new z6({depthPacking:gZ}),l=new j6,c={},u=t.maxTextureSize,h={[Ip]:Bo,[Bo]:Ip,[Eu]:Eu},d=new jo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:vbe,fragmentShader:ybe}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const m=new xi;m.setAttribute("position",new Vr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Na(m,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=s2;let y=this.type;this.render=function(R,N,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||R.length===0)return;const k=n.getRenderTarget(),z=n.getActiveCubeFace(),Z=n.getActiveMipmapLevel(),H=n.state;H.setBlending(nc),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const q=y!==Jd&&this.type===Jd,U=y===Jd&&this.type!==Jd;for(let ee=0,W=R.length;ee<W;ee++){const Q=R[ee],X=Q.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;r.copy(X.mapSize);const Y=X.getFrameExtents();if(r.multiply(Y),s.copy(X.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Y.x),r.x=s.x*Y.x,X.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Y.y),r.y=s.y*Y.y,X.mapSize.y=s.y)),X.map===null||q===!0||U===!0){const se=this.type!==Jd?{minFilter:Pa,magFilter:Pa}:{};X.map!==null&&X.map.dispose(),X.map=new Xa(r.x,r.y,se),X.map.texture.name=Q.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const ae=X.getViewportCount();for(let se=0;se<ae;se++){const ue=X.getViewport(se);a.set(s.x*ue.x,s.y*ue.y,s.x*ue.z,s.y*ue.w),H.viewport(a),X.updateMatrices(Q,se),i=X.getFrustum(),x(N,L,X.camera,Q,this.type)}X.isPointLightShadow!==!0&&this.type===Jd&&S(X,L),X.needsUpdate=!1}y=this.type,_.needsUpdate=!1,n.setRenderTarget(k,z,Z)};function S(R,N){const L=e.update(v);d.defines.VSM_SAMPLES!==R.blurSamples&&(d.defines.VSM_SAMPLES=R.blurSamples,f.defines.VSM_SAMPLES=R.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new Xa(r.x,r.y)),d.uniforms.shadow_pass.value=R.map.texture,d.uniforms.resolution.value=R.mapSize,d.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(N,null,L,d,v,null),f.uniforms.shadow_pass.value=R.mapPass.texture,f.uniforms.resolution.value=R.mapSize,f.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(N,null,L,f,v,null)}function T(R,N,L,k){let z=null;const Z=L.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(Z!==void 0)z=Z;else if(z=L.isPointLight===!0?l:o,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0||N.alphaToCoverage===!0){const H=z.uuid,q=N.uuid;let U=c[H];U===void 0&&(U={},c[H]=U);let ee=U[q];ee===void 0&&(ee=z.clone(),U[q]=ee,N.addEventListener("dispose",I)),z=ee}if(z.visible=N.visible,z.wireframe=N.wireframe,k===Jd?z.side=N.shadowSide!==null?N.shadowSide:N.side:z.side=N.shadowSide!==null?N.shadowSide:h[N.side],z.alphaMap=N.alphaMap,z.alphaTest=N.alphaToCoverage===!0?.5:N.alphaTest,z.map=N.map,z.clipShadows=N.clipShadows,z.clippingPlanes=N.clippingPlanes,z.clipIntersection=N.clipIntersection,z.displacementMap=N.displacementMap,z.displacementScale=N.displacementScale,z.displacementBias=N.displacementBias,z.wireframeLinewidth=N.wireframeLinewidth,z.linewidth=N.linewidth,L.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const H=n.properties.get(z);H.light=L}return z}function x(R,N,L,k,z){if(R.visible===!1)return;if(R.layers.test(N.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&z===Jd)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,R.matrixWorld);const q=e.update(R),U=R.material;if(Array.isArray(U)){const ee=q.groups;for(let W=0,Q=ee.length;W<Q;W++){const X=ee[W],Y=U[X.materialIndex];if(Y&&Y.visible){const ae=T(R,Y,k,z);R.onBeforeShadow(n,R,N,L,q,ae,X),n.renderBufferDirect(L,null,q,ae,R,X),R.onAfterShadow(n,R,N,L,q,ae,X)}}}else if(U.visible){const ee=T(R,U,k,z);R.onBeforeShadow(n,R,N,L,q,ee,null),n.renderBufferDirect(L,null,q,ee,R,null),R.onAfterShadow(n,R,N,L,q,ee,null)}}const H=R.children;for(let q=0,U=H.length;q<U;q++)x(H[q],N,L,k,z)}function I(R){R.target.removeEventListener("dispose",I);for(const L in c){const k=c[L],z=R.target.uuid;z in k&&(k[z].dispose(),delete k[z])}}}const bbe={[RI]:OI,[II]:DI,[NI]:kI,[lb]:PI,[OI]:RI,[DI]:II,[kI]:NI,[PI]:lb};function Sbe(n,e){function t(){let ze=!1;const It=new cr;let nt=null;const Et=new cr(0,0,0,0);return{setMask:function(Wt){nt!==Wt&&!ze&&(n.colorMask(Wt,Wt,Wt,Wt),nt=Wt)},setLocked:function(Wt){ze=Wt},setClear:function(Wt,Kt,je,tt,yt){yt===!0&&(Wt*=tt,Kt*=tt,je*=tt),It.set(Wt,Kt,je,tt),Et.equals(It)===!1&&(n.clearColor(Wt,Kt,je,tt),Et.copy(It))},reset:function(){ze=!1,nt=null,Et.set(-1,0,0,0)}}}function i(){let ze=!1,It=!1,nt=null,Et=null,Wt=null;return{setReversed:function(Kt){if(It!==Kt){const je=e.get("EXT_clip_control");Kt?je.clipControlEXT(je.LOWER_LEFT_EXT,je.ZERO_TO_ONE_EXT):je.clipControlEXT(je.LOWER_LEFT_EXT,je.NEGATIVE_ONE_TO_ONE_EXT),It=Kt;const tt=Wt;Wt=null,this.setClear(tt)}},getReversed:function(){return It},setTest:function(Kt){Kt?He(n.DEPTH_TEST):$e(n.DEPTH_TEST)},setMask:function(Kt){nt!==Kt&&!ze&&(n.depthMask(Kt),nt=Kt)},setFunc:function(Kt){if(It&&(Kt=bbe[Kt]),Et!==Kt){switch(Kt){case RI:n.depthFunc(n.NEVER);break;case OI:n.depthFunc(n.ALWAYS);break;case II:n.depthFunc(n.LESS);break;case lb:n.depthFunc(n.LEQUAL);break;case NI:n.depthFunc(n.EQUAL);break;case PI:n.depthFunc(n.GEQUAL);break;case DI:n.depthFunc(n.GREATER);break;case kI:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Et=Kt}},setLocked:function(Kt){ze=Kt},setClear:function(Kt){Wt!==Kt&&(It&&(Kt=1-Kt),n.clearDepth(Kt),Wt=Kt)},reset:function(){ze=!1,nt=null,Et=null,Wt=null,It=!1}}}function r(){let ze=!1,It=null,nt=null,Et=null,Wt=null,Kt=null,je=null,tt=null,yt=null;return{setTest:function(St){ze||(St?He(n.STENCIL_TEST):$e(n.STENCIL_TEST))},setMask:function(St){It!==St&&!ze&&(n.stencilMask(St),It=St)},setFunc:function(St,Nn,Pi){(nt!==St||Et!==Nn||Wt!==Pi)&&(n.stencilFunc(St,Nn,Pi),nt=St,Et=Nn,Wt=Pi)},setOp:function(St,Nn,Pi){(Kt!==St||je!==Nn||tt!==Pi)&&(n.stencilOp(St,Nn,Pi),Kt=St,je=Nn,tt=Pi)},setLocked:function(St){ze=St},setClear:function(St){yt!==St&&(n.clearStencil(St),yt=St)},reset:function(){ze=!1,It=null,nt=null,Et=null,Wt=null,Kt=null,je=null,tt=null,yt=null}}}const s=new t,a=new i,o=new r,l=new WeakMap,c=new WeakMap;let u={},h={},d=new WeakMap,f=[],m=null,v=!1,_=null,y=null,S=null,T=null,x=null,I=null,R=null,N=new dn(0,0,0),L=0,k=!1,z=null,Z=null,H=null,q=null,U=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let W=!1,Q=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(X)[1]),W=Q>=1):X.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),W=Q>=2);let Y=null,ae={};const se=n.getParameter(n.SCISSOR_BOX),ue=n.getParameter(n.VIEWPORT),Ne=new cr().fromArray(se),ve=new cr().fromArray(ue);function _e(ze,It,nt,Et){const Wt=new Uint8Array(4),Kt=n.createTexture();n.bindTexture(ze,Kt),n.texParameteri(ze,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ze,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let je=0;je<nt;je++)ze===n.TEXTURE_3D||ze===n.TEXTURE_2D_ARRAY?n.texImage3D(It,0,n.RGBA,1,1,Et,0,n.RGBA,n.UNSIGNED_BYTE,Wt):n.texImage2D(It+je,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Wt);return Kt}const Le={};Le[n.TEXTURE_2D]=_e(n.TEXTURE_2D,n.TEXTURE_2D,1),Le[n.TEXTURE_CUBE_MAP]=_e(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Le[n.TEXTURE_2D_ARRAY]=_e(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Le[n.TEXTURE_3D]=_e(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),He(n.DEPTH_TEST),a.setFunc(lb),Se(!1),ge(a4),He(n.CULL_FACE),V(nc);function He(ze){u[ze]!==!0&&(n.enable(ze),u[ze]=!0)}function $e(ze){u[ze]!==!1&&(n.disable(ze),u[ze]=!1)}function bt(ze,It){return h[ze]!==It?(n.bindFramebuffer(ze,It),h[ze]=It,ze===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=It),ze===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=It),!0):!1}function Ct(ze,It){let nt=f,Et=!1;if(ze){nt=d.get(It),nt===void 0&&(nt=[],d.set(It,nt));const Wt=ze.textures;if(nt.length!==Wt.length||nt[0]!==n.COLOR_ATTACHMENT0){for(let Kt=0,je=Wt.length;Kt<je;Kt++)nt[Kt]=n.COLOR_ATTACHMENT0+Kt;nt.length=Wt.length,Et=!0}}else nt[0]!==n.BACK&&(nt[0]=n.BACK,Et=!0);Et&&n.drawBuffers(nt)}function Lt(ze){return m!==ze?(n.useProgram(ze),m=ze,!0):!1}const Gt={[sy]:n.FUNC_ADD,[jK]:n.FUNC_SUBTRACT,[HK]:n.FUNC_REVERSE_SUBTRACT};Gt[VK]=n.MIN,Gt[GK]=n.MAX;const qt={[qK]:n.ZERO,[$K]:n.ONE,[WK]:n.SRC_COLOR,[AI]:n.SRC_ALPHA,[QK]:n.SRC_ALPHA_SATURATE,[ZK]:n.DST_COLOR,[XK]:n.DST_ALPHA,[YK]:n.ONE_MINUS_SRC_COLOR,[MI]:n.ONE_MINUS_SRC_ALPHA,[JK]:n.ONE_MINUS_DST_COLOR,[KK]:n.ONE_MINUS_DST_ALPHA,[eZ]:n.CONSTANT_COLOR,[tZ]:n.ONE_MINUS_CONSTANT_COLOR,[nZ]:n.CONSTANT_ALPHA,[iZ]:n.ONE_MINUS_CONSTANT_ALPHA};function V(ze,It,nt,Et,Wt,Kt,je,tt,yt,St){if(ze===nc){v===!0&&($e(n.BLEND),v=!1);return}if(v===!1&&(He(n.BLEND),v=!0),ze!==zK){if(ze!==_||St!==k){if((y!==sy||x!==sy)&&(n.blendEquation(n.FUNC_ADD),y=sy,x=sy),St)switch(ze){case G_:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case o4:n.blendFunc(n.ONE,n.ONE);break;case l4:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case c4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ze);break}else switch(ze){case G_:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case o4:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case l4:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case c4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ze);break}S=null,T=null,I=null,R=null,N.set(0,0,0),L=0,_=ze,k=St}return}Wt=Wt||It,Kt=Kt||nt,je=je||Et,(It!==y||Wt!==x)&&(n.blendEquationSeparate(Gt[It],Gt[Wt]),y=It,x=Wt),(nt!==S||Et!==T||Kt!==I||je!==R)&&(n.blendFuncSeparate(qt[nt],qt[Et],qt[Kt],qt[je]),S=nt,T=Et,I=Kt,R=je),(tt.equals(N)===!1||yt!==L)&&(n.blendColor(tt.r,tt.g,tt.b,yt),N.copy(tt),L=yt),_=ze,k=!1}function Ae(ze,It){ze.side===Eu?$e(n.CULL_FACE):He(n.CULL_FACE);let nt=ze.side===Bo;It&&(nt=!nt),Se(nt),ze.blending===G_&&ze.transparent===!1?V(nc):V(ze.blending,ze.blendEquation,ze.blendSrc,ze.blendDst,ze.blendEquationAlpha,ze.blendSrcAlpha,ze.blendDstAlpha,ze.blendColor,ze.blendAlpha,ze.premultipliedAlpha),a.setFunc(ze.depthFunc),a.setTest(ze.depthTest),a.setMask(ze.depthWrite),s.setMask(ze.colorWrite);const Et=ze.stencilWrite;o.setTest(Et),Et&&(o.setMask(ze.stencilWriteMask),o.setFunc(ze.stencilFunc,ze.stencilRef,ze.stencilFuncMask),o.setOp(ze.stencilFail,ze.stencilZFail,ze.stencilZPass)),Ce(ze.polygonOffset,ze.polygonOffsetFactor,ze.polygonOffsetUnits),ze.alphaToCoverage===!0?He(n.SAMPLE_ALPHA_TO_COVERAGE):$e(n.SAMPLE_ALPHA_TO_COVERAGE)}function Se(ze){z!==ze&&(ze?n.frontFace(n.CW):n.frontFace(n.CCW),z=ze)}function ge(ze){ze!==UK?(He(n.CULL_FACE),ze!==Z&&(ze===a4?n.cullFace(n.BACK):ze===BK?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):$e(n.CULL_FACE),Z=ze}function fe(ze){ze!==H&&(W&&n.lineWidth(ze),H=ze)}function Ce(ze,It,nt){ze?(He(n.POLYGON_OFFSET_FILL),(q!==It||U!==nt)&&(n.polygonOffset(It,nt),q=It,U=nt)):$e(n.POLYGON_OFFSET_FILL)}function ke(ze){ze?He(n.SCISSOR_TEST):$e(n.SCISSOR_TEST)}function he(ze){ze===void 0&&(ze=n.TEXTURE0+ee-1),Y!==ze&&(n.activeTexture(ze),Y=ze)}function ie(ze,It,nt){nt===void 0&&(Y===null?nt=n.TEXTURE0+ee-1:nt=Y);let Et=ae[nt];Et===void 0&&(Et={type:void 0,texture:void 0},ae[nt]=Et),(Et.type!==ze||Et.texture!==It)&&(Y!==nt&&(n.activeTexture(nt),Y=nt),n.bindTexture(ze,It||Le[ze]),Et.type=ze,Et.texture=It)}function Me(){const ze=ae[Y];ze!==void 0&&ze.type!==void 0&&(n.bindTexture(ze.type,null),ze.type=void 0,ze.texture=void 0)}function Fe(){try{n.compressedTexImage2D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Ve(){try{n.compressedTexImage3D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function We(){try{n.texSubImage2D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Ut(){try{n.texSubImage3D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function _t(){try{n.compressedTexSubImage2D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function tn(){try{n.compressedTexSubImage3D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function de(){try{n.texStorage2D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function $(){try{n.texStorage3D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function K(){try{n.texImage2D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function me(){try{n.texImage3D(...arguments)}catch(ze){console.error("THREE.WebGLState:",ze)}}function Pe(ze){Ne.equals(ze)===!1&&(n.scissor(ze.x,ze.y,ze.z,ze.w),Ne.copy(ze))}function Ue(ze){ve.equals(ze)===!1&&(n.viewport(ze.x,ze.y,ze.z,ze.w),ve.copy(ze))}function at(ze,It){let nt=c.get(It);nt===void 0&&(nt=new WeakMap,c.set(It,nt));let Et=nt.get(ze);Et===void 0&&(Et=n.getUniformBlockIndex(It,ze.name),nt.set(ze,Et))}function ft(ze,It){const Et=c.get(It).get(ze);l.get(It)!==Et&&(n.uniformBlockBinding(It,Et,ze.__bindingPointIndex),l.set(It,Et))}function Cn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Y=null,ae={},h={},d=new WeakMap,f=[],m=null,v=!1,_=null,y=null,S=null,T=null,x=null,I=null,R=null,N=new dn(0,0,0),L=0,k=!1,z=null,Z=null,H=null,q=null,U=null,Ne.set(0,0,n.canvas.width,n.canvas.height),ve.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:He,disable:$e,bindFramebuffer:bt,drawBuffers:Ct,useProgram:Lt,setBlending:V,setMaterial:Ae,setFlipSided:Se,setCullFace:ge,setLineWidth:fe,setPolygonOffset:Ce,setScissorTest:ke,activeTexture:he,bindTexture:ie,unbindTexture:Me,compressedTexImage2D:Fe,compressedTexImage3D:Ve,texImage2D:K,texImage3D:me,updateUBOMapping:at,uniformBlockBinding:ft,texStorage2D:de,texStorage3D:$,texSubImage2D:We,texSubImage3D:Ut,compressedTexSubImage2D:_t,compressedTexSubImage3D:tn,scissor:Pe,viewport:Ue,reset:Cn}}function Ebe(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new gt,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(he,ie){return f?new OffscreenCanvas(he,ie):Jw("canvas")}function v(he,ie,Me){let Fe=1;const Ve=ke(he);if((Ve.width>Me||Ve.height>Me)&&(Fe=Me/Math.max(Ve.width,Ve.height)),Fe<1)if(typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&he instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&he instanceof ImageBitmap||typeof VideoFrame<"u"&&he instanceof VideoFrame){const We=Math.floor(Fe*Ve.width),Ut=Math.floor(Fe*Ve.height);h===void 0&&(h=m(We,Ut));const _t=ie?m(We,Ut):h;return _t.width=We,_t.height=Ut,_t.getContext("2d").drawImage(he,0,0,We,Ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ve.width+"x"+Ve.height+") to ("+We+"x"+Ut+")."),_t}else return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ve.width+"x"+Ve.height+")."),he;return he}function _(he){return he.generateMipmaps}function y(he){n.generateMipmap(he)}function S(he){return he.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:he.isWebGL3DRenderTarget?n.TEXTURE_3D:he.isWebGLArrayRenderTarget||he.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function T(he,ie,Me,Fe,Ve=!1){if(he!==null){if(n[he]!==void 0)return n[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let We=ie;if(ie===n.RED&&(Me===n.FLOAT&&(We=n.R32F),Me===n.HALF_FLOAT&&(We=n.R16F),Me===n.UNSIGNED_BYTE&&(We=n.R8)),ie===n.RED_INTEGER&&(Me===n.UNSIGNED_BYTE&&(We=n.R8UI),Me===n.UNSIGNED_SHORT&&(We=n.R16UI),Me===n.UNSIGNED_INT&&(We=n.R32UI),Me===n.BYTE&&(We=n.R8I),Me===n.SHORT&&(We=n.R16I),Me===n.INT&&(We=n.R32I)),ie===n.RG&&(Me===n.FLOAT&&(We=n.RG32F),Me===n.HALF_FLOAT&&(We=n.RG16F),Me===n.UNSIGNED_BYTE&&(We=n.RG8)),ie===n.RG_INTEGER&&(Me===n.UNSIGNED_BYTE&&(We=n.RG8UI),Me===n.UNSIGNED_SHORT&&(We=n.RG16UI),Me===n.UNSIGNED_INT&&(We=n.RG32UI),Me===n.BYTE&&(We=n.RG8I),Me===n.SHORT&&(We=n.RG16I),Me===n.INT&&(We=n.RG32I)),ie===n.RGB_INTEGER&&(Me===n.UNSIGNED_BYTE&&(We=n.RGB8UI),Me===n.UNSIGNED_SHORT&&(We=n.RGB16UI),Me===n.UNSIGNED_INT&&(We=n.RGB32UI),Me===n.BYTE&&(We=n.RGB8I),Me===n.SHORT&&(We=n.RGB16I),Me===n.INT&&(We=n.RGB32I)),ie===n.RGBA_INTEGER&&(Me===n.UNSIGNED_BYTE&&(We=n.RGBA8UI),Me===n.UNSIGNED_SHORT&&(We=n.RGBA16UI),Me===n.UNSIGNED_INT&&(We=n.RGBA32UI),Me===n.BYTE&&(We=n.RGBA8I),Me===n.SHORT&&(We=n.RGBA16I),Me===n.INT&&(We=n.RGBA32I)),ie===n.RGB&&Me===n.UNSIGNED_INT_5_9_9_9_REV&&(We=n.RGB9_E5),ie===n.RGBA){const Ut=Ve?Xw:or.getTransfer(Fe);Me===n.FLOAT&&(We=n.RGBA32F),Me===n.HALF_FLOAT&&(We=n.RGBA16F),Me===n.UNSIGNED_BYTE&&(We=Ut===Wr?n.SRGB8_ALPHA8:n.RGBA8),Me===n.UNSIGNED_SHORT_4_4_4_4&&(We=n.RGBA4),Me===n.UNSIGNED_SHORT_5_5_5_1&&(We=n.RGB5_A1)}return(We===n.R16F||We===n.R32F||We===n.RG16F||We===n.RG32F||We===n.RGBA16F||We===n.RGBA32F)&&e.get("EXT_color_buffer_float"),We}function x(he,ie){let Me;return he?ie===null||ie===Np||ie===cb?Me=n.DEPTH24_STENCIL8:ie===Zl?Me=n.DEPTH32F_STENCIL8:ie===mT&&(Me=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ie===null||ie===Np||ie===cb?Me=n.DEPTH_COMPONENT24:ie===Zl?Me=n.DEPTH_COMPONENT32F:ie===mT&&(Me=n.DEPTH_COMPONENT16),Me}function I(he,ie){return _(he)===!0||he.isFramebufferTexture&&he.minFilter!==Pa&&he.minFilter!==Ls?Math.log2(Math.max(ie.width,ie.height))+1:he.mipmaps!==void 0&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?ie.mipmaps.length:1}function R(he){const ie=he.target;ie.removeEventListener("dispose",R),L(ie),ie.isVideoTexture&&u.delete(ie)}function N(he){const ie=he.target;ie.removeEventListener("dispose",N),z(ie)}function L(he){const ie=i.get(he);if(ie.__webglInit===void 0)return;const Me=he.source,Fe=d.get(Me);if(Fe){const Ve=Fe[ie.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&k(he),Object.keys(Fe).length===0&&d.delete(Me)}i.remove(he)}function k(he){const ie=i.get(he);n.deleteTexture(ie.__webglTexture);const Me=he.source,Fe=d.get(Me);delete Fe[ie.__cacheKey],a.memory.textures--}function z(he){const ie=i.get(he);if(he.depthTexture&&(he.depthTexture.dispose(),i.remove(he.depthTexture)),he.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++){if(Array.isArray(ie.__webglFramebuffer[Fe]))for(let Ve=0;Ve<ie.__webglFramebuffer[Fe].length;Ve++)n.deleteFramebuffer(ie.__webglFramebuffer[Fe][Ve]);else n.deleteFramebuffer(ie.__webglFramebuffer[Fe]);ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer[Fe])}else{if(Array.isArray(ie.__webglFramebuffer))for(let Fe=0;Fe<ie.__webglFramebuffer.length;Fe++)n.deleteFramebuffer(ie.__webglFramebuffer[Fe]);else n.deleteFramebuffer(ie.__webglFramebuffer);if(ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let Fe=0;Fe<ie.__webglColorRenderbuffer.length;Fe++)ie.__webglColorRenderbuffer[Fe]&&n.deleteRenderbuffer(ie.__webglColorRenderbuffer[Fe]);ie.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}const Me=he.textures;for(let Fe=0,Ve=Me.length;Fe<Ve;Fe++){const We=i.get(Me[Fe]);We.__webglTexture&&(n.deleteTexture(We.__webglTexture),a.memory.textures--),i.remove(Me[Fe])}i.remove(he)}let Z=0;function H(){Z=0}function q(){const he=Z;return he>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+r.maxTextures),Z+=1,he}function U(he){const ie=[];return ie.push(he.wrapS),ie.push(he.wrapT),ie.push(he.wrapR||0),ie.push(he.magFilter),ie.push(he.minFilter),ie.push(he.anisotropy),ie.push(he.internalFormat),ie.push(he.format),ie.push(he.type),ie.push(he.generateMipmaps),ie.push(he.premultiplyAlpha),ie.push(he.flipY),ie.push(he.unpackAlignment),ie.push(he.colorSpace),ie.join()}function ee(he,ie){const Me=i.get(he);if(he.isVideoTexture&&fe(he),he.isRenderTargetTexture===!1&&he.version>0&&Me.__version!==he.version){const Fe=he.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve(Me,he,ie);return}}t.bindTexture(n.TEXTURE_2D,Me.__webglTexture,n.TEXTURE0+ie)}function W(he,ie){const Me=i.get(he);if(he.version>0&&Me.__version!==he.version){ve(Me,he,ie);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Me.__webglTexture,n.TEXTURE0+ie)}function Q(he,ie){const Me=i.get(he);if(he.version>0&&Me.__version!==he.version){ve(Me,he,ie);return}t.bindTexture(n.TEXTURE_3D,Me.__webglTexture,n.TEXTURE0+ie)}function X(he,ie){const Me=i.get(he);if(he.version>0&&Me.__version!==he.version){_e(Me,he,ie);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture,n.TEXTURE0+ie)}const Y={[pT]:n.REPEAT,[ud]:n.CLAMP_TO_EDGE,[$w]:n.MIRRORED_REPEAT},ae={[Pa]:n.NEAREST,[v6]:n.NEAREST_MIPMAP_NEAREST,[TE]:n.NEAREST_MIPMAP_LINEAR,[Ls]:n.LINEAR,[ow]:n.LINEAR_MIPMAP_NEAREST,[_p]:n.LINEAR_MIPMAP_LINEAR},se={[yZ]:n.NEVER,[xZ]:n.ALWAYS,[_Z]:n.LESS,[w6]:n.LEQUAL,[bZ]:n.EQUAL,[TZ]:n.GEQUAL,[SZ]:n.GREATER,[EZ]:n.NOTEQUAL};function ue(he,ie){if(ie.type===Zl&&e.has("OES_texture_float_linear")===!1&&(ie.magFilter===Ls||ie.magFilter===ow||ie.magFilter===TE||ie.magFilter===_p||ie.minFilter===Ls||ie.minFilter===ow||ie.minFilter===TE||ie.minFilter===_p)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(he,n.TEXTURE_WRAP_S,Y[ie.wrapS]),n.texParameteri(he,n.TEXTURE_WRAP_T,Y[ie.wrapT]),(he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY)&&n.texParameteri(he,n.TEXTURE_WRAP_R,Y[ie.wrapR]),n.texParameteri(he,n.TEXTURE_MAG_FILTER,ae[ie.magFilter]),n.texParameteri(he,n.TEXTURE_MIN_FILTER,ae[ie.minFilter]),ie.compareFunction&&(n.texParameteri(he,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(he,n.TEXTURE_COMPARE_FUNC,se[ie.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ie.magFilter===Pa||ie.minFilter!==TE&&ie.minFilter!==_p||ie.type===Zl&&e.has("OES_texture_float_linear")===!1)return;if(ie.anisotropy>1||i.get(ie).__currentAnisotropy){const Me=e.get("EXT_texture_filter_anisotropic");n.texParameterf(he,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,r.getMaxAnisotropy())),i.get(ie).__currentAnisotropy=ie.anisotropy}}}function Ne(he,ie){let Me=!1;he.__webglInit===void 0&&(he.__webglInit=!0,ie.addEventListener("dispose",R));const Fe=ie.source;let Ve=d.get(Fe);Ve===void 0&&(Ve={},d.set(Fe,Ve));const We=U(ie);if(We!==he.__cacheKey){Ve[We]===void 0&&(Ve[We]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Me=!0),Ve[We].usedTimes++;const Ut=Ve[he.__cacheKey];Ut!==void 0&&(Ve[he.__cacheKey].usedTimes--,Ut.usedTimes===0&&k(ie)),he.__cacheKey=We,he.__webglTexture=Ve[We].texture}return Me}function ve(he,ie,Me){let Fe=n.TEXTURE_2D;(ie.isDataArrayTexture||ie.isCompressedArrayTexture)&&(Fe=n.TEXTURE_2D_ARRAY),ie.isData3DTexture&&(Fe=n.TEXTURE_3D);const Ve=Ne(he,ie),We=ie.source;t.bindTexture(Fe,he.__webglTexture,n.TEXTURE0+Me);const Ut=i.get(We);if(We.version!==Ut.__version||Ve===!0){t.activeTexture(n.TEXTURE0+Me);const _t=or.getPrimaries(or.workingColorSpace),tn=ie.colorSpace===sf?null:or.getPrimaries(ie.colorSpace),de=ie.colorSpace===sf||_t===tn?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ie.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ie.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,de);let $=v(ie.image,!1,r.maxTextureSize);$=Ce(ie,$);const K=s.convert(ie.format,ie.colorSpace),me=s.convert(ie.type);let Pe=T(ie.internalFormat,K,me,ie.colorSpace,ie.isVideoTexture);ue(Fe,ie);let Ue;const at=ie.mipmaps,ft=ie.isVideoTexture!==!0,Cn=Ut.__version===void 0||Ve===!0,ze=We.dataReady,It=I(ie,$);if(ie.isDepthTexture)Pe=x(ie.format===ub,ie.type),Cn&&(ft?t.texStorage2D(n.TEXTURE_2D,1,Pe,$.width,$.height):t.texImage2D(n.TEXTURE_2D,0,Pe,$.width,$.height,0,K,me,null));else if(ie.isDataTexture)if(at.length>0){ft&&Cn&&t.texStorage2D(n.TEXTURE_2D,It,Pe,at[0].width,at[0].height);for(let nt=0,Et=at.length;nt<Et;nt++)Ue=at[nt],ft?ze&&t.texSubImage2D(n.TEXTURE_2D,nt,0,0,Ue.width,Ue.height,K,me,Ue.data):t.texImage2D(n.TEXTURE_2D,nt,Pe,Ue.width,Ue.height,0,K,me,Ue.data);ie.generateMipmaps=!1}else ft?(Cn&&t.texStorage2D(n.TEXTURE_2D,It,Pe,$.width,$.height),ze&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,$.width,$.height,K,me,$.data)):t.texImage2D(n.TEXTURE_2D,0,Pe,$.width,$.height,0,K,me,$.data);else if(ie.isCompressedTexture)if(ie.isCompressedArrayTexture){ft&&Cn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,It,Pe,at[0].width,at[0].height,$.depth);for(let nt=0,Et=at.length;nt<Et;nt++)if(Ue=at[nt],ie.format!==Fo)if(K!==null)if(ft){if(ze)if(ie.layerUpdates.size>0){const Wt=b4(Ue.width,Ue.height,ie.format,ie.type);for(const Kt of ie.layerUpdates){const je=Ue.data.subarray(Kt*Wt/Ue.data.BYTES_PER_ELEMENT,(Kt+1)*Wt/Ue.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,nt,0,0,Kt,Ue.width,Ue.height,1,K,je)}ie.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,nt,0,0,0,Ue.width,Ue.height,$.depth,K,Ue.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,nt,Pe,Ue.width,Ue.height,$.depth,0,Ue.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ft?ze&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,nt,0,0,0,Ue.width,Ue.height,$.depth,K,me,Ue.data):t.texImage3D(n.TEXTURE_2D_ARRAY,nt,Pe,Ue.width,Ue.height,$.depth,0,K,me,Ue.data)}else{ft&&Cn&&t.texStorage2D(n.TEXTURE_2D,It,Pe,at[0].width,at[0].height);for(let nt=0,Et=at.length;nt<Et;nt++)Ue=at[nt],ie.format!==Fo?K!==null?ft?ze&&t.compressedTexSubImage2D(n.TEXTURE_2D,nt,0,0,Ue.width,Ue.height,K,Ue.data):t.compressedTexImage2D(n.TEXTURE_2D,nt,Pe,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ft?ze&&t.texSubImage2D(n.TEXTURE_2D,nt,0,0,Ue.width,Ue.height,K,me,Ue.data):t.texImage2D(n.TEXTURE_2D,nt,Pe,Ue.width,Ue.height,0,K,me,Ue.data)}else if(ie.isDataArrayTexture)if(ft){if(Cn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,It,Pe,$.width,$.height,$.depth),ze)if(ie.layerUpdates.size>0){const nt=b4($.width,$.height,ie.format,ie.type);for(const Et of ie.layerUpdates){const Wt=$.data.subarray(Et*nt/$.data.BYTES_PER_ELEMENT,(Et+1)*nt/$.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Et,$.width,$.height,1,K,me,Wt)}ie.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,$.width,$.height,$.depth,K,me,$.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Pe,$.width,$.height,$.depth,0,K,me,$.data);else if(ie.isData3DTexture)ft?(Cn&&t.texStorage3D(n.TEXTURE_3D,It,Pe,$.width,$.height,$.depth),ze&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,$.width,$.height,$.depth,K,me,$.data)):t.texImage3D(n.TEXTURE_3D,0,Pe,$.width,$.height,$.depth,0,K,me,$.data);else if(ie.isFramebufferTexture){if(Cn)if(ft)t.texStorage2D(n.TEXTURE_2D,It,Pe,$.width,$.height);else{let nt=$.width,Et=$.height;for(let Wt=0;Wt<It;Wt++)t.texImage2D(n.TEXTURE_2D,Wt,Pe,nt,Et,0,K,me,null),nt>>=1,Et>>=1}}else if(at.length>0){if(ft&&Cn){const nt=ke(at[0]);t.texStorage2D(n.TEXTURE_2D,It,Pe,nt.width,nt.height)}for(let nt=0,Et=at.length;nt<Et;nt++)Ue=at[nt],ft?ze&&t.texSubImage2D(n.TEXTURE_2D,nt,0,0,K,me,Ue):t.texImage2D(n.TEXTURE_2D,nt,Pe,K,me,Ue);ie.generateMipmaps=!1}else if(ft){if(Cn){const nt=ke($);t.texStorage2D(n.TEXTURE_2D,It,Pe,nt.width,nt.height)}ze&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,K,me,$)}else t.texImage2D(n.TEXTURE_2D,0,Pe,K,me,$);_(ie)&&y(Fe),Ut.__version=We.version,ie.onUpdate&&ie.onUpdate(ie)}he.__version=ie.version}function _e(he,ie,Me){if(ie.image.length!==6)return;const Fe=Ne(he,ie),Ve=ie.source;t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+Me);const We=i.get(Ve);if(Ve.version!==We.__version||Fe===!0){t.activeTexture(n.TEXTURE0+Me);const Ut=or.getPrimaries(or.workingColorSpace),_t=ie.colorSpace===sf?null:or.getPrimaries(ie.colorSpace),tn=ie.colorSpace===sf||Ut===_t?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ie.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ie.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,tn);const de=ie.isCompressedTexture||ie.image[0].isCompressedTexture,$=ie.image[0]&&ie.image[0].isDataTexture,K=[];for(let Et=0;Et<6;Et++)!de&&!$?K[Et]=v(ie.image[Et],!0,r.maxCubemapSize):K[Et]=$?ie.image[Et].image:ie.image[Et],K[Et]=Ce(ie,K[Et]);const me=K[0],Pe=s.convert(ie.format,ie.colorSpace),Ue=s.convert(ie.type),at=T(ie.internalFormat,Pe,Ue,ie.colorSpace),ft=ie.isVideoTexture!==!0,Cn=We.__version===void 0||Fe===!0,ze=Ve.dataReady;let It=I(ie,me);ue(n.TEXTURE_CUBE_MAP,ie);let nt;if(de){ft&&Cn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,It,at,me.width,me.height);for(let Et=0;Et<6;Et++){nt=K[Et].mipmaps;for(let Wt=0;Wt<nt.length;Wt++){const Kt=nt[Wt];ie.format!==Fo?Pe!==null?ft?ze&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt,0,0,Kt.width,Kt.height,Pe,Kt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt,at,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ft?ze&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt,0,0,Kt.width,Kt.height,Pe,Ue,Kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt,at,Kt.width,Kt.height,0,Pe,Ue,Kt.data)}}}else{if(nt=ie.mipmaps,ft&&Cn){nt.length>0&&It++;const Et=ke(K[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,It,at,Et.width,Et.height)}for(let Et=0;Et<6;Et++)if($){ft?ze&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,0,0,K[Et].width,K[Et].height,Pe,Ue,K[Et].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,at,K[Et].width,K[Et].height,0,Pe,Ue,K[Et].data);for(let Wt=0;Wt<nt.length;Wt++){const je=nt[Wt].image[Et].image;ft?ze&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt+1,0,0,je.width,je.height,Pe,Ue,je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt+1,at,je.width,je.height,0,Pe,Ue,je.data)}}else{ft?ze&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,0,0,Pe,Ue,K[Et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,at,Pe,Ue,K[Et]);for(let Wt=0;Wt<nt.length;Wt++){const Kt=nt[Wt];ft?ze&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt+1,0,0,Pe,Ue,Kt.image[Et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,Wt+1,at,Pe,Ue,Kt.image[Et])}}}_(ie)&&y(n.TEXTURE_CUBE_MAP),We.__version=Ve.version,ie.onUpdate&&ie.onUpdate(ie)}he.__version=ie.version}function Le(he,ie,Me,Fe,Ve,We){const Ut=s.convert(Me.format,Me.colorSpace),_t=s.convert(Me.type),tn=T(Me.internalFormat,Ut,_t,Me.colorSpace),de=i.get(ie),$=i.get(Me);if($.__renderTarget=ie,!de.__hasExternalTextures){const K=Math.max(1,ie.width>>We),me=Math.max(1,ie.height>>We);Ve===n.TEXTURE_3D||Ve===n.TEXTURE_2D_ARRAY?t.texImage3D(Ve,We,tn,K,me,ie.depth,0,Ut,_t,null):t.texImage2D(Ve,We,tn,K,me,0,Ut,_t,null)}t.bindFramebuffer(n.FRAMEBUFFER,he),ge(ie)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Fe,Ve,$.__webglTexture,0,Se(ie)):(Ve===n.TEXTURE_2D||Ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Fe,Ve,$.__webglTexture,We),t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(he,ie,Me){if(n.bindRenderbuffer(n.RENDERBUFFER,he),ie.depthBuffer){const Fe=ie.depthTexture,Ve=Fe&&Fe.isDepthTexture?Fe.type:null,We=x(ie.stencilBuffer,Ve),Ut=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_t=Se(ie);ge(ie)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_t,We,ie.width,ie.height):Me?n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,We,ie.width,ie.height):n.renderbufferStorage(n.RENDERBUFFER,We,ie.width,ie.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ut,n.RENDERBUFFER,he)}else{const Fe=ie.textures;for(let Ve=0;Ve<Fe.length;Ve++){const We=Fe[Ve],Ut=s.convert(We.format,We.colorSpace),_t=s.convert(We.type),tn=T(We.internalFormat,Ut,_t,We.colorSpace),de=Se(ie);Me&&ge(ie)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,de,tn,ie.width,ie.height):ge(ie)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,de,tn,ie.width,ie.height):n.renderbufferStorage(n.RENDERBUFFER,tn,ie.width,ie.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function $e(he,ie){if(ie&&ie.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,he),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Fe=i.get(ie.depthTexture);Fe.__renderTarget=ie,(!Fe.__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),ee(ie.depthTexture,0);const Ve=Fe.__webglTexture,We=Se(ie);if(ie.depthTexture.format===gT)ge(ie)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ve,0,We):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ve,0);else if(ie.depthTexture.format===ub)ge(ie)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ve,0,We):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ve,0);else throw new Error("Unknown depthTexture format")}function bt(he){const ie=i.get(he),Me=he.isWebGLCubeRenderTarget===!0;if(ie.__boundDepthTexture!==he.depthTexture){const Fe=he.depthTexture;if(ie.__depthDisposeCallback&&ie.__depthDisposeCallback(),Fe){const Ve=()=>{delete ie.__boundDepthTexture,delete ie.__depthDisposeCallback,Fe.removeEventListener("dispose",Ve)};Fe.addEventListener("dispose",Ve),ie.__depthDisposeCallback=Ve}ie.__boundDepthTexture=Fe}if(he.depthTexture&&!ie.__autoAllocateDepthBuffer){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");const Fe=he.texture.mipmaps;Fe&&Fe.length>0?$e(ie.__webglFramebuffer[0],he):$e(ie.__webglFramebuffer,he)}else if(Me){ie.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)if(t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglFramebuffer[Fe]),ie.__webglDepthbuffer[Fe]===void 0)ie.__webglDepthbuffer[Fe]=n.createRenderbuffer(),He(ie.__webglDepthbuffer[Fe],he,!1);else{const Ve=he.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=ie.__webglDepthbuffer[Fe];n.bindRenderbuffer(n.RENDERBUFFER,We),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ve,n.RENDERBUFFER,We)}}else{const Fe=he.texture.mipmaps;if(Fe&&Fe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglFramebuffer),ie.__webglDepthbuffer===void 0)ie.__webglDepthbuffer=n.createRenderbuffer(),He(ie.__webglDepthbuffer,he,!1);else{const Ve=he.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=ie.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,We),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ve,n.RENDERBUFFER,We)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ct(he,ie,Me){const Fe=i.get(he);ie!==void 0&&Le(Fe.__webglFramebuffer,he,he.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Me!==void 0&&bt(he)}function Lt(he){const ie=he.texture,Me=i.get(he),Fe=i.get(ie);he.addEventListener("dispose",N);const Ve=he.textures,We=he.isWebGLCubeRenderTarget===!0,Ut=Ve.length>1;if(Ut||(Fe.__webglTexture===void 0&&(Fe.__webglTexture=n.createTexture()),Fe.__version=ie.version,a.memory.textures++),We){Me.__webglFramebuffer=[];for(let _t=0;_t<6;_t++)if(ie.mipmaps&&ie.mipmaps.length>0){Me.__webglFramebuffer[_t]=[];for(let tn=0;tn<ie.mipmaps.length;tn++)Me.__webglFramebuffer[_t][tn]=n.createFramebuffer()}else Me.__webglFramebuffer[_t]=n.createFramebuffer()}else{if(ie.mipmaps&&ie.mipmaps.length>0){Me.__webglFramebuffer=[];for(let _t=0;_t<ie.mipmaps.length;_t++)Me.__webglFramebuffer[_t]=n.createFramebuffer()}else Me.__webglFramebuffer=n.createFramebuffer();if(Ut)for(let _t=0,tn=Ve.length;_t<tn;_t++){const de=i.get(Ve[_t]);de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture(),a.memory.textures++)}if(he.samples>0&&ge(he)===!1){Me.__webglMultisampledFramebuffer=n.createFramebuffer(),Me.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Me.__webglMultisampledFramebuffer);for(let _t=0;_t<Ve.length;_t++){const tn=Ve[_t];Me.__webglColorRenderbuffer[_t]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Me.__webglColorRenderbuffer[_t]);const de=s.convert(tn.format,tn.colorSpace),$=s.convert(tn.type),K=T(tn.internalFormat,de,$,tn.colorSpace,he.isXRRenderTarget===!0),me=Se(he);n.renderbufferStorageMultisample(n.RENDERBUFFER,me,K,he.width,he.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+_t,n.RENDERBUFFER,Me.__webglColorRenderbuffer[_t])}n.bindRenderbuffer(n.RENDERBUFFER,null),he.depthBuffer&&(Me.__webglDepthRenderbuffer=n.createRenderbuffer(),He(Me.__webglDepthRenderbuffer,he,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(We){t.bindTexture(n.TEXTURE_CUBE_MAP,Fe.__webglTexture),ue(n.TEXTURE_CUBE_MAP,ie);for(let _t=0;_t<6;_t++)if(ie.mipmaps&&ie.mipmaps.length>0)for(let tn=0;tn<ie.mipmaps.length;tn++)Le(Me.__webglFramebuffer[_t][tn],he,ie,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,tn);else Le(Me.__webglFramebuffer[_t],he,ie,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0);_(ie)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ut){for(let _t=0,tn=Ve.length;_t<tn;_t++){const de=Ve[_t],$=i.get(de);t.bindTexture(n.TEXTURE_2D,$.__webglTexture),ue(n.TEXTURE_2D,de),Le(Me.__webglFramebuffer,he,de,n.COLOR_ATTACHMENT0+_t,n.TEXTURE_2D,0),_(de)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let _t=n.TEXTURE_2D;if((he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(_t=he.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(_t,Fe.__webglTexture),ue(_t,ie),ie.mipmaps&&ie.mipmaps.length>0)for(let tn=0;tn<ie.mipmaps.length;tn++)Le(Me.__webglFramebuffer[tn],he,ie,n.COLOR_ATTACHMENT0,_t,tn);else Le(Me.__webglFramebuffer,he,ie,n.COLOR_ATTACHMENT0,_t,0);_(ie)&&y(_t),t.unbindTexture()}he.depthBuffer&&bt(he)}function Gt(he){const ie=he.textures;for(let Me=0,Fe=ie.length;Me<Fe;Me++){const Ve=ie[Me];if(_(Ve)){const We=S(he),Ut=i.get(Ve).__webglTexture;t.bindTexture(We,Ut),y(We),t.unbindTexture()}}}const qt=[],V=[];function Ae(he){if(he.samples>0){if(ge(he)===!1){const ie=he.textures,Me=he.width,Fe=he.height;let Ve=n.COLOR_BUFFER_BIT;const We=he.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ut=i.get(he),_t=ie.length>1;if(_t)for(let de=0;de<ie.length;de++)t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+de,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+de,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ut.__webglMultisampledFramebuffer);const tn=he.texture.mipmaps;tn&&tn.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ut.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ut.__webglFramebuffer);for(let de=0;de<ie.length;de++){if(he.resolveDepthBuffer&&(he.depthBuffer&&(Ve|=n.DEPTH_BUFFER_BIT),he.stencilBuffer&&he.resolveStencilBuffer&&(Ve|=n.STENCIL_BUFFER_BIT)),_t){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ut.__webglColorRenderbuffer[de]);const $=i.get(ie[de]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,$,0)}n.blitFramebuffer(0,0,Me,Fe,0,0,Me,Fe,Ve,n.NEAREST),l===!0&&(qt.length=0,V.length=0,qt.push(n.COLOR_ATTACHMENT0+de),he.depthBuffer&&he.resolveDepthBuffer===!1&&(qt.push(We),V.push(We),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,V)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,qt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),_t)for(let de=0;de<ie.length;de++){t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+de,n.RENDERBUFFER,Ut.__webglColorRenderbuffer[de]);const $=i.get(ie[de]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+de,n.TEXTURE_2D,$,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ut.__webglMultisampledFramebuffer)}else if(he.depthBuffer&&he.resolveDepthBuffer===!1&&l){const ie=he.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ie])}}}function Se(he){return Math.min(r.maxSamples,he.samples)}function ge(he){const ie=i.get(he);return he.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function fe(he){const ie=a.render.frame;u.get(he)!==ie&&(u.set(he,ie),he.update())}function Ce(he,ie){const Me=he.colorSpace,Fe=he.format,Ve=he.type;return he.isCompressedTexture===!0||he.isVideoTexture===!0||Me!==Pp&&Me!==sf&&(or.getTransfer(Me)===Wr?(Fe!==Fo||Ve!==Ya)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Me)),ie}function ke(he){return typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement?(c.width=he.naturalWidth||he.width,c.height=he.naturalHeight||he.height):typeof VideoFrame<"u"&&he instanceof VideoFrame?(c.width=he.displayWidth,c.height=he.displayHeight):(c.width=he.width,c.height=he.height),c}this.allocateTextureUnit=q,this.resetTextureUnits=H,this.setTexture2D=ee,this.setTexture2DArray=W,this.setTexture3D=Q,this.setTextureCube=X,this.rebindTextures=Ct,this.setupRenderTarget=Lt,this.updateRenderTargetMipmap=Gt,this.updateMultisampleRenderTarget=Ae,this.setupDepthRenderbuffer=bt,this.setupFrameBufferTexture=Le,this.useMultisampledRTT=ge}function PJ(n,e){function t(i,r=sf){let s;const a=or.getTransfer(r);if(i===Ya)return n.UNSIGNED_BYTE;if(i===l2)return n.UNSIGNED_SHORT_4_4_4_4;if(i===c2)return n.UNSIGNED_SHORT_5_5_5_1;if(i===b6)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===y6)return n.BYTE;if(i===_6)return n.SHORT;if(i===mT)return n.UNSIGNED_SHORT;if(i===o2)return n.INT;if(i===Np)return n.UNSIGNED_INT;if(i===Zl)return n.FLOAT;if(i===t0)return n.HALF_FLOAT;if(i===S6)return n.ALPHA;if(i===E6)return n.RGB;if(i===Fo)return n.RGBA;if(i===gT)return n.DEPTH_COMPONENT;if(i===ub)return n.DEPTH_STENCIL;if(i===vx)return n.RED;if(i===rA)return n.RED_INTEGER;if(i===u2)return n.RG;if(i===h2)return n.RG_INTEGER;if(i===d2)return n.RGBA_INTEGER;if(i===lw||i===cw||i===uw||i===hw)if(a===Wr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===lw)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===cw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===uw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===hw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===lw)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===cw)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===uw)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===hw)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===LI||i===UI||i===BI||i===FI)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===LI)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===UI)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===BI)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===FI)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===zI||i===jI||i===HI)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===zI||i===jI)return a===Wr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===HI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===VI||i===GI||i===qI||i===$I||i===WI||i===YI||i===XI||i===KI||i===ZI||i===JI||i===QI||i===eN||i===tN||i===nN)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===VI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===GI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===qI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===$I)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===WI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===YI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===XI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===KI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===ZI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===JI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===QI)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===eN)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===tN)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===nN)return a===Wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===dw||i===iN||i===rN)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===dw)return a===Wr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===iN)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===rN)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===T6||i===sN||i===aN||i===oN)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===dw)return s.COMPRESSED_RED_RGTC1_EXT;if(i===sN)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===aN)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===oN)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===cb?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const Tbe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,xbe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class wbe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Js,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new jo({vertexShader:Tbe,fragmentShader:xbe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Na(new Sx(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Cbe extends Ch{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,m=null;const v=new wbe,_=t.getContextAttributes();let y=null,S=null;const T=[],x=[],I=new gt;let R=null;const N=new ko;N.viewport=new cr;const L=new ko;L.viewport=new cr;const k=[N,L],z=new TJ;let Z=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let _e=T[ve];return _e===void 0&&(_e=new wO,T[ve]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ve){let _e=T[ve];return _e===void 0&&(_e=new wO,T[ve]=_e),_e.getGripSpace()},this.getHand=function(ve){let _e=T[ve];return _e===void 0&&(_e=new wO,T[ve]=_e),_e.getHandSpace()};function q(ve){const _e=x.indexOf(ve.inputSource);if(_e===-1)return;const Le=T[_e];Le!==void 0&&(Le.update(ve.inputSource,ve.frame,c||a),Le.dispatchEvent({type:ve.type,data:ve.inputSource}))}function U(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",U),r.removeEventListener("inputsourceschange",ee);for(let ve=0;ve<T.length;ve++){const _e=x[ve];_e!==null&&(x[ve]=null,T[ve].disconnect(_e))}Z=null,H=null,v.reset(),e.setRenderTarget(y),f=null,d=null,h=null,r=null,S=null,Ne.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){s=ve,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){o=ve,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(ve){c=ve},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(ve){if(r=ve,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",U),r.addEventListener("inputsourceschange",ee),_.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Le=null,He=null,$e=null;_.depth&&($e=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Le=_.stencil?ub:gT,He=_.stencil?cb:Np);const bt={colorFormat:t.RGBA8,depthFormat:$e,scaleFactor:s};h=new XRWebGLBinding(r,t),d=h.createProjectionLayer(bt),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),S=new Xa(d.textureWidth,d.textureHeight,{format:Fo,type:Ya,depthTexture:new bx(d.textureWidth,d.textureHeight,He,void 0,void 0,void 0,void 0,void 0,void 0,Le),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1})}else{const Le={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,Le),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),S=new Xa(f.framebufferWidth,f.framebufferHeight,{format:Fo,type:Ya,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Ne.setContext(r),Ne.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function ee(ve){for(let _e=0;_e<ve.removed.length;_e++){const Le=ve.removed[_e],He=x.indexOf(Le);He>=0&&(x[He]=null,T[He].disconnect(Le))}for(let _e=0;_e<ve.added.length;_e++){const Le=ve.added[_e];let He=x.indexOf(Le);if(He===-1){for(let bt=0;bt<T.length;bt++)if(bt>=x.length){x.push(Le),He=bt;break}else if(x[bt]===null){x[bt]=Le,He=bt;break}if(He===-1)break}const $e=T[He];$e&&$e.connect(Le)}}const W=new Re,Q=new Re;function X(ve,_e,Le){W.setFromMatrixPosition(_e.matrixWorld),Q.setFromMatrixPosition(Le.matrixWorld);const He=W.distanceTo(Q),$e=_e.projectionMatrix.elements,bt=Le.projectionMatrix.elements,Ct=$e[14]/($e[10]-1),Lt=$e[14]/($e[10]+1),Gt=($e[9]+1)/$e[5],qt=($e[9]-1)/$e[5],V=($e[8]-1)/$e[0],Ae=(bt[8]+1)/bt[0],Se=Ct*V,ge=Ct*Ae,fe=He/(-V+Ae),Ce=fe*-V;if(_e.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Ce),ve.translateZ(fe),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),$e[10]===-1)ve.projectionMatrix.copy(_e.projectionMatrix),ve.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const ke=Ct+fe,he=Lt+fe,ie=Se-Ce,Me=ge+(He-Ce),Fe=Gt*Lt/he*ke,Ve=qt*Lt/he*ke;ve.projectionMatrix.makePerspective(ie,Me,Fe,Ve,ke,he),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function Y(ve,_e){_e===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(_e.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(r===null)return;let _e=ve.near,Le=ve.far;v.texture!==null&&(v.depthNear>0&&(_e=v.depthNear),v.depthFar>0&&(Le=v.depthFar)),z.near=L.near=N.near=_e,z.far=L.far=N.far=Le,(Z!==z.near||H!==z.far)&&(r.updateRenderState({depthNear:z.near,depthFar:z.far}),Z=z.near,H=z.far),N.layers.mask=ve.layers.mask|2,L.layers.mask=ve.layers.mask|4,z.layers.mask=N.layers.mask|L.layers.mask;const He=ve.parent,$e=z.cameras;Y(z,He);for(let bt=0;bt<$e.length;bt++)Y($e[bt],He);$e.length===2?X(z,N,L):z.projectionMatrix.copy(N.projectionMatrix),ae(ve,z,He)};function ae(ve,_e,Le){Le===null?ve.matrix.copy(_e.matrixWorld):(ve.matrix.copy(Le.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(_e.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(_e.projectionMatrix),ve.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=vT*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(ve){l=ve,d!==null&&(d.fixedFoveation=ve),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ve)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(z)};let se=null;function ue(ve,_e){if(u=_e.getViewerPose(c||a),m=_e,u!==null){const Le=u.views;f!==null&&(e.setRenderTargetFramebuffer(S,f.framebuffer),e.setRenderTarget(S));let He=!1;Le.length!==z.cameras.length&&(z.cameras.length=0,He=!0);for(let Ct=0;Ct<Le.length;Ct++){const Lt=Le[Ct];let Gt=null;if(f!==null)Gt=f.getViewport(Lt);else{const V=h.getViewSubImage(d,Lt);Gt=V.viewport,Ct===0&&(e.setRenderTargetTextures(S,V.colorTexture,V.depthStencilTexture),e.setRenderTarget(S))}let qt=k[Ct];qt===void 0&&(qt=new ko,qt.layers.enable(Ct),qt.viewport=new cr,k[Ct]=qt),qt.matrix.fromArray(Lt.transform.matrix),qt.matrix.decompose(qt.position,qt.quaternion,qt.scale),qt.projectionMatrix.fromArray(Lt.projectionMatrix),qt.projectionMatrixInverse.copy(qt.projectionMatrix).invert(),qt.viewport.set(Gt.x,Gt.y,Gt.width,Gt.height),Ct===0&&(z.matrix.copy(qt.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),He===!0&&z.cameras.push(qt)}const $e=r.enabledFeatures;if($e&&$e.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&h){const Ct=h.getDepthInformation(Le[0]);Ct&&Ct.isValid&&Ct.texture&&v.init(e,Ct,r.renderState)}}for(let Le=0;Le<T.length;Le++){const He=x[Le],$e=T[Le];He!==null&&$e!==void 0&&$e.update(He,_e,c||a)}se&&se(ve,_e),_e.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:_e}),m=null}const Ne=new MJ;Ne.setAnimationLoop(ue),this.setAnimationLoop=function(ve){se=ve},this.dispose=function(){}}}const g_=new Ru,Abe=new Yn;function Mbe(n,e){function t(_,y){_.matrixAutoUpdate===!0&&_.updateMatrix(),y.value.copy(_.matrix)}function i(_,y){y.color.getRGB(_.fogColor.value,RZ(n)),y.isFog?(_.fogNear.value=y.near,_.fogFar.value=y.far):y.isFogExp2&&(_.fogDensity.value=y.density)}function r(_,y,S,T,x){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(_,y):y.isMeshToonMaterial?(s(_,y),h(_,y)):y.isMeshPhongMaterial?(s(_,y),u(_,y)):y.isMeshStandardMaterial?(s(_,y),d(_,y),y.isMeshPhysicalMaterial&&f(_,y,x)):y.isMeshMatcapMaterial?(s(_,y),m(_,y)):y.isMeshDepthMaterial?s(_,y):y.isMeshDistanceMaterial?(s(_,y),v(_,y)):y.isMeshNormalMaterial?s(_,y):y.isLineBasicMaterial?(a(_,y),y.isLineDashedMaterial&&o(_,y)):y.isPointsMaterial?l(_,y,S,T):y.isSpriteMaterial?c(_,y):y.isShadowMaterial?(_.color.value.copy(y.color),_.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(_,y){_.opacity.value=y.opacity,y.color&&_.diffuse.value.copy(y.color),y.emissive&&_.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(_.map.value=y.map,t(y.map,_.mapTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,t(y.alphaMap,_.alphaMapTransform)),y.bumpMap&&(_.bumpMap.value=y.bumpMap,t(y.bumpMap,_.bumpMapTransform),_.bumpScale.value=y.bumpScale,y.side===Bo&&(_.bumpScale.value*=-1)),y.normalMap&&(_.normalMap.value=y.normalMap,t(y.normalMap,_.normalMapTransform),_.normalScale.value.copy(y.normalScale),y.side===Bo&&_.normalScale.value.negate()),y.displacementMap&&(_.displacementMap.value=y.displacementMap,t(y.displacementMap,_.displacementMapTransform),_.displacementScale.value=y.displacementScale,_.displacementBias.value=y.displacementBias),y.emissiveMap&&(_.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,_.emissiveMapTransform)),y.specularMap&&(_.specularMap.value=y.specularMap,t(y.specularMap,_.specularMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest);const S=e.get(y),T=S.envMap,x=S.envMapRotation;T&&(_.envMap.value=T,g_.copy(x),g_.x*=-1,g_.y*=-1,g_.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(g_.y*=-1,g_.z*=-1),_.envMapRotation.value.setFromMatrix4(Abe.makeRotationFromEuler(g_)),_.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=y.reflectivity,_.ior.value=y.ior,_.refractionRatio.value=y.refractionRatio),y.lightMap&&(_.lightMap.value=y.lightMap,_.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,_.lightMapTransform)),y.aoMap&&(_.aoMap.value=y.aoMap,_.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,_.aoMapTransform))}function a(_,y){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,y.map&&(_.map.value=y.map,t(y.map,_.mapTransform))}function o(_,y){_.dashSize.value=y.dashSize,_.totalSize.value=y.dashSize+y.gapSize,_.scale.value=y.scale}function l(_,y,S,T){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,_.size.value=y.size*S,_.scale.value=T*.5,y.map&&(_.map.value=y.map,t(y.map,_.uvTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,t(y.alphaMap,_.alphaMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest)}function c(_,y){_.diffuse.value.copy(y.color),_.opacity.value=y.opacity,_.rotation.value=y.rotation,y.map&&(_.map.value=y.map,t(y.map,_.mapTransform)),y.alphaMap&&(_.alphaMap.value=y.alphaMap,t(y.alphaMap,_.alphaMapTransform)),y.alphaTest>0&&(_.alphaTest.value=y.alphaTest)}function u(_,y){_.specular.value.copy(y.specular),_.shininess.value=Math.max(y.shininess,1e-4)}function h(_,y){y.gradientMap&&(_.gradientMap.value=y.gradientMap)}function d(_,y){_.metalness.value=y.metalness,y.metalnessMap&&(_.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,_.metalnessMapTransform)),_.roughness.value=y.roughness,y.roughnessMap&&(_.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,_.roughnessMapTransform)),y.envMap&&(_.envMapIntensity.value=y.envMapIntensity)}function f(_,y,S){_.ior.value=y.ior,y.sheen>0&&(_.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),_.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(_.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,_.sheenColorMapTransform)),y.sheenRoughnessMap&&(_.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,_.sheenRoughnessMapTransform))),y.clearcoat>0&&(_.clearcoat.value=y.clearcoat,_.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(_.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,_.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(_.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Bo&&_.clearcoatNormalScale.value.negate())),y.dispersion>0&&(_.dispersion.value=y.dispersion),y.iridescence>0&&(_.iridescence.value=y.iridescence,_.iridescenceIOR.value=y.iridescenceIOR,_.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(_.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,_.iridescenceMapTransform)),y.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),y.transmission>0&&(_.transmission.value=y.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),y.transmissionMap&&(_.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,_.transmissionMapTransform)),_.thickness.value=y.thickness,y.thicknessMap&&(_.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=y.attenuationDistance,_.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(_.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(_.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=y.specularIntensity,_.specularColor.value.copy(y.specularColor),y.specularColorMap&&(_.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,_.specularColorMapTransform)),y.specularIntensityMap&&(_.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,_.specularIntensityMapTransform))}function m(_,y){y.matcap&&(_.matcap.value=y.matcap)}function v(_,y){const S=e.get(y).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Rbe(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,T){const x=T.program;i.uniformBlockBinding(S,x)}function c(S,T){let x=r[S.id];x===void 0&&(m(S),x=u(S),r[S.id]=x,S.addEventListener("dispose",_));const I=T.program;i.updateUBOMapping(S,I);const R=e.render.frame;s[S.id]!==R&&(d(S),s[S.id]=R)}function u(S){const T=h();S.__bindingPointIndex=T;const x=n.createBuffer(),I=S.__size,R=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,I,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,x),x}function h(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(S){const T=r[S.id],x=S.uniforms,I=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let R=0,N=x.length;R<N;R++){const L=Array.isArray(x[R])?x[R]:[x[R]];for(let k=0,z=L.length;k<z;k++){const Z=L[k];if(f(Z,R,k,I)===!0){const H=Z.__offset,q=Array.isArray(Z.value)?Z.value:[Z.value];let U=0;for(let ee=0;ee<q.length;ee++){const W=q[ee],Q=v(W);typeof W=="number"||typeof W=="boolean"?(Z.__data[0]=W,n.bufferSubData(n.UNIFORM_BUFFER,H+U,Z.__data)):W.isMatrix3?(Z.__data[0]=W.elements[0],Z.__data[1]=W.elements[1],Z.__data[2]=W.elements[2],Z.__data[3]=0,Z.__data[4]=W.elements[3],Z.__data[5]=W.elements[4],Z.__data[6]=W.elements[5],Z.__data[7]=0,Z.__data[8]=W.elements[6],Z.__data[9]=W.elements[7],Z.__data[10]=W.elements[8],Z.__data[11]=0):(W.toArray(Z.__data,U),U+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,Z.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(S,T,x,I){const R=S.value,N=T+"_"+x;if(I[N]===void 0)return typeof R=="number"||typeof R=="boolean"?I[N]=R:I[N]=R.clone(),!0;{const L=I[N];if(typeof R=="number"||typeof R=="boolean"){if(L!==R)return I[N]=R,!0}else if(L.equals(R)===!1)return L.copy(R),!0}return!1}function m(S){const T=S.uniforms;let x=0;const I=16;for(let N=0,L=T.length;N<L;N++){const k=Array.isArray(T[N])?T[N]:[T[N]];for(let z=0,Z=k.length;z<Z;z++){const H=k[z],q=Array.isArray(H.value)?H.value:[H.value];for(let U=0,ee=q.length;U<ee;U++){const W=q[U],Q=v(W),X=x%I,Y=X%Q.boundary,ae=X+Y;x+=Y,ae!==0&&I-ae<Q.storage&&(x+=I-ae),H.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=x,x+=Q.storage}}}const R=x%I;return R>0&&(x+=I-R),S.__size=x,S.__cache={},this}function v(S){const T={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(T.boundary=4,T.storage=4):S.isVector2?(T.boundary=8,T.storage=8):S.isVector3||S.isColor?(T.boundary=16,T.storage=12):S.isVector4?(T.boundary=16,T.storage=16):S.isMatrix3?(T.boundary=48,T.storage=48):S.isMatrix4?(T.boundary=64,T.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),T}function _(S){const T=S.target;T.removeEventListener("dispose",_);const x=a.indexOf(T.__bindingPointIndex);a.splice(x,1),n.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function y(){for(const S in r)n.deleteBuffer(r[S]);a=[],r={},s={}}return{bind:l,update:c,dispose:y}}class DJ{constructor(e={}){const{canvas:t=CZ(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=a;const m=new Uint32Array(4),v=new Int32Array(4);let _=null,y=null;const S=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=lf,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const x=this;let I=!1;this._outputColorSpace=Mr;let R=0,N=0,L=null,k=-1,z=null;const Z=new cr,H=new cr;let q=null;const U=new dn(0);let ee=0,W=t.width,Q=t.height,X=1,Y=null,ae=null;const se=new cr(0,0,W,Q),ue=new cr(0,0,W,Q);let Ne=!1;const ve=new _x;let _e=!1,Le=!1;const He=new Yn,$e=new Yn,bt=new Re,Ct=new cr,Lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Gt=!1;function qt(){return L===null?X:1}let V=i;function Ae(Ee,Ye){return t.getContext(Ee,Ye)}try{const Ee={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${mx}`),t.addEventListener("webglcontextlost",Et,!1),t.addEventListener("webglcontextrestored",Wt,!1),t.addEventListener("webglcontextcreationerror",Kt,!1),V===null){const Ye="webgl2";if(V=Ae(Ye,Ee),V===null)throw Ae(Ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ee){throw console.error("THREE.WebGLRenderer: "+Ee.message),Ee}let Se,ge,fe,Ce,ke,he,ie,Me,Fe,Ve,We,Ut,_t,tn,de,$,K,me,Pe,Ue,at,ft,Cn,ze;function It(){Se=new j0e(V),Se.init(),ft=new PJ(V,Se),ge=new D0e(V,Se,e,ft),fe=new Sbe(V,Se),ge.reverseDepthBuffer&&d&&fe.buffers.depth.setReversed(!0),Ce=new G0e(V),ke=new lbe,he=new Ebe(V,Se,fe,ke,ge,ft,Ce),ie=new L0e(x),Me=new z0e(x),Fe=new Kge(V),Cn=new N0e(V,Fe),Ve=new H0e(V,Fe,Ce,Cn),We=new $0e(V,Ve,Fe,Ce),Pe=new q0e(V,ge,he),$=new k0e(ke),Ut=new obe(x,ie,Me,Se,ge,Cn,$),_t=new Mbe(x,ke),tn=new ube,de=new gbe(Se),me=new I0e(x,ie,Me,fe,We,f,l),K=new _be(x,We,ge),ze=new Rbe(V,Ce,ge,fe),Ue=new P0e(V,Se,Ce),at=new V0e(V,Se,Ce),Ce.programs=Ut.programs,x.capabilities=ge,x.extensions=Se,x.properties=ke,x.renderLists=tn,x.shadowMap=K,x.state=fe,x.info=Ce}It();const nt=new Cbe(x,V);this.xr=nt,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const Ee=Se.get("WEBGL_lose_context");Ee&&Ee.loseContext()},this.forceContextRestore=function(){const Ee=Se.get("WEBGL_lose_context");Ee&&Ee.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(Ee){Ee!==void 0&&(X=Ee,this.setSize(W,Q,!1))},this.getSize=function(Ee){return Ee.set(W,Q)},this.setSize=function(Ee,Ye,ct=!0){if(nt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=Ee,Q=Ye,t.width=Math.floor(Ee*X),t.height=Math.floor(Ye*X),ct===!0&&(t.style.width=Ee+"px",t.style.height=Ye+"px"),this.setViewport(0,0,Ee,Ye)},this.getDrawingBufferSize=function(Ee){return Ee.set(W*X,Q*X).floor()},this.setDrawingBufferSize=function(Ee,Ye,ct){W=Ee,Q=Ye,X=ct,t.width=Math.floor(Ee*ct),t.height=Math.floor(Ye*ct),this.setViewport(0,0,Ee,Ye)},this.getCurrentViewport=function(Ee){return Ee.copy(Z)},this.getViewport=function(Ee){return Ee.copy(se)},this.setViewport=function(Ee,Ye,ct,ut){Ee.isVector4?se.set(Ee.x,Ee.y,Ee.z,Ee.w):se.set(Ee,Ye,ct,ut),fe.viewport(Z.copy(se).multiplyScalar(X).round())},this.getScissor=function(Ee){return Ee.copy(ue)},this.setScissor=function(Ee,Ye,ct,ut){Ee.isVector4?ue.set(Ee.x,Ee.y,Ee.z,Ee.w):ue.set(Ee,Ye,ct,ut),fe.scissor(H.copy(ue).multiplyScalar(X).round())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(Ee){fe.setScissorTest(Ne=Ee)},this.setOpaqueSort=function(Ee){Y=Ee},this.setTransparentSort=function(Ee){ae=Ee},this.getClearColor=function(Ee){return Ee.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor(...arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha(...arguments)},this.clear=function(Ee=!0,Ye=!0,ct=!0){let ut=0;if(Ee){let Ke=!1;if(L!==null){const Pt=L.texture.format;Ke=Pt===d2||Pt===h2||Pt===rA}if(Ke){const Pt=L.texture.type,Yt=Pt===Ya||Pt===Np||Pt===mT||Pt===cb||Pt===l2||Pt===c2,rn=me.getClearColor(),cn=me.getClearAlpha(),Hn=rn.r,Vn=rn.g,mn=rn.b;Yt?(m[0]=Hn,m[1]=Vn,m[2]=mn,m[3]=cn,V.clearBufferuiv(V.COLOR,0,m)):(v[0]=Hn,v[1]=Vn,v[2]=mn,v[3]=cn,V.clearBufferiv(V.COLOR,0,v))}else ut|=V.COLOR_BUFFER_BIT}Ye&&(ut|=V.DEPTH_BUFFER_BIT),ct&&(ut|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(ut)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Et,!1),t.removeEventListener("webglcontextrestored",Wt,!1),t.removeEventListener("webglcontextcreationerror",Kt,!1),me.dispose(),tn.dispose(),de.dispose(),ke.dispose(),ie.dispose(),Me.dispose(),We.dispose(),Cn.dispose(),ze.dispose(),Ut.dispose(),nt.dispose(),nt.removeEventListener("sessionstart",ii),nt.removeEventListener("sessionend",jn),ln.stop()};function Et(Ee){Ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Wt(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const Ee=Ce.autoReset,Ye=K.enabled,ct=K.autoUpdate,ut=K.needsUpdate,Ke=K.type;It(),Ce.autoReset=Ee,K.enabled=Ye,K.autoUpdate=ct,K.needsUpdate=ut,K.type=Ke}function Kt(Ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ee.statusMessage)}function je(Ee){const Ye=Ee.target;Ye.removeEventListener("dispose",je),tt(Ye)}function tt(Ee){yt(Ee),ke.remove(Ee)}function yt(Ee){const Ye=ke.get(Ee).programs;Ye!==void 0&&(Ye.forEach(function(ct){Ut.releaseProgram(ct)}),Ee.isShaderMaterial&&Ut.releaseShaderCache(Ee))}this.renderBufferDirect=function(Ee,Ye,ct,ut,Ke,Pt){Ye===null&&(Ye=Lt);const Yt=Ke.isMesh&&Ke.matrixWorld.determinant()<0,rn=Ah(Ee,Ye,ct,ut,Ke);fe.setMaterial(ut,Yt);let cn=ct.index,Hn=1;if(ut.wireframe===!0){if(cn=Ve.getWireframeAttribute(ct),cn===void 0)return;Hn=2}const Vn=ct.drawRange,mn=ct.attributes.position;let Zn=Vn.start*Hn,Di=(Vn.start+Vn.count)*Hn;Pt!==null&&(Zn=Math.max(Zn,Pt.start*Hn),Di=Math.min(Di,(Pt.start+Pt.count)*Hn)),cn!==null?(Zn=Math.max(Zn,0),Di=Math.min(Di,cn.count)):mn!=null&&(Zn=Math.max(Zn,0),Di=Math.min(Di,mn.count));const Kr=Di-Zn;if(Kr<0||Kr===1/0)return;Cn.setup(Ke,ut,rn,ct,cn);let zr,wi=Ue;if(cn!==null&&(zr=Fe.get(cn),wi=at,wi.setIndex(zr)),Ke.isMesh)ut.wireframe===!0?(fe.setLineWidth(ut.wireframeLinewidth*qt()),wi.setMode(V.LINES)):wi.setMode(V.TRIANGLES);else if(Ke.isLine){let Pn=ut.linewidth;Pn===void 0&&(Pn=1),fe.setLineWidth(Pn*qt()),Ke.isLineSegments?wi.setMode(V.LINES):Ke.isLineLoop?wi.setMode(V.LINE_LOOP):wi.setMode(V.LINE_STRIP)}else Ke.isPoints?wi.setMode(V.POINTS):Ke.isSprite&&wi.setMode(V.TRIANGLES);if(Ke.isBatchedMesh)if(Ke._multiDrawInstances!==null)xO("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),wi.renderMultiDrawInstances(Ke._multiDrawStarts,Ke._multiDrawCounts,Ke._multiDrawCount,Ke._multiDrawInstances);else if(Se.get("WEBGL_multi_draw"))wi.renderMultiDraw(Ke._multiDrawStarts,Ke._multiDrawCounts,Ke._multiDrawCount);else{const Pn=Ke._multiDrawStarts,ri=Ke._multiDrawCounts,An=Ke._multiDrawCount,Ja=cn?Fe.get(cn).bytesPerElement:1,Ll=ke.get(ut).currentProgram.getUniforms();for(let da=0;da<An;da++)Ll.setValue(V,"_gl_DrawID",da),wi.render(Pn[da]/Ja,ri[da])}else if(Ke.isInstancedMesh)wi.renderInstances(Zn,Kr,Ke.count);else if(ct.isInstancedBufferGeometry){const Pn=ct._maxInstanceCount!==void 0?ct._maxInstanceCount:1/0,ri=Math.min(ct.instanceCount,Pn);wi.renderInstances(Zn,Kr,ri)}else wi.render(Zn,Kr)};function St(Ee,Ye,ct){Ee.transparent===!0&&Ee.side===Eu&&Ee.forceSinglePass===!1?(Ee.side=Bo,Ee.needsUpdate=!0,Un(Ee,Ye,ct),Ee.side=Ip,Ee.needsUpdate=!0,Un(Ee,Ye,ct),Ee.side=Eu):Un(Ee,Ye,ct)}this.compile=function(Ee,Ye,ct=null){ct===null&&(ct=Ee),y=de.get(ct),y.init(Ye),T.push(y),ct.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(Ye.layers)&&(y.pushLight(Ke),Ke.castShadow&&y.pushShadow(Ke))}),Ee!==ct&&Ee.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(Ye.layers)&&(y.pushLight(Ke),Ke.castShadow&&y.pushShadow(Ke))}),y.setupLights();const ut=new Set;return Ee.traverse(function(Ke){if(!(Ke.isMesh||Ke.isPoints||Ke.isLine||Ke.isSprite))return;const Pt=Ke.material;if(Pt)if(Array.isArray(Pt))for(let Yt=0;Yt<Pt.length;Yt++){const rn=Pt[Yt];St(rn,ct,Ke),ut.add(rn)}else St(Pt,ct,Ke),ut.add(Pt)}),y=T.pop(),ut},this.compileAsync=function(Ee,Ye,ct=null){const ut=this.compile(Ee,Ye,ct);return new Promise(Ke=>{function Pt(){if(ut.forEach(function(Yt){ke.get(Yt).currentProgram.isReady()&&ut.delete(Yt)}),ut.size===0){Ke(Ee);return}setTimeout(Pt,10)}Se.get("KHR_parallel_shader_compile")!==null?Pt():setTimeout(Pt,10)})};let Nn=null;function Pi(Ee){Nn&&Nn(Ee)}function ii(){ln.stop()}function jn(){ln.start()}const ln=new MJ;ln.setAnimationLoop(Pi),typeof self<"u"&&ln.setContext(self),this.setAnimationLoop=function(Ee){Nn=Ee,nt.setAnimationLoop(Ee),Ee===null?ln.stop():ln.start()},nt.addEventListener("sessionstart",ii),nt.addEventListener("sessionend",jn),this.render=function(Ee,Ye){if(Ye!==void 0&&Ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),Ye.parent===null&&Ye.matrixWorldAutoUpdate===!0&&Ye.updateMatrixWorld(),nt.enabled===!0&&nt.isPresenting===!0&&(nt.cameraAutoUpdate===!0&&nt.updateCamera(Ye),Ye=nt.getCamera()),Ee.isScene===!0&&Ee.onBeforeRender(x,Ee,Ye,L),y=de.get(Ee,T.length),y.init(Ye),T.push(y),$e.multiplyMatrices(Ye.projectionMatrix,Ye.matrixWorldInverse),ve.setFromProjectionMatrix($e),Le=this.localClippingEnabled,_e=$.init(this.clippingPlanes,Le),_=tn.get(Ee,S.length),_.init(),S.push(_),nt.enabled===!0&&nt.isPresenting===!0){const Pt=x.xr.getDepthSensingMesh();Pt!==null&&Xt(Pt,Ye,-1/0,x.sortObjects)}Xt(Ee,Ye,0,x.sortObjects),_.finish(),x.sortObjects===!0&&_.sort(Y,ae),Gt=nt.enabled===!1||nt.isPresenting===!1||nt.hasDepthSensing()===!1,Gt&&me.addToRenderList(_,Ee),this.info.render.frame++,_e===!0&&$.beginShadows();const ct=y.state.shadowsArray;K.render(ct,Ee,Ye),_e===!0&&$.endShadows(),this.info.autoReset===!0&&this.info.reset();const ut=_.opaque,Ke=_.transmissive;if(y.setupLights(),Ye.isArrayCamera){const Pt=Ye.cameras;if(Ke.length>0)for(let Yt=0,rn=Pt.length;Yt<rn;Yt++){const cn=Pt[Yt];bn(ut,Ke,Ee,cn)}Gt&&me.render(Ee);for(let Yt=0,rn=Pt.length;Yt<rn;Yt++){const cn=Pt[Yt];xn(_,Ee,cn,cn.viewport)}}else Ke.length>0&&bn(ut,Ke,Ee,Ye),Gt&&me.render(Ee),xn(_,Ee,Ye);L!==null&&N===0&&(he.updateMultisampleRenderTarget(L),he.updateRenderTargetMipmap(L)),Ee.isScene===!0&&Ee.onAfterRender(x,Ee,Ye),Cn.resetDefaultState(),k=-1,z=null,T.pop(),T.length>0?(y=T[T.length-1],_e===!0&&$.setGlobalState(x.clippingPlanes,y.state.camera)):y=null,S.pop(),S.length>0?_=S[S.length-1]:_=null};function Xt(Ee,Ye,ct,ut){if(Ee.visible===!1)return;if(Ee.layers.test(Ye.layers)){if(Ee.isGroup)ct=Ee.renderOrder;else if(Ee.isLOD)Ee.autoUpdate===!0&&Ee.update(Ye);else if(Ee.isLight)y.pushLight(Ee),Ee.castShadow&&y.pushShadow(Ee);else if(Ee.isSprite){if(!Ee.frustumCulled||ve.intersectsSprite(Ee)){ut&&Ct.setFromMatrixPosition(Ee.matrixWorld).applyMatrix4($e);const Yt=We.update(Ee),rn=Ee.material;rn.visible&&_.push(Ee,Yt,rn,ct,Ct.z,null)}}else if((Ee.isMesh||Ee.isLine||Ee.isPoints)&&(!Ee.frustumCulled||ve.intersectsObject(Ee))){const Yt=We.update(Ee),rn=Ee.material;if(ut&&(Ee.boundingSphere!==void 0?(Ee.boundingSphere===null&&Ee.computeBoundingSphere(),Ct.copy(Ee.boundingSphere.center)):(Yt.boundingSphere===null&&Yt.computeBoundingSphere(),Ct.copy(Yt.boundingSphere.center)),Ct.applyMatrix4(Ee.matrixWorld).applyMatrix4($e)),Array.isArray(rn)){const cn=Yt.groups;for(let Hn=0,Vn=cn.length;Hn<Vn;Hn++){const mn=cn[Hn],Zn=rn[mn.materialIndex];Zn&&Zn.visible&&_.push(Ee,Yt,Zn,ct,Ct.z,mn)}}else rn.visible&&_.push(Ee,Yt,rn,ct,Ct.z,null)}}const Pt=Ee.children;for(let Yt=0,rn=Pt.length;Yt<rn;Yt++)Xt(Pt[Yt],Ye,ct,ut)}function xn(Ee,Ye,ct,ut){const Ke=Ee.opaque,Pt=Ee.transmissive,Yt=Ee.transparent;y.setupLightsView(ct),_e===!0&&$.setGlobalState(x.clippingPlanes,ct),ut&&fe.viewport(Z.copy(ut)),Ke.length>0&&Wn(Ke,Ye,ct),Pt.length>0&&Wn(Pt,Ye,ct),Yt.length>0&&Wn(Yt,Ye,ct),fe.buffers.depth.setTest(!0),fe.buffers.depth.setMask(!0),fe.buffers.color.setMask(!0),fe.setPolygonOffset(!1)}function bn(Ee,Ye,ct,ut){if((ct.isScene===!0?ct.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[ut.id]===void 0&&(y.state.transmissionRenderTarget[ut.id]=new Xa(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?t0:Ya,minFilter:_p,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:or.workingColorSpace}));const Pt=y.state.transmissionRenderTarget[ut.id],Yt=ut.viewport||Z;Pt.setSize(Yt.z*x.transmissionResolutionScale,Yt.w*x.transmissionResolutionScale);const rn=x.getRenderTarget();x.setRenderTarget(Pt),x.getClearColor(U),ee=x.getClearAlpha(),ee<1&&x.setClearColor(16777215,.5),x.clear(),Gt&&me.render(ct);const cn=x.toneMapping;x.toneMapping=lf;const Hn=ut.viewport;if(ut.viewport!==void 0&&(ut.viewport=void 0),y.setupLightsView(ut),_e===!0&&$.setGlobalState(x.clippingPlanes,ut),Wn(Ee,ct,ut),he.updateMultisampleRenderTarget(Pt),he.updateRenderTargetMipmap(Pt),Se.has("WEBGL_multisampled_render_to_texture")===!1){let Vn=!1;for(let mn=0,Zn=Ye.length;mn<Zn;mn++){const Di=Ye[mn],Kr=Di.object,zr=Di.geometry,wi=Di.material,Pn=Di.group;if(wi.side===Eu&&Kr.layers.test(ut.layers)){const ri=wi.side;wi.side=Bo,wi.needsUpdate=!0,Ui(Kr,ct,ut,zr,wi,Pn),wi.side=ri,wi.needsUpdate=!0,Vn=!0}}Vn===!0&&(he.updateMultisampleRenderTarget(Pt),he.updateRenderTargetMipmap(Pt))}x.setRenderTarget(rn),x.setClearColor(U,ee),Hn!==void 0&&(ut.viewport=Hn),x.toneMapping=cn}function Wn(Ee,Ye,ct){const ut=Ye.isScene===!0?Ye.overrideMaterial:null;for(let Ke=0,Pt=Ee.length;Ke<Pt;Ke++){const Yt=Ee[Ke],rn=Yt.object,cn=Yt.geometry,Hn=Yt.group;let Vn=Yt.material;Vn.allowOverride===!0&&ut!==null&&(Vn=ut),rn.layers.test(ct.layers)&&Ui(rn,Ye,ct,cn,Vn,Hn)}}function Ui(Ee,Ye,ct,ut,Ke,Pt){Ee.onBeforeRender(x,Ye,ct,ut,Ke,Pt),Ee.modelViewMatrix.multiplyMatrices(ct.matrixWorldInverse,Ee.matrixWorld),Ee.normalMatrix.getNormalMatrix(Ee.modelViewMatrix),Ke.onBeforeRender(x,Ye,ct,ut,Ee,Pt),Ke.transparent===!0&&Ke.side===Eu&&Ke.forceSinglePass===!1?(Ke.side=Bo,Ke.needsUpdate=!0,x.renderBufferDirect(ct,Ye,ut,Ke,Ee,Pt),Ke.side=Ip,Ke.needsUpdate=!0,x.renderBufferDirect(ct,Ye,ut,Ke,Ee,Pt),Ke.side=Eu):x.renderBufferDirect(ct,Ye,ut,Ke,Ee,Pt),Ee.onAfterRender(x,Ye,ct,ut,Ke,Pt)}function Un(Ee,Ye,ct){Ye.isScene!==!0&&(Ye=Lt);const ut=ke.get(Ee),Ke=y.state.lights,Pt=y.state.shadowsArray,Yt=Ke.state.version,rn=Ut.getParameters(Ee,Ke.state,Pt,Ye,ct),cn=Ut.getProgramCacheKey(rn);let Hn=ut.programs;ut.environment=Ee.isMeshStandardMaterial?Ye.environment:null,ut.fog=Ye.fog,ut.envMap=(Ee.isMeshStandardMaterial?Me:ie).get(Ee.envMap||ut.environment),ut.envMapRotation=ut.environment!==null&&Ee.envMap===null?Ye.environmentRotation:Ee.envMapRotation,Hn===void 0&&(Ee.addEventListener("dispose",je),Hn=new Map,ut.programs=Hn);let Vn=Hn.get(cn);if(Vn!==void 0){if(ut.currentProgram===Vn&&ut.lightsStateVersion===Yt)return uc(Ee,rn),Vn}else rn.uniforms=Ut.getUniforms(Ee),Ee.onBeforeCompile(rn,x),Vn=Ut.acquireProgram(rn,cn),Hn.set(cn,Vn),ut.uniforms=rn.uniforms;const mn=ut.uniforms;return(!Ee.isShaderMaterial&&!Ee.isRawShaderMaterial||Ee.clipping===!0)&&(mn.clippingPlanes=$.uniform),uc(Ee,rn),ut.needsLights=tm(Ee),ut.lightsStateVersion=Yt,ut.needsLights&&(mn.ambientLightColor.value=Ke.state.ambient,mn.lightProbe.value=Ke.state.probe,mn.directionalLights.value=Ke.state.directional,mn.directionalLightShadows.value=Ke.state.directionalShadow,mn.spotLights.value=Ke.state.spot,mn.spotLightShadows.value=Ke.state.spotShadow,mn.rectAreaLights.value=Ke.state.rectArea,mn.ltc_1.value=Ke.state.rectAreaLTC1,mn.ltc_2.value=Ke.state.rectAreaLTC2,mn.pointLights.value=Ke.state.point,mn.pointLightShadows.value=Ke.state.pointShadow,mn.hemisphereLights.value=Ke.state.hemi,mn.directionalShadowMap.value=Ke.state.directionalShadowMap,mn.directionalShadowMatrix.value=Ke.state.directionalShadowMatrix,mn.spotShadowMap.value=Ke.state.spotShadowMap,mn.spotLightMatrix.value=Ke.state.spotLightMatrix,mn.spotLightMap.value=Ke.state.spotLightMap,mn.pointShadowMap.value=Ke.state.pointShadowMap,mn.pointShadowMatrix.value=Ke.state.pointShadowMatrix),ut.currentProgram=Vn,ut.uniformsList=null,Vn}function Qs(Ee){if(Ee.uniformsList===null){const Ye=Ee.currentProgram.getUniforms();Ee.uniformsList=CO.seqWithValue(Ye.seq,Ee.uniforms)}return Ee.uniformsList}function uc(Ee,Ye){const ct=ke.get(Ee);ct.outputColorSpace=Ye.outputColorSpace,ct.batching=Ye.batching,ct.batchingColor=Ye.batchingColor,ct.instancing=Ye.instancing,ct.instancingColor=Ye.instancingColor,ct.instancingMorph=Ye.instancingMorph,ct.skinning=Ye.skinning,ct.morphTargets=Ye.morphTargets,ct.morphNormals=Ye.morphNormals,ct.morphColors=Ye.morphColors,ct.morphTargetsCount=Ye.morphTargetsCount,ct.numClippingPlanes=Ye.numClippingPlanes,ct.numIntersection=Ye.numClipIntersection,ct.vertexAlphas=Ye.vertexAlphas,ct.vertexTangents=Ye.vertexTangents,ct.toneMapping=Ye.toneMapping}function Ah(Ee,Ye,ct,ut,Ke){Ye.isScene!==!0&&(Ye=Lt),he.resetTextureUnits();const Pt=Ye.fog,Yt=ut.isMeshStandardMaterial?Ye.environment:null,rn=L===null?x.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Pp,cn=(ut.isMeshStandardMaterial?Me:ie).get(ut.envMap||Yt),Hn=ut.vertexColors===!0&&!!ct.attributes.color&&ct.attributes.color.itemSize===4,Vn=!!ct.attributes.tangent&&(!!ut.normalMap||ut.anisotropy>0),mn=!!ct.morphAttributes.position,Zn=!!ct.morphAttributes.normal,Di=!!ct.morphAttributes.color;let Kr=lf;ut.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Kr=x.toneMapping);const zr=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,wi=zr!==void 0?zr.length:0,Pn=ke.get(ut),ri=y.state.lights;if(_e===!0&&(Le===!0||Ee!==z)){const os=Ee===z&&ut.id===k;$.setState(ut,Ee,os)}let An=!1;ut.version===Pn.__version?(Pn.needsLights&&Pn.lightsStateVersion!==ri.state.version||Pn.outputColorSpace!==rn||Ke.isBatchedMesh&&Pn.batching===!1||!Ke.isBatchedMesh&&Pn.batching===!0||Ke.isBatchedMesh&&Pn.batchingColor===!0&&Ke.colorTexture===null||Ke.isBatchedMesh&&Pn.batchingColor===!1&&Ke.colorTexture!==null||Ke.isInstancedMesh&&Pn.instancing===!1||!Ke.isInstancedMesh&&Pn.instancing===!0||Ke.isSkinnedMesh&&Pn.skinning===!1||!Ke.isSkinnedMesh&&Pn.skinning===!0||Ke.isInstancedMesh&&Pn.instancingColor===!0&&Ke.instanceColor===null||Ke.isInstancedMesh&&Pn.instancingColor===!1&&Ke.instanceColor!==null||Ke.isInstancedMesh&&Pn.instancingMorph===!0&&Ke.morphTexture===null||Ke.isInstancedMesh&&Pn.instancingMorph===!1&&Ke.morphTexture!==null||Pn.envMap!==cn||ut.fog===!0&&Pn.fog!==Pt||Pn.numClippingPlanes!==void 0&&(Pn.numClippingPlanes!==$.numPlanes||Pn.numIntersection!==$.numIntersection)||Pn.vertexAlphas!==Hn||Pn.vertexTangents!==Vn||Pn.morphTargets!==mn||Pn.morphNormals!==Zn||Pn.morphColors!==Di||Pn.toneMapping!==Kr||Pn.morphTargetsCount!==wi)&&(An=!0):(An=!0,Pn.__version=ut.version);let Ja=Pn.currentProgram;An===!0&&(Ja=Un(ut,Ye,Ke));let Ll=!1,da=!1,Yc=!1;const Or=Ja.getUniforms(),on=Pn.uniforms;if(fe.useProgram(Ja.program)&&(Ll=!0,da=!0,Yc=!0),ut.id!==k&&(k=ut.id,da=!0),Ll||z!==Ee){fe.buffers.depth.getReversed()?(He.copy(Ee.projectionMatrix),mpe(He),gpe(He),Or.setValue(V,"projectionMatrix",He)):Or.setValue(V,"projectionMatrix",Ee.projectionMatrix),Or.setValue(V,"viewMatrix",Ee.matrixWorldInverse);const On=Or.map.cameraPosition;On!==void 0&&On.setValue(V,bt.setFromMatrixPosition(Ee.matrixWorld)),ge.logarithmicDepthBuffer&&Or.setValue(V,"logDepthBufFC",2/(Math.log(Ee.far+1)/Math.LN2)),(ut.isMeshPhongMaterial||ut.isMeshToonMaterial||ut.isMeshLambertMaterial||ut.isMeshBasicMaterial||ut.isMeshStandardMaterial||ut.isShaderMaterial)&&Or.setValue(V,"isOrthographic",Ee.isOrthographicCamera===!0),z!==Ee&&(z=Ee,da=!0,Yc=!0)}if(Ke.isSkinnedMesh){Or.setOptional(V,Ke,"bindMatrix"),Or.setOptional(V,Ke,"bindMatrixInverse");const os=Ke.skeleton;os&&(os.boneTexture===null&&os.computeBoneTexture(),Or.setValue(V,"boneTexture",os.boneTexture,he))}Ke.isBatchedMesh&&(Or.setOptional(V,Ke,"batchingTexture"),Or.setValue(V,"batchingTexture",Ke._matricesTexture,he),Or.setOptional(V,Ke,"batchingIdTexture"),Or.setValue(V,"batchingIdTexture",Ke._indirectTexture,he),Or.setOptional(V,Ke,"batchingColorTexture"),Ke._colorsTexture!==null&&Or.setValue(V,"batchingColorTexture",Ke._colorsTexture,he));const fa=ct.morphAttributes;if((fa.position!==void 0||fa.normal!==void 0||fa.color!==void 0)&&Pe.update(Ke,ct,Ja),(da||Pn.receiveShadow!==Ke.receiveShadow)&&(Pn.receiveShadow=Ke.receiveShadow,Or.setValue(V,"receiveShadow",Ke.receiveShadow)),ut.isMeshGouraudMaterial&&ut.envMap!==null&&(on.envMap.value=cn,on.flipEnvMap.value=cn.isCubeTexture&&cn.isRenderTargetTexture===!1?-1:1),ut.isMeshStandardMaterial&&ut.envMap===null&&Ye.environment!==null&&(on.envMapIntensity.value=Ye.environmentIntensity),da&&(Or.setValue(V,"toneMappingExposure",x.toneMappingExposure),Pn.needsLights&&Od(on,Yc),Pt&&ut.fog===!0&&_t.refreshFogUniforms(on,Pt),_t.refreshMaterialUniforms(on,ut,X,Q,y.state.transmissionRenderTarget[Ee.id]),CO.upload(V,Qs(Pn),on,he)),ut.isShaderMaterial&&ut.uniformsNeedUpdate===!0&&(CO.upload(V,Qs(Pn),on,he),ut.uniformsNeedUpdate=!1),ut.isSpriteMaterial&&Or.setValue(V,"center",Ke.center),Or.setValue(V,"modelViewMatrix",Ke.modelViewMatrix),Or.setValue(V,"normalMatrix",Ke.normalMatrix),Or.setValue(V,"modelMatrix",Ke.matrixWorld),ut.isShaderMaterial||ut.isRawShaderMaterial){const os=ut.uniformsGroups;for(let On=0,vl=os.length;On<vl;On++){const Cs=os[On];ze.update(Cs,Ja),ze.bind(Cs,Ja)}}return Ja}function Od(Ee,Ye){Ee.ambientLightColor.needsUpdate=Ye,Ee.lightProbe.needsUpdate=Ye,Ee.directionalLights.needsUpdate=Ye,Ee.directionalLightShadows.needsUpdate=Ye,Ee.pointLights.needsUpdate=Ye,Ee.pointLightShadows.needsUpdate=Ye,Ee.spotLights.needsUpdate=Ye,Ee.spotLightShadows.needsUpdate=Ye,Ee.rectAreaLights.needsUpdate=Ye,Ee.hemisphereLights.needsUpdate=Ye}function tm(Ee){return Ee.isMeshLambertMaterial||Ee.isMeshToonMaterial||Ee.isMeshPhongMaterial||Ee.isMeshStandardMaterial||Ee.isShadowMaterial||Ee.isShaderMaterial&&Ee.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(Ee,Ye,ct){const ut=ke.get(Ee);ut.__autoAllocateDepthBuffer=Ee.resolveDepthBuffer===!1,ut.__autoAllocateDepthBuffer===!1&&(ut.__useRenderToTexture=!1),ke.get(Ee.texture).__webglTexture=Ye,ke.get(Ee.depthTexture).__webglTexture=ut.__autoAllocateDepthBuffer?void 0:ct,ut.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Ee,Ye){const ct=ke.get(Ee);ct.__webglFramebuffer=Ye,ct.__useDefaultFramebuffer=Ye===void 0};const Mh=V.createFramebuffer();this.setRenderTarget=function(Ee,Ye=0,ct=0){L=Ee,R=Ye,N=ct;let ut=!0,Ke=null,Pt=!1,Yt=!1;if(Ee){const cn=ke.get(Ee);if(cn.__useDefaultFramebuffer!==void 0)fe.bindFramebuffer(V.FRAMEBUFFER,null),ut=!1;else if(cn.__webglFramebuffer===void 0)he.setupRenderTarget(Ee);else if(cn.__hasExternalTextures)he.rebindTextures(Ee,ke.get(Ee.texture).__webglTexture,ke.get(Ee.depthTexture).__webglTexture);else if(Ee.depthBuffer){const mn=Ee.depthTexture;if(cn.__boundDepthTexture!==mn){if(mn!==null&&ke.has(mn)&&(Ee.width!==mn.image.width||Ee.height!==mn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");he.setupDepthRenderbuffer(Ee)}}const Hn=Ee.texture;(Hn.isData3DTexture||Hn.isDataArrayTexture||Hn.isCompressedArrayTexture)&&(Yt=!0);const Vn=ke.get(Ee).__webglFramebuffer;Ee.isWebGLCubeRenderTarget?(Array.isArray(Vn[Ye])?Ke=Vn[Ye][ct]:Ke=Vn[Ye],Pt=!0):Ee.samples>0&&he.useMultisampledRTT(Ee)===!1?Ke=ke.get(Ee).__webglMultisampledFramebuffer:Array.isArray(Vn)?Ke=Vn[ct]:Ke=Vn,Z.copy(Ee.viewport),H.copy(Ee.scissor),q=Ee.scissorTest}else Z.copy(se).multiplyScalar(X).floor(),H.copy(ue).multiplyScalar(X).floor(),q=Ne;if(ct!==0&&(Ke=Mh),fe.bindFramebuffer(V.FRAMEBUFFER,Ke)&&ut&&fe.drawBuffers(Ee,Ke),fe.viewport(Z),fe.scissor(H),fe.setScissorTest(q),Pt){const cn=ke.get(Ee.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,cn.__webglTexture,ct)}else if(Yt){const cn=ke.get(Ee.texture),Hn=Ye;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,cn.__webglTexture,ct,Hn)}else if(Ee!==null&&ct!==0){const cn=ke.get(Ee.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,cn.__webglTexture,ct)}k=-1},this.readRenderTargetPixels=function(Ee,Ye,ct,ut,Ke,Pt,Yt){if(!(Ee&&Ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let rn=ke.get(Ee).__webglFramebuffer;if(Ee.isWebGLCubeRenderTarget&&Yt!==void 0&&(rn=rn[Yt]),rn){fe.bindFramebuffer(V.FRAMEBUFFER,rn);try{const cn=Ee.texture,Hn=cn.format,Vn=cn.type;if(!ge.textureFormatReadable(Hn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ge.textureTypeReadable(Vn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ye>=0&&Ye<=Ee.width-ut&&ct>=0&&ct<=Ee.height-Ke&&V.readPixels(Ye,ct,ut,Ke,ft.convert(Hn),ft.convert(Vn),Pt)}finally{const cn=L!==null?ke.get(L).__webglFramebuffer:null;fe.bindFramebuffer(V.FRAMEBUFFER,cn)}}},this.readRenderTargetPixelsAsync=async function(Ee,Ye,ct,ut,Ke,Pt,Yt){if(!(Ee&&Ee.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let rn=ke.get(Ee).__webglFramebuffer;if(Ee.isWebGLCubeRenderTarget&&Yt!==void 0&&(rn=rn[Yt]),rn)if(Ye>=0&&Ye<=Ee.width-ut&&ct>=0&&ct<=Ee.height-Ke){fe.bindFramebuffer(V.FRAMEBUFFER,rn);const cn=Ee.texture,Hn=cn.format,Vn=cn.type;if(!ge.textureFormatReadable(Hn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ge.textureTypeReadable(Vn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const mn=V.createBuffer();V.bindBuffer(V.PIXEL_PACK_BUFFER,mn),V.bufferData(V.PIXEL_PACK_BUFFER,Pt.byteLength,V.STREAM_READ),V.readPixels(Ye,ct,ut,Ke,ft.convert(Hn),ft.convert(Vn),0);const Zn=L!==null?ke.get(L).__webglFramebuffer:null;fe.bindFramebuffer(V.FRAMEBUFFER,Zn);const Di=V.fenceSync(V.SYNC_GPU_COMMANDS_COMPLETE,0);return V.flush(),await ppe(V,Di,4),V.bindBuffer(V.PIXEL_PACK_BUFFER,mn),V.getBufferSubData(V.PIXEL_PACK_BUFFER,0,Pt),V.deleteBuffer(mn),V.deleteSync(Di),Pt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Ee,Ye=null,ct=0){const ut=Math.pow(2,-ct),Ke=Math.floor(Ee.image.width*ut),Pt=Math.floor(Ee.image.height*ut),Yt=Ye!==null?Ye.x:0,rn=Ye!==null?Ye.y:0;he.setTexture2D(Ee,0),V.copyTexSubImage2D(V.TEXTURE_2D,ct,0,0,Yt,rn,Ke,Pt),fe.unbindTexture()};const Rh=V.createFramebuffer(),hc=V.createFramebuffer();this.copyTextureToTexture=function(Ee,Ye,ct=null,ut=null,Ke=0,Pt=null){Pt===null&&(Ke!==0?(xO("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Pt=Ke,Ke=0):Pt=0);let Yt,rn,cn,Hn,Vn,mn,Zn,Di,Kr;const zr=Ee.isCompressedTexture?Ee.mipmaps[Pt]:Ee.image;if(ct!==null)Yt=ct.max.x-ct.min.x,rn=ct.max.y-ct.min.y,cn=ct.isBox3?ct.max.z-ct.min.z:1,Hn=ct.min.x,Vn=ct.min.y,mn=ct.isBox3?ct.min.z:0;else{const fa=Math.pow(2,-Ke);Yt=Math.floor(zr.width*fa),rn=Math.floor(zr.height*fa),Ee.isDataArrayTexture?cn=zr.depth:Ee.isData3DTexture?cn=Math.floor(zr.depth*fa):cn=1,Hn=0,Vn=0,mn=0}ut!==null?(Zn=ut.x,Di=ut.y,Kr=ut.z):(Zn=0,Di=0,Kr=0);const wi=ft.convert(Ye.format),Pn=ft.convert(Ye.type);let ri;Ye.isData3DTexture?(he.setTexture3D(Ye,0),ri=V.TEXTURE_3D):Ye.isDataArrayTexture||Ye.isCompressedArrayTexture?(he.setTexture2DArray(Ye,0),ri=V.TEXTURE_2D_ARRAY):(he.setTexture2D(Ye,0),ri=V.TEXTURE_2D),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,Ye.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ye.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,Ye.unpackAlignment);const An=V.getParameter(V.UNPACK_ROW_LENGTH),Ja=V.getParameter(V.UNPACK_IMAGE_HEIGHT),Ll=V.getParameter(V.UNPACK_SKIP_PIXELS),da=V.getParameter(V.UNPACK_SKIP_ROWS),Yc=V.getParameter(V.UNPACK_SKIP_IMAGES);V.pixelStorei(V.UNPACK_ROW_LENGTH,zr.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,zr.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Hn),V.pixelStorei(V.UNPACK_SKIP_ROWS,Vn),V.pixelStorei(V.UNPACK_SKIP_IMAGES,mn);const Or=Ee.isDataArrayTexture||Ee.isData3DTexture,on=Ye.isDataArrayTexture||Ye.isData3DTexture;if(Ee.isDepthTexture){const fa=ke.get(Ee),os=ke.get(Ye),On=ke.get(fa.__renderTarget),vl=ke.get(os.__renderTarget);fe.bindFramebuffer(V.READ_FRAMEBUFFER,On.__webglFramebuffer),fe.bindFramebuffer(V.DRAW_FRAMEBUFFER,vl.__webglFramebuffer);for(let Cs=0;Cs<cn;Cs++)Or&&(V.framebufferTextureLayer(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,ke.get(Ee).__webglTexture,Ke,mn+Cs),V.framebufferTextureLayer(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,ke.get(Ye).__webglTexture,Pt,Kr+Cs)),V.blitFramebuffer(Hn,Vn,Yt,rn,Zn,Di,Yt,rn,V.DEPTH_BUFFER_BIT,V.NEAREST);fe.bindFramebuffer(V.READ_FRAMEBUFFER,null),fe.bindFramebuffer(V.DRAW_FRAMEBUFFER,null)}else if(Ke!==0||Ee.isRenderTargetTexture||ke.has(Ee)){const fa=ke.get(Ee),os=ke.get(Ye);fe.bindFramebuffer(V.READ_FRAMEBUFFER,Rh),fe.bindFramebuffer(V.DRAW_FRAMEBUFFER,hc);for(let On=0;On<cn;On++)Or?V.framebufferTextureLayer(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,fa.__webglTexture,Ke,mn+On):V.framebufferTexture2D(V.READ_FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,fa.__webglTexture,Ke),on?V.framebufferTextureLayer(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,os.__webglTexture,Pt,Kr+On):V.framebufferTexture2D(V.DRAW_FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,os.__webglTexture,Pt),Ke!==0?V.blitFramebuffer(Hn,Vn,Yt,rn,Zn,Di,Yt,rn,V.COLOR_BUFFER_BIT,V.NEAREST):on?V.copyTexSubImage3D(ri,Pt,Zn,Di,Kr+On,Hn,Vn,Yt,rn):V.copyTexSubImage2D(ri,Pt,Zn,Di,Hn,Vn,Yt,rn);fe.bindFramebuffer(V.READ_FRAMEBUFFER,null),fe.bindFramebuffer(V.DRAW_FRAMEBUFFER,null)}else on?Ee.isDataTexture||Ee.isData3DTexture?V.texSubImage3D(ri,Pt,Zn,Di,Kr,Yt,rn,cn,wi,Pn,zr.data):Ye.isCompressedArrayTexture?V.compressedTexSubImage3D(ri,Pt,Zn,Di,Kr,Yt,rn,cn,wi,zr.data):V.texSubImage3D(ri,Pt,Zn,Di,Kr,Yt,rn,cn,wi,Pn,zr):Ee.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,Pt,Zn,Di,Yt,rn,wi,Pn,zr.data):Ee.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,Pt,Zn,Di,zr.width,zr.height,wi,zr.data):V.texSubImage2D(V.TEXTURE_2D,Pt,Zn,Di,Yt,rn,wi,Pn,zr);V.pixelStorei(V.UNPACK_ROW_LENGTH,An),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Ja),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Ll),V.pixelStorei(V.UNPACK_SKIP_ROWS,da),V.pixelStorei(V.UNPACK_SKIP_IMAGES,Yc),Pt===0&&Ye.generateMipmaps&&V.generateMipmap(ri),fe.unbindTexture()},this.copyTextureToTexture3D=function(Ee,Ye,ct=null,ut=null,Ke=0){return xO('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Ee,Ye,ct,ut,Ke)},this.initRenderTarget=function(Ee){ke.get(Ee).__webglFramebuffer===void 0&&he.setupRenderTarget(Ee)},this.initTexture=function(Ee){Ee.isCubeTexture?he.setTextureCube(Ee,0):Ee.isData3DTexture?he.setTexture3D(Ee,0):Ee.isDataArrayTexture||Ee.isCompressedArrayTexture?he.setTexture2DArray(Ee,0):he.setTexture2D(Ee,0),fe.unbindTexture()},this.resetState=function(){R=0,N=0,L=null,fe.reset(),Cn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return hd}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=or._getDrawingBufferColorSpace(e),t.unpackColorSpace=or._getUnpackColorSpace()}}const Obe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:g6,AddEquation:sy,AddOperation:sZ,AdditiveAnimationBlendMode:x6,AdditiveBlending:o4,AgXToneMapping:uZ,AlphaFormat:S6,AlwaysCompare:xZ,AlwaysDepth:OI,AlwaysStencilFunc:h4,AmbientLight:vJ,AnimationAction:CJ,AnimationClip:rC,AnimationLoader:Vme,AnimationMixer:yge,AnimationObjectGroup:gge,AnimationUtils:Fme,ArcCurve:VZ,ArrayCamera:TJ,ArrowHelper:jge,AttachedBindMode:u4,Audio:xJ,AudioAnalyser:age,AudioContext:W6,AudioListener:ige,AudioLoader:ege,AxesHelper:Hge,BackSide:Bo,BasicDepthPacking:n0,BasicShadowMap:FK,BatchedMesh:BZ,Bone:O6,BooleanKeyframeTrack:Ub,Box2:Age,Box3:ic,Box3Helper:Fge,BoxGeometry:Lb,BoxHelper:Bge,BufferAttribute:Vr,BufferGeometry:xi,BufferGeometryLoader:EJ,ByteType:y6,Cache:pg,Camera:aA,CameraHelper:Uge,CanvasTexture:ome,CapsuleGeometry:E2,CatmullRomCurve3:GZ,CineonToneMapping:lZ,CircleGeometry:T2,ClampToEdgeWrapping:ud,Clock:Y6,Color:dn,ColorKeyframeTrack:G6,ColorManagement:or,CompressedArrayTexture:sme,CompressedCubeTexture:ame,CompressedTexture:S2,CompressedTextureLoader:Gme,ConeGeometry:cA,ConstantAlphaFactor:nZ,ConstantColorFactor:eZ,Controls:Gge,CubeCamera:IZ,CubeReflectionMapping:Ig,CubeRefractionMapping:Fy,CubeTexture:oA,CubeTextureLoader:qme,CubeUVReflectionMapping:gx,CubicBezierCurve:P6,CubicBezierCurve3:qZ,CubicInterpolant:cJ,CullFaceBack:a4,CullFaceFront:BK,CullFaceFrontBack:pfe,CullFaceNone:UK,Curve:bf,CurvePath:WZ,CustomBlending:zK,CustomToneMapping:cZ,CylinderGeometry:lA,Cylindrical:Cge,Data3DTexture:m2,DataArrayTexture:sA,DataTexture:cf,DataTextureLoader:$me,DataUtils:Ipe,DecrementStencilOp:Mfe,DecrementWrapStencilOp:Ofe,DefaultLoadingManager:dJ,DepthArrayTexture:lme,DepthFormat:gT,DepthStencilFormat:ub,DepthTexture:bx,DetachedBindMode:dZ,DirectionalLight:gJ,DirectionalLightHelper:Lge,DiscreteInterpolant:uJ,DodecahedronGeometry:x2,DoubleSide:Eu,DstAlphaFactor:XK,DstColorFactor:ZK,DynamicCopyUsage:Gfe,DynamicDrawUsage:d4,DynamicReadUsage:jfe,EdgesGeometry:HZ,EllipseCurve:w2,EqualCompare:bZ,EqualDepth:NI,EqualStencilFunc:Dfe,EquirectangularReflectionMapping:Gw,EquirectangularRefractionMapping:qw,Euler:Ru,EventDispatcher:Ch,ExtrudeGeometry:C2,FileLoader:Ng,Float16BufferAttribute:Bpe,Float32BufferAttribute:Tn,FloatType:Zl,Fog:v2,FogExp2:g2,FramebufferTexture:rme,FrontSide:Ip,Frustum:_x,FrustumArray:b2,GLBufferAttribute:xge,GLSL1:$fe,GLSL3:f4,GreaterCompare:SZ,GreaterDepth:DI,GreaterEqualCompare:TZ,GreaterEqualDepth:PI,GreaterEqualStencilFunc:Bfe,GreaterStencilFunc:Lfe,GridHelper:Dge,Group:B_,HalfFloatType:t0,HemisphereLight:fJ,HemisphereLightHelper:Pge,IcosahedronGeometry:A2,ImageBitmapLoader:Qme,ImageLoader:sC,ImageUtils:AZ,IncrementStencilOp:Afe,IncrementWrapStencilOp:Rfe,InstancedBufferAttribute:ST,InstancedBufferGeometry:SJ,InstancedInterleavedBuffer:Tge,InstancedMesh:UZ,Int16BufferAttribute:Lpe,Int32BufferAttribute:Upe,Int8BufferAttribute:Ppe,IntType:o2,InterleavedBuffer:y2,InterleavedBufferAttribute:hb,Interpolant:dA,InterpolateDiscrete:Ww,InterpolateLinear:lN,InterpolateSmooth:TO,InterpolationSamplingMode:Xfe,InterpolationSamplingType:Yfe,InvertStencilOp:Ife,KeepStencilOp:S_,KeyframeTrack:Cd,LOD:kZ,LatheGeometry:M2,Layers:yT,LessCompare:_Z,LessDepth:II,LessEqualCompare:w6,LessEqualDepth:lb,LessEqualStencilFunc:kfe,LessStencilFunc:Pfe,Light:a0,LightProbe:bJ,Line:zy,Line3:Mge,LineBasicMaterial:Gc,LineCurve:D6,LineCurve3:$Z,LineDashedMaterial:aJ,LineLoop:FZ,LineSegments:jp,LinearFilter:Ls,LinearInterpolant:V6,LinearMipMapLinearFilter:yfe,LinearMipMapNearestFilter:vfe,LinearMipmapLinearFilter:_p,LinearMipmapNearestFilter:ow,LinearSRGBColorSpace:Pp,LinearToneMapping:aZ,LinearTransfer:Xw,Loader:Bu,LoaderUtils:y4,LoadingManager:q6,LoopOnce:fZ,LoopPingPong:mZ,LoopRepeat:pZ,MOUSE:dfe,Material:Wo,MaterialLoader:k2,MathUtils:dpe,Matrix2:J6,Matrix3:Ai,Matrix4:Yn,MaxEquation:GK,Mesh:Na,MeshBasicMaterial:r0,MeshDepthMaterial:z6,MeshDistanceMaterial:j6,MeshLambertMaterial:rJ,MeshMatcapMaterial:sJ,MeshNormalMaterial:F6,MeshPhongMaterial:nJ,MeshPhysicalMaterial:tJ,MeshStandardMaterial:B6,MeshToonMaterial:iJ,MinEquation:VK,MirroredRepeatWrapping:$w,MixOperation:rZ,MultiplyBlending:c4,MultiplyOperation:iA,NearestFilter:Pa,NearestMipMapLinearFilter:gfe,NearestMipMapNearestFilter:mfe,NearestMipmapLinearFilter:TE,NearestMipmapNearestFilter:v6,NeutralToneMapping:hZ,NeverCompare:yZ,NeverDepth:RI,NeverStencilFunc:Nfe,NoBlending:nc,NoColorSpace:sf,NoToneMapping:lf,NormalAnimationBlendMode:f2,NormalBlending:G_,NotEqualCompare:EZ,NotEqualDepth:kI,NotEqualStencilFunc:Ufe,NumberKeyframeTrack:nC,Object3D:mr,ObjectLoader:Zme,ObjectSpaceNormalMap:vZ,OctahedronGeometry:uA,OneFactor:$K,OneMinusConstantAlphaFactor:iZ,OneMinusConstantColorFactor:tZ,OneMinusDstAlphaFactor:KK,OneMinusDstColorFactor:JK,OneMinusSrcAlphaFactor:MI,OneMinusSrcColorFactor:YK,OrthographicCamera:Ex,PCFShadowMap:s2,PCFSoftShadowMap:aw,PMREMGenerator:S4,Path:dN,PerspectiveCamera:ko,Plane:Zv,PlaneGeometry:Sx,PlaneHelper:zge,PointLight:mJ,PointLightHelper:Ige,Points:zZ,PointsMaterial:I6,PolarGridHelper:kge,PolyhedronGeometry:s0,PositionalAudio:sge,PropertyBinding:_r,PropertyMixer:wJ,QuadraticBezierCurve:k6,QuadraticBezierCurve3:L6,Quaternion:jc,QuaternionKeyframeTrack:fA,QuaternionLinearInterpolant:hJ,RED_GREEN_RGTC2_Format:aN,RED_RGTC1_Format:T6,REVISION:mx,RGBADepthPacking:gZ,RGBAFormat:Fo,RGBAIntegerFormat:d2,RGBA_ASTC_10x10_Format:eN,RGBA_ASTC_10x5_Format:ZI,RGBA_ASTC_10x6_Format:JI,RGBA_ASTC_10x8_Format:QI,RGBA_ASTC_12x10_Format:tN,RGBA_ASTC_12x12_Format:nN,RGBA_ASTC_4x4_Format:VI,RGBA_ASTC_5x4_Format:GI,RGBA_ASTC_5x5_Format:qI,RGBA_ASTC_6x5_Format:$I,RGBA_ASTC_6x6_Format:WI,RGBA_ASTC_8x5_Format:YI,RGBA_ASTC_8x6_Format:XI,RGBA_ASTC_8x8_Format:KI,RGBA_BPTC_Format:dw,RGBA_ETC2_EAC_Format:HI,RGBA_PVRTC_2BPPV1_Format:FI,RGBA_PVRTC_4BPPV1_Format:BI,RGBA_S3TC_DXT1_Format:cw,RGBA_S3TC_DXT3_Format:uw,RGBA_S3TC_DXT5_Format:hw,RGBDepthPacking:Tfe,RGBFormat:E6,RGBIntegerFormat:_fe,RGB_BPTC_SIGNED_Format:iN,RGB_BPTC_UNSIGNED_Format:rN,RGB_ETC1_Format:zI,RGB_ETC2_Format:jI,RGB_PVRTC_2BPPV1_Format:UI,RGB_PVRTC_4BPPV1_Format:LI,RGB_S3TC_DXT1_Format:lw,RGDepthPacking:xfe,RGFormat:u2,RGIntegerFormat:h2,RawShaderMaterial:eJ,Ray:yx,Raycaster:Z6,RectAreaLight:yJ,RedFormat:vx,RedIntegerFormat:rA,ReinhardToneMapping:oZ,RenderTarget:p2,RenderTarget3D:_ge,RenderTargetArray:bge,RepeatWrapping:pT,ReplaceStencilOp:Cfe,ReverseSubtractEquation:HK,RingGeometry:R2,SIGNED_RED_GREEN_RGTC2_Format:oN,SIGNED_RED_RGTC1_Format:sN,SRGBColorSpace:Mr,SRGBTransfer:Wr,Scene:bT,ShaderChunk:Ni,ShaderLib:ef,ShaderMaterial:jo,ShadowMaterial:QZ,Shape:$_,ShapeGeometry:O2,ShapePath:Vge,ShapeUtils:of,ShortType:_6,Skeleton:_2,SkeletonHelper:Oge,SkinnedMesh:LZ,Source:dy,Sphere:Il,SphereGeometry:hA,Spherical:wge,SphericalHarmonics3:_J,SplineCurve:U6,SpotLight:pJ,SpotLightHelper:Rge,Sprite:DZ,SpriteMaterial:R6,SrcAlphaFactor:AI,SrcAlphaSaturateFactor:QK,SrcColorFactor:WK,StaticCopyUsage:Vfe,StaticDrawUsage:Kw,StaticReadUsage:zfe,StereoCamera:tge,StreamCopyUsage:qfe,StreamDrawUsage:Ffe,StreamReadUsage:Hfe,StringKeyframeTrack:Bb,SubtractEquation:jK,SubtractiveBlending:l4,TOUCH:ffe,TangentSpaceNormalMap:i0,TetrahedronGeometry:I2,Texture:Js,TextureLoader:Wme,TextureUtils:Xge,TimestampQuery:Wfe,TorusGeometry:N2,TorusKnotGeometry:P2,Triangle:Tu,TriangleFanDrawMode:Efe,TriangleStripDrawMode:Sfe,TrianglesDrawMode:bfe,TubeGeometry:D2,UVMapping:a2,Uint16BufferAttribute:A6,Uint32BufferAttribute:M6,Uint8BufferAttribute:Dpe,Uint8ClampedBufferAttribute:kpe,Uniform:Mi,UniformsGroup:Ege,UniformsLib:an,UniformsUtils:OZ,UnsignedByteType:Ya,UnsignedInt248Type:cb,UnsignedInt5999Type:b6,UnsignedIntType:Np,UnsignedShort4444Type:l2,UnsignedShort5551Type:c2,UnsignedShortType:mT,VSMShadowMap:Jd,Vector2:gt,Vector3:Re,Vector4:cr,VectorKeyframeTrack:iC,VideoFrameTexture:ime,VideoTexture:jZ,WebGL3DRenderTarget:Spe,WebGLArrayRenderTarget:bpe,WebGLCoordinateSystem:hd,WebGLCubeRenderTarget:NZ,WebGLRenderTarget:Xa,WebGLRenderer:DJ,WebGLUtils:PJ,WebGPUCoordinateSystem:Zw,WebXRController:wO,WireframeGeometry:JZ,WrapAroundEnding:Yw,ZeroCurvatureEnding:L_,ZeroFactor:qK,ZeroSlopeEnding:U_,ZeroStencilOp:wfe,createCanvasElement:CZ},Symbol.toStringTag,{value:"Module"}));var kJ={exports:{}},Li={},e8=Symbol.for("react.transitional.element"),Ibe=Symbol.for("react.portal"),Nbe=Symbol.for("react.fragment"),Pbe=Symbol.for("react.strict_mode"),Dbe=Symbol.for("react.profiler"),kbe=Symbol.for("react.consumer"),Lbe=Symbol.for("react.context"),Ube=Symbol.for("react.forward_ref"),Bbe=Symbol.for("react.suspense"),Fbe=Symbol.for("react.memo"),LJ=Symbol.for("react.lazy"),kq=Symbol.iterator;function zbe(n){return n===null||typeof n!="object"?null:(n=kq&&n[kq]||n["@@iterator"],typeof n=="function"?n:null)}var UJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BJ=Object.assign,FJ={};function xx(n,e,t){this.props=n,this.context=e,this.refs=FJ,this.updater=t||UJ}xx.prototype.isReactComponent={};xx.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};xx.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function zJ(){}zJ.prototype=xx.prototype;function t8(n,e,t){this.props=n,this.context=e,this.refs=FJ,this.updater=t||UJ}var n8=t8.prototype=new zJ;n8.constructor=t8;BJ(n8,xx.prototype);n8.isPureReactComponent=!0;var Lq=Array.isArray,Ks={H:null,A:null,T:null,S:null,V:null},jJ=Object.prototype.hasOwnProperty;function i8(n,e,t,i,r,s){return t=s.ref,{$$typeof:e8,type:n,key:e,ref:t!==void 0?t:null,props:s}}function jbe(n,e){return i8(n.type,e,void 0,void 0,void 0,n.props)}function r8(n){return typeof n=="object"&&n!==null&&n.$$typeof===e8}function Hbe(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Uq=/\/+/g;function V3(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Hbe(""+n.key):e.toString(36)}function Bq(){}function Vbe(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(Bq,Bq):(n.status="pending",n.then(function(e){n.status==="pending"&&(n.status="fulfilled",n.value=e)},function(e){n.status==="pending"&&(n.status="rejected",n.reason=e)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function hE(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case e8:case Ibe:a=!0;break;case LJ:return a=n._init,hE(a(n._payload),e,t,i,r)}}if(a)return r=r(n),a=i===""?"."+V3(n,0):i,Lq(r)?(t="",a!=null&&(t=a.replace(Uq,"$&/")+"/"),hE(r,e,t,"",function(c){return c})):r!=null&&(r8(r)&&(r=jbe(r,t+(r.key==null||n&&n.key===r.key?"":(""+r.key).replace(Uq,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(Lq(n))for(var l=0;l<n.length;l++)i=n[l],s=o+V3(i,l),a+=hE(i,e,t,s,r);else if(l=zbe(n),typeof l=="function")for(n=l.call(n),l=0;!(i=n.next()).done;)i=i.value,s=o+V3(i,l++),a+=hE(i,e,t,s,r);else if(s==="object"){if(typeof n.then=="function")return hE(Vbe(n),e,t,i,r);throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function _R(n,e,t){if(n==null)return n;var i=[],r=0;return hE(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Gbe(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fq=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(e))return}else if(typeof ss=="object"&&typeof ss.emit=="function"){ss.emit("uncaughtException",n);return}console.error(n)};function qbe(){}Li.Children={map:_R,forEach:function(n,e,t){_R(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _R(n,function(){e++}),e},toArray:function(n){return _R(n,function(e){return e})||[]},only:function(n){if(!r8(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Li.Component=xx;Li.Fragment=Nbe;Li.Profiler=Dbe;Li.PureComponent=t8;Li.StrictMode=Pbe;Li.Suspense=Bbe;Li.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ks;Li.__COMPILER_RUNTIME={__proto__:null,c:function(n){return Ks.H.useMemoCache(n)}};Li.cache=function(n){return function(){return n.apply(null,arguments)}};Li.cloneElement=function(n,e,t){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=BJ({},n.props),r=n.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(r=""+e.key),e)!jJ.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}return i8(n.type,r,void 0,void 0,s,i)};Li.createContext=function(n){return n={$$typeof:Lbe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:kbe,_context:n},n};Li.createElement=function(n,e,t){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)jJ.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return i8(n,s,void 0,void 0,null,r)};Li.createRef=function(){return{current:null}};Li.forwardRef=function(n){return{$$typeof:Ube,render:n}};Li.isValidElement=r8;Li.lazy=function(n){return{$$typeof:LJ,_payload:{_status:-1,_result:n},_init:Gbe}};Li.memo=function(n,e){return{$$typeof:Fbe,type:n,compare:e===void 0?null:e}};Li.startTransition=function(n){var e=Ks.T,t={};Ks.T=t;try{var i=n(),r=Ks.S;r!==null&&r(t,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(qbe,Fq)}catch(s){Fq(s)}finally{Ks.T=e}};Li.unstable_useCacheRefresh=function(){return Ks.H.useCacheRefresh()};Li.use=function(n){return Ks.H.use(n)};Li.useActionState=function(n,e,t){return Ks.H.useActionState(n,e,t)};Li.useCallback=function(n,e){return Ks.H.useCallback(n,e)};Li.useContext=function(n){return Ks.H.useContext(n)};Li.useDebugValue=function(){};Li.useDeferredValue=function(n,e){return Ks.H.useDeferredValue(n,e)};Li.useEffect=function(n,e,t){var i=Ks.H;if(typeof t=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(n,e)};Li.useId=function(){return Ks.H.useId()};Li.useImperativeHandle=function(n,e,t){return Ks.H.useImperativeHandle(n,e,t)};Li.useInsertionEffect=function(n,e){return Ks.H.useInsertionEffect(n,e)};Li.useLayoutEffect=function(n,e){return Ks.H.useLayoutEffect(n,e)};Li.useMemo=function(n,e){return Ks.H.useMemo(n,e)};Li.useOptimistic=function(n,e){return Ks.H.useOptimistic(n,e)};Li.useReducer=function(n,e,t){return Ks.H.useReducer(n,e,t)};Li.useRef=function(n){return Ks.H.useRef(n)};Li.useState=function(n){return Ks.H.useState(n)};Li.useSyncExternalStore=function(n,e,t){return Ks.H.useSyncExternalStore(n,e,t)};Li.useTransition=function(){return Ks.H.useTransition()};Li.version="19.1.0";kJ.exports=Li;var vt=kJ.exports;const TT=Dl(vt);var HJ={exports:{}},o0={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */o0.ConcurrentRoot=1;o0.ContinuousEventPriority=8;o0.DefaultEventPriority=32;o0.DiscreteEventPriority=2;o0.IdleEventPriority=268435456;o0.LegacyRoot=0;o0.NoEventPriority=0;HJ.exports=o0;var AO=HJ.exports,VJ={exports:{}},GJ={},qJ={exports:{}},$J={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT=vt;function $be(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Wbe=typeof Object.is=="function"?Object.is:$be,Ybe=xT.useState,Xbe=xT.useEffect,Kbe=xT.useLayoutEffect,Zbe=xT.useDebugValue;function Jbe(n,e){var t=e(),i=Ybe({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return Kbe(function(){r.value=t,r.getSnapshot=e,G3(r)&&s({inst:r})},[n,t,e]),Xbe(function(){return G3(r)&&s({inst:r}),n(function(){G3(r)&&s({inst:r})})},[n]),Zbe(t),t}function G3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Wbe(n,t)}catch{return!0}}function Qbe(n,e){return e()}var eSe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qbe:Jbe;$J.useSyncExternalStore=xT.useSyncExternalStore!==void 0?xT.useSyncExternalStore:eSe;qJ.exports=$J;var tSe=qJ.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2=vt,nSe=tSe;function iSe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var rSe=typeof Object.is=="function"?Object.is:iSe,sSe=nSe.useSyncExternalStore,aSe=U2.useRef,oSe=U2.useEffect,lSe=U2.useMemo,cSe=U2.useDebugValue;GJ.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=aSe(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=lSe(function(){function l(f){if(!c){if(c=!0,u=f,f=i(f),r!==void 0&&a.hasValue){var m=a.value;if(r(m,f))return h=m}return h=f}if(m=h,rSe(u,f))return m;var v=i(f);return r!==void 0&&r(m,v)?(u=f,m):(u=f,h=v)}var c=!1,u,h,d=t===void 0?null:t;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,t,i,r]);var o=sSe(n,s[0],s[1]);return oSe(function(){a.hasValue=!0,a.value=o},[o]),cSe(o),o};VJ.exports=GJ;var uSe=VJ.exports;const hSe=Dl(uSe),zq=n=>{let e;const t=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,o);return o},dSe=n=>n?zq(n):zq,{useSyncExternalStoreWithSelector:fSe}=hSe,pSe=n=>n;function mSe(n,e=pSe,t){const i=fSe(n.subscribe,n.getState,n.getInitialState,e,t);return TT.useDebugValue(i),i}const jq=(n,e)=>{const t=dSe(n),i=(r,s=e)=>mSe(t,r,s);return Object.assign(i,t),i},WJ=(n,e)=>n?jq(n,e):jq;var YJ={exports:{}},XJ={exports:{}},KJ={exports:{}},ZJ={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,Q){var X=W.length;W.push(Q);e:for(;0<X;){var Y=X-1>>>1,ae=W[Y];if(0<r(ae,Q))W[Y]=Q,W[X]=ae,X=Y;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Q=W[0],X=W.pop();if(X!==Q){W[0]=X;e:for(var Y=0,ae=W.length,se=ae>>>1;Y<se;){var ue=2*(Y+1)-1,Ne=W[ue],ve=ue+1,_e=W[ve];if(0>r(Ne,X))ve<ae&&0>r(_e,Ne)?(W[Y]=_e,W[ve]=X,Y=ve):(W[Y]=Ne,W[ue]=X,Y=ue);else if(ve<ae&&0>r(_e,X))W[Y]=_e,W[ve]=X,Y=ve;else break e}}return Q}function r(W,Q){var X=W.sortIndex-Q.sortIndex;return X!==0?X:W.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,d=3,f=!1,m=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function T(W){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=W)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function x(W){if(v=!1,T(W),!m)if(t(l)!==null)m=!0,U();else{var Q=t(c);Q!==null&&ee(x,Q.startTime-W)}}var I=!1,R=-1,N=5,L=-1;function k(){return!(n.unstable_now()-L<N)}function z(){if(I){var W=n.unstable_now();L=W;var Q=!0;try{e:{m=!1,v&&(v=!1,y(R),R=-1),f=!0;var X=d;try{t:{for(T(W),h=t(l);h!==null&&!(h.expirationTime>W&&k());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,d=h.priorityLevel;var ae=Y(h.expirationTime<=W);if(W=n.unstable_now(),typeof ae=="function"){h.callback=ae,T(W),Q=!0;break t}h===t(l)&&i(l),T(W)}else i(l);h=t(l)}if(h!==null)Q=!0;else{var se=t(c);se!==null&&ee(x,se.startTime-W),Q=!1}}break e}finally{h=null,d=X,f=!1}Q=void 0}}finally{Q?Z():I=!1}}}var Z;if(typeof S=="function")Z=function(){S(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=z,Z=function(){q.postMessage(null)}}else Z=function(){_(z,0)};function U(){I||(I=!0,Z())}function ee(W,Q){R=_(function(){W(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,U())},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var X=d;d=Q;try{return W()}finally{d=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=d;d=W;try{return Q()}finally{d=X}},n.unstable_scheduleCallback=function(W,Q,X){var Y=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Y+X:Y):X=Y,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=X+ae,W={id:u++,callback:Q,priorityLevel:W,startTime:X,expirationTime:ae,sortIndex:-1},X>Y?(W.sortIndex=X,e(c,W),t(l)===null&&W===t(c)&&(v?(y(R),R=-1):v=!0,ee(x,X-Y))):(W.sortIndex=ae,e(l,W),m||f||(m=!0,U())),W},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(W){var Q=d;return function(){var X=d;d=Q;try{return W.apply(this,arguments)}finally{d=X}}}})(ZJ);KJ.exports=ZJ;var T4=KJ.exports;(function(n){n.exports=function(e){function t(p,g,C,P){return new Sc(p,g,C,P)}function i(){}function r(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return p===null||typeof p!="object"?null:(p=ga&&p[ga]||p["@@iterator"],typeof p=="function"?p:null)}function a(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===B0?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case ru:return"Fragment";case Bd:return"Portal";case su:return"Profiler";case Jo:return"StrictMode";case Rm:return"Suspense";case zd:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case Ec:return(p.displayName||"Context")+".Provider";case U0:return(p._context.displayName||"Context")+".Consumer";case Vf:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Om:return g=p.displayName||null,g!==null?g:a(p.type)||"Memo";case Tc:g=p._payload,p=p._init;try{return a(p(g))}catch{}}return null}function o(p){if(Gf===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);Gf=g&&g[1]||"",vv=-1<C.stack.indexOf(`
    at`)?" (<anonymous>)":-1<C.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gf+p+vv}function l(p,g){if(!p||jd)return"";jd=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(g){var hn=function(){throw Error()};if(Object.defineProperty(hn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(hn,[])}catch(Ri){var gn=Ri}Reflect.construct(p,[],hn)}else{try{hn.call()}catch(Ri){gn=Ri}p.call(hn.prototype)}}else{try{throw Error()}catch(Ri){gn=Ri}(hn=p())&&typeof hn.catch=="function"&&hn.catch(function(){})}}catch(Ri){if(Ri&&gn&&typeof Ri.stack=="string")return[Ri.stack,gn.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var te=P.DetermineComponentFrameRoot(),xe=te[0],Be=te[1];if(xe&&Be){var st=xe.split(`
`),wt=Be.split(`
`);for(j=P=0;P<st.length&&!st[P].includes("DetermineComponentFrameRoot");)P++;for(;j<wt.length&&!wt[j].includes("DetermineComponentFrameRoot");)j++;if(P===st.length||j===wt.length)for(P=st.length-1,j=wt.length-1;1<=P&&0<=j&&st[P]!==wt[j];)j--;for(;1<=P&&0<=j;P--,j--)if(st[P]!==wt[j]){if(P!==1||j!==1)do if(P--,j--,0>j||st[P]!==wt[j]){var $t=`
`+st[P].replace(" at new "," at ");return p.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",p.displayName)),$t}while(1<=P&&0<=j);break}}}finally{jd=!1,Error.prepareStackTrace=C}return(C=p?p.displayName||p.name:"")?o(C):""}function c(p){switch(p.tag){case 26:case 27:case 5:return o(p.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return p=l(p.type,!1),p;case 11:return p=l(p.type.render,!1),p;case 1:return p=l(p.type,!0),p;default:return""}}function u(p){try{var g="";do g+=c(p),p=p.return;while(p);return g}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function h(p){var g=p,C=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(C=g.return),p=g.return;while(p)}return g.tag===3?C:null}function d(p){if(h(p)!==p)throw Error(r(188))}function f(p){var g=p.alternate;if(!g){if(g=h(p),g===null)throw Error(r(188));return g!==p?null:p}for(var C=p,P=g;;){var j=C.return;if(j===null)break;var te=j.alternate;if(te===null){if(P=j.return,P!==null){C=P;continue}break}if(j.child===te.child){for(te=j.child;te;){if(te===C)return d(j),p;if(te===P)return d(j),g;te=te.sibling}throw Error(r(188))}if(C.return!==P.return)C=j,P=te;else{for(var xe=!1,Be=j.child;Be;){if(Be===C){xe=!0,C=j,P=te;break}if(Be===P){xe=!0,P=j,C=te;break}Be=Be.sibling}if(!xe){for(Be=te.child;Be;){if(Be===C){xe=!0,C=te,P=j;break}if(Be===P){xe=!0,P=te,C=j;break}Be=Be.sibling}if(!xe)throw Error(r(189))}}if(C.alternate!==P)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?p:g}function m(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(g=m(p),g!==null)return g;p=p.sibling}return null}function v(p){var g=p.tag;if(g===5||g===26||g===27||g===6)return p;for(p=p.child;p!==null;){if(p.tag!==4&&(g=v(p),g!==null))return g;p=p.sibling}return null}function _(p){return{current:p}}function y(p){0>Hh||(p.current=_a[Hh],_a[Hh]=null,Hh--)}function S(p,g){Hh++,_a[Hh]=p.current,p.current=g}function T(p){return p>>>=0,p===0?32:31-(s1(p)/Av|0)|0}function x(p){var g=p&42;if(g!==0)return g;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function I(p,g){var C=p.pendingLanes;if(C===0)return 0;var P=0,j=p.suspendedLanes,te=p.pingedLanes,xe=p.warmLanes;p=p.finishedLanes!==0;var Be=C&134217727;return Be!==0?(C=Be&~j,C!==0?P=x(C):(te&=Be,te!==0?P=x(te):p||(xe=Be&~xe,xe!==0&&(P=x(xe))))):(Be=C&~j,Be!==0?P=x(Be):te!==0?P=x(te):p||(xe=C&~xe,xe!==0&&(P=x(xe)))),P===0?0:g!==0&&g!==P&&!(g&j)&&(j=P&-P,xe=g&-g,j>=xe||j===32&&(xe&4194176)!==0)?g:P}function R(p,g){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&g)===0}function N(p,g){switch(p){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var p=jm;return jm<<=1,!(jm&4194176)&&(jm=128),p}function k(){var p=sa;return sa<<=1,!(sa&62914560)&&(sa=4194304),p}function z(p){for(var g=[],C=0;31>C;C++)g.push(p);return g}function Z(p,g){p.pendingLanes|=g,g!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function H(p,g,C,P,j,te){var xe=p.pendingLanes;p.pendingLanes=C,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=C,p.entangledLanes&=C,p.errorRecoveryDisabledLanes&=C,p.shellSuspendCounter=0;var Be=p.entanglements,st=p.expirationTimes,wt=p.hiddenUpdates;for(C=xe&~C;0<C;){var $t=31-lo(C),hn=1<<$t;Be[$t]=0,st[$t]=-1;var gn=wt[$t];if(gn!==null)for(wt[$t]=null,$t=0;$t<gn.length;$t++){var Ri=gn[$t];Ri!==null&&(Ri.lane&=-536870913)}C&=~hn}P!==0&&q(p,P,0),te!==0&&j===0&&p.tag!==0&&(p.suspendedLanes|=te&~(xe&~g))}function q(p,g,C){p.pendingLanes|=g,p.suspendedLanes&=~g;var P=31-lo(g);p.entangledLanes|=g,p.entanglements[P]=p.entanglements[P]|1073741824|C&4194218}function U(p,g){var C=p.entangledLanes|=g;for(p=p.entanglements;C;){var P=31-lo(C),j=1<<P;j&g|p[P]&g&&(p[P]|=g),C&=~j}}function ee(p){return p&=-p,2<p?8<p?p&134217727?32:268435456:8:2}function W(p){if(E&&typeof E.onCommitFiberRoot=="function")try{E.onCommitFiberRoot(O,p,void 0,(p.current.flags&128)===128)}catch{}}function Q(p){if(typeof np=="function"&&t_(p),E&&typeof E.setStrictMode=="function")try{E.setStrictMode(O,p)}catch{}}function X(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}function Y(p,g){if(typeof p=="object"&&p!==null){var C=M.get(p);return C!==void 0?C:(g={value:p,source:g,stack:u(g)},M.set(p,g),g)}return{value:p,source:g,stack:u(g)}}function ae(p,g){D[B++]=re,D[B++]=G,G=p,re=g}function se(p,g,C){oe[J++]=pe,oe[J++]=ye,oe[J++]=le,le=p;var P=pe;p=ye;var j=32-lo(P)-1;P&=~(1<<j),C+=1;var te=32-lo(g)+j;if(30<te){var xe=j-j%5;te=(P&(1<<xe)-1).toString(32),P>>=xe,j-=xe,pe=1<<32-lo(g)+j|C<<j|P,ye=te+p}else pe=1<<te|C<<j|P,ye=p}function ue(p){p.return!==null&&(ae(p,1),se(p,1,0))}function Ne(p){for(;p===G;)G=D[--B],D[B]=null,re=D[--B],D[B]=null;for(;p===le;)le=oe[--J],oe[J]=null,ye=oe[--J],oe[J]=null,pe=oe[--J],oe[J]=null}function ve(p,g){S(qe,g),S(Xe,p),S(Ie,null),p=qf(g),y(Ie),S(Ie,p)}function _e(){y(Ie),y(Xe),y(qe)}function Le(p){p.memoizedState!==null&&S(Oe,p);var g=Ie.current,C=gS(g,p.type);g!==C&&(S(Xe,p),S(Ie,C))}function He(p){Xe.current===p&&(y(Ie),y(Xe)),Oe.current===p&&(y(Oe),jl?El._currentValue=Ju:El._currentValue2=Ju)}function $e(p){var g=Error(r(418,""));throw qt(Y(g,p)),Dn}function bt(p,g){if(!bl)throw Error(r(175));Jx(p.stateNode,p.type,p.memoizedProps,g,p)||$e(p)}function Ct(p){for(Te=p.return;Te;)switch(Te.tag){case 3:case 27:Tt=!0;return;case 5:case 13:Tt=!1;return;default:Te=Te.return}}function Lt(p){if(!bl||p!==Te)return!1;if(!mt)return Ct(p),mt=!0,!1;var g=!1;if(Vs?p.tag!==3&&p.tag!==27&&(p.tag!==5||wS(p.type)&&!$f(p.type,p.memoizedProps))&&(g=!0):p.tag!==3&&(p.tag!==5||wS(p.type)&&!$f(p.type,p.memoizedProps))&&(g=!0),g&&rt&&$e(p),Ct(p),p.tag===13){if(!bl)throw Error(r(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));rt=Qf(p)}else rt=Te?so(p.stateNode):null;return!0}function Gt(){bl&&(rt=Te=null,mt=!1)}function qt(p){jt===null?jt=[p]:jt.push(p)}function V(){for(var p=Qn,g=gi=Qn=0;g<p;){var C=pn[g];pn[g++]=null;var P=pn[g];pn[g++]=null;var j=pn[g];pn[g++]=null;var te=pn[g];if(pn[g++]=null,P!==null&&j!==null){var xe=P.pending;xe===null?j.next=j:(j.next=xe.next,xe.next=j),P.pending=j}te!==0&&fe(C,j,te)}}function Ae(p,g,C,P){pn[Qn++]=p,pn[Qn++]=g,pn[Qn++]=C,pn[Qn++]=P,gi|=P,p.lanes|=P,p=p.alternate,p!==null&&(p.lanes|=P)}function Se(p,g,C,P){return Ae(p,g,C,P),Ce(p)}function ge(p,g){return Ae(p,null,null,g),Ce(p)}function fe(p,g,C){p.lanes|=C;var P=p.alternate;P!==null&&(P.lanes|=C);for(var j=!1,te=p.return;te!==null;)te.childLanes|=C,P=te.alternate,P!==null&&(P.childLanes|=C),te.tag===22&&(p=te.stateNode,p===null||p._visibility&1||(j=!0)),p=te,te=te.return;j&&g!==null&&p.tag===3&&(te=p.stateNode,j=31-lo(C),te=te.hiddenUpdates,p=te[j],p===null?te[j]=[g]:p.push(g),g.lane=C|536870912)}function Ce(p){if(50<o1)throw o1=0,n3=null,Error(r(185));for(var g=p.return;g!==null;)p=g,g=p.return;return p.tag===3?p.stateNode:null}function ke(p){p!==si&&p.next===null&&(si===null?hi=si=p:si=si.next=p),oi=!0,ei||(ei=!0,We(ie))}function he(p,g){if(!di&&oi){di=!0;do for(var C=!1,P=hi;P!==null;){if(p!==0){var j=P.pendingLanes;if(j===0)var te=0;else{var xe=P.suspendedLanes,Be=P.pingedLanes;te=(1<<31-lo(42|p)+1)-1,te&=j&~(xe&~Be),te=te&201326677?te&201326677|1:te?te|2:0}te!==0&&(C=!0,Ve(P,te))}else te=Sn,te=I(P,P===yn?te:0),!(te&3)||R(P,te)||(C=!0,Ve(P,te));P=P.next}while(C);di=!1}}function ie(){oi=ei=!1;var p=0;ti!==0&&(Sl()&&(p=ti),ti=0);for(var g=kn(),C=null,P=hi;P!==null;){var j=P.next,te=Me(P,g);te===0?(P.next=null,C===null?hi=j:C.next=j,j===null&&(si=C)):(C=P,(p!==0||te&3)&&(oi=!0)),P=j}he(p)}function Me(p,g){for(var C=p.suspendedLanes,P=p.pingedLanes,j=p.expirationTimes,te=p.pendingLanes&-62914561;0<te;){var xe=31-lo(te),Be=1<<xe,st=j[xe];st===-1?(!(Be&C)||Be&P)&&(j[xe]=N(Be,g)):st<=g&&(p.expiredLanes|=Be),te&=~Be}if(g=yn,C=Sn,C=I(p,p===g?C:0),P=p.callbackNode,C===0||p===g&&Jt===2||p.cancelPendingCommit!==null)return P!==null&&P!==null&&uu(P),p.callbackNode=null,p.callbackPriority=0;if(!(C&3)||R(p,C)){if(g=C&-C,g===p.callbackPriority)return g;switch(P!==null&&uu(P),ee(C)){case 2:case 8:C=ba;break;case 32:C=es;break;case 268435456:C=Vh;break;default:C=es}return P=Fe.bind(null,p),C=Qr(C,P),p.callbackPriority=g,p.callbackNode=C,g}return P!==null&&P!==null&&uu(P),p.callbackPriority=2,p.callbackNode=null,2}function Fe(p,g){var C=p.callbackNode;if(Co()&&p.callbackNode!==C)return null;var P=Sn;return P=I(p,p===yn?P:0),P===0?null:(yc(p,P,g),Me(p,kn()),p.callbackNode!=null&&p.callbackNode===C?Fe.bind(null,p):null)}function Ve(p,g){if(Co())return null;yc(p,g,!0)}function We(p){bv?Bn(function(){kt&6?Qr(AS,p):p()}):Qr(AS,p)}function Ut(){return ti===0&&(ti=L()),ti}function _t(p,g){if(li===null){var C=li=[];qn=0,un=Ut(),In={status:"pending",value:void 0,then:function(P){C.push(P)}}}return qn++,g.then(tn,tn),g}function tn(){if(--qn===0&&li!==null){In!==null&&(In.status="fulfilled");var p=li;li=null,un=0,In=null;for(var g=0;g<p.length;g++)(0,p[g])()}}function de(p,g){var C=[],P={status:"pending",value:null,reason:null,then:function(j){C.push(j)}};return p.then(function(){P.status="fulfilled",P.value=g;for(var j=0;j<C.length;j++)(0,C[j])(g)},function(j){for(P.status="rejected",P.reason=j,j=0;j<C.length;j++)(0,C[j])(void 0)}),P}function $(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function K(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function me(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Pe(p,g,C){var P=p.updateQueue;if(P===null)return null;if(P=P.shared,kt&2){var j=P.pending;return j===null?g.next=g:(g.next=j.next,j.next=g),P.pending=g,g=Ce(p),fe(p,null,C),g}return Ae(p,P,g,C),Ce(p)}function Ue(p,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194176)!==0)){var P=g.lanes;P&=p.pendingLanes,C|=P,g.lanes=C,U(p,C)}}function at(p,g){var C=p.updateQueue,P=p.alternate;if(P!==null&&(P=P.updateQueue,C===P)){var j=null,te=null;if(C=C.firstBaseUpdate,C!==null){do{var xe={lane:C.lane,tag:C.tag,payload:C.payload,callback:null,next:null};te===null?j=te=xe:te=te.next=xe,C=C.next}while(C!==null);te===null?j=te=g:te=te.next=g}else j=te=g;C={baseState:P.baseState,firstBaseUpdate:j,lastBaseUpdate:te,shared:P.shared,callbacks:P.callbacks},p.updateQueue=C;return}p=C.lastBaseUpdate,p===null?C.firstBaseUpdate=g:p.next=g,C.lastBaseUpdate=g}function ft(){if(Sr){var p=In;if(p!==null)throw p}}function Cn(p,g,C,P){Sr=!1;var j=p.updateQueue;Ei=!1;var te=j.firstBaseUpdate,xe=j.lastBaseUpdate,Be=j.shared.pending;if(Be!==null){j.shared.pending=null;var st=Be,wt=st.next;st.next=null,xe===null?te=wt:xe.next=wt,xe=st;var $t=p.alternate;$t!==null&&($t=$t.updateQueue,Be=$t.lastBaseUpdate,Be!==xe&&(Be===null?$t.firstBaseUpdate=wt:Be.next=wt,$t.lastBaseUpdate=st))}if(te!==null){var hn=j.baseState;xe=0,$t=wt=st=null,Be=te;do{var gn=Be.lane&-536870913,Ri=gn!==Be.lane;if(Ri?(Sn&gn)===gn:(P&gn)===gn){gn!==0&&gn===un&&(Sr=!0),$t!==null&&($t=$t.next={lane:0,tag:Be.tag,payload:Be.payload,callback:null,next:null});e:{var Wh=p,l1=Be;gn=g;var i_=C;switch(l1.tag){case 1:if(Wh=l1.payload,typeof Wh=="function"){hn=Wh.call(i_,hn,gn);break e}hn=Wh;break e;case 3:Wh.flags=Wh.flags&-65537|128;case 0:if(Wh=l1.payload,gn=typeof Wh=="function"?Wh.call(i_,hn,gn):Wh,gn==null)break e;hn=iu({},hn,gn);break e;case 2:Ei=!0}}gn=Be.callback,gn!==null&&(p.flags|=64,Ri&&(p.flags|=8192),Ri=j.callbacks,Ri===null?j.callbacks=[gn]:Ri.push(gn))}else Ri={lane:gn,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},$t===null?(wt=$t=Ri,st=hn):$t=$t.next=Ri,xe|=gn;if(Be=Be.next,Be===null){if(Be=j.shared.pending,Be===null)break;Ri=Be,Be=Ri.next,Ri.next=null,j.lastBaseUpdate=Ri,j.shared.pending=null}}while(!0);$t===null&&(st=hn),j.baseState=st,j.firstBaseUpdate=wt,j.lastBaseUpdate=$t,te===null&&(j.shared.lanes=0),Oo|=xe,p.lanes=xe,p.memoizedState=hn}}function ze(p,g){if(typeof p!="function")throw Error(r(191,p));p.call(g)}function It(p,g){var C=p.callbacks;if(C!==null)for(p.callbacks=null,p=0;p<C.length;p++)ze(C[p],g)}function nt(p,g){if(A(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var C=Object.keys(p),P=Object.keys(g);if(C.length!==P.length)return!1;for(P=0;P<C.length;P++){var j=C[P];if(!jr.call(g,j)||!A(p[j],g[j]))return!1}return!0}function Et(p){return p=p.status,p==="fulfilled"||p==="rejected"}function Wt(){}function Kt(p,g,C){switch(C=p[C],C===void 0?p.push(g):C!==g&&(g.then(Wt,Wt),g=C),g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===Er?Error(r(483)):p;default:if(typeof g.status=="string")g.then(Wt,Wt);else{if(p=yn,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=g,p.status="pending",p.then(function(P){if(g.status==="pending"){var j=g;j.status="fulfilled",j.value=P}},function(P){if(g.status==="pending"){var j=g;j.status="rejected",j.reason=P}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw p=g.reason,p===Er?Error(r(483)):p}throw sr=g,Er}}function je(){if(sr===null)throw Error(r(459));var p=sr;return sr=null,p}function tt(p){var g=vr;return vr+=1,Bi===null&&(Bi=[]),Kt(Bi,p,g)}function yt(p,g){g=g.props.ref,p.ref=g!==void 0?g:null}function St(p,g){throw g.$$typeof===Ud?Error(r(525)):(p=Object.prototype.toString.call(g),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p)))}function Nn(p){var g=p._init;return g(p._payload)}function Pi(p){function g(dt,Qe){if(p){var pt=dt.deletions;pt===null?(dt.deletions=[Qe],dt.flags|=16):pt.push(Qe)}}function C(dt,Qe){if(!p)return null;for(;Qe!==null;)g(dt,Qe),Qe=Qe.sibling;return null}function P(dt){for(var Qe=new Map;dt!==null;)dt.key!==null?Qe.set(dt.key,dt):Qe.set(dt.index,dt),dt=dt.sibling;return Qe}function j(dt,Qe){return dt=nu(dt,Qe),dt.index=0,dt.sibling=null,dt}function te(dt,Qe,pt){return dt.index=pt,p?(pt=dt.alternate,pt!==null?(pt=pt.index,pt<Qe?(dt.flags|=33554434,Qe):pt):(dt.flags|=33554434,Qe)):(dt.flags|=1048576,Qe)}function xe(dt){return p&&dt.alternate===null&&(dt.flags|=33554434),dt}function Be(dt,Qe,pt,Ht){return Qe===null||Qe.tag!==6?(Qe=Am(pt,dt.mode,Ht),Qe.return=dt,Qe):(Qe=j(Qe,pt),Qe.return=dt,Qe)}function st(dt,Qe,pt,Ht){var $n=pt.type;return $n===ru?$t(dt,Qe,pt.props.children,Ht,pt.key):Qe!==null&&(Qe.elementType===$n||typeof $n=="object"&&$n!==null&&$n.$$typeof===Tc&&Nn($n)===Qe.type)?(Qe=j(Qe,pt.props),yt(Qe,pt),Qe.return=dt,Qe):(Qe=Cm(pt.type,pt.key,pt.props,null,dt.mode,Ht),yt(Qe,pt),Qe.return=dt,Qe)}function wt(dt,Qe,pt,Ht){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==pt.containerInfo||Qe.stateNode.implementation!==pt.implementation?(Qe=mv(pt,dt.mode,Ht),Qe.return=dt,Qe):(Qe=j(Qe,pt.children||[]),Qe.return=dt,Qe)}function $t(dt,Qe,pt,Ht,$n){return Qe===null||Qe.tag!==7?(Qe=zh(pt,dt.mode,Ht,$n),Qe.return=dt,Qe):(Qe=j(Qe,pt),Qe.return=dt,Qe)}function hn(dt,Qe,pt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=Am(""+Qe,dt.mode,pt),Qe.return=dt,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case Hf:return pt=Cm(Qe.type,Qe.key,Qe.props,null,dt.mode,pt),yt(pt,Qe),pt.return=dt,pt;case Bd:return Qe=mv(Qe,dt.mode,pt),Qe.return=dt,Qe;case Tc:var Ht=Qe._init;return Qe=Ht(Qe._payload),hn(dt,Qe,pt)}if(Zu(Qe)||s(Qe))return Qe=zh(Qe,dt.mode,pt,null),Qe.return=dt,Qe;if(typeof Qe.then=="function")return hn(dt,tt(Qe),pt);if(Qe.$$typeof===Ec)return hn(dt,er(dt,Qe),pt);St(dt,Qe)}return null}function gn(dt,Qe,pt,Ht){var $n=Qe!==null?Qe.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return $n!==null?null:Be(dt,Qe,""+pt,Ht);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case Hf:return pt.key===$n?st(dt,Qe,pt,Ht):null;case Bd:return pt.key===$n?wt(dt,Qe,pt,Ht):null;case Tc:return $n=pt._init,pt=$n(pt._payload),gn(dt,Qe,pt,Ht)}if(Zu(pt)||s(pt))return $n!==null?null:$t(dt,Qe,pt,Ht,null);if(typeof pt.then=="function")return gn(dt,Qe,tt(pt),Ht);if(pt.$$typeof===Ec)return gn(dt,Qe,er(dt,pt),Ht);St(dt,pt)}return null}function Ri(dt,Qe,pt,Ht,$n){if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return dt=dt.get(pt)||null,Be(Qe,dt,""+Ht,$n);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case Hf:return dt=dt.get(Ht.key===null?pt:Ht.key)||null,st(Qe,dt,Ht,$n);case Bd:return dt=dt.get(Ht.key===null?pt:Ht.key)||null,wt(Qe,dt,Ht,$n);case Tc:var Ds=Ht._init;return Ht=Ds(Ht._payload),Ri(dt,Qe,pt,Ht,$n)}if(Zu(Ht)||s(Ht))return dt=dt.get(pt)||null,$t(Qe,dt,Ht,$n,null);if(typeof Ht.then=="function")return Ri(dt,Qe,pt,tt(Ht),$n);if(Ht.$$typeof===Ec)return Ri(dt,Qe,pt,er(Qe,Ht),$n);St(Qe,Ht)}return null}function Wh(dt,Qe,pt,Ht){for(var $n=null,Ds=null,vi=Qe,wr=Qe=0,tl=null;vi!==null&&wr<pt.length;wr++){vi.index>wr?(tl=vi,vi=null):tl=vi.sibling;var Cr=gn(dt,vi,pt[wr],Ht);if(Cr===null){vi===null&&(vi=tl);break}p&&vi&&Cr.alternate===null&&g(dt,vi),Qe=te(Cr,Qe,wr),Ds===null?$n=Cr:Ds.sibling=Cr,Ds=Cr,vi=tl}if(wr===pt.length)return C(dt,vi),mt&&ae(dt,wr),$n;if(vi===null){for(;wr<pt.length;wr++)vi=hn(dt,pt[wr],Ht),vi!==null&&(Qe=te(vi,Qe,wr),Ds===null?$n=vi:Ds.sibling=vi,Ds=vi);return mt&&ae(dt,wr),$n}for(vi=P(vi);wr<pt.length;wr++)tl=Ri(vi,dt,wr,pt[wr],Ht),tl!==null&&(p&&tl.alternate!==null&&vi.delete(tl.key===null?wr:tl.key),Qe=te(tl,Qe,wr),Ds===null?$n=tl:Ds.sibling=tl,Ds=tl);return p&&vi.forEach(function(Iv){return g(dt,Iv)}),mt&&ae(dt,wr),$n}function l1(dt,Qe,pt,Ht){if(pt==null)throw Error(r(151));for(var $n=null,Ds=null,vi=Qe,wr=Qe=0,tl=null,Cr=pt.next();vi!==null&&!Cr.done;wr++,Cr=pt.next()){vi.index>wr?(tl=vi,vi=null):tl=vi.sibling;var Iv=gn(dt,vi,Cr.value,Ht);if(Iv===null){vi===null&&(vi=tl);break}p&&vi&&Iv.alternate===null&&g(dt,vi),Qe=te(Iv,Qe,wr),Ds===null?$n=Iv:Ds.sibling=Iv,Ds=Iv,vi=tl}if(Cr.done)return C(dt,vi),mt&&ae(dt,wr),$n;if(vi===null){for(;!Cr.done;wr++,Cr=pt.next())Cr=hn(dt,Cr.value,Ht),Cr!==null&&(Qe=te(Cr,Qe,wr),Ds===null?$n=Cr:Ds.sibling=Cr,Ds=Cr);return mt&&ae(dt,wr),$n}for(vi=P(vi);!Cr.done;wr++,Cr=pt.next())Cr=Ri(vi,dt,wr,Cr.value,Ht),Cr!==null&&(p&&Cr.alternate!==null&&vi.delete(Cr.key===null?wr:Cr.key),Qe=te(Cr,Qe,wr),Ds===null?$n=Cr:Ds.sibling=Cr,Ds=Cr);return p&&vi.forEach(function(efe){return g(dt,efe)}),mt&&ae(dt,wr),$n}function i_(dt,Qe,pt,Ht){if(typeof pt=="object"&&pt!==null&&pt.type===ru&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case Hf:e:{for(var $n=pt.key;Qe!==null;){if(Qe.key===$n){if($n=pt.type,$n===ru){if(Qe.tag===7){C(dt,Qe.sibling),Ht=j(Qe,pt.props.children),Ht.return=dt,dt=Ht;break e}}else if(Qe.elementType===$n||typeof $n=="object"&&$n!==null&&$n.$$typeof===Tc&&Nn($n)===Qe.type){C(dt,Qe.sibling),Ht=j(Qe,pt.props),yt(Ht,pt),Ht.return=dt,dt=Ht;break e}C(dt,Qe);break}else g(dt,Qe);Qe=Qe.sibling}pt.type===ru?(Ht=zh(pt.props.children,dt.mode,Ht,pt.key),Ht.return=dt,dt=Ht):(Ht=Cm(pt.type,pt.key,pt.props,null,dt.mode,Ht),yt(Ht,pt),Ht.return=dt,dt=Ht)}return xe(dt);case Bd:e:{for($n=pt.key;Qe!==null;){if(Qe.key===$n)if(Qe.tag===4&&Qe.stateNode.containerInfo===pt.containerInfo&&Qe.stateNode.implementation===pt.implementation){C(dt,Qe.sibling),Ht=j(Qe,pt.children||[]),Ht.return=dt,dt=Ht;break e}else{C(dt,Qe);break}else g(dt,Qe);Qe=Qe.sibling}Ht=mv(pt,dt.mode,Ht),Ht.return=dt,dt=Ht}return xe(dt);case Tc:return $n=pt._init,pt=$n(pt._payload),i_(dt,Qe,pt,Ht)}if(Zu(pt))return Wh(dt,Qe,pt,Ht);if(s(pt)){if($n=s(pt),typeof $n!="function")throw Error(r(150));return pt=$n.call(pt),l1(dt,Qe,pt,Ht)}if(typeof pt.then=="function")return i_(dt,Qe,tt(pt),Ht);if(pt.$$typeof===Ec)return i_(dt,Qe,er(dt,pt),Ht);St(dt,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint"?(pt=""+pt,Qe!==null&&Qe.tag===6?(C(dt,Qe.sibling),Ht=j(Qe,pt),Ht.return=dt,dt=Ht):(C(dt,Qe),Ht=Am(pt,dt.mode,Ht),Ht.return=dt,dt=Ht),xe(dt)):C(dt,Qe)}return function(dt,Qe,pt,Ht){try{vr=0;var $n=i_(dt,Qe,pt,Ht);return Bi=null,$n}catch(vi){if(vi===Er)throw vi;var Ds=t(29,vi,null,dt.mode);return Ds.lanes=Ht,Ds.return=dt,Ds}finally{}}}function ii(p,g){p=ar,S(Ps,p),S(vs,g),ar=p|g.baseLanes}function jn(){S(Ps,ar),S(vs,vs.current)}function ln(){ar=Ps.current,y(vs),y(Ps)}function Xt(p){var g=p.alternate;S(Fi,Fi.current&1),S(Hr,p),ts===null&&(g===null||vs.current!==null||g.memoizedState!==null)&&(ts=p)}function xn(p){if(p.tag===22){if(S(Fi,Fi.current),S(Hr,p),ts===null){var g=p.alternate;g!==null&&g.memoizedState!==null&&(ts=p)}}else bn()}function bn(){S(Fi,Fi.current),S(Hr,Hr.current)}function Wn(p){y(Hr),ts===p&&(ts=null),y(Fi)}function Ui(p){for(var g=p;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Zf(C)||Ns(C)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function Un(){throw Error(r(321))}function Qs(p,g){if(g===null)return!1;for(var C=0;C<g.length&&C<p.length;C++)if(!A(p[C],g[C]))return!1;return!0}function uc(p,g,C,P,j,te){return Gs=te,Ln=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Jn.H=p===null||p.memoizedState===null?Sa:ja,Mo=!1,te=C(P,j),Mo=!1,za&&(te=Od(g,C,P,j)),Ah(p),te}function Ah(p){Jn.H=qs;var g=bi!==null&&bi.next!==null;if(Gs=0,tr=bi=Ln=null,aa=!1,Lr=0,co=null,g)throw Error(r(300));p===null||us||(p=p.dependencies,p!==null&&fc(p)&&(us=!0))}function Od(p,g,C,P){Ln=p;var j=0;do{if(za&&(co=null),Lr=0,za=!1,25<=j)throw Error(r(301));if(j+=1,tr=bi=null,p.updateQueue!=null){var te=p.updateQueue;te.lastEffect=null,te.events=null,te.stores=null,te.memoCache!=null&&(te.memoCache.index=0)}Jn.H=uo,te=g(C,P)}while(za);return te}function tm(){var p=Jn.H,g=p.useState()[0];return g=typeof g.then=="function"?ct(g):g,p=p.useState()[0],(bi!==null?bi.memoizedState:null)!==p&&(Ln.flags|=1024),g}function Mh(){var p=el!==0;return el=0,p}function Rh(p,g,C){g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~C}function hc(p){if(aa){for(p=p.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}aa=!1}Gs=0,tr=bi=Ln=null,za=!1,Lr=el=0,co=null}function Ee(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?Ln.memoizedState=tr=p:tr=tr.next=p,tr}function Ye(){if(bi===null){var p=Ln.alternate;p=p!==null?p.memoizedState:null}else p=bi.next;var g=tr===null?Ln.memoizedState:tr.next;if(g!==null)tr=g,bi=p;else{if(p===null)throw Ln.alternate===null?Error(r(467)):Error(r(310));bi=p,p={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},tr===null?Ln.memoizedState=tr=p:tr=tr.next=p}return tr}function ct(p){var g=Lr;return Lr+=1,co===null&&(co=[]),p=Kt(co,p,g),g=Ln,(tr===null?g.memoizedState:tr.next)===null&&(g=g.alternate,Jn.H=g===null||g.memoizedState===null?Sa:ja),p}function ut(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return ct(p);if(p.$$typeof===Ec)return ea(p)}throw Error(r(438,String(p)))}function Ke(p){var g=null,C=Ln.updateQueue;if(C!==null&&(g=C.memoCache),g==null){var P=Ln.alternate;P!==null&&(P=P.updateQueue,P!==null&&(P=P.memoCache,P!=null&&(g={data:P.data.map(function(j){return j.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),C===null&&(C=Hl(),Ln.updateQueue=C),C.memoCache=g,C=g.data[g.index],C===void 0)for(C=g.data[g.index]=Array(p),P=0;P<p;P++)C[P]=Xx;return g.index++,C}function Pt(p,g){return typeof g=="function"?g(p):g}function Yt(p){var g=Ye();return rn(g,bi,p)}function rn(p,g,C){var P=p.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=C;var j=p.baseQueue,te=P.pending;if(te!==null){if(j!==null){var xe=j.next;j.next=te.next,te.next=xe}g.baseQueue=j=te,P.pending=null}if(te=p.baseState,j===null)p.memoizedState=te;else{g=j.next;var Be=xe=null,st=null,wt=g,$t=!1;do{var hn=wt.lane&-536870913;if(hn!==wt.lane?(Sn&hn)===hn:(Gs&hn)===hn){var gn=wt.revertLane;if(gn===0)st!==null&&(st=st.next={lane:0,revertLane:0,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),hn===un&&($t=!0);else if((Gs&gn)===gn){wt=wt.next,gn===un&&($t=!0);continue}else hn={lane:0,revertLane:wt.revertLane,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},st===null?(Be=st=hn,xe=te):st=st.next=hn,Ln.lanes|=gn,Oo|=gn;hn=wt.action,Mo&&C(te,hn),te=wt.hasEagerState?wt.eagerState:C(te,hn)}else gn={lane:hn,revertLane:wt.revertLane,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},st===null?(Be=st=gn,xe=te):st=st.next=gn,Ln.lanes|=hn,Oo|=hn;wt=wt.next}while(wt!==null&&wt!==g);if(st===null?xe=te:st.next=Be,!A(te,p.memoizedState)&&(us=!0,$t&&(C=In,C!==null)))throw C;p.memoizedState=te,p.baseState=xe,p.baseQueue=st,P.lastRenderedState=te}return j===null&&(P.lanes=0),[p.memoizedState,P.dispatch]}function cn(p){var g=Ye(),C=g.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=p;var P=C.dispatch,j=C.pending,te=g.memoizedState;if(j!==null){C.pending=null;var xe=j=j.next;do te=p(te,xe.action),xe=xe.next;while(xe!==j);A(te,g.memoizedState)||(us=!0),g.memoizedState=te,g.baseQueue===null&&(g.baseState=te),C.lastRenderedState=te}return[te,P]}function Hn(p,g,C){var P=Ln,j=Ye(),te=mt;if(te){if(C===void 0)throw Error(r(407));C=C()}else C=g();var xe=!A((bi||j).memoizedState,C);if(xe&&(j.memoizedState=C,us=!0),j=j.queue,nm(Zn.bind(null,P,j,p),[p]),j.getSnapshot!==g||xe||tr!==null&&tr.memoizedState.tag&1){if(P.flags|=2048,vl(9,mn.bind(null,P,j,C,g),{destroy:void 0},null),yn===null)throw Error(r(349));te||Gs&60||Vn(P,g,C)}return C}function Vn(p,g,C){p.flags|=16384,p={getSnapshot:g,value:C},g=Ln.updateQueue,g===null?(g=Hl(),Ln.updateQueue=g,g.stores=[p]):(C=g.stores,C===null?g.stores=[p]:C.push(p))}function mn(p,g,C,P){g.value=C,g.getSnapshot=P,Di(g)&&Kr(p)}function Zn(p,g,C){return C(function(){Di(g)&&Kr(p)})}function Di(p){var g=p.getSnapshot;p=p.value;try{var C=g();return!A(p,C)}catch{return!0}}function Kr(p){var g=ge(p,2);g!==null&&no(g,p,2)}function zr(p){var g=Ee();if(typeof p=="function"){var C=p;if(p=C(),Mo){Q(!0);try{C()}finally{Q(!1)}}}return g.memoizedState=g.baseState=p,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:p},g}function wi(p,g,C,P){return p.baseState=C,rn(p,bi,typeof P=="function"?P:Pt)}function Pn(p,g,C,P,j){if(av(p))throw Error(r(485));if(p=g.action,p!==null){var te={payload:j,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(xe){te.listeners.push(xe)}};Jn.T!==null?C(!0):te.isTransition=!1,P(te),C=g.pending,C===null?(te.next=g.pending=te,ri(g,te)):(te.next=C.next,g.pending=C.next=te)}}function ri(p,g){var C=g.action,P=g.payload,j=p.state;if(g.isTransition){var te=Jn.T,xe={};Jn.T=xe;try{var Be=C(j,P),st=Jn.S;st!==null&&st(xe,Be),An(p,g,Be)}catch(wt){Ll(p,g,wt)}finally{Jn.T=te}}else try{te=C(j,P),An(p,g,te)}catch(wt){Ll(p,g,wt)}}function An(p,g,C){C!==null&&typeof C=="object"&&typeof C.then=="function"?C.then(function(P){Ja(p,g,P)},function(P){return Ll(p,g,P)}):Ja(p,g,C)}function Ja(p,g,C){g.status="fulfilled",g.value=C,da(g),p.state=C,g=p.pending,g!==null&&(C=g.next,C===g?p.pending=null:(C=C.next,g.next=C,ri(p,C)))}function Ll(p,g,C){var P=p.pending;if(p.pending=null,P!==null){P=P.next;do g.status="rejected",g.reason=C,da(g),g=g.next;while(g!==P)}p.action=null}function da(p){p=p.listeners;for(var g=0;g<p.length;g++)(0,p[g])()}function Yc(p,g){return g}function Or(p,g){if(mt){var C=yn.formState;if(C!==null){e:{var P=Ln;if(mt){if(rt){var j=Jf(rt,Tt);if(j){rt=so(j),P=xv(j);break e}}$e(P)}P=!1}P&&(g=C[0])}}C=Ee(),C.memoizedState=C.baseState=g,P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yc,lastRenderedState:g},C.queue=P,C=E0.bind(null,Ln,P),P.dispatch=C,P=zr(!1);var te=Ih.bind(null,Ln,!1,P.queue);return P=Ee(),j={state:g,dispatch:null,action:p,pending:null},P.queue=j,C=Pn.bind(null,Ln,j,te,C),j.dispatch=C,P.memoizedState=p,[g,C,!1]}function on(p){var g=Ye();return fa(g,bi,p)}function fa(p,g,C){g=rn(p,g,Yc)[0],p=Yt(Pt)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?ct(g):g;var P=Ye(),j=P.queue,te=j.dispatch;return C!==P.memoizedState&&(Ln.flags|=2048,vl(9,os.bind(null,j,C),{destroy:void 0},null)),[g,te,p]}function os(p,g){p.action=g}function On(p){var g=Ye(),C=bi;if(C!==null)return fa(g,C,p);Ye(),g=g.memoizedState,C=Ye();var P=C.queue.dispatch;return C.memoizedState=p,[g,P,!1]}function vl(p,g,C,P){return p={tag:p,create:g,inst:C,deps:P,next:null},g=Ln.updateQueue,g===null&&(g=Hl(),Ln.updateQueue=g),C=g.lastEffect,C===null?g.lastEffect=p.next=p:(P=C.next,C.next=p,p.next=P,g.lastEffect=p),p}function Cs(){return Ye().memoizedState}function Id(p,g,C,P){var j=Ee();Ln.flags|=p,j.memoizedState=vl(1|g,C,{destroy:void 0},P===void 0?null:P)}function ju(p,g,C,P){var j=Ye();P=P===void 0?null:P;var te=j.memoizedState.inst;bi!==null&&P!==null&&Qs(P,bi.memoizedState.deps)?j.memoizedState=vl(g,C,te,P):(Ln.flags|=p,j.memoizedState=vl(1|g,C,te,P))}function Xc(p,g){Id(8390656,8,p,g)}function nm(p,g){ju(2048,8,p,g)}function iv(p,g){return ju(4,2,p,g)}function im(p,g){return ju(4,4,p,g)}function Qa(p,g){if(typeof g=="function"){p=p();var C=g(p);return function(){typeof C=="function"?C():g(null)}}if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function rm(p,g,C){C=C!=null?C.concat([p]):null,ju(4,4,Qa.bind(null,g,p),C)}function eo(){}function sS(p,g){var C=Ye();g=g===void 0?null:g;var P=C.memoizedState;return g!==null&&Qs(g,P[1])?P[0]:(C.memoizedState=[p,g],p)}function b0(p,g){var C=Ye();g=g===void 0?null:g;var P=C.memoizedState;if(g!==null&&Qs(g,P[1]))return P[0];if(P=p(),Mo){Q(!0);try{p()}finally{Q(!1)}}return C.memoizedState=[P,g],P}function dc(p,g,C){return C===void 0||Gs&1073741824?p.memoizedState=g:(p.memoizedState=C,p=R0(),Ln.lanes|=p,Oo|=p,C)}function Mf(p,g,C,P){return A(C,g)?C:vs.current!==null?(p=dc(p,C,P),A(p,g)||(us=!0),p):Gs&42?(p=R0(),Ln.lanes|=p,Oo|=p,g):(us=!0,p.memoizedState=C)}function Hu(p,g,C,P,j){var te=va();io(te!==0&&8>te?te:8);var xe=Jn.T,Be={};Jn.T=Be,Ih(p,!1,g,C);try{var st=j(),wt=Jn.S;if(wt!==null&&wt(Be,st),st!==null&&typeof st=="object"&&typeof st.then=="function"){var $t=de(st,P);Oh(p,g,$t,La(p))}else Oh(p,g,P,La(p))}catch(hn){Oh(p,g,{then:function(){},status:"rejected",reason:hn},La())}finally{io(te),Jn.T=xe}}function Gr(p){var g=p.memoizedState;if(g!==null)return g;g={memoizedState:Ju,baseState:Ju,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:Ju},next:null};var C={};return g.next={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:C},next:null},p.memoizedState=g,p=p.alternate,p!==null&&(p.memoizedState=g),g}function Kc(){return ea(El)}function rv(){return Ye().memoizedState}function S0(){return Ye().memoizedState}function sv(p){for(var g=p.return;g!==null;){switch(g.tag){case 24:case 3:var C=La();p=me(C);var P=Pe(g,p,C);P!==null&&(no(P,g,C),Ue(P,g,C)),g={cache:lv()},p.payload=g;return}g=g.return}}function aS(p,g,C){var P=La();C={lane:P,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null},av(p)?T0(g,C):(C=Se(p,g,C,P),C!==null&&(no(C,p,P),x0(C,g,P)))}function E0(p,g,C){var P=La();Oh(p,g,C,P)}function Oh(p,g,C,P){var j={lane:P,revertLane:0,action:C,hasEagerState:!1,eagerState:null,next:null};if(av(p))T0(g,j);else{var te=p.alternate;if(p.lanes===0&&(te===null||te.lanes===0)&&(te=g.lastRenderedReducer,te!==null))try{var xe=g.lastRenderedState,Be=te(xe,C);if(j.hasEagerState=!0,j.eagerState=Be,A(Be,xe))return Ae(p,g,j,0),yn===null&&V(),!1}catch{}finally{}if(C=Se(p,g,j,P),C!==null)return no(C,p,P),x0(C,g,P),!0}return!1}function Ih(p,g,C,P){if(P={lane:2,revertLane:Ut(),action:P,hasEagerState:!1,eagerState:null,next:null},av(p)){if(g)throw Error(r(479))}else g=Se(p,C,P,2),g!==null&&no(g,p,2)}function av(p){var g=p.alternate;return p===Ln||g!==null&&g===Ln}function T0(p,g){za=aa=!0;var C=p.pending;C===null?g.next=g:(g.next=C.next,C.next=g),p.pending=g}function x0(p,g,C){if(C&4194176){var P=g.lanes;P&=p.pendingLanes,C|=P,g.lanes=C,U(p,C)}}function sm(p,g,C,P){g=p.memoizedState,C=C(P,g),C=C==null?g:iu({},g,C),p.memoizedState=C,p.lanes===0&&(p.updateQueue.baseState=C)}function ov(p,g,C,P,j,te,xe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(P,te,xe):g.prototype&&g.prototype.isPureReactComponent?!nt(C,P)||!nt(j,te):!0}function w0(p,g,C,P){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,P),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,P),g.state!==p&&Gh.enqueueReplaceState(g,g.state,null)}function Zc(p,g){var C=g;if("ref"in g){C={};for(var P in g)P!=="ref"&&(C[P]=g[P])}if(p=p.defaultProps){C===g&&(C=iu({},C));for(var j in p)C[j]===void 0&&(C[j]=p[j])}return C}function Rf(p,g){try{var C=p.onUncaughtError;C(g.value,{componentStack:g.stack})}catch(P){setTimeout(function(){throw P})}}function C0(p,g,C){try{var P=p.onCaughtError;P(C.value,{componentStack:C.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function _o(p,g,C){return C=me(C),C.tag=3,C.payload={element:null},C.callback=function(){Rf(p,g)},C}function Zr(p){return p=me(p),p.tag=3,p}function Vu(p,g,C,P){var j=C.type.getDerivedStateFromError;if(typeof j=="function"){var te=P.value;p.payload=function(){return j(te)},p.callback=function(){C0(g,C,P)}}var xe=C.stateNode;xe!==null&&typeof xe.componentDidCatch=="function"&&(p.callback=function(){C0(g,C,P),typeof j!="function"&&(rh===null?rh=new Set([this]):rh.add(this));var Be=P.stack;this.componentDidCatch(P.value,{componentStack:Be!==null?Be:""})})}function oS(p,g,C,P,j){if(C.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){if(g=C.alternate,g!==null&&lm(g,C,j,!0),C=Hr.current,C!==null){switch(C.tag){case 13:return ts===null?ta():C.alternate===null&&zi===0&&(zi=3),C.flags&=-257,C.flags|=65536,C.lanes=j,P===Tr?C.flags|=16384:(g=C.updateQueue,g===null?C.updateQueue=new Set([P]):g.add(P),Tm(p,P,j)),!1;case 22:return C.flags|=65536,P===Tr?C.flags|=16384:(g=C.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([P])},C.updateQueue=g):(C=g.retryQueue,C===null?g.retryQueue=new Set([P]):C.add(P)),Tm(p,P,j)),!1}throw Error(r(435,C.tag))}return Tm(p,P,j),ta(),!1}if(mt)return g=Hr.current,g!==null?(!(g.flags&65536)&&(g.flags|=256),g.flags|=65536,g.lanes=j,P!==Dn&&(p=Error(r(422),{cause:P}),qt(Y(p,C)))):(P!==Dn&&(g=Error(r(423),{cause:P}),qt(Y(g,C))),p=p.current.alternate,p.flags|=65536,j&=-j,p.lanes|=j,P=Y(P,C),j=_o(p.stateNode,P,j),at(p,j),zi!==4&&(zi=2)),!1;var te=Error(r(520),{cause:P});if(te=Y(te,C),nh===null?nh=[te]:nh.push(te),zi!==4&&(zi=2),g===null)return!0;P=Y(P,C),C=g;do{switch(C.tag){case 3:return C.flags|=65536,p=j&-j,C.lanes|=p,p=_o(C.stateNode,P,p),at(C,p),!1;case 1:if(g=C.type,te=C.stateNode,(C.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(rh===null||!rh.has(te))))return C.flags|=65536,j&=-j,C.lanes|=j,j=Zr(j),Vu(j,p,C,P),at(C,j),!1}C=C.return}while(C!==null);return!1}function As(p,g,C,P){g.child=p===null?kr(g,null,C,P):xr(g,p.child,C,P)}function lS(p,g,C,P,j){C=C.render;var te=g.ref;if("ref"in P){var xe={};for(var Be in P)Be!=="ref"&&(xe[Be]=P[Be])}else xe=P;return Xo(g),P=uc(p,g,C,xe,te,j),Be=Mh(),p!==null&&!us?(Rh(p,g,j),yi(p,g,j)):(mt&&Be&&ue(g),g.flags|=1,As(p,g,P,j),g.child)}function am(p,g,C,P,j){if(p===null){var te=C.type;return typeof te=="function"&&!xm(te)&&te.defaultProps===void 0&&C.compare===null?(g.tag=15,g.type=te,cS(p,g,te,P,j)):(p=Cm(C.type,null,P,g,g.mode,j),p.ref=g.ref,p.return=g,g.child=p)}if(te=p.child,!Ms(p,j)){var xe=te.memoizedProps;if(C=C.compare,C=C!==null?C:nt,C(xe,P)&&p.ref===g.ref)return yi(p,g,j)}return g.flags|=1,p=nu(te,P),p.ref=g.ref,p.return=g,g.child=p}function cS(p,g,C,P,j){if(p!==null){var te=p.memoizedProps;if(nt(te,P)&&p.ref===g.ref)if(us=!1,g.pendingProps=P=te,Ms(p,j))p.flags&131072&&(us=!0);else return g.lanes=p.lanes,yi(p,g,j)}return bo(p,g,C,P,j)}function Nh(p,g,C){var P=g.pendingProps,j=P.children,te=(g.stateNode._pendingVisibility&2)!==0,xe=p!==null?p.memoizedState:null;if(pa(p,g),P.mode==="hidden"||te){if(g.flags&128){if(P=xe!==null?xe.baseLanes|C:C,p!==null){for(j=g.child=p.child,te=0;j!==null;)te=te|j.lanes|j.childLanes,j=j.sibling;g.childLanes=te&~P}else g.childLanes=0,g.child=null;return Of(p,g,P,C)}if(C&536870912)g.memoizedState={baseLanes:0,cachePool:null},p!==null&&cv(g,xe!==null?xe.cachePool:null),xe!==null?ii(g,xe):jn(),xn(g);else return g.lanes=g.childLanes=536870912,Of(p,g,xe!==null?xe.baseLanes|C:C,C)}else xe!==null?(cv(g,xe.cachePool),ii(g,xe),bn(),g.memoizedState=null):(p!==null&&cv(g,null),jn(),bn());return As(p,g,j,C),g.child}function Of(p,g,C,P){var j=Dh();return j=j===null?null:{parent:jl?yr._currentValue:yr._currentValue2,pool:j},g.memoizedState={baseLanes:C,cachePool:j},p!==null&&cv(g,null),jn(),xn(g),p!==null&&lm(p,g,P,!0),null}function pa(p,g){var C=g.ref;if(C===null)p!==null&&p.ref!==null&&(g.flags|=2097664);else{if(typeof C!="function"&&typeof C!="object")throw Error(r(284));(p===null||p.ref!==C)&&(g.flags|=2097664)}}function bo(p,g,C,P,j){return Xo(g),C=uc(p,g,C,P,void 0,j),P=Mh(),p!==null&&!us?(Rh(p,g,j),yi(p,g,j)):(mt&&P&&ue(g),g.flags|=1,As(p,g,C,j),g.child)}function If(p,g,C,P,j,te){return Xo(g),g.updateQueue=null,C=Od(g,P,C,j),Ah(p),P=Mh(),p!==null&&!us?(Rh(p,g,te),yi(p,g,te)):(mt&&P&&ue(g),g.flags|=1,As(p,g,C,te),g.child)}function uS(p,g,C,P,j){if(Xo(g),g.stateNode===null){var te=oo,xe=C.contextType;typeof xe=="object"&&xe!==null&&(te=ea(xe)),te=new C(P,te),g.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,te.updater=Gh,g.stateNode=te,te._reactInternals=g,te=g.stateNode,te.props=P,te.state=g.memoizedState,te.refs={},$(g),xe=C.contextType,te.context=typeof xe=="object"&&xe!==null?ea(xe):oo,te.state=g.memoizedState,xe=C.getDerivedStateFromProps,typeof xe=="function"&&(sm(g,C,xe,P),te.state=g.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(xe=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),xe!==te.state&&Gh.enqueueReplaceState(te,te.state,null),Cn(g,P,te,j),ft(),te.state=g.memoizedState),typeof te.componentDidMount=="function"&&(g.flags|=4194308),P=!0}else if(p===null){te=g.stateNode;var Be=g.memoizedProps,st=Zc(C,Be);te.props=st;var wt=te.context,$t=C.contextType;xe=oo,typeof $t=="object"&&$t!==null&&(xe=ea($t));var hn=C.getDerivedStateFromProps;$t=typeof hn=="function"||typeof te.getSnapshotBeforeUpdate=="function",Be=g.pendingProps!==Be,$t||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Be||wt!==xe)&&w0(g,te,P,xe),Ei=!1;var gn=g.memoizedState;te.state=gn,Cn(g,P,te,j),ft(),wt=g.memoizedState,Be||gn!==wt||Ei?(typeof hn=="function"&&(sm(g,C,hn,P),wt=g.memoizedState),(st=Ei||ov(g,C,st,P,gn,wt,xe))?($t||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(g.flags|=4194308)):(typeof te.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=P,g.memoizedState=wt),te.props=P,te.state=wt,te.context=xe,P=st):(typeof te.componentDidMount=="function"&&(g.flags|=4194308),P=!1)}else{te=g.stateNode,K(p,g),xe=g.memoizedProps,$t=Zc(C,xe),te.props=$t,hn=g.pendingProps,gn=te.context,wt=C.contextType,st=oo,typeof wt=="object"&&wt!==null&&(st=ea(wt)),Be=C.getDerivedStateFromProps,(wt=typeof Be=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(xe!==hn||gn!==st)&&w0(g,te,P,st),Ei=!1,gn=g.memoizedState,te.state=gn,Cn(g,P,te,j),ft();var Ri=g.memoizedState;xe!==hn||gn!==Ri||Ei||p!==null&&p.dependencies!==null&&fc(p.dependencies)?(typeof Be=="function"&&(sm(g,C,Be,P),Ri=g.memoizedState),($t=Ei||ov(g,C,$t,P,gn,Ri,st)||p!==null&&p.dependencies!==null&&fc(p.dependencies))?(wt||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(P,Ri,st),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(P,Ri,st)),typeof te.componentDidUpdate=="function"&&(g.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof te.componentDidUpdate!="function"||xe===p.memoizedProps&&gn===p.memoizedState||(g.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||xe===p.memoizedProps&&gn===p.memoizedState||(g.flags|=1024),g.memoizedProps=P,g.memoizedState=Ri),te.props=P,te.state=Ri,te.context=st,P=$t):(typeof te.componentDidUpdate!="function"||xe===p.memoizedProps&&gn===p.memoizedState||(g.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||xe===p.memoizedProps&&gn===p.memoizedState||(g.flags|=1024),P=!1)}return te=P,pa(p,g),P=(g.flags&128)!==0,te||P?(te=g.stateNode,C=P&&typeof C.getDerivedStateFromError!="function"?null:te.render(),g.flags|=1,p!==null&&P?(g.child=xr(g,p.child,null,j),g.child=xr(g,null,C,j)):As(p,g,C,j),g.memoizedState=te.state,p=g.child):p=yi(p,g,j),p}function zs(p,g,C,P){return Gt(),g.flags|=256,As(p,g,C,P),g.child}function ms(p){return{baseLanes:p,cachePool:hS()}}function om(p,g,C){return p=p!==null?p.childLanes&~C:0,g&&(p|=Gl),p}function Gu(p,g,C){var P=g.pendingProps,j=!1,te=(g.flags&128)!==0,xe;if((xe=te)||(xe=p!==null&&p.memoizedState===null?!1:(Fi.current&2)!==0),xe&&(j=!0,g.flags&=-129),xe=(g.flags&32)!==0,g.flags&=-33,p===null){if(mt){if(j?Xt(g):bn(),mt){var Be=rt,st;(st=Be)&&(Be=$i(Be,Tt),Be!==null?(g.memoizedState={dehydrated:Be,treeContext:le!==null?{id:pe,overflow:ye}:null,retryLane:536870912},st=t(18,null,null,0),st.stateNode=Be,st.return=g,g.child=st,Te=g,rt=null,st=!0):st=!1),st||$e(g)}if(Be=g.memoizedState,Be!==null&&(Be=Be.dehydrated,Be!==null))return Ns(Be)?g.lanes=16:g.lanes=536870912,null;Wn(g)}return Be=P.children,P=P.fallback,j?(bn(),j=g.mode,Be=ot({mode:"hidden",children:Be},j),P=zh(P,j,C,null),Be.return=g,P.return=g,Be.sibling=P,g.child=Be,j=g.child,j.memoizedState=ms(C),j.childLanes=om(p,xe,C),g.memoizedState=th,P):(Xt(g),Nd(g,Be))}if(st=p.memoizedState,st!==null&&(Be=st.dehydrated,Be!==null)){if(te)g.flags&256?(Xt(g),g.flags&=-257,g=et(p,g,C)):g.memoizedState!==null?(bn(),g.child=p.child,g.flags|=128,g=null):(bn(),j=P.fallback,Be=g.mode,P=ot({mode:"visible",children:P.children},Be),j=zh(j,Be,C,null),j.flags|=2,P.return=g,j.return=g,P.sibling=j,g.child=P,xr(g,p.child,null,C),P=g.child,P.memoizedState=ms(C),P.childLanes=om(p,xe,C),g.memoizedState=th,g=j);else if(Xt(g),Ns(Be))xe=ou(Be).digest,P=Error(r(419)),P.stack="",P.digest=xe,qt({value:P,source:null,stack:null}),g=et(p,g,C);else if(us||lm(p,g,C,!1),xe=(C&p.childLanes)!==0,us||xe){if(xe=yn,xe!==null){if(P=C&-C,P&42)P=1;else switch(P){case 2:P=1;break;case 8:P=4;break;case 32:P=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:P=64;break;case 268435456:P=134217728;break;default:P=0}if(P=P&(xe.suspendedLanes|C)?0:P,P!==0&&P!==st.retryLane)throw st.retryLane=P,ge(p,P),no(xe,p,P),$d}Zf(Be)||ta(),g=et(p,g,C)}else Zf(Be)?(g.flags|=128,g.child=p.child,g=D0.bind(null,p),TS(Be,g),g=null):(p=st.treeContext,bl&&(rt=Y0(Be),Te=g,mt=!0,jt=null,Tt=!1,p!==null&&(oe[J++]=pe,oe[J++]=ye,oe[J++]=le,pe=p.id,ye=p.overflow,le=g)),g=Nd(g,P.children),g.flags|=4096);return g}return j?(bn(),j=P.fallback,Be=g.mode,st=p.child,te=st.sibling,P=nu(st,{mode:"hidden",children:P.children}),P.subtreeFlags=st.subtreeFlags&31457280,te!==null?j=nu(te,j):(j=zh(j,Be,C,null),j.flags|=2),j.return=g,P.return=g,P.sibling=j,g.child=P,P=j,j=g.child,Be=p.child.memoizedState,Be===null?Be=ms(C):(st=Be.cachePool,st!==null?(te=jl?yr._currentValue:yr._currentValue2,st=st.parent!==te?{parent:te,pool:te}:st):st=hS(),Be={baseLanes:Be.baseLanes|C,cachePool:st}),j.memoizedState=Be,j.childLanes=om(p,xe,C),g.memoizedState=th,P):(Xt(g),C=p.child,p=C.sibling,C=nu(C,{mode:"visible",children:P.children}),C.return=g,C.sibling=null,p!==null&&(xe=g.deletions,xe===null?(g.deletions=[p],g.flags|=16):xe.push(p)),g.child=C,g.memoizedState=null,C)}function Nd(p,g){return g=ot({mode:"visible",children:g},p.mode),g.return=p,p.child=g}function ot(p,g){return k0(p,g,0,null)}function et(p,g,C){return xr(g,p.child,null,C),p=Nd(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function Ot(p,g,C){p.lanes|=g;var P=p.alternate;P!==null&&(P.lanes|=g),Yo(p.return,g,C)}function nn(p,g,C,P,j){var te=p.memoizedState;te===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:P,tail:C,tailMode:j}:(te.isBackwards=g,te.rendering=null,te.renderingStartTime=0,te.last=P,te.tail=C,te.tailMode=j)}function zt(p,g,C){var P=g.pendingProps,j=P.revealOrder,te=P.tail;if(As(p,g,P.children,C),P=Fi.current,P&2)P=P&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Ot(p,C,g);else if(p.tag===19)Ot(p,C,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}P&=1}switch(S(Fi,P),j){case"forwards":for(C=g.child,j=null;C!==null;)p=C.alternate,p!==null&&Ui(p)===null&&(j=C),C=C.sibling;C=j,C===null?(j=g.child,g.child=null):(j=C.sibling,C.sibling=null),nn(g,!1,j,C,te);break;case"backwards":for(C=null,j=g.child,g.child=null;j!==null;){if(p=j.alternate,p!==null&&Ui(p)===null){g.child=j;break}p=j.sibling,j.sibling=C,C=j,j=p}nn(g,!0,C,null,te);break;case"together":nn(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function yi(p,g,C){if(p!==null&&(g.dependencies=p.dependencies),Oo|=g.lanes,!(C&g.childLanes))if(p!==null){if(lm(p,g,C,!1),(C&g.childLanes)===0)return null}else return null;if(p!==null&&g.child!==p.child)throw Error(r(153));if(g.child!==null){for(p=g.child,C=nu(p,p.pendingProps),g.child=C,C.return=g;p.sibling!==null;)p=p.sibling,C=C.sibling=nu(p,p.pendingProps),C.return=g;C.sibling=null}return g.child}function Ms(p,g){return p.lanes&g?!0:(p=p.dependencies,!!(p!==null&&fc(p)))}function Jc(p,g,C){switch(g.tag){case 3:ve(g,g.stateNode.containerInfo),Ul(g,yr,p.memoizedState.cache),Gt();break;case 27:case 5:Le(g);break;case 4:ve(g,g.stateNode.containerInfo);break;case 10:Ul(g,g.type,g.memoizedProps.value);break;case 13:var P=g.memoizedState;if(P!==null)return P.dehydrated!==null?(Xt(g),g.flags|=128,null):C&g.child.childLanes?Gu(p,g,C):(Xt(g),p=yi(p,g,C),p!==null?p.sibling:null);Xt(g);break;case 19:var j=(p.flags&128)!==0;if(P=(C&g.childLanes)!==0,P||(lm(p,g,C,!1),P=(C&g.childLanes)!==0),j){if(P)return zt(p,g,C);g.flags|=128}if(j=g.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),S(Fi,Fi.current),P)break;return null;case 22:case 23:return g.lanes=0,Nh(p,g,C);case 24:Ul(g,yr,p.memoizedState.cache)}return yi(p,g,C)}function Ci(p,g,C){if(p!==null)if(p.memoizedProps!==g.pendingProps)us=!0;else{if(!Ms(p,C)&&!(g.flags&128))return us=!1,Jc(p,g,C);us=!!(p.flags&131072)}else us=!1,mt&&g.flags&1048576&&se(g,re,g.index);switch(g.lanes=0,g.tag){case 16:e:{p=g.pendingProps;var P=g.elementType,j=P._init;if(P=j(P._payload),g.type=P,typeof P=="function")xm(P)?(p=Zc(P,p),g.tag=1,g=uS(null,g,P,p,C)):(g.tag=0,g=bo(null,g,P,p,C));else{if(P!=null){if(j=P.$$typeof,j===Vf){g.tag=11,g=lS(null,g,P,p,C);break e}else if(j===Om){g.tag=14,g=am(null,g,P,p,C);break e}}throw g=a(P)||P,Error(r(306,g,""))}}return g;case 0:return bo(p,g,g.type,g.pendingProps,C);case 1:return P=g.type,j=Zc(P,g.pendingProps),uS(p,g,P,j,C);case 3:e:{if(ve(g,g.stateNode.containerInfo),p===null)throw Error(r(387));var te=g.pendingProps;j=g.memoizedState,P=j.element,K(p,g),Cn(g,te,null,C);var xe=g.memoizedState;if(te=xe.cache,Ul(g,yr,te),te!==j.cache&&Nf(g,[yr],C,!0),ft(),te=xe.element,bl&&j.isDehydrated)if(j={element:te,isDehydrated:!1,cache:xe.cache},g.updateQueue.baseState=j,g.memoizedState=j,g.flags&256){g=zs(p,g,te,C);break e}else if(te!==P){P=Y(Error(r(424)),g),qt(P),g=zs(p,g,te,C);break e}else for(bl&&(rt=Fa(g.stateNode.containerInfo),Te=g,mt=!0,jt=null,Tt=!0),C=kr(g,null,te,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Gt(),te===P){g=yi(p,g,C);break e}As(p,g,te,C)}g=g.child}return g;case 26:if(ya)return pa(p,g),p===null?(C=cu(g.type,null,g.pendingProps,null))?g.memoizedState=C:mt||(g.stateNode=i1(g.type,g.pendingProps,qe.current,g)):g.memoizedState=cu(g.type,p.memoizedProps,g.pendingProps,p.memoizedState),null;case 27:if(Vs)return Le(g),p===null&&Vs&&mt&&(P=g.stateNode=tp(g.type,g.pendingProps,qe.current,Ie.current,!1),Te=g,Tt=!0,rt=Ba(P)),P=g.pendingProps.children,p!==null||mt?As(p,g,P,C):g.child=xr(g,null,P,C),pa(p,g),g.child;case 5:return p===null&&mt&&(Rc(g.type,g.pendingProps,Ie.current),(j=P=rt)&&(P=xS(P,g.type,g.pendingProps,Tt),P!==null?(g.stateNode=P,Te=g,rt=Ba(P),Tt=!1,j=!0):j=!1),j||$e(g)),Le(g),j=g.type,te=g.pendingProps,xe=p!==null?p.memoizedProps:null,P=te.children,$f(j,te)?P=null:xe!==null&&$f(j,xe)&&(g.flags|=32),g.memoizedState!==null&&(j=uc(p,g,tm,null,null,C),jl?El._currentValue=j:El._currentValue2=j),pa(p,g),As(p,g,P,C),g.child;case 6:return p===null&&mt&&(Oc(g.pendingProps,Ie.current),(p=C=rt)&&(C=Qu(C,g.pendingProps,Tt),C!==null?(g.stateNode=C,Te=g,rt=null,p=!0):p=!1),p||$e(g)),null;case 13:return Gu(p,g,C);case 4:return ve(g,g.stateNode.containerInfo),P=g.pendingProps,p===null?g.child=xr(g,null,P,C):As(p,g,P,C),g.child;case 11:return lS(p,g,g.type,g.pendingProps,C);case 7:return As(p,g,g.pendingProps,C),g.child;case 8:return As(p,g,g.pendingProps.children,C),g.child;case 12:return As(p,g,g.pendingProps.children,C),g.child;case 10:return P=g.pendingProps,Ul(g,g.type,P.value),As(p,g,P.children,C),g.child;case 9:return j=g.type._context,P=g.pendingProps.children,Xo(g),j=ea(j),P=P(j),g.flags|=1,As(p,g,P,C),g.child;case 14:return am(p,g,g.type,g.pendingProps,C);case 15:return cS(p,g,g.type,g.pendingProps,C);case 19:return zt(p,g,C);case 22:return Nh(p,g,C);case 24:return Xo(g),P=ea(yr),p===null?(j=Dh(),j===null&&(j=yn,te=lv(),j.pooledCache=te,te.refCount++,te!==null&&(j.pooledCacheLanes|=C),j=te),g.memoizedState={parent:P,cache:j},$(g),Ul(g,yr,j)):(p.lanes&C&&(K(p,g),Cn(g,null,null,C),ft()),j=p.memoizedState,te=g.memoizedState,j.parent!==P?(j={parent:P,cache:P},g.memoizedState=j,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=j),Ul(g,yr,P)):(P=te.cache,Ul(g,yr,P),P!==j.cache&&Nf(g,[yr],C,!0))),As(p,g,g.pendingProps.children,C),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function Ul(p,g,C){jl?(S(du,g._currentValue),g._currentValue=C):(S(du,g._currentValue2),g._currentValue2=C)}function Qc(p){var g=du.current;jl?p._currentValue=g:p._currentValue2=g,y(du)}function Yo(p,g,C){for(;p!==null;){var P=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,P!==null&&(P.childLanes|=g)):P!==null&&(P.childLanes&g)!==g&&(P.childLanes|=g),p===C)break;p=p.return}}function Nf(p,g,C,P){var j=p.child;for(j!==null&&(j.return=p);j!==null;){var te=j.dependencies;if(te!==null){var xe=j.child;te=te.firstContext;e:for(;te!==null;){var Be=te;te=j;for(var st=0;st<g.length;st++)if(Be.context===g[st]){te.lanes|=C,Be=te.alternate,Be!==null&&(Be.lanes|=C),Yo(te.return,C,p),P||(xe=null);break e}te=Be.next}}else if(j.tag===18){if(xe=j.return,xe===null)throw Error(r(341));xe.lanes|=C,te=xe.alternate,te!==null&&(te.lanes|=C),Yo(xe,C,p),xe=null}else xe=j.child;if(xe!==null)xe.return=j;else for(xe=j;xe!==null;){if(xe===p){xe=null;break}if(j=xe.sibling,j!==null){j.return=xe.return,xe=j;break}xe=xe.return}j=xe}}function lm(p,g,C,P){p=null;for(var j=g,te=!1;j!==null;){if(!te){if(j.flags&524288)te=!0;else if(j.flags&262144)break}if(j.tag===10){var xe=j.alternate;if(xe===null)throw Error(r(387));if(xe=xe.memoizedProps,xe!==null){var Be=j.type;A(j.pendingProps.value,xe.value)||(p!==null?p.push(Be):p=[Be])}}else if(j===Oe.current){if(xe=j.alternate,xe===null)throw Error(r(387));xe.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(p!==null?p.push(El):p=[El])}j=j.return}p!==null&&Nf(g,p,C,P),g.flags|=262144}function fc(p){for(p=p.firstContext;p!==null;){var g=p.context;if(!A(jl?g._currentValue:g._currentValue2,p.memoizedValue))return!0;p=p.next}return!1}function Xo(p){Ic=p,xl=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function ea(p){return cm(Ic,p)}function er(p,g){return Ic===null&&Xo(p),cm(p,g)}function cm(p,g){var C=jl?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:C,next:null},xl===null){if(p===null)throw Error(r(308));xl=g,p.dependencies={lanes:0,firstContext:g},p.flags|=524288}else xl=xl.next=g;return C}function lv(){return{controller:new Hm,data:new Map,refCount:0}}function Ph(p){p.refCount--,p.refCount===0&&Mv(Vm,function(){p.controller.abort()})}function Dh(){var p=fu.current;return p!==null?p:yn.pooledCache}function cv(p,g){g===null?S(fu,fu.current):S(fu,g.pool)}function hS(){var p=Dh();return p===null?null:{parent:jl?yr._currentValue:yr._currentValue2,pool:p}}function to(p){p.flags|=4}function qu(p,g){if(p!==null&&p.child===g.child)return!1;if(g.flags&16)return!0;for(p=g.child;p!==null;){if(p.flags&13878||p.subtreeFlags&13878)return!0;p=p.sibling}return!1}function eu(p,g,C,P){if(Ua)for(C=g.child;C!==null;){if(C.tag===5||C.tag===6)Vd(p,C.stateNode);else if(!(C.tag===4||Vs&&C.tag===27)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}else if(wc)for(var j=g.child;j!==null;){if(j.tag===5){var te=j.stateNode;C&&P&&(te=Kf(te,j.type,j.memoizedProps)),Vd(p,te)}else if(j.tag===6)te=j.stateNode,C&&P&&(te=ra(te,j.memoizedProps)),Vd(p,te);else if(j.tag!==4){if(j.tag===22&&j.memoizedState!==null)te=j.child,te!==null&&(te.return=j),eu(p,j,!0,!0);else if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===g)break;for(;j.sibling===null;){if(j.return===null||j.return===g)return;j=j.return}j.sibling.return=j.return,j=j.sibling}}function A0(p,g,C,P){if(wc)for(var j=g.child;j!==null;){if(j.tag===5){var te=j.stateNode;C&&P&&(te=Kf(te,j.type,j.memoizedProps)),Mc(p,te)}else if(j.tag===6)te=j.stateNode,C&&P&&(te=ra(te,j.memoizedProps)),Mc(p,te);else if(j.tag!==4){if(j.tag===22&&j.memoizedState!==null)te=j.child,te!==null&&(te.return=j),A0(p,j,!(j.memoizedProps!==null&&j.memoizedProps.mode==="manual"),!0);else if(j.child!==null){j.child.return=j,j=j.child;continue}}if(j===g)break;for(;j.sibling===null;){if(j.return===null||j.return===g)return;j=j.return}j.sibling.return=j.return,j=j.sibling}}function Pf(p,g){if(wc&&qu(p,g)){p=g.stateNode;var C=p.containerInfo,P=Tv();A0(P,g,!1,!1),p.pendingChildren=P,to(g),qd(C,P)}}function Df(p,g,C,P){if(Ua)p.memoizedProps!==P&&to(g);else if(wc){var j=p.stateNode,te=p.memoizedProps;if((p=qu(p,g))||te!==P){var xe=Ie.current;te=Bm(j,C,te,P,!p,null),te===j?g.stateNode=j:(F0(te,C,P,xe)&&to(g),g.stateNode=te,p?eu(te,g,!1,!1):to(g))}else g.stateNode=j}}function um(p,g,C){if(z0(g,C)){if(p.flags|=16777216,!Ac(g,C))if(O0())p.flags|=8192;else throw sr=Tr,Dr}else p.flags&=-16777217}function kh(p,g){if(wv(g)){if(p.flags|=16777216,!Z0(g))if(O0())p.flags|=8192;else throw sr=Tr,Dr}else p.flags&=-16777217}function hm(p,g){g!==null&&(p.flags|=4),p.flags&16384&&(g=p.tag!==22?k():536870912,p.lanes|=g,Wd|=g)}function pc(p,g){if(!mt)switch(p.tailMode){case"hidden":g=p.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?p.tail=null:C.sibling=null;break;case"collapsed":C=p.tail;for(var P=null;C!==null;)C.alternate!==null&&(P=C),C=C.sibling;P===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:P.sibling=null}}function hr(p){var g=p.alternate!==null&&p.alternate.child===p.child,C=0,P=0;if(g)for(var j=p.child;j!==null;)C|=j.lanes|j.childLanes,P|=j.subtreeFlags&31457280,P|=j.flags&31457280,j.return=p,j=j.sibling;else for(j=p.child;j!==null;)C|=j.lanes|j.childLanes,P|=j.subtreeFlags,P|=j.flags,j.return=p,j=j.sibling;return p.subtreeFlags|=P,p.childLanes=C,g}function dm(p,g,C){var P=g.pendingProps;switch(Ne(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(g),null;case 1:return hr(g),null;case 3:return C=g.stateNode,P=null,p!==null&&(P=p.memoizedState.cache),g.memoizedState.cache!==P&&(g.flags|=2048),Qc(yr),_e(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(p===null||p.child===null)&&(Lt(g)?to(g):p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,jt!==null&&(_m(jt),jt=null))),Pf(p,g),hr(g),null;case 26:if(ya){C=g.type;var j=g.memoizedState;return p===null?(to(g),j!==null?(hr(g),kh(g,j)):(hr(g),um(g,C,P))):j?j!==p.memoizedState?(to(g),hr(g),kh(g,j)):(hr(g),g.flags&=-16777217):(Ua?p.memoizedProps!==P&&to(g):Df(p,g,C,P),hr(g),um(g,C,P)),null}case 27:if(Vs){if(He(g),C=qe.current,j=g.type,p!==null&&g.stateNode!=null)Ua?p.memoizedProps!==P&&to(g):Df(p,g,j,P);else{if(!P){if(g.stateNode===null)throw Error(r(166));return hr(g),null}p=Ie.current,Lt(g)?bt(g,p):(p=tp(j,P,C,p,!0),g.stateNode=p,to(g))}return hr(g),null}case 5:if(He(g),C=g.type,p!==null&&g.stateNode!=null)Df(p,g,C,P);else{if(!P){if(g.stateNode===null)throw Error(r(166));return hr(g),null}p=Ie.current,Lt(g)?bt(g,p):(j=Hd(C,P,qe.current,p,g),eu(j,g,!1,!1),g.stateNode=j,F0(j,C,P,p)&&to(g))}return hr(g),um(g,g.type,g.pendingProps),null;case 6:if(p&&g.stateNode!=null)C=p.memoizedProps,Ua?C!==P&&to(g):wc&&(C!==P?(g.stateNode=Nm(P,qe.current,Ie.current,g),to(g)):g.stateNode=p.stateNode);else{if(typeof P!="string"&&g.stateNode===null)throw Error(r(166));if(p=qe.current,C=Ie.current,Lt(g)){if(!bl)throw Error(r(176));if(p=g.stateNode,C=g.memoizedProps,P=null,j=Te,j!==null)switch(j.tag){case 27:case 5:P=j.memoizedProps}Qx(p,C,g,P)||$e(g)}else g.stateNode=Nm(P,p,C,g)}return hr(g),null;case 13:if(P=g.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(j=Lt(g),P!==null&&P.dehydrated!==null){if(p===null){if(!j)throw Error(r(318));if(!bl)throw Error(r(344));if(j=g.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));e1(j,g)}else Gt(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;hr(g),j=!1}else jt!==null&&(_m(jt),jt=null),j=!0;if(!j)return g.flags&256?(Wn(g),g):(Wn(g),null)}if(Wn(g),g.flags&128)return g.lanes=C,g;if(C=P!==null,p=p!==null&&p.memoizedState!==null,C){P=g.child,j=null,P.alternate!==null&&P.alternate.memoizedState!==null&&P.alternate.memoizedState.cachePool!==null&&(j=P.alternate.memoizedState.cachePool.pool);var te=null;P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(te=P.memoizedState.cachePool.pool),te!==j&&(P.flags|=2048)}return C!==p&&C&&(g.child.flags|=8192),hm(g,g.updateQueue),hr(g),null;case 4:return _e(),Pf(p,g),p===null&&Kx(g.stateNode.containerInfo),hr(g),null;case 10:return Qc(g.type),hr(g),null;case 19:if(y(Fi),j=g.memoizedState,j===null)return hr(g),null;if(P=(g.flags&128)!==0,te=j.rendering,te===null)if(P)pc(j,!1);else{if(zi!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(te=Ui(p),te!==null){for(g.flags|=128,pc(j,!1),p=te.updateQueue,g.updateQueue=p,hm(g,p),g.subtreeFlags=0,p=C,C=g.child;C!==null;)wm(C,p),C=C.sibling;return S(Fi,Fi.current&1|2),g.child}p=p.sibling}j.tail!==null&&kn()>qm&&(g.flags|=128,P=!0,pc(j,!1),g.lanes=4194304)}else{if(!P)if(p=Ui(te),p!==null){if(g.flags|=128,P=!0,p=p.updateQueue,g.updateQueue=p,hm(g,p),pc(j,!0),j.tail===null&&j.tailMode==="hidden"&&!te.alternate&&!mt)return hr(g),null}else 2*kn()-j.renderingStartTime>qm&&C!==536870912&&(g.flags|=128,P=!0,pc(j,!1),g.lanes=4194304);j.isBackwards?(te.sibling=g.child,g.child=te):(p=j.last,p!==null?p.sibling=te:g.child=te,j.last=te)}return j.tail!==null?(g=j.tail,j.rendering=g,j.tail=g.sibling,j.renderingStartTime=kn(),g.sibling=null,p=Fi.current,S(Fi,P?p&1|2:p&1),g):(hr(g),null);case 22:case 23:return Wn(g),ln(),P=g.memoizedState!==null,p!==null?p.memoizedState!==null!==P&&(g.flags|=8192):P&&(g.flags|=8192),P?C&536870912&&!(g.flags&128)&&(hr(g),g.subtreeFlags&6&&(g.flags|=8192)):hr(g),C=g.updateQueue,C!==null&&hm(g,C.retryQueue),C=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),P=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(P=g.memoizedState.cachePool.pool),P!==C&&(g.flags|=2048),p!==null&&y(fu),null;case 24:return C=null,p!==null&&(C=p.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),Qc(yr),hr(g),null;case 25:return null}throw Error(r(156,g.tag))}function en(p,g){switch(Ne(g),g.tag){case 1:return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return Qc(yr),_e(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 26:case 27:case 5:return He(g),null;case 13:if(Wn(g),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(r(340));Gt()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return y(Fi),null;case 4:return _e(),null;case 10:return Qc(g.type),null;case 22:case 23:return Wn(g),ln(),p!==null&&y(fu),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 24:return Qc(yr),null;case 25:return null;default:return null}}function Rs(p,g){switch(Ne(g),g.tag){case 3:Qc(yr),_e();break;case 26:case 27:case 5:He(g);break;case 4:_e();break;case 13:Wn(g);break;case 19:y(Fi);break;case 10:Qc(g.type);break;case 22:case 23:Wn(g),ln(),p!==null&&y(fu);break;case 24:Qc(yr)}}function fm(p,g){try{var C=g.updateQueue,P=C!==null?C.lastEffect:null;if(P!==null){var j=P.next;C=j;do{if((C.tag&p)===p){P=void 0;var te=C.create,xe=C.inst;P=te(),xe.destroy=P}C=C.next}while(C!==j)}}catch(Be){ki(g,g.return,Be)}}function mc(p,g,C){try{var P=g.updateQueue,j=P!==null?P.lastEffect:null;if(j!==null){var te=j.next;P=te;do{if((P.tag&p)===p){var xe=P.inst,Be=xe.destroy;if(Be!==void 0){xe.destroy=void 0,j=g;var st=C;try{Be()}catch(wt){ki(j,st,wt)}}}P=P.next}while(P!==te)}}catch(wt){ki(g,g.return,wt)}}function Ko(p){var g=p.updateQueue;if(g!==null){var C=p.stateNode;try{It(g,C)}catch(P){ki(p,p.return,P)}}}function pm(p,g,C){C.props=Zc(p.type,p.memoizedProps),C.state=p.memoizedState;try{C.componentWillUnmount()}catch(P){ki(p,g,P)}}function Pd(p,g){try{var C=p.ref;if(C!==null){var P=p.stateNode;switch(p.tag){case 26:case 27:case 5:var j=jh(P);break;default:j=P}typeof C=="function"?p.refCleanup=C(j):C.current=j}}catch(te){ki(p,g,te)}}function js(p,g){var C=p.ref,P=p.refCleanup;if(C!==null)if(typeof P=="function")try{P()}catch(j){ki(p,g,j)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof C=="function")try{C(null)}catch(j){ki(p,g,j)}else C.current=null}function M0(p){var g=p.type,C=p.memoizedProps,P=p.stateNode;try{Zx(P,g,C,p)}catch(j){ki(p,p.return,j)}}function So(p,g,C){try{Lm(p.stateNode,p.type,C,g,p)}catch(P){ki(p,p.return,P)}}function qr(p){return p.tag===5||p.tag===3||(ya?p.tag===26:!1)||(Vs?p.tag===27:!1)||p.tag===4}function gs(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||qr(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&(!Vs||p.tag!==27)&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function ui(p,g,C){var P=p.tag;if(P===5||P===6)p=p.stateNode,g?ES(C,p,g):Sv(C,p);else if(!(P===4||Vs&&P===27)&&(p=p.child,p!==null))for(ui(p,g,C),p=p.sibling;p!==null;)ui(p,g,C),p=p.sibling}function Eo(p,g,C){var P=p.tag;if(P===5||P===6)p=p.stateNode,g?SS(C,p,g):ro(C,p);else if(!(P===4||Vs&&P===27)&&(p=p.child,p!==null))for(Eo(p,g,C),p=p.sibling;p!==null;)Eo(p,g,C),p=p.sibling}function Da(p,g,C){p=p.containerInfo;try{W0(p,C)}catch(P){ki(g,g.return,P)}}function Dd(p,g){for(vS(p.containerInfo),ce=g;ce!==null;)if(p=ce,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,ce=g;else for(;ce!==null;){p=ce;var C=p.alternate;switch(g=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if(g&1024&&C!==null){g=void 0;var P=p,j=C.memoizedProps;C=C.memoizedState;var te=P.stateNode;try{var xe=Zc(P.type,j,P.elementType===P.type);g=te.getSnapshotBeforeUpdate(xe,C),te.__reactInternalSnapshotBeforeUpdate=g}catch(Be){ki(P,P.return,Be)}}break;case 3:g&1024&&Ua&&Xf(p.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(g&1024)throw Error(r(163))}if(g=p.sibling,g!==null){g.return=p.return,ce=g;break}ce=p.return}return xe=we,we=!1,xe}function mm(p,g,C){var P=C.flags;switch(C.tag){case 0:case 11:case 15:yl(p,C),P&4&&fm(5,C);break;case 1:if(yl(p,C),P&4)if(p=C.stateNode,g===null)try{p.componentDidMount()}catch(Be){ki(C,C.return,Be)}else{var j=Zc(C.type,g.memoizedProps);g=g.memoizedState;try{p.componentDidUpdate(j,g,p.__reactInternalSnapshotBeforeUpdate)}catch(Be){ki(C,C.return,Be)}}P&64&&Ko(C),P&512&&Pd(C,C.return);break;case 3:if(yl(p,C),P&64&&(P=C.updateQueue,P!==null)){if(p=null,C.child!==null)switch(C.child.tag){case 27:case 5:p=jh(C.child.stateNode);break;case 1:p=C.child.stateNode}try{It(P,p)}catch(Be){ki(C,C.return,Be)}}break;case 26:if(ya){yl(p,C),P&512&&Pd(C,C.return);break}case 27:case 5:yl(p,C),g===null&&P&4&&M0(C),P&512&&Pd(C,C.return);break;case 12:yl(p,C);break;case 13:yl(p,C),P&4&&kf(p,C);break;case 22:if(j=C.memoizedState!==null||b,!j){g=g!==null&&g.memoizedState!==null||w;var te=b,xe=w;b=j,(w=g)&&!xe?Bl(p,C,(C.subtreeFlags&8772)!==0):yl(p,C),b=te,w=xe}P&512&&(C.memoizedProps.mode==="manual"?Pd(C,C.return):js(C,C.return));break;default:yl(p,C)}}function ka(p){var g=p.alternate;g!==null&&(p.alternate=null,ka(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&Pr(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function Rt(p,g,C){for(C=C.child;C!==null;)Hs(p,g,C),C=C.sibling}function Hs(p,g,C){if(E&&typeof E.onCommitFiberUnmount=="function")try{E.onCommitFiberUnmount(O,C)}catch{}switch(C.tag){case 26:if(ya){w||js(C,g),Rt(p,g,C),C.memoizedState?ao(C.memoizedState):C.stateNode&&K0(C.stateNode);break}case 27:if(Vs){w||js(C,g);var P=De,j=Ge;De=C.stateNode,Rt(p,g,C),Q0(C.stateNode),De=P,Ge=j;break}case 5:w||js(C,g);case 6:if(Ua){if(P=De,j=Ge,De=null,Rt(p,g,C),De=P,Ge=j,De!==null)if(Ge)try{$0(De,C.stateNode)}catch(te){ki(C,g,te)}else try{Wf(De,C.stateNode)}catch(te){ki(C,g,te)}}else Rt(p,g,C);break;case 18:Ua&&De!==null&&(Ge?n1(De,C.stateNode):t1(De,C.stateNode));break;case 4:Ua?(P=De,j=Ge,De=C.stateNode.containerInfo,Ge=!0,Rt(p,g,C),De=P,Ge=j):(wc&&Da(C.stateNode,C,Tv()),Rt(p,g,C));break;case 0:case 11:case 14:case 15:w||mc(2,C,g),w||mc(4,C,g),Rt(p,g,C);break;case 1:w||(js(C,g),P=C.stateNode,typeof P.componentWillUnmount=="function"&&pm(C,g,P)),Rt(p,g,C);break;case 21:Rt(p,g,C);break;case 22:w||js(C,g),w=(P=w)||C.memoizedState!==null,Rt(p,g,C),w=P;break;default:Rt(p,g,C)}}function kf(p,g){if(bl&&g.memoizedState===null&&(p=g.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Fm(p)}catch(C){ki(g,g.return,C)}}function Lh(p){switch(p.tag){case 13:case 19:var g=p.stateNode;return g===null&&(g=p.stateNode=new ne),g;case 22:return p=p.stateNode,g=p._retryCache,g===null&&(g=p._retryCache=new ne),g;default:throw Error(r(435,p.tag))}}function $u(p,g){var C=Lh(p);g.forEach(function(P){var j=pS.bind(null,p,P);C.has(P)||(C.add(P),P.then(j,j))})}function Os(p,g){var C=g.deletions;if(C!==null)for(var P=0;P<C.length;P++){var j=C[P],te=p,xe=g;if(Ua){var Be=xe;e:for(;Be!==null;){switch(Be.tag){case 27:case 5:De=Be.stateNode,Ge=!1;break e;case 3:De=Be.stateNode.containerInfo,Ge=!0;break e;case 4:De=Be.stateNode.containerInfo,Ge=!0;break e}Be=Be.return}if(De===null)throw Error(r(160));Hs(te,xe,j),De=null,Ge=!1}else Hs(te,xe,j);te=j.alternate,te!==null&&(te.return=null),j.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)gm(g,p),g=g.sibling}function gm(p,g){var C=p.alternate,P=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Os(g,p),To(p),P&4&&(mc(3,p,p.return),fm(3,p),mc(5,p,p.return));break;case 1:Os(g,p),To(p),P&512&&(w||C===null||js(C,C.return)),P&64&&b&&(p=p.updateQueue,p!==null&&(P=p.callbacks,P!==null&&(C=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=C===null?P:C.concat(P))));break;case 26:if(ya){var j=it;Os(g,p),To(p),P&512&&(w||C===null||js(C,C.return)),P&4&&(P=C!==null?C.memoizedState:null,g=p.memoizedState,C===null?g===null?p.stateNode===null?p.stateNode=X0(j,p.type,p.memoizedProps,p):zm(j,p.type,p.stateNode):p.stateNode=cs(j,g,p.memoizedProps):P!==g?(P===null?C.stateNode!==null&&K0(C.stateNode):ao(P),g===null?zm(j,p.type,p.stateNode):cs(j,g,p.memoizedProps)):g===null&&p.stateNode!==null&&So(p,p.memoizedProps,C.memoizedProps));break}case 27:if(Vs&&P&4&&p.alternate===null){j=p.stateNode;var te=p.memoizedProps;try{Cv(j),J0(p.type,te,j,p)}catch($t){ki(p,p.return,$t)}}case 5:if(Os(g,p),To(p),P&512&&(w||C===null||js(C,C.return)),Ua){if(p.flags&32){g=p.stateNode;try{Um(g)}catch($t){ki(p,p.return,$t)}}P&4&&p.stateNode!=null&&(g=p.memoizedProps,So(p,g,C!==null?C.memoizedProps:g)),P&1024&&(F=!0)}break;case 6:if(Os(g,p),To(p),P&4&&Ua){if(p.stateNode===null)throw Error(r(162));P=p.memoizedProps,C=C!==null?C.memoizedProps:P,g=p.stateNode;try{q0(g,C,P)}catch($t){ki(p,p.return,$t)}}break;case 3:if(ya?(CS(),j=it,it=eh(g.containerInfo),Os(g,p),it=j):Os(g,p),To(p),P&4){if(Ua&&bl&&C!==null&&C.memoizedState.isDehydrated)try{ep(g.containerInfo)}catch($t){ki(p,p.return,$t)}if(wc){P=g.containerInfo,C=g.pendingChildren;try{W0(P,C)}catch($t){ki(p,p.return,$t)}}}F&&(F=!1,dS(p));break;case 4:ya?(C=it,it=eh(p.stateNode.containerInfo),Os(g,p),To(p),it=C):(Os(g,p),To(p)),P&4&&wc&&Da(p.stateNode,p,p.stateNode.pendingChildren);break;case 12:Os(g,p),To(p);break;case 13:Os(g,p),To(p),p.child.flags&8192&&p.memoizedState!==null!=(C!==null&&C.memoizedState!==null)&&(Ov=kn()),P&4&&(P=p.updateQueue,P!==null&&(p.updateQueue=null,$u(p,P)));break;case 22:P&512&&(w||C===null||js(C,C.return)),j=p.memoizedState!==null;var xe=C!==null&&C.memoizedState!==null,Be=b,st=w;if(b=Be||j,w=st||xe,Os(g,p),w=st,b=Be,To(p),g=p.stateNode,g._current=p,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,P&8192&&(g._visibility=j?g._visibility&-2:g._visibility|1,j&&(g=b||w,C===null||xe||g||kd(p)),Ua&&(p.memoizedProps===null||p.memoizedProps.mode!=="manual"))){e:if(C=null,Ua)for(g=p;;){if(g.tag===5||ya&&g.tag===26||Vs&&g.tag===27){if(C===null){xe=C=g;try{te=xe.stateNode,j?Qo(te):Ev(xe.stateNode,xe.memoizedProps)}catch($t){ki(xe,xe.return,$t)}}}else if(g.tag===6){if(C===null){xe=g;try{var wt=xe.stateNode;j?Yf(wt):ia(wt,xe.memoizedProps)}catch($t){ki(xe,xe.return,$t)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===p)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break e;for(;g.sibling===null;){if(g.return===null||g.return===p)break e;C===g&&(C=null),g=g.return}C===g&&(C=null),g.sibling.return=g.return,g=g.sibling}}P&4&&(P=p.updateQueue,P!==null&&(C=P.retryQueue,C!==null&&(P.retryQueue=null,$u(p,C))));break;case 19:Os(g,p),To(p),P&4&&(P=p.updateQueue,P!==null&&(p.updateQueue=null,$u(p,P)));break;case 21:break;default:Os(g,p),To(p)}}function To(p){var g=p.flags;if(g&2){try{if(Ua&&(!Vs||p.tag!==27)){e:{for(var C=p.return;C!==null;){if(qr(C)){var P=C;break e}C=C.return}throw Error(r(160))}switch(P.tag){case 27:if(Vs){var j=P.stateNode,te=gs(p);Eo(p,te,j);break}case 5:var xe=P.stateNode;P.flags&32&&(Um(xe),P.flags&=-33);var Be=gs(p);Eo(p,Be,xe);break;case 3:case 4:var st=P.stateNode.containerInfo,wt=gs(p);ui(p,wt,st);break;default:throw Error(r(161))}}}catch($t){ki(p,p.return,$t)}p.flags&=-3}g&4096&&(p.flags&=-4097)}function dS(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var g=p;dS(g),g.tag===5&&g.flags&1024&&Gn(g.stateNode),p=p.sibling}}function yl(p,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)mm(p,g.alternate,g),g=g.sibling}function kd(p){for(p=p.child;p!==null;){var g=p;switch(g.tag){case 0:case 11:case 14:case 15:mc(4,g,g.return),kd(g);break;case 1:js(g,g.return);var C=g.stateNode;typeof C.componentWillUnmount=="function"&&pm(g,g.return,C),kd(g);break;case 26:case 27:case 5:js(g,g.return),kd(g);break;case 22:js(g,g.return),g.memoizedState===null&&kd(g);break;default:kd(g)}p=p.sibling}}function Bl(p,g,C){for(C=C&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var P=g.alternate,j=p,te=g,xe=te.flags;switch(te.tag){case 0:case 11:case 15:Bl(j,te,C),fm(4,te);break;case 1:if(Bl(j,te,C),P=te,j=P.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(wt){ki(P,P.return,wt)}if(P=te,j=P.updateQueue,j!==null){var Be=P.stateNode;try{var st=j.shared.hiddenCallbacks;if(st!==null)for(j.shared.hiddenCallbacks=null,j=0;j<st.length;j++)ze(st[j],Be)}catch(wt){ki(P,P.return,wt)}}C&&xe&64&&Ko(te),Pd(te,te.return);break;case 26:case 27:case 5:Bl(j,te,C),C&&P===null&&xe&4&&M0(te),Pd(te,te.return);break;case 12:Bl(j,te,C);break;case 13:Bl(j,te,C),C&&xe&4&&kf(j,te);break;case 22:te.memoizedState===null&&Bl(j,te,C),Pd(te,te.return);break;default:Bl(j,te,C)}g=g.sibling}}function Uh(p,g){var C=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),p=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(p=g.memoizedState.cachePool.pool),p!==C&&(p!=null&&p.refCount++,C!=null&&Ph(C))}function Lf(p,g){p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Ph(p))}function be(p,g,C,P){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Wu(p,g,C,P),g=g.sibling}function Wu(p,g,C,P){var j=g.flags;switch(g.tag){case 0:case 11:case 15:be(p,g,C,P),j&2048&&fm(9,g);break;case 3:be(p,g,C,P),j&2048&&(p=null,g.alternate!==null&&(p=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==p&&(g.refCount++,p!=null&&Ph(p)));break;case 12:if(j&2048){be(p,g,C,P),p=g.stateNode;try{var te=g.memoizedProps,xe=te.id,Be=te.onPostCommit;typeof Be=="function"&&Be(xe,g.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(st){ki(g,g.return,st)}}else be(p,g,C,P);break;case 23:break;case 22:te=g.stateNode,g.memoizedState!==null?te._visibility&4?be(p,g,C,P):ma(p,g):te._visibility&4?be(p,g,C,P):(te._visibility|=4,tu(p,g,C,P,(g.subtreeFlags&10256)!==0)),j&2048&&Uh(g.alternate,g);break;case 24:be(p,g,C,P),j&2048&&Lf(g.alternate,g);break;default:be(p,g,C,P)}}function tu(p,g,C,P,j){for(j=j&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var te=p,xe=g,Be=C,st=P,wt=xe.flags;switch(xe.tag){case 0:case 11:case 15:tu(te,xe,Be,st,j),fm(8,xe);break;case 23:break;case 22:var $t=xe.stateNode;xe.memoizedState!==null?$t._visibility&4?tu(te,xe,Be,st,j):ma(te,xe):($t._visibility|=4,tu(te,xe,Be,st,j)),j&&wt&2048&&Uh(xe.alternate,xe);break;case 24:tu(te,xe,Be,st,j),j&&wt&2048&&Lf(xe.alternate,xe);break;default:tu(te,xe,Be,st,j)}g=g.sibling}}function ma(p,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var C=p,P=g,j=P.flags;switch(P.tag){case 22:ma(C,P),j&2048&&Uh(P.alternate,P);break;case 24:ma(C,P),j&2048&&Lf(P.alternate,P);break;default:ma(C,P)}g=g.sibling}}function mi(p){if(p.subtreeFlags&xt)for(p=p.child;p!==null;)Yu(p),p=p.sibling}function Yu(p){switch(p.tag){case 26:mi(p),p.flags&xt&&(p.memoizedState!==null?r1(it,p.memoizedState,p.memoizedProps):_v(p.type,p.memoizedProps));break;case 5:mi(p),p.flags&xt&&_v(p.type,p.memoizedProps);break;case 3:case 4:if(ya){var g=it;it=eh(p.stateNode.containerInfo),mi(p),it=g}else mi(p);break;case 22:p.memoizedState===null&&(g=p.alternate,g!==null&&g.memoizedState!==null?(g=xt,xt=16777216,mi(p),xt=g):mi(p));break;default:mi(p)}}function gc(p){var g=p.alternate;if(g!==null&&(p=g.child,p!==null)){g.child=null;do g=p.sibling,p.sibling=null,p=g;while(p!==null)}}function Zo(p){var g=p.deletions;if(p.flags&16){if(g!==null)for(var C=0;C<g.length;C++){var P=g[C];ce=P,uv(P,p)}gc(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)vc(p),p=p.sibling}function vc(p){switch(p.tag){case 0:case 11:case 15:Zo(p),p.flags&2048&&mc(9,p,p.return);break;case 3:Zo(p);break;case 12:Zo(p);break;case 22:var g=p.stateNode;p.memoizedState!==null&&g._visibility&4&&(p.return===null||p.return.tag!==13)?(g._visibility&=-5,xo(p)):Zo(p);break;default:Zo(p)}}function xo(p){var g=p.deletions;if(p.flags&16){if(g!==null)for(var C=0;C<g.length;C++){var P=g[C];ce=P,uv(P,p)}gc(p)}for(p=p.child;p!==null;){switch(g=p,g.tag){case 0:case 11:case 15:mc(8,g,g.return),xo(g);break;case 22:C=g.stateNode,C._visibility&4&&(C._visibility&=-5,xo(g));break;default:xo(g)}p=p.sibling}}function uv(p,g){for(;ce!==null;){var C=ce;switch(C.tag){case 0:case 11:case 15:mc(8,C,g);break;case 23:case 22:if(C.memoizedState!==null&&C.memoizedState.cachePool!==null){var P=C.memoizedState.cachePool.pool;P!=null&&P.refCount++}break;case 24:Ph(C.memoizedState.cache)}if(P=C.child,P!==null)P.return=C,ce=P;else e:for(C=p;ce!==null;){P=ce;var j=P.sibling,te=P.return;if(ka(P),P===C){ce=null;break e}if(j!==null){j.return=te,ce=j;break e}ce=te}}}function Fl(p){var g=Dm(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(r(364));return g}if(p=km(p),p===null)throw Error(r(362));return p.stateNode.current}function hv(p,g){var C=p.tag;switch(g.$$typeof){case Ft:if(p.type===g.value)return!0;break;case vn:e:{for(g=g.value,p=[p,0],C=0;C<p.length;){var P=p[C++],j=P.tag,te=p[C++],xe=g[te];if(j!==5&&j!==26&&j!==27||!Gd(P)){for(;xe!=null&&hv(P,xe);)te++,xe=g[te];if(te===g.length){g=!0;break e}else for(P=P.child;P!==null;)p.push(P,te),P=P.sibling}}g=!1}return g;case wn:if((C===5||C===26||C===27)&&bS(p.stateNode,g.value))return!0;break;case Mt:if((C===5||C===6||C===26||C===27)&&(p=na(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case Fn:if((C===5||C===26||C===27)&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function vm(p){switch(p.$$typeof){case Ft:return"<"+(a(p.value)||"Unknown")+">";case vn:return":has("+(vm(p)||"")+")";case wn:return'[role="'+p.value+'"]';case Mt:return'"'+p.value+'"';case Fn:return'[data-testname="'+p.value+'"]';default:throw Error(r(365))}}function ym(p,g){var C=[];p=[p,0];for(var P=0;P<p.length;){var j=p[P++],te=j.tag,xe=p[P++],Be=g[xe];if(te!==5&&te!==26&&te!==27||!Gd(j)){for(;Be!=null&&hv(j,Be);)xe++,Be=g[xe];if(xe===g.length)C.push(j);else for(j=j.child;j!==null;)p.push(j,xe),j=j.sibling}}return C}function Bh(p,g){if(!Tl)throw Error(r(363));p=Fl(p),p=ym(p,g),g=[],p=Array.from(p);for(var C=0;C<p.length;){var P=p[C++],j=P.tag;if(j===5||j===26||j===27)Gd(P)||g.push(P.stateNode);else for(P=P.child;P!==null;)p.push(P),P=P.sibling}return g}function La(){if(kt&2&&Sn!==0)return Sn&-Sn;if(Jn.T!==null){var p=un;return p!==0?p:Ut()}return Cc()}function R0(){Gl===0&&(Gl=!(Sn&536870912)||mt?L():536870912);var p=Hr.current;return p!==null&&(p.flags|=32),Gl}function no(p,g,C){(p===yn&&Jt===2||p.cancelPendingCommit!==null)&&(_l(p,0),Ir(p,Sn,Gl,!1)),Z(p,C),(!(kt&2)||p!==yn)&&(p===yn&&(!(kt&2)&&(Vl|=C),zi===4&&Ir(p,Sn,Gl,!1)),ke(p))}function yc(p,g,C){if(kt&6)throw Error(r(327));var P=!C&&(g&60)===0&&(g&p.expiredLanes)===0||R(p,g),j=P?_c(p,g):Sm(p,g,!0),te=P;do{if(j===0){ns&&!P&&Ir(p,g,0,!1);break}else if(j===6)Ir(p,g,0,!$r);else{if(C=p.current.alternate,te&&!wo(C)){j=Sm(p,g,!1),te=!1;continue}if(j===2){if(te=g,p.errorRecoveryDisabledLanes&te)var xe=0;else xe=p.pendingLanes&-536870913,xe=xe!==0?xe:xe&536870912?536870912:0;if(xe!==0){g=xe;e:{var Be=p;j=nh;var st=bl&&Be.current.memoizedState.isDehydrated;if(st&&(_l(Be,xe).flags|=256),xe=Sm(Be,xe,!1),xe!==2){if(Ro&&!st){Be.errorRecoveryDisabledLanes|=te,Vl|=te,j=4;break e}te=ih,ih=j,te!==null&&_m(te)}j=xe}if(te=!1,j!==2)continue}}if(j===1){_l(p,0),Ir(p,g,0,!0);break}e:{switch(P=p,j){case 0:case 1:throw Error(r(345));case 4:if((g&4194176)===g){Ir(P,g,Gl,!$r);break e}break;case 2:ih=null;break;case 3:case 5:break;default:throw Error(r(329))}if(P.finishedWork=C,P.finishedLanes=g,(g&62914560)===g&&(te=Ov+300-kn(),10<te)){if(Ir(P,g,Gl,!$r),I(P,0)!==0)break e;P.timeoutHandle=_S(Xu.bind(null,P,C,ih,$m,MS,g,Gl,Vl,Wd,$r,2,-0,0),te);break e}Xu(P,C,ih,$m,MS,g,Gl,Vl,Wd,$r,0,-0,0)}}break}while(!0);ke(p)}function _m(p){ih===null?ih=p:ih.push.apply(ih,p)}function Xu(p,g,C,P,j,te,xe,Be,st,wt,$t,hn,gn){var Ri=g.subtreeFlags;if((Ri&8192||(Ri&16785408)===16785408)&&(j0(),Yu(g),g=H0(),g!==null)){p.cancelPendingCommit=g(Ff.bind(null,p,C,P,j,xe,Be,st,1,hn,gn)),Ir(p,te,xe,!wt);return}Ff(p,C,P,j,xe,Be,st,$t,hn,gn)}function wo(p){for(var g=p;;){var C=g.tag;if((C===0||C===11||C===15)&&g.flags&16384&&(C=g.updateQueue,C!==null&&(C=C.stores,C!==null)))for(var P=0;P<C.length;P++){var j=C[P],te=j.getSnapshot;j=j.value;try{if(!A(te(),j))return!1}catch{return!1}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ir(p,g,C,P){g&=~Rv,g&=~Vl,p.suspendedLanes|=g,p.pingedLanes&=~g,P&&(p.warmLanes|=g),P=p.expirationTimes;for(var j=g;0<j;){var te=31-lo(j),xe=1<<te;P[te]=-1,j&=~xe}C!==0&&q(p,C,g)}function dv(){return kt&6?!0:(he(0),!1)}function Fh(){if(Zt!==null){if(Jt===0)var p=Zt.return;else p=Zt,xl=Ic=null,hc(p),Bi=null,vr=0,p=Zt;for(;p!==null;)Rs(p.alternate,p),p=p.return;Zt=null}}function _l(p,g){p.finishedWork=null,p.finishedLanes=0;var C=p.timeoutHandle;C!==Pm&&(p.timeoutHandle=Pm,yv(C)),C=p.cancelPendingCommit,C!==null&&(p.cancelPendingCommit=null,C()),Fh(),yn=p,Zt=C=nu(p.current,null),Sn=g,Jt=0,Mn=null,$r=!1,ns=R(p,g),Ro=!1,Wd=Gl=Rv=Vl=Oo=zi=0,ih=nh=null,MS=!1,g&8&&(g|=g&32);var P=p.entangledLanes;if(P!==0)for(p=p.entanglements,P&=g;0<P;){var j=31-lo(P),te=1<<j;g|=p[j],P&=~te}return ar=g,V(),C}function bm(p,g){Ln=null,Jn.H=qs,g===Er?(g=je(),Jt=3):g===Dr?(g=je(),Jt=4):Jt=g===$d?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Mn=g,Zt===null&&(zi=1,Rf(p,Y(g,p.current)))}function O0(){var p=Hr.current;return p===null?!0:(Sn&4194176)===Sn?ts===null:(Sn&62914560)===Sn||Sn&536870912?p===ts:!1}function Uf(){var p=Jn.H;return Jn.H=qs,p===null?qs:p}function Bf(){var p=Jn.A;return Jn.A=At,p}function ta(){zi=4,$r||(Sn&4194176)!==Sn&&Hr.current!==null||(ns=!0),!(Oo&134217727)&&!(Vl&134217727)||yn===null||Ir(yn,Sn,Gl,!1)}function Sm(p,g,C){var P=kt;kt|=2;var j=Uf(),te=Bf();(yn!==p||Sn!==g)&&($m=null,_l(p,g)),g=!1;var xe=zi;e:do try{if(Jt!==0&&Zt!==null){var Be=Zt,st=Mn;switch(Jt){case 8:Fh(),xe=6;break e;case 3:case 2:case 6:Hr.current===null&&(g=!0);var wt=Jt;if(Jt=0,Mn=null,zl(p,Be,st,wt),C&&ns){xe=0;break e}break;default:wt=Jt,Jt=0,Mn=null,zl(p,Be,st,wt)}}I0(),xe=zi;break}catch($t){bm(p,$t)}while(!0);return g&&p.shellSuspendCounter++,xl=Ic=null,kt=P,Jn.H=j,Jn.A=te,Zt===null&&(yn=null,Sn=0,V()),xe}function I0(){for(;Zt!==null;)bc(Zt)}function _c(p,g){var C=kt;kt|=2;var P=Uf(),j=Bf();yn!==p||Sn!==g?($m=null,qm=kn()+500,_l(p,g)):ns=R(p,g);e:do try{if(Jt!==0&&Zt!==null){g=Zt;var te=Mn;t:switch(Jt){case 1:Jt=0,Mn=null,zl(p,g,te,1);break;case 2:if(Et(te)){Jt=0,Mn=null,ls(g);break}g=function(){Jt===2&&yn===p&&(Jt=7),ke(p)},te.then(g,g);break e;case 3:Jt=7;break e;case 4:Jt=5;break e;case 7:Et(te)?(Jt=0,Mn=null,ls(g)):(Jt=0,Mn=null,zl(p,g,te,7));break;case 5:var xe=null;switch(Zt.tag){case 26:xe=Zt.memoizedState;case 5:case 27:var Be=Zt,st=Be.type,wt=Be.pendingProps;if(xe?Z0(xe):Ac(st,wt)){Jt=0,Mn=null;var $t=Be.sibling;if($t!==null)Zt=$t;else{var hn=Be.return;hn!==null?(Zt=hn,Is(hn)):Zt=null}break t}}Jt=0,Mn=null,zl(p,g,te,5);break;case 6:Jt=0,Mn=null,zl(p,g,te,6);break;case 8:Fh(),zi=6;break e;default:throw Error(r(462))}}N0();break}catch(gn){bm(p,gn)}while(!0);return xl=Ic=null,Jn.H=P,Jn.A=j,kt=C,Zt!==null?0:(yn=null,Sn=0,V(),zi)}function N0(){for(;Zt!==null&&!a1();)bc(Zt)}function bc(p){var g=Ci(p.alternate,p,ar);p.memoizedProps=p.pendingProps,g===null?Is(p):Zt=g}function ls(p){var g=p,C=g.alternate;switch(g.tag){case 15:case 0:g=If(C,g,g.pendingProps,g.type,void 0,Sn);break;case 11:g=If(C,g,g.pendingProps,g.type.render,g.ref,Sn);break;case 5:hc(g);default:Rs(C,g),g=Zt=wm(g,ar),g=Ci(C,g,ar)}p.memoizedProps=p.pendingProps,g===null?Is(p):Zt=g}function zl(p,g,C,P){xl=Ic=null,hc(g),Bi=null,vr=0;var j=g.return;try{if(oS(p,j,g,C,Sn)){zi=1,Rf(p,Y(C,p.current)),Zt=null;return}}catch(te){if(j!==null)throw Zt=j,te;zi=1,Rf(p,Y(C,p.current)),Zt=null;return}g.flags&32768?(mt||P===1?p=!0:ns||Sn&536870912?p=!1:($r=p=!0,(P===2||P===3||P===6)&&(P=Hr.current,P!==null&&P.tag===13&&(P.flags|=16384))),dr(g,p)):Is(g)}function Is(p){var g=p;do{if(g.flags&32768){dr(g,$r);return}p=g.return;var C=dm(g.alternate,g,ar);if(C!==null){Zt=C;return}if(g=g.sibling,g!==null){Zt=g;return}Zt=g=p}while(g!==null);zi===0&&(zi=5)}function dr(p,g){do{var C=en(p.alternate,p);if(C!==null){C.flags&=32767,Zt=C;return}if(C=p.return,C!==null&&(C.flags|=32768,C.subtreeFlags=0,C.deletions=null),!g&&(p=p.sibling,p!==null)){Zt=p;return}Zt=p=C}while(p!==null);zi=6,Zt=null}function Ff(p,g,C,P,j,te,xe,Be,st,wt){var $t=Jn.T,hn=va();try{io(2),Jn.T=null,zf(p,g,C,P,hn,j,te,xe,Be,st,wt)}finally{Jn.T=$t,io(hn)}}function zf(p,g,C,P,j,te,xe,Be){do Co();while($h!==null);if(kt&6)throw Error(r(327));var st=p.finishedWork;if(P=p.finishedLanes,st===null)return null;if(p.finishedWork=null,p.finishedLanes=0,st===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var wt=st.lanes|st.childLanes;if(wt|=gi,H(p,P,wt,te,xe,Be),p===yn&&(Zt=yn=null,Sn=0),!(st.subtreeFlags&10256)&&!(st.flags&10256)||n_||(n_=!0,e3=wt,t3=C,pv(es,function(){return Co(),null})),C=(st.flags&15990)!==0,st.subtreeFlags&15990||C?(C=Jn.T,Jn.T=null,te=va(),io(2),xe=kt,kt|=4,Dd(p,st),gm(st,p),yS(p.containerInfo),p.current=st,mm(p,st.alternate,st),fr(),kt=xe,io(te),Jn.T=C):p.current=st,n_?(n_=!1,$h=p,ip=P):fv(p,wt),wt=p.pendingLanes,wt===0&&(rh=null),W(st.stateNode),ke(p),g!==null)for(j=p.onRecoverableError,st=0;st<g.length;st++)wt=g[st],j(wt.value,{componentStack:wt.stack});return ip&3&&Co(),wt=p.pendingLanes,P&4194218&&wt&42?p===n3?o1++:(o1=0,n3=p):o1=0,he(0),null}function fv(p,g){(p.pooledCacheLanes&=g)===0&&(g=p.pooledCache,g!=null&&(p.pooledCache=null,Ph(g)))}function Co(){if($h!==null){var p=$h,g=e3;e3=0;var C=ee(ip),P=32>C?32:C;C=Jn.T;var j=va();try{if(io(P),Jn.T=null,$h===null)var te=!1;else{P=t3,t3=null;var xe=$h,Be=ip;if($h=null,ip=0,kt&6)throw Error(r(331));var st=kt;if(kt|=4,vc(xe.current),Wu(xe,xe.current,Be,P),kt=st,he(0,!1),E&&typeof E.onPostCommitFiberRoot=="function")try{E.onPostCommitFiberRoot(O,xe)}catch{}te=!0}return te}finally{io(j),Jn.T=C,fv(p,g)}}return!1}function Em(p,g,C){g=Y(C,g),g=_o(p.stateNode,g,2),p=Pe(p,g,2),p!==null&&(Z(p,2),ke(p))}function ki(p,g,C){if(p.tag===3)Em(p,p,C);else for(;g!==null;){if(g.tag===3){Em(g,p,C);break}else if(g.tag===1){var P=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(rh===null||!rh.has(P))){p=Y(C,p),C=Zr(2),P=Pe(g,C,2),P!==null&&(Vu(C,P,g,p),Z(P,2),ke(P));break}}g=g.return}}function Tm(p,g,C){var P=p.pingCache;if(P===null){P=p.pingCache=new Kn;var j=new Set;P.set(g,j)}else j=P.get(g),j===void 0&&(j=new Set,P.set(g,j));j.has(C)||(Ro=!0,j.add(C),p=fS.bind(null,p,g,C),g.then(p,p))}function fS(p,g,C){var P=p.pingCache;P!==null&&P.delete(g),p.pingedLanes|=p.suspendedLanes&C,p.warmLanes&=~C,yn===p&&(Sn&C)===C&&(zi===4||zi===3&&(Sn&62914560)===Sn&&300>kn()-Ov?!(kt&2)&&_l(p,0):Rv|=C,Wd===Sn&&(Wd=0)),ke(p)}function P0(p,g){g===0&&(g=k()),p=ge(p,g),p!==null&&(Z(p,g),ke(p))}function D0(p){var g=p.memoizedState,C=0;g!==null&&(C=g.retryLane),P0(p,C)}function pS(p,g){var C=0;switch(p.tag){case 13:var P=p.stateNode,j=p.memoizedState;j!==null&&(C=j.retryLane);break;case 19:P=p.stateNode;break;case 22:P=p.stateNode._retryCache;break;default:throw Error(r(314))}P!==null&&P.delete(g),P0(p,C)}function pv(p,g){return Qr(p,g)}function Sc(p,g,C,P){this.tag=p,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xm(p){return p=p.prototype,!(!p||!p.isReactComponent)}function nu(p,g){var C=p.alternate;return C===null?(C=t(p.tag,g,p.key,p.mode),C.elementType=p.elementType,C.type=p.type,C.stateNode=p.stateNode,C.alternate=p,p.alternate=C):(C.pendingProps=g,C.type=p.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=p.flags&31457280,C.childLanes=p.childLanes,C.lanes=p.lanes,C.child=p.child,C.memoizedProps=p.memoizedProps,C.memoizedState=p.memoizedState,C.updateQueue=p.updateQueue,g=p.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=p.sibling,C.index=p.index,C.ref=p.ref,C.refCleanup=p.refCleanup,C}function wm(p,g){p.flags&=31457282;var C=p.alternate;return C===null?(p.childLanes=0,p.lanes=g,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=C.childLanes,p.lanes=C.lanes,p.child=C.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=C.memoizedProps,p.memoizedState=C.memoizedState,p.updateQueue=C.updateQueue,p.type=C.type,g=C.dependencies,p.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),p}function Cm(p,g,C,P,j,te){var xe=0;if(P=p,typeof p=="function")xm(p)&&(xe=1);else if(typeof p=="string")xe=ya&&Vs?lu(p,C,Ie.current)?26:e_(p)?27:5:ya?lu(p,C,Ie.current)?26:5:Vs&&e_(p)?27:5;else e:switch(p){case ru:return zh(C.children,j,te,g);case Jo:xe=8,j|=24;break;case su:return p=t(12,C,g,j|2),p.elementType=su,p.lanes=te,p;case Rm:return p=t(13,C,g,j),p.elementType=Rm,p.lanes=te,p;case zd:return p=t(19,C,g,j),p.elementType=zd,p.lanes=te,p;case au:return k0(C,j,te,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case Fd:case Ec:xe=10;break e;case U0:xe=9;break e;case Vf:xe=11;break e;case Om:xe=14;break e;case Tc:xe=16,P=null;break e}xe=29,C=Error(r(130,p===null?"null":typeof p,"")),P=null}return g=t(xe,C,g,j),g.elementType=p,g.type=P,g.lanes=te,g}function zh(p,g,C,P){return p=t(7,p,P,g),p.lanes=C,p}function k0(p,g,C,P){p=t(22,p,P,g),p.elementType=au,p.lanes=C;var j={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var te=j._current;if(te===null)throw Error(r(456));if(!(j._pendingVisibility&2)){var xe=ge(te,2);xe!==null&&(j._pendingVisibility|=2,no(xe,te,2))}},attach:function(){var te=j._current;if(te===null)throw Error(r(456));if(j._pendingVisibility&2){var xe=ge(te,2);xe!==null&&(j._pendingVisibility&=-3,no(xe,te,2))}}};return p.stateNode=j,p}function Am(p,g,C){return p=t(6,p,null,g),p.lanes=C,p}function mv(p,g,C){return g=t(4,p.children!==null?p.children:[],p.key,g),g.lanes=C,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function L0(p,g,C,P,j,te,xe,Be){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Pm,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=P,this.onUncaughtError=j,this.onCaughtError=te,this.onRecoverableError=xe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function gv(p,g,C,P,j,te,xe,Be,st,wt,$t,hn){return p=new L0(p,g,C,xe,Be,st,wt,hn),g=1,te===!0&&(g|=24),te=t(3,null,null,g),p.current=te,te.stateNode=p,g=lv(),g.refCount++,p.pooledCache=g,g.refCount++,te.memoizedState={element:P,isDehydrated:C,cache:g},$(te),p}function Si(p){return p?(p=oo,p):oo}function Mm(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=f(g),p=p!==null?m(p):null,p===null?null:jh(p.stateNode)}function mS(p,g,C,P,j,te){j=Si(j),P.context===null?P.context=j:P.pendingContext=j,P=me(g),P.payload={element:C},te=te===void 0?null:te,te!==null&&(P.callback=te),C=Pe(p,P,g),C!==null&&(no(C,p,g),Ue(C,p,g))}function jf(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var C=p.retryLane;p.retryLane=C!==0&&C<g?C:g}}function Ku(p,g){jf(p,g),(p=p.alternate)&&jf(p,g)}var _i={},Ld=vt,Nr=T4,iu=Object.assign,Ud=Symbol.for("react.element"),Hf=Symbol.for("react.transitional.element"),Bd=Symbol.for("react.portal"),ru=Symbol.for("react.fragment"),Jo=Symbol.for("react.strict_mode"),su=Symbol.for("react.profiler"),Fd=Symbol.for("react.provider"),U0=Symbol.for("react.consumer"),Ec=Symbol.for("react.context"),Vf=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),Om=Symbol.for("react.memo"),Tc=Symbol.for("react.lazy"),au=Symbol.for("react.offscreen"),Xx=Symbol.for("react.memo_cache_sentinel"),ga=Symbol.iterator,B0=Symbol.for("react.client.reference"),Jn=Ld.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Gf,vv,jd=!1,Zu=Array.isArray,Im=e.rendererVersion,Ao=e.rendererPackageName,xc=e.extraDevToolsConfig,jh=e.getPublicInstance,qf=e.getRootHostContext,gS=e.getChildHostContext,vS=e.prepareForCommit,yS=e.resetAfterCommit,Hd=e.createInstance,Vd=e.appendInitialChild,F0=e.finalizeInitialChildren,$f=e.shouldSetTextContent,Nm=e.createTextInstance,_S=e.scheduleTimeout,yv=e.cancelTimeout,Pm=e.noTimeout,jl=e.isPrimaryRenderer;e.warnsIfNotActing;var Ua=e.supportsMutation,wc=e.supportsPersistence,bl=e.supportsHydration,Dm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Kx=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var io=e.setCurrentUpdatePriority,va=e.getCurrentUpdatePriority,Cc=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Sl=e.shouldAttemptEagerTransition,Pr=e.detachDeletedInstance;e.requestPostPaintCallback;var z0=e.maySuspendCommit,Ac=e.preloadInstance,j0=e.startSuspendingCommit,_v=e.suspendInstance,H0=e.waitForCommitToBeReady,Ju=e.NotPendingTransition,El=e.HostTransitionContext,Gn=e.resetFormInstance;e.bindToConsole;var bv=e.supportsMicrotasks,Bn=e.scheduleMicrotask,Tl=e.supportsTestSelectors,km=e.findFiberRoot,V0=e.getBoundingRect,na=e.getTextContent,Gd=e.isHiddenSubtree,bS=e.matchAccessibilityRole,G0=e.setFocusIfFocusable,Jr=e.setupIntersectionObserver,ro=e.appendChild,Sv=e.appendChildToContainer,q0=e.commitTextUpdate,Zx=e.commitMount,Lm=e.commitUpdate,SS=e.insertBefore,ES=e.insertInContainerBefore,Wf=e.removeChild,$0=e.removeChildFromContainer,Um=e.resetTextContent,Qo=e.hideInstance,Yf=e.hideTextInstance,Ev=e.unhideInstance,ia=e.unhideTextInstance,Xf=e.clearContainer,Bm=e.cloneInstance,Tv=e.createContainerChildSet,Mc=e.appendChildToContainerChildSet,qd=e.finalizeContainerChildren,W0=e.replaceContainerChildren,Kf=e.cloneHiddenInstance,ra=e.cloneHiddenTextInstance,Zf=e.isSuspenseInstancePending,Ns=e.isSuspenseInstanceFallback,ou=e.getSuspenseInstanceFallbackErrorDetails,TS=e.registerSuspenseInstanceRetry,Jf=e.canHydrateFormStateMarker,xv=e.isFormStateMarkerMatching,so=e.getNextHydratableSibling,Ba=e.getFirstHydratableChild,Fa=e.getFirstHydratableChildWithinContainer,Y0=e.getFirstHydratableChildWithinSuspenseInstance,xS=e.canHydrateInstance,Qu=e.canHydrateTextInstance,$i=e.canHydrateSuspenseInstance,Jx=e.hydrateInstance,Qx=e.hydrateTextInstance,e1=e.hydrateSuspenseInstance,Qf=e.getNextHydratableInstanceAfterSuspenseInstance,ep=e.commitHydratedContainer,Fm=e.commitHydratedSuspenseInstance,t1=e.clearSuspenseBoundary,n1=e.clearSuspenseBoundaryFromContainer,wS=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Rc=e.validateHydratableInstance,Oc=e.validateHydratableTextInstance,ya=e.supportsResources,lu=e.isHostHoistableType,eh=e.getHoistableRoot,cu=e.getResource,cs=e.acquireResource,ao=e.releaseResource,X0=e.hydrateHoistable,zm=e.mountHoistable,K0=e.unmountHoistable,i1=e.createHoistableInstance,CS=e.prepareToCommitHoistables,wv=e.mayResourceSuspendCommit,Z0=e.preloadResource,r1=e.suspendResource,Vs=e.supportsSingletons,tp=e.resolveSingletonInstance,Cv=e.clearSingleton,J0=e.acquireSingletonInstance,Q0=e.releaseSingletonInstance,e_=e.isHostSingletonType,_a=[],Hh=-1,oo={},lo=Math.clz32?Math.clz32:T,s1=Math.log,Av=Math.LN2,jm=128,sa=4194304,Qr=Nr.unstable_scheduleCallback,uu=Nr.unstable_cancelCallback,a1=Nr.unstable_shouldYield,fr=Nr.unstable_requestPaint,kn=Nr.unstable_now,AS=Nr.unstable_ImmediatePriority,ba=Nr.unstable_UserBlockingPriority,es=Nr.unstable_NormalPriority,Vh=Nr.unstable_IdlePriority,np=Nr.log,t_=Nr.unstable_setDisableYieldValue,O=null,E=null,A=typeof Object.is=="function"?Object.is:X,M=new WeakMap,D=[],B=0,G=null,re=0,oe=[],J=0,le=null,pe=1,ye="",Ie=_(null),Xe=_(null),qe=_(null),Oe=_(null),Te=null,rt=null,mt=!1,jt=null,Tt=!1,Dn=Error(r(519)),pn=[],Qn=0,gi=0,hi=null,si=null,ei=!1,oi=!1,di=!1,ti=0,li=null,qn=0,un=0,In=null,Ei=!1,Sr=!1,jr=Object.prototype.hasOwnProperty,Er=Error(r(460)),Dr=Error(r(474)),Tr={then:function(){}},sr=null,Bi=null,vr=0,xr=Pi(!0),kr=Pi(!1),vs=_(null),Ps=_(0),Hr=_(null),ts=null,Fi=_(0),Gs=0,Ln=null,bi=null,tr=null,aa=!1,za=!1,Mo=!1,el=0,Lr=0,co=null,hu=0,Hl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},qs={readContext:ea,use:ut,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useInsertionEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useSyncExternalStore:Un,useId:Un};qs.useCacheRefresh=Un,qs.useMemoCache=Un,qs.useHostTransitionStatus=Un,qs.useFormState=Un,qs.useActionState=Un,qs.useOptimistic=Un;var Sa={readContext:ea,use:ut,useCallback:function(p,g){return Ee().memoizedState=[p,g===void 0?null:g],p},useContext:ea,useEffect:Xc,useImperativeHandle:function(p,g,C){C=C!=null?C.concat([p]):null,Id(4194308,4,Qa.bind(null,g,p),C)},useLayoutEffect:function(p,g){return Id(4194308,4,p,g)},useInsertionEffect:function(p,g){Id(4,2,p,g)},useMemo:function(p,g){var C=Ee();g=g===void 0?null:g;var P=p();if(Mo){Q(!0);try{p()}finally{Q(!1)}}return C.memoizedState=[P,g],P},useReducer:function(p,g,C){var P=Ee();if(C!==void 0){var j=C(g);if(Mo){Q(!0);try{C(g)}finally{Q(!1)}}}else j=g;return P.memoizedState=P.baseState=j,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:j},P.queue=p,p=p.dispatch=aS.bind(null,Ln,p),[P.memoizedState,p]},useRef:function(p){var g=Ee();return p={current:p},g.memoizedState=p},useState:function(p){p=zr(p);var g=p.queue,C=E0.bind(null,Ln,g);return g.dispatch=C,[p.memoizedState,C]},useDebugValue:eo,useDeferredValue:function(p,g){var C=Ee();return dc(C,p,g)},useTransition:function(){var p=zr(!1);return p=Hu.bind(null,Ln,p.queue,!0,!1),Ee().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,g,C){var P=Ln,j=Ee();if(mt){if(C===void 0)throw Error(r(407));C=C()}else{if(C=g(),yn===null)throw Error(r(349));Sn&60||Vn(P,g,C)}j.memoizedState=C;var te={value:C,getSnapshot:g};return j.queue=te,Xc(Zn.bind(null,P,te,p),[p]),P.flags|=2048,vl(9,mn.bind(null,P,te,C,g),{destroy:void 0},null),C},useId:function(){var p=Ee(),g=yn.identifierPrefix;if(mt){var C=ye,P=pe;C=(P&~(1<<32-lo(P)-1)).toString(32)+C,g=":"+g+"R"+C,C=el++,0<C&&(g+="H"+C.toString(32)),g+=":"}else C=hu++,g=":"+g+"r"+C.toString(32)+":";return p.memoizedState=g},useCacheRefresh:function(){return Ee().memoizedState=sv.bind(null,Ln)}};Sa.useMemoCache=Ke,Sa.useHostTransitionStatus=Kc,Sa.useFormState=Or,Sa.useActionState=Or,Sa.useOptimistic=function(p){var g=Ee();g.memoizedState=g.baseState=p;var C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=C,g=Ih.bind(null,Ln,!0,C),C.dispatch=g,[p,g]};var ja={readContext:ea,use:ut,useCallback:sS,useContext:ea,useEffect:nm,useImperativeHandle:rm,useInsertionEffect:iv,useLayoutEffect:im,useMemo:b0,useReducer:Yt,useRef:Cs,useState:function(){return Yt(Pt)},useDebugValue:eo,useDeferredValue:function(p,g){var C=Ye();return Mf(C,bi.memoizedState,p,g)},useTransition:function(){var p=Yt(Pt)[0],g=Ye().memoizedState;return[typeof p=="boolean"?p:ct(p),g]},useSyncExternalStore:Hn,useId:rv};ja.useCacheRefresh=S0,ja.useMemoCache=Ke,ja.useHostTransitionStatus=Kc,ja.useFormState=on,ja.useActionState=on,ja.useOptimistic=function(p,g){var C=Ye();return wi(C,bi,p,g)};var uo={readContext:ea,use:ut,useCallback:sS,useContext:ea,useEffect:nm,useImperativeHandle:rm,useInsertionEffect:iv,useLayoutEffect:im,useMemo:b0,useReducer:cn,useRef:Cs,useState:function(){return cn(Pt)},useDebugValue:eo,useDeferredValue:function(p,g){var C=Ye();return bi===null?dc(C,p,g):Mf(C,bi.memoizedState,p,g)},useTransition:function(){var p=cn(Pt)[0],g=Ye().memoizedState;return[typeof p=="boolean"?p:ct(p),g]},useSyncExternalStore:Hn,useId:rv};uo.useCacheRefresh=S0,uo.useMemoCache=Ke,uo.useHostTransitionStatus=Kc,uo.useFormState=On,uo.useActionState=On,uo.useOptimistic=function(p,g){var C=Ye();return bi!==null?wi(C,bi,p,g):(C.baseState=p,[p,C.queue.dispatch])};var Gh={isMounted:function(p){return(p=p._reactInternals)?h(p)===p:!1},enqueueSetState:function(p,g,C){p=p._reactInternals;var P=La(),j=me(P);j.payload=g,C!=null&&(j.callback=C),g=Pe(p,j,P),g!==null&&(no(g,p,P),Ue(g,p,P))},enqueueReplaceState:function(p,g,C){p=p._reactInternals;var P=La(),j=me(P);j.tag=1,j.payload=g,C!=null&&(j.callback=C),g=Pe(p,j,P),g!==null&&(no(g,p,P),Ue(g,p,P))},enqueueForceUpdate:function(p,g){p=p._reactInternals;var C=La(),P=me(C);P.tag=2,g!=null&&(P.callback=g),g=Pe(p,P,C),g!==null&&(no(g,p,C),Ue(g,p,C))}},qh=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(g))return}else if(typeof ss=="object"&&typeof ss.emit=="function"){ss.emit("uncaughtException",p);return}console.error(p)},$d=Error(r(461)),us=!1,th={dehydrated:null,treeContext:null,retryLane:0},du=_(null),Ic=null,xl=null,Hm=typeof AbortController<"u"?AbortController:function(){var p=[],g=this.signal={aborted:!1,addEventListener:function(C,P){p.push(P)}};this.abort=function(){g.aborted=!0,p.forEach(function(C){return C()})}},Mv=Nr.unstable_scheduleCallback,Vm=Nr.unstable_NormalPriority,yr={$$typeof:Ec,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Gm=Jn.S;Jn.S=function(p,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&_t(p,g),Gm!==null&&Gm(p,g)};var fu=_(null),b=!1,w=!1,F=!1,ne=typeof WeakSet=="function"?WeakSet:Set,ce=null,we=!1,De=null,Ge=!1,it=null,xt=8192,At={getCacheForType:function(p){var g=ea(yr),C=g.data.get(p);return C===void 0&&(C=p(),g.data.set(p,C)),C}},Ft=0,vn=1,wn=2,Fn=3,Mt=4;if(typeof Symbol=="function"&&Symbol.for){var Vt=Symbol.for;Ft=Vt("selector.component"),vn=Vt("selector.has_pseudo_class"),wn=Vt("selector.role"),Fn=Vt("selector.test_id"),Mt=Vt("selector.text")}var Kn=typeof WeakMap=="function"?WeakMap:Map,kt=0,yn=null,Zt=null,Sn=0,Jt=0,Mn=null,$r=!1,ns=!1,Ro=!1,ar=0,zi=0,Oo=0,Vl=0,Rv=0,Gl=0,Wd=0,nh=null,ih=null,MS=!1,Ov=0,qm=1/0,$m=null,rh=null,n_=!1,$h=null,ip=0,e3=0,t3=null,o1=0,n3=null;return _i.attemptContinuousHydration=function(p){if(p.tag===13){var g=ge(p,67108864);g!==null&&no(g,p,67108864),Ku(p,67108864)}},_i.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=La(),C=ge(p,g);C!==null&&no(C,p,g),Ku(p,g)}},_i.attemptSynchronousHydration=function(p){switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var g=x(p.pendingLanes);if(g!==0){for(p.pendingLanes|=2,p.entangledLanes|=2;g;){var C=1<<31-lo(g);p.entanglements[1]|=C,g&=~C}ke(p),!(kt&6)&&(qm=kn()+500,he(0))}}break;case 13:g=ge(p,2),g!==null&&no(g,p,2),dv(),Ku(p,2)}},_i.batchedUpdates=function(p,g){return p(g)},_i.createComponentSelector=function(p){return{$$typeof:Ft,value:p}},_i.createContainer=function(p,g,C,P,j,te,xe,Be,st,wt){return gv(p,g,!1,null,C,P,te,xe,Be,st,wt,null)},_i.createHasPseudoClassSelector=function(p){return{$$typeof:vn,value:p}},_i.createHydrationContainer=function(p,g,C,P,j,te,xe,Be,st,wt,$t,hn,gn){return p=gv(C,P,!0,p,j,te,Be,st,wt,$t,hn,gn),p.context=Si(null),C=p.current,P=La(),j=me(P),j.callback=g??null,Pe(C,j,P),p.current.lanes=P,Z(p,P),ke(p),p},_i.createPortal=function(p,g,C){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bd,key:P==null?null:""+P,children:p,containerInfo:g,implementation:C}},_i.createRoleSelector=function(p){return{$$typeof:wn,value:p}},_i.createTestNameSelector=function(p){return{$$typeof:Fn,value:p}},_i.createTextSelector=function(p){return{$$typeof:Mt,value:p}},_i.defaultOnCaughtError=function(p){console.error(p)},_i.defaultOnRecoverableError=function(p){qh(p)},_i.defaultOnUncaughtError=function(p){qh(p)},_i.deferredUpdates=function(p){var g=Jn.T,C=va();try{return io(32),Jn.T=null,p()}finally{io(C),Jn.T=g}},_i.discreteUpdates=function(p,g,C,P,j){var te=Jn.T,xe=va();try{return io(2),Jn.T=null,p(g,C,P,j)}finally{io(xe),Jn.T=te,kt===0&&(qm=kn()+500)}},_i.findAllNodes=Bh,_i.findBoundingRects=function(p,g){if(!Tl)throw Error(r(363));g=Bh(p,g),p=[];for(var C=0;C<g.length;C++)p.push(V0(g[C]));for(g=p.length-1;0<g;g--){C=p[g];for(var P=C.x,j=P+C.width,te=C.y,xe=te+C.height,Be=g-1;0<=Be;Be--)if(g!==Be){var st=p[Be],wt=st.x,$t=wt+st.width,hn=st.y,gn=hn+st.height;if(P>=wt&&te>=hn&&j<=$t&&xe<=gn){p.splice(g,1);break}else if(P!==wt||C.width!==st.width||gn<te||hn>xe){if(!(te!==hn||C.height!==st.height||$t<P||wt>j)){wt>P&&(st.width+=wt-P,st.x=P),$t<j&&(st.width=j-wt),p.splice(g,1);break}}else{hn>te&&(st.height+=hn-te,st.y=te),gn<xe&&(st.height=xe-hn),p.splice(g,1);break}}}return p},_i.findHostInstance=Mm,_i.findHostInstanceWithNoPortals=function(p){return p=f(p),p=p!==null?v(p):null,p===null?null:jh(p.stateNode)},_i.findHostInstanceWithWarning=function(p){return Mm(p)},_i.flushPassiveEffects=Co,_i.flushSyncFromReconciler=function(p){var g=kt;kt|=1;var C=Jn.T,P=va();try{if(io(2),Jn.T=null,p)return p()}finally{io(P),Jn.T=C,kt=g,!(kt&6)&&he(0)}},_i.flushSyncWork=dv,_i.focusWithin=function(p,g){if(!Tl)throw Error(r(363));for(p=Fl(p),g=ym(p,g),g=Array.from(g),p=0;p<g.length;){var C=g[p++],P=C.tag;if(!Gd(C)){if((P===5||P===26||P===27)&&G0(C.stateNode))return!0;for(C=C.child;C!==null;)g.push(C),C=C.sibling}}return!1},_i.getFindAllNodesFailureDescription=function(p,g){if(!Tl)throw Error(r(363));var C=0,P=[];p=[Fl(p),0];for(var j=0;j<p.length;){var te=p[j++],xe=te.tag,Be=p[j++],st=g[Be];if((xe!==5&&xe!==26&&xe!==27||!Gd(te))&&(hv(te,st)&&(P.push(vm(st)),Be++,Be>C&&(C=Be)),Be<g.length))for(te=te.child;te!==null;)p.push(te,Be),te=te.sibling}if(C<g.length){for(p=[];C<g.length;C++)p.push(vm(g[C]));return`findAllNodes was able to match part of the selector:
  `+(P.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},_i.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 27:case 5:return jh(p.child.stateNode);default:return p.child.stateNode}},_i.injectIntoDevTools=function(){var p={bundleType:0,version:Im,rendererPackageName:Ao,currentDispatcherRef:Jn,findFiberByHostInstance:Dm,reconcilerVersion:"19.0.0"};if(xc!==null&&(p.rendererConfig=xc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{O=g.inject(p),E=g}catch{}p=!!g.checkDCE}}return p},_i.isAlreadyRendering=function(){return!1},_i.observeVisibleRects=function(p,g,C,P){if(!Tl)throw Error(r(363));p=Bh(p,g);var j=Jr(p,C,P).disconnect;return{disconnect:function(){j()}}},_i.shouldError=function(){return null},_i.shouldSuspend=function(){return!1},_i.startHostTransition=function(p,g,C,P){if(p.tag!==5)throw Error(r(476));var j=Gr(p).queue;Hu(p,j,g,Ju,C===null?i:function(){var te=Gr(p).next.queue;return Oh(p,te,{},La()),C(P)})},_i.updateContainer=function(p,g,C,P){var j=g.current,te=La();return mS(j,te,p,g,C,P),te},_i.updateContainerSync=function(p,g,C,P){return g.tag===0&&Co(),mS(g.current,2,p,g,C,P),2},_i},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(XJ);var gSe=XJ.exports;YJ.exports=gSe;var vSe=YJ.exports;const ySe=Dl(vSe),_Se=n=>typeof n=="object"&&typeof n.then=="function",z_=[];function JJ(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function QJ(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of z_)if(JJ(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=z_.indexOf(r);s!==-1&&z_.splice(s,1)},promise:(_Se(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(z_.push(r),!t)throw r.promise}const eQ=(n,e,t)=>QJ(n,e,!1,t),bSe=(n,e,t)=>void QJ(n,e,!0,t),SSe=n=>{if(n===void 0||n.length===0)z_.splice(0,z_.length);else{const e=z_.find(t=>JJ(n,t.keys,t.equal));e&&e.remove()}};function s8(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=s8(i,e,t);if(r)return r;i=e?null:i.sibling}}function tQ(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const a8=tQ(vt.createContext(null));let nQ=class extends vt.Component{render(){return vt.createElement(a8.Provider,{value:this._reactInternals},this.props.children)}};function iQ(){const n=vt.useContext(a8);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=vt.useId();return vt.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=s8(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const ESe=Symbol.for("react.context"),TSe=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===ESe;function xSe(){const n=iQ(),[e]=vt.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;TSe(i)&&i!==a8&&!e.has(i)&&e.set(i,vt.use(tQ(i))),t=t.return}return e}function wSe(){const n=xSe();return vt.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>vt.createElement(e,null,vt.createElement(t.Provider,{...i,value:n.get(t)})),e=>vt.createElement(nQ,{...e})),[n])}function rQ(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const sQ=n=>n&&n.isOrthographicCamera,CSe=n=>n&&n.hasOwnProperty("current"),ASe=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),pA=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?vt.useLayoutEffect:vt.useEffect;function o8(n){const e=vt.useRef(n);return pA(()=>void(e.current=n),[n]),e}function MSe(){const n=iQ(),e=wSe();return vt.useMemo(()=>({children:t})=>{const r=!!s8(n,!0,s=>s.type===vt.StrictMode)?vt.StrictMode:vt.Fragment;return $a.jsx(r,{children:$a.jsx(e,{children:t})})},[n,e])}function RSe({set:n}){return pA(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const OSe=(n=>(n=class extends vt.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function aQ(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function WS(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ws={obj:n=>n===Object(n)&&!Ws.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ws.str(n)||Ws.num(n)||Ws.boo(n))return n===e;const s=Ws.obj(n);if(s&&i==="reference")return n===e;const a=Ws.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!Ws.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(Ws.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function ISe(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function NSe(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const oQ=["children","key","ref"];function PSe(n){const e={};for(const t in n)oQ.includes(t)||(e[t]=n[t]);return e}function fN(n,e,t,i){const r=n;let s=r==null?void 0:r.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:PSe(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function aC(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const Hq=/-\d+$/;function pN(n,e){if(Ws.str(e.props.attach)){if(Hq.test(e.props.attach)){const r=e.props.attach.replace(Hq,""),{root:s,key:a}=aC(n.object,r);Array.isArray(s[a])||(s[a]=[])}const{root:t,key:i}=aC(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Ws.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function mN(n,e){if(Ws.str(e.props.attach)){const{root:t,key:i}=aC(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const x4=[...oQ,"args","dispose","attach","object","onUpdate","dispose"],Vq=new Map;function DSe(n){let e=Vq.get(n.constructor);try{e||(e=new n.constructor,Vq.set(n.constructor,e))}catch{}return e}function kSe(n,e){const t={};for(const i in e)if(!x4.includes(i)&&!Ws.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(x4.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=aC(n.object,i);if(r.constructor&&r.constructor.length===0){const a=DSe(r);Ws.und(a)||(t[s]=a[s])}else t[s]=0}return t}const LSe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],USe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ay(n,e){var t;const i=n.__r3f,r=i&&rQ(i).getState(),s=i==null?void 0:i.eventCount;for(const o in e){let l=e[o];if(x4.includes(o))continue;if(i&&USe.test(o)){typeof l=="function"?i.handlers[o]=l:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:c,key:u,target:h}=aC(n,o);if(h instanceof yT&&l instanceof yT)h.mask=l.mask;else if(h instanceof dn&&ASe(l))h.set(l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&typeof h.copy=="function"&&l!=null&&l.constructor&&h.constructor===l.constructor)h.copy(l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&Array.isArray(l))typeof h.fromArray=="function"?h.fromArray(l):h.set(...l);else if(h!==null&&typeof h=="object"&&typeof h.set=="function"&&typeof l=="number")typeof h.setScalar=="function"?h.setScalar(l):h.set(l);else{var a;c[u]=l,r&&!r.linear&&LSe.includes(u)&&(a=c[u])!=null&&a.isTexture&&c[u].format===Fo&&c[u].type===Ya&&(c[u].colorSpace=Mr)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const o=i.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&wx(i),n}function wx(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function lQ(n,e){n.manual||(sQ(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const kc=n=>n==null?void 0:n.isObject3D;function bR(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function cQ(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function BSe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{cQ(t.capturedMap,e,i,r)})}function FSe(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),h=new Set,d=[],f=c?c(u.internal.interaction):u.internal.interaction;for(let y=0;y<f.length;y++){const S=WS(f[y]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function m(y){const S=WS(y);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var T;S.events.compute==null||S.events.compute(l,S,(T=S.previousRoot)==null?void 0:T.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(y,!0):[]}let v=f.flatMap(m).sort((y,S)=>{const T=WS(y.object),x=WS(S.object);return!T||!x?y.distance-S.distance:x.events.priority-T.events.priority||y.distance-S.distance}).filter(y=>{const S=bR(y);return h.has(S)?!1:(h.add(S),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const y of v){let S=y.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&d.push({...y,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let y of u.internal.capturedMap.get(l.pointerId).values())h.has(bR(y.intersection))||d.push(y.intersection);return d}function r(l,c,u,h){if(l.length){const d={stopped:!1};for(const f of l){let m=WS(f.object);if(m||f.object.traverseAncestors(v=>{const _=WS(v);if(_)return m=_,!1}),m){const{raycaster:v,pointer:_,camera:y,internal:S}=m,T=new Re(_.x,_.y,0).unproject(y),x=k=>{var z,Z;return(z=(Z=S.capturedMap.get(k))==null?void 0:Z.has(f.eventObject))!=null?z:!1},I=k=>{const z={intersection:f,target:c.target};S.capturedMap.has(k)?S.capturedMap.get(k).set(f.eventObject,z):S.capturedMap.set(k,new Map([[f.eventObject,z]])),c.target.setPointerCapture(k)},R=k=>{const z=S.capturedMap.get(k);z&&cQ(S.capturedMap,f.eventObject,z,k)};let N={};for(let k in c){let z=c[k];typeof z!="function"&&(N[k]=z)}let L={...f,...N,pointer:_,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:T,ray:v.ray,camera:y,stopPropagation(){const k="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!k||k.has(f.eventObject))&&(L.stopped=d.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(z=>z.eventObject===f.eventObject))){const z=l.slice(0,l.indexOf(f));s([...z,f])}},target:{hasPointerCapture:x,setPointerCapture:I,releasePointerCapture:R},currentTarget:{hasPointerCapture:x,setPointerCapture:I,releasePointerCapture:R},nativeEvent:c};if(h(L),d.stopped===!0)break}}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const d=u.eventObject.__r3f;if(c.hovered.delete(bR(u)),d!=null&&d.eventCount){const f=d.handlers,m={...u,intersections:l};f.onPointerOut==null||f.onPointerOut(m),f.onPointerLeave==null||f.onPointerLeave(m)}}}function a(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:d}=n.getState();d.lastEvent.current=u;const f=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(u,f?t:void 0),y=m?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=_.map(T=>T.eventObject)),m&&!_.length&&y<=2&&(a(u,d.interaction),h&&h(u)),f&&s(_);function S(T){const x=T.eventObject,I=x.__r3f;if(!(I!=null&&I.eventCount))return;const R=I.handlers;if(f){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const N=bR(T),L=d.hovered.get(N);L?L.stopped&&T.stopPropagation():(d.hovered.set(N,T),R.onPointerOver==null||R.onPointerOver(T),R.onPointerEnter==null||R.onPointerEnter(T))}R.onPointerMove==null||R.onPointerMove(T)}else{const N=R[l];N?(!m||d.initialHits.includes(x))&&(a(u,d.interaction.filter(L=>!d.initialHits.includes(L))),N(T)):m&&d.initialHits.includes(x)&&a(u,d.interaction.filter(L=>!d.initialHits.includes(L)))}}r(_,u,y,S)}}return{handlePointer:o}}const Gq=n=>!!(n!=null&&n.render),l8=vt.createContext(null),zSe=(n,e)=>{const t=WJ((o,l)=>{const c=new Re,u=new Re,h=new Re;function d(y=l().camera,S=u,T=l().size){const{width:x,height:I,top:R,left:N}=T,L=x/I;S.isVector3?h.copy(S):h.set(...S);const k=y.getWorldPosition(c).distanceTo(h);if(sQ(y))return{width:x/y.zoom,height:I/y.zoom,top:R,left:N,factor:1,distance:k,aspect:L};{const z=y.fov*Math.PI/180,Z=2*Math.tan(z/2)*k,H=Z*(x/I);return{width:H,height:Z,top:R,left:N,factor:x/H,distance:k,aspect:L}}}let f;const m=y=>o(S=>({performance:{...S.performance,current:y}})),v=new gt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(y=1)=>n(l(),y),advance:(y,S)=>e(y,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Y6,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();f&&clearTimeout(f),y.performance.current!==y.performance.min&&m(y.performance.min),f=setTimeout(()=>m(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:y=>o(S=>({...S,events:{...S.events,...y}})),setSize:(y,S,T=0,x=0)=>{const I=l().camera,R={width:y,height:S,top:T,left:x};o(N=>({size:R,viewport:{...N.viewport,...d(I,u,R)}}))},setDpr:y=>o(S=>{const T=aQ(y);return{viewport:{...S.viewport,dpr:T,initialDpr:S.viewport.initialDpr||T}}}),setFrameloop:(y="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,y!=="never"&&(S.start(),S.elapsedTime=0),o(()=>({frameloop:y}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:vt.createRef(),active:!1,frames:0,priority:0,subscribe:(y,S,T)=>{const x=l().internal;return x.priority=x.priority+(S>0?1:0),x.subscribers.push({ref:y,priority:S,store:T}),x.subscribers=x.subscribers.sort((I,R)=>I.priority-R.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(S>0?1:0),I.subscribers=I.subscribers.filter(R=>R.ref!==y))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){r=l,s=c.dpr,lQ(o,l),c.dpr>0&&u.setPixelRatio(c.dpr);const d=typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,d)}o!==a&&(a=o,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function c8(){const n=vt.useContext(l8);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function md(n=t=>t,e){return c8()(n,e)}function mA(n,e=0){const t=c8(),i=t.getState().internal.subscribe,r=o8(n);return pA(()=>i(r,e,t),[e,i,t]),null}const qq=new WeakMap,jSe=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function uQ(n,e){return function(t,...i){let r;return jSe(t)?(r=qq.get(t),r||(r=new t,qq.set(t,r))):r=t,n&&n(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,l=>{kc(l==null?void 0:l.scene)&&Object.assign(l,ISe(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function hQ(n,e,t,i){const r=Array.isArray(e)?e:[e],s=eQ(uQ(t,i),[n,...r],{equal:Ws.equ});return Array.isArray(e)?s:s[0]}hQ.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return bSe(uQ(t),[n,...i])};hQ.clear=function(n,e){const t=Array.isArray(e)?e:[e];return SSe([n,...t])};function HSe(n){const e=ySe(n);return e.injectIntoDevTools({bundleType:(typeof ss<"u",0),rendererPackageName:"@react-three/fiber",version:vt.version}),e}const dQ=0,wT={},VSe=/^three(?=[A-Z])/,B2=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let GSe=0;const qSe=n=>typeof n=="function";function u8(n){if(qSe(n)){const e=`${GSe++}`;return wT[e]=n,e}else Object.assign(wT,n)}function fQ(n,e){const t=B2(n),i=wT[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function $Se(n,e,t){var i;return n=B2(n)in wT?n:n.replace(VSe,""),fQ(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,fN(e.object,t,n,e)}function WSe(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?mN(n.parent,n):kc(n.object)&&(n.object.visible=!1),n.isHidden=!0,wx(n)}}function pQ(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?pN(n.parent,n):kc(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,wx(n)}}function h8(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const a=wT[B2(e.type)];e.object=(r=e.props.object)!=null?r:new a(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(ay(e.object,e.props),e.props.attach)pN(n,e);else if(kc(e.object)&&kc(n.object)){const a=n.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const l=o<a?a-1:a;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const a of e.children)h8(e,a);wx(e)}}function q3(n,e){e&&(e.parent=n,n.children.push(e),h8(n,e))}function $q(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),h8(n,e,t)}function mQ(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():T4.unstable_scheduleCallback(T4.unstable_IdlePriority,e)}}function w4(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?mN(n,e):kc(e.object)&&kc(n.object)&&(n.object.remove(e.object),BSe(rQ(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const a=e.children[s];w4(e,a,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&mQ(e.object),t===void 0&&wx(e)}function YSe(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const MO=[];function XSe(){for(const[t]of MO){const i=t.parent;if(i){t.props.attach?mN(i,t):kc(t.object)&&kc(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?mN(t,r):kc(r.object)&&kc(t.object)&&t.object.remove(r.object)}t.isHidden&&pQ(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&mQ(t.object)}for(const[t,i,r]of MO){t.props=i;const s=t.parent;if(s){var n,e;const a=wT[B2(t.type)];t.object=(n=t.props.object)!=null?n:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,YSe(r,t.object),ay(t.object,t.props),t.props.attach?pN(s,t):kc(t.object)&&kc(s.object)&&s.object.add(t.object);for(const o of t.children)o.props.attach?pN(t,o):kc(o.object)&&kc(t.object)&&t.object.add(o.object);wx(t)}}MO.length=0}const $3=()=>{},Wq={};let SR=dQ;const KSe=0,ZSe=4,gN=HSe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:$Se,removeChild:w4,appendChild:q3,appendInitialChild:q3,insertBefore:$q,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||q3(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||w4(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||$q(i,e,t)},getRootHostContext:()=>Wq,getChildHostContext:()=>Wq,commitUpdate(n,e,t,i,r){var s,a,o;fQ(e,i);let l=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((a=t.args)==null?void 0:a.length)||(o=i.args)!=null&&o.some((u,h)=>{var d;return u!==((d=t.args)==null?void 0:d[h])}))&&(l=!0),l)MO.push([n,{...i},r]);else{const u=kSe(n,i);Object.keys(u).length&&(Object.assign(n.props,u),ay(n.object,u))}(r.sibling===null||(r.flags&ZSe)===KSe)&&XSe()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>fN(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:WSe,unhideInstance:pQ,createTextInstance:$3,hideTextInstance:$3,unhideTextInstance:$3,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:vt.createContext(null),setCurrentUpdatePriority(n){SR=n},getCurrentUpdatePriority(){return SR},resolveUpdatePriority(){var n;if(SR!==dQ)return SR;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return AO.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return AO.ContinuousEventPriority;default:return AO.DefaultEventPriority}},resetFormInstance(){}}),fb=new Map,YS={objects:"shallow",strict:!1};function JSe(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function QSe(n){const e=fb.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||zSe(M4,Xq),a=t||gN.createContainer(s,AO.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||fb.set(n,{fiber:a,store:s});let o,l,c=!1,u=null;return{async configure(h={}){let d;u=new Promise(se=>d=se);let{gl:f,size:m,scene:v,events:_,onCreated:y,shadows:S=!1,linear:T=!1,flat:x=!1,legacy:I=!1,orthographic:R=!1,frameloop:N="always",dpr:L=[1,2],performance:k,raycaster:z,camera:Z,onPointerMissed:H}=h,q=s.getState(),U=q.gl;if(!q.gl){const se={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ue=typeof f=="function"?await f(se):f;Gq(ue)?U=ue:U=new DJ({...se,...f}),q.set({gl:U})}let ee=q.raycaster;ee||q.set({raycaster:ee=new Z6});const{params:W,...Q}=z||{};if(Ws.equ(Q,ee,YS)||ay(ee,{...Q}),Ws.equ(W,ee.params,YS)||ay(ee,{params:{...ee.params,...W}}),!q.camera||q.camera===l&&!Ws.equ(l,Z,YS)){l=Z;const se=Z==null?void 0:Z.isCamera,ue=se?Z:R?new Ex(0,0,0,0,.1,1e3):new ko(75,0,.1,1e3);se||(ue.position.z=5,Z&&(ay(ue,Z),ue.manual||("aspect"in Z||"left"in Z||"right"in Z||"bottom"in Z||"top"in Z)&&(ue.manual=!0,ue.updateProjectionMatrix())),!q.camera&&!(Z!=null&&Z.rotation)&&ue.lookAt(0,0,0)),q.set({camera:ue}),ee.camera=ue}if(!q.scene){let se;v!=null&&v.isScene?(se=v,fN(se,s,"",{})):(se=new bT,fN(se,s,"",{}),v&&ay(se,v)),q.set({scene:se})}_&&!q.events.handlers&&q.set({events:_(s)});const X=JSe(n,m);if(Ws.equ(X,q.size,YS)||q.setSize(X.width,X.height,X.top,X.left),L&&q.viewport.dpr!==aQ(L)&&q.setDpr(L),q.frameloop!==N&&q.setFrameloop(N),q.onPointerMissed||q.set({onPointerMissed:H}),k&&!Ws.equ(k,q.performance,YS)&&q.set(se=>({performance:{...se.performance,...k}})),!q.xr){var Y;const se=(ve,_e)=>{const Le=s.getState();Le.frameloop!=="never"&&Xq(ve,!0,Le,_e)},ue=()=>{const ve=s.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?se:null),ve.gl.xr.isPresenting||M4(ve)},Ne={connect(){const ve=s.getState().gl;ve.xr.addEventListener("sessionstart",ue),ve.xr.addEventListener("sessionend",ue)},disconnect(){const ve=s.getState().gl;ve.xr.removeEventListener("sessionstart",ue),ve.xr.removeEventListener("sessionend",ue)}};typeof((Y=U.xr)==null?void 0:Y.addEventListener)=="function"&&Ne.connect(),q.set({xr:Ne})}if(U.shadowMap){const se=U.shadowMap.enabled,ue=U.shadowMap.type;if(U.shadowMap.enabled=!!S,Ws.boo(S))U.shadowMap.type=aw;else if(Ws.str(S)){var ae;const Ne={basic:FK,percentage:s2,soft:aw,variance:Jd};U.shadowMap.type=(ae=Ne[S])!=null?ae:aw}else Ws.obj(S)&&Object.assign(U.shadowMap,S);(se!==U.shadowMap.enabled||ue!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}return or.enabled=!I,c||(U.outputColorSpace=T?Pp:Mr,U.toneMapping=x?lf:g6),q.legacy!==I&&q.set(()=>({legacy:I})),q.linear!==T&&q.set(()=>({linear:T})),q.flat!==x&&q.set(()=>({flat:x})),f&&!Ws.fun(f)&&!Gq(f)&&!Ws.equ(f,U,YS)&&ay(U,f),o=y,c=!0,d(),this},render(h){return!c&&!u&&this.configure(),u.then(()=>{gN.updateContainer($a.jsx(eEe,{store:s,children:h,onCreated:o,rootElement:n}),a,null,()=>{})}),s},unmount(){gQ(n)}}}function eEe({store:n,children:e,onCreated:t,rootElement:i}){return pA(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),$a.jsx(l8.Provider,{value:n,children:e})}function gQ(n,e){const t=fb.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),gN.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),NSe(r.scene),fb.delete(n)}catch{}},500)})}}function tEe(n,e,t){return $a.jsx(nEe,{children:n,container:e,state:t})}function nEe({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=c8(),[o]=vt.useState(()=>new Z6),[l]=vt.useState(()=>new gt),c=o8((h,d)=>{let f;if(d.camera&&r){const m=d.camera;f=h.viewport.getCurrentViewport(m,new Re,r),m!==h.camera&&lQ(m,r)}return{...h,...d,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...d.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...f},setEvents:m=>d.set(v=>({...v,events:{...v.events,...m}}))}}),u=vt.useMemo(()=>{const h=WJ((f,m)=>({...s,set:f,get:m})),d=f=>h.setState(m=>c.current(f,m));return d(a.getState()),a.subscribe(d),h},[a,t]);return $a.jsx($a.Fragment,{children:gN.createPortal($a.jsx(l8.Provider,{value:u,children:e}),u,null)})}function vQ(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}const yQ=new Set,_Q=new Set,iEe=new Set,mst=n=>vQ(n,yQ),gst=n=>vQ(n,_Q);function W3(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function gw(n,e){switch(n){case"before":return W3(yQ,e);case"after":return W3(_Q,e);case"tail":return W3(iEe,e)}}let Y3,X3;function C4(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Y3=e.internal.subscribers;for(let r=0;r<Y3.length;r++)X3=Y3[r],X3.ref.current(X3.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let vN=!1,A4=!1,K3,Yq,XS;function bQ(n){Yq=requestAnimationFrame(bQ),vN=!0,K3=0,gw("before",n),A4=!0;for(const t of fb.values()){var e;XS=t.store.getState(),XS.internal.active&&(XS.frameloop==="always"||XS.internal.frames>0)&&!((e=XS.gl.xr)!=null&&e.isPresenting)&&(K3+=C4(n,XS))}if(A4=!1,gw("after",n),K3===0)return gw("tail",n),vN=!1,cancelAnimationFrame(Yq)}function M4(n,e=1){var t;if(!n)return fb.forEach(i=>M4(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):A4?n.internal.frames=2:n.internal.frames=1,vN||(vN=!0,requestAnimationFrame(bQ)))}function Xq(n,e=!0,t,i){if(e&&gw("before",n),t)C4(n,t,i);else for(const r of fb.values())C4(n,r.store.getState());e&&gw("after",n)}const Z3={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function rEe(n){const{handlePointer:e}=FSe(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Z3).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const a=r.handlers[s],[o,l]=Z3[s];t.addEventListener(o,a,{passive:l})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[a]=Z3[r];i.connected.removeEventListener(a,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function Kq(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function sEe({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=vt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=vt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=vt.useRef(!1);vt.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,d,f]=vt.useMemo(()=>{const y=()=>{if(!o.current.element)return;const{left:S,top:T,width:x,height:I,bottom:R,right:N,x:L,y:k}=o.current.element.getBoundingClientRect(),z={left:S,top:T,width:x,height:I,bottom:R,right:N,x:L,y:k};o.current.element instanceof HTMLElement&&i&&(z.height=o.current.element.offsetHeight,z.width=o.current.element.offsetWidth),Object.freeze(z),u.current&&!cEe(o.current.lastBounds,z)&&a(o.current.lastBounds=z)};return[y,c?Kq(y,c):y,l?Kq(y,l):y]},[a,i,l,c]);function m(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",f,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function v(){o.current.element&&(o.current.resizeObserver=new r(f),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(y=>y.addEventListener("scroll",f,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const _=y=>{!y||y===o.current.element||(m(),o.current.element=y,o.current.scrollContainers=SQ(y),v())};return oEe(f,!!e),aEe(d),vt.useEffect(()=>{m(),v()},[e,f,d]),vt.useEffect(()=>m,[]),[_,s,h]}function aEe(n){vt.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function oEe(n,e){vt.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function SQ(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...SQ(n.parentElement)]}const lEe=["x","y","top","bottom","left","right","width","height"],cEe=(n,e)=>lEe.every(t=>n[t]===e[t]);function uEe({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:a=rEe,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:m,dpr:v,performance:_,raycaster:y,camera:S,scene:T,onPointerMissed:x,onCreated:I,...R}){vt.useMemo(()=>u8(Obe),[]);const N=MSe(),[L,k]=sEe({scroll:!0,debounce:{scroll:50,resize:0},...i}),z=vt.useRef(null),Z=vt.useRef(null);vt.useImperativeHandle(n,()=>z.current);const H=o8(x),[q,U]=vt.useState(!1),[ee,W]=vt.useState(!1);if(q)throw q;if(ee)throw ee;const Q=vt.useRef(null);pA(()=>{const Y=z.current;if(k.width>0&&k.height>0&&Y){Q.current||(Q.current=QSe(Y));async function ae(){await Q.current.configure({gl:s,scene:T,events:a,shadows:c,linear:u,flat:h,legacy:d,orthographic:f,frameloop:m,dpr:v,performance:_,raycaster:y,camera:S,size:k,onPointerMissed:(...se)=>H.current==null?void 0:H.current(...se),onCreated:se=>{se.events.connect==null||se.events.connect(o?CSe(o)?o.current:o:Z.current),l&&se.setEvents({compute:(ue,Ne)=>{const ve=ue[l+"X"],_e=ue[l+"Y"];Ne.pointer.set(ve/Ne.size.width*2-1,-(_e/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),I==null||I(se)}}),Q.current.render($a.jsx(N,{children:$a.jsx(OSe,{set:W,children:$a.jsx(vt.Suspense,{fallback:$a.jsx(RSe,{set:U}),children:e??null})})}))}ae()}}),vt.useEffect(()=>{const Y=z.current;if(Y)return()=>gQ(Y)},[]);const X=o?"none":"auto";return $a.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...r},...R,children:$a.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:$a.jsx("canvas",{ref:z,style:{display:"block"},children:t})})})}function vst(n){return $a.jsx(nQ,{children:$a.jsx(uEe,{...n})})}var d8={exports:{}};function EQ(n,e=100,t={}){if(typeof n!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof n}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");const{immediate:i}=typeof t=="boolean"?{immediate:t}:t;let r,s,a,o,l;function c(){const d=r,f=s;return r=void 0,s=void 0,l=n.apply(d,f),l}function u(){const d=Date.now()-o;d<e&&d>=0?a=setTimeout(u,e-d):(a=void 0,i||(l=c()))}const h=function(...d){if(r&&this!==r&&Object.getPrototypeOf(this)===Object.getPrototypeOf(r))throw new Error("Debounced method called with different contexts of the same prototype.");r=this,s=d,o=Date.now();const f=i&&!a;return a||(a=setTimeout(u,e)),f&&(l=c()),l};return Object.defineProperty(h,"isPending",{get(){return a!==void 0}}),h.clear=()=>{a&&(clearTimeout(a),a=void 0)},h.flush=()=>{a&&h.trigger()},h.trigger=()=>{l=c(),h.clear()},h}d8.exports.debounce=EQ;d8.exports=EQ;var hEe=d8.exports;const yst=Dl(hEe);var TQ={exports:{}},F2={},xQ={exports:{}},wQ={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,Q){var X=W.length;W.push(Q);e:for(;0<X;){var Y=X-1>>>1,ae=W[Y];if(0<r(ae,Q))W[Y]=Q,W[X]=ae,X=Y;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Q=W[0],X=W.pop();if(X!==Q){W[0]=X;e:for(var Y=0,ae=W.length,se=ae>>>1;Y<se;){var ue=2*(Y+1)-1,Ne=W[ue],ve=ue+1,_e=W[ve];if(0>r(Ne,X))ve<ae&&0>r(_e,Ne)?(W[Y]=_e,W[ve]=X,Y=ve):(W[Y]=Ne,W[ue]=X,Y=ue);else if(ve<ae&&0>r(_e,X))W[Y]=_e,W[ve]=X,Y=ve;else break e}}return Q}function r(W,Q){var X=W.sortIndex-Q.sortIndex;return X!==0?X:W.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,h=null,d=3,f=!1,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function x(W){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=W)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function I(W){if(v=!1,x(W),!m)if(t(l)!==null)m=!0,R||(R=!0,H());else{var Q=t(c);Q!==null&&ee(I,Q.startTime-W)}}var R=!1,N=-1,L=5,k=-1;function z(){return _?!0:!(n.unstable_now()-k<L)}function Z(){if(_=!1,R){var W=n.unstable_now();k=W;var Q=!0;try{e:{m=!1,v&&(v=!1,S(N),N=-1),f=!0;var X=d;try{t:{for(x(W),h=t(l);h!==null&&!(h.expirationTime>W&&z());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,d=h.priorityLevel;var ae=Y(h.expirationTime<=W);if(W=n.unstable_now(),typeof ae=="function"){h.callback=ae,x(W),Q=!0;break t}h===t(l)&&i(l),x(W)}else i(l);h=t(l)}if(h!==null)Q=!0;else{var se=t(c);se!==null&&ee(I,se.startTime-W),Q=!1}}break e}finally{h=null,d=X,f=!1}Q=void 0}}finally{Q?H():R=!1}}}var H;if(typeof T=="function")H=function(){T(Z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,U=q.port2;q.port1.onmessage=Z,H=function(){U.postMessage(null)}}else H=function(){y(Z,0)};function ee(W,Q){N=y(function(){W(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_next=function(W){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var X=d;d=Q;try{return W()}finally{d=X}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=d;d=W;try{return Q()}finally{d=X}},n.unstable_scheduleCallback=function(W,Q,X){var Y=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Y+X:Y):X=Y,W){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=X+ae,W={id:u++,callback:Q,priorityLevel:W,startTime:X,expirationTime:ae,sortIndex:-1},X>Y?(W.sortIndex=X,e(c,W),t(l)===null&&W===t(c)&&(v?(S(N),N=-1):v=!0,ee(I,X-Y))):(W.sortIndex=ae,e(l,W),m||f||(m=!0,R||(R=!0,H()))),W},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(W){var Q=d;return function(){var X=d;d=Q;try{return W.apply(this,arguments)}finally{d=X}}}})(wQ);xQ.exports=wQ;var dEe=xQ.exports,CQ={exports:{}},qc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fEe=vt;function AQ(n){var e="https://react.dev/errors/"+n;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Fv(){}var Fc={d:{f:Fv,r:function(){throw Error(AQ(522))},D:Fv,C:Fv,L:Fv,m:Fv,X:Fv,S:Fv,M:Fv},p:0,findDOMNode:null},pEe=Symbol.for("react.portal");function mEe(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pEe,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}var vw=fEe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function z2(n,e){if(n==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}qc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Fc;qc.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(AQ(299));return mEe(n,e,null,t)};qc.flushSync=function(n){var e=vw.T,t=Fc.p;try{if(vw.T=null,Fc.p=2,n)return n()}finally{vw.T=e,Fc.p=t,Fc.d.f()}};qc.preconnect=function(n,e){typeof n=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Fc.d.C(n,e))};qc.prefetchDNS=function(n){typeof n=="string"&&Fc.d.D(n)};qc.preinit=function(n,e){if(typeof n=="string"&&e&&typeof e.as=="string"){var t=e.as,i=z2(t,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;t==="style"?Fc.d.S(n,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):t==="script"&&Fc.d.X(n,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};qc.preinitModule=function(n,e){if(typeof n=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var t=z2(e.as,e.crossOrigin);Fc.d.M(n,{crossOrigin:t,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Fc.d.M(n)};qc.preload=function(n,e){if(typeof n=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var t=e.as,i=z2(t,e.crossOrigin);Fc.d.L(n,t,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};qc.preloadModule=function(n,e){if(typeof n=="string")if(e){var t=z2(e.as,e.crossOrigin);Fc.d.m(n,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:t,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Fc.d.m(n)};qc.requestFormReset=function(n){Fc.d.r(n)};qc.unstable_batchedUpdates=function(n,e){return n(e)};qc.useFormState=function(n,e,t){return vw.H.useFormState(n,e,t)};qc.useFormStatus=function(){return vw.H.useHostTransitionStatus()};qc.version="19.1.0";function MQ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MQ)}catch(n){console.error(n)}}MQ(),CQ.exports=qc;var gEe=CQ.exports,Go=dEe,RQ=vt,vEe=gEe;function Dt(n){var e="https://react.dev/errors/"+n;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function OQ(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gA(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function IQ(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Zq(n){if(gA(n)!==n)throw Error(Dt(188))}function yEe(n){var e=n.alternate;if(!e){if(e=gA(n),e===null)throw Error(Dt(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Zq(r),n;if(s===i)return Zq(r),e;s=s.sibling}throw Error(Dt(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(Dt(189))}}if(t.alternate!==i)throw Error(Dt(190))}if(t.tag!==3)throw Error(Dt(188));return t.stateNode.current===t?n:e}function NQ(n){var e=n.tag;if(e===5||e===26||e===27||e===6)return n;for(n=n.child;n!==null;){if(e=NQ(n),e!==null)return e;n=n.sibling}return null}var Fs=Object.assign,_Ee=Symbol.for("react.element"),ER=Symbol.for("react.transitional.element"),W1=Symbol.for("react.portal"),CE=Symbol.for("react.fragment"),PQ=Symbol.for("react.strict_mode"),R4=Symbol.for("react.profiler"),bEe=Symbol.for("react.provider"),DQ=Symbol.for("react.consumer"),mg=Symbol.for("react.context"),f8=Symbol.for("react.forward_ref"),O4=Symbol.for("react.suspense"),I4=Symbol.for("react.suspense_list"),p8=Symbol.for("react.memo"),Jv=Symbol.for("react.lazy"),N4=Symbol.for("react.activity"),SEe=Symbol.for("react.memo_cache_sentinel"),Jq=Symbol.iterator;function T1(n){return n===null||typeof n!="object"?null:(n=Jq&&n[Jq]||n["@@iterator"],typeof n=="function"?n:null)}var EEe=Symbol.for("react.client.reference");function P4(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===EEe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case CE:return"Fragment";case R4:return"Profiler";case PQ:return"StrictMode";case O4:return"Suspense";case I4:return"SuspenseList";case N4:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case W1:return"Portal";case mg:return(n.displayName||"Context")+".Provider";case DQ:return(n._context.displayName||"Context")+".Consumer";case f8:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case p8:return e=n.displayName||null,e!==null?e:P4(n.type)||"Memo";case Jv:e=n._payload,n=n._init;try{return P4(n(e))}catch{}}return null}var Y1=Array.isArray,pi=RQ.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fr=vEe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W_={pending:!1,data:null,method:null,action:null},D4=[],AE=-1;function Hp(n){return{current:n}}function fl(n){0>AE||(n.current=D4[AE],D4[AE]=null,AE--)}function Zs(n,e){AE++,D4[AE]=n.current,n.current=e}var xp=Hp(null),oC=Hp(null),by=Hp(null),yN=Hp(null);function _N(n,e){switch(Zs(by,e),Zs(oC,n),Zs(xp,null),e.nodeType){case 9:case 11:n=(n=e.documentElement)&&(n=n.namespaceURI)?i9(n):0;break;default:if(n=e.tagName,e=e.namespaceURI)e=i9(e),n=Zte(e,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}fl(xp),Zs(xp,n)}function CT(){fl(xp),fl(oC),fl(by)}function k4(n){n.memoizedState!==null&&Zs(yN,n);var e=xp.current,t=Zte(e,n.type);e!==t&&(Zs(oC,n),Zs(xp,t))}function bN(n){oC.current===n&&(fl(xp),fl(oC)),yN.current===n&&(fl(yN),vC._currentValue=W_)}var L4=Object.prototype.hasOwnProperty,m8=Go.unstable_scheduleCallback,J3=Go.unstable_cancelCallback,TEe=Go.unstable_shouldYield,xEe=Go.unstable_requestPaint,wp=Go.unstable_now,wEe=Go.unstable_getCurrentPriorityLevel,kQ=Go.unstable_ImmediatePriority,LQ=Go.unstable_UserBlockingPriority,SN=Go.unstable_NormalPriority,CEe=Go.unstable_LowPriority,UQ=Go.unstable_IdlePriority,AEe=Go.log,MEe=Go.unstable_setDisableYieldValue,vA=null,yh=null;function fy(n){if(typeof AEe=="function"&&MEe(n),yh&&typeof yh.setStrictMode=="function")try{yh.setStrictMode(vA,n)}catch{}}var _h=Math.clz32?Math.clz32:IEe,REe=Math.log,OEe=Math.LN2;function IEe(n){return n>>>=0,n===0?32:31-(REe(n)/OEe|0)|0}var TR=256,xR=4194304;function T_(n){var e=n&42;if(e!==0)return e;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function j2(n,e,t){var i=n.pendingLanes;if(i===0)return 0;var r=0,s=n.suspendedLanes,a=n.pingedLanes;n=n.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=T_(i):(a&=o,a!==0?r=T_(a):t||(t=o&~n,t!==0&&(r=T_(t))))):(o=i&~s,o!==0?r=T_(o):a!==0?r=T_(a):t||(t=i&~n,t!==0&&(r=T_(t)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,t=e&-e,s>=t||s===32&&(t&4194048)!==0)?e:r}function yA(n,e){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&e)===0}function NEe(n,e){switch(n){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BQ(){var n=TR;return TR<<=1,!(TR&4194048)&&(TR=256),n}function FQ(){var n=xR;return xR<<=1,!(xR&62914560)&&(xR=4194304),n}function Q3(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function _A(n,e){n.pendingLanes|=e,e!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function PEe(n,e,t,i,r,s){var a=n.pendingLanes;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=t,n.entangledLanes&=t,n.errorRecoveryDisabledLanes&=t,n.shellSuspendCounter=0;var o=n.entanglements,l=n.expirationTimes,c=n.hiddenUpdates;for(t=a&~t;0<t;){var u=31-_h(t),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(d!==null)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];f!==null&&(f.lane&=-536870913)}t&=~h}i!==0&&zQ(n,i,0),s!==0&&r===0&&n.tag!==0&&(n.suspendedLanes|=s&~(a&~e))}function zQ(n,e,t){n.pendingLanes|=e,n.suspendedLanes&=~e;var i=31-_h(e);n.entangledLanes|=e,n.entanglements[i]=n.entanglements[i]|1073741824|t&4194090}function jQ(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-_h(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}function g8(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function v8(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function HQ(){var n=Fr.p;return n!==0?n:(n=window.event,n===void 0?32:one(n.type))}function DEe(n,e){var t=Fr.p;try{return Fr.p=n,e()}finally{Fr.p=t}}var l0=Math.random().toString(36).slice(2),Jl="__reactFiber$"+l0,Ou="__reactProps$"+l0,Cx="__reactContainer$"+l0,U4="__reactEvents$"+l0,kEe="__reactListeners$"+l0,LEe="__reactHandles$"+l0,Qq="__reactResources$"+l0,bA="__reactMarker$"+l0;function y8(n){delete n[Jl],delete n[Ou],delete n[U4],delete n[kEe],delete n[LEe]}function ME(n){var e=n[Jl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Cx]||t[Jl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=a9(n);n!==null;){if(t=n[Jl])return t;n=a9(n)}return e}n=t,t=n.parentNode}return null}function Ax(n){if(n=n[Jl]||n[Cx]){var e=n.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return n}return null}function X1(n){var e=n.tag;if(e===5||e===26||e===27||e===6)return n.stateNode;throw Error(Dt(33))}function qE(n){var e=n[Qq];return e||(e=n[Qq]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function hl(n){n[bA]=!0}var VQ=new Set,GQ={};function Fb(n,e){AT(n,e),AT(n+"Capture",e)}function AT(n,e){for(GQ[n]=e,n=0;n<e.length;n++)VQ.add(e[n])}var UEe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),e7={},t7={};function BEe(n){return L4.call(t7,n)?!0:L4.call(e7,n)?!1:UEe.test(n)?t7[n]=!0:(e7[n]=!0,!1)}function RO(n,e,t){if(BEe(e))if(t===null)n.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":n.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(e);return}}n.setAttribute(e,""+t)}}function wR(n,e,t){if(t===null)n.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttribute(e,""+t)}}function Qm(n,e,t,i){if(i===null)n.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttributeNS(e,t,""+i)}}var eB,n7;function dE(n){if(eB===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);eB=e&&e[1]||"",n7=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+eB+n+n7}var tB=!1;function nB(n,e){if(!n||tB)return"";tB=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(f){var d=f}Reflect.construct(n,[],h)}else{try{h.call()}catch(f){d=f}n.call(h.prototype)}}else{try{throw Error()}catch(f){d=f}(h=n())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(f){if(f&&d&&typeof f.stack=="string")return[f.stack,d.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=i&&0<=r);break}}}finally{tB=!1,Error.prepareStackTrace=t}return(t=n?n.displayName||n.name:"")?dE(t):""}function FEe(n){switch(n.tag){case 26:case 27:case 5:return dE(n.type);case 16:return dE("Lazy");case 13:return dE("Suspense");case 19:return dE("SuspenseList");case 0:case 15:return nB(n.type,!1);case 11:return nB(n.type.render,!1);case 1:return nB(n.type,!0);case 31:return dE("Activity");default:return""}}function i7(n){try{var e="";do e+=FEe(n),n=n.return;while(n);return e}catch(t){return`
Error generating stack: `+t.message+`
`+t.stack}}function ed(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qQ(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zEe(n){var e=qQ(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function EN(n){n._valueTracker||(n._valueTracker=zEe(n))}function $Q(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=qQ(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function TN(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var jEe=/[\n"\\]/g;function sd(n){return n.replace(jEe,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function B4(n,e,t,i,r,s,a,o){n.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?n.type=a:n.removeAttribute("type"),e!=null?a==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+ed(e)):n.value!==""+ed(e)&&(n.value=""+ed(e)):a!=="submit"&&a!=="reset"||n.removeAttribute("value"),e!=null?F4(n,a,ed(e)):t!=null?F4(n,a,ed(t)):i!=null&&n.removeAttribute("value"),r==null&&s!=null&&(n.defaultChecked=!!s),r!=null&&(n.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?n.name=""+ed(o):n.removeAttribute("name")}function WQ(n,e,t,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(n.type=s),e!=null||t!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;t=t!=null?""+ed(t):"",e=e!=null?""+ed(e):t,o||e===n.value||(n.value=e),n.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=o?n.checked:!!i,n.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(n.name=a)}function F4(n,e,t){e==="number"&&TN(n.ownerDocument)===n||n.defaultValue===""+t||(n.defaultValue=""+t)}function $E(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ed(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function YQ(n,e,t){if(e!=null&&(e=""+ed(e),e!==n.value&&(n.value=e),t==null)){n.defaultValue!==e&&(n.defaultValue=e);return}n.defaultValue=t!=null?""+ed(t):""}function XQ(n,e,t,i){if(e==null){if(i!=null){if(t!=null)throw Error(Dt(92));if(Y1(i)){if(1<i.length)throw Error(Dt(93));i=i[0]}t=i}t==null&&(t=""),e=t}t=ed(e),n.defaultValue=t,i=n.textContent,i===t&&i!==""&&i!==null&&(n.value=i)}function MT(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var HEe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function r7(n,e,t){var i=e.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?i?n.setProperty(e,""):e==="float"?n.cssFloat="":n[e]="":i?n.setProperty(e,t):typeof t!="number"||t===0||HEe.has(e)?e==="float"?n.cssFloat=t:n[e]=(""+t).trim():n[e]=t+"px"}function KQ(n,e,t){if(e!=null&&typeof e!="object")throw Error(Dt(62));if(n=n.style,t!=null){for(var i in t)!t.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&t[r]!==i&&r7(n,r,i)}else for(var s in e)e.hasOwnProperty(s)&&r7(n,s,e[s])}function _8(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VEe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GEe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function OO(n){return GEe.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var z4=null;function b8(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var RE=null,WE=null;function s7(n){var e=Ax(n);if(e&&(n=e.stateNode)){var t=n[Ou]||null;e:switch(n=e.stateNode,e.type){case"input":if(B4(n,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+sd(""+e)+'"][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=i[Ou]||null;if(!r)throw Error(Dt(90));B4(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<t.length;e++)i=t[e],i.form===n.form&&$Q(i)}break e;case"textarea":YQ(n,t.value,t.defaultValue);break e;case"select":e=t.value,e!=null&&$E(n,!!t.multiple,e,!1)}}}var iB=!1;function ZQ(n,e,t){if(iB)return n(e,t);iB=!0;try{var i=n(e);return i}finally{if(iB=!1,(RE!==null||WE!==null)&&(Z2(),RE&&(e=RE,n=WE,WE=RE=null,s7(e),n)))for(e=0;e<n.length;e++)s7(n[e])}}function lC(n,e){var t=n.stateNode;if(t===null)return null;var i=t[Ou]||null;if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Dt(231,e,typeof t));return t}var Pg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j4=!1;if(Pg)try{var x1={};Object.defineProperty(x1,"passive",{get:function(){j4=!0}}),window.addEventListener("test",x1,x1),window.removeEventListener("test",x1,x1)}catch{j4=!1}var py=null,S8=null,IO=null;function JQ(){if(IO)return IO;var n,e=S8,t=e.length,i,r="value"in py?py.value:py.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return IO=r.slice(n,1<i?1-i:void 0)}function NO(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function CR(){return!0}function a7(){return!1}function Fu(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?CR:a7,this.isPropagationStopped=a7,this}return Fs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=CR)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=CR)},persist:function(){},isPersistent:CR}),e}var zb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H2=Fu(zb),SA=Fs({},zb,{view:0,detail:0}),qEe=Fu(SA),rB,sB,w1,V2=Fs({},SA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E8,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==w1&&(w1&&n.type==="mousemove"?(rB=n.screenX-w1.screenX,sB=n.screenY-w1.screenY):sB=rB=0,w1=n),rB)},movementY:function(n){return"movementY"in n?n.movementY:sB}}),o7=Fu(V2),$Ee=Fs({},V2,{dataTransfer:0}),WEe=Fu($Ee),YEe=Fs({},SA,{relatedTarget:0}),aB=Fu(YEe),XEe=Fs({},zb,{animationName:0,elapsedTime:0,pseudoElement:0}),KEe=Fu(XEe),ZEe=Fs({},zb,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),JEe=Fu(ZEe),QEe=Fs({},zb,{data:0}),l7=Fu(QEe),eTe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tTe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nTe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iTe(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=nTe[n])?!!e[n]:!1}function E8(){return iTe}var rTe=Fs({},SA,{key:function(n){if(n.key){var e=eTe[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=NO(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tTe[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E8,charCode:function(n){return n.type==="keypress"?NO(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?NO(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sTe=Fu(rTe),aTe=Fs({},V2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c7=Fu(aTe),oTe=Fs({},SA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E8}),lTe=Fu(oTe),cTe=Fs({},zb,{propertyName:0,elapsedTime:0,pseudoElement:0}),uTe=Fu(cTe),hTe=Fs({},V2,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dTe=Fu(hTe),fTe=Fs({},zb,{newState:0,oldState:0}),pTe=Fu(fTe),mTe=[9,13,27,32],T8=Pg&&"CompositionEvent"in window,yw=null;Pg&&"documentMode"in document&&(yw=document.documentMode);var gTe=Pg&&"TextEvent"in window&&!yw,QQ=Pg&&(!T8||yw&&8<yw&&11>=yw),u7=" ",h7=!1;function eee(n,e){switch(n){case"keyup":return mTe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tee(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var OE=!1;function vTe(n,e){switch(n){case"compositionend":return tee(e);case"keypress":return e.which!==32?null:(h7=!0,u7);case"textInput":return n=e.data,n===u7&&h7?null:n;default:return null}}function yTe(n,e){if(OE)return n==="compositionend"||!T8&&eee(n,e)?(n=JQ(),IO=S8=py=null,OE=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QQ&&e.locale!=="ko"?null:e.data;default:return null}}var _Te={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d7(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_Te[n.type]:e==="textarea"}function nee(n,e,t,i){RE?WE?WE.push(i):WE=[i]:RE=i,e=jN(e,"onChange"),0<e.length&&(t=new H2("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var _w=null,cC=null;function bTe(n){Yte(n,0)}function G2(n){var e=X1(n);if($Q(e))return n}function f7(n,e){if(n==="change")return e}var iee=!1;if(Pg){var oB;if(Pg){var lB="oninput"in document;if(!lB){var p7=document.createElement("div");p7.setAttribute("oninput","return;"),lB=typeof p7.oninput=="function"}oB=lB}else oB=!1;iee=oB&&(!document.documentMode||9<document.documentMode)}function m7(){_w&&(_w.detachEvent("onpropertychange",ree),cC=_w=null)}function ree(n){if(n.propertyName==="value"&&G2(cC)){var e=[];nee(e,cC,n,b8(n)),ZQ(bTe,e)}}function STe(n,e,t){n==="focusin"?(m7(),_w=e,cC=t,_w.attachEvent("onpropertychange",ree)):n==="focusout"&&m7()}function ETe(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return G2(cC)}function TTe(n,e){if(n==="click")return G2(e)}function xTe(n,e){if(n==="input"||n==="change")return G2(e)}function wTe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var xh=typeof Object.is=="function"?Object.is:wTe;function uC(n,e){if(xh(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!L4.call(e,r)||!xh(n[r],e[r]))return!1}return!0}function g7(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function v7(n,e){var t=g7(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=g7(t)}}function see(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?see(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function aee(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var e=TN(n.document);e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=TN(n.document)}return e}function x8(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}var CTe=Pg&&"documentMode"in document&&11>=document.documentMode,IE=null,H4=null,bw=null,V4=!1;function y7(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;V4||IE==null||IE!==TN(i)||(i=IE,"selectionStart"in i&&x8(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),bw&&uC(bw,i)||(bw=i,i=jN(H4,"onSelect"),0<i.length&&(e=new H2("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=IE)))}function v_(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var NE={animationend:v_("Animation","AnimationEnd"),animationiteration:v_("Animation","AnimationIteration"),animationstart:v_("Animation","AnimationStart"),transitionrun:v_("Transition","TransitionRun"),transitionstart:v_("Transition","TransitionStart"),transitioncancel:v_("Transition","TransitionCancel"),transitionend:v_("Transition","TransitionEnd")},cB={},oee={};Pg&&(oee=document.createElement("div").style,"AnimationEvent"in window||(delete NE.animationend.animation,delete NE.animationiteration.animation,delete NE.animationstart.animation),"TransitionEvent"in window||delete NE.transitionend.transition);function jb(n){if(cB[n])return cB[n];if(!NE[n])return n;var e=NE[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in oee)return cB[n]=e[t];return n}var lee=jb("animationend"),cee=jb("animationiteration"),uee=jb("animationstart"),ATe=jb("transitionrun"),MTe=jb("transitionstart"),RTe=jb("transitioncancel"),hee=jb("transitionend"),dee=new Map,G4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");G4.push("scrollEnd");function Sf(n,e){dee.set(n,e),Fb(e,[n])}var _7=new WeakMap;function ad(n,e){if(typeof n=="object"&&n!==null){var t=_7.get(n);return t!==void 0?t:(e={value:n,source:e,stack:i7(e)},_7.set(n,e),e)}return{value:n,source:e,stack:i7(e)}}var Jh=[],PE=0,w8=0;function q2(){for(var n=PE,e=w8=PE=0;e<n;){var t=Jh[e];Jh[e++]=null;var i=Jh[e];Jh[e++]=null;var r=Jh[e];Jh[e++]=null;var s=Jh[e];if(Jh[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&fee(t,r,s)}}function $2(n,e,t,i){Jh[PE++]=n,Jh[PE++]=e,Jh[PE++]=t,Jh[PE++]=i,w8|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function C8(n,e,t,i){return $2(n,e,t,i),xN(n)}function Mx(n,e){return $2(n,null,null,e),xN(n)}function fee(n,e,t){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t);for(var r=!1,s=n.return;s!==null;)s.childLanes|=t,i=s.alternate,i!==null&&(i.childLanes|=t),s.tag===22&&(n=s.stateNode,n===null||n._visibility&1||(r=!0)),n=s,s=s.return;return n.tag===3?(s=n.stateNode,r&&e!==null&&(r=31-_h(t),n=s.hiddenUpdates,i=n[r],i===null?n[r]=[e]:i.push(e),e.lane=t|536870912),s):null}function xN(n){if(50<Ow)throw Ow=0,hz=null,Error(Dt(185));for(var e=n.return;e!==null;)n=e,e=n.return;return n.tag===3?n.stateNode:null}var DE={};function OTe(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mh(n,e,t,i){return new OTe(n,e,t,i)}function A8(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wg(n,e){var t=n.alternate;return t===null?(t=mh(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&65011712,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t.refCleanup=n.refCleanup,t}function pee(n,e){n.flags&=65011714;var t=n.alternate;return t===null?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.type=t.type,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n}function PO(n,e,t,i,r,s){var a=0;if(i=n,typeof n=="function")A8(n)&&(a=1);else if(typeof n=="string")a=Nxe(n,t,xp.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N4:return n=mh(31,t,e,r),n.elementType=N4,n.lanes=s,n;case CE:return Y_(t.children,r,s,e);case PQ:a=8,r|=24;break;case R4:return n=mh(12,t,e,r|2),n.elementType=R4,n.lanes=s,n;case O4:return n=mh(13,t,e,r),n.elementType=O4,n.lanes=s,n;case I4:return n=mh(19,t,e,r),n.elementType=I4,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case bEe:case mg:a=10;break e;case DQ:a=9;break e;case f8:a=11;break e;case p8:a=14;break e;case Jv:a=16,i=null;break e}a=29,t=Error(Dt(130,n===null?"null":typeof n,"")),i=null}return e=mh(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Y_(n,e,t,i){return n=mh(7,n,i,e),n.lanes=t,n}function uB(n,e,t){return n=mh(6,n,null,e),n.lanes=t,n}function hB(n,e,t){return e=mh(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}var kE=[],LE=0,wN=null,CN=0,td=[],nd=0,X_=null,gg=1,vg="";function x_(n,e){kE[LE++]=CN,kE[LE++]=wN,wN=n,CN=e}function mee(n,e,t){td[nd++]=gg,td[nd++]=vg,td[nd++]=X_,X_=n;var i=gg;n=vg;var r=32-_h(i)-1;i&=~(1<<r),t+=1;var s=32-_h(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,gg=1<<32-_h(e)+r|t<<r|i,vg=s+n}else gg=1<<s|t<<r|i,vg=n}function M8(n){n.return!==null&&(x_(n,1),mee(n,1,0))}function R8(n){for(;n===wN;)wN=kE[--LE],kE[LE]=null,CN=kE[--LE],kE[LE]=null;for(;n===X_;)X_=td[--nd],td[nd]=null,vg=td[--nd],td[nd]=null,gg=td[--nd],td[nd]=null}var Bc=null,Ca=null,Ur=!1,K_=null,mp=!1,q4=Error(Dt(519));function pb(n){var e=Error(Dt(418,""));throw hC(ad(e,n)),q4}function b7(n){var e=n.stateNode,t=n.type,i=n.memoizedProps;switch(e[Jl]=n,e[Ou]=i,t){case"dialog":Ji("cancel",e),Ji("close",e);break;case"iframe":case"object":case"embed":Ji("load",e);break;case"video":case"audio":for(t=0;t<pC.length;t++)Ji(pC[t],e);break;case"source":Ji("error",e);break;case"img":case"image":case"link":Ji("error",e),Ji("load",e);break;case"details":Ji("toggle",e);break;case"input":Ji("invalid",e),WQ(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),EN(e);break;case"select":Ji("invalid",e);break;case"textarea":Ji("invalid",e),XQ(e,i.value,i.defaultValue,i.children),EN(e)}t=i.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||e.textContent===""+t||i.suppressHydrationWarning===!0||Kte(e.textContent,t)?(i.popover!=null&&(Ji("beforetoggle",e),Ji("toggle",e)),i.onScroll!=null&&Ji("scroll",e),i.onScrollEnd!=null&&Ji("scrollend",e),i.onClick!=null&&(e.onclick=eD),e=!0):e=!1,e||pb(n)}function S7(n){for(Bc=n.return;Bc;)switch(Bc.tag){case 5:case 13:mp=!1;return;case 27:case 3:mp=!0;return;default:Bc=Bc.return}}function C1(n){if(n!==Bc)return!1;if(!Ur)return S7(n),Ur=!0,!1;var e=n.tag,t;if((t=e!==3&&e!==27)&&((t=e===5)&&(t=n.type,t=!(t!=="form"&&t!=="button")||vz(n.type,n.memoizedProps)),t=!t),t&&Ca&&pb(n),S7(n),e===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Dt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8)if(t=n.data,t==="/$"){if(e===0){Ca=uf(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++;n=n.nextSibling}Ca=null}}else e===27?(e=Ca,c0(n.type)?(n=bz,bz=null,Ca=n):Ca=e):Ca=Bc?uf(n.stateNode.nextSibling):null;return!0}function EA(){Ca=Bc=null,Ur=!1}function E7(){var n=K_;return n!==null&&(bu===null?bu=n:bu.push.apply(bu,n),K_=null),n}function hC(n){K_===null?K_=[n]:K_.push(n)}var $4=Hp(null),Hb=null,yg=null;function oy(n,e,t){Zs($4,e._currentValue),e._currentValue=t}function Cg(n){n._currentValue=$4.current,fl($4)}function W4(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Y4(n,e,t,i){var r=n.child;for(r!==null&&(r.return=n);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=t,o=s.alternate,o!==null&&(o.lanes|=t),W4(s.return,t,n),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(Dt(341));a.lanes|=t,s=a.alternate,s!==null&&(s.lanes|=t),W4(a,t,n),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===n){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function TA(n,e,t,i){n=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(Dt(387));if(a=a.memoizedProps,a!==null){var o=r.type;xh(r.pendingProps.value,a.value)||(n!==null?n.push(o):n=[o])}}else if(r===yN.current){if(a=r.alternate,a===null)throw Error(Dt(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(n!==null?n.push(vC):n=[vC])}r=r.return}n!==null&&Y4(e,n,t,i),e.flags|=262144}function AN(n){for(n=n.firstContext;n!==null;){if(!xh(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function mb(n){Hb=n,yg=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ql(n){return gee(Hb,n)}function AR(n,e){return Hb===null&&mb(n),gee(n,e)}function gee(n,e){var t=e._currentValue;if(e={context:e,memoizedValue:t,next:null},yg===null){if(n===null)throw Error(Dt(308));yg=e,n.dependencies={lanes:0,firstContext:e},n.flags|=524288}else yg=yg.next=e;return t}var ITe=typeof AbortController<"u"?AbortController:function(){var n=[],e=this.signal={aborted:!1,addEventListener:function(t,i){n.push(i)}};this.abort=function(){e.aborted=!0,n.forEach(function(t){return t()})}},NTe=Go.unstable_scheduleCallback,PTe=Go.unstable_NormalPriority,Po={$$typeof:mg,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function O8(){return{controller:new ITe,data:new Map,refCount:0}}function xA(n){n.refCount--,n.refCount===0&&NTe(PTe,function(){n.controller.abort()})}var Sw=null,X4=0,RT=0,YE=null;function DTe(n,e){if(Sw===null){var t=Sw=[];X4=0,RT=Q8(),YE={status:"pending",value:void 0,then:function(i){t.push(i)}}}return X4++,e.then(T7,T7),e}function T7(){if(--X4===0&&Sw!==null){YE!==null&&(YE.status="fulfilled");var n=Sw;Sw=null,RT=0,YE=null;for(var e=0;e<n.length;e++)(0,n[e])()}}function kTe(n,e){var t=[],i={status:"pending",value:null,reason:null,then:function(r){t.push(r)}};return n.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<t.length;r++)(0,t[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<t.length;r++)(0,t[r])(void 0)}),i}var x7=pi.S;pi.S=function(n,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&DTe(n,e),x7!==null&&x7(n,e)};var Z_=Hp(null);function I8(){var n=Z_.current;return n!==null?n:Ts.pooledCache}function DO(n,e){e===null?Zs(Z_,Z_.current):Zs(Z_,e.pool)}function vee(){var n=I8();return n===null?null:{parent:Po._currentValue,pool:n}}var wA=Error(Dt(460)),yee=Error(Dt(474)),W2=Error(Dt(542)),K4={then:function(){}};function w7(n){return n=n.status,n==="fulfilled"||n==="rejected"}function MR(){}function _ee(n,e,t){switch(t=n[t],t===void 0?n.push(e):t!==e&&(e.then(MR,MR),e=t),e.status){case"fulfilled":return e.value;case"rejected":throw n=e.reason,A7(n),n;default:if(typeof e.status=="string")e.then(MR,MR);else{if(n=Ts,n!==null&&100<n.shellSuspendCounter)throw Error(Dt(482));n=e,n.status="pending",n.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw n=e.reason,A7(n),n}throw Ew=e,wA}}var Ew=null;function C7(){if(Ew===null)throw Error(Dt(459));var n=Ew;return Ew=null,n}function A7(n){if(n===wA||n===W2)throw Error(Dt(483))}var Qv=!1;function N8(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Z4(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Sy(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ey(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Xr&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=xN(n),fee(n,null,t),e}return $2(n,i,e,t),xN(n)}function Tw(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194048)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,jQ(n,t)}}function dB(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}var J4=!1;function xw(){if(J4){var n=YE;if(n!==null)throw n}}function ww(n,e,t,i){J4=!1;var r=n.updateQueue;Qv=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,u=c=l=null,o=s;do{var d=o.lane&-536870913,f=d!==o.lane;if(f?(pr&d)===d:(i&d)===d){d!==0&&d===RT&&(J4=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=n,v=o;d=e;var _=t;switch(v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(_,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(_,h,d):m,d==null)break e;h=Fs({},h,d);break e;case 2:Qv=!0}}d=o.callback,d!==null&&(n.flags|=64,f&&(n.flags|=8192),f=r.callbacks,f===null?r.callbacks=[d]:f.push(d))}else f={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),Vy|=a,n.lanes=a,n.memoizedState=h}}function bee(n,e){if(typeof n!="function")throw Error(Dt(191,n));n.call(e)}function See(n,e){var t=n.callbacks;if(t!==null)for(n.callbacks=null,n=0;n<t.length;n++)bee(t[n],e)}var OT=Hp(null),MN=Hp(0);function M7(n,e){n=Lg,Zs(MN,n),Zs(OT,e),Lg=n|e.baseLanes}function Q4(){Zs(MN,Lg),Zs(OT,OT.current)}function P8(){Lg=MN.current,fl(OT),fl(MN)}var jy=0,Vi=null,rs=null,go=null,RN=!1,XE=!1,gb=!1,ON=0,dC=0,KE=null,LTe=0;function Va(){throw Error(Dt(321))}function D8(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!xh(n[t],e[t]))return!1;return!0}function k8(n,e,t,i,r,s){return jy=s,Vi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pi.H=n===null||n.memoizedState===null?Jee:Qee,gb=!1,s=t(i,r),gb=!1,XE&&(s=Tee(e,t,i,r)),Eee(n),s}function Eee(n){pi.H=IN;var e=rs!==null&&rs.next!==null;if(jy=0,go=rs=Vi=null,RN=!1,dC=0,KE=null,e)throw Error(Dt(300));n===null||dl||(n=n.dependencies,n!==null&&AN(n)&&(dl=!0))}function Tee(n,e,t,i){Vi=n;var r=0;do{if(XE&&(KE=null),dC=0,XE=!1,25<=r)throw Error(Dt(301));if(r+=1,go=rs=null,n.updateQueue!=null){var s=n.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}pi.H=VTe,s=e(t,i)}while(XE);return s}function UTe(){var n=pi.H,e=n.useState()[0];return e=typeof e.then=="function"?CA(e):e,n=n.useState()[0],(rs!==null?rs.memoizedState:null)!==n&&(Vi.flags|=1024),e}function L8(){var n=ON!==0;return ON=0,n}function U8(n,e,t){e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~t}function B8(n){if(RN){for(n=n.memoizedState;n!==null;){var e=n.queue;e!==null&&(e.pending=null),n=n.next}RN=!1}jy=0,go=rs=Vi=null,XE=!1,dC=ON=0,KE=null}function vu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return go===null?Vi.memoizedState=go=n:go=go.next=n,go}function yo(){if(rs===null){var n=Vi.alternate;n=n!==null?n.memoizedState:null}else n=rs.next;var e=go===null?Vi.memoizedState:go.next;if(e!==null)go=e,rs=n;else{if(n===null)throw Vi.alternate===null?Error(Dt(467)):Error(Dt(310));rs=n,n={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},go===null?Vi.memoizedState=go=n:go=go.next=n}return go}function F8(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function CA(n){var e=dC;return dC+=1,KE===null&&(KE=[]),n=_ee(KE,n,e),e=Vi,(go===null?e.memoizedState:go.next)===null&&(e=e.alternate,pi.H=e===null||e.memoizedState===null?Jee:Qee),n}function Y2(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return CA(n);if(n.$$typeof===mg)return Ql(n)}throw Error(Dt(438,String(n)))}function z8(n){var e=null,t=Vi.updateQueue;if(t!==null&&(e=t.memoCache),e==null){var i=Vi.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),t===null&&(t=F8(),Vi.updateQueue=t),t.memoCache=e,t=e.data[e.index],t===void 0)for(t=e.data[e.index]=Array(n),i=0;i<n;i++)t[i]=SEe;return e.index++,t}function Dg(n,e){return typeof e=="function"?e(n):e}function kO(n){var e=yo();return j8(e,rs,n)}function j8(n,e,t){var i=n.queue;if(i===null)throw Error(Dt(311));i.lastRenderedReducer=t;var r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=n.baseState,r===null)n.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?(pr&h)===h:(jy&h)===h){var d=c.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===RT&&(u=!0);else if((jy&d)===d){c=c.next,d===RT&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,a=s):l=l.next=h,Vi.lanes|=d,Vy|=d;h=c.action,gb&&t(s,h),s=c.hasEagerState?c.eagerState:t(s,h)}else d={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,Vi.lanes|=h,Vy|=h;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!xh(s,n.memoizedState)&&(dl=!0,u&&(t=YE,t!==null)))throw t;n.memoizedState=s,n.baseState=a,n.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function fB(n){var e=yo(),t=e.queue;if(t===null)throw Error(Dt(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);xh(s,e.memoizedState)||(dl=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function xee(n,e,t){var i=Vi,r=yo(),s=Ur;if(s){if(t===void 0)throw Error(Dt(407));t=t()}else t=e();var a=!xh((rs||r).memoizedState,t);a&&(r.memoizedState=t,dl=!0),r=r.queue;var o=Aee.bind(null,i,r,n);if(AA(2048,8,o,[n]),r.getSnapshot!==e||a||go!==null&&go.memoizedState.tag&1){if(i.flags|=2048,IT(9,X2(),Cee.bind(null,i,r,t,e),null),Ts===null)throw Error(Dt(349));s||jy&124||wee(i,e,t)}return t}function wee(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Vi.updateQueue,e===null?(e=F8(),Vi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Cee(n,e,t,i){e.value=t,e.getSnapshot=i,Mee(e)&&Ree(n)}function Aee(n,e,t){return t(function(){Mee(e)&&Ree(n)})}function Mee(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!xh(n,t)}catch{return!0}}function Ree(n){var e=Mx(n,2);e!==null&&Sh(e,n,2)}function ez(n){var e=vu();if(typeof n=="function"){var t=n;if(n=t(),gb){fy(!0);try{t()}finally{fy(!1)}}}return e.memoizedState=e.baseState=n,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:n},e}function Oee(n,e,t,i){return n.baseState=t,j8(n,rs,typeof i=="function"?i:Dg)}function BTe(n,e,t,i,r){if(K2(n))throw Error(Dt(485));if(n=e.action,n!==null){var s={payload:r,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};pi.T!==null?t(!0):s.isTransition=!1,i(s),t=e.pending,t===null?(s.next=e.pending=s,Iee(e,s)):(s.next=t.next,e.pending=t.next=s)}}function Iee(n,e){var t=e.action,i=e.payload,r=n.state;if(e.isTransition){var s=pi.T,a={};pi.T=a;try{var o=t(r,i),l=pi.S;l!==null&&l(a,o),R7(n,e,o)}catch(c){tz(n,e,c)}finally{pi.T=s}}else try{s=t(r,i),R7(n,e,s)}catch(c){tz(n,e,c)}}function R7(n,e,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(i){O7(n,e,i)},function(i){return tz(n,e,i)}):O7(n,e,t)}function O7(n,e,t){e.status="fulfilled",e.value=t,Nee(e),n.state=t,e=n.pending,e!==null&&(t=e.next,t===e?n.pending=null:(t=t.next,e.next=t,Iee(n,t)))}function tz(n,e,t){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=t,Nee(e),e=e.next;while(e!==i)}n.action=null}function Nee(n){n=n.listeners;for(var e=0;e<n.length;e++)(0,n[e])()}function Pee(n,e){return e}function I7(n,e){if(Ur){var t=Ts.formState;if(t!==null){e:{var i=Vi;if(Ur){if(Ca){t:{for(var r=Ca,s=mp;r.nodeType!==8;){if(!s){r=null;break t}if(r=uf(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ca=uf(r.nextSibling),i=r.data==="F!";break e}}pb(i)}i=!1}i&&(e=t[0])}}return t=vu(),t.memoizedState=t.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pee,lastRenderedState:e},t.queue=i,t=Xee.bind(null,Vi,i),i.dispatch=t,i=ez(!1),s=q8.bind(null,Vi,!1,i.queue),i=vu(),r={state:e,dispatch:null,action:n,pending:null},i.queue=r,t=BTe.bind(null,Vi,r,s,t),r.dispatch=t,i.memoizedState=n,[e,t,!1]}function N7(n){var e=yo();return Dee(e,rs,n)}function Dee(n,e,t){if(e=j8(n,e,Pee)[0],n=kO(Dg)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=CA(e)}catch(a){throw a===wA?W2:a}else i=e;e=yo();var r=e.queue,s=r.dispatch;return t!==e.memoizedState&&(Vi.flags|=2048,IT(9,X2(),FTe.bind(null,r,t),null)),[i,s,n]}function FTe(n,e){n.action=e}function P7(n){var e=yo(),t=rs;if(t!==null)return Dee(e,t,n);yo(),e=e.memoizedState,t=yo();var i=t.queue.dispatch;return t.memoizedState=n,[e,i,!1]}function IT(n,e,t,i){return n={tag:n,create:t,deps:i,inst:e,next:null},e=Vi.updateQueue,e===null&&(e=F8(),Vi.updateQueue=e),t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n),n}function X2(){return{destroy:void 0,resource:void 0}}function kee(){return yo().memoizedState}function LO(n,e,t,i){var r=vu();i=i===void 0?null:i,Vi.flags|=n,r.memoizedState=IT(1|e,X2(),t,i)}function AA(n,e,t,i){var r=yo();i=i===void 0?null:i;var s=r.memoizedState.inst;rs!==null&&i!==null&&D8(i,rs.memoizedState.deps)?r.memoizedState=IT(e,s,t,i):(Vi.flags|=n,r.memoizedState=IT(1|e,s,t,i))}function D7(n,e){LO(8390656,8,n,e)}function Lee(n,e){AA(2048,8,n,e)}function Uee(n,e){return AA(4,2,n,e)}function Bee(n,e){return AA(4,4,n,e)}function Fee(n,e){if(typeof e=="function"){n=n();var t=e(n);return function(){typeof t=="function"?t():e(null)}}if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function zee(n,e,t){t=t!=null?t.concat([n]):null,AA(4,4,Fee.bind(null,e,n),t)}function H8(){}function jee(n,e){var t=yo();e=e===void 0?null:e;var i=t.memoizedState;return e!==null&&D8(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Hee(n,e){var t=yo();e=e===void 0?null:e;var i=t.memoizedState;if(e!==null&&D8(e,i[1]))return i[0];if(i=n(),gb){fy(!0);try{n()}finally{fy(!1)}}return t.memoizedState=[i,e],i}function V8(n,e,t){return t===void 0||jy&1073741824?n.memoizedState=e:(n.memoizedState=t,n=Nte(),Vi.lanes|=n,Vy|=n,t)}function Vee(n,e,t,i){return xh(t,e)?t:OT.current!==null?(n=V8(n,t,i),xh(n,e)||(dl=!0),n):jy&42?(n=Nte(),Vi.lanes|=n,Vy|=n,e):(dl=!0,n.memoizedState=t)}function Gee(n,e,t,i,r){var s=Fr.p;Fr.p=s!==0&&8>s?s:8;var a=pi.T,o={};pi.T=o,q8(n,!1,e,t);try{var l=r(),c=pi.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=kTe(l,i);Cw(n,e,u,bh(n))}else Cw(n,e,i,bh(n))}catch(h){Cw(n,e,{then:function(){},status:"rejected",reason:h},bh())}finally{Fr.p=s,pi.T=a}}function zTe(){}function nz(n,e,t,i){if(n.tag!==5)throw Error(Dt(476));var r=qee(n).queue;Gee(n,r,e,W_,t===null?zTe:function(){return $ee(n),t(i)})}function qee(n){var e=n.memoizedState;if(e!==null)return e;e={memoizedState:W_,baseState:W_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:W_},next:null};var t={};return e.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dg,lastRenderedState:t},next:null},n.memoizedState=e,n=n.alternate,n!==null&&(n.memoizedState=e),e}function $ee(n){var e=qee(n).next.queue;Cw(n,e,{},bh())}function G8(){return Ql(vC)}function Wee(){return yo().memoizedState}function Yee(){return yo().memoizedState}function jTe(n){for(var e=n.return;e!==null;){switch(e.tag){case 24:case 3:var t=bh();n=Sy(t);var i=Ey(e,n,t);i!==null&&(Sh(i,e,t),Tw(i,e,t)),e={cache:O8()},n.payload=e;return}e=e.return}}function HTe(n,e,t){var i=bh();t={lane:i,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null},K2(n)?Kee(e,t):(t=C8(n,e,t,i),t!==null&&(Sh(t,n,i),Zee(t,e,i)))}function Xee(n,e,t){var i=bh();Cw(n,e,t,i)}function Cw(n,e,t,i){var r={lane:i,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null};if(K2(n))Kee(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,xh(o,a))return $2(n,e,r,0),Ts===null&&q2(),!1}catch{}finally{}if(t=C8(n,e,r,i),t!==null)return Sh(t,n,i),Zee(t,e,i),!0}return!1}function q8(n,e,t,i){if(i={lane:2,revertLane:Q8(),action:i,hasEagerState:!1,eagerState:null,next:null},K2(n)){if(e)throw Error(Dt(479))}else e=C8(n,t,i,2),e!==null&&Sh(e,n,2)}function K2(n){var e=n.alternate;return n===Vi||e!==null&&e===Vi}function Kee(n,e){XE=RN=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Zee(n,e,t){if(t&4194048){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,jQ(n,t)}}var IN={readContext:Ql,use:Y2,useCallback:Va,useContext:Va,useEffect:Va,useImperativeHandle:Va,useLayoutEffect:Va,useInsertionEffect:Va,useMemo:Va,useReducer:Va,useRef:Va,useState:Va,useDebugValue:Va,useDeferredValue:Va,useTransition:Va,useSyncExternalStore:Va,useId:Va,useHostTransitionStatus:Va,useFormState:Va,useActionState:Va,useOptimistic:Va,useMemoCache:Va,useCacheRefresh:Va},Jee={readContext:Ql,use:Y2,useCallback:function(n,e){return vu().memoizedState=[n,e===void 0?null:e],n},useContext:Ql,useEffect:D7,useImperativeHandle:function(n,e,t){t=t!=null?t.concat([n]):null,LO(4194308,4,Fee.bind(null,e,n),t)},useLayoutEffect:function(n,e){return LO(4194308,4,n,e)},useInsertionEffect:function(n,e){LO(4,2,n,e)},useMemo:function(n,e){var t=vu();e=e===void 0?null:e;var i=n();if(gb){fy(!0);try{n()}finally{fy(!1)}}return t.memoizedState=[i,e],i},useReducer:function(n,e,t){var i=vu();if(t!==void 0){var r=t(e);if(gb){fy(!0);try{t(e)}finally{fy(!1)}}}else r=e;return i.memoizedState=i.baseState=r,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},i.queue=n,n=n.dispatch=HTe.bind(null,Vi,n),[i.memoizedState,n]},useRef:function(n){var e=vu();return n={current:n},e.memoizedState=n},useState:function(n){n=ez(n);var e=n.queue,t=Xee.bind(null,Vi,e);return e.dispatch=t,[n.memoizedState,t]},useDebugValue:H8,useDeferredValue:function(n,e){var t=vu();return V8(t,n,e)},useTransition:function(){var n=ez(!1);return n=Gee.bind(null,Vi,n.queue,!0,!1),vu().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,e,t){var i=Vi,r=vu();if(Ur){if(t===void 0)throw Error(Dt(407));t=t()}else{if(t=e(),Ts===null)throw Error(Dt(349));pr&124||wee(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,D7(Aee.bind(null,i,s,n),[n]),i.flags|=2048,IT(9,X2(),Cee.bind(null,i,s,t,e),null),t},useId:function(){var n=vu(),e=Ts.identifierPrefix;if(Ur){var t=vg,i=gg;t=(i&~(1<<32-_h(i)-1)).toString(32)+t,e=""+e+"R"+t,t=ON++,0<t&&(e+="H"+t.toString(32)),e+=""}else t=LTe++,e=""+e+"r"+t.toString(32)+"";return n.memoizedState=e},useHostTransitionStatus:G8,useFormState:I7,useActionState:I7,useOptimistic:function(n){var e=vu();e.memoizedState=e.baseState=n;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=t,e=q8.bind(null,Vi,!0,t),t.dispatch=e,[n,e]},useMemoCache:z8,useCacheRefresh:function(){return vu().memoizedState=jTe.bind(null,Vi)}},Qee={readContext:Ql,use:Y2,useCallback:jee,useContext:Ql,useEffect:Lee,useImperativeHandle:zee,useInsertionEffect:Uee,useLayoutEffect:Bee,useMemo:Hee,useReducer:kO,useRef:kee,useState:function(){return kO(Dg)},useDebugValue:H8,useDeferredValue:function(n,e){var t=yo();return Vee(t,rs.memoizedState,n,e)},useTransition:function(){var n=kO(Dg)[0],e=yo().memoizedState;return[typeof n=="boolean"?n:CA(n),e]},useSyncExternalStore:xee,useId:Wee,useHostTransitionStatus:G8,useFormState:N7,useActionState:N7,useOptimistic:function(n,e){var t=yo();return Oee(t,rs,n,e)},useMemoCache:z8,useCacheRefresh:Yee},VTe={readContext:Ql,use:Y2,useCallback:jee,useContext:Ql,useEffect:Lee,useImperativeHandle:zee,useInsertionEffect:Uee,useLayoutEffect:Bee,useMemo:Hee,useReducer:fB,useRef:kee,useState:function(){return fB(Dg)},useDebugValue:H8,useDeferredValue:function(n,e){var t=yo();return rs===null?V8(t,n,e):Vee(t,rs.memoizedState,n,e)},useTransition:function(){var n=fB(Dg)[0],e=yo().memoizedState;return[typeof n=="boolean"?n:CA(n),e]},useSyncExternalStore:xee,useId:Wee,useHostTransitionStatus:G8,useFormState:P7,useActionState:P7,useOptimistic:function(n,e){var t=yo();return rs!==null?Oee(t,rs,n,e):(t.baseState=n,[n,t.queue.dispatch])},useMemoCache:z8,useCacheRefresh:Yee},ZE=null,fC=0;function RR(n){var e=fC;return fC+=1,ZE===null&&(ZE=[]),_ee(ZE,n,e)}function A1(n,e){e=e.props.ref,n.ref=e!==void 0?e:null}function OR(n,e){throw e.$$typeof===_Ee?Error(Dt(525)):(n=Object.prototype.toString.call(e),Error(Dt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)))}function k7(n){var e=n._init;return e(n._payload)}function ete(n){function e(y,S){if(n){var T=y.deletions;T===null?(y.deletions=[S],y.flags|=16):T.push(S)}}function t(y,S){if(!n)return null;for(;S!==null;)e(y,S),S=S.sibling;return null}function i(y){for(var S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function r(y,S){return y=wg(y,S),y.index=0,y.sibling=null,y}function s(y,S,T){return y.index=T,n?(T=y.alternate,T!==null?(T=T.index,T<S?(y.flags|=67108866,S):T):(y.flags|=67108866,S)):(y.flags|=1048576,S)}function a(y){return n&&y.alternate===null&&(y.flags|=67108866),y}function o(y,S,T,x){return S===null||S.tag!==6?(S=uB(T,y.mode,x),S.return=y,S):(S=r(S,T),S.return=y,S)}function l(y,S,T,x){var I=T.type;return I===CE?u(y,S,T.props.children,x,T.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Jv&&k7(I)===S.type)?(S=r(S,T.props),A1(S,T),S.return=y,S):(S=PO(T.type,T.key,T.props,null,y.mode,x),A1(S,T),S.return=y,S)}function c(y,S,T,x){return S===null||S.tag!==4||S.stateNode.containerInfo!==T.containerInfo||S.stateNode.implementation!==T.implementation?(S=hB(T,y.mode,x),S.return=y,S):(S=r(S,T.children||[]),S.return=y,S)}function u(y,S,T,x,I){return S===null||S.tag!==7?(S=Y_(T,y.mode,x,I),S.return=y,S):(S=r(S,T),S.return=y,S)}function h(y,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=uB(""+S,y.mode,T),S.return=y,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ER:return T=PO(S.type,S.key,S.props,null,y.mode,T),A1(T,S),T.return=y,T;case W1:return S=hB(S,y.mode,T),S.return=y,S;case Jv:var x=S._init;return S=x(S._payload),h(y,S,T)}if(Y1(S)||T1(S))return S=Y_(S,y.mode,T,null),S.return=y,S;if(typeof S.then=="function")return h(y,RR(S),T);if(S.$$typeof===mg)return h(y,AR(y,S),T);OR(y,S)}return null}function d(y,S,T,x){var I=S!==null?S.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return I!==null?null:o(y,S,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ER:return T.key===I?l(y,S,T,x):null;case W1:return T.key===I?c(y,S,T,x):null;case Jv:return I=T._init,T=I(T._payload),d(y,S,T,x)}if(Y1(T)||T1(T))return I!==null?null:u(y,S,T,x,null);if(typeof T.then=="function")return d(y,S,RR(T),x);if(T.$$typeof===mg)return d(y,S,AR(y,T),x);OR(y,T)}return null}function f(y,S,T,x,I){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return y=y.get(T)||null,o(S,y,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ER:return y=y.get(x.key===null?T:x.key)||null,l(S,y,x,I);case W1:return y=y.get(x.key===null?T:x.key)||null,c(S,y,x,I);case Jv:var R=x._init;return x=R(x._payload),f(y,S,T,x,I)}if(Y1(x)||T1(x))return y=y.get(T)||null,u(S,y,x,I,null);if(typeof x.then=="function")return f(y,S,T,RR(x),I);if(x.$$typeof===mg)return f(y,S,T,AR(S,x),I);OR(S,x)}return null}function m(y,S,T,x){for(var I=null,R=null,N=S,L=S=0,k=null;N!==null&&L<T.length;L++){N.index>L?(k=N,N=null):k=N.sibling;var z=d(y,N,T[L],x);if(z===null){N===null&&(N=k);break}n&&N&&z.alternate===null&&e(y,N),S=s(z,S,L),R===null?I=z:R.sibling=z,R=z,N=k}if(L===T.length)return t(y,N),Ur&&x_(y,L),I;if(N===null){for(;L<T.length;L++)N=h(y,T[L],x),N!==null&&(S=s(N,S,L),R===null?I=N:R.sibling=N,R=N);return Ur&&x_(y,L),I}for(N=i(N);L<T.length;L++)k=f(N,y,L,T[L],x),k!==null&&(n&&k.alternate!==null&&N.delete(k.key===null?L:k.key),S=s(k,S,L),R===null?I=k:R.sibling=k,R=k);return n&&N.forEach(function(Z){return e(y,Z)}),Ur&&x_(y,L),I}function v(y,S,T,x){if(T==null)throw Error(Dt(151));for(var I=null,R=null,N=S,L=S=0,k=null,z=T.next();N!==null&&!z.done;L++,z=T.next()){N.index>L?(k=N,N=null):k=N.sibling;var Z=d(y,N,z.value,x);if(Z===null){N===null&&(N=k);break}n&&N&&Z.alternate===null&&e(y,N),S=s(Z,S,L),R===null?I=Z:R.sibling=Z,R=Z,N=k}if(z.done)return t(y,N),Ur&&x_(y,L),I;if(N===null){for(;!z.done;L++,z=T.next())z=h(y,z.value,x),z!==null&&(S=s(z,S,L),R===null?I=z:R.sibling=z,R=z);return Ur&&x_(y,L),I}for(N=i(N);!z.done;L++,z=T.next())z=f(N,y,L,z.value,x),z!==null&&(n&&z.alternate!==null&&N.delete(z.key===null?L:z.key),S=s(z,S,L),R===null?I=z:R.sibling=z,R=z);return n&&N.forEach(function(H){return e(y,H)}),Ur&&x_(y,L),I}function _(y,S,T,x){if(typeof T=="object"&&T!==null&&T.type===CE&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ER:e:{for(var I=T.key;S!==null;){if(S.key===I){if(I=T.type,I===CE){if(S.tag===7){t(y,S.sibling),x=r(S,T.props.children),x.return=y,y=x;break e}}else if(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Jv&&k7(I)===S.type){t(y,S.sibling),x=r(S,T.props),A1(x,T),x.return=y,y=x;break e}t(y,S);break}else e(y,S);S=S.sibling}T.type===CE?(x=Y_(T.props.children,y.mode,x,T.key),x.return=y,y=x):(x=PO(T.type,T.key,T.props,null,y.mode,x),A1(x,T),x.return=y,y=x)}return a(y);case W1:e:{for(I=T.key;S!==null;){if(S.key===I)if(S.tag===4&&S.stateNode.containerInfo===T.containerInfo&&S.stateNode.implementation===T.implementation){t(y,S.sibling),x=r(S,T.children||[]),x.return=y,y=x;break e}else{t(y,S);break}else e(y,S);S=S.sibling}x=hB(T,y.mode,x),x.return=y,y=x}return a(y);case Jv:return I=T._init,T=I(T._payload),_(y,S,T,x)}if(Y1(T))return m(y,S,T,x);if(T1(T)){if(I=T1(T),typeof I!="function")throw Error(Dt(150));return T=I.call(T),v(y,S,T,x)}if(typeof T.then=="function")return _(y,S,RR(T),x);if(T.$$typeof===mg)return _(y,S,AR(y,T),x);OR(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,S!==null&&S.tag===6?(t(y,S.sibling),x=r(S,T),x.return=y,y=x):(t(y,S),x=uB(T,y.mode,x),x.return=y,y=x),a(y)):t(y,S)}return function(y,S,T,x){try{fC=0;var I=_(y,S,T,x);return ZE=null,I}catch(N){if(N===wA||N===W2)throw N;var R=mh(29,N,null,y.mode);return R.lanes=x,R.return=y,R}finally{}}}var NT=ete(!0),tte=ete(!1),_d=Hp(null),Cp=null;function ly(n){var e=n.alternate;Zs(Lo,Lo.current&1),Zs(_d,n),Cp===null&&(e===null||OT.current!==null||e.memoizedState!==null)&&(Cp=n)}function nte(n){if(n.tag===22){if(Zs(Lo,Lo.current),Zs(_d,n),Cp===null){var e=n.alternate;e!==null&&e.memoizedState!==null&&(Cp=n)}}else cy()}function cy(){Zs(Lo,Lo.current),Zs(_d,_d.current)}function _g(n){fl(_d),Cp===n&&(Cp=null),fl(Lo)}var Lo=Hp(0);function NN(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||_z(t)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function pB(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Fs({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var iz={enqueueSetState:function(n,e,t){n=n._reactInternals;var i=bh(),r=Sy(i);r.payload=e,t!=null&&(r.callback=t),e=Ey(n,r,i),e!==null&&(Sh(e,n,i),Tw(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=bh(),r=Sy(i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Ey(n,r,i),e!==null&&(Sh(e,n,i),Tw(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=bh(),i=Sy(t);i.tag=2,e!=null&&(i.callback=e),e=Ey(n,i,t),e!==null&&(Sh(e,n,t),Tw(e,n,t))}};function L7(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!uC(t,i)||!uC(r,s):!0}function U7(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&iz.enqueueReplaceState(e,e.state,null)}function vb(n,e){var t=e;if("ref"in e){t={};for(var i in e)i!=="ref"&&(t[i]=e[i])}if(n=n.defaultProps){t===e&&(t=Fs({},t));for(var r in n)t[r]===void 0&&(t[r]=n[r])}return t}var PN=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(e))return}else if(typeof ss=="object"&&typeof ss.emit=="function"){ss.emit("uncaughtException",n);return}console.error(n)};function ite(n){PN(n)}function rte(n){console.error(n)}function ste(n){PN(n)}function DN(n,e){try{var t=n.onUncaughtError;t(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function B7(n,e,t){try{var i=n.onCaughtError;i(t.value,{componentStack:t.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function rz(n,e,t){return t=Sy(t),t.tag=3,t.payload={element:null},t.callback=function(){DN(n,e)},t}function ate(n){return n=Sy(n),n.tag=3,n}function ote(n,e,t,i){var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;n.payload=function(){return r(s)},n.callback=function(){B7(e,t,i)}}var a=t.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){B7(e,t,i),typeof r!="function"&&(Ty===null?Ty=new Set([this]):Ty.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function GTe(n,e,t,i,r){if(t.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=t.alternate,e!==null&&TA(e,t,r,!0),t=_d.current,t!==null){switch(t.tag){case 13:return Cp===null?dz():t.alternate===null&&Aa===0&&(Aa=3),t.flags&=-257,t.flags|=65536,t.lanes=r,i===K4?t.flags|=16384:(e=t.updateQueue,e===null?t.updateQueue=new Set([i]):e.add(i),wB(n,i,r)),!1;case 22:return t.flags|=65536,i===K4?t.flags|=16384:(e=t.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},t.updateQueue=e):(t=e.retryQueue,t===null?e.retryQueue=new Set([i]):t.add(i)),wB(n,i,r)),!1}throw Error(Dt(435,t.tag))}return wB(n,i,r),dz(),!1}if(Ur)return e=_d.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==q4&&(n=Error(Dt(422),{cause:i}),hC(ad(n,t)))):(i!==q4&&(e=Error(Dt(423),{cause:i}),hC(ad(e,t))),n=n.current.alternate,n.flags|=65536,r&=-r,n.lanes|=r,i=ad(i,t),r=rz(n.stateNode,i,r),dB(n,r),Aa!==4&&(Aa=2)),!1;var s=Error(Dt(520),{cause:i});if(s=ad(s,t),Rw===null?Rw=[s]:Rw.push(s),Aa!==4&&(Aa=2),e===null)return!0;i=ad(i,t),t=e;do{switch(t.tag){case 3:return t.flags|=65536,n=r&-r,t.lanes|=n,n=rz(t.stateNode,i,n),dB(t,n),!1;case 1:if(e=t.type,s=t.stateNode,(t.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ty===null||!Ty.has(s))))return t.flags|=65536,r&=-r,t.lanes|=r,r=ate(r),ote(r,n,t,i),dB(t,r),!1}t=t.return}while(t!==null);return!1}var lte=Error(Dt(461)),dl=!1;function Ml(n,e,t,i){e.child=n===null?tte(e,null,t,i):NT(e,n.child,t,i)}function F7(n,e,t,i,r){t=t.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return mb(e),i=k8(n,e,t,a,s,r),o=L8(),n!==null&&!dl?(U8(n,e,r),kg(n,e,r)):(Ur&&o&&M8(e),e.flags|=1,Ml(n,e,i,r),e.child)}function z7(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!A8(s)&&s.defaultProps===void 0&&t.compare===null?(e.tag=15,e.type=s,cte(n,e,s,i,r)):(n=PO(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!$8(n,r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:uC,t(a,i)&&n.ref===e.ref)return kg(n,e,r)}return e.flags|=1,n=wg(s,i),n.ref=e.ref,n.return=e,e.child=n}function cte(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(uC(s,i)&&n.ref===e.ref)if(dl=!1,e.pendingProps=i=s,$8(n,r))n.flags&131072&&(dl=!0);else return e.lanes=n.lanes,kg(n,e,r)}return sz(n,e,t,i,r)}function ute(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=s!==null?s.baseLanes|t:t,n!==null){for(r=e.child=n.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;e.childLanes=s&~i}else e.childLanes=0,e.child=null;return j7(n,e,i,t)}if(t&536870912)e.memoizedState={baseLanes:0,cachePool:null},n!==null&&DO(e,s!==null?s.cachePool:null),s!==null?M7(e,s):Q4(),nte(e);else return e.lanes=e.childLanes=536870912,j7(n,e,s!==null?s.baseLanes|t:t,t)}else s!==null?(DO(e,s.cachePool),M7(e,s),cy(),e.memoizedState=null):(n!==null&&DO(e,null),Q4(),cy());return Ml(n,e,r,t),e.child}function j7(n,e,t,i){var r=I8();return r=r===null?null:{parent:Po._currentValue,pool:r},e.memoizedState={baseLanes:t,cachePool:r},n!==null&&DO(e,null),Q4(),nte(e),n!==null&&TA(n,e,i,!0),null}function UO(n,e){var t=e.ref;if(t===null)n!==null&&n.ref!==null&&(e.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(Dt(284));(n===null||n.ref!==t)&&(e.flags|=4194816)}}function sz(n,e,t,i,r){return mb(e),t=k8(n,e,t,i,void 0,r),i=L8(),n!==null&&!dl?(U8(n,e,r),kg(n,e,r)):(Ur&&i&&M8(e),e.flags|=1,Ml(n,e,t,r),e.child)}function H7(n,e,t,i,r,s){return mb(e),e.updateQueue=null,t=Tee(e,i,t,r),Eee(n),i=L8(),n!==null&&!dl?(U8(n,e,s),kg(n,e,s)):(Ur&&i&&M8(e),e.flags|=1,Ml(n,e,t,s),e.child)}function V7(n,e,t,i,r){if(mb(e),e.stateNode===null){var s=DE,a=t.contextType;typeof a=="object"&&a!==null&&(s=Ql(a)),s=new t(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=iz,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},N8(e),a=t.contextType,s.context=typeof a=="object"&&a!==null?Ql(a):DE,s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(pB(e,t,a,i),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&iz.enqueueReplaceState(s,s.state,null),ww(e,i,s,r),xw(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(n===null){s=e.stateNode;var o=e.memoizedProps,l=vb(t,o);s.props=l;var c=s.context,u=t.contextType;a=DE,typeof u=="object"&&u!==null&&(a=Ql(u));var h=t.getDerivedStateFromProps;u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&U7(e,s,i,a),Qv=!1;var d=e.memoizedState;s.state=d,ww(e,i,s,r),xw(),c=e.memoizedState,o||d!==c||Qv?(typeof h=="function"&&(pB(e,t,h,i),c=e.memoizedState),(l=Qv||L7(e,t,l,i,d,c,a))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Z4(n,e),a=e.memoizedProps,u=vb(t,a),s.props=u,h=e.pendingProps,d=s.context,c=t.contextType,l=DE,typeof c=="object"&&c!==null&&(l=Ql(c)),o=t.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||d!==l)&&U7(e,s,i,l),Qv=!1,d=e.memoizedState,s.state=d,ww(e,i,s,r),xw();var f=e.memoizedState;a!==h||d!==f||Qv||n!==null&&n.dependencies!==null&&AN(n.dependencies)?(typeof o=="function"&&(pB(e,t,o,i),f=e.memoizedState),(u=Qv||L7(e,t,u,i,d,f,l)||n!==null&&n.dependencies!==null&&AN(n.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,f,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,f,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=f),s.props=i,s.state=f,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return s=i,UO(n,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,t=i&&typeof t.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,n!==null&&i?(e.child=NT(e,n.child,null,r),e.child=NT(e,null,t,r)):Ml(n,e,t,r),e.memoizedState=s.state,n=e.child):n=kg(n,e,r),n}function G7(n,e,t,i){return EA(),e.flags|=256,Ml(n,e,t,i),e.child}var mB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gB(n){return{baseLanes:n,cachePool:vee()}}function vB(n,e,t){return n=n!==null?n.childLanes&~t:0,e&&(n|=dd),n}function hte(n,e,t){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(Lo.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,n===null){if(Ur){if(r?ly(e):cy(),Ur){var o=Ca,l;if(l=o){e:{for(l=o,o=mp;l.nodeType!==8;){if(!o){o=null;break e}if(l=uf(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:X_!==null?{id:gg,overflow:vg}:null,retryLane:536870912,hydrationErrors:null},l=mh(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Bc=e,Ca=null,l=!0):l=!1}l||pb(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return _z(o)?e.lanes=32:e.lanes=536870912,null;_g(e)}return o=i.children,i=i.fallback,r?(cy(),r=e.mode,o=kN({mode:"hidden",children:o},r),i=Y_(i,r,t,null),o.return=e,i.return=e,o.sibling=i,e.child=o,r=e.child,r.memoizedState=gB(t),r.childLanes=vB(n,a,t),e.memoizedState=mB,i):(ly(e),az(e,o))}if(l=n.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(ly(e),e.flags&=-257,e=yB(n,e,t)):e.memoizedState!==null?(cy(),e.child=n.child,e.flags|=128,e=null):(cy(),r=i.fallback,o=e.mode,i=kN({mode:"visible",children:i.children},o),r=Y_(r,o,t,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,NT(e,n.child,null,t),i=e.child,i.memoizedState=gB(t),i.childLanes=vB(n,a,t),e.memoizedState=mB,e=r);else if(ly(e),_z(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(Dt(419)),i.stack="",i.digest=a,hC({value:i,source:null,stack:null}),e=yB(n,e,t)}else if(dl||TA(n,e,t,!1),a=(t&n.childLanes)!==0,dl||a){if(a=Ts,a!==null&&(i=t&-t,i=i&42?1:g8(i),i=i&(a.suspendedLanes|t)?0:i,i!==0&&i!==l.retryLane))throw l.retryLane=i,Mx(n,i),Sh(a,n,i),lte;o.data==="$?"||dz(),e=yB(n,e,t)}else o.data==="$?"?(e.flags|=192,e.child=n.child,e=null):(n=l.treeContext,Ca=uf(o.nextSibling),Bc=e,Ur=!0,K_=null,mp=!1,n!==null&&(td[nd++]=gg,td[nd++]=vg,td[nd++]=X_,gg=n.id,vg=n.overflow,X_=e),e=az(e,i.children),e.flags|=4096);return e}return r?(cy(),r=i.fallback,o=e.mode,l=n.child,c=l.sibling,i=wg(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?r=wg(c,r):(r=Y_(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o===null?o=gB(t):(l=o.cachePool,l!==null?(c=Po._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=vee(),o={baseLanes:o.baseLanes|t,cachePool:l}),r.memoizedState=o,r.childLanes=vB(n,a,t),e.memoizedState=mB,i):(ly(e),t=n.child,n=t.sibling,t=wg(t,{mode:"visible",children:i.children}),t.return=e,t.sibling=null,n!==null&&(a=e.deletions,a===null?(e.deletions=[n],e.flags|=16):a.push(n)),e.child=t,e.memoizedState=null,t)}function az(n,e){return e=kN({mode:"visible",children:e},n.mode),e.return=n,n.child=e}function kN(n,e){return n=mh(22,n,null,e),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function yB(n,e,t){return NT(e,n.child,null,t),n=az(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function q7(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),W4(n.return,e,t)}function _B(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function dte(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ml(n,e,i.children,t),i=Lo.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&q7(n,t,e);else if(n.tag===19)q7(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}switch(Zs(Lo,i),r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&NN(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),_B(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&NN(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}_B(e,!0,t,null,s);break;case"together":_B(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kg(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Vy|=e.lanes,!(t&e.childLanes))if(n!==null){if(TA(n,e,t,!1),(t&e.childLanes)===0)return null}else return null;if(n!==null&&e.child!==n.child)throw Error(Dt(153));if(e.child!==null){for(n=e.child,t=wg(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=wg(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function $8(n,e){return n.lanes&e?!0:(n=n.dependencies,!!(n!==null&&AN(n)))}function qTe(n,e,t){switch(e.tag){case 3:_N(e,e.stateNode.containerInfo),oy(e,Po,n.memoizedState.cache),EA();break;case 27:case 5:k4(e);break;case 4:_N(e,e.stateNode.containerInfo);break;case 10:oy(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(ly(e),e.flags|=128,null):t&e.child.childLanes?hte(n,e,t):(ly(e),n=kg(n,e,t),n!==null?n.sibling:null);ly(e);break;case 19:var r=(n.flags&128)!==0;if(i=(t&e.childLanes)!==0,i||(TA(n,e,t,!1),i=(t&e.childLanes)!==0),r){if(i)return dte(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Zs(Lo,Lo.current),i)break;return null;case 22:case 23:return e.lanes=0,ute(n,e,t);case 24:oy(e,Po,n.memoizedState.cache)}return kg(n,e,t)}function fte(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps)dl=!0;else{if(!$8(n,t)&&!(e.flags&128))return dl=!1,qTe(n,e,t);dl=!!(n.flags&131072)}else dl=!1,Ur&&e.flags&1048576&&mee(e,CN,e.index);switch(e.lanes=0,e.tag){case 16:e:{n=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")A8(i)?(n=vb(i,n),e.tag=1,e=V7(null,e,i,n,t)):(e.tag=0,e=sz(null,e,i,n,t));else{if(i!=null){if(r=i.$$typeof,r===f8){e.tag=11,e=F7(null,e,i,n,t);break e}else if(r===p8){e.tag=14,e=z7(null,e,i,n,t);break e}}throw e=P4(i)||i,Error(Dt(306,e,""))}}return e;case 0:return sz(n,e,e.type,e.pendingProps,t);case 1:return i=e.type,r=vb(i,e.pendingProps),V7(n,e,i,r,t);case 3:e:{if(_N(e,e.stateNode.containerInfo),n===null)throw Error(Dt(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Z4(n,e),ww(e,i,null,t);var a=e.memoizedState;if(i=a.cache,oy(e,Po,i),i!==s.cache&&Y4(e,[Po],t,!0),xw(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=G7(n,e,i,t);break e}else if(i!==r){r=ad(Error(Dt(424)),e),hC(r),e=G7(n,e,i,t);break e}else{switch(n=e.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ca=uf(n.firstChild),Bc=e,Ur=!0,K_=null,mp=!0,t=tte(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(EA(),i===r){e=kg(n,e,t);break e}Ml(n,e,i,t)}e=e.child}return e;case 26:return UO(n,e),n===null?(t=l9(e.type,null,e.pendingProps,null))?e.memoizedState=t:Ur||(t=e.type,n=e.pendingProps,i=HN(by.current).createElement(t),i[Jl]=e,i[Ou]=n,Nl(i,t,n),hl(i),e.stateNode=i):e.memoizedState=l9(e.type,n.memoizedProps,e.pendingProps,n.memoizedState),null;case 27:return k4(e),n===null&&Ur&&(i=e.stateNode=Qte(e.type,e.pendingProps,by.current),Bc=e,mp=!0,r=Ca,c0(e.type)?(bz=r,Ca=uf(i.firstChild)):Ca=r),Ml(n,e,e.pendingProps.children,t),UO(n,e),n===null&&(e.flags|=4194304),e.child;case 5:return n===null&&Ur&&((r=i=Ca)&&(i=_xe(i,e.type,e.pendingProps,mp),i!==null?(e.stateNode=i,Bc=e,Ca=uf(i.firstChild),mp=!1,r=!0):r=!1),r||pb(e)),k4(e),r=e.type,s=e.pendingProps,a=n!==null?n.memoizedProps:null,i=s.children,vz(r,s)?i=null:a!==null&&vz(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=k8(n,e,UTe,null,null,t),vC._currentValue=r),UO(n,e),Ml(n,e,i,t),e.child;case 6:return n===null&&Ur&&((n=t=Ca)&&(t=bxe(t,e.pendingProps,mp),t!==null?(e.stateNode=t,Bc=e,Ca=null,n=!0):n=!1),n||pb(e)),null;case 13:return hte(n,e,t);case 4:return _N(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=NT(e,null,i,t):Ml(n,e,i,t),e.child;case 11:return F7(n,e,e.type,e.pendingProps,t);case 7:return Ml(n,e,e.pendingProps,t),e.child;case 8:return Ml(n,e,e.pendingProps.children,t),e.child;case 12:return Ml(n,e,e.pendingProps.children,t),e.child;case 10:return i=e.pendingProps,oy(e,e.type,i.value),Ml(n,e,i.children,t),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,mb(e),r=Ql(r),i=i(r),e.flags|=1,Ml(n,e,i,t),e.child;case 14:return z7(n,e,e.type,e.pendingProps,t);case 15:return cte(n,e,e.type,e.pendingProps,t);case 19:return dte(n,e,t);case 31:return i=e.pendingProps,t=e.mode,i={mode:i.mode,children:i.children},n===null?(t=kN(i,t),t.ref=e.ref,e.child=t,t.return=e,e=t):(t=wg(n.child,i),t.ref=e.ref,e.child=t,t.return=e,e=t),e;case 22:return ute(n,e,t);case 24:return mb(e),i=Ql(Po),n===null?(r=I8(),r===null&&(r=Ts,s=O8(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=t),r=s),e.memoizedState={parent:i,cache:r},N8(e),oy(e,Po,r)):(n.lanes&t&&(Z4(n,e),ww(e,null,null,t),xw()),r=n.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),oy(e,Po,i)):(i=s.cache,oy(e,Po,i),i!==r.cache&&Y4(e,[Po],t,!0))),Ml(n,e,e.pendingProps.children,t),e.child;case 29:throw e.pendingProps}throw Error(Dt(156,e.tag))}function eg(n){n.flags|=4}function $7(n,e){if(e.type!=="stylesheet"||e.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!nne(e)){if(e=_d.current,e!==null&&((pr&4194048)===pr?Cp!==null:(pr&62914560)!==pr&&!(pr&536870912)||e!==Cp))throw Ew=K4,yee;n.flags|=8192}}function IR(n,e){e!==null&&(n.flags|=4),n.flags&16384&&(e=n.tag!==22?FQ():536870912,n.lanes|=e,PT|=e)}function M1(n,e){if(!Ur)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function oa(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function $Te(n,e,t){var i=e.pendingProps;switch(R8(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oa(e),null;case 1:return oa(e),null;case 3:return t=e.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Cg(Po),CT(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(n===null||n.child===null)&&(C1(e)?eg(e):n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,E7())),oa(e),null;case 26:return t=e.memoizedState,n===null?(eg(e),t!==null?(oa(e),$7(e,t)):(oa(e),e.flags&=-16777217)):t?t!==n.memoizedState?(eg(e),oa(e),$7(e,t)):(oa(e),e.flags&=-16777217):(n.memoizedProps!==i&&eg(e),oa(e),e.flags&=-16777217),null;case 27:bN(e),t=by.current;var r=e.type;if(n!==null&&e.stateNode!=null)n.memoizedProps!==i&&eg(e);else{if(!i){if(e.stateNode===null)throw Error(Dt(166));return oa(e),null}n=xp.current,C1(e)?b7(e):(n=Qte(r,i,t),e.stateNode=n,eg(e))}return oa(e),null;case 5:if(bN(e),t=e.type,n!==null&&e.stateNode!=null)n.memoizedProps!==i&&eg(e);else{if(!i){if(e.stateNode===null)throw Error(Dt(166));return oa(e),null}if(n=xp.current,C1(e))b7(e);else{switch(r=HN(by.current),n){case 1:n=r.createElementNS("http://www.w3.org/2000/svg",t);break;case 2:n=r.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;default:switch(t){case"svg":n=r.createElementNS("http://www.w3.org/2000/svg",t);break;case"math":n=r.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;case"script":n=r.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?n.multiple=!0:i.size&&(n.size=i.size);break;default:n=typeof i.is=="string"?r.createElement(t,{is:i.is}):r.createElement(t)}}n[Jl]=e,n[Ou]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=n;e:switch(Nl(n,t,i),t){case"button":case"input":case"select":case"textarea":n=!!i.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&eg(e)}}return oa(e),e.flags&=-16777217,null;case 6:if(n&&e.stateNode!=null)n.memoizedProps!==i&&eg(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Dt(166));if(n=by.current,C1(e)){if(n=e.stateNode,t=e.memoizedProps,i=null,r=Bc,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}n[Jl]=e,n=!!(n.nodeValue===t||i!==null&&i.suppressHydrationWarning===!0||Kte(n.nodeValue,t)),n||pb(e)}else n=HN(n).createTextNode(i),n[Jl]=e,e.stateNode=n}return oa(e),null;case 13:if(i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(r=C1(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(Dt(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Dt(317));r[Jl]=e}else EA(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oa(e),r=!1}else r=E7(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(_g(e),e):(_g(e),null)}if(_g(e),e.flags&128)return e.lanes=t,e;if(t=i!==null,n=n!==null&&n.memoizedState!==null,t){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return t!==n&&t&&(e.child.flags|=8192),IR(e,e.updateQueue),oa(e),null;case 4:return CT(),n===null&&ej(e.stateNode.containerInfo),oa(e),null;case 10:return Cg(e.type),oa(e),null;case 19:if(fl(Lo),r=e.memoizedState,r===null)return oa(e),null;if(i=(e.flags&128)!==0,s=r.rendering,s===null)if(i)M1(r,!1);else{if(Aa!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=NN(n),s!==null){for(e.flags|=128,M1(r,!1),n=s.updateQueue,e.updateQueue=n,IR(e,n),e.subtreeFlags=0,n=t,t=e.child;t!==null;)pee(t,n),t=t.sibling;return Zs(Lo,Lo.current&1|2),e.child}n=n.sibling}r.tail!==null&&wp()>UN&&(e.flags|=128,i=!0,M1(r,!1),e.lanes=4194304)}else{if(!i)if(n=NN(s),n!==null){if(e.flags|=128,i=!0,n=n.updateQueue,e.updateQueue=n,IR(e,n),M1(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Ur)return oa(e),null}else 2*wp()-r.renderingStartTime>UN&&t!==536870912&&(e.flags|=128,i=!0,M1(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(n=r.last,n!==null?n.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=wp(),e.sibling=null,n=Lo.current,Zs(Lo,i?n&1|2:n&1),e):(oa(e),null);case 22:case 23:return _g(e),P8(),i=e.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?t&536870912&&!(e.flags&128)&&(oa(e),e.subtreeFlags&6&&(e.flags|=8192)):oa(e),t=e.updateQueue,t!==null&&IR(e,t.retryQueue),t=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==t&&(e.flags|=2048),n!==null&&fl(Z_),null;case 24:return t=null,n!==null&&(t=n.memoizedState.cache),e.memoizedState.cache!==t&&(e.flags|=2048),Cg(Po),oa(e),null;case 25:return null;case 30:return null}throw Error(Dt(156,e.tag))}function WTe(n,e){switch(R8(e),e.tag){case 1:return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Cg(Po),CT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 26:case 27:case 5:return bN(e),null;case 13:if(_g(e),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Dt(340));EA()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return fl(Lo),null;case 4:return CT(),null;case 10:return Cg(e.type),null;case 22:case 23:return _g(e),P8(),n!==null&&fl(Z_),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 24:return Cg(Po),null;case 25:return null;default:return null}}function pte(n,e){switch(R8(e),e.tag){case 3:Cg(Po),CT();break;case 26:case 27:case 5:bN(e);break;case 4:CT();break;case 13:_g(e);break;case 19:fl(Lo);break;case 10:Cg(e.type);break;case 22:case 23:_g(e),P8(),n!==null&&fl(Z_);break;case 24:Cg(Po)}}function MA(n,e){try{var t=e.updateQueue,i=t!==null?t.lastEffect:null;if(i!==null){var r=i.next;t=r;do{if((t.tag&n)===n){i=void 0;var s=t.create,a=t.inst;i=s(),a.destroy=i}t=t.next}while(t!==r)}}catch(o){fs(e,e.return,o)}}function Hy(n,e,t){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&n)===n){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=t,c=o;try{c()}catch(u){fs(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){fs(e,e.return,u)}}function mte(n){var e=n.updateQueue;if(e!==null){var t=n.stateNode;try{See(e,t)}catch(i){fs(n,n.return,i)}}}function gte(n,e,t){t.props=vb(n.type,n.memoizedProps),t.state=n.memoizedState;try{t.componentWillUnmount()}catch(i){fs(n,e,i)}}function Aw(n,e){try{var t=n.ref;if(t!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof t=="function"?n.refCleanup=t(i):t.current=i}}catch(r){fs(n,e,r)}}function bp(n,e){var t=n.ref,i=n.refCleanup;if(t!==null)if(typeof i=="function")try{i()}catch(r){fs(n,e,r)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(r){fs(n,e,r)}else t.current=null}function vte(n){var e=n.type,t=n.memoizedProps,i=n.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":t.autoFocus&&i.focus();break e;case"img":t.src?i.src=t.src:t.srcSet&&(i.srcset=t.srcSet)}}catch(r){fs(n,n.return,r)}}function bB(n,e,t){try{var i=n.stateNode;pxe(i,n.type,t,e),i[Ou]=e}catch(r){fs(n,n.return,r)}}function yte(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&c0(n.type)||n.tag===4}function SB(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yte(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&c0(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function oz(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(n,e):(e=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,e.appendChild(n),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=eD));else if(i!==4&&(i===27&&c0(n.type)&&(t=n.stateNode,e=null),n=n.child,n!==null))for(oz(n,e,t),n=n.sibling;n!==null;)oz(n,e,t),n=n.sibling}function LN(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(i===27&&c0(n.type)&&(t=n.stateNode),n=n.child,n!==null))for(LN(n,e,t),n=n.sibling;n!==null;)LN(n,e,t),n=n.sibling}function _te(n){var e=n.stateNode,t=n.memoizedProps;try{for(var i=n.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Nl(e,i,t),e[Jl]=n,e[Ou]=t}catch(s){fs(n,n.return,s)}}var hg=!1,Ga=!1,EB=!1,W7=typeof WeakSet=="function"?WeakSet:Set,ll=null;function YTe(n,e){if(n=n.containerInfo,mz=$N,n=aee(n),x8(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===r&&(o=a),d===s&&++u===i&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(gz={focusedElem:n,selectionRange:t},$N=!1,ll=e;ll!==null;)if(e=ll,n=e.child,(e.subtreeFlags&1024)!==0&&n!==null)n.return=e,ll=n;else for(;ll!==null;){switch(e=ll,s=e.alternate,n=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&s!==null){n=void 0,t=e,r=s.memoizedProps,s=s.memoizedState,i=t.stateNode;try{var m=vb(t.type,r,t.elementType===t.type);n=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=n}catch(v){fs(t,t.return,v)}}break;case 3:if(n&1024){if(n=e.stateNode.containerInfo,t=n.nodeType,t===9)yz(n);else if(t===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":yz(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(Dt(163))}if(n=e.sibling,n!==null){n.return=e.return,ll=n;break}ll=e.return}}function bte(n,e,t){var i=t.flags;switch(t.tag){case 0:case 11:case 15:zv(n,t),i&4&&MA(5,t);break;case 1:if(zv(n,t),i&4)if(n=t.stateNode,e===null)try{n.componentDidMount()}catch(a){fs(t,t.return,a)}else{var r=vb(t.type,e.memoizedProps);e=e.memoizedState;try{n.componentDidUpdate(r,e,n.__reactInternalSnapshotBeforeUpdate)}catch(a){fs(t,t.return,a)}}i&64&&mte(t),i&512&&Aw(t,t.return);break;case 3:if(zv(n,t),i&64&&(n=t.updateQueue,n!==null)){if(e=null,t.child!==null)switch(t.child.tag){case 27:case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}try{See(n,e)}catch(a){fs(t,t.return,a)}}break;case 27:e===null&&i&4&&_te(t);case 26:case 5:zv(n,t),e===null&&i&4&&vte(t),i&512&&Aw(t,t.return);break;case 12:zv(n,t);break;case 13:zv(n,t),i&4&&Tte(n,t),i&64&&(n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(t=ixe.bind(null,t),Sxe(n,t))));break;case 22:if(i=t.memoizedState!==null||hg,!i){e=e!==null&&e.memoizedState!==null||Ga,r=hg;var s=Ga;hg=i,(Ga=e)&&!s?Kv(n,t,(t.subtreeFlags&8772)!==0):zv(n,t),hg=r,Ga=s}break;case 30:break;default:zv(n,t)}}function Ste(n){var e=n.alternate;e!==null&&(n.alternate=null,Ste(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&y8(e)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var $s=null,yu=!1;function tg(n,e,t){for(t=t.child;t!==null;)Ete(n,e,t),t=t.sibling}function Ete(n,e,t){if(yh&&typeof yh.onCommitFiberUnmount=="function")try{yh.onCommitFiberUnmount(vA,t)}catch{}switch(t.tag){case 26:Ga||bp(t,e),tg(n,e,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:Ga||bp(t,e);var i=$s,r=yu;c0(t.type)&&($s=t.stateNode,yu=!1),tg(n,e,t),Iw(t.stateNode),$s=i,yu=r;break;case 5:Ga||bp(t,e);case 6:if(i=$s,r=yu,$s=null,tg(n,e,t),$s=i,yu=r,$s!==null)if(yu)try{($s.nodeType===9?$s.body:$s.nodeName==="HTML"?$s.ownerDocument.body:$s).removeChild(t.stateNode)}catch(s){fs(t,e,s)}else try{$s.removeChild(t.stateNode)}catch(s){fs(t,e,s)}break;case 18:$s!==null&&(yu?(n=$s,s9(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.stateNode),bC(n)):s9($s,t.stateNode));break;case 4:i=$s,r=yu,$s=t.stateNode.containerInfo,yu=!0,tg(n,e,t),$s=i,yu=r;break;case 0:case 11:case 14:case 15:Ga||Hy(2,t,e),Ga||Hy(4,t,e),tg(n,e,t);break;case 1:Ga||(bp(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"&&gte(t,e,i)),tg(n,e,t);break;case 21:tg(n,e,t);break;case 22:Ga=(i=Ga)||t.memoizedState!==null,tg(n,e,t),Ga=i;break;default:tg(n,e,t)}}function Tte(n,e){if(e.memoizedState===null&&(n=e.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bC(n)}catch(t){fs(e,e.return,t)}}function XTe(n){switch(n.tag){case 13:case 19:var e=n.stateNode;return e===null&&(e=n.stateNode=new W7),e;case 22:return n=n.stateNode,e=n._retryCache,e===null&&(e=n._retryCache=new W7),e;default:throw Error(Dt(435,n.tag))}}function TB(n,e){var t=XTe(n);e.forEach(function(i){var r=rxe.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}function oh(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i],s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(c0(o.type)){$s=o.stateNode,yu=!1;break e}break;case 5:$s=o.stateNode,yu=!1;break e;case 3:case 4:$s=o.stateNode.containerInfo,yu=!0;break e}o=o.return}if($s===null)throw Error(Dt(160));Ete(s,a,r),$s=null,yu=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)xte(e,n),e=e.sibling}var Qd=null;function xte(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:oh(e,n),lh(n),i&4&&(Hy(3,n,n.return),MA(3,n),Hy(5,n,n.return));break;case 1:oh(e,n),lh(n),i&512&&(Ga||t===null||bp(t,t.return)),i&64&&hg&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(t=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=t===null?i:t.concat(i))));break;case 26:var r=Qd;if(oh(e,n),lh(n),i&512&&(Ga||t===null||bp(t,t.return)),i&4){var s=t!==null?t.memoizedState:null;if(i=n.memoizedState,t===null)if(i===null)if(n.stateNode===null){e:{i=n.type,t=n.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[bA]||s[Jl]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Nl(s,i,t),s[Jl]=n,hl(s),i=s;break e;case"link":var a=u9("link","href",r).get(i+(t.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&s.getAttribute("rel")===(t.rel==null?null:t.rel)&&s.getAttribute("title")===(t.title==null?null:t.title)&&s.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Nl(s,i,t),r.head.appendChild(s);break;case"meta":if(a=u9("meta","content",r).get(i+(t.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(t.content==null?null:""+t.content)&&s.getAttribute("name")===(t.name==null?null:t.name)&&s.getAttribute("property")===(t.property==null?null:t.property)&&s.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&s.getAttribute("charset")===(t.charSet==null?null:t.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Nl(s,i,t),r.head.appendChild(s);break;default:throw Error(Dt(468,i))}s[Jl]=n,hl(s),i=s}n.stateNode=i}else h9(r,n.type,n.stateNode);else n.stateNode=c9(r,i,n.memoizedProps);else s!==i?(s===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):s.count--,i===null?h9(r,n.type,n.stateNode):c9(r,i,n.memoizedProps)):i===null&&n.stateNode!==null&&bB(n,n.memoizedProps,t.memoizedProps)}break;case 27:oh(e,n),lh(n),i&512&&(Ga||t===null||bp(t,t.return)),t!==null&&i&4&&bB(n,n.memoizedProps,t.memoizedProps);break;case 5:if(oh(e,n),lh(n),i&512&&(Ga||t===null||bp(t,t.return)),n.flags&32){r=n.stateNode;try{MT(r,"")}catch(f){fs(n,n.return,f)}}i&4&&n.stateNode!=null&&(r=n.memoizedProps,bB(n,r,t!==null?t.memoizedProps:r)),i&1024&&(EB=!0);break;case 6:if(oh(e,n),lh(n),i&4){if(n.stateNode===null)throw Error(Dt(162));i=n.memoizedProps,t=n.stateNode;try{t.nodeValue=i}catch(f){fs(n,n.return,f)}}break;case 3:if(zO=null,r=Qd,Qd=VN(e.containerInfo),oh(e,n),Qd=r,lh(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{bC(e.containerInfo)}catch(f){fs(n,n.return,f)}EB&&(EB=!1,wte(n));break;case 4:i=Qd,Qd=VN(n.stateNode.containerInfo),oh(e,n),lh(n),Qd=i;break;case 12:oh(e,n),lh(n);break;case 13:oh(e,n),lh(n),n.child.flags&8192&&n.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(Z8=wp()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,TB(n,i)));break;case 22:r=n.memoizedState!==null;var l=t!==null&&t.memoizedState!==null,c=hg,u=Ga;if(hg=c||r,Ga=u||l,oh(e,n),Ga=u,hg=c,lh(n),i&8192)e:for(e=n.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(t===null||l||hg||Ga||w_(n)),t=null,e=n;;){if(e.tag===5||e.tag===26){if(t===null){l=t=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var h=l.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(f){fs(l,l.return,f)}}}else if(e.tag===6){if(t===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(f){fs(l,l.return,f)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===n)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;t===e&&(t=null),e=e.return}t===e&&(t=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=n.updateQueue,i!==null&&(t=i.retryQueue,t!==null&&(i.retryQueue=null,TB(n,t))));break;case 19:oh(e,n),lh(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,TB(n,i)));break;case 30:break;case 21:break;default:oh(e,n),lh(n)}}function lh(n){var e=n.flags;if(e&2){try{for(var t,i=n.return;i!==null;){if(yte(i)){t=i;break}i=i.return}if(t==null)throw Error(Dt(160));switch(t.tag){case 27:var r=t.stateNode,s=SB(n);LN(n,s,r);break;case 5:var a=t.stateNode;t.flags&32&&(MT(a,""),t.flags&=-33);var o=SB(n);LN(n,o,a);break;case 3:case 4:var l=t.stateNode.containerInfo,c=SB(n);oz(n,c,l);break;default:throw Error(Dt(161))}}catch(u){fs(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function wte(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var e=n;wte(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),n=n.sibling}}function zv(n,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)bte(n,e.alternate,e),e=e.sibling}function w_(n){for(n=n.child;n!==null;){var e=n;switch(e.tag){case 0:case 11:case 14:case 15:Hy(4,e,e.return),w_(e);break;case 1:bp(e,e.return);var t=e.stateNode;typeof t.componentWillUnmount=="function"&&gte(e,e.return,t),w_(e);break;case 27:Iw(e.stateNode);case 26:case 5:bp(e,e.return),w_(e);break;case 22:e.memoizedState===null&&w_(e);break;case 30:w_(e);break;default:w_(e)}n=n.sibling}}function Kv(n,e,t){for(t=t&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=n,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Kv(r,s,t),MA(4,s);break;case 1:if(Kv(r,s,t),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){fs(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)bee(l[r],o)}catch(c){fs(i,i.return,c)}}t&&a&64&&mte(s),Aw(s,s.return);break;case 27:_te(s);case 26:case 5:Kv(r,s,t),t&&i===null&&a&4&&vte(s),Aw(s,s.return);break;case 12:Kv(r,s,t);break;case 13:Kv(r,s,t),t&&a&4&&Tte(r,s);break;case 22:s.memoizedState===null&&Kv(r,s,t),Aw(s,s.return);break;case 30:break;default:Kv(r,s,t)}e=e.sibling}}function W8(n,e){var t=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==t&&(n!=null&&n.refCount++,t!=null&&xA(t))}function Y8(n,e){n=null,e.alternate!==null&&(n=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==n&&(e.refCount++,n!=null&&xA(n))}function ap(n,e,t,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cte(n,e,t,i),e=e.sibling}function Cte(n,e,t,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:ap(n,e,t,i),r&2048&&MA(9,e);break;case 1:ap(n,e,t,i);break;case 3:ap(n,e,t,i),r&2048&&(n=null,e.alternate!==null&&(n=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==n&&(e.refCount++,n!=null&&xA(n)));break;case 12:if(r&2048){ap(n,e,t,i),n=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(l){fs(e,e.return,l)}}else ap(n,e,t,i);break;case 13:ap(n,e,t,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?ap(n,e,t,i):Mw(n,e):s._visibility&2?ap(n,e,t,i):(s._visibility|=2,fE(n,e,t,i,(e.subtreeFlags&10256)!==0)),r&2048&&W8(a,e);break;case 24:ap(n,e,t,i),r&2048&&Y8(e.alternate,e);break;default:ap(n,e,t,i)}}function fE(n,e,t,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=n,a=e,o=t,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:fE(s,a,o,l,r),MA(8,a);break;case 23:break;case 22:var u=a.stateNode;a.memoizedState!==null?u._visibility&2?fE(s,a,o,l,r):Mw(s,a):(u._visibility|=2,fE(s,a,o,l,r)),r&&c&2048&&W8(a.alternate,a);break;case 24:fE(s,a,o,l,r),r&&c&2048&&Y8(a.alternate,a);break;default:fE(s,a,o,l,r)}e=e.sibling}}function Mw(n,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var t=n,i=e,r=i.flags;switch(i.tag){case 22:Mw(t,i),r&2048&&W8(i.alternate,i);break;case 24:Mw(t,i),r&2048&&Y8(i.alternate,i);break;default:Mw(t,i)}e=e.sibling}}var K1=8192;function KS(n){if(n.subtreeFlags&K1)for(n=n.child;n!==null;)Ate(n),n=n.sibling}function Ate(n){switch(n.tag){case 26:KS(n),n.flags&K1&&n.memoizedState!==null&&Dxe(Qd,n.memoizedState,n.memoizedProps);break;case 5:KS(n);break;case 3:case 4:var e=Qd;Qd=VN(n.stateNode.containerInfo),KS(n),Qd=e;break;case 22:n.memoizedState===null&&(e=n.alternate,e!==null&&e.memoizedState!==null?(e=K1,K1=16777216,KS(n),K1=e):KS(n));break;default:KS(n)}}function Mte(n){var e=n.alternate;if(e!==null&&(n=e.child,n!==null)){e.child=null;do e=n.sibling,n.sibling=null,n=e;while(n!==null)}}function R1(n){var e=n.deletions;if(n.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var i=e[t];ll=i,Ote(i,n)}Mte(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rte(n),n=n.sibling}function Rte(n){switch(n.tag){case 0:case 11:case 15:R1(n),n.flags&2048&&Hy(9,n,n.return);break;case 3:R1(n);break;case 12:R1(n);break;case 22:var e=n.stateNode;n.memoizedState!==null&&e._visibility&2&&(n.return===null||n.return.tag!==13)?(e._visibility&=-3,BO(n)):R1(n);break;default:R1(n)}}function BO(n){var e=n.deletions;if(n.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var i=e[t];ll=i,Ote(i,n)}Mte(n)}for(n=n.child;n!==null;){switch(e=n,e.tag){case 0:case 11:case 15:Hy(8,e,e.return),BO(e);break;case 22:t=e.stateNode,t._visibility&2&&(t._visibility&=-3,BO(e));break;default:BO(e)}n=n.sibling}}function Ote(n,e){for(;ll!==null;){var t=ll;switch(t.tag){case 0:case 11:case 15:Hy(8,t,e);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var i=t.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:xA(t.memoizedState.cache)}if(i=t.child,i!==null)i.return=t,ll=i;else e:for(t=n;ll!==null;){i=ll;var r=i.sibling,s=i.return;if(Ste(i),i===t){ll=null;break e}if(r!==null){r.return=s,ll=r;break e}ll=s}}}var KTe={getCacheForType:function(n){var e=Ql(Po),t=e.data.get(n);return t===void 0&&(t=n(),e.data.set(n,t)),t}},ZTe=typeof WeakMap=="function"?WeakMap:Map,Xr=0,Ts=null,Qi=null,pr=0,Yr=0,hh=null,my=!1,Rx=!1,X8=!1,Lg=0,Aa=0,Vy=0,J_=0,K8=0,dd=0,PT=0,Rw=null,bu=null,lz=!1,Z8=0,UN=1/0,BN=null,Ty=null,Ol=0,xy=null,DT=null,JE=0,cz=0,uz=null,Ite=null,Ow=0,hz=null;function bh(){if(Xr&2&&pr!==0)return pr&-pr;if(pi.T!==null){var n=RT;return n!==0?n:Q8()}return HQ()}function Nte(){dd===0&&(dd=!(pr&536870912)||Ur?BQ():536870912);var n=_d.current;return n!==null&&(n.flags|=32),dd}function Sh(n,e,t){(n===Ts&&(Yr===2||Yr===9)||n.cancelPendingCommit!==null)&&(kT(n,0),gy(n,pr,dd,!1)),_A(n,t),(!(Xr&2)||n!==Ts)&&(n===Ts&&(!(Xr&2)&&(J_|=t),Aa===4&&gy(n,pr,dd,!1)),Vp(n))}function Pte(n,e,t){if(Xr&6)throw Error(Dt(327));var i=!t&&(e&124)===0&&(e&n.expiredLanes)===0||yA(n,e),r=i?exe(n,e):xB(n,e,!0),s=i;do{if(r===0){Rx&&!i&&gy(n,e,0,!1);break}else{if(t=n.current.alternate,s&&!JTe(t)){r=xB(n,e,!1),s=!1;continue}if(r===2){if(s=e,n.errorRecoveryDisabledLanes&s)var a=0;else a=n.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=n;r=Rw;var l=o.current.memoizedState.isDehydrated;if(l&&(kT(o,a).flags|=256),a=xB(o,a,!1),a!==2){if(X8&&!l){o.errorRecoveryDisabledLanes|=s,J_|=s,r=4;break e}s=bu,bu=r,s!==null&&(bu===null?bu=s:bu.push.apply(bu,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){kT(n,0),gy(n,e,0,!0);break}e:{switch(i=n,s=r,s){case 0:case 1:throw Error(Dt(345));case 4:if((e&4194048)!==e)break;case 6:gy(i,e,dd,!my);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(Dt(329))}if((e&62914560)===e&&(r=Z8+300-wp(),10<r)){if(gy(i,e,dd,!my),j2(i,0,!0)!==0)break e;i.timeoutHandle=Jte(Y7.bind(null,i,t,bu,BN,lz,e,dd,J_,PT,my,s,2,-0,0),r);break e}Y7(i,t,bu,BN,lz,e,dd,J_,PT,my,s,0,-0,0)}}break}while(!0);Vp(n)}function Y7(n,e,t,i,r,s,a,o,l,c,u,h,d,f){if(n.timeoutHandle=-1,h=e.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(gC={stylesheets:null,count:0,unsuspend:Pxe},Ate(e),h=kxe(),h!==null)){n.cancelPendingCommit=h(K7.bind(null,n,e,s,t,i,r,a,o,l,u,1,d,f)),gy(n,s,a,!c);return}K7(n,e,s,t,i,r,a,o,l)}function JTe(n){for(var e=n;;){var t=e.tag;if((t===0||t===11||t===15)&&e.flags&16384&&(t=e.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!xh(s(),r))return!1}catch{return!1}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gy(n,e,t,i){e&=~K8,e&=~J_,n.suspendedLanes|=e,n.pingedLanes&=~e,i&&(n.warmLanes|=e),i=n.expirationTimes;for(var r=e;0<r;){var s=31-_h(r),a=1<<s;i[s]=-1,r&=~a}t!==0&&zQ(n,t,e)}function Z2(){return Xr&6?!0:(RA(0),!1)}function J8(){if(Qi!==null){if(Yr===0)var n=Qi.return;else n=Qi,yg=Hb=null,B8(n),ZE=null,fC=0,n=Qi;for(;n!==null;)pte(n.alternate,n),n=n.return;Qi=null}}function kT(n,e){var t=n.timeoutHandle;t!==-1&&(n.timeoutHandle=-1,gxe(t)),t=n.cancelPendingCommit,t!==null&&(n.cancelPendingCommit=null,t()),J8(),Ts=n,Qi=t=wg(n.current,null),pr=e,Yr=0,hh=null,my=!1,Rx=yA(n,e),X8=!1,PT=dd=K8=J_=Vy=Aa=0,bu=Rw=null,lz=!1,e&8&&(e|=e&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=e;0<i;){var r=31-_h(i),s=1<<r;e|=n[r],i&=~s}return Lg=e,q2(),t}function Dte(n,e){Vi=null,pi.H=IN,e===wA||e===W2?(e=C7(),Yr=3):e===yee?(e=C7(),Yr=4):Yr=e===lte?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,hh=e,Qi===null&&(Aa=1,DN(n,ad(e,n.current)))}function kte(){var n=pi.H;return pi.H=IN,n===null?IN:n}function Lte(){var n=pi.A;return pi.A=KTe,n}function dz(){Aa=4,my||(pr&4194048)!==pr&&_d.current!==null||(Rx=!0),!(Vy&134217727)&&!(J_&134217727)||Ts===null||gy(Ts,pr,dd,!1)}function xB(n,e,t){var i=Xr;Xr|=2;var r=kte(),s=Lte();(Ts!==n||pr!==e)&&(BN=null,kT(n,e)),e=!1;var a=Aa;e:do try{if(Yr!==0&&Qi!==null){var o=Qi,l=hh;switch(Yr){case 8:J8(),a=6;break e;case 3:case 2:case 9:case 6:_d.current===null&&(e=!0);var c=Yr;if(Yr=0,hh=null,UE(n,o,l,c),t&&Rx){a=0;break e}break;default:c=Yr,Yr=0,hh=null,UE(n,o,l,c)}}QTe(),a=Aa;break}catch(u){Dte(n,u)}while(!0);return e&&n.shellSuspendCounter++,yg=Hb=null,Xr=i,pi.H=r,pi.A=s,Qi===null&&(Ts=null,pr=0,q2()),a}function QTe(){for(;Qi!==null;)Ute(Qi)}function exe(n,e){var t=Xr;Xr|=2;var i=kte(),r=Lte();Ts!==n||pr!==e?(BN=null,UN=wp()+500,kT(n,e)):Rx=yA(n,e);e:do try{if(Yr!==0&&Qi!==null){e=Qi;var s=hh;t:switch(Yr){case 1:Yr=0,hh=null,UE(n,e,s,1);break;case 2:case 9:if(w7(s)){Yr=0,hh=null,X7(e);break}e=function(){Yr!==2&&Yr!==9||Ts!==n||(Yr=7),Vp(n)},s.then(e,e);break e;case 3:Yr=7;break e;case 4:Yr=5;break e;case 7:w7(s)?(Yr=0,hh=null,X7(e)):(Yr=0,hh=null,UE(n,e,s,7));break;case 5:var a=null;switch(Qi.tag){case 26:a=Qi.memoizedState;case 5:case 27:var o=Qi;if(!a||nne(a)){Yr=0,hh=null;var l=o.sibling;if(l!==null)Qi=l;else{var c=o.return;c!==null?(Qi=c,J2(c)):Qi=null}break t}}Yr=0,hh=null,UE(n,e,s,5);break;case 6:Yr=0,hh=null,UE(n,e,s,6);break;case 8:J8(),Aa=6;break e;default:throw Error(Dt(462))}}txe();break}catch(u){Dte(n,u)}while(!0);return yg=Hb=null,pi.H=i,pi.A=r,Xr=t,Qi!==null?0:(Ts=null,pr=0,q2(),Aa)}function txe(){for(;Qi!==null&&!TEe();)Ute(Qi)}function Ute(n){var e=fte(n.alternate,n,Lg);n.memoizedProps=n.pendingProps,e===null?J2(n):Qi=e}function X7(n){var e=n,t=e.alternate;switch(e.tag){case 15:case 0:e=H7(t,e,e.pendingProps,e.type,void 0,pr);break;case 11:e=H7(t,e,e.pendingProps,e.type.render,e.ref,pr);break;case 5:B8(e);default:pte(t,e),e=Qi=pee(e,Lg),e=fte(t,e,Lg)}n.memoizedProps=n.pendingProps,e===null?J2(n):Qi=e}function UE(n,e,t,i){yg=Hb=null,B8(e),ZE=null,fC=0;var r=e.return;try{if(GTe(n,r,e,t,pr)){Aa=1,DN(n,ad(t,n.current)),Qi=null;return}}catch(s){if(r!==null)throw Qi=r,s;Aa=1,DN(n,ad(t,n.current)),Qi=null;return}e.flags&32768?(Ur||i===1?n=!0:Rx||pr&536870912?n=!1:(my=n=!0,(i===2||i===9||i===3||i===6)&&(i=_d.current,i!==null&&i.tag===13&&(i.flags|=16384))),Bte(e,n)):J2(e)}function J2(n){var e=n;do{if(e.flags&32768){Bte(e,my);return}n=e.return;var t=$Te(e.alternate,e,Lg);if(t!==null){Qi=t;return}if(e=e.sibling,e!==null){Qi=e;return}Qi=e=n}while(e!==null);Aa===0&&(Aa=5)}function Bte(n,e){do{var t=WTe(n.alternate,n);if(t!==null){t.flags&=32767,Qi=t;return}if(t=n.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!e&&(n=n.sibling,n!==null)){Qi=n;return}Qi=n=t}while(n!==null);Aa=6,Qi=null}function K7(n,e,t,i,r,s,a,o,l){n.cancelPendingCommit=null;do Q2();while(Ol!==0);if(Xr&6)throw Error(Dt(327));if(e!==null){if(e===n.current)throw Error(Dt(177));if(s=e.lanes|e.childLanes,s|=w8,PEe(n,t,s,a,o,l),n===Ts&&(Qi=Ts=null,pr=0),DT=e,xy=n,JE=t,cz=s,uz=r,Ite=i,e.subtreeFlags&10256||e.flags&10256?(n.callbackNode=null,n.callbackPriority=0,sxe(SN,function(){return Vte(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=pi.T,pi.T=null,r=Fr.p,Fr.p=2,a=Xr,Xr|=4;try{YTe(n,e,t)}finally{Xr=a,Fr.p=r,pi.T=i}}Ol=1,Fte(),zte(),jte()}}function Fte(){if(Ol===1){Ol=0;var n=xy,e=DT,t=(e.flags&13878)!==0;if(e.subtreeFlags&13878||t){t=pi.T,pi.T=null;var i=Fr.p;Fr.p=2;var r=Xr;Xr|=4;try{xte(e,n);var s=gz,a=aee(n.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&see(o.ownerDocument.documentElement,o)){if(l!==null&&x8(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),m=o.textContent.length,v=Math.min(l.start,m),_=l.end===void 0?v:Math.min(l.end,m);!f.extend&&v>_&&(a=_,_=v,v=a);var y=v7(o,v),S=v7(o,_);if(y&&S&&(f.rangeCount!==1||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==S.node||f.focusOffset!==S.offset)){var T=h.createRange();T.setStart(y.node,y.offset),f.removeAllRanges(),v>_?(f.addRange(T),f.extend(S.node,S.offset)):(T.setEnd(S.node,S.offset),f.addRange(T))}}}}for(h=[],f=o;f=f.parentNode;)f.nodeType===1&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var x=h[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}$N=!!mz,gz=mz=null}finally{Xr=r,Fr.p=i,pi.T=t}}n.current=e,Ol=2}}function zte(){if(Ol===2){Ol=0;var n=xy,e=DT,t=(e.flags&8772)!==0;if(e.subtreeFlags&8772||t){t=pi.T,pi.T=null;var i=Fr.p;Fr.p=2;var r=Xr;Xr|=4;try{bte(n,e.alternate,e)}finally{Xr=r,Fr.p=i,pi.T=t}}Ol=3}}function jte(){if(Ol===4||Ol===3){Ol=0,xEe();var n=xy,e=DT,t=JE,i=Ite;e.subtreeFlags&10256||e.flags&10256?Ol=5:(Ol=0,DT=xy=null,Hte(n,n.pendingLanes));var r=n.pendingLanes;if(r===0&&(Ty=null),v8(t),e=e.stateNode,yh&&typeof yh.onCommitFiberRoot=="function")try{yh.onCommitFiberRoot(vA,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=pi.T,r=Fr.p,Fr.p=2,pi.T=null;try{for(var s=n.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{pi.T=e,Fr.p=r}}JE&3&&Q2(),Vp(n),r=n.pendingLanes,t&4194090&&r&42?n===hz?Ow++:(Ow=0,hz=n):Ow=0,RA(0)}}function Hte(n,e){(n.pooledCacheLanes&=e)===0&&(e=n.pooledCache,e!=null&&(n.pooledCache=null,xA(e)))}function Q2(n){return Fte(),zte(),jte(),Vte()}function Vte(){if(Ol!==5)return!1;var n=xy,e=cz;cz=0;var t=v8(JE),i=pi.T,r=Fr.p;try{Fr.p=32>t?32:t,pi.T=null,t=uz,uz=null;var s=xy,a=JE;if(Ol=0,DT=xy=null,JE=0,Xr&6)throw Error(Dt(331));var o=Xr;if(Xr|=4,Rte(s.current),Cte(s,s.current,a,t),Xr=o,RA(0,!1),yh&&typeof yh.onPostCommitFiberRoot=="function")try{yh.onPostCommitFiberRoot(vA,s)}catch{}return!0}finally{Fr.p=r,pi.T=i,Hte(n,e)}}function Z7(n,e,t){e=ad(t,e),e=rz(n.stateNode,e,2),n=Ey(n,e,2),n!==null&&(_A(n,2),Vp(n))}function fs(n,e,t){if(n.tag===3)Z7(n,n,t);else for(;e!==null;){if(e.tag===3){Z7(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ty===null||!Ty.has(i))){n=ad(t,n),t=ate(2),i=Ey(e,t,2),i!==null&&(ote(t,i,e,n),_A(i,2),Vp(i));break}}e=e.return}}function wB(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new ZTe;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(X8=!0,r.add(t),n=nxe.bind(null,n,e,t),e.then(n,n))}function nxe(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),n.pingedLanes|=n.suspendedLanes&t,n.warmLanes&=~t,Ts===n&&(pr&t)===t&&(Aa===4||Aa===3&&(pr&62914560)===pr&&300>wp()-Z8?!(Xr&2)&&kT(n,0):K8|=t,PT===pr&&(PT=0)),Vp(n)}function Gte(n,e){e===0&&(e=FQ()),n=Mx(n,e),n!==null&&(_A(n,e),Vp(n))}function ixe(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Gte(n,t)}function rxe(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(Dt(314))}i!==null&&i.delete(e),Gte(n,t)}function sxe(n,e){return m8(n,e)}var FN=null,pE=null,fz=!1,zN=!1,CB=!1,Q_=0;function Vp(n){n!==pE&&n.next===null&&(pE===null?FN=pE=n:pE=pE.next=n),zN=!0,fz||(fz=!0,oxe())}function RA(n,e){if(!CB&&zN){CB=!0;do for(var t=!1,i=FN;i!==null;){if(n!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-_h(42|n)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(t=!0,J7(i,s))}else s=pr,s=j2(i,i===Ts?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||yA(i,s)||(t=!0,J7(i,s));i=i.next}while(t);CB=!1}}function axe(){qte()}function qte(){zN=fz=!1;var n=0;Q_!==0&&(mxe()&&(n=Q_),Q_=0);for(var e=wp(),t=null,i=FN;i!==null;){var r=i.next,s=$te(i,e);s===0?(i.next=null,t===null?FN=r:t.next=r,r===null&&(pE=t)):(t=i,(n!==0||s&3)&&(zN=!0)),i=r}RA(n)}function $te(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes&-62914561;0<s;){var a=31-_h(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=NEe(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}if(e=Ts,t=pr,t=j2(n,n===e?t:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,t===0||n===e&&(Yr===2||Yr===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&J3(i),n.callbackNode=null,n.callbackPriority=0;if(!(t&3)||yA(n,t)){if(e=t&-t,e===n.callbackPriority)return e;switch(i!==null&&J3(i),v8(t)){case 2:case 8:t=LQ;break;case 32:t=SN;break;case 268435456:t=UQ;break;default:t=SN}return i=Wte.bind(null,n),t=m8(t,i),n.callbackPriority=e,n.callbackNode=t,e}return i!==null&&i!==null&&J3(i),n.callbackPriority=2,n.callbackNode=null,2}function Wte(n,e){if(Ol!==0&&Ol!==5)return n.callbackNode=null,n.callbackPriority=0,null;var t=n.callbackNode;if(Q2()&&n.callbackNode!==t)return null;var i=pr;return i=j2(n,n===Ts?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(Pte(n,i,e),$te(n,wp()),n.callbackNode!=null&&n.callbackNode===t?Wte.bind(null,n):null)}function J7(n,e){if(Q2())return null;Pte(n,e,!0)}function oxe(){vxe(function(){Xr&6?m8(kQ,axe):qte()})}function Q8(){return Q_===0&&(Q_=BQ()),Q_}function Q7(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:OO(""+n)}function e9(n,e){var t=e.ownerDocument.createElement("input");return t.name=e.name,t.value=e.value,n.id&&t.setAttribute("form",n.id),e.parentNode.insertBefore(t,e),n=new FormData(n),t.parentNode.removeChild(t),n}function lxe(n,e,t,i,r){if(e==="submit"&&t&&t.stateNode===r){var s=Q7((r[Ou]||null).action),a=i.submitter;a&&(e=(e=a[Ou]||null)?Q7(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new H2("action","action",null,i,r);n.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Q_!==0){var l=a?e9(r,a):new FormData(r);nz(t,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?e9(r,a):new FormData(r),nz(t,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var AB=0;AB<G4.length;AB++){var MB=G4[AB],cxe=MB.toLowerCase(),uxe=MB[0].toUpperCase()+MB.slice(1);Sf(cxe,"on"+uxe)}Sf(lee,"onAnimationEnd");Sf(cee,"onAnimationIteration");Sf(uee,"onAnimationStart");Sf("dblclick","onDoubleClick");Sf("focusin","onFocus");Sf("focusout","onBlur");Sf(ATe,"onTransitionRun");Sf(MTe,"onTransitionStart");Sf(RTe,"onTransitionCancel");Sf(hee,"onTransitionEnd");AT("onMouseEnter",["mouseout","mouseover"]);AT("onMouseLeave",["mouseout","mouseover"]);AT("onPointerEnter",["pointerout","pointerover"]);AT("onPointerLeave",["pointerout","pointerover"]);Fb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hxe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pC));function Yte(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){PN(u)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){PN(u)}r.currentTarget=null,s=l}}}}function Ji(n,e){var t=e[U4];t===void 0&&(t=e[U4]=new Set);var i=n+"__bubble";t.has(i)||(Xte(e,n,2,!1),t.add(i))}function RB(n,e,t){var i=0;e&&(i|=4),Xte(t,n,i,e)}var NR="_reactListening"+Math.random().toString(36).slice(2);function ej(n){if(!n[NR]){n[NR]=!0,VQ.forEach(function(t){t!=="selectionchange"&&(hxe.has(t)||RB(t,!1,n),RB(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[NR]||(e[NR]=!0,RB("selectionchange",!1,e))}}function Xte(n,e,t,i){switch(one(e)){case 2:var r=Bxe;break;case 8:r=Fxe;break;default:r=rj}t=r.bind(null,e,t,n),r=void 0,!j4||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function OB(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=ME(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}ZQ(function(){var c=s,u=b8(t),h=[];e:{var d=dee.get(n);if(d!==void 0){var f=H2,m=n;switch(n){case"keypress":if(NO(t)===0)break e;case"keydown":case"keyup":f=sTe;break;case"focusin":m="focus",f=aB;break;case"focusout":m="blur",f=aB;break;case"beforeblur":case"afterblur":f=aB;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=o7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=WEe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=lTe;break;case lee:case cee:case uee:f=KEe;break;case hee:f=uTe;break;case"scroll":case"scrollend":f=qEe;break;case"wheel":f=dTe;break;case"copy":case"cut":case"paste":f=JEe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=c7;break;case"toggle":case"beforetoggle":f=pTe}var v=(e&4)!==0,_=!v&&(n==="scroll"||n==="scrollend"),y=v?d!==null?d+"Capture":null:d;v=[];for(var S=c,T;S!==null;){var x=S;if(T=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||T===null||y===null||(x=lC(S,y),x!=null&&v.push(mC(S,x,T))),_)break;S=S.return}0<v.length&&(d=new f(d,m,null,t,u),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==z4&&(m=t.relatedTarget||t.fromElement)&&(ME(m)||m[Cx]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=c,m=m?ME(m):null,m!==null&&(_=gA(m),v=m.tag,m!==_||v!==5&&v!==27&&v!==6)&&(m=null)):(f=null,m=c),f!==m)){if(v=o7,x="onMouseLeave",y="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=c7,x="onPointerLeave",y="onPointerEnter",S="pointer"),_=f==null?d:X1(f),T=m==null?d:X1(m),d=new v(x,S+"leave",f,t,u),d.target=_,d.relatedTarget=T,x=null,ME(u)===c&&(v=new v(y,S+"enter",m,t,u),v.target=T,v.relatedTarget=_,x=v),_=x,f&&m)t:{for(v=f,y=m,S=0,T=v;T;T=ZS(T))S++;for(T=0,x=y;x;x=ZS(x))T++;for(;0<S-T;)v=ZS(v),S--;for(;0<T-S;)y=ZS(y),T--;for(;S--;){if(v===y||y!==null&&v===y.alternate)break t;v=ZS(v),y=ZS(y)}v=null}else v=null;f!==null&&t9(h,d,f,v,!1),m!==null&&_!==null&&t9(h,_,m,v,!0)}}e:{if(d=c?X1(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var I=f7;else if(d7(d))if(iee)I=xTe;else{I=ETe;var R=STe}else f=d.nodeName,!f||f.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&_8(c.elementType)&&(I=f7):I=TTe;if(I&&(I=I(n,c))){nee(h,I,t,u);break e}R&&R(n,d,c),n==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&F4(d,"number",d.value)}switch(R=c?X1(c):window,n){case"focusin":(d7(R)||R.contentEditable==="true")&&(IE=R,H4=c,bw=null);break;case"focusout":bw=H4=IE=null;break;case"mousedown":V4=!0;break;case"contextmenu":case"mouseup":case"dragend":V4=!1,y7(h,t,u);break;case"selectionchange":if(CTe)break;case"keydown":case"keyup":y7(h,t,u)}var N;if(T8)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else OE?eee(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(QQ&&t.locale!=="ko"&&(OE||L!=="onCompositionStart"?L==="onCompositionEnd"&&OE&&(N=JQ()):(py=u,S8="value"in py?py.value:py.textContent,OE=!0)),R=jN(c,L),0<R.length&&(L=new l7(L,n,null,t,u),h.push({event:L,listeners:R}),N?L.data=N:(N=tee(t),N!==null&&(L.data=N)))),(N=gTe?vTe(n,t):yTe(n,t))&&(L=jN(c,"onBeforeInput"),0<L.length&&(R=new l7("onBeforeInput","beforeinput",null,t,u),h.push({event:R,listeners:L}),R.data=N)),lxe(h,n,c,t,u)}Yte(h,e)})}function mC(n,e,t){return{instance:n,listener:e,currentTarget:t}}function jN(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=lC(n,t),r!=null&&i.unshift(mC(n,r,s)),r=lC(n,e),r!=null&&i.push(mC(n,r,s))),n.tag===3)return i;n=n.return}return[]}function ZS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function t9(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=lC(t,s),c!=null&&a.unshift(mC(t,c,l))):r||(c=lC(t,s),c!=null&&a.push(mC(t,c,l)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var dxe=/\r\n?/g,fxe=/\u0000|\uFFFD/g;function n9(n){return(typeof n=="string"?n:""+n).replace(dxe,`
`).replace(fxe,"")}function Kte(n,e){return e=n9(e),n9(n)===e}function eD(){}function is(n,e,t,i,r,s){switch(t){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||MT(n,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&MT(n,""+i);break;case"className":wR(n,"class",i);break;case"tabIndex":wR(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":wR(n,t,i);break;case"style":KQ(n,i,s);break;case"data":if(e!=="object"){wR(n,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||t!=="href")){n.removeAttribute(t);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(t);break}i=OO(""+i),n.setAttribute(t,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(t==="formAction"?(e!=="input"&&is(n,e,"name",r.name,r,null),is(n,e,"formEncType",r.formEncType,r,null),is(n,e,"formMethod",r.formMethod,r,null),is(n,e,"formTarget",r.formTarget,r,null)):(is(n,e,"encType",r.encType,r,null),is(n,e,"method",r.method,r,null),is(n,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(t);break}i=OO(""+i),n.setAttribute(t,i);break;case"onClick":i!=null&&(n.onclick=eD);break;case"onScroll":i!=null&&Ji("scroll",n);break;case"onScrollEnd":i!=null&&Ji("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(Dt(61));if(t=i.__html,t!=null){if(r.children!=null)throw Error(Dt(60));n.innerHTML=t}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}t=OO(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(t,""+i):n.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(t,""):n.removeAttribute(t);break;case"capture":case"download":i===!0?n.setAttribute(t,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(t,i):n.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(t,i):n.removeAttribute(t);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(t):n.setAttribute(t,i);break;case"popover":Ji("beforetoggle",n),Ji("toggle",n),RO(n,"popover",i);break;case"xlinkActuate":Qm(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Qm(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Qm(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Qm(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Qm(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Qm(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Qm(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Qm(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Qm(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":RO(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=VEe.get(t)||t,RO(n,t,i))}}function pz(n,e,t,i,r,s){switch(t){case"style":KQ(n,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(Dt(61));if(t=i.__html,t!=null){if(r.children!=null)throw Error(Dt(60));n.innerHTML=t}}break;case"children":typeof i=="string"?MT(n,i):(typeof i=="number"||typeof i=="bigint")&&MT(n,""+i);break;case"onScroll":i!=null&&Ji("scroll",n);break;case"onScrollEnd":i!=null&&Ji("scrollend",n);break;case"onClick":i!=null&&(n.onclick=eD);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!GQ.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(r=t.endsWith("Capture"),e=t.slice(2,r?t.length-7:void 0),s=n[Ou]||null,s=s!=null?s[t]:null,typeof s=="function"&&n.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(t in n?n[t]=null:n.hasAttribute(t)&&n.removeAttribute(t)),n.addEventListener(e,i,r);break e}t in n?n[t]=i:i===!0?n.setAttribute(t,""):RO(n,t,i)}}}function Nl(n,e,t){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ji("error",n),Ji("load",n);var i=!1,r=!1,s;for(s in t)if(t.hasOwnProperty(s)){var a=t[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Dt(137,e));default:is(n,e,s,a,t,null)}}r&&is(n,e,"srcSet",t.srcSet,t,null),i&&is(n,e,"src",t.src,t,null);return;case"input":Ji("invalid",n);var o=s=a=r=null,l=null,c=null;for(i in t)if(t.hasOwnProperty(i)){var u=t[i];if(u!=null)switch(i){case"name":r=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(Dt(137,e));break;default:is(n,e,i,u,t,null)}}WQ(n,s,o,l,c,a,r,!1),EN(n);return;case"select":Ji("invalid",n),i=a=s=null;for(r in t)if(t.hasOwnProperty(r)&&(o=t[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:is(n,e,r,o,t,null)}e=s,t=a,n.multiple=!!i,e!=null?$E(n,!!i,e,!1):t!=null&&$E(n,!!i,t,!0);return;case"textarea":Ji("invalid",n),s=r=i=null;for(a in t)if(t.hasOwnProperty(a)&&(o=t[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(Dt(91));break;default:is(n,e,a,o,t,null)}XQ(n,i,r,s),EN(n);return;case"option":for(l in t)if(t.hasOwnProperty(l)&&(i=t[l],i!=null))switch(l){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:is(n,e,l,i,t,null)}return;case"dialog":Ji("beforetoggle",n),Ji("toggle",n),Ji("cancel",n),Ji("close",n);break;case"iframe":case"object":Ji("load",n);break;case"video":case"audio":for(i=0;i<pC.length;i++)Ji(pC[i],n);break;case"image":Ji("error",n),Ji("load",n);break;case"details":Ji("toggle",n);break;case"embed":case"source":case"link":Ji("error",n),Ji("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in t)if(t.hasOwnProperty(c)&&(i=t[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(Dt(137,e));default:is(n,e,c,i,t,null)}return;default:if(_8(e)){for(u in t)t.hasOwnProperty(u)&&(i=t[u],i!==void 0&&pz(n,e,u,i,t,void 0));return}}for(o in t)t.hasOwnProperty(o)&&(i=t[o],i!=null&&is(n,e,o,i,t,null))}function pxe(n,e,t,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,u=null;for(f in t){var h=t[f];if(t.hasOwnProperty(f)&&h!=null)switch(f){case"checked":break;case"value":break;case"defaultValue":l=h;default:i.hasOwnProperty(f)||is(n,e,f,null,i,h)}}for(var d in i){var f=i[d];if(h=t[d],i.hasOwnProperty(d)&&(f!=null||h!=null))switch(d){case"type":s=f;break;case"name":r=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":a=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(Dt(137,e));break;default:f!==h&&is(n,e,d,f,i,h)}}B4(n,a,o,l,c,u,s,r);return;case"select":f=a=o=d=null;for(s in t)if(l=t[s],t.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":f=l;default:i.hasOwnProperty(s)||is(n,e,s,null,i,l)}for(r in i)if(s=i[r],l=t[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":d=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&is(n,e,r,s,i,l)}e=o,t=a,i=f,d!=null?$E(n,!!t,d,!1):!!i!=!!t&&(e!=null?$E(n,!!t,e,!0):$E(n,!!t,t?[]:"",!1));return;case"textarea":f=d=null;for(o in t)if(r=t[o],t.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:is(n,e,o,null,i,r)}for(a in i)if(r=i[a],s=t[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":d=r;break;case"defaultValue":f=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(Dt(91));break;default:r!==s&&is(n,e,a,r,i,s)}YQ(n,d,f);return;case"option":for(var m in t)if(d=t[m],t.hasOwnProperty(m)&&d!=null&&!i.hasOwnProperty(m))switch(m){case"selected":n.selected=!1;break;default:is(n,e,m,null,i,d)}for(l in i)if(d=i[l],f=t[l],i.hasOwnProperty(l)&&d!==f&&(d!=null||f!=null))switch(l){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:is(n,e,l,d,i,f)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in t)d=t[v],t.hasOwnProperty(v)&&d!=null&&!i.hasOwnProperty(v)&&is(n,e,v,null,i,d);for(c in i)if(d=i[c],f=t[c],i.hasOwnProperty(c)&&d!==f&&(d!=null||f!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Dt(137,e));break;default:is(n,e,c,d,i,f)}return;default:if(_8(e)){for(var _ in t)d=t[_],t.hasOwnProperty(_)&&d!==void 0&&!i.hasOwnProperty(_)&&pz(n,e,_,void 0,i,d);for(u in i)d=i[u],f=t[u],!i.hasOwnProperty(u)||d===f||d===void 0&&f===void 0||pz(n,e,u,d,i,f);return}}for(var y in t)d=t[y],t.hasOwnProperty(y)&&d!=null&&!i.hasOwnProperty(y)&&is(n,e,y,null,i,d);for(h in i)d=i[h],f=t[h],!i.hasOwnProperty(h)||d===f||d==null&&f==null||is(n,e,h,d,i,f)}var mz=null,gz=null;function HN(n){return n.nodeType===9?n:n.ownerDocument}function i9(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zte(n,e){if(n===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&e==="foreignObject"?0:n}function vz(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var IB=null;function mxe(){var n=window.event;return n&&n.type==="popstate"?n===IB?!1:(IB=n,!0):(IB=null,!1)}var Jte=typeof setTimeout=="function"?setTimeout:void 0,gxe=typeof clearTimeout=="function"?clearTimeout:void 0,r9=typeof Promise=="function"?Promise:void 0,vxe=typeof queueMicrotask=="function"?queueMicrotask:typeof r9<"u"?function(n){return r9.resolve(null).then(n).catch(yxe)}:Jte;function yxe(n){setTimeout(function(){throw n})}function c0(n){return n==="head"}function s9(n,e){var t=e,i=0,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(0<i&&8>i){t=i;var a=n.ownerDocument;if(t&1&&Iw(a.documentElement),t&2&&Iw(a.body),t&4)for(t=a.head,Iw(t),a=t.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[bA]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||t.removeChild(a),a=o}}if(r===0){n.removeChild(s),bC(e);return}r--}else t==="$"||t==="$?"||t==="$!"?r++:i=t.charCodeAt(0)-48;else i=0;t=s}while(t);bC(e)}function yz(n){var e=n.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var t=e;switch(e=e.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":yz(t),y8(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}n.removeChild(t)}}function _xe(n,e,t,i){for(;n.nodeType===1;){var r=t;if(n.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[bA])switch(e){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(s=n.getAttribute("rel"),s==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(s!==r.rel||n.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||n.getAttribute("title")!==(r.title==null?null:r.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(s=n.getAttribute("src"),(s!==(r.src==null?null:r.src)||n.getAttribute("type")!==(r.type==null?null:r.type)||n.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(e==="input"&&n.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&n.getAttribute("name")===s)return n}else return n;if(n=uf(n.nextSibling),n===null)break}return null}function bxe(n,e,t){if(e==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!t||(n=uf(n.nextSibling),n===null))return null;return n}function _z(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Sxe(n,e){var t=n.ownerDocument;if(n.data!=="$?"||t.readyState==="complete")e();else{var i=function(){e(),t.removeEventListener("DOMContentLoaded",i)};t.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function uf(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return n}var bz=null;function a9(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}function Qte(n,e,t){switch(e=HN(t),n){case"html":if(n=e.documentElement,!n)throw Error(Dt(452));return n;case"head":if(n=e.head,!n)throw Error(Dt(453));return n;case"body":if(n=e.body,!n)throw Error(Dt(454));return n;default:throw Error(Dt(451))}}function Iw(n){for(var e=n.attributes;e.length;)n.removeAttributeNode(e[0]);y8(n)}var bd=new Map,o9=new Set;function VN(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var qg=Fr.d;Fr.d={f:Exe,r:Txe,D:xxe,C:wxe,L:Cxe,m:Axe,X:Rxe,S:Mxe,M:Oxe};function Exe(){var n=qg.f(),e=Z2();return n||e}function Txe(n){var e=Ax(n);e!==null&&e.tag===5&&e.type==="form"?$ee(e):qg.r(n)}var Ox=typeof document>"u"?null:document;function ene(n,e,t){var i=Ox;if(i&&typeof e=="string"&&e){var r=sd(e);r='link[rel="'+n+'"][href="'+r+'"]',typeof t=="string"&&(r+='[crossorigin="'+t+'"]'),o9.has(r)||(o9.add(r),n={rel:n,crossOrigin:t,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Nl(e,"link",n),hl(e),i.head.appendChild(e)))}}function xxe(n){qg.D(n),ene("dns-prefetch",n,null)}function wxe(n,e){qg.C(n,e),ene("preconnect",n,e)}function Cxe(n,e,t){qg.L(n,e,t);var i=Ox;if(i&&n&&e){var r='link[rel="preload"][as="'+sd(e)+'"]';e==="image"&&t&&t.imageSrcSet?(r+='[imagesrcset="'+sd(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(r+='[imagesizes="'+sd(t.imageSizes)+'"]')):r+='[href="'+sd(n)+'"]';var s=r;switch(e){case"style":s=LT(n);break;case"script":s=Ix(n)}bd.has(s)||(n=Fs({rel:"preload",href:e==="image"&&t&&t.imageSrcSet?void 0:n,as:e},t),bd.set(s,n),i.querySelector(r)!==null||e==="style"&&i.querySelector(OA(s))||e==="script"&&i.querySelector(IA(s))||(e=i.createElement("link"),Nl(e,"link",n),hl(e),i.head.appendChild(e)))}}function Axe(n,e){qg.m(n,e);var t=Ox;if(t&&n){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+sd(i)+'"][href="'+sd(n)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ix(n)}if(!bd.has(s)&&(n=Fs({rel:"modulepreload",href:n},e),bd.set(s,n),t.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(IA(s)))return}i=t.createElement("link"),Nl(i,"link",n),hl(i),t.head.appendChild(i)}}}function Mxe(n,e,t){qg.S(n,e,t);var i=Ox;if(i&&n){var r=qE(i).hoistableStyles,s=LT(n);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(OA(s)))o.loading=5;else{n=Fs({rel:"stylesheet",href:n,"data-precedence":e},t),(t=bd.get(s))&&tj(n,t);var l=a=i.createElement("link");hl(l),Nl(l,"link",n),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,FO(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function Rxe(n,e){qg.X(n,e);var t=Ox;if(t&&n){var i=qE(t).hoistableScripts,r=Ix(n),s=i.get(r);s||(s=t.querySelector(IA(r)),s||(n=Fs({src:n,async:!0},e),(e=bd.get(r))&&nj(n,e),s=t.createElement("script"),hl(s),Nl(s,"link",n),t.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function Oxe(n,e){qg.M(n,e);var t=Ox;if(t&&n){var i=qE(t).hoistableScripts,r=Ix(n),s=i.get(r);s||(s=t.querySelector(IA(r)),s||(n=Fs({src:n,async:!0,type:"module"},e),(e=bd.get(r))&&nj(n,e),s=t.createElement("script"),hl(s),Nl(s,"link",n),t.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function l9(n,e,t,i){var r=(r=by.current)?VN(r):null;if(!r)throw Error(Dt(446));switch(n){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(e=LT(t.href),t=qE(r).hoistableStyles,i=t.get(e),i||(i={type:"style",instance:null,count:0,state:null},t.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){n=LT(t.href);var s=qE(r).hoistableStyles,a=s.get(n);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(n,a),(s=r.querySelector(OA(n)))&&!s._p&&(a.instance=s,a.state.loading=5),bd.has(n)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},bd.set(n,t),s||Ixe(r,n,t,a.state))),e&&i===null)throw Error(Dt(528,""));return a}if(e&&i!==null)throw Error(Dt(529,""));return null;case"script":return e=t.async,t=t.src,typeof t=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Ix(t),t=qE(r).hoistableScripts,i=t.get(e),i||(i={type:"script",instance:null,count:0,state:null},t.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(Dt(444,n))}}function LT(n){return'href="'+sd(n)+'"'}function OA(n){return'link[rel="stylesheet"]['+n+"]"}function tne(n){return Fs({},n,{"data-precedence":n.precedence,precedence:null})}function Ixe(n,e,t,i){n.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=n.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Nl(e,"link",t),hl(e),n.head.appendChild(e))}function Ix(n){return'[src="'+sd(n)+'"]'}function IA(n){return"script[async]"+n}function c9(n,e,t){if(e.count++,e.instance===null)switch(e.type){case"style":var i=n.querySelector('style[data-href~="'+sd(t.href)+'"]');if(i)return e.instance=i,hl(i),i;var r=Fs({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),hl(i),Nl(i,"style",r),FO(i,t.precedence,n),e.instance=i;case"stylesheet":r=LT(t.href);var s=n.querySelector(OA(r));if(s)return e.state.loading|=4,e.instance=s,hl(s),s;i=tne(t),(r=bd.get(r))&&tj(i,r),s=(n.ownerDocument||n).createElement("link"),hl(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Nl(s,"link",i),e.state.loading|=4,FO(s,t.precedence,n),e.instance=s;case"script":return s=Ix(t.src),(r=n.querySelector(IA(s)))?(e.instance=r,hl(r),r):(i=t,(r=bd.get(s))&&(i=Fs({},t),nj(i,r)),n=n.ownerDocument||n,r=n.createElement("script"),hl(r),Nl(r,"link",i),n.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(Dt(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,FO(i,t.precedence,n));return e.instance}function FO(n,e,t){for(var i=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(n,s.nextSibling):(e=t.nodeType===9?t.head:t,e.insertBefore(n,e.firstChild))}function tj(n,e){n.crossOrigin==null&&(n.crossOrigin=e.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=e.referrerPolicy),n.title==null&&(n.title=e.title)}function nj(n,e){n.crossOrigin==null&&(n.crossOrigin=e.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=e.referrerPolicy),n.integrity==null&&(n.integrity=e.integrity)}var zO=null;function u9(n,e,t){if(zO===null){var i=new Map,r=zO=new Map;r.set(t,i)}else r=zO,i=r.get(t),i||(i=new Map,r.set(t,i));if(i.has(n))return i;for(i.set(n,null),t=t.getElementsByTagName(n),r=0;r<t.length;r++){var s=t[r];if(!(s[bA]||s[Jl]||n==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=n+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function h9(n,e,t){n=n.ownerDocument||n,n.head.insertBefore(t,e==="title"?n.querySelector("head > title"):null)}function Nxe(n,e,t){if(t===1||e.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return n=e.disabled,typeof e.precedence=="string"&&n==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function nne(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var gC=null;function Pxe(){}function Dxe(n,e,t){if(gC===null)throw Error(Dt(475));var i=gC;if(e.type==="stylesheet"&&(typeof t.media!="string"||matchMedia(t.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=LT(t.href),s=n.querySelector(OA(r));if(s){n=s._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=GN.bind(i),n.then(i,i)),e.state.loading|=4,e.instance=s,hl(s);return}s=n.ownerDocument||n,t=tne(t),(r=bd.get(r))&&tj(t,r),s=s.createElement("link"),hl(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Nl(s,"link",t),e.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,n),(n=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=GN.bind(i),n.addEventListener("load",e),n.addEventListener("error",e))}}function kxe(){if(gC===null)throw Error(Dt(475));var n=gC;return n.stylesheets&&n.count===0&&Sz(n,n.stylesheets),0<n.count?function(e){var t=setTimeout(function(){if(n.stylesheets&&Sz(n,n.stylesheets),n.unsuspend){var i=n.unsuspend;n.unsuspend=null,i()}},6e4);return n.unsuspend=e,function(){n.unsuspend=null,clearTimeout(t)}}:null}function GN(){if(this.count--,this.count===0){if(this.stylesheets)Sz(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var qN=null;function Sz(n,e){n.stylesheets=null,n.unsuspend!==null&&(n.count++,qN=new Map,e.forEach(Lxe,n),qN=null,GN.call(n))}function Lxe(n,e){if(!(e.state.loading&4)){var t=qN.get(n);if(t)var i=t.get(null);else{t=new Map,qN.set(n,t);for(var r=n.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(t.set(a.dataset.precedence,a),i=a)}i&&t.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=t.get(a)||i,s===i&&t.set(null,r),t.set(a,r),this.count++,i=GN.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(r,n.firstChild)),e.state.loading|=4}}var vC={$$typeof:mg,Provider:null,Consumer:null,_currentValue:W_,_currentValue2:W_,_threadCount:0};function Uxe(n,e,t,i,r,s,a,o){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Q3(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q3(0),this.hiddenUpdates=Q3(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function ine(n,e,t,i,r,s,a,o,l,c,u,h){return n=new Uxe(n,e,t,a,o,l,c,h),e=1,s===!0&&(e|=24),s=mh(3,null,null,e),n.current=s,s.stateNode=n,e=O8(),e.refCount++,n.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:t,cache:e},N8(s),n}function rne(n){return n?(n=DE,n):DE}function sne(n,e,t,i,r,s){r=rne(r),i.context===null?i.context=r:i.pendingContext=r,i=Sy(e),i.payload={element:t},s=s===void 0?null:s,s!==null&&(i.callback=s),t=Ey(n,i,e),t!==null&&(Sh(t,n,e),Tw(t,n,e))}function d9(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ij(n,e){d9(n,e),(n=n.alternate)&&d9(n,e)}function ane(n){if(n.tag===13){var e=Mx(n,67108864);e!==null&&Sh(e,n,67108864),ij(n,67108864)}}var $N=!0;function Bxe(n,e,t,i){var r=pi.T;pi.T=null;var s=Fr.p;try{Fr.p=2,rj(n,e,t,i)}finally{Fr.p=s,pi.T=r}}function Fxe(n,e,t,i){var r=pi.T;pi.T=null;var s=Fr.p;try{Fr.p=8,rj(n,e,t,i)}finally{Fr.p=s,pi.T=r}}function rj(n,e,t,i){if($N){var r=Ez(i);if(r===null)OB(n,e,i,WN,t),f9(n,i);else if(jxe(r,n,e,t,i))i.stopPropagation();else if(f9(n,i),e&4&&-1<zxe.indexOf(n)){for(;r!==null;){var s=Ax(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=T_(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-_h(a);o.entanglements[1]|=l,a&=~l}Vp(s),!(Xr&6)&&(UN=wp()+500,RA(0))}}break;case 13:o=Mx(s,2),o!==null&&Sh(o,s,2),Z2(),ij(s,2)}if(s=Ez(i),s===null&&OB(n,e,i,WN,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else OB(n,e,i,null,t)}}function Ez(n){return n=b8(n),sj(n)}var WN=null;function sj(n){if(WN=null,n=ME(n),n!==null){var e=gA(n);if(e===null)n=null;else{var t=e.tag;if(t===13){if(n=IQ(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null)}}return WN=n,null}function one(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wEe()){case kQ:return 2;case LQ:return 8;case SN:case CEe:return 32;case UQ:return 268435456;default:return 32}default:return 32}}var Tz=!1,wy=null,Cy=null,Ay=null,yC=new Map,_C=new Map,uy=[],zxe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f9(n,e){switch(n){case"focusin":case"focusout":wy=null;break;case"dragenter":case"dragleave":Cy=null;break;case"mouseover":case"mouseout":Ay=null;break;case"pointerover":case"pointerout":yC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_C.delete(e.pointerId)}}function O1(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ax(e),e!==null&&ane(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function jxe(n,e,t,i,r){switch(e){case"focusin":return wy=O1(wy,n,e,t,i,r),!0;case"dragenter":return Cy=O1(Cy,n,e,t,i,r),!0;case"mouseover":return Ay=O1(Ay,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return yC.set(s,O1(yC.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,_C.set(s,O1(_C.get(s)||null,n,e,t,i,r)),!0}return!1}function lne(n){var e=ME(n.target);if(e!==null){var t=gA(e);if(t!==null){if(e=t.tag,e===13){if(e=IQ(t),e!==null){n.blockedOn=e,DEe(n.priority,function(){if(t.tag===13){var i=bh();i=g8(i);var r=Mx(t,i);r!==null&&Sh(r,t,i),ij(t,i)}});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jO(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ez(n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);z4=i,t.target.dispatchEvent(i),z4=null}else return e=Ax(t),e!==null&&ane(e),n.blockedOn=t,!1;e.shift()}return!0}function p9(n,e,t){jO(n)&&t.delete(e)}function Hxe(){Tz=!1,wy!==null&&jO(wy)&&(wy=null),Cy!==null&&jO(Cy)&&(Cy=null),Ay!==null&&jO(Ay)&&(Ay=null),yC.forEach(p9),_C.forEach(p9)}function PR(n,e){n.blockedOn===e&&(n.blockedOn=null,Tz||(Tz=!0,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,Hxe)))}var DR=null;function m9(n){DR!==n&&(DR=n,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,function(){DR===n&&(DR=null);for(var e=0;e<n.length;e+=3){var t=n[e],i=n[e+1],r=n[e+2];if(typeof i!="function"){if(sj(i||t)===null)continue;break}var s=Ax(t);s!==null&&(n.splice(e,3),e-=3,nz(s,{pending:!0,data:r,method:t.method,action:i},i,r))}}))}function bC(n){function e(l){return PR(l,n)}wy!==null&&PR(wy,n),Cy!==null&&PR(Cy,n),Ay!==null&&PR(Ay,n),yC.forEach(e),_C.forEach(e);for(var t=0;t<uy.length;t++){var i=uy[t];i.blockedOn===n&&(i.blockedOn=null)}for(;0<uy.length&&(t=uy[0],t.blockedOn===null);)lne(t),t.blockedOn===null&&uy.shift();if(t=(n.ownerDocument||n).$$reactFormReplay,t!=null)for(i=0;i<t.length;i+=3){var r=t[i],s=t[i+1],a=r[Ou]||null;if(typeof s=="function")a||m9(t);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ou]||null)o=a.formAction;else if(sj(r)!==null)continue}else o=a.action;typeof o=="function"?t[i+1]=o:(t.splice(i,3),i-=3),m9(t)}}}function aj(n){this._internalRoot=n}tD.prototype.render=aj.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Dt(409));var t=e.current,i=bh();sne(t,i,n,e,null,null)};tD.prototype.unmount=aj.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;sne(n.current,2,null,n,null,null),Z2(),e[Cx]=null}};function tD(n){this._internalRoot=n}tD.prototype.unstable_scheduleHydration=function(n){if(n){var e=HQ();n={blockedOn:null,target:n,priority:e};for(var t=0;t<uy.length&&e!==0&&e<uy[t].priority;t++);uy.splice(t,0,n),t===0&&lne(n)}};var g9=RQ.version;if(g9!=="19.1.0")throw Error(Dt(527,g9,"19.1.0"));Fr.findDOMNode=function(n){var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Dt(188)):(n=Object.keys(n).join(","),Error(Dt(268,n)));return n=yEe(e),n=n!==null?NQ(n):null,n=n===null?null:n.stateNode,n};var Vxe={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:pi,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kR.isDisabled&&kR.supportsFiber)try{vA=kR.inject(Vxe),yh=kR}catch{}}F2.createRoot=function(n,e){if(!OQ(n))throw Error(Dt(299));var t=!1,i="",r=ite,s=rte,a=ste,o=null;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=ine(n,1,!1,null,null,t,i,r,s,a,o,null),n[Cx]=e.current,ej(n),new aj(e)};F2.hydrateRoot=function(n,e,t){if(!OQ(n))throw Error(Dt(299));var i=!1,r="",s=ite,a=rte,o=ste,l=null,c=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks),t.formState!==void 0&&(c=t.formState)),e=ine(n,1,!0,e,t??null,i,r,s,a,o,l,c),e.context=rne(null),t=e.current,i=bh(),i=g8(i),r=Sy(i),r.callback=null,Ey(t,r,i),t=i,e.current.lanes=t,_A(e,t),Vp(e),n[Cx]=e.current,ej(n),new tD(e)};F2.version="19.1.0";function cne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cne)}catch(n){console.error(n)}}cne(),TQ.exports=F2;var _st=TQ.exports,une={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Rl,function(){return t.importState=function(r){var s=new t;return s.importState(r),s},t;function t(){return function(r){var s=0,a=0,o=0,l=1;r.length==0&&(r=[+new Date]);var c=i();s=c(" "),a=c(" "),o=c(" ");for(var u=0;u<r.length;u++)s-=c(r[u]),s<0&&(s+=1),a-=c(r[u]),a<0&&(a+=1),o-=c(r[u]),o<0&&(o+=1);c=null;var h=function(){var d=2091639*s+l*23283064365386963e-26;return s=a,a=o,o=d-(l=d|0)};return h.next=h,h.uint32=function(){return h()*4294967296},h.fract53=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.version="Alea 0.9",h.args=r,h.exportState=function(){return[s,a,o,l]},h.importState=function(d){s=+d[0]||0,a=+d[1]||0,o=+d[2]||0,l=+d[3]||0},h}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,s=function(a){a=a.toString();for(var o=0;o<a.length;o++){r+=a.charCodeAt(o);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})})(une);var Gxe=une.exports;const bst=Dl(Gxe);new gt;new gt;function qxe(n,e,t){return Math.max(e,Math.min(t,n))}function $xe(n,e){return qxe(n-Math.floor(n/e)*e,0,e)}function Wxe(n,e){var t=$xe(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function Sst(n){return n/180*Math.PI}function Est(n){return n*180/Math.PI}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Yxe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},n(e,t)};return function(e,t){n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xxe=Object.prototype.hasOwnProperty;function xz(n,e){return Xxe.call(n,e)}function wz(n){if(Array.isArray(n)){for(var e=new Array(n.length),t=0;t<e.length;t++)e[t]=""+t;return e}if(Object.keys)return Object.keys(n);var i=[];for(var r in n)xz(n,r)&&i.push(r);return i}function gh(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function Cz(n){for(var e=0,t=n.length,i;e<t;){if(i=n.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function C_(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function hne(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function Az(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(var e=0,t=n.length;e<t;e++)if(Az(n[e]))return!0}else if(typeof n=="object"){for(var i=wz(n),r=i.length,s=0;s<r;s++)if(Az(n[i[s]]))return!0}}return!1}function v9(n,e){var t=[n];for(var i in e){var r=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof r<"u"&&t.push(i+": "+r)}return t.join(`
`)}var dne=function(n){Yxe(e,n);function e(t,i,r,s,a){var o=this.constructor,l=n.call(this,v9(t,{name:i,index:r,operation:s,tree:a}))||this;return l.name=i,l.index=r,l.operation=s,l.tree=a,Object.setPrototypeOf(l,o.prototype),l.message=v9(t,{name:i,index:r,operation:s,tree:a}),l}return e}(Error),wa=dne,Kxe=gh,BE={add:function(n,e,t){return n[e]=this.value,{newDocument:t}},remove:function(n,e,t){var i=n[e];return delete n[e],{newDocument:t,removed:i}},replace:function(n,e,t){var i=n[e];return n[e]=this.value,{newDocument:t,removed:i}},move:function(n,e,t){var i=YN(t,this.path);i&&(i=gh(i));var r=eb(t,{op:"remove",path:this.from}).removed;return eb(t,{op:"add",path:this.path,value:r}),{newDocument:t,removed:i}},copy:function(n,e,t){var i=YN(t,this.from);return eb(t,{op:"add",path:this.path,value:gh(i)}),{newDocument:t}},test:function(n,e,t){return{newDocument:t,test:SC(n[e],this.value)}},_get:function(n,e,t){return this.value=n[e],{newDocument:t}}},Zxe={add:function(n,e,t){return Cz(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:t,index:e}},remove:function(n,e,t){var i=n.splice(e,1);return{newDocument:t,removed:i[0]}},replace:function(n,e,t){var i=n[e];return n[e]=this.value,{newDocument:t,removed:i}},move:BE.move,copy:BE.copy,test:BE.test,_get:BE._get};function YN(n,e){if(e=="")return n;var t={op:"_get",path:e};return eb(n,t),t.value}function eb(n,e,t,i,r,s){if(t===void 0&&(t=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=0),t&&(typeof t=="function"?t(e,0,n,e.path):XN(e,0)),e.path===""){var a={newDocument:n};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=n,a;if(e.op==="move"||e.op==="copy")return a.newDocument=YN(n,e.from),e.op==="move"&&(a.removed=n),a;if(e.op==="test"){if(a.test=SC(n,e.value),a.test===!1)throw new wa("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return a.newDocument=n,a}else{if(e.op==="remove")return a.removed=n,a.newDocument=null,a;if(e.op==="_get")return e.value=n,a;if(t)throw new wa("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,n);return a}}else{i||(n=gh(n));var o=e.path||"",l=o.split("/"),c=n,u=1,h=l.length,d=void 0,f=void 0,m=void 0;for(typeof t=="function"?m=t:m=XN;;){if(f=l[u],f&&f.indexOf("~")!=-1&&(f=hne(f)),r&&(f=="__proto__"||f=="prototype"&&u>0&&l[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&d===void 0&&(c[f]===void 0?d=l.slice(0,u).join("/"):u==h-1&&(d=e.path),d!==void 0&&m(e,0,n,d)),u++,Array.isArray(c)){if(f==="-")f=c.length;else{if(t&&!Cz(f))throw new wa("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,n);Cz(f)&&(f=~~f)}if(u>=h){if(t&&e.op==="add"&&f>c.length)throw new wa("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,n);var a=Zxe[e.op].call(e,c,f,n);if(a.test===!1)throw new wa("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return a}}else if(u>=h){var a=BE[e.op].call(e,c,f,n);if(a.test===!1)throw new wa("Test operation failed","TEST_OPERATION_FAILED",s,e,n);return a}if(c=c[f],t&&u<h&&(!c||typeof c!="object"))throw new wa("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,n)}}}function oj(n,e,t,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),t&&!Array.isArray(e))throw new wa("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(n=gh(n));for(var s=new Array(e.length),a=0,o=e.length;a<o;a++)s[a]=eb(n,e[a],t,!0,r,a),n=s[a].newDocument;return s.newDocument=n,s}function Jxe(n,e,t){var i=eb(n,e);if(i.test===!1)throw new wa("Test operation failed","TEST_OPERATION_FAILED",t,e,n);return i.newDocument}function XN(n,e,t,i){if(typeof n!="object"||n===null||Array.isArray(n))throw new wa("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,t);if(BE[n.op]){if(typeof n.path!="string")throw new wa("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,t);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new wa('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,t);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new wa("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new wa("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&Az(n.value))throw new wa("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,t);if(t){if(n.op=="add"){var r=n.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new wa("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,t)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==i)throw new wa("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,t)}else if(n.op==="move"||n.op==="copy"){var a={op:"_get",path:n.from,value:void 0},o=fne([a],t);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new wa("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,t)}}}else throw new wa("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,t)}function fne(n,e,t){try{if(!Array.isArray(n))throw new wa("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)oj(gh(e),gh(n),t||!0);else{t=t||XN;for(var i=0;i<n.length;i++)t(n[i],i,e,void 0)}}catch(r){if(r instanceof wa)return r;throw r}}function SC(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),i=Array.isArray(e),r,s,a;if(t&&i){if(s=n.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!SC(n[r],e[r]))return!1;return!0}if(t!=i)return!1;var o=Object.keys(n);if(s=o.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!e.hasOwnProperty(o[r]))return!1;for(r=s;r--!==0;)if(a=o[r],!SC(n[a],e[a]))return!1;return!0}return n!==n&&e!==e}const Qxe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:wa,_areEquals:SC,applyOperation:eb,applyPatch:oj,applyReducer:Jxe,deepClone:Kxe,getValueByPointer:YN,validate:fne,validator:XN},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var lj=new WeakMap,e1e=function(){function n(e){this.observers=new Map,this.obj=e}return n}(),t1e=function(){function n(e,t){this.callback=e,this.observer=t}return n}();function n1e(n){return lj.get(n)}function i1e(n,e){return n.observers.get(e)}function r1e(n,e){n.observers.delete(e.callback)}function s1e(n,e){e.unobserve()}function a1e(n,e){var t=[],i,r=n1e(n);if(!r)r=new e1e(n),lj.set(n,r);else{var s=i1e(r,e);i=s&&s.observer}if(i)return i;if(i={},r.value=gh(n),e){i.callback=e,i.next=null;var a=function(){Mz(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=t,i.object=n,i.unobserve=function(){Mz(i),clearTimeout(i.next),r1e(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(e,new t1e(e,i)),i}function Mz(n,e){e===void 0&&(e=!1);var t=lj.get(n.object);cj(t.value,n.object,n.patches,"",e),n.patches.length&&oj(t.value,n.patches);var i=n.patches;return i.length>0&&(n.patches=[],n.callback&&n.callback(i)),i}function cj(n,e,t,i,r){if(e!==n){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=wz(e),a=wz(n),o=!1,l=a.length-1;l>=0;l--){var c=a[l],u=n[c];if(xz(e,c)&&!(e[c]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var h=e[c];typeof u=="object"&&u!=null&&typeof h=="object"&&h!=null&&Array.isArray(u)===Array.isArray(h)?cj(u,h,t,i+"/"+C_(c),r):u!==h&&(r&&t.push({op:"test",path:i+"/"+C_(c),value:gh(u)}),t.push({op:"replace",path:i+"/"+C_(c),value:gh(h)}))}else Array.isArray(n)===Array.isArray(e)?(r&&t.push({op:"test",path:i+"/"+C_(c),value:gh(u)}),t.push({op:"remove",path:i+"/"+C_(c)}),o=!0):(r&&t.push({op:"test",path:i,value:n}),t.push({op:"replace",path:i,value:e}))}if(!(!o&&s.length==a.length))for(var l=0;l<s.length;l++){var c=s[l];!xz(n,c)&&e[c]!==void 0&&t.push({op:"add",path:i+"/"+C_(c),value:gh(e[c])})}}}function o1e(n,e,t){t===void 0&&(t=!1);var i=[];return cj(n,e,i,"",t),i}const l1e=Object.freeze(Object.defineProperty({__proto__:null,compare:o1e,generate:Mz,observe:a1e,unobserve:s1e},Symbol.toStringTag,{value:"Module"}));Object.assign({},Qxe,l1e,{JsonPatchError:dne,deepClone:gh,escapePathComponent:C_,unescapePathComponent:hne});var c1e=typeof Element<"u",u1e=typeof Map=="function",h1e=typeof Set=="function",d1e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function HO(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,i,r;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!HO(n[i],e[i]))return!1;return!0}var s;if(u1e&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(s=n.entries();!(i=s.next()).done;)if(!e.has(i.value[0]))return!1;for(s=n.entries();!(i=s.next()).done;)if(!HO(i.value[1],e.get(i.value[0])))return!1;return!0}if(h1e&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(s=n.entries();!(i=s.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(d1e&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(n[i]!==e[i])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(c1e&&n instanceof Element)return!1;for(i=t;i--!==0;)if(!((r[i]==="_owner"||r[i]==="__v"||r[i]==="__o")&&n.$$typeof)&&!HO(n[r[i]],e[r[i]]))return!1;return!0}return n!==n&&e!==e}var f1e=function(e,t){try{return HO(e,t)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}};const Tst=Dl(f1e);function xst(n){return n!=null}const wst=Object.fromEntries,Cst=Object.keys;var pne={};(function(n){var e=Rl&&Rl.__spreadArray||function(c,u,h){if(h||arguments.length===2)for(var d=0,f=u.length,m;d<f;d++)(m||!(d in u))&&(m||(m=Array.prototype.slice.call(u,0,d)),m[d]=u[d]);return c.concat(m||Array.prototype.slice.call(u))};Object.defineProperty(n,"__esModule",{value:!0}),n.minLength=n.maxLength=n.poolSize=n.humanId=n.adverbs=n.verbs=n.nouns=n.adjectives=void 0,n.adjectives=["afraid","all","angry","beige","big","better","bitter","blue","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","crazy","cruel","cuddly","curly","curvy","cute","common","cold","cool","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","evil","fair","famous","fast","fancy","few","fine","fifty","five","flat","fluffy","floppy","forty","four","free","fresh","fruity","full","funny","fuzzy","gentle","giant","gold","good","great","green","grumpy","happy","heavy","hip","honest","hot","huge","hungry","icy","itchy","khaki","kind","large","late","lazy","lemon","legal","light","little","long","loose","loud","lovely","lucky","major","many","mean","metal","mighty","modern","moody","nasty","neat","new","nice","nine","ninety","odd","old","olive","open","orange","pink","plain","plenty","polite","poor","pretty","proud","public","puny","petite","purple","quick","quiet","rare","real","ready","red","rich","ripe","rotten","rude","sad","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","spicy","spotty","stale","strong","stupid","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","warm","weak","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],n.nouns=["apes","animals","areas","bars","banks","baths","breads","bushes","cloths","clowns","clubs","hoops","loops","memes","papers","parks","paths","showers","sides","signs","sites","streets","teeth","tires","webs","actors","ads","adults","aliens","ants","apples","baboons","badgers","bags","bananas","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","brooms","buckets","bugs","buses","buttons","camels","cases","cameras","candies","candles","carpets","carrots","carrots","cars","cats","chairs","chefs","chicken","clocks","clouds","coats","cobras","coins","corners","colts","comics","cooks","cougars","regions","results","cows","crabs","crabs","crews","cups","cities","cycles","dancers","days","deer","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","ducks","eagles","ears","eels","eggs","ends","mammals","emus","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lines","lions","lizards","llamas","mails","mangos","maps","masks","meals","melons","mice","mirrors","moments","moles","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","parents","parts","parrots","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","rice","rings","rivers","rockets","rocks","rooms","roses","rules","schools","bats","seals","seas","sheep","shirts","shoes","shrimps","singers","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stars","states","steaks","wings","suits","suns","swans","symbols","tables","taxes","taxis","teams","terms","things","ties","tigers","times","tips","toes","towns","tools","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","walls","wasps","waves","ways","weeks","windows","wolves","women","wombats","words","worlds","worms","yaks","years","zebras","zoos"],n.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enter","enjoy","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","like","lie","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","play","poke","post","press","prove","pull","pump","pick","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","see","search","sell","send","serve","shake","share","shave","shine","show","shop","shout","sin","sink","sing","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","start","stay","stick","stop","stare","study","strive","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],n.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowlingly","lazily","oddly","mysteriously","noisily","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"];function t(c){return c[Math.floor(Math.random()*c.length)]}function i(c){return c.reduce(function(u,h){return u.length>h.length?u:h})}function r(c){return c.reduce(function(u,h){return u.length<h.length?u:h})}function s(c){c===void 0&&(c={}),typeof c=="string"&&(c={separator:c}),typeof c=="boolean"&&(c={capitalize:c});var u=c.separator,h=u===void 0?"":u,d=c.capitalize,f=d===void 0?!0:d,m=c.adjectiveCount,v=m===void 0?1:m,_=c.addAdverb,y=_===void 0?!1:_,S=e(e(e([],e([],Array(v),!0).map(function(T){return t(n.adjectives)}),!0),[t(n.nouns),t(n.verbs)],!1),y?[t(n.adverbs)]:[],!0);return f&&(S=S.map(function(T){return T.charAt(0).toUpperCase()+T.substr(1)})),S.join(h)}n.humanId=s;function a(c){c===void 0&&(c={});var u=c.adjectiveCount,h=u===void 0?1:u,d=c.addAdverb,f=d===void 0?!1:d;return n.adjectives.length*h*n.nouns.length*n.verbs.length*(f?n.adverbs.length:1)}n.poolSize=a;function o(c){c===void 0&&(c={});var u=c.adjectiveCount,h=u===void 0?1:u,d=c.addAdverb,f=d===void 0?!1:d,m=c.separator,v=m===void 0?"":m;return i(n.adjectives).length*h+h*v.length+i(n.nouns).length+v.length+i(n.verbs).length+(f?i(n.adverbs).length+v.length:0)}n.maxLength=o;function l(c){c===void 0&&(c={});var u=c.adjectiveCount,h=u===void 0?1:u,d=c.addAdverb,f=d===void 0?!1:d,m=c.separator,v=m===void 0?"":m;return r(n.adjectives).length*h+h*v.length+r(n.nouns).length+v.length+r(n.verbs).length+(f?r(n.adverbs).length+v.length:0)}n.minLength=l,n.default=s})(pne);const Ast=Dl(pne);function UT(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function p1e(n,e){const t=indexedDB.open(n);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=UT(t);return(r,s)=>i.then(a=>s(a.transaction(e,r).objectStore(e)))}let NB;function uj(){return NB||(NB=p1e("keyval-store","keyval")),NB}function Mst(n,e=uj()){return e("readonly",t=>UT(t.get(n)))}function Rst(n,e,t=uj()){return t("readwrite",i=>new Promise((r,s)=>{i.get(n).onsuccess=function(){try{i.put(e(this.result),n),r(UT(i.transaction))}catch(a){s(a)}}}))}function m1e(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},UT(n.transaction)}function Ost(n=uj()){return n("readonly",e=>{if(e.getAll&&e.getAllKeys)return Promise.all([UT(e.getAllKeys()),UT(e.getAll())]).then(([i,r])=>i.map((s,a)=>[s,r[a]]));const t=[];return n("readonly",i=>m1e(i,r=>t.push([r.key,r.value])).then(()=>t))})}const g1e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let v1e=n=>crypto.getRandomValues(new Uint8Array(n)),y1e=(n,e,t)=>{let i=(2<<Math.log2(n.length-1))-1,r=-~(1.6*i*e/n.length);return(s=e)=>{let a="";for(;;){let o=t(r),l=r;for(;l--;)if(a+=n[o[l]&i]||"",a.length===s)return a}}},Ist=(n,e=21)=>y1e(n,e,v1e),Nst=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=g1e[t[n]&63];return e};var mne="abcdefghijklmnopqrstuvwxyz",gne="ABCDEFGHIJKLMNOPQRSTUVWXYZ",vne="0123456789",_1e="346789ABCDEFGHJKLMNPQRTUVWXYabcdefghijkmnpqrtwxyz",b1e="6789BCDFGHJKLMNPQRTWbcdfghjkmnpqrtwz";const S1e=vne,E1e=mne,T1e=gne;var x1e=S1e+E1e+T1e,Pst={lowercase:mne,uppercase:gne,numbers:vne,nolookalikes:_1e,nolookalikesSafe:b1e,alphanumeric:x1e},yne={exports:{}};(function(n,e){(function(t,i){i()})(Rl,function(){function t(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,u,h){var d=new XMLHttpRequest;d.open("GET",c),d.responseType="blob",d.onload=function(){l(d.response,u,h)},d.onerror=function(){console.error("could not download file")},d.send()}function r(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Rl=="object"&&Rl.global===Rl?Rl:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(c,u,h){var d=a.URL||a.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):r(f.href)?i(c,u,h):s(f,f.target="_blank")):(f.href=d.createObjectURL(c),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),u);else if(r(c))i(c,u,h);else{var d=document.createElement("a");d.href=c,d.target="_blank",setTimeout(function(){s(d)})}}:function(c,u,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof c=="string")return i(c,u,h);var f=c.type==="application/octet-stream",m=/constructor/i.test(a.HTMLElement)||a.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||f&&m||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=v?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=T:location=T,d=null},_.readAsDataURL(c)}else{var y=a.URL||a.webkitURL,S=y.createObjectURL(c);d?d.location=S:location.href=S,d=null,setTimeout(function(){y.revokeObjectURL(S)},4e4)}});a.saveAs=l.saveAs=l,n.exports=l})})(yne);var Dst=yne.exports,_ne={},nD={};nD.byteLength=A1e;nD.toByteArray=R1e;nD.fromByteArray=N1e;var gp=[],Zh=[],w1e=typeof Uint8Array<"u"?Uint8Array:Array,PB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var JS=0,C1e=PB.length;JS<C1e;++JS)gp[JS]=PB[JS],Zh[PB.charCodeAt(JS)]=JS;Zh[45]=62;Zh[95]=63;function bne(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function A1e(n){var e=bne(n),t=e[0],i=e[1];return(t+i)*3/4-i}function M1e(n,e,t){return(e+t)*3/4-t}function R1e(n){var e,t=bne(n),i=t[0],r=t[1],s=new w1e(M1e(n,i,r)),a=0,o=r>0?i-4:i,l;for(l=0;l<o;l+=4)e=Zh[n.charCodeAt(l)]<<18|Zh[n.charCodeAt(l+1)]<<12|Zh[n.charCodeAt(l+2)]<<6|Zh[n.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=Zh[n.charCodeAt(l)]<<2|Zh[n.charCodeAt(l+1)]>>4,s[a++]=e&255),r===1&&(e=Zh[n.charCodeAt(l)]<<10|Zh[n.charCodeAt(l+1)]<<4|Zh[n.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function O1e(n){return gp[n>>18&63]+gp[n>>12&63]+gp[n>>6&63]+gp[n&63]}function I1e(n,e,t){for(var i,r=[],s=e;s<t;s+=3)i=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),r.push(O1e(i));return r.join("")}function N1e(n){for(var e,t=n.length,i=t%3,r=[],s=16383,a=0,o=t-i;a<o;a+=s)r.push(I1e(n,a,a+s>o?o:a+s));return i===1?(e=n[t-1],r.push(gp[e>>2]+gp[e<<4&63]+"==")):i===2&&(e=(n[t-2]<<8)+n[t-1],r.push(gp[e>>10]+gp[e>>4&63]+gp[e<<2&63]+"=")),r.join("")}var hj={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */hj.read=function(n,e,t,i,r){var s,a,o=r*8-i-1,l=(1<<o)-1,c=l>>1,u=-7,h=t?r-1:0,d=t?-1:1,f=n[e+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=s*256+n[e+h],h+=d,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=i;u>0;a=a*256+n[e+h],h+=d,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-c}return(f?-1:1)*a*Math.pow(2,s-i)};hj.write=function(n,e,t,i,r,s){var a,o,l,c=s*8-r-1,u=(1<<c)-1,h=u>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,m=i?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=u?(o=0,a=u):a+h>=1?(o=(e*l-1)*Math.pow(2,r),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;n[t+f]=o&255,f+=m,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;n[t+f]=a&255,f+=m,a/=256,c-=8);n[t+f-m]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=nD,t=hj,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=I,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r;const{Uint8Array:s,ArrayBuffer:a,SharedArrayBuffer:o}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const de=new s(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,s.prototype),Object.setPrototypeOf(de,$),de.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(de){if(de>r)throw new RangeError('The value "'+de+'" is invalid for option "size"');const $=new s(de);return Object.setPrototypeOf($,u.prototype),$}function u(de,$,K){if(typeof de=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(de)}return h(de,$,K)}u.poolSize=8192;function h(de,$,K){if(typeof de=="string")return v(de,$);if(a.isView(de))return y(de);if(de==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof de);if(Ve(de,a)||de&&Ve(de.buffer,a)||typeof o<"u"&&(Ve(de,o)||de&&Ve(de.buffer,o)))return S(de,$,K);if(typeof de=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=de.valueOf&&de.valueOf();if(me!=null&&me!==de)return u.from(me,$,K);const Pe=T(de);if(Pe)return Pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof de[Symbol.toPrimitive]=="function")return u.from(de[Symbol.toPrimitive]("string"),$,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof de)}u.from=function(de,$,K){return h(de,$,K)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function d(de){if(typeof de!="number")throw new TypeError('"size" argument must be of type number');if(de<0)throw new RangeError('The value "'+de+'" is invalid for option "size"')}function f(de,$,K){return d(de),de<=0?c(de):$!==void 0?typeof K=="string"?c(de).fill($,K):c(de).fill($):c(de)}u.alloc=function(de,$,K){return f(de,$,K)};function m(de){return d(de),c(de<0?0:x(de)|0)}u.allocUnsafe=function(de){return m(de)},u.allocUnsafeSlow=function(de){return m(de)};function v(de,$){if((typeof $!="string"||$==="")&&($="utf8"),!u.isEncoding($))throw new TypeError("Unknown encoding: "+$);const K=R(de,$)|0;let me=c(K);const Pe=me.write(de,$);return Pe!==K&&(me=me.slice(0,Pe)),me}function _(de){const $=de.length<0?0:x(de.length)|0,K=c($);for(let me=0;me<$;me+=1)K[me]=de[me]&255;return K}function y(de){if(Ve(de,s)){const $=new s(de);return S($.buffer,$.byteOffset,$.byteLength)}return _(de)}function S(de,$,K){if($<0||de.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<$+(K||0))throw new RangeError('"length" is outside of buffer bounds');let me;return $===void 0&&K===void 0?me=new s(de):K===void 0?me=new s(de,$):me=new s(de,$,K),Object.setPrototypeOf(me,u.prototype),me}function T(de){if(u.isBuffer(de)){const $=x(de.length)|0,K=c($);return K.length===0||de.copy(K,0,0,$),K}if(de.length!==void 0)return typeof de.length!="number"||We(de.length)?c(0):_(de);if(de.type==="Buffer"&&Array.isArray(de.data))return _(de.data)}function x(de){if(de>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return de|0}function I(de){return+de!=de&&(de=0),u.alloc(+de)}u.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==u.prototype},u.compare=function($,K){if(Ve($,s)&&($=u.from($,$.offset,$.byteLength)),Ve(K,s)&&(K=u.from(K,K.offset,K.byteLength)),!u.isBuffer($)||!u.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===K)return 0;let me=$.length,Pe=K.length;for(let Ue=0,at=Math.min(me,Pe);Ue<at;++Ue)if($[Ue]!==K[Ue]){me=$[Ue],Pe=K[Ue];break}return me<Pe?-1:Pe<me?1:0},u.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function($,K){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return u.alloc(0);let me;if(K===void 0)for(K=0,me=0;me<$.length;++me)K+=$[me].length;const Pe=u.allocUnsafe(K);let Ue=0;for(me=0;me<$.length;++me){let at=$[me];if(Ve(at,s))Ue+at.length>Pe.length?(u.isBuffer(at)||(at=u.from(at)),at.copy(Pe,Ue)):s.prototype.set.call(Pe,at,Ue);else if(u.isBuffer(at))at.copy(Pe,Ue);else throw new TypeError('"list" argument must be an Array of Buffers');Ue+=at.length}return Pe};function R(de,$){if(u.isBuffer(de))return de.length;if(a.isView(de)||Ve(de,a))return de.byteLength;if(typeof de!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof de);const K=de.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&K===0)return 0;let Pe=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return ke(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return Me(de).length;default:if(Pe)return me?-1:ke(de).length;$=(""+$).toLowerCase(),Pe=!0}}u.byteLength=R;function N(de,$,K){let me=!1;if(($===void 0||$<0)&&($=0),$>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,$>>>=0,K<=$))return"";for(de||(de="utf8");;)switch(de){case"hex":return ue(this,$,K);case"utf8":case"utf-8":return Q(this,$,K);case"ascii":return ae(this,$,K);case"latin1":case"binary":return se(this,$,K);case"base64":return W(this,$,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,$,K);default:if(me)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),me=!0}}u.prototype._isBuffer=!0;function L(de,$,K){const me=de[$];de[$]=de[K],de[K]=me}u.prototype.swap16=function(){const $=this.length;if($%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<$;K+=2)L(this,K,K+1);return this},u.prototype.swap32=function(){const $=this.length;if($%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<$;K+=4)L(this,K,K+3),L(this,K+1,K+2);return this},u.prototype.swap64=function(){const $=this.length;if($%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<$;K+=8)L(this,K,K+7),L(this,K+1,K+6),L(this,K+2,K+5),L(this,K+3,K+4);return this},u.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?Q(this,0,$):N.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function($){if(!u.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$?!0:u.compare(this,$)===0},u.prototype.inspect=function(){let $="";const K=n.INSPECT_MAX_BYTES;return $=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&($+=" ... "),"<Buffer "+$+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function($,K,me,Pe,Ue){if(Ve($,s)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(K===void 0&&(K=0),me===void 0&&(me=$?$.length:0),Pe===void 0&&(Pe=0),Ue===void 0&&(Ue=this.length),K<0||me>$.length||Pe<0||Ue>this.length)throw new RangeError("out of range index");if(Pe>=Ue&&K>=me)return 0;if(Pe>=Ue)return-1;if(K>=me)return 1;if(K>>>=0,me>>>=0,Pe>>>=0,Ue>>>=0,this===$)return 0;let at=Ue-Pe,ft=me-K;const Cn=Math.min(at,ft),ze=this.slice(Pe,Ue),It=$.slice(K,me);for(let nt=0;nt<Cn;++nt)if(ze[nt]!==It[nt]){at=ze[nt],ft=It[nt];break}return at<ft?-1:ft<at?1:0};function k(de,$,K,me,Pe){if(de.length===0)return-1;if(typeof K=="string"?(me=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,We(K)&&(K=Pe?0:de.length-1),K<0&&(K=de.length+K),K>=de.length){if(Pe)return-1;K=de.length-1}else if(K<0)if(Pe)K=0;else return-1;if(typeof $=="string"&&($=u.from($,me)),u.isBuffer($))return $.length===0?-1:z(de,$,K,me,Pe);if(typeof $=="number")return $=$&255,typeof s.prototype.indexOf=="function"?Pe?s.prototype.indexOf.call(de,$,K):s.prototype.lastIndexOf.call(de,$,K):z(de,[$],K,me,Pe);throw new TypeError("val must be string, number or Buffer")}function z(de,$,K,me,Pe){let Ue=1,at=de.length,ft=$.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(de.length<2||$.length<2)return-1;Ue=2,at/=2,ft/=2,K/=2}function Cn(It,nt){return Ue===1?It[nt]:It.readUInt16BE(nt*Ue)}let ze;if(Pe){let It=-1;for(ze=K;ze<at;ze++)if(Cn(de,ze)===Cn($,It===-1?0:ze-It)){if(It===-1&&(It=ze),ze-It+1===ft)return It*Ue}else It!==-1&&(ze-=ze-It),It=-1}else for(K+ft>at&&(K=at-ft),ze=K;ze>=0;ze--){let It=!0;for(let nt=0;nt<ft;nt++)if(Cn(de,ze+nt)!==Cn($,nt)){It=!1;break}if(It)return ze}return-1}u.prototype.includes=function($,K,me){return this.indexOf($,K,me)!==-1},u.prototype.indexOf=function($,K,me){return k(this,$,K,me,!0)},u.prototype.lastIndexOf=function($,K,me){return k(this,$,K,me,!1)};function Z(de,$,K,me){K=Number(K)||0;const Pe=de.length-K;me?(me=Number(me),me>Pe&&(me=Pe)):me=Pe;const Ue=$.length;me>Ue/2&&(me=Ue/2);let at;for(at=0;at<me;++at){const ft=parseInt($.substr(at*2,2),16);if(We(ft))return at;de[K+at]=ft}return at}function H(de,$,K,me){return Fe(ke($,de.length-K),de,K,me)}function q(de,$,K,me){return Fe(he($),de,K,me)}function U(de,$,K,me){return Fe(Me($),de,K,me)}function ee(de,$,K,me){return Fe(ie($,de.length-K),de,K,me)}u.prototype.write=function($,K,me,Pe){if(K===void 0)Pe="utf8",me=this.length,K=0;else if(me===void 0&&typeof K=="string")Pe=K,me=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(me)?(me=me>>>0,Pe===void 0&&(Pe="utf8")):(Pe=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ue=this.length-K;if((me===void 0||me>Ue)&&(me=Ue),$.length>0&&(me<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");let at=!1;for(;;)switch(Pe){case"hex":return Z(this,$,K,me);case"utf8":case"utf-8":return H(this,$,K,me);case"ascii":case"latin1":case"binary":return q(this,$,K,me);case"base64":return U(this,$,K,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,$,K,me);default:if(at)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),at=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(de,$,K){return $===0&&K===de.length?e.fromByteArray(de):e.fromByteArray(de.slice($,K))}function Q(de,$,K){K=Math.min(de.length,K);const me=[];let Pe=$;for(;Pe<K;){const Ue=de[Pe];let at=null,ft=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Pe+ft<=K){let Cn,ze,It,nt;switch(ft){case 1:Ue<128&&(at=Ue);break;case 2:Cn=de[Pe+1],(Cn&192)===128&&(nt=(Ue&31)<<6|Cn&63,nt>127&&(at=nt));break;case 3:Cn=de[Pe+1],ze=de[Pe+2],(Cn&192)===128&&(ze&192)===128&&(nt=(Ue&15)<<12|(Cn&63)<<6|ze&63,nt>2047&&(nt<55296||nt>57343)&&(at=nt));break;case 4:Cn=de[Pe+1],ze=de[Pe+2],It=de[Pe+3],(Cn&192)===128&&(ze&192)===128&&(It&192)===128&&(nt=(Ue&15)<<18|(Cn&63)<<12|(ze&63)<<6|It&63,nt>65535&&nt<1114112&&(at=nt))}}at===null?(at=65533,ft=1):at>65535&&(at-=65536,me.push(at>>>10&1023|55296),at=56320|at&1023),me.push(at),Pe+=ft}return Y(me)}const X=4096;function Y(de){const $=de.length;if($<=X)return String.fromCharCode.apply(String,de);let K="",me=0;for(;me<$;)K+=String.fromCharCode.apply(String,de.slice(me,me+=X));return K}function ae(de,$,K){let me="";K=Math.min(de.length,K);for(let Pe=$;Pe<K;++Pe)me+=String.fromCharCode(de[Pe]&127);return me}function se(de,$,K){let me="";K=Math.min(de.length,K);for(let Pe=$;Pe<K;++Pe)me+=String.fromCharCode(de[Pe]);return me}function ue(de,$,K){const me=de.length;(!$||$<0)&&($=0),(!K||K<0||K>me)&&(K=me);let Pe="";for(let Ue=$;Ue<K;++Ue)Pe+=Ut[de[Ue]];return Pe}function Ne(de,$,K){const me=de.slice($,K);let Pe="";for(let Ue=0;Ue<me.length-1;Ue+=2)Pe+=String.fromCharCode(me[Ue]+me[Ue+1]*256);return Pe}u.prototype.slice=function($,K){const me=this.length;$=~~$,K=K===void 0?me:~~K,$<0?($+=me,$<0&&($=0)):$>me&&($=me),K<0?(K+=me,K<0&&(K=0)):K>me&&(K=me),K<$&&(K=$);const Pe=this.subarray($,K);return Object.setPrototypeOf(Pe,u.prototype),Pe};function ve(de,$,K){if(de%1!==0||de<0)throw new RangeError("offset is not uint");if(de+$>K)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function($,K,me){$=$>>>0,K=K>>>0,me||ve($,K,this.length);let Pe=this[$],Ue=1,at=0;for(;++at<K&&(Ue*=256);)Pe+=this[$+at]*Ue;return Pe},u.prototype.readUintBE=u.prototype.readUIntBE=function($,K,me){$=$>>>0,K=K>>>0,me||ve($,K,this.length);let Pe=this[$+--K],Ue=1;for(;K>0&&(Ue*=256);)Pe+=this[$+--K]*Ue;return Pe},u.prototype.readUint8=u.prototype.readUInt8=function($,K){return $=$>>>0,K||ve($,1,this.length),this[$]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function($,K){return $=$>>>0,K||ve($,2,this.length),this[$]|this[$+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function($,K){return $=$>>>0,K||ve($,2,this.length),this[$]<<8|this[$+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function($,K){return $=$>>>0,K||ve($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function($,K){return $=$>>>0,K||ve($,4,this.length),this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])},u.prototype.readBigUInt64LE=_t(function($){$=$>>>0,Se($,"offset");const K=this[$],me=this[$+7];(K===void 0||me===void 0)&&ge($,this.length-8);const Pe=K+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24,Ue=this[++$]+this[++$]*2**8+this[++$]*2**16+me*2**24;return BigInt(Pe)+(BigInt(Ue)<<BigInt(32))}),u.prototype.readBigUInt64BE=_t(function($){$=$>>>0,Se($,"offset");const K=this[$],me=this[$+7];(K===void 0||me===void 0)&&ge($,this.length-8);const Pe=K*2**24+this[++$]*2**16+this[++$]*2**8+this[++$],Ue=this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+me;return(BigInt(Pe)<<BigInt(32))+BigInt(Ue)}),u.prototype.readIntLE=function($,K,me){$=$>>>0,K=K>>>0,me||ve($,K,this.length);let Pe=this[$],Ue=1,at=0;for(;++at<K&&(Ue*=256);)Pe+=this[$+at]*Ue;return Ue*=128,Pe>=Ue&&(Pe-=Math.pow(2,8*K)),Pe},u.prototype.readIntBE=function($,K,me){$=$>>>0,K=K>>>0,me||ve($,K,this.length);let Pe=K,Ue=1,at=this[$+--Pe];for(;Pe>0&&(Ue*=256);)at+=this[$+--Pe]*Ue;return Ue*=128,at>=Ue&&(at-=Math.pow(2,8*K)),at},u.prototype.readInt8=function($,K){return $=$>>>0,K||ve($,1,this.length),this[$]&128?(255-this[$]+1)*-1:this[$]},u.prototype.readInt16LE=function($,K){$=$>>>0,K||ve($,2,this.length);const me=this[$]|this[$+1]<<8;return me&32768?me|4294901760:me},u.prototype.readInt16BE=function($,K){$=$>>>0,K||ve($,2,this.length);const me=this[$+1]|this[$]<<8;return me&32768?me|4294901760:me},u.prototype.readInt32LE=function($,K){return $=$>>>0,K||ve($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},u.prototype.readInt32BE=function($,K){return $=$>>>0,K||ve($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},u.prototype.readBigInt64LE=_t(function($){$=$>>>0,Se($,"offset");const K=this[$],me=this[$+7];(K===void 0||me===void 0)&&ge($,this.length-8);const Pe=this[$+4]+this[$+5]*2**8+this[$+6]*2**16+(me<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(K+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24)}),u.prototype.readBigInt64BE=_t(function($){$=$>>>0,Se($,"offset");const K=this[$],me=this[$+7];(K===void 0||me===void 0)&&ge($,this.length-8);const Pe=(K<<24)+this[++$]*2**16+this[++$]*2**8+this[++$];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+me)}),u.prototype.readFloatLE=function($,K){return $=$>>>0,K||ve($,4,this.length),t.read(this,$,!0,23,4)},u.prototype.readFloatBE=function($,K){return $=$>>>0,K||ve($,4,this.length),t.read(this,$,!1,23,4)},u.prototype.readDoubleLE=function($,K){return $=$>>>0,K||ve($,8,this.length),t.read(this,$,!0,52,8)},u.prototype.readDoubleBE=function($,K){return $=$>>>0,K||ve($,8,this.length),t.read(this,$,!1,52,8)};function _e(de,$,K,me,Pe,Ue){if(!u.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if($>Pe||$<Ue)throw new RangeError('"value" argument is out of bounds');if(K+me>de.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function($,K,me,Pe){if($=+$,K=K>>>0,me=me>>>0,!Pe){const ft=Math.pow(2,8*me)-1;_e(this,$,K,me,ft,0)}let Ue=1,at=0;for(this[K]=$&255;++at<me&&(Ue*=256);)this[K+at]=$/Ue&255;return K+me},u.prototype.writeUintBE=u.prototype.writeUIntBE=function($,K,me,Pe){if($=+$,K=K>>>0,me=me>>>0,!Pe){const ft=Math.pow(2,8*me)-1;_e(this,$,K,me,ft,0)}let Ue=me-1,at=1;for(this[K+Ue]=$&255;--Ue>=0&&(at*=256);)this[K+Ue]=$/at&255;return K+me},u.prototype.writeUint8=u.prototype.writeUInt8=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,1,255,0),this[K]=$&255,K+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,2,65535,0),this[K]=$&255,this[K+1]=$>>>8,K+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,2,65535,0),this[K]=$>>>8,this[K+1]=$&255,K+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,4,4294967295,0),this[K+3]=$>>>24,this[K+2]=$>>>16,this[K+1]=$>>>8,this[K]=$&255,K+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,4,4294967295,0),this[K]=$>>>24,this[K+1]=$>>>16,this[K+2]=$>>>8,this[K+3]=$&255,K+4};function Le(de,$,K,me,Pe){Ae($,me,Pe,de,K,7);let Ue=Number($&BigInt(4294967295));de[K++]=Ue,Ue=Ue>>8,de[K++]=Ue,Ue=Ue>>8,de[K++]=Ue,Ue=Ue>>8,de[K++]=Ue;let at=Number($>>BigInt(32)&BigInt(4294967295));return de[K++]=at,at=at>>8,de[K++]=at,at=at>>8,de[K++]=at,at=at>>8,de[K++]=at,K}function He(de,$,K,me,Pe){Ae($,me,Pe,de,K,7);let Ue=Number($&BigInt(4294967295));de[K+7]=Ue,Ue=Ue>>8,de[K+6]=Ue,Ue=Ue>>8,de[K+5]=Ue,Ue=Ue>>8,de[K+4]=Ue;let at=Number($>>BigInt(32)&BigInt(4294967295));return de[K+3]=at,at=at>>8,de[K+2]=at,at=at>>8,de[K+1]=at,at=at>>8,de[K]=at,K+8}u.prototype.writeBigUInt64LE=_t(function($,K=0){return Le(this,$,K,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=_t(function($,K=0){return He(this,$,K,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function($,K,me,Pe){if($=+$,K=K>>>0,!Pe){const Cn=Math.pow(2,8*me-1);_e(this,$,K,me,Cn-1,-Cn)}let Ue=0,at=1,ft=0;for(this[K]=$&255;++Ue<me&&(at*=256);)$<0&&ft===0&&this[K+Ue-1]!==0&&(ft=1),this[K+Ue]=($/at>>0)-ft&255;return K+me},u.prototype.writeIntBE=function($,K,me,Pe){if($=+$,K=K>>>0,!Pe){const Cn=Math.pow(2,8*me-1);_e(this,$,K,me,Cn-1,-Cn)}let Ue=me-1,at=1,ft=0;for(this[K+Ue]=$&255;--Ue>=0&&(at*=256);)$<0&&ft===0&&this[K+Ue+1]!==0&&(ft=1),this[K+Ue]=($/at>>0)-ft&255;return K+me},u.prototype.writeInt8=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,1,127,-128),$<0&&($=255+$+1),this[K]=$&255,K+1},u.prototype.writeInt16LE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,2,32767,-32768),this[K]=$&255,this[K+1]=$>>>8,K+2},u.prototype.writeInt16BE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,2,32767,-32768),this[K]=$>>>8,this[K+1]=$&255,K+2},u.prototype.writeInt32LE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,4,2147483647,-2147483648),this[K]=$&255,this[K+1]=$>>>8,this[K+2]=$>>>16,this[K+3]=$>>>24,K+4},u.prototype.writeInt32BE=function($,K,me){return $=+$,K=K>>>0,me||_e(this,$,K,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[K]=$>>>24,this[K+1]=$>>>16,this[K+2]=$>>>8,this[K+3]=$&255,K+4},u.prototype.writeBigInt64LE=_t(function($,K=0){return Le(this,$,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=_t(function($,K=0){return He(this,$,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $e(de,$,K,me,Pe,Ue){if(K+me>de.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function bt(de,$,K,me,Pe){return $=+$,K=K>>>0,Pe||$e(de,$,K,4),t.write(de,$,K,me,23,4),K+4}u.prototype.writeFloatLE=function($,K,me){return bt(this,$,K,!0,me)},u.prototype.writeFloatBE=function($,K,me){return bt(this,$,K,!1,me)};function Ct(de,$,K,me,Pe){return $=+$,K=K>>>0,Pe||$e(de,$,K,8),t.write(de,$,K,me,52,8),K+8}u.prototype.writeDoubleLE=function($,K,me){return Ct(this,$,K,!0,me)},u.prototype.writeDoubleBE=function($,K,me){return Ct(this,$,K,!1,me)},u.prototype.copy=function($,K,me,Pe){if(!u.isBuffer($))throw new TypeError("argument should be a Buffer");if(me||(me=0),!Pe&&Pe!==0&&(Pe=this.length),K>=$.length&&(K=$.length),K||(K=0),Pe>0&&Pe<me&&(Pe=me),Pe===me||$.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),$.length-K<Pe-me&&(Pe=$.length-K+me);const Ue=Pe-me;return this===$&&typeof s.prototype.copyWithin=="function"?this.copyWithin(K,me,Pe):s.prototype.set.call($,this.subarray(me,Pe),K),Ue},u.prototype.fill=function($,K,me,Pe){if(typeof $=="string"){if(typeof K=="string"?(Pe=K,K=0,me=this.length):typeof me=="string"&&(Pe=me,me=this.length),Pe!==void 0&&typeof Pe!="string")throw new TypeError("encoding must be a string");if(typeof Pe=="string"&&!u.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if($.length===1){const at=$.charCodeAt(0);(Pe==="utf8"&&at<128||Pe==="latin1")&&($=at)}}else typeof $=="number"?$=$&255:typeof $=="boolean"&&($=Number($));if(K<0||this.length<K||this.length<me)throw new RangeError("Out of range index");if(me<=K)return this;K=K>>>0,me=me===void 0?this.length:me>>>0,$||($=0);let Ue;if(typeof $=="number")for(Ue=K;Ue<me;++Ue)this[Ue]=$;else{const at=u.isBuffer($)?$:u.from($,Pe),ft=at.length;if(ft===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(Ue=0;Ue<me-K;++Ue)this[Ue+K]=at[Ue%ft]}return this};const Lt={};function Gt(de,$,K){Lt[de]=class extends K{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${de}]`,this.stack,delete this.name}get code(){return de}set code(Pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pe,writable:!0})}toString(){return`${this.name} [${de}]: ${this.message}`}}}Gt("ERR_BUFFER_OUT_OF_BOUNDS",function(de){return de?`${de} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Gt("ERR_INVALID_ARG_TYPE",function(de,$){return`The "${de}" argument must be of type number. Received type ${typeof $}`},TypeError),Gt("ERR_OUT_OF_RANGE",function(de,$,K){let me=`The value of "${de}" is out of range.`,Pe=K;return Number.isInteger(K)&&Math.abs(K)>2**32?Pe=qt(String(K)):typeof K=="bigint"&&(Pe=String(K),(K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))&&(Pe=qt(Pe)),Pe+="n"),me+=` It must be ${$}. Received ${Pe}`,me},RangeError);function qt(de){let $="",K=de.length;const me=de[0]==="-"?1:0;for(;K>=me+4;K-=3)$=`_${de.slice(K-3,K)}${$}`;return`${de.slice(0,K)}${$}`}function V(de,$,K){Se($,"offset"),(de[$]===void 0||de[$+K]===void 0)&&ge($,de.length-(K+1))}function Ae(de,$,K,me,Pe,Ue){if(de>K||de<$){const at=typeof $=="bigint"?"n":"";let ft;throw $===0||$===BigInt(0)?ft=`>= 0${at} and < 2${at} ** ${(Ue+1)*8}${at}`:ft=`>= -(2${at} ** ${(Ue+1)*8-1}${at}) and < 2 ** ${(Ue+1)*8-1}${at}`,new Lt.ERR_OUT_OF_RANGE("value",ft,de)}V(me,Pe,Ue)}function Se(de,$){if(typeof de!="number")throw new Lt.ERR_INVALID_ARG_TYPE($,"number",de)}function ge(de,$,K){throw Math.floor(de)!==de?(Se(de,K),new Lt.ERR_OUT_OF_RANGE("offset","an integer",de)):$<0?new Lt.ERR_BUFFER_OUT_OF_BOUNDS:new Lt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,de)}const fe=/[^+/0-9A-Za-z-_]/g;function Ce(de){if(de=de.split("=")[0],de=de.trim().replace(fe,""),de.length<2)return"";for(;de.length%4!==0;)de=de+"=";return de}function ke(de,$){$=$||1/0;let K;const me=de.length;let Pe=null;const Ue=[];for(let at=0;at<me;++at){if(K=de.charCodeAt(at),K>55295&&K<57344){if(!Pe){if(K>56319){($-=3)>-1&&Ue.push(239,191,189);continue}else if(at+1===me){($-=3)>-1&&Ue.push(239,191,189);continue}Pe=K;continue}if(K<56320){($-=3)>-1&&Ue.push(239,191,189),Pe=K;continue}K=(Pe-55296<<10|K-56320)+65536}else Pe&&($-=3)>-1&&Ue.push(239,191,189);if(Pe=null,K<128){if(($-=1)<0)break;Ue.push(K)}else if(K<2048){if(($-=2)<0)break;Ue.push(K>>6|192,K&63|128)}else if(K<65536){if(($-=3)<0)break;Ue.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if(($-=4)<0)break;Ue.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return Ue}function he(de){const $=[];for(let K=0;K<de.length;++K)$.push(de.charCodeAt(K)&255);return $}function ie(de,$){let K,me,Pe;const Ue=[];for(let at=0;at<de.length&&!(($-=2)<0);++at)K=de.charCodeAt(at),me=K>>8,Pe=K%256,Ue.push(Pe),Ue.push(me);return Ue}function Me(de){return e.toByteArray(Ce(de))}function Fe(de,$,K,me){let Pe;for(Pe=0;Pe<me&&!(Pe+K>=$.length||Pe>=de.length);++Pe)$[Pe+K]=de[Pe];return Pe}function Ve(de,$){return de instanceof $||de!=null&&de.constructor!=null&&de.constructor.name!=null&&de.constructor.name===$.name}function We(de){return de!==de}const Ut=function(){const de="0123456789abcdef",$=new Array(256);for(let K=0;K<16;++K){const me=K*16;for(let Pe=0;Pe<16;++Pe)$[me+Pe]=de[K]+de[Pe]}return $}();function _t(de){return typeof BigInt>"u"?tn:de}function tn(){throw new Error("BigInt not supported")}})(_ne);const rl=_ne.Buffer;function LR(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sne={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,r,s){function a(c,u){if(!r[c]){if(!i[c]){var h=typeof LR=="function"&&LR;if(!u&&h)return h(c,!0);if(o)return o(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[c]={exports:{}};i[c][0].call(f.exports,function(m){var v=i[c][1][m];return a(v||m)},f,f.exports,t,i,r,s)}return r[c].exports}for(var o=typeof LR=="function"&&LR,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,i,r){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var c,u,h,d,f,m,v,_=[],y=0,S=l.length,T=S,x=s.getTypeOf(l)!=="string";y<l.length;)T=S-y,h=x?(c=l[y++],u=y<S?l[y++]:0,y<S?l[y++]:0):(c=l.charCodeAt(y++),u=y<S?l.charCodeAt(y++):0,y<S?l.charCodeAt(y++):0),d=c>>2,f=(3&c)<<4|u>>4,m=1<T?(15&u)<<2|h>>6:64,v=2<T?63&h:64,_.push(o.charAt(d)+o.charAt(f)+o.charAt(m)+o.charAt(v));return _.join("")},r.decode=function(l){var c,u,h,d,f,m,v=0,_=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var S,T=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&T--,l.charAt(l.length-2)===o.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=a.uint8array?new Uint8Array(0|T):new Array(0|T);v<l.length;)c=o.indexOf(l.charAt(v++))<<2|(d=o.indexOf(l.charAt(v++)))>>4,u=(15&d)<<4|(f=o.indexOf(l.charAt(v++)))>>2,h=(3&f)<<6|(m=o.indexOf(l.charAt(v++))),S[_++]=c,f!==64&&(S[_++]=u),m!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(t,i,r){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(u,h,d,f,m){this.compressedSize=u,this.uncompressedSize=h,this.crc32=d,this.compression=f,this.compressedContent=m}c.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,h,d){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},i.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,r){var s=t("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();i.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(c,u,h,d){var f=a,m=d+h;c^=-1;for(var v=d;v<m;v++)c=c>>>8^f[255&(c^u[v])];return-1^c}(0|l,o,o.length,0):function(c,u,h,d){var f=a,m=d+h;c^=-1;for(var v=d;v<m;v++)c=c>>>8^f[255&(c^u.charCodeAt(v))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,i,r){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=s?"uint8array":"array";function u(h,d){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=d,this.meta={}}r.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,h.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(d){h.push({data:d,meta:h.meta})}},r.compressWorker=function(h){return new u("Deflate",h)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,r){function s(f,m){var v,_="";for(v=0;v<m;v++)_+=String.fromCharCode(255&f),f>>>=8;return _}function a(f,m,v,_,y,S){var T,x,I=f.file,R=f.compression,N=S!==c.utf8encode,L=o.transformTo("string",S(I.name)),k=o.transformTo("string",c.utf8encode(I.name)),z=I.comment,Z=o.transformTo("string",S(z)),H=o.transformTo("string",c.utf8encode(z)),q=k.length!==I.name.length,U=H.length!==z.length,ee="",W="",Q="",X=I.dir,Y=I.date,ae={crc32:0,compressedSize:0,uncompressedSize:0};m&&!v||(ae.crc32=f.crc32,ae.compressedSize=f.compressedSize,ae.uncompressedSize=f.uncompressedSize);var se=0;m&&(se|=8),N||!q&&!U||(se|=2048);var ue=0,Ne=0;X&&(ue|=16),y==="UNIX"?(Ne=798,ue|=function(_e,Le){var He=_e;return _e||(He=Le?16893:33204),(65535&He)<<16}(I.unixPermissions,X)):(Ne=20,ue|=function(_e){return 63&(_e||0)}(I.dosPermissions)),T=Y.getUTCHours(),T<<=6,T|=Y.getUTCMinutes(),T<<=5,T|=Y.getUTCSeconds()/2,x=Y.getUTCFullYear()-1980,x<<=4,x|=Y.getUTCMonth()+1,x<<=5,x|=Y.getUTCDate(),q&&(W=s(1,1)+s(u(L),4)+k,ee+="up"+s(W.length,2)+W),U&&(Q=s(1,1)+s(u(Z),4)+H,ee+="uc"+s(Q.length,2)+Q);var ve="";return ve+=`
\0`,ve+=s(se,2),ve+=R.magic,ve+=s(T,2),ve+=s(x,2),ve+=s(ae.crc32,4),ve+=s(ae.compressedSize,4),ve+=s(ae.uncompressedSize,4),ve+=s(L.length,2),ve+=s(ee.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ve+L+ee,dirRecord:h.CENTRAL_FILE_HEADER+s(Ne,2)+ve+s(Z.length,2)+"\0\0\0\0"+s(ue,4)+s(_,4)+L+ee+Z}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),h=t("../signature");function d(f,m,v,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=v,this.encodeFileName=_,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(d,l),d.prototype.push=function(f){var m=f.meta.percent||0,v=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:v?(m+100*(v-_-1))/v:100}}))},d.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var m=this.streamFiles&&!f.file.dir;if(m){var v=a(f,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(f){this.accumulate=!1;var m=this.streamFiles&&!f.file.dir,v=a(f,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),m)this.push({data:function(_){return h.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var f=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var v=this.bytesWritten-f,_=function(y,S,T,x,I){var R=o.transformTo("string",I(x));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(S,4)+s(T,4)+s(R.length,2)+R}(this.dirRecords.length,v,f,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(f){this._sources.push(f);var m=this;return f.on("data",function(v){m.processChunk(v)}),f.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),f.on("error",function(v){m.error(v)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(f){var m=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var v=0;v<m.length;v++)try{m[v].error(f)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,m=0;m<f.length;m++)f[m].lock()},i.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,r){var s=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(o,l,c){var u=new a(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{o.forEach(function(d,f){h++;var m=function(S,T){var x=S||T,I=s[x];if(!I)throw new Error(x+" is not a valid compression method !");return I}(f.options.compression,l.compression),v=f.options.compressionOptions||l.compressionOptions||{},_=f.dir,y=f.date;f._compressWorker(m,v).withStreamInfo("file",{name:d,dir:_,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,r){var s=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function h(d){return new a.Promise(function(f,m){var v=d.decompressed.getContentWorker().pipe(new c);v.on("error",function(_){m(_)}).on("end",function(){v.streamInfo.crc32!==d.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}i.exports=function(d,f){var m=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(d)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,f.optimizedBinaryString,f.base64).then(function(v){var _=new l(f);return _.load(v),_}).then(function(v){var _=[a.Promise.resolve(v)],y=v.files;if(f.checkCRC32)for(var S=0;S<y.length;S++)_.push(h(y[S]));return a.Promise.all(_)}).then(function(v){for(var _=v.shift(),y=_.files,S=0;S<y.length;S++){var T=y[S],x=T.fileNameStr,I=s.resolve(T.fileNameStr);m.file(I,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:f.createFolders}),T.dir||(m.file(I).unsafeOriginalName=x)}return _.zipComment.length&&(m.comment=_.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,r){var s=t("../utils"),a=t("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,r){var s=t("readable-stream").Readable;function a(o,l,c){s.call(this,l),this._helper=o;var u=this;o.on("data",function(h,d){u.push(h)||u._helper.pause(),c&&c(d)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,i,r){i.exports={isNode:typeof rl<"u",newBufferFrom:function(s,a){if(rl.from&&rl.from!==Uint8Array.from)return rl.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new rl(s,a)},allocBuffer:function(s){if(rl.alloc)return rl.alloc(s);var a=new rl(s);return a.fill(0),a},isBuffer:function(s){return rl.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,r){function s(I,R,N){var L,k=o.getTypeOf(R),z=o.extend(N||{},u);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(I=y(I)),z.createFolders&&(L=_(I))&&S.call(this,L,!0);var Z=k==="string"&&z.binary===!1&&z.base64===!1;N&&N.binary!==void 0||(z.binary=!Z),(R instanceof h&&R.uncompressedSize===0||z.dir||!R||R.length===0)&&(z.base64=!1,z.binary=!0,R="",z.compression="STORE",k="string");var H=null;H=R instanceof h||R instanceof l?R:m.isNode&&m.isStream(R)?new v(I,R):o.prepareContent(I,R,z.binary,z.optimizedBinaryString,z.base64);var q=new d(I,H,z);this.files[I]=q}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),h=t("./compressedObject"),d=t("./zipObject"),f=t("./generate"),m=t("./nodejsUtils"),v=t("./nodejs/NodejsStreamInputAdapter"),_=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var R=I.lastIndexOf("/");return 0<R?I.substring(0,R):""},y=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},S=function(I,R){return R=R!==void 0?R:u.createFolders,I=y(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:R}),this.files[I]};function T(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var R,N,L;for(R in this.files)L=this.files[R],(N=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&I(N,L)},filter:function(I){var R=[];return this.forEach(function(N,L){I(N,L)&&R.push(L)}),R},file:function(I,R,N){if(arguments.length!==1)return I=this.root+I,s.call(this,I,R,N),this;if(T(I)){var L=I;return this.filter(function(z,Z){return!Z.dir&&L.test(z)})}var k=this.files[this.root+I];return k&&!k.dir?k:null},folder:function(I){if(!I)return this;if(T(I))return this.filter(function(k,z){return z.dir&&I.test(k)});var R=this.root+I,N=S.call(this,R),L=this.clone();return L.root=N.name,L},remove:function(I){I=this.root+I;var R=this.files[I];if(R||(I.slice(-1)!=="/"&&(I+="/"),R=this.files[I]),R&&!R.dir)delete this.files[I];else for(var N=this.filter(function(k,z){return z.name.slice(0,I.length)===I}),L=0;L<N.length;L++)delete this.files[N[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var R,N={};try{if((N=o.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");o.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var L=N.comment||this.comment||"";R=f.generateWorker(this,N,L)}catch(k){(R=new l("error")).error(k)}return new c(R,N.type||"string",N.mimeType)},generateAsync:function(I,R){return this.generateInternalStream(I).accumulate(R)},generateNodeStream:function(I,R){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(R)}};i.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,r){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,r){var s=t("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),h=o.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===h)return d-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),h=o.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&h===d[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,i,r){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(t,i,r){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,r){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,i,r){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,r){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");i.exports=function(h){var d=s.getTypeOf(h);return s.checkSupport(d),d!=="string"||a.uint8array?d==="nodebuffer"?new c(h):a.uint8array?new u(s.transformTo("uint8array",h)):new o(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,r){var s=t("./GenericWorker"),a=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,r){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(t,i,r){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),u=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(m,v){return new u.Promise(function(_,y){var S=[],T=m._internalType,x=m._outputType,I=m._mimeType;m.on("data",function(R,N){S.push(R),v&&v(N)}).on("error",function(R){S=[],y(R)}).on("end",function(){try{var R=function(N,L,k){switch(N){case"blob":return s.newBlob(s.transformTo("arraybuffer",L),k);case"base64":return l.encode(L);default:return s.transformTo(N,L)}}(x,function(N,L){var k,z=0,Z=null,H=0;for(k=0;k<L.length;k++)H+=L[k].length;switch(N){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(Z=new Uint8Array(H),k=0;k<L.length;k++)Z.set(L[k],z),z+=L[k].length;return Z;case"nodebuffer":return rl.concat(L);default:throw new Error("concat : unsupported type '"+N+"'")}}(T,S),I);_(R)}catch(N){y(N)}S=[]}).resume()})}function f(m,v,_){var y=v;switch(v){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=v,this._mimeType=_,s.checkSupport(y),this._worker=m.pipe(new a(y)),m.lock()}catch(S){this._worker=new o("error"),this._worker.error(S)}}f.prototype={accumulate:function(m){return d(this,m)},on:function(m,v){var _=this;return m==="data"?this._worker.on(m,function(y){v.call(_,y.data,y.meta)}):this._worker.on(m,function(){s.delay(v,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},m)}},i.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof rl<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,r){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}r.utf8encode=function(f){return a.nodebuffer?o.newBufferFrom(f,"utf-8"):function(m){var v,_,y,S,T,x=m.length,I=0;for(S=0;S<x;S++)(64512&(_=m.charCodeAt(S)))==55296&&S+1<x&&(64512&(y=m.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),S++),I+=_<128?1:_<2048?2:_<65536?3:4;for(v=a.uint8array?new Uint8Array(I):new Array(I),S=T=0;T<I;S++)(64512&(_=m.charCodeAt(S)))==55296&&S+1<x&&(64512&(y=m.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),S++),_<128?v[T++]=_:(_<2048?v[T++]=192|_>>>6:(_<65536?v[T++]=224|_>>>12:(v[T++]=240|_>>>18,v[T++]=128|_>>>12&63),v[T++]=128|_>>>6&63),v[T++]=128|63&_);return v}(f)},r.utf8decode=function(f){return a.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(m){var v,_,y,S,T=m.length,x=new Array(2*T);for(v=_=0;v<T;)if((y=m[v++])<128)x[_++]=y;else if(4<(S=c[y]))x[_++]=65533,v+=S-1;else{for(y&=S===2?31:S===3?15:7;1<S&&v<T;)y=y<<6|63&m[v++],S--;1<S?x[_++]=65533:y<65536?x[_++]=y:(y-=65536,x[_++]=55296|y>>10&1023,x[_++]=56320|1023&y)}return x.length!==_&&(x.subarray?x=x.subarray(0,_):x.length=_),s.applyFromCharCode(x)}(f=s.transformTo(a.uint8array?"uint8array":"array",f))},s.inherits(h,l),h.prototype.processChunk=function(f){var m=s.transformTo(a.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var v=m;(m=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),m.set(v,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var _=function(S,T){var x;for((T=T||S.length)>S.length&&(T=S.length),x=T-1;0<=x&&(192&S[x])==128;)x--;return x<0||x===0?T:x+c[S[x]]>T?x:T}(m),y=m;_!==m.length&&(a.uint8array?(y=m.subarray(0,_),this.leftOver=m.subarray(_,m.length)):(y=m.slice(0,_),this.leftOver=m.slice(_,m.length))),this.push({data:r.utf8decode(y),meta:f.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=h,s.inherits(d,l),d.prototype.processChunk=function(f){this.push({data:r.utf8encode(f.data),meta:f.meta})},r.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,r){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(v){return v}function u(v,_){for(var y=0;y<v.length;++y)_[y]=255&v.charCodeAt(y);return _}t("setimmediate"),r.newBlob=function(v,_){r.checkSupport("blob");try{return new Blob([v],{type:_})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(v),y.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(v,_,y){var S=[],T=0,x=v.length;if(x<=y)return String.fromCharCode.apply(null,v);for(;T<x;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,v.slice(T,Math.min(T+y,x)))):S.push(String.fromCharCode.apply(null,v.subarray(T,Math.min(T+y,x)))),T+=y;return S.join("")},stringifyByChar:function(v){for(var _="",y=0;y<v.length;y++)_+=String.fromCharCode(v[y]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(v){var _=65536,y=r.getTypeOf(v),S=!0;if(y==="uint8array"?S=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(v,y,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(v)}function f(v,_){for(var y=0;y<v.length;y++)_[y]=v[y];return _}r.applyFromCharCode=d;var m={};m.string={string:c,array:function(v){return u(v,new Array(v.length))},arraybuffer:function(v){return m.string.uint8array(v).buffer},uint8array:function(v){return u(v,new Uint8Array(v.length))},nodebuffer:function(v){return u(v,o.allocBuffer(v.length))}},m.array={string:d,array:c,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(v)}},m.arraybuffer={string:function(v){return d(new Uint8Array(v))},array:function(v){return f(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:c,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(new Uint8Array(v))}},m.uint8array={string:d,array:function(v){return f(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:c,nodebuffer:function(v){return o.newBufferFrom(v)}},m.nodebuffer={string:d,array:function(v){return f(v,new Array(v.length))},arraybuffer:function(v){return m.nodebuffer.uint8array(v).buffer},uint8array:function(v){return f(v,new Uint8Array(v.length))},nodebuffer:c},r.transformTo=function(v,_){if(_=_||"",!v)return _;r.checkSupport(v);var y=r.getTypeOf(_);return m[y][v](_)},r.resolve=function(v){for(var _=v.split("/"),y=[],S=0;S<_.length;S++){var T=_[S];T==="."||T===""&&S!==0&&S!==_.length-1||(T===".."?y.pop():y.push(T))}return y.join("/")},r.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(v)?"nodebuffer":s.uint8array&&v instanceof Uint8Array?"uint8array":s.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(v){if(!s[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(v){var _,y,S="";for(y=0;y<(v||"").length;y++)S+="\\x"+((_=v.charCodeAt(y))<16?"0":"")+_.toString(16).toUpperCase();return S},r.delay=function(v,_,y){setImmediate(function(){v.apply(y||null,_||[])})},r.inherits=function(v,_){function y(){}y.prototype=_.prototype,v.prototype=new y},r.extend=function(){var v,_,y={};for(v=0;v<arguments.length;v++)for(_ in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],_)&&y[_]===void 0&&(y[_]=arguments[v][_]);return y},r.prepareContent=function(v,_,y,S,T){return l.Promise.resolve(_).then(function(x){return s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new l.Promise(function(I,R){var N=new FileReader;N.onload=function(L){I(L.target.result)},N.onerror=function(L){R(L.target.error)},N.readAsArrayBuffer(x)}):x}).then(function(x){var I=r.getTypeOf(x);return I?(I==="arraybuffer"?x=r.transformTo("uint8array",x):I==="string"&&(T?x=a.decode(x):y&&S!==!0&&(x=function(R){return u(R,s.uint8array?new Uint8Array(R.length):new Array(R.length))}(x))),x):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(d)+", expected "+a.pretty(h)+")")}},isSignature:function(h,d){var f=this.reader.index;this.reader.setIndex(h);var m=this.reader.readString(4)===d;return this.reader.setIndex(f),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",f=a.transformTo(d,h);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,d,f,m=this.zip64EndOfCentralSize-44;0<m;)h=this.reader.readInt(2),d=this.reader.readInt(4),f=this.reader.readData(d),this.zip64ExtensibleData[h]={id:h,length:d,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,d;for(h=0;h<this.files.length;h++)d=this.files[h],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var d=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var m=d-f;if(0<m)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),u=t("./compressions"),h=t("./support");function d(f,m){this.options=f,this.loadOptions=m}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var m,v;if(f.skip(22),this.fileNameLength=f.readInt(2),v=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(_){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===_)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var m=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(m),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var m,v,_,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)m=f.readInt(2),v=f.readInt(2),_=f.readData(v),this.extraFields[m]={id:m,length:v,value:_};f.setIndex(y)},handleUTF8:function(){var f=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var v=a.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var y=a.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var m=s(f.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:c.utf8decode(m.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var m=s(f.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:c.utf8decode(m.readData(f.length-5))}return null}},i.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,r){function s(m,v,_){this.name=m,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=v,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");s.prototype={internalStream:function(m){var v=null,_="string";try{if(!m)throw new Error("No output type specified.");var y=(_=m.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),v=this._decompressWorker();var S=!this._dataBinary;S&&!y&&(v=v.pipe(new l.Utf8EncodeWorker)),!S&&y&&(v=v.pipe(new l.Utf8DecodeWorker))}catch(T){(v=new u("error")).error(T)}return new a(v,_,"")},async:function(m,v){return this.internalStream(m).accumulate(v)},nodeStream:function(m,v){return this.internalStream(m||"nodebuffer").toNodejsStream(v)},_compressWorker:function(m,v){if(this._data instanceof c&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(_,m,v)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<h.length;f++)s.prototype[h[f]]=d;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,r){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(m),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),a=function(){h.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var v=s.document.createElement("script");v.onreadystatechange=function(){m(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:function(){setTimeout(m,0)};else{var d=new s.MessageChannel;d.port1.onmessage=m,a=function(){d.port2.postMessage(0)}}var f=[];function m(){var v,_;o=!0;for(var y=f.length;y;){for(_=f,f=[],v=-1;++v<y;)_[v]();y=f.length}o=!1}i.exports=function(v){f.push(v)!==1||o||a()}}).call(this,typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,r){var s=t("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&v(this,y)}function d(y,S,T){this.promise=y,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function f(y,S,T){s(function(){var x;try{x=S(T)}catch(I){return o.reject(y,I)}x===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,x)})}function m(y){var S=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof S=="function")return function(){S.apply(y,arguments)}}function v(y,S){var T=!1;function x(N){T||(T=!0,o.reject(y,N))}function I(N){T||(T=!0,o.resolve(y,N))}var R=_(function(){S(I,x)});R.status==="error"&&x(R.value)}function _(y,S){var T={};try{T.value=y(S),T.status="success"}catch(x){T.status="error",T.value=x}return T}(i.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var S=this.constructor;return this.then(function(T){return S.resolve(y()).then(function(){return T})},function(T){return S.resolve(y()).then(function(){throw T})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,S){if(typeof y!="function"&&this.state===c||typeof S!="function"&&this.state===l)return this;var T=new this.constructor(a);return this.state!==u?f(T,this.state===c?y:S,this.outcome):this.queue.push(new d(T,y,S)),T},d.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},d.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},d.prototype.callRejected=function(y){o.reject(this.promise,y)},d.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},o.resolve=function(y,S){var T=_(m,S);if(T.status==="error")return o.reject(y,T.value);var x=T.value;if(x)v(y,x);else{y.state=c,y.outcome=S;for(var I=-1,R=y.queue.length;++I<R;)y.queue[I].callFulfilled(S)}return y},o.reject=function(y,S){y.state=l,y.outcome=S;for(var T=-1,x=y.queue.length;++T<x;)y.queue[T].callRejected(S);return y},h.resolve=function(y){return y instanceof this?y:o.resolve(new this(a),y)},h.reject=function(y){var S=new this(a);return o.reject(S,y)},h.all=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=y.length,x=!1;if(!T)return this.resolve([]);for(var I=new Array(T),R=0,N=-1,L=new this(a);++N<T;)k(y[N],N);return L;function k(z,Z){S.resolve(z).then(function(H){I[Z]=H,++R!==T||x||(x=!0,o.resolve(L,I))},function(H){x||(x=!0,o.reject(L,H))})}},h.race=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=y.length,x=!1;if(!T)return this.resolve([]);for(var I=-1,R=new this(a);++I<T;)N=y[I],S.resolve(N).then(function(L){x||(x=!0,o.resolve(R,L))},function(L){x||(x=!0,o.reject(R,L))});var N;return R}},{immediate:36}],38:[function(t,i,r){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,r){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,f=0,m=8;function v(y){if(!(this instanceof v))return new v(y);this.options=a.assign({level:d,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var T=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(T!==h)throw new Error(l[T]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var x;if(x=typeof S.dictionary=="string"?o.string2buf(S.dictionary):u.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(T=s.deflateSetDictionary(this.strm,x))!==h)throw new Error(l[T]);this._dict_set=!0}}function _(y,S){var T=new v(S);if(T.push(y,!0),T.err)throw T.msg||l[T.err];return T.result}v.prototype.push=function(y,S){var T,x,I=this.strm,R=this.options.chunkSize;if(this.ended)return!1;x=S===~~S?S:S===!0?4:0,typeof y=="string"?I.input=o.string2buf(y):u.call(y)==="[object ArrayBuffer]"?I.input=new Uint8Array(y):I.input=y,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(R),I.next_out=0,I.avail_out=R),(T=s.deflate(I,x))!==1&&T!==h)return this.onEnd(T),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(I.output,I.next_out))):this.onData(a.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&T!==1);return x===4?(T=s.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===h):x!==2||(this.onEnd(h),!(I.avail_out=0))},v.prototype.onData=function(y){this.chunks.push(y)},v.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Deflate=v,r.deflate=_,r.deflateRaw=function(y,S){return(S=S||{}).raw=!0,_(y,S)},r.gzip=function(y,S){return(S=S||{}).gzip=!0,_(y,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,r){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),h=t("./zlib/gzheader"),d=Object.prototype.toString;function f(v){if(!(this instanceof f))return new f(v);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},v||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||v&&v.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,_.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function m(v,_){var y=new f(_);if(y.push(v,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(v,_){var y,S,T,x,I,R,N=this.strm,L=this.options.chunkSize,k=this.options.dictionary,z=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?N.input=o.binstring2buf(v):d.call(v)==="[object ArrayBuffer]"?N.input=new Uint8Array(v):N.input=v,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new a.Buf8(L),N.next_out=0,N.avail_out=L),(y=s.inflate(N,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(R=typeof k=="string"?o.string2buf(k):d.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,y=s.inflateSetDictionary(this.strm,R)),y===l.Z_BUF_ERROR&&z===!0&&(y=l.Z_OK,z=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&y!==l.Z_STREAM_END&&(N.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=o.utf8border(N.output,N.next_out),x=N.next_out-T,I=o.buf2string(N.output,T),N.next_out=x,N.avail_out=L-x,x&&a.arraySet(N.output,N.output,T,x,0),this.onData(I)):this.onData(a.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(z=!0)}while((0<N.avail_in||N.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(N.avail_out=0))},f.prototype.onData=function(v){this.chunks.push(v)},f.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},r.Inflate=f,r.inflate=m,r.inflateRaw=function(v,_){return(_=_||{}).raw=!0,m(v,_)},r.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])}}return l},r.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,u,h,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+h),d);else for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){var c,u,h,d,f,m;for(c=h=0,u=l.length;c<u;c++)h+=l[c].length;for(m=new Uint8Array(h),c=d=0,u=l.length;c<u;c++)f=l[c],m.set(f,d),d+=f.length;return m}},o={arraySet:function(l,c,u,h,d){for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(t,i,r){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(h,d){if(d<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(h,d));for(var f="",m=0;m<d;m++)f+=String.fromCharCode(h[m]);return f}l[254]=l[254]=1,r.string2buf=function(h){var d,f,m,v,_,y=h.length,S=0;for(v=0;v<y;v++)(64512&(f=h.charCodeAt(v)))==55296&&v+1<y&&(64512&(m=h.charCodeAt(v+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),v++),S+=f<128?1:f<2048?2:f<65536?3:4;for(d=new s.Buf8(S),v=_=0;_<S;v++)(64512&(f=h.charCodeAt(v)))==55296&&v+1<y&&(64512&(m=h.charCodeAt(v+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),v++),f<128?d[_++]=f:(f<2048?d[_++]=192|f>>>6:(f<65536?d[_++]=224|f>>>12:(d[_++]=240|f>>>18,d[_++]=128|f>>>12&63),d[_++]=128|f>>>6&63),d[_++]=128|63&f);return d},r.buf2binstring=function(h){return u(h,h.length)},r.binstring2buf=function(h){for(var d=new s.Buf8(h.length),f=0,m=d.length;f<m;f++)d[f]=h.charCodeAt(f);return d},r.buf2string=function(h,d){var f,m,v,_,y=d||h.length,S=new Array(2*y);for(f=m=0;f<y;)if((v=h[f++])<128)S[m++]=v;else if(4<(_=l[v]))S[m++]=65533,f+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&f<y;)v=v<<6|63&h[f++],_--;1<_?S[m++]=65533:v<65536?S[m++]=v:(v-=65536,S[m++]=55296|v>>10&1023,S[m++]=56320|1023&v)}return u(S,m)},r.utf8border=function(h,d){var f;for((d=d||h.length)>h.length&&(d=h.length),f=d-1;0<=f&&(192&h[f])==128;)f--;return f<0||f===0?d:f+l[h[f]]>d?f:d}},{"./common":41}],43:[function(t,i,r){i.exports=function(s,a,o,l){for(var c=65535&s|0,u=s>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;u=u+(c=c+a[l++]|0)|0,--h;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,r){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();i.exports=function(a,o,l,c){var u=s,h=c+l;a^=-1;for(var d=c;d<h;d++)a=a>>>8^u[255&(a^o[d])];return-1^a}},{}],46:[function(t,i,r){var s,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),u=t("./messages"),h=0,d=4,f=0,m=-2,v=-1,_=4,y=2,S=8,T=9,x=286,I=30,R=19,N=2*x+1,L=15,k=3,z=258,Z=z+k+1,H=42,q=113,U=1,ee=2,W=3,Q=4;function X(V,Ae){return V.msg=u[Ae],Ae}function Y(V){return(V<<1)-(4<V?9:0)}function ae(V){for(var Ae=V.length;0<=--Ae;)V[Ae]=0}function se(V){var Ae=V.state,Se=Ae.pending;Se>V.avail_out&&(Se=V.avail_out),Se!==0&&(a.arraySet(V.output,Ae.pending_buf,Ae.pending_out,Se,V.next_out),V.next_out+=Se,Ae.pending_out+=Se,V.total_out+=Se,V.avail_out-=Se,Ae.pending-=Se,Ae.pending===0&&(Ae.pending_out=0))}function ue(V,Ae){o._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,Ae),V.block_start=V.strstart,se(V.strm)}function Ne(V,Ae){V.pending_buf[V.pending++]=Ae}function ve(V,Ae){V.pending_buf[V.pending++]=Ae>>>8&255,V.pending_buf[V.pending++]=255&Ae}function _e(V,Ae){var Se,ge,fe=V.max_chain_length,Ce=V.strstart,ke=V.prev_length,he=V.nice_match,ie=V.strstart>V.w_size-Z?V.strstart-(V.w_size-Z):0,Me=V.window,Fe=V.w_mask,Ve=V.prev,We=V.strstart+z,Ut=Me[Ce+ke-1],_t=Me[Ce+ke];V.prev_length>=V.good_match&&(fe>>=2),he>V.lookahead&&(he=V.lookahead);do if(Me[(Se=Ae)+ke]===_t&&Me[Se+ke-1]===Ut&&Me[Se]===Me[Ce]&&Me[++Se]===Me[Ce+1]){Ce+=2,Se++;do;while(Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Me[++Ce]===Me[++Se]&&Ce<We);if(ge=z-(We-Ce),Ce=We-z,ke<ge){if(V.match_start=Ae,he<=(ke=ge))break;Ut=Me[Ce+ke-1],_t=Me[Ce+ke]}}while((Ae=Ve[Ae&Fe])>ie&&--fe!=0);return ke<=V.lookahead?ke:V.lookahead}function Le(V){var Ae,Se,ge,fe,Ce,ke,he,ie,Me,Fe,Ve=V.w_size;do{if(fe=V.window_size-V.lookahead-V.strstart,V.strstart>=Ve+(Ve-Z)){for(a.arraySet(V.window,V.window,Ve,Ve,0),V.match_start-=Ve,V.strstart-=Ve,V.block_start-=Ve,Ae=Se=V.hash_size;ge=V.head[--Ae],V.head[Ae]=Ve<=ge?ge-Ve:0,--Se;);for(Ae=Se=Ve;ge=V.prev[--Ae],V.prev[Ae]=Ve<=ge?ge-Ve:0,--Se;);fe+=Ve}if(V.strm.avail_in===0)break;if(ke=V.strm,he=V.window,ie=V.strstart+V.lookahead,Me=fe,Fe=void 0,Fe=ke.avail_in,Me<Fe&&(Fe=Me),Se=Fe===0?0:(ke.avail_in-=Fe,a.arraySet(he,ke.input,ke.next_in,Fe,ie),ke.state.wrap===1?ke.adler=l(ke.adler,he,Fe,ie):ke.state.wrap===2&&(ke.adler=c(ke.adler,he,Fe,ie)),ke.next_in+=Fe,ke.total_in+=Fe,Fe),V.lookahead+=Se,V.lookahead+V.insert>=k)for(Ce=V.strstart-V.insert,V.ins_h=V.window[Ce],V.ins_h=(V.ins_h<<V.hash_shift^V.window[Ce+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[Ce+k-1])&V.hash_mask,V.prev[Ce&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=Ce,Ce++,V.insert--,!(V.lookahead+V.insert<k)););}while(V.lookahead<Z&&V.strm.avail_in!==0)}function He(V,Ae){for(var Se,ge;;){if(V.lookahead<Z){if(Le(V),V.lookahead<Z&&Ae===h)return U;if(V.lookahead===0)break}if(Se=0,V.lookahead>=k&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+k-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),Se!==0&&V.strstart-Se<=V.w_size-Z&&(V.match_length=_e(V,Se)),V.match_length>=k)if(ge=o._tr_tally(V,V.strstart-V.match_start,V.match_length-k),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=k){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+k-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else ge=o._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(ge&&(ue(V,!1),V.strm.avail_out===0))return U}return V.insert=V.strstart<k-1?V.strstart:k-1,Ae===d?(ue(V,!0),V.strm.avail_out===0?W:Q):V.last_lit&&(ue(V,!1),V.strm.avail_out===0)?U:ee}function $e(V,Ae){for(var Se,ge,fe;;){if(V.lookahead<Z){if(Le(V),V.lookahead<Z&&Ae===h)return U;if(V.lookahead===0)break}if(Se=0,V.lookahead>=k&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+k-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=k-1,Se!==0&&V.prev_length<V.max_lazy_match&&V.strstart-Se<=V.w_size-Z&&(V.match_length=_e(V,Se),V.match_length<=5&&(V.strategy===1||V.match_length===k&&4096<V.strstart-V.match_start)&&(V.match_length=k-1)),V.prev_length>=k&&V.match_length<=V.prev_length){for(fe=V.strstart+V.lookahead-k,ge=o._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-k),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=fe&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+k-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=k-1,V.strstart++,ge&&(ue(V,!1),V.strm.avail_out===0))return U}else if(V.match_available){if((ge=o._tr_tally(V,0,V.window[V.strstart-1]))&&ue(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return U}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(ge=o._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<k-1?V.strstart:k-1,Ae===d?(ue(V,!0),V.strm.avail_out===0?W:Q):V.last_lit&&(ue(V,!1),V.strm.avail_out===0)?U:ee}function bt(V,Ae,Se,ge,fe){this.good_length=V,this.max_lazy=Ae,this.nice_length=Se,this.max_chain=ge,this.func=fe}function Ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*N),this.dyn_dtree=new a.Buf16(2*(2*I+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(L+1),this.heap=new a.Buf16(2*x+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*x+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lt(V){var Ae;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=y,(Ae=V.state).pending=0,Ae.pending_out=0,Ae.wrap<0&&(Ae.wrap=-Ae.wrap),Ae.status=Ae.wrap?H:q,V.adler=Ae.wrap===2?0:1,Ae.last_flush=h,o._tr_init(Ae),f):X(V,m)}function Gt(V){var Ae=Lt(V);return Ae===f&&function(Se){Se.window_size=2*Se.w_size,ae(Se.head),Se.max_lazy_match=s[Se.level].max_lazy,Se.good_match=s[Se.level].good_length,Se.nice_match=s[Se.level].nice_length,Se.max_chain_length=s[Se.level].max_chain,Se.strstart=0,Se.block_start=0,Se.lookahead=0,Se.insert=0,Se.match_length=Se.prev_length=k-1,Se.match_available=0,Se.ins_h=0}(V.state),Ae}function qt(V,Ae,Se,ge,fe,Ce){if(!V)return m;var ke=1;if(Ae===v&&(Ae=6),ge<0?(ke=0,ge=-ge):15<ge&&(ke=2,ge-=16),fe<1||T<fe||Se!==S||ge<8||15<ge||Ae<0||9<Ae||Ce<0||_<Ce)return X(V,m);ge===8&&(ge=9);var he=new Ct;return(V.state=he).strm=V,he.wrap=ke,he.gzhead=null,he.w_bits=ge,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=fe+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+k-1)/k),he.window=new a.Buf8(2*he.w_size),he.head=new a.Buf16(he.hash_size),he.prev=new a.Buf16(he.w_size),he.lit_bufsize=1<<fe+6,he.pending_buf_size=4*he.lit_bufsize,he.pending_buf=new a.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=Ae,he.strategy=Ce,he.method=Se,Gt(V)}s=[new bt(0,0,0,0,function(V,Ae){var Se=65535;for(Se>V.pending_buf_size-5&&(Se=V.pending_buf_size-5);;){if(V.lookahead<=1){if(Le(V),V.lookahead===0&&Ae===h)return U;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var ge=V.block_start+Se;if((V.strstart===0||V.strstart>=ge)&&(V.lookahead=V.strstart-ge,V.strstart=ge,ue(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-Z&&(ue(V,!1),V.strm.avail_out===0))return U}return V.insert=0,Ae===d?(ue(V,!0),V.strm.avail_out===0?W:Q):(V.strstart>V.block_start&&(ue(V,!1),V.strm.avail_out),U)}),new bt(4,4,8,4,He),new bt(4,5,16,8,He),new bt(4,6,32,32,He),new bt(4,4,16,16,$e),new bt(8,16,32,32,$e),new bt(8,16,128,128,$e),new bt(8,32,128,256,$e),new bt(32,128,258,1024,$e),new bt(32,258,258,4096,$e)],r.deflateInit=function(V,Ae){return qt(V,Ae,S,15,8,0)},r.deflateInit2=qt,r.deflateReset=Gt,r.deflateResetKeep=Lt,r.deflateSetHeader=function(V,Ae){return V&&V.state?V.state.wrap!==2?m:(V.state.gzhead=Ae,f):m},r.deflate=function(V,Ae){var Se,ge,fe,Ce;if(!V||!V.state||5<Ae||Ae<0)return V?X(V,m):m;if(ge=V.state,!V.output||!V.input&&V.avail_in!==0||ge.status===666&&Ae!==d)return X(V,V.avail_out===0?-5:m);if(ge.strm=V,Se=ge.last_flush,ge.last_flush=Ae,ge.status===H)if(ge.wrap===2)V.adler=0,Ne(ge,31),Ne(ge,139),Ne(ge,8),ge.gzhead?(Ne(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),Ne(ge,255&ge.gzhead.time),Ne(ge,ge.gzhead.time>>8&255),Ne(ge,ge.gzhead.time>>16&255),Ne(ge,ge.gzhead.time>>24&255),Ne(ge,ge.level===9?2:2<=ge.strategy||ge.level<2?4:0),Ne(ge,255&ge.gzhead.os),ge.gzhead.extra&&ge.gzhead.extra.length&&(Ne(ge,255&ge.gzhead.extra.length),Ne(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(V.adler=c(V.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=69):(Ne(ge,0),Ne(ge,0),Ne(ge,0),Ne(ge,0),Ne(ge,0),Ne(ge,ge.level===9?2:2<=ge.strategy||ge.level<2?4:0),Ne(ge,3),ge.status=q);else{var ke=S+(ge.w_bits-8<<4)<<8;ke|=(2<=ge.strategy||ge.level<2?0:ge.level<6?1:ge.level===6?2:3)<<6,ge.strstart!==0&&(ke|=32),ke+=31-ke%31,ge.status=q,ve(ge,ke),ge.strstart!==0&&(ve(ge,V.adler>>>16),ve(ge,65535&V.adler)),V.adler=1}if(ge.status===69)if(ge.gzhead.extra){for(fe=ge.pending;ge.gzindex<(65535&ge.gzhead.extra.length)&&(ge.pending!==ge.pending_buf_size||(ge.gzhead.hcrc&&ge.pending>fe&&(V.adler=c(V.adler,ge.pending_buf,ge.pending-fe,fe)),se(V),fe=ge.pending,ge.pending!==ge.pending_buf_size));)Ne(ge,255&ge.gzhead.extra[ge.gzindex]),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>fe&&(V.adler=c(V.adler,ge.pending_buf,ge.pending-fe,fe)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=73)}else ge.status=73;if(ge.status===73)if(ge.gzhead.name){fe=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>fe&&(V.adler=c(V.adler,ge.pending_buf,ge.pending-fe,fe)),se(V),fe=ge.pending,ge.pending===ge.pending_buf_size)){Ce=1;break}Ce=ge.gzindex<ge.gzhead.name.length?255&ge.gzhead.name.charCodeAt(ge.gzindex++):0,Ne(ge,Ce)}while(Ce!==0);ge.gzhead.hcrc&&ge.pending>fe&&(V.adler=c(V.adler,ge.pending_buf,ge.pending-fe,fe)),Ce===0&&(ge.gzindex=0,ge.status=91)}else ge.status=91;if(ge.status===91)if(ge.gzhead.comment){fe=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>fe&&(V.adler=c(V.adler,ge.pending_buf,ge.pending-fe,fe)),se(V),fe=ge.pending,ge.pending===ge.pending_buf_size)){Ce=1;break}Ce=ge.gzindex<ge.gzhead.comment.length?255&ge.gzhead.comment.charCodeAt(ge.gzindex++):0,Ne(ge,Ce)}while(Ce!==0);ge.gzhead.hcrc&&ge.pending>fe&&(V.adler=c(V.adler,ge.pending_buf,ge.pending-fe,fe)),Ce===0&&(ge.status=103)}else ge.status=103;if(ge.status===103&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&se(V),ge.pending+2<=ge.pending_buf_size&&(Ne(ge,255&V.adler),Ne(ge,V.adler>>8&255),V.adler=0,ge.status=q)):ge.status=q),ge.pending!==0){if(se(V),V.avail_out===0)return ge.last_flush=-1,f}else if(V.avail_in===0&&Y(Ae)<=Y(Se)&&Ae!==d)return X(V,-5);if(ge.status===666&&V.avail_in!==0)return X(V,-5);if(V.avail_in!==0||ge.lookahead!==0||Ae!==h&&ge.status!==666){var he=ge.strategy===2?function(ie,Me){for(var Fe;;){if(ie.lookahead===0&&(Le(ie),ie.lookahead===0)){if(Me===h)return U;break}if(ie.match_length=0,Fe=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,Fe&&(ue(ie,!1),ie.strm.avail_out===0))return U}return ie.insert=0,Me===d?(ue(ie,!0),ie.strm.avail_out===0?W:Q):ie.last_lit&&(ue(ie,!1),ie.strm.avail_out===0)?U:ee}(ge,Ae):ge.strategy===3?function(ie,Me){for(var Fe,Ve,We,Ut,_t=ie.window;;){if(ie.lookahead<=z){if(Le(ie),ie.lookahead<=z&&Me===h)return U;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=k&&0<ie.strstart&&(Ve=_t[We=ie.strstart-1])===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]){Ut=ie.strstart+z;do;while(Ve===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]&&Ve===_t[++We]&&We<Ut);ie.match_length=z-(Ut-We),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=k?(Fe=o._tr_tally(ie,1,ie.match_length-k),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(Fe=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),Fe&&(ue(ie,!1),ie.strm.avail_out===0))return U}return ie.insert=0,Me===d?(ue(ie,!0),ie.strm.avail_out===0?W:Q):ie.last_lit&&(ue(ie,!1),ie.strm.avail_out===0)?U:ee}(ge,Ae):s[ge.level].func(ge,Ae);if(he!==W&&he!==Q||(ge.status=666),he===U||he===W)return V.avail_out===0&&(ge.last_flush=-1),f;if(he===ee&&(Ae===1?o._tr_align(ge):Ae!==5&&(o._tr_stored_block(ge,0,0,!1),Ae===3&&(ae(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),se(V),V.avail_out===0))return ge.last_flush=-1,f}return Ae!==d?f:ge.wrap<=0?1:(ge.wrap===2?(Ne(ge,255&V.adler),Ne(ge,V.adler>>8&255),Ne(ge,V.adler>>16&255),Ne(ge,V.adler>>24&255),Ne(ge,255&V.total_in),Ne(ge,V.total_in>>8&255),Ne(ge,V.total_in>>16&255),Ne(ge,V.total_in>>24&255)):(ve(ge,V.adler>>>16),ve(ge,65535&V.adler)),se(V),0<ge.wrap&&(ge.wrap=-ge.wrap),ge.pending!==0?f:1)},r.deflateEnd=function(V){var Ae;return V&&V.state?(Ae=V.state.status)!==H&&Ae!==69&&Ae!==73&&Ae!==91&&Ae!==103&&Ae!==q&&Ae!==666?X(V,m):(V.state=null,Ae===q?X(V,-3):f):m},r.deflateSetDictionary=function(V,Ae){var Se,ge,fe,Ce,ke,he,ie,Me,Fe=Ae.length;if(!V||!V.state||(Ce=(Se=V.state).wrap)===2||Ce===1&&Se.status!==H||Se.lookahead)return m;for(Ce===1&&(V.adler=l(V.adler,Ae,Fe,0)),Se.wrap=0,Fe>=Se.w_size&&(Ce===0&&(ae(Se.head),Se.strstart=0,Se.block_start=0,Se.insert=0),Me=new a.Buf8(Se.w_size),a.arraySet(Me,Ae,Fe-Se.w_size,Se.w_size,0),Ae=Me,Fe=Se.w_size),ke=V.avail_in,he=V.next_in,ie=V.input,V.avail_in=Fe,V.next_in=0,V.input=Ae,Le(Se);Se.lookahead>=k;){for(ge=Se.strstart,fe=Se.lookahead-(k-1);Se.ins_h=(Se.ins_h<<Se.hash_shift^Se.window[ge+k-1])&Se.hash_mask,Se.prev[ge&Se.w_mask]=Se.head[Se.ins_h],Se.head[Se.ins_h]=ge,ge++,--fe;);Se.strstart=ge,Se.lookahead=k-1,Le(Se)}return Se.strstart+=Se.lookahead,Se.block_start=Se.strstart,Se.insert=Se.lookahead,Se.lookahead=0,Se.match_length=Se.prev_length=k-1,Se.match_available=0,V.next_in=he,V.input=ie,V.avail_in=ke,Se.wrap=Ce,f},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,r){i.exports=function(s,a){var o,l,c,u,h,d,f,m,v,_,y,S,T,x,I,R,N,L,k,z,Z,H,q,U,ee;o=s.state,l=s.next_in,U=s.input,c=l+(s.avail_in-5),u=s.next_out,ee=s.output,h=u-(a-s.avail_out),d=u+(s.avail_out-257),f=o.dmax,m=o.wsize,v=o.whave,_=o.wnext,y=o.window,S=o.hold,T=o.bits,x=o.lencode,I=o.distcode,R=(1<<o.lenbits)-1,N=(1<<o.distbits)-1;e:do{T<15&&(S+=U[l++]<<T,T+=8,S+=U[l++]<<T,T+=8),L=x[S&R];t:for(;;){if(S>>>=k=L>>>24,T-=k,(k=L>>>16&255)===0)ee[u++]=65535&L;else{if(!(16&k)){if(!(64&k)){L=x[(65535&L)+(S&(1<<k)-1)];continue t}if(32&k){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}z=65535&L,(k&=15)&&(T<k&&(S+=U[l++]<<T,T+=8),z+=S&(1<<k)-1,S>>>=k,T-=k),T<15&&(S+=U[l++]<<T,T+=8,S+=U[l++]<<T,T+=8),L=I[S&N];n:for(;;){if(S>>>=k=L>>>24,T-=k,!(16&(k=L>>>16&255))){if(!(64&k)){L=I[(65535&L)+(S&(1<<k)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(Z=65535&L,T<(k&=15)&&(S+=U[l++]<<T,(T+=8)<k&&(S+=U[l++]<<T,T+=8)),f<(Z+=S&(1<<k)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(S>>>=k,T-=k,(k=u-h)<Z){if(v<(k=Z-k)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(q=y,(H=0)===_){if(H+=m-k,k<z){for(z-=k;ee[u++]=y[H++],--k;);H=u-Z,q=ee}}else if(_<k){if(H+=m+_-k,(k-=_)<z){for(z-=k;ee[u++]=y[H++],--k;);if(H=0,_<z){for(z-=k=_;ee[u++]=y[H++],--k;);H=u-Z,q=ee}}}else if(H+=_-k,k<z){for(z-=k;ee[u++]=y[H++],--k;);H=u-Z,q=ee}for(;2<z;)ee[u++]=q[H++],ee[u++]=q[H++],ee[u++]=q[H++],z-=3;z&&(ee[u++]=q[H++],1<z&&(ee[u++]=q[H++]))}else{for(H=u-Z;ee[u++]=ee[H++],ee[u++]=ee[H++],ee[u++]=ee[H++],2<(z-=3););z&&(ee[u++]=ee[H++],1<z&&(ee[u++]=ee[H++]))}break}}break}}while(l<c&&u<d);l-=z=T>>3,S&=(1<<(T-=z<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<d?d-u+257:257-(u-d),o.hold=S,o.bits=T}},{}],49:[function(t,i,r){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),u=1,h=2,d=0,f=-2,m=1,v=852,_=592;function y(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(H){var q;return H&&H.state?(q=H.state,H.total_in=H.total_out=q.total=0,H.msg="",q.wrap&&(H.adler=1&q.wrap),q.mode=m,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new s.Buf32(v),q.distcode=q.distdyn=new s.Buf32(_),q.sane=1,q.back=-1,d):f}function x(H){var q;return H&&H.state?((q=H.state).wsize=0,q.whave=0,q.wnext=0,T(H)):f}function I(H,q){var U,ee;return H&&H.state?(ee=H.state,q<0?(U=0,q=-q):(U=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?f:(ee.window!==null&&ee.wbits!==q&&(ee.window=null),ee.wrap=U,ee.wbits=q,x(H))):f}function R(H,q){var U,ee;return H?(ee=new S,(H.state=ee).window=null,(U=I(H,q))!==d&&(H.state=null),U):f}var N,L,k=!0;function z(H){if(k){var q;for(N=new s.Buf32(512),L=new s.Buf32(32),q=0;q<144;)H.lens[q++]=8;for(;q<256;)H.lens[q++]=9;for(;q<280;)H.lens[q++]=7;for(;q<288;)H.lens[q++]=8;for(c(u,H.lens,0,288,N,0,H.work,{bits:9}),q=0;q<32;)H.lens[q++]=5;c(h,H.lens,0,32,L,0,H.work,{bits:5}),k=!1}H.lencode=N,H.lenbits=9,H.distcode=L,H.distbits=5}function Z(H,q,U,ee){var W,Q=H.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new s.Buf8(Q.wsize)),ee>=Q.wsize?(s.arraySet(Q.window,q,U-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(ee<(W=Q.wsize-Q.wnext)&&(W=ee),s.arraySet(Q.window,q,U-ee,W,Q.wnext),(ee-=W)?(s.arraySet(Q.window,q,U-ee,ee,0),Q.wnext=ee,Q.whave=Q.wsize):(Q.wnext+=W,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=W))),0}r.inflateReset=x,r.inflateReset2=I,r.inflateResetKeep=T,r.inflateInit=function(H){return R(H,15)},r.inflateInit2=R,r.inflate=function(H,q){var U,ee,W,Q,X,Y,ae,se,ue,Ne,ve,_e,Le,He,$e,bt,Ct,Lt,Gt,qt,V,Ae,Se,ge,fe=0,Ce=new s.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return f;(U=H.state).mode===12&&(U.mode=13),X=H.next_out,W=H.output,ae=H.avail_out,Q=H.next_in,ee=H.input,Y=H.avail_in,se=U.hold,ue=U.bits,Ne=Y,ve=ae,Ae=d;e:for(;;)switch(U.mode){case m:if(U.wrap===0){U.mode=13;break}for(;ue<16;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(2&U.wrap&&se===35615){Ce[U.check=0]=255&se,Ce[1]=se>>>8&255,U.check=o(U.check,Ce,2,0),ue=se=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&se)<<8)+(se>>8))%31){H.msg="incorrect header check",U.mode=30;break}if((15&se)!=8){H.msg="unknown compression method",U.mode=30;break}if(ue-=4,V=8+(15&(se>>>=4)),U.wbits===0)U.wbits=V;else if(V>U.wbits){H.msg="invalid window size",U.mode=30;break}U.dmax=1<<V,H.adler=U.check=1,U.mode=512&se?10:12,ue=se=0;break;case 2:for(;ue<16;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(U.flags=se,(255&U.flags)!=8){H.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){H.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=se>>8&1),512&U.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,U.check=o(U.check,Ce,2,0)),ue=se=0,U.mode=3;case 3:for(;ue<32;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}U.head&&(U.head.time=se),512&U.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,Ce[2]=se>>>16&255,Ce[3]=se>>>24&255,U.check=o(U.check,Ce,4,0)),ue=se=0,U.mode=4;case 4:for(;ue<16;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}U.head&&(U.head.xflags=255&se,U.head.os=se>>8),512&U.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,U.check=o(U.check,Ce,2,0)),ue=se=0,U.mode=5;case 5:if(1024&U.flags){for(;ue<16;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}U.length=se,U.head&&(U.head.extra_len=se),512&U.flags&&(Ce[0]=255&se,Ce[1]=se>>>8&255,U.check=o(U.check,Ce,2,0)),ue=se=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(Y<(_e=U.length)&&(_e=Y),_e&&(U.head&&(V=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),s.arraySet(U.head.extra,ee,Q,_e,V)),512&U.flags&&(U.check=o(U.check,ee,_e,Q)),Y-=_e,Q+=_e,U.length-=_e),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(Y===0)break e;for(_e=0;V=ee[Q+_e++],U.head&&V&&U.length<65536&&(U.head.name+=String.fromCharCode(V)),V&&_e<Y;);if(512&U.flags&&(U.check=o(U.check,ee,_e,Q)),Y-=_e,Q+=_e,V)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(Y===0)break e;for(_e=0;V=ee[Q+_e++],U.head&&V&&U.length<65536&&(U.head.comment+=String.fromCharCode(V)),V&&_e<Y;);if(512&U.flags&&(U.check=o(U.check,ee,_e,Q)),Y-=_e,Q+=_e,V)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;ue<16;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(se!==(65535&U.check)){H.msg="header crc mismatch",U.mode=30;break}ue=se=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),H.adler=U.check=0,U.mode=12;break;case 10:for(;ue<32;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}H.adler=U.check=y(se),ue=se=0,U.mode=11;case 11:if(U.havedict===0)return H.next_out=X,H.avail_out=ae,H.next_in=Q,H.avail_in=Y,U.hold=se,U.bits=ue,2;H.adler=U.check=1,U.mode=12;case 12:if(q===5||q===6)break e;case 13:if(U.last){se>>>=7&ue,ue-=7&ue,U.mode=27;break}for(;ue<3;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}switch(U.last=1&se,ue-=1,3&(se>>>=1)){case 0:U.mode=14;break;case 1:if(z(U),U.mode=20,q!==6)break;se>>>=2,ue-=2;break e;case 2:U.mode=17;break;case 3:H.msg="invalid block type",U.mode=30}se>>>=2,ue-=2;break;case 14:for(se>>>=7&ue,ue-=7&ue;ue<32;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if((65535&se)!=(se>>>16^65535)){H.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&se,ue=se=0,U.mode=15,q===6)break e;case 15:U.mode=16;case 16:if(_e=U.length){if(Y<_e&&(_e=Y),ae<_e&&(_e=ae),_e===0)break e;s.arraySet(W,ee,Q,_e,X),Y-=_e,Q+=_e,ae-=_e,X+=_e,U.length-=_e;break}U.mode=12;break;case 17:for(;ue<14;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(U.nlen=257+(31&se),se>>>=5,ue-=5,U.ndist=1+(31&se),se>>>=5,ue-=5,U.ncode=4+(15&se),se>>>=4,ue-=4,286<U.nlen||30<U.ndist){H.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;ue<3;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}U.lens[ke[U.have++]]=7&se,se>>>=3,ue-=3}for(;U.have<19;)U.lens[ke[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,Se={bits:U.lenbits},Ae=c(0,U.lens,0,19,U.lencode,0,U.work,Se),U.lenbits=Se.bits,Ae){H.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;bt=(fe=U.lencode[se&(1<<U.lenbits)-1])>>>16&255,Ct=65535&fe,!(($e=fe>>>24)<=ue);){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(Ct<16)se>>>=$e,ue-=$e,U.lens[U.have++]=Ct;else{if(Ct===16){for(ge=$e+2;ue<ge;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(se>>>=$e,ue-=$e,U.have===0){H.msg="invalid bit length repeat",U.mode=30;break}V=U.lens[U.have-1],_e=3+(3&se),se>>>=2,ue-=2}else if(Ct===17){for(ge=$e+3;ue<ge;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}ue-=$e,V=0,_e=3+(7&(se>>>=$e)),se>>>=3,ue-=3}else{for(ge=$e+7;ue<ge;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}ue-=$e,V=0,_e=11+(127&(se>>>=$e)),se>>>=7,ue-=7}if(U.have+_e>U.nlen+U.ndist){H.msg="invalid bit length repeat",U.mode=30;break}for(;_e--;)U.lens[U.have++]=V}}if(U.mode===30)break;if(U.lens[256]===0){H.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,Se={bits:U.lenbits},Ae=c(u,U.lens,0,U.nlen,U.lencode,0,U.work,Se),U.lenbits=Se.bits,Ae){H.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,Se={bits:U.distbits},Ae=c(h,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,Se),U.distbits=Se.bits,Ae){H.msg="invalid distances set",U.mode=30;break}if(U.mode=20,q===6)break e;case 20:U.mode=21;case 21:if(6<=Y&&258<=ae){H.next_out=X,H.avail_out=ae,H.next_in=Q,H.avail_in=Y,U.hold=se,U.bits=ue,l(H,ve),X=H.next_out,W=H.output,ae=H.avail_out,Q=H.next_in,ee=H.input,Y=H.avail_in,se=U.hold,ue=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;bt=(fe=U.lencode[se&(1<<U.lenbits)-1])>>>16&255,Ct=65535&fe,!(($e=fe>>>24)<=ue);){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(bt&&!(240&bt)){for(Lt=$e,Gt=bt,qt=Ct;bt=(fe=U.lencode[qt+((se&(1<<Lt+Gt)-1)>>Lt)])>>>16&255,Ct=65535&fe,!(Lt+($e=fe>>>24)<=ue);){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}se>>>=Lt,ue-=Lt,U.back+=Lt}if(se>>>=$e,ue-=$e,U.back+=$e,U.length=Ct,bt===0){U.mode=26;break}if(32&bt){U.back=-1,U.mode=12;break}if(64&bt){H.msg="invalid literal/length code",U.mode=30;break}U.extra=15&bt,U.mode=22;case 22:if(U.extra){for(ge=U.extra;ue<ge;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}U.length+=se&(1<<U.extra)-1,se>>>=U.extra,ue-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;bt=(fe=U.distcode[se&(1<<U.distbits)-1])>>>16&255,Ct=65535&fe,!(($e=fe>>>24)<=ue);){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(!(240&bt)){for(Lt=$e,Gt=bt,qt=Ct;bt=(fe=U.distcode[qt+((se&(1<<Lt+Gt)-1)>>Lt)])>>>16&255,Ct=65535&fe,!(Lt+($e=fe>>>24)<=ue);){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}se>>>=Lt,ue-=Lt,U.back+=Lt}if(se>>>=$e,ue-=$e,U.back+=$e,64&bt){H.msg="invalid distance code",U.mode=30;break}U.offset=Ct,U.extra=15&bt,U.mode=24;case 24:if(U.extra){for(ge=U.extra;ue<ge;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}U.offset+=se&(1<<U.extra)-1,se>>>=U.extra,ue-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){H.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(ae===0)break e;if(_e=ve-ae,U.offset>_e){if((_e=U.offset-_e)>U.whave&&U.sane){H.msg="invalid distance too far back",U.mode=30;break}Le=_e>U.wnext?(_e-=U.wnext,U.wsize-_e):U.wnext-_e,_e>U.length&&(_e=U.length),He=U.window}else He=W,Le=X-U.offset,_e=U.length;for(ae<_e&&(_e=ae),ae-=_e,U.length-=_e;W[X++]=He[Le++],--_e;);U.length===0&&(U.mode=21);break;case 26:if(ae===0)break e;W[X++]=U.length,ae--,U.mode=21;break;case 27:if(U.wrap){for(;ue<32;){if(Y===0)break e;Y--,se|=ee[Q++]<<ue,ue+=8}if(ve-=ae,H.total_out+=ve,U.total+=ve,ve&&(H.adler=U.check=U.flags?o(U.check,W,ve,X-ve):a(U.check,W,ve,X-ve)),ve=ae,(U.flags?se:y(se))!==U.check){H.msg="incorrect data check",U.mode=30;break}ue=se=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;ue<32;){if(Y===0)break e;Y--,se+=ee[Q++]<<ue,ue+=8}if(se!==(4294967295&U.total)){H.msg="incorrect length check",U.mode=30;break}ue=se=0}U.mode=29;case 29:Ae=1;break e;case 30:Ae=-3;break e;case 31:return-4;case 32:default:return f}return H.next_out=X,H.avail_out=ae,H.next_in=Q,H.avail_in=Y,U.hold=se,U.bits=ue,(U.wsize||ve!==H.avail_out&&U.mode<30&&(U.mode<27||q!==4))&&Z(H,H.output,H.next_out,ve-H.avail_out)?(U.mode=31,-4):(Ne-=H.avail_in,ve-=H.avail_out,H.total_in+=Ne,H.total_out+=ve,U.total+=ve,U.wrap&&ve&&(H.adler=U.check=U.flags?o(U.check,W,ve,H.next_out-ve):a(U.check,W,ve,H.next_out-ve)),H.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(Ne==0&&ve===0||q===4)&&Ae===d&&(Ae=-5),Ae)},r.inflateEnd=function(H){if(!H||!H.state)return f;var q=H.state;return q.window&&(q.window=null),H.state=null,d},r.inflateGetHeader=function(H,q){var U;return H&&H.state&&2&(U=H.state).wrap?((U.head=q).done=!1,d):f},r.inflateSetDictionary=function(H,q){var U,ee=q.length;return H&&H.state?(U=H.state).wrap!==0&&U.mode!==11?f:U.mode===11&&a(1,q,ee,0)!==U.check?-3:Z(H,q,ee,ee)?(U.mode=31,-4):(U.havedict=1,d):f},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,r){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(u,h,d,f,m,v,_,y){var S,T,x,I,R,N,L,k,z,Z=y.bits,H=0,q=0,U=0,ee=0,W=0,Q=0,X=0,Y=0,ae=0,se=0,ue=null,Ne=0,ve=new s.Buf16(16),_e=new s.Buf16(16),Le=null,He=0;for(H=0;H<=15;H++)ve[H]=0;for(q=0;q<f;q++)ve[h[d+q]]++;for(W=Z,ee=15;1<=ee&&ve[ee]===0;ee--);if(ee<W&&(W=ee),ee===0)return m[v++]=20971520,m[v++]=20971520,y.bits=1,0;for(U=1;U<ee&&ve[U]===0;U++);for(W<U&&(W=U),H=Y=1;H<=15;H++)if(Y<<=1,(Y-=ve[H])<0)return-1;if(0<Y&&(u===0||ee!==1))return-1;for(_e[1]=0,H=1;H<15;H++)_e[H+1]=_e[H]+ve[H];for(q=0;q<f;q++)h[d+q]!==0&&(_[_e[h[d+q]]++]=q);if(N=u===0?(ue=Le=_,19):u===1?(ue=a,Ne-=257,Le=o,He-=257,256):(ue=l,Le=c,-1),H=U,R=v,X=q=se=0,x=-1,I=(ae=1<<(Q=W))-1,u===1&&852<ae||u===2&&592<ae)return 1;for(;;){for(L=H-X,z=_[q]<N?(k=0,_[q]):_[q]>N?(k=Le[He+_[q]],ue[Ne+_[q]]):(k=96,0),S=1<<H-X,U=T=1<<Q;m[R+(se>>X)+(T-=S)]=L<<24|k<<16|z|0,T!==0;);for(S=1<<H-1;se&S;)S>>=1;if(S!==0?(se&=S-1,se+=S):se=0,q++,--ve[H]==0){if(H===ee)break;H=h[d+_[q]]}if(W<H&&(se&I)!==x){for(X===0&&(X=W),R+=U,Y=1<<(Q=H-X);Q+X<ee&&!((Y-=ve[Q+X])<=0);)Q++,Y<<=1;if(ae+=1<<Q,u===1&&852<ae||u===2&&592<ae)return 1;m[x=se&I]=W<<24|Q<<16|R-v|0}}return se!==0&&(m[R+se]=H-X<<24|64<<16|0),y.bits=W,0}},{"../utils/common":41}],51:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,r){var s=t("../utils/common"),a=0,o=1;function l(fe){for(var Ce=fe.length;0<=--Ce;)fe[Ce]=0}var c=0,u=29,h=256,d=h+1+u,f=30,m=19,v=2*d+1,_=15,y=16,S=7,T=256,x=16,I=17,R=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(d+2));l(Z);var H=new Array(2*f);l(H);var q=new Array(512);l(q);var U=new Array(256);l(U);var ee=new Array(u);l(ee);var W,Q,X,Y=new Array(f);function ae(fe,Ce,ke,he,ie){this.static_tree=fe,this.extra_bits=Ce,this.extra_base=ke,this.elems=he,this.max_length=ie,this.has_stree=fe&&fe.length}function se(fe,Ce){this.dyn_tree=fe,this.max_code=0,this.stat_desc=Ce}function ue(fe){return fe<256?q[fe]:q[256+(fe>>>7)]}function Ne(fe,Ce){fe.pending_buf[fe.pending++]=255&Ce,fe.pending_buf[fe.pending++]=Ce>>>8&255}function ve(fe,Ce,ke){fe.bi_valid>y-ke?(fe.bi_buf|=Ce<<fe.bi_valid&65535,Ne(fe,fe.bi_buf),fe.bi_buf=Ce>>y-fe.bi_valid,fe.bi_valid+=ke-y):(fe.bi_buf|=Ce<<fe.bi_valid&65535,fe.bi_valid+=ke)}function _e(fe,Ce,ke){ve(fe,ke[2*Ce],ke[2*Ce+1])}function Le(fe,Ce){for(var ke=0;ke|=1&fe,fe>>>=1,ke<<=1,0<--Ce;);return ke>>>1}function He(fe,Ce,ke){var he,ie,Me=new Array(_+1),Fe=0;for(he=1;he<=_;he++)Me[he]=Fe=Fe+ke[he-1]<<1;for(ie=0;ie<=Ce;ie++){var Ve=fe[2*ie+1];Ve!==0&&(fe[2*ie]=Le(Me[Ve]++,Ve))}}function $e(fe){var Ce;for(Ce=0;Ce<d;Ce++)fe.dyn_ltree[2*Ce]=0;for(Ce=0;Ce<f;Ce++)fe.dyn_dtree[2*Ce]=0;for(Ce=0;Ce<m;Ce++)fe.bl_tree[2*Ce]=0;fe.dyn_ltree[2*T]=1,fe.opt_len=fe.static_len=0,fe.last_lit=fe.matches=0}function bt(fe){8<fe.bi_valid?Ne(fe,fe.bi_buf):0<fe.bi_valid&&(fe.pending_buf[fe.pending++]=fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0}function Ct(fe,Ce,ke,he){var ie=2*Ce,Me=2*ke;return fe[ie]<fe[Me]||fe[ie]===fe[Me]&&he[Ce]<=he[ke]}function Lt(fe,Ce,ke){for(var he=fe.heap[ke],ie=ke<<1;ie<=fe.heap_len&&(ie<fe.heap_len&&Ct(Ce,fe.heap[ie+1],fe.heap[ie],fe.depth)&&ie++,!Ct(Ce,he,fe.heap[ie],fe.depth));)fe.heap[ke]=fe.heap[ie],ke=ie,ie<<=1;fe.heap[ke]=he}function Gt(fe,Ce,ke){var he,ie,Me,Fe,Ve=0;if(fe.last_lit!==0)for(;he=fe.pending_buf[fe.d_buf+2*Ve]<<8|fe.pending_buf[fe.d_buf+2*Ve+1],ie=fe.pending_buf[fe.l_buf+Ve],Ve++,he===0?_e(fe,ie,Ce):(_e(fe,(Me=U[ie])+h+1,Ce),(Fe=N[Me])!==0&&ve(fe,ie-=ee[Me],Fe),_e(fe,Me=ue(--he),ke),(Fe=L[Me])!==0&&ve(fe,he-=Y[Me],Fe)),Ve<fe.last_lit;);_e(fe,T,Ce)}function qt(fe,Ce){var ke,he,ie,Me=Ce.dyn_tree,Fe=Ce.stat_desc.static_tree,Ve=Ce.stat_desc.has_stree,We=Ce.stat_desc.elems,Ut=-1;for(fe.heap_len=0,fe.heap_max=v,ke=0;ke<We;ke++)Me[2*ke]!==0?(fe.heap[++fe.heap_len]=Ut=ke,fe.depth[ke]=0):Me[2*ke+1]=0;for(;fe.heap_len<2;)Me[2*(ie=fe.heap[++fe.heap_len]=Ut<2?++Ut:0)]=1,fe.depth[ie]=0,fe.opt_len--,Ve&&(fe.static_len-=Fe[2*ie+1]);for(Ce.max_code=Ut,ke=fe.heap_len>>1;1<=ke;ke--)Lt(fe,Me,ke);for(ie=We;ke=fe.heap[1],fe.heap[1]=fe.heap[fe.heap_len--],Lt(fe,Me,1),he=fe.heap[1],fe.heap[--fe.heap_max]=ke,fe.heap[--fe.heap_max]=he,Me[2*ie]=Me[2*ke]+Me[2*he],fe.depth[ie]=(fe.depth[ke]>=fe.depth[he]?fe.depth[ke]:fe.depth[he])+1,Me[2*ke+1]=Me[2*he+1]=ie,fe.heap[1]=ie++,Lt(fe,Me,1),2<=fe.heap_len;);fe.heap[--fe.heap_max]=fe.heap[1],function(_t,tn){var de,$,K,me,Pe,Ue,at=tn.dyn_tree,ft=tn.max_code,Cn=tn.stat_desc.static_tree,ze=tn.stat_desc.has_stree,It=tn.stat_desc.extra_bits,nt=tn.stat_desc.extra_base,Et=tn.stat_desc.max_length,Wt=0;for(me=0;me<=_;me++)_t.bl_count[me]=0;for(at[2*_t.heap[_t.heap_max]+1]=0,de=_t.heap_max+1;de<v;de++)Et<(me=at[2*at[2*($=_t.heap[de])+1]+1]+1)&&(me=Et,Wt++),at[2*$+1]=me,ft<$||(_t.bl_count[me]++,Pe=0,nt<=$&&(Pe=It[$-nt]),Ue=at[2*$],_t.opt_len+=Ue*(me+Pe),ze&&(_t.static_len+=Ue*(Cn[2*$+1]+Pe)));if(Wt!==0){do{for(me=Et-1;_t.bl_count[me]===0;)me--;_t.bl_count[me]--,_t.bl_count[me+1]+=2,_t.bl_count[Et]--,Wt-=2}while(0<Wt);for(me=Et;me!==0;me--)for($=_t.bl_count[me];$!==0;)ft<(K=_t.heap[--de])||(at[2*K+1]!==me&&(_t.opt_len+=(me-at[2*K+1])*at[2*K],at[2*K+1]=me),$--)}}(fe,Ce),He(Me,Ut,fe.bl_count)}function V(fe,Ce,ke){var he,ie,Me=-1,Fe=Ce[1],Ve=0,We=7,Ut=4;for(Fe===0&&(We=138,Ut=3),Ce[2*(ke+1)+1]=65535,he=0;he<=ke;he++)ie=Fe,Fe=Ce[2*(he+1)+1],++Ve<We&&ie===Fe||(Ve<Ut?fe.bl_tree[2*ie]+=Ve:ie!==0?(ie!==Me&&fe.bl_tree[2*ie]++,fe.bl_tree[2*x]++):Ve<=10?fe.bl_tree[2*I]++:fe.bl_tree[2*R]++,Me=ie,Ut=(Ve=0)===Fe?(We=138,3):ie===Fe?(We=6,3):(We=7,4))}function Ae(fe,Ce,ke){var he,ie,Me=-1,Fe=Ce[1],Ve=0,We=7,Ut=4;for(Fe===0&&(We=138,Ut=3),he=0;he<=ke;he++)if(ie=Fe,Fe=Ce[2*(he+1)+1],!(++Ve<We&&ie===Fe)){if(Ve<Ut)for(;_e(fe,ie,fe.bl_tree),--Ve!=0;);else ie!==0?(ie!==Me&&(_e(fe,ie,fe.bl_tree),Ve--),_e(fe,x,fe.bl_tree),ve(fe,Ve-3,2)):Ve<=10?(_e(fe,I,fe.bl_tree),ve(fe,Ve-3,3)):(_e(fe,R,fe.bl_tree),ve(fe,Ve-11,7));Me=ie,Ut=(Ve=0)===Fe?(We=138,3):ie===Fe?(We=6,3):(We=7,4)}}l(Y);var Se=!1;function ge(fe,Ce,ke,he){ve(fe,(c<<1)+(he?1:0),3),function(ie,Me,Fe,Ve){bt(ie),Ne(ie,Fe),Ne(ie,~Fe),s.arraySet(ie.pending_buf,ie.window,Me,Fe,ie.pending),ie.pending+=Fe}(fe,Ce,ke)}r._tr_init=function(fe){Se||(function(){var Ce,ke,he,ie,Me,Fe=new Array(_+1);for(ie=he=0;ie<u-1;ie++)for(ee[ie]=he,Ce=0;Ce<1<<N[ie];Ce++)U[he++]=ie;for(U[he-1]=ie,ie=Me=0;ie<16;ie++)for(Y[ie]=Me,Ce=0;Ce<1<<L[ie];Ce++)q[Me++]=ie;for(Me>>=7;ie<f;ie++)for(Y[ie]=Me<<7,Ce=0;Ce<1<<L[ie]-7;Ce++)q[256+Me++]=ie;for(ke=0;ke<=_;ke++)Fe[ke]=0;for(Ce=0;Ce<=143;)Z[2*Ce+1]=8,Ce++,Fe[8]++;for(;Ce<=255;)Z[2*Ce+1]=9,Ce++,Fe[9]++;for(;Ce<=279;)Z[2*Ce+1]=7,Ce++,Fe[7]++;for(;Ce<=287;)Z[2*Ce+1]=8,Ce++,Fe[8]++;for(He(Z,d+1,Fe),Ce=0;Ce<f;Ce++)H[2*Ce+1]=5,H[2*Ce]=Le(Ce,5);W=new ae(Z,N,h+1,d,_),Q=new ae(H,L,0,f,_),X=new ae(new Array(0),k,0,m,S)}(),Se=!0),fe.l_desc=new se(fe.dyn_ltree,W),fe.d_desc=new se(fe.dyn_dtree,Q),fe.bl_desc=new se(fe.bl_tree,X),fe.bi_buf=0,fe.bi_valid=0,$e(fe)},r._tr_stored_block=ge,r._tr_flush_block=function(fe,Ce,ke,he){var ie,Me,Fe=0;0<fe.level?(fe.strm.data_type===2&&(fe.strm.data_type=function(Ve){var We,Ut=4093624447;for(We=0;We<=31;We++,Ut>>>=1)if(1&Ut&&Ve.dyn_ltree[2*We]!==0)return a;if(Ve.dyn_ltree[18]!==0||Ve.dyn_ltree[20]!==0||Ve.dyn_ltree[26]!==0)return o;for(We=32;We<h;We++)if(Ve.dyn_ltree[2*We]!==0)return o;return a}(fe)),qt(fe,fe.l_desc),qt(fe,fe.d_desc),Fe=function(Ve){var We;for(V(Ve,Ve.dyn_ltree,Ve.l_desc.max_code),V(Ve,Ve.dyn_dtree,Ve.d_desc.max_code),qt(Ve,Ve.bl_desc),We=m-1;3<=We&&Ve.bl_tree[2*z[We]+1]===0;We--);return Ve.opt_len+=3*(We+1)+5+5+4,We}(fe),ie=fe.opt_len+3+7>>>3,(Me=fe.static_len+3+7>>>3)<=ie&&(ie=Me)):ie=Me=ke+5,ke+4<=ie&&Ce!==-1?ge(fe,Ce,ke,he):fe.strategy===4||Me===ie?(ve(fe,2+(he?1:0),3),Gt(fe,Z,H)):(ve(fe,4+(he?1:0),3),function(Ve,We,Ut,_t){var tn;for(ve(Ve,We-257,5),ve(Ve,Ut-1,5),ve(Ve,_t-4,4),tn=0;tn<_t;tn++)ve(Ve,Ve.bl_tree[2*z[tn]+1],3);Ae(Ve,Ve.dyn_ltree,We-1),Ae(Ve,Ve.dyn_dtree,Ut-1)}(fe,fe.l_desc.max_code+1,fe.d_desc.max_code+1,Fe+1),Gt(fe,fe.dyn_ltree,fe.dyn_dtree)),$e(fe),he&&bt(fe)},r._tr_tally=function(fe,Ce,ke){return fe.pending_buf[fe.d_buf+2*fe.last_lit]=Ce>>>8&255,fe.pending_buf[fe.d_buf+2*fe.last_lit+1]=255&Ce,fe.pending_buf[fe.l_buf+fe.last_lit]=255&ke,fe.last_lit++,Ce===0?fe.dyn_ltree[2*ke]++:(fe.matches++,Ce--,fe.dyn_ltree[2*(U[ke]+h+1)]++,fe.dyn_dtree[2*ue(Ce)]++),fe.last_lit===fe.lit_bufsize-1},r._tr_align=function(fe){ve(fe,2,3),_e(fe,T,Z),function(Ce){Ce.bi_valid===16?(Ne(Ce,Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0):8<=Ce.bi_valid&&(Ce.pending_buf[Ce.pending++]=255&Ce.bi_buf,Ce.bi_buf>>=8,Ce.bi_valid-=8)}(fe)}},{"../utils/common":41}],53:[function(t,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,r){(function(s){(function(a,o){if(!a.setImmediate){var l,c,u,h,d=1,f={},m=!1,v=a.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(a);_=_&&_.setTimeout?_:a,l={}.toString.call(a.process)==="[object process]"?function(x){ss.nextTick(function(){S(x)})}:function(){if(a.postMessage&&!a.importScripts){var x=!0,I=a.onmessage;return a.onmessage=function(){x=!1},a.postMessage("","*"),a.onmessage=I,x}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",T,!1):a.attachEvent("onmessage",T),function(x){a.postMessage(h+x,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(x){S(x.data)},function(x){u.port2.postMessage(x)}):v&&"onreadystatechange"in v.createElement("script")?(c=v.documentElement,function(x){var I=v.createElement("script");I.onreadystatechange=function(){S(x),I.onreadystatechange=null,c.removeChild(I),I=null},c.appendChild(I)}):function(x){setTimeout(S,0,x)},_.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var I=new Array(arguments.length-1),R=0;R<I.length;R++)I[R]=arguments[R+1];var N={callback:x,args:I};return f[d]=N,l(d),d++},_.clearImmediate=y}function y(x){delete f[x]}function S(x){if(m)setTimeout(S,0,x);else{var I=f[x];if(I){m=!0;try{(function(R){var N=R.callback,L=R.args;switch(L.length){case 0:N();break;case 1:N(L[0]);break;case 2:N(L[0],L[1]);break;case 3:N(L[0],L[1],L[2]);break;default:N.apply(o,L)}})(I)}finally{y(x),m=!1}}}}function T(x){x.source===a&&typeof x.data=="string"&&x.data.indexOf(h)===0&&S(+x.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Rl<"u"?Rl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Sne);var P1e=Sne.exports;const Lst=Dl(P1e);function ji(n,e,t){return n.namespaceURI&&n.namespaceURI!=="http://www.w3.org/1999/xhtml"||(e=Array.isArray(e)?e:[e],!e.includes(n.tagName.toLowerCase()))?!1:t?Object.entries(t).every(([i,r])=>n[i]===r):!0}function Ad(n){var e;if(D1e(n)&&n.defaultView)return n.defaultView;if(!((e=n.ownerDocument)===null||e===void 0)&&e.defaultView)return n.ownerDocument.defaultView;throw new Error(`Could not determine window of node. Node was ${k1e(n)}`)}function D1e(n){return n.nodeType===9}function k1e(n){return typeof n=="function"?`function ${n.name}`:n===null?"null":String(n)}function Ene(n,e){return new Promise((t,i)=>{const r=new e;r.onerror=i,r.onabort=i,r.onload=()=>{t(String(r.result))},r.readAsText(n)})}function dj(n,e){const t={...e,length:e.length,item:i=>t[i],[Symbol.iterator]:function*(){for(let r=0;r<t.length;r++)yield t[r]}};return t.constructor=n.FileList,n.FileList&&Object.setPrototypeOf(t,n.FileList.prototype),Object.freeze(t),t}function vy(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class Tne{getAsFile(){return this.file}getAsString(e){typeof this.data=="string"&&e(this.data)}webkitGetAsEntry(){throw new Error("not implemented")}constructor(e,t){vy(this,"kind",void 0),vy(this,"type",void 0),vy(this,"file",null),vy(this,"data",void 0),typeof e=="string"?(this.kind="string",this.type=String(t),this.data=e):(this.kind="file",this.type=e.type,this.file=e)}}class L1e extends Array{add(...e){const t=new Tne(e[0],e[1]);return this.push(t),t}clear(){this.splice(0,this.length)}remove(e){this.splice(e,1)}}function UR(n,e){const[t,i]=n.split("/"),r=!i||i==="*";return s=>e?s.type===(r?t:n):r?s.type.startsWith(`${t}/`):s.type===t}function U1e(n){return new class{getData(t){var i;const r=(i=this.items.find(UR(t,!0)))!==null&&i!==void 0?i:this.items.find(UR(t,!1));let s="";return r==null||r.getAsString(a=>{s=a}),s}setData(t,i){const r=this.items.findIndex(UR(t,!0)),s=new Tne(i,t);r>=0?this.items.splice(r,1,s):this.items.push(s)}clearData(t){if(t){const i=this.items.findIndex(UR(t,!0));i>=0&&this.items.remove(i)}else this.items.clear()}get types(){const t=[];return this.files.length&&t.push("Files"),this.items.forEach(i=>t.push(i.type)),Object.freeze(t),t}setDragImage(){}constructor(){vy(this,"dropEffect","none"),vy(this,"effectAllowed","uninitialized"),vy(this,"items",new L1e),vy(this,"files",dj(n,[]))}}}function fj(n,e=[]){const t=typeof n.DataTransfer>"u"?U1e(n):new n.DataTransfer;return Object.defineProperty(t,"files",{get:()=>dj(n,e)}),t}async function B1e(n,e){return e.kind==="file"?e.getAsFile():new n.Blob([await new Promise(t=>e.getAsString(t))],{type:e.type})}function xne(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wne(n,...e){const t=Object.fromEntries(e.map(i=>[typeof i=="string"?"text/plain":i.type,Promise.resolve(i)]));return typeof n.ClipboardItem<"u"?new n.ClipboardItem(t):new class{get types(){return Array.from(Object.keys(this.data))}async getType(r){const s=await this.data[r];if(!s)throw new Error(`${r} is not one of the available MIME types on this item.`);return s instanceof n.Blob?s:new n.Blob([s],{type:r})}constructor(r){xne(this,"data",void 0),this.data=r}}(t)}const BT=Symbol("Manage ClipboardSub");function y9(n,e){return Object.assign(new class extends n.EventTarget{async read(){return Array.from(this.items)}async readText(){let i="";for(const r of this.items){const s=r.types.includes("text/plain")?"text/plain":r.types.find(a=>a.startsWith("text/"));s&&(i+=await r.getType(s).then(a=>Ene(a,n.FileReader)))}return i}async write(i){this.items=i}async writeText(i){this.items=[wne(n,i)]}constructor(...i){super(...i),xne(this,"items",[])}},{[BT]:e})}function pj(n){return!!(n!=null&&n[BT])}function F1e(n){if(pj(n.navigator.clipboard))return n.navigator.clipboard[BT];const e=Object.getOwnPropertyDescriptor(n.navigator,"clipboard");let t;const i={resetClipboardStub:()=>{t=y9(n,i)},detachClipboardStub:()=>{e?Object.defineProperty(n.navigator,"clipboard",e):Object.defineProperty(n.navigator,"clipboard",{value:void 0,configurable:!0})}};return t=y9(n,i),Object.defineProperty(n.navigator,"clipboard",{get:()=>t,configurable:!0}),t[BT]}function z1e(n){pj(n.navigator.clipboard)&&n.navigator.clipboard[BT].resetClipboardStub()}function j1e(n){pj(n.navigator.clipboard)&&n.navigator.clipboard[BT].detachClipboardStub()}async function H1e(n){const e=n.defaultView,t=e==null?void 0:e.navigator.clipboard,i=t&&await t.read();if(!i)throw new Error("The Clipboard API is unavailable.");const r=fj(e);for(const s of i)for(const a of s.types)r.setData(a,await s.getType(a).then(o=>Ene(o,e.FileReader)));return r}async function Cne(n,e){const t=Ad(n),i=t.navigator.clipboard,r=[];for(let a=0;a<e.items.length;a++){const o=e.items[a],l=await B1e(t,o);r.push(wne(t,l))}if(!(i&&await i.write(r).then(()=>!0,()=>!1)))throw new Error("The Clipboard API is unavailable.")}const KN=globalThis;typeof KN.afterEach=="function"&&KN.afterEach(()=>z1e(globalThis.window));typeof KN.afterAll=="function"&&KN.afterAll(()=>j1e(globalThis.window));const Ane=["input:not([type=hidden]):not([disabled])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contenteditable=""]','[contenteditable="true"]',"a[href]","[tabindex]:not([disabled])"].join(", ");function mj(n){return n.matches(Ane)}function V1e(n){return new n.constructor(n.type,n)}function Ug(n){for(let t=n;t;t=t.parentElement)if(ji(t,["button","input","select","textarea","optgroup","option"])){if(t.hasAttribute("disabled"))return!0}else if(ji(t,"fieldset")){var e;if(t.hasAttribute("disabled")&&!(!((e=t.querySelector(":scope > legend"))===null||e===void 0)&&e.contains(n)))return!0}else if(t.tagName.includes("-")&&t.constructor.formAssociated&&t.hasAttribute("disabled"))return!0;return!1}function NA(n){const e=n.activeElement;return e!=null&&e.shadowRoot?NA(e.shadowRoot):Ug(e)?n.ownerDocument?n.ownerDocument.body:n.body:e}function DB(n){var e;return(e=NA(n))!==null&&e!==void 0?e:n.body}function G1e(n,e){let t=n;do{if(e(t))return t;t=t.parentElement}while(t&&t!==n.ownerDocument.body)}function yb(n){return n.hasAttribute("contenteditable")&&(n.getAttribute("contenteditable")=="true"||n.getAttribute("contenteditable")=="")}function EC(n){const e=q1e(n);return e&&(e.closest('[contenteditable=""]')||e.closest('[contenteditable="true"]'))}function q1e(n){return n.nodeType===1?n:n.parentElement}var Mne=function(n){return n.button="button",n.color="color",n.file="file",n.image="image",n.reset="reset",n.submit="submit",n.checkbox="checkbox",n.radio="radio",n}(Mne||{});function Rne(n){return ji(n,"button")||ji(n,"input")&&n.type in Mne}function FT(n){return Ine(n)&&!n.readOnly||yb(n)}var One=function(n){return n.text="text",n.date="date",n["datetime-local"]="datetime-local",n.email="email",n.month="month",n.number="number",n.password="password",n.search="search",n.tel="tel",n.time="time",n.url="url",n.week="week",n}(One||{});function Ine(n){return ji(n,"textarea")||ji(n,"input")&&n.type in One}function Gp(n){return Nne(n)&&Ine(n)}function $1e(n){return Nne(n)&&Rne(n)}function Nne(n){return n.nodeType===1}function W1e(n){const e=n.ownerDocument.getSelection();if(e!=null&&e.focusNode&&Gp(n)){const i=EC(e.focusNode);if(i){if(!e.isCollapsed){var t;const r=((t=i.firstChild)===null||t===void 0?void 0:t.nodeType)===3?i.firstChild:i;e.setBaseAndExtent(r,0,r,0)}}else e.setBaseAndExtent(n,0,n,0)}}var Gy={},gj={exports:{}};gj.exports;(function(n){const t=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,i=(s=0)=>(a,o,l)=>`\x1B[${38+s};2;${a};${o};${l}m`;function r(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[c,u]of Object.entries(l))a[c]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},l[c]=a[c],s.set(u[0],u[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=t(),a.color.ansi16m=i(),a.bgColor.ansi256=t(10),a.bgColor.ansi16m=i(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(h=>h+h).join(""));const u=Number.parseInt(c,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(n,"exports",{enumerable:!0,get:r})})(gj);var Pne=gj.exports,$g={};Object.defineProperty($g,"__esModule",{value:!0});$g.printIteratorEntries=X1e;$g.printIteratorValues=K1e;$g.printListItems=Z1e;$g.printObjectProperties=J1e;const Y1e=(n,e)=>{const t=Object.keys(n).sort(e);return Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(i=>{Object.getOwnPropertyDescriptor(n,i).enumerable&&t.push(i)}),t};function X1e(n,e,t,i,r,s,a=": "){let o="",l=n.next();if(!l.done){o+=e.spacingOuter;const c=t+e.indent;for(;!l.done;){const u=s(l.value[0],e,c,i,r),h=s(l.value[1],e,c,i,r);o+=c+u+a+h,l=n.next(),l.done?e.min||(o+=","):o+=","+e.spacingInner}o+=e.spacingOuter+t}return o}function K1e(n,e,t,i,r,s){let a="",o=n.next();if(!o.done){a+=e.spacingOuter;const l=t+e.indent;for(;!o.done;)a+=l+s(o.value,e,l,i,r),o=n.next(),o.done?e.min||(a+=","):a+=","+e.spacingInner;a+=e.spacingOuter+t}return a}function Z1e(n,e,t,i,r,s){let a="";if(n.length){a+=e.spacingOuter;const o=t+e.indent;for(let l=0;l<n.length;l++)a+=o,l in n&&(a+=s(n[l],e,o,i,r)),l<n.length-1?a+=","+e.spacingInner:e.min||(a+=",");a+=e.spacingOuter+t}return a}function J1e(n,e,t,i,r,s){let a="";const o=Y1e(n,e.compareKeys);if(o.length){a+=e.spacingOuter;const l=t+e.indent;for(let c=0;c<o.length;c++){const u=o[c],h=s(u,e,l,i,r),d=s(n[u],e,l,i,r);a+=l+h+": "+d,c<o.length-1?a+=","+e.spacingInner:e.min||(a+=",")}a+=e.spacingOuter+t}return a}var My={};Object.defineProperty(My,"__esModule",{value:!0});My.test=My.serialize=My.default=void 0;var _9=$g,ZN=function(){return typeof globalThis<"u"?globalThis:typeof ZN<"u"?ZN:typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),kB=ZN["jest-symbol-do-not-touch"]||ZN.Symbol;const Q1e=typeof kB=="function"&&kB.for?kB.for("jest.asymmetricMatcher"):1267621,BR=" ",Dne=(n,e,t,i,r,s)=>{const a=n.toString();return a==="ArrayContaining"||a==="ArrayNotContaining"?++i>e.maxDepth?"["+a+"]":a+BR+"["+(0,_9.printListItems)(n.sample,e,t,i,r,s)+"]":a==="ObjectContaining"||a==="ObjectNotContaining"?++i>e.maxDepth?"["+a+"]":a+BR+"{"+(0,_9.printObjectProperties)(n.sample,e,t,i,r,s)+"}":a==="StringMatching"||a==="StringNotMatching"||a==="StringContaining"||a==="StringNotContaining"?a+BR+s(n.sample,e,t,i,r):n.toAsymmetricMatcher()};My.serialize=Dne;const kne=n=>n&&n.$$typeof===Q1e;My.test=kne;const ewe={serialize:Dne,test:kne};var twe=ewe;My.default=twe;var Ry={},nwe=({onlyFirst:n=!1}={})=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,n?void 0:"g")};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.test=Ry.serialize=Ry.default=void 0;var Lne=Une(nwe),ys=Une(Pne);function Une(n){return n&&n.__esModule?n:{default:n}}const iwe=n=>n.replace((0,Lne.default)(),e=>{switch(e){case ys.default.red.close:case ys.default.green.close:case ys.default.cyan.close:case ys.default.gray.close:case ys.default.white.close:case ys.default.yellow.close:case ys.default.bgRed.close:case ys.default.bgGreen.close:case ys.default.bgYellow.close:case ys.default.inverse.close:case ys.default.dim.close:case ys.default.bold.close:case ys.default.reset.open:case ys.default.reset.close:return"</>";case ys.default.red.open:return"<red>";case ys.default.green.open:return"<green>";case ys.default.cyan.open:return"<cyan>";case ys.default.gray.open:return"<gray>";case ys.default.white.open:return"<white>";case ys.default.yellow.open:return"<yellow>";case ys.default.bgRed.open:return"<bgRed>";case ys.default.bgGreen.open:return"<bgGreen>";case ys.default.bgYellow.open:return"<bgYellow>";case ys.default.inverse.open:return"<inverse>";case ys.default.dim.open:return"<dim>";case ys.default.bold.open:return"<bold>";default:return""}}),Bne=n=>typeof n=="string"&&!!n.match((0,Lne.default)());Ry.test=Bne;const Fne=(n,e,t,i,r,s)=>s(iwe(n),e,t,i,r);Ry.serialize=Fne;const rwe={serialize:Fne,test:Bne};var swe=rwe;Ry.default=swe;var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.test=Oy.serialize=Oy.default=void 0;var b9=$g;const awe=" ",zne=["DOMStringMap","NamedNodeMap"],owe=/^(HTML\w*Collection|NodeList)$/,lwe=n=>zne.indexOf(n)!==-1||owe.test(n),jne=n=>n&&n.constructor&&!!n.constructor.name&&lwe(n.constructor.name);Oy.test=jne;const cwe=n=>n.constructor.name==="NamedNodeMap",Hne=(n,e,t,i,r,s)=>{const a=n.constructor.name;return++i>e.maxDepth?"["+a+"]":(e.min?"":a+awe)+(zne.indexOf(a)!==-1?"{"+(0,b9.printObjectProperties)(cwe(n)?Array.from(n).reduce((o,l)=>(o[l.name]=l.value,o),{}):{...n},e,t,i,r,s)+"}":"["+(0,b9.printListItems)(Array.from(n),e,t,i,r,s)+"]")};Oy.serialize=Hne;const uwe={serialize:Hne,test:jne};var hwe=uwe;Oy.default=hwe;var Iy={},Kl={},vj={};Object.defineProperty(vj,"__esModule",{value:!0});vj.default=dwe;function dwe(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}Object.defineProperty(Kl,"__esModule",{value:!0});Kl.printText=Kl.printProps=Kl.printElementAsLeaf=Kl.printElement=Kl.printComment=Kl.printChildren=void 0;var Vne=fwe(vj);function fwe(n){return n&&n.__esModule?n:{default:n}}const pwe=(n,e,t,i,r,s,a)=>{const o=i+t.indent,l=t.colors;return n.map(c=>{const u=e[c];let h=a(u,t,o,r,s);return typeof u!="string"&&(h.indexOf(`
`)!==-1&&(h=t.spacingOuter+o+h+t.spacingOuter+i),h="{"+h+"}"),t.spacingInner+i+l.prop.open+c+l.prop.close+"="+l.value.open+h+l.value.close}).join("")};Kl.printProps=pwe;const mwe=(n,e,t,i,r,s)=>n.map(a=>e.spacingOuter+t+(typeof a=="string"?Gne(a,e):s(a,e,t,i,r))).join("");Kl.printChildren=mwe;const Gne=(n,e)=>{const t=e.colors.content;return t.open+(0,Vne.default)(n)+t.close};Kl.printText=Gne;const gwe=(n,e)=>{const t=e.colors.comment;return t.open+"<!--"+(0,Vne.default)(n)+"-->"+t.close};Kl.printComment=gwe;const vwe=(n,e,t,i,r)=>{const s=i.colors.tag;return s.open+"<"+n+(e&&s.close+e+i.spacingOuter+r+s.open)+(t?">"+s.close+t+i.spacingOuter+r+s.open+"</"+n:(e&&!i.min?"":" ")+"/")+">"+s.close};Kl.printElement=vwe;const ywe=(n,e)=>{const t=e.colors.tag;return t.open+"<"+n+t.close+" "+t.open+" />"+t.close};Kl.printElementAsLeaf=ywe;Object.defineProperty(Iy,"__esModule",{value:!0});Iy.test=Iy.serialize=Iy.default=void 0;var QS=Kl;const _we=1,qne=3,$ne=8,Wne=11,bwe=/^((HTML|SVG)\w*)?Element$/,Swe=n=>{try{return typeof n.hasAttribute=="function"&&n.hasAttribute("is")}catch{return!1}},Ewe=n=>{const e=n.constructor.name,{nodeType:t,tagName:i}=n,r=typeof i=="string"&&i.includes("-")||Swe(n);return t===_we&&(bwe.test(e)||r)||t===qne&&e==="Text"||t===$ne&&e==="Comment"||t===Wne&&e==="DocumentFragment"},Yne=n=>{var e;return(n==null||(e=n.constructor)===null||e===void 0?void 0:e.name)&&Ewe(n)};Iy.test=Yne;function Twe(n){return n.nodeType===qne}function xwe(n){return n.nodeType===$ne}function LB(n){return n.nodeType===Wne}const Xne=(n,e,t,i,r,s)=>{if(Twe(n))return(0,QS.printText)(n.data,e);if(xwe(n))return(0,QS.printComment)(n.data,e);const a=LB(n)?"DocumentFragment":n.tagName.toLowerCase();return++i>e.maxDepth?(0,QS.printElementAsLeaf)(a,e):(0,QS.printElement)(a,(0,QS.printProps)(LB(n)?[]:Array.from(n.attributes).map(o=>o.name).sort(),LB(n)?{}:Array.from(n.attributes).reduce((o,l)=>(o[l.name]=l.value,o),{}),e,t+e.indent,i,r,s),(0,QS.printChildren)(Array.prototype.slice.call(n.childNodes||n.children),e,t+e.indent,i,r,s),e,t)};Iy.serialize=Xne;const wwe={serialize:Xne,test:Yne};var Cwe=wwe;Iy.default=Cwe;var Ny={};Object.defineProperty(Ny,"__esModule",{value:!0});Ny.test=Ny.serialize=Ny.default=void 0;var TC=$g;const Awe="@@__IMMUTABLE_ITERABLE__@@",Mwe="@@__IMMUTABLE_LIST__@@",Rwe="@@__IMMUTABLE_KEYED__@@",Owe="@@__IMMUTABLE_MAP__@@",S9="@@__IMMUTABLE_ORDERED__@@",Iwe="@@__IMMUTABLE_RECORD__@@",Nwe="@@__IMMUTABLE_SEQ__@@",Pwe="@@__IMMUTABLE_SET__@@",Dwe="@@__IMMUTABLE_STACK__@@",zT=n=>"Immutable."+n,iD=n=>"["+n+"]",xC=" ",E9="",kwe=(n,e,t,i,r,s,a)=>++i>e.maxDepth?iD(zT(a)):zT(a)+xC+"{"+(0,TC.printIteratorEntries)(n.entries(),e,t,i,r,s)+"}";function Lwe(n){let e=0;return{next(){if(e<n._keys.length){const t=n._keys[e++];return{done:!1,value:[t,n.get(t)]}}return{done:!0,value:void 0}}}}const Uwe=(n,e,t,i,r,s)=>{const a=zT(n._name||"Record");return++i>e.maxDepth?iD(a):a+xC+"{"+(0,TC.printIteratorEntries)(Lwe(n),e,t,i,r,s)+"}"},Bwe=(n,e,t,i,r,s)=>{const a=zT("Seq");return++i>e.maxDepth?iD(a):n[Rwe]?a+xC+"{"+(n._iter||n._object?(0,TC.printIteratorEntries)(n.entries(),e,t,i,r,s):E9)+"}":a+xC+"["+(n._iter||n._array||n._collection||n._iterable?(0,TC.printIteratorValues)(n.values(),e,t,i,r,s):E9)+"]"},UB=(n,e,t,i,r,s,a)=>++i>e.maxDepth?iD(zT(a)):zT(a)+xC+"["+(0,TC.printIteratorValues)(n.values(),e,t,i,r,s)+"]",Kne=(n,e,t,i,r,s)=>n[Owe]?kwe(n,e,t,i,r,s,n[S9]?"OrderedMap":"Map"):n[Mwe]?UB(n,e,t,i,r,s,"List"):n[Pwe]?UB(n,e,t,i,r,s,n[S9]?"OrderedSet":"Set"):n[Dwe]?UB(n,e,t,i,r,s,"Stack"):n[Nwe]?Bwe(n,e,t,i,r,s):Uwe(n,e,t,i,r,s);Ny.serialize=Kne;const Zne=n=>n&&(n[Awe]===!0||n[Iwe]===!0);Ny.test=Zne;const Fwe={serialize:Kne,test:Zne};var zwe=Fwe;Ny.default=zwe;var Py={},Jne={exports:{}},ps={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD=60103,sD=60106,PA=60107,DA=60108,kA=60114,LA=60109,UA=60110,BA=60112,FA=60113,yj=60120,zA=60115,jA=60116,Qne=60121,eie=60122,tie=60117,nie=60129,iie=60131;if(typeof Symbol=="function"&&Symbol.for){var wl=Symbol.for;rD=wl("react.element"),sD=wl("react.portal"),PA=wl("react.fragment"),DA=wl("react.strict_mode"),kA=wl("react.profiler"),LA=wl("react.provider"),UA=wl("react.context"),BA=wl("react.forward_ref"),FA=wl("react.suspense"),yj=wl("react.suspense_list"),zA=wl("react.memo"),jA=wl("react.lazy"),Qne=wl("react.block"),eie=wl("react.server.block"),tie=wl("react.fundamental"),nie=wl("react.debug_trace_mode"),iie=wl("react.legacy_hidden")}function Ef(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case rD:switch(n=n.type,n){case PA:case kA:case DA:case FA:case yj:return n;default:switch(n=n&&n.$$typeof,n){case UA:case BA:case jA:case zA:case LA:return n;default:return e}}case sD:return e}}}var jwe=LA,Hwe=rD,Vwe=BA,Gwe=PA,qwe=jA,$we=zA,Wwe=sD,Ywe=kA,Xwe=DA,Kwe=FA;ps.ContextConsumer=UA;ps.ContextProvider=jwe;ps.Element=Hwe;ps.ForwardRef=Vwe;ps.Fragment=Gwe;ps.Lazy=qwe;ps.Memo=$we;ps.Portal=Wwe;ps.Profiler=Ywe;ps.StrictMode=Xwe;ps.Suspense=Kwe;ps.isAsyncMode=function(){return!1};ps.isConcurrentMode=function(){return!1};ps.isContextConsumer=function(n){return Ef(n)===UA};ps.isContextProvider=function(n){return Ef(n)===LA};ps.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===rD};ps.isForwardRef=function(n){return Ef(n)===BA};ps.isFragment=function(n){return Ef(n)===PA};ps.isLazy=function(n){return Ef(n)===jA};ps.isMemo=function(n){return Ef(n)===zA};ps.isPortal=function(n){return Ef(n)===sD};ps.isProfiler=function(n){return Ef(n)===kA};ps.isStrictMode=function(n){return Ef(n)===DA};ps.isSuspense=function(n){return Ef(n)===FA};ps.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===PA||n===kA||n===nie||n===DA||n===FA||n===yj||n===iie||typeof n=="object"&&n!==null&&(n.$$typeof===jA||n.$$typeof===zA||n.$$typeof===LA||n.$$typeof===UA||n.$$typeof===BA||n.$$typeof===tie||n.$$typeof===Qne||n[0]===eie)};ps.typeOf=Ef;Jne.exports=ps;var Zwe=Jne.exports;Object.defineProperty(Py,"__esModule",{value:!0});Py.test=Py.serialize=Py.default=void 0;var A_=Jwe(Zwe),FR=Kl;function rie(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(rie=function(i){return i?t:e})(n)}function Jwe(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=rie(e);if(t&&t.has(n))return t.get(n);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=r?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=n[s]}return i.default=n,t&&t.set(n,i),i}const sie=(n,e=[])=>(Array.isArray(n)?n.forEach(t=>{sie(t,e)}):n!=null&&n!==!1&&e.push(n),e),T9=n=>{const e=n.type;if(typeof e=="string")return e;if(typeof e=="function")return e.displayName||e.name||"Unknown";if(A_.isFragment(n))return"React.Fragment";if(A_.isSuspense(n))return"React.Suspense";if(typeof e=="object"&&e!==null){if(A_.isContextProvider(n))return"Context.Provider";if(A_.isContextConsumer(n))return"Context.Consumer";if(A_.isForwardRef(n)){if(e.displayName)return e.displayName;const t=e.render.displayName||e.render.name||"";return t!==""?"ForwardRef("+t+")":"ForwardRef"}if(A_.isMemo(n)){const t=e.displayName||e.type.displayName||e.type.name||"";return t!==""?"Memo("+t+")":"Memo"}}return"UNDEFINED"},Qwe=n=>{const{props:e}=n;return Object.keys(e).filter(t=>t!=="children"&&e[t]!==void 0).sort()},aie=(n,e,t,i,r,s)=>++i>e.maxDepth?(0,FR.printElementAsLeaf)(T9(n),e):(0,FR.printElement)(T9(n),(0,FR.printProps)(Qwe(n),n.props,e,t+e.indent,i,r,s),(0,FR.printChildren)(sie(n.props.children),e,t+e.indent,i,r,s),e,t);Py.serialize=aie;const oie=n=>n!=null&&A_.isElement(n);Py.test=oie;const eCe={serialize:aie,test:oie};var tCe=eCe;Py.default=tCe;var Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});Dy.test=Dy.serialize=Dy.default=void 0;var zR=Kl,JN=function(){return typeof globalThis<"u"?globalThis:typeof JN<"u"?JN:typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),BB=JN["jest-symbol-do-not-touch"]||JN.Symbol;const nCe=typeof BB=="function"&&BB.for?BB.for("react.test.json"):245830487,iCe=n=>{const{props:e}=n;return e?Object.keys(e).filter(t=>e[t]!==void 0).sort():[]},lie=(n,e,t,i,r,s)=>++i>e.maxDepth?(0,zR.printElementAsLeaf)(n.type,e):(0,zR.printElement)(n.type,n.props?(0,zR.printProps)(iCe(n),n.props,e,t+e.indent,i,r,s):"",n.children?(0,zR.printChildren)(n.children,e,t+e.indent,i,r,s):"",e,t);Dy.serialize=lie;const cie=n=>n&&n.$$typeof===nCe;Dy.test=cie;const rCe={serialize:lie,test:cie};var sCe=rCe;Dy.default=sCe;Object.defineProperty(Gy,"__esModule",{value:!0});Gy.default=Gy.DEFAULT_OPTIONS=void 0;var aCe=Gy.format=Sie,uie=Gy.plugins=void 0,oCe=u0(Pne),I1=$g,lCe=u0(My),cCe=u0(Ry),uCe=u0(Oy),hCe=u0(Iy),dCe=u0(Ny),fCe=u0(Py),pCe=u0(Dy);function u0(n){return n&&n.__esModule?n:{default:n}}const hie=Object.prototype.toString,mCe=Date.prototype.toISOString,gCe=Error.prototype.toString,x9=RegExp.prototype.toString,FB=n=>typeof n.constructor=="function"&&n.constructor.name||"Object",vCe=n=>typeof window<"u"&&n===window,yCe=/^Symbol\((.*)\)(.*)$/,_Ce=/\n/gi;class die extends Error{constructor(e,t){super(e),this.stack=t,this.name=this.constructor.name}}function bCe(n){return n==="[object Array]"||n==="[object ArrayBuffer]"||n==="[object DataView]"||n==="[object Float32Array]"||n==="[object Float64Array]"||n==="[object Int8Array]"||n==="[object Int16Array]"||n==="[object Int32Array]"||n==="[object Uint8Array]"||n==="[object Uint8ClampedArray]"||n==="[object Uint16Array]"||n==="[object Uint32Array]"}function SCe(n){return Object.is(n,-0)?"-0":String(n)}function ECe(n){return`${n}n`}function w9(n,e){return e?"[Function "+(n.name||"anonymous")+"]":"[Function]"}function C9(n){return String(n).replace(yCe,"Symbol($1)")}function A9(n){return"["+gCe.call(n)+"]"}function fie(n,e,t,i){if(n===!0||n===!1)return""+n;if(n===void 0)return"undefined";if(n===null)return"null";const r=typeof n;if(r==="number")return SCe(n);if(r==="bigint")return ECe(n);if(r==="string")return i?'"'+n.replace(/"|\\/g,"\\$&")+'"':'"'+n+'"';if(r==="function")return w9(n,e);if(r==="symbol")return C9(n);const s=hie.call(n);return s==="[object WeakMap]"?"WeakMap {}":s==="[object WeakSet]"?"WeakSet {}":s==="[object Function]"||s==="[object GeneratorFunction]"?w9(n,e):s==="[object Symbol]"?C9(n):s==="[object Date]"?isNaN(+n)?"Date { NaN }":mCe.call(n):s==="[object Error]"?A9(n):s==="[object RegExp]"?t?x9.call(n).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"):x9.call(n):n instanceof Error?A9(n):null}function pie(n,e,t,i,r,s){if(r.indexOf(n)!==-1)return"[Circular]";r=r.slice(),r.push(n);const a=++i>e.maxDepth,o=e.min;if(e.callToJSON&&!a&&n.toJSON&&typeof n.toJSON=="function"&&!s)return ey(n.toJSON(),e,t,i,r,!0);const l=hie.call(n);return l==="[object Arguments]"?a?"[Arguments]":(o?"":"Arguments ")+"["+(0,I1.printListItems)(n,e,t,i,r,ey)+"]":bCe(l)?a?"["+n.constructor.name+"]":(o||!e.printBasicPrototype&&n.constructor.name==="Array"?"":n.constructor.name+" ")+"["+(0,I1.printListItems)(n,e,t,i,r,ey)+"]":l==="[object Map]"?a?"[Map]":"Map {"+(0,I1.printIteratorEntries)(n.entries(),e,t,i,r,ey," => ")+"}":l==="[object Set]"?a?"[Set]":"Set {"+(0,I1.printIteratorValues)(n.values(),e,t,i,r,ey)+"}":a||vCe(n)?"["+FB(n)+"]":(o||!e.printBasicPrototype&&FB(n)==="Object"?"":FB(n)+" ")+"{"+(0,I1.printObjectProperties)(n,e,t,i,r,ey)+"}"}function TCe(n){return n.serialize!=null}function mie(n,e,t,i,r,s){let a;try{a=TCe(n)?n.serialize(e,t,i,r,s,ey):n.print(e,o=>ey(o,t,i,r,s),o=>{const l=i+t.indent;return l+o.replace(_Ce,`
`+l)},{edgeSpacing:t.spacingOuter,min:t.min,spacing:t.spacingInner},t.colors)}catch(o){throw new die(o.message,o.stack)}if(typeof a!="string")throw new Error(`pretty-format: Plugin must return type "string" but instead returned "${typeof a}".`);return a}function gie(n,e){for(let t=0;t<n.length;t++)try{if(n[t].test(e))return n[t]}catch(i){throw new die(i.message,i.stack)}return null}function ey(n,e,t,i,r,s){const a=gie(e.plugins,n);if(a!==null)return mie(a,n,e,t,i,r);const o=fie(n,e.printFunctionName,e.escapeRegex,e.escapeString);return o!==null?o:pie(n,e,t,i,r,s)}const _j={comment:"gray",content:"reset",prop:"yellow",tag:"cyan",value:"green"},vie=Object.keys(_j),tf={callToJSON:!0,compareKeys:void 0,escapeRegex:!1,escapeString:!0,highlight:!1,indent:2,maxDepth:1/0,min:!1,plugins:[],printBasicPrototype:!0,printFunctionName:!0,theme:_j};Gy.DEFAULT_OPTIONS=tf;function xCe(n){if(Object.keys(n).forEach(e=>{if(!tf.hasOwnProperty(e))throw new Error(`pretty-format: Unknown option "${e}".`)}),n.min&&n.indent!==void 0&&n.indent!==0)throw new Error('pretty-format: Options "min" and "indent" cannot be used together.');if(n.theme!==void 0){if(n.theme===null)throw new Error('pretty-format: Option "theme" must not be null.');if(typeof n.theme!="object")throw new Error(`pretty-format: Option "theme" must be of type "object" but instead received "${typeof n.theme}".`)}}const wCe=n=>vie.reduce((e,t)=>{const i=n.theme&&n.theme[t]!==void 0?n.theme[t]:_j[t],r=i&&oCe.default[i];if(r&&typeof r.close=="string"&&typeof r.open=="string")e[t]=r;else throw new Error(`pretty-format: Option "theme" has a key "${t}" whose value "${i}" is undefined in ansi-styles.`);return e},Object.create(null)),CCe=()=>vie.reduce((n,e)=>(n[e]={close:"",open:""},n),Object.create(null)),yie=n=>n&&n.printFunctionName!==void 0?n.printFunctionName:tf.printFunctionName,_ie=n=>n&&n.escapeRegex!==void 0?n.escapeRegex:tf.escapeRegex,bie=n=>n&&n.escapeString!==void 0?n.escapeString:tf.escapeString,M9=n=>{var e;return{callToJSON:n&&n.callToJSON!==void 0?n.callToJSON:tf.callToJSON,colors:n&&n.highlight?wCe(n):CCe(),compareKeys:n&&typeof n.compareKeys=="function"?n.compareKeys:tf.compareKeys,escapeRegex:_ie(n),escapeString:bie(n),indent:n&&n.min?"":ACe(n&&n.indent!==void 0?n.indent:tf.indent),maxDepth:n&&n.maxDepth!==void 0?n.maxDepth:tf.maxDepth,min:n&&n.min!==void 0?n.min:tf.min,plugins:n&&n.plugins!==void 0?n.plugins:tf.plugins,printBasicPrototype:(e=n==null?void 0:n.printBasicPrototype)!==null&&e!==void 0?e:!0,printFunctionName:yie(n),spacingInner:n&&n.min?" ":`
`,spacingOuter:n&&n.min?"":`
`}};function ACe(n){return new Array(n+1).join(" ")}function Sie(n,e){if(e&&(xCe(e),e.plugins)){const i=gie(e.plugins,n);if(i!==null)return mie(i,n,M9(e),"",0,[])}const t=fie(n,yie(e),_ie(e),bie(e));return t!==null?t:pie(n,M9(e),"",0,[])}const MCe={AsymmetricMatcher:lCe.default,ConvertAnsi:cCe.default,DOMCollection:uCe.default,DOMElement:hCe.default,Immutable:dCe.default,ReactElement:fCe.default,ReactTestComponent:pCe.default};uie=Gy.plugins=MCe;var RCe=Sie;Gy.default=RCe;var OCe=Object.prototype.toString;function ICe(n){return typeof n=="function"||OCe.call(n)==="[object Function]"}function NCe(n){var e=Number(n);return isNaN(e)?0:e===0||!isFinite(e)?e:(e>0?1:-1)*Math.floor(Math.abs(e))}var PCe=Math.pow(2,53)-1;function DCe(n){var e=NCe(n);return Math.min(Math.max(e,0),PCe)}function nf(n,e){var t=Array,i=Object(n);if(n==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");for(var r=DCe(i.length),s=ICe(t)?Object(new t(r)):new Array(r),a=0,o;a<r;)o=i[a],s[a]=o,a+=1;return s.length=r,s}function wC(n){"@babel/helpers - typeof";return wC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wC(n)}function kCe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function LCe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Eie(i.key),i)}}function UCe(n,e,t){return e&&LCe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function BCe(n,e,t){return e=Eie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Eie(n){var e=FCe(n,"string");return wC(e)==="symbol"?e:String(e)}function FCe(n,e){if(wC(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(wC(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var zCe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];kCe(this,n),BCe(this,"items",void 0),this.items=e}return UCe(n,[{key:"add",value:function(t){return this.has(t)===!1&&this.items.push(t),this}},{key:"clear",value:function(){this.items=[]}},{key:"delete",value:function(t){var i=this.items.length;return this.items=this.items.filter(function(r){return r!==t}),i!==this.items.length}},{key:"forEach",value:function(t){var i=this;this.items.forEach(function(r){t(r,r,i)})}},{key:"has",value:function(t){return this.items.indexOf(t)!==-1}},{key:"size",get:function(){return this.items.length}}]),n}();const jCe=typeof Set>"u"?Set:zCe;function ac(n){var e;return(e=n.localName)!==null&&e!==void 0?e:n.tagName.toLowerCase()}var HCe={article:"article",aside:"complementary",button:"button",datalist:"listbox",dd:"definition",details:"group",dialog:"dialog",dt:"term",fieldset:"group",figure:"figure",form:"form",footer:"contentinfo",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",header:"banner",hr:"separator",html:"document",legend:"legend",li:"listitem",math:"math",main:"main",menu:"list",nav:"navigation",ol:"list",optgroup:"group",option:"option",output:"status",progress:"progressbar",section:"region",summary:"button",table:"table",tbody:"rowgroup",textarea:"textbox",tfoot:"rowgroup",td:"cell",th:"columnheader",thead:"rowgroup",tr:"row",ul:"list"},VCe={caption:new Set(["aria-label","aria-labelledby"]),code:new Set(["aria-label","aria-labelledby"]),deletion:new Set(["aria-label","aria-labelledby"]),emphasis:new Set(["aria-label","aria-labelledby"]),generic:new Set(["aria-label","aria-labelledby","aria-roledescription"]),insertion:new Set(["aria-label","aria-labelledby"]),paragraph:new Set(["aria-label","aria-labelledby"]),presentation:new Set(["aria-label","aria-labelledby"]),strong:new Set(["aria-label","aria-labelledby"]),subscript:new Set(["aria-label","aria-labelledby"]),superscript:new Set(["aria-label","aria-labelledby"])};function GCe(n,e){return["aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-details","aria-dropeffect","aria-flowto","aria-grabbed","aria-hidden","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription"].some(function(t){var i;return n.hasAttribute(t)&&!((i=VCe[e])!==null&&i!==void 0&&i.has(t))})}function Tie(n,e){return GCe(n,e)}function qCe(n){var e=WCe(n);if(e===null||e==="presentation"){var t=$Ce(n);if(e!=="presentation"||Tie(n,t||""))return t}return e}function $Ce(n){var e=HCe[ac(n)];if(e!==void 0)return e;switch(ac(n)){case"a":case"area":case"link":if(n.hasAttribute("href"))return"link";break;case"img":return n.getAttribute("alt")===""&&!Tie(n,"img")?"presentation":"img";case"input":{var t=n,i=t.type;switch(i){case"button":case"image":case"reset":case"submit":return"button";case"checkbox":case"radio":return i;case"range":return"slider";case"email":case"tel":case"text":case"url":return n.hasAttribute("list")?"combobox":"textbox";case"search":return n.hasAttribute("list")?"combobox":"searchbox";case"number":return"spinbutton";default:return null}}case"select":return n.hasAttribute("multiple")||n.size>1?"listbox":"combobox"}return null}function WCe(n){var e=n.getAttribute("role");if(e!==null){var t=e.trim().split(" ")[0];if(t.length>0)return t}return null}function Ys(n){return n!==null&&n.nodeType===n.ELEMENT_NODE}function xie(n){return Ys(n)&&ac(n)==="caption"}function VO(n){return Ys(n)&&ac(n)==="input"}function YCe(n){return Ys(n)&&ac(n)==="optgroup"}function XCe(n){return Ys(n)&&ac(n)==="select"}function KCe(n){return Ys(n)&&ac(n)==="table"}function ZCe(n){return Ys(n)&&ac(n)==="textarea"}function JCe(n){var e=n.ownerDocument===null?n:n.ownerDocument,t=e.defaultView;if(t===null)throw new TypeError("no window available");return t}function QCe(n){return Ys(n)&&ac(n)==="fieldset"}function eAe(n){return Ys(n)&&ac(n)==="legend"}function tAe(n){return Ys(n)&&ac(n)==="slot"}function nAe(n){return Ys(n)&&n.ownerSVGElement!==void 0}function iAe(n){return Ys(n)&&ac(n)==="svg"}function rAe(n){return nAe(n)&&ac(n)==="title"}function QN(n,e){if(Ys(n)&&n.hasAttribute(e)){var t=n.getAttribute(e).split(" "),i=n.getRootNode?n.getRootNode():n.ownerDocument;return t.map(function(r){return i.getElementById(r)}).filter(function(r){return r!==null})}return[]}function bg(n,e){return Ys(n)?e.indexOf(qCe(n))!==-1:!1}function sAe(n){return n.trim().replace(/\s\s+/g," ")}function aAe(n,e){if(!Ys(n))return!1;if(n.hasAttribute("hidden")||n.getAttribute("aria-hidden")==="true")return!0;var t=e(n);return t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"}function oAe(n){return bg(n,["button","combobox","listbox","textbox"])||wie(n,"range")}function wie(n,e){if(!Ys(n))return!1;switch(e){case"range":return bg(n,["meter","progressbar","scrollbar","slider","spinbutton"]);default:throw new TypeError("No knowledge about abstract role '".concat(e,"'. This is likely a bug :("))}}function R9(n,e){var t=nf(n.querySelectorAll(e));return QN(n,"aria-owns").forEach(function(i){t.push.apply(t,nf(i.querySelectorAll(e)))}),t}function lAe(n){return XCe(n)?n.selectedOptions||R9(n,"[selected]"):R9(n,'[aria-selected="true"]')}function cAe(n){return bg(n,["none","presentation"])}function uAe(n){return xie(n)}function hAe(n){return bg(n,["button","cell","checkbox","columnheader","gridcell","heading","label","legend","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","row","rowheader","switch","tab","tooltip","treeitem"])}function dAe(n){return!1}function fAe(n){return VO(n)||ZCe(n)?n.value:n.textContent||""}function O9(n){var e=n.getPropertyValue("content");return/^["'].*["']$/.test(e)?e.slice(1,-1):""}function Cie(n){var e=ac(n);return e==="button"||e==="input"&&n.getAttribute("type")!=="hidden"||e==="meter"||e==="output"||e==="progress"||e==="select"||e==="textarea"}function Aie(n){if(Cie(n))return n;var e=null;return n.childNodes.forEach(function(t){if(e===null&&Ys(t)){var i=Aie(t);i!==null&&(e=i)}}),e}function pAe(n){if(n.control!==void 0)return n.control;var e=n.getAttribute("for");return e!==null?n.ownerDocument.getElementById(e):Aie(n)}function mAe(n){var e=n.labels;if(e===null)return e;if(e!==void 0)return nf(e);if(!Cie(n))return null;var t=n.ownerDocument;return nf(t.querySelectorAll("label")).filter(function(i){return pAe(i)===n})}function gAe(n){var e=n.assignedNodes();return e.length===0?nf(n.childNodes):e}function Mie(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new jCe,i=JCe(n),r=e.compute,s=r===void 0?"name":r,a=e.computedStyleSupportsPseudoElements,o=a===void 0?e.getComputedStyle!==void 0:a,l=e.getComputedStyle,c=l===void 0?i.getComputedStyle.bind(i):l,u=e.hidden,h=u===void 0?!1:u;function d(y,S){var T="";if(Ys(y)&&o){var x=c(y,"::before"),I=O9(x);T="".concat(I," ").concat(T)}var R=tAe(y)?gAe(y):nf(y.childNodes).concat(QN(y,"aria-owns"));if(R.forEach(function(k){var z=_(k,{isEmbeddedInLabel:S.isEmbeddedInLabel,isReferenced:!1,recursion:!0}),Z=Ys(k)?c(k).getPropertyValue("display"):"inline",H=Z!=="inline"?" ":"";T+="".concat(H).concat(z).concat(H)}),Ys(y)&&o){var N=c(y,"::after"),L=O9(N);T="".concat(T," ").concat(L)}return T.trim()}function f(y,S){var T=y.getAttributeNode(S);return T!==null&&!t.has(T)&&T.value.trim()!==""?(t.add(T),T.value):null}function m(y){return Ys(y)?f(y,"title"):null}function v(y){if(!Ys(y))return null;if(QCe(y)){t.add(y);for(var S=nf(y.childNodes),T=0;T<S.length;T+=1){var x=S[T];if(eAe(x))return _(x,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(KCe(y)){t.add(y);for(var I=nf(y.childNodes),R=0;R<I.length;R+=1){var N=I[R];if(xie(N))return _(N,{isEmbeddedInLabel:!1,isReferenced:!1,recursion:!1})}}else if(iAe(y)){t.add(y);for(var L=nf(y.childNodes),k=0;k<L.length;k+=1){var z=L[k];if(rAe(z))return z.textContent}return null}else if(ac(y)==="img"||ac(y)==="area"){var Z=f(y,"alt");if(Z!==null)return Z}else if(YCe(y)){var H=f(y,"label");if(H!==null)return H}if(VO(y)&&(y.type==="button"||y.type==="submit"||y.type==="reset")){var q=f(y,"value");if(q!==null)return q;if(y.type==="submit")return"Submit";if(y.type==="reset")return"Reset"}var U=mAe(y);if(U!==null&&U.length!==0)return t.add(y),nf(U).map(function(X){return _(X,{isEmbeddedInLabel:!0,isReferenced:!1,recursion:!0})}).filter(function(X){return X.length>0}).join(" ");if(VO(y)&&y.type==="image"){var ee=f(y,"alt");if(ee!==null)return ee;var W=f(y,"title");return W!==null?W:"Submit Query"}if(bg(y,["button"])){var Q=d(y,{isEmbeddedInLabel:!1,isReferenced:!1});if(Q!=="")return Q}return null}function _(y,S){if(t.has(y))return"";if(!h&&aAe(y,c)&&!S.isReferenced)return t.add(y),"";var T=Ys(y)?y.getAttributeNode("aria-labelledby"):null,x=T!==null&&!t.has(T)?QN(y,"aria-labelledby"):[];if(s==="name"&&!S.isReferenced&&x.length>0)return t.add(T),x.map(function(Z){return _(Z,{isEmbeddedInLabel:S.isEmbeddedInLabel,isReferenced:!0,recursion:!1})}).join(" ");var I=S.recursion&&oAe(y)&&s==="name";if(!I){var R=(Ys(y)&&y.getAttribute("aria-label")||"").trim();if(R!==""&&s==="name")return t.add(y),R;if(!cAe(y)){var N=v(y);if(N!==null)return t.add(y),N}}if(bg(y,["menu"]))return t.add(y),"";if(I||S.isEmbeddedInLabel||S.isReferenced){if(bg(y,["combobox","listbox"])){t.add(y);var L=lAe(y);return L.length===0?VO(y)?y.value:"":nf(L).map(function(Z){return _(Z,{isEmbeddedInLabel:S.isEmbeddedInLabel,isReferenced:!1,recursion:!0})}).join(" ")}if(wie(y,"range"))return t.add(y),y.hasAttribute("aria-valuetext")?y.getAttribute("aria-valuetext"):y.hasAttribute("aria-valuenow")?y.getAttribute("aria-valuenow"):y.getAttribute("value")||"";if(bg(y,["textbox"]))return t.add(y),fAe(y)}if(hAe(y)||Ys(y)&&S.isReferenced||uAe(y)||dAe()){var k=d(y,{isEmbeddedInLabel:S.isEmbeddedInLabel,isReferenced:!1});if(k!=="")return t.add(y),k}if(y.nodeType===y.TEXT_NODE)return t.add(y),y.textContent||"";if(S.recursion)return t.add(y),d(y,{isEmbeddedInLabel:S.isEmbeddedInLabel,isReferenced:!1});var z=m(y);return z!==null?(t.add(y),z):(t.add(y),"")}return sAe(_(n,{isEmbeddedInLabel:!1,isReferenced:s==="description",recursion:!1}))}function CC(n){"@babel/helpers - typeof";return CC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CC(n)}function I9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function N9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I9(Object(t),!0).forEach(function(i){vAe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I9(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function vAe(n,e,t){return e=yAe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yAe(n){var e=_Ae(n,"string");return CC(e)==="symbol"?e:String(e)}function _Ae(n,e){if(CC(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(CC(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Rie(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=QN(n,"aria-describedby").map(function(r){return Mie(r,N9(N9({},e),{},{compute:"description"}))}).join(" ");if(t===""){var i=n.getAttribute("title");t=i===null?"":i}return t}function bAe(n){return bg(n,["caption","code","deletion","emphasis","generic","insertion","paragraph","presentation","strong","subscript","superscript"])}function bj(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return bAe(n)?"":Mie(n,e)}var af={},aD={},Vb={},oD={};Object.defineProperty(oD,"__esModule",{value:!0});oD.default=void 0;function SAe(){var n=this,e=0,t={"@@iterator":function(){return t},next:function(){if(e<n.length){var r=n[e];return e=e+1,{done:!1,value:r}}else return{done:!0}}};return t}var EAe=SAe;oD.default=EAe;Object.defineProperty(Vb,"__esModule",{value:!0});Vb.default=wAe;var TAe=xAe(oD);function xAe(n){return n&&n.__esModule?n:{default:n}}function Rz(n){"@babel/helpers - typeof";return Rz=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rz(n)}function wAe(n,e){return typeof Symbol=="function"&&Rz(Symbol.iterator)==="symbol"&&Object.defineProperty(n,Symbol.iterator,{value:TAe.default.bind(e)}),n}Object.defineProperty(aD,"__esModule",{value:!0});aD.default=void 0;var CAe=AAe(Vb);function AAe(n){return n&&n.__esModule?n:{default:n}}function zB(n,e){return OAe(n)||RAe(n,e)||Oie(n,e)||MAe()}function MAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RAe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function OAe(n){if(Array.isArray(n))return n}function IAe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Oie(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return s=c.done,c},e:function(c){a=!0,o=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}function Oie(n,e){if(n){if(typeof n=="string")return P9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P9(n,e)}}function P9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var eE=[["aria-activedescendant",{type:"id"}],["aria-atomic",{type:"boolean"}],["aria-autocomplete",{type:"token",values:["inline","list","both","none"]}],["aria-braillelabel",{type:"string"}],["aria-brailleroledescription",{type:"string"}],["aria-busy",{type:"boolean"}],["aria-checked",{type:"tristate"}],["aria-colcount",{type:"integer"}],["aria-colindex",{type:"integer"}],["aria-colspan",{type:"integer"}],["aria-controls",{type:"idlist"}],["aria-current",{type:"token",values:["page","step","location","date","time",!0,!1]}],["aria-describedby",{type:"idlist"}],["aria-description",{type:"string"}],["aria-details",{type:"id"}],["aria-disabled",{type:"boolean"}],["aria-dropeffect",{type:"tokenlist",values:["copy","execute","link","move","none","popup"]}],["aria-errormessage",{type:"id"}],["aria-expanded",{type:"boolean",allowundefined:!0}],["aria-flowto",{type:"idlist"}],["aria-grabbed",{type:"boolean",allowundefined:!0}],["aria-haspopup",{type:"token",values:[!1,!0,"menu","listbox","tree","grid","dialog"]}],["aria-hidden",{type:"boolean",allowundefined:!0}],["aria-invalid",{type:"token",values:["grammar",!1,"spelling",!0]}],["aria-keyshortcuts",{type:"string"}],["aria-label",{type:"string"}],["aria-labelledby",{type:"idlist"}],["aria-level",{type:"integer"}],["aria-live",{type:"token",values:["assertive","off","polite"]}],["aria-modal",{type:"boolean"}],["aria-multiline",{type:"boolean"}],["aria-multiselectable",{type:"boolean"}],["aria-orientation",{type:"token",values:["vertical","undefined","horizontal"]}],["aria-owns",{type:"idlist"}],["aria-placeholder",{type:"string"}],["aria-posinset",{type:"integer"}],["aria-pressed",{type:"tristate"}],["aria-readonly",{type:"boolean"}],["aria-relevant",{type:"tokenlist",values:["additions","all","removals","text"]}],["aria-required",{type:"boolean"}],["aria-roledescription",{type:"string"}],["aria-rowcount",{type:"integer"}],["aria-rowindex",{type:"integer"}],["aria-rowspan",{type:"integer"}],["aria-selected",{type:"boolean",allowundefined:!0}],["aria-setsize",{type:"integer"}],["aria-sort",{type:"token",values:["ascending","descending","none","other"]}],["aria-valuemax",{type:"number"}],["aria-valuemin",{type:"number"}],["aria-valuenow",{type:"number"}],["aria-valuetext",{type:"string"}]],Oz={entries:function(){return eE},forEach:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=IAe(eE),r;try{for(i.s();!(r=i.n()).done;){var s=zB(r.value,2),a=s[0],o=s[1];e.call(t,o,a,eE)}}catch(l){i.e(l)}finally{i.f()}},get:function(e){var t=eE.find(function(i){return i[0]===e});return t&&t[1]},has:function(e){return!!Oz.get(e)},keys:function(){return eE.map(function(e){var t=zB(e,1),i=t[0];return i})},values:function(){return eE.map(function(e){var t=zB(e,2),i=t[1];return i})}},NAe=(0,CAe.default)(Oz,Oz.entries());aD.default=NAe;var lD={};Object.defineProperty(lD,"__esModule",{value:!0});lD.default=void 0;var PAe=DAe(Vb);function DAe(n){return n&&n.__esModule?n:{default:n}}function jB(n,e){return UAe(n)||LAe(n,e)||Iie(n,e)||kAe()}function kAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LAe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function UAe(n){if(Array.isArray(n))return n}function BAe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Iie(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return s=c.done,c},e:function(c){a=!0,o=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}function Iie(n,e){if(n){if(typeof n=="string")return D9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D9(n,e)}}function D9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var tE=[["a",{reserved:!1}],["abbr",{reserved:!1}],["acronym",{reserved:!1}],["address",{reserved:!1}],["applet",{reserved:!1}],["area",{reserved:!1}],["article",{reserved:!1}],["aside",{reserved:!1}],["audio",{reserved:!1}],["b",{reserved:!1}],["base",{reserved:!0}],["bdi",{reserved:!1}],["bdo",{reserved:!1}],["big",{reserved:!1}],["blink",{reserved:!1}],["blockquote",{reserved:!1}],["body",{reserved:!1}],["br",{reserved:!1}],["button",{reserved:!1}],["canvas",{reserved:!1}],["caption",{reserved:!1}],["center",{reserved:!1}],["cite",{reserved:!1}],["code",{reserved:!1}],["col",{reserved:!0}],["colgroup",{reserved:!0}],["content",{reserved:!1}],["data",{reserved:!1}],["datalist",{reserved:!1}],["dd",{reserved:!1}],["del",{reserved:!1}],["details",{reserved:!1}],["dfn",{reserved:!1}],["dialog",{reserved:!1}],["dir",{reserved:!1}],["div",{reserved:!1}],["dl",{reserved:!1}],["dt",{reserved:!1}],["em",{reserved:!1}],["embed",{reserved:!1}],["fieldset",{reserved:!1}],["figcaption",{reserved:!1}],["figure",{reserved:!1}],["font",{reserved:!1}],["footer",{reserved:!1}],["form",{reserved:!1}],["frame",{reserved:!1}],["frameset",{reserved:!1}],["h1",{reserved:!1}],["h2",{reserved:!1}],["h3",{reserved:!1}],["h4",{reserved:!1}],["h5",{reserved:!1}],["h6",{reserved:!1}],["head",{reserved:!0}],["header",{reserved:!1}],["hgroup",{reserved:!1}],["hr",{reserved:!1}],["html",{reserved:!0}],["i",{reserved:!1}],["iframe",{reserved:!1}],["img",{reserved:!1}],["input",{reserved:!1}],["ins",{reserved:!1}],["kbd",{reserved:!1}],["keygen",{reserved:!1}],["label",{reserved:!1}],["legend",{reserved:!1}],["li",{reserved:!1}],["link",{reserved:!0}],["main",{reserved:!1}],["map",{reserved:!1}],["mark",{reserved:!1}],["marquee",{reserved:!1}],["menu",{reserved:!1}],["menuitem",{reserved:!1}],["meta",{reserved:!0}],["meter",{reserved:!1}],["nav",{reserved:!1}],["noembed",{reserved:!0}],["noscript",{reserved:!0}],["object",{reserved:!1}],["ol",{reserved:!1}],["optgroup",{reserved:!1}],["option",{reserved:!1}],["output",{reserved:!1}],["p",{reserved:!1}],["param",{reserved:!0}],["picture",{reserved:!0}],["pre",{reserved:!1}],["progress",{reserved:!1}],["q",{reserved:!1}],["rp",{reserved:!1}],["rt",{reserved:!1}],["rtc",{reserved:!1}],["ruby",{reserved:!1}],["s",{reserved:!1}],["samp",{reserved:!1}],["script",{reserved:!0}],["section",{reserved:!1}],["select",{reserved:!1}],["small",{reserved:!1}],["source",{reserved:!0}],["spacer",{reserved:!1}],["span",{reserved:!1}],["strike",{reserved:!1}],["strong",{reserved:!1}],["style",{reserved:!0}],["sub",{reserved:!1}],["summary",{reserved:!1}],["sup",{reserved:!1}],["table",{reserved:!1}],["tbody",{reserved:!1}],["td",{reserved:!1}],["textarea",{reserved:!1}],["tfoot",{reserved:!1}],["th",{reserved:!1}],["thead",{reserved:!1}],["time",{reserved:!1}],["title",{reserved:!0}],["tr",{reserved:!1}],["track",{reserved:!0}],["tt",{reserved:!1}],["u",{reserved:!1}],["ul",{reserved:!1}],["var",{reserved:!1}],["video",{reserved:!1}],["wbr",{reserved:!1}],["xmp",{reserved:!1}]],Iz={entries:function(){return tE},forEach:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=BAe(tE),r;try{for(i.s();!(r=i.n()).done;){var s=jB(r.value,2),a=s[0],o=s[1];e.call(t,o,a,tE)}}catch(l){i.e(l)}finally{i.f()}},get:function(e){var t=tE.find(function(i){return i[0]===e});return t&&t[1]},has:function(e){return!!Iz.get(e)},keys:function(){return tE.map(function(e){var t=jB(e,1),i=t[0];return i})},values:function(){return tE.map(function(e){var t=jB(e,2),i=t[1];return i})}},FAe=(0,PAe.default)(Iz,Iz.entries());lD.default=FAe;var Nx={},cD={},uD={};Object.defineProperty(uD,"__esModule",{value:!0});uD.default=void 0;var zAe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]},jAe=zAe;uD.default=jAe;var hD={};Object.defineProperty(hD,"__esModule",{value:!0});hD.default=void 0;var HAe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]},VAe=HAe;hD.default=VAe;var dD={};Object.defineProperty(dD,"__esModule",{value:!0});dD.default=void 0;var GAe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null},relatedConcepts:[{concept:{name:"input"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]},qAe=GAe;dD.default=qAe;var fD={};Object.defineProperty(fD,"__esModule",{value:!0});fD.default=void 0;var $Ae={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},WAe=$Ae;fD.default=WAe;var pD={};Object.defineProperty(pD,"__esModule",{value:!0});pD.default=void 0;var YAe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},XAe=YAe;pD.default=XAe;var mD={};Object.defineProperty(mD,"__esModule",{value:!0});mD.default=void 0;var KAe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{"aria-atomic":null,"aria-busy":null,"aria-controls":null,"aria-current":null,"aria-describedby":null,"aria-details":null,"aria-dropeffect":null,"aria-flowto":null,"aria-grabbed":null,"aria-hidden":null,"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-live":null,"aria-owns":null,"aria-relevant":null,"aria-roledescription":null},relatedConcepts:[{concept:{name:"role"},module:"XHTML"},{concept:{name:"type"},module:"Dublin Core"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]},ZAe=KAe;mD.default=ZAe;var gD={};Object.defineProperty(gD,"__esModule",{value:!0});gD.default=void 0;var JAe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"frontmatter"},module:"DTB"},{concept:{name:"level"},module:"DTB"},{concept:{name:"level"},module:"SMIL"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},QAe=JAe;gD.default=QAe;var vD={};Object.defineProperty(vD,"__esModule",{value:!0});vD.default=void 0;var eMe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},tMe=eMe;vD.default=tMe;var yD={};Object.defineProperty(yD,"__esModule",{value:!0});yD.default=void 0;var nMe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","group"]]},iMe=nMe;yD.default=iMe;var _D={};Object.defineProperty(_D,"__esModule",{value:!0});_D.default=void 0;var rMe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]},sMe=rMe;_D.default=sMe;var bD={};Object.defineProperty(bD,"__esModule",{value:!0});bD.default=void 0;var aMe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]},oMe=aMe;bD.default=oMe;var SD={};Object.defineProperty(SD,"__esModule",{value:!0});SD.default=void 0;var lMe={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-modal":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]},cMe=lMe;SD.default=cMe;Object.defineProperty(cD,"__esModule",{value:!0});cD.default=void 0;var uMe=Md(uD),hMe=Md(hD),dMe=Md(dD),fMe=Md(fD),pMe=Md(pD),mMe=Md(mD),gMe=Md(gD),vMe=Md(vD),yMe=Md(yD),_Me=Md(_D),bMe=Md(bD),SMe=Md(SD);function Md(n){return n&&n.__esModule?n:{default:n}}var EMe=[["command",uMe.default],["composite",hMe.default],["input",dMe.default],["landmark",fMe.default],["range",pMe.default],["roletype",mMe.default],["section",gMe.default],["sectionhead",vMe.default],["select",yMe.default],["structure",_Me.default],["widget",bMe.default],["window",SMe.default]],TMe=EMe;cD.default=TMe;var ED={},TD={};Object.defineProperty(TD,"__esModule",{value:!0});TD.default=void 0;var xMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"assertive"},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},wMe=xMe;TD.default=wMe;var xD={};Object.defineProperty(xD,"__esModule",{value:!0});xD.default=void 0;var CMe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","alert"],["roletype","window","dialog"]]},AMe=CMe;xD.default=AMe;var wD={};Object.defineProperty(wD,"__esModule",{value:!0});wD.default=void 0;var MMe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},RMe=MMe;wD.default=RMe;var CD={};Object.defineProperty(CD,"__esModule",{value:!0});CD.default=void 0;var OMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"article"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]},IMe=OMe;CD.default=IMe;var AD={};Object.defineProperty(AD,"__esModule",{value:!0});AD.default=void 0;var NMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"header"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},PMe=NMe;AD.default=PMe;var MD={};Object.defineProperty(MD,"__esModule",{value:!0});MD.default=void 0;var DMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"blockquote"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},kMe=DMe;MD.default=kMe;var RD={};Object.defineProperty(RD,"__esModule",{value:!0});RD.default=void 0;var LMe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-pressed":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"button"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"image"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"reset"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"submit"}],name:"input"},module:"HTML"},{concept:{name:"button"},module:"HTML"},{concept:{name:"trigger"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]},UMe=LMe;RD.default=UMe;var OD={};Object.defineProperty(OD,"__esModule",{value:!0});OD.default=void 0;var BMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"caption"},module:"HTML"}],requireContextRole:["figure","grid","table"],requiredContextRole:["figure","grid","table"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},FMe=BMe;OD.default=FMe;var ID={};Object.defineProperty(ID,"__esModule",{value:!0});ID.default=void 0;var zMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-colspan":null,"aria-rowindex":null,"aria-rowspan":null},relatedConcepts:[{concept:{constraints:["ancestor table element has table role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},jMe=zMe;ID.default=jMe;var ND={};Object.defineProperty(ND,"__esModule",{value:!0});ND.default=void 0;var HMe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"checkbox"}],name:"input"},module:"HTML"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]},VMe=HMe;ND.default=VMe;var PD={};Object.defineProperty(PD,"__esModule",{value:!0});PD.default=void 0;var GMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"code"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},qMe=GMe;PD.default=qMe;var DD={};Object.defineProperty(DD,"__esModule",{value:!0});DD.default=void 0;var $Me={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"col"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"colgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]},WMe=$Me;DD.default=WMe;var kD={};Object.defineProperty(kD,"__esModule",{value:!0});kD.default=void 0;var YMe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-expanded":"false","aria-haspopup":"listbox"},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"email"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"search"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"tel"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"text"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"multiple"},{constraints:["undefined"],name:"size"}],constraints:["the multiple attribute is not set and the size attribute does not have a value greater than 1"],name:"select"},module:"HTML"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-expanded":"false"},superClass:[["roletype","widget","input"]]},XMe=YMe;kD.default=XMe;var LD={};Object.defineProperty(LD,"__esModule",{value:!0});LD.default=void 0;var KMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-label"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},ZMe=KMe;LD.default=ZMe;var UD={};Object.defineProperty(UD,"__esModule",{value:!0});UD.default=void 0;var JMe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"footer"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},QMe=JMe;UD.default=QMe;var BD={};Object.defineProperty(BD,"__esModule",{value:!0});BD.default=void 0;var eRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dd"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},tRe=eRe;BD.default=tRe;var FD={};Object.defineProperty(FD,"__esModule",{value:!0});FD.default=void 0;var nRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"del"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},iRe=nRe;FD.default=iRe;var zD={};Object.defineProperty(zD,"__esModule",{value:!0});zD.default=void 0;var rRe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dialog"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","window"]]},sRe=rRe;zD.default=sRe;var jD={};Object.defineProperty(jD,"__esModule",{value:!0});jD.default=void 0;var aRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{module:"DAISY Guide"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","list"]]},oRe=aRe;jD.default=oRe;var HD={};Object.defineProperty(HD,"__esModule",{value:!0});HD.default=void 0;var lRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}},{concept:{name:"html"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},cRe=lRe;HD.default=cRe;var VD={};Object.defineProperty(VD,"__esModule",{value:!0});VD.default=void 0;var uRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"em"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},hRe=uRe;VD.default=hRe;var GD={};Object.defineProperty(GD,"__esModule",{value:!0});GD.default=void 0;var dRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["article"]],requiredProps:{},superClass:[["roletype","structure","section","list"]]},fRe=dRe;GD.default=fRe;var qD={};Object.defineProperty(qD,"__esModule",{value:!0});qD.default=void 0;var pRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"figure"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},mRe=pRe;qD.default=mRe;var $D={};Object.defineProperty($D,"__esModule",{value:!0});$D.default=void 0;var gRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"name"}],name:"form"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},vRe=gRe;$D.default=vRe;var WD={};Object.defineProperty(WD,"__esModule",{value:!0});WD.default=void 0;var yRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"a"},module:"HTML"},{concept:{name:"area"},module:"HTML"},{concept:{name:"aside"},module:"HTML"},{concept:{name:"b"},module:"HTML"},{concept:{name:"bdo"},module:"HTML"},{concept:{name:"body"},module:"HTML"},{concept:{name:"data"},module:"HTML"},{concept:{name:"div"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"footer"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"header"},module:"HTML"},{concept:{name:"hgroup"},module:"HTML"},{concept:{name:"i"},module:"HTML"},{concept:{name:"pre"},module:"HTML"},{concept:{name:"q"},module:"HTML"},{concept:{name:"samp"},module:"HTML"},{concept:{name:"section"},module:"HTML"},{concept:{name:"small"},module:"HTML"},{concept:{name:"span"},module:"HTML"},{concept:{name:"u"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},_Re=yRe;WD.default=_Re;var YD={};Object.defineProperty(YD,"__esModule",{value:!0});YD.default=void 0;var bRe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-multiselectable":null,"aria-readonly":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","table"]]},SRe=bRe;YD.default=SRe;var XD={};Object.defineProperty(XD,"__esModule",{value:!0});XD.default=void 0;var ERe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-selected":null},relatedConcepts:[{concept:{constraints:["ancestor table element has grid role","ancestor table element has treegrid role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","widget"]]},TRe=ERe;XD.default=TRe;var KD={};Object.defineProperty(KD,"__esModule",{value:!0});KD.default=void 0;var xRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[{concept:{name:"details"},module:"HTML"},{concept:{name:"fieldset"},module:"HTML"},{concept:{name:"optgroup"},module:"HTML"},{concept:{name:"address"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},wRe=xRe;KD.default=wRe;var ZD={};Object.defineProperty(ZD,"__esModule",{value:!0});ZD.default=void 0;var CRe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-level":"2"},relatedConcepts:[{concept:{name:"h1"},module:"HTML"},{concept:{name:"h2"},module:"HTML"},{concept:{name:"h3"},module:"HTML"},{concept:{name:"h4"},module:"HTML"},{concept:{name:"h5"},module:"HTML"},{concept:{name:"h6"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-level":"2"},superClass:[["roletype","structure","sectionhead"]]},ARe=CRe;ZD.default=ARe;var JD={};Object.defineProperty(JD,"__esModule",{value:!0});JD.default=void 0;var MRe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"alt"}],name:"img"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"alt"}],name:"img"},module:"HTML"},{concept:{name:"imggroup"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},RRe=MRe;JD.default=RRe;var QD={};Object.defineProperty(QD,"__esModule",{value:!0});QD.default=void 0;var ORe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"ins"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},IRe=ORe;QD.default=IRe;var ek={};Object.defineProperty(ek,"__esModule",{value:!0});ek.default=void 0;var NRe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"href"}],name:"a"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"href"}],name:"area"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]},PRe=NRe;ek.default=PRe;var tk={};Object.defineProperty(tk,"__esModule",{value:!0});tk.default=void 0;var DRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menu"},module:"HTML"},{concept:{name:"ol"},module:"HTML"},{concept:{name:"ul"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["listitem"]],requiredProps:{},superClass:[["roletype","structure","section"]]},kRe=DRe;tk.default=kRe;var nk={};Object.defineProperty(nk,"__esModule",{value:!0});nk.default=void 0;var LRe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-multiselectable":null,"aria-readonly":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[{concept:{attributes:[{constraints:[">1"],name:"size"}],constraints:["the size attribute value is greater than 1"],name:"select"},module:"HTML"},{concept:{attributes:[{name:"multiple"}],name:"select"},module:"HTML"},{concept:{name:"datalist"},module:"HTML"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["option","group"],["option"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]},URe=LRe;nk.default=URe;var ik={};Object.defineProperty(ik,"__esModule",{value:!0});ik.default=void 0;var BRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{constraints:["direct descendant of ol","direct descendant of ul","direct descendant of menu"],name:"li"},module:"HTML"},{concept:{name:"item"},module:"XForms"}],requireContextRole:["directory","list"],requiredContextRole:["directory","list"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},FRe=BRe;ik.default=FRe;var rk={};Object.defineProperty(rk,"__esModule",{value:!0});rk.default=void 0;var zRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-live":"polite"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},jRe=zRe;rk.default=jRe;var sk={};Object.defineProperty(sk,"__esModule",{value:!0});sk.default=void 0;var HRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"main"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},VRe=HRe;sk.default=VRe;var ak={};Object.defineProperty(ak,"__esModule",{value:!0});ak.default=void 0;var GRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null},relatedConcepts:[{concept:{name:"mark"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},qRe=GRe;ak.default=qRe;var ok={};Object.defineProperty(ok,"__esModule",{value:!0});ok.default=void 0;var $Re={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},WRe=$Re;ok.default=WRe;var lk={};Object.defineProperty(lk,"__esModule",{value:!0});lk.default=void 0;var YRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"math"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},XRe=YRe;lk.default=XRe;var ck={};Object.defineProperty(ck,"__esModule",{value:!0});ck.default=void 0;var KRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"vertical"},relatedConcepts:[{concept:{name:"MENU"},module:"JAPI"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"},{concept:{name:"sidebar"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]},ZRe=KRe;ck.default=ZRe;var uk={};Object.defineProperty(uk,"__esModule",{value:!0});uk.default=void 0;var JRe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"toolbar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select","menu"],["roletype","structure","section","group","select","menu"]]},QRe=JRe;uk.default=QRe;var hk={};Object.defineProperty(hk,"__esModule",{value:!0});hk.default=void 0;var eOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"MENU_ITEM"},module:"JAPI"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]},tOe=eOe;hk.default=tOe;var dk={};Object.defineProperty(dk,"__esModule",{value:!0});dk.default=void 0;var nOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"],["roletype","widget","command","menuitem"]]},iOe=nOe;dk.default=iOe;var fk={};Object.defineProperty(fk,"__esModule",{value:!0});fk.default=void 0;var rOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox","menuitemcheckbox"],["roletype","widget","command","menuitem","menuitemcheckbox"],["roletype","widget","input","radio"]]},sOe=rOe;fk.default=sOe;var pk={};Object.defineProperty(pk,"__esModule",{value:!0});pk.default=void 0;var aOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null,"aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{name:"meter"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","structure","range"]]},oOe=aOe;pk.default=oOe;var mk={};Object.defineProperty(mk,"__esModule",{value:!0});mk.default=void 0;var lOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"nav"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},cOe=lOe;mk.default=cOe;var gk={};Object.defineProperty(gk,"__esModule",{value:!0});gk.default=void 0;var uOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]},hOe=uOe;gk.default=hOe;var vk={};Object.defineProperty(vk,"__esModule",{value:!0});vk.default=void 0;var dOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},fOe=dOe;vk.default=fOe;var yk={};Object.defineProperty(yk,"__esModule",{value:!0});yk.default=void 0;var pOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[{concept:{name:"item"},module:"XForms"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-selected":"false"},superClass:[["roletype","widget","input"]]},mOe=pOe;yk.default=mOe;var _k={};Object.defineProperty(_k,"__esModule",{value:!0});_k.default=void 0;var gOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"p"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},vOe=gOe;_k.default=vOe;var bk={};Object.defineProperty(bk,"__esModule",{value:!0});bk.default=void 0;var yOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{attributes:[{name:"alt",value:""}],name:"img"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},_Oe=yOe;bk.default=_Oe;var Sk={};Object.defineProperty(Sk,"__esModule",{value:!0});Sk.default=void 0;var bOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null},relatedConcepts:[{concept:{name:"progress"},module:"HTML"},{concept:{name:"status"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","range"],["roletype","widget"]]},SOe=bOe;Sk.default=SOe;var Ek={};Object.defineProperty(Ek,"__esModule",{value:!0});Ek.default=void 0;var EOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"radio"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]},TOe=EOe;Ek.default=TOe;var Tk={};Object.defineProperty(Tk,"__esModule",{value:!0});Tk.default=void 0;var xOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{name:"list"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["radio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]},wOe=xOe;Tk.default=wOe;var xk={};Object.defineProperty(xk,"__esModule",{value:!0});xk.default=void 0;var COe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"section"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"section"},module:"HTML"},{concept:{name:"Device Independence Glossart perceivable unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},AOe=COe;xk.default=AOe;var wk={};Object.defineProperty(wk,"__esModule",{value:!0});wk.default=void 0;var MOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-expanded":null,"aria-level":null,"aria-posinset":null,"aria-rowindex":null,"aria-selected":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"tr"},module:"HTML"}],requireContextRole:["grid","rowgroup","table","treegrid"],requiredContextRole:["grid","rowgroup","table","treegrid"],requiredOwnedElements:[["cell"],["columnheader"],["gridcell"],["rowheader"]],requiredProps:{},superClass:[["roletype","structure","section","group"],["roletype","widget"]]},ROe=MOe;wk.default=ROe;var Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});Ck.default=void 0;var OOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"tbody"},module:"HTML"},{concept:{name:"tfoot"},module:"HTML"},{concept:{name:"thead"},module:"HTML"}],requireContextRole:["grid","table","treegrid"],requiredContextRole:["grid","table","treegrid"],requiredOwnedElements:[["row"]],requiredProps:{},superClass:[["roletype","structure"]]},IOe=OOe;Ck.default=IOe;var Ak={};Object.defineProperty(Ak,"__esModule",{value:!0});Ak.default=void 0;var NOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{attributes:[{name:"scope",value:"row"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"rowgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row","rowgroup"],requiredContextRole:["row","rowgroup"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]},POe=NOe;Ak.default=POe;var Mk={};Object.defineProperty(Mk,"__esModule",{value:!0});Mk.default=void 0;var DOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-valuetext":null,"aria-orientation":"vertical","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-valuenow":null},superClass:[["roletype","structure","range"],["roletype","widget"]]},kOe=DOe;Mk.default=kOe;var Rk={};Object.defineProperty(Rk,"__esModule",{value:!0});Rk.default=void 0;var LOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},UOe=LOe;Rk.default=UOe;var Ok={};Object.defineProperty(Ok,"__esModule",{value:!0});Ok.default=void 0;var BOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"search"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input","textbox"]]},FOe=BOe;Ok.default=FOe;var Ik={};Object.defineProperty(Ik,"__esModule",{value:!0});Ik.default=void 0;var zOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":null,"aria-valuetext":null},relatedConcepts:[{concept:{name:"hr"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]},jOe=zOe;Ik.default=jOe;var Nk={};Object.defineProperty(Nk,"__esModule",{value:!0});Nk.default=void 0;var HOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-valuetext":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"range"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","widget","input"],["roletype","structure","range"]]},VOe=HOe;Nk.default=VOe;var Pk={};Object.defineProperty(Pk,"__esModule",{value:!0});Pk.default=void 0;var GOe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-valuetext":null,"aria-valuenow":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"number"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","widget","input"],["roletype","structure","range"]]},qOe=GOe;Pk.default=qOe;var Dk={};Object.defineProperty(Dk,"__esModule",{value:!0});Dk.default=void 0;var $Oe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"polite"},relatedConcepts:[{concept:{name:"output"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},WOe=$Oe;Dk.default=WOe;var kk={};Object.defineProperty(kk,"__esModule",{value:!0});kk.default=void 0;var YOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"strong"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},XOe=YOe;kk.default=XOe;var Lk={};Object.defineProperty(Lk,"__esModule",{value:!0});Lk.default=void 0;var KOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sub"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},ZOe=KOe;Lk.default=ZOe;var Uk={};Object.defineProperty(Uk,"__esModule",{value:!0});Uk.default=void 0;var JOe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sup"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},QOe=JOe;Uk.default=QOe;var Bk={};Object.defineProperty(Bk,"__esModule",{value:!0});Bk.default=void 0;var eIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"button"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"]]},tIe=eIe;Bk.default=tIe;var Fk={};Object.defineProperty(Fk,"__esModule",{value:!0});Fk.default=void 0;var nIe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[],requireContextRole:["tablist"],requiredContextRole:["tablist"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"],["roletype","widget"]]},iIe=nIe;Fk.default=iIe;var zk={};Object.defineProperty(zk,"__esModule",{value:!0});zk.default=void 0;var rIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-colcount":null,"aria-rowcount":null},relatedConcepts:[{concept:{name:"table"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","structure","section"]]},sIe=rIe;zk.default=sIe;var jk={};Object.defineProperty(jk,"__esModule",{value:!0});jk.default=void 0;var aIe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-multiselectable":null,"aria-orientation":"horizontal"},relatedConcepts:[{module:"DAISY",concept:{name:"guide"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["tab"]],requiredProps:{},superClass:[["roletype","widget","composite"]]},oIe=aIe;jk.default=oIe;var Hk={};Object.defineProperty(Hk,"__esModule",{value:!0});Hk.default=void 0;var lIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},cIe=lIe;Hk.default=cIe;var Vk={};Object.defineProperty(Vk,"__esModule",{value:!0});Vk.default=void 0;var uIe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dfn"},module:"HTML"},{concept:{name:"dt"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},hIe=uIe;Vk.default=hIe;var Gk={};Object.defineProperty(Gk,"__esModule",{value:!0});Gk.default=void 0;var dIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-multiline":null,"aria-placeholder":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"type"},{constraints:["undefined"],name:"list"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"email"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"tel"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"text"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"url"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{name:"input"},module:"XForms"},{concept:{name:"textarea"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input"]]},fIe=dIe;Gk.default=fIe;var qk={};Object.defineProperty(qk,"__esModule",{value:!0});qk.default=void 0;var pIe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"time"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},mIe=pIe;qk.default=mIe;var $k={};Object.defineProperty($k,"__esModule",{value:!0});$k.default=void 0;var gIe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","status"]]},vIe=gIe;$k.default=vIe;var Wk={};Object.defineProperty(Wk,"__esModule",{value:!0});Wk.default=void 0;var yIe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"menubar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]},_Ie=yIe;Wk.default=_Ie;var Yk={};Object.defineProperty(Yk,"__esModule",{value:!0});Yk.default=void 0;var bIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},SIe=bIe;Yk.default=SIe;var Xk={};Object.defineProperty(Xk,"__esModule",{value:!0});Xk.default=void 0;var EIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-multiselectable":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["treeitem","group"],["treeitem"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]},TIe=EIe;Xk.default=TIe;var Kk={};Object.defineProperty(Kk,"__esModule",{value:!0});Kk.default=void 0;var xIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite","grid"],["roletype","structure","section","table","grid"],["roletype","widget","composite","select","tree"],["roletype","structure","section","group","select","tree"]]},wIe=xIe;Kk.default=wIe;var Zk={};Object.defineProperty(Zk,"__esModule",{value:!0});Zk.default=void 0;var CIe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[],requireContextRole:["group","tree"],requiredContextRole:["group","tree"],requiredOwnedElements:[],requiredProps:{"aria-selected":null},superClass:[["roletype","structure","section","listitem"],["roletype","widget","input","option"]]},AIe=CIe;Zk.default=AIe;Object.defineProperty(ED,"__esModule",{value:!0});ED.default=void 0;var MIe=Qt(TD),RIe=Qt(xD),OIe=Qt(wD),IIe=Qt(CD),NIe=Qt(AD),PIe=Qt(MD),DIe=Qt(RD),kIe=Qt(OD),LIe=Qt(ID),UIe=Qt(ND),BIe=Qt(PD),FIe=Qt(DD),zIe=Qt(kD),jIe=Qt(LD),HIe=Qt(UD),VIe=Qt(BD),GIe=Qt(FD),qIe=Qt(zD),$Ie=Qt(jD),WIe=Qt(HD),YIe=Qt(VD),XIe=Qt(GD),KIe=Qt(qD),ZIe=Qt($D),JIe=Qt(WD),QIe=Qt(YD),eNe=Qt(XD),tNe=Qt(KD),nNe=Qt(ZD),iNe=Qt(JD),rNe=Qt(QD),sNe=Qt(ek),aNe=Qt(tk),oNe=Qt(nk),lNe=Qt(ik),cNe=Qt(rk),uNe=Qt(sk),hNe=Qt(ak),dNe=Qt(ok),fNe=Qt(lk),pNe=Qt(ck),mNe=Qt(uk),gNe=Qt(hk),vNe=Qt(dk),yNe=Qt(fk),_Ne=Qt(pk),bNe=Qt(mk),SNe=Qt(gk),ENe=Qt(vk),TNe=Qt(yk),xNe=Qt(_k),wNe=Qt(bk),CNe=Qt(Sk),ANe=Qt(Ek),MNe=Qt(Tk),RNe=Qt(xk),ONe=Qt(wk),INe=Qt(Ck),NNe=Qt(Ak),PNe=Qt(Mk),DNe=Qt(Rk),kNe=Qt(Ok),LNe=Qt(Ik),UNe=Qt(Nk),BNe=Qt(Pk),FNe=Qt(Dk),zNe=Qt(kk),jNe=Qt(Lk),HNe=Qt(Uk),VNe=Qt(Bk),GNe=Qt(Fk),qNe=Qt(zk),$Ne=Qt(jk),WNe=Qt(Hk),YNe=Qt(Vk),XNe=Qt(Gk),KNe=Qt(qk),ZNe=Qt($k),JNe=Qt(Wk),QNe=Qt(Yk),ePe=Qt(Xk),tPe=Qt(Kk),nPe=Qt(Zk);function Qt(n){return n&&n.__esModule?n:{default:n}}var iPe=[["alert",MIe.default],["alertdialog",RIe.default],["application",OIe.default],["article",IIe.default],["banner",NIe.default],["blockquote",PIe.default],["button",DIe.default],["caption",kIe.default],["cell",LIe.default],["checkbox",UIe.default],["code",BIe.default],["columnheader",FIe.default],["combobox",zIe.default],["complementary",jIe.default],["contentinfo",HIe.default],["definition",VIe.default],["deletion",GIe.default],["dialog",qIe.default],["directory",$Ie.default],["document",WIe.default],["emphasis",YIe.default],["feed",XIe.default],["figure",KIe.default],["form",ZIe.default],["generic",JIe.default],["grid",QIe.default],["gridcell",eNe.default],["group",tNe.default],["heading",nNe.default],["img",iNe.default],["insertion",rNe.default],["link",sNe.default],["list",aNe.default],["listbox",oNe.default],["listitem",lNe.default],["log",cNe.default],["main",uNe.default],["mark",hNe.default],["marquee",dNe.default],["math",fNe.default],["menu",pNe.default],["menubar",mNe.default],["menuitem",gNe.default],["menuitemcheckbox",vNe.default],["menuitemradio",yNe.default],["meter",_Ne.default],["navigation",bNe.default],["none",SNe.default],["note",ENe.default],["option",TNe.default],["paragraph",xNe.default],["presentation",wNe.default],["progressbar",CNe.default],["radio",ANe.default],["radiogroup",MNe.default],["region",RNe.default],["row",ONe.default],["rowgroup",INe.default],["rowheader",NNe.default],["scrollbar",PNe.default],["search",DNe.default],["searchbox",kNe.default],["separator",LNe.default],["slider",UNe.default],["spinbutton",BNe.default],["status",FNe.default],["strong",zNe.default],["subscript",jNe.default],["superscript",HNe.default],["switch",VNe.default],["tab",GNe.default],["table",qNe.default],["tablist",$Ne.default],["tabpanel",WNe.default],["term",YNe.default],["textbox",XNe.default],["time",KNe.default],["timer",ZNe.default],["toolbar",JNe.default],["tooltip",QNe.default],["tree",ePe.default],["treegrid",tPe.default],["treeitem",nPe.default]],rPe=iPe;ED.default=rPe;var Jk={},Qk={};Object.defineProperty(Qk,"__esModule",{value:!0});Qk.default=void 0;var sPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"abstract [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},aPe=sPe;Qk.default=aPe;var eL={};Object.defineProperty(eL,"__esModule",{value:!0});eL.default=void 0;var oPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"acknowledgments [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},lPe=oPe;eL.default=lPe;var tL={};Object.defineProperty(tL,"__esModule",{value:!0});tL.default=void 0;var cPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"afterword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},uPe=cPe;tL.default=uPe;var nL={};Object.defineProperty(nL,"__esModule",{value:!0});nL.default=void 0;var hPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"appendix [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},dPe=hPe;nL.default=dPe;var iL={};Object.defineProperty(iL,"__esModule",{value:!0});iL.default=void 0;var fPe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"referrer [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]},pPe=fPe;iL.default=pPe;var rL={};Object.defineProperty(rL,"__esModule",{value:!0});rL.default=void 0;var mPe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"EPUB biblioentry [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-bibliography"],requiredContextRole:["doc-bibliography"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]},gPe=mPe;rL.default=gPe;var sL={};Object.defineProperty(sL,"__esModule",{value:!0});sL.default=void 0;var vPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"bibliography [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-biblioentry"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},yPe=vPe;sL.default=yPe;var aL={};Object.defineProperty(aL,"__esModule",{value:!0});aL.default=void 0;var _Pe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"biblioref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]},bPe=_Pe;aL.default=bPe;var oL={};Object.defineProperty(oL,"__esModule",{value:!0});oL.default=void 0;var SPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"chapter [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},EPe=SPe;oL.default=EPe;var lL={};Object.defineProperty(lL,"__esModule",{value:!0});lL.default=void 0;var TPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"colophon [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},xPe=TPe;lL.default=xPe;var cL={};Object.defineProperty(cL,"__esModule",{value:!0});cL.default=void 0;var wPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"conclusion [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},CPe=wPe;cL.default=CPe;var uL={};Object.defineProperty(uL,"__esModule",{value:!0});uL.default=void 0;var APe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"cover [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]},MPe=APe;uL.default=MPe;var hL={};Object.defineProperty(hL,"__esModule",{value:!0});hL.default=void 0;var RPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credit [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},OPe=RPe;hL.default=OPe;var dL={};Object.defineProperty(dL,"__esModule",{value:!0});dL.default=void 0;var IPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credits [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},NPe=IPe;dL.default=NPe;var fL={};Object.defineProperty(fL,"__esModule",{value:!0});fL.default=void 0;var PPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"dedication [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},DPe=PPe;fL.default=DPe;var pL={};Object.defineProperty(pL,"__esModule",{value:!0});pL.default=void 0;var kPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-endnotes"],requiredContextRole:["doc-endnotes"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]},LPe=kPe;pL.default=LPe;var mL={};Object.defineProperty(mL,"__esModule",{value:!0});mL.default=void 0;var UPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnotes [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-endnote"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},BPe=UPe;mL.default=BPe;var gL={};Object.defineProperty(gL,"__esModule",{value:!0});gL.default=void 0;var FPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epigraph [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},zPe=FPe;gL.default=zPe;var vL={};Object.defineProperty(vL,"__esModule",{value:!0});vL.default=void 0;var jPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epilogue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},HPe=jPe;vL.default=HPe;var yL={};Object.defineProperty(yL,"__esModule",{value:!0});yL.default=void 0;var VPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"errata [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},GPe=VPe;yL.default=GPe;var _L={};Object.defineProperty(_L,"__esModule",{value:!0});_L.default=void 0;var qPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},$Pe=qPe;_L.default=$Pe;var bL={};Object.defineProperty(bL,"__esModule",{value:!0});bL.default=void 0;var WPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"footnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},YPe=WPe;bL.default=YPe;var SL={};Object.defineProperty(SL,"__esModule",{value:!0});SL.default=void 0;var XPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"foreword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},KPe=XPe;SL.default=KPe;var EL={};Object.defineProperty(EL,"__esModule",{value:!0});EL.default=void 0;var ZPe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossary [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["definition"],["term"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},JPe=ZPe;EL.default=JPe;var TL={};Object.defineProperty(TL,"__esModule",{value:!0});TL.default=void 0;var QPe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]},e2e=QPe;TL.default=e2e;var xL={};Object.defineProperty(xL,"__esModule",{value:!0});xL.default=void 0;var t2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"index [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]},n2e=t2e;xL.default=n2e;var wL={};Object.defineProperty(wL,"__esModule",{value:!0});wL.default=void 0;var i2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"introduction [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},r2e=i2e;wL.default=r2e;var CL={};Object.defineProperty(CL,"__esModule",{value:!0});CL.default=void 0;var s2e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"noteref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]},a2e=s2e;CL.default=a2e;var AL={};Object.defineProperty(AL,"__esModule",{value:!0});AL.default=void 0;var o2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"notice [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]},l2e=o2e;AL.default=l2e;var ML={};Object.defineProperty(ML,"__esModule",{value:!0});ML.default=void 0;var c2e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"pagebreak [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","separator"]]},u2e=c2e;ML.default=u2e;var RL={};Object.defineProperty(RL,"__esModule",{value:!0});RL.default=void 0;var h2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"page-list [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]},d2e=h2e;RL.default=d2e;var OL={};Object.defineProperty(OL,"__esModule",{value:!0});OL.default=void 0;var f2e={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"part [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},p2e=f2e;OL.default=p2e;var IL={};Object.defineProperty(IL,"__esModule",{value:!0});IL.default=void 0;var m2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"preface [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},g2e=m2e;IL.default=g2e;var NL={};Object.defineProperty(NL,"__esModule",{value:!0});NL.default=void 0;var v2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"prologue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]},y2e=v2e;NL.default=y2e;var PL={};Object.defineProperty(PL,"__esModule",{value:!0});PL.default=void 0;var _2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"pullquote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["none"]]},b2e=_2e;PL.default=b2e;var DL={};Object.defineProperty(DL,"__esModule",{value:!0});DL.default=void 0;var S2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"qna [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]},E2e=S2e;DL.default=E2e;var kL={};Object.defineProperty(kL,"__esModule",{value:!0});kL.default=void 0;var T2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"subtitle [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"]]},x2e=T2e;kL.default=x2e;var LL={};Object.defineProperty(LL,"__esModule",{value:!0});LL.default=void 0;var w2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"help [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]},C2e=w2e;LL.default=C2e;var UL={};Object.defineProperty(UL,"__esModule",{value:!0});UL.default=void 0;var A2e={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"toc [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]},M2e=A2e;UL.default=M2e;Object.defineProperty(Jk,"__esModule",{value:!0});Jk.default=void 0;var R2e=qi(Qk),O2e=qi(eL),I2e=qi(tL),N2e=qi(nL),P2e=qi(iL),D2e=qi(rL),k2e=qi(sL),L2e=qi(aL),U2e=qi(oL),B2e=qi(lL),F2e=qi(cL),z2e=qi(uL),j2e=qi(hL),H2e=qi(dL),V2e=qi(fL),G2e=qi(pL),q2e=qi(mL),$2e=qi(gL),W2e=qi(vL),Y2e=qi(yL),X2e=qi(_L),K2e=qi(bL),Z2e=qi(SL),J2e=qi(EL),Q2e=qi(TL),eDe=qi(xL),tDe=qi(wL),nDe=qi(CL),iDe=qi(AL),rDe=qi(ML),sDe=qi(RL),aDe=qi(OL),oDe=qi(IL),lDe=qi(NL),cDe=qi(PL),uDe=qi(DL),hDe=qi(kL),dDe=qi(LL),fDe=qi(UL);function qi(n){return n&&n.__esModule?n:{default:n}}var pDe=[["doc-abstract",R2e.default],["doc-acknowledgments",O2e.default],["doc-afterword",I2e.default],["doc-appendix",N2e.default],["doc-backlink",P2e.default],["doc-biblioentry",D2e.default],["doc-bibliography",k2e.default],["doc-biblioref",L2e.default],["doc-chapter",U2e.default],["doc-colophon",B2e.default],["doc-conclusion",F2e.default],["doc-cover",z2e.default],["doc-credit",j2e.default],["doc-credits",H2e.default],["doc-dedication",V2e.default],["doc-endnote",G2e.default],["doc-endnotes",q2e.default],["doc-epigraph",$2e.default],["doc-epilogue",W2e.default],["doc-errata",Y2e.default],["doc-example",X2e.default],["doc-footnote",K2e.default],["doc-foreword",Z2e.default],["doc-glossary",J2e.default],["doc-glossref",Q2e.default],["doc-index",eDe.default],["doc-introduction",tDe.default],["doc-noteref",nDe.default],["doc-notice",iDe.default],["doc-pagebreak",rDe.default],["doc-pagelist",sDe.default],["doc-part",aDe.default],["doc-preface",oDe.default],["doc-prologue",lDe.default],["doc-pullquote",cDe.default],["doc-qna",uDe.default],["doc-subtitle",hDe.default],["doc-tip",dDe.default],["doc-toc",fDe.default]],mDe=pDe;Jk.default=mDe;var BL={},FL={};Object.defineProperty(FL,"__esModule",{value:!0});FL.default=void 0;var gDe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-object"}},{module:"ARIA",concept:{name:"img"}},{module:"ARIA",concept:{name:"article"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]},vDe=gDe;FL.default=vDe;var zL={};Object.defineProperty(zL,"__esModule",{value:!0});zL.default=void 0;var yDe={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-document"}},{module:"ARIA",concept:{name:"group"}},{module:"ARIA",concept:{name:"img"}},{module:"GRAPHICS",concept:{name:"graphics-symbol"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]},_De=yDe;zL.default=_De;var jL={};Object.defineProperty(jL,"__esModule",{value:!0});jL.default=void 0;var bDe={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]},SDe=bDe;jL.default=SDe;Object.defineProperty(BL,"__esModule",{value:!0});BL.default=void 0;var EDe=Sj(FL),TDe=Sj(zL),xDe=Sj(jL);function Sj(n){return n&&n.__esModule?n:{default:n}}var wDe=[["graphics-document",EDe.default],["graphics-object",TDe.default],["graphics-symbol",xDe.default]],CDe=wDe;BL.default=CDe;Object.defineProperty(Nx,"__esModule",{value:!0});Nx.default=void 0;var ADe=HA(cD),MDe=HA(ED),RDe=HA(Jk),ODe=HA(BL),IDe=HA(Vb);function HA(n){return n&&n.__esModule?n:{default:n}}function NDe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nz(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Nie(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return s=c.done,c},e:function(c){a=!0,o=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}function Nw(n,e){return kDe(n)||DDe(n,e)||Nie(n,e)||PDe()}function PDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nie(n,e){if(n){if(typeof n=="string")return k9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k9(n,e)}}function k9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function DDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function kDe(n){if(Array.isArray(n))return n}var ty=[].concat(ADe.default,MDe.default,RDe.default,ODe.default);ty.forEach(function(n){var e=Nw(n,2),t=e[1],i=Nz(t.superClass),r;try{for(i.s();!(r=i.n()).done;){var s=r.value,a=Nz(s),o;try{var l=function(){var u=o.value,h=ty.find(function(_){var y=Nw(_,1),S=y[0];return S===u});if(h)for(var d=h[1],f=0,m=Object.keys(d.props);f<m.length;f++){var v=m[f];Object.prototype.hasOwnProperty.call(t.props,v)||Object.assign(t.props,NDe({},v,d.props[v]))}};for(a.s();!(o=a.n()).done;)l()}catch(c){a.e(c)}finally{a.f()}}}catch(c){i.e(c)}finally{i.f()}});var Pz={entries:function(){return ty},forEach:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=Nz(ty),r;try{for(i.s();!(r=i.n()).done;){var s=Nw(r.value,2),a=s[0],o=s[1];e.call(t,o,a,ty)}}catch(l){i.e(l)}finally{i.f()}},get:function(e){var t=ty.find(function(i){return i[0]===e});return t&&t[1]},has:function(e){return!!Pz.get(e)},keys:function(){return ty.map(function(e){var t=Nw(e,1),i=t[0];return i})},values:function(){return ty.map(function(e){var t=Nw(e,2),i=t[1];return i})}},LDe=(0,IDe.default)(Pz,Pz.entries());Nx.default=LDe;var HL={},Pie={},L9=Object.prototype.hasOwnProperty;function Dz(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Dz(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(L9.call(n,t)&&++i&&!L9.call(e,t)||!(t in e)||!Dz(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}Pie.dequal=Dz;Object.defineProperty(HL,"__esModule",{value:!0});HL.default=void 0;var Die=Pie,UDe=Lie(Vb),kie=Lie(Nx);function Lie(n){return n&&n.__esModule?n:{default:n}}function HB(n,e){return zDe(n)||FDe(n,e)||Uie(n,e)||BDe()}function BDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function zDe(n){if(Array.isArray(n))return n}function jDe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=Uie(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return s=c.done,c},e:function(c){a=!0,o=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}function Uie(n,e){if(n){if(typeof n=="string")return U9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U9(n,e)}}function U9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var ny=[],B9=kie.default.keys();for(var VB=0;VB<B9.length;VB++){var GB=B9[VB],qB=kie.default.get(GB);if(qB)for(var F9=[].concat(qB.baseConcepts,qB.relatedConcepts),$B=0;$B<F9.length;$B++){var z9=F9[$B];z9.module==="HTML"&&function(){var n=z9.concept;if(n){var e=ny.find(function(s){return(0,Die.dequal)(s,n)}),t;e?t=e[1]:t=[];for(var i=!0,r=0;r<t.length;r++)if(t[r]===GB){i=!1;break}i&&t.push(GB),ny.push([n,t])}}()}}var kz={entries:function(){return ny},forEach:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=jDe(ny),r;try{for(i.s();!(r=i.n()).done;){var s=HB(r.value,2),a=s[0],o=s[1];e.call(t,o,a,ny)}}catch(l){i.e(l)}finally{i.f()}},get:function(e){var t=ny.find(function(i){return e.name===i[0].name&&(0,Die.dequal)(e.attributes,i[0].attributes)});return t&&t[1]},has:function(e){return!!kz.get(e)},keys:function(){return ny.map(function(e){var t=HB(e,1),i=t[0];return i})},values:function(){return ny.map(function(e){var t=HB(e,2),i=t[1];return i})}},HDe=(0,UDe.default)(kz,kz.entries());HL.default=HDe;var VL={};Object.defineProperty(VL,"__esModule",{value:!0});VL.default=void 0;var VDe=Fie(Vb),Bie=Fie(Nx);function Fie(n){return n&&n.__esModule?n:{default:n}}function WB(n,e){return $De(n)||qDe(n,e)||zie(n,e)||GDe()}function GDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qDe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function $De(n){if(Array.isArray(n))return n}function WDe(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=zie(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return s=c.done,c},e:function(c){a=!0,o=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw o}}}}function zie(n,e){if(n){if(typeof n=="string")return j9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j9(n,e)}}function j9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var M_=[],H9=Bie.default.keys();for(var YB=0;YB<H9.length;YB++){var V9=H9[YB],XB=Bie.default.get(V9),KB=[];if(XB){for(var G9=[].concat(XB.baseConcepts,XB.relatedConcepts),ZB=0;ZB<G9.length;ZB++){var q9=G9[ZB];if(q9.module==="HTML"){var $9=q9.concept;$9!=null&&KB.push($9)}}KB.length>0&&M_.push([V9,KB])}}var Lz={entries:function(){return M_},forEach:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=WDe(M_),r;try{for(i.s();!(r=i.n()).done;){var s=WB(r.value,2),a=s[0],o=s[1];e.call(t,o,a,M_)}}catch(l){i.e(l)}finally{i.f()}},get:function(e){var t=M_.find(function(i){return i[0]===e});return t&&t[1]},has:function(e){return!!Lz.get(e)},keys:function(){return M_.map(function(e){var t=WB(e,1),i=t[0];return i})},values:function(){return M_.map(function(e){var t=WB(e,2),i=t[1];return i})}},YDe=(0,VDe.default)(Lz,Lz.entries());VL.default=YDe;Object.defineProperty(af,"__esModule",{value:!0});var Zd=af.roles=Hie=af.roleElements=jie=af.elementRoles=af.dom=af.aria=void 0,XDe=VA(aD),KDe=VA(lD),ZDe=VA(Nx),JDe=VA(HL),QDe=VA(VL);function VA(n){return n&&n.__esModule?n:{default:n}}var eke=XDe.default;af.aria=eke;var tke=KDe.default;af.dom=tke;var nke=ZDe.default;Zd=af.roles=nke;var ike=JDe.default,jie=af.elementRoles=ike,rke=QDe.default,Hie=af.roleElements=rke,Ej={exports:{}};Ej.exports;(function(n){var e=function(){var t=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function a(l,c){if(!s[l]){s[l]={};for(var u=0;u<l.length;u++)s[l][l.charAt(u)]=u}return s[l][c]}var o={compressToBase64:function(l){if(l==null)return"";var c=o._compress(l,6,function(u){return i.charAt(u)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:o._decompress(l.length,32,function(c){return a(i,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":o._compress(l,15,function(c){return t(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:o._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=o.compress(l),u=new Uint8Array(c.length*2),h=0,d=c.length;h<d;h++){var f=c.charCodeAt(h);u[h*2]=f>>>8,u[h*2+1]=f%256}return u},decompressFromUint8Array:function(l){if(l==null)return o.decompress(l);for(var c=new Array(l.length/2),u=0,h=c.length;u<h;u++)c[u]=l[u*2]*256+l[u*2+1];var d=[];return c.forEach(function(f){d.push(t(f))}),o.decompress(d.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":o._compress(l,6,function(c){return r.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),o._decompress(l.length,32,function(c){return a(r,l.charAt(c))}))},compress:function(l){return o._compress(l,16,function(c){return t(c)})},_compress:function(l,c,u){if(l==null)return"";var h,d,f={},m={},v="",_="",y="",S=2,T=3,x=2,I=[],R=0,N=0,L;for(L=0;L<l.length;L+=1)if(v=l.charAt(L),Object.prototype.hasOwnProperty.call(f,v)||(f[v]=T++,m[v]=!0),_=y+v,Object.prototype.hasOwnProperty.call(f,_))y=_;else{if(Object.prototype.hasOwnProperty.call(m,y)){if(y.charCodeAt(0)<256){for(h=0;h<x;h++)R=R<<1,N==c-1?(N=0,I.push(u(R)),R=0):N++;for(d=y.charCodeAt(0),h=0;h<8;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1}else{for(d=1,h=0;h<x;h++)R=R<<1|d,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=0;for(d=y.charCodeAt(0),h=0;h<16;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1}S--,S==0&&(S=Math.pow(2,x),x++),delete m[y]}else for(d=f[y],h=0;h<x;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1;S--,S==0&&(S=Math.pow(2,x),x++),f[_]=T++,y=String(v)}if(y!==""){if(Object.prototype.hasOwnProperty.call(m,y)){if(y.charCodeAt(0)<256){for(h=0;h<x;h++)R=R<<1,N==c-1?(N=0,I.push(u(R)),R=0):N++;for(d=y.charCodeAt(0),h=0;h<8;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1}else{for(d=1,h=0;h<x;h++)R=R<<1|d,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=0;for(d=y.charCodeAt(0),h=0;h<16;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1}S--,S==0&&(S=Math.pow(2,x),x++),delete m[y]}else for(d=f[y],h=0;h<x;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1;S--,S==0&&(S=Math.pow(2,x),x++)}for(d=2,h=0;h<x;h++)R=R<<1|d&1,N==c-1?(N=0,I.push(u(R)),R=0):N++,d=d>>1;for(;;)if(R=R<<1,N==c-1){I.push(u(R));break}else N++;return I.join("")},decompress:function(l){return l==null?"":l==""?null:o._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,u){var h=[],d=4,f=4,m=3,v="",_=[],y,S,T,x,I,R,N,L={val:u(0),position:c,index:1};for(y=0;y<3;y+=1)h[y]=y;for(T=0,I=Math.pow(2,2),R=1;R!=I;)x=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),T|=(x>0?1:0)*R,R<<=1;switch(T){case 0:for(T=0,I=Math.pow(2,8),R=1;R!=I;)x=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),T|=(x>0?1:0)*R,R<<=1;N=t(T);break;case 1:for(T=0,I=Math.pow(2,16),R=1;R!=I;)x=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),T|=(x>0?1:0)*R,R<<=1;N=t(T);break;case 2:return""}for(h[3]=N,S=N,_.push(N);;){if(L.index>l)return"";for(T=0,I=Math.pow(2,m),R=1;R!=I;)x=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),T|=(x>0?1:0)*R,R<<=1;switch(N=T){case 0:for(T=0,I=Math.pow(2,8),R=1;R!=I;)x=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),T|=(x>0?1:0)*R,R<<=1;h[f++]=t(T),N=f-1,d--;break;case 1:for(T=0,I=Math.pow(2,16),R=1;R!=I;)x=L.val&L.position,L.position>>=1,L.position==0&&(L.position=c,L.val=u(L.index++)),T|=(x>0?1:0)*R,R<<=1;h[f++]=t(T),N=f-1,d--;break;case 2:return _.join("")}if(d==0&&(d=Math.pow(2,m),m++),h[N])v=h[N];else if(N===f)v=S+S.charAt(0);else return null;_.push(v),h[f++]=S+v.charAt(0),d--,S=v,d==0&&(d=Math.pow(2,m),m++)}}};return o}();n!=null?n.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Ej);var ske=Ej.exports;const ake=Dl(ske);var Uz={};function Vie(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}const oke=(n,e,t,i,r,s,a)=>{const o=i+t.indent,l=t.colors;return n.map(c=>{const u=e[c];let h=a(u,t,o,r,s);return typeof u!="string"&&(h.indexOf(`
`)!==-1&&(h=t.spacingOuter+o+h+t.spacingOuter+i),h="{"+h+"}"),t.spacingInner+i+l.prop.open+c+l.prop.close+"="+l.value.open+h+l.value.close}).join("")},lke=3,cke=(n,e,t,i,r,s)=>n.map(a=>{const o=typeof a=="string"?Gie(a,e):s(a,e,t,i,r);return o===""&&typeof a=="object"&&a!==null&&a.nodeType!==lke?"":e.spacingOuter+t+o}).join(""),Gie=(n,e)=>{const t=e.colors.content;return t.open+Vie(n)+t.close},uke=(n,e)=>{const t=e.colors.comment;return t.open+"<!--"+Vie(n)+"-->"+t.close},hke=(n,e,t,i,r)=>{const s=i.colors.tag;return s.open+"<"+n+(e&&s.close+e+i.spacingOuter+r+s.open)+(t?">"+s.close+t+i.spacingOuter+r+s.open+"</"+n:(e&&!i.min?"":" ")+"/")+">"+s.close},dke=(n,e)=>{const t=e.colors.tag;return t.open+"<"+n+t.close+" "+t.open+" />"+t.close},fke=1,qie=3,$ie=8,Wie=11,pke=/^((HTML|SVG)\w*)?Element$/,Yie=n=>{const{tagName:e}=n;return!!(typeof e=="string"&&e.includes("-")||typeof n.hasAttribute=="function"&&n.hasAttribute("is"))},mke=n=>{const e=n.constructor.name,{nodeType:t}=n;return t===fke&&(pke.test(e)||Yie(n))||t===qie&&e==="Text"||t===$ie&&e==="Comment"||t===Wie&&e==="DocumentFragment"};function gke(n){return n.nodeType===qie}function vke(n){return n.nodeType===$ie}function JB(n){return n.nodeType===Wie}function yke(n){return{test:e=>{var t;return((e==null||(t=e.constructor)==null?void 0:t.name)||Yie(e))&&mke(e)},serialize:(e,t,i,r,s,a)=>{if(gke(e))return Gie(e.data,t);if(vke(e))return uke(e.data,t);const o=JB(e)?"DocumentFragment":e.tagName.toLowerCase();return++r>t.maxDepth?dke(o,t):hke(o,oke(JB(e)?[]:Array.from(e.attributes).map(l=>l.name).sort(),JB(e)?{}:Array.from(e.attributes).reduce((l,c)=>(l[c.name]=c.value,l),{}),t,i+t.indent,r,s,a),cke(Array.prototype.slice.call(e.childNodes||e.children).filter(n),t,i+t.indent,r,s,a),t,i)}}}let Xie=null,Tj=null,xj=null;try{const n=module&&module.require;Tj=n.call(module,"fs").readFileSync,xj=n.call(module,"@babel/code-frame").codeFrameColumns,Xie=n.call(module,"chalk")}catch{}function _ke(n){const e=n.indexOf("(")+1,t=n.indexOf(")"),i=n.slice(e,t),r=i.split(":"),[s,a,o]=[r[0],parseInt(r[1],10),parseInt(r[2],10)];let l="";try{l=Tj(s,"utf-8")}catch{return""}const c=xj(l,{start:{line:a,column:o}},{highlightCode:!0,linesBelow:0});return Xie.dim(i)+`
`+c+`
`}function bke(){if(!Tj||!xj)return"";const e=new Error().stack.split(`
`).slice(1).find(t=>!t.includes("node_modules/"));return _ke(e)}const Kie=3;function QB(){return typeof jest<"u"&&jest!==null?setTimeout._isMockFunction===!0||Object.prototype.hasOwnProperty.call(setTimeout,"clock"):!1}function wj(){if(typeof window>"u")throw new Error("Could not find default container");return window.document}function Ske(n){if(n.defaultView)return n.defaultView;if(n.ownerDocument&&n.ownerDocument.defaultView)return n.ownerDocument.defaultView;if(n.window)return n.window;throw n.ownerDocument&&n.ownerDocument.defaultView===null?new Error("It looks like the window object is not available for the provided node."):n.then instanceof Function?new Error("It looks like you passed a Promise object instead of a DOM node. Did you do something like `fireEvent.click(screen.findBy...` when you meant to use a `getBy` query `fireEvent.click(screen.getBy...`, or await the findBy query `fireEvent.click(await screen.findBy...`?"):Array.isArray(n)?new Error("It looks like you passed an Array instead of a DOM node. Did you do something like `fireEvent.click(screen.getAllBy...` when you meant to use a `getBy` query `fireEvent.click(screen.getBy...`?"):typeof n.debug=="function"&&typeof n.logTestingPlaygroundURL=="function"?new Error("It looks like you passed a `screen` object. Did you do something like `fireEvent.click(screen, ...` when you meant to use a query, e.g. `fireEvent.click(screen.getBy..., `?"):new Error("The given node is not an Element, the node type is: "+typeof n+".")}function Wg(n){if(!n||typeof n.querySelector!="function"||typeof n.querySelectorAll!="function")throw new TypeError("Expected container to be an Element, a Document or a DocumentFragment but got "+e(n)+".");function e(t){return typeof t=="object"?t===null?"null":t.constructor.name:typeof t}}const Eke=()=>{if(typeof ss>"u")return!1;let n;try{var e;const t=(e=Uz)==null?void 0:e.COLORS;t&&(n=JSON.parse(t))}catch{}return typeof n=="boolean"?n:ss.versions!==void 0&&ss.versions.node!==void 0},{DOMCollection:Tke}=uie,xke=1,wke=8;function Cke(n){return n.nodeType!==wke&&(n.nodeType!==xke||!n.matches(Rr().defaultIgnore))}function eP(n,e,t){if(t===void 0&&(t={}),n||(n=wj().body),typeof e!="number"&&(e=typeof ss<"u"&&typeof Uz<"u"&&Uz.DEBUG_PRINT_LIMIT||7e3),e===0)return"";n.documentElement&&(n=n.documentElement);let i=typeof n;if(i==="object"?i=n.constructor.name:n={},!("outerHTML"in n))throw new TypeError("Expected an element or document but got "+i);const{filterNode:r=Cke,...s}=t,a=aCe(n,{plugins:[yke(r),Tke],printFunctionName:!1,highlight:Eke(),...s});return e!==void 0&&n.outerHTML.length>e?a.slice(0,e)+"...":a}const W9=function(){const n=bke();console.log(n?eP(...arguments)+`

`+n:eP(...arguments))};let tP={testIdAttribute:"data-testid",asyncUtilTimeout:1e3,asyncWrapper:n=>n(),unstable_advanceTimersWrapper:n=>n(),eventWrapper:n=>n(),defaultHidden:!1,defaultIgnore:"script, style",showOriginalStackTrace:!1,throwSuggestions:!1,getElementError(n,e){const t=eP(e),i=new Error([n,"Ignored nodes: comments, "+tP.defaultIgnore+`
`+t].filter(Boolean).join(`

`));return i.name="TestingLibraryElementError",i},_disableExpensiveErrorDiagnostics:!1,computedStyleSupportsPseudoElements:!1};function Ake(n){try{return tP._disableExpensiveErrorDiagnostics=!0,n()}finally{tP._disableExpensiveErrorDiagnostics=!1}}function Rr(){return tP}const Mke=["button","meter","output","progress","select","textarea","input"];function Zie(n){return Mke.includes(n.nodeName.toLowerCase())?"":n.nodeType===Kie?n.textContent:Array.from(n.childNodes).map(e=>Zie(e)).join("")}function Bz(n){let e;return n.tagName.toLowerCase()==="label"?e=Zie(n):e=n.value||n.textContent,e}function Jie(n){if(n.labels!==void 0){var e;return(e=n.labels)!=null?e:[]}if(!Rke(n))return[];const t=n.ownerDocument.querySelectorAll("label");return Array.from(t).filter(i=>i.control===n)}function Rke(n){return/BUTTON|METER|OUTPUT|PROGRESS|SELECT|TEXTAREA/.test(n.tagName)||n.tagName==="INPUT"&&n.getAttribute("type")!=="hidden"}function Qie(n,e,t){let{selector:i="*"}=t===void 0?{}:t;const r=e.getAttribute("aria-labelledby"),s=r?r.split(" "):[];return s.length?s.map(a=>{const o=n.querySelector('[id="'+a+'"]');return o?{content:Bz(o),formControl:null}:{content:"",formControl:null}}):Array.from(Jie(e)).map(a=>{const o=Bz(a),c=Array.from(a.querySelectorAll("button, input, meter, output, progress, select, textarea")).filter(u=>u.matches(i))[0];return{content:o,formControl:c}})}function ere(n){if(n==null)throw new Error("It looks like "+n+" was passed instead of a matcher. Did you do something like getByText("+n+")?")}function Px(n,e,t,i){if(typeof n!="string")return!1;ere(t);const r=i(n);return typeof t=="string"||typeof t=="number"?r.toLowerCase().includes(t.toString().toLowerCase()):typeof t=="function"?t(r,e):nre(t,r)}function Ag(n,e,t,i){if(typeof n!="string")return!1;ere(t);const r=i(n);return t instanceof Function?t(r,e):t instanceof RegExp?nre(t,r):r===String(t)}function tre(n){let{trim:e=!0,collapseWhitespace:t=!0}=n===void 0?{}:n;return i=>{let r=i;return r=e?r.trim():r,r=t?r.replace(/\s+/g," "):r,r}}function Gb(n){let{trim:e,collapseWhitespace:t,normalizer:i}=n;if(!i)return tre({trim:e,collapseWhitespace:t});if(typeof e<"u"||typeof t<"u")throw new Error('trim and collapseWhitespace are not supported with a normalizer. If you want to use the default trim and collapseWhitespace logic in your normalizer, use "getDefaultNormalizer({trim, collapseWhitespace})" and compose that into your normalizer');return i}function nre(n,e){const t=n.test(e);return n.global&&n.lastIndex!==0&&(console.warn("To match all elements we had to reset the lastIndex of the RegExp because the global flag is enabled. We encourage to remove the global flag from the RegExp."),n.lastIndex=0),t}function GL(n){return n.matches("input[type=submit], input[type=button], input[type=reset]")?n.value:Array.from(n.childNodes).filter(e=>e.nodeType===Kie&&!!e.textContent).map(e=>e.textContent).join("")}const Oke=Ike(jie);function ire(n){return n.hidden===!0||n.getAttribute("aria-hidden")==="true"||n.ownerDocument.defaultView.getComputedStyle(n).display==="none"}function Cj(n,e){e===void 0&&(e={});const{isSubtreeInaccessible:t=ire}=e;if(n.ownerDocument.defaultView.getComputedStyle(n).visibility==="hidden")return!0;let r=n;for(;r;){if(t(r))return!0;r=r.parentElement}return!1}function Aj(n){for(const{match:e,roles:t}of Oke)if(e(n))return[...t];return[]}function Ike(n){function e(a){let{name:o,attributes:l}=a;return""+o+l.map(c=>{let{name:u,value:h,constraints:d=[]}=c;const f=d.indexOf("undefined")!==-1,m=d.indexOf("set")!==-1;return typeof h<"u"?"["+u+'="'+h+'"]':f?":not(["+u+"])":m?"["+u+"]:not(["+u+'=""])':"["+u+"]"}).join("")}function t(a){let{attributes:o=[]}=a;return o.length}function i(a,o){let{specificity:l}=a,{specificity:c}=o;return c-l}function r(a){let{attributes:o=[]}=a;const l=o.findIndex(u=>u.value&&u.name==="type"&&u.value==="text");l>=0&&(o=[...o.slice(0,l),...o.slice(l+1)]);const c=e({...a,attributes:o});return u=>l>=0&&u.type!=="text"?!1:u.matches(c)}let s=[];for(const[a,o]of n.entries())s=[...s,{match:r(a),roles:Array.from(o),specificity:t(a)}];return s.sort(i)}function Nke(n,e){let{hidden:t=!1}=e===void 0?{}:e;function i(r){return[r,...Array.from(r.children).reduce((s,a)=>[...s,...i(a)],[])]}return i(n).filter(r=>t===!1?Cj(r)===!1:!0).reduce((r,s)=>{let a=[];return s.hasAttribute("role")?a=s.getAttribute("role").split(" ").slice(0,1):a=Aj(s),a.reduce((o,l)=>Array.isArray(o[l])?{...o,[l]:[...o[l],s]}:{...o,[l]:[s]},r)},{})}function Pke(n,e){let{hidden:t,includeDescription:i}=e;const r=Nke(n,{hidden:t});return Object.entries(r).filter(s=>{let[a]=s;return a!=="generic"}).map(s=>{let[a,o]=s;const l="-".repeat(50),c=o.map(u=>{const h='Name "'+bj(u,{computedStyleSupportsPseudoElements:Rr().computedStyleSupportsPseudoElements})+`":
`,d=eP(u.cloneNode(!1));if(i){const f='Description "'+Rie(u,{computedStyleSupportsPseudoElements:Rr().computedStyleSupportsPseudoElements})+`":
`;return""+h+f+d}return""+h+d}).join(`

`);return a+`:

`+c+`

`+l}).join(`
`)}function Dke(n){return n.tagName==="OPTION"?n.selected:GA(n,"aria-selected")}function kke(n){return n.getAttribute("aria-busy")==="true"}function Lke(n){if(!("indeterminate"in n&&n.indeterminate))return"checked"in n?n.checked:GA(n,"aria-checked")}function Uke(n){return GA(n,"aria-pressed")}function Bke(n){var e,t;return(e=(t=GA(n,"aria-current"))!=null?t:n.getAttribute("aria-current"))!=null?e:!1}function Fke(n){return GA(n,"aria-expanded")}function GA(n,e){const t=n.getAttribute(e);if(t==="true")return!0;if(t==="false")return!1}function zke(n){const e={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6};return n.getAttribute("aria-level")&&Number(n.getAttribute("aria-level"))||e[n.tagName]}function jke(n){const e=n.getAttribute("aria-valuenow");return e===null?void 0:+e}function Hke(n){const e=n.getAttribute("aria-valuemax");return e===null?void 0:+e}function Vke(n){const e=n.getAttribute("aria-valuemin");return e===null?void 0:+e}function Gke(n){const e=n.getAttribute("aria-valuetext");return e===null?void 0:e}const Y9=tre();function qke(n){return n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function X9(n){return new RegExp(qke(n.toLowerCase()),"i")}function jv(n,e,t,i){let{variant:r,name:s}=i,a="";const o={},l=[["Role","TestId"].includes(n)?t:X9(t)];s&&(o.name=X9(s)),n==="Role"&&Cj(e)&&(o.hidden=!0,a=`Element is inaccessible. This means that the element and all its children are invisible to screen readers.
    If you are using the aria-hidden prop, make sure this is the right choice for your case.
    `),Object.keys(o).length>0&&l.push(o);const c=r+"By"+n;return{queryName:n,queryMethod:c,queryArgs:l,variant:r,warning:a,toString(){a&&console.warn(a);let[u,h]=l;return u=typeof u=="string"?"'"+u+"'":u,h=h?", { "+Object.entries(h).map(d=>{let[f,m]=d;return f+": "+m}).join(", ")+" }":"",c+"("+u+h+")"}}}function Hv(n,e,t){return t&&!e}function Fz(n,e,t){var i,r;if(e===void 0&&(e="get"),n.matches(Rr().defaultIgnore))return;const s=(i=n.getAttribute("role"))!=null?i:(r=Aj(n))==null?void 0:r[0];if(s!=="generic"&&Hv("Role",t,s))return jv("Role",n,s,{variant:e,name:bj(n,{computedStyleSupportsPseudoElements:Rr().computedStyleSupportsPseudoElements})});const a=Qie(document,n).map(d=>d.content).join(" ");if(Hv("LabelText",t,a))return jv("LabelText",n,a,{variant:e});const o=n.getAttribute("placeholder");if(Hv("PlaceholderText",t,o))return jv("PlaceholderText",n,o,{variant:e});const l=Y9(GL(n));if(Hv("Text",t,l))return jv("Text",n,l,{variant:e});if(Hv("DisplayValue",t,n.value))return jv("DisplayValue",n,Y9(n.value),{variant:e});const c=n.getAttribute("alt");if(Hv("AltText",t,c))return jv("AltText",n,c,{variant:e});const u=n.getAttribute("title");if(Hv("Title",t,u))return jv("Title",n,u,{variant:e});const h=n.getAttribute(Rr().testIdAttribute);if(Hv("TestId",t,h))return jv("TestId",n,h,{variant:e})}function jR(n,e){n.stack=e.stack.replace(e.message,n.message)}function $ke(n,e){let{container:t=wj(),timeout:i=Rr().asyncUtilTimeout,showOriginalStackTrace:r=Rr().showOriginalStackTrace,stackTraceError:s,interval:a=50,onTimeout:o=c=>(Object.defineProperty(c,"message",{value:Rr().getElementError(c.message,t).message}),c),mutationObserverOptions:l={subtree:!0,childList:!0,attributes:!0,characterData:!0}}=e;if(typeof n!="function")throw new TypeError("Received `callback` arg must be a function");return new Promise(async(c,u)=>{let h,d,f,m=!1,v="idle";const _=setTimeout(I,i),y=QB();if(y){const{unstable_advanceTimersWrapper:R}=Rr();for(x();!m;){if(!QB()){const N=new Error("Changed from using fake timers to real timers while using waitFor. This is not allowed and will result in very strange behavior. Please ensure you're awaiting all async things your test is doing before changing to real timers. For more info, please go to https://github.com/testing-library/dom-testing-library/issues/830");r||jR(N,s),u(N);return}if(await R(async()=>{jest.advanceTimersByTime(a)}),m)break;x()}}else{try{Wg(t)}catch(N){u(N);return}d=setInterval(T,a);const{MutationObserver:R}=Ske(t);f=new R(T),f.observe(t,l),x()}function S(R,N){m=!0,clearTimeout(_),y||(clearInterval(d),f.disconnect()),R?u(R):c(N)}function T(){if(QB()){const R=new Error("Changed from using real timers to fake timers while using waitFor. This is not allowed and will result in very strange behavior. Please ensure you're awaiting all async things your test is doing before changing to fake timers. For more info, please go to https://github.com/testing-library/dom-testing-library/issues/830");return r||jR(R,s),u(R)}else return x()}function x(){if(v!=="pending")try{const R=Ake(n);typeof(R==null?void 0:R.then)=="function"?(v="pending",R.then(N=>{v="resolved",S(null,N)},N=>{v="rejected",h=N})):S(null,R)}catch(R){h=R}}function I(){let R;h?(R=h,!r&&R.name==="TestingLibraryElementError"&&jR(R,s)):(R=new Error("Timed out in waitFor."),r||jR(R,s)),S(o(R),null)}})}function Wke(n,e){const t=new Error("STACK_TRACE_MESSAGE");return Rr().asyncWrapper(()=>$ke(n,{stackTraceError:t,...e}))}function rre(n,e){return Rr().getElementError(n,e)}function Yke(n,e){return rre(n+"\n\n(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).",e)}function qL(n,e,t,i){let{exact:r=!0,collapseWhitespace:s,trim:a,normalizer:o}=i===void 0?{}:i;const l=r?Ag:Px,c=Gb({collapseWhitespace:s,trim:a,normalizer:o});return Array.from(e.querySelectorAll("["+n+"]")).filter(u=>l(u.getAttribute(n),u,t,c))}function nP(n,e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];const a=n(t,...r);if(a.length>1){const o=a.map(l=>rre(null,l).message).join(`

`);throw Yke(e(t,...r)+`

Here are the matching elements:

`+o,t)}return a[0]||null}}function sre(n,e){return Rr().getElementError(`A better query is available, try this:
`+n.toString()+`
`,e)}function Xke(n,e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];const a=n(t,...r);if(!a.length)throw Rr().getElementError(e(t,...r),t);return a}}function iP(n){return(e,t,i,r)=>Wke(()=>n(e,t,i),{container:e,...r})}const QE=(n,e,t)=>function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];const o=n(i,...s),[{suggest:l=Rr().throwSuggestions}={}]=s.slice(-1);if(o&&l){const c=Fz(o,t);if(c&&!e.endsWith(c.queryName))throw sre(c.toString(),i)}return o},Sd=(n,e,t)=>function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];const o=n(i,...s),[{suggest:l=Rr().throwSuggestions}={}]=s.slice(-1);if(o.length&&l){const c=[...new Set(o.map(u=>{var h;return(h=Fz(u,t))==null?void 0:h.toString()}))];if(c.length===1&&!e.endsWith(Fz(o[0],t).queryName))throw sre(c[0],i)}return o};function qb(n,e,t){const i=QE(nP(n,e),n.name,"query"),r=Xke(n,t),s=nP(r,e),a=QE(s,n.name,"get"),o=Sd(r,n.name.replace("query","get"),"getAll"),l=iP(Sd(r,n.name,"findAll")),c=iP(QE(s,n.name,"find"));return[i,o,a,l,c]}function Kke(n){return Array.from(n.querySelectorAll("label,input")).map(e=>({node:e,textToMatch:Bz(e)})).filter(e=>{let{textToMatch:t}=e;return t!==null})}const Zke=function(n,e,t){let{exact:i=!0,trim:r,collapseWhitespace:s,normalizer:a}=t===void 0?{}:t;const o=i?Ag:Px,l=Gb({collapseWhitespace:s,trim:r,normalizer:a});return Kke(n).filter(u=>{let{node:h,textToMatch:d}=u;return o(d,h,e,l)}).map(u=>{let{node:h}=u;return h})},AC=function(n,e,t){let{selector:i="*",exact:r=!0,collapseWhitespace:s,trim:a,normalizer:o}=t===void 0?{}:t;Wg(n);const l=r?Ag:Px,c=Gb({collapseWhitespace:s,trim:a,normalizer:o}),u=Array.from(n.querySelectorAll("*")).filter(h=>Jie(h).length||h.hasAttribute("aria-labelledby")).reduce((h,d)=>{const f=Qie(n,d,{selector:i});f.filter(v=>!!v.formControl).forEach(v=>{l(v.content,v.formControl,e,c)&&v.formControl&&h.push(v.formControl)});const m=f.filter(v=>!!v.content).map(v=>v.content);return l(m.join(" "),d,e,c)&&h.push(d),m.length>1&&m.forEach((v,_)=>{l(v,d,e,c)&&h.push(d);const y=[...m];y.splice(_,1),y.length>1&&l(y.join(" "),d,e,c)&&h.push(d)}),h},[]).concat(qL("aria-label",n,e,{exact:r,normalizer:c}));return Array.from(new Set(u)).filter(h=>h.matches(i))},_b=function(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];const s=AC(n,e,...i);if(!s.length){const a=Zke(n,e,...i);if(a.length){const o=a.map(l=>Jke(n,l)).filter(l=>!!l);throw o.length?Rr().getElementError(o.map(l=>"Found a label with the text of: "+e+", however the element associated with this label (<"+l+" />) is non-labellable [https://html.spec.whatwg.org/multipage/forms.html#category-label]. If you really need to label a <"+l+" />, you can use aria-label or aria-labelledby instead.").join(`

`),n):Rr().getElementError("Found a label with the text of: "+e+`, however no form control was found associated to that label. Make sure you're using the "for" attribute or "aria-labelledby" attribute correctly.`,n)}else throw Rr().getElementError("Unable to find a label with the text of: "+e,n)}return s};function Jke(n,e){const t=e.getAttribute("for");if(!t)return null;const i=n.querySelector('[id="'+t+'"]');return i?i.tagName.toLowerCase():null}const are=(n,e)=>"Found multiple elements with the text of: "+e,Qke=QE(nP(AC,are),AC.name,"query"),ore=nP(_b,are),eLe=iP(Sd(_b,_b.name,"findAll")),tLe=iP(QE(ore,_b.name,"find")),nLe=Sd(_b,_b.name,"getAll"),iLe=QE(ore,_b.name,"get"),rLe=Sd(AC,AC.name,"queryAll"),zz=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Wg(e[0]),qL("placeholder",...e)},sLe=(n,e)=>"Found multiple elements with the placeholder text of: "+e,aLe=(n,e)=>"Unable to find an element with the placeholder text of: "+e,oLe=Sd(zz,zz.name,"queryAll"),[lLe,cLe,uLe,hLe,dLe]=qb(zz,sLe,aLe),jz=function(n,e,t){let{selector:i="*",exact:r=!0,collapseWhitespace:s,trim:a,ignore:o=Rr().defaultIgnore,normalizer:l}=t===void 0?{}:t;Wg(n);const c=r?Ag:Px,u=Gb({collapseWhitespace:s,trim:a,normalizer:l});let h=[];return typeof n.matches=="function"&&n.matches(i)&&(h=[n]),[...h,...Array.from(n.querySelectorAll(i))].filter(d=>!o||!d.matches(o)).filter(d=>c(GL(d),d,e,u))},fLe=(n,e)=>"Found multiple elements with the text: "+e,pLe=function(n,e,t){t===void 0&&(t={});const{collapseWhitespace:i,trim:r,normalizer:s,selector:a}=t,l=Gb({collapseWhitespace:i,trim:r,normalizer:s})(e.toString()),c=l!==e.toString(),u=(a??"*")!=="*";return"Unable to find an element with the text: "+(c?l+" (normalized from '"+e+"')":e)+(u?", which matches selector '"+a+"'":"")+". This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible."},mLe=Sd(jz,jz.name,"queryAll"),[gLe,vLe,yLe,_Le,bLe]=qb(jz,fLe,pLe),Hz=function(n,e,t){let{exact:i=!0,collapseWhitespace:r,trim:s,normalizer:a}=t===void 0?{}:t;Wg(n);const o=i?Ag:Px,l=Gb({collapseWhitespace:r,trim:s,normalizer:a});return Array.from(n.querySelectorAll("input,textarea,select")).filter(c=>c.tagName==="SELECT"?Array.from(c.options).filter(h=>h.selected).some(h=>o(GL(h),h,e,l)):o(c.value,c,e,l))},SLe=(n,e)=>"Found multiple elements with the display value: "+e+".",ELe=(n,e)=>"Unable to find an element with the display value: "+e+".",TLe=Sd(Hz,Hz.name,"queryAll"),[xLe,wLe,CLe,ALe,MLe]=qb(Hz,SLe,ELe),RLe=/^(img|input|area|.+-.+)$/i,Vz=function(n,e,t){return t===void 0&&(t={}),Wg(n),qL("alt",n,e,t).filter(i=>RLe.test(i.tagName))},OLe=(n,e)=>"Found multiple elements with the alt text: "+e,ILe=(n,e)=>"Unable to find an element with the alt text: "+e,NLe=Sd(Vz,Vz.name,"queryAll"),[PLe,DLe,kLe,LLe,ULe]=qb(Vz,OLe,ILe),BLe=n=>{var e;return n.tagName.toLowerCase()==="title"&&((e=n.parentElement)==null?void 0:e.tagName.toLowerCase())==="svg"},Gz=function(n,e,t){let{exact:i=!0,collapseWhitespace:r,trim:s,normalizer:a}=t===void 0?{}:t;Wg(n);const o=i?Ag:Px,l=Gb({collapseWhitespace:r,trim:s,normalizer:a});return Array.from(n.querySelectorAll("[title], svg > title")).filter(c=>o(c.getAttribute("title"),c,e,l)||BLe(c)&&o(GL(c),c,e,l))},FLe=(n,e)=>"Found multiple elements with the title: "+e+".",zLe=(n,e)=>"Unable to find an element with the title: "+e+".",jLe=Sd(Gz,Gz.name,"queryAll"),[HLe,VLe,GLe,qLe,$Le]=qb(Gz,FLe,zLe),qz=function(n,e,t){let{hidden:i=Rr().defaultHidden,name:r,description:s,queryFallbacks:a=!1,selected:o,busy:l,checked:c,pressed:u,current:h,level:d,expanded:f,value:{now:m,min:v,max:_,text:y}={}}=t===void 0?{}:t;if(Wg(n),o!==void 0){var S;if(((S=Zd.get(e))==null?void 0:S.props["aria-selected"])===void 0)throw new Error('"aria-selected" is not supported on role "'+e+'".')}if(l!==void 0){var T;if(((T=Zd.get(e))==null?void 0:T.props["aria-busy"])===void 0)throw new Error('"aria-busy" is not supported on role "'+e+'".')}if(c!==void 0){var x;if(((x=Zd.get(e))==null?void 0:x.props["aria-checked"])===void 0)throw new Error('"aria-checked" is not supported on role "'+e+'".')}if(u!==void 0){var I;if(((I=Zd.get(e))==null?void 0:I.props["aria-pressed"])===void 0)throw new Error('"aria-pressed" is not supported on role "'+e+'".')}if(h!==void 0){var R;if(((R=Zd.get(e))==null?void 0:R.props["aria-current"])===void 0)throw new Error('"aria-current" is not supported on role "'+e+'".')}if(d!==void 0&&e!=="heading")throw new Error('Role "'+e+'" cannot have "level" property.');if(m!==void 0){var N;if(((N=Zd.get(e))==null?void 0:N.props["aria-valuenow"])===void 0)throw new Error('"aria-valuenow" is not supported on role "'+e+'".')}if(_!==void 0){var L;if(((L=Zd.get(e))==null?void 0:L.props["aria-valuemax"])===void 0)throw new Error('"aria-valuemax" is not supported on role "'+e+'".')}if(v!==void 0){var k;if(((k=Zd.get(e))==null?void 0:k.props["aria-valuemin"])===void 0)throw new Error('"aria-valuemin" is not supported on role "'+e+'".')}if(y!==void 0){var z;if(((z=Zd.get(e))==null?void 0:z.props["aria-valuetext"])===void 0)throw new Error('"aria-valuetext" is not supported on role "'+e+'".')}if(f!==void 0){var Z;if(((Z=Zd.get(e))==null?void 0:Z.props["aria-expanded"])===void 0)throw new Error('"aria-expanded" is not supported on role "'+e+'".')}const H=new WeakMap;function q(U){return H.has(U)||H.set(U,ire(U)),H.get(U)}return Array.from(n.querySelectorAll(WLe(e))).filter(U=>{if(U.hasAttribute("role")){const Q=U.getAttribute("role");if(a)return Q.split(" ").filter(Boolean).some(Y=>Y===e);const[X]=Q.split(" ");return X===e}return Aj(U).some(Q=>Q===e)}).filter(U=>{if(o!==void 0)return o===Dke(U);if(l!==void 0)return l===kke(U);if(c!==void 0)return c===Lke(U);if(u!==void 0)return u===Uke(U);if(h!==void 0)return h===Bke(U);if(f!==void 0)return f===Fke(U);if(d!==void 0)return d===zke(U);if(m!==void 0||_!==void 0||v!==void 0||y!==void 0){let W=!0;if(m!==void 0&&W&&(W=m===jke(U)),_!==void 0&&W&&(W=_===Hke(U)),v!==void 0&&W&&(W=v===Vke(U)),y!==void 0){var ee;W&&(W=Ag((ee=Gke(U))!=null?ee:null,U,y,Q=>Q))}return W}return!0}).filter(U=>r===void 0?!0:Ag(bj(U,{computedStyleSupportsPseudoElements:Rr().computedStyleSupportsPseudoElements}),U,r,ee=>ee)).filter(U=>s===void 0?!0:Ag(Rie(U,{computedStyleSupportsPseudoElements:Rr().computedStyleSupportsPseudoElements}),U,s,ee=>ee)).filter(U=>i===!1?Cj(U,{isSubtreeInaccessible:q})===!1:!0)};function WLe(n){var e;const t='*[role~="'+n+'"]',i=(e=Hie.get(n))!=null?e:new Set,r=new Set(Array.from(i).map(s=>{let{name:a}=s;return a}));return[t].concat(Array.from(r)).join(",")}const lre=n=>{let e="";return n===void 0?e="":typeof n=="string"?e=' and name "'+n+'"':e=" and name `"+n+"`",e},YLe=function(n,e,t){let{name:i}=t===void 0?{}:t;return'Found multiple elements with the role "'+e+'"'+lre(i)},XLe=function(n,e,t){let{hidden:i=Rr().defaultHidden,name:r,description:s}=t===void 0?{}:t;if(Rr()._disableExpensiveErrorDiagnostics)return'Unable to find role="'+e+'"'+lre(r);let a="";Array.from(n.children).forEach(u=>{a+=Pke(u,{hidden:i,includeDescription:s!==void 0})});let o;a.length===0?i===!1?o="There are no accessible roles. But there might be some inaccessible roles. If you wish to access them, then set the `hidden` option to `true`. Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole":o="There are no available roles.":o=(`
Here are the `+(i===!1?"accessible":"available")+` roles:

  `+a.replace(/\n/g,`
  `).replace(/\n\s\s\n/g,`

`)+`
`).trim();let l="";r===void 0?l="":typeof r=="string"?l=' and name "'+r+'"':l=" and name `"+r+"`";let c="";return s===void 0?c="":typeof s=="string"?c=' and description "'+s+'"':c=" and description `"+s+"`",(`
Unable to find an `+(i===!1?"accessible ":"")+'element with the role "'+e+'"'+l+c+`

`+o).trim()},KLe=Sd(qz,qz.name,"queryAll"),[ZLe,JLe,QLe,eUe,tUe]=qb(qz,YLe,XLe),Mj=()=>Rr().testIdAttribute,$z=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Wg(e[0]),qL(Mj(),...e)},nUe=(n,e)=>"Found multiple elements by: ["+Mj()+'="'+e+'"]',iUe=(n,e)=>"Unable to find an element by: ["+Mj()+'="'+e+'"]',rUe=Sd($z,$z.name,"queryAll"),[sUe,aUe,oUe,lUe,cUe]=qb($z,nUe,iUe);var Wz=Object.freeze({__proto__:null,queryAllByLabelText:rLe,queryByLabelText:Qke,getAllByLabelText:nLe,getByLabelText:iLe,findAllByLabelText:eLe,findByLabelText:tLe,queryByPlaceholderText:lLe,queryAllByPlaceholderText:oLe,getByPlaceholderText:uLe,getAllByPlaceholderText:cLe,findAllByPlaceholderText:hLe,findByPlaceholderText:dLe,queryByText:gLe,queryAllByText:mLe,getByText:yLe,getAllByText:vLe,findAllByText:_Le,findByText:bLe,queryByDisplayValue:xLe,queryAllByDisplayValue:TLe,getByDisplayValue:CLe,getAllByDisplayValue:wLe,findAllByDisplayValue:ALe,findByDisplayValue:MLe,queryByAltText:PLe,queryAllByAltText:NLe,getByAltText:kLe,getAllByAltText:DLe,findAllByAltText:LLe,findByAltText:ULe,queryByTitle:HLe,queryAllByTitle:jLe,getByTitle:GLe,getAllByTitle:VLe,findAllByTitle:qLe,findByTitle:$Le,queryByRole:ZLe,queryAllByRole:KLe,getAllByRole:JLe,getByRole:QLe,findAllByRole:eUe,findByRole:tUe,queryByTestId:sUe,queryAllByTestId:rUe,getByTestId:oUe,getAllByTestId:aUe,findAllByTestId:lUe,findByTestId:cUe});function uUe(n,e,t){return e===void 0&&(e=Wz),t===void 0&&(t={}),Object.keys(e).reduce((i,r)=>{const s=e[r];return i[r]=s.bind(null,n),i},t)}const hUe={copy:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},cut:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},paste:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionEnd:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionStart:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},compositionUpdate:{EventType:"CompositionEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keyDown:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},keyPress:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},keyUp:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,charCode:0,composed:!0}},focus:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},blur:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},focusIn:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},focusOut:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},change:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},input:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},invalid:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!0}},submit:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}},reset:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}},click:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,button:0,composed:!0}},contextMenu:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dblClick:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},drag:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragEnd:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragEnter:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragExit:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragLeave:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},dragOver:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dragStart:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},drop:{EventType:"DragEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseDown:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseEnter:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseLeave:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseMove:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseOut:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseOver:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseUp:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},select:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},touchCancel:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},touchEnd:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},touchMove:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},touchStart:{EventType:"TouchEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},resize:{EventType:"UIEvent",defaultInit:{bubbles:!1,cancelable:!1}},scroll:{EventType:"UIEvent",defaultInit:{bubbles:!1,cancelable:!1}},wheel:{EventType:"WheelEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},abort:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},canPlay:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},canPlayThrough:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},durationChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},emptied:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},encrypted:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},ended:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadedData:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadedMetadata:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},loadStart:{EventType:"ProgressEvent",defaultInit:{bubbles:!1,cancelable:!1}},pause:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},play:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},playing:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},progress:{EventType:"ProgressEvent",defaultInit:{bubbles:!1,cancelable:!1}},rateChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},seeked:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},seeking:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},stalled:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},suspend:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},timeUpdate:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},volumeChange:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},waiting:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},load:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},error:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},animationStart:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},animationEnd:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},animationIteration:{EventType:"AnimationEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionCancel:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionEnd:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}},transitionRun:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},transitionStart:{EventType:"TransitionEvent",defaultInit:{bubbles:!0,cancelable:!1}},pointerOver:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerEnter:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},pointerDown:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerMove:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerUp:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerCancel:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},pointerOut:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerLeave:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},gotPointerCapture:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},lostPointerCapture:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},popState:{EventType:"PopStateEvent",defaultInit:{bubbles:!0,cancelable:!1}},offline:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},online:{EventType:"Event",defaultInit:{bubbles:!1,cancelable:!1}},pageHide:{EventType:"PageTransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}},pageShow:{EventType:"PageTransitionEvent",defaultInit:{bubbles:!0,cancelable:!0}}},dUe={doubleClick:"dblClick"};Object.keys(hUe).forEach(n=>{n.toLowerCase()});Object.keys(dUe).forEach(n=>{});function fUe(n){return n.replace(/[ \t]*[\n][ \t]*/g,`
`)}function pUe(n){return ake.compressToEncodedURIComponent(fUe(n))}function mUe(n){return"https://testing-playground.com/#markup="+pUe(n)}const gUe=(n,e,t)=>Array.isArray(n)?n.forEach(i=>W9(i,e,t)):W9(n,e,t),vUe=function(n){if(n===void 0&&(n=wj().body),!n||!("innerHTML"in n)){console.log("The element you're providing isn't a valid DOM element.");return}if(!n.innerHTML){console.log("The provided element doesn't have any children.");return}const e=mUe(n.innerHTML);return console.log(`Open this URL in your browser

`+e),e},K9={debug:gUe,logTestingPlaygroundURL:vUe};typeof document<"u"&&document.body?uUe(document.body,Wz,K9):Object.keys(Wz).reduce((n,e)=>(n[e]=()=>{throw new TypeError("For queries bound to document.body a global document has to be available... Learn more: https://testing-library.com/s/screen-global-error")},n),K9);function jT(n,e){return Rr().eventWrapper(n)}function qy(n){const e=G1e(n,mj),t=NA(n.ownerDocument);(e??n.ownerDocument.body)!==t&&(jT(e?()=>e.focus():()=>t==null?void 0:t.blur()),W1e(e??n.ownerDocument.body))}function yUe(n){!mj(n)||!(NA(n.ownerDocument)===n)||jT(()=>n.blur())}const $y={};$y.click=(n,e,t)=>{const i=e.closest("button,input,label,select,textarea"),r=i&&ji(i,"label")&&i.control;if(r&&r!==e)return()=>{mj(r)&&(qy(r),t.dispatchEvent(r,V1e(n)))};if(ji(e,"input",{type:"file"}))return()=>{yUe(e),e.dispatchEvent(new(Ad(e)).Event("fileDialog")),qy(e)}};const HT=Symbol("Displayed value in UI"),Sg=Symbol("Displayed selection in UI"),rP=Symbol("Initial value to compare on blur");function _Ue(n){return typeof n=="object"&&HT in n}function bUe(n){return!!n&&typeof n=="object"&&Sg in n}function SUe(n,e){n[rP]===void 0&&(n[rP]=n.value),n[HT]=e,n.value=Object.assign(new String(e),{[HT]:!0})}function qp(n){return n[HT]===void 0?n.value:String(n[HT])}function Rj(n){n[HT]=void 0}function cre(n){n[rP]=void 0}function EUe(n){return n[rP]}function TUe(n,e){n[Sg]=e}function Dx(n,{focusOffset:e,anchorOffset:t=e},i="replace"){const r=qp(n).length,s=h=>Math.max(0,Math.min(r,h)),a=i==="replace"||n[Sg]===void 0?s(t):n[Sg].anchorOffset,o=s(e),l=Math.min(a,o),c=Math.max(a,o);if(n[Sg]={anchorOffset:a,focusOffset:o},n.selectionStart===l&&n.selectionEnd===c)return;const u=Object.assign(new Number(l),{[Sg]:!0});try{n.setSelectionRange(u,c)}catch{}}function MC(n){var e,t,i;const r=(i=n[Sg])!==null&&i!==void 0?i:{anchorOffset:(e=n.selectionStart)!==null&&e!==void 0?e:0,focusOffset:(t=n.selectionEnd)!==null&&t!==void 0?t:0};return{...r,startOffset:Math.min(r.anchorOffset,r.focusOffset),endOffset:Math.max(r.anchorOffset,r.focusOffset)}}function xUe(n){return!!n[Sg]}function GO(n){n[Sg]=void 0}const sP=globalThis.parseInt;function wUe(n){const e=n.replace(/\D/g,"");if(e.length<2)return n;const t=sP(e[0],10),i=sP(e[1],10);if(t>=3||t===2&&i>=4){let r;return t>=3?r=1:r=2,Z9(e,r)}return n.length===2?n:Z9(e,2)}function Z9(n,e){const t=n.slice(0,e),i=Math.min(sP(t,10),23),r=n.slice(e),s=sP(r,10),a=Math.min(s,59);return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}function ure(n,e){const t=n.cloneNode();return t.value=e,t.value===e}var hre=function(n){return n.email="email",n.password="password",n.search="search",n.telephone="telephone",n.text="text",n.url="url",n}(hre||{});function CUe(n){var e;const t=(e=n.getAttribute("maxlength"))!==null&&e!==void 0?e:"";return/^\d+$/.test(t)&&Number(t)>=0?Number(t):void 0}function AUe(n){return ji(n,"textarea")||ji(n,"input")&&n.type in hre}function dre(n,e,t,i){if(qO(n)&&e+t>=0&&e+t<=n.nodeValue.length)return{node:n,offset:e+t};const r=J9(n,e,t);if(r){if(qO(r))return{node:r,offset:t>0?Math.min(1,r.nodeValue.length):Math.max(r.nodeValue.length-1,0)};if(ji(r,"br")){const s=J9(r,void 0,t);return s?qO(s)?{node:s,offset:t>0?0:s.nodeValue.length}:t<0&&ji(s,"br")?{node:r.parentNode,offset:HR(r)}:{node:s.parentNode,offset:HR(s)+(t>0?0:1)}:t<0&&i==="deleteContentBackward"?{node:r.parentNode,offset:HR(r)}:void 0}else return{node:r.parentNode,offset:HR(r)+(t>0?1:0)}}}function J9(n,e,t){const i=Number(e)+(t<0?-1:0);return e!==void 0&&Oj(n)&&i>=0&&i<n.children.length&&(n=n.children[i]),RUe(n,t===1?"next":"previous",MUe)}function MUe(n){if(qO(n))return!0;if(Oj(n)){if(ji(n,["input","textarea"]))return n.type!=="hidden";if(ji(n,"br"))return!0}return!1}function HR(n){let e=0;for(;n.previousSibling;)e++,n=n.previousSibling;return e}function Oj(n){return n.nodeType===1}function qO(n){return n.nodeType===3}function RUe(n,e,t){for(;;){var i;const r=n[`${e}Sibling`];if(r){if(n=OUe(r,e==="next"?"first":"last"),t(n))return n}else if(n.parentNode&&(!Oj(n.parentNode)||!yb(n.parentNode)&&n.parentNode!==((i=n.ownerDocument)===null||i===void 0?void 0:i.body)))n=n.parentNode;else break}}function OUe(n,e){for(;n.hasChildNodes();)n=n[`${e}Child`];return n}const RC=Symbol("Track programmatic changes for React workaround");function IUe(n){return Object.getOwnPropertyNames(n).some(e=>e.startsWith("__react"))&&Ad(n).REACT_VERSION===17}function NUe(n){IUe(n)&&(n[RC]={previousValue:String(n.value),tracked:[]})}function PUe(n,e){var t,i;(i=n[RC])===null||i===void 0||(t=i.tracked)===null||t===void 0||t.push(e),n[RC]||(Rj(n),Dx(n,{focusOffset:e.length}))}function DUe(n,e){var t;const i=n[RC];if(n[RC]=void 0,!(!(i==null||(t=i.tracked)===null||t===void 0)&&t.length))return;const r=i.tracked.length===2&&i.tracked[0]===i.previousValue&&i.tracked[1]===n.value;r||Rj(n),xUe(n)&&Dx(n,{focusOffset:r?e:n.value.length})}function fre(n){const e=kUe(n);if(e&&Gp(e))return{type:"input",selection:MC(e)};const t=e==null?void 0:e.ownerDocument.getSelection();return{type:EC(n)&&(t==null?void 0:t.anchorNode)&&EC(t.anchorNode)?"contenteditable":"default",selection:t}}function kUe(n){return n.nodeType===1?n:n.parentElement}function LUe(n){const e=fre(n);if(e.type==="input")return e.selection;if(e.type==="contenteditable"){var t;return(t=e.selection)===null||t===void 0?void 0:t.getRangeAt(0)}}function bb({focusNode:n,focusOffset:e,anchorNode:t=n,anchorOffset:i=e}){var r,s;if(fre(n).type==="input")return Dx(n,{anchorOffset:i,focusOffset:e});(s=t.ownerDocument)===null||s===void 0||(r=s.getSelection())===null||r===void 0||r.setBaseAndExtent(t,i,n,e)}function pre(n){return ji(n,"input")&&["date","time"].includes(n.type)}function VT(n,e,t,i="insertText"){const r=LUe(e);r&&(!pre(e)&&!n.dispatchUIEvent(e,"beforeinput",{inputType:i,data:t})||("startContainer"in r?UUe(n,e,r,t,i):BUe(n,e,r,t,i)))}function UUe(n,e,t,i,r){let s=!1;if(!t.collapsed)s=!0,t.deleteContents();else if(["deleteContentBackward","deleteContentForward"].includes(r)){const a=dre(t.startContainer,t.startOffset,r==="deleteContentBackward"?-1:1,r);if(a){s=!0;const o=t.cloneRange();o.comparePoint(a.node,a.offset)<0?o.setStart(a.node,a.offset):o.setEnd(a.node,a.offset),o.deleteContents()}}if(i)if(t.endContainer.nodeType===3){const a=t.endOffset;t.endContainer.insertData(a,i),t.setStart(t.endContainer,a+i.length),t.setEnd(t.endContainer,a+i.length)}else{const a=e.ownerDocument.createTextNode(i);t.insertNode(a),t.setStart(a,i.length),t.setEnd(a,i.length)}(s||i)&&n.dispatchUIEvent(e,"input",{inputType:r})}function BUe(n,e,t,i,r){let s=i;if(AUe(e)){const c=CUe(e);if(c!==void 0&&i.length>0){const u=c-e.value.length;if(u>0)s=i.substring(0,u);else return}}const{newValue:a,newOffset:o,oldValue:l}=FUe(s,e,t,r);a===l&&o===t.startOffset&&o===t.endOffset||ji(e,"input",{type:"number"})&&!zUe(a)||(SUe(e,a),bb({focusNode:e,anchorOffset:o,focusOffset:o}),pre(e)?ure(e,a)&&(Q9(n,e,o,{}),n.dispatchUIEvent(e,"change"),cre(e)):Q9(n,e,o,{data:i,inputType:r}))}function FUe(n,e,{startOffset:t,endOffset:i},r){const s=qp(e),a=Math.max(0,t===i&&r==="deleteContentBackward"?t-1:t),o=s.substring(0,a),l=Math.min(s.length,t===i&&r==="deleteContentForward"?t+1:i),c=s.substring(l,s.length);let u=`${o}${n}${c}`,h=a+n.length;if(ji(e,"input",{type:"time"})){const d=wUe(u);d!==""&&ure(e,d)&&(u=d,h=d.length)}return{oldValue:s,newValue:u,newOffset:h}}function Q9(n,e,t,i){n.dispatchUIEvent(e,"input",i),DUe(e,t)}function zUe(n){var e,t;const i=n.split("e",2);return!(/[^\d.\-e]/.test(n)||Number((e=n.match(/-/g))===null||e===void 0?void 0:e.length)>2||Number((t=n.match(/\./g))===null||t===void 0?void 0:t.length)>1||i[1]&&!/^-?\d*$/.test(i[1]))}$y.cut=(n,e,t)=>()=>{FT(e)&&VT(t,e,"","deleteByCut")};function jUe(n){return n?yb(n)?n.textContent:qp(n):null}function HUe(n){const e=Ad(n);for(let t=n;t!=null&&t.ownerDocument;t=t.parentElement){const{display:i,visibility:r}=e.getComputedStyle(t);if(i==="none"||r==="hidden")return!1}return!0}function VUe(n,e){const t=n.ownerDocument,i=t.querySelectorAll(Ane),r=Array.from(i).filter(l=>l===n||!(Number(l.getAttribute("tabindex"))<0||Ug(l)));Number(n.getAttribute("tabindex"))>=0&&r.sort((l,c)=>{const u=Number(l.getAttribute("tabindex")),h=Number(c.getAttribute("tabindex"));return u===h?0:u===0?1:h===0?-1:u-h});const s={};let a=[t.body];const o=ji(n,"input",{type:"radio"})?n.name:void 0;r.forEach(l=>{const c=l;if(ji(c,"input",{type:"radio"})&&c.name){if(c===n){a.push(c);return}else if(c.name===o)return;if(c.checked){a=a.filter(u=>!ji(u,"input",{type:"radio",name:c.name})),a.push(c),s[c.name]=c;return}if(typeof s[c.name]<"u")return}a.push(c)});for(let l=a.findIndex(c=>c===n);;)if(l+=e?-1:1,l===a.length?l=0:l===-1&&(l=a.length-1),a[l]===n||a[l]===t.body||HUe(a[l]))return a[l]}function e$(n,e){if(Gp(n)){const t=MC(n);bb({focusNode:n,focusOffset:t.startOffset===t.endOffset?t.focusOffset+e:e<0?t.startOffset:t.endOffset})}else{const t=n.ownerDocument.getSelection();if(!(t!=null&&t.focusNode))return;if(t.isCollapsed){const i=dre(t.focusNode,t.focusOffset,e);i&&bb({focusNode:i.node,focusOffset:i.offset})}else t[e<0?"collapseToStart":"collapseToEnd"]()}}function mre(n){if(Gp(n))return bb({focusNode:n,anchorOffset:0,focusOffset:qp(n).length});var e;const t=(e=EC(n))!==null&&e!==void 0?e:n.ownerDocument.body;bb({focusNode:t,anchorOffset:0,focusOffset:t.childNodes.length})}function GUe(n){if(Gp(n))return MC(n).startOffset===0&&MC(n).endOffset===qp(n).length;var e;const t=(e=EC(n))!==null&&e!==void 0?e:n.ownerDocument.body,i=n.ownerDocument.getSelection();return(i==null?void 0:i.anchorNode)===t&&i.focusNode===t&&i.anchorOffset===0&&i.focusOffset===t.childNodes.length}function Z1(n,e,t){var i;if(Gp(n))return bb({focusNode:n,anchorOffset:e,focusOffset:t});if(yb(n)&&((i=n.firstChild)===null||i===void 0?void 0:i.nodeType)===3)return bb({focusNode:n.firstChild,anchorOffset:e,focusOffset:t});throw new Error("Not implemented. The result of this interaction is unreliable.")}function VR(n,e,t){const i=Ad(e),r=Array.from(e.ownerDocument.querySelectorAll(e.name?`input[type="radio"][name="${i.CSS.escape(e.name)}"]`:'input[type="radio"][name=""], input[type="radio"]:not([name])'));for(let s=r.findIndex(a=>a===e)+t;;s+=t){if(r[s]||(s=t>0?0:r.length-1),r[s]===e)return;if(!Ug(r[s])){qy(r[s]),n.dispatchUIEvent(r[s],"click");return}}}$y.keydown=(n,e,t)=>{var i,r;return(r=(i=t$[n.key])===null||i===void 0?void 0:i.call(t$,n,e,t))!==null&&r!==void 0?r:qUe(n,e,t)};const t$={ArrowDown:(n,e,t)=>{if(ji(e,"input",{type:"radio"}))return()=>VR(t,e,1)},ArrowLeft:(n,e,t)=>ji(e,"input",{type:"radio"})?()=>VR(t,e,-1):()=>e$(e,-1),ArrowRight:(n,e,t)=>ji(e,"input",{type:"radio"})?()=>VR(t,e,1):()=>e$(e,1),ArrowUp:(n,e,t)=>{if(ji(e,"input",{type:"radio"}))return()=>VR(t,e,-1)},Backspace:(n,e,t)=>{if(FT(e))return()=>{VT(t,e,"","deleteContentBackward")}},Delete:(n,e,t)=>{if(FT(e))return()=>{VT(t,e,"","deleteContentForward")}},End:(n,e)=>{if(ji(e,["input","textarea"])||yb(e))return()=>{var t,i;const r=(i=(t=jUe(e))===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:0;Z1(e,r,r)}},Home:(n,e)=>{if(ji(e,["input","textarea"])||yb(e))return()=>{Z1(e,0,0)}},PageDown:(n,e)=>{if(ji(e,["input"]))return()=>{const t=qp(e).length;Z1(e,t,t)}},PageUp:(n,e)=>{if(ji(e,["input"]))return()=>{Z1(e,0,0)}},Tab:(n,e,t)=>()=>{const i=VUe(e,t.system.keyboard.modifiers.Shift);qy(i),Gp(i)&&Dx(i,{anchorOffset:0,focusOffset:i.value.length})}},qUe=(n,e,t)=>{if(n.code==="KeyA"&&t.system.keyboard.modifiers.Control)return()=>mre(e)};$y.keypress=(n,e,t)=>{if(n.key==="Enter"){if(ji(e,"button")||ji(e,"input")&&$Ue.includes(e.type)||ji(e,"a")&&e.href)return()=>{t.dispatchUIEvent(e,"click")};if(ji(e,"input")){const i=e.form,r=i==null?void 0:i.querySelector('input[type="submit"], button:not([type]), button[type="submit"]');return r?()=>t.dispatchUIEvent(r,"click"):i&&WUe.includes(e.type)&&i.querySelectorAll("input").length===1?()=>t.dispatchUIEvent(i,"submit"):void 0}}if(FT(e)){const i=n.key==="Enter"?yb(e)&&!t.system.keyboard.modifiers.Shift?"insertParagraph":"insertLineBreak":"insertText",r=n.key==="Enter"?`
`:n.key;return()=>VT(t,e,r,i)}};const $Ue=["button","color","file","image","reset","submit"],WUe=["email","month","password","search","tel","text","url","week"];$y.keyup=(n,e,t)=>{var i;return(i=n$[n.key])===null||i===void 0?void 0:i.call(n$,n,e,t)};const n$={" ":(n,e,t)=>{if(Rne(e))return()=>t.dispatchUIEvent(e,"click")}};$y.paste=(n,e,t)=>{if(FT(e))return()=>{var i;const r=(i=n.clipboardData)===null||i===void 0?void 0:i.getData("text");r&&VT(t,e,r,"insertFromPaste")}};const gre={auxclick:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},beforeinput:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},blur:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},click:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},contextmenu:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},copy:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},change:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!1}},cut:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},dblclick:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},focus:{EventType:"FocusEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},focusin:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},focusout:{EventType:"FocusEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},keydown:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keypress:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},keyup:{EventType:"KeyboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},paste:{EventType:"ClipboardEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},input:{EventType:"InputEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},mousedown:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseenter:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mouseleave:{EventType:"MouseEvent",defaultInit:{bubbles:!1,cancelable:!1,composed:!0}},mousemove:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseout:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseover:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},mouseup:{EventType:"MouseEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerover:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerenter:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},pointerdown:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointermove:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerup:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointercancel:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!1,composed:!0}},pointerout:{EventType:"PointerEvent",defaultInit:{bubbles:!0,cancelable:!0,composed:!0}},pointerleave:{EventType:"PointerEvent",defaultInit:{bubbles:!1,cancelable:!1}},submit:{EventType:"Event",defaultInit:{bubbles:!0,cancelable:!0}}};function vre(n){return gre[n].EventType}const YUe=["MouseEvent","PointerEvent"];function XUe(n){return YUe.includes(vre(n))}function KUe(n){return vre(n)==="KeyboardEvent"}const ZUe={ClipboardEvent:[QUe],Event:[],FocusEvent:[N1,e3e],InputEvent:[N1,t3e],MouseEvent:[N1,eF,i$],PointerEvent:[N1,eF,i$,i3e],KeyboardEvent:[N1,eF,n3e]};function yre(n,e,t){const i=Ad(e),{EventType:r,defaultInit:s}=gre[n],a=new(JUe(i))[r](n,s);return ZUe[r].forEach(o=>o(a,t??{})),a}function JUe(n){var e;const t=(e=n.Event)!==null&&e!==void 0?e:class{};var i;const r=(i=n.AnimationEvent)!==null&&i!==void 0?i:class extends t{};var s;const a=(s=n.ClipboardEvent)!==null&&s!==void 0?s:class extends t{};var o;const l=(o=n.PopStateEvent)!==null&&o!==void 0?o:class extends t{};var c;const u=(c=n.ProgressEvent)!==null&&c!==void 0?c:class extends t{};var h;const d=(h=n.TransitionEvent)!==null&&h!==void 0?h:class extends t{};var f;const m=(f=n.UIEvent)!==null&&f!==void 0?f:class extends t{};var v;const _=(v=n.CompositionEvent)!==null&&v!==void 0?v:class extends m{};var y;const S=(y=n.FocusEvent)!==null&&y!==void 0?y:class extends m{};var T;const x=(T=n.InputEvent)!==null&&T!==void 0?T:class extends m{};var I;const R=(I=n.KeyboardEvent)!==null&&I!==void 0?I:class extends m{};var N;const L=(N=n.MouseEvent)!==null&&N!==void 0?N:class extends m{};var k;const z=(k=n.DragEvent)!==null&&k!==void 0?k:class extends L{};var Z;const H=(Z=n.PointerEvent)!==null&&Z!==void 0?Z:class extends L{};var q;const U=(q=n.TouchEvent)!==null&&q!==void 0?q:class extends m{};return{Event:t,AnimationEvent:r,ClipboardEvent:a,PopStateEvent:l,ProgressEvent:u,TransitionEvent:d,UIEvent:m,CompositionEvent:_,FocusEvent:S,InputEvent:x,KeyboardEvent:R,MouseEvent:L,DragEvent:z,PointerEvent:H,TouchEvent:U}}function h0(n,e){for(const[t,i]of Object.entries(e))Object.defineProperty(n,t,{get:()=>i??null})}function xa(n){return Number(n??0)}function QUe(n,{clipboardData:e}){h0(n,{clipboardData:e})}function e3e(n,{relatedTarget:e}){h0(n,{relatedTarget:e})}function t3e(n,{data:e,inputType:t,isComposing:i}){h0(n,{data:e,isComposing:!!i,inputType:String(t)})}function N1(n,{view:e,detail:t}){h0(n,{view:e,detail:xa(t??0)})}function eF(n,{altKey:e,ctrlKey:t,metaKey:i,shiftKey:r,modifierAltGraph:s,modifierCapsLock:a,modifierFn:o,modifierFnLock:l,modifierNumLock:c,modifierScrollLock:u,modifierSymbol:h,modifierSymbolLock:d}){h0(n,{altKey:!!e,ctrlKey:!!t,metaKey:!!i,shiftKey:!!r,getModifierState(f){return!!{Alt:e,AltGraph:s,CapsLock:a,Control:t,Fn:o,FnLock:l,Meta:i,NumLock:c,ScrollLock:u,Shift:r,Symbol:h,SymbolLock:d}[f]}})}function n3e(n,{key:e,code:t,location:i,repeat:r,isComposing:s,charCode:a}){h0(n,{key:String(e),code:String(t),location:xa(i),repeat:!!r,isComposing:!!s,charCode:a})}function i$(n,{x:e,y:t,screenX:i,screenY:r,clientX:s=e,clientY:a=t,button:o,buttons:l,relatedTarget:c,offsetX:u,offsetY:h,pageX:d,pageY:f}){h0(n,{screenX:xa(i),screenY:xa(r),clientX:xa(s),x:xa(s),clientY:xa(a),y:xa(a),button:xa(o),buttons:xa(l),relatedTarget:c,offsetX:xa(u),offsetY:xa(h),pageX:xa(d),pageY:xa(f)})}function i3e(n,{pointerId:e,width:t,height:i,pressure:r,tangentialPressure:s,tiltX:a,tiltY:o,twist:l,pointerType:c,isPrimary:u}){h0(n,{pointerId:xa(e),width:xa(t??1),height:xa(i??1),pressure:xa(r),tangentialPressure:xa(s),tiltX:xa(a),tiltY:xa(o),twist:xa(l),pointerType:String(c),isPrimary:!!u})}function r3e(n,e,t,i=!1){(XUe(e)||KUe(e))&&(t={...t,...this.system.getUIEventModifiers()});const r=yre(e,n,t);return _re.call(this,n,r,i)}function _re(n,e,t=!1){var i;const r=e.type,s=t?()=>{}:(i=$y[r])===null||i===void 0?void 0:i.call($y,e,n,this);if(s){e.preventDefault();let a=!1;return Object.defineProperty(e,"defaultPrevented",{get:()=>a}),Object.defineProperty(e,"preventDefault",{value:()=>{a=e.cancelable}}),jT(()=>n.dispatchEvent(e)),a||s(),!a}return jT(()=>n.dispatchEvent(e))}function R_(n,e,t){const i=yre(e,n,t);jT(()=>n.dispatchEvent(i))}const r$=Symbol("patched focus/blur methods");function bre(n){if(n.prototype[r$])return;const{focus:e,blur:t}=n.prototype;Object.defineProperties(n.prototype,{focus:{configurable:!0,get:()=>r},blur:{configurable:!0,get:()=>s},[r$]:{configurable:!0,get:()=>({focus:e,blur:t})}});let i;function r(a){if(this.ownerDocument.visibilityState!=="hidden")return e.call(this,a);const o=s$(this.ownerDocument);if(o===this)return;const l=Symbol("focus call");i=l,o&&(t.call(o),R_(o,"blur",{relatedTarget:this}),R_(o,"focusout",{relatedTarget:i===l?this:null})),i===l&&(e.call(this,a),R_(this,"focus",{relatedTarget:o})),i===l&&R_(this,"focusin",{relatedTarget:o})}function s(){if(this.ownerDocument.visibilityState!=="hidden")return t.call(this);const a=s$(this.ownerDocument);if(a!==this)return;i=Symbol("blur call"),t.call(this),R_(a,"blur",{relatedTarget:null}),R_(a,"focusout",{relatedTarget:null})}}function s$(n){const e=NA(n);return(e==null?void 0:e.tagName)==="BODY"?null:e}const tF=Symbol("Interceptor for programmatical calls");function FE(n,e,t){const i=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=Object.getOwnPropertyDescriptor(n,e),s=i!=null&&i.set?"set":"value";if(typeof(i==null?void 0:i[s])!="function"||i[s][tF])throw new Error(`Element ${n.tagName} does not implement "${String(e)}".`);function a(...o){const{applyNative:l=!1,realArgs:c,then:u}=t.call(this,...o),h=(!l&&r||i)[s];s==="set"?h.call(this,c):h.call(this,...c),u==null||u()}a[tF]=tF,Object.defineProperty(n,e,{...r??i,[s]:a})}function s3e(n){FE(n,"value",function(t){const i=_Ue(t);return i&&NUe(this),{applyNative:!!i,realArgs:a3e(this,t),then:i?void 0:()=>PUe(this,String(t))}})}function a3e(n,e){return ji(n,"input",{type:"number"})&&String(e)!==""&&!Number.isNaN(Number(e))?String(Number(e)):String(e)}function o3e(n){FE(n,"setSelectionRange",function(t,...i){const r=bUe(t);return{applyNative:!!r,realArgs:[Number(t),...i],then:()=>r?void 0:GO(n)}}),FE(n,"selectionStart",function(t){return{realArgs:t,then:()=>GO(n)}}),FE(n,"selectionEnd",function(t){return{realArgs:t,then:()=>GO(n)}}),FE(n,"select",function(){return{realArgs:[],then:()=>TUe(n,{anchorOffset:0,focusOffset:qp(n).length})}})}function l3e(n){FE(n,"setRangeText",function(...t){return{realArgs:t,then:()=>{Rj(n),GO(n)}}})}const eT=Symbol("Node prepared with document state workarounds");function Sre(n){n[eT]||(n.addEventListener("focus",e=>{const t=e.target;a$(t)},{capture:!0,passive:!0}),n.activeElement&&a$(n.activeElement),n.addEventListener("blur",e=>{const t=e.target,i=EUe(t);i!==void 0&&(t.value!==i&&R_(t,"change"),cre(t))},{capture:!0,passive:!0}),n[eT]=eT)}function a$(n){n[eT]||(ji(n,["input","textarea"])&&(s3e(n),o3e(n),l3e(n)),n[eT]=eT)}function c3e(n){return u3e(n)?n:n.ownerDocument}function u3e(n){return n.nodeType===9}var dh=function(n){return n[n.Trigger=2]="Trigger",n[n.Call=1]="Call",n}({});function J1(n,e){n.levelRefs[e]={}}function GR(n,e){return n.levelRefs[e]}function GT(n){const e=n.delay;if(typeof e=="number")return Promise.all([new Promise(t=>globalThis.setTimeout(()=>t(),e)),n.advanceTimers(e)])}var $O=function(n){return n[n.EachTrigger=4]="EachTrigger",n[n.EachApiCall=2]="EachApiCall",n[n.EachTarget=1]="EachTarget",n[n.Never=0]="Never",n}({});function y_(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var op=function(n){return n[n.STANDARD=0]="STANDARD",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n[n.NUMPAD=3]="NUMPAD",n}({});const h3e=["Alt","AltGraph","Control","Fn","Meta","Shift","Symbol"];function o$(n){return h3e.includes(n)}const d3e=["CapsLock","FnLock","NumLock","ScrollLock","SymbolLock"];function l$(n){return d3e.includes(n)}class f3e{isKeyPressed(e){return this.pressed.has(String(e.code))}getPressedKeys(){return this.pressed.values().map(e=>e.keyDef)}async keydown(e,t){const i=String(t.key),r=String(t.code),s=DB(e.config.document);this.setKeydownTarget(s),this.pressed.add(r,t),o$(i)&&(this.modifiers[i]=!0);const a=e.dispatchUIEvent(s,"keydown",{key:i,code:r});l$(i)&&!this.modifiers[i]&&(this.modifiers[i]=!0,this.modifierLockStart[i]=!0),a&&this.pressed.setUnprevented(r),a&&this.hasKeyPress(i)&&e.dispatchUIEvent(DB(e.config.document),"keypress",{key:i,code:r,charCode:t.key==="Enter"?13:String(t.key).charCodeAt(0)})}async keyup(e,t){const i=String(t.key),r=String(t.code),s=this.pressed.isUnprevented(r);this.pressed.delete(r),o$(i)&&!this.pressed.values().find(a=>a.keyDef.key===i)&&(this.modifiers[i]=!1),e.dispatchUIEvent(DB(e.config.document),"keyup",{key:i,code:r},!s),l$(i)&&this.modifiers[i]&&(this.modifierLockStart[i]?this.modifierLockStart[i]=!1:this.modifiers[i]=!1)}setKeydownTarget(e){e!==this.lastKeydownTarget&&(this.carryChar=""),this.lastKeydownTarget=e}hasKeyPress(e){return(e.length===1||e==="Enter")&&!this.modifiers.Control&&!this.modifiers.Alt}constructor(e){y_(this,"system",void 0),y_(this,"modifiers",{Alt:!1,AltGraph:!1,CapsLock:!1,Control:!1,Fn:!1,FnLock:!1,Meta:!1,NumLock:!1,ScrollLock:!1,Shift:!1,Symbol:!1,SymbolLock:!1}),y_(this,"pressed",new class{add(t,i){var r,s,a;(a=(r=this.registry)[s=t])!==null&&a!==void 0||(r[s]={keyDef:i,unpreventedDefault:!1})}has(t){return!!this.registry[t]}setUnprevented(t){const i=this.registry[t];i&&(i.unpreventedDefault=!0)}isUnprevented(t){var i;return!!(!((i=this.registry[t])===null||i===void 0)&&i.unpreventedDefault)}delete(t){delete this.registry[t]}values(){return Object.values(this.registry)}constructor(){y_(this,"registry",{})}}),y_(this,"carryChar",""),y_(this,"lastKeydownTarget",void 0),y_(this,"modifierLockStart",{}),this.system=e}}const p3e=[..."0123456789".split("").map(n=>({code:`Digit${n}`,key:n})),...")!@#$%^&*(".split("").map((n,e)=>({code:`Digit${e}`,key:n,shiftKey:!0})),..."abcdefghijklmnopqrstuvwxyz".split("").map(n=>({code:`Key${n.toUpperCase()}`,key:n})),..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(n=>({code:`Key${n}`,key:n,shiftKey:!0})),{code:"BracketLeft",key:"["},{code:"BracketLeft",key:"{",shiftKey:!0},{code:"BracketRight",key:"]"},{code:"BracketRight",key:"}",shiftKey:!0},{code:"Space",key:" "},{code:"AltLeft",key:"Alt",location:op.LEFT},{code:"AltRight",key:"Alt",location:op.RIGHT},{code:"ShiftLeft",key:"Shift",location:op.LEFT},{code:"ShiftRight",key:"Shift",location:op.RIGHT},{code:"ControlLeft",key:"Control",location:op.LEFT},{code:"ControlRight",key:"Control",location:op.RIGHT},{code:"MetaLeft",key:"Meta",location:op.LEFT},{code:"MetaRight",key:"Meta",location:op.RIGHT},{code:"OSLeft",key:"OS",location:op.LEFT},{code:"OSRight",key:"OS",location:op.RIGHT},{code:"ContextMenu",key:"ContextMenu"},{code:"Tab",key:"Tab"},{code:"CapsLock",key:"CapsLock"},{code:"Backspace",key:"Backspace"},{code:"Enter",key:"Enter"},{code:"Escape",key:"Escape"},{code:"ArrowUp",key:"ArrowUp"},{code:"ArrowDown",key:"ArrowDown"},{code:"ArrowLeft",key:"ArrowLeft"},{code:"ArrowRight",key:"ArrowRight"},{code:"Home",key:"Home"},{code:"End",key:"End"},{code:"Delete",key:"Delete"},{code:"PageUp",key:"PageUp"},{code:"PageDown",key:"PageDown"},{code:"Fn",key:"Fn"},{code:"Symbol",key:"Symbol"},{code:"AltRight",key:"AltGraph"}],m3e=[{name:"MouseLeft",pointerType:"mouse",button:"primary"},{name:"MouseRight",pointerType:"mouse",button:"secondary"},{name:"MouseMiddle",pointerType:"mouse",button:"auxiliary"},{name:"TouchA",pointerType:"touch"},{name:"TouchB",pointerType:"touch"},{name:"TouchC",pointerType:"touch"}];function g3e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class Ere{getButtons(){let e=0;for(const t of Object.keys(this.pressed))e|=2**Number(t);return e}down(e){const t=Yz(e.button);if(t in this.pressed){this.pressed[t].push(e);return}return this.pressed[t]=[e],t}up(e){const t=Yz(e.button);if(t in this.pressed&&(this.pressed[t]=this.pressed[t].filter(i=>i.name!==e.name),this.pressed[t].length===0))return delete this.pressed[t],t}constructor(){g3e(this,"pressed",{})}}const c$={primary:0,secondary:1,auxiliary:2,back:3,X1:3,forward:4,X2:4};function Yz(n=0){return n in c$?c$[n]:Number(n)}const u$={1:2,2:1};function Xz(n){return n=Yz(n),n in u$?u$[n]:n}function v3e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class y3e{get countPressed(){return this.pressedKeys.size}isPressed(e){return this.pressedKeys.has(e.name)}addPressed(e){return this.pressedKeys.add(e.name)}removePressed(e){return this.pressedKeys.delete(e.name)}constructor(){v3e(this,"pressedKeys",new Set)}}function Pw(n,e){const t=[];for(let s=n;s;s=s.parentElement)t.push(s);const i=[];for(let s=e;s;s=s.parentElement)i.push(s);let r=0;for(;!(r>=t.length||r>=i.length||t[t.length-1-r]!==i[i.length-1-r]);r++);return[t.slice(0,t.length-r),i.slice(0,i.length-r),i.slice(i.length-r)]}function Kz({target:n,node:e,offset:t}){return Gp(n)?{node:n,offset:t??qp(n).length}:e?{node:e,offset:t??(e.nodeType===3?e.nodeValue.length:e.childNodes.length)}:Tre(n,t)}function Tre(n,e,t=!0){let i=e===void 0?n.childNodes.length-1:0;const r=e===void 0?-1:1;for(;e===void 0?i>=(t?Math.max(n.childNodes.length-1,0):0):i<=n.childNodes.length;){if(e&&i===n.childNodes.length)throw new Error("The given offset is out of bounds.");const s=n.childNodes.item(i),a=String(s.textContent);if(a.length)if(e!==void 0&&a.length<e)e-=a.length;else{if(s.nodeType===1)return Tre(s,e,!1);if(s.nodeType===3)return{node:s,offset:e??s.nodeValue.length}}i+=r}return{node:n,offset:n.childNodes.length}}function _3e({document:n,target:e,clickCount:t,node:i,offset:r}){if($1e(e))return;const s=Gp(e),a=String(s?qp(e):e.textContent),[o,l]=i?[r,r]:b3e(a,r,t);if(s)return Dx(e,{anchorOffset:o??a.length,focusOffset:l??a.length}),{node:e,start:o??0,end:l??a.length};{const{node:c,offset:u}=Kz({target:e,node:i,offset:o}),{node:h,offset:d}=Kz({target:e,node:i,offset:l}),f=e.ownerDocument.createRange();try{f.setStart(c,u),f.setEnd(h,d)}catch{throw new Error("The given offset is out of bounds.")}const m=n.getSelection();return m==null||m.removeAllRanges(),m==null||m.addRange(f.cloneRange()),f}}function b3e(n,e,t){if(t%3===1||n.length===0)return[e,e];const i=e??n.length;return t%3===2?[i-n.substr(0,e).match(/(\w+|\s+|\W)?$/)[0].length,e===void 0?e:e+n.substr(e).match(/^(\w+|\s+|\W)?/)[0].length]:[i-n.substr(0,e).match(/[^\r\n]*$/)[0].length,e===void 0?e:e+n.substr(e).match(/^[^\r\n]*/)[0].length]}function S3e(n,{document:e,target:t,node:i,offset:r}){const s=Kz({target:t,node:i,offset:r});if("node"in n){if(s.node===n.node){const a=s.offset<n.start?n.end:n.start,o=s.offset>n.end||s.offset<n.start?s.offset:n.end;Dx(n.node,{anchorOffset:a,focusOffset:o})}}else{const a=n.cloneRange(),o=a.comparePoint(s.node,s.offset);o<0?a.setStart(s.node,s.offset):o>0&&a.setEnd(s.node,s.offset);const l=e.getSelection();l==null||l.removeAllRanges(),l==null||l.addRange(a.cloneRange())}}function xre(n,e){var t,i,r,s,a,o,l,c,u,h,d,f,m,v,_,y,S,T,x,I,R,N,L,k;return n.target!==e.target||((t=n.coords)===null||t===void 0?void 0:t.x)!==((i=e.coords)===null||i===void 0?void 0:i.x)||((r=n.coords)===null||r===void 0?void 0:r.y)!==((s=e.coords)===null||s===void 0?void 0:s.y)||((a=n.coords)===null||a===void 0?void 0:a.clientX)!==((o=e.coords)===null||o===void 0?void 0:o.clientX)||((l=n.coords)===null||l===void 0?void 0:l.clientY)!==((c=e.coords)===null||c===void 0?void 0:c.clientY)||((u=n.coords)===null||u===void 0?void 0:u.offsetX)!==((h=e.coords)===null||h===void 0?void 0:h.offsetX)||((d=n.coords)===null||d===void 0?void 0:d.offsetY)!==((f=e.coords)===null||f===void 0?void 0:f.offsetY)||((m=n.coords)===null||m===void 0?void 0:m.pageX)!==((v=e.coords)===null||v===void 0?void 0:v.pageX)||((_=n.coords)===null||_===void 0?void 0:_.pageY)!==((y=e.coords)===null||y===void 0?void 0:y.pageY)||((S=n.coords)===null||S===void 0?void 0:S.screenX)!==((T=e.coords)===null||T===void 0?void 0:T.screenX)||((x=n.coords)===null||x===void 0?void 0:x.screenY)!==((I=e.coords)===null||I===void 0?void 0:I.screenY)||((R=n.caret)===null||R===void 0?void 0:R.node)!==((N=e.caret)===null||N===void 0?void 0:N.node)||((L=n.caret)===null||L===void 0?void 0:L.offset)!==((k=e.caret)===null||k===void 0?void 0:k.offset)}function __(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class E3e{move(e,t,i){const r=this.position,s=this.getTarget(e);if(this.position=t,!xre(r,t))return;const a=this.getTarget(e),o=this.getEventInit("mousemove"),[l,c]=Pw(s,a);return{leave:()=>{s!==a&&(e.dispatchUIEvent(s,"mouseout",o),l.forEach(u=>e.dispatchUIEvent(u,"mouseleave",o)))},enter:()=>{s!==a&&(e.dispatchUIEvent(a,"mouseover",o),c.forEach(u=>e.dispatchUIEvent(u,"mouseenter",o)))},move:()=>{i||(e.dispatchUIEvent(a,"mousemove",o),this.modifySelecting(e))}}}down(e,t,i){const r=this.buttons.down(t);if(r===void 0)return;const s=this.getTarget(e);this.buttonDownTarget[r]=s;const a=this.getEventInit("mousedown",t.button),o=Ug(s);!i&&(o||e.dispatchUIEvent(s,"mousedown",a))&&(this.startSelecting(e,a.detail),qy(s)),!o&&Xz(t.button)===2&&e.dispatchUIEvent(s,"contextmenu",this.getEventInit("contextmenu",t.button))}up(e,t,i){const r=this.buttons.up(t);if(r===void 0)return;const s=this.getTarget(e);if(!Ug(s)){if(!i){const o=this.getEventInit("mouseup",t.button);e.dispatchUIEvent(s,"mouseup",o),this.endSelecting()}const a=Pw(this.buttonDownTarget[r],s)[2][0];if(a){const o=this.getEventInit("click",t.button);o.detail&&(e.dispatchUIEvent(a,o.button===0?"click":"auxclick",o),o.button===0&&o.detail===2&&e.dispatchUIEvent(a,"dblclick",{...this.getEventInit("dblclick",t.button),detail:o.detail}))}}}resetClickCount(){this.clickCount.reset()}getEventInit(e,t){const i={...this.position.coords};return i.button=Xz(t),i.buttons=this.buttons.getButtons(),e==="mousedown"?i.detail=this.clickCount.getOnDown(i.button):e==="mouseup"?i.detail=this.clickCount.getOnUp(i.button):(e==="click"||e==="auxclick")&&(i.detail=this.clickCount.incOnClick(i.button)),i}getTarget(e){var t;return(t=this.position.target)!==null&&t!==void 0?t:e.config.document.body}startSelecting(e,t){var i,r;this.selecting=_3e({document:e.config.document,target:this.getTarget(e),node:(i=this.position.caret)===null||i===void 0?void 0:i.node,offset:(r=this.position.caret)===null||r===void 0?void 0:r.offset,clickCount:t})}modifySelecting(e){var t,i;this.selecting&&S3e(this.selecting,{document:e.config.document,target:this.getTarget(e),node:(t=this.position.caret)===null||t===void 0?void 0:t.node,offset:(i=this.position.caret)===null||i===void 0?void 0:i.offset})}endSelecting(){this.selecting=void 0}constructor(){__(this,"position",{}),__(this,"buttons",new Ere),__(this,"selecting",void 0),__(this,"buttonDownTarget",{}),__(this,"clickCount",new class{incOnClick(e){const t=this.down[e]===void 0?void 0:Number(this.down[e])+1;return this.count=this.count[e]===void 0?{}:{[e]:Number(this.count[e])+1},t}getOnDown(e){var t;this.down={[e]:(t=this.count[e])!==null&&t!==void 0?t:0};var i;return this.count={[e]:(i=this.count[e])!==null&&i!==void 0?i:0},Number(this.count[e])+1}getOnUp(e){return this.down[e]===void 0?void 0:Number(this.down[e])+1}reset(){this.count={}}constructor(){__(this,"down",{}),__(this,"count",{})}})}}function aP(n,e){var t;return((t=wre(n,e))===null||t===void 0?void 0:t.pointerEvents)!=="none"}function T3e(n){const e=Ad(n);for(let t=n,i=[];t!=null&&t.ownerDocument;t=t.parentElement){i.push(t);const r=e.getComputedStyle(t).pointerEvents;if(r&&!["inherit","unset"].includes(r))return{pointerEvents:r,tree:i}}}const h$=Symbol("Last check for pointer-events");function wre(n,e){const t=e[h$];if(!(n.config.pointerEventsCheck!==$O.Never&&(!t||d$(n.config.pointerEventsCheck,$O.EachApiCall)&&t[dh.Call]!==GR(n,dh.Call)||d$(n.config.pointerEventsCheck,$O.EachTrigger)&&t[dh.Trigger]!==GR(n,dh.Trigger))))return t==null?void 0:t.result;const r=T3e(e);return e[h$]={[dh.Call]:GR(n,dh.Call),[dh.Trigger]:GR(n,dh.Trigger),result:r},r}function Q1(n,e){const t=wre(n,e);if((t==null?void 0:t.pointerEvents)==="none")throw new Error([`Unable to perform pointer interaction as the element ${t.tree.length>1?"inherits":"has"} \`pointer-events: none\`:`,"",x3e(t.tree)].join(`
`))}function x3e(n){return n.reverse().map((e,t)=>["".padEnd(t),e.tagName,e.id&&`#${e.id}`,e.hasAttribute("data-testid")&&`(testId=${e.getAttribute("data-testid")})`,w3e(e),n.length>1&&t===0&&"  <-- This element declared `pointer-events: none`",n.length>1&&t===n.length-1&&"  <-- Asserted pointer events here"].filter(Boolean).join("")).join(`
`)}function w3e(n){var e;let t;if(n.hasAttribute("aria-label"))t=n.getAttribute("aria-label");else if(n.hasAttribute("aria-labelledby")){var i,r;t=(r=n.ownerDocument.getElementById(n.getAttribute("aria-labelledby")))===null||r===void 0||(i=r.textContent)===null||i===void 0?void 0:i.trim()}else if(ji(n,["button","input","meter","output","progress","select","textarea"])&&(!((e=n.labels)===null||e===void 0)&&e.length))t=Array.from(n.labels).map(a=>{var o;return(o=a.textContent)===null||o===void 0?void 0:o.trim()}).join("|");else if(ji(n,"button")){var s;t=(s=n.textContent)===null||s===void 0?void 0:s.trim()}return t=t==null?void 0:t.replace(/\n/g,"  "),Number(t==null?void 0:t.length)>30&&(t=`${t==null?void 0:t.substring(0,29)}`),t?`(label=${t})`:""}function d$(n,e){return(n&e)>0}function ng(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class C3e{init(e){const t=this.getTarget(e),[,i]=Pw(null,t),r=this.getEventInit();return Q1(e,t),e.dispatchUIEvent(t,"pointerover",r),i.forEach(s=>e.dispatchUIEvent(s,"pointerenter",r)),this}move(e,t){const i=this.position,r=this.getTarget(e);if(this.position=t,!xre(i,t))return;const s=this.getTarget(e),a=this.getEventInit(-1),[o,l]=Pw(r,s);return{leave:()=>{aP(e,r)&&r!==s&&(e.dispatchUIEvent(r,"pointerout",a),o.forEach(c=>e.dispatchUIEvent(c,"pointerleave",a)))},enter:()=>{Q1(e,s),r!==s&&(e.dispatchUIEvent(s,"pointerover",a),l.forEach(c=>e.dispatchUIEvent(c,"pointerenter",a)))},move:()=>{e.dispatchUIEvent(s,"pointermove",a)}}}down(e,t=0){if(this.isDown)return;const i=this.getTarget(e);Q1(e,i),this.isDown=!0,this.isPrevented=!e.dispatchUIEvent(i,"pointerdown",this.getEventInit(t))}up(e,t=0){if(!this.isDown)return;const i=this.getTarget(e);Q1(e,i),this.isPrevented=!1,this.isDown=!1,e.dispatchUIEvent(i,"pointerup",this.getEventInit(t))}release(e){const t=this.getTarget(e),[i]=Pw(t,null),r=this.getEventInit();aP(e,t)&&(e.dispatchUIEvent(t,"pointerout",r),i.forEach(s=>e.dispatchUIEvent(s,"pointerleave",r))),this.isCancelled=!0}getTarget(e){var t;return(t=this.position.target)!==null&&t!==void 0?t:e.config.document.body}getEventInit(e){return{...this.position.coords,pointerId:this.pointerId,pointerType:this.pointerType,isPrimary:this.isPrimary,button:Xz(e),buttons:this.buttons.getButtons()}}constructor({pointerId:e,pointerType:t,isPrimary:i},r){ng(this,"pointerId",void 0),ng(this,"pointerType",void 0),ng(this,"isPrimary",void 0),ng(this,"buttons",void 0),ng(this,"isMultitouch",!1),ng(this,"isCancelled",!1),ng(this,"isDown",!1),ng(this,"isPrevented",!1),ng(this,"position",{}),this.pointerId=e,this.pointerType=t,this.isPrimary=i,this.isMultitouch=!i,this.buttons=r}}function Vv(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class A3e{isKeyPressed(e){return this.devices.get(e.pointerType).isPressed(e)}async press(e,t,i){this.devices.get(t.pointerType).addPressed(t),this.buttons.down(t);const r=this.getPointerName(t),s=t.pointerType==="touch"?this.pointers.new(r,t.pointerType,this.buttons):this.pointers.get(r);s.position=i,s.pointerType!=="touch"&&(this.mouse.position=i),s.pointerType==="touch"&&s.init(e),s.down(e,t.button),s.pointerType!=="touch"&&this.mouse.down(e,t,s.isPrevented)}async move(e,t,i){const r=this.pointers.get(t),s=r.move(e,i),a=r.pointerType==="touch"?void 0:this.mouse.move(e,i,r.isPrevented);s==null||s.leave(),a==null||a.leave(),s==null||s.enter(),a==null||a.enter(),s==null||s.move(),a==null||a.move()}async release(e,t,i){const r=this.devices.get(t.pointerType);r.removePressed(t),this.buttons.up(t);const s=this.pointers.get(this.getPointerName(t)),a=s.isPrevented;if(s.position=i,s.pointerType!=="touch"&&(this.mouse.position=i),r.countPressed===0&&s.up(e,t.button),s.pointerType==="touch"&&s.release(e),s.pointerType==="touch"&&!s.isMultitouch){const o=this.mouse.move(e,i,a);o==null||o.leave(),o==null||o.enter(),o==null||o.move(),this.mouse.down(e,t,a)}if(!s.isMultitouch){const o=this.mouse.move(e,i,a);o==null||o.leave(),o==null||o.enter(),o==null||o.move(),this.mouse.up(e,t,a)}}getPointerName(e){return e.pointerType==="touch"?e.name:e.pointerType}getPreviousPosition(e){return this.pointers.has(e)?this.pointers.get(e).position:void 0}resetClickCount(){this.mouse.resetClickCount()}getMouseTarget(e){var t;return(t=this.mouse.position.target)!==null&&t!==void 0?t:e.config.document.body}setMousePosition(e){this.mouse.position=e,this.pointers.get("mouse").position=e}constructor(e){Vv(this,"system",void 0),Vv(this,"mouse",void 0),Vv(this,"buttons",void 0),Vv(this,"devices",new class{get(t){var i,r,s;return(s=(i=this.registry)[r=t])!==null&&s!==void 0?s:i[r]=new y3e}constructor(){Vv(this,"registry",{})}}),Vv(this,"pointers",new class{new(t,i,r){const s=i!=="touch"||!Object.values(this.registry).some(a=>a.pointerType==="touch"&&!a.isCancelled);return s||Object.values(this.registry).forEach(a=>{a.pointerType===i&&!a.isCancelled&&(a.isMultitouch=!0)}),this.registry[t]=new C3e({pointerId:this.nextId++,pointerType:i,isPrimary:s},r),this.registry[t]}get(t){if(!this.has(t))throw new Error(`Trying to access pointer "${t}" which does not exist.`);return this.registry[t]}has(t){return t in this.registry}constructor(){Vv(this,"registry",{}),Vv(this,"nextId",1)}}),this.system=e,this.buttons=new Ere,this.mouse=new E3e,this.pointers.new("mouse","mouse",this.buttons)}}function f$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class Cre{getUIEventModifiers(){return{altKey:this.keyboard.modifiers.Alt,ctrlKey:this.keyboard.modifiers.Control,metaKey:this.keyboard.modifiers.Meta,shiftKey:this.keyboard.modifiers.Shift,modifierAltGraph:this.keyboard.modifiers.AltGraph,modifierCapsLock:this.keyboard.modifiers.CapsLock,modifierFn:this.keyboard.modifiers.Fn,modifierFnLock:this.keyboard.modifiers.FnLock,modifierNumLock:this.keyboard.modifiers.NumLock,modifierScrollLock:this.keyboard.modifiers.ScrollLock,modifierSymbol:this.keyboard.modifiers.Symbol,modifierSymbolLock:this.keyboard.modifiers.SymbolLock}}constructor(){f$(this,"keyboard",new f3e(this)),f$(this,"pointer",new A3e(this))}}async function M3e(n){const e=[];return this.config.skipHover||e.push({target:n}),e.push({keys:"[MouseLeft]",target:n}),this.pointer(e)}async function R3e(n){return this.pointer([{target:n},"[MouseLeft][MouseLeft]"])}async function O3e(n){return this.pointer([{target:n},"[MouseLeft][MouseLeft][MouseLeft]"])}async function I3e(n){return this.pointer({target:n})}async function N3e(n){return Q1(this,this.system.pointer.getMouseTarget(this)),this.pointer({target:n.ownerDocument.body})}async function P3e({shift:n}={}){return this.keyboard(n===!0?"{Shift>}{Tab}{/Shift}":n===!1?"[/ShiftLeft][/ShiftRight]{Tab}":"{Tab}")}var Ij=function(n){return n["{"]="}",n["["]="]",n}(Ij||{});function Are(n,e){let t=0;const i=n[t]in Ij?n[t]:"";t+=i.length;const s=new RegExp(`^\\${i}{2}`).test(n)?"":i;return{type:s,...s===""?D3e(n,t,e):k3e(n,t,s,e)}}function D3e(n,e,t){const i=n[e];return Mre(i,n,e,t),e+=i.length,{consumedLength:e,descriptor:i,releasePrevious:!1,releaseSelf:!0,repeat:1}}function k3e(n,e,t,i){var r,s;const a=n[e]==="/"?"/":"";e+=a.length;const o=t==="{"&&n[e]==="\\";e+=Number(o);const l=o?n[e]:(r=n.slice(e).match(t==="{"?/^\w+|^[^}>/]/:/^\w+/))===null||r===void 0?void 0:r[0];Mre(l,n,e,i),e+=l.length;var c;const u=(c=(s=n.slice(e).match(/^>\d+/))===null||s===void 0?void 0:s[0])!==null&&c!==void 0?c:"";e+=u.length;const h=n[e]==="/"||!u&&n[e]===">"?n[e]:"";e+=h.length;const d=Ij[t],f=n[e]===d?d:"";if(!f)throw new Error(Rre([!u&&"repeat modifier",!h&&"release modifier",`"${d}"`].filter(Boolean).join(" or "),n[e],n,i));return e+=f.length,{consumedLength:e,descriptor:l,releasePrevious:!!a,repeat:u?Math.max(Number(u.substr(1)),1):1,releaseSelf:L3e(h,u)}}function Mre(n,e,t,i){if(!n)throw new Error(Rre("key descriptor",e[t],e,i))}function L3e(n,e){if(n)return n==="/";if(e)return!1}function Rre(n,e,t,i){return`Expected ${n} but found "${e??""}" in "${t}"
    See ${i==="pointer"?"https://testing-library.com/docs/user-event/pointer#pressing-a-button-or-touching-the-screen":"https://testing-library.com/docs/user-event/keyboard"}
    for more information about how userEvent parses your input.`}function U3e(n,e){const t=[];do{const{type:r,descriptor:s,consumedLength:a,releasePrevious:o,releaseSelf:l=!0,repeat:c}=Are(e,"keyboard");var i;const u=(i=n.find(h=>{if(r==="["){var d;return((d=h.code)===null||d===void 0?void 0:d.toLowerCase())===s.toLowerCase()}else if(r==="{"){var f;return((f=h.key)===null||f===void 0?void 0:f.toLowerCase())===s.toLowerCase()}return h.key===s}))!==null&&i!==void 0?i:{key:"Unknown",code:"Unknown",[r==="["?"code":"key"]:s};t.push({keyDef:u,releasePrevious:o,releaseSelf:l,repeat:c}),e=e.slice(a)}while(e);return t}async function B3e(n){const e=U3e(this.config.keyboardMap,n);for(let t=0;t<e.length;t++)await GT(this.config),await F3e(this,e[t])}async function F3e(n,{keyDef:e,releasePrevious:t,releaseSelf:i,repeat:r}){const{system:s}=n;if(s.keyboard.isKeyPressed(e)&&await s.keyboard.keyup(n,e),!t){for(let a=1;a<=r;a++)await s.keyboard.keydown(n,e),a<r&&await GT(n.config);i&&await s.keyboard.keyup(n,e)}}async function z3e(n){for(const e of n.system.keyboard.getPressedKeys())await n.system.keyboard.keyup(n,e)}function Ore(n){const e=Gp(n)?{"text/plain":j3e(n)}:{"text/plain":String(n.ownerDocument.getSelection())},t=fj(Ad(n));for(const i in e)e[i]&&t.setData(i,e[i]);return t}function j3e(n){const e=MC(n);return qp(n).substring(e.startOffset,e.endOffset)}async function H3e(){const n=this.config.document;var e;const t=(e=n.activeElement)!==null&&e!==void 0?e:n.body,i=Ore(t);if(i.items.length!==0)return this.dispatchUIEvent(t,"copy",{clipboardData:i})&&this.config.writeToClipboard&&await Cne(n,i),i}async function V3e(){const n=this.config.document;var e;const t=(e=n.activeElement)!==null&&e!==void 0?e:n.body,i=Ore(t);if(i.items.length!==0)return this.dispatchUIEvent(t,"cut",{clipboardData:i})&&this.config.writeToClipboard&&await Cne(t.ownerDocument,i),i}async function G3e(n){const e=this.config.document;var t;const i=(t=e.activeElement)!==null&&t!==void 0?t:e.body;var r;const s=(r=typeof n=="string"?q3e(e,n):n)!==null&&r!==void 0?r:await H1e(e).catch(()=>{throw new Error("`userEvent.paste()` without `clipboardData` requires the `ClipboardAPI` to be available.")});this.dispatchUIEvent(i,"paste",{clipboardData:s})}function q3e(n,e){const t=fj(Ad(n));return t.setData("text",e),t}function p$(n,e){const t=[];do{const{descriptor:i,consumedLength:r,releasePrevious:s,releaseSelf:a=!0}=Are(e,"pointer"),o=n.find(l=>l.name===i);o&&t.push({keyDef:o,releasePrevious:s,releaseSelf:a}),e=e.slice(r)}while(e);return t}async function $3e(n){const{pointerMap:e}=this.config,t=[];(Array.isArray(n)?n:[n]).forEach(i=>{typeof i=="string"?t.push(...p$(e,i)):"keys"in i?t.push(...p$(e,i.keys).map(r=>({...i,...r}))):t.push(i)});for(let i=0;i<t.length;i++)await GT(this.config),await W3e(this,t[i]);this.system.pointer.resetClickCount()}async function W3e(n,e){var t,i;const r="pointerName"in e&&e.pointerName?e.pointerName:"keyDef"in e?n.system.pointer.getPointerName(e.keyDef):"mouse",s=n.system.pointer.getPreviousPosition(r);var a,o,l,c;const u={target:(a=e.target)!==null&&a!==void 0?a:Y3e(n,s),coords:(o=e.coords)!==null&&o!==void 0?o:s==null?void 0:s.coords,caret:{node:(l=e.node)!==null&&l!==void 0?l:m$(e)||s==null||(t=s.caret)===null||t===void 0?void 0:t.node,offset:(c=e.offset)!==null&&c!==void 0?c:m$(e)||s==null||(i=s.caret)===null||i===void 0?void 0:i.offset}};"keyDef"in e?(n.system.pointer.isKeyPressed(e.keyDef)&&(J1(n,dh.Trigger),await n.system.pointer.release(n,e.keyDef,u)),e.releasePrevious||(J1(n,dh.Trigger),await n.system.pointer.press(n,e.keyDef,u),e.releaseSelf&&(J1(n,dh.Trigger),await n.system.pointer.release(n,e.keyDef,u)))):(J1(n,dh.Trigger),await n.system.pointer.move(n,r,u))}function m$(n){var e,t;return!!((t=(e=n.target)!==null&&e!==void 0?e:n.node)!==null&&t!==void 0?t:n.offset!==void 0)}function Y3e(n,e){if(!e)throw new Error("This pointer has no previous position. Provide a target property!");var t;return(t=e.target)!==null&&t!==void 0?t:n.config.document.body}async function X3e(n){if(!FT(n)||Ug(n))throw new Error("clear()` is only supported on editable elements.");if(qy(n),n.ownerDocument.activeElement!==n)throw new Error("The element to be cleared could not be focused.");if(mre(n),!GUe(n))throw new Error("The element content to be cleared could not be selected.");VT(this,n,"","deleteContentBackward")}async function K3e(n,e){return Ire.call(this,!0,n,e)}async function Z3e(n,e){return Ire.call(this,!1,n,e)}async function Ire(n,e,t){if(!n&&!e.multiple)throw Rr().getElementError("Unable to deselect an option in a non-multiple select. Use selectOptions to change the selection instead.",e);const i=Array.isArray(t)?t:[t],r=Array.from(e.querySelectorAll('option, [role="option"]')),s=i.map(o=>{if(typeof o!="string"&&r.includes(o))return o;{const l=r.find(c=>c.value===o||c.innerHTML===o);if(l)return l;throw Rr().getElementError(`Value "${String(o)}" not found in options`,e)}}).filter(o=>!Ug(o));if(Ug(e)||!s.length)return;const a=o=>{o.selected=n,this.dispatchUIEvent(e,"input",{bubbles:!0,cancelable:!1,composed:!0}),this.dispatchUIEvent(e,"change")};if(ji(e,"select"))if(e.multiple)for(const o of s){const l=this.config.pointerEventsCheck===0?!0:aP(this,o);l&&(this.dispatchUIEvent(o,"pointerover"),this.dispatchUIEvent(e,"pointerenter"),this.dispatchUIEvent(o,"mouseover"),this.dispatchUIEvent(e,"mouseenter"),this.dispatchUIEvent(o,"pointermove"),this.dispatchUIEvent(o,"mousemove"),this.dispatchUIEvent(o,"pointerdown"),this.dispatchUIEvent(o,"mousedown")),qy(e),l&&(this.dispatchUIEvent(o,"pointerup"),this.dispatchUIEvent(o,"mouseup")),a(o),l&&this.dispatchUIEvent(o,"click"),await GT(this.config)}else if(s.length===1){const o=this.config.pointerEventsCheck===0?!0:aP(this,e);o?await this.click(e):qy(e),a(s[0]),o&&(this.dispatchUIEvent(e,"pointerover"),this.dispatchUIEvent(e,"pointerenter"),this.dispatchUIEvent(e,"mouseover"),this.dispatchUIEvent(e,"mouseenter"),this.dispatchUIEvent(e,"pointerup"),this.dispatchUIEvent(e,"mouseup"),this.dispatchUIEvent(e,"click")),await GT(this.config)}else throw Rr().getElementError("Cannot select multiple options on a non-multiple select",e);else if(e.getAttribute("role")==="listbox")for(const o of s)await this.click(o),await this.unhover(o);else throw Rr().getElementError("Cannot select options on elements that are neither select nor listbox elements",e)}async function J3e(n,e,{skipClick:t=this.config.skipClick,skipAutoClose:i=this.config.skipAutoClose,initialSelectionStart:r,initialSelectionEnd:s}={}){n.disabled||(t||await this.click(n),r!==void 0&&Z1(n,r,s??r),await this.keyboard(e),i||await z3e(this))}const g$=Symbol("files and value properties are mocked");function nF(n,e,t){t?Object.defineProperty(n,e,t):delete n[e]}function Q3e(n,e){var t;(t=n[g$])===null||t===void 0||t.restore();const i=Object.getOwnPropertyDescriptor(n,"type"),r=Object.getOwnPropertyDescriptor(n,"value"),s=Object.getOwnPropertyDescriptor(n,"files");function a(){nF(n,"type",i),nF(n,"value",r),nF(n,"files",s)}n[g$]={restore:a},Object.defineProperties(n,{files:{configurable:!0,get:()=>e},value:{configurable:!0,get:()=>e.length?`C:\\fakepath\\${e[0].name}`:"",set(o){if(o==="")a();else{var l;r==null||(l=r.set)===null||l===void 0||l.call(n,o)}}},type:{configurable:!0,get:()=>"file",set(o){o!=="file"&&(a(),n.type=o)}}})}async function eBe(n,e){const t=ji(n,"label")?n.control:n;if(!t||!ji(t,"input",{type:"file"}))throw new TypeError(`The ${t===n?"given":"associated"} ${t==null?void 0:t.tagName} element does not accept file uploads`);if(Ug(n))return;const i=(Array.isArray(e)?e:[e]).filter(s=>!this.config.applyAccept||tBe(s,t.accept)).slice(0,t.multiple?void 0:1),r=()=>{var s;i.length===((s=t.files)===null||s===void 0?void 0:s.length)&&i.every((a,o)=>{var l;return a===((l=t.files)===null||l===void 0?void 0:l.item(o))})||(Q3e(t,dj(Ad(n),i)),this.dispatchUIEvent(t,"input"),this.dispatchUIEvent(t,"change"))};t.addEventListener("fileDialog",r),await this.click(n),t.removeEventListener("fileDialog",r)}function qR(n){return n.toLowerCase().replace(/(\.|\/)jpg\b/g,"$1jpeg")}function tBe(n,e){if(!e)return!0;const t=["audio/*","image/*","video/*"];return qR(e).trim().split(/\s*,\s*/).some(i=>i.startsWith(".")?qR(n.name).endsWith(i):t.includes(i)?qR(n.type).startsWith(i.replace("*","")):qR(n.type)===i)}const v$={click:M3e,dblClick:R3e,tripleClick:O3e,hover:I3e,unhover:N3e,tab:P3e,keyboard:B3e,copy:H3e,cut:V3e,paste:G3e,pointer:$3e,clear:X3e,deselectOptions:Z3e,selectOptions:K3e,type:J3e,upload:eBe};function nBe(n){return Rr().asyncWrapper(n)}const Nre={applyAccept:!0,autoModify:!0,delay:0,document:globalThis.document,keyboardMap:p3e,pointerMap:m3e,pointerEventsCheck:$O.EachApiCall,skipAutoClose:!1,skipClick:!1,skipHover:!1,writeToClipboard:!1,advanceTimers:()=>Promise.resolve()},iBe={...Nre,writeToClipboard:!0};function Pre(n={},e=iBe,t){const i=oBe(n,t,e);return{...e,...n,document:i}}function rBe(n={}){const e=Pre(n);Sre(e.document),bre(Ad(e.document).HTMLElement);var t;const i=(t=e.document.defaultView)!==null&&t!==void 0?t:globalThis.window;return F1e(i),Nj(e).api}function lc({keyboardState:n,pointerState:e,...t}={},i){const r=Pre(t,Nre,i);Sre(r.document),bre(Ad(r.document).HTMLElement);var s;const a=(s=e??n)!==null&&s!==void 0?s:new Cre;return{api:Nj(r,a).api,system:a}}function sBe(n){return Nj({...this.config,...n},this.system).api}function aBe(n,e){function t(...i){return J1(n,dh.Call),nBe(()=>e.apply(n,i).then(async r=>(await GT(n.config),r)))}return Object.defineProperty(t,"name",{get:()=>e.name}),t}function Nj(n,e=new Cre){const t={};return Object.assign(t,{config:n,dispatchEvent:_re.bind(t),dispatchUIEvent:r3e.bind(t),system:e,levelRefs:{},...v$}),{instance:t,api:{...Object.fromEntries(Object.entries(v$).map(([i,r])=>[i,aBe(t,r)])),setup:sBe.bind(t)}}}function oBe(n,e,t){var i,r;return(r=(i=n.document)!==null&&i!==void 0?i:e&&c3e(e))!==null&&r!==void 0?r:t.document}function lBe(n){return lc().api.clear(n)}function cBe(n,e={}){return lc(e,n).api.click(n)}function uBe(n={}){return lc(n).api.copy()}function hBe(n={}){return lc(n).api.cut()}function dBe(n,e={}){return lc(e).api.dblClick(n)}function fBe(n,e,t={}){return lc(t).api.deselectOptions(n,e)}function pBe(n,e={}){return lc(e).api.hover(n)}async function mBe(n,e={}){const{api:t,system:i}=lc(e);return t.keyboard(n).then(()=>i)}async function gBe(n,e={}){const{api:t,system:i}=lc(e);return t.pointer(n).then(()=>i)}function vBe(n,e){return lc(e).api.paste(n)}function yBe(n,e,t={}){return lc(t).api.selectOptions(n,e)}function _Be(n,e={}){return lc(e).api.tripleClick(n)}function bBe(n,e,t={}){return lc(t,n).api.type(n,e,t)}function SBe(n,e={}){const{api:t,system:i}=lc(e);return i.pointer.setMousePosition({target:n}),t.unhover(n)}function EBe(n,e,t={}){return lc(t).api.upload(n,e)}function TBe(n={}){return lc().api.tab(n)}const xBe=Object.freeze(Object.defineProperty({__proto__:null,clear:lBe,click:cBe,copy:uBe,cut:hBe,dblClick:dBe,deselectOptions:fBe,hover:pBe,keyboard:mBe,paste:vBe,pointer:gBe,selectOptions:yBe,tab:TBe,tripleClick:_Be,type:bBe,unhover:SBe,upload:EBe},Symbol.toStringTag,{value:"Module"})),tat={...xBe,setup:rBe};var Pj={};function wBe(n){if(!Array.isArray(n))throw new TypeError;var e=n.length-1,t=[];function i(r,s){for(var a=n[s],o=s===e,l=0;l<a.length;++l){var c=r.slice();c.push(a[l]),o?t.push(c):i(c,s+1)}}return n.length?i([],0):t.push([]),t}var CBe=wBe,Dj={exports:{}},Zz={exports:{}};(function(n,e){(function(t){e=t(),n.exports=e})(function(){var t=function(o){return o instanceof Function},i=function(o){var l=Array.prototype.slice.call(arguments,1);for(var c in l){var u=l[c];if(typeof u=="object")for(var h in u)o[h]=u[h]}return o},r={_isClassObject:!1},s=!1,a=function(){};return a._subClasses=[],a.prototype.init=function(){},a._extend=function(o,l,c){o===void 0&&(o={}),l===void 0&&(l={}),c===void 0&&(c={}),c=i({},r,c);var u=function(){s||(this._class=u,this.init instanceof Function&&this.init.apply(this,arguments))},h=this;s=!0;var d=new h;s=!1;var f=h.prototype;u.prototype=d,u.prototype.constructor=u,u._superClass=h,u._subClasses=[],h._subClasses.push(u),u._extend=h._extend,u._extends=function(I){return this._superClass==a?!1:I==this._superClass||I==a?!0:this._superClass._extends(I)};for(var m in o){var v=Object.getOwnPropertyDescriptor(o,m),_=v.value;if(_!==null&&typeof _=="object"&&_.descriptor)Object.defineProperty(d,m,_);else if(!("value"in v)&&("set"in v||"get"in v))Object.defineProperty(d,m,v);else{d[m]=_;var y=f[m];t(_)&&t(y)&&_!==y&&(_._super=y)}}if(!c._isClassObject){var S=h._members===void 0?a:h._members._class,T=i({},c,{_isClassObject:!0}),x=S._extend(l,{},T);x._instanceClass=u,u._members=new x}return u},a._convert=function(o,l){var c=o.prototype;return c.init=function(){var u=this._origin=a._construct(o,arguments);Object.keys(u).forEach(function(h){u.hasOwnProperty(h)&&Object.defineProperty(this,h,{get:function(){return u[h]}})},this)},a._extend(c,{},l)},a._construct=function(o,l){l===void 0&&(l=[]);var c=function(){return o.apply(this,l)};return c.prototype=o.prototype,new c},a._superDescriptor=function(o,l){if("_class"in o&&o instanceof o._class&&(o=o._class),"_extends"in o&&o._extends instanceof Function&&o._extends(this))return Object.getOwnPropertyDescriptor(o._superClass.prototype,l)},a})})(Zz,Zz.exports);var ABe=Zz.exports,MBe=ABe,tb=MBe._extend({init:function(n,e,t){n=n instanceof Array?n:[n],this._map={},this._list=[],this.callback=e,this.keyFields=n,this.isHashArray=!0,this.options=t||{ignoreDuplicates:!1},e&&e("construct")},addOne:function(n){var e=!1;for(var t in this.keyFields){t=this.keyFields[t];var i=this.objectAt(n,t);if(i)if(this.has(i)){if(this.options.ignoreDuplicates)return;if(this._map[i].indexOf(n)!=-1){e=!0;continue}this._map[i].push(n)}else this._map[i]=[n]}(!e||this._list.indexOf(n)==-1)&&this._list.push(n)},add:function(){for(var n=0;n<arguments.length;n++)this.addOne(arguments[n]);return this.callback&&this.callback("add",Array.prototype.slice.call(arguments,0)),this},addAll:function(n){if(n.length<100)this.add.apply(this,n);else for(var e=0;e<n.length;e++)this.add(n[e]);return this},addMap:function(n,e){return this._map[n]=e,this.callback&&this.callback("addMap",{key:n,obj:e}),this},intersection:function(n){var e=this;if(!n||!n.isHashArray)throw Error("Cannot HashArray.intersection() on a non-hasharray object. You passed in: ",n);var t=this.clone(null,!0),i=this.clone(null,!0).addAll(this.all.concat(n.all));return i.all.forEach(function(r){e.collides(r)&&n.collides(r)&&t.add(r)}),t},complement:function(n){if(!n||!n.isHashArray)throw Error("Cannot HashArray.complement() on a non-hasharray object. You passed in: ",n);var e=this.clone(null,!0);return this.all.forEach(function(t){n.collides(t)||e.add(t)}),e},get:function(n){if(this.has(n))return!(this._map[n]instanceof Array)||this._map[n].length!=1?this._map[n]:this._map[n][0]},getAll:function(n){if(n=n instanceof Array?n:[n],n[0]=="*")return this.all;var e=new tb(this.keyFields);for(var t in n)e.add.apply(e,this.getAsArray(n[t]));return e.all},getAsArray:function(n){return this._map[n]||[]},getUniqueRandomIntegers:function(n,e,t){var i=[],r={};for(n=Math.min(Math.max(t-e,1),n);i.length<n;){var s=Math.floor(e+Math.random()*(t+1));r[s]||(r[s]=!0,i.push(s))}return i},sample:function(n,e){var t=this.all,i=[];e&&(t=this.getAll(e));for(var r=this.getUniqueRandomIntegers(n,0,t.length-1),s=0;s<r.length;s++)i.push(t[r[s]]);return i},has:function(n){return this._map.hasOwnProperty(n)},collides:function(n){for(var e in this.keyFields)if(this.has(this.objectAt(n,this.keyFields[e])))return!0;return!1},hasMultiple:function(n){return this._map[n]instanceof Array},removeByKey:function(){for(var n=[],e=0;e<arguments.length;e++){var t=arguments[e],i=this._map[t].concat();if(i){n=n.concat(i);for(var r in i){var s=i[r];for(var a in this.keyFields){var o=this.objectAt(s,this.keyFields[a]);if(o&&this.has(o)){var a=this._map[o].indexOf(s);a!=-1&&this._map[o].splice(a,1),this._map[o].length==0&&delete this._map[o]}}this._list.splice(this._list.indexOf(s),1)}}delete this._map[t]}return this.callback&&this.callback("removeByKey",n),this},remove:function(){for(var n=0;n<arguments.length;n++){var e=arguments[n];for(var i in this.keyFields){var t=this.objectAt(e,this.keyFields[i]);if(t){var i=this._map[t].indexOf(e);if(i!=-1)this._map[t].splice(i,1);else throw new Error("HashArray: attempting to remove an object that was never added!"+t);this._map[t].length==0&&delete this._map[t]}}var i=this._list.indexOf(e);if(i!=-1)this._list.splice(i,1);else throw new Error("HashArray: attempting to remove an object that was never added!"+t)}return this.callback&&this.callback("remove",arguments),this},removeAll:function(){var n=this._list.concat();return this._map={},this._list=[],this.callback&&this.callback("remove",n),this},objectAt:function(n,e){if(typeof e=="string")return n[e];for(var t=e.concat();t.length&&n;)n=n[t.shift()];return n},forEach:function(n,e){n=n instanceof Array?n:[n];var t=this.getAll(n);return t.forEach(e),this},forEachDeep:function(n,e,t){n=n instanceof Array?n:[n];var i=this,r=this.getAll(n);return r.forEach(function(s){t(i.objectAt(s,e),s)}),this},clone:function(n,e){var t=new tb(this.keyFields.concat(),n||this.callback);return e||t.add.apply(t,this.all.concat()),t},sum:function(n,e,t){var i=this,r=0;return this.forEachDeep(n,e,function(s,a){t!==void 0&&(s*=i.objectAt(a,t)),r+=s}),r},average:function(n,e,t){var i=0,r=0,s=0,a=this;return t!==void 0&&this.forEachDeep(n,t,function(o){s+=o}),this.forEachDeep(n,e,function(o,l){t!==void 0&&(o*=a.objectAt(l,t)/s),i+=o,r++}),t!==void 0?i:i/r},filter:function(n,e){var t=this,i=typeof e=="function"?e:s,r=new tb(this.keyFields);return r.addAll(this.getAll(n).filter(i)),r;function s(a){var o=t.objectAt(a,e);return o!==void 0&&o!==!1}}});Object.defineProperty(tb.prototype,"all",{get:function(){return this._list}});Object.defineProperty(tb.prototype,"map",{get:function(){return this._map}});var RBe=tb;typeof window<"u"&&(window.HashArray=tb);var OBe=RBe,ew=OBe,IBe=64,y$=/^[\s]*$/,NBe=[{regex:/[]/ig,alternate:"a"},{regex:/[]/ig,alternate:"e"},{regex:/[]/ig,alternate:"i"},{regex:/[]/ig,alternate:"o"},{regex:/[]/ig,alternate:"u"},{regex:/[]/ig,alternate:"ae"}];String.prototype.replaceCharAt=function(n,e){return this.substr(0,n)+e+this.substr(n+e.length)};var $L=function(n,e){this.options=e||{},this.options.ignoreCase=this.options.ignoreCase===void 0?!0:this.options.ignoreCase,this.options.maxCacheSize=this.options.maxCacheSize||IBe,this.options.cache=this.options.hasOwnProperty("cache")?this.options.cache:!0,this.options.splitOnRegEx=this.options.hasOwnProperty("splitOnRegEx")?this.options.splitOnRegEx:/\s/g,this.options.splitOnGetRegEx=this.options.hasOwnProperty("splitOnGetRegEx")?this.options.splitOnGetRegEx:this.options.splitOnRegEx,this.options.min=this.options.min||1,this.options.keepAll=this.options.hasOwnProperty("keepAll")?this.options.keepAll:!1,this.options.keepAllKey=this.options.hasOwnProperty("keepAllKey")?this.options.keepAllKey:"id",this.options.idFieldOrFunction=this.options.hasOwnProperty("idFieldOrFunction")?this.options.idFieldOrFunction:void 0,this.options.expandRegexes=this.options.expandRegexes||NBe,this.options.insertFullUnsplitKey=this.options.hasOwnProperty("insertFullUnsplitKey")?this.options.insertFullUnsplitKey:!1,this.keyFields=n?n instanceof Array?n:[n]:[],this.root={},this.size=0,this.options.cache&&(this.getCache=new ew("key"))};function Dre(n,e){return e.length===1?n[e[0]]:Dre(n[e[0]],e.slice(1,e.length))}$L.prototype={add:function(n,e){this.options.cache&&this.clearCache(),typeof e=="number"&&(e=void 0);var t=e||this.keyFields;for(var i in t){var r=t[i],s=r instanceof Array,a=s?Dre(n,r):n[r];if(a){a=a.toString();for(var o=this.expandString(a),l=0;l<o.length;l++){var c=o[l];this.map(c,n)}}}},expandString:function(n){var e=[n];if(this.options.expandRegexes&&this.options.expandRegexes.length)for(var t=0;t<this.options.expandRegexes.length;t++)for(var i=this.options.expandRegexes[t],r;(r=i.regex.exec(n))!==null;){var s=n.replaceCharAt(r.index,i.alternate);e.push(s)}return e},addAll:function(n,e){for(var t=0;t<n.length;t++)this.add(n[t],e)},reset:function(){this.root={},this.size=0},clearCache:function(){this.getCache=new ew("key")},cleanCache:function(){for(;this.getCache.all.length>this.options.maxCacheSize;)this.getCache.remove(this.getCache.all[0])},addFromObject:function(n,e){this.options.cache&&this.clearCache(),e=e||"value",this.keyFields.indexOf("_key_")==-1&&this.keyFields.push("_key_");for(var t in n){var i={_key_:t};i[e]=n[t],this.add(i)}},map:function(n,e){if(this.options.splitOnRegEx&&this.options.splitOnRegEx.test(n)){var t=n.split(this.options.splitOnRegEx),i=t.filter(function(h){return y$.test(h)}),r=t.filter(function(h){return h===n}),s=r.length+i.length===t.length;if(!s){for(var a=0,o=t.length;a<o;a++)y$.test(t[a])||this.map(t[a],e);if(!this.options.insertFullUnsplitKey)return}}this.options.cache&&this.clearCache(),this.options.keepAll&&(this.indexed=this.indexed||new ew([this.options.keepAllKey]),this.indexed.add(e)),this.options.ignoreCase&&(n=n.toLowerCase());var l=this.keyToArr(n),c=this;u(l,e,this.root);function u(h,d,f){if(h.length==0){f.value=f.value||[],f.value.push(d);return}var m=h.shift();f[m]||c.size++,f[m]=f[m]||{},u(h,d,f[m])}},keyToArr:function(n){var e;if(this.options.min&&this.options.min>1){if(n.length<this.options.min)return[];e=[n.substr(0,this.options.min)],e=e.concat(n.substr(this.options.min).split(""))}else e=n.split("");return e},findNode:function(n){return e(this.keyToArr(n),this.root);function e(t,i){if(i){if(t.length==0)return i;var r=t.shift();return e(t,i[r])}}},_getCacheKey:function(n,e){var t=n;return e&&(t=n+"_"+e),t},_get:function(n,e){n=this.options.ignoreCase?n.toLowerCase():n;var t,i;if(this.options.cache&&(t=this.getCache.get(this._getCacheKey(n,e))))return t.value;for(var r=void 0,s=this.options.indexField?[this.options.indexField]:this.keyFields,a=this.options.splitOnGetRegEx?n.split(this.options.splitOnGetRegEx):[n],o=0,l=a.length;o<l;o++)if(!(this.options.min&&a[o].length<this.options.min)){var c=new ew(s);(i=this.findNode(a[o]))&&d(i,c),r=r?r.intersection(c):c}var u=r?r.all:[];if(this.options.cache){var h=this._getCacheKey(n,e);this.getCache.add({key:h,value:u}),this.cleanCache()}return u;function d(f,m){if(!(e&&m.all.length===e)){if(f.value&&f.value.length)if(!e||m.all.length+f.value.length<e)m.addAll(f.value);else{m.addAll(f.value.slice(0,e-m.all.length));return}for(var v in f){if(e&&m.all.length===e)return;v!="value"&&d(f[v],m)}}}},get:function(n,e,t){var i=this.options.indexField?[this.options.indexField]:this.keyFields,r=void 0,s=void 0;if(e&&!this.options.idFieldOrFunction)throw new Error("To use the accumulator, you must specify and idFieldOrFunction");n=n instanceof Array?n:[n];for(var a=0,o=n.length;a<o;a++){var l=this._get(n[a],t);e?s=e(s,n[a],l,this):r=r?r.addAll(l):new ew(i).addAll(l)}return e?s:r.all},search:function(n,e,t){return this.get(n,e,t)},getId:function(n){return typeof this.options.idFieldOrFunction=="function"?this.options.idFieldOrFunction(n):n[this.options.idFieldOrFunction]}};$L.UNION_REDUCER=function(n,e,t,i){if(n===void 0)return t;var r={},s,a,o=Math.max(n.length,t.length),l=[],c=0;for(s=0;s<o;s++)s<n.length&&(a=i.getId(n[s]),r[a]=r[a]?r[a]:0,r[a]++,r[a]===2&&(l[c++]=n[s])),s<t.length&&(a=i.getId(t[s]),r[a]=r[a]?r[a]:0,r[a]++,r[a]===2&&(l[c++]=t[s]));return l};Dj.exports=$L;Dj.exports.default=$L;var PBe=Dj.exports,DBe=PBe,kx={};Object.defineProperty(kx,"__esModule",{value:!0});var kre=function(n){return function(e,t,i){return n(e,t,i)*i}},Jz=function(n,e){if(n)throw Error("Invalid sort config: "+e)},Lre=function(n){var e=n||{},t=e.asc,i=e.desc,r=t?1:-1,s=t||i;Jz(!s,"Expected `asc` or `desc` property"),Jz(t&&i,"Ambiguous object with `asc` and `desc` config properties");var a=n.comparer&&kre(n.comparer);return{order:r,sortBy:s,comparer:a}},kBe=function(n){return function e(t,i,r,s,a,o,l){var c,u;if(typeof t=="string")c=o[t],u=l[t];else if(typeof t=="function")c=t(o),u=t(l);else{var h=Lre(t);return e(h.sortBy,i,r,h.order,h.comparer||n,o,l)}var d=a(c,u,s);return(d===0||c==null&&u==null)&&i.length>r?e(i[r],i,r+1,s,a,o,l):d}};function Ure(n,e,t){if(n===void 0||n===!0)return function(s,a){return e(s,a,t)};if(typeof n=="string")return Jz(n.includes("."),"String syntax not allowed for nested properties."),function(s,a){return e(s[n],a[n],t)};if(typeof n=="function")return function(s,a){return e(n(s),n(a),t)};if(Array.isArray(n)){var i=kBe(e);return function(s,a){return i(n[0],n,1,t,e,s,a)}}var r=Lre(n);return Ure(r.sortBy,r.comparer||e,r.order)}var iF=function(n,e,t,i){var r;return Array.isArray(e)?(Array.isArray(t)&&t.length<2&&(r=t,t=r[0]),e.sort(Ure(t,i,n))):e};function kj(n){var e=kre(n.comparer);return function(t){var i=Array.isArray(t)&&!n.inPlaceSorting?t.slice():t;return{asc:function(r){return iF(1,i,r,e)},desc:function(r){return iF(-1,i,r,e)},by:function(r){return iF(1,i,r,e)}}}}var Lj=function(n,e,t){return n==null?t:e==null?-t:typeof n!=typeof e?typeof n<typeof e?-1:1:n<e?-1:n>e?1:0},LBe=kj({comparer:Lj}),UBe=kj({comparer:Lj,inPlaceSorting:!0});kx.createNewSortInstance=kj;kx.defaultComparer=Lj;kx.inPlaceSort=UBe;kx.sort=LBe;Object.defineProperty(Pj,"__esModule",{value:!0});var BBe=Pj.T9Search=void 0;const FBe=CBe,_$=DBe,zBe=kx;class jBe{constructor(){this.trie=new _$,this.map=new Map,this.numbers=new Map,this.maxLength=0,this.threshold=4,this.numbers.set("2",["a","b","c"]),this.numbers.set("3",["d","e","f"]),this.numbers.set("4",["g","h","i"]),this.numbers.set("5",["j","k","l"]),this.numbers.set("6",["m","n","o"]),this.numbers.set("7",["p","q","r","s"]),this.numbers.set("8",["t","u","v"]),this.numbers.set("9",["w","x","y","z"])}generateCombos(e){const t=e.split(""),i=[];return t.forEach(s=>{i.push(this.numbers.get(s))}),FBe(i).map(s=>s.join(""))}predict(e){if(e.length>this.maxLength)return[];for(const s of e)if(!this.numbers.get(s))return[];if(e.length>this.threshold)return this.predictLong(e);const t=this.generateCombos(e),i=this.trie.get(t).map(s=>s.value);return this.map.size?zBe.sort(i).by([{desc:s=>Number(this.map.get(s)||0)}]):i}predictLong(e){const t=e.slice(0,this.threshold),i=this.predict(t);return i?i.filter(r=>{if(r.length<e.length)return!1;for(let s=this.threshold;s<e.length;s++){const a=r[s];if(!this.numbers.get(e[s]).includes(a))return!1}return!0}):[]}setDict(e){this.trie=new _$;let t=0;const i={};e.forEach(r=>{i[r]=r,t=Math.max(t,r.length)}),this.trie.addFromObject(i),this.map=new Map,this.maxLength=t}setDictWithWeight(e){this.setDict(Array.from(e.keys())),this.map=e}}BBe=Pj.T9Search=jBe;/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
*
* @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
* @license  MIT
*/const b$="0123456789abcdef",Bre=[],oP=[];for(let n=0;n<256;n++)Bre[n]=b$[n>>4&15]+b$[n&15],n<16&&(n<10?oP[48+n]=n:oP[87+n]=n);const nat=n=>{const e=n.length;let t="",i=0;for(;i<e;)t+=Bre[n[i++]];return t},iat=n=>{const e=n.length>>1,t=e<<1,i=new Uint8Array(e);let r=0,s=0;for(;s<t;)i[r++]=oP[n.charCodeAt(s++)]<<4|oP[n.charCodeAt(s++)];return i};var S$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HBe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $R=0;$R<S$.length;$R++)HBe[S$.charCodeAt($R)]=$R;new TextDecoder;new TextEncoder;const E$=typeof window<"u"?window:self,T$=E$.crypto||E$.msCrypto||{};T$.subtle||T$.webkitSubtle;const Eg=globalThis||void 0||self;var Fre=typeof Eg=="object"&&Eg&&Eg.Object===Object&&Eg,VBe=typeof self=="object"&&self&&self.Object===Object&&self,$p=Fre||VBe||Function("return this")(),Ed=$p.Symbol,zre=Object.prototype,GBe=zre.hasOwnProperty,qBe=zre.toString,P1=Ed?Ed.toStringTag:void 0;function $Be(n){var e=GBe.call(n,P1),t=n[P1];try{n[P1]=void 0;var i=!0}catch{}var r=qBe.call(n);return i&&(e?n[P1]=t:delete n[P1]),r}var WBe=Object.prototype,YBe=WBe.toString;function XBe(n){return YBe.call(n)}var KBe="[object Null]",ZBe="[object Undefined]",x$=Ed?Ed.toStringTag:void 0;function d0(n){return n==null?n===void 0?ZBe:KBe:x$&&x$ in Object(n)?$Be(n):XBe(n)}function ff(n){return n!=null&&typeof n=="object"}var JBe="[object Symbol]";function WL(n){return typeof n=="symbol"||ff(n)&&d0(n)==JBe}function YL(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var gr=Array.isArray,QBe=1/0,w$=Ed?Ed.prototype:void 0,C$=w$?w$.toString:void 0;function jre(n){if(typeof n=="string")return n;if(gr(n))return YL(n,jre)+"";if(WL(n))return C$?C$.call(n):"";var e=n+"";return e=="0"&&1/n==-QBe?"-0":e}var eFe=/\s/;function tFe(n){for(var e=n.length;e--&&eFe.test(n.charAt(e)););return e}var nFe=/^\s+/;function iFe(n){return n&&n.slice(0,tFe(n)+1).replace(nFe,"")}function Td(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var A$=NaN,rFe=/^[-+]0x[0-9a-f]+$/i,sFe=/^0b[01]+$/i,aFe=/^0o[0-7]+$/i,oFe=parseInt;function lFe(n){if(typeof n=="number")return n;if(WL(n))return A$;if(Td(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Td(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=iFe(n);var t=sFe.test(n);return t||aFe.test(n)?oFe(n.slice(2),t?2:8):rFe.test(n)?A$:+n}var M$=1/0,cFe=17976931348623157e292;function uFe(n){if(!n)return n===0?n:0;if(n=lFe(n),n===M$||n===-M$){var e=n<0?-1:1;return e*cFe}return n===n?n:0}function XL(n){var e=uFe(n),t=e%1;return e===e?t?e-t:e:0}function qT(n){return n}var hFe="[object AsyncFunction]",dFe="[object Function]",fFe="[object GeneratorFunction]",pFe="[object Proxy]";function Yg(n){if(!Td(n))return!1;var e=d0(n);return e==dFe||e==fFe||e==hFe||e==pFe}var rF=$p["__core-js_shared__"],R$=function(){var n=/[^.]+$/.exec(rF&&rF.keys&&rF.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function mFe(n){return!!R$&&R$ in n}var gFe=Function.prototype,vFe=gFe.toString;function $b(n){if(n!=null){try{return vFe.call(n)}catch{}try{return n+""}catch{}}return""}var yFe=/[\\^$.*+?()[\]{}|]/g,_Fe=/^\[object .+?Constructor\]$/,bFe=Function.prototype,SFe=Object.prototype,EFe=bFe.toString,TFe=SFe.hasOwnProperty,xFe=RegExp("^"+EFe.call(TFe).replace(yFe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wFe(n){if(!Td(n)||mFe(n))return!1;var e=Yg(n)?xFe:_Fe;return e.test($b(n))}function CFe(n,e){return n==null?void 0:n[e]}function Wb(n,e){var t=CFe(n,e);return wFe(t)?t:void 0}var Qz=Wb($p,"WeakMap"),O$=Object.create,AFe=function(){function n(){}return function(e){if(!Td(e))return{};if(O$)return O$(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function MFe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function No(){}function RFe(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var OFe=800,IFe=16,NFe=Date.now;function PFe(n){var e=0,t=0;return function(){var i=NFe(),r=IFe-(i-t);if(t=i,r>0){if(++e>=OFe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function DFe(n){return function(){return n}}var lP=function(){try{var n=Wb(Object,"defineProperty");return n({},"",{}),n}catch{}}(),kFe=lP?function(n,e){return lP(n,"toString",{configurable:!0,enumerable:!1,value:DFe(e),writable:!0})}:qT,LFe=PFe(kFe);function Hre(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}function Vre(n,e,t,i){for(var r=n.length,s=t+-1;++s<r;)if(e(n[s],s,n))return s;return-1}function UFe(n){return n!==n}function BFe(n,e,t){for(var i=t-1,r=n.length;++i<r;)if(n[i]===e)return i;return-1}function Uj(n,e,t){return e===e?BFe(n,e,t):Vre(n,UFe,t)}function Gre(n,e){var t=n==null?0:n.length;return!!t&&Uj(n,e,0)>-1}var FFe=9007199254740991,zFe=/^(?:0|[1-9]\d*)$/;function KL(n,e){var t=typeof n;return e=e??FFe,!!e&&(t=="number"||t!="symbol"&&zFe.test(n))&&n>-1&&n%1==0&&n<e}function Bj(n,e,t){e=="__proto__"&&lP?lP(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function qA(n,e){return n===e||n!==n&&e!==e}var jFe=Object.prototype,HFe=jFe.hasOwnProperty;function ZL(n,e,t){var i=n[e];(!(HFe.call(n,e)&&qA(i,t))||t===void 0&&!(e in n))&&Bj(n,e,t)}function Fj(n,e,t,i){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=void 0;l===void 0&&(l=n[o]),r?Bj(t,o,l):ZL(t,o,l)}return t}var I$=Math.max;function VFe(n,e,t){return e=I$(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=I$(i.length-e,0),a=Array(s);++r<s;)a[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(a),MFe(n,this,o)}}function zj(n,e){return LFe(VFe(n,e,qT),n+"")}var GFe=9007199254740991;function jj(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=GFe}function Wp(n){return n!=null&&jj(n.length)&&!Yg(n)}function qre(n,e,t){if(!Td(t))return!1;var i=typeof e;return(i=="number"?Wp(t)&&KL(e,t.length):i=="string"&&e in t)?qA(t[e],n):!1}function qFe(n){return zj(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,a&&qre(t[0],t[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,s)}return e})}var $Fe=Object.prototype;function $A(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||$Fe;return n===t}function WFe(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var YFe="[object Arguments]";function N$(n){return ff(n)&&d0(n)==YFe}var $re=Object.prototype,XFe=$re.hasOwnProperty,KFe=$re.propertyIsEnumerable,JL=N$(function(){return arguments}())?N$:function(n){return ff(n)&&XFe.call(n,"callee")&&!KFe.call(n,"callee")};function ZFe(){return!1}var Wre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,P$=Wre&&typeof module=="object"&&module&&!module.nodeType&&module,JFe=P$&&P$.exports===Wre,D$=JFe?$p.Buffer:void 0,QFe=D$?D$.isBuffer:void 0,OC=QFe||ZFe,e4e="[object Arguments]",t4e="[object Array]",n4e="[object Boolean]",i4e="[object Date]",r4e="[object Error]",s4e="[object Function]",a4e="[object Map]",o4e="[object Number]",l4e="[object Object]",c4e="[object RegExp]",u4e="[object Set]",h4e="[object String]",d4e="[object WeakMap]",f4e="[object ArrayBuffer]",p4e="[object DataView]",m4e="[object Float32Array]",g4e="[object Float64Array]",v4e="[object Int8Array]",y4e="[object Int16Array]",_4e="[object Int32Array]",b4e="[object Uint8Array]",S4e="[object Uint8ClampedArray]",E4e="[object Uint16Array]",T4e="[object Uint32Array]",ks={};ks[m4e]=ks[g4e]=ks[v4e]=ks[y4e]=ks[_4e]=ks[b4e]=ks[S4e]=ks[E4e]=ks[T4e]=!0;ks[e4e]=ks[t4e]=ks[f4e]=ks[n4e]=ks[p4e]=ks[i4e]=ks[r4e]=ks[s4e]=ks[a4e]=ks[o4e]=ks[l4e]=ks[c4e]=ks[u4e]=ks[h4e]=ks[d4e]=!1;function x4e(n){return ff(n)&&jj(n.length)&&!!ks[d0(n)]}function QL(n){return function(e){return n(e)}}var Yre=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Dw=Yre&&typeof module=="object"&&module&&!module.nodeType&&module,w4e=Dw&&Dw.exports===Yre,sF=w4e&&Fre.process,Wy=function(){try{var n=Dw&&Dw.require&&Dw.require("util").types;return n||sF&&sF.binding&&sF.binding("util")}catch{}}(),k$=Wy&&Wy.isTypedArray,Hj=k$?QL(k$):x4e,C4e=Object.prototype,A4e=C4e.hasOwnProperty;function Xre(n,e){var t=gr(n),i=!t&&JL(n),r=!t&&!i&&OC(n),s=!t&&!i&&!r&&Hj(n),a=t||i||r||s,o=a?WFe(n.length,String):[],l=o.length;for(var c in n)(e||A4e.call(n,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||KL(c,l)))&&o.push(c);return o}function Kre(n,e){return function(t){return n(e(t))}}var M4e=Kre(Object.keys,Object),R4e=Object.prototype,O4e=R4e.hasOwnProperty;function Zre(n){if(!$A(n))return M4e(n);var e=[];for(var t in Object(n))O4e.call(n,t)&&t!="constructor"&&e.push(t);return e}function xd(n){return Wp(n)?Xre(n):Zre(n)}var I4e=Object.prototype,N4e=I4e.hasOwnProperty,Iu=qFe(function(n,e){if($A(e)||Wp(e)){Fj(e,xd(e),n);return}for(var t in e)N4e.call(e,t)&&ZL(n,t,e[t])});function P4e(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var D4e=Object.prototype,k4e=D4e.hasOwnProperty;function L4e(n){if(!Td(n))return P4e(n);var e=$A(n),t=[];for(var i in n)i=="constructor"&&(e||!k4e.call(n,i))||t.push(i);return t}function Jre(n){return Wp(n)?Xre(n,!0):L4e(n)}var U4e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B4e=/^\w*$/;function Vj(n,e){if(gr(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||WL(n)?!0:B4e.test(n)||!U4e.test(n)||e!=null&&n in Object(e)}var IC=Wb(Object,"create");function F4e(){this.__data__=IC?IC(null):{},this.size=0}function z4e(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var j4e="__lodash_hash_undefined__",H4e=Object.prototype,V4e=H4e.hasOwnProperty;function G4e(n){var e=this.__data__;if(IC){var t=e[n];return t===j4e?void 0:t}return V4e.call(e,n)?e[n]:void 0}var q4e=Object.prototype,$4e=q4e.hasOwnProperty;function W4e(n){var e=this.__data__;return IC?e[n]!==void 0:$4e.call(e,n)}var Y4e="__lodash_hash_undefined__";function X4e(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=IC&&e===void 0?Y4e:e,this}function Sb(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Sb.prototype.clear=F4e;Sb.prototype.delete=z4e;Sb.prototype.get=G4e;Sb.prototype.has=W4e;Sb.prototype.set=X4e;function K4e(){this.__data__=[],this.size=0}function eU(n,e){for(var t=n.length;t--;)if(qA(n[t][0],e))return t;return-1}var Z4e=Array.prototype,J4e=Z4e.splice;function Q4e(n){var e=this.__data__,t=eU(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():J4e.call(e,t,1),--this.size,!0}function eze(n){var e=this.__data__,t=eU(e,n);return t<0?void 0:e[t][1]}function tze(n){return eU(this.__data__,n)>-1}function nze(n,e){var t=this.__data__,i=eU(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Xg(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Xg.prototype.clear=K4e;Xg.prototype.delete=Q4e;Xg.prototype.get=eze;Xg.prototype.has=tze;Xg.prototype.set=nze;var NC=Wb($p,"Map");function ize(){this.size=0,this.__data__={hash:new Sb,map:new(NC||Xg),string:new Sb}}function rze(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function tU(n,e){var t=n.__data__;return rze(e)?t[typeof e=="string"?"string":"hash"]:t.map}function sze(n){var e=tU(this,n).delete(n);return this.size-=e?1:0,e}function aze(n){return tU(this,n).get(n)}function oze(n){return tU(this,n).has(n)}function lze(n,e){var t=tU(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Kg(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Kg.prototype.clear=ize;Kg.prototype.delete=sze;Kg.prototype.get=aze;Kg.prototype.has=oze;Kg.prototype.set=lze;var cze="Expected a function";function Gj(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(cze);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return t.cache=s.set(r,a)||s,a};return t.cache=new(Gj.Cache||Kg),t}Gj.Cache=Kg;var uze=500;function hze(n){var e=Gj(n,function(i){return t.size===uze&&t.clear(),i}),t=e.cache;return e}var dze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fze=/\\(\\)?/g,pze=hze(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(dze,function(t,i,r,s){e.push(r?s.replace(fze,"$1"):i||t)}),e});function Qre(n){return n==null?"":jre(n)}function nU(n,e){return gr(n)?n:Vj(n,e)?[n]:pze(Qre(n))}var mze=1/0;function WA(n){if(typeof n=="string"||WL(n))return n;var e=n+"";return e=="0"&&1/n==-mze?"-0":e}function qj(n,e){e=nU(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[WA(e[t++])];return t&&t==i?n:void 0}function gze(n,e,t){var i=n==null?void 0:qj(n,e);return i===void 0?t:i}function $j(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var L$=Ed?Ed.isConcatSpreadable:void 0;function vze(n){return gr(n)||JL(n)||!!(L$&&n&&n[L$])}function Wj(n,e,t,i,r){var s=-1,a=n.length;for(t||(t=vze),r||(r=[]);++s<a;){var o=n[s];t(o)?$j(r,o):i||(r[r.length]=o)}return r}function Cu(n){var e=n==null?0:n.length;return e?Wj(n):[]}var ese=Kre(Object.getPrototypeOf,Object);function Yj(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}function yze(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:Yj(n,e,t)}var _ze="\\ud800-\\udfff",bze="\\u0300-\\u036f",Sze="\\ufe20-\\ufe2f",Eze="\\u20d0-\\u20ff",Tze=bze+Sze+Eze,xze="\\ufe0e\\ufe0f",wze="\\u200d",Cze=RegExp("["+wze+_ze+Tze+xze+"]");function tse(n){return Cze.test(n)}function Aze(n){return n.split("")}var nse="\\ud800-\\udfff",Mze="\\u0300-\\u036f",Rze="\\ufe20-\\ufe2f",Oze="\\u20d0-\\u20ff",Ize=Mze+Rze+Oze,Nze="\\ufe0e\\ufe0f",Pze="["+nse+"]",e5="["+Ize+"]",t5="\\ud83c[\\udffb-\\udfff]",Dze="(?:"+e5+"|"+t5+")",ise="[^"+nse+"]",rse="(?:\\ud83c[\\udde6-\\uddff]){2}",sse="[\\ud800-\\udbff][\\udc00-\\udfff]",kze="\\u200d",ase=Dze+"?",ose="["+Nze+"]?",Lze="(?:"+kze+"(?:"+[ise,rse,sse].join("|")+")"+ose+ase+")*",Uze=ose+ase+Lze,Bze="(?:"+[ise+e5+"?",e5,rse,sse,Pze].join("|")+")",Fze=RegExp(t5+"(?="+t5+")|"+Bze+Uze,"g");function zze(n){return n.match(Fze)||[]}function jze(n){return tse(n)?zze(n):Aze(n)}function Hze(n){return function(e){e=Qre(e);var t=tse(e)?jze(e):void 0,i=t?t[0]:e.charAt(0),r=t?yze(t,1).join(""):e.slice(1);return i[n]()+r}}var lse=Hze("toUpperCase");function Vze(n,e,t,i){var r=-1,s=n==null?0:n.length;for(i&&s&&(t=n[++r]);++r<s;)t=e(t,n[r],r,n);return t}function Gze(){this.__data__=new Xg,this.size=0}function qze(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function $ze(n){return this.__data__.get(n)}function Wze(n){return this.__data__.has(n)}var Yze=200;function Xze(n,e){var t=this.__data__;if(t instanceof Xg){var i=t.__data__;if(!NC||i.length<Yze-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Kg(i)}return t.set(n,e),this.size=t.size,this}function Ap(n){var e=this.__data__=new Xg(n);this.size=e.size}Ap.prototype.clear=Gze;Ap.prototype.delete=qze;Ap.prototype.get=$ze;Ap.prototype.has=Wze;Ap.prototype.set=Xze;function Kze(n,e){return n&&Fj(e,xd(e),n)}var cse=typeof exports=="object"&&exports&&!exports.nodeType&&exports,U$=cse&&typeof module=="object"&&module&&!module.nodeType&&module,Zze=U$&&U$.exports===cse,B$=Zze?$p.Buffer:void 0,F$=B$?B$.allocUnsafe:void 0;function Jze(n,e){var t=n.length,i=F$?F$(t):new n.constructor(t);return n.copy(i),i}function Xj(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var a=n[t];e(a,t,n)&&(s[r++]=a)}return s}function use(){return[]}var Qze=Object.prototype,e5e=Qze.propertyIsEnumerable,z$=Object.getOwnPropertySymbols,Kj=z$?function(n){return n==null?[]:(n=Object(n),Xj(z$(n),function(e){return e5e.call(n,e)}))}:use;function t5e(n,e){return Fj(n,Kj(n),e)}var n5e=Object.getOwnPropertySymbols,i5e=n5e?function(n){for(var e=[];n;)$j(e,Kj(n)),n=ese(n);return e}:use;function hse(n,e,t){var i=e(n);return gr(n)?i:$j(i,t(n))}function n5(n){return hse(n,xd,Kj)}function r5e(n){return hse(n,Jre,i5e)}var i5=Wb($p,"DataView"),r5=Wb($p,"Promise"),tT=Wb($p,"Set"),j$="[object Map]",s5e="[object Object]",H$="[object Promise]",V$="[object Set]",G$="[object WeakMap]",q$="[object DataView]",a5e=$b(i5),o5e=$b(NC),l5e=$b(r5),c5e=$b(tT),u5e=$b(Qz),id=d0;(i5&&id(new i5(new ArrayBuffer(1)))!=q$||NC&&id(new NC)!=j$||r5&&id(r5.resolve())!=H$||tT&&id(new tT)!=V$||Qz&&id(new Qz)!=G$)&&(id=function(n){var e=d0(n),t=e==s5e?n.constructor:void 0,i=t?$b(t):"";if(i)switch(i){case a5e:return q$;case o5e:return j$;case l5e:return H$;case c5e:return V$;case u5e:return G$}return e});var h5e=Object.prototype,d5e=h5e.hasOwnProperty;function f5e(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&d5e.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var cP=$p.Uint8Array;function p5e(n){var e=new n.constructor(n.byteLength);return new cP(e).set(new cP(n)),e}function m5e(n,e){var t=n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var g5e=/\w*$/;function v5e(n){var e=new n.constructor(n.source,g5e.exec(n));return e.lastIndex=n.lastIndex,e}var $$=Ed?Ed.prototype:void 0,W$=$$?$$.valueOf:void 0;function y5e(n){return W$?Object(W$.call(n)):{}}function _5e(n,e){var t=n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var b5e="[object Boolean]",S5e="[object Date]",E5e="[object Map]",T5e="[object Number]",x5e="[object RegExp]",w5e="[object Set]",C5e="[object String]",A5e="[object Symbol]",M5e="[object ArrayBuffer]",R5e="[object DataView]",O5e="[object Float32Array]",I5e="[object Float64Array]",N5e="[object Int8Array]",P5e="[object Int16Array]",D5e="[object Int32Array]",k5e="[object Uint8Array]",L5e="[object Uint8ClampedArray]",U5e="[object Uint16Array]",B5e="[object Uint32Array]";function F5e(n,e,t){var i=n.constructor;switch(e){case M5e:return p5e(n);case b5e:case S5e:return new i(+n);case R5e:return m5e(n);case O5e:case I5e:case N5e:case P5e:case D5e:case k5e:case L5e:case U5e:case B5e:return _5e(n);case E5e:return new i;case T5e:case C5e:return new i(n);case x5e:return v5e(n);case w5e:return new i;case A5e:return y5e(n)}}function z5e(n){return typeof n.constructor=="function"&&!$A(n)?AFe(ese(n)):{}}var j5e="[object Map]";function H5e(n){return ff(n)&&id(n)==j5e}var Y$=Wy&&Wy.isMap,V5e=Y$?QL(Y$):H5e,G5e="[object Set]";function q5e(n){return ff(n)&&id(n)==G5e}var X$=Wy&&Wy.isSet,$5e=X$?QL(X$):q5e,dse="[object Arguments]",W5e="[object Array]",Y5e="[object Boolean]",X5e="[object Date]",K5e="[object Error]",fse="[object Function]",Z5e="[object GeneratorFunction]",J5e="[object Map]",Q5e="[object Number]",pse="[object Object]",e6e="[object RegExp]",t6e="[object Set]",n6e="[object String]",i6e="[object Symbol]",r6e="[object WeakMap]",s6e="[object ArrayBuffer]",a6e="[object DataView]",o6e="[object Float32Array]",l6e="[object Float64Array]",c6e="[object Int8Array]",u6e="[object Int16Array]",h6e="[object Int32Array]",d6e="[object Uint8Array]",f6e="[object Uint8ClampedArray]",p6e="[object Uint16Array]",m6e="[object Uint32Array]",bs={};bs[dse]=bs[W5e]=bs[s6e]=bs[a6e]=bs[Y5e]=bs[X5e]=bs[o6e]=bs[l6e]=bs[c6e]=bs[u6e]=bs[h6e]=bs[J5e]=bs[Q5e]=bs[pse]=bs[e6e]=bs[t6e]=bs[n6e]=bs[i6e]=bs[d6e]=bs[f6e]=bs[p6e]=bs[m6e]=!0;bs[K5e]=bs[fse]=bs[r6e]=!1;function WO(n,e,t,i,r,s){var a;if(a!==void 0)return a;if(!Td(n))return n;var o=gr(n);if(o)return a=f5e(n),RFe(n,a);var l=id(n),c=l==fse||l==Z5e;if(OC(n))return Jze(n);if(l==pse||l==dse||c&&!r)return a=c?{}:z5e(n),t5e(n,Kze(a,n));if(!bs[l])return r?n:{};a=F5e(n,l),s||(s=new Ap);var u=s.get(n);if(u)return u;s.set(n,a),$5e(n)?n.forEach(function(f){a.add(WO(f,e,t,f,n,s))}):V5e(n)&&n.forEach(function(f,m){a.set(m,WO(f,e,t,m,n,s))});var h=n5,d=o?void 0:h(n);return Hre(d||n,function(f,m){d&&(m=f,f=n[m]),ZL(a,m,WO(f,e,t,m,n,s))}),a}var g6e=4;function Pl(n){return WO(n,g6e)}function YA(n){for(var e=-1,t=n==null?0:n.length,i=0,r=[];++e<t;){var s=n[e];s&&(r[i++]=s)}return r}var v6e="__lodash_hash_undefined__";function y6e(n){return this.__data__.set(n,v6e),this}function _6e(n){return this.__data__.has(n)}function $T(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Kg;++e<t;)this.add(n[e])}$T.prototype.add=$T.prototype.push=y6e;$T.prototype.has=_6e;function mse(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function Zj(n,e){return n.has(e)}var b6e=1,S6e=2;function gse(n,e,t,i,r,s){var a=t&b6e,o=n.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var h=-1,d=!0,f=t&S6e?new $T:void 0;for(s.set(n,e),s.set(e,n);++h<o;){var m=n[h],v=e[h];if(i)var _=a?i(v,m,h,e,n,s):i(m,v,h,n,e,s);if(_!==void 0){if(_)continue;d=!1;break}if(f){if(!mse(e,function(y,S){if(!Zj(f,S)&&(m===y||r(m,y,t,i,s)))return f.push(S)})){d=!1;break}}else if(!(m===v||r(m,v,t,i,s))){d=!1;break}}return s.delete(n),s.delete(e),d}function E6e(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function Jj(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var T6e=1,x6e=2,w6e="[object Boolean]",C6e="[object Date]",A6e="[object Error]",M6e="[object Map]",R6e="[object Number]",O6e="[object RegExp]",I6e="[object Set]",N6e="[object String]",P6e="[object Symbol]",D6e="[object ArrayBuffer]",k6e="[object DataView]",K$=Ed?Ed.prototype:void 0,aF=K$?K$.valueOf:void 0;function L6e(n,e,t,i,r,s,a){switch(t){case k6e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case D6e:return!(n.byteLength!=e.byteLength||!s(new cP(n),new cP(e)));case w6e:case C6e:case R6e:return qA(+n,+e);case A6e:return n.name==e.name&&n.message==e.message;case O6e:case N6e:return n==e+"";case M6e:var o=E6e;case I6e:var l=i&T6e;if(o||(o=Jj),n.size!=e.size&&!l)return!1;var c=a.get(n);if(c)return c==e;i|=x6e,a.set(n,e);var u=gse(o(n),o(e),i,r,s,a);return a.delete(n),u;case P6e:if(aF)return aF.call(n)==aF.call(e)}return!1}var U6e=1,B6e=Object.prototype,F6e=B6e.hasOwnProperty;function z6e(n,e,t,i,r,s){var a=t&U6e,o=n5(n),l=o.length,c=n5(e),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var d=o[h];if(!(a?d in e:F6e.call(e,d)))return!1}var f=s.get(n),m=s.get(e);if(f&&m)return f==e&&m==n;var v=!0;s.set(n,e),s.set(e,n);for(var _=a;++h<l;){d=o[h];var y=n[d],S=e[d];if(i)var T=a?i(S,y,d,e,n,s):i(y,S,d,n,e,s);if(!(T===void 0?y===S||r(y,S,t,i,s):T)){v=!1;break}_||(_=d=="constructor")}if(v&&!_){var x=n.constructor,I=e.constructor;x!=I&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof I=="function"&&I instanceof I)&&(v=!1)}return s.delete(n),s.delete(e),v}var j6e=1,Z$="[object Arguments]",J$="[object Array]",WR="[object Object]",H6e=Object.prototype,Q$=H6e.hasOwnProperty;function V6e(n,e,t,i,r,s){var a=gr(n),o=gr(e),l=a?J$:id(n),c=o?J$:id(e);l=l==Z$?WR:l,c=c==Z$?WR:c;var u=l==WR,h=c==WR,d=l==c;if(d&&OC(n)){if(!OC(e))return!1;a=!0,u=!1}if(d&&!u)return s||(s=new Ap),a||Hj(n)?gse(n,e,t,i,r,s):L6e(n,e,l,t,i,r,s);if(!(t&j6e)){var f=u&&Q$.call(n,"__wrapped__"),m=h&&Q$.call(e,"__wrapped__");if(f||m){var v=f?n.value():n,_=m?e.value():e;return s||(s=new Ap),r(v,_,t,i,s)}}return d?(s||(s=new Ap),z6e(n,e,t,i,r,s)):!1}function Qj(n,e,t,i,r){return n===e?!0:n==null||e==null||!ff(n)&&!ff(e)?n!==n&&e!==e:V6e(n,e,t,i,Qj,r)}var G6e=1,q6e=2;function $6e(n,e,t,i){var r=t.length,s=r;if(n==null)return!s;for(n=Object(n);r--;){var a=t[r];if(a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++r<s;){a=t[r];var o=a[0],l=n[o],c=a[1];if(a[2]){if(l===void 0&&!(o in n))return!1}else{var u=new Ap,h;if(!(h===void 0?Qj(c,l,G6e|q6e,i,u):h))return!1}}return!0}function vse(n){return n===n&&!Td(n)}function W6e(n){for(var e=xd(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,vse(r)]}return e}function yse(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function Y6e(n){var e=W6e(n);return e.length==1&&e[0][2]?yse(e[0][0],e[0][1]):function(t){return t===n||$6e(t,n,e)}}function X6e(n,e){return n!=null&&e in Object(n)}function _se(n,e,t){e=nU(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var a=WA(e[i]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&jj(r)&&KL(a,r)&&(gr(n)||JL(n)))}function K6e(n,e){return n!=null&&_se(n,e,X6e)}var Z6e=1,J6e=2;function Q6e(n,e){return Vj(n)&&vse(e)?yse(WA(n),e):function(t){var i=gze(t,n);return i===void 0&&i===e?K6e(t,n):Qj(e,i,Z6e|J6e)}}function e8e(n){return function(e){return e==null?void 0:e[n]}}function t8e(n){return function(e){return qj(e,n)}}function n8e(n){return Vj(n)?e8e(WA(n)):t8e(n)}function Yp(n){return typeof n=="function"?n:n==null?qT:typeof n=="object"?gr(n)?Q6e(n[0],n[1]):Y6e(n):n8e(n)}function i8e(n,e,t,i){for(var r=-1,s=n==null?0:n.length;++r<s;){var a=n[r];e(i,a,t(a),n)}return i}function r8e(n){return function(e,t,i){for(var r=-1,s=Object(e),a=i(e),o=a.length;o--;){var l=a[++r];if(t(s[l],l,s)===!1)break}return e}}var s8e=r8e();function a8e(n,e){return n&&s8e(n,e,xd)}function o8e(n,e){return function(t,i){if(t==null)return t;if(!Wp(t))return n(t,i);for(var r=t.length,s=-1,a=Object(t);++s<r&&i(a[s],s,a)!==!1;);return t}}var Yb=o8e(a8e);function l8e(n,e,t,i){return Yb(n,function(r,s,a){e(i,r,t(r),a)}),i}function c8e(n,e){return function(t,i){var r=gr(t)?i8e:l8e,s=e?e():{};return r(t,n,Yp(i),s)}}var bse=Object.prototype,u8e=bse.hasOwnProperty,eH=zj(function(n,e){n=Object(n);var t=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&qre(e[0],e[1],r)&&(i=1);++t<i;)for(var s=e[t],a=Jre(s),o=-1,l=a.length;++o<l;){var c=a[o],u=n[c];(u===void 0||qA(u,bse[c])&&!u8e.call(n,c))&&(n[c]=s[c])}return n});function eW(n){return ff(n)&&Wp(n)}var h8e=200;function d8e(n,e,t,i){var r=-1,s=Gre,a=!0,o=n.length,l=[],c=e.length;if(!o)return l;e.length>=h8e&&(s=Zj,a=!1,e=new $T(e));e:for(;++r<o;){var u=n[r],h=u;if(u=u!==0?u:0,a&&h===h){for(var d=c;d--;)if(e[d]===h)continue e;l.push(u)}else s(e,h,i)||l.push(u)}return l}var iU=zj(function(n,e){return eW(n)?d8e(n,Wj(e,1,eW,!0)):[]});function WT(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function Al(n,e,t){var i=n==null?0:n.length;return i?(e=e===void 0?1:XL(e),Yj(n,e<0?0:e,i)):[]}function PC(n,e,t){var i=n==null?0:n.length;return i?(e=e===void 0?1:XL(e),e=i-e,Yj(n,0,e<0?0:e)):[]}function f8e(n){return typeof n=="function"?n:qT}function ci(n,e){var t=gr(n)?Hre:Yb;return t(n,f8e(e))}function p8e(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(!e(n[t],t,n))return!1;return!0}function m8e(n,e){var t=!0;return Yb(n,function(i,r,s){return t=!!e(i,r,s),t}),t}function hf(n,e,t){var i=gr(n)?p8e:m8e;return i(n,Yp(e))}function Sse(n,e){var t=[];return Yb(n,function(i,r,s){e(i,r,s)&&t.push(i)}),t}function Rd(n,e){var t=gr(n)?Xj:Sse;return t(n,Yp(e))}function g8e(n){return function(e,t,i){var r=Object(e);if(!Wp(e)){var s=Yp(t);e=xd(e),t=function(o){return s(r[o],o,r)}}var a=n(e,t,i);return a>-1?r[s?e[a]:a]:void 0}}var v8e=Math.max;function y8e(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var r=t==null?0:XL(t);return r<0&&(r=v8e(i+r,0)),Vre(n,Yp(e),r)}var YT=g8e(y8e);function pf(n){return n&&n.length?n[0]:void 0}function _8e(n,e){var t=-1,i=Wp(n)?Array(n.length):[];return Yb(n,function(r,s,a){i[++t]=e(r,s,a)}),i}function En(n,e){var t=gr(n)?YL:_8e;return t(n,Yp(e))}function gd(n,e){return Wj(En(n,e))}var b8e=Object.prototype,S8e=b8e.hasOwnProperty,Ese=c8e(function(n,e,t){S8e.call(n,t)?n[t].push(e):Bj(n,t,[e])}),E8e=Object.prototype,T8e=E8e.hasOwnProperty;function x8e(n,e){return n!=null&&T8e.call(n,e)}function ni(n,e){return n!=null&&_se(n,e,x8e)}var w8e="[object String]";function Nu(n){return typeof n=="string"||!gr(n)&&ff(n)&&d0(n)==w8e}function C8e(n,e){return YL(e,function(t){return n[t]})}function vo(n){return n==null?[]:C8e(n,xd(n))}var A8e=Math.max;function $c(n,e,t,i){n=Wp(n)?n:vo(n),t=t&&!i?XL(t):0;var r=n.length;return t<0&&(t=A8e(r+t,0)),Nu(n)?t<=r&&n.indexOf(e,t)>-1:!!r&&Uj(n,e,t)>-1}function tW(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var r=0;return Uj(n,e,r)}var M8e="[object Map]",R8e="[object Set]",O8e=Object.prototype,I8e=O8e.hasOwnProperty;function Es(n){if(n==null)return!0;if(Wp(n)&&(gr(n)||typeof n=="string"||typeof n.splice=="function"||OC(n)||Hj(n)||JL(n)))return!n.length;var e=id(n);if(e==M8e||e==R8e)return!n.size;if($A(n))return!Zre(n).length;for(var t in n)if(I8e.call(n,t))return!1;return!0}var N8e="[object RegExp]";function P8e(n){return ff(n)&&d0(n)==N8e}var nW=Wy&&Wy.isRegExp,Bg=nW?QL(nW):P8e;function Fg(n){return n===void 0}var D8e="Expected a function";function k8e(n){if(typeof n!="function")throw new TypeError(D8e);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}function L8e(n,e,t,i){if(!Td(n))return n;e=nU(e,n);for(var r=-1,s=e.length,a=s-1,o=n;o!=null&&++r<s;){var l=WA(e[r]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=a){var u=o[l];c=void 0,c===void 0&&(c=Td(u)?u:KL(e[r+1])?[]:{})}ZL(o,l,c),o=o[l]}return n}function U8e(n,e,t){for(var i=-1,r=e.length,s={};++i<r;){var a=e[i],o=qj(n,a);t(o,a)&&L8e(s,nU(a,n),o)}return s}function Tf(n,e){if(n==null)return{};var t=YL(r5e(n),function(i){return[i]});return e=Yp(e),U8e(n,t,function(i,r){return e(i,r[0])})}function B8e(n,e,t,i,r){return r(n,function(s,a,o){t=i?(i=!1,s):e(t,s,a,o)}),t}function Pu(n,e,t){var i=gr(n)?Vze:B8e,r=arguments.length<3;return i(n,Yp(e),t,r,Yb)}function rU(n,e){var t=gr(n)?Xj:Sse;return t(n,k8e(Yp(e)))}function F8e(n,e){var t;return Yb(n,function(i,r,s){return t=e(i,r,s),!t}),!!t}function tH(n,e,t){var i=gr(n)?mse:F8e;return i(n,Yp(e))}var z8e=1/0,j8e=tT&&1/Jj(new tT([,-0]))[1]==z8e?function(n){return new tT(n)}:No,H8e=200;function V8e(n,e,t){var i=-1,r=Gre,s=n.length,a=!0,o=[],l=o;if(s>=H8e){var c=j8e(n);if(c)return Jj(c);a=!1,r=Zj,l=new $T}else l=o;e:for(;++i<s;){var u=n[i],h=u;if(u=u!==0?u:0,a&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;o.push(u)}else r(l,h,t)||(l!==o&&l.push(h),o.push(u))}return o}function sU(n){return n&&n.length?V8e(n):[]}function s5(n){console&&console.error&&console.error(`Error: ${n}`)}function Tse(n){console&&console.warn&&console.warn(`Warning: ${n}`)}function xse(n){const e=new Date().getTime(),t=n();return{time:new Date().getTime()-e,value:t}}function wse(n){function e(){}e.prototype=n;const t=new e;function i(){return typeof t.bar}return i(),i(),n}function G8e(n){return q8e(n)?n.LABEL:n.name}function q8e(n){return Nu(n.LABEL)&&n.LABEL!==""}class Xp{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ci(this.definition,t=>{t.accept(e)})}}class Du extends Xp{constructor(e){super([]),this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Lx extends Xp{constructor(e){super(e.definition),this.orgText="",Iu(this,Tf(e,t=>t!==void 0))}}class ku extends Xp{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Iu(this,Tf(e,t=>t!==void 0))}}class Au extends Xp{constructor(e){super(e.definition),this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}}class Kp extends Xp{constructor(e){super(e.definition),this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}}class Zp extends Xp{constructor(e){super(e.definition),this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}}class Uo extends Xp{constructor(e){super(e.definition),this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}}class xf extends Xp{constructor(e){super(e.definition),this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}}class wf extends Xp{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Iu(this,Tf(e,t=>t!==void 0))}}class ha{constructor(e){this.idx=1,Iu(this,Tf(e,t=>t!==void 0))}accept(e){e.visit(this)}}function $8e(n){return En(n,YO)}function YO(n){function e(t){return En(t,YO)}if(n instanceof Du){const t={type:"NonTerminal",name:n.nonTerminalName,idx:n.idx};return Nu(n.label)&&(t.label=n.label),t}else{if(n instanceof ku)return{type:"Alternative",definition:e(n.definition)};if(n instanceof Au)return{type:"Option",idx:n.idx,definition:e(n.definition)};if(n instanceof Kp)return{type:"RepetitionMandatory",idx:n.idx,definition:e(n.definition)};if(n instanceof Zp)return{type:"RepetitionMandatoryWithSeparator",idx:n.idx,separator:YO(new ha({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof xf)return{type:"RepetitionWithSeparator",idx:n.idx,separator:YO(new ha({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof Uo)return{type:"Repetition",idx:n.idx,definition:e(n.definition)};if(n instanceof wf)return{type:"Alternation",idx:n.idx,definition:e(n.definition)};if(n instanceof ha){const t={type:"Terminal",name:n.terminalType.name,label:G8e(n.terminalType),idx:n.idx};Nu(n.label)&&(t.terminalLabel=n.label);const i=n.terminalType.PATTERN;return n.terminalType.PATTERN&&(t.pattern=Bg(i)?i.source:i),t}else{if(n instanceof Lx)return{type:"Rule",name:n.name,orgText:n.orgText,definition:e(n.definition)};throw Error("non exhaustive match")}}}class Xb{visit(e){const t=e;switch(t.constructor){case Du:return this.visitNonTerminal(t);case ku:return this.visitAlternative(t);case Au:return this.visitOption(t);case Kp:return this.visitRepetitionMandatory(t);case Zp:return this.visitRepetitionMandatoryWithSeparator(t);case xf:return this.visitRepetitionWithSeparator(t);case Uo:return this.visitRepetition(t);case wf:return this.visitAlternation(t);case ha:return this.visitTerminal(t);case Lx:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function W8e(n){return n instanceof ku||n instanceof Au||n instanceof Uo||n instanceof Kp||n instanceof Zp||n instanceof xf||n instanceof ha||n instanceof Lx}function uP(n,e=[]){return n instanceof Au||n instanceof Uo||n instanceof xf?!0:n instanceof wf?tH(n.definition,i=>uP(i,e)):n instanceof Du&&$c(e,n)?!1:n instanceof Xp?(n instanceof Du&&e.push(n),hf(n.definition,i=>uP(i,e))):!1}function Y8e(n){return n instanceof wf}function fp(n){if(n instanceof Du)return"SUBRULE";if(n instanceof Au)return"OPTION";if(n instanceof wf)return"OR";if(n instanceof Kp)return"AT_LEAST_ONE";if(n instanceof Zp)return"AT_LEAST_ONE_SEP";if(n instanceof xf)return"MANY_SEP";if(n instanceof Uo)return"MANY";if(n instanceof ha)return"CONSUME";throw Error("non exhaustive match")}class aU{walk(e,t=[]){ci(e.definition,(i,r)=>{const s=Al(e.definition,r+1);if(i instanceof Du)this.walkProdRef(i,s,t);else if(i instanceof ha)this.walkTerminal(i,s,t);else if(i instanceof ku)this.walkFlat(i,s,t);else if(i instanceof Au)this.walkOption(i,s,t);else if(i instanceof Kp)this.walkAtLeastOne(i,s,t);else if(i instanceof Zp)this.walkAtLeastOneSep(i,s,t);else if(i instanceof xf)this.walkManySep(i,s,t);else if(i instanceof Uo)this.walkMany(i,s,t);else if(i instanceof wf)this.walkOr(i,s,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,i){}walkProdRef(e,t,i){}walkFlat(e,t,i){const r=t.concat(i);this.walk(e,r)}walkOption(e,t,i){const r=t.concat(i);this.walk(e,r)}walkAtLeastOne(e,t,i){const r=[new Au({definition:e.definition})].concat(t,i);this.walk(e,r)}walkAtLeastOneSep(e,t,i){const r=iW(e,t,i);this.walk(e,r)}walkMany(e,t,i){const r=[new Au({definition:e.definition})].concat(t,i);this.walk(e,r)}walkManySep(e,t,i){const r=iW(e,t,i);this.walk(e,r)}walkOr(e,t,i){const r=t.concat(i);ci(e.definition,s=>{const a=new ku({definition:[s]});this.walk(a,r)})}}function iW(n,e,t){return[new Au({definition:[new ha({terminalType:n.separator})].concat(n.definition)})].concat(e,t)}function XA(n){if(n instanceof Du)return XA(n.referencedRule);if(n instanceof ha)return Z8e(n);if(W8e(n))return X8e(n);if(Y8e(n))return K8e(n);throw Error("non exhaustive match")}function X8e(n){let e=[];const t=n.definition;let i=0,r=t.length>i,s,a=!0;for(;r&&a;)s=t[i],a=uP(s),e=e.concat(XA(s)),i=i+1,r=t.length>i;return sU(e)}function K8e(n){const e=En(n.definition,t=>XA(t));return sU(Cu(e))}function Z8e(n){return[n.terminalType]}const Cse="_~IN~_";class J8e extends aU{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,i){}walkProdRef(e,t,i){const r=eje(e.referencedRule,e.idx)+this.topProd.name,s=t.concat(i),a=new ku({definition:s}),o=XA(a);this.follows[r]=o}}function Q8e(n){const e={};return ci(n,t=>{const i=new J8e(t).startWalking();Iu(e,i)}),e}function eje(n,e){return n.name+e+Cse}function fi(n){return n.charCodeAt(0)}function oF(n,e){Array.isArray(n)?n.forEach(function(t){e.push(t)}):e.push(n)}function D1(n,e){if(n[e]===!0)throw"duplicate flag "+e;n[e],n[e]=!0}function nE(n){if(n===void 0)throw Error("Internal Error - Should never get here!");return!0}function tje(){throw Error("Internal Error - Should never get here!")}function rW(n){return n.type==="Character"}const hP=[];for(let n=fi("0");n<=fi("9");n++)hP.push(n);const dP=[fi("_")].concat(hP);for(let n=fi("a");n<=fi("z");n++)dP.push(n);for(let n=fi("A");n<=fi("Z");n++)dP.push(n);const sW=[fi(" "),fi("\f"),fi(`
`),fi("\r"),fi("	"),fi("\v"),fi("	"),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi(""),fi("\u2028"),fi("\u2029"),fi(""),fi(""),fi(""),fi("\uFEFF")],nje=/[0-9a-fA-F]/,YR=/[0-9]/,ije=/[1-9]/;class rje{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const i={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":D1(i,"global");break;case"i":D1(i,"ignoreCase");break;case"m":D1(i,"multiLine");break;case"u":D1(i,"unicode");break;case"y":D1(i,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:i,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}nE(t);const i=this.disjunction();return this.consumeChar(")"),{type:t,value:i,loc:this.loc(e)}}return tje()}quantifier(e=!1){let t;const i=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),t={atLeast:r,atMost:s}):t={atLeast:r,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;nE(t);break}if(!(e===!0&&t===void 0)&&nE(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(i),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),nE(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[fi(`
`),fi("\r"),fi("\u2028"),fi("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=hP;break;case"D":e=hP,t=!0;break;case"s":e=sW;break;case"S":e=sW,t=!0;break;case"w":e=dP;break;case"W":e=dP,t=!0;break}if(nE(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=fi("\f");break;case"n":e=fi(`
`);break;case"r":e=fi("\r");break;case"t":e=fi("	");break;case"v":e=fi("\v");break}if(nE(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:fi("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:fi(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:fi(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const i=this.classAtom();if(i.type,rW(i)&&this.isRangeDash()){this.consumeChar("-");const r=this.classAtom();if(r.type,rW(r)){if(r.value<i.value)throw Error("Range out of order in character class");e.push({from:i.value,to:r.value})}else oF(i.value,e),e.push(fi("-")),oF(r.value,e)}else oF(i.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:fi("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const t=this.disjunction();this.consumeChar(")");const i={type:"Group",capturing:e,value:t};return e&&(i.idx=this.groupIdx),i}positiveInteger(){let e=this.popChar();if(ije.test(e)===!1)throw Error("Expecting a positive integer");for(;YR.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(YR.test(e)===!1)throw Error("Expecting an integer");for(;YR.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:fi(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return YR.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){const s=this.popChar();if(nje.test(s)===!1)throw Error("Expecting a HexDecimal digits");t+=s}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class nH{visitChildren(e){for(const t in e){const i=e[t];e.hasOwnProperty(t)&&(i.type!==void 0?this.visit(i):Array.isArray(i)&&i.forEach(r=>{this.visit(r)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let XO={};const sje=new rje;function oU(n){const e=n.toString();if(XO.hasOwnProperty(e))return XO[e];{const t=sje.pattern(e);return XO[e]=t,t}}function aje(){XO={}}const Ase="Complement Sets are not supported for first char optimization",fP=`Unable to use "first char" lexer optimizations:
`;function oje(n,e=!1){try{const t=oU(n);return a5(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Ase)e&&Tse(`${fP}	Unable to optimize: < ${n.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let i="";e&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),s5(`${fP}
	Failed parsing: < ${n.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+i)}}return[]}function a5(n,e,t){switch(n.type){case"Disjunction":for(let r=0;r<n.value.length;r++)a5(n.value[r],e,t);break;case"Alternative":const i=n.value;for(let r=0;r<i.length;r++){const s=i[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":XR(a.value,e,t);break;case"Set":if(a.complement===!0)throw Error(Ase);ci(a.value,l=>{if(typeof l=="number")XR(l,e,t);else{const c=l;if(t===!0)for(let u=c.from;u<=c.to;u++)XR(u,e,t);else{for(let u=c.from;u<=c.to&&u<nw;u++)XR(u,e,t);if(c.to>=nw){const u=c.from>=nw?c.from:nw,h=c.to,d=Yy(u),f=Yy(h);for(let m=d;m<=f;m++)e[m]=m}}}});break;case"Group":a5(a.value,e,t);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&o5(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return vo(e)}function XR(n,e,t){const i=Yy(n);e[i]=i,t===!0&&lje(n,e)}function lje(n,e){const t=String.fromCharCode(n),i=t.toUpperCase();if(i!==t){const r=Yy(i.charCodeAt(0));e[r]=r}else{const r=t.toLowerCase();if(r!==t){const s=Yy(r.charCodeAt(0));e[s]=s}}}function aW(n,e){return YT(n.value,t=>{if(typeof t=="number")return $c(e,t);{const i=t;return YT(e,r=>i.from<=r&&r<=i.to)!==void 0}})}function o5(n){const e=n.quantifier;return e&&e.atLeast===0?!0:n.value?gr(n.value)?hf(n.value,o5):o5(n.value):!1}class cje extends nH{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){$c(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?aW(e,this.targetCharCodes)===void 0&&(this.found=!0):aW(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function iH(n,e){if(e instanceof RegExp){const t=oU(e),i=new cje(n);return i.visit(t),i.found}else return YT(e,t=>$c(n,t.charCodeAt(0)))!==void 0}const Eb="PATTERN",tw="defaultMode",KR="modes";let Mse=typeof new RegExp("(?:)").sticky=="boolean";function uje(n,e){e=eH(e,{useSticky:Mse,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(S,T)=>T()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{Pje()});let i;t("Reject Lexer.NA",()=>{i=rU(n,S=>S[Eb]===vd.NA)});let r=!1,s;t("Transform Patterns",()=>{r=!1,s=En(i,S=>{const T=S[Eb];if(Bg(T)){const x=T.source;return x.length===1&&x!=="^"&&x!=="$"&&x!=="."&&!T.ignoreCase?x:x.length===2&&x[0]==="\\"&&!$c(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],x[1])?x[1]:e.useSticky?lW(T):oW(T)}else{if(Yg(T))return r=!0,{exec:T};if(typeof T=="object")return r=!0,T;if(typeof T=="string"){if(T.length===1)return T;{const x=T.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),I=new RegExp(x);return e.useSticky?lW(I):oW(I)}}else throw Error("non exhaustive match")}})});let a,o,l,c,u;t("misc mapping",()=>{a=En(i,S=>S.tokenTypeIdx),o=En(i,S=>{const T=S.GROUP;if(T!==vd.SKIPPED){if(Nu(T))return T;if(Fg(T))return!1;throw Error("non exhaustive match")}}),l=En(i,S=>{const T=S.LONGER_ALT;if(T)return gr(T)?En(T,I=>tW(i,I)):[tW(i,T)]}),c=En(i,S=>S.PUSH_MODE),u=En(i,S=>ni(S,"POP_MODE"))});let h;t("Line Terminator Handling",()=>{const S=Ise(e.lineTerminatorCharacters);h=En(i,T=>!1),e.positionTracking!=="onlyOffset"&&(h=En(i,T=>ni(T,"LINE_BREAKS")?!!T.LINE_BREAKS:Ose(T,S)===!1&&iH(S,T.PATTERN)))});let d,f,m,v;t("Misc Mapping #2",()=>{d=En(i,Rse),f=En(s,Oje),m=Pu(i,(S,T)=>{const x=T.GROUP;return Nu(x)&&x!==vd.SKIPPED&&(S[x]=[]),S},{}),v=En(s,(S,T)=>({pattern:s[T],longerAlt:l[T],canLineTerminator:h[T],isCustom:d[T],short:f[T],group:o[T],push:c[T],pop:u[T],tokenTypeIdx:a[T],tokenType:i[T]}))});let _=!0,y=[];return e.safeMode||t("First Char Optimization",()=>{y=Pu(i,(S,T,x)=>{if(typeof T.PATTERN=="string"){const I=T.PATTERN.charCodeAt(0),R=Yy(I);lF(S,R,v[x])}else if(gr(T.START_CHARS_HINT)){let I;ci(T.START_CHARS_HINT,R=>{const N=typeof R=="string"?R.charCodeAt(0):R,L=Yy(N);I!==L&&(I=L,lF(S,L,v[x]))})}else if(Bg(T.PATTERN))if(T.PATTERN.unicode)_=!1,e.ensureOptimizations&&s5(`${fP}	Unable to analyze < ${T.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const I=oje(T.PATTERN,e.ensureOptimizations);Es(I)&&(_=!1),ci(I,R=>{lF(S,R,v[x])})}else e.ensureOptimizations&&s5(`${fP}	TokenType: <${T.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),_=!1;return S},[])}),{emptyGroups:m,patternIdxToConfig:v,charCodeToPatternIdxToConfig:y,hasCustom:r,canBeOptimized:_}}function hje(n,e){let t=[];const i=fje(n);t=t.concat(i.errors);const r=pje(i.valid),s=r.valid;return t=t.concat(r.errors),t=t.concat(dje(s)),t=t.concat(Eje(s)),t=t.concat(Tje(s,e)),t=t.concat(xje(s)),t}function dje(n){let e=[];const t=Rd(n,i=>Bg(i[Eb]));return e=e.concat(gje(t)),e=e.concat(_je(t)),e=e.concat(bje(t)),e=e.concat(Sje(t)),e=e.concat(vje(t)),e}function fje(n){const e=Rd(n,r=>!ni(r,Eb)),t=En(e,r=>({message:"Token Type: ->"+r.name+"<- missing static 'PATTERN' property",type:Ia.MISSING_PATTERN,tokenTypes:[r]})),i=iU(n,e);return{errors:t,valid:i}}function pje(n){const e=Rd(n,r=>{const s=r[Eb];return!Bg(s)&&!Yg(s)&&!ni(s,"exec")&&!Nu(s)}),t=En(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Ia.INVALID_PATTERN,tokenTypes:[r]})),i=iU(n,e);return{errors:t,valid:i}}const mje=/[^\\][$]/;function gje(n){class e extends nH{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const t=Rd(n,r=>{const s=r.PATTERN;try{const a=oU(s),o=new e;return o.visit(a),o.found}catch{return mje.test(s.source)}});return En(t,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ia.EOI_ANCHOR_FOUND,tokenTypes:[r]}))}function vje(n){const e=Rd(n,i=>i.PATTERN.test(""));return En(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' must not match an empty string",type:Ia.EMPTY_MATCH_PATTERN,tokenTypes:[i]}))}const yje=/[^\\[][\^]|^\^/;function _je(n){class e extends nH{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const t=Rd(n,r=>{const s=r.PATTERN;try{const a=oU(s),o=new e;return o.visit(a),o.found}catch{return yje.test(s.source)}});return En(t,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Ia.SOI_ANCHOR_FOUND,tokenTypes:[r]}))}function bje(n){const e=Rd(n,i=>{const r=i[Eb];return r instanceof RegExp&&(r.multiline||r.global)});return En(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Ia.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[i]}))}function Sje(n){const e=[];let t=En(n,s=>Pu(n,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!$c(e,o)&&o.PATTERN!==vd.NA&&(e.push(o),a.push(o)),a),[]));t=YA(t);const i=Rd(t,s=>s.length>1);return En(i,s=>{const a=En(s,l=>l.name);return{message:`The same RegExp pattern ->${pf(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:Ia.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Eje(n){const e=Rd(n,i=>{if(!ni(i,"GROUP"))return!1;const r=i.GROUP;return r!==vd.SKIPPED&&r!==vd.NA&&!Nu(r)});return En(e,i=>({message:"Token Type: ->"+i.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Ia.INVALID_GROUP_TYPE_FOUND,tokenTypes:[i]}))}function Tje(n,e){const t=Rd(n,r=>r.PUSH_MODE!==void 0&&!$c(e,r.PUSH_MODE));return En(t,r=>({message:`Token Type: ->${r.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${r.PUSH_MODE}<-which does not exist`,type:Ia.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[r]}))}function xje(n){const e=[],t=Pu(n,(i,r,s)=>{const a=r.PATTERN;return a===vd.NA||(Nu(a)?i.push({str:a,idx:s,tokenType:r}):Bg(a)&&Cje(a)&&i.push({str:a.source,idx:s,tokenType:r})),i},[]);return ci(n,(i,r)=>{ci(t,({str:s,idx:a,tokenType:o})=>{if(r<a&&wje(s,i.PATTERN)){const l=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${i.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:l,type:Ia.UNREACHABLE_PATTERN,tokenTypes:[i,o]})}})}),e}function wje(n,e){if(Bg(e)){const t=e.exec(n);return t!==null&&t.index===0}else{if(Yg(e))return e(n,0,[],{});if(ni(e,"exec"))return e.exec(n,0,[],{});if(typeof e=="string")return e===n;throw Error("non exhaustive match")}}function Cje(n){return YT([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>n.source.indexOf(t)!==-1)===void 0}function oW(n){const e=n.ignoreCase?"i":"";return new RegExp(`^(?:${n.source})`,e)}function lW(n){const e=n.ignoreCase?"iy":"y";return new RegExp(`${n.source}`,e)}function Aje(n,e,t){const i=[];return ni(n,tw)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+tw+`> property in its definition
`,type:Ia.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),ni(n,KR)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+KR+`> property in its definition
`,type:Ia.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),ni(n,KR)&&ni(n,tw)&&!ni(n.modes,n.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${tw}: <${n.defaultMode}>which does not exist
`,type:Ia.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),ni(n,KR)&&ci(n.modes,(r,s)=>{ci(r,(a,o)=>{if(Fg(a))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:Ia.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(ni(a,"LONGER_ALT")){const l=gr(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];ci(l,c=>{!Fg(c)&&!$c(r,c)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${c.name}> on token <${a.name}> outside of mode <${s}>
`,type:Ia.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),i}function Mje(n,e,t){const i=[];let r=!1;const s=YA(Cu(vo(n.modes))),a=rU(s,l=>l[Eb]===vd.NA),o=Ise(t);return e&&ci(a,l=>{const c=Ose(l,o);if(c!==!1){const h={message:Nje(l,c),type:c.issue,tokenType:l};i.push(h)}else ni(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(r=!0):iH(o,l.PATTERN)&&(r=!0)}),e&&!r&&i.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Ia.NO_LINE_BREAKS_FLAGS}),i}function Rje(n){const e={},t=xd(n);return ci(t,i=>{const r=n[i];if(gr(r))e[i]=[];else throw Error("non exhaustive match")}),e}function Rse(n){const e=n.PATTERN;if(Bg(e))return!1;if(Yg(e))return!0;if(ni(e,"exec"))return!0;if(Nu(e))return!1;throw Error("non exhaustive match")}function Oje(n){return Nu(n)&&n.length===1?n.charCodeAt(0):!1}const Ije={test:function(n){const e=n.length;for(let t=this.lastIndex;t<e;t++){const i=n.charCodeAt(t);if(i===10)return this.lastIndex=t+1,!0;if(i===13)return n.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function Ose(n,e){if(ni(n,"LINE_BREAKS"))return!1;if(Bg(n.PATTERN)){try{iH(e,n.PATTERN)}catch(t){return{issue:Ia.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(Nu(n.PATTERN))return!1;if(Rse(n))return{issue:Ia.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Nje(n,e){if(e.issue===Ia.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${n.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===Ia.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${n.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Ise(n){return En(n,t=>Nu(t)?t.charCodeAt(0):t)}function lF(n,e,t){n[e]===void 0?n[e]=[t]:n[e].push(t)}const nw=256;let KO=[];function Yy(n){return n<nw?n:KO[n]}function Pje(){if(Es(KO)){KO=new Array(65536);for(let n=0;n<65536;n++)KO[n]=n>255?255+~~(n/255):n}}function KA(n,e){const t=n.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function pP(n,e){return n.tokenTypeIdx===e.tokenTypeIdx}let cW=1;const Nse={};function ZA(n){const e=Dje(n);kje(e),Uje(e),Lje(e),ci(e,t=>{t.isParent=t.categoryMatches.length>0})}function Dje(n){let e=Pl(n),t=n,i=!0;for(;i;){t=YA(Cu(En(t,s=>s.CATEGORIES)));const r=iU(t,e);e=e.concat(r),Es(r)?i=!1:t=r}return e}function kje(n){ci(n,e=>{Dse(e)||(Nse[cW]=e,e.tokenTypeIdx=cW++),uW(e)&&!gr(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),uW(e)||(e.CATEGORIES=[]),Bje(e)||(e.categoryMatches=[]),Fje(e)||(e.categoryMatchesMap={})})}function Lje(n){ci(n,e=>{e.categoryMatches=[],ci(e.categoryMatchesMap,(t,i)=>{e.categoryMatches.push(Nse[i].tokenTypeIdx)})})}function Uje(n){ci(n,e=>{Pse([],e)})}function Pse(n,e){ci(n,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),ci(e.CATEGORIES,t=>{const i=n.concat(e);$c(i,t)||Pse(i,t)})}function Dse(n){return ni(n,"tokenTypeIdx")}function uW(n){return ni(n,"CATEGORIES")}function Bje(n){return ni(n,"categoryMatches")}function Fje(n){return ni(n,"categoryMatchesMap")}function zje(n){return ni(n,"tokenTypeIdx")}const jje={buildUnableToPopLexerModeMessage(n){return`Unable to pop Lexer Mode after encountering Token ->${n.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(n,e,t,i,r){return`unexpected character: ->${n.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var Ia;(function(n){n[n.MISSING_PATTERN=0]="MISSING_PATTERN",n[n.INVALID_PATTERN=1]="INVALID_PATTERN",n[n.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",n[n.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",n[n.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",n[n.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",n[n.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",n[n.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",n[n.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",n[n.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",n[n.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",n[n.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",n[n.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",n[n.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",n[n.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",n[n.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",n[n.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",n[n.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Ia||(Ia={}));const iw={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:jje,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(iw);let vd=class{constructor(e,t=iw){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(r,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${r}>`);const{time:o,value:l}=xse(s),c=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${a}<-- <${r}> time: ${o}ms`),this.traceInitIndent--,l}else return s()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Iu({},iw,t);const i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let r,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===iw.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Ije;else if(this.config.lineTerminatorCharacters===iw.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),gr(e)?r={modes:{defaultMode:Pl(e)},defaultMode:tw}:(s=!1,r=Pl(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Aje(r,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Mje(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),r.modes=r.modes?r.modes:{},ci(r.modes,(o,l)=>{r.modes[l]=rU(o,c=>Fg(c))});const a=xd(r.modes);if(ci(r.modes,(o,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(hje(o,a))}),Es(this.lexerDefinitionErrors)){ZA(o);let c;this.TRACE_INIT("analyzeTokenTypes",()=>{c=uje(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=c.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=c.charCodeToPatternIdxToConfig,this.emptyGroups=Iu({},this.emptyGroups,c.emptyGroups),this.hasCustom=c.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=c.canBeOptimized}})}),this.defaultMode=r.defaultMode,!Es(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const l=En(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}ci(this.lexerDefinitionWarning,o=>{Tse(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Mse?(this.chopInput=qT,this.match=this.matchWithTest):(this.updateLastIndex=No,this.match=this.matchWithExec),s&&(this.handleModes=No),this.trackStartLines===!1&&(this.computeNewColumn=qT),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=No),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=Pu(this.canModeBeOptimized,(l,c,u)=>(c===!1&&l.push(u),l),[]);if(t.ensureOptimizations&&!Es(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{aje()}),this.TRACE_INIT("toFastProperties",()=>{wse(this)})})}tokenize(e,t=this.defaultMode){if(!Es(this.lexerDefinitionErrors)){const r=En(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+r)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let i,r,s,a,o,l,c,u,h,d,f,m,v,_,y;const S=e,T=S.length;let x=0,I=0;const R=this.hasCustom?0:Math.floor(e.length/10),N=new Array(R),L=[];let k=this.trackStartLines?1:void 0,z=this.trackStartLines?1:void 0;const Z=Rje(this.emptyGroups),H=this.trackStartLines,q=this.config.lineTerminatorsPattern;let U=0,ee=[],W=[];const Q=[],X=[];Object.freeze(X);let Y;function ae(){return ee}function se(Le){const He=Yy(Le),$e=W[He];return $e===void 0?X:$e}const ue=Le=>{if(Q.length===1&&Le.tokenType.PUSH_MODE===void 0){const He=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Le);L.push({offset:Le.startOffset,line:Le.startLine,column:Le.startColumn,length:Le.image.length,message:He})}else{Q.pop();const He=WT(Q);ee=this.patternIdxToConfig[He],W=this.charCodeToPatternIdxToConfig[He],U=ee.length;const $e=this.canModeBeOptimized[He]&&this.config.safeMode===!1;W&&$e?Y=se:Y=ae}};function Ne(Le){Q.push(Le),W=this.charCodeToPatternIdxToConfig[Le],ee=this.patternIdxToConfig[Le],U=ee.length,U=ee.length;const He=this.canModeBeOptimized[Le]&&this.config.safeMode===!1;W&&He?Y=se:Y=ae}Ne.call(this,t);let ve;const _e=this.config.recoveryEnabled;for(;x<T;){l=null;const Le=S.charCodeAt(x),He=Y(Le),$e=He.length;for(i=0;i<$e;i++){ve=He[i];const bt=ve.pattern;c=null;const Ct=ve.short;if(Ct!==!1?Le===Ct&&(l=bt):ve.isCustom===!0?(y=bt.exec(S,x,N,Z),y!==null?(l=y[0],y.payload!==void 0&&(c=y.payload)):l=null):(this.updateLastIndex(bt,x),l=this.match(bt,e,x)),l!==null){if(o=ve.longerAlt,o!==void 0){const Lt=o.length;for(s=0;s<Lt;s++){const Gt=ee[o[s]],qt=Gt.pattern;if(u=null,Gt.isCustom===!0?(y=qt.exec(S,x,N,Z),y!==null?(a=y[0],y.payload!==void 0&&(u=y.payload)):a=null):(this.updateLastIndex(qt,x),a=this.match(qt,e,x)),a&&a.length>l.length){l=a,c=u,ve=Gt;break}}}break}}if(l!==null){if(h=l.length,d=ve.group,d!==void 0&&(f=ve.tokenTypeIdx,m=this.createTokenInstance(l,x,f,ve.tokenType,k,z,h),this.handlePayload(m,c),d===!1?I=this.addToken(N,I,m):Z[d].push(m)),e=this.chopInput(e,h),x=x+h,z=this.computeNewColumn(z,h),H===!0&&ve.canLineTerminator===!0){let bt=0,Ct,Lt;q.lastIndex=0;do Ct=q.test(l),Ct===!0&&(Lt=q.lastIndex-1,bt++);while(Ct===!0);bt!==0&&(k=k+bt,z=h-Lt,this.updateTokenEndLineColumnLocation(m,d,Lt,bt,k,z,h))}this.handleModes(ve,ue,Ne,m)}else{const bt=x,Ct=k,Lt=z;let Gt=_e===!1;for(;Gt===!1&&x<T;)for(e=this.chopInput(e,1),x++,r=0;r<U;r++){const qt=ee[r],V=qt.pattern,Ae=qt.short;if(Ae!==!1?S.charCodeAt(x)===Ae&&(Gt=!0):qt.isCustom===!0?Gt=V.exec(S,x,N,Z)!==null:(this.updateLastIndex(V,x),Gt=V.exec(e)!==null),Gt===!0)break}if(v=x-bt,z=this.computeNewColumn(z,v),_=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(S,bt,v,Ct,Lt),L.push({offset:bt,line:Ct,column:Lt,length:v,message:_}),_e===!1)break}}return this.hasCustom||(N.length=I),{tokens:N,groups:Z,errors:L}}handleModes(e,t,i,r){if(e.pop===!0){const s=e.push;t(r),s!==void 0&&i.call(this,s)}else e.push!==void 0&&i.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,i,r,s,a,o){let l,c;t!==void 0&&(l=i===o-1,c=l?-1:0,r===1&&l===!0||(e.endLine=s+c,e.endColumn=a-1+-c))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,i,r){return{image:e,startOffset:t,tokenTypeIdx:i,tokenType:r}}createStartOnlyToken(e,t,i,r,s,a){return{image:e,startOffset:t,startLine:s,startColumn:a,tokenTypeIdx:i,tokenType:r}}createFullToken(e,t,i,r,s,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:i,tokenType:r}}addTokenUsingPush(e,t,i){return e.push(i),t}addTokenUsingMemberAccess(e,t,i){return e[t]=i,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,i){return e.test(t)===!0?t.substring(i,e.lastIndex):null}matchWithExec(e,t){const i=e.exec(t);return i!==null?i[0]:null}};vd.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";vd.NA=/NOT_APPLICABLE/;function kw(n){return kse(n)?n.LABEL:n.name}function kse(n){return Nu(n.LABEL)&&n.LABEL!==""}const Hje="parent",hW="categories",dW="label",fW="group",pW="push_mode",mW="pop_mode",gW="longer_alt",vW="line_breaks",yW="start_chars_hint";function Lse(n){return Vje(n)}function Vje(n){const e=n.pattern,t={};if(t.name=n.name,Fg(e)||(t.PATTERN=e),ni(n,Hje))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return ni(n,hW)&&(t.CATEGORIES=n[hW]),ZA([t]),ni(n,dW)&&(t.LABEL=n[dW]),ni(n,fW)&&(t.GROUP=n[fW]),ni(n,mW)&&(t.POP_MODE=n[mW]),ni(n,pW)&&(t.PUSH_MODE=n[pW]),ni(n,gW)&&(t.LONGER_ALT=n[gW]),ni(n,vW)&&(t.LINE_BREAKS=n[vW]),ni(n,yW)&&(t.START_CHARS_HINT=n[yW]),t}const Tb=Lse({name:"EOF",pattern:vd.NA});ZA([Tb]);function rH(n,e,t,i,r,s,a,o){return{image:e,startOffset:t,endOffset:i,startLine:r,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:n.tokenTypeIdx,tokenType:n}}function Gje(n,e){return KA(n,e)}const Use={buildMismatchTokenMessage({expected:n,actual:e,previous:t,ruleName:i}){return`Expecting ${kse(n)?`--> ${kw(n)} <--`:`token of type --> ${n.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:n,ruleName:e}){return"Redundant input, expecting EOF but found: "+n.image},buildNoViableAltMessage({expectedPathsPerAlt:n,actual:e,previous:t,customUserDescription:i,ruleName:r}){const s="Expecting: ",o=`
but found: '`+pf(e).image+"'";if(i)return s+i+o;{const l=Pu(n,(d,f)=>d.concat(f),[]),c=En(l,d=>`[${En(d,f=>kw(f)).join(", ")}]`),h=`one of these possible Token sequences:
${En(c,(d,f)=>`  ${f+1}. ${d}`).join(`
`)}`;return s+h+o}},buildEarlyExitMessage({expectedIterationPaths:n,actual:e,customUserDescription:t,ruleName:i}){const r="Expecting: ",a=`
but found: '`+pf(e).image+"'";if(t)return r+t+a;{const l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${En(n,c=>`[${En(c,u=>kw(u)).join(",")}]`).join(" ,")}>`;return r+l+a}}};Object.freeze(Use);const qje={buildRuleNotFoundError(n,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+n.name+"<-"}},j_={buildDuplicateFoundError(n,e){function t(u){return u instanceof ha?u.terminalType.name:u instanceof Du?u.nonTerminalName:""}const i=n.name,r=pf(e),s=r.idx,a=fp(r),o=t(r),l=s>0;let c=`->${a}${l?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${i}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildNamespaceConflictError(n){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${n.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(n){const e=En(n.prefixPath,r=>kw(r)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;return`Ambiguous alternatives: <${n.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(n){const e=En(n.prefixPath,r=>kw(r)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;let i=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i},buildEmptyRepetitionError(n){let e=fp(n.repetition);return n.repetition.idx!==0&&(e+=n.repetition.idx),`The repetition <${e}> within Rule <${n.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(n){return"deprecated"},buildEmptyAlternationError(n){return`Ambiguous empty alternative: <${n.emptyChoiceIdx+1}> in <OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(n){return`An Alternation cannot have more than 256 alternatives:
<OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
 has ${n.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(n){const e=n.topLevelRule.name,t=En(n.leftRecursionPath,s=>s.name),i=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${i}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(n){return"deprecated"},buildDuplicateRuleNameError(n){let e;return n.topLevelRule instanceof Lx?e=n.topLevelRule.name:e=n.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${n.grammarName}<-`}};function $je(n,e){const t=new Wje(n,e);return t.resolveRefs(),t.errors}class Wje extends Xb{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){ci(vo(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const i=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:i,type:Hc.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class Yje extends aU{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Pl(this.path.ruleStack).reverse(),this.occurrenceStack=Pl(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,i){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const r=t.concat(i);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}updateExpectedNext(){Es(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Xje extends Yje{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,i){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const r=t.concat(i),s=new ku({definition:r});this.possibleTokTypes=XA(s),this.found=!0}}}class lU extends aU{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Kje extends lU{walkMany(e,t,i){if(e.idx===this.occurrence){const r=pf(t.concat(i));this.result.isEndOfRule=r===void 0,r instanceof ha&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkMany(e,t,i)}}class _W extends lU{walkManySep(e,t,i){if(e.idx===this.occurrence){const r=pf(t.concat(i));this.result.isEndOfRule=r===void 0,r instanceof ha&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkManySep(e,t,i)}}class Zje extends lU{walkAtLeastOne(e,t,i){if(e.idx===this.occurrence){const r=pf(t.concat(i));this.result.isEndOfRule=r===void 0,r instanceof ha&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOne(e,t,i)}}class bW extends lU{walkAtLeastOneSep(e,t,i){if(e.idx===this.occurrence){const r=pf(t.concat(i));this.result.isEndOfRule=r===void 0,r instanceof ha&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOneSep(e,t,i)}}function l5(n,e,t=[]){t=Pl(t);let i=[],r=0;function s(o){return o.concat(Al(n,r+1))}function a(o){const l=l5(s(o),e,t);return i.concat(l)}for(;t.length<e&&r<n.length;){const o=n[r];if(o instanceof ku)return a(o.definition);if(o instanceof Du)return a(o.definition);if(o instanceof Au)i=a(o.definition);else if(o instanceof Kp){const l=o.definition.concat([new Uo({definition:o.definition})]);return a(l)}else if(o instanceof Zp){const l=[new ku({definition:o.definition}),new Uo({definition:[new ha({terminalType:o.separator})].concat(o.definition)})];return a(l)}else if(o instanceof xf){const l=o.definition.concat([new Uo({definition:[new ha({terminalType:o.separator})].concat(o.definition)})]);i=a(l)}else if(o instanceof Uo){const l=o.definition.concat([new Uo({definition:o.definition})]);i=a(l)}else{if(o instanceof wf)return ci(o.definition,l=>{Es(l.definition)===!1&&(i=a(l.definition))}),i;if(o instanceof ha)t.push(o.terminalType);else throw Error("non exhaustive match")}r++}return i.push({partialPath:t,suffixDef:Al(n,r)}),i}function Bse(n,e,t,i){const r="EXIT_NONE_TERMINAL",s=[r],a="EXIT_ALTERNATIVE";let o=!1;const l=e.length,c=l-i-1,u=[],h=[];for(h.push({idx:-1,def:n,ruleStack:[],occurrenceStack:[]});!Es(h);){const d=h.pop();if(d===a){o&&WT(h).idx<=c&&h.pop();continue}const f=d.def,m=d.idx,v=d.ruleStack,_=d.occurrenceStack;if(Es(f))continue;const y=f[0];if(y===r){const S={idx:m,def:Al(f),ruleStack:PC(v),occurrenceStack:PC(_)};h.push(S)}else if(y instanceof ha)if(m<l-1){const S=m+1,T=e[S];if(t(T,y.terminalType)){const x={idx:S,def:Al(f),ruleStack:v,occurrenceStack:_};h.push(x)}}else if(m===l-1)u.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:v,occurrenceStack:_}),o=!0;else throw Error("non exhaustive match");else if(y instanceof Du){const S=Pl(v);S.push(y.nonTerminalName);const T=Pl(_);T.push(y.idx);const x={idx:m,def:y.definition.concat(s,Al(f)),ruleStack:S,occurrenceStack:T};h.push(x)}else if(y instanceof Au){const S={idx:m,def:Al(f),ruleStack:v,occurrenceStack:_};h.push(S),h.push(a);const T={idx:m,def:y.definition.concat(Al(f)),ruleStack:v,occurrenceStack:_};h.push(T)}else if(y instanceof Kp){const S=new Uo({definition:y.definition,idx:y.idx}),T=y.definition.concat([S],Al(f)),x={idx:m,def:T,ruleStack:v,occurrenceStack:_};h.push(x)}else if(y instanceof Zp){const S=new ha({terminalType:y.separator}),T=new Uo({definition:[S].concat(y.definition),idx:y.idx}),x=y.definition.concat([T],Al(f)),I={idx:m,def:x,ruleStack:v,occurrenceStack:_};h.push(I)}else if(y instanceof xf){const S={idx:m,def:Al(f),ruleStack:v,occurrenceStack:_};h.push(S),h.push(a);const T=new ha({terminalType:y.separator}),x=new Uo({definition:[T].concat(y.definition),idx:y.idx}),I=y.definition.concat([x],Al(f)),R={idx:m,def:I,ruleStack:v,occurrenceStack:_};h.push(R)}else if(y instanceof Uo){const S={idx:m,def:Al(f),ruleStack:v,occurrenceStack:_};h.push(S),h.push(a);const T=new Uo({definition:y.definition,idx:y.idx}),x=y.definition.concat([T],Al(f)),I={idx:m,def:x,ruleStack:v,occurrenceStack:_};h.push(I)}else if(y instanceof wf)for(let S=y.definition.length-1;S>=0;S--){const T=y.definition[S],x={idx:m,def:T.definition.concat(Al(f)),ruleStack:v,occurrenceStack:_};h.push(x),h.push(a)}else if(y instanceof ku)h.push({idx:m,def:y.definition.concat(Al(f)),ruleStack:v,occurrenceStack:_});else if(y instanceof Lx)h.push(Jje(y,m,v,_));else throw Error("non exhaustive match")}return u}function Jje(n,e,t,i){const r=Pl(t);r.push(n.name);const s=Pl(i);return s.push(1),{idx:e,def:n.definition,ruleStack:r,occurrenceStack:s}}var Ma;(function(n){n[n.OPTION=0]="OPTION",n[n.REPETITION=1]="REPETITION",n[n.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",n[n.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",n[n.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",n[n.ALTERNATION=5]="ALTERNATION"})(Ma||(Ma={}));function Fse(n){if(n instanceof Au||n==="Option")return Ma.OPTION;if(n instanceof Uo||n==="Repetition")return Ma.REPETITION;if(n instanceof Kp||n==="RepetitionMandatory")return Ma.REPETITION_MANDATORY;if(n instanceof Zp||n==="RepetitionMandatoryWithSeparator")return Ma.REPETITION_MANDATORY_WITH_SEPARATOR;if(n instanceof xf||n==="RepetitionWithSeparator")return Ma.REPETITION_WITH_SEPARATOR;if(n instanceof wf||n==="Alternation")return Ma.ALTERNATION;throw Error("non exhaustive match")}function Qje(n,e,t,i,r,s){const a=sH(n,e,t),o=Hse(a)?pP:KA;return s(a,i,o,r)}function eHe(n,e,t,i,r,s){const a=aH(n,e,r,t),o=Hse(a)?pP:KA;return s(a[0],o,i)}function tHe(n,e,t,i){const r=n.length,s=hf(n,a=>hf(a,o=>o.length===1));if(e)return function(a){const o=En(a,l=>l.GATE);for(let l=0;l<r;l++){const c=n[l],u=c.length,h=o[l];if(!(h!==void 0&&h.call(this)===!1))e:for(let d=0;d<u;d++){const f=c[d],m=f.length;for(let v=0;v<m;v++){const _=this.LA(v+1);if(t(_,f[v])===!1)continue e}return l}}};if(s&&!i){const a=En(n,l=>Cu(l)),o=Pu(a,(l,c,u)=>(ci(c,h=>{ni(l,h.tokenTypeIdx)||(l[h.tokenTypeIdx]=u),ci(h.categoryMatches,d=>{ni(l,d)||(l[d]=u)})}),l),{});return function(){const l=this.LA(1);return o[l.tokenTypeIdx]}}else return function(){for(let a=0;a<r;a++){const o=n[a],l=o.length;e:for(let c=0;c<l;c++){const u=o[c],h=u.length;for(let d=0;d<h;d++){const f=this.LA(d+1);if(t(f,u[d])===!1)continue e}return a}}}}function nHe(n,e,t){const i=hf(n,s=>s.length===1),r=n.length;if(i&&!t){const s=Cu(n);if(s.length===1&&Es(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=Pu(s,(o,l,c)=>(o[l.tokenTypeIdx]=!0,ci(l.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<r;s++){const a=n[s],o=a.length;for(let l=0;l<o;l++){const c=this.LA(l+1);if(e(c,a[l])===!1)continue e}return!0}return!1}}class iHe extends aU{constructor(e,t,i){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=i}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,i,r){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=i.concat(r),!0):!1}walkOption(e,t,i){this.checkIsTarget(e,Ma.OPTION,t,i)||super.walkOption(e,t,i)}walkAtLeastOne(e,t,i){this.checkIsTarget(e,Ma.REPETITION_MANDATORY,t,i)||super.walkOption(e,t,i)}walkAtLeastOneSep(e,t,i){this.checkIsTarget(e,Ma.REPETITION_MANDATORY_WITH_SEPARATOR,t,i)||super.walkOption(e,t,i)}walkMany(e,t,i){this.checkIsTarget(e,Ma.REPETITION,t,i)||super.walkOption(e,t,i)}walkManySep(e,t,i){this.checkIsTarget(e,Ma.REPETITION_WITH_SEPARATOR,t,i)||super.walkOption(e,t,i)}}class zse extends Xb{constructor(e,t,i){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=i,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Ma.OPTION)}visitRepetition(e){this.checkIsTarget(e,Ma.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Ma.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Ma.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Ma.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Ma.ALTERNATION)}}function SW(n){const e=new Array(n);for(let t=0;t<n;t++)e[t]=[];return e}function cF(n){let e=[""];for(let t=0;t<n.length;t++){const i=n[t],r=[];for(let s=0;s<e.length;s++){const a=e[s];r.push(a+"_"+i.tokenTypeIdx);for(let o=0;o<i.categoryMatches.length;o++){const l="_"+i.categoryMatches[o];r.push(a+l)}}e=r}return e}function rHe(n,e,t){for(let i=0;i<n.length;i++){if(i===t)continue;const r=n[i];for(let s=0;s<e.length;s++){const a=e[s];if(r[a]===!0)return!1}}return!0}function jse(n,e){const t=En(n,a=>l5([a],1)),i=SW(t.length),r=En(t,a=>{const o={};return ci(a,l=>{const c=cF(l.partialPath);ci(c,u=>{o[u]=!0})}),o});let s=t;for(let a=1;a<=e;a++){const o=s;s=SW(o.length);for(let l=0;l<o.length;l++){const c=o[l];for(let u=0;u<c.length;u++){const h=c[u].partialPath,d=c[u].suffixDef,f=cF(h);if(rHe(r,f,l)||Es(d)||h.length===e){const v=i[l];if(c5(v,h)===!1){v.push(h);for(let _=0;_<f.length;_++){const y=f[_];r[l][y]=!0}}}else{const v=l5(d,a+1,h);s[l]=s[l].concat(v),ci(v,_=>{const y=cF(_.partialPath);ci(y,S=>{r[l][S]=!0})})}}}}return i}function sH(n,e,t,i){const r=new zse(n,Ma.ALTERNATION,i);return e.accept(r),jse(r.result,t)}function aH(n,e,t,i){const r=new zse(n,t);e.accept(r);const s=r.result,o=new iHe(e,n,t).startWalking(),l=new ku({definition:s}),c=new ku({definition:o});return jse([l,c],i)}function c5(n,e){e:for(let t=0;t<n.length;t++){const i=n[t];if(i.length===e.length){for(let r=0;r<i.length;r++){const s=e[r],a=i[r];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function sHe(n,e){return n.length<e.length&&hf(n,(t,i)=>{const r=e[i];return t===r||r.categoryMatchesMap[t.tokenTypeIdx]})}function Hse(n){return hf(n,e=>hf(e,t=>hf(t,i=>Es(i.categoryMatches))))}function aHe(n){const e=n.lookaheadStrategy.validate({rules:n.rules,tokenTypes:n.tokenTypes,grammarName:n.grammarName});return En(e,t=>Object.assign({type:Hc.CUSTOM_LOOKAHEAD_VALIDATION},t))}function oHe(n,e,t,i){const r=gd(n,l=>lHe(l,t)),s=bHe(n,e,t),a=gd(n,l=>gHe(l,t)),o=gd(n,l=>hHe(l,n,i,t));return r.concat(s,a,o)}function lHe(n,e){const t=new uHe;n.accept(t);const i=t.allProductions,r=Ese(i,cHe),s=Tf(r,o=>o.length>1);return En(vo(s),o=>{const l=pf(o),c=e.buildDuplicateFoundError(n,o),u=fp(l),h={message:c,type:Hc.DUPLICATE_PRODUCTIONS,ruleName:n.name,dslName:u,occurrence:l.idx},d=Vse(l);return d&&(h.parameter=d),h})}function cHe(n){return`${fp(n)}_#_${n.idx}_#_${Vse(n)}`}function Vse(n){return n instanceof ha?n.terminalType.name:n instanceof Du?n.nonTerminalName:""}class uHe extends Xb{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function hHe(n,e,t,i){const r=[];if(Pu(e,(a,o)=>o.name===n.name?a+1:a,0)>1){const a=i.buildDuplicateRuleNameError({topLevelRule:n,grammarName:t});r.push({message:a,type:Hc.DUPLICATE_RULE_NAME,ruleName:n.name})}return r}function dHe(n,e,t){const i=[];let r;return $c(e,n)||(r=`Invalid rule override, rule: ->${n}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,i.push({message:r,type:Hc.INVALID_RULE_OVERRIDE,ruleName:n})),i}function Gse(n,e,t,i=[]){const r=[],s=ZO(e.definition);if(Es(s))return[];{const a=n.name;$c(s,n)&&r.push({message:t.buildLeftRecursionError({topLevelRule:n,leftRecursionPath:i}),type:Hc.LEFT_RECURSION,ruleName:a});const l=iU(s,i.concat([n])),c=gd(l,u=>{const h=Pl(i);return h.push(u),Gse(n,u,t,h)});return r.concat(c)}}function ZO(n){let e=[];if(Es(n))return e;const t=pf(n);if(t instanceof Du)e.push(t.referencedRule);else if(t instanceof ku||t instanceof Au||t instanceof Kp||t instanceof Zp||t instanceof xf||t instanceof Uo)e=e.concat(ZO(t.definition));else if(t instanceof wf)e=Cu(En(t.definition,s=>ZO(s.definition)));else if(!(t instanceof ha))throw Error("non exhaustive match");const i=uP(t),r=n.length>1;if(i&&r){const s=Al(n);return e.concat(ZO(s))}else return e}class oH extends Xb{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function fHe(n,e){const t=new oH;n.accept(t);const i=t.alternations;return gd(i,s=>{const a=PC(s.definition);return gd(a,(o,l)=>{const c=Bse([o],[],KA,1);return Es(c)?[{message:e.buildEmptyAlternationError({topLevelRule:n,alternation:s,emptyChoiceIdx:l}),type:Hc.NONE_LAST_EMPTY_ALT,ruleName:n.name,occurrence:s.idx,alternative:l+1}]:[]})})}function pHe(n,e,t){const i=new oH;n.accept(i);let r=i.alternations;return r=rU(r,a=>a.ignoreAmbiguities===!0),gd(r,a=>{const o=a.idx,l=a.maxLookahead||e,c=sH(o,n,l,a),u=yHe(c,a,n,t),h=_He(c,a,n,t);return u.concat(h)})}class mHe extends Xb{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function gHe(n,e){const t=new oH;n.accept(t);const i=t.alternations;return gd(i,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:n,alternation:s}),type:Hc.TOO_MANY_ALTS,ruleName:n.name,occurrence:s.idx}]:[])}function vHe(n,e,t){const i=[];return ci(n,r=>{const s=new mHe;r.accept(s);const a=s.allProductions;ci(a,o=>{const l=Fse(o),c=o.maxLookahead||e,u=o.idx,d=aH(u,r,l,c)[0];if(Es(Cu(d))){const f=t.buildEmptyRepetitionError({topLevelRule:r,repetition:o});i.push({message:f,type:Hc.NO_NON_EMPTY_LOOKAHEAD,ruleName:r.name})}})}),i}function yHe(n,e,t,i){const r=[],s=Pu(n,(o,l,c)=>(e.definition[c].ignoreAmbiguities===!0||ci(l,u=>{const h=[c];ci(n,(d,f)=>{c!==f&&c5(d,u)&&e.definition[f].ignoreAmbiguities!==!0&&h.push(f)}),h.length>1&&!c5(r,u)&&(r.push(u),o.push({alts:h,path:u}))}),o),[]);return En(s,o=>{const l=En(o.alts,u=>u+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:l,prefixPath:o.path}),type:Hc.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:o.alts}})}function _He(n,e,t,i){const r=Pu(n,(a,o,l)=>{const c=En(o,u=>({idx:l,path:u}));return a.concat(c)},[]);return YA(gd(r,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const l=a.idx,c=a.path,u=Rd(r,d=>e.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<l&&sHe(d.path,c));return En(u,d=>{const f=[d.idx+1,l+1],m=e.idx===0?"":e.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:f,prefixPath:d.path}),type:Hc.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:m,alternatives:f}})}))}function bHe(n,e,t){const i=[],r=En(e,s=>s.name);return ci(n,s=>{const a=s.name;if($c(r,a)){const o=t.buildNamespaceConflictError(s);i.push({message:o,type:Hc.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),i}function SHe(n){const e=eH(n,{errMsgProvider:qje}),t={};return ci(n.rules,i=>{t[i.name]=i}),$je(t,e.errMsgProvider)}function EHe(n){return n=eH(n,{errMsgProvider:j_}),oHe(n.rules,n.tokenTypes,n.errMsgProvider,n.grammarName)}const qse="MismatchedTokenException",$se="NoViableAltException",Wse="EarlyExitException",Yse="NotAllInputParsedException",Xse=[qse,$se,Wse,Yse];Object.freeze(Xse);function mP(n){return $c(Xse,n.name)}class cU extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Kse extends cU{constructor(e,t,i){super(e,t),this.previousToken=i,this.name=qse}}class THe extends cU{constructor(e,t,i){super(e,t),this.previousToken=i,this.name=$se}}class xHe extends cU{constructor(e,t){super(e,t),this.name=Yse}}class wHe extends cU{constructor(e,t,i){super(e,t),this.previousToken=i,this.name=Wse}}const uF={},Zse="InRuleRecoveryException";class CHe extends Error{constructor(e){super(e),this.name=Zse}}class AHe{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=ni(e,"recoveryEnabled")?e.recoveryEnabled:zg.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=MHe)}getTokenToInsert(e){const t=rH(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,i,r){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let l=!1;const c=this.LA(1);let u=this.LA(1);const h=()=>{const d=this.LA(0),f=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:c,previous:d,ruleName:this.getCurrRuleFullName()}),m=new Kse(f,c,this.LA(0));m.resyncedTokens=PC(o),this.SAVE_ERROR(m)};for(;!l;)if(this.tokenMatcher(u,r)){h();return}else if(i.call(this)){h(),e.apply(this,t);return}else this.tokenMatcher(u,s)?l=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,i){return!(i===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const i=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(i)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const i=this.SKIP_TOKEN();return this.consumeToken(),i}throw new CHe("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||Es(t))return!1;const i=this.LA(1);return YT(t,s=>this.tokenMatcher(i,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),i=this.getFollowSetFromFollowKey(t);return $c(i,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),i=2;for(;;){const r=YT(e,s=>Gje(t,s));if(r!==void 0)return r;t=this.LA(i),i++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return uF;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),i=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(i)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return En(e,(i,r)=>r===0?uF:{ruleName:this.shortRuleNameToFullName(i),idxInCallingRule:t[r],inRule:this.shortRuleNameToFullName(e[r-1])})}flattenFollowSet(){const e=En(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return Cu(e)}getFollowSetFromFollowKey(e){if(e===uF)return[Tb];const t=e.ruleName+e.idxInCallingRule+Cse+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Tb)||t.push(e),t}reSyncTo(e){const t=[];let i=this.LA(1);for(;this.tokenMatcher(i,e)===!1;)i=this.SKIP_TOKEN(),this.addToResyncTokens(i,t);return PC(t)}attemptInRepetitionRecovery(e,t,i,r,s,a,o){}getCurrentGrammarPath(e,t){const i=this.getHumanReadableRuleStack(),r=Pl(this.RULE_OCCURRENCE_STACK);return{ruleStack:i,occurrenceStack:r,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return En(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function MHe(n,e,t,i,r,s,a){const o=this.getKeyForAutomaticLookahead(i,r);let l=this.firstAfterRepMap[o];if(l===void 0){const d=this.getCurrRuleFullName(),f=this.getGAstProductions()[d];l=new s(f,r).startWalking(),this.firstAfterRepMap[o]=l}let c=l.token,u=l.occurrence;const h=l.isEndOfRule;this.RULE_STACK.length===1&&h&&c===void 0&&(c=Tb,u=1),!(c===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(c,u,a)&&this.tryInRepetitionRecovery(n,e,t,c)}const RHe=4,f0=8,Jse=1<<f0,Qse=2<<f0,u5=3<<f0,h5=4<<f0,d5=5<<f0,JO=6<<f0;function hF(n,e,t){return t|e|n}class OHe{constructor(e){var t;this.maxLookahead=(t=e==null?void 0:e.maxLookahead)!==null&&t!==void 0?t:zg.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(Es(t)){const i=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...i,...r,...s]}return t}validateNoLeftRecursion(e){return gd(e,t=>Gse(t,t,j_))}validateEmptyOrAlternatives(e){return gd(e,t=>fHe(t,j_))}validateAmbiguousAlternationAlternatives(e,t){return gd(e,i=>pHe(i,t,j_))}validateSomeNonEmptyLookaheadPath(e,t){return vHe(e,t,j_)}buildLookaheadForAlternation(e){return Qje(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,tHe)}buildLookaheadForOptional(e){return eHe(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Fse(e.prodType),nHe)}}class IHe{initLooksAhead(e){this.dynamicTokensEnabled=ni(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:zg.dynamicTokensEnabled,this.maxLookahead=ni(e,"maxLookahead")?e.maxLookahead:zg.maxLookahead,this.lookaheadStrategy=ni(e,"lookaheadStrategy")?e.lookaheadStrategy:new OHe({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ci(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:i,repetition:r,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:l}=PHe(t);ci(i,c=>{const u=c.idx===0?"":c.idx;this.TRACE_INIT(`${fp(c)}${u}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:c.idx,rule:t,maxLookahead:c.maxLookahead||this.maxLookahead,hasPredicates:c.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),d=hF(this.fullRuleNameToShort[t.name],Jse,c.idx);this.setLaFuncCache(d,h)})}),ci(r,c=>{this.computeLookaheadFunc(t,c.idx,u5,"Repetition",c.maxLookahead,fp(c))}),ci(s,c=>{this.computeLookaheadFunc(t,c.idx,Qse,"Option",c.maxLookahead,fp(c))}),ci(a,c=>{this.computeLookaheadFunc(t,c.idx,h5,"RepetitionMandatory",c.maxLookahead,fp(c))}),ci(o,c=>{this.computeLookaheadFunc(t,c.idx,JO,"RepetitionMandatoryWithSeparator",c.maxLookahead,fp(c))}),ci(l,c=>{this.computeLookaheadFunc(t,c.idx,d5,"RepetitionWithSeparator",c.maxLookahead,fp(c))})})})}computeLookaheadFunc(e,t,i,r,s,a){this.TRACE_INIT(`${a}${t===0?"":t}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),l=hF(this.fullRuleNameToShort[e.name],i,t);this.setLaFuncCache(l,o)})}getKeyForAutomaticLookahead(e,t){const i=this.getLastExplicitRuleShortName();return hF(i,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class NHe extends Xb{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const ZR=new NHe;function PHe(n){ZR.reset(),n.accept(ZR);const e=ZR.dslMethods;return ZR.reset(),e}function EW(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.endOffset=e.endOffset):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset)}function TW(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.startColumn=e.startColumn,n.startLine=e.startLine,n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine)}function DHe(n,e,t){n.children[t]===void 0?n.children[t]=[e]:n.children[t].push(e)}function kHe(n,e,t){n.children[e]===void 0?n.children[e]=[t]:n.children[e].push(t)}const LHe="name";function eae(n,e){Object.defineProperty(n,LHe,{enumerable:!1,configurable:!0,writable:!1,value:e})}function UHe(n,e){const t=xd(n),i=t.length;for(let r=0;r<i;r++){const s=t[r],a=n[s],o=a.length;for(let l=0;l<o;l++){const c=a[l];c.tokenTypeIdx===void 0&&this[c.name](c.children,e)}}}function BHe(n,e){const t=function(){};eae(t,n+"BaseSemantics");const i={visit:function(r,s){if(gr(r)&&(r=r[0]),!Fg(r))return this[r.name](r.children,s)},validateVisitor:function(){const r=zHe(this,e);if(!Es(r)){const s=En(r,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=i,t.prototype.constructor=t,t._RULE_NAMES=e,t}function FHe(n,e,t){const i=function(){};eae(i,n+"BaseSemanticsWithDefaults");const r=Object.create(t.prototype);return ci(e,s=>{r[s]=UHe}),i.prototype=r,i.prototype.constructor=i,i}var f5;(function(n){n[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD"})(f5||(f5={}));function zHe(n,e){return jHe(n,e)}function jHe(n,e){const t=Rd(e,r=>Yg(n[r])===!1),i=En(t,r=>({msg:`Missing visitor method: <${r}> on ${n.constructor.name} CST Visitor.`,type:f5.MISSING_METHOD,methodName:r}));return YA(i)}class HHe{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=ni(e,"nodeLocationTracking")?e.nodeLocationTracking:zg.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=No,this.cstFinallyStateUpdate=No,this.cstPostTerminal=No,this.cstPostNonTerminal=No,this.cstPostRule=No;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=TW,this.setNodeLocationFromNode=TW,this.cstPostRule=No,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=No,this.setNodeLocationFromNode=No,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=EW,this.setNodeLocationFromNode=EW,this.cstPostRule=No,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=No,this.setNodeLocationFromNode=No,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=No,this.setNodeLocationFromNode=No,this.cstPostRule=No,this.setInitialNodeLocation=No;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),i=e.location;i.startOffset<=t.startOffset?(i.endOffset=t.endOffset,i.endLine=t.endLine,i.endColumn=t.endColumn):(i.startOffset=NaN,i.startLine=NaN,i.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),i=e.location;i.startOffset<=t.startOffset?i.endOffset=t.endOffset:i.startOffset=NaN}cstPostTerminal(e,t){const i=this.CST_STACK[this.CST_STACK.length-1];DHe(i,t,e),this.setNodeLocationFromToken(i.location,t)}cstPostNonTerminal(e,t){const i=this.CST_STACK[this.CST_STACK.length-1];kHe(i,t,e),this.setNodeLocationFromNode(i.location,e.location)}getBaseCstVisitorConstructor(){if(Fg(this.baseCstVisitorConstructor)){const e=BHe(this.className,xd(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Fg(this.baseCstVisitorWithDefaultsConstructor)){const e=FHe(this.className,xd(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class VHe{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):vP}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?vP:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class GHe{ACTION(e){return e.call(this)}consume(e,t,i){return this.consumeInternal(t,e,i)}subrule(e,t,i){return this.subruleInternal(t,e,i)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,i=yP){if($c(this.definedRulesNames,e)){const a={message:j_.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Hc.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const r=this.defineRule(e,t,i);return this[e]=r,r}OVERRIDE_RULE(e,t,i=yP){const r=dHe(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const s=this.defineRule(e,t,i);return this[e]=s,s}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const i=this.saveRecogState();try{return e.apply(this,t),!0}catch(r){if(mP(r))return!1;throw r}finally{this.reloadRecogState(i),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return $8e(vo(this.gastProductionsCache))}}class qHe{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=pP,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},ni(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(gr(e)){if(Es(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(gr(e))this.tokensMap=Pu(e,(s,a)=>(s[a.name]=a,s),{});else if(ni(e,"modes")&&hf(Cu(vo(e.modes)),zje)){const s=Cu(vo(e.modes)),a=sU(s);this.tokensMap=Pu(a,(o,l)=>(o[l.name]=l,o),{})}else if(Td(e))this.tokensMap=Pl(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Tb;const i=ni(e,"modes")?Cu(vo(e.modes)):vo(e),r=hf(i,s=>Es(s.categoryMatches));this.tokenMatcher=r?pP:KA,ZA(vo(this.tokensMap))}defineRule(e,t,i){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=ni(i,"resyncEnabled")?i.resyncEnabled:yP.resyncEnabled,s=ni(i,"recoveryValueFunc")?i.recoveryValueFunc:yP.recoveryValueFunc,a=this.ruleShortNameIdx<<RHe+f0;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,r,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u)}catch(h){return this.invokeRuleCatch(h,r,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,i){const r=this.RULE_STACK.length===1,s=t&&!this.isBackTracking()&&this.recoveryEnabled;if(mP(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return i(e);else{if(this.outputCst){const l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,a.partialCstResult=l}throw a}}else{if(r)return this.moveToTerminatedState(),i(e);throw a}}else throw e}optionInternal(e,t){const i=this.getKeyForAutomaticLookahead(Qse,t);return this.optionInternalLogic(e,t,i)}optionInternalLogic(e,t,i){let r=this.getLaFuncFromCache(i),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=r;r=()=>a.call(this)&&o.call(this)}}else s=e;if(r.call(this)===!0)return s.call(this)}atLeastOneInternal(e,t){const i=this.getKeyForAutomaticLookahead(h5,e);return this.atLeastOneInternalLogic(e,t,i)}atLeastOneInternalLogic(e,t,i){let r=this.getLaFuncFromCache(i),s;if(typeof t!="function"){s=t.DEF;const a=t.GATE;if(a!==void 0){const o=r;r=()=>a.call(this)&&o.call(this)}}else s=t;if(r.call(this)===!0){let a=this.doSingleRepetition(s);for(;r.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,Ma.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],r,h5,e,Zje)}atLeastOneSepFirstInternal(e,t){const i=this.getKeyForAutomaticLookahead(JO,e);this.atLeastOneSepFirstInternalLogic(e,t,i)}atLeastOneSepFirstInternalLogic(e,t,i){const r=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){r.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,r,bW],o,JO,e,bW)}else throw this.raiseEarlyExitException(e,Ma.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const i=this.getKeyForAutomaticLookahead(u5,e);return this.manyInternalLogic(e,t,i)}manyInternalLogic(e,t,i){let r=this.getLaFuncFromCache(i),s;if(typeof t!="function"){s=t.DEF;const o=t.GATE;if(o!==void 0){const l=r;r=()=>o.call(this)&&l.call(this)}}else s=t;let a=!0;for(;r.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],r,u5,e,Kje,a)}manySepFirstInternal(e,t){const i=this.getKeyForAutomaticLookahead(d5,e);this.manySepFirstInternalLogic(e,t,i)}manySepFirstInternalLogic(e,t,i){const r=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){r.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,r,_W],o,d5,e,_W)}}repetitionSepSecondInternal(e,t,i,r,s){for(;i();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,i,r,s],i,JO,e,s)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const i=this.getKeyForAutomaticLookahead(Jse,t),r=gr(e)?e:e.DEF,a=this.getLaFuncFromCache(i).call(this,r);if(a!==void 0)return r[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new xHe(t,e))}}subruleInternal(e,t,i){let r;try{const s=i!==void 0?i.ARGS:void 0;return this.subruleIdx=t,r=e.apply(this,s),this.cstPostNonTerminal(r,i!==void 0&&i.LABEL!==void 0?i.LABEL:e.ruleName),r}catch(s){throw this.subruleInternalError(s,i,e.ruleName)}}subruleInternalError(e,t,i){throw mP(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:i),delete e.partialCstResult),e}consumeInternal(e,t,i){let r;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),r=s):this.consumeInternalError(e,s,i)}catch(s){r=this.consumeInternalRecovery(e,t,s)}return this.cstPostTerminal(i!==void 0&&i.LABEL!==void 0?i.LABEL:e.name,r),r}consumeInternalError(e,t,i){let r;const s=this.LA(0);throw i!==void 0&&i.ERR_MSG?r=i.ERR_MSG:r=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Kse(r,t,s))}consumeInternalRecovery(e,t,i){if(this.recoveryEnabled&&i.name==="MismatchedTokenException"&&!this.isBackTracking()){const r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(s){throw s.name===Zse?i:s}}else throw i}saveRecogState(){const e=this.errors,t=Pl(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,i){this.RULE_OCCURRENCE_STACK.push(i),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Tb)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class $He{initErrorHandler(e){this._errors=[],this.errorMessageProvider=ni(e,"errorMessageProvider")?e.errorMessageProvider:zg.errorMessageProvider}SAVE_ERROR(e){if(mP(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Pl(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Pl(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,i){const r=this.getCurrRuleFullName(),s=this.getGAstProductions()[r],o=aH(e,s,t,this.maxLookahead)[0],l=[];for(let u=1;u<=this.maxLookahead;u++)l.push(this.LA(u));const c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:l,previous:this.LA(0),customUserDescription:i,ruleName:r});throw this.SAVE_ERROR(new wHe(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const i=this.getCurrRuleFullName(),r=this.getGAstProductions()[i],s=sH(e,r,this.maxLookahead),a=[];for(let c=1;c<=this.maxLookahead;c++)a.push(this.LA(c));const o=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new THe(l,this.LA(1),o))}}class WHe{initContentAssist(){}computeContentAssist(e,t){const i=this.gastProductionsCache[e];if(Fg(i))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Bse([i],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=pf(e.ruleStack),r=this.getGAstProductions()[t];return new Xje(r,e).startWalking()}}const uU={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(uU);const xW=!0,wW=Math.pow(2,f0)-1,tae=Lse({name:"RECORDING_PHASE_TOKEN",pattern:vd.NA});ZA([tae]);const nae=rH(tae,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(nae);const YHe={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class XHe{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(i,r){return this.consumeInternalRecord(i,e,r)},this[`SUBRULE${t}`]=function(i,r){return this.subruleInternalRecord(i,e,r)},this[`OPTION${t}`]=function(i){return this.optionInternalRecord(i,e)},this[`OR${t}`]=function(i){return this.orInternalRecord(i,e)},this[`MANY${t}`]=function(i){this.manyInternalRecord(e,i)},this[`MANY_SEP${t}`]=function(i){this.manySepFirstInternalRecord(e,i)},this[`AT_LEAST_ONE${t}`]=function(i){this.atLeastOneInternalRecord(e,i)},this[`AT_LEAST_ONE_SEP${t}`]=function(i){this.atLeastOneSepFirstInternalRecord(e,i)}}this.consume=function(e,t,i){return this.consumeInternalRecord(t,e,i)},this.subrule=function(e,t,i){return this.subruleInternalRecord(t,e,i)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const i=t>0?t:"";delete e[`CONSUME${i}`],delete e[`SUBRULE${i}`],delete e[`OPTION${i}`],delete e[`OR${i}`],delete e[`MANY${i}`],delete e[`MANY_SEP${i}`],delete e[`AT_LEAST_ONE${i}`],delete e[`AT_LEAST_ONE_SEP${i}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return vP}topLevelRuleRecord(e,t){try{const i=new Lx({definition:[],name:e});return i.name=e,this.recordingProdStack.push(i),t.call(this),this.recordingProdStack.pop(),i}catch(i){if(i.KNOWN_RECORDER_ERROR!==!0)try{i.message=i.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw i}throw i}}optionInternalRecord(e,t){return k1.call(this,Au,e,t)}atLeastOneInternalRecord(e,t){k1.call(this,Kp,t,e)}atLeastOneSepFirstInternalRecord(e,t){k1.call(this,Zp,t,e,xW)}manyInternalRecord(e,t){k1.call(this,Uo,t,e)}manySepFirstInternalRecord(e,t){k1.call(this,xf,t,e,xW)}orInternalRecord(e,t){return KHe.call(this,e,t)}subruleInternalRecord(e,t,i){if(gP(t),!e||ni(e,"ruleName")===!1){const o=new Error(`<SUBRULE${CW(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const r=WT(this.recordingProdStack),s=e.ruleName,a=new Du({idx:t,nonTerminalName:s,label:i==null?void 0:i.LABEL,referencedRule:void 0});return r.definition.push(a),this.outputCst?YHe:uU}consumeInternalRecord(e,t,i){if(gP(t),!Dse(e)){const a=new Error(`<CONSUME${CW(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const r=WT(this.recordingProdStack),s=new ha({idx:t,terminalType:e,label:i==null?void 0:i.LABEL});return r.definition.push(s),nae}}function k1(n,e,t,i=!1){gP(t);const r=WT(this.recordingProdStack),s=Yg(e)?e:e.DEF,a=new n({definition:[],idx:t});return i&&(a.separator=e.SEP),ni(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),r.definition.push(a),this.recordingProdStack.pop(),uU}function KHe(n,e){gP(e);const t=WT(this.recordingProdStack),i=gr(n)===!1,r=i===!1?n:n.DEF,s=new wf({definition:[],idx:e,ignoreAmbiguities:i&&n.IGNORE_AMBIGUITIES===!0});ni(n,"MAX_LOOKAHEAD")&&(s.maxLookahead=n.MAX_LOOKAHEAD);const a=tH(r,o=>Yg(o.GATE));return s.hasPredicates=a,t.definition.push(s),ci(r,o=>{const l=new ku({definition:[]});s.definition.push(l),ni(o,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:ni(o,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),o.ALT.call(this),this.recordingProdStack.pop()}),uU}function CW(n){return n===0?"":`${n}`}function gP(n){if(n<0||n>wW){const e=new Error(`Invalid DSL Method idx value: <${n}>
	Idx value must be a none negative value smaller than ${wW+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class ZHe{initPerformanceTracer(e){if(ni(e,"traceInitPerf")){const t=e.traceInitPerf,i=typeof t=="number";this.traceInitMaxIdent=i?t:1/0,this.traceInitPerf=i?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=zg.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const i=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${i}--> <${e}>`);const{time:r,value:s}=xse(t),a=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${i}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,s}else return t()}}function JHe(n,e){e.forEach(t=>{const i=t.prototype;Object.getOwnPropertyNames(i).forEach(r=>{if(r==="constructor")return;const s=Object.getOwnPropertyDescriptor(i,r);s&&(s.get||s.set)?Object.defineProperty(n.prototype,r,s):n.prototype[r]=t.prototype[r]})})}const vP=rH(Tb,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(vP);const zg=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Use,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),yP=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var Hc;(function(n){n[n.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",n[n.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",n[n.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",n[n.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",n[n.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",n[n.LEFT_RECURSION=5]="LEFT_RECURSION",n[n.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",n[n.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",n[n.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",n[n.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",n[n.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",n[n.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",n[n.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",n[n.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Hc||(Hc={}));let lH=class iae{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{wse(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ci(this.definedRulesNames,r=>{const a=this[r].originalGrammarAction;let o;this.TRACE_INIT(`${r} Rule`,()=>{o=this.topLevelRuleRecord(r,a)}),this.gastProductionsCache[r]=o})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=SHe({rules:vo(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(Es(i)&&this.skipValidations===!1){const r=EHe({rules:vo(this.gastProductionsCache),tokenTypes:vo(this.tokensMap),errMsgProvider:j_,grammarName:t}),s=aHe({lookaheadStrategy:this.lookaheadStrategy,rules:vo(this.gastProductionsCache),tokenTypes:vo(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(r,s)}}),Es(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const r=Q8e(vo(this.gastProductionsCache));this.resyncFollows=r}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var r,s;(s=(r=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(r,{rules:vo(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(vo(this.gastProductionsCache))})),!iae.DEFER_DEFINITION_ERRORS_HANDLING&&!Es(this.definitionErrors))throw e=En(this.definitionErrors,r=>r.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const i=this;if(i.initErrorHandler(t),i.initLexerAdapter(),i.initLooksAhead(t),i.initRecognizerEngine(e,t),i.initRecoverable(t),i.initTreeBuilder(t),i.initContentAssist(),i.initGastRecorder(t),i.initPerformanceTracer(t),ni(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=ni(t,"skipValidations")?t.skipValidations:zg.skipValidations}};lH.DEFER_DEFINITION_ERRORS_HANDLING=!1;JHe(lH,[AHe,IHe,HHe,VHe,qHe,GHe,$He,WHe,XHe,ZHe]);class sat extends lH{constructor(e,t=zg){const i=Pl(t);i.outputCst=!0,super(e,i)}}function QHe(n){const e=new eVe,t=vo(n);return En(t,i=>e.visitRule(i))}class eVe extends Xb{visitRule(e){const t=this.visitEach(e.definition),i=Ese(t,s=>s.propertyName),r=En(i,(s,a)=>{const o=!tH(s,c=>!c.canBeNull);let l=s[0].type;return s.length>1&&(l=En(s,c=>c.type)),{name:a,type:l,optional:o}});return{name:e.name,properties:r}}visitAlternative(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitOption(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitRepetition(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitRepetitionMandatory(e){return this.visitEach(e.definition)}visitRepetitionMandatoryWithSeparator(e){return this.visitEach(e.definition).concat({propertyName:e.separator.name,canBeNull:!0,type:JR(e.separator)})}visitRepetitionWithSeparator(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0}).concat({propertyName:e.separator.name,canBeNull:!0,type:JR(e.separator)})}visitAlternation(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitTerminal(e){return[{propertyName:e.label||e.terminalType.name,canBeNull:!1,type:JR(e)}]}visitNonTerminal(e){return[{propertyName:e.label||e.nonTerminalName,canBeNull:!1,type:JR(e)}]}visitEachAndOverrideWith(e,t){return En(this.visitEach(e),i=>Iu({},i,t))}visitEach(e){return Cu(En(e,t=>this.visit(t)))}}function JR(n){return n instanceof Du?{kind:"rule",name:n.referencedRule.name}:{kind:"token"}}function tVe(n,e){let t=[];return t=t.concat('import type { CstNode, ICstVisitor, IToken } from "chevrotain";'),t=t.concat(Cu(En(n,i=>nVe(i)))),e.includeVisitorInterface&&(t=t.concat(aVe(e.visitorInterfaceName,n))),t.join(`

`)+`
`}function nVe(n){const e=iVe(n),t=rVe(n);return[e,t]}function iVe(n){const e=rae(n.name),t=cH(n.name);return`export interface ${e} extends CstNode {
  name: "${n.name}";
  children: ${t};
}`}function rVe(n){return`export type ${cH(n.name)} = {
  ${En(n.properties,t=>sVe(t)).join(`
  `)}
};`}function sVe(n){const e=lVe(n.type);return`${n.name}${n.optional?"?":""}: ${e}[];`}function aVe(n,e){return`export interface ${n}<IN, OUT> extends ICstVisitor<IN, OUT> {
  ${En(e,t=>oVe(t)).join(`
  `)}
}`}function oVe(n){const e=cH(n.name);return`${n.name}(children: ${e}, param?: IN): OUT;`}function lVe(n){if(gr(n)){const e=sU(En(n,i=>AW(i)));return"("+Pu(e,(i,r)=>i+" | "+r)+")"}else return AW(n)}function AW(n){return n.kind==="token"?"IToken":rae(n.name)}function rae(n){return lse(n)+"CstNode"}function cH(n){return lse(n)+"CstChildren"}const cVe={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function aat(n,e){const t=Object.assign(Object.assign({},cVe),e),i=QHe(n);return tVe(i,t)}var sae={exports:{}},dF={exports:{}},MW;function uVe(){return MW||(MW=1,function(n,e){(function(t,i){n.exports=i()})(Rl,function(){function t(v){return!isNaN(parseFloat(v))&&isFinite(v)}function i(v){return v.charAt(0).toUpperCase()+v.substring(1)}function r(v){return function(){return this[v]}}var s=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],o=["fileName","functionName","source"],l=["args"],c=["evalOrigin"],u=s.concat(a,o,l,c);function h(v){if(v)for(var _=0;_<u.length;_++)v[u[_]]!==void 0&&this["set"+i(u[_])](v[u[_]])}h.prototype={getArgs:function(){return this.args},setArgs:function(v){if(Object.prototype.toString.call(v)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=v},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(v){if(v instanceof h)this.evalOrigin=v;else if(v instanceof Object)this.evalOrigin=new h(v);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var v=this.getFileName()||"",_=this.getLineNumber()||"",y=this.getColumnNumber()||"",S=this.getFunctionName()||"";return this.getIsEval()?v?"[eval] ("+v+":"+_+":"+y+")":"[eval]:"+_+":"+y:S?S+" ("+v+":"+_+":"+y+")":v+":"+_+":"+y}},h.fromString=function(_){var y=_.indexOf("("),S=_.lastIndexOf(")"),T=_.substring(0,y),x=_.substring(y+1,S).split(","),I=_.substring(S+1);if(I.indexOf("@")===0)var R=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(I,""),N=R[1],L=R[2],k=R[3];return new h({functionName:T,args:x||void 0,fileName:N,lineNumber:L||void 0,columnNumber:k||void 0})};for(var d=0;d<s.length;d++)h.prototype["get"+i(s[d])]=r(s[d]),h.prototype["set"+i(s[d])]=function(v){return function(_){this[v]=!!_}}(s[d]);for(var f=0;f<a.length;f++)h.prototype["get"+i(a[f])]=r(a[f]),h.prototype["set"+i(a[f])]=function(v){return function(_){if(!t(_))throw new TypeError(v+" must be a Number");this[v]=Number(_)}}(a[f]);for(var m=0;m<o.length;m++)h.prototype["get"+i(o[m])]=r(o[m]),h.prototype["set"+i(o[m])]=function(v){return function(_){this[v]=String(_)}}(o[m]);return h})}(dF)),dF.exports}(function(n,e){(function(t,i){n.exports=i(uVe())})(Rl,function(i){var r=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(l){if(typeof l.stacktrace<"u"||typeof l["opera#sourceloc"]<"u")return this.parseOpera(l);if(l.stack&&l.stack.match(s))return this.parseV8OrIE(l);if(l.stack)return this.parseFFOrSafari(l);throw new Error("Cannot parse given Error object")},extractLocation:function(l){if(l.indexOf(":")===-1)return[l];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,u=c.exec(l.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},parseV8OrIE:function(l){var c=l.stack.split(`
`).filter(function(u){return!!u.match(s)},this);return c.map(function(u){u.indexOf("(eval ")>-1&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var h=u.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),d=h.match(/ (\(.+\)$)/);h=d?h.replace(d[0],""):h;var f=this.extractLocation(d?d[1]:h),m=d&&h||void 0,v=["eval","<anonymous>"].indexOf(f[0])>-1?void 0:f[0];return new i({functionName:m,fileName:v,lineNumber:f[1],columnNumber:f[2],source:u})},this)},parseFFOrSafari:function(l){var c=l.stack.split(`
`).filter(function(u){return!u.match(a)},this);return c.map(function(u){if(u.indexOf(" > eval")>-1&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return new i({functionName:u});var h=/((.*".+"[^@]*)?[^@]*)(?:@)/,d=u.match(h),f=d&&d[1]?d[1]:void 0,m=this.extractLocation(u.replace(h,""));return new i({functionName:f,fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:u})},this)},parseOpera:function(l){return!l.stacktrace||l.message.indexOf(`
`)>-1&&l.message.split(`
`).length>l.stacktrace.split(`
`).length?this.parseOpera9(l):l.stack?this.parseOpera11(l):this.parseOpera10(l)},parseOpera9:function(l){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,u=l.message.split(`
`),h=[],d=2,f=u.length;d<f;d+=2){var m=c.exec(u[d]);m&&h.push(new i({fileName:m[2],lineNumber:m[1],source:u[d]}))}return h},parseOpera10:function(l){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=l.stacktrace.split(`
`),h=[],d=0,f=u.length;d<f;d+=2){var m=c.exec(u[d]);m&&h.push(new i({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:u[d]}))}return h},parseOpera11:function(l){var c=l.stack.split(`
`).filter(function(u){return!!u.match(r)&&!u.match(/^Error created at/)},this);return c.map(function(u){var h=u.split("@"),d=this.extractLocation(h.pop()),f=h.shift()||"",m=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,v;f.match(/\(([^)]*)\)/)&&(v=f.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var _=v===void 0||v==="[arguments not available]"?void 0:v.split(",");return new i({functionName:m,args:_,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:u})},this)}}})})(sae);var hVe=sae.exports;const oat=Dl(hVe);var QR={},fF,RW;function dVe(){if(RW)return fF;RW=1;var n,e,t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i;function r(f){throw{name:"SyntaxError",message:f,at:n,text:i}}function s(f){return f&&f!==e&&r("Expected '"+f+"' instead of '"+e+"'"),e=i.charAt(n),n+=1,e}function a(){var f,m="";for(e==="-"&&(m="-",s("-"));e>="0"&&e<="9";)m+=e,s();if(e===".")for(m+=".";s()&&e>="0"&&e<="9";)m+=e;if(e==="e"||e==="E")for(m+=e,s(),(e==="-"||e==="+")&&(m+=e,s());e>="0"&&e<="9";)m+=e,s();return f=Number(m),isFinite(f)||r("Bad number"),f}function o(){var f,m,v="",_;if(e==='"')for(;s();){if(e==='"')return s(),v;if(e==="\\")if(s(),e==="u"){for(_=0,m=0;m<4&&(f=parseInt(s(),16),!!isFinite(f));m+=1)_=_*16+f;v+=String.fromCharCode(_)}else if(typeof t[e]=="string")v+=t[e];else break;else v+=e}r("Bad string")}function l(){for(;e&&e<=" ";)s()}function c(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null;default:r("Unexpected '"+e+"'")}}function u(){var f=[];if(e==="["){if(s("["),l(),e==="]")return s("]"),f;for(;e;){if(f.push(d()),l(),e==="]")return s("]"),f;s(","),l()}}r("Bad array")}function h(){var f,m={};if(e==="{"){if(s("{"),l(),e==="}")return s("}"),m;for(;e;){if(f=o(),l(),s(":"),Object.prototype.hasOwnProperty.call(m,f)&&r('Duplicate key "'+f+'"'),m[f]=d(),l(),e==="}")return s("}"),m;s(","),l()}}r("Bad object")}function d(){switch(l(),e){case"{":return h();case"[":return u();case'"':return o();case"-":return a();default:return e>="0"&&e<="9"?a():c()}}return fF=function(f,m){var v;return i=f,n=0,e=" ",v=d(),l(),e&&r("Syntax error"),typeof m=="function"?function _(y,S){var T,x,I=y[S];if(I&&typeof I=="object")for(T in d)Object.prototype.hasOwnProperty.call(I,T)&&(x=_(I,T),typeof x>"u"?delete I[T]:I[T]=x);return m.call(y,S,I)}({"":v},""):v},fF}var pF,OW;function fVe(){if(OW)return pF;OW=1;var n=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,t,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;function s(o){return n.lastIndex=0,n.test(o)?'"'+o.replace(n,function(l){var c=i[l];return typeof c=="string"?c:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+o+'"'}function a(o,l){var c,u,h,d,f=e,m,v=l[o];switch(v&&typeof v=="object"&&typeof v.toJSON=="function"&&(v=v.toJSON(o)),typeof r=="function"&&(v=r.call(l,o,v)),typeof v){case"string":return s(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":return String(v);case"object":if(!v)return"null";if(e+=t,m=[],Object.prototype.toString.apply(v)==="[object Array]"){for(d=v.length,c=0;c<d;c+=1)m[c]=a(c,v)||"null";return h=m.length===0?"[]":e?`[
`+e+m.join(`,
`+e)+`
`+f+"]":"["+m.join(",")+"]",e=f,h}if(r&&typeof r=="object")for(d=r.length,c=0;c<d;c+=1)u=r[c],typeof u=="string"&&(h=a(u,v),h&&m.push(s(u)+(e?": ":":")+h));else for(u in v)Object.prototype.hasOwnProperty.call(v,u)&&(h=a(u,v),h&&m.push(s(u)+(e?": ":":")+h));return h=m.length===0?"{}":e?`{
`+e+m.join(`,
`+e)+`
`+f+"}":"{"+m.join(",")+"}",e=f,h}}return pF=function(o,l,c){var u;if(e="",t="",typeof c=="number")for(u=0;u<c;u+=1)t+=" ";else typeof c=="string"&&(t=c);if(r=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return a("",{"":o})},pF}var IW;function pVe(){return IW||(IW=1,QR.parse=dVe(),QR.stringify=fVe()),QR}var NW=Object.prototype.toString,aae=function(e){var t=NW.call(e),i=t==="[object Arguments]";return i||(i=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&NW.call(e.callee)==="[object Function]"),i},mF,PW;function mVe(){if(PW)return mF;PW=1;var n;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=aae,r=Object.prototype.propertyIsEnumerable,s=!r.call({toString:null},"toString"),a=r.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(d){var f=d.constructor;return f&&f.prototype===d},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!c["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{l(window[d])}catch{return!0}}catch{return!0}return!1}(),h=function(d){if(typeof window>"u"||!u)return l(d);try{return l(d)}catch{return!1}};n=function(f){var m=f!==null&&typeof f=="object",v=t.call(f)==="[object Function]",_=i(f),y=m&&t.call(f)==="[object String]",S=[];if(!m&&!v&&!_)throw new TypeError("Object.keys called on a non-object");var T=a&&v;if(y&&f.length>0&&!e.call(f,0))for(var x=0;x<f.length;++x)S.push(String(x));if(_&&f.length>0)for(var I=0;I<f.length;++I)S.push(String(I));else for(var R in f)!(T&&R==="prototype")&&e.call(f,R)&&S.push(String(R));if(s)for(var N=h(f),L=0;L<o.length;++L)!(N&&o[L]==="constructor")&&e.call(f,o[L])&&S.push(o[L]);return S}}return mF=n,mF}var gVe=Array.prototype.slice,vVe=aae,DW=Object.keys,gF=DW?function(e){return DW(e)}:mVe(),kW=Object.keys;gF.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(i){return vVe(i)?kW(gVe.call(i)):kW(i)})}else Object.keys=gF;return Object.keys||gF};var yVe={exports:{}},oae=Error,lae=EvalError,cae=RangeError,uae=ReferenceError,uH=SyntaxError,Ux=TypeError,hae=URIError,_Ve=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==r||a.enumerable!==!0)return!1}return!0},LW=typeof Symbol<"u"&&Symbol,bVe=_Ve,SVe=function(){return typeof LW!="function"||typeof Symbol!="function"||typeof LW("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:bVe()},vF={__proto__:null,foo:{}},EVe=Object,TVe=function(){return{__proto__:vF}.foo===vF.foo&&!(vF instanceof EVe)},xVe="Function.prototype.bind called on incompatible ",wVe=Object.prototype.toString,CVe=Math.max,AVe="[object Function]",UW=function(e,t){for(var i=[],r=0;r<e.length;r+=1)i[r]=e[r];for(var s=0;s<t.length;s+=1)i[s+e.length]=t[s];return i},MVe=function(e,t){for(var i=[],r=t,s=0;r<e.length;r+=1,s+=1)i[s]=e[r];return i},RVe=function(n,e){for(var t="",i=0;i<n.length;i+=1)t+=n[i],i+1<n.length&&(t+=e);return t},OVe=function(e){var t=this;if(typeof t!="function"||wVe.apply(t)!==AVe)throw new TypeError(xVe+t);for(var i=MVe(arguments,1),r,s=function(){if(this instanceof r){var u=t.apply(this,UW(i,arguments));return Object(u)===u?u:this}return t.apply(e,UW(i,arguments))},a=CVe(0,t.length-i.length),o=[],l=0;l<a;l++)o[l]="$"+l;if(r=Function("binder","return function ("+RVe(o,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var c=function(){};c.prototype=t.prototype,r.prototype=new c,c.prototype=null}return r},IVe=OVe,p0=Function.prototype.bind||IVe,NVe=Function.prototype.call,PVe=Object.prototype.hasOwnProperty,DVe=p0,dae=DVe.call(NVe,PVe),nr,kVe=oae,LVe=lae,UVe=cae,BVe=uae,XT=uH,nT=Ux,FVe=hae,fae=Function,yF=function(n){try{return fae('"use strict"; return ('+n+").constructor;")()}catch{}},nb=Object.getOwnPropertyDescriptor;if(nb)try{nb({},"")}catch{nb=null}var _F=function(){throw new nT},zVe=nb?function(){try{return arguments.callee,_F}catch{try{return nb(arguments,"callee").get}catch{return _F}}}():_F,iE=SVe(),jVe=TVe(),sl=Object.getPrototypeOf||(jVe?function(n){return n.__proto__}:null),mE={},HVe=typeof Uint8Array>"u"||!sl?nr:sl(Uint8Array),ib={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?nr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?nr:ArrayBuffer,"%ArrayIteratorPrototype%":iE&&sl?sl([][Symbol.iterator]()):nr,"%AsyncFromSyncIteratorPrototype%":nr,"%AsyncFunction%":mE,"%AsyncGenerator%":mE,"%AsyncGeneratorFunction%":mE,"%AsyncIteratorPrototype%":mE,"%Atomics%":typeof Atomics>"u"?nr:Atomics,"%BigInt%":typeof BigInt>"u"?nr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?nr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?nr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?nr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":kVe,"%eval%":eval,"%EvalError%":LVe,"%Float32Array%":typeof Float32Array>"u"?nr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?nr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?nr:FinalizationRegistry,"%Function%":fae,"%GeneratorFunction%":mE,"%Int8Array%":typeof Int8Array>"u"?nr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?nr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?nr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":iE&&sl?sl(sl([][Symbol.iterator]())):nr,"%JSON%":typeof JSON=="object"?JSON:nr,"%Map%":typeof Map>"u"?nr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!iE||!sl?nr:sl(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?nr:Promise,"%Proxy%":typeof Proxy>"u"?nr:Proxy,"%RangeError%":UVe,"%ReferenceError%":BVe,"%Reflect%":typeof Reflect>"u"?nr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?nr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!iE||!sl?nr:sl(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?nr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":iE&&sl?sl(""[Symbol.iterator]()):nr,"%Symbol%":iE?Symbol:nr,"%SyntaxError%":XT,"%ThrowTypeError%":zVe,"%TypedArray%":HVe,"%TypeError%":nT,"%Uint8Array%":typeof Uint8Array>"u"?nr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?nr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?nr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?nr:Uint32Array,"%URIError%":FVe,"%WeakMap%":typeof WeakMap>"u"?nr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?nr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?nr:WeakSet};if(sl)try{null.error}catch(n){var VVe=sl(sl(n));ib["%Error.prototype%"]=VVe}var GVe=function n(e){var t;if(e==="%AsyncFunction%")t=yF("async function () {}");else if(e==="%GeneratorFunction%")t=yF("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=yF("async function* () {}");else if(e==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&sl&&(t=sl(r.prototype))}return ib[e]=t,t},BW={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},JA=p0,_P=dae,qVe=JA.call(Function.call,Array.prototype.concat),$Ve=JA.call(Function.apply,Array.prototype.splice),FW=JA.call(Function.call,String.prototype.replace),bP=JA.call(Function.call,String.prototype.slice),WVe=JA.call(Function.call,RegExp.prototype.exec),YVe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,XVe=/\\(\\)?/g,KVe=function(e){var t=bP(e,0,1),i=bP(e,-1);if(t==="%"&&i!=="%")throw new XT("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new XT("invalid intrinsic syntax, expected opening `%`");var r=[];return FW(e,YVe,function(s,a,o,l){r[r.length]=o?FW(l,XVe,"$1"):a||s}),r},ZVe=function(e,t){var i=e,r;if(_P(BW,i)&&(r=BW[i],i="%"+r[0]+"%"),_P(ib,i)){var s=ib[i];if(s===mE&&(s=GVe(i)),typeof s>"u"&&!t)throw new nT("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new XT("intrinsic "+e+" does not exist!")},hH=function(e,t){if(typeof e!="string"||e.length===0)throw new nT("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new nT('"allowMissing" argument must be a boolean');if(WVe(/^%?[^%]*%?$/,e)===null)throw new XT("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=KVe(e),r=i.length>0?i[0]:"",s=ZVe("%"+r+"%",t),a=s.name,o=s.value,l=!1,c=s.alias;c&&(r=c[0],$Ve(i,qVe([0,1],c)));for(var u=1,h=!0;u<i.length;u+=1){var d=i[u],f=bP(d,0,1),m=bP(d,-1);if((f==='"'||f==="'"||f==="`"||m==='"'||m==="'"||m==="`")&&f!==m)throw new XT("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),r+="."+d,a="%"+r+"%",_P(ib,a))o=ib[a];else if(o!=null){if(!(d in o)){if(!t)throw new nT("base intrinsic for "+e+" exists, but the property is not available.");return}if(nb&&u+1>=i.length){var v=nb(o,d);h=!!v,h&&"get"in v&&!("originalValue"in v.get)?o=v.get:o=o[d]}else h=_P(o,d),o=o[d];h&&!l&&(ib[a]=o)}}return o},JVe=hH,QO=JVe("%Object.defineProperty%",!0)||!1;if(QO)try{QO({},"a",{value:1})}catch{QO=!1}var dH=QO,QVe=hH,eI=QVe("%Object.getOwnPropertyDescriptor%",!0);if(eI)try{eI([],"length")}catch{eI=null}var pae=eI,zW=dH,eGe=uH,rE=Ux,jW=pae,tGe=function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new rE("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new rE("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new rE("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new rE("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new rE("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new rE("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,l=!!jW&&jW(e,t);if(zW)zW(e,t,{configurable:a===null&&l?l.configurable:!a,enumerable:r===null&&l?l.enumerable:!r,value:i,writable:s===null&&l?l.writable:!s});else if(o||!r&&!s&&!a)e[t]=i;else throw new eGe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},p5=dH,mae=function(){return!!p5};mae.hasArrayLengthDefineBug=function(){if(!p5)return null;try{return p5([],"length",{value:1}).length!==1}catch{return!0}};var nGe=mae,iGe=hH,HW=tGe,rGe=nGe(),VW=pae,GW=Ux,sGe=iGe("%Math.floor%"),aGe=function(e,t){if(typeof e!="function")throw new GW("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||sGe(t)!==t)throw new GW("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,s=!0;if("length"in e&&VW){var a=VW(e,"length");a&&!a.configurable&&(r=!1),a&&!a.writable&&(s=!1)}return(r||s||!i)&&(rGe?HW(e,"length",t,!0,!0):HW(e,"length",t)),e},gae=Function.prototype.call,vae=Function.prototype.apply,oGe=typeof Reflect<"u"&&Reflect&&Reflect.apply,lGe=p0,cGe=vae,uGe=gae,hGe=oGe,yae=hGe||lGe.call(uGe,cGe),dGe=p0,fGe=Ux,pGe=gae,mGe=yae,_ae=function(e){if(e.length<1||typeof e[0]!="function")throw new fGe("a function is required");return mGe(dGe,pGe,e)},gGe=p0,vGe=vae,yGe=yae,_Ge=function(){return yGe(gGe,vGe,arguments)};(function(n){var e=aGe,t=dH,i=_ae,r=_Ge;n.exports=function(a){var o=i(arguments),l=a.length-(arguments.length-1);return e(o,1+(l>0?l:0),!0)},t?t(n.exports,"apply",{value:r}):n.exports.apply=r})(yVe);var bGe=Object,SGe=Math.abs,EGe=Math.floor,TGe=Math.max,xGe=Math.min,wGe=Math.pow,CGe=Math.round,AGe=Number.isNaN||function(e){return e!==e},MGe=AGe,RGe=function(e){return MGe(e)||e===0?e:e<0?-1:1},OGe=Object.getOwnPropertyDescriptor,tI=OGe;if(tI)try{tI([],"length")}catch{tI=null}var IGe=tI,nI=Object.defineProperty||!1;if(nI)try{nI({},"a",{value:1})}catch{nI=!1}var NGe=nI,bF,qW;function PGe(){return qW||(qW=1,bF=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0}),bF}var SF,$W;function DGe(){if($W)return SF;$W=1;var n=typeof Symbol<"u"&&Symbol,e=PGe();return SF=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},SF}var EF,WW;function bae(){return WW||(WW=1,EF=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),EF}var TF,YW;function kGe(){return YW||(YW=1,TF=Object),TF}var xF,XW;function Sae(){if(XW)return xF;XW=1;var n=kGe();return xF=n.getPrototypeOf||null,xF}var wF,KW;function LGe(){return KW||(KW=1,wF=Object.getOwnPropertyDescriptor),wF}var CF,ZW;function UGe(){if(ZW)return CF;ZW=1;var n=LGe();if(n)try{n([],"length")}catch{n=null}return CF=n,CF}var AF,JW;function BGe(){if(JW)return AF;JW=1;var n=_ae,e=UGe(),t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var i=!!t&&e&&e(Object.prototype,"__proto__"),r=Object,s=r.getPrototypeOf;return AF=i&&typeof i.get=="function"?n([i.get]):typeof s=="function"?function(o){return s(o==null?o:r(o))}:!1,AF}var MF,QW;function FGe(){if(QW)return MF;QW=1;var n=bae(),e=Sae(),t=BGe();return MF=n?function(r){return n(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:t?function(r){return t(r)}:null,MF}var Eae=Function.prototype.apply,fH=Function.prototype.call,Zi,zGe=bGe,jGe=oae,HGe=lae,VGe=cae,GGe=uae,KT=uH,iT=Ux,qGe=hae,$Ge=SGe,WGe=EGe,YGe=TGe,XGe=xGe,KGe=wGe,ZGe=CGe,JGe=RGe,Tae=Function,RF=function(n){try{return Tae('"use strict"; return ('+n+").constructor;")()}catch{}},DC=IGe,QGe=NGe,OF=function(){throw new iT},eqe=DC?function(){try{return arguments.callee,OF}catch{try{return DC(arguments,"callee").get}catch{return OF}}}():OF,sE=DGe()(),al=FGe(),tqe=Sae(),nqe=bae(),xae=Eae,QA=fH,gE={},iqe=typeof Uint8Array>"u"||!al?Zi:al(Uint8Array),rb={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Zi:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Zi:ArrayBuffer,"%ArrayIteratorPrototype%":sE&&al?al([][Symbol.iterator]()):Zi,"%AsyncFromSyncIteratorPrototype%":Zi,"%AsyncFunction%":gE,"%AsyncGenerator%":gE,"%AsyncGeneratorFunction%":gE,"%AsyncIteratorPrototype%":gE,"%Atomics%":typeof Atomics>"u"?Zi:Atomics,"%BigInt%":typeof BigInt>"u"?Zi:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Zi:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Zi:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Zi:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":jGe,"%eval%":eval,"%EvalError%":HGe,"%Float16Array%":typeof Float16Array>"u"?Zi:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Zi:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Zi:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Zi:FinalizationRegistry,"%Function%":Tae,"%GeneratorFunction%":gE,"%Int8Array%":typeof Int8Array>"u"?Zi:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Zi:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Zi:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":sE&&al?al(al([][Symbol.iterator]())):Zi,"%JSON%":typeof JSON=="object"?JSON:Zi,"%Map%":typeof Map>"u"?Zi:Map,"%MapIteratorPrototype%":typeof Map>"u"||!sE||!al?Zi:al(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":zGe,"%Object.getOwnPropertyDescriptor%":DC,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Zi:Promise,"%Proxy%":typeof Proxy>"u"?Zi:Proxy,"%RangeError%":VGe,"%ReferenceError%":GGe,"%Reflect%":typeof Reflect>"u"?Zi:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Zi:Set,"%SetIteratorPrototype%":typeof Set>"u"||!sE||!al?Zi:al(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Zi:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":sE&&al?al(""[Symbol.iterator]()):Zi,"%Symbol%":sE?Symbol:Zi,"%SyntaxError%":KT,"%ThrowTypeError%":eqe,"%TypedArray%":iqe,"%TypeError%":iT,"%Uint8Array%":typeof Uint8Array>"u"?Zi:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Zi:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Zi:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Zi:Uint32Array,"%URIError%":qGe,"%WeakMap%":typeof WeakMap>"u"?Zi:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Zi:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Zi:WeakSet,"%Function.prototype.call%":QA,"%Function.prototype.apply%":xae,"%Object.defineProperty%":QGe,"%Object.getPrototypeOf%":tqe,"%Math.abs%":$Ge,"%Math.floor%":WGe,"%Math.max%":YGe,"%Math.min%":XGe,"%Math.pow%":KGe,"%Math.round%":ZGe,"%Math.sign%":JGe,"%Reflect.getPrototypeOf%":nqe};if(al)try{null.error}catch(n){var rqe=al(al(n));rb["%Error.prototype%"]=rqe}var sqe=function n(e){var t;if(e==="%AsyncFunction%")t=RF("async function () {}");else if(e==="%GeneratorFunction%")t=RF("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=RF("async function* () {}");else if(e==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=n("%AsyncGenerator%");r&&al&&(t=al(r.prototype))}return rb[e]=t,t},eY={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},eM=p0,SP=dae,aqe=eM.call(QA,Array.prototype.concat),oqe=eM.call(xae,Array.prototype.splice),tY=eM.call(QA,String.prototype.replace),EP=eM.call(QA,String.prototype.slice),lqe=eM.call(QA,RegExp.prototype.exec),cqe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,uqe=/\\(\\)?/g,hqe=function(e){var t=EP(e,0,1),i=EP(e,-1);if(t==="%"&&i!=="%")throw new KT("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new KT("invalid intrinsic syntax, expected opening `%`");var r=[];return tY(e,cqe,function(s,a,o,l){r[r.length]=o?tY(l,uqe,"$1"):a||s}),r},dqe=function(e,t){var i=e,r;if(SP(eY,i)&&(r=eY[i],i="%"+r[0]+"%"),SP(rb,i)){var s=rb[i];if(s===gE&&(s=sqe(i)),typeof s>"u"&&!t)throw new iT("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new KT("intrinsic "+e+" does not exist!")},fqe=function(e,t){if(typeof e!="string"||e.length===0)throw new iT("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new iT('"allowMissing" argument must be a boolean');if(lqe(/^%?[^%]*%?$/,e)===null)throw new KT("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=hqe(e),r=i.length>0?i[0]:"",s=dqe("%"+r+"%",t),a=s.name,o=s.value,l=!1,c=s.alias;c&&(r=c[0],oqe(i,aqe([0,1],c)));for(var u=1,h=!0;u<i.length;u+=1){var d=i[u],f=EP(d,0,1),m=EP(d,-1);if((f==='"'||f==="'"||f==="`"||m==='"'||m==="'"||m==="`")&&f!==m)throw new KT("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),r+="."+d,a="%"+r+"%",SP(rb,a))o=rb[a];else if(o!=null){if(!(d in o)){if(!t)throw new iT("base intrinsic for "+e+" exists, but the property is not available.");return}if(DC&&u+1>=i.length){var v=DC(o,d);h=!!v,h&&"get"in v&&!("originalValue"in v.get)?o=v.get:o=o[d]}else h=SP(o,d),o=o[d];h&&!l&&(rb[a]=o)}}return o},pqe=typeof Reflect<"u"&&Reflect&&Reflect.apply,mqe=p0,gqe=Eae,vqe=fH,yqe=pqe,_qe=yqe||mqe.call(vqe,gqe),bqe=p0,Sqe=Ux,Eqe=fH,Tqe=_qe,xqe=function(e){if(e.length<1||typeof e[0]!="function")throw new Sqe("a function is required");return Tqe(bqe,Eqe,e)},wae=fqe,Cae=xqe,wqe=Cae([wae("%String.prototype.indexOf%")]),Cqe=function(e,t){var i=wae(e,!!t);return typeof i=="function"&&wqe(e,".prototype.")>-1?Cae([i]):i};(typeof JSON<"u"?JSON:pVe()).stringify;var hU=Cqe;hU("Array.prototype.join");hU("Array.prototype.indexOf");hU("Array.prototype.splice");hU("Array.prototype.sort");var m5;try{m5=new TextDecoder}catch{}var sn,od,Ze=0,Ss={},lr,yy,Qh=0,vp=0,cl,Mg,Lu=[],ir,nY={useRecords:!1,mapsAsObjects:!0};class Aae{}const Mae=new Aae;Mae.name="MessagePack 0xC1";var ky=!1,Rae=2,iY;try{new Function("")}catch{Rae=1/0}class kC{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(sn)return kae(()=>(v5(),this?this.unpack(e,t):kC.prototype.unpack.call(nY,e,t)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof rl<"u"?rl.from(e):new Uint8Array(e)),typeof t=="object"?(od=t.end||e.length,Ze=t.start||0):(Ze=0,od=t>-1?t:e.length),vp=0,yy=null,cl=null,sn=e;try{ir=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw sn=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof kC){if(Ss=this,this.structures)return lr=this.structures,eO(t);(!lr||lr.length>0)&&(lr=[])}else Ss=nY,(!lr||lr.length>0)&&(lr=[]);return eO(t)}unpackMultiple(e,t){let i,r=0;try{ky=!0;let s=e.length,a=this?this.unpack(e,s):dU.unpack(e,s);if(t){if(t(a,r,Ze)===!1)return;for(;Ze<s;)if(r=Ze,t(eO(),r,Ze)===!1)return}else{for(i=[a];Ze<s;)r=Ze,i.push(eO());return i}}catch(s){throw s.lastPosition=r,s.values=i,s}finally{ky=!1,v5()}}_mergeStructures(e,t){e=e||[],Object.isFrozen(e)&&(e=e.map(i=>i.slice(0)));for(let i=0,r=e.length;i<r;i++){let s=e[i];s&&(s.isShared=!0,i>=32&&(s.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],s=t[i];s&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=s)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function eO(n){try{if(!Ss.trusted&&!ky){let t=lr.sharedLength||0;t<lr.length&&(lr.length=t)}let e;if(Ss.randomAccessStructure&&sn[Ze]<64&&sn[Ze]>=32&&iY?(e=iY(sn,Ze,od,Ss),sn=null,!(n&&n.lazy)&&e&&(e=e.toJSON()),Ze=od):e=Wa(),cl&&(Ze=cl.postBundlePosition,cl=null),ky&&(lr.restoreStructures=null),Ze==od)lr&&lr.restoreStructures&&rY(),lr=null,sn=null,Mg&&(Mg=null);else{if(Ze>od)throw new Error("Unexpected end of MessagePack data");if(!ky){let t;try{t=JSON.stringify(e,(i,r)=>typeof r=="bigint"?`${r}n`:r).slice(0,100)}catch(i){t="(JSON view not available "+i+")"}throw new Error("Data read, but end of buffer not reached "+t)}}return e}catch(e){throw lr&&lr.restoreStructures&&rY(),v5(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||Ze>od)&&(e.incomplete=!0),e}}function rY(){for(let n in lr.restoreStructures)lr[n]=lr.restoreStructures[n];lr.restoreStructures=null}function Wa(){let n=sn[Ze++];if(n<160)if(n<128){if(n<64)return n;{let e=lr[n&63]||Ss.getStructures&&Oae()[n&63];return e?(e.read||(e.read=pH(e,n&63)),e.read()):n}}else if(n<144)if(n-=128,Ss.mapsAsObjects){let e={};for(let t=0;t<n;t++){let i=Nae();i==="__proto__"&&(i="__proto_"),e[i]=Wa()}return e}else{let e=new Map;for(let t=0;t<n;t++)e.set(Wa(),Wa());return e}else{n-=144;let e=new Array(n);for(let t=0;t<n;t++)e[t]=Wa();return Ss.freezeData?Object.freeze(e):e}else if(n<192){let e=n-160;if(vp>=Ze)return yy.slice(Ze-Qh,(Ze+=e)-Qh);if(vp==0&&od<140){let t=e<16?mH(e):Iae(e);if(t!=null)return t}return g5(e)}else{let e;switch(n){case 192:return null;case 193:return cl?(e=Wa(),e>0?cl[1].slice(cl.position1,cl.position1+=e):cl[0].slice(cl.position0,cl.position0-=e)):Mae;case 194:return!1;case 195:return!0;case 196:if(e=sn[Ze++],e===void 0)throw new Error("Unexpected end of buffer");return IF(e);case 197:return e=ir.getUint16(Ze),Ze+=2,IF(e);case 198:return e=ir.getUint32(Ze),Ze+=4,IF(e);case 199:return b_(sn[Ze++]);case 200:return e=ir.getUint16(Ze),Ze+=2,b_(e);case 201:return e=ir.getUint32(Ze),Ze+=4,b_(e);case 202:if(e=ir.getFloat32(Ze),Ss.useFloat32>2){let t=gH[(sn[Ze]&127)<<1|sn[Ze+1]>>7];return Ze+=4,(t*e+(e>0?.5:-.5)>>0)/t}return Ze+=4,e;case 203:return e=ir.getFloat64(Ze),Ze+=8,e;case 204:return sn[Ze++];case 205:return e=ir.getUint16(Ze),Ze+=2,e;case 206:return e=ir.getUint32(Ze),Ze+=4,e;case 207:return Ss.int64AsType==="number"?(e=ir.getUint32(Ze)*4294967296,e+=ir.getUint32(Ze+4)):Ss.int64AsType==="string"?e=ir.getBigUint64(Ze).toString():Ss.int64AsType==="auto"?(e=ir.getBigUint64(Ze),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=ir.getBigUint64(Ze),Ze+=8,e;case 208:return ir.getInt8(Ze++);case 209:return e=ir.getInt16(Ze),Ze+=2,e;case 210:return e=ir.getInt32(Ze),Ze+=4,e;case 211:return Ss.int64AsType==="number"?(e=ir.getInt32(Ze)*4294967296,e+=ir.getUint32(Ze+4)):Ss.int64AsType==="string"?e=ir.getBigInt64(Ze).toString():Ss.int64AsType==="auto"?(e=ir.getBigInt64(Ze),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=ir.getBigInt64(Ze),Ze+=8,e;case 212:if(e=sn[Ze++],e==114)return uY(sn[Ze++]&63);{let t=Lu[e];if(t)return t.read?(Ze++,t.read(Wa())):t.noBuffer?(Ze++,t()):t(sn.subarray(Ze,++Ze));throw new Error("Unknown extension "+e)}case 213:return e=sn[Ze],e==114?(Ze++,uY(sn[Ze++]&63,sn[Ze++])):b_(2);case 214:return b_(4);case 215:return b_(8);case 216:return b_(16);case 217:return e=sn[Ze++],vp>=Ze?yy.slice(Ze-Qh,(Ze+=e)-Qh):Mqe(e);case 218:return e=ir.getUint16(Ze),Ze+=2,vp>=Ze?yy.slice(Ze-Qh,(Ze+=e)-Qh):Rqe(e);case 219:return e=ir.getUint32(Ze),Ze+=4,vp>=Ze?yy.slice(Ze-Qh,(Ze+=e)-Qh):Oqe(e);case 220:return e=ir.getUint16(Ze),Ze+=2,aY(e);case 221:return e=ir.getUint32(Ze),Ze+=4,aY(e);case 222:return e=ir.getUint16(Ze),Ze+=2,oY(e);case 223:return e=ir.getUint32(Ze),Ze+=4,oY(e);default:if(n>=224)return n-256;if(n===void 0){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+n)}}}const Aqe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function pH(n,e){function t(){if(t.count++>Rae){let r=n.read=new Function("r","return function(){return "+(Ss.freezeData?"Object.freeze":"")+"({"+n.map(s=>s==="__proto__"?"__proto_:r()":Aqe.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(Wa);return n.highByte===0&&(n.read=sY(e,n.read)),r()}let i={};for(let r=0,s=n.length;r<s;r++){let a=n[r];a==="__proto__"&&(a="__proto_"),i[a]=Wa()}return Ss.freezeData?Object.freeze(i):i}return t.count=0,n.highByte===0?sY(e,t):t}const sY=(n,e)=>function(){let t=sn[Ze++];if(t===0)return e();let i=n<32?-(n+(t<<5)):n+(t<<5),r=lr[i]||Oae()[i];if(!r)throw new Error("Record id is not defined for "+i);return r.read||(r.read=pH(r,n)),r.read()};function Oae(){let n=kae(()=>(sn=null,Ss.getStructures()));return lr=Ss._mergeStructures(n,lr)}var g5=tM,Mqe=tM,Rqe=tM,Oqe=tM;function tM(n){let e;if(n<16&&(e=mH(n)))return e;if(n>64&&m5)return m5.decode(sn.subarray(Ze,Ze+=n));const t=Ze+n,i=[];for(e="";Ze<t;){const r=sn[Ze++];if(!(r&128))i.push(r);else if((r&224)===192){const s=sn[Ze++]&63;i.push((r&31)<<6|s)}else if((r&240)===224){const s=sn[Ze++]&63,a=sn[Ze++]&63;i.push((r&31)<<12|s<<6|a)}else if((r&248)===240){const s=sn[Ze++]&63,a=sn[Ze++]&63,o=sn[Ze++]&63;let l=(r&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(r);i.length>=4096&&(e+=il.apply(String,i),i.length=0)}return i.length>0&&(e+=il.apply(String,i)),e}function aY(n){let e=new Array(n);for(let t=0;t<n;t++)e[t]=Wa();return Ss.freezeData?Object.freeze(e):e}function oY(n){if(Ss.mapsAsObjects){let e={};for(let t=0;t<n;t++){let i=Nae();i==="__proto__"&&(i="__proto_"),e[i]=Wa()}return e}else{let e=new Map;for(let t=0;t<n;t++)e.set(Wa(),Wa());return e}}var il=String.fromCharCode;function Iae(n){let e=Ze,t=new Array(n);for(let i=0;i<n;i++){const r=sn[Ze++];if((r&128)>0){Ze=e;return}t[i]=r}return il.apply(String,t)}function mH(n){if(n<4)if(n<2){if(n===0)return"";{let e=sn[Ze++];if((e&128)>1){Ze-=1;return}return il(e)}}else{let e=sn[Ze++],t=sn[Ze++];if((e&128)>0||(t&128)>0){Ze-=2;return}if(n<3)return il(e,t);let i=sn[Ze++];if((i&128)>0){Ze-=3;return}return il(e,t,i)}else{let e=sn[Ze++],t=sn[Ze++],i=sn[Ze++],r=sn[Ze++];if((e&128)>0||(t&128)>0||(i&128)>0||(r&128)>0){Ze-=4;return}if(n<6){if(n===4)return il(e,t,i,r);{let s=sn[Ze++];if((s&128)>0){Ze-=5;return}return il(e,t,i,r,s)}}else if(n<8){let s=sn[Ze++],a=sn[Ze++];if((s&128)>0||(a&128)>0){Ze-=6;return}if(n<7)return il(e,t,i,r,s,a);let o=sn[Ze++];if((o&128)>0){Ze-=7;return}return il(e,t,i,r,s,a,o)}else{let s=sn[Ze++],a=sn[Ze++],o=sn[Ze++],l=sn[Ze++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){Ze-=8;return}if(n<10){if(n===8)return il(e,t,i,r,s,a,o,l);{let c=sn[Ze++];if((c&128)>0){Ze-=9;return}return il(e,t,i,r,s,a,o,l,c)}}else if(n<12){let c=sn[Ze++],u=sn[Ze++];if((c&128)>0||(u&128)>0){Ze-=10;return}if(n<11)return il(e,t,i,r,s,a,o,l,c,u);let h=sn[Ze++];if((h&128)>0){Ze-=11;return}return il(e,t,i,r,s,a,o,l,c,u,h)}else{let c=sn[Ze++],u=sn[Ze++],h=sn[Ze++],d=sn[Ze++];if((c&128)>0||(u&128)>0||(h&128)>0||(d&128)>0){Ze-=12;return}if(n<14){if(n===12)return il(e,t,i,r,s,a,o,l,c,u,h,d);{let f=sn[Ze++];if((f&128)>0){Ze-=13;return}return il(e,t,i,r,s,a,o,l,c,u,h,d,f)}}else{let f=sn[Ze++],m=sn[Ze++];if((f&128)>0||(m&128)>0){Ze-=14;return}if(n<15)return il(e,t,i,r,s,a,o,l,c,u,h,d,f,m);let v=sn[Ze++];if((v&128)>0){Ze-=15;return}return il(e,t,i,r,s,a,o,l,c,u,h,d,f,m,v)}}}}}function lY(){let n=sn[Ze++],e;if(n<192)e=n-160;else switch(n){case 217:e=sn[Ze++];break;case 218:e=ir.getUint16(Ze),Ze+=2;break;case 219:e=ir.getUint32(Ze),Ze+=4;break;default:throw new Error("Expected string")}return tM(e)}function IF(n){return Ss.copyBuffers?Uint8Array.prototype.slice.call(sn,Ze,Ze+=n):sn.subarray(Ze,Ze+=n)}function b_(n){let e=sn[Ze++];if(Lu[e]){let t;return Lu[e](sn.subarray(Ze,t=Ze+=n),i=>{Ze=i;try{return Wa()}finally{Ze=t}})}else throw new Error("Unknown extension type "+e)}var cY=new Array(4096);function Nae(){let n=sn[Ze++];if(n>=160&&n<192){if(n=n-160,vp>=Ze)return yy.slice(Ze-Qh,(Ze+=n)-Qh);if(!(vp==0&&od<180))return g5(n)}else return Ze--,Pae(Wa());let e=(n<<5^(n>1?ir.getUint16(Ze):n>0?sn[Ze]:0))&4095,t=cY[e],i=Ze,r=Ze+n-3,s,a=0;if(t&&t.bytes==n){for(;i<r;){if(s=ir.getUint32(i),s!=t[a++]){i=1879048192;break}i+=4}for(r+=3;i<r;)if(s=sn[i++],s!=t[a++]){i=1879048192;break}if(i===r)return Ze=i,t.string;r-=3,i=Ze}for(t=[],cY[e]=t,t.bytes=n;i<r;)s=ir.getUint32(i),t.push(s),i+=4;for(r+=3;i<r;)s=sn[i++],t.push(s);let o=n<16?mH(n):Iae(n);return o!=null?t.string=o:t.string=g5(n)}function Pae(n){if(typeof n=="string")return n;if(typeof n=="number"||typeof n=="boolean"||typeof n=="bigint")return n.toString();if(n==null)return n+"";throw new Error("Invalid property type for record",typeof n)}const uY=(n,e)=>{let t=Wa().map(Pae),i=n;e!==void 0&&(n=n<32?-((e<<5)+n):(e<<5)+n,t.highByte=e);let r=lr[n];return r&&(r.isShared||ky)&&((lr.restoreStructures||(lr.restoreStructures=[]))[n]=r),lr[n]=t,t.read=pH(t,i),t.read()};Lu[0]=()=>{};Lu[0].noBuffer=!0;Lu[66]=n=>{let e=n.length,t=BigInt(n[0]&128?n[0]-256:n[0]);for(let i=1;i<e;i++)t<<=BigInt(8),t+=BigInt(n[i]);return t};let Iqe={Error,TypeError,ReferenceError};Lu[101]=()=>{let n=Wa();return(Iqe[n[0]]||Error)(n[1],{cause:n[2]})};Lu[105]=n=>{if(Ss.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=ir.getUint32(Ze-4);Mg||(Mg=new Map);let t=sn[Ze],i;t>=144&&t<160||t==220||t==221?i=[]:i={};let r={target:i};Mg.set(e,r);let s=Wa();return r.used?Object.assign(i,s):(r.target=s,s)};Lu[112]=n=>{if(Ss.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=ir.getUint32(Ze-4),t=Mg.get(e);return t.used=!0,t.target};Lu[115]=()=>new Set(Wa());const Dae=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(n=>n+"Array");let Nqe=typeof globalThis=="object"?globalThis:window;Lu[116]=n=>{let e=n[0],t=Dae[e];if(!t){if(e===16){let i=new ArrayBuffer(n.length-1);return new Uint8Array(i).set(n.subarray(1)),i}throw new Error("Could not find typed array for code "+e)}return new Nqe[t](Uint8Array.prototype.slice.call(n,1).buffer)};Lu[120]=()=>{let n=Wa();return new RegExp(n[0],n[1])};const Pqe=[];Lu[98]=n=>{let e=(n[0]<<24)+(n[1]<<16)+(n[2]<<8)+n[3],t=Ze;return Ze+=e-n.length,cl=Pqe,cl=[lY(),lY()],cl.position0=0,cl.position1=0,cl.postBundlePosition=Ze,Ze=t,Wa()};Lu[255]=n=>n.length==4?new Date((n[0]*16777216+(n[1]<<16)+(n[2]<<8)+n[3])*1e3):n.length==8?new Date(((n[0]<<22)+(n[1]<<14)+(n[2]<<6)+(n[3]>>2))/1e6+((n[3]&3)*4294967296+n[4]*16777216+(n[5]<<16)+(n[6]<<8)+n[7])*1e3):n.length==12?new Date(((n[0]<<24)+(n[1]<<16)+(n[2]<<8)+n[3])/1e6+((n[4]&128?-281474976710656:0)+n[6]*1099511627776+n[7]*4294967296+n[8]*16777216+(n[9]<<16)+(n[10]<<8)+n[11])*1e3):new Date("invalid");function kae(n){let e=od,t=Ze,i=Qh,r=vp,s=yy,a=Mg,o=cl,l=new Uint8Array(sn.slice(0,od)),c=lr,u=lr.slice(0,lr.length),h=Ss,d=ky,f=n();return od=e,Ze=t,Qh=i,vp=r,yy=s,Mg=a,cl=o,sn=l,ky=d,lr=c,lr.splice(0,lr.length,...u),Ss=h,ir=new DataView(sn.buffer,sn.byteOffset,sn.byteLength),f}function v5(){sn=null,Mg=null,lr=null}const gH=new Array(147);for(let n=0;n<256;n++)gH[n]=+("1e"+Math.floor(45.15-n*.30103));var dU=new kC({useRecords:!1});dU.unpack;dU.unpackMultiple;dU.unpack;let Dqe=new Float32Array(1);new Uint8Array(Dqe.buffer,0,4);let iI;try{iI=new TextEncoder}catch{}let y5,Lae;const fU=typeof rl<"u",tO=fU?function(n){return rl.allocUnsafeSlow(n)}:Uint8Array,Uae=fU?rl:Uint8Array,hY=fU?4294967296:2144337920;let ht,L1,_s,Je=0,Pc,la=null,kqe;const Lqe=21760,Uqe=/[\u0080-\uFFFF]/,aE=Symbol("record-id");class Bqe extends kC{constructor(e){super(e),this.offset=0;let t,i,r,s,a=Uae.prototype.utf8Write?function(q,U){return ht.utf8Write(q,U,ht.byteLength-U)}:iI&&iI.encodeInto?function(q,U){return iI.encodeInto(q,ht.subarray(U)).written}:!1,o=this;e||(e={});let l=e&&e.sequential,c=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=c?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let h=e.maxOwnStructures;h==null&&(h=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let d=u>32||h+u>64,f=u+64,m=u+h+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let v=[],_=0,y=0;this.pack=this.encode=function(q,U){if(ht||(ht=new tO(8192),_s=ht.dataView||(ht.dataView=new DataView(ht.buffer,0,8192)),Je=0),Pc=ht.length-10,Pc-Je<2048?(ht=new tO(ht.length),_s=ht.dataView||(ht.dataView=new DataView(ht.buffer,0,ht.length)),Pc=ht.length-10,Je=0):Je=Je+7&2147483640,t=Je,U&Gqe&&(Je+=U&255),s=o.structuredClone?new Map:null,o.bundleStrings&&typeof q!="string"?(la=[],la.size=1/0):la=null,r=o.structures,r){r.uninitialized&&(r=o._mergeStructures(o.getStructures()));let W=r.sharedLength||0;if(W>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let Q=0;Q<W;Q++){let X=r[Q];if(!X)continue;let Y,ae=r.transitions;for(let se=0,ue=X.length;se<ue;se++){let Ne=X[se];Y=ae[Ne],Y||(Y=ae[Ne]=Object.create(null)),ae=Y}ae[aE]=Q+64}this.lastNamedStructuresLength=W}l||(r.nextId=W+64)}i&&(i=!1);let ee;try{o.randomAccessStructure&&q&&q.constructor&&q.constructor===Object?H(q):x(q);let W=la;if(la&&pY(t,x,0),s&&s.idsToInsert){let Q=s.idsToInsert.sort((se,ue)=>se.offset>ue.offset?1:-1),X=Q.length,Y=-1;for(;W&&X>0;){let se=Q[--X].offset+t;se<W.stringsPosition+t&&Y===-1&&(Y=0),se>W.position+t?Y>=0&&(Y+=6):(Y>=0&&(_s.setUint32(W.position+t,_s.getUint32(W.position+t)+Y),Y=-1),W=W.previous,X++)}Y>=0&&W&&_s.setUint32(W.position+t,_s.getUint32(W.position+t)+Y),Je+=Q.length*6,Je>Pc&&k(Je),o.offset=Je;let ae=zqe(ht.subarray(t,Je),Q);return s=null,ae}return o.offset=Je,U&Hqe?(ht.start=t,ht.end=Je,ht):ht.subarray(t,Je)}catch(W){throw ee=W,W}finally{if(r&&(S(),i&&o.saveStructures)){let W=r.sharedLength||0,Q=ht.subarray(t,Je),X=jqe(r,o);if(!ee)return o.saveStructures(X,X.isCompatible)===!1?o.pack(q,U):(o.lastNamedStructuresLength=W,ht.length>1073741824&&(ht=null),Q)}ht.length>1073741824&&(ht=null),U&Vqe&&(Je=t)}};const S=()=>{y<10&&y++;let q=r.sharedLength||0;if(r.length>q&&!l&&(r.length=q),_>1e4)r.transitions=null,y=0,_=0,v.length>0&&(v=[]);else if(v.length>0&&!l){for(let U=0,ee=v.length;U<ee;U++)v[U][aE]=0;v=[]}},T=q=>{var U=q.length;U<16?ht[Je++]=144|U:U<65536?(ht[Je++]=220,ht[Je++]=U>>8,ht[Je++]=U&255):(ht[Je++]=221,_s.setUint32(Je,U),Je+=4);for(let ee=0;ee<U;ee++)x(q[ee])},x=q=>{Je>Pc&&(ht=k(Je));var U=typeof q,ee;if(U==="string"){let W=q.length;if(la&&W>=4&&W<4096){if((la.size+=W)>Lqe){let ae,se=(la[0]?la[0].length*3+la[1].length:0)+10;Je+se>Pc&&(ht=k(Je+se));let ue;la.position?(ue=la,ht[Je]=200,Je+=3,ht[Je++]=98,ae=Je-t,Je+=4,pY(t,x,0),_s.setUint16(ae+t-3,Je-t-ae)):(ht[Je++]=214,ht[Je++]=98,ae=Je-t,Je+=4),la=["",""],la.previous=ue,la.size=0,la.position=ae}let Y=Uqe.test(q);la[Y?0:1]+=q,ht[Je++]=193,x(Y?-W:W);return}let Q;W<32?Q=1:W<256?Q=2:W<65536?Q=3:Q=5;let X=W*3;if(Je+X>Pc&&(ht=k(Je+X)),W<64||!a){let Y,ae,se,ue=Je+Q;for(Y=0;Y<W;Y++)ae=q.charCodeAt(Y),ae<128?ht[ue++]=ae:ae<2048?(ht[ue++]=ae>>6|192,ht[ue++]=ae&63|128):(ae&64512)===55296&&((se=q.charCodeAt(Y+1))&64512)===56320?(ae=65536+((ae&1023)<<10)+(se&1023),Y++,ht[ue++]=ae>>18|240,ht[ue++]=ae>>12&63|128,ht[ue++]=ae>>6&63|128,ht[ue++]=ae&63|128):(ht[ue++]=ae>>12|224,ht[ue++]=ae>>6&63|128,ht[ue++]=ae&63|128);ee=ue-Je-Q}else ee=a(q,Je+Q);ee<32?ht[Je++]=160|ee:ee<256?(Q<2&&ht.copyWithin(Je+2,Je+1,Je+1+ee),ht[Je++]=217,ht[Je++]=ee):ee<65536?(Q<3&&ht.copyWithin(Je+3,Je+2,Je+2+ee),ht[Je++]=218,ht[Je++]=ee>>8,ht[Je++]=ee&255):(Q<5&&ht.copyWithin(Je+5,Je+3,Je+3+ee),ht[Je++]=219,_s.setUint32(Je,ee),Je+=4),Je+=ee}else if(U==="number")if(q>>>0===q)q<32||q<128&&this.useRecords===!1||q<64&&!this.randomAccessStructure?ht[Je++]=q:q<256?(ht[Je++]=204,ht[Je++]=q):q<65536?(ht[Je++]=205,ht[Je++]=q>>8,ht[Je++]=q&255):(ht[Je++]=206,_s.setUint32(Je,q),Je+=4);else if(q>>0===q)q>=-32?ht[Je++]=256+q:q>=-128?(ht[Je++]=208,ht[Je++]=q+256):q>=-32768?(ht[Je++]=209,_s.setInt16(Je,q),Je+=2):(ht[Je++]=210,_s.setInt32(Je,q),Je+=4);else{let W;if((W=this.useFloat32)>0&&q<4294967296&&q>=-2147483648){ht[Je++]=202,_s.setFloat32(Je,q);let Q;if(W<4||(Q=q*gH[(ht[Je]&127)<<1|ht[Je+1]>>7])>>0===Q){Je+=4;return}else Je--}ht[Je++]=203,_s.setFloat64(Je,q),Je+=8}else if(U==="object"||U==="function")if(!q)ht[Je++]=192;else{if(s){let Q=s.get(q);if(Q){if(!Q.id){let X=s.idsToInsert||(s.idsToInsert=[]);Q.id=X.push(Q)}ht[Je++]=214,ht[Je++]=112,_s.setUint32(Je,Q.id),Je+=4;return}else s.set(q,{offset:Je-t})}let W=q.constructor;if(W===Object)L(q);else if(W===Array)T(q);else if(W===Map)if(this.mapAsEmptyObject)ht[Je++]=128;else{ee=q.size,ee<16?ht[Je++]=128|ee:ee<65536?(ht[Je++]=222,ht[Je++]=ee>>8,ht[Je++]=ee&255):(ht[Je++]=223,_s.setUint32(Je,ee),Je+=4);for(let[Q,X]of q)x(Q),x(X)}else{for(let Q=0,X=y5.length;Q<X;Q++){let Y=Lae[Q];if(q instanceof Y){let ae=y5[Q];if(ae.write){ae.type&&(ht[Je++]=212,ht[Je++]=ae.type,ht[Je++]=0);let _e=ae.write.call(this,q);_e===q?Array.isArray(q)?T(q):L(q):x(_e);return}let se=ht,ue=_s,Ne=Je;ht=null;let ve;try{ve=ae.pack.call(this,q,_e=>(ht=se,se=null,Je+=_e,Je>Pc&&k(Je),{target:ht,targetView:_s,position:Je-_e}),x)}finally{se&&(ht=se,_s=ue,Je=Ne,Pc=ht.length-10)}ve&&(ve.length+Je>Pc&&k(ve.length+Je),Je=Fqe(ve,ht,Je,ae.type));return}}if(Array.isArray(q))T(q);else{if(q.toJSON){const Q=q.toJSON();if(Q!==q)return x(Q)}if(U==="function")return x(this.writeFunction&&this.writeFunction(q));L(q)}}}else if(U==="boolean")ht[Je++]=q?195:194;else if(U==="bigint"){if(q<BigInt(1)<<BigInt(63)&&q>=-(BigInt(1)<<BigInt(63)))ht[Je++]=211,_s.setBigInt64(Je,q);else if(q<BigInt(1)<<BigInt(64)&&q>0)ht[Je++]=207,_s.setBigUint64(Je,q);else if(this.largeBigIntToFloat)ht[Je++]=203,_s.setFloat64(Je,Number(q));else{if(this.largeBigIntToString)return x(q.toString());if(this.useBigIntExtension&&q<BigInt(2)**BigInt(1023)&&q>-(BigInt(2)**BigInt(1023))){ht[Je++]=199,Je++,ht[Je++]=66;let W=[],Q;do{let X=q&BigInt(255);Q=(X&BigInt(128))===(q<BigInt(0)?BigInt(128):BigInt(0)),W.push(X),q>>=BigInt(8)}while(!((q===BigInt(0)||q===BigInt(-1))&&Q));ht[Je-2]=W.length;for(let X=W.length;X>0;)ht[Je++]=Number(W[--X]);return}else throw new RangeError(q+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}Je+=8}else if(U==="undefined")this.encodeUndefinedAsNil?ht[Je++]=192:(ht[Je++]=212,ht[Je++]=0,ht[Je++]=0);else throw new Error("Unknown type: "+U)},I=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?q=>{let U;if(this.skipValues){U=[];for(let Q in q)(typeof q.hasOwnProperty!="function"||q.hasOwnProperty(Q))&&!this.skipValues.includes(q[Q])&&U.push(Q)}else U=Object.keys(q);let ee=U.length;ee<16?ht[Je++]=128|ee:ee<65536?(ht[Je++]=222,ht[Je++]=ee>>8,ht[Je++]=ee&255):(ht[Je++]=223,_s.setUint32(Je,ee),Je+=4);let W;if(this.coercibleKeyAsNumber)for(let Q=0;Q<ee;Q++){W=U[Q];let X=Number(W);x(isNaN(X)?W:X),x(q[W])}else for(let Q=0;Q<ee;Q++)x(W=U[Q]),x(q[W])}:q=>{ht[Je++]=222;let U=Je-t;Je+=2;let ee=0;for(let W in q)(typeof q.hasOwnProperty!="function"||q.hasOwnProperty(W))&&(x(W),x(q[W]),ee++);if(ee>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');ht[U+++t]=ee>>8,ht[U+t]=ee&255},R=this.useRecords===!1?I:e.progressiveRecords&&!d?q=>{let U,ee=r.transitions||(r.transitions=Object.create(null)),W=Je++-t,Q;for(let X in q)if(typeof q.hasOwnProperty!="function"||q.hasOwnProperty(X)){if(U=ee[X],U)ee=U;else{let Y=Object.keys(q),ae=ee;ee=r.transitions;let se=0;for(let ue=0,Ne=Y.length;ue<Ne;ue++){let ve=Y[ue];U=ee[ve],U||(U=ee[ve]=Object.create(null),se++),ee=U}W+t+1==Je?(Je--,z(ee,Y,se)):Z(ee,Y,W,se),Q=!0,ee=ae[X]}x(q[X])}if(!Q){let X=ee[aE];X?ht[W+t]=X:Z(ee,Object.keys(q),W,0)}}:q=>{let U,ee=r.transitions||(r.transitions=Object.create(null)),W=0;for(let X in q)(typeof q.hasOwnProperty!="function"||q.hasOwnProperty(X))&&(U=ee[X],U||(U=ee[X]=Object.create(null),W++),ee=U);let Q=ee[aE];Q?Q>=96&&d?(ht[Je++]=((Q-=96)&31)+96,ht[Je++]=Q>>5):ht[Je++]=Q:z(ee,ee.__keys__||Object.keys(q),W);for(let X in q)(typeof q.hasOwnProperty!="function"||q.hasOwnProperty(X))&&x(q[X])},N=typeof this.useRecords=="function"&&this.useRecords,L=N?q=>{N(q)?R(q):I(q)}:R,k=q=>{let U;if(q>16777216){if(q-t>hY)throw new Error("Packed buffer would be larger than maximum buffer size");U=Math.min(hY,Math.round(Math.max((q-t)*(q>67108864?1.25:2),4194304)/4096)*4096)}else U=(Math.max(q-t<<2,ht.length-1)>>12)+1<<12;let ee=new tO(U);return _s=ee.dataView||(ee.dataView=new DataView(ee.buffer,0,U)),q=Math.min(q,ht.length),ht.copy?ht.copy(ee,0,t,q):ee.set(ht.slice(t,q)),Je-=t,t=0,Pc=ee.length-10,ht=ee},z=(q,U,ee)=>{let W=r.nextId;W||(W=64),W<f&&this.shouldShareStructure&&!this.shouldShareStructure(U)?(W=r.nextOwnId,W<m||(W=f),r.nextOwnId=W+1):(W>=m&&(W=f),r.nextId=W+1);let Q=U.highByte=W>=96&&d?W-96>>5:-1;q[aE]=W,q.__keys__=U,r[W-64]=U,W<f?(U.isShared=!0,r.sharedLength=W-63,i=!0,Q>=0?(ht[Je++]=(W&31)+96,ht[Je++]=Q):ht[Je++]=W):(Q>=0?(ht[Je++]=213,ht[Je++]=114,ht[Je++]=(W&31)+96,ht[Je++]=Q):(ht[Je++]=212,ht[Je++]=114,ht[Je++]=W),ee&&(_+=y*ee),v.length>=h&&(v.shift()[aE]=0),v.push(q),x(U))},Z=(q,U,ee,W)=>{let Q=ht,X=Je,Y=Pc,ae=t;ht=L1,Je=0,t=0,ht||(L1=ht=new tO(8192)),Pc=ht.length-10,z(q,U,W),L1=ht;let se=Je;if(ht=Q,Je=X,Pc=Y,t=ae,se>1){let ue=Je+se-1;ue>Pc&&k(ue);let Ne=ee+t;ht.copyWithin(Ne+se,Ne+1,Je),ht.set(L1.slice(0,se),Ne),Je=ue}else ht[ee+t]=L1[0]},H=q=>{let U=kqe(q,ht,t,Je,r,k,(ee,W,Q)=>{if(Q)return i=!0;Je=W;let X=ht;return x(ee),S(),X!==ht?{position:Je,targetView:_s,target:ht}:Je},this);if(U===0)return L(q);Je=U}}useBuffer(e){ht=e,ht.dataView||(ht.dataView=new DataView(ht.buffer,ht.byteOffset,ht.byteLength)),Je=0}set position(e){Je=e}get position(){return Je}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}Lae=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Aae];y5=[{pack(n,e,t){let i=n.getTime()/1e3;if((this.useTimestamp32||n.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:r,targetView:s,position:a}=e(6);r[a++]=214,r[a++]=255,s.setUint32(a,i)}else if(i>0&&i<4294967296){let{target:r,targetView:s,position:a}=e(10);r[a++]=215,r[a++]=255,s.setUint32(a,n.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(a+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),t(this.onInvalidDate());let{target:r,targetView:s,position:a}=e(3);r[a++]=212,r[a++]=255,r[a++]=255}else{let{target:r,targetView:s,position:a}=e(15);r[a++]=199,r[a++]=12,r[a++]=255,s.setUint32(a,n.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(i)))}}},{pack(n,e,t){if(this.setAsEmptyObject)return e(0),t({});let i=Array.from(n),{target:r,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(r[s++]=212,r[s++]=115,r[s++]=0),t(i)}},{pack(n,e,t){let{target:i,position:r}=e(this.moreTypes?3:0);this.moreTypes&&(i[r++]=212,i[r++]=101,i[r++]=0),t([n.name,n.message,n.cause])}},{pack(n,e,t){let{target:i,position:r}=e(this.moreTypes?3:0);this.moreTypes&&(i[r++]=212,i[r++]=120,i[r++]=0),t([n.source,n.flags])}},{pack(n,e){this.moreTypes?dY(n,16,e):fY(fU?rl.from(n):new Uint8Array(n),e)}},{pack(n,e){let t=n.constructor;t!==Uae&&this.moreTypes?dY(n,Dae.indexOf(t.name),e):fY(n,e)}},{pack(n,e){let{target:t,position:i}=e(1);t[i]=193}}];function dY(n,e,t,i){let r=n.byteLength;if(r+1<256){var{target:s,position:a}=t(4+r);s[a++]=199,s[a++]=r+1}else if(r+1<65536){var{target:s,position:a}=t(5+r);s[a++]=200,s[a++]=r+1>>8,s[a++]=r+1&255}else{var{target:s,position:a,targetView:o}=t(7+r);s[a++]=201,o.setUint32(a,r+1),a+=4}s[a++]=116,s[a++]=e,n.buffer||(n=new Uint8Array(n)),s.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),a)}function fY(n,e){let t=n.byteLength;var i,r;if(t<256){var{target:i,position:r}=e(t+2);i[r++]=196,i[r++]=t}else if(t<65536){var{target:i,position:r}=e(t+3);i[r++]=197,i[r++]=t>>8,i[r++]=t&255}else{var{target:i,position:r,targetView:s}=e(t+5);i[r++]=198,s.setUint32(r,t),r+=4}i.set(n,r)}function Fqe(n,e,t,i){let r=n.length;switch(r){case 1:e[t++]=212;break;case 2:e[t++]=213;break;case 4:e[t++]=214;break;case 8:e[t++]=215;break;case 16:e[t++]=216;break;default:r<256?(e[t++]=199,e[t++]=r):r<65536?(e[t++]=200,e[t++]=r>>8,e[t++]=r&255):(e[t++]=201,e[t++]=r>>24,e[t++]=r>>16&255,e[t++]=r>>8&255,e[t++]=r&255)}return e[t++]=i,e.set(n,t),t+=r,t}function zqe(n,e){let t,i=e.length*6,r=n.length-i;for(;t=e.pop();){let s=t.offset,a=t.id;n.copyWithin(s+i,s,r),i-=6;let o=s+i;n[o++]=214,n[o++]=105,n[o++]=a>>24,n[o++]=a>>16&255,n[o++]=a>>8&255,n[o++]=a&255,r=s}return n}function pY(n,e,t){if(la.length>0){_s.setUint32(la.position+n,Je+t-la.position-n),la.stringsPosition=Je-n;let i=la;la=null,e(i[0]),e(i[1])}}function jqe(n,e){return n.isCompatible=t=>{let i=!t||(e.lastNamedStructuresLength||0)===t.length;return i||e._mergeStructures(t),i},n}let Bae=new Bqe({useRecords:!1});Bae.pack;Bae.pack;const Hqe=512,Vqe=1024,Gqe=2048,df=()=>new Map,_5=n=>{const e=df();return n.forEach((t,i)=>{e.set(i,t)}),e},m0=(n,e,t)=>{let i=n.get(e);return i===void 0&&n.set(e,i=t()),i},qqe=(n,e)=>{const t=[];for(const[i,r]of n)t.push(e(r,i));return t},$qe=(n,e)=>{for(const[t,i]of n)if(e(i,t))return!0;return!1},ZT=()=>new Set,NF=n=>n[n.length-1],Wqe=(n,e)=>{for(let t=0;t<e.length;t++)n.push(e[t])},xb=Array.from,Yqe=(n,e)=>{for(let t=0;t<n.length;t++)if(e(n[t],t,n))return!0;return!1},b5=Array.isArray;class Fae{constructor(){this._observers=df()}on(e,t){return m0(this._observers,e,ZT).add(t),t}once(e,t){const i=(...r)=>{this.off(e,i),t(...r)};this.on(e,i)}off(e,t){const i=this._observers.get(e);i!==void 0&&(i.delete(t),i.size===0&&this._observers.delete(e))}emit(e,t){return xb((this._observers.get(e)||df()).values()).forEach(i=>i(...t))}destroy(){this._observers=df()}}const Xy=Math.floor,rI=Math.abs,zae=(n,e)=>n<e?n:e,Kb=(n,e)=>n>e?n:e,jae=n=>n!==0?n<0:1/n<0,mY=1,gY=2,PF=4,DF=8,LC=32,Rg=64,Eh=128,pU=31,S5=63,sb=127,Xqe=2147483647,Hae=Number.MAX_SAFE_INTEGER,Kqe=Number.isInteger||(n=>typeof n=="number"&&isFinite(n)&&Xy(n)===n),Zqe=n=>n.toLowerCase(),Jqe=/^\s*/g,Qqe=n=>n.replace(Jqe,""),e7e=/([A-Z])/g,vY=(n,e)=>Qqe(n.replace(e7e,t=>`${e}${Zqe(t)}`)),t7e=n=>{const e=unescape(encodeURIComponent(n)),t=e.length,i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=e.codePointAt(r);return i},UC=typeof TextEncoder<"u"?new TextEncoder:null,n7e=n=>UC.encode(n),i7e=UC?n7e:t7e;let Lw=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Lw&&Lw.decode(new Uint8Array).length===1&&(Lw=null);class nM{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const mU=()=>new nM,r7e=n=>{let e=n.cpos;for(let t=0;t<n.bufs.length;t++)e+=n.bufs[t].length;return e},Sp=n=>{const e=new Uint8Array(r7e(n));let t=0;for(let i=0;i<n.bufs.length;i++){const r=n.bufs[i];e.set(r,t),t+=r.length}return e.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),t),e},s7e=(n,e)=>{const t=n.cbuf.length;t-n.cpos<e&&(n.bufs.push(new Uint8Array(n.cbuf.buffer,0,n.cpos)),n.cbuf=new Uint8Array(Kb(t,e)*2),n.cpos=0)},ol=(n,e)=>{const t=n.cbuf.length;n.cpos===t&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(t*2),n.cpos=0),n.cbuf[n.cpos++]=e},E5=ol,br=(n,e)=>{for(;e>sb;)ol(n,Eh|sb&e),e=Xy(e/128);ol(n,sb&e)},vH=(n,e)=>{const t=jae(e);for(t&&(e=-e),ol(n,(e>S5?Eh:0)|(t?Rg:0)|S5&e),e=Xy(e/64);e>0;)ol(n,(e>sb?Eh:0)|sb&e),e=Xy(e/128)},T5=new Uint8Array(3e4),a7e=T5.length/3,o7e=(n,e)=>{if(e.length<a7e){const t=UC.encodeInto(e,T5).written||0;br(n,t);for(let i=0;i<t;i++)ol(n,T5[i])}else ch(n,i7e(e))},l7e=(n,e)=>{const t=unescape(encodeURIComponent(e)),i=t.length;br(n,i);for(let r=0;r<i;r++)ol(n,t.codePointAt(r))},rT=UC&&UC.encodeInto?o7e:l7e,gU=(n,e)=>{const t=n.cbuf.length,i=n.cpos,r=zae(t-i,e.length),s=e.length-r;n.cbuf.set(e.subarray(0,r),i),n.cpos+=r,s>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Kb(t*2,s)),n.cbuf.set(e.subarray(r)),n.cpos=s)},ch=(n,e)=>{br(n,e.byteLength),gU(n,e)},yH=(n,e)=>{s7e(n,e);const t=new DataView(n.cbuf.buffer,n.cpos,e);return n.cpos+=e,t},c7e=(n,e)=>yH(n,4).setFloat32(0,e,!1),u7e=(n,e)=>yH(n,8).setFloat64(0,e,!1),h7e=(n,e)=>yH(n,8).setBigInt64(0,e,!1),yY=new DataView(new ArrayBuffer(4)),d7e=n=>(yY.setFloat32(0,n),yY.getFloat32(0)===n),BC=(n,e)=>{switch(typeof e){case"string":ol(n,119),rT(n,e);break;case"number":Kqe(e)&&rI(e)<=Xqe?(ol(n,125),vH(n,e)):d7e(e)?(ol(n,124),c7e(n,e)):(ol(n,123),u7e(n,e));break;case"bigint":ol(n,122),h7e(n,e);break;case"object":if(e===null)ol(n,126);else if(b5(e)){ol(n,117),br(n,e.length);for(let t=0;t<e.length;t++)BC(n,e[t])}else if(e instanceof Uint8Array)ol(n,116),ch(n,e);else{ol(n,118);const t=Object.keys(e);br(n,t.length);for(let i=0;i<t.length;i++){const r=t[i];rT(n,r),BC(n,e[r])}}break;case"boolean":ol(n,e?120:121);break;default:ol(n,127)}};class _Y extends nM{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&br(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const bY=n=>{n.count>0&&(vH(n.encoder,n.count===1?n.s:-n.s),n.count>1&&br(n.encoder,n.count-2))};class sI{constructor(){this.encoder=new nM,this.s=0,this.count=0}write(e){this.s===e?this.count++:(bY(this),this.count=1,this.s=e)}toUint8Array(){return bY(this),Sp(this.encoder)}}const SY=n=>{if(n.count>0){const e=n.diff*2+(n.count===1?0:1);vH(n.encoder,e),n.count>1&&br(n.encoder,n.count-2)}};class kF{constructor(){this.encoder=new nM,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(SY(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return SY(this),Sp(this.encoder)}}class f7e{constructor(){this.sarr=[],this.s="",this.lensE=new sI}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new nM;return this.sarr.push(this.s),this.s="",rT(e,this.sarr.join("")),gU(e,this.lensE.toUint8Array()),Sp(e)}}const Ky=n=>new Error(n),Mp=()=>{throw Ky("Method unimplemented")},Dp=()=>{throw Ky("Unexpected case")},Vae=Ky("Unexpected end of array"),Gae=Ky("Integer out of Range");class vU{constructor(e){this.arr=e,this.pos=0}}const Bx=n=>new vU(n),p7e=n=>n.pos!==n.arr.length,m7e=(n,e)=>{const t=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,e);return n.pos+=e,t},uh=n=>m7e(n,Xi(n)),JT=n=>n.arr[n.pos++],Xi=n=>{let e=0,t=1;const i=n.arr.length;for(;n.pos<i;){const r=n.arr[n.pos++];if(e=e+(r&sb)*t,t*=128,r<Eh)return e;if(e>Hae)throw Gae}throw Vae},_H=n=>{let e=n.arr[n.pos++],t=e&S5,i=64;const r=(e&Rg)>0?-1:1;if(!(e&Eh))return r*t;const s=n.arr.length;for(;n.pos<s;){if(e=n.arr[n.pos++],t=t+(e&sb)*i,i*=128,e<Eh)return r*t;if(t>Hae)throw Gae}throw Vae},g7e=n=>{let e=Xi(n);if(e===0)return"";{let t=String.fromCodePoint(JT(n));if(--e<100)for(;e--;)t+=String.fromCodePoint(JT(n));else for(;e>0;){const i=e<1e4?e:1e4,r=n.arr.subarray(n.pos,n.pos+i);n.pos+=i,t+=String.fromCodePoint.apply(null,r),e-=i}return decodeURIComponent(escape(t))}},v7e=n=>Lw.decode(uh(n)),sT=Lw?v7e:g7e,bH=(n,e)=>{const t=new DataView(n.arr.buffer,n.arr.byteOffset+n.pos,e);return n.pos+=e,t},y7e=n=>bH(n,4).getFloat32(0,!1),_7e=n=>bH(n,8).getFloat64(0,!1),b7e=n=>bH(n,8).getBigInt64(0,!1),S7e=[n=>{},n=>null,_H,y7e,_7e,b7e,n=>!1,n=>!0,sT,n=>{const e=Xi(n),t={};for(let i=0;i<e;i++){const r=sT(n);t[r]=FC(n)}return t},n=>{const e=Xi(n),t=[];for(let i=0;i<e;i++)t.push(FC(n));return t},uh],FC=n=>S7e[127-JT(n)](n);class EY extends vU{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),p7e(this)?this.count=Xi(this)+1:this.count=-1),this.count--,this.s}}class aI extends vU{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=_H(this);const e=jae(this.s);this.count=1,e&&(this.s=-this.s,this.count=Xi(this)+2)}return this.count--,this.s}}class LF extends vU{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=_H(this),t=e&1;this.diff=Xy(e/2),this.count=1,t&&(this.count=Xi(this)+2)}return this.s+=this.diff,this.count--,this.s}}class E7e{constructor(e){this.decoder=new aI(e),this.str=sT(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const T7e=crypto.getRandomValues.bind(crypto),qae=()=>T7e(new Uint32Array(1))[0],x7e="10000000-1000-4000-8000"+-1e11,w7e=()=>x7e.replace(/[018]/g,n=>(n^qae()&15>>n/4).toString(16)),C7e=Date.now,TY=n=>new Promise(n);Promise.all.bind(Promise);const xY=n=>n===void 0?null:n;class A7e{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let $ae=new A7e,M7e=!0;try{typeof localStorage<"u"&&localStorage&&($ae=localStorage,M7e=!1)}catch{}const R7e=$ae,O7e=Object.assign,I7e=Object.keys,N7e=(n,e)=>{for(const t in n)e(n[t],t)},wY=n=>I7e(n).length,P7e=n=>{for(const e in n)return!1;return!0},D7e=(n,e)=>{for(const t in n)if(!e(n[t],t))return!1;return!0},k7e=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),L7e=(n,e)=>n===e||wY(n)===wY(e)&&D7e(n,(t,i)=>(t!==void 0||k7e(e,i))&&e[i]===t),U7e=Object.freeze,Wae=n=>{for(const e in n){const t=n[e];(typeof t=="object"||typeof t=="function")&&Wae(n[e])}return U7e(n)},SH=(n,e,t=0)=>{try{for(;t<n.length;t++)n[t](...e)}finally{t<n.length&&SH(n,e,t+1)}},B7e=n=>n,F7e=(n,e)=>e.includes(n);var Yae={};const zC=typeof ss<"u"&&ss.release&&/node|io\.js/.test(ss.release.name)&&Object.prototype.toString.call(typeof ss<"u"?ss:0)==="[object process]";let lp;const z7e=()=>{if(lp===void 0)if(zC){lp=df();const n=ss.argv;let e=null;for(let t=0;t<n.length;t++){const i=n[t];i[0]==="-"?(e!==null&&lp.set(e,""),e=i):e!==null&&(lp.set(e,i),e=null)}e!==null&&lp.set(e,"")}else typeof location=="object"?(lp=df(),(location.search||"?").slice(1).split("&").forEach(n=>{if(n.length!==0){const[e,t]=n.split("=");lp.set(`--${vY(e,"-")}`,t),lp.set(`-${vY(e,"-")}`,t)}})):lp=df();return lp},x5=n=>z7e().has(n),TP=n=>xY(zC?Yae[n.toUpperCase().replaceAll("-","_")]:R7e.getItem(n)),Xae=n=>x5("--"+n)||TP(n)!==null;Xae("production");const j7e=zC&&F7e(Yae.FORCE_COLOR,["true","1","2"]),H7e=j7e||!x5("--no-colors")&&!Xae("no-color")&&(!zC||ss.stdout.isTTY)&&(!zC||x5("--color")||TP("COLORTERM")!==null||(TP("TERM")||"").includes("color")),V7e=n=>new Uint8Array(n),G7e=n=>{const e=V7e(n.byteLength);return e.set(n),e};class q7e{constructor(e,t){this.left=e,this.right=t}}const ig=(n,e)=>new q7e(n,e);typeof DOMParser<"u"&&new DOMParser;const $7e=n=>qqe(n,(e,t)=>`${t}:${e};`).join(""),Zg=Symbol,Kae=Zg(),Zae=Zg(),W7e=Zg(),Y7e=Zg(),X7e=Zg(),Jae=Zg(),K7e=Zg(),EH=Zg(),Z7e=Zg(),J7e=n=>{var r;n.length===1&&((r=n[0])==null?void 0:r.constructor)===Function&&(n=n[0]());const e=[],t=[];let i=0;for(;i<n.length;i++){const s=n[i];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(i>0&&t.push(e.join(""));i<n.length;i++){const s=n[i];s instanceof Symbol||t.push(s)}return t},Q7e={[Kae]:ig("font-weight","bold"),[Zae]:ig("font-weight","normal"),[W7e]:ig("color","blue"),[X7e]:ig("color","green"),[Y7e]:ig("color","grey"),[Jae]:ig("color","red"),[K7e]:ig("color","purple"),[EH]:ig("color","orange"),[Z7e]:ig("color","black")},e9e=n=>{var a;n.length===1&&((a=n[0])==null?void 0:a.constructor)===Function&&(n=n[0]());const e=[],t=[],i=df();let r=[],s=0;for(;s<n.length;s++){const o=n[s],l=Q7e[o];if(l!==void 0)i.set(l.left,l.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const c=$7e(i);s>0||c.length>0?(e.push("%c"+o),t.push(c)):e.push(o)}else break}}for(s>0&&(r=t,r.unshift(e.join("")));s<n.length;s++){const o=n[s];o instanceof Symbol||r.push(o)}return r},Qae=H7e?e9e:J7e,t9e=(...n)=>{console.log(...Qae(n)),toe.forEach(e=>e.print(n))},eoe=(...n)=>{console.warn(...Qae(n)),n.unshift(EH),toe.forEach(e=>e.print(n))},toe=ZT(),noe=n=>({[Symbol.iterator](){return this},next:n}),n9e=(n,e)=>noe(()=>{let t;do t=n.next();while(!t.done&&!e(t.value));return t}),UF=(n,e)=>noe(()=>{const{done:t,value:i}=n.next();return{done:t,value:t?void 0:e(i)}});class TH{constructor(e,t){this.clock=e,this.len=t}}class Fx{constructor(){this.clients=new Map}}const QT=(n,e,t)=>e.clients.forEach((i,r)=>{const s=n.doc.store.clients.get(r);for(let a=0;a<i.length;a++){const o=i[a];hoe(n,s,o.clock,o.len,t)}}),i9e=(n,e)=>{let t=0,i=n.length-1;for(;t<=i;){const r=Xy((t+i)/2),s=n[r],a=s.clock;if(a<=e){if(e<a+s.len)return r;t=r+1}else i=r-1}return null},iM=(n,e)=>{const t=n.clients.get(e.client);return t!==void 0&&i9e(t,e.clock)!==null},xH=n=>{n.clients.forEach(e=>{e.sort((r,s)=>r.clock-s.clock);let t,i;for(t=1,i=1;t<e.length;t++){const r=e[i-1],s=e[t];r.clock+r.len>=s.clock?r.len=Kb(r.len,s.clock+s.len-r.clock):(i<t&&(e[i]=s),i++)}e.length=i})},w5=n=>{const e=new Fx;for(let t=0;t<n.length;t++)n[t].clients.forEach((i,r)=>{if(!e.clients.has(r)){const s=i.slice();for(let a=t+1;a<n.length;a++)Wqe(s,n[a].clients.get(r)||[]);e.clients.set(r,s)}});return xH(e),e},jC=(n,e,t,i)=>{m0(n.clients,e,()=>[]).push(new TH(t,i))},r9e=()=>new Fx,s9e=n=>{const e=r9e();return n.clients.forEach((t,i)=>{const r=[];for(let s=0;s<t.length;s++){const a=t[s];if(a.deleted){const o=a.id.clock;let l=a.length;if(s+1<t.length)for(let c=t[s+1];s+1<t.length&&c.deleted;c=t[++s+1])l+=c.length;r.push(new TH(o,l))}}r.length>0&&e.clients.set(i,r)}),e},zx=(n,e)=>{br(n.restEncoder,e.clients.size),xb(e.clients.entries()).sort((t,i)=>i[0]-t[0]).forEach(([t,i])=>{n.resetDsCurVal(),br(n.restEncoder,t);const r=i.length;br(n.restEncoder,r);for(let s=0;s<r;s++){const a=i[s];n.writeDsClock(a.clock),n.writeDsLen(a.len)}})},wH=n=>{const e=new Fx,t=Xi(n.restDecoder);for(let i=0;i<t;i++){n.resetDsCurVal();const r=Xi(n.restDecoder),s=Xi(n.restDecoder);if(s>0){const a=m0(e.clients,r,()=>[]);for(let o=0;o<s;o++)a.push(new TH(n.readDsClock(),n.readDsLen()))}}return e},CY=(n,e,t)=>{const i=new Fx,r=Xi(n.restDecoder);for(let s=0;s<r;s++){n.resetDsCurVal();const a=Xi(n.restDecoder),o=Xi(n.restDecoder),l=t.clients.get(a)||[],c=zo(t,a);for(let u=0;u<o;u++){const h=n.readDsClock(),d=h+n.readDsLen();if(h<c){c<d&&jC(i,a,c,d-c);let f=kp(l,h),m=l[f];for(!m.deleted&&m.id.clock<h&&(l.splice(f+1,0,IP(e,m,h-m.id.clock)),f++);f<l.length&&(m=l[f++],m.id.clock<d);)m.deleted||(d<m.id.clock+m.length&&l.splice(f,0,IP(e,m,d-m.id.clock)),m.delete(e))}else jC(i,a,h,d-h)}}if(i.clients.size>0){const s=new wb;return br(s.restEncoder,0),zx(s,i),s.toUint8Array()}return null},ioe=qae;class jx extends Fae{constructor({guid:e=w7e(),collectionid:t=null,gc:i=!0,gcFilter:r=()=>!0,meta:s=null,autoLoad:a=!1,shouldLoad:o=!0}={}){super(),this.gc=i,this.gcFilter=r,this.clientID=ioe(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new coe,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=a,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=TY(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>TY(c=>{const u=h=>{(h===void 0||h===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&ds(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(xb(this.subdocs).map(e=>e.guid))}transact(e,t=null){return ds(this,e,t)}get(e,t=pl){const i=m0(this.share,e,()=>{const s=new t;return s._integrate(this,null),s}),r=i.constructor;if(t!==pl&&r!==t)if(r===pl){const s=new t;s._map=i._map,i._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=s}),s._start=i._start;for(let a=s._start;a!==null;a=a.right)a.parent=s;return s._length=i._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,oT)}getText(e=""){return this.get(e,nx)}getMap(e=""){return this.get(e,tx)}getXmlElement(e=""){return this.get(e,ix)}getXmlFragment(e=""){return this.get(e,Cb)}toJSON(){const e={};return this.share.forEach((t,i)=>{e[i]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,xb(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new jx({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,ds(e.parent.doc,i=>{const r=t.doc;e.deleted||i.subdocsAdded.add(r),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class roe{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Xi(this.restDecoder)}readDsLen(){return Xi(this.restDecoder)}}class soe extends roe{readLeftID(){return Ki(Xi(this.restDecoder),Xi(this.restDecoder))}readRightID(){return Ki(Xi(this.restDecoder),Xi(this.restDecoder))}readClient(){return Xi(this.restDecoder)}readInfo(){return JT(this.restDecoder)}readString(){return sT(this.restDecoder)}readParentInfo(){return Xi(this.restDecoder)===1}readTypeRef(){return Xi(this.restDecoder)}readLen(){return Xi(this.restDecoder)}readAny(){return FC(this.restDecoder)}readBuf(){return G7e(uh(this.restDecoder))}readJSON(){return JSON.parse(sT(this.restDecoder))}readKey(){return sT(this.restDecoder)}}class a9e{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Xi(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Xi(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class ex extends a9e{constructor(e){super(e),this.keys=[],Xi(e),this.keyClockDecoder=new LF(uh(e)),this.clientDecoder=new aI(uh(e)),this.leftClockDecoder=new LF(uh(e)),this.rightClockDecoder=new LF(uh(e)),this.infoDecoder=new EY(uh(e),JT),this.stringDecoder=new E7e(uh(e)),this.parentInfoDecoder=new EY(uh(e),JT),this.typeRefDecoder=new aI(uh(e)),this.lenDecoder=new aI(uh(e))}readLeftID(){return new aT(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new aT(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return FC(this.restDecoder)}readBuf(){return uh(this.restDecoder)}readJSON(){return FC(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class o9e{constructor(){this.restEncoder=mU()}toUint8Array(){return Sp(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){br(this.restEncoder,e)}writeDsLen(e){br(this.restEncoder,e)}}class rM extends o9e{writeLeftID(e){br(this.restEncoder,e.client),br(this.restEncoder,e.clock)}writeRightID(e){br(this.restEncoder,e.client),br(this.restEncoder,e.clock)}writeClient(e){br(this.restEncoder,e)}writeInfo(e){E5(this.restEncoder,e)}writeString(e){rT(this.restEncoder,e)}writeParentInfo(e){br(this.restEncoder,e?1:0)}writeTypeRef(e){br(this.restEncoder,e)}writeLen(e){br(this.restEncoder,e)}writeAny(e){BC(this.restEncoder,e)}writeBuf(e){ch(this.restEncoder,e)}writeJSON(e){rT(this.restEncoder,JSON.stringify(e))}writeKey(e){rT(this.restEncoder,e)}}class l9e{constructor(){this.restEncoder=mU(),this.dsCurrVal=0}toUint8Array(){return Sp(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,br(this.restEncoder,t)}writeDsLen(e){e===0&&Dp(),br(this.restEncoder,e-1),this.dsCurrVal+=e}}class wb extends l9e{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new kF,this.clientEncoder=new sI,this.leftClockEncoder=new kF,this.rightClockEncoder=new kF,this.infoEncoder=new _Y(E5),this.stringEncoder=new f7e,this.parentInfoEncoder=new _Y(E5),this.typeRefEncoder=new sI,this.lenEncoder=new sI}toUint8Array(){const e=mU();return br(e,0),ch(e,this.keyClockEncoder.toUint8Array()),ch(e,this.clientEncoder.toUint8Array()),ch(e,this.leftClockEncoder.toUint8Array()),ch(e,this.rightClockEncoder.toUint8Array()),ch(e,Sp(this.infoEncoder)),ch(e,this.stringEncoder.toUint8Array()),ch(e,Sp(this.parentInfoEncoder)),ch(e,this.typeRefEncoder.toUint8Array()),ch(e,this.lenEncoder.toUint8Array()),gU(e,Sp(this.restEncoder)),Sp(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){BC(this.restEncoder,e)}writeBuf(e){ch(this.restEncoder,e)}writeJSON(e){BC(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const c9e=(n,e,t,i)=>{i=Kb(i,e[0].id.clock);const r=kp(e,i);br(n.restEncoder,e.length-r),n.writeClient(t),br(n.restEncoder,i);const s=e[r];s.write(n,i-s.id.clock);for(let a=r+1;a<e.length;a++)e[a].write(n,0)},CH=(n,e,t)=>{const i=new Map;t.forEach((r,s)=>{zo(e,s)>r&&i.set(s,r)}),AH(e).forEach((r,s)=>{t.has(s)||i.set(s,0)}),br(n.restEncoder,i.size),xb(i.entries()).sort((r,s)=>s[0]-r[0]).forEach(([r,s])=>{c9e(n,e.clients.get(r),r,s)})},u9e=(n,e)=>{const t=df(),i=Xi(n.restDecoder);for(let r=0;r<i;r++){const s=Xi(n.restDecoder),a=new Array(s),o=n.readClient();let l=Xi(n.restDecoder);t.set(o,{i:0,refs:a});for(let c=0;c<s;c++){const u=n.readInfo();switch(pU&u){case 0:{const h=n.readLen();a[c]=new ld(Ki(o,l),h),l+=h;break}case 10:{const h=Xi(n.restDecoder);a[c]=new cd(Ki(o,l),h),l+=h;break}default:{const h=(u&(Rg|Eh))===0,d=new Us(Ki(o,l),null,(u&Eh)===Eh?n.readLeftID():null,null,(u&Rg)===Rg?n.readRightID():null,h?n.readParentInfo()?e.get(n.readString()):n.readLeftID():null,h&&(u&LC)===LC?n.readString():null,Ioe(n,u));a[c]=d,l+=d.length}}}}return t},h9e=(n,e,t)=>{const i=[];let r=xb(t.keys()).sort((f,m)=>f-m);if(r.length===0)return null;const s=()=>{if(r.length===0)return null;let f=t.get(r[r.length-1]);for(;f.refs.length===f.i;)if(r.pop(),r.length>0)f=t.get(r[r.length-1]);else return null;return f};let a=s();if(a===null)return null;const o=new coe,l=new Map,c=(f,m)=>{const v=l.get(f);(v==null||v>m)&&l.set(f,m)};let u=a.refs[a.i++];const h=new Map,d=()=>{for(const f of i){const m=f.id.client,v=t.get(m);v?(v.i--,o.clients.set(m,v.refs.slice(v.i)),t.delete(m),v.i=0,v.refs=[]):o.clients.set(m,[f]),r=r.filter(_=>_!==m)}i.length=0};for(;;){if(u.constructor!==cd){const m=m0(h,u.id.client,()=>zo(e,u.id.client))-u.id.clock;if(m<0)i.push(u),c(u.id.client,u.id.clock-1),d();else{const v=u.getMissing(n,e);if(v!==null){i.push(u);const _=t.get(v)||{refs:[],i:0};if(_.refs.length===_.i)c(v,zo(e,v)),d();else{u=_.refs[_.i++];continue}}else(m===0||m<u.length)&&(u.integrate(n,m),h.set(u.id.client,u.id.clock+u.length))}}if(i.length>0)u=i.pop();else if(a!==null&&a.i<a.refs.length)u=a.refs[a.i++];else{if(a=s(),a===null)break;u=a.refs[a.i++]}}if(o.clients.size>0){const f=new wb;return CH(f,o,new Map),br(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},d9e=(n,e)=>CH(n,e.doc.store,e.beforeState),f9e=(n,e,t,i=new ex(n))=>ds(e,r=>{r.local=!1;let s=!1;const a=r.doc,o=a.store,l=u9e(i,a),c=h9e(r,o,l),u=o.pendingStructs;if(u){for(const[d,f]of u.missing)if(f<zo(o,d)){s=!0;break}if(c){for(const[d,f]of c.missing){const m=u.missing.get(d);(m==null||m>f)&&u.missing.set(d,f)}u.update=wP([u.update,c.update])}}else o.pendingStructs=c;const h=CY(i,r,o);if(o.pendingDs){const d=new ex(Bx(o.pendingDs));Xi(d.restDecoder);const f=CY(d,r,o);h&&f?o.pendingDs=wP([h,f]):o.pendingDs=h||f}else o.pendingDs=h;if(s){const d=o.pendingStructs.update;o.pendingStructs=null,aoe(r.doc,d)}},t,!1),aoe=(n,e,t,i=ex)=>{const r=Bx(e);f9e(r,n,t,new i(r))},lat=(n,e,t)=>aoe(n,e,t,soe),p9e=(n,e,t=new Map)=>{CH(n,e.store,t),zx(n,s9e(e.store))},m9e=(n,e=new Uint8Array([0]),t=new wb)=>{const i=ooe(e);p9e(t,n,i);const r=[t.toUint8Array()];if(n.store.pendingDs&&r.push(n.store.pendingDs),n.store.pendingStructs&&r.push(M9e(n.store.pendingStructs.update,e)),r.length>1){if(t.constructor===rM)return C9e(r.map((s,a)=>a===0?s:O9e(s)));if(t.constructor===wb)return wP(r)}return r[0]},cat=(n,e)=>m9e(n,e,new rM),g9e=n=>{const e=new Map,t=Xi(n.restDecoder);for(let i=0;i<t;i++){const r=Xi(n.restDecoder),s=Xi(n.restDecoder);e.set(r,s)}return e},ooe=n=>g9e(new roe(Bx(n)));class v9e{constructor(){this.l=[]}}const AY=()=>new v9e,MY=(n,e)=>n.l.push(e),RY=(n,e)=>{const t=n.l,i=t.length;n.l=t.filter(r=>e!==r),i===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},loe=(n,e,t)=>SH(n.l,[e,t]);class aT{constructor(e,t){this.client=e,this.clock=t}}const nO=(n,e)=>n===e||n!==null&&e!==null&&n.client===e.client&&n.clock===e.clock,Ki=(n,e)=>new aT(n,e),y9e=n=>{for(const[e,t]of n.doc.share.entries())if(t===n)return e;throw Dp()},xP=(n,e)=>{for(;e!==null;){if(e.parent===n)return!0;e=e.parent._item}return!1},vE=(n,e)=>e===void 0?!n.deleted:e.sv.has(n.id.client)&&(e.sv.get(n.id.client)||0)>n.id.clock&&!iM(e.ds,n.id),C5=(n,e)=>{const t=m0(n.meta,C5,ZT),i=n.doc.store;t.has(e)||(e.sv.forEach((r,s)=>{r<zo(i,s)&&xu(n,Ki(s,r))}),QT(n,e.ds,r=>{}),t.add(e))};class coe{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const AH=n=>{const e=new Map;return n.clients.forEach((t,i)=>{const r=t[t.length-1];e.set(i,r.id.clock+r.length)}),e},zo=(n,e)=>{const t=n.clients.get(e);if(t===void 0)return 0;const i=t[t.length-1];return i.id.clock+i.length},uoe=(n,e)=>{let t=n.clients.get(e.id.client);if(t===void 0)t=[],n.clients.set(e.id.client,t);else{const i=t[t.length-1];if(i.id.clock+i.length!==e.id.clock)throw Dp()}t.push(e)},kp=(n,e)=>{let t=0,i=n.length-1,r=n[i],s=r.id.clock;if(s===e)return i;let a=Xy(e/(s+r.length-1)*i);for(;t<=i;){if(r=n[a],s=r.id.clock,s<=e){if(e<s+r.length)return a;t=a+1}else i=a-1;a=Xy((t+i)/2)}throw Dp()},_9e=(n,e)=>{const t=n.clients.get(e.client);return t[kp(t,e.clock)]},oI=_9e,A5=(n,e,t)=>{const i=kp(e,t),r=e[i];return r.id.clock<t&&r instanceof Us?(e.splice(i+1,0,IP(n,r,t-r.id.clock)),i+1):i},xu=(n,e)=>{const t=n.doc.store.clients.get(e.client);return t[A5(n,t,e.clock)]},OY=(n,e,t)=>{const i=e.clients.get(t.client),r=kp(i,t.clock),s=i[r];return t.clock!==s.id.clock+s.length-1&&s.constructor!==ld&&i.splice(r+1,0,IP(n,s,t.clock-s.id.clock+1)),s},b9e=(n,e,t)=>{const i=n.clients.get(e.id.client);i[kp(i,e.id.clock)]=t},hoe=(n,e,t,i,r)=>{if(i===0)return;const s=t+i;let a=A5(n,e,t),o;do o=e[a++],s<o.id.clock+o.length&&A5(n,e,s),r(o);while(a<e.length&&e[a].id.clock<s)};class S9e{constructor(e,t,i){this.doc=e,this.deleteSet=new Fx,this.beforeState=AH(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const IY=(n,e)=>e.deleteSet.clients.size===0&&!$qe(e.afterState,(t,i)=>e.beforeState.get(i)!==t)?!1:(xH(e.deleteSet),d9e(n,e),zx(n,e.deleteSet),!0),NY=(n,e,t)=>{const i=e._item;(i===null||i.id.clock<(n.beforeState.get(i.id.client)||0)&&!i.deleted)&&m0(n.changed,e,ZT).add(t)},lI=(n,e)=>{let t=n[e],i=n[e-1],r=e;for(;r>0;t=i,i=n[--r-1]){if(i.deleted===t.deleted&&i.constructor===t.constructor&&i.mergeWith(t)){t instanceof Us&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,i);continue}break}const s=e-r;return s&&n.splice(e+1-s,s),s},E9e=(n,e,t)=>{for(const[i,r]of n.clients.entries()){const s=e.clients.get(i);for(let a=r.length-1;a>=0;a--){const o=r[a],l=o.clock+o.len;for(let c=kp(s,o.clock),u=s[c];c<s.length&&u.id.clock<l;u=s[++c]){const h=s[c];if(o.clock+o.len<=h.id.clock)break;h instanceof Us&&h.deleted&&!h.keep&&t(h)&&h.gc(e,!1)}}}},T9e=(n,e)=>{n.clients.forEach((t,i)=>{const r=e.clients.get(i);for(let s=t.length-1;s>=0;s--){const a=t[s],o=zae(r.length-1,1+kp(r,a.clock+a.len-1));for(let l=o,c=r[l];l>0&&c.id.clock>=a.clock;c=r[l])l-=1+lI(r,l)}})},doe=(n,e)=>{if(e<n.length){const t=n[e],i=t.doc,r=i.store,s=t.deleteSet,a=t._mergeStructs;try{xH(s),t.afterState=AH(t.doc.store),i.emit("beforeObserverCalls",[t,i]);const o=[];t.changed.forEach((l,c)=>o.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(t,l)})),o.push(()=>{t.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c,u._path=null}),l.sort((u,h)=>u.path.length-h.path.length),loe(c._dEH,l,t))})}),o.push(()=>i.emit("afterTransaction",[t,i])),SH(o,[]),t._needFormattingCleanup&&G9e(t)}finally{i.gc&&E9e(s,r,i.gcFilter),T9e(s,r),t.afterState.forEach((u,h)=>{const d=t.beforeState.get(h)||0;if(d!==u){const f=r.clients.get(h),m=Kb(kp(f,d),1);for(let v=f.length-1;v>=m;)v-=1+lI(f,v)}});for(let u=a.length-1;u>=0;u--){const{client:h,clock:d}=a[u].id,f=r.clients.get(h),m=kp(f,d);m+1<f.length&&lI(f,m+1)>1||m>0&&lI(f,m)}if(!t.local&&t.afterState.get(i.clientID)!==t.beforeState.get(i.clientID)&&(t9e(EH,Kae,"[yjs] ",Zae,Jae,"Changed the client-id because another client seems to be using it."),i.clientID=ioe()),i.emit("afterTransactionCleanup",[t,i]),i._observers.has("update")){const u=new rM;IY(u,t)&&i.emit("update",[u.toUint8Array(),t.origin,i,t])}if(i._observers.has("updateV2")){const u=new wb;IY(u,t)&&i.emit("updateV2",[u.toUint8Array(),t.origin,i,t])}const{subdocsAdded:o,subdocsLoaded:l,subdocsRemoved:c}=t;(o.size>0||c.size>0||l.size>0)&&(o.forEach(u=>{u.clientID=i.clientID,u.collectionid==null&&(u.collectionid=i.collectionid),i.subdocs.add(u)}),c.forEach(u=>i.subdocs.delete(u)),i.emit("subdocs",[{loaded:l,added:o,removed:c},i,t]),c.forEach(u=>u.destroy())),n.length<=e+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,n])):doe(n,e+1)}}},ds=(n,e,t=null,i=!0)=>{const r=n._transactionCleanups;let s=!1,a=null;n._transaction===null&&(s=!0,n._transaction=new S9e(n,t,i),r.push(n._transaction),r.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{a=e(n._transaction)}finally{if(s){const o=n._transaction===r[0];n._transaction=null,o&&doe(r,0)}}return a};class x9e{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const PY=(n,e,t)=>{QT(n,t.deletions,i=>{i instanceof Us&&e.scope.some(r=>r===n.doc||xP(r,i))&&kH(i,!1)})},DY=(n,e,t)=>{let i=null;const r=n.doc,s=n.scope;ds(r,o=>{for(;e.length>0&&n.currStackItem===null;){const l=r.store,c=e.pop(),u=new Set,h=[];let d=!1;QT(o,c.insertions,f=>{if(f instanceof Us){if(f.redone!==null){let{item:m,diff:v}=v$e(l,f.id);v>0&&(m=xu(o,Ki(m.id.client,m.id.clock+v))),f=m}!f.deleted&&s.some(m=>m===o.doc||xP(m,f))&&h.push(f)}}),QT(o,c.deletions,f=>{f instanceof Us&&s.some(m=>m===o.doc||xP(m,f))&&!iM(c.insertions,f.id)&&u.add(f)}),u.forEach(f=>{d=Ooe(o,f,u,c.insertions,n.ignoreRemoteMapChanges,n)!==null||d});for(let f=h.length-1;f>=0;f--){const m=h[f];n.deleteFilter(m)&&(m.delete(o),d=!0)}n.currStackItem=d?c:null}o.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),i=o},n);const a=n.currStackItem;if(a!=null){const o=i.changedParentTypes;n.emit("stack-item-popped",[{stackItem:a,type:t,changedParentTypes:o,origin:n},n]),n.currStackItem=null}return a};class uat extends Fae{constructor(e,{captureTimeout:t=500,captureTransaction:i=l=>!0,deleteFilter:r=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:a=!1,doc:o=b5(e)?e[0].doc:e instanceof jx?e:e.doc}={}){super(),this.scope=[],this.doc=o,this.addToScope(e),this.deleteFilter=r,s.add(this),this.trackedOrigins=s,this.captureTransaction=i,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=a,this.captureTimeout=t,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(_=>l.changedParentTypes.has(_)||_===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,u=this.redoing,h=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const d=new Fx;l.afterState.forEach((_,y)=>{const S=l.beforeState.get(y)||0,T=_-S;T>0&&jC(d,y,S,T)});const f=C7e();let m=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&h.length>0&&!c&&!u){const _=h[h.length-1];_.deletions=w5([_.deletions,l.deleteSet]),_.insertions=w5([_.insertions,d])}else h.push(new x9e(l.deleteSet,d)),m=!0;!c&&!u&&(this.lastChange=f),QT(l,l.deleteSet,_=>{_ instanceof Us&&this.scope.some(y=>y===l.doc||xP(y,_))&&kH(_,!0)});const v=[{stackItem:h[h.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];m?this.emit("stack-item-added",v):this.emit("stack-item-updated",v)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const t=new Set(this.scope);e=b5(e)?e:[e],e.forEach(i=>{t.has(i)||(t.add(i),(i instanceof pl?i.doc!==this.doc:i!==this.doc)&&eoe("[yjs#509] Not same Y.Doc"),this.scope.push(i))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(i=>{e&&(this.undoStack.forEach(r=>PY(i,this,r)),this.undoStack=[]),t&&(this.redoStack.forEach(r=>PY(i,this,r)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=DY(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=DY(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*w9e(n){const e=Xi(n.restDecoder);for(let t=0;t<e;t++){const i=Xi(n.restDecoder),r=n.readClient();let s=Xi(n.restDecoder);for(let a=0;a<i;a++){const o=n.readInfo();if(o===10){const l=Xi(n.restDecoder);yield new cd(Ki(r,s),l),s+=l}else if(pU&o){const l=(o&(Rg|Eh))===0,c=new Us(Ki(r,s),null,(o&Eh)===Eh?n.readLeftID():null,null,(o&Rg)===Rg?n.readRightID():null,l?n.readParentInfo()?n.readString():n.readLeftID():null,l&&(o&LC)===LC?n.readString():null,Ioe(n,o));yield c,s+=c.length}else{const l=n.readLen();yield new ld(Ki(r,s),l),s+=l}}}}class MH{constructor(e,t){this.gen=w9e(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===cd);return this.curr}}class RH{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const C9e=n=>wP(n,soe,rM),A9e=(n,e)=>{if(n.constructor===ld){const{client:t,clock:i}=n.id;return new ld(Ki(t,i+e),n.length-e)}else if(n.constructor===cd){const{client:t,clock:i}=n.id;return new cd(Ki(t,i+e),n.length-e)}else{const t=n,{client:i,clock:r}=t.id;return new Us(Ki(i,r+e),null,Ki(i,r+e-1),null,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e))}},wP=(n,e=ex,t=wb)=>{if(n.length===1)return n[0];const i=n.map(u=>new e(Bx(u)));let r=i.map(u=>new MH(u,!0)),s=null;const a=new t,o=new RH(a);for(;r=r.filter(d=>d.curr!==null),r.sort((d,f)=>{if(d.curr.id.client===f.curr.id.client){const m=d.curr.id.clock-f.curr.id.clock;return m===0?d.curr.constructor===f.curr.constructor?0:d.curr.constructor===cd?1:-1:m}else return f.curr.id.client-d.curr.id.client}),r.length!==0;){const u=r[0],h=u.curr.id.client;if(s!==null){let d=u.curr,f=!1;for(;d!==null&&d.id.clock+d.length<=s.struct.id.clock+s.struct.length&&d.id.client>=s.struct.id.client;)d=u.next(),f=!0;if(d===null||d.id.client!==h||f&&d.id.clock>s.struct.id.clock+s.struct.length)continue;if(h!==s.struct.id.client)hy(o,s.struct,s.offset),s={struct:d,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<d.id.clock)if(s.struct.constructor===cd)s.struct.length=d.id.clock+d.length-s.struct.id.clock;else{hy(o,s.struct,s.offset);const m=d.id.clock-s.struct.id.clock-s.struct.length;s={struct:new cd(Ki(h,s.struct.id.clock+s.struct.length),m),offset:0}}else{const m=s.struct.id.clock+s.struct.length-d.id.clock;m>0&&(s.struct.constructor===cd?s.struct.length-=m:d=A9e(d,m)),s.struct.mergeWith(d)||(hy(o,s.struct,s.offset),s={struct:d,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let d=u.curr;d!==null&&d.id.client===h&&d.id.clock===s.struct.id.clock+s.struct.length&&d.constructor!==cd;d=u.next())hy(o,s.struct,s.offset),s={struct:d,offset:0}}s!==null&&(hy(o,s.struct,s.offset),s=null),OH(o);const l=i.map(u=>wH(u)),c=w5(l);return zx(a,c),a.toUint8Array()},M9e=(n,e,t=ex,i=wb)=>{const r=ooe(e),s=new i,a=new RH(s),o=new t(Bx(n)),l=new MH(o,!1);for(;l.curr;){const u=l.curr,h=u.id.client,d=r.get(h)||0;if(l.curr.constructor===cd){l.next();continue}if(u.id.clock+u.length>d)for(hy(a,u,Kb(d-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===h;)hy(a,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===h&&l.curr.id.clock+l.curr.length<=d;)l.next()}OH(a);const c=wH(o);return zx(s,c),s.toUint8Array()},foe=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:Sp(n.encoder.restEncoder)}),n.encoder.restEncoder=mU(),n.written=0)},hy=(n,e,t)=>{n.written>0&&n.currClient!==e.id.client&&foe(n),n.written===0&&(n.currClient=e.id.client,n.encoder.writeClient(e.id.client),br(n.encoder.restEncoder,e.id.clock+t)),e.write(n.encoder,t),n.written++},OH=n=>{foe(n);const e=n.encoder.restEncoder;br(e,n.clientStructs.length);for(let t=0;t<n.clientStructs.length;t++){const i=n.clientStructs[t];br(e,i.written),gU(e,i.restEncoder)}},R9e=(n,e,t,i)=>{const r=new t(Bx(n)),s=new MH(r,!1),a=new i,o=new RH(a);for(let c=s.curr;c!==null;c=s.next())hy(o,e(c),0);OH(o);const l=wH(r);return zx(a,l),a.toUint8Array()},O9e=n=>R9e(n,B7e,ex,rM),kY="You must not compute changes after the event-handler fired.";class yU{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=I9e(this.currentTarget,this.target))}deletes(e){return iM(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ky(kY);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(r!==null){const s=t._map.get(r);let a,o;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))a="delete",o=NF(l.content.getContent());else return;else l!==null&&this.deletes(l)?(a="update",o=NF(l.content.getContent())):(a="add",o=void 0)}else if(this.deletes(s))a="delete",o=NF(s.content.getContent());else return;e.set(r,{action:a,oldValue:o})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ky(kY);const t=this.target,i=ZT(),r=ZT(),s=[];if(e={added:i,deleted:r,delta:s,keys:this.keys},this.transaction.changed.get(t).has(null)){let o=null;const l=()=>{o&&s.push(o)};for(let c=t._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((o===null||o.delete===void 0)&&(l(),o={delete:0}),o.delete+=c.length,r.add(c)):this.adds(c)?((o===null||o.insert===void 0)&&(l(),o={insert:[]}),o.insert=o.insert.concat(c.content.getContent()),i.add(c)):((o===null||o.retain===void 0)&&(l(),o={retain:0}),o.retain+=c.length);o!==null&&o.retain===void 0&&l()}this._changes=e}return e}}const I9e=(n,e)=>{const t=[];for(;e._item!==null&&e!==n;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let i=0,r=e._item.parent._start;for(;r!==e._item&&r!==null;)!r.deleted&&r.countable&&(i+=r.length),r=r.right;t.unshift(i)}e=e._item.parent}return t},rc=()=>{eoe("Invalid access: Add Yjs type to a document before reading data.")},poe=80;let IH=0;class N9e{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=IH++}}const P9e=n=>{n.timestamp=IH++},moe=(n,e,t)=>{n.p.marker=!1,n.p=e,e.marker=!0,n.index=t,n.timestamp=IH++},D9e=(n,e,t)=>{if(n.length>=poe){const i=n.reduce((r,s)=>r.timestamp<s.timestamp?r:s);return moe(i,e,t),i}else{const i=new N9e(e,t);return n.push(i),i}},_U=(n,e)=>{if(n._start===null||e===0||n._searchMarker===null)return null;const t=n._searchMarker.length===0?null:n._searchMarker.reduce((s,a)=>rI(e-s.index)<rI(e-a.index)?s:a);let i=n._start,r=0;for(t!==null&&(i=t.p,r=t.index,P9e(t));i.right!==null&&r<e;){if(!i.deleted&&i.countable){if(e<r+i.length)break;r+=i.length}i=i.right}for(;i.left!==null&&r>e;)i=i.left,!i.deleted&&i.countable&&(r-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(r-=i.length);return t!==null&&rI(t.index-r)<i.parent.length/poe?(moe(t,i,r),t):D9e(n._searchMarker,i,r)},HC=(n,e,t)=>{for(let i=n.length-1;i>=0;i--){const r=n[i];if(t>0){let s=r.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(r.index-=s.length);if(s===null||s.marker===!0){n.splice(i,1);continue}r.p=s,s.marker=!0}(e<r.index||t>0&&e===r.index)&&(r.index=Kb(e,r.index+t))}},bU=(n,e,t)=>{const i=n,r=e.changedParentTypes;for(;m0(r,n,()=>[]).push(t),n._item!==null;)n=n._item.parent;loe(i._eH,t,e)};class pl{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=AY(),this._dEH=AY(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Mp()}clone(){throw Mp()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){MY(this._eH,e)}observeDeep(e){MY(this._dEH,e)}unobserve(e){RY(this._eH,e)}unobserveDeep(e){RY(this._dEH,e)}toJSON(){}}const goe=(n,e,t)=>{n.doc??rc(),e<0&&(e=n._length+e),t<0&&(t=n._length+t);let i=t-e;const r=[];let s=n._start;for(;s!==null&&i>0;){if(s.countable&&!s.deleted){const a=s.content.getContent();if(a.length<=e)e-=a.length;else{for(let o=e;o<a.length&&i>0;o++)r.push(a[o]),i--;e=0}}s=s.right}return r},voe=n=>{n.doc??rc();const e=[];let t=n._start;for(;t!==null;){if(t.countable&&!t.deleted){const i=t.content.getContent();for(let r=0;r<i.length;r++)e.push(i[r])}t=t.right}return e},VC=(n,e)=>{let t=0,i=n._start;for(n.doc??rc();i!==null;){if(i.countable&&!i.deleted){const r=i.content.getContent();for(let s=0;s<r.length;s++)e(r[s],t++,n)}i=i.right}},yoe=(n,e)=>{const t=[];return VC(n,(i,r)=>{t.push(e(i,r,n))}),t},k9e=n=>{let e=n._start,t=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),i=0,e=e.right}const r=t[i++];return t.length<=i&&(t=null),{done:!1,value:r}}}},_oe=(n,e)=>{n.doc??rc();const t=_U(n,e);let i=n._start;for(t!==null&&(i=t.p,e-=t.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(e<i.length)return i.content.getContent()[e];e-=i.length}},CP=(n,e,t,i)=>{let r=t;const s=n.doc,a=s.clientID,o=s.store,l=t===null?e._start:t.right;let c=[];const u=()=>{c.length>0&&(r=new Us(Ki(a,zo(o,a)),r,r&&r.lastId,l,l&&l.id,e,null,new Ab(c)),r.integrate(n,0),c=[])};i.forEach(h=>{if(h===null)c.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(h);break;default:switch(u(),h.constructor){case Uint8Array:case ArrayBuffer:r=new Us(Ki(a,zo(o,a)),r,r&&r.lastId,l,l&&l.id,e,null,new sM(new Uint8Array(h))),r.integrate(n,0);break;case jx:r=new Us(Ki(a,zo(o,a)),r,r&&r.lastId,l,l&&l.id,e,null,new aM(h)),r.integrate(n,0);break;default:if(h instanceof pl)r=new Us(Ki(a,zo(o,a)),r,r&&r.lastId,l,l&&l.id,e,null,new Jg(h)),r.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},boe=()=>Ky("Length exceeded!"),Soe=(n,e,t,i)=>{if(t>e._length)throw boe();if(t===0)return e._searchMarker&&HC(e._searchMarker,t,i.length),CP(n,e,null,i);const r=t,s=_U(e,t);let a=e._start;for(s!==null&&(a=s.p,t-=s.index,t===0&&(a=a.prev,t+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(t<=a.length){t<a.length&&xu(n,Ki(a.id.client,a.id.clock+t));break}t-=a.length}return e._searchMarker&&HC(e._searchMarker,r,i.length),CP(n,e,a,i)},L9e=(n,e,t)=>{let r=(e._searchMarker||[]).reduce((s,a)=>a.index>s.index?a:s,{index:0,p:e._start}).p;if(r)for(;r.right;)r=r.right;return CP(n,e,r,t)},Eoe=(n,e,t,i)=>{if(i===0)return;const r=t,s=i,a=_U(e,t);let o=e._start;for(a!==null&&(o=a.p,t-=a.index);o!==null&&t>0;o=o.right)!o.deleted&&o.countable&&(t<o.length&&xu(n,Ki(o.id.client,o.id.clock+t)),t-=o.length);for(;i>0&&o!==null;)o.deleted||(i<o.length&&xu(n,Ki(o.id.client,o.id.clock+i)),o.delete(n),i-=o.length),o=o.right;if(i>0)throw boe();e._searchMarker&&HC(e._searchMarker,r,-s+i)},AP=(n,e,t)=>{const i=e._map.get(t);i!==void 0&&i.delete(n)},NH=(n,e,t,i)=>{const r=e._map.get(t)||null,s=n.doc,a=s.clientID;let o;if(i==null)o=new Ab([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:o=new Ab([i]);break;case Uint8Array:o=new sM(i);break;case jx:o=new aM(i);break;default:if(i instanceof pl)o=new Jg(i);else throw new Error("Unexpected content type")}new Us(Ki(a,zo(s.store,a)),r,r&&r.lastId,null,null,e,t,o).integrate(n,0)},PH=(n,e)=>{n.doc??rc();const t=n._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},Toe=n=>{const e={};return n.doc??rc(),n._map.forEach((t,i)=>{t.deleted||(e[i]=t.content.getContent()[t.length-1])}),e},xoe=(n,e)=>{n.doc??rc();const t=n._map.get(e);return t!==void 0&&!t.deleted},U9e=(n,e)=>{const t={};return n._map.forEach((i,r)=>{let s=i;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&vE(s,e)&&(t[r]=s.content.getContent()[s.length-1])}),t},iO=n=>(n.doc??rc(),n9e(n._map.entries(),e=>!e[1].deleted));class B9e extends yU{}class oT extends pl{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new oT;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new oT}clone(){const e=new oT;return e.insert(0,this.toArray().map(t=>t instanceof pl?t.clone():t)),e}get length(){return this.doc??rc(),this._length}_callObserver(e,t){super._callObserver(e,t),bU(this,e,new B9e(this,e))}insert(e,t){this.doc!==null?ds(this.doc,i=>{Soe(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?ds(this.doc,t=>{L9e(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?ds(this.doc,i=>{Eoe(i,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return _oe(this,e)}toArray(){return voe(this)}slice(e=0,t=this.length){return goe(this,e,t)}toJSON(){return this.map(e=>e instanceof pl?e.toJSON():e)}map(e){return yoe(this,e)}forEach(e){VC(this,e)}[Symbol.iterator](){return k9e(this)}_write(e){e.writeTypeRef(c$e)}}const F9e=n=>new oT;class z9e extends yU{constructor(e,t,i){super(e,t),this.keysChanged=i}}class tx extends pl{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((i,r)=>{this.set(r,i)}),this._prelimContent=null}_copy(){return new tx}clone(){const e=new tx;return this.forEach((t,i)=>{e.set(i,t instanceof pl?t.clone():t)}),e}_callObserver(e,t){bU(this,e,new z9e(this,e,t))}toJSON(){this.doc??rc();const e={};return this._map.forEach((t,i)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[i]=r instanceof pl?r.toJSON():r}}),e}get size(){return[...iO(this)].length}keys(){return UF(iO(this),e=>e[0])}values(){return UF(iO(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return UF(iO(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??rc(),this._map.forEach((t,i)=>{t.deleted||e(t.content.getContent()[t.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?ds(this.doc,t=>{AP(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?ds(this.doc,i=>{NH(i,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return PH(this,e)}has(e){return xoe(this,e)}clear(){this.doc!==null?ds(this.doc,e=>{this.forEach(function(t,i,r){AP(e,r,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(u$e)}}const j9e=n=>new tx,_y=(n,e)=>n===e||typeof n=="object"&&typeof e=="object"&&n&&e&&L7e(n,e);class M5{constructor(e,t,i,r){this.left=e,this.right=t,this.index=i,this.currentAttributes=r}forward(){switch(this.right===null&&Dp(),this.right.content.constructor){case qo:this.right.deleted||Hx(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const LY=(n,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case qo:e.right.deleted||Hx(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&xu(n,Ki(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},rO=(n,e,t,i)=>{const r=new Map,s=i?_U(e,t):null;if(s){const a=new M5(s.p.left,s.p,s.index,r);return LY(n,a,t-s.index)}else{const a=new M5(null,e._start,0,r);return LY(n,a,t)}},woe=(n,e,t,i)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===qo&&_y(i.get(t.right.content.key),t.right.content.value));)t.right.deleted||i.delete(t.right.content.key),t.forward();const r=n.doc,s=r.clientID;i.forEach((a,o)=>{const l=t.left,c=t.right,u=new Us(Ki(s,zo(r.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new qo(o,a));u.integrate(n,0),t.right=u,t.forward()})},Hx=(n,e)=>{const{key:t,value:i}=e;i===null?n.delete(t):n.set(t,i)},Coe=(n,e)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===qo&&_y(e[n.right.content.key]??null,n.right.content.value)))break;n.forward()}},Aoe=(n,e,t,i)=>{const r=n.doc,s=r.clientID,a=new Map;for(const o in i){const l=i[o],c=t.currentAttributes.get(o)??null;if(!_y(c,l)){a.set(o,c);const{left:u,right:h}=t;t.right=new Us(Ki(s,zo(r.store,s)),u,u&&u.lastId,h,h&&h.id,e,null,new qo(o,l)),t.right.integrate(n,0),t.forward()}}return a},BF=(n,e,t,i,r)=>{t.currentAttributes.forEach((d,f)=>{r[f]===void 0&&(r[f]=null)});const s=n.doc,a=s.clientID;Coe(t,r);const o=Aoe(n,e,t,r),l=i.constructor===String?new Lp(i):i instanceof pl?new Jg(i):new Zb(i);let{left:c,right:u,index:h}=t;e._searchMarker&&HC(e._searchMarker,t.index,l.getLength()),u=new Us(Ki(a,zo(s.store,a)),c,c&&c.lastId,u,u&&u.id,e,null,l),u.integrate(n,0),t.right=u,t.index=h,t.forward(),woe(n,e,t,o)},UY=(n,e,t,i,r)=>{const s=n.doc,a=s.clientID;Coe(t,r);const o=Aoe(n,e,t,r);e:for(;t.right!==null&&(i>0||o.size>0&&(t.right.deleted||t.right.content.constructor===qo));){if(!t.right.deleted)switch(t.right.content.constructor){case qo:{const{key:l,value:c}=t.right.content,u=r[l];if(u!==void 0){if(_y(u,c))o.delete(l);else{if(i===0)break e;o.set(l,c)}t.right.delete(n)}else t.currentAttributes.set(l,c);break}default:i<t.right.length&&xu(n,Ki(t.right.id.client,t.right.id.clock+i)),i-=t.right.length;break}t.forward()}if(i>0){let l="";for(;i>0;i--)l+=`
`;t.right=new Us(Ki(a,zo(s.store,a)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new Lp(l)),t.right.integrate(n,0),t.forward()}woe(n,e,t,o)},Moe=(n,e,t,i,r)=>{let s=e;const a=df();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===qo){const c=s.content;a.set(c.key,c)}s=s.right}let o=0,l=!1;for(;e!==s;){if(t===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case qo:{const{key:u,value:h}=c,d=i.get(u)??null;(a.get(u)!==c||d===h)&&(e.delete(n),o++,!l&&(r.get(u)??null)===h&&d!==h&&(d===null?r.delete(u):r.set(u,d))),!l&&!e.deleted&&Hx(r,c);break}}}e=e.right}return o},H9e=(n,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===qo){const i=e.content.key;t.has(i)?e.delete(n):t.add(i)}e=e.left}},V9e=n=>{let e=0;return ds(n.doc,t=>{let i=n._start,r=n._start,s=df();const a=_5(s);for(;r;){if(r.deleted===!1)switch(r.content.constructor){case qo:Hx(a,r.content);break;default:e+=Moe(t,i,r,s,a),s=_5(a),i=r;break}r=r.right}}),e},G9e=n=>{const e=new Set,t=n.doc;for(const[i,r]of n.afterState.entries()){const s=n.beforeState.get(i)||0;r!==s&&hoe(n,t.store.clients.get(i),s,r,a=>{!a.deleted&&a.content.constructor===qo&&a.constructor!==ld&&e.add(a.parent)})}ds(t,i=>{QT(n,n.deleteSet,r=>{if(r instanceof ld||!r.parent._hasFormatting||e.has(r.parent))return;const s=r.parent;r.content.constructor===qo?e.add(s):H9e(i,r)});for(const r of e)V9e(r)})},BY=(n,e,t)=>{const i=t,r=_5(e.currentAttributes),s=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Jg:case Zb:case Lp:t<e.right.length&&xu(n,Ki(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(n);break}e.forward()}s&&Moe(n,s,e.right,r,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&HC(a._searchMarker,e.index,-i+t),e};class q9e extends yU{constructor(e,t,i){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(r=>{r===null?this.childListChanged=!0:this.keysChanged.add(r)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];ds(e,i=>{const r=new Map,s=new Map;let a=this.target._start,o=null;const l={};let c="",u=0,h=0;const d=()=>{if(o!==null){let f=null;switch(o){case"delete":h>0&&(f={delete:h}),h=0;break;case"insert":(typeof c=="object"||c.length>0)&&(f={insert:c},r.size>0&&(f.attributes={},r.forEach((m,v)=>{m!==null&&(f.attributes[v]=m)}))),c="";break;case"retain":u>0&&(f={retain:u},P7e(l)||(f.attributes=O7e({},l))),u=0;break}f&&t.push(f),o=null}};for(;a!==null;){switch(a.content.constructor){case Jg:case Zb:this.adds(a)?this.deletes(a)||(d(),o="insert",c=a.content.getContent()[0],d()):this.deletes(a)?(o!=="delete"&&(d(),o="delete"),h+=1):a.deleted||(o!=="retain"&&(d(),o="retain"),u+=1);break;case Lp:this.adds(a)?this.deletes(a)||(o!=="insert"&&(d(),o="insert"),c+=a.content.str):this.deletes(a)?(o!=="delete"&&(d(),o="delete"),h+=a.length):a.deleted||(o!=="retain"&&(d(),o="retain"),u+=a.length);break;case qo:{const{key:f,value:m}=a.content;if(this.adds(a)){if(!this.deletes(a)){const v=r.get(f)??null;_y(v,m)?m!==null&&a.delete(i):(o==="retain"&&d(),_y(m,s.get(f)??null)?delete l[f]:l[f]=m)}}else if(this.deletes(a)){s.set(f,m);const v=r.get(f)??null;_y(v,m)||(o==="retain"&&d(),l[f]=v)}else if(!a.deleted){s.set(f,m);const v=l[f];v!==void 0&&(_y(v,m)?v!==null&&a.delete(i):(o==="retain"&&d(),m===null?delete l[f]:l[f]=m))}a.deleted||(o==="insert"&&d(),Hx(r,a.content));break}}a=a.right}for(d();t.length>0;){const f=t[t.length-1];if(f.retain!==void 0&&f.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class nx extends pl{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??rc(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new nx}clone(){const e=new nx;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const i=new q9e(this,e,t);bU(this,e,i),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??rc();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===Lp&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?ds(this.doc,i=>{const r=new M5(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const a=e[s];if(a.insert!==void 0){const o=!t&&typeof a.insert=="string"&&s===e.length-1&&r.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof o!="string"||o.length>0)&&BF(i,this,r,o,a.attributes||{})}else a.retain!==void 0?UY(i,this,r,a.retain,a.attributes||{}):a.delete!==void 0&&BY(i,r,a.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,i){this.doc??rc();const r=[],s=new Map,a=this.doc;let o="",l=this._start;function c(){if(o.length>0){const h={};let d=!1;s.forEach((m,v)=>{d=!0,h[v]=m});const f={insert:o};d&&(f.attributes=h),r.push(f),o=""}}const u=()=>{for(;l!==null;){if(vE(l,e)||t!==void 0&&vE(l,t))switch(l.content.constructor){case Lp:{const h=s.get("ychange");e!==void 0&&!vE(l,e)?(h===void 0||h.user!==l.id.client||h.type!=="removed")&&(c(),s.set("ychange",i?i("removed",l.id):{type:"removed"})):t!==void 0&&!vE(l,t)?(h===void 0||h.user!==l.id.client||h.type!=="added")&&(c(),s.set("ychange",i?i("added",l.id):{type:"added"})):h!==void 0&&(c(),s.delete("ychange")),o+=l.content.str;break}case Jg:case Zb:{c();const h={insert:l.content.getContent()[0]};if(s.size>0){const d={};h.attributes=d,s.forEach((f,m)=>{d[m]=f})}r.push(h);break}case qo:vE(l,e)&&(c(),Hx(s,l.content));break}l=l.right}c()};return e||t?ds(a,h=>{e&&C5(h,e),t&&C5(h,t),u()},"cleanup"):u(),r}insert(e,t,i){if(t.length<=0)return;const r=this.doc;r!==null?ds(r,s=>{const a=rO(s,this,e,!i);i||(i={},a.currentAttributes.forEach((o,l)=>{i[l]=o})),BF(s,this,a,t,i)}):this._pending.push(()=>this.insert(e,t,i))}insertEmbed(e,t,i){const r=this.doc;r!==null?ds(r,s=>{const a=rO(s,this,e,!i);BF(s,this,a,t,i||{})}):this._pending.push(()=>this.insertEmbed(e,t,i||{}))}delete(e,t){if(t===0)return;const i=this.doc;i!==null?ds(i,r=>{BY(r,rO(r,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,i){if(t===0)return;const r=this.doc;r!==null?ds(r,s=>{const a=rO(s,this,e,!1);a.right!==null&&UY(s,this,a,t,i)}):this._pending.push(()=>this.format(e,t,i))}removeAttribute(e){this.doc!==null?ds(this.doc,t=>{AP(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?ds(this.doc,i=>{NH(i,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return PH(this,e)}getAttributes(){return Toe(this)}_write(e){e.writeTypeRef(h$e)}}const $9e=n=>new nx;class FF{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??rc()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===ix||t.constructor===Cb)&&t._start!==null)e=t._start;else for(;e!==null;){const i=e.next;if(i!==null){e=i;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Cb extends pl{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Cb}clone(){const e=new Cb;return e.insert(0,this.toArray().map(t=>t instanceof pl?t.clone():t)),e}get length(){return this.doc??rc(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new FF(this,e)}querySelector(e){e=e.toUpperCase();const i=new FF(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e).next();return i.done?null:i.value}querySelectorAll(e){return e=e.toUpperCase(),xb(new FF(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){bU(this,e,new X9e(this,t,e))}toString(){return yoe(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},i){const r=e.createDocumentFragment();return i!==void 0&&i._createAssociation(r,this),VC(this,s=>{r.insertBefore(s.toDOM(e,t,i),null)}),r}insert(e,t){this.doc!==null?ds(this.doc,i=>{Soe(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)ds(this.doc,i=>{const r=e&&e instanceof pl?e._item:e;CP(i,this,r,t)});else{const i=this._prelimContent,r=e===null?0:i.findIndex(s=>s===e)+1;if(r===0&&e!==null)throw Ky("Reference item not found");i.splice(r,0,...t)}}delete(e,t=1){this.doc!==null?ds(this.doc,i=>{Eoe(i,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return voe(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return _oe(this,e)}slice(e=0,t=this.length){return goe(this,e,t)}forEach(e){VC(this,e)}_write(e){e.writeTypeRef(f$e)}}const W9e=n=>new Cb;class ix extends Cb{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((i,r)=>{this.setAttribute(r,i)}),this._prelimAttrs=null}_copy(){return new ix(this.nodeName)}clone(){const e=new ix(this.nodeName),t=this.getAttributes();return N7e(t,(i,r)=>{typeof i=="string"&&e.setAttribute(r,i)}),e.insert(0,this.toArray().map(i=>i instanceof pl?i.clone():i)),e}toString(){const e=this.getAttributes(),t=[],i=[];for(const o in e)i.push(o);i.sort();const r=i.length;for(let o=0;o<r;o++){const l=i[o];t.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),a=t.length>0?" "+t.join(" "):"";return`<${s}${a}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?ds(this.doc,t=>{AP(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?ds(this.doc,i=>{NH(i,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return PH(this,e)}hasAttribute(e){return xoe(this,e)}getAttributes(e){return e?U9e(this,e):Toe(this)}toDOM(e=document,t={},i){const r=e.createElement(this.nodeName),s=this.getAttributes();for(const a in s){const o=s[a];typeof o=="string"&&r.setAttribute(a,o)}return VC(this,a=>{r.appendChild(a.toDOM(e,t,i))}),i!==void 0&&i._createAssociation(r,this),r}_write(e){e.writeTypeRef(d$e),e.writeKey(this.nodeName)}}const Y9e=n=>new ix(n.readKey());class X9e extends yU{constructor(e,t,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(r=>{r===null?this.childListChanged=!0:this.attributesChanged.add(r)})}}class MP extends tx{constructor(e){super(),this.hookName=e}_copy(){return new MP(this.hookName)}clone(){const e=new MP(this.hookName);return this.forEach((t,i)=>{e.set(i,t)}),e}toDOM(e=document,t={},i){const r=t[this.hookName];let s;return r!==void 0?s=r.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),i!==void 0&&i._createAssociation(s,this),s}_write(e){e.writeTypeRef(p$e),e.writeKey(this.hookName)}}const K9e=n=>new MP(n.readKey());class RP extends nx{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new RP}clone(){const e=new RP;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,i){const r=e.createTextNode(this.toString());return i!==void 0&&i._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const t=[];for(const r in e.attributes){const s=[];for(const a in e.attributes[r])s.push({key:a,value:e.attributes[r][a]});s.sort((a,o)=>a.key<o.key?-1:1),t.push({nodeName:r,attrs:s})}t.sort((r,s)=>r.nodeName<s.nodeName?-1:1);let i="";for(let r=0;r<t.length;r++){const s=t[r];i+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){const o=s.attrs[a];i+=` ${o.key}="${o.value}"`}i+=">"}i+=e.insert;for(let r=t.length-1;r>=0;r--)i+=`</${t[r].nodeName}>`;return i}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(m$e)}}const Z9e=n=>new RP;class DH{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Mp()}mergeWith(e){return!1}write(e,t,i){throw Mp()}integrate(e,t){throw Mp()}}const J9e=0;class ld extends DH{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),uoe(e.doc.store,this)}write(e,t){e.writeInfo(J9e),e.writeLen(this.length-t)}getMissing(e,t){return null}}class sM{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new sM(this.content)}splice(e){throw Mp()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}const Q9e=n=>new sM(n.readBuf());class GC{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new GC(this.len)}splice(e){const t=new GC(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){jC(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const e$e=n=>new GC(n.readLen()),Roe=(n,e)=>new jx({guid:n,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class aM{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new aM(Roe(this.doc.guid,this.opts))}splice(e){throw Mp()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const t$e=n=>new aM(Roe(n.readString(),n.readAny()));class Zb{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Zb(this.embed)}splice(e){throw Mp()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}const n$e=n=>new Zb(n.readJSON());class qo{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new qo(this.key,this.value)}splice(e){throw Mp()}mergeWith(e){return!1}integrate(e,t){const i=t.parent;i._searchMarker=null,i._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const i$e=n=>new qo(n.readKey(),n.readJSON());class OP{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new OP(this.arr)}splice(e){const t=new OP(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let r=t;r<i;r++){const s=this.arr[r];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const r$e=n=>{const e=n.readLen(),t=[];for(let i=0;i<e;i++){const r=n.readString();r==="undefined"?t.push(void 0):t.push(JSON.parse(r))}return new OP(t)},s$e=TP("node_env")==="development";class Ab{constructor(e){this.arr=e,s$e&&Wae(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ab(this.arr)}splice(e){const t=new Ab(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let r=t;r<i;r++){const s=this.arr[r];e.writeAny(s)}}getRef(){return 8}}const a$e=n=>{const e=n.readLen(),t=[];for(let i=0;i<e;i++)t.push(n.readAny());return new Ab(t)};class Lp{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Lp(this.str)}splice(e){const t=new Lp(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const o$e=n=>new Lp(n.readString()),l$e=[F9e,j9e,$9e,Y9e,W9e,K9e,Z9e],c$e=0,u$e=1,h$e=2,d$e=3,f$e=4,p$e=5,m$e=6;class Jg{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Jg(this.type._copy())}splice(e){throw Mp()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(i=>{i.deleted?i.id.clock<(e.beforeState.get(i.id.client)||0)&&e._mergeStructs.push(i):i.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(e,!0),i=i.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const g$e=n=>new Jg(l$e[n.readTypeRef()](n)),v$e=(n,e)=>{let t=e,i=0,r;do i>0&&(t=Ki(t.client,t.clock+i)),r=oI(n,t),i=t.clock-r.id.clock,t=r.redone;while(t!==null&&r instanceof Us);return{item:r,diff:i}},kH=(n,e)=>{for(;n!==null&&n.keep!==e;)n.keep=e,n=n.parent._item},IP=(n,e,t)=>{const{client:i,clock:r}=e.id,s=new Us(Ki(i,r+t),e,Ki(i,r+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=Ki(e.redone.client,e.redone.clock+t)),e.right=s,s.right!==null&&(s.right.left=s),n._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=t,s},FY=(n,e)=>Yqe(n,t=>iM(t.deletions,e)),Ooe=(n,e,t,i,r,s)=>{const a=n.doc,o=a.store,l=a.clientID,c=e.redone;if(c!==null)return xu(n,c);let u=e.parent._item,h=null,d;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!t.has(u)||Ooe(n,u,t,i,r,s)===null))return null;for(;u.redone!==null;)u=xu(n,u.redone)}const f=u===null?e.parent:u.content.type;if(e.parentSub===null){for(h=e.left,d=e;h!==null;){let y=h;for(;y!==null&&y.parent._item!==u;)y=y.redone===null?null:xu(n,y.redone);if(y!==null&&y.parent._item===u){h=y;break}h=h.left}for(;d!==null;){let y=d;for(;y!==null&&y.parent._item!==u;)y=y.redone===null?null:xu(n,y.redone);if(y!==null&&y.parent._item===u){d=y;break}d=d.right}}else if(d=null,e.right&&!r){for(h=e;h!==null&&h.right!==null&&(h.right.redone||iM(i,h.right.id)||FY(s.undoStack,h.right.id)||FY(s.redoStack,h.right.id));)for(h=h.right;h.redone;)h=xu(n,h.redone);if(h&&h.right!==null)return null}else h=f._map.get(e.parentSub)||null;const m=zo(o,l),v=Ki(l,m),_=new Us(v,h,h&&h.lastId,d,d&&d.id,f,e.parentSub,e.content.copy());return e.redone=v,kH(_,!0),_.integrate(n,0),_};class Us extends DH{constructor(e,t,i,r,s,a,o,l){super(e,l.getLength()),this.origin=i,this.left=t,this.right=r,this.rightOrigin=s,this.parent=a,this.parentSub=o,this.redone=null,this.content=l,this.info=this.content.isCountable()?gY:0}set marker(e){(this.info&DF)>0!==e&&(this.info^=DF)}get marker(){return(this.info&DF)>0}get keep(){return(this.info&mY)>0}set keep(e){this.keep!==e&&(this.info^=mY)}get countable(){return(this.info&gY)>0}get deleted(){return(this.info&PF)>0}set deleted(e){this.deleted!==e&&(this.info^=PF)}markDeleted(){this.info|=PF}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=zo(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=zo(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===aT&&this.id.client!==this.parent.client&&this.parent.clock>=zo(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=OY(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=xu(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ld||this.right&&this.right.constructor===ld)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Us?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Us&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===aT){const i=oI(t,this.parent);i.constructor===ld?this.parent=null:this.parent=i.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=OY(e,e.doc.store,Ki(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,r;if(i!==null)r=i.right;else if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start;const s=new Set,a=new Set;for(;r!==null&&r!==this.right;){if(a.add(r),s.add(r),nO(this.origin,r.origin)){if(r.id.client<this.id.client)i=r,s.clear();else if(nO(this.rightOrigin,r.rightOrigin))break}else if(r.origin!==null&&a.has(oI(e.doc.store,r.origin)))s.has(oI(e.doc.store,r.origin))||(i=r,s.clear());else break;r=r.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),uoe(e.doc.store,this),this.content.integrate(e,this),NY(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new ld(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Ki(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&nO(e.origin,this.lastId)&&this.right===e&&nO(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(i=>{i.p===e&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),jC(e.deleteSet,this.id.client,this.id.clock,this.length),NY(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Dp();this.content.gc(e),t?b9e(e,this,new ld(this.id,this.length)):this.content=new GC(this.length)}write(e,t){const i=t>0?Ki(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,s=this.parentSub,a=this.content.getRef()&pU|(i===null?0:Eh)|(r===null?0:Rg)|(s===null?0:LC);if(e.writeInfo(a),i!==null&&e.writeLeftID(i),r!==null&&e.writeRightID(r),i===null&&r===null){const o=this.parent;if(o._item!==void 0){const l=o._item;if(l===null){const c=y9e(o);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else o.constructor===String?(e.writeParentInfo(!0),e.writeString(o)):o.constructor===aT?(e.writeParentInfo(!1),e.writeLeftID(o)):Dp();s!==null&&e.writeString(s)}this.content.write(e,t)}}const Ioe=(n,e)=>y$e[e&pU](n),y$e=[()=>{Dp()},e$e,r$e,Q9e,o$e,n$e,i$e,g$e,a$e,t$e,()=>{Dp()}],_$e=10;class cd extends DH{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){Dp()}write(e,t){e.writeInfo(_$e),br(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const Noe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Eg<"u"?Eg:{},Poe="__ $YJS$ __";Noe[Poe]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Noe[Poe]=!0;var N_=(n=>(n[n.Border=-1]="Border",n[n.Data=0]="Data",n[n.Function=1]="Function",n[n.Position=2]="Position",n[n.Timing=3]="Timing",n[n.Alignment=4]="Alignment",n))(N_||{}),b$e=Object.defineProperty,S$e=(n,e,t)=>e in n?b$e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sO=(n,e,t)=>(S$e(n,typeof e!="symbol"?e+"":e,t),t);const E$e=[0,1],Doe=[1,0],koe=[2,3],Loe=[3,2],T$e={L:E$e,M:Doe,Q:koe,H:Loe},x$e=/^[0-9]*$/,w$e=/^[A-Z0-9 $%*+.\/:-]*$/,zF="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",LH=1,UH=40,zY=3,C$e=3,aO=40,A$e=10,Uoe=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],Boe=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];class M$e{constructor(e,t,i,r){if(this.version=e,this.ecc=t,sO(this,"size"),sO(this,"mask"),sO(this,"modules",[]),sO(this,"types",[]),e<LH||e>UH)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;const s=Array.from({length:this.size},()=>!1);for(let o=0;o<this.size;o++)this.modules.push(s.slice()),this.types.push(s.map(()=>0));this.drawFunctionPatterns();const a=this.addEccAndInterleave(i);if(this.drawCodewords(a),r===-1){let o=1e9;for(let l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);const c=this.getPenaltyScore();c<o&&(r=l,o=c),this.applyMask(l)}}this.mask=r,this.applyMask(r),this.drawFormatBits(r)}getModule(e,t){return e>=0&&e<this.size&&t>=0&&t<this.size&&this.modules[t][e]}drawFunctionPatterns(){for(let i=0;i<this.size;i++)this.setFunctionModule(6,i,i%2===0,N_.Timing),this.setFunctionModule(i,6,i%2===0,N_.Timing);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let i=0;i<t;i++)for(let r=0;r<t;r++)i===0&&r===0||i===0&&r===t-1||i===t-1&&r===0||this.drawAlignmentPattern(e[i],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.ecc[1]<<3|e;let i=t;for(let s=0;s<10;s++)i=i<<1^(i>>>9)*1335;const r=(t<<10|i)^21522;for(let s=0;s<=5;s++)this.setFunctionModule(8,s,rg(r,s));this.setFunctionModule(8,7,rg(r,6)),this.setFunctionModule(8,8,rg(r,7)),this.setFunctionModule(7,8,rg(r,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,rg(r,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,rg(r,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,rg(r,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let i=0;i<12;i++)e=e<<1^(e>>>11)*7973;const t=this.version<<12|e;for(let i=0;i<18;i++){const r=rg(t,i),s=this.size-11+i%3,a=Math.floor(i/3);this.setFunctionModule(s,a,r),this.setFunctionModule(a,s,r)}}drawFinderPattern(e,t){for(let i=-4;i<=4;i++)for(let r=-4;r<=4;r++){const s=Math.max(Math.abs(r),Math.abs(i)),a=e+r,o=t+i;a>=0&&a<this.size&&o>=0&&o<this.size&&this.setFunctionModule(a,o,s!==2&&s!==4,N_.Position)}}drawAlignmentPattern(e,t){for(let i=-2;i<=2;i++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+i,Math.max(Math.abs(r),Math.abs(i))!==1,N_.Alignment)}setFunctionModule(e,t,i,r=N_.Function){this.modules[t][e]=i,this.types[t][e]=r}addEccAndInterleave(e){const t=this.version,i=this.ecc;if(e.length!==cI(t,i))throw new RangeError("Invalid argument");const r=Boe[i[0]][t],s=Uoe[i[0]][t],a=Math.floor(R5(t)/8),o=r-a%r,l=Math.floor(a/r),c=[],u=U$e(s);for(let d=0,f=0;d<r;d++){const m=e.slice(f,f+l-s+(d<o?0:1));f+=m.length;const v=B$e(m,u);d<o&&m.push(0),c.push(m.concat(v))}const h=[];for(let d=0;d<c[0].length;d++)c.forEach((f,m)=>{(d!==l-s||m>=o)&&h.push(f[d])});return h}drawCodewords(e){if(e.length!==Math.floor(R5(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let i=this.size-1;i>=1;i-=2){i===6&&(i=5);for(let r=0;r<this.size;r++)for(let s=0;s<2;s++){const a=i-s,l=(i+1&2)===0?this.size-1-r:r;!this.types[l][a]&&t<e.length*8&&(this.modules[l][a]=rg(e[t>>>3],7-(t&7)),t++)}}}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let i=0;i<this.size;i++){let r;switch(e){case 0:r=(i+t)%2===0;break;case 1:r=t%2===0;break;case 2:r=i%3===0;break;case 3:r=(i+t)%3===0;break;case 4:r=(Math.floor(i/3)+Math.floor(t/2))%2===0;break;case 5:r=i*t%2+i*t%3===0;break;case 6:r=(i*t%2+i*t%3)%2===0;break;case 7:r=((i+t)%2+i*t%3)%2===0;break;default:throw new Error("Unreachable")}!this.types[t][i]&&r&&(this.modules[t][i]=!this.modules[t][i])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let a=!1,o=0;const l=[0,0,0,0,0,0,0];for(let c=0;c<this.size;c++)this.modules[s][c]===a?(o++,o===5?e+=zY:o>5&&e++):(this.finderPenaltyAddHistory(o,l),a||(e+=this.finderPenaltyCountPatterns(l)*aO),a=this.modules[s][c],o=1);e+=this.finderPenaltyTerminateAndCount(a,o,l)*aO}for(let s=0;s<this.size;s++){let a=!1,o=0;const l=[0,0,0,0,0,0,0];for(let c=0;c<this.size;c++)this.modules[c][s]===a?(o++,o===5?e+=zY:o>5&&e++):(this.finderPenaltyAddHistory(o,l),a||(e+=this.finderPenaltyCountPatterns(l)*aO),a=this.modules[c][s],o=1);e+=this.finderPenaltyTerminateAndCount(a,o,l)*aO}for(let s=0;s<this.size-1;s++)for(let a=0;a<this.size-1;a++){const o=this.modules[s][a];o===this.modules[s][a+1]&&o===this.modules[s+1][a]&&o===this.modules[s+1][a+1]&&(e+=C$e)}let t=0;for(const s of this.modules)t=s.reduce((a,o)=>a+(o?1:0),t);const i=this.size*this.size,r=Math.ceil(Math.abs(t*20-i*10)/i)-1;return e+=r*A$e,e}getAlignmentPatternPositions(){if(this.version===1)return[];{const e=Math.floor(this.version/7)+2,t=this.version===32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,i=[6];for(let r=this.size-7;i.length<e;r-=t)i.splice(1,0,r);return i}}finderPenaltyCountPatterns(e){const t=e[1],i=t>0&&e[2]===t&&e[3]===t*3&&e[4]===t&&e[5]===t;return(i&&e[0]>=t*4&&e[6]>=t?1:0)+(i&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,i){return e&&(this.finderPenaltyAddHistory(t,i),t=0),t+=this.size,this.finderPenaltyAddHistory(t,i),this.finderPenaltyCountPatterns(i)}finderPenaltyAddHistory(e,t){t[0]===0&&(e+=this.size),t.pop(),t.unshift(e)}}function dg(n,e,t){if(e<0||e>31||n>>>e)throw new RangeError("Value out of range");for(let i=e-1;i>=0;i--)t.push(n>>>i&1)}function rg(n,e){return(n>>>e&1)!==0}class BH{constructor(e,t,i){if(this.mode=e,this.numChars=t,this.bitData=i,t<0)throw new RangeError("Invalid argument");this.bitData=i.slice()}getData(){return this.bitData.slice()}}const R$e=[1,10,12,14],O$e=[2,9,11,13],I$e=[4,8,16,16];function Foe(n,e){return n[Math.floor((e+7)/17)+1]}function zoe(n){const e=[];for(const t of n)dg(t,8,e);return new BH(I$e,n.length,e)}function N$e(n){if(!joe(n))throw new RangeError("String contains non-numeric characters");const e=[];for(let t=0;t<n.length;){const i=Math.min(n.length-t,3);dg(Number.parseInt(n.substring(t,t+i),10),i*3+1,e),t+=i}return new BH(R$e,n.length,e)}function P$e(n){if(!Hoe(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");const e=[];let t;for(t=0;t+2<=n.length;t+=2){let i=zF.indexOf(n.charAt(t))*45;i+=zF.indexOf(n.charAt(t+1)),dg(i,11,e)}return t<n.length&&dg(zF.indexOf(n.charAt(t)),6,e),new BH(O$e,n.length,e)}function D$e(n){return n===""?[]:joe(n)?[N$e(n)]:Hoe(n)?[P$e(n)]:[zoe(L$e(n))]}function joe(n){return x$e.test(n)}function Hoe(n){return w$e.test(n)}function k$e(n,e){let t=0;for(const i of n){const r=Foe(i.mode,e);if(i.numChars>=1<<r)return Number.POSITIVE_INFINITY;t+=4+r+i.bitData.length}return t}function L$e(n){n=encodeURI(n);const e=[];for(let t=0;t<n.length;t++)n.charAt(t)!=="%"?e.push(n.charCodeAt(t)):(e.push(Number.parseInt(n.substring(t+1,t+3),16)),t+=2);return e}function R5(n){if(n<LH||n>UH)throw new RangeError("Version number out of range");let e=(16*n+128)*n+64;if(n>=2){const t=Math.floor(n/7)+2;e-=(25*t-10)*t-55,n>=7&&(e-=36)}return e}function cI(n,e){return Math.floor(R5(n)/8)-Uoe[e[0]][n]*Boe[e[0]][n]}function U$e(n){if(n<1||n>255)throw new RangeError("Degree out of range");const e=[];for(let i=0;i<n-1;i++)e.push(0);e.push(1);let t=1;for(let i=0;i<n;i++){for(let r=0;r<e.length;r++)e[r]=O5(e[r],t),r+1<e.length&&(e[r]^=e[r+1]);t=O5(t,2)}return e}function B$e(n,e){const t=e.map(i=>0);for(const i of n){const r=i^t.shift();t.push(0),e.forEach((s,a)=>t[a]^=O5(s,r))}return t}function O5(n,e){if(n>>>8||e>>>8)throw new RangeError("Byte out of range");let t=0;for(let i=7;i>=0;i--)t=t<<1^(t>>>7)*285,t^=(e>>>i&1)*n;return t}function F$e(n,e,t=1,i=40,r=-1,s=!0){if(!(LH<=t&&t<=i&&i<=UH)||r<-1||r>7)throw new RangeError("Invalid value");let a,o;for(a=t;;a++){const h=cI(a,e)*8,d=k$e(n,a);if(d<=h){o=d;break}if(a>=i)throw new RangeError("Data too long")}for(const h of[Doe,koe,Loe])s&&o<=cI(a,h)*8&&(e=h);const l=[];for(const h of n){dg(h.mode[0],4,l),dg(h.numChars,Foe(h.mode,a),l);for(const d of h.getData())l.push(d)}const c=cI(a,e)*8;dg(0,Math.min(4,c-l.length),l),dg(0,(8-l.length%8)%8,l);for(let h=236;l.length<c;h^=253)dg(h,8,l);const u=Array.from({length:Math.ceil(l.length/8)},()=>0);return l.forEach((h,d)=>u[d>>>3]|=h<<7-(d&7)),new M$e(a,e,u,r)}function z$e(n,e){var h;const{ecc:t="L",boostEcc:i=!1,minVersion:r=1,maxVersion:s=40,maskPattern:a=-1,border:o=1}=e||{},l=typeof n=="string"?D$e(n):Array.isArray(n)?[zoe(n)]:void 0;if(!l)throw new Error(`uqr only supports encoding string and binary data, but got: ${typeof n}`);const c=F$e(l,T$e[t],r,s,a,i),u=j$e({version:c.version,maskPattern:c.mask,size:c.size,data:c.modules,types:c.types},o);return e!=null&&e.invert&&(u.data=u.data.map(d=>d.map(f=>!f))),(h=e==null?void 0:e.onEncoded)==null||h.call(e,u),u}function j$e(n,e=1){if(!e)return n;const{size:t}=n,i=t+e*2;n.size=i,n.data.forEach(s=>{for(let a=0;a<e;a++)s.unshift(!1),s.push(!1)});for(let s=0;s<e;s++)n.data.unshift(Array.from({length:i},a=>!1)),n.data.push(Array.from({length:i},a=>!1));const r=N_.Border;n.types.forEach(s=>{for(let a=0;a<e;a++)s.unshift(r),s.push(r)});for(let s=0;s<e;s++)n.types.unshift(Array.from({length:i},a=>r)),n.types.push(Array.from({length:i},a=>r));return n}function H$e(n,e,t,i=!1){return e<0||t<0||e>=n.length||t>=n.length?i:n[t][e]}function hat(n,e={}){const t={WHITE_ALL:"",WHITE_BLACK:"",BLACK_WHITE:"",BLACK_ALL:" "},i=z$e(n,e),r=!1,s=!0,a=(c,u)=>H$e(i.data,c,u,!0),o=[];let l="";for(let c=0;c<i.size;c+=2){for(let u=0;u<i.size;u++)a(u,c)===r&&a(u,c+1)===r?l+=t.WHITE_ALL:a(u,c)===r&&a(u,c+1)===s?l+=t.WHITE_BLACK:a(u,c)===s&&a(u,c+1)===r?l+=t.BLACK_WHITE:l+=t.BLACK_ALL;o.push(l),l=""}return o.join(`
`)}const rx=n=>n!==null&&Object.prototype.toString.call(n)==="[object Object]",NP=(n,e)=>{if(n===e)return!0;if(typeof n!=typeof e)return!1;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t+=1)if(!NP(n[t],e[t]))return!1;return!0}if(rx(n)&&rx(e)){const t=Object.entries(n),i=new Set(Object.keys(e));if(t.length!==i.size)return!1;for(const[r,s]of t){if(!NP(s,e[r]))return!1;i.delete(r)}return i.size===0}return!1},oO=n=>{if(n===""||n===!1||n===null||n===void 0||Array.isArray(n)&&n.length===0)return!0;if(rx(n)){for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}return!1},V$e=n=>n>="a"&&n<="z"||n>="A"&&n<="Z"||n==="_",jY=n=>n>="0"&&n<="9"||n==="-",G$e=n=>n>="a"&&n<="z"||n>="A"&&n<="Z"||n>="0"&&n<="9"||n==="_";var lt;(function(n){n.TOK_EOF="EOF",n.TOK_UNQUOTEDIDENTIFIER="UnquotedIdentifier",n.TOK_QUOTEDIDENTIFIER="QuotedIdentifier",n.TOK_RBRACKET="Rbracket",n.TOK_RPAREN="Rparen",n.TOK_COMMA="Comma",n.TOK_COLON="Colon",n.TOK_RBRACE="Rbrace",n.TOK_NUMBER="Number",n.TOK_CURRENT="Current",n.TOK_ROOT="Root",n.TOK_EXPREF="Expref",n.TOK_PIPE="Pipe",n.TOK_OR="Or",n.TOK_AND="And",n.TOK_EQ="EQ",n.TOK_GT="GT",n.TOK_LT="LT",n.TOK_GTE="GTE",n.TOK_LTE="LTE",n.TOK_NE="NE",n.TOK_FLATTEN="Flatten",n.TOK_STAR="Star",n.TOK_FILTER="Filter",n.TOK_DOT="Dot",n.TOK_NOT="Not",n.TOK_LBRACE="Lbrace",n.TOK_LBRACKET="Lbracket",n.TOK_LPAREN="Lparen",n.TOK_LITERAL="Literal"})(lt||(lt={}));const HY={"(":lt.TOK_LPAREN,")":lt.TOK_RPAREN,"*":lt.TOK_STAR,",":lt.TOK_COMMA,".":lt.TOK_DOT,":":lt.TOK_COLON,"@":lt.TOK_CURRENT,$:lt.TOK_ROOT,"]":lt.TOK_RBRACKET,"{":lt.TOK_LBRACE,"}":lt.TOK_RBRACE},q$e={"!":!0,"<":!0,"=":!0,">":!0},$$e={"	":!0,"\n":!0,"\r":!0," ":!0};class W$e{constructor(){this._current=0}tokenize(e){const t=[];this._current=0;let i,r,s;for(;this._current<e.length;)if(V$e(e[this._current]))i=this._current,r=this.consumeUnquotedIdentifier(e),t.push({start:i,type:lt.TOK_UNQUOTEDIDENTIFIER,value:r});else if(HY[e[this._current]]!==void 0)t.push({start:this._current,type:HY[e[this._current]],value:e[this._current]}),this._current+=1;else if(jY(e[this._current]))s=this.consumeNumber(e),t.push(s);else if(e[this._current]==="[")s=this.consumeLBracket(e),t.push(s);else if(e[this._current]==='"')i=this._current,r=this.consumeQuotedIdentifier(e),t.push({start:i,type:lt.TOK_QUOTEDIDENTIFIER,value:r});else if(e[this._current]==="'")i=this._current,r=this.consumeRawStringLiteral(e),t.push({start:i,type:lt.TOK_LITERAL,value:r});else if(e[this._current]==="`"){i=this._current;const a=this.consumeLiteral(e);t.push({start:i,type:lt.TOK_LITERAL,value:a})}else if(q$e[e[this._current]]!==void 0)s=this.consumeOperator(e),s&&t.push(s);else if($$e[e[this._current]]!==void 0)this._current+=1;else if(e[this._current]==="&")i=this._current,this._current+=1,e[this._current]==="&"?(this._current+=1,t.push({start:i,type:lt.TOK_AND,value:"&&"})):t.push({start:i,type:lt.TOK_EXPREF,value:"&"});else if(e[this._current]==="|")i=this._current,this._current+=1,e[this._current]==="|"?(this._current+=1,t.push({start:i,type:lt.TOK_OR,value:"||"})):t.push({start:i,type:lt.TOK_PIPE,value:"|"});else{const a=new Error(`Unknown character: ${e[this._current]}`);throw a.name="LexerError",a}return t}consumeUnquotedIdentifier(e){const t=this._current;for(this._current+=1;this._current<e.length&&G$e(e[this._current]);)this._current+=1;return e.slice(t,this._current)}consumeQuotedIdentifier(e){const t=this._current;this._current+=1;const i=e.length;for(;e[this._current]!=='"'&&this._current<i;){let r=this._current;e[r]==="\\"&&(e[r+1]==="\\"||e[r+1]==='"')?r+=2:r+=1,this._current=r}return this._current+=1,JSON.parse(e.slice(t,this._current))}consumeRawStringLiteral(e){const t=this._current;this._current+=1;const i=e.length;for(;e[this._current]!=="'"&&this._current<i;){let s=this._current;e[s]==="\\"&&(e[s+1]==="\\"||e[s+1]==="'")?s+=2:s+=1,this._current=s}return this._current+=1,e.slice(t+1,this._current-1).replace("\\'","'")}consumeNumber(e){const t=this._current;this._current+=1;const i=e.length;for(;jY(e[this._current])&&this._current<i;)this._current+=1;const r=parseInt(e.slice(t,this._current),10);return{start:t,value:r,type:lt.TOK_NUMBER}}consumeLBracket(e){const t=this._current;return this._current+=1,e[this._current]==="?"?(this._current+=1,{start:t,type:lt.TOK_FILTER,value:"[?"}):e[this._current]==="]"?(this._current+=1,{start:t,type:lt.TOK_FLATTEN,value:"[]"}):{start:t,type:lt.TOK_LBRACKET,value:"["}}consumeOperator(e){const t=this._current,i=e[t];if(this._current+=1,i==="!")return e[this._current]==="="?(this._current+=1,{start:t,type:lt.TOK_NE,value:"!="}):{start:t,type:lt.TOK_NOT,value:"!"};if(i==="<")return e[this._current]==="="?(this._current+=1,{start:t,type:lt.TOK_LTE,value:"<="}):{start:t,type:lt.TOK_LT,value:"<"};if(i===">")return e[this._current]==="="?(this._current+=1,{start:t,type:lt.TOK_GTE,value:">="}):{start:t,type:lt.TOK_GT,value:">"};if(i==="="&&e[this._current]==="=")return this._current+=1,{start:t,type:lt.TOK_EQ,value:"=="}}consumeLiteral(e){this._current+=1;const t=this._current,i=e.length;for(;e[this._current]!=="`"&&this._current<i;){let a=this._current;e[a]==="\\"&&(e[a+1]==="\\"||e[a+1]==="`")?a+=2:a+=1,this._current=a}let r=e.slice(t,this._current).trimLeft();r=r.replace("\\`","`");const s=this.looksLikeJSON(r)?JSON.parse(r):JSON.parse(`"${r}"`);return this._current+=1,s}looksLikeJSON(e){const t='[{"',i=["true","false","null"],r="-0123456789";if(e==="")return!1;if(t.includes(e[0])||i.includes(e))return!0;if(r.includes(e[0]))try{return JSON.parse(e),!0}catch{return!1}return!1}}const Y$e=new W$e,Yl={[lt.TOK_EOF]:0,[lt.TOK_UNQUOTEDIDENTIFIER]:0,[lt.TOK_QUOTEDIDENTIFIER]:0,[lt.TOK_RBRACKET]:0,[lt.TOK_RPAREN]:0,[lt.TOK_COMMA]:0,[lt.TOK_RBRACE]:0,[lt.TOK_NUMBER]:0,[lt.TOK_CURRENT]:0,[lt.TOK_EXPREF]:0,[lt.TOK_ROOT]:0,[lt.TOK_PIPE]:1,[lt.TOK_OR]:2,[lt.TOK_AND]:3,[lt.TOK_EQ]:5,[lt.TOK_GT]:5,[lt.TOK_LT]:5,[lt.TOK_GTE]:5,[lt.TOK_LTE]:5,[lt.TOK_NE]:5,[lt.TOK_FLATTEN]:9,[lt.TOK_STAR]:20,[lt.TOK_FILTER]:21,[lt.TOK_DOT]:40,[lt.TOK_NOT]:45,[lt.TOK_LBRACE]:50,[lt.TOK_LBRACKET]:55,[lt.TOK_LPAREN]:60};class X$e{constructor(){this.index=0,this.tokens=[]}parse(e){this.loadTokens(e),this.index=0;const t=this.expression(0);if(this.lookahead(0)!==lt.TOK_EOF){const i=this.lookaheadToken(0);this.errorToken(i,`Unexpected token type: ${i.type}, value: ${i.value}`)}return t}loadTokens(e){this.tokens=[...Y$e.tokenize(e),{type:lt.TOK_EOF,value:"",start:e.length}]}expression(e){const t=this.lookaheadToken(0);this.advance();let i=this.nud(t),r=this.lookahead(0);for(;e<Yl[r];)this.advance(),i=this.led(r,i),r=this.lookahead(0);return i}lookahead(e){return this.tokens[this.index+e].type}lookaheadToken(e){return this.tokens[this.index+e]}advance(){this.index+=1}nud(e){let t,i,r;switch(e.type){case lt.TOK_LITERAL:return{type:"Literal",value:e.value};case lt.TOK_UNQUOTEDIDENTIFIER:return{type:"Field",name:e.value};case lt.TOK_QUOTEDIDENTIFIER:const s={type:"Field",name:e.value};if(this.lookahead(0)===lt.TOK_LPAREN)throw new Error("Quoted identifier not allowed for function names.");return s;case lt.TOK_NOT:return i=this.expression(Yl.Not),{type:"NotExpression",children:[i]};case lt.TOK_STAR:return t={type:"Identity"},i=this.lookahead(0)===lt.TOK_RBRACKET&&{type:"Identity"}||this.parseProjectionRHS(Yl.Star),{type:"ValueProjection",children:[t,i]};case lt.TOK_FILTER:return this.led(e.type,{type:"Identity"});case lt.TOK_LBRACE:return this.parseMultiselectHash();case lt.TOK_FLATTEN:return t={type:lt.TOK_FLATTEN,children:[{type:"Identity"}]},i=this.parseProjectionRHS(Yl.Flatten),{type:"Projection",children:[t,i]};case lt.TOK_LBRACKET:return this.lookahead(0)===lt.TOK_NUMBER||this.lookahead(0)===lt.TOK_COLON?(i=this.parseIndexExpression(),this.projectIfSlice({type:"Identity"},i)):this.lookahead(0)===lt.TOK_STAR&&this.lookahead(1)===lt.TOK_RBRACKET?(this.advance(),this.advance(),i=this.parseProjectionRHS(Yl.Star),{children:[{type:"Identity"},i],type:"Projection"}):this.parseMultiselectList();case lt.TOK_CURRENT:return{type:lt.TOK_CURRENT};case lt.TOK_ROOT:return{type:lt.TOK_ROOT};case lt.TOK_EXPREF:return r=this.expression(Yl.Expref),{type:"ExpressionReference",children:[r]};case lt.TOK_LPAREN:const a=[];for(;this.lookahead(0)!==lt.TOK_RPAREN;)this.lookahead(0)===lt.TOK_CURRENT?(r={type:lt.TOK_CURRENT},this.advance()):r=this.expression(0),a.push(r);return this.match(lt.TOK_RPAREN),a[0];default:this.errorToken(e)}}led(e,t){let i;switch(e){case lt.TOK_DOT:const r=Yl.Dot;return this.lookahead(0)!==lt.TOK_STAR?(i=this.parseDotRHS(r),{type:"Subexpression",children:[t,i]}):(this.advance(),i=this.parseProjectionRHS(r),{type:"ValueProjection",children:[t,i]});case lt.TOK_PIPE:return i=this.expression(Yl.Pipe),{type:lt.TOK_PIPE,children:[t,i]};case lt.TOK_OR:return i=this.expression(Yl.Or),{type:"OrExpression",children:[t,i]};case lt.TOK_AND:return i=this.expression(Yl.And),{type:"AndExpression",children:[t,i]};case lt.TOK_LPAREN:const s=t.name,a=[];let o;for(;this.lookahead(0)!==lt.TOK_RPAREN;)this.lookahead(0)===lt.TOK_CURRENT?(o={type:lt.TOK_CURRENT},this.advance()):o=this.expression(0),this.lookahead(0)===lt.TOK_COMMA&&this.match(lt.TOK_COMMA),a.push(o);return this.match(lt.TOK_RPAREN),{name:s,type:"Function",children:a};case lt.TOK_FILTER:const c=this.expression(0);return this.match(lt.TOK_RBRACKET),i=this.lookahead(0)===lt.TOK_FLATTEN&&{type:"Identity"}||this.parseProjectionRHS(Yl.Filter),{type:"FilterProjection",children:[t,i,c]};case lt.TOK_FLATTEN:const u={type:lt.TOK_FLATTEN,children:[t]},h=this.parseProjectionRHS(Yl.Flatten);return{type:"Projection",children:[u,h]};case lt.TOK_EQ:case lt.TOK_NE:case lt.TOK_GT:case lt.TOK_GTE:case lt.TOK_LT:case lt.TOK_LTE:return this.parseComparator(t,e);case lt.TOK_LBRACKET:const d=this.lookaheadToken(0);return d.type===lt.TOK_NUMBER||d.type===lt.TOK_COLON?(i=this.parseIndexExpression(),this.projectIfSlice(t,i)):(this.match(lt.TOK_STAR),this.match(lt.TOK_RBRACKET),i=this.parseProjectionRHS(Yl.Star),{type:"Projection",children:[t,i]});default:return this.errorToken(this.lookaheadToken(0))}}match(e){if(this.lookahead(0)===e){this.advance();return}else{const t=this.lookaheadToken(0);this.errorToken(t,`Expected ${e}, got: ${t.type}`)}}errorToken(e,t=""){const i=new Error(t||`Invalid token (${e.type}): "${e.value}"`);throw i.name="ParserError",i}parseIndexExpression(){if(this.lookahead(0)===lt.TOK_COLON||this.lookahead(1)===lt.TOK_COLON)return this.parseSliceExpression();const e={type:"Index",value:this.lookaheadToken(0).value};return this.advance(),this.match(lt.TOK_RBRACKET),e}projectIfSlice(e,t){const i={type:"IndexExpression",children:[e,t]};return t.type==="Slice"?{children:[i,this.parseProjectionRHS(Yl.Star)],type:"Projection"}:i}parseSliceExpression(){const e=[null,null,null];let t=0,i=this.lookahead(0);for(;i!==lt.TOK_RBRACKET&&t<3;){if(i===lt.TOK_COLON)t+=1,this.advance();else if(i===lt.TOK_NUMBER)e[t]=this.lookaheadToken(0).value,this.advance();else{const r=this.lookaheadToken(0);this.errorToken(r,`Syntax error, unexpected token: ${r.value}(${r.type})`)}i=this.lookahead(0)}return this.match(lt.TOK_RBRACKET),{children:e,type:"Slice"}}parseComparator(e,t){const i=this.expression(Yl[t]);return{type:"Comparator",name:t,children:[e,i]}}parseDotRHS(e){const t=this.lookahead(0);if([lt.TOK_UNQUOTEDIDENTIFIER,lt.TOK_QUOTEDIDENTIFIER,lt.TOK_STAR].includes(t))return this.expression(e);if(t===lt.TOK_LBRACKET)return this.match(lt.TOK_LBRACKET),this.parseMultiselectList();if(t===lt.TOK_LBRACE)return this.match(lt.TOK_LBRACE),this.parseMultiselectHash();const r=this.lookaheadToken(0);this.errorToken(r,`Syntax error, unexpected token: ${r.value}(${r.type})`)}parseProjectionRHS(e){if(Yl[this.lookahead(0)]<10)return{type:"Identity"};if(this.lookahead(0)===lt.TOK_LBRACKET)return this.expression(e);if(this.lookahead(0)===lt.TOK_FILTER)return this.expression(e);if(this.lookahead(0)===lt.TOK_DOT)return this.match(lt.TOK_DOT),this.parseDotRHS(e);const t=this.lookaheadToken(0);this.errorToken(t,`Syntax error, unexpected token: ${t.value}(${t.type})`)}parseMultiselectList(){const e=[];for(;this.lookahead(0)!==lt.TOK_RBRACKET;){const t=this.expression(0);if(e.push(t),this.lookahead(0)===lt.TOK_COMMA&&(this.match(lt.TOK_COMMA),this.lookahead(0)===lt.TOK_RBRACKET))throw new Error("Unexpected token Rbracket")}return this.match(lt.TOK_RBRACKET),{type:"MultiSelectList",children:e}}parseMultiselectHash(){const e=[],t=[lt.TOK_UNQUOTEDIDENTIFIER,lt.TOK_QUOTEDIDENTIFIER];let i,r,s;for(;;){if(i=this.lookaheadToken(0),!t.includes(i.type))throw new Error(`Expecting an identifier token, got: ${i.type}`);if(r=i.value,this.advance(),this.match(lt.TOK_COLON),s=this.expression(0),e.push({value:s,type:"KeyValuePair",name:r}),this.lookahead(0)===lt.TOK_COMMA)this.match(lt.TOK_COMMA);else if(this.lookahead(0)===lt.TOK_RBRACE){this.match(lt.TOK_RBRACE);break}}return{type:"MultiSelectHash",children:e}}}const K$e=new X$e;var Bt;(function(n){n[n.TYPE_NUMBER=0]="TYPE_NUMBER",n[n.TYPE_ANY=1]="TYPE_ANY",n[n.TYPE_STRING=2]="TYPE_STRING",n[n.TYPE_ARRAY=3]="TYPE_ARRAY",n[n.TYPE_OBJECT=4]="TYPE_OBJECT",n[n.TYPE_BOOLEAN=5]="TYPE_BOOLEAN",n[n.TYPE_EXPREF=6]="TYPE_EXPREF",n[n.TYPE_NULL=7]="TYPE_NULL",n[n.TYPE_ARRAY_NUMBER=8]="TYPE_ARRAY_NUMBER",n[n.TYPE_ARRAY_STRING=9]="TYPE_ARRAY_STRING"})(Bt||(Bt={}));class Z$e{constructor(e){this.TYPE_NAME_TABLE={[Bt.TYPE_NUMBER]:"number",[Bt.TYPE_ANY]:"any",[Bt.TYPE_STRING]:"string",[Bt.TYPE_ARRAY]:"array",[Bt.TYPE_OBJECT]:"object",[Bt.TYPE_BOOLEAN]:"boolean",[Bt.TYPE_EXPREF]:"expression",[Bt.TYPE_NULL]:"null",[Bt.TYPE_ARRAY_NUMBER]:"Array<number>",[Bt.TYPE_ARRAY_STRING]:"Array<string>"},this.functionAbs=([t])=>Math.abs(t),this.functionAvg=([t])=>{let i=0;for(let r=0;r<t.length;r+=1)i+=t[r];return i/t.length},this.functionCeil=([t])=>Math.ceil(t),this.functionContains=t=>{const[i,r]=t;return i.includes(r)},this.functionEndsWith=t=>{const[i,r]=t;return i.includes(r,i.length-r.length)},this.functionFloor=([t])=>Math.floor(t),this.functionJoin=t=>{const[i,r]=t;return r.join(i)},this.functionKeys=([t])=>Object.keys(t),this.functionLength=([t])=>rx(t)?Object.keys(t).length:t.length,this.functionMap=t=>{if(!this._interpreter)return[];const i=[],r=this._interpreter,s=t[0],a=t[1];for(let o=0;o<a.length;o+=1)i.push(r.visit(s,a[o]));return i},this.functionMax=([t])=>{if(!t.length)return null;if(this.getTypeName(t[0])===Bt.TYPE_NUMBER)return Math.max(...t);const r=t;let s=r[0];for(let a=1;a<r.length;a+=1)s.localeCompare(r[a])<0&&(s=r[a]);return s},this.functionMaxBy=t=>{const i=t[1],r=t[0],s=this.createKeyFunction(i,[Bt.TYPE_NUMBER,Bt.TYPE_STRING]);let a=-1/0,o,l;for(let c=0;c<r.length;c+=1)l=s&&s(r[c]),l!==void 0&&l>a&&(a=l,o=r[c]);return o},this.functionMerge=t=>{let i={};for(let r=0;r<t.length;r+=1){const s=t[r];i=Object.assign(i,s)}return i},this.functionMin=([t])=>{if(!t.length)return null;if(this.getTypeName(t[0])===Bt.TYPE_NUMBER)return Math.min(...t);const r=t;let s=r[0];for(let a=1;a<r.length;a+=1)r[a].localeCompare(s)<0&&(s=r[a]);return s},this.functionMinBy=t=>{const i=t[1],r=t[0],s=this.createKeyFunction(i,[Bt.TYPE_NUMBER,Bt.TYPE_STRING]);let a=1/0,o,l;for(let c=0;c<r.length;c+=1)l=s&&s(r[c]),l!==void 0&&l<a&&(a=l,o=r[c]);return o},this.functionNotNull=t=>{for(let i=0;i<t.length;i+=1)if(this.getTypeName(t[i])!==Bt.TYPE_NULL)return t[i];return null},this.functionReverse=([t])=>{if(this.getTypeName(t)===Bt.TYPE_STRING){const s=t;let a="";for(let o=s.length-1;o>=0;o-=1)a+=s[o];return a}const r=t.slice(0);return r.reverse(),r},this.functionSort=([t])=>[...t].sort(),this.functionSortBy=t=>{if(!this._interpreter)return[];const i=t[0].slice(0);if(i.length===0)return i;const r=this._interpreter,s=t[1],a=this.getTypeName(r.visit(s,i[0]));if(a!==void 0&&![Bt.TYPE_NUMBER,Bt.TYPE_STRING].includes(a))throw new Error(`TypeError: unexpected type (${this.TYPE_NAME_TABLE[a]})`);const o=[];for(let l=0;l<i.length;l+=1)o.push([l,i[l]]);o.sort((l,c)=>{const u=r.visit(s,l[1]),h=r.visit(s,c[1]);if(this.getTypeName(u)!==a)throw new Error(`TypeError: expected (${this.TYPE_NAME_TABLE[a]}), received ${this.TYPE_NAME_TABLE[this.getTypeName(u)]}`);if(this.getTypeName(h)!==a)throw new Error(`TypeError: expected (${this.TYPE_NAME_TABLE[a]}), received ${this.TYPE_NAME_TABLE[this.getTypeName(h)]}`);return u>h?1:u<h?-1:l[0]-c[0]});for(let l=0;l<o.length;l+=1)i[l]=o[l][1];return i},this.functionStartsWith=([t,i])=>t.startsWith(i),this.functionSum=([t])=>t.reduce((i,r)=>i+r,0),this.functionToArray=([t])=>this.getTypeName(t)===Bt.TYPE_ARRAY?t:[t],this.functionToNumber=([t])=>{const i=this.getTypeName(t);let r;return i===Bt.TYPE_NUMBER?t:i===Bt.TYPE_STRING&&(r=+t,!isNaN(r))?r:null},this.functionToString=([t])=>this.getTypeName(t)===Bt.TYPE_STRING?t:JSON.stringify(t),this.functionType=([t])=>{switch(this.getTypeName(t)){case Bt.TYPE_NUMBER:return"number";case Bt.TYPE_STRING:return"string";case Bt.TYPE_ARRAY:return"array";case Bt.TYPE_OBJECT:return"object";case Bt.TYPE_BOOLEAN:return"boolean";case Bt.TYPE_EXPREF:return"expref";case Bt.TYPE_NULL:return"null";default:return}},this.functionValues=([t])=>Object.values(t),this.functionTable={abs:{_func:this.functionAbs,_signature:[{types:[Bt.TYPE_NUMBER]}]},avg:{_func:this.functionAvg,_signature:[{types:[Bt.TYPE_ARRAY_NUMBER]}]},ceil:{_func:this.functionCeil,_signature:[{types:[Bt.TYPE_NUMBER]}]},contains:{_func:this.functionContains,_signature:[{types:[Bt.TYPE_STRING,Bt.TYPE_ARRAY]},{types:[Bt.TYPE_ANY]}]},ends_with:{_func:this.functionEndsWith,_signature:[{types:[Bt.TYPE_STRING]},{types:[Bt.TYPE_STRING]}]},floor:{_func:this.functionFloor,_signature:[{types:[Bt.TYPE_NUMBER]}]},join:{_func:this.functionJoin,_signature:[{types:[Bt.TYPE_STRING]},{types:[Bt.TYPE_ARRAY_STRING]}]},keys:{_func:this.functionKeys,_signature:[{types:[Bt.TYPE_OBJECT]}]},length:{_func:this.functionLength,_signature:[{types:[Bt.TYPE_STRING,Bt.TYPE_ARRAY,Bt.TYPE_OBJECT]}]},map:{_func:this.functionMap,_signature:[{types:[Bt.TYPE_EXPREF]},{types:[Bt.TYPE_ARRAY]}]},max:{_func:this.functionMax,_signature:[{types:[Bt.TYPE_ARRAY_NUMBER,Bt.TYPE_ARRAY_STRING]}]},max_by:{_func:this.functionMaxBy,_signature:[{types:[Bt.TYPE_ARRAY]},{types:[Bt.TYPE_EXPREF]}]},merge:{_func:this.functionMerge,_signature:[{types:[Bt.TYPE_OBJECT],variadic:!0}]},min:{_func:this.functionMin,_signature:[{types:[Bt.TYPE_ARRAY_NUMBER,Bt.TYPE_ARRAY_STRING]}]},min_by:{_func:this.functionMinBy,_signature:[{types:[Bt.TYPE_ARRAY]},{types:[Bt.TYPE_EXPREF]}]},not_null:{_func:this.functionNotNull,_signature:[{types:[Bt.TYPE_ANY],variadic:!0}]},reverse:{_func:this.functionReverse,_signature:[{types:[Bt.TYPE_STRING,Bt.TYPE_ARRAY]}]},sort:{_func:this.functionSort,_signature:[{types:[Bt.TYPE_ARRAY_STRING,Bt.TYPE_ARRAY_NUMBER]}]},sort_by:{_func:this.functionSortBy,_signature:[{types:[Bt.TYPE_ARRAY]},{types:[Bt.TYPE_EXPREF]}]},starts_with:{_func:this.functionStartsWith,_signature:[{types:[Bt.TYPE_STRING]},{types:[Bt.TYPE_STRING]}]},sum:{_func:this.functionSum,_signature:[{types:[Bt.TYPE_ARRAY_NUMBER]}]},to_array:{_func:this.functionToArray,_signature:[{types:[Bt.TYPE_ANY]}]},to_number:{_func:this.functionToNumber,_signature:[{types:[Bt.TYPE_ANY]}]},to_string:{_func:this.functionToString,_signature:[{types:[Bt.TYPE_ANY]}]},type:{_func:this.functionType,_signature:[{types:[Bt.TYPE_ANY]}]},values:{_func:this.functionValues,_signature:[{types:[Bt.TYPE_OBJECT]}]}},this._interpreter=e}registerFunction(e,t,i){if(e in this.functionTable)throw new Error(`Function already defined: ${e}()`);this.functionTable[e]={_func:t.bind(this),_signature:i}}callFunction(e,t){const i=this.functionTable[e];if(i===void 0)throw new Error(`Unknown function: ${e}()`);return this.validateArgs(e,t,i._signature),i._func.call(this,t)}validateInputSignatures(e,t){for(let i=0;i<t.length;i+=1)if("variadic"in t[i]&&i!==t.length-1)throw new Error(`ArgumentError: ${e}() 'variadic' argument ${i+1} must occur last`)}validateArgs(e,t,i){var r,s;let a;this.validateInputSignatures(e,i);const o=i.filter(v=>{var _;return(_=!v.optional)!==null&&_!==void 0?_:!1}).length,l=(s=(r=i[i.length-1])===null||r===void 0?void 0:r.variadic)!==null&&s!==void 0?s:!1,c=t.length<o,u=t.length>i.length,h=c&&(!l&&o>1||l)?"at least ":"";if(l&&c||!l&&(c||u))throw a=i.length>1,new Error(`ArgumentError: ${e}() takes ${h}${o} argument${a&&"s"||""} but received ${t.length}`);let d,f,m;for(let v=0;v<i.length;v+=1){m=!1,d=i[v].types,f=this.getTypeName(t[v]);let _;for(_=0;_<d.length;_+=1)if(f!==void 0&&this.typeMatches(f,d[_],t[v])){m=!0;break}if(!m&&f!==void 0){const y=d.map(S=>this.TYPE_NAME_TABLE[S]).join(" | ");throw new Error(`TypeError: ${e}() expected argument ${v+1} to be type (${y}) but received type ${this.TYPE_NAME_TABLE[f]} instead.`)}}}typeMatches(e,t,i){if(t===Bt.TYPE_ANY)return!0;if(t===Bt.TYPE_ARRAY_STRING||t===Bt.TYPE_ARRAY_NUMBER||t===Bt.TYPE_ARRAY){if(t===Bt.TYPE_ARRAY)return e===Bt.TYPE_ARRAY;if(e===Bt.TYPE_ARRAY){let r;t===Bt.TYPE_ARRAY_NUMBER?r=Bt.TYPE_NUMBER:t===Bt.TYPE_ARRAY_STRING&&(r=Bt.TYPE_STRING);for(let s=0;s<i.length;s+=1){const a=this.getTypeName(i[s]);if(a!==void 0&&r!==void 0&&!this.typeMatches(a,r,i[s]))return!1}return!0}}else return e===t;return!1}getTypeName(e){switch(Object.prototype.toString.call(e)){case"[object String]":return Bt.TYPE_STRING;case"[object Number]":return Bt.TYPE_NUMBER;case"[object Array]":return Bt.TYPE_ARRAY;case"[object Boolean]":return Bt.TYPE_BOOLEAN;case"[object Null]":return Bt.TYPE_NULL;case"[object Object]":return e.jmespathType===lt.TOK_EXPREF?Bt.TYPE_EXPREF:Bt.TYPE_OBJECT;default:return}}createKeyFunction(e,t){if(!this._interpreter)return;const i=this._interpreter;return s=>{const a=i.visit(e,s);if(!t.includes(this.getTypeName(a))){const o=`TypeError: expected one of (${t.map(l=>this.TYPE_NAME_TABLE[l]).join(" | ")}), received ${this.TYPE_NAME_TABLE[this.getTypeName(a)]}`;throw new Error(o)}return a}}}class J$e{constructor(){this._rootValue=null,this.runtime=new Z$e(this)}search(e,t){return this._rootValue=t,this.visit(e,t)}visit(e,t){let i,r,s,a,o,l,c,u,h,d,f;switch(e.type){case"Field":return t===null?null:rx(t)?(l=t[e.name],l===void 0?null:l):null;case"Subexpression":for(s=this.visit(e.children[0],t),d=1;d<e.children.length;d+=1)if(s=this.visit(e.children[1],s),s===null)return null;return s;case"IndexExpression":return c=this.visit(e.children[0],t),u=this.visit(e.children[1],c),u;case"Index":if(!Array.isArray(t))return null;let m=e.value;return m<0&&(m=t.length+m),s=t[m],s===void 0&&(s=null),s;case"Slice":if(!Array.isArray(t))return null;const v=[...e.children],_=this.computeSliceParams(t.length,v),[y,S,T]=_;if(s=[],T>0)for(d=y;d<S;d+=T)s.push(t[d]);else for(d=y;d>S;d+=T)s.push(t[d]);return s;case"Projection":if(f=this.visit(e.children[0],t),!Array.isArray(f))return null;for(h=[],d=0;d<f.length;d+=1)r=this.visit(e.children[1],f[d]),r!==null&&h.push(r);return h;case"ValueProjection":if(f=this.visit(e.children[0],t),!rx(f))return null;h=[];const x=Object.values(f);for(d=0;d<x.length;d+=1)r=this.visit(e.children[1],x[d]),r!==null&&h.push(r);return h;case"FilterProjection":if(f=this.visit(e.children[0],t),!Array.isArray(f))return null;const I=[],R=[];for(d=0;d<f.length;d+=1)i=this.visit(e.children[2],f[d]),oO(i)||I.push(f[d]);for(let H=0;H<I.length;H+=1)r=this.visit(e.children[1],I[H]),r!==null&&R.push(r);return R;case"Comparator":switch(a=this.visit(e.children[0],t),o=this.visit(e.children[1],t),e.name){case lt.TOK_EQ:s=NP(a,o);break;case lt.TOK_NE:s=!NP(a,o);break;case lt.TOK_GT:s=a>o;break;case lt.TOK_GTE:s=a>=o;break;case lt.TOK_LT:s=a<o;break;case lt.TOK_LTE:s=a<=o;break;default:throw new Error(`Unknown comparator: ${e.name}`)}return s;case lt.TOK_FLATTEN:const N=this.visit(e.children[0],t);if(!Array.isArray(N))return null;let L=[];for(d=0;d<N.length;d+=1)r=N[d],Array.isArray(r)?L=[...L,...r]:L.push(r);return L;case"Identity":return t;case"MultiSelectList":if(t===null)return null;for(h=[],d=0;d<e.children.length;d+=1)h.push(this.visit(e.children[d],t));return h;case"MultiSelectHash":if(t===null)return null;h={};let k;for(d=0;d<e.children.length;d+=1)k=e.children[d],h[k.name]=this.visit(k.value,t);return h;case"OrExpression":return i=this.visit(e.children[0],t),oO(i)&&(i=this.visit(e.children[1],t)),i;case"AndExpression":return a=this.visit(e.children[0],t),oO(a)?a:this.visit(e.children[1],t);case"NotExpression":return a=this.visit(e.children[0],t),oO(a);case"Literal":return e.value;case lt.TOK_PIPE:return c=this.visit(e.children[0],t),this.visit(e.children[1],c);case lt.TOK_CURRENT:return t;case lt.TOK_ROOT:return this._rootValue;case"Function":const z=[];for(let H=0;H<e.children.length;H+=1)z.push(this.visit(e.children[H],t));return this.runtime.callFunction(e.name,z);case"ExpressionReference":const Z=e.children[0];return Z.jmespathType=lt.TOK_EXPREF,Z;default:throw new Error(`Unknown node type: ${e.type}`)}}computeSliceParams(e,t){let[i,r,s]=t;if(s===null)s=1;else if(s===0){const o=new Error("Invalid slice, step cannot be 0");throw o.name="RuntimeError",o}const a=s<0;return i=i===null?a?e-1:0:this.capSliceRange(e,i,s),r=r===null?a?-1:e:this.capSliceRange(e,r,s),[i,r,s]}capSliceRange(e,t,i){let r=t;return r<0?(r+=e,r<0&&(r=i<0?-1:0)):r>=e&&(r=i<0?e-1:e),r}}const Q$e=new J$e;Bt.TYPE_ANY;Bt.TYPE_ARRAY;Bt.TYPE_ARRAY_NUMBER;Bt.TYPE_ARRAY_STRING;Bt.TYPE_BOOLEAN;Bt.TYPE_EXPREF;Bt.TYPE_NULL;Bt.TYPE_NUMBER;Bt.TYPE_OBJECT;Bt.TYPE_STRING;function dat(n,e){const t=K$e.parse(e);return Q$e.search(t,n)}function eWe(n,e){let t=0,i=0,r=0;for(;r<n.length;r++)t+=n[r];for(r=0,e*=t;e&&r<n.length;){if(i+=n[r],e<=i)return r;r++}return 0}var tWe=eWe;const nWe=tWe,ur=function(){};ur.prototype.FMX=0;ur.prototype.FMY=0;ur.prototype.FMXxFMY=0;ur.prototype.T=0;ur.prototype.N=0;ur.prototype.initiliazedField=!1;ur.prototype.generationComplete=!1;ur.prototype.wave=null;ur.prototype.compatible=null;ur.prototype.weightLogWeights=null;ur.prototype.sumOfWeights=0;ur.prototype.sumOfWeightLogWeights=0;ur.prototype.startingEntropy=0;ur.prototype.sumsOfOnes=null;ur.prototype.sumsOfWeights=null;ur.prototype.sumsOfWeightLogWeights=null;ur.prototype.entropies=null;ur.prototype.propagator=null;ur.prototype.observed=null;ur.prototype.distribution=null;ur.prototype.stack=null;ur.prototype.stackSize=0;ur.prototype.DX=[-1,0,1,0];ur.prototype.DY=[0,1,0,-1];ur.prototype.opposite=[2,3,0,1];ur.prototype.initialize=function(){this.distribution=new Array(this.T),this.wave=new Array(this.FMXxFMY),this.compatible=new Array(this.FMXxFMY);for(let n=0;n<this.FMXxFMY;n++){this.wave[n]=new Array(this.T),this.compatible[n]=new Array(this.T);for(let e=0;e<this.T;e++)this.compatible[n][e]=[0,0,0,0]}this.weightLogWeights=new Array(this.T),this.sumOfWeights=0,this.sumOfWeightLogWeights=0;for(let n=0;n<this.T;n++)this.weightLogWeights[n]=this.weights[n]*Math.log(this.weights[n]),this.sumOfWeights+=this.weights[n],this.sumOfWeightLogWeights+=this.weightLogWeights[n];this.startingEntropy=Math.log(this.sumOfWeights)-this.sumOfWeightLogWeights/this.sumOfWeights,this.sumsOfOnes=new Array(this.FMXxFMY),this.sumsOfWeights=new Array(this.FMXxFMY),this.sumsOfWeightLogWeights=new Array(this.FMXxFMY),this.entropies=new Array(this.FMXxFMY),this.stack=new Array(this.FMXxFMY*this.T),this.stackSize=0};ur.prototype.observe=function(n){let e=1e3,t=-1;for(let s=0;s<this.FMXxFMY;s++){if(this.onBoundary(s%this.FMX,s/this.FMX|0))continue;const a=this.sumsOfOnes[s];if(a===0)return!1;const o=this.entropies[s];if(a>1&&o<=e){const l=1e-6*n();o+l<e&&(e=o+l,t=s)}}if(t===-1){this.observed=new Array(this.FMXxFMY);for(let s=0;s<this.FMXxFMY;s++)for(let a=0;a<this.T;a++)if(this.wave[s][a]){this.observed[s]=a;break}return!0}for(let s=0;s<this.T;s++)this.distribution[s]=this.wave[t][s]?this.weights[s]:0;const i=nWe(this.distribution,n()),r=this.wave[t];for(let s=0;s<this.T;s++)r[s]!==(s===i)&&this.ban(t,s);return null};ur.prototype.propagate=function(){for(;this.stackSize>0;){const n=this.stack[this.stackSize-1];this.stackSize--;const e=n[0],t=e%this.FMX,i=e/this.FMX|0;for(let r=0;r<4;r++){const s=this.DX[r],a=this.DY[r];let o=t+s,l=i+a;if(this.onBoundary(o,l))continue;o<0?o+=this.FMX:o>=this.FMX&&(o-=this.FMX),l<0?l+=this.FMY:l>=this.FMY&&(l-=this.FMY);const c=o+l*this.FMX,u=this.propagator[r][n[1]],h=this.compatible[c];for(let d=0;d<u.length;d++){const f=u[d],m=h[f];m[r]--,m[r]==0&&this.ban(c,f)}}}};ur.prototype.singleIteration=function(n){const e=this.observe(n);return e!==null?(this.generationComplete=e,!!e):(this.propagate(),null)};ur.prototype.iterate=function(n,e){this.wave||this.initialize(),this.initiliazedField||this.clear(),n=n||0,e=e||Math.random;for(let t=0;t<n||n===0;t++){const i=this.singleIteration(e);if(i!==null)return!!i}return!0};ur.prototype.generate=function(n){for(n=n||Math.random,this.wave||this.initialize(),this.clear();;){const e=this.singleIteration(n);if(e!==null)return!!e}};ur.prototype.isGenerationComplete=function(){return this.generationComplete};ur.prototype.ban=function(n,e){const t=this.compatible[n][e];for(let r=0;r<4;r++)t[r]=0;this.wave[n][e]=!1,this.stack[this.stackSize]=[n,e],this.stackSize++,this.sumsOfOnes[n]-=1,this.sumsOfWeights[n]-=this.weights[e],this.sumsOfWeightLogWeights[n]-=this.weightLogWeights[e];const i=this.sumsOfWeights[n];this.entropies[n]=Math.log(i)-this.sumsOfWeightLogWeights[n]/i};ur.prototype.clear=function(){for(let n=0;n<this.FMXxFMY;n++){for(let e=0;e<this.T;e++){this.wave[n][e]=!0;for(let t=0;t<4;t++)this.compatible[n][e][t]=this.propagator[this.opposite[t]][e].length}this.sumsOfOnes[n]=this.weights.length,this.sumsOfWeights[n]=this.sumOfWeights,this.sumsOfWeightLogWeights[n]=this.sumOfWeightLogWeights,this.entropies[n]=this.startingEntropy}this.initiliazedField=!0,this.generationComplete=!1};var Voe=ur;const Goe=Voe,jg=function(e,t,i,r,s,a,o,l,c,u){u=u||0,this.N=r,this.FMX=s,this.FMY=a,this.FMXxFMY=s*a,this.periodic=l;const h=t,d=new Array(h);for(let k=0;k<h;k++)d[k]=new Array(i);this.colors=[];const f={};for(let k=0;k<i;k++)for(let z=0;z<t;z++){const Z=(k*t+z)*4,H=[e[Z],e[Z+1],e[Z+2],e[Z+3]],q=H.join("-");f.hasOwnProperty(q)||(f[q]=this.colors.length,this.colors.push(H)),d[z][k]=f[q]}const m=this.colors.length,v=Math.pow(m,r*r),_=function(z){let Z=new Array(r*r);for(let H=0;H<r;H++)for(let q=0;q<r;q++)Z[q+H*r]=z(q,H);return Z},y=function(z,Z){return _(function(H,q){return d[(z+H)%t][(Z+q)%i]})},S=function(z){return _(function(Z,H){return z[r-1-H+Z*r]})},T=function(z){return _(function(Z,H){return z[r-1-Z+H*r]})},x=function(z){let Z=0,H=1;for(let q=0;q<z.length;q++)Z+=z[z.length-1-q]*H,H*=m;return Z},I=function(z){let Z=z,H=v;const q=new Array(r*r);for(let U=0;U<q.length;U++){H/=m;let ee=0;for(;Z>=H;)Z-=H,ee++;q[U]=ee}return q},R={},N=[];for(let k=0;k<(o?i:i-r+1);k++)for(let z=0;z<(o?t:t-r+1);z++){const Z=new Array(8);Z[0]=y(z,k),Z[1]=T(Z[0]),Z[2]=S(Z[0]),Z[3]=T(Z[2]),Z[4]=S(Z[2]),Z[5]=T(Z[4]),Z[6]=S(Z[4]),Z[7]=T(Z[6]);for(let H=0;H<c;H++){const q=x(Z[H]);R[q]?R[q]++:(N.push(q),R[q]=1)}}this.T=N.length,this.ground=(u+this.T)%this.T,this.patterns=new Array(this.T),this.weights=new Array(this.T);for(let k=0;k<this.T;k++){const z=parseInt(N[k],10);this.patterns[k]=I(z),this.weights[k]=R[z]}const L=function(z,Z,H,q){const U=H<0?0:H,ee=H<0?H+r:r,W=q<0?0:q,Q=q<0?q+r:r;for(let X=W;X<Q;X++)for(let Y=U;Y<ee;Y++)if(z[Y+r*X]!=Z[Y-H+r*(X-q)])return!1;return!0};this.propagator=new Array(4);for(let k=0;k<4;k++){this.propagator[k]=new Array(this.T);for(let z=0;z<this.T;z++){const Z=[];for(let H=0;H<this.T;H++)L(this.patterns[z],this.patterns[H],this.DX[k],this.DY[k])&&Z.push(H);this.propagator[k][z]=Z}}};jg.prototype=Object.create(Goe.prototype);jg.prototype.constructor=jg;jg.prototype.onBoundary=function(n,e){return!this.periodic&&(n+this.N>this.FMX||e+this.N>this.FMY||n<0||e<0)};jg.prototype.clear=function(){if(Goe.prototype.clear.call(this),this.ground!==0){for(let n=0;n<this.FMX;n++){for(let e=0;e<this.T;e++)e!==this.ground&&this.ban(n+(this.FMY-1)*this.FMX,e);for(let e=0;e<this.FMY-1;e++)this.ban(n+e*this.FMX,this.ground)}this.propagate()}};jg.prototype.graphics=function(n){return n=n||new Uint8Array(this.FMXxFMY*4),this.isGenerationComplete()?this.graphicsComplete(n):this.graphicsIncomplete(n),n};jg.prototype.graphicsComplete=function(n){for(let e=0;e<this.FMY;e++){const t=e<this.FMY-this.N+1?0:this.N-1;for(let i=0;i<this.FMX;i++){const r=i<this.FMX-this.N+1?0:this.N-1,s=(e*this.FMX+i)*4,a=this.colors[this.patterns[this.observed[i-r+(e-t)*this.FMX]][r+t*this.N]];n[s]=a[0],n[s+1]=a[1],n[s+2]=a[2],n[s+3]=a[3]}}};jg.prototype.graphicsIncomplete=function(n){for(let e=0;e<this.FMXxFMY;e++){const t=e%this.FMX,i=e/this.FMX|0;let r=0,s=0,a=0,o=0,l=0;for(let u=0;u<this.N;u++)for(let h=0;h<this.N;h++){let d=t-h;d<0&&(d+=this.FMX);let f=i-u;if(f<0&&(f+=this.FMY),this.onBoundary(d,f))continue;const m=d+f*this.FMX;for(let v=0;v<this.T;v++)if(this.wave[m][v]){r++;const _=this.colors[this.patterns[v][h+u*this.N]];s+=_[0],a+=_[1],o+=_[2],l+=_[3]}}const c=e*4;n[c]=s/r,n[c+1]=a/r,n[c+2]=o/r,n[c+3]=l/r}};var iWe=jg;const rWe=Voe,Zy=function(e,t,i,r,s){const a=e.tilesize||16;this.FMX=i,this.FMY=r,this.FMXxFMY=i*r,this.periodic=s,this.tilesize=a;const o=!!e.unique;let l=null;t&&e.subsets&&e.subsets[t]&&(l=e.subsets[t]);const c=function(x){const I=new Array(a*a);for(let R=0;R<a;R++)for(let N=0;N<a;N++)I[N+R*a]=x(N,R);return I},u=function(x){return c(function(I,R){return x[a-1-R+I*a]})},h=function(x){return c(function(I,R){return x[a-1-I+R*a]})};this.tiles=[];const d=[],f=[],m={};let v,_,y;for(let T=0;T<e.tiles.length;T++){const x=e.tiles[T];if(l!==null&&l.indexOf(x.name)===-1)continue;switch(x.symmetry){case"L":y=4,v=function(R){return(R+1)%4},_=function(R){return R%2===0?R+1:R-1};break;case"T":y=4,v=function(R){return(R+1)%4},_=function(R){return R%2===0?R:4-R};break;case"I":y=2,v=function(R){return 1-R},_=function(R){return R};break;case"\\":y=2,v=function(R){return 1-R},_=function(R){return 1-R};break;case"F":y=8,v=function(R){return R<4?(R+1)%4:4+(R-1)%4},_=function(R){return R<4?R+4:R-4};break;default:y=1,v=function(R){return R},_=function(R){return R};break}this.T=f.length,m[x.name]=this.T;for(let R=0;R<y;R++)f.push([this.T+R,this.T+v(R),this.T+v(v(R)),this.T+v(v(v(R))),this.T+_(R),this.T+_(v(R)),this.T+_(v(v(R))),this.T+_(v(v(v(R))))]);let I;if(o)for(let R=0;R<y;R++)I=x.bitmap[R],this.tiles.push(c(function(N,L){return[I[(a*L+N)*4],I[(a*L+N)*4+1],I[(a*L+N)*4+2],I[(a*L+N)*4+3]]}));else{I=x.bitmap,this.tiles.push(c(function(R,N){return[I[(a*N+R)*4],I[(a*N+R)*4+1],I[(a*N+R)*4+2],I[(a*N+R)*4+3]]}));for(let R=1;R<y;R++)this.tiles.push(R<4?u(this.tiles[this.T+R-1]):h(this.tiles[this.T+R-4]))}for(let R=0;R<y;R++)d.push(x.weight||1)}this.T=f.length,this.weights=d,this.propagator=new Array(4);const S=new Array(4);for(let T=0;T<4;T++){this.propagator[T]=new Array(this.T),S[T]=new Array(this.T);for(let x=0;x<this.T;x++){S[T][x]=new Array(this.T);for(let I=0;I<this.T;I++)S[T][x][I]=!1}}for(let T=0;T<e.neighbors.length;T++){const x=e.neighbors[T],I=x.left.split(" ").filter(function(Z){return Z.length}),R=x.right.split(" ").filter(function(Z){return Z.length});if(l!==null&&(l.indexOf(I[0])===-1||l.indexOf(R[0])===-1))continue;const N=f[m[I[0]]][I.length==1?0:parseInt(I[1],10)],L=f[N][1],k=f[m[R[0]]][R.length==1?0:parseInt(R[1],10)],z=f[k][1];S[0][k][N]=!0,S[0][f[k][6]][f[N][6]]=!0,S[0][f[N][4]][f[k][4]]=!0,S[0][f[N][2]][f[k][2]]=!0,S[1][z][L]=!0,S[1][f[L][6]][f[z][6]]=!0,S[1][f[z][4]][f[L][4]]=!0,S[1][f[L][2]][f[z][2]]=!0}for(let T=0;T<this.T;T++)for(let x=0;x<this.T;x++)S[2][T][x]=S[0][x][T],S[3][T][x]=S[1][x][T];for(let T=0;T<4;T++)for(let x=0;x<this.T;x++){const I=[],R=S[T][x];for(let N=0;N<this.T;N++)R[N]&&I.push(N);this.propagator[T][x]=I}};Zy.prototype=Object.create(rWe.prototype);Zy.prototype.constructor=Zy;Zy.prototype.onBoundary=function(n,e){return!this.periodic&&(n<0||e<0||n>=this.FMX||e>=this.FMY)};Zy.prototype.graphics=function(n,e){return n=n||new Uint8Array(this.FMXxFMY*this.tilesize*this.tilesize*4),this.isGenerationComplete()?this.graphicsComplete(n):this.graphicsIncomplete(n,e),n};Zy.prototype.graphicsComplete=function(n){for(let e=0;e<this.FMX;e++)for(let t=0;t<this.FMY;t++){const i=this.tiles[this.observed[e+t*this.FMX]];for(let r=0;r<this.tilesize;r++)for(let s=0;s<this.tilesize;s++){const a=(e*this.tilesize+s+(t*this.tilesize+r)*this.FMX*this.tilesize)*4,o=i[s+r*this.tilesize];n[a]=o[0],n[a+1]=o[1],n[a+2]=o[2],n[a+3]=o[3]}}};Zy.prototype.graphicsIncomplete=function(n,e){(!e||e.length!==4)&&(e=!1);for(let t=0;t<this.FMX;t++)for(let i=0;i<this.FMY;i++){const r=this.wave[t+i*this.FMX];let s=0,a=0;for(let l=0;l<this.T;l++)r[l]&&(s++,a+=this.weights[l]);const o=1/a;for(let l=0;l<this.tilesize;l++)for(let c=0;c<this.tilesize;c++){const u=(t*this.tilesize+c+(i*this.tilesize+l)*this.FMX*this.tilesize)*4;if(e&&s===this.T)n[u]=e[0],n[u+1]=e[1],n[u+2]=e[2],n[u+3]=e[3];else{let h=0,d=0,f=0,m=0;for(let v=0;v<this.T;v++)if(r[v]){const _=this.tiles[v][c+l*this.tilesize],y=this.weights[v]*o;h+=_[0]*y,d+=_[1]*y,f+=_[2]*y,m+=_[3]*y}n[u]=h,n[u+1]=d,n[u+2]=f,n[u+3]=m}}}};var sWe=Zy,aWe={OverlappingModel:iWe,SimpleTiledModel:sWe};const fat=Dl(aWe);var qoe={},$oe={},Woe={};const VY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Woe.encode=function(n){if(0<=n&&n<VY.length)return VY[n];throw new TypeError("Must be between 0 and 63: "+n)};const oWe=Woe,Yoe=5,Xoe=1<<Yoe,lWe=Xoe-1,cWe=Xoe;function uWe(n){return n<0?(-n<<1)+1:(n<<1)+0}$oe.encode=function(e){let t="",i,r=uWe(e);do i=r&lWe,r>>>=Yoe,r>0&&(i|=cWe),t+=oWe.encode(i);while(r>0);return t};var oM={};(function(n){function e(R,N,L){if(N in R)return R[N];if(arguments.length===3)return L;throw new Error('"'+N+'" is a required argument.')}n.getArg=e;const t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function r(R){const N=R.match(t);return N?{scheme:N[1],auth:N[2],host:N[3],port:N[4],path:N[5]}:null}n.urlParse=r;function s(R){let N="";return R.scheme&&(N+=R.scheme+":"),N+="//",R.auth&&(N+=R.auth+"@"),R.host&&(N+=R.host),R.port&&(N+=":"+R.port),R.path&&(N+=R.path),N}n.urlGenerate=s;const a=32;function o(R){const N=[];return function(L){for(let z=0;z<N.length;z++)if(N[z].input===L){const Z=N[0];return N[0]=N[z],N[z]=Z,N[0].result}const k=R(L);return N.unshift({input:L,result:k}),N.length>a&&N.pop(),k}}const l=o(function(N){let L=N;const k=r(N);if(k){if(!k.path)return N;L=k.path}const z=n.isAbsolute(L),Z=[];let H=0,q=0;for(;;)if(H=q,q=L.indexOf("/",H),q===-1){Z.push(L.slice(H));break}else for(Z.push(L.slice(H,q));q<L.length&&L[q]==="/";)q++;let U=0;for(q=Z.length-1;q>=0;q--){const ee=Z[q];ee==="."?Z.splice(q,1):ee===".."?U++:U>0&&(ee===""?(Z.splice(q+1,U),U=0):(Z.splice(q,2),U--))}return L=Z.join("/"),L===""&&(L=z?"/":"."),k?(k.path=L,s(k)):L});n.normalize=l;function c(R,N){R===""&&(R="."),N===""&&(N=".");const L=r(N),k=r(R);if(k&&(R=k.path||"/"),L&&!L.scheme)return k&&(L.scheme=k.scheme),s(L);if(L||N.match(i))return N;if(k&&!k.host&&!k.path)return k.host=N,s(k);const z=N.charAt(0)==="/"?N:l(R.replace(/\/+$/,"")+"/"+N);return k?(k.path=z,s(k)):z}n.join=c,n.isAbsolute=function(R){return R.charAt(0)==="/"||t.test(R)};function u(R,N){R===""&&(R="."),R=R.replace(/\/$/,"");let L=0;for(;N.indexOf(R+"/")!==0;){const k=R.lastIndexOf("/");if(k<0||(R=R.slice(0,k),R.match(/^([^\/]+:\/)?\/*$/)))return N;++L}return Array(L+1).join("../")+N.substr(R.length+1)}n.relative=u;const h=function(){return!("__proto__"in Object.create(null))}();function d(R){return R}function f(R){return v(R)?"$"+R:R}n.toSetString=h?d:f;function m(R){return v(R)?R.slice(1):R}n.fromSetString=h?d:m;function v(R){if(!R)return!1;const N=R.length;if(N<9||R.charCodeAt(N-1)!==95||R.charCodeAt(N-2)!==95||R.charCodeAt(N-3)!==111||R.charCodeAt(N-4)!==116||R.charCodeAt(N-5)!==111||R.charCodeAt(N-6)!==114||R.charCodeAt(N-7)!==112||R.charCodeAt(N-8)!==95||R.charCodeAt(N-9)!==95)return!1;for(let L=N-10;L>=0;L--)if(R.charCodeAt(L)!==36)return!1;return!0}function _(R,N,L){let k=S(R.source,N.source);return k!==0||(k=R.originalLine-N.originalLine,k!==0)||(k=R.originalColumn-N.originalColumn,k!==0||L)||(k=R.generatedColumn-N.generatedColumn,k!==0)||(k=R.generatedLine-N.generatedLine,k!==0)?k:S(R.name,N.name)}n.compareByOriginalPositions=_;function y(R,N,L){let k=R.generatedLine-N.generatedLine;return k!==0||(k=R.generatedColumn-N.generatedColumn,k!==0||L)||(k=S(R.source,N.source),k!==0)||(k=R.originalLine-N.originalLine,k!==0)||(k=R.originalColumn-N.originalColumn,k!==0)?k:S(R.name,N.name)}n.compareByGeneratedPositionsDeflated=y;function S(R,N){return R===N?0:R===null?1:N===null?-1:R>N?1:-1}function T(R,N){let L=R.generatedLine-N.generatedLine;return L!==0||(L=R.generatedColumn-N.generatedColumn,L!==0)||(L=S(R.source,N.source),L!==0)||(L=R.originalLine-N.originalLine,L!==0)||(L=R.originalColumn-N.originalColumn,L!==0)?L:S(R.name,N.name)}n.compareByGeneratedPositionsInflated=T;function x(R){return JSON.parse(R.replace(/^\)]}'[^\n]*\n/,""))}n.parseSourceMapInput=x;function I(R,N,L){if(N=N||"",R&&(R[R.length-1]!=="/"&&N[0]!=="/"&&(R+="/"),N=R+N),L){const k=r(L);if(!k)throw new Error("sourceMapURL could not be parsed");if(k.path){const z=k.path.lastIndexOf("/");z>=0&&(k.path=k.path.substring(0,z+1))}N=c(s(k),N)}return l(N)}n.computeSourceURL=I})(oM);var FH={};let hWe=class Koe{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){const i=new Koe;for(let r=0,s=e.length;r<s;r++)i.add(e[r],t);return i}size(){return this._set.size}add(e,t){const i=this.has(e),r=this._array.length;(!i||t)&&this._array.push(e),i||this._set.set(e,r)}has(e){return this._set.has(e)}indexOf(e){const t=this._set.get(e);if(t>=0)return t;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}};FH.ArraySet=hWe;var Zoe={};const Joe=oM;function dWe(n,e){const t=n.generatedLine,i=e.generatedLine,r=n.generatedColumn,s=e.generatedColumn;return i>t||i==t&&s>=r||Joe.compareByGeneratedPositionsInflated(n,e)<=0}let fWe=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){dWe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(Joe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};Zoe.MappingList=fWe;const U1=$oe,fo=oM,lO=FH.ArraySet,pWe=Zoe.MappingList;let Qoe=class ele{constructor(e){e||(e={}),this._file=fo.getArg(e,"file",null),this._sourceRoot=fo.getArg(e,"sourceRoot",null),this._skipValidation=fo.getArg(e,"skipValidation",!1),this._sources=new lO,this._names=new lO,this._mappings=new pWe,this._sourcesContents=null}static fromSourceMap(e){const t=e.sourceRoot,i=new ele({file:e.file,sourceRoot:t});return e.eachMapping(function(r){const s={generated:{line:r.generatedLine,column:r.generatedColumn}};r.source!=null&&(s.source=r.source,t!=null&&(s.source=fo.relative(t,s.source)),s.original={line:r.originalLine,column:r.originalColumn},r.name!=null&&(s.name=r.name)),i.addMapping(s)}),e.sources.forEach(function(r){let s=r;t!==null&&(s=fo.relative(t,r)),i._sources.has(s)||i._sources.add(s);const a=e.sourceContentFor(r);a!=null&&i.setSourceContent(r,a)}),i}addMapping(e){const t=fo.getArg(e,"generated"),i=fo.getArg(e,"original",null);let r=fo.getArg(e,"source",null),s=fo.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,i,r,s),r!=null&&(r=String(r),this._sources.has(r)||this._sources.add(r)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:r,name:s})}setSourceContent(e,t){let i=e;this._sourceRoot!=null&&(i=fo.relative(this._sourceRoot,i)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[fo.toSetString(i)]=t):this._sourcesContents&&(delete this._sourcesContents[fo.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(e,t,i){let r=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);r=e.file}const s=this._sourceRoot;s!=null&&(r=fo.relative(s,r));const a=this._mappings.toArray().length>0?new lO:this._sources,o=new lO;this._mappings.unsortedForEach(function(l){if(l.source===r&&l.originalLine!=null){const h=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});h.source!=null&&(l.source=h.source,i!=null&&(l.source=fo.join(i,l.source)),s!=null&&(l.source=fo.relative(s,l.source)),l.originalLine=h.line,l.originalColumn=h.column,h.name!=null&&(l.name=h.name))}const c=l.source;c!=null&&!a.has(c)&&a.add(c);const u=l.name;u!=null&&!o.has(u)&&o.add(u)},this),this._sources=a,this._names=o,e.sources.forEach(function(l){const c=e.sourceContentFor(l);c!=null&&(i!=null&&(l=fo.join(i,l)),s!=null&&(l=fo.relative(s,l)),this.setSourceContent(l,c))},this)}_validateMapping(e,t,i,r){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!i&&!r)){if(!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&i))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:t,name:r}))}}_serializeMappings(){let e=0,t=1,i=0,r=0,s=0,a=0,o="",l,c,u,h;const d=this._mappings.toArray();for(let f=0,m=d.length;f<m;f++){if(c=d[f],l="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)l+=";",t++;else if(f>0){if(!fo.compareByGeneratedPositionsInflated(c,d[f-1]))continue;l+=","}l+=U1.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(h=this._sources.indexOf(c.source),l+=U1.encode(h-a),a=h,l+=U1.encode(c.originalLine-1-r),r=c.originalLine-1,l+=U1.encode(c.originalColumn-i),i=c.originalColumn,c.name!=null&&(u=this._names.indexOf(c.name),l+=U1.encode(u-s),s=u)),o+=l}return o}_generateSourcesContent(e,t){return e.map(function(i){if(!this._sourcesContents)return null;t!=null&&(i=fo.relative(t,i));const r=fo.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)}toJSON(){const e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}};Qoe.prototype._version=3;qoe.SourceMapGenerator=Qoe;var tle={};(function(n){n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2;function e(t,i,r,s,a,o){const l=Math.floor((i-t)/2)+t,c=a(r,s[l],!0);return c===0?l:c>0?i-l>1?e(l,i,r,s,a,o):o==n.LEAST_UPPER_BOUND?i<s.length?i:-1:l:l-t>1?e(t,l,r,s,a,o):o==n.LEAST_UPPER_BOUND?l:t<0?-1:t}n.search=function(i,r,s,a){if(r.length===0)return-1;let o=e(-1,r.length,i,r,s,a||n.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&s(r[o],r[o-1],!0)===0;)--o;return o}})(tle);var rw={exports:{}};const mWe={},gWe=Object.freeze(Object.defineProperty({__proto__:null,default:mWe},Symbol.toStringTag,{value:"Module"})),GY=sfe(gWe),vWe=(function(){return typeof window<"u"&&this===window}).call();if(vWe){let n=null;rw.exports=function(){if(typeof n=="string")return fetch(n).then(t=>t.arrayBuffer());if(n instanceof ArrayBuffer)return Promise.resolve(n);throw new Error("You must provide the string URL or ArrayBuffer contents of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer")},rw.exports.initialize=e=>n=e}else{const n=GY,e=GY;rw.exports=function(){return new Promise((i,r)=>{const s=e.join(__dirname,"mappings.wasm");n.readFile(s,null,(a,o)=>{if(a){r(a);return}i(o.buffer)})})},rw.exports.initialize=t=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}}var nle=rw.exports;const yWe=nle;function _We(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}let B1=null;var bWe=function(){if(B1)return B1;const e=[];return B1=yWe().then(t=>WebAssembly.instantiate(t,{env:{mapping_callback(i,r,s,a,o,l,c,u,h,d){const f=new _We;f.generatedLine=i+1,f.generatedColumn=r,s&&(f.lastGeneratedColumn=a-1),o&&(f.source=l,f.originalLine=c+1,f.originalColumn=u,h&&(f.name=d)),e[e.length-1](f)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(t=>({exports:t.instance.exports,withMappingCallback:(i,r)=>{e.push(i);try{r()}finally{e.pop()}}})).then(null,t=>{throw B1=null,t}),B1};const zn=oM,jF=tle,PP=FH.ArraySet,SWe=nle,EWe=bWe,zH=Symbol("smcInternal");class qa{constructor(e,t){return e==zH?Promise.resolve(this):xWe(e,t)}static initialize(e){SWe.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,t){return wWe(e,t)}static async with(e,t,i){const r=await new qa(e,t);try{return await i(r)}finally{r.destroy()}}_parseMappings(e,t){throw new Error("Subclasses must implement _parseMappings")}eachMapping(e,t,i){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}}qa.prototype._version=3;qa.GENERATED_ORDER=1;qa.ORIGINAL_ORDER=2;qa.GREATEST_LOWER_BOUND=1;qa.LEAST_UPPER_BOUND=2;class lM extends qa{constructor(e,t){return super(zH).then(i=>{let r=e;typeof e=="string"&&(r=zn.parseSourceMapInput(e));const s=zn.getArg(r,"version");let a=zn.getArg(r,"sources");const o=zn.getArg(r,"names",[]);let l=zn.getArg(r,"sourceRoot",null);const c=zn.getArg(r,"sourcesContent",null),u=zn.getArg(r,"mappings"),h=zn.getArg(r,"file",null);if(s!=i._version)throw new Error("Unsupported version: "+s);return l&&(l=zn.normalize(l)),a=a.map(String).map(zn.normalize).map(function(d){return l&&zn.isAbsolute(l)&&zn.isAbsolute(d)?zn.relative(l,d):d}),i._names=PP.fromArray(o.map(String),!0),i._sources=PP.fromArray(a,!0),i._absoluteSources=i._sources.toArray().map(function(d){return zn.computeSourceURL(l,d,t)}),i.sourceRoot=l,i.sourcesContent=c,i._mappings=u,i._sourceMapURL=t,i.file=h,i._computedColumnSpans=!1,i._mappingsPtr=0,i._wasm=null,EWe().then(d=>(i._wasm=d,i))})}_findSourceIndex(e){let t=e;if(this.sourceRoot!=null&&(t=zn.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);for(let i=0;i<this._absoluteSources.length;++i)if(this._absoluteSources[i]==e)return i;return-1}static fromSourceMap(e,t){return new lM(e.toString())}get sources(){return this._absoluteSources.slice()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(this._mappings,this.sourceRoot),this._mappingsPtr}_parseMappings(e,t){const i=e.length,r=this._wasm.exports.allocate_mappings(i),s=new Uint8Array(this._wasm.exports.memory.buffer,r,i);for(let o=0;o<i;o++)s[o]=e.charCodeAt(o);const a=this._wasm.exports.parse_mappings(r);if(!a){const o=this._wasm.exports.get_last_error();let l=`Error parsing mappings (code ${o}): `;switch(o){case 1:l+="the mappings contained a negative line, column, source index, or name index";break;case 2:l+="the mappings contained a number larger than 2**32";break;case 3:l+="reached EOF while in the middle of parsing a VLQ";break;case 4:l+="invalid base 64 character while parsing a VLQ";break;default:l+="unknown error code";break}throw new Error(l)}this._mappingsPtr=a}eachMapping(e,t,i){const r=t||null,s=i||qa.GENERATED_ORDER,a=this.sourceRoot;this._wasm.withMappingCallback(o=>{o.source!==null&&(o.source=this._sources.at(o.source),o.source=zn.computeSourceURL(a,o.source,this._sourceMapURL),o.name!==null&&(o.name=this._names.at(o.name))),e.call(r,o)},()=>{switch(s){case qa.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case qa.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let t=zn.getArg(e,"source");const i=zn.getArg(e,"line"),r=e.column||0;if(t=this._findSourceIndex(t),t<0)return[];if(i<1)throw new Error("Line numbers must be >= 1");if(r<0)throw new Error("Column numbers must be >= 0");const s=[];return this._wasm.withMappingCallback(a=>{let o=a.lastGeneratedColumn;this._computedColumnSpans&&o===null&&(o=1/0),s.push({line:a.generatedLine,column:a.generatedColumn,lastColumn:o})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),t,i-1,"column"in e,r)}),s}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){const t={generatedLine:zn.getArg(e,"line"),generatedColumn:zn.getArg(e,"column")};if(t.generatedLine<1)throw new Error("Line numbers must be >= 1");if(t.generatedColumn<0)throw new Error("Column numbers must be >= 0");let i=zn.getArg(e,"bias",qa.GREATEST_LOWER_BOUND);i==null&&(i=qa.GREATEST_LOWER_BOUND);let r;if(this._wasm.withMappingCallback(s=>r=s,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),t.generatedLine-1,t.generatedColumn,i)}),r&&r.generatedLine===t.generatedLine){let s=zn.getArg(r,"source",null);s!==null&&(s=this._sources.at(s),s=zn.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));let a=zn.getArg(r,"name",null);return a!==null&&(a=this._names.at(a)),{source:s,line:zn.getArg(r,"originalLine",null),column:zn.getArg(r,"originalColumn",null),name:a}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1}sourceContentFor(e,t){if(!this.sourcesContent)return null;const i=this._findSourceIndex(e);if(i>=0)return this.sourcesContent[i];let r=e;this.sourceRoot!=null&&(r=zn.relative(this.sourceRoot,r));let s;if(this.sourceRoot!=null&&(s=zn.urlParse(this.sourceRoot))){const a=r.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!s.path||s.path=="/")&&this._sources.has("/"+r))return this.sourcesContent[this._sources.indexOf("/"+r)]}if(t)return null;throw new Error('"'+r+'" is not in the SourceMap.')}generatedPositionFor(e){let t=zn.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};const i={source:t,originalLine:zn.getArg(e,"line"),originalColumn:zn.getArg(e,"column")};if(i.originalLine<1)throw new Error("Line numbers must be >= 1");if(i.originalColumn<0)throw new Error("Column numbers must be >= 0");let r=zn.getArg(e,"bias",qa.GREATEST_LOWER_BOUND);r==null&&(r=qa.GREATEST_LOWER_BOUND);let s;if(this._wasm.withMappingCallback(a=>s=a,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),i.source,i.originalLine-1,i.originalColumn,r)}),s&&s.source===i.source){let a=s.lastGeneratedColumn;return this._computedColumnSpans&&a===null&&(a=1/0),{line:zn.getArg(s,"generatedLine",null),column:zn.getArg(s,"generatedColumn",null),lastColumn:a}}return{line:null,column:null,lastColumn:null}}}lM.prototype.consumer=qa;class TWe extends qa{constructor(e,t){return super(zH).then(i=>{let r=e;typeof e=="string"&&(r=zn.parseSourceMapInput(e));const s=zn.getArg(r,"version"),a=zn.getArg(r,"sections");if(s!=i._version)throw new Error("Unsupported version: "+s);i._sources=new PP,i._names=new PP,i.__generatedMappings=null,i.__originalMappings=null,i.__generatedMappingsUnsorted=null,i.__originalMappingsUnsorted=null;let o={line:-1,column:0};return Promise.all(a.map(l=>{if(l.url)throw new Error("Support for url field in sections not implemented.");const c=zn.getArg(l,"offset"),u=zn.getArg(c,"line"),h=zn.getArg(c,"column");if(u<o.line||u===o.line&&h<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,new qa(zn.getArg(l,"map"),t).then(f=>({generatedOffset:{generatedLine:u+1,generatedColumn:h+1},consumer:f}))})).then(l=>(i._sections=l,i))})}get _generatedMappings(){return this.__generatedMappings||this._sortGeneratedMappings(),this.__generatedMappings}get _originalMappings(){return this.__originalMappings||this._sortOriginalMappings(),this.__originalMappings}get _generatedMappingsUnsorted(){return this.__generatedMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappingsUnsorted}get _originalMappingsUnsorted(){return this.__originalMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappingsUnsorted}_sortGeneratedMappings(){const e=this._generatedMappingsUnsorted;e.sort(zn.compareByGeneratedPositionsDeflated),this.__generatedMappings=e}_sortOriginalMappings(){const e=this._originalMappingsUnsorted;e.sort(zn.compareByOriginalPositions),this.__originalMappings=e}get sources(){const e=[];for(let t=0;t<this._sections.length;t++)for(let i=0;i<this._sections[t].consumer.sources.length;i++)e.push(this._sections[t].consumer.sources[i]);return e}originalPositionFor(e){const t={generatedLine:zn.getArg(e,"line"),generatedColumn:zn.getArg(e,"column")},i=jF.search(t,this._sections,function(s,a){const o=s.generatedLine-a.generatedOffset.generatedLine;return o||s.generatedColumn-a.generatedOffset.generatedColumn}),r=this._sections[i];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,t){for(let i=0;i<this._sections.length;i++){const s=this._sections[i].consumer.sourceContentFor(e,!0);if(s)return s}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){for(let t=0;t<this._sections.length;t++){const i=this._sections[t];if(i.consumer._findSourceIndex(zn.getArg(e,"source"))===-1)continue;const r=i.consumer.generatedPositionFor(e);if(r)return{line:r.line+(i.generatedOffset.generatedLine-1),column:r.column+(i.generatedOffset.generatedLine===r.line?i.generatedOffset.generatedColumn-1:0)}}return{line:null,column:null}}_parseMappings(e,t){const i=this.__generatedMappingsUnsorted=[],r=this.__originalMappingsUnsorted=[];for(let s=0;s<this._sections.length;s++){const a=this._sections[s],o=[];a.consumer.eachMapping(l=>o.push(l));for(let l=0;l<o.length;l++){const c=o[l];let u=zn.computeSourceURL(a.consumer.sourceRoot,null,this._sourceMapURL);this._sources.add(u),u=this._sources.indexOf(u);let h=null;c.name&&(this._names.add(c.name),h=this._names.indexOf(c.name));const d={source:u,generatedLine:c.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(a.generatedOffset.generatedLine===c.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:h};i.push(d),typeof d.originalLine=="number"&&r.push(d)}}}eachMapping(e,t,i){const r=t||null,s=i||qa.GENERATED_ORDER;let a;switch(s){case qa.GENERATED_ORDER:a=this._generatedMappings;break;case qa.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}const o=this.sourceRoot;a.map(function(l){let c=null;return l.source!==null&&(c=this._sources.at(l.source),c=zn.computeSourceURL(o,c,this._sourceMapURL)),{source:c,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,r)}_findMapping(e,t,i,r,s,a){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return jF.search(e,t,s,a)}allGeneratedPositionsFor(e){const t=zn.getArg(e,"line"),i={source:zn.getArg(e,"source"),originalLine:t,originalColumn:zn.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];if(i.originalLine<1)throw new Error("Line numbers must be >= 1");if(i.originalColumn<0)throw new Error("Column numbers must be >= 0");const r=[];let s=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",zn.compareByOriginalPositions,jF.LEAST_UPPER_BOUND);if(s>=0){let a=this._originalMappings[s];if(e.column===void 0){const o=a.originalLine;for(;a&&a.originalLine===o;){let l=a.lastGeneratedColumn;this._computedColumnSpans&&l===null&&(l=1/0),r.push({line:zn.getArg(a,"generatedLine",null),column:zn.getArg(a,"generatedColumn",null),lastColumn:l}),a=this._originalMappings[++s]}}else{const o=a.originalColumn;for(;a&&a.originalLine===t&&a.originalColumn==o;){let l=a.lastGeneratedColumn;this._computedColumnSpans&&l===null&&(l=1/0),r.push({line:zn.getArg(a,"generatedLine",null),column:zn.getArg(a,"generatedColumn",null),lastColumn:l}),a=this._originalMappings[++s]}}}return r}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}}function xWe(n,e){let t=n;typeof n=="string"&&(t=zn.parseSourceMapInput(n));const i=t.sections!=null?new TWe(t,e):new lM(t,e);return Promise.resolve(i)}function wWe(n,e){return lM.fromSourceMap(n,e)}var ile={};const CWe=qoe.SourceMapGenerator,cO=oM,AWe=/(\r?\n)/,MWe=10,oE="$$$isSourceNode$$$";let RWe=class I5{constructor(e,t,i,r,s){this.children=[],this.sourceContents={},this.line=e??null,this.column=t??null,this.source=i??null,this.name=s??null,this[oE]=!0,r!=null&&this.add(r)}static fromStringWithSourceMap(e,t,i){const r=new I5,s=e.split(AWe);let a=0;const o=function(){const f=v(),m=v()||"";return f+m;function v(){return a<s.length?s[a++]:void 0}};let l=1,c=0,u=null,h;return t.eachMapping(function(f){if(u!==null)if(l<f.generatedLine)d(u,o()),l++,c=0;else{h=s[a]||"";const m=h.substr(0,f.generatedColumn-c);s[a]=h.substr(f.generatedColumn-c),c=f.generatedColumn,d(u,m),u=f;return}for(;l<f.generatedLine;)r.add(o()),l++;c<f.generatedColumn&&(h=s[a]||"",r.add(h.substr(0,f.generatedColumn)),s[a]=h.substr(f.generatedColumn),c=f.generatedColumn),u=f},this),a<s.length&&(u&&d(u,o()),r.add(s.splice(a).join(""))),t.sources.forEach(function(f){const m=t.sourceContentFor(f);m!=null&&(i!=null&&(f=cO.join(i,f)),r.setSourceContent(f,m))}),r;function d(f,m){if(f===null||f.source===void 0)r.add(m);else{const v=i?cO.join(i,f.source):f.source;r.add(new I5(f.originalLine,f.originalColumn,v,m,f.name))}}}add(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[oE]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[oE]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let t;for(let i=0,r=this.children.length;i<r;i++)t=this.children[i],t[oE]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,i;const r=this.children.length;if(r>0){for(t=[],i=0;i<r-1;i++)t.push(this.children[i]),t.push(e);t.push(this.children[i]),this.children=t}return this}replaceRight(e,t){const i=this.children[this.children.length-1];return i[oE]?i.replaceRight(e,t):typeof i=="string"?this.children[this.children.length-1]=i.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[cO.toSetString(e)]=t}walkSourceContents(e){for(let i=0,r=this.children.length;i<r;i++)this.children[i][oE]&&this.children[i].walkSourceContents(e);const t=Object.keys(this.sourceContents);for(let i=0,r=t.length;i<r;i++)e(cO.fromSetString(t[i]),this.sourceContents[t[i]])}toString(){let e="";return this.walk(function(t){e+=t}),e}toStringWithSourceMap(e){const t={code:"",line:1,column:0},i=new CWe(e);let r=!1,s=null,a=null,o=null,l=null;return this.walk(function(c,u){t.code+=c,u.source!==null&&u.line!==null&&u.column!==null?((s!==u.source||a!==u.line||o!==u.column||l!==u.name)&&i.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name}),s=u.source,a=u.line,o=u.column,l=u.name,r=!0):r&&(i.addMapping({generated:{line:t.line,column:t.column}}),s=null,r=!1);for(let h=0,d=c.length;h<d;h++)c.charCodeAt(h)===MWe?(t.line++,t.column=0,h+1===d?(s=null,r=!1):r&&i.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name})):t.column++}),this.walkSourceContents(function(c,u){i.setSourceContent(c,u)}),{code:t.code,map:i}}};ile.SourceNode=RWe;var mat=ile.SourceNode;const qY=n=>{let e;const t=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,o);return o},OWe=n=>n?qY(n):qY,IWe=n=>n;function NWe(n,e=IWe){const t=TT.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return TT.useDebugValue(t),t}const $Y=n=>{const e=OWe(n),t=i=>NWe(e,i);return Object.assign(t,e),t},gat=n=>n?$Y(n):$Y,rle={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(rle);var Xh=function(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)},yE,sw,O_;class PWe{constructor(...e){yE.set(this,new Map),sw.set(this,new Map),O_.set(this,new Map);for(const t of e)this.define(t)}define(e,t=!1){for(let[i,r]of Object.entries(e)){i=i.toLowerCase(),r=r.map(o=>o.toLowerCase()),Xh(this,O_,"f").has(i)||Xh(this,O_,"f").set(i,new Set);const s=Xh(this,O_,"f").get(i);let a=!0;for(let o of r){const l=o.startsWith("*");if(o=l?o.slice(1):o,s==null||s.add(o),a&&Xh(this,sw,"f").set(i,o),a=!1,l)continue;const c=Xh(this,yE,"f").get(o);if(c&&c!=i&&!t)throw new Error(`"${i} -> ${o}" conflicts with "${c} -> ${o}". Pass \`force=true\` to override this definition.`);Xh(this,yE,"f").set(o,i)}}return this}getType(e){if(typeof e!="string")return null;const t=e.replace(/^.*[/\\]/,"").toLowerCase(),i=t.replace(/^.*\./,"").toLowerCase(),r=t.length<e.length;return!(i.length<t.length-1)&&r?null:Xh(this,yE,"f").get(i)??null}getExtension(e){var t;return typeof e!="string"?null:(e=(t=e==null?void 0:e.split)==null?void 0:t.call(e,";")[0],(e&&Xh(this,sw,"f").get(e.trim().toLowerCase()))??null)}getAllExtensions(e){return typeof e!="string"?null:Xh(this,O_,"f").get(e.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(const e of Xh(this,O_,"f").values())Object.freeze(e);return this}_getTestState(){return{types:Xh(this,yE,"f"),extensions:Xh(this,sw,"f")}}}yE=new WeakMap,sw=new WeakMap,O_=new WeakMap;new PWe(rle)._freeze();const sle="15.1.22",WY=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),YY=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),N5=(n,e)=>({startTime:e,type:"setValue",value:n}),ale=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),ole=(n,e,{startTime:t,target:i,timeConstant:r})=>i+(e-i)*Math.exp((t-n)/r),zE=n=>n.type==="exponentialRampToValue",DP=n=>n.type==="linearRampToValue",iy=n=>zE(n)||DP(n),jH=n=>n.type==="setValue",lg=n=>n.type==="setValueCurve",kP=(n,e,t,i)=>{const r=n[e];return r===void 0?i:iy(r)||jH(r)?r.value:lg(r)?r.values[r.values.length-1]:ole(t,kP(n,e-1,r.startTime,i),r)},XY=(n,e,t,i,r)=>t===void 0?[i.insertTime,r]:iy(t)?[t.endTime,t.value]:jH(t)?[t.startTime,t.value]:lg(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,kP(n,e-1,t.startTime,r)],P5=n=>n.type==="cancelAndHold",D5=n=>n.type==="cancelScheduledValues",Gv=n=>P5(n)||D5(n)?n.cancelTime:zE(n)||DP(n)?n.endTime:n.startTime,KY=(n,e,t,{endTime:i,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(i-e)):0,ZY=(n,e,t,{endTime:i,value:r})=>t+(n-e)/(i-e)*(r-t),DWe=(n,e)=>{const t=Math.floor(e),i=Math.ceil(e);return t===i?n[t]:(1-(e-t))*n[t]+(1-(i-e))*n[i]},kWe=(n,{duration:e,startTime:t,values:i})=>{const r=(n-t)/e*(i.length-1);return DWe(i,r)},uO=n=>n.type==="setTarget";class LWe{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=Gv(e);if(P5(e)||D5(e)){const i=this._automationEvents.findIndex(s=>D5(e)&&lg(s)?s.startTime+s.duration>=t:Gv(s)>=t),r=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),P5(e)){const s=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&iy(r)){if(s!==void 0&&uO(s))throw new Error("The internal list is malformed.");const a=s===void 0?r.insertTime:lg(s)?s.startTime+s.duration:Gv(s),o=s===void 0?this._defaultValue:lg(s)?s.values[s.values.length-1]:s.value,l=zE(r)?KY(t,a,o,r):ZY(t,a,o,r),c=zE(r)?WY(l,t,this._currenTime):YY(l,t,this._currenTime);this._automationEvents.push(c)}if(s!==void 0&&uO(s)&&this._automationEvents.push(N5(this.getValue(t),t)),s!==void 0&&lg(s)&&s.startTime+s.duration>t){const a=t-s.startTime,o=(s.values.length-1)/s.duration,l=Math.max(2,1+Math.ceil(a*o)),c=a/(l-1)*o,u=s.values.slice(0,l);if(c<1)for(let h=1;h<l;h+=1){const d=c*h%1;u[h]=s.values[h-1]*(1-d)+s.values[h]*d}this._automationEvents[this._automationEvents.length-1]=ale(u,s.startTime,a)}}}else{const i=this._automationEvents.findIndex(a=>Gv(a)>t),r=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(r!==void 0&&lg(r)&&Gv(r)+r.duration>t)return!1;const s=zE(e)?WY(e.value,e.endTime,this._currenTime):DP(e)?YY(e.value,t,this._currenTime):e;if(i===-1)this._automationEvents.push(s);else{if(lg(e)&&t+e.duration>Gv(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,s)}}return!0}flush(e){const t=this._automationEvents.findIndex(i=>Gv(i)>e);if(t>1){const i=this._automationEvents.slice(t-1),r=i[0];uO(r)&&i.unshift(N5(kP(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=i}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(a=>Gv(a)>e),i=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,s=this._automationEvents[r];if(s!==void 0&&uO(s)&&(i===void 0||!iy(i)||i.insertTime>e))return ole(e,kP(this._automationEvents,r-1,s.startTime,this._defaultValue),s);if(s!==void 0&&jH(s)&&(i===void 0||!iy(i)))return s.value;if(s!==void 0&&lg(s)&&(i===void 0||!iy(i)||s.startTime+s.duration>e))return e<s.startTime+s.duration?kWe(e,s):s.values[s.values.length-1];if(s!==void 0&&iy(s)&&(i===void 0||!iy(i)))return s.value;if(i!==void 0&&zE(i)){const[a,o]=XY(this._automationEvents,r,s,i,this._defaultValue);return KY(e,a,o,i)}if(i!==void 0&&DP(i)){const[a,o]=XY(this._automationEvents,r,s,i,this._defaultValue);return ZY(e,a,o,i)}return this._defaultValue}}const UWe=n=>({cancelTime:n,type:"cancelAndHold"}),BWe=n=>({cancelTime:n,type:"cancelScheduledValues"}),FWe=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),zWe=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),jWe=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),HWe=()=>new DOMException("","AbortError"),VWe=n=>(e,t,[i,r,s],a)=>{n(e[r],[t,i,s],o=>o[0]===t&&o[1]===i,a)},GWe=n=>(e,t,i)=>{const r=[];for(let s=0;s<i.numberOfInputs;s+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},qWe=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},sx=new WeakSet,lle=new WeakMap,HH=new WeakMap,cle=new WeakMap,VH=new WeakMap,SU=new WeakMap,ule=new WeakMap,k5=new WeakMap,L5=new WeakMap,U5=new WeakMap,hle={construct(){return hle}},$We=n=>{try{const e=new Proxy(n,hle);new e}catch{return!1}return!0},JY=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,QY=(n,e)=>{const t=[];let i=n.replace(/^[\s]+/,""),r=i.match(JY);for(;r!==null;){const s=r[1].slice(1,-1),a=r[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());t.push(a),i=i.slice(r[0].length).replace(/^[\s]+/,""),r=i.match(JY)}return[t.join(";"),i]},eX=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},tX=n=>{if(!$We(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},WWe=(n,e,t,i,r,s,a,o,l,c,u,h,d)=>{let f=0;return(m,v,_={credentials:"omit"})=>{const y=u.get(m);if(y!==void 0&&y.has(v))return Promise.resolve();const S=c.get(m);if(S!==void 0){const I=S.get(v);if(I!==void 0)return I}const T=s(m),x=T.audioWorklet===void 0?r(v).then(([I,R])=>{const[N,L]=QY(I,R),k=`${N};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${L}
})})(window,'_AWGS')`;return t(k)}).then(()=>{const I=d._AWGS.pop();if(I===void 0)throw new SyntaxError;i(T.currentTime,T.sampleRate,()=>I(class{},void 0,(R,N)=>{if(R.trim()==="")throw e();const L=L5.get(T);if(L!==void 0){if(L.has(R))throw e();tX(N),eX(N.parameterDescriptors),L.set(R,N)}else tX(N),eX(N.parameterDescriptors),L5.set(T,new Map([[R,N]]))},T.sampleRate,void 0,void 0))}):Promise.all([r(v),Promise.resolve(n(h,h))]).then(([[I,R],N])=>{const L=f+1;f=L;const[k,z]=QY(I,R),U=`${k};((AudioWorkletProcessor,registerProcessor)=>{${z}
})(${N?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${N?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${N?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${L}',class extends AudioWorkletProcessor{process(){return !1}})`,ee=new Blob([U],{type:"application/javascript; charset=utf-8"}),W=URL.createObjectURL(ee);return T.audioWorklet.addModule(W,_).then(()=>{if(o(T))return T;const Q=a(T);return Q.audioWorklet.addModule(W,_).then(()=>Q)}).then(Q=>{if(l===null)throw new SyntaxError;try{new l(Q,`__sac${L}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(W))});return S===void 0?c.set(m,new Map([[v,x]])):S.set(v,x),x.then(()=>{const I=u.get(m);I===void 0?u.set(m,new Set([v])):I.add(v)}).finally(()=>{const I=c.get(m);I!==void 0&&I.delete(v)}),x}},mf=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},EU=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[i]=t;return n.delete(i),i},dle=(n,e,t,i)=>{const r=mf(n,e),s=EU(r,a=>a[0]===t&&a[1]===i);return r.size===0&&n.delete(e),s},cM=n=>mf(ule,n),ax=n=>{if(sx.has(n))throw new Error("The AudioNode is already stored.");sx.add(n),cM(n).forEach(e=>e(!0))},fle=n=>"port"in n,uM=n=>{if(!sx.has(n))throw new Error("The AudioNode is not stored.");sx.delete(n),cM(n).forEach(e=>e(!1))},B5=(n,e)=>{!fle(n)&&e.every(t=>t.size===0)&&uM(n)},YWe=(n,e,t,i,r,s,a,o,l,c,u,h,d)=>{const f=new WeakMap;return(m,v,_,y,S)=>{const{activeInputs:T,passiveInputs:x}=s(v),{outputs:I}=s(m),R=o(m),N=L=>{const k=l(v),z=l(m);if(L){const Z=dle(x,m,_,y);n(T,m,Z,!1),!S&&!h(m)&&t(z,k,_,y),d(v)&&ax(v)}else{const Z=i(T,m,_,y);e(x,y,Z,!1),!S&&!h(m)&&r(z,k,_,y);const H=a(v);if(H===0)u(v)&&B5(v,T);else{const q=f.get(v);q!==void 0&&clearTimeout(q),f.set(v,setTimeout(()=>{u(v)&&B5(v,T)},H*1e3))}}};return c(I,[v,_,y],L=>L[0]===v&&L[1]===_&&L[2]===y,!0)?(R.add(N),u(m)?n(T,m,[_,y,N],!0):e(x,y,[m,_,N],!0),!0):!1}},XWe=n=>(e,t,[i,r,s],a)=>{const o=e.get(i);o===void 0?e.set(i,new Set([[r,t,s]])):n(o,[r,t,s],l=>l[0]===r&&l[1]===t,a)},KWe=n=>(e,t)=>{const i=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(i).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(i),i.disconnect()};t.addEventListener("ended",r)},ZWe=n=>(e,t)=>{n(e).add(t)},JWe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},QWe=(n,e,t,i,r,s)=>class extends n{constructor(o,l){const c=r(o),u={...JWe,...l},h=i(c,u),d=s(c)?e():null;super(o,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=l,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},cc=(n,e)=>n.context===e,eYe=(n,e,t)=>()=>{const i=new WeakMap,r=async(s,a)=>{let o=e(s);if(!cc(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=n(a,c)}return i.set(a,o),await t(s,a,o),o};return{render(s,a){const o=i.get(a);return o!==void 0?Promise.resolve(o):r(s,a)}}},LP=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Jp=()=>new DOMException("","IndexSizeError"),GH=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(i){throw i.code===12?Jp():i}})(n.getChannelData)},tYe={numberOfChannels:1},nYe=(n,e,t,i,r,s,a,o)=>{let l=null;return class ple{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...tYe,...u};l===null&&(l=new r(1,1,44100));const m=i!==null&&e(s,s)?new i({length:h,numberOfChannels:d,sampleRate:f}):l.createBuffer(d,h,f);if(m.numberOfChannels===0)throw t();return typeof m.copyFromChannel!="function"?(a(m),GH(m)):e(LP,()=>LP(m))||o(m),n.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===ple.prototype||n.has(u)}}},Su=-34028234663852886e22,Lc=-Su,Og=n=>sx.has(n),iYe={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},rYe=(n,e,t,i,r,s,a,o)=>class extends n{constructor(c,u){const h=s(c),d={...iYe,...u},f=r(h,d),m=a(h),v=m?e():null;super(c,!1,f,v),this._audioBufferSourceNodeRenderer=v,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,m,f.playbackRate,Lc,Su)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?c:h}get playbackRate(){return this._playbackRate}start(c=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(c,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[c,u]:[c,u,h]),this.context.state!=="closed"){ax(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Og(this)&&uM(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},sYe=(n,e,t,i,r)=>()=>{const s=new WeakMap;let a=null,o=null;const l=async(c,u)=>{let h=t(c);const d=cc(h,u);if(!d){const f={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,f),a!==null&&h.start(...a),o!==null&&h.stop(o)}return s.set(u,h),d?await n(u,c.playbackRate,h.playbackRate):await i(u,c.playbackRate,h.playbackRate),await r(c,u,h),h};return{set start(c){a=c},set stop(c){o=c},render(c,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):l(c,u)}}},aYe=n=>"playbackRate"in n,oYe=n=>"frequency"in n&&"gain"in n,lYe=n=>"offset"in n,cYe=n=>!("frequency"in n)&&"gain"in n,uYe=n=>"detune"in n&&"frequency"in n&&!("gain"in n),hYe=n=>"pan"in n,zc=n=>mf(lle,n),hM=n=>mf(cle,n),F5=(n,e)=>{const{activeInputs:t}=zc(n);t.forEach(r=>r.forEach(([s])=>{e.includes(n)||F5(s,[...e,n])}));const i=aYe(n)?[n.playbackRate]:fle(n)?Array.from(n.parameters.values()):oYe(n)?[n.Q,n.detune,n.frequency,n.gain]:lYe(n)?[n.offset]:cYe(n)?[n.gain]:uYe(n)?[n.detune,n.frequency]:hYe(n)?[n.pan]:[];for(const r of i){const s=hM(r);s!==void 0&&s.activeInputs.forEach(([a])=>F5(a,e))}Og(n)&&uM(n)},mle=n=>{F5(n.destination,[])},dYe=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),fYe=(n,e,t,i,r,s,a,o,l)=>class extends n{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new l(u)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?t():m}if(h===null)throw i();if(!dYe(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:d}=u,{sampleRate:f}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/f:d==="interactive"||d===void 0?256/f:d==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(d*f/128)))*128/f,this._nativeAudioContext=h,l.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",m)};h.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),mle(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new a(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new o(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},pYe=(n,e,t,i,r,s,a,o)=>class extends n{constructor(c,u){const h=s(c),d=a(h),f=r(h,u,d),m=d?e(o):null;super(c,!1,f,m),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},mYe=n=>{const e=new WeakMap,t=async(i,r)=>{const s=r.destination;return e.set(r,s),await n(i,r,s),s};return{render(i,r){const s=e.get(r);return s!==void 0?Promise.resolve(s):t(i,r)}}},gYe=(n,e,t,i,r,s,a,o)=>(l,c)=>{const u=c.listener,h=()=>{const I=new Float32Array(1),R=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),N=a(c);let L=!1,k=[0,0,-1,0,1,0],z=[0,0,0];const Z=()=>{if(L)return;L=!0;const ee=i(c,256,9,0);ee.onaudioprocess=({inputBuffer:W})=>{const Q=[s(W,I,0),s(W,I,1),s(W,I,2),s(W,I,3),s(W,I,4),s(W,I,5)];Q.some((Y,ae)=>Y!==k[ae])&&(u.setOrientation(...Q),k=Q);const X=[s(W,I,6),s(W,I,7),s(W,I,8)];X.some((Y,ae)=>Y!==z[ae])&&(u.setPosition(...X),z=X)},R.connect(ee)},H=ee=>W=>{W!==k[ee]&&(k[ee]=W,u.setOrientation(...k))},q=ee=>W=>{W!==z[ee]&&(z[ee]=W,u.setPosition(...z))},U=(ee,W,Q)=>{const X=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W});X.connect(R,0,ee),X.start(),Object.defineProperty(X.offset,"defaultValue",{get(){return W}});const Y=n({context:l},N,X.offset,Lc,Su);return o(Y,"value",ae=>()=>ae.call(Y),ae=>se=>{try{ae.call(Y,se)}catch(ue){if(ue.code!==9)throw ue}Z(),N&&Q(se)}),Y.cancelAndHoldAtTime=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.cancelAndHoldAtTime),Y.cancelScheduledValues=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.cancelScheduledValues),Y.exponentialRampToValueAtTime=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.exponentialRampToValueAtTime),Y.linearRampToValueAtTime=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.linearRampToValueAtTime),Y.setTargetAtTime=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.setTargetAtTime),Y.setValueAtTime=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.setValueAtTime),Y.setValueCurveAtTime=(ae=>N?()=>{throw r()}:(...se)=>{const ue=ae.apply(Y,se);return Z(),ue})(Y.setValueCurveAtTime),Y};return{forwardX:U(0,0,H(0)),forwardY:U(1,0,H(1)),forwardZ:U(2,-1,H(2)),positionX:U(6,0,q(0)),positionY:U(7,0,q(1)),positionZ:U(8,0,q(2)),upX:U(3,0,H(3)),upY:U(4,1,H(4)),upZ:U(5,0,H(5))}},{forwardX:d,forwardY:f,forwardZ:m,positionX:v,positionY:_,positionZ:y,upX:S,upY:T,upZ:x}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return m},get positionX(){return v},get positionY(){return _},get positionZ(){return y},get upX(){return S},get upY(){return T},get upZ(){return x}}},UP=n=>"context"in n,dM=n=>UP(n[0]),Jb=(n,e,t,i)=>{for(const r of n)if(t(r)){if(i)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},nX=(n,e,[t,i],r)=>{Jb(n,[e,t,i],s=>s[0]===e&&s[1]===t,r)},iX=(n,[e,t,i],r)=>{const s=n.get(e);s===void 0?n.set(e,new Set([[t,i]])):Jb(s,[t,i],a=>a[0]===t,r)},Vx=n=>"inputs"in n,BP=(n,e,t,i)=>{if(Vx(e)){const r=e.inputs[i];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,i),[e,t,i]},gle=(n,e,t)=>{for(const i of n)if(i[0]===e&&i[1]===t)return n.delete(i),i;return null},vYe=(n,e,t)=>EU(n,i=>i[0]===e&&i[1]===t),vle=(n,e)=>{if(!cM(n).delete(e))throw new Error("Missing the expected event listener.")},yle=(n,e,t)=>{const i=mf(n,e),r=EU(i,s=>s[0]===t);return i.size===0&&n.delete(e),r},FP=(n,e,t,i)=>{Vx(e)?n.disconnect(e.inputs[i],t,0):n.disconnect(e,t,i)},Bs=n=>mf(HH,n),qC=n=>mf(VH,n),Mb=n=>k5.has(n),uI=n=>!sx.has(n),rX=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const i=n.createScriptProcessor(256,1,1),r=n.createGain(),s=n.createBuffer(1,2,44100),a=s.getChannelData(0);a[0]=1,a[1]=1;const o=n.createBufferSource();o.buffer=s,o.loop=!0,o.connect(i).connect(n.destination),o.connect(r),o.disconnect(r),i.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?t(!0):t(!1),o.stop(),i.onaudioprocess=null,o.disconnect(i),i.disconnect(n.destination)},o.start()}}),HF=(n,e)=>{const t=new Map;for(const i of n)for(const r of i){const s=t.get(r);t.set(r,s===void 0?1:s+1)}t.forEach((i,r)=>e(r,i))},zP=n=>"context"in n,yYe=n=>{const e=new Map;n.connect=(t=>(i,r=0,s=0)=>{const a=zP(i)?t(i,r,s):t(i,r),o=e.get(i);return o===void 0?e.set(i,[{input:s,output:r}]):o.every(l=>l.input!==s||l.output!==r)&&o.push({input:s,output:r}),a})(n.connect.bind(n)),n.disconnect=(t=>(i,r,s)=>{if(t.apply(n),i===void 0)e.clear();else if(typeof i=="number")for(const[a,o]of e){const l=o.filter(c=>c.output!==i);l.length===0?e.delete(a):e.set(a,l)}else if(e.has(i))if(r===void 0)e.delete(i);else{const a=e.get(i);if(a!==void 0){const o=a.filter(l=>l.output!==r&&(l.input!==s||s===void 0));o.length===0?e.delete(i):e.set(i,o)}}for(const[a,o]of e)o.forEach(l=>{zP(a)?n.connect(a,l.output,l.input):n.connect(a,l.output)})})(n.disconnect)},_Ye=(n,e,t,i)=>{const{activeInputs:r,passiveInputs:s}=hM(e),{outputs:a}=zc(n),o=cM(n),l=c=>{const u=Bs(n),h=qC(e);if(c){const d=yle(s,n,t);nX(r,n,d,!1),!i&&!Mb(n)&&u.connect(h,t)}else{const d=vYe(r,n,t);iX(s,d,!1),!i&&!Mb(n)&&u.disconnect(h,t)}};return Jb(a,[e,t],c=>c[0]===e&&c[1]===t,!0)?(o.add(l),Og(n)?nX(r,n,[t,l],!0):iX(s,[n,t,l],!0),!0):!1},bYe=(n,e,t,i)=>{const{activeInputs:r,passiveInputs:s}=zc(e),a=gle(r[i],n,t);return a===null?[dle(s,n,t,i)[2],!1]:[a[2],!0]},SYe=(n,e,t)=>{const{activeInputs:i,passiveInputs:r}=hM(e),s=gle(i,n,t);return s===null?[yle(r,n,t)[1],!1]:[s[2],!0]},qH=(n,e,t,i,r)=>{const[s,a]=bYe(n,t,i,r);if(s!==null&&(vle(n,s),a&&!e&&!Mb(n)&&FP(Bs(n),Bs(t),i,r)),Og(t)){const{activeInputs:o}=zc(t);B5(t,o)}},$H=(n,e,t,i)=>{const[r,s]=SYe(n,t,i);r!==null&&(vle(n,r),s&&!e&&!Mb(n)&&Bs(n).disconnect(qC(t),i))},EYe=(n,e)=>{const t=zc(n),i=[];for(const r of t.outputs)dM(r)?qH(n,e,...r):$H(n,e,...r),i.push(r[0]);return t.outputs.clear(),i},TYe=(n,e,t)=>{const i=zc(n),r=[];for(const s of i.outputs)s[1]===t&&(dM(s)?qH(n,e,...s):$H(n,e,...s),r.push(s[0]),i.outputs.delete(s));return r},xYe=(n,e,t,i,r)=>{const s=zc(n);return Array.from(s.outputs).filter(a=>a[0]===t&&(i===void 0||a[1]===i)&&(r===void 0||a[2]===r)).map(a=>(dM(a)?qH(n,e,...a):$H(n,e,...a),s.outputs.delete(a),a[0]))},wYe=(n,e,t,i,r,s,a,o,l,c,u,h,d,f,m,v)=>class extends c{constructor(y,S,T,x){super(T),this._context=y,this._nativeAudioNode=T;const I=u(y);h(I)&&t(rX,()=>rX(I,v))!==!0&&yYe(T),HH.set(this,T),ule.set(this,new Set),y.state!=="closed"&&S&&ax(this),n(this,x,T)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,S=0,T=0){if(S<0||S>=this._nativeAudioNode.numberOfOutputs)throw r();const x=u(this._context),I=m(x);if(d(y)||f(y))throw s();if(UP(y)){const L=Bs(y);try{const z=BP(this._nativeAudioNode,L,S,T),Z=uI(this);(I||Z)&&this._nativeAudioNode.disconnect(...z),this.context.state!=="closed"&&!Z&&uI(y)&&ax(y)}catch(z){throw z.code===12?s():z}if(e(this,y,S,T,I)){const z=l([this],y);HF(z,i(I))}return y}const R=qC(y);if(R.name==="playbackRate"&&R.maxValue===1024)throw a();try{this._nativeAudioNode.connect(R,S),(I||uI(this))&&this._nativeAudioNode.disconnect(R,S)}catch(L){throw L.code===12?s():L}if(_Ye(this,y,S,I)){const L=l([this],y);HF(L,i(I))}}disconnect(y,S,T){let x;const I=u(this._context),R=m(I);if(y===void 0)x=EYe(this,R);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw r();x=TYe(this,R,y)}else{if(S!==void 0&&(S<0||S>=this.numberOfOutputs)||UP(y)&&T!==void 0&&(T<0||T>=y.numberOfInputs))throw r();if(x=xYe(this,R,y,S,T),x.length===0)throw s()}for(const N of x){const L=l([this],N);HF(L,o)}}},CYe=(n,e,t,i,r,s,a,o,l,c,u,h,d)=>(f,m,v,_=null,y=null)=>{const S=v.value,T=new LWe(S),x=m?i(T):null,I={get defaultValue(){return S},get maxValue(){return _===null?v.maxValue:_},get minValue(){return y===null?v.minValue:y},get value(){return v.value},set value(R){v.value=R,I.setValueAtTime(R,f.context.currentTime)},cancelAndHoldAtTime(R){if(typeof v.cancelAndHoldAtTime=="function")x===null&&T.flush(f.context.currentTime),T.add(r(R)),v.cancelAndHoldAtTime(R);else{const N=Array.from(T).pop();x===null&&T.flush(f.context.currentTime),T.add(r(R));const L=Array.from(T).pop();v.cancelScheduledValues(R),N!==L&&L!==void 0&&(L.type==="exponentialRampToValue"?v.exponentialRampToValueAtTime(L.value,L.endTime):L.type==="linearRampToValue"?v.linearRampToValueAtTime(L.value,L.endTime):L.type==="setValue"?v.setValueAtTime(L.value,L.startTime):L.type==="setValueCurve"&&v.setValueCurveAtTime(L.values,L.startTime,L.duration))}return I},cancelScheduledValues(R){return x===null&&T.flush(f.context.currentTime),T.add(s(R)),v.cancelScheduledValues(R),I},exponentialRampToValueAtTime(R,N){if(R===0)throw new RangeError;if(!Number.isFinite(N)||N<0)throw new RangeError;const L=f.context.currentTime;return x===null&&T.flush(L),Array.from(T).length===0&&(T.add(c(S,L)),v.setValueAtTime(S,L)),T.add(a(R,N)),v.exponentialRampToValueAtTime(R,N),I},linearRampToValueAtTime(R,N){const L=f.context.currentTime;return x===null&&T.flush(L),Array.from(T).length===0&&(T.add(c(S,L)),v.setValueAtTime(S,L)),T.add(o(R,N)),v.linearRampToValueAtTime(R,N),I},setTargetAtTime(R,N,L){return x===null&&T.flush(f.context.currentTime),T.add(l(R,N,L)),v.setTargetAtTime(R,N,L),I},setValueAtTime(R,N){return x===null&&T.flush(f.context.currentTime),T.add(c(R,N)),v.setValueAtTime(R,N),I},setValueCurveAtTime(R,N,L){const k=R instanceof Float32Array?R:new Float32Array(R);if(h!==null&&h.name==="webkitAudioContext"){const z=N+L,Z=f.context.sampleRate,H=Math.ceil(N*Z),q=Math.floor(z*Z),U=q-H,ee=new Float32Array(U);for(let Q=0;Q<U;Q+=1){const X=(k.length-1)/L*((H+Q)/Z-N),Y=Math.floor(X),ae=Math.ceil(X);ee[Q]=Y===ae?k[Y]:(1-(X-Y))*k[Y]+(1-(ae-X))*k[ae]}x===null&&T.flush(f.context.currentTime),T.add(u(ee,N,L)),v.setValueCurveAtTime(ee,N,L);const W=q/Z;W<z&&d(I,ee[ee.length-1],W),d(I,k[k.length-1],z)}else x===null&&T.flush(f.context.currentTime),T.add(u(k,N,L)),v.setValueCurveAtTime(k,N,L);return I}};return t.set(I,v),e.set(I,f),n(I,x),I},AYe=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:i,value:r}=t;e.exponentialRampToValueAtTime(r,i)}else if(t.type==="linearRampToValue"){const{endTime:i,value:r}=t;e.linearRampToValueAtTime(r,i)}else if(t.type==="setTarget"){const{startTime:i,target:r,timeConstant:s}=t;e.setTargetAtTime(r,i,s)}else if(t.type==="setValue"){const{startTime:i,value:r}=t;e.setValueAtTime(r,i)}else if(t.type==="setValueCurve"){const{duration:i,startTime:r,values:s}=t;e.setValueCurveAtTime(s,r,i)}else throw new Error("Can't apply an unknown automation.")}});class _le{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((i,r)=>e.call(t,i,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const MYe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},RYe=(n,e,t,i,r,s,a,o,l,c,u,h,d,f)=>class extends e{constructor(v,_,y){var S;const T=o(v),x=l(T),I=u({...MYe,...y});d(I);const R=L5.get(T),N=R==null?void 0:R.get(_),L=x||T.state!=="closed"?T:(S=a(T))!==null&&S!==void 0?S:T,k=r(L,x?null:v.baseLatency,c,_,N,I),z=x?i(_,I,N):null;super(v,!0,k,z);const Z=[];k.parameters.forEach((q,U)=>{const ee=t(this,x,q);Z.push([U,ee])}),this._nativeAudioWorkletNode=k,this._onprocessorerror=null,this._parameters=new _le(Z),x&&n(T,this);const{activeInputs:H}=s(this);h(k,H)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(v){const _=typeof v=="function"?f(this,v):null;this._nativeAudioWorkletNode.onprocessorerror=_;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===_?v:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function jP(n,e,t,i,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],i,r);else{const s=n.getChannelData(i);if(e[t].byteLength===0)e[t]=s.slice(r,r+128);else{const a=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(a)}}}const ble=(n,e,t,i,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],i,r):e[t].byteLength!==0&&n.getChannelData(i).set(e[t],r)},HP=(n,e)=>{const t=[];for(let i=0;i<n;i+=1){const r=[],s=typeof e=="number"?e:e[i];for(let a=0;a<s;a+=1)r.push(new Float32Array(128));t.push(r)}return t},OYe=(n,e)=>{const t=mf(U5,n),i=Bs(e);return mf(t,i)},IYe=async(n,e,t,i,r,s,a)=>{const o=e===null?Math.ceil(n.context.length/128)*128:e.length,l=i.channelCount*i.numberOfInputs,c=r.reduce((_,y)=>_+y,0),u=c===0?null:t.createBuffer(c,o,t.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const h=zc(n),d=await OYe(t,n),f=HP(i.numberOfInputs,i.channelCount),m=HP(i.numberOfOutputs,r),v=Array.from(n.parameters.keys()).reduce((_,y)=>({..._,[y]:new Float32Array(128)}),{});for(let _=0;_<o;_+=128){if(i.numberOfInputs>0&&e!==null)for(let y=0;y<i.numberOfInputs;y+=1)for(let S=0;S<i.channelCount;S+=1)jP(e,f[y],S,S,_);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:y},S)=>{jP(e,v,y,l+S,_)});for(let y=0;y<i.numberOfInputs;y+=1)for(let S=0;S<r[y];S+=1)m[y][S].byteLength===0&&(m[y][S]=new Float32Array(128));try{const y=f.map((T,x)=>h.activeInputs[x].size===0?[]:T),S=a(_/t.sampleRate,t.sampleRate,()=>d.process(y,m,v));if(u!==null)for(let T=0,x=0;T<i.numberOfOutputs;T+=1){for(let I=0;I<r[T];I+=1)ble(u,m[T],I,x+I,_);x+=r[T]}if(!S)break}catch(y){n.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return u},NYe=(n,e,t,i,r,s,a,o,l,c,u,h,d,f,m,v)=>(_,y,S)=>{const T=new WeakMap;let x=null;const I=async(R,N)=>{let L=u(R),k=null;const z=cc(L,N),Z=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(h===null){const H=Z.reduce((W,Q)=>W+Q,0),q=r(N,{channelCount:Math.max(1,H),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,H)}),U=[];for(let W=0;W<R.numberOfOutputs;W+=1)U.push(i(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Z[W]}));const ee=a(N,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});ee.connect=e.bind(null,U),ee.disconnect=l.bind(null,U),k=[q,U,ee]}else z||(L=new h(N,_));if(T.set(N,k===null?L:k[2]),k!==null){if(x===null){if(S===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Q=R.channelCount*R.numberOfInputs,X=S.parameterDescriptors===void 0?0:S.parameterDescriptors.length,Y=Q+X;x=IYe(R,Y===0?null:await(async()=>{const se=new d(Y,Math.ceil(R.context.length/128)*128,N.sampleRate),ue=[],Ne=[];for(let Le=0;Le<y.numberOfInputs;Le+=1)ue.push(a(se,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),Ne.push(r(se,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const ve=await Promise.all(Array.from(R.parameters.values()).map(async Le=>{const He=s(se,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Le.value});return await f(se,Le,He.offset),He})),_e=i(se,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Q+X)});for(let Le=0;Le<y.numberOfInputs;Le+=1){ue[Le].connect(Ne[Le]);for(let He=0;He<y.channelCount;He+=1)Ne[Le].connect(_e,He,Le*y.channelCount+He)}for(const[Le,He]of ve.entries())He.connect(_e,0,Q+Le),He.start(0);return _e.connect(se.destination),await Promise.all(ue.map(Le=>m(R,se,Le))),v(se)})(),N,y,Z,S,c)}const H=await x,q=t(N,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[U,ee,W]=k;H!==null&&(q.buffer=H,q.start(0)),q.connect(U);for(let Q=0,X=0;Q<R.numberOfOutputs;Q+=1){const Y=ee[Q];for(let ae=0;ae<Z[Q];ae+=1)U.connect(Y,X+ae,ae);X+=Z[Q]}return W}if(z)for(const[H,q]of R.parameters.entries())await n(N,q,L.parameters.get(H));else for(const[H,q]of R.parameters.entries())await f(N,q,L.parameters.get(H));return await m(R,N,L),L};return{render(R,N){o(N,R);const L=T.get(N);return L!==void 0?Promise.resolve(L):I(R,N)}}},PYe=(n,e,t,i,r,s,a,o,l,c,u,h,d,f,m,v,_,y,S,T)=>class extends m{constructor(I,R){super(I,R),this._nativeContext=I,this._audioWorklet=n===void 0?void 0:{addModule:(N,L)=>n(this,N,L)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(I,R,N){return new t({length:R,numberOfChannels:I,sampleRate:N})}createBufferSource(){return new i(this)}createChannelMerger(I=6){return new s(this,{numberOfInputs:I})}createChannelSplitter(I=6){return new a(this,{numberOfOutputs:I})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(I=1){return new u(this,{maxDelayTime:I})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(I,R){return new f(this,{feedback:R,feedforward:I})}createOscillator(){return new v(this)}createPanner(){return new _(this)}createPeriodicWave(I,R,N={disableNormalization:!1}){return new y(this,{...N,imag:R,real:I})}createStereoPanner(){return new S(this)}createWaveShaper(){return new T(this)}decodeAudioData(I,R,N){return c(this._nativeContext,I).then(L=>(typeof R=="function"&&R(L),L),L=>{throw typeof N=="function"&&N(L),L})}},DYe={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},kYe=(n,e,t,i,r,s,a,o)=>class extends n{constructor(c,u){const h=s(c),d={...DYe,...u},f=r(h,d),m=a(h),v=m?t():null;super(c,!1,f,v),this._Q=e(this,m,f.Q,Lc,Su),this._detune=e(this,m,f.detune,1200*Math.log2(Lc),-1200*Math.log2(Lc)),this._frequency=e(this,m,f.frequency,c.sampleRate/2,0),this._gain=e(this,m,f.gain,40*Math.log10(Lc),Su),this._nativeBiquadFilterNode=f,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,h)}catch(d){throw d.code===11?i():d}if(c.length!==u.length||u.length!==h.length)throw i()}},LYe=(n,e,t,i,r)=>()=>{const s=new WeakMap,a=async(o,l)=>{let c=t(o);const u=cc(c,l);if(!u){const h={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,h)}return s.set(l,c),u?(await n(l,o.Q,c.Q),await n(l,o.detune,c.detune),await n(l,o.frequency,c.frequency),await n(l,o.gain,c.gain)):(await i(l,o.Q,c.Q),await i(l,o.detune,c.detune),await i(l,o.frequency,c.frequency),await i(l,o.gain,c.gain)),await r(o,l,c),c};return{render(o,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},UYe=(n,e)=>(t,i)=>{const r=e.get(t);if(r!==void 0)return r;const s=n.get(t);if(s!==void 0)return s;try{const a=i();return a instanceof Promise?(n.set(t,a),a.catch(()=>!1).then(o=>(n.delete(t),e.set(t,o),o))):(e.set(t,a),a)}catch{return e.set(t,!1),!1}},BYe={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},FYe=(n,e,t,i,r)=>class extends n{constructor(a,o){const l=i(a),c={...BYe,...o},u=t(l,c),h=r(l)?e():null;super(a,!1,u,h)}},zYe=(n,e,t)=>()=>{const i=new WeakMap,r=async(s,a)=>{let o=e(s);if(!cc(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=n(a,c)}return i.set(a,o),await t(s,a,o),o};return{render(s,a){const o=i.get(a);return o!==void 0?Promise.resolve(o):r(s,a)}}},jYe={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},HYe=(n,e,t,i,r,s)=>class extends n{constructor(o,l){const c=i(o),u=s({...jYe,...l}),h=t(c,u),d=r(c)?e():null;super(o,!1,h,d)}},VYe=(n,e,t)=>()=>{const i=new WeakMap,r=async(s,a)=>{let o=e(s);if(!cc(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=n(a,c)}return i.set(a,o),await t(s,a,o),o};return{render(s,a){const o=i.get(a);return o!==void 0?Promise.resolve(o):r(s,a)}}},GYe=n=>(e,t,i)=>n(t,e,i),qYe=n=>(e,t,i=0,r=0)=>{const s=e[i];if(s===void 0)throw n();return zP(t)?s.connect(t,0,r):s.connect(t,0)},$Ye=n=>(e,t)=>{const i=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return i.buffer=r,i.loop=!0,i.connect(t),i.start(),()=>{i.stop(),i.disconnect(t)}},WYe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},YYe=(n,e,t,i,r,s,a)=>class extends n{constructor(l,c){const u=r(l),h={...WYe,...c},d=i(u,h),f=s(u),m=f?t():null;super(l,!1,d,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Lc,Su),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?a(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){ax(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Og(this)&&uM(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},XYe=(n,e,t,i,r)=>()=>{const s=new WeakMap;let a=null,o=null;const l=async(c,u)=>{let h=t(c);const d=cc(h,u);if(!d){const f={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,f),a!==null&&h.start(a),o!==null&&h.stop(o)}return s.set(u,h),d?await n(u,c.offset,h.offset):await i(u,c.offset,h.offset),await r(c,u,h),h};return{set start(c){a=c},set stop(c){o=c},render(c,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):l(c,u)}}},KYe=n=>e=>(n[0]=e,n[0]),ZYe={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},JYe=(n,e,t,i,r,s)=>class extends n{constructor(o,l){const c=i(o),u={...ZYe,...l},h=t(c,u),f=r(c)?e():null;super(o,!1,h,f),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},QYe=(n,e,t)=>()=>{const i=new WeakMap,r=async(s,a)=>{let o=e(s);if(!cc(o,a)){const c={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=n(a,c)}return i.set(a,o),Vx(o)?await t(s,a,o.inputs[0]):await t(s,a,o),o};return{render(s,a){const o=i.get(a);return o!==void 0?Promise.resolve(o):r(s,a)}}},eXe=(n,e)=>(t,i,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,i,r)}catch(s){throw s.name==="SyntaxError"?n():s}},tXe=()=>new DOMException("","DataCloneError"),sX=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(i=>{const r=()=>{t.onmessage=null,e.close(),t.close(),i()};t.onmessage=()=>r();try{e.postMessage(n,[n])}catch{}finally{r()}})},nXe=(n,e,t,i,r,s,a,o,l,c,u)=>(h,d)=>{const f=a(h)?h:s(h);if(r.has(d)){const m=t();return Promise.reject(m)}try{r.add(d)}catch{}return e(l,()=>l(f))?f.decodeAudioData(d).then(m=>(sX(d).catch(()=>{}),e(o,()=>o(m))||u(m),n.add(m),m)):new Promise((m,v)=>{const _=async()=>{try{await sX(d)}catch{}},y=S=>{v(S),_()};try{f.decodeAudioData(d,S=>{typeof S.copyFromChannel!="function"&&(c(S),GH(S)),n.add(S),_().then(()=>m(S))},S=>{y(S===null?i():S)})}catch(S){y(S)}})},iXe=(n,e,t,i,r,s,a,o)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=s(l.context),d=o(h);if(u===c){if(e.delete(l),!d&&a(l)){const f=i(l),{outputs:m}=t(l);for(const v of m)if(dM(v)){const _=i(v[0]);n(f,_,v[1],v[2])}else{const _=r(v[0]);f.connect(_,v[1])}}}else e.set(l,u-c)},rXe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},sXe=(n,e,t,i,r,s,a)=>class extends n{constructor(l,c){const u=r(l),h={...rXe,...c},d=i(u,h),f=s(u),m=f?t(h.maxDelayTime):null;super(l,!1,d,m),this._delayTime=e(this,f,d.delayTime),a(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},aXe=(n,e,t,i,r)=>s=>{const a=new WeakMap,o=async(l,c)=>{let u=t(l);const h=cc(u,c);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=e(c,d)}return a.set(c,u),h?await n(c,l.delayTime,u.delayTime):await i(c,l.delayTime,u.delayTime),await r(l,c,u),u};return{render(l,c){const u=a.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},oXe=n=>(e,t,i,r)=>n(e[r],s=>s[0]===t&&s[1]===i),lXe=n=>(e,t)=>{n(e).delete(t)},cXe=n=>"delayTime"in n,uXe=(n,e,t)=>function i(r,s){const a=UP(s)?s:t(n,s);if(cXe(a))return[];if(r[0]===a)return[r];if(r.includes(a))return[];const{outputs:o}=e(a);return Array.from(o).map(l=>i([...r,a],l[0])).reduce((l,c)=>l.concat(c),[])},hO=(n,e,t)=>{const i=e[t];if(i===void 0)throw n();return i},hXe=n=>(e,t=void 0,i=void 0,r=0)=>t===void 0?e.forEach(s=>s.disconnect()):typeof t=="number"?hO(n,e,t).disconnect():zP(t)?i===void 0?e.forEach(s=>s.disconnect(t)):r===void 0?hO(n,e,i).disconnect(t,0):hO(n,e,i).disconnect(t,0,r):i===void 0?e.forEach(s=>s.disconnect(t)):hO(n,e,i).disconnect(t,0),dXe={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},fXe=(n,e,t,i,r,s,a,o)=>class extends n{constructor(c,u){const h=s(c),d={...dXe,...u},f=i(h,d),m=a(h),v=m?t():null;super(c,!1,f,v),this._attack=e(this,m,f.attack),this._knee=e(this,m,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,m,f.ratio),this._release=e(this,m,f.release),this._threshold=e(this,m,f.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},pXe=(n,e,t,i,r)=>()=>{const s=new WeakMap,a=async(o,l)=>{let c=t(o);const u=cc(c,l);if(!u){const h={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,h)}return s.set(l,c),u?(await n(l,o.attack,c.attack),await n(l,o.knee,c.knee),await n(l,o.ratio,c.ratio),await n(l,o.release,c.release),await n(l,o.threshold,c.threshold)):(await i(l,o.attack,c.attack),await i(l,o.knee,c.knee),await i(l,o.ratio,c.ratio),await i(l,o.release,c.release),await i(l,o.threshold,c.threshold)),await r(o,l,c),c};return{render(o,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},mXe=()=>new DOMException("","EncodingError"),gXe=n=>e=>new Promise((t,i)=>{if(n===null){i(new SyntaxError);return}const r=n.document.head;if(r===null)i(new SyntaxError);else{const s=n.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(a),l=n.onerror,c=()=>{n.onerror=l,URL.revokeObjectURL(o)};n.onerror=(u,h,d,f,m)=>{if(h===o||h===n.location.href&&d===1&&f===1)return c(),i(m),!1;if(l!==null)return l(u,h,d,f,m)},s.onerror=()=>{c(),i(new SyntaxError)},s.onload=()=>{c(),t()},s.src=o,s.type="module",r.appendChild(s)}}),vXe=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,i,r){if(i!==null){let s=this._listeners.get(i);s===void 0&&(s=n(this,i),typeof i=="function"&&this._listeners.set(i,s)),this._nativeEventTarget.addEventListener(t,s,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,i,r){const s=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(t,s===void 0?null:s,r)}},yXe=n=>(e,t,i)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return i()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},_Xe=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},bXe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},SXe=(n,e,t,i,r,s)=>class extends n{constructor(o,l){const c=r(o),u={...bXe,...l},h=i(c,u),d=s(c),f=d?t():null;super(o,!1,h,f),this._gain=e(this,d,h.gain,Lc,Su)}get gain(){return this._gain}},EXe=(n,e,t,i,r)=>()=>{const s=new WeakMap,a=async(o,l)=>{let c=t(o);const u=cc(c,l);if(!u){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,h)}return s.set(l,c),u?await n(l,o.gain,c.gain):await i(l,o.gain,c.gain),await r(o,l,c),c};return{render(o,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},TXe=(n,e)=>t=>e(n,t),xXe=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},wXe=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},CXe=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},AXe=n=>e=>n.get(e),ml=()=>new DOMException("","InvalidStateError"),MXe=n=>e=>{const t=n.get(e);if(t===void 0)throw ml();return t},RXe=(n,e)=>t=>{let i=n.get(t);if(i!==void 0)return i;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),n.set(t,i),i},OXe=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},TU=()=>new DOMException("","InvalidAccessError"),IXe=n=>{n.getFrequencyResponse=(e=>(t,i,r)=>{if(t.length!==i.length||i.length!==r.length)throw TU();return e.call(n,t,i,r)})(n.getFrequencyResponse)},NXe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},PXe=(n,e,t,i,r,s)=>class extends n{constructor(o,l){const c=i(o),u=r(c),h={...NXe,...l},d=e(c,u?null:o.baseLatency,h),f=u?t(h.feedback,h.feedforward):null;super(o,!1,d,f),IXe(d),this._nativeIIRFilterNode=d,s(this,1)}getFrequencyResponse(o,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(o,l,c)}},Sle=(n,e,t,i,r,s,a,o,l,c,u)=>{const h=c.length;let d=o;for(let f=0;f<h;f+=1){let m=t[0]*c[f];for(let v=1;v<r;v+=1){const _=d-v&l-1;m+=t[v]*s[_],m-=n[v]*a[_]}for(let v=r;v<i;v+=1)m+=t[v]*s[d-v&l-1];for(let v=r;v<e;v+=1)m-=n[v]*a[d-v&l-1];s[d]=c[f],a[d]=m,d=d+1&l-1,u[f]=m}return d},DXe=(n,e,t,i)=>{const r=t instanceof Float64Array?t:new Float64Array(t),s=i instanceof Float64Array?i:new Float64Array(i),a=r.length,o=s.length,l=Math.min(a,o);if(r[0]!==1){for(let m=0;m<a;m+=1)s[m]/=r[0];for(let m=1;m<o;m+=1)r[m]/=r[0]}const c=32,u=new Float32Array(c),h=new Float32Array(c),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let m=0;m<f;m+=1){const v=n.getChannelData(m),_=d.getChannelData(m);u.fill(0),h.fill(0),Sle(r,a,s,o,l,u,h,0,c,v,_)}return d},kXe=(n,e,t,i,r)=>(s,a)=>{const o=new WeakMap;let l=null;const c=async(u,h)=>{let d=null,f=e(u);const m=cc(f,h);if(h.createIIRFilter===void 0?d=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(f=h.createIIRFilter(a,s)),o.set(h,d===null?f:d),d!==null){if(l===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const _=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);l=(async()=>{await i(u,_,_.destination);const y=await r(_);return DXe(y,h,s,a)})()}const v=await l;return d.buffer=v,d.start(0),d}return await i(u,h,f),f};return{render(u,h){const d=o.get(h);return d!==void 0?Promise.resolve(d):c(u,h)}}},LXe=(n,e,t,i,r,s)=>a=>(o,l)=>{const c=n.get(o);if(c===void 0){if(!a&&s(o)){const u=i(o),{outputs:h}=t(o);for(const d of h)if(dM(d)){const f=i(d[0]);e(u,f,d[1],d[2])}else{const f=r(d[0]);u.disconnect(f,d[1])}}n.set(o,l)}else n.set(o,c+l)},UXe=(n,e)=>t=>{const i=n.get(t);return e(i)||e(t)},BXe=(n,e)=>t=>n.has(t)||e(t),FXe=(n,e)=>t=>n.has(t)||e(t),zXe=(n,e)=>t=>{const i=n.get(t);return e(i)||e(t)},jXe=n=>e=>n!==null&&e instanceof n,HXe=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,VXe=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,GXe=(n,e)=>t=>n(t)||e(t),qXe=n=>e=>n!==null&&e instanceof n,$Xe=n=>n!==null&&n.isSecureContext,WXe=(n,e,t,i)=>class extends n{constructor(s,a){const o=t(s),l=e(o,a);if(i(o))throw TypeError();super(s,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},YXe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},XXe=(n,e,t,i)=>class extends n{constructor(s,a){const o=t(s);if(i(o))throw new TypeError;const l={...YXe,...a},c=e(o,l);super(s,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},KXe=(n,e,t,i)=>class extends n{constructor(s,a){const o=t(s),l=e(o,a);if(i(o))throw new TypeError;super(s,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ZXe=(n,e,t)=>class extends n{constructor(r,s){const a=t(r),o=e(a,s);super(r,!0,o,null)}},JXe=(n,e,t,i,r,s)=>class extends t{constructor(o,l){super(o),this._nativeContext=o,SU.set(this,o),i(o)&&r.set(o,new Set),this._destination=new n(this,l),this._listener=e(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const l=typeof o=="function"?s(this,o):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?o:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},$C=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},QXe=(n,e)=>(t,i,r)=>{const s=new Set;return t.connect=(a=>(o,l=0,c=0)=>{const u=s.size===0;if(e(o))return a.call(t,o,l,c),n(s,[o,l,c],h=>h[0]===o&&h[1]===l&&h[2]===c,!0),u&&i(),o;a.call(t,o,l),n(s,[o,l],h=>h[0]===o&&h[1]===l,!0),u&&i()})(t.connect),t.disconnect=(a=>(o,l,c)=>{const u=s.size>0;if(o===void 0)a.apply(t),s.clear();else if(typeof o=="number"){a.call(t,o);for(const d of s)d[1]===o&&s.delete(d)}else{e(o)?a.call(t,o,l,c):a.call(t,o,l);for(const d of s)d[0]===o&&(l===void 0||d[1]===l)&&(c===void 0||d[2]===c)&&s.delete(d)}const h=s.size===0;u&&h&&r()})(t.disconnect),t},Xs=(n,e,t)=>{const i=e[t];i!==void 0&&i!==n[t]&&(n[t]=i)},$o=(n,e)=>{Xs(n,e,"channelCount"),Xs(n,e,"channelCountMode"),Xs(n,e,"channelInterpretation")},aX=n=>typeof n.getFloatTimeDomainData=="function",eKe=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const i=Math.max(t.length,n.fftSize);for(let r=0;r<i;r+=1)e[r]=(t[r]-128)*.0078125;return e}},tKe=(n,e)=>(t,i)=>{const r=t.createAnalyser();if($o(r,i),!(i.maxDecibels>i.minDecibels))throw e();return Xs(r,i,"fftSize"),Xs(r,i,"maxDecibels"),Xs(r,i,"minDecibels"),Xs(r,i,"smoothingTimeConstant"),n(aX,()=>aX(r))||eKe(r),r},nKe=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Ra=(n,e,t)=>{const i=e[t];i!==void 0&&i!==n[t].value&&(n[t].value=i)},iKe=n=>{n.start=(e=>{let t=!1;return(i=0,r=0,s)=>{if(t)throw ml();e.call(n,i,r,s),t=!0}})(n.start)},WH=n=>{n.start=(e=>(t=0,i=0,r)=>{if(typeof r=="number"&&r<0||i<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,i,r)})(n.start)},YH=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},rKe=(n,e,t,i,r,s,a,o,l,c,u)=>(h,d)=>{const f=h.createBufferSource();return $o(f,d),Ra(f,d,"playbackRate"),Xs(f,d,"buffer"),Xs(f,d,"loop"),Xs(f,d,"loopEnd"),Xs(f,d,"loopStart"),e(t,()=>t(h))||iKe(f),e(i,()=>i(h))||l(f),e(r,()=>r(h))||c(f,h),e(s,()=>s(h))||WH(f),e(a,()=>a(h))||u(f,h),e(o,()=>o(h))||YH(f),n(h,f),f},sKe=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,aKe=(n,e)=>(t,i,r)=>{const s=t.destination;if(s.channelCount!==i)try{s.channelCount=i}catch{}r&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:i});const a=n(t,{channelCount:i,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(a,"channelCount",o=>()=>o.call(a),o=>l=>{o.call(a,l);try{s.channelCount=l}catch(c){if(l>s.maxChannelCount)throw c}}),e(a,"channelCountMode",o=>()=>o.call(a),o=>l=>{o.call(a,l),s.channelCountMode=l}),e(a,"channelInterpretation",o=>()=>o.call(a),o=>l=>{o.call(a,l),s.channelInterpretation=l}),Object.defineProperty(a,"maxChannelCount",{get:()=>s.maxChannelCount}),a.connect(s),a},oKe=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,lKe=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},cKe=(n,e,t,i,r)=>(s,a,o,l,c,u)=>{if(o!==null)try{const h=new o(s,l,u),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:m=>{typeof f=="function"&&h.removeEventListener("processorerror",f),f=typeof m=="function"?m:null,typeof f=="function"&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(m=>(...v)=>{if(v[0]==="processorerror"){const _=typeof v[1]=="function"?v[1]:typeof v[1]=="object"&&v[1]!==null&&typeof v[1].handleEvent=="function"?v[1].handleEvent:null;if(_!==null){const y=d.get(v[1]);y!==void 0?v[1]=y:(v[1]=S=>{S.type==="error"?(Object.defineProperties(S,{type:{value:"processorerror"}}),_(S)):_(new ErrorEvent(v[0],{...S}))},d.set(_,v[1]))}}return m.call(h,"error",v[1],v[2]),m.call(h,...v)})(h.addEventListener),h.removeEventListener=(m=>(...v)=>{if(v[0]==="processorerror"){const _=d.get(v[1]);_!==void 0&&(d.delete(v[1]),v[1]=_)}return m.call(h,"error",v[1],v[2]),m.call(h,v[0],v[1],v[2])})(h.removeEventListener),u.numberOfOutputs!==0){const m=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(m).connect(s.destination),r(h,()=>m.disconnect(),()=>m.connect(s.destination))}return h}catch(h){throw h.code===11?i():h}if(c===void 0)throw i();return lKe(u),e(s,a,c,u)},Ele=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),uKe=n=>new Promise((e,t)=>{const{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:s})=>{i.close(),r.close(),e(s)},i.onmessageerror=({data:s})=>{i.close(),r.close(),t(s)},r.postMessage(n)}),hKe=async(n,e)=>{const t=await uKe(e);return new n(t)},dKe=(n,e,t,i)=>{let r=U5.get(n);r===void 0&&(r=new WeakMap,U5.set(n,r));const s=hKe(t,i);return r.set(e,s),s},fKe=(n,e,t,i,r,s,a,o,l,c,u,h,d)=>(f,m,v,_)=>{if(_.numberOfInputs===0&&_.numberOfOutputs===0)throw l();const y=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(y.some(Ae=>Ae<1))throw l();if(y.length!==_.numberOfOutputs)throw e();if(_.channelCountMode!=="explicit")throw l();const S=_.channelCount*_.numberOfInputs,T=y.reduce((Ae,Se)=>Ae+Se,0),x=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length;if(S+x>6||T>6)throw l();const I=new MessageChannel,R=[],N=[];for(let Ae=0;Ae<_.numberOfInputs;Ae+=1)R.push(a(f,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),N.push(r(f,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const L=[];if(v.parameterDescriptors!==void 0)for(const{defaultValue:Ae,maxValue:Se,minValue:ge,name:fe}of v.parameterDescriptors){const Ce=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_.parameterData[fe]!==void 0?_.parameterData[fe]:Ae===void 0?0:Ae});Object.defineProperties(Ce.offset,{defaultValue:{get:()=>Ae===void 0?0:Ae},maxValue:{get:()=>Se===void 0?Lc:Se},minValue:{get:()=>ge===void 0?Su:ge}}),L.push(Ce)}const k=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,S+x)}),z=Ele(m,f.sampleRate),Z=o(f,z,S+x,Math.max(1,T)),H=r(f,{channelCount:Math.max(1,T),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,T)}),q=[];for(let Ae=0;Ae<_.numberOfOutputs;Ae+=1)q.push(i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[Ae]}));for(let Ae=0;Ae<_.numberOfInputs;Ae+=1){R[Ae].connect(N[Ae]);for(let Se=0;Se<_.channelCount;Se+=1)N[Ae].connect(k,Se,Ae*_.channelCount+Se)}const U=new _le(v.parameterDescriptors===void 0?[]:v.parameterDescriptors.map(({name:Ae},Se)=>{const ge=L[Se];return ge.connect(k,0,S+Se),ge.start(0),[Ae,ge.offset]}));k.connect(Z);let ee=_.channelInterpretation,W=null;const Q=_.numberOfOutputs===0?[Z]:q,X={get bufferSize(){return z},get channelCount(){return _.channelCount},set channelCount(Ae){throw t()},get channelCountMode(){return _.channelCountMode},set channelCountMode(Ae){throw t()},get channelInterpretation(){return ee},set channelInterpretation(Ae){for(const Se of R)Se.channelInterpretation=Ae;ee=Ae},get context(){return Z.context},get inputs(){return R},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return W},set onprocessorerror(Ae){typeof W=="function"&&X.removeEventListener("processorerror",W),W=typeof Ae=="function"?Ae:null,typeof W=="function"&&X.addEventListener("processorerror",W)},get parameters(){return U},get port(){return I.port2},addEventListener(...Ae){return Z.addEventListener(Ae[0],Ae[1],Ae[2])},connect:n.bind(null,Q),disconnect:c.bind(null,Q),dispatchEvent(...Ae){return Z.dispatchEvent(Ae[0])},removeEventListener(...Ae){return Z.removeEventListener(Ae[0],Ae[1],Ae[2])}},Y=new Map;I.port1.addEventListener=(Ae=>(...Se)=>{if(Se[0]==="message"){const ge=typeof Se[1]=="function"?Se[1]:typeof Se[1]=="object"&&Se[1]!==null&&typeof Se[1].handleEvent=="function"?Se[1].handleEvent:null;if(ge!==null){const fe=Y.get(Se[1]);fe!==void 0?Se[1]=fe:(Se[1]=Ce=>{u(f.currentTime,f.sampleRate,()=>ge(Ce))},Y.set(ge,Se[1]))}}return Ae.call(I.port1,Se[0],Se[1],Se[2])})(I.port1.addEventListener),I.port1.removeEventListener=(Ae=>(...Se)=>{if(Se[0]==="message"){const ge=Y.get(Se[1]);ge!==void 0&&(Y.delete(Se[1]),Se[1]=ge)}return Ae.call(I.port1,Se[0],Se[1],Se[2])})(I.port1.removeEventListener);let ae=null;Object.defineProperty(I.port1,"onmessage",{get:()=>ae,set:Ae=>{typeof ae=="function"&&I.port1.removeEventListener("message",ae),ae=typeof Ae=="function"?Ae:null,typeof ae=="function"&&(I.port1.addEventListener("message",ae),I.port1.start())}}),v.prototype.port=I.port1;let se=null;dKe(f,X,v,_).then(Ae=>se=Ae);const Ne=HP(_.numberOfInputs,_.channelCount),ve=HP(_.numberOfOutputs,y),_e=v.parameterDescriptors===void 0?[]:v.parameterDescriptors.reduce((Ae,{name:Se})=>({...Ae,[Se]:new Float32Array(128)}),{});let Le=!0;const He=()=>{_.numberOfOutputs>0&&Z.disconnect(H);for(let Ae=0,Se=0;Ae<_.numberOfOutputs;Ae+=1){const ge=q[Ae];for(let fe=0;fe<y[Ae];fe+=1)H.disconnect(ge,Se+fe,fe);Se+=y[Ae]}},$e=new Map;Z.onaudioprocess=({inputBuffer:Ae,outputBuffer:Se})=>{if(se!==null){const ge=h(X);for(let fe=0;fe<z;fe+=128){for(let Ce=0;Ce<_.numberOfInputs;Ce+=1)for(let ke=0;ke<_.channelCount;ke+=1)jP(Ae,Ne[Ce],ke,ke,fe);v.parameterDescriptors!==void 0&&v.parameterDescriptors.forEach(({name:Ce},ke)=>{jP(Ae,_e,Ce,S+ke,fe)});for(let Ce=0;Ce<_.numberOfInputs;Ce+=1)for(let ke=0;ke<y[Ce];ke+=1)ve[Ce][ke].byteLength===0&&(ve[Ce][ke]=new Float32Array(128));try{const Ce=Ne.map((he,ie)=>{if(ge[ie].size>0)return $e.set(ie,z/128),he;const Fe=$e.get(ie);return Fe===void 0?[]:(he.every(Ve=>Ve.every(We=>We===0))&&(Fe===1?$e.delete(ie):$e.set(ie,Fe-1)),he)});Le=u(f.currentTime+fe/f.sampleRate,f.sampleRate,()=>se.process(Ce,ve,_e));for(let he=0,ie=0;he<_.numberOfOutputs;he+=1){for(let Me=0;Me<y[he];Me+=1)ble(Se,ve[he],Me,ie+Me,fe);ie+=y[he]}}catch(Ce){Le=!1,X.dispatchEvent(new ErrorEvent("processorerror",{colno:Ce.colno,filename:Ce.filename,lineno:Ce.lineno,message:Ce.message}))}if(!Le){for(let Ce=0;Ce<_.numberOfInputs;Ce+=1){R[Ce].disconnect(N[Ce]);for(let ke=0;ke<_.channelCount;ke+=1)N[fe].disconnect(k,ke,Ce*_.channelCount+ke)}if(v.parameterDescriptors!==void 0){const Ce=v.parameterDescriptors.length;for(let ke=0;ke<Ce;ke+=1){const he=L[ke];he.disconnect(k,0,S+ke),he.stop()}}k.disconnect(Z),Z.onaudioprocess=null,bt?He():Gt();break}}}};let bt=!1;const Ct=a(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Lt=()=>Z.connect(Ct).connect(f.destination),Gt=()=>{Z.disconnect(Ct),Ct.disconnect()},qt=()=>{if(Le){Gt(),_.numberOfOutputs>0&&Z.connect(H);for(let Ae=0,Se=0;Ae<_.numberOfOutputs;Ae+=1){const ge=q[Ae];for(let fe=0;fe<y[Ae];fe+=1)H.connect(ge,Se+fe,fe);Se+=y[Ae]}}bt=!0},V=()=>{Le&&(Lt(),He()),bt=!1};return Lt(),d(X,qt,V)},Tle=(n,e)=>{const t=n.createBiquadFilter();return $o(t,e),Ra(t,e,"Q"),Ra(t,e,"detune"),Ra(t,e,"frequency"),Ra(t,e,"gain"),Xs(t,e,"type"),t},pKe=(n,e)=>(t,i)=>{const r=t.createChannelMerger(i.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),$o(r,i),r},mKe=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw ml()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw ml()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw ml()}})},fM=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return $o(t,e),mKe(t),t},gKe=(n,e,t,i,r)=>(s,a)=>{if(s.createConstantSource===void 0)return t(s,a);const o=s.createConstantSource();return $o(o,a),Ra(o,a,"offset"),e(i,()=>i(s))||WH(o),e(r,()=>r(s))||YH(o),n(s,o),o},Gx=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),vKe=(n,e,t,i)=>(r,{offset:s,...a})=>{const o=r.createBuffer(1,2,44100),l=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=t(r,{...a,gain:s}),u=o.getChannelData(0);u[0]=1,u[1]=1,l.buffer=o,l.loop=!0;const h={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(m){c.channelCount=m},get channelCountMode(){return c.channelCountMode},set channelCountMode(m){c.channelCountMode=m},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(m){c.channelInterpretation=m},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},d=()=>l.connect(c),f=()=>l.disconnect(c);return n(r,l),i(Gx(h,c),d,f)},yKe=(n,e)=>(t,i)=>{const r=t.createConvolver();if($o(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),Xs(r,i,"buffer"),i.channelCount>2||(e(r,"channelCount",s=>()=>s.call(r),s=>a=>{if(a>2)throw n();return s.call(r,a)}),i.channelCountMode==="max"))throw n();return e(r,"channelCountMode",s=>()=>s.call(r),s=>a=>{if(a==="max")throw n();return s.call(r,a)}),r},xle=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return $o(t,e),Ra(t,e,"delayTime"),t},_Ke=n=>(e,t)=>{const i=e.createDynamicsCompressor();if($o(i,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Ra(i,t,"attack"),Ra(i,t,"knee"),Ra(i,t,"ratio"),Ra(i,t,"release"),Ra(i,t,"threshold"),i},Uu=(n,e)=>{const t=n.createGain();return $o(t,e),Ra(t,e,"gain"),t},bKe=n=>(e,t,i)=>{if(e.createIIRFilter===void 0)return n(e,t,i);const r=e.createIIRFilter(i.feedforward,i.feedback);return $o(r,i),r};function SKe(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function EKe(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function oX(n,e){let t=[0,0];for(let i=n.length-1;i>=0;i-=1)t=EKe(t,e),t[0]+=n[i];return t}const TKe=(n,e,t,i)=>(r,s,{channelCount:a,channelCountMode:o,channelInterpretation:l,feedback:c,feedforward:u})=>{const h=Ele(s,r.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),f=u instanceof Float64Array?u:new Float64Array(u),m=d.length,v=f.length,_=Math.min(m,v);if(m===0||m>20)throw i();if(d[0]===0)throw e();if(v===0||v>20)throw i();if(f[0]===0)throw e();if(d[0]!==1){for(let L=0;L<v;L+=1)f[L]/=d[0];for(let L=1;L<m;L+=1)d[L]/=d[0]}const y=t(r,h,a,a);y.channelCount=a,y.channelCountMode=o,y.channelInterpretation=l;const S=32,T=[],x=[],I=[];for(let L=0;L<a;L+=1){T.push(0);const k=new Float32Array(S),z=new Float32Array(S);k.fill(0),z.fill(0),x.push(k),I.push(z)}y.onaudioprocess=L=>{const k=L.inputBuffer,z=L.outputBuffer,Z=k.numberOfChannels;for(let H=0;H<Z;H+=1){const q=k.getChannelData(H),U=z.getChannelData(H);T[H]=Sle(d,m,f,v,_,x[H],I[H],T[H],S,q,U)}};const R=r.sampleRate/2;return Gx({get bufferSize(){return h},get channelCount(){return y.channelCount},set channelCount(L){y.channelCount=L},get channelCountMode(){return y.channelCountMode},set channelCountMode(L){y.channelCountMode=L},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(L){y.channelInterpretation=L},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...L){return y.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return y.dispatchEvent(L[0])},getFrequencyResponse(L,k,z){if(L.length!==k.length||k.length!==z.length)throw n();const Z=L.length;for(let H=0;H<Z;H+=1){const q=-Math.PI*(L[H]/R),U=[Math.cos(q),Math.sin(q)],ee=oX(f,U),W=oX(d,U),Q=SKe(ee,W);k[H]=Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]),z[H]=Math.atan2(Q[1],Q[0])}},removeEventListener(...L){return y.removeEventListener(L[0],L[1],L[2])}},y)},xKe=(n,e)=>n.createMediaElementSource(e.mediaElement),wKe=(n,e)=>{const t=n.createMediaStreamDestination();return $o(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},CKe=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((s,a)=>s.id<a.id?-1:s.id>a.id?1:0);const i=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r},AKe=(n,e)=>(t,{mediaStreamTrack:i})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(i);const r=new MediaStream([i]),s=t.createMediaStreamSource(r);if(i.kind!=="audio")throw n();if(e(t))throw new TypeError;return s},MKe=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,RKe=(n,e,t,i,r,s)=>(a,o)=>{const l=a.createOscillator();return $o(l,o),Ra(l,o,"detune"),Ra(l,o,"frequency"),o.periodicWave!==void 0?l.setPeriodicWave(o.periodicWave):Xs(l,o,"type"),e(t,()=>t(a))||WH(l),e(i,()=>i(a))||s(l,a),e(r,()=>r(a))||YH(l),n(a,l),l},OKe=n=>(e,t)=>{const i=e.createPanner();return i.orientationX===void 0?n(e,t):($o(i,t),Ra(i,t,"orientationX"),Ra(i,t,"orientationY"),Ra(i,t,"orientationZ"),Ra(i,t,"positionX"),Ra(i,t,"positionY"),Ra(i,t,"positionZ"),Xs(i,t,"coneInnerAngle"),Xs(i,t,"coneOuterAngle"),Xs(i,t,"coneOuterGain"),Xs(i,t,"distanceModel"),Xs(i,t,"maxDistance"),Xs(i,t,"panningModel"),Xs(i,t,"refDistance"),Xs(i,t,"rolloffFactor"),i)},IKe=(n,e,t,i,r,s,a,o,l,c)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:m,maxDistance:v,orientationX:_,orientationY:y,orientationZ:S,panningModel:T,positionX:x,positionY:I,positionZ:R,refDistance:N,rolloffFactor:L,...k})=>{const z=u.createPanner();if(k.channelCount>2||k.channelCountMode==="max")throw a();$o(z,k);const Z={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},H=t(u,{...Z,channelInterpretation:"speakers",numberOfInputs:6}),q=i(u,{...k,gain:1}),U=i(u,{...Z,gain:1}),ee=i(u,{...Z,gain:0}),W=i(u,{...Z,gain:0}),Q=i(u,{...Z,gain:0}),X=i(u,{...Z,gain:0}),Y=i(u,{...Z,gain:0}),ae=r(u,256,6,1),se=s(u,{...Z,curve:new Float32Array([1,1]),oversample:"none"});let ue=[_,y,S],Ne=[x,I,R];const ve=new Float32Array(1);ae.onaudioprocess=({inputBuffer:$e})=>{const bt=[l($e,ve,0),l($e,ve,1),l($e,ve,2)];bt.some((Lt,Gt)=>Lt!==ue[Gt])&&(z.setOrientation(...bt),ue=bt);const Ct=[l($e,ve,3),l($e,ve,4),l($e,ve,5)];Ct.some((Lt,Gt)=>Lt!==Ne[Gt])&&(z.setPosition(...Ct),Ne=Ct)},Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0});const _e={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount($e){if($e>2)throw a();q.channelCount=$e,z.channelCount=$e},get channelCountMode(){return z.channelCountMode},set channelCountMode($e){if($e==="max")throw a();q.channelCountMode=$e,z.channelCountMode=$e},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation($e){q.channelInterpretation=$e,z.channelInterpretation=$e},get coneInnerAngle(){return z.coneInnerAngle},set coneInnerAngle($e){z.coneInnerAngle=$e},get coneOuterAngle(){return z.coneOuterAngle},set coneOuterAngle($e){z.coneOuterAngle=$e},get coneOuterGain(){return z.coneOuterGain},set coneOuterGain($e){if($e<0||$e>1)throw e();z.coneOuterGain=$e},get context(){return z.context},get distanceModel(){return z.distanceModel},set distanceModel($e){z.distanceModel=$e},get inputs(){return[q]},get maxDistance(){return z.maxDistance},set maxDistance($e){if($e<0)throw new RangeError;z.maxDistance=$e},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get orientationX(){return U.gain},get orientationY(){return ee.gain},get orientationZ(){return W.gain},get panningModel(){return z.panningModel},set panningModel($e){z.panningModel=$e},get positionX(){return Q.gain},get positionY(){return X.gain},get positionZ(){return Y.gain},get refDistance(){return z.refDistance},set refDistance($e){if($e<0)throw new RangeError;z.refDistance=$e},get rolloffFactor(){return z.rolloffFactor},set rolloffFactor($e){if($e<0)throw new RangeError;z.rolloffFactor=$e},addEventListener(...$e){return q.addEventListener($e[0],$e[1],$e[2])},dispatchEvent(...$e){return q.dispatchEvent($e[0])},removeEventListener(...$e){return q.removeEventListener($e[0],$e[1],$e[2])}};h!==_e.coneInnerAngle&&(_e.coneInnerAngle=h),d!==_e.coneOuterAngle&&(_e.coneOuterAngle=d),f!==_e.coneOuterGain&&(_e.coneOuterGain=f),m!==_e.distanceModel&&(_e.distanceModel=m),v!==_e.maxDistance&&(_e.maxDistance=v),_!==_e.orientationX.value&&(_e.orientationX.value=_),y!==_e.orientationY.value&&(_e.orientationY.value=y),S!==_e.orientationZ.value&&(_e.orientationZ.value=S),T!==_e.panningModel&&(_e.panningModel=T),x!==_e.positionX.value&&(_e.positionX.value=x),I!==_e.positionY.value&&(_e.positionY.value=I),R!==_e.positionZ.value&&(_e.positionZ.value=R),N!==_e.refDistance&&(_e.refDistance=N),L!==_e.rolloffFactor&&(_e.rolloffFactor=L),(ue[0]!==1||ue[1]!==0||ue[2]!==0)&&z.setOrientation(...ue),(Ne[0]!==0||Ne[1]!==0||Ne[2]!==0)&&z.setPosition(...Ne);const Le=()=>{q.connect(z),n(q,se,0,0),se.connect(U).connect(H,0,0),se.connect(ee).connect(H,0,1),se.connect(W).connect(H,0,2),se.connect(Q).connect(H,0,3),se.connect(X).connect(H,0,4),se.connect(Y).connect(H,0,5),H.connect(ae).connect(u.destination)},He=()=>{q.disconnect(z),o(q,se,0,0),se.disconnect(U),U.disconnect(H),se.disconnect(ee),ee.disconnect(H),se.disconnect(W),W.disconnect(H),se.disconnect(Q),Q.disconnect(H),se.disconnect(X),X.disconnect(H),se.disconnect(Y),Y.disconnect(H),H.disconnect(ae),ae.disconnect(u.destination)};return c(Gx(_e,z),Le,He)},NKe=n=>(e,{disableNormalization:t,imag:i,real:r})=>{const s=i instanceof Float32Array?i:new Float32Array(i),a=r instanceof Float32Array?r:new Float32Array(r),o=e.createPeriodicWave(a,s,{disableNormalization:t});if(Array.from(i).length<2)throw n();return o},pM=(n,e,t,i)=>n.createScriptProcessor(e,t,i),PKe=(n,e)=>(t,i)=>{const r=i.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,i);const s=t.createStereoPanner();return $o(s,i),Ra(s,i,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:a=>{if(a!==r)throw e()}}),s},DKe=(n,e,t,i,r,s)=>{const o=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},h=(m,v,_,y)=>{const S=new Float32Array(16385),T=new Float32Array(16385);for(let k=0;k<16385;k+=1){const z=k/16384*l;S[k]=Math.cos(z),T[k]=Math.sin(z)}const x=t(m,{...c,gain:0}),I=i(m,{...u,curve:S}),R=i(m,{...u,curve:o}),N=t(m,{...c,gain:0}),L=i(m,{...u,curve:T});return{connectGraph(){v.connect(x),v.connect(R.inputs===void 0?R:R.inputs[0]),v.connect(N),R.connect(_),_.connect(I.inputs===void 0?I:I.inputs[0]),_.connect(L.inputs===void 0?L:L.inputs[0]),I.connect(x.gain),L.connect(N.gain),x.connect(y,0,0),N.connect(y,0,1)},disconnectGraph(){v.disconnect(x),v.disconnect(R.inputs===void 0?R:R.inputs[0]),v.disconnect(N),R.disconnect(_),_.disconnect(I.inputs===void 0?I:I.inputs[0]),_.disconnect(L.inputs===void 0?L:L.inputs[0]),I.disconnect(x.gain),L.disconnect(N.gain),x.disconnect(y,0,0),N.disconnect(y,0,1)}}},d=(m,v,_,y)=>{const S=new Float32Array(16385),T=new Float32Array(16385),x=new Float32Array(16385),I=new Float32Array(16385),R=Math.floor(16385/2);for(let Q=0;Q<16385;Q+=1)if(Q>R){const X=(Q-R)/(16384-R)*l;S[Q]=Math.cos(X),T[Q]=Math.sin(X),x[Q]=0,I[Q]=1}else{const X=Q/(16384-R)*l;S[Q]=1,T[Q]=0,x[Q]=Math.cos(X),I[Q]=Math.sin(X)}const N=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),L=t(m,{...c,gain:0}),k=i(m,{...u,curve:S}),z=t(m,{...c,gain:0}),Z=i(m,{...u,curve:T}),H=i(m,{...u,curve:o}),q=t(m,{...c,gain:0}),U=i(m,{...u,curve:x}),ee=t(m,{...c,gain:0}),W=i(m,{...u,curve:I});return{connectGraph(){v.connect(N),v.connect(H.inputs===void 0?H:H.inputs[0]),N.connect(L,0),N.connect(z,0),N.connect(q,1),N.connect(ee,1),H.connect(_),_.connect(k.inputs===void 0?k:k.inputs[0]),_.connect(Z.inputs===void 0?Z:Z.inputs[0]),_.connect(U.inputs===void 0?U:U.inputs[0]),_.connect(W.inputs===void 0?W:W.inputs[0]),k.connect(L.gain),Z.connect(z.gain),U.connect(q.gain),W.connect(ee.gain),L.connect(y,0,0),q.connect(y,0,0),z.connect(y,0,1),ee.connect(y,0,1)},disconnectGraph(){v.disconnect(N),v.disconnect(H.inputs===void 0?H:H.inputs[0]),N.disconnect(L,0),N.disconnect(z,0),N.disconnect(q,1),N.disconnect(ee,1),H.disconnect(_),_.disconnect(k.inputs===void 0?k:k.inputs[0]),_.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),_.disconnect(U.inputs===void 0?U:U.inputs[0]),_.disconnect(W.inputs===void 0?W:W.inputs[0]),k.disconnect(L.gain),Z.disconnect(z.gain),U.disconnect(q.gain),W.disconnect(ee.gain),L.disconnect(y,0,0),q.disconnect(y,0,0),z.disconnect(y,0,1),ee.disconnect(y,0,1)}}},f=(m,v,_,y,S)=>{if(v===1)return h(m,_,y,S);if(v===2)return d(m,_,y,S);throw r()};return(m,{channelCount:v,channelCountMode:_,pan:y,...S})=>{if(_==="max")throw r();const T=n(m,{...S,channelCount:1,channelCountMode:_,numberOfInputs:2}),x=t(m,{...S,channelCount:v,channelCountMode:_,gain:1}),I=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:R,disconnectGraph:N}=f(m,v,x,I,T);Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"maxValue",{get:()=>1}),Object.defineProperty(I.gain,"minValue",{get:()=>-1});const L={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(H){x.channelCount!==H&&(k&&N(),{connectGraph:R,disconnectGraph:N}=f(m,H,x,I,T),k&&R()),x.channelCount=H},get channelCountMode(){return x.channelCountMode},set channelCountMode(H){if(H==="clamped-max"||H==="max")throw r();x.channelCountMode=H},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(H){x.channelInterpretation=H},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return I.gain},addEventListener(...H){return x.addEventListener(H[0],H[1],H[2])},dispatchEvent(...H){return x.dispatchEvent(H[0])},removeEventListener(...H){return x.removeEventListener(H[0],H[1],H[2])}};let k=!1;const z=()=>{R(),k=!0},Z=()=>{N(),k=!1};return s(Gx(L,T),z,Z)}},kKe=(n,e,t,i,r,s,a)=>(o,l)=>{const c=o.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&o.createGain().gain.automationRate===void 0)return t(o,l);$o(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();Xs(c,{curve:u},"curve"),Xs(c,l,"oversample");let h=null,d=!1;return a(c,"curve",v=>()=>v.call(c),v=>_=>(v.call(c,_),d&&(i(_)&&h===null?h=n(o,c):!i(_)&&h!==null&&(h(),h=null)),_)),r(c,()=>{d=!0,i(c.curve)&&(h=n(o,c))},()=>{d=!1,h!==null&&(h(),h=null)})},LKe=(n,e,t,i,r)=>(s,{curve:a,oversample:o,...l})=>{const c=s.createWaveShaper(),u=s.createWaveShaper();$o(c,l),$o(u,l);const h=t(s,{...l,gain:1}),d=t(s,{...l,gain:-1}),f=t(s,{...l,gain:1}),m=t(s,{...l,gain:-1});let v=null,_=!1,y=null;const S={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(I){h.channelCount=I,d.channelCount=I,c.channelCount=I,f.channelCount=I,u.channelCount=I,m.channelCount=I},get channelCountMode(){return c.channelCountMode},set channelCountMode(I){h.channelCountMode=I,d.channelCountMode=I,c.channelCountMode=I,f.channelCountMode=I,u.channelCountMode=I,m.channelCountMode=I},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(I){h.channelInterpretation=I,d.channelInterpretation=I,c.channelInterpretation=I,f.channelInterpretation=I,u.channelInterpretation=I,m.channelInterpretation=I},get context(){return c.context},get curve(){return y},set curve(I){if(I!==null&&I.length<2)throw e();if(I===null)c.curve=I,u.curve=I;else{const R=I.length,N=new Float32Array(R+2-R%2),L=new Float32Array(R+2-R%2);N[0]=I[0],L[0]=-I[R-1];const k=Math.ceil((R+1)/2),z=(R+1)/2-1;for(let Z=1;Z<k;Z+=1){const H=Z/k*z,q=Math.floor(H),U=Math.ceil(H);N[Z]=q===U?I[q]:(1-(H-q))*I[q]+(1-(U-H))*I[U],L[Z]=q===U?-I[R-1-q]:-((1-(H-q))*I[R-1-q])-(1-(U-H))*I[R-1-U]}N[k]=R%2===1?I[k-1]:(I[k-2]+I[k-1])/2,c.curve=N,u.curve=L}y=I,_&&(i(y)&&v===null?v=n(s,h):v!==null&&(v(),v=null))},get inputs(){return[h]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(I){c.oversample=I,u.oversample=I},addEventListener(...I){return h.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return h.dispatchEvent(I[0])},removeEventListener(...I){return h.removeEventListener(I[0],I[1],I[2])}};a!==null&&(S.curve=a instanceof Float32Array?a:new Float32Array(a)),o!==S.oversample&&(S.oversample=o);const T=()=>{h.connect(c).connect(f),h.connect(d).connect(u).connect(m).connect(f),_=!0,i(y)&&(v=n(s,h))},x=()=>{h.disconnect(c),c.disconnect(f),h.disconnect(d),d.disconnect(u),u.disconnect(m),m.disconnect(f),_=!1,v!==null&&(v(),v=null)};return r(Gx(S,f),T,x)},Wc=()=>new DOMException("","NotSupportedError"),UKe={numberOfChannels:1},BKe=(n,e,t,i,r)=>class extends n{constructor(a,o,l){let c;if(typeof a=="number"&&o!==void 0&&l!==void 0)c={length:o,numberOfChannels:a,sampleRate:l};else if(typeof a=="object")c=a;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...UKe,...c},f=i(h,u,d);e($C,()=>$C(f))||f.addEventListener("statechange",(()=>{let m=0;const v=_=>{this._state==="running"&&(m>0?(f.removeEventListener("statechange",v),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):m+=1)};return v})()),super(f,h),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,mle(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},FKe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},zKe=(n,e,t,i,r,s,a)=>class extends n{constructor(l,c){const u=r(l),h={...FKe,...c},d=t(u,h),f=s(u),m=f?i():null,v=l.sampleRate/2;super(l,!1,d,m),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,v,-v),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?a(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){ax(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Og(this)&&uM(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},jKe=(n,e,t,i,r)=>()=>{const s=new WeakMap;let a=null,o=null,l=null;const c=async(u,h)=>{let d=t(u);const f=cc(d,h);if(!f){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:a===null?void 0:a,type:d.type};d=e(h,m),o!==null&&d.start(o),l!==null&&d.stop(l)}return s.set(h,d),f?(await n(h,u.detune,d.detune),await n(h,u.frequency,d.frequency)):(await i(h,u.detune,d.detune),await i(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){a=u},set start(u){o=u},set stop(u){l=u},render(u,h){const d=s.get(h);return d!==void 0?Promise.resolve(d):c(u,h)}}},HKe={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},VKe=(n,e,t,i,r,s,a)=>class extends n{constructor(l,c){const u=r(l),h={...HKe,...c},d=t(u,h),f=s(u),m=f?i():null;super(l,!1,d,m),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Lc,Su),this._orientationY=e(this,f,d.orientationY,Lc,Su),this._orientationZ=e(this,f,d.orientationZ,Lc,Su),this._positionX=e(this,f,d.positionX,Lc,Su),this._positionY=e(this,f,d.positionY,Lc,Su),this._positionZ=e(this,f,d.positionZ,Lc,Su),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},GKe=(n,e,t,i,r,s,a,o,l,c)=>()=>{const u=new WeakMap;let h=null;const d=async(f,m)=>{let v=null,_=s(f);const y={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation},S={...y,coneInnerAngle:_.coneInnerAngle,coneOuterAngle:_.coneOuterAngle,coneOuterGain:_.coneOuterGain,distanceModel:_.distanceModel,maxDistance:_.maxDistance,panningModel:_.panningModel,refDistance:_.refDistance,rolloffFactor:_.rolloffFactor},T=cc(_,m);if("bufferSize"in _)v=i(m,{...y,gain:1});else if(!T){const x={...S,orientationX:_.orientationX.value,orientationY:_.orientationY.value,orientationZ:_.orientationZ.value,positionX:_.positionX.value,positionY:_.positionY.value,positionZ:_.positionZ.value};_=r(m,x)}if(u.set(m,v===null?_:v),v!==null){if(h===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Z=new a(6,f.context.length,m.sampleRate),H=e(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});H.connect(Z.destination),h=(async()=>{const q=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(U,ee)=>{const W=t(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee===0?1:0});return await o(Z,U,W.offset),W}));for(let U=0;U<6;U+=1)q[U].connect(H,0,U),q[U].start(0);return c(Z)})()}const x=await h,I=i(m,{...y,gain:1});await l(f,m,I);const R=[];for(let Z=0;Z<x.numberOfChannels;Z+=1)R.push(x.getChannelData(Z));let N=[R[0][0],R[1][0],R[2][0]],L=[R[3][0],R[4][0],R[5][0]],k=i(m,{...y,gain:1}),z=r(m,{...S,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:L[0],positionY:L[1],positionZ:L[2]});I.connect(k).connect(z.inputs[0]),z.connect(v);for(let Z=128;Z<x.length;Z+=128){const H=[R[0][Z],R[1][Z],R[2][Z]],q=[R[3][Z],R[4][Z],R[5][Z]];if(H.some((U,ee)=>U!==N[ee])||q.some((U,ee)=>U!==L[ee])){N=H,L=q;const U=Z/m.sampleRate;k.gain.setValueAtTime(0,U),k=i(m,{...y,gain:0}),z=r(m,{...S,orientationX:N[0],orientationY:N[1],orientationZ:N[2],positionX:L[0],positionY:L[1],positionZ:L[2]}),k.gain.setValueAtTime(1,U),I.connect(k).connect(z.inputs[0]),z.connect(v)}}return v}return T?(await n(m,f.orientationX,_.orientationX),await n(m,f.orientationY,_.orientationY),await n(m,f.orientationZ,_.orientationZ),await n(m,f.positionX,_.positionX),await n(m,f.positionY,_.positionY),await n(m,f.positionZ,_.positionZ)):(await o(m,f.orientationX,_.orientationX),await o(m,f.orientationY,_.orientationY),await o(m,f.orientationZ,_.orientationZ),await o(m,f.positionX,_.positionX),await o(m,f.positionY,_.positionY),await o(m,f.positionZ,_.positionZ)),Vx(_)?await l(f,m,_.inputs[0]):await l(f,m,_),_};return{render(f,m){const v=u.get(m);return v!==void 0?Promise.resolve(v):d(f,m)}}},qKe={disableNormalization:!1},$Ke=(n,e,t,i)=>class wle{constructor(s,a){const o=e(s),l=i({...qKe,...a}),c=n(o,l);return t.add(c),c}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===wle.prototype||t.has(s)}},WKe=(n,e)=>(t,i,r)=>(n(i).replay(r),e(i,t,r)),YKe=(n,e,t)=>async(i,r,s)=>{const a=n(i);await Promise.all(a.activeInputs.map((o,l)=>Array.from(o).map(async([c,u])=>{const d=await e(c).render(c,r),f=i.context.destination;!t(c)&&(i!==f||!t(i))&&d.connect(s,u,l)})).reduce((o,l)=>[...o,...l],[]))},XKe=(n,e,t)=>async(i,r,s)=>{const a=e(i);await Promise.all(Array.from(a.activeInputs).map(async([o,l])=>{const u=await n(o).render(o,r);t(o)||u.connect(s,l)}))},KKe=(n,e,t,i)=>r=>n($C,()=>$C(r))?Promise.resolve(n(i,i)).then(s=>{if(!s){const a=t(r,512,0,1);r.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>r.currentTime,a.connect(r.destination)}return r.startRendering()}):new Promise(s=>{const a=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=o=>{a.disconnect(),s(o.renderedBuffer)},a.connect(r.destination),r.startRendering()}),ZKe=n=>(e,t)=>{n.set(e,t)},JKe=n=>(e,t)=>n.set(e,t),QKe=(n,e,t,i,r,s,a,o)=>(l,c)=>t(l).render(l,c).then(()=>Promise.all(Array.from(i(c)).map(u=>t(u).render(u,c)))).then(()=>r(c)).then(u=>(typeof u.copyFromChannel!="function"?(a(u),GH(u)):e(s,()=>s(u))||o(u),n.add(u),u)),eZe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},tZe=(n,e,t,i,r,s)=>class extends n{constructor(o,l){const c=r(o),u={...eZe,...l},h=t(c,u),d=s(c),f=d?i():null;super(o,!1,h,f),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},nZe=(n,e,t,i,r)=>()=>{const s=new WeakMap,a=async(o,l)=>{let c=t(o);const u=cc(c,l);if(!u){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,h)}return s.set(l,c),u?await n(l,o.pan,c.pan):await i(l,o.pan,c.pan),Vx(c)?await r(o,l,c.inputs[0]):await r(o,l,c),c};return{render(o,l){const c=s.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},iZe=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},rZe=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),r=URL.createObjectURL(t);let s=!1,a=!1;try{await i.audioWorklet.addModule(r);const o=new n(i,"a",{numberOfOutputs:0}),l=i.createOscillator();o.port.onmessage=()=>s=!0,o.onprocessorerror=()=>a=!0,l.connect(o),l.start(0),await i.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(r)}return s&&!a},sZe=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{i.disconnect(),r(t.currentTime!==0)},t.startRendering()})},aZe=()=>new DOMException("","UnknownError"),oZe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},lZe=(n,e,t,i,r,s,a)=>class extends n{constructor(l,c){const u=r(l),h={...oZe,...c},d=t(u,h),m=s(u)?i():null;super(l,!0,d,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},cZe=(n,e,t)=>()=>{const i=new WeakMap,r=async(s,a)=>{let o=e(s);if(!cc(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=n(a,c)}return i.set(a,o),Vx(o)?await t(s,a,o.inputs[0]):await t(s,a,o),o};return{render(s,a){const o=i.get(a);return o!==void 0?Promise.resolve(o):r(s,a)}}},uZe=()=>typeof window>"u"?null:window,hZe=(n,e)=>t=>{t.copyFromChannel=(i,r,s=0)=>{const a=n(s),o=n(r);if(o>=t.numberOfChannels)throw e();const l=t.length,c=t.getChannelData(o),u=i.length;for(let h=a<0?-a:0;h+a<l&&h<u;h+=1)i[h]=c[h+a]},t.copyToChannel=(i,r,s=0)=>{const a=n(s),o=n(r);if(o>=t.numberOfChannels)throw e();const l=t.length,c=t.getChannelData(o),u=i.length;for(let h=a<0?-a:0;h+a<l&&h<u;h+=1)c[h+a]=i[h]}},dZe=n=>e=>{e.copyFromChannel=(t=>(i,r,s=0)=>{const a=n(s),o=n(r);if(a<e.length)return t.call(e,i,o,a)})(e.copyFromChannel),e.copyToChannel=(t=>(i,r,s=0)=>{const a=n(s),o=n(r);if(a<e.length)return t.call(e,i,o,a)})(e.copyToChannel)},fZe=n=>(e,t)=>{const i=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=i),n(e,"buffer",r=>()=>{const s=r.call(e);return s===i?null:s},r=>s=>r.call(e,s===null?i:s))},pZe=(n,e)=>(t,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(i,()=>{const o=i.numberOfInputs;for(let l=0;l<o;l+=1)r.connect(i,0,l)},()=>r.disconnect(i))},Cle=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),Ale=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},mM=(n,e,t,i)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:s,set:a}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(s),set:i(a)})},mZe=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),gZe=n=>({...n,channelCount:n.numberOfOutputs}),vZe=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Mle=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(i){if(i.code!==9)throw i;Mle(n,e,t+1e-7)}},yZe=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},_Ze=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},bZe=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},XH=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Rle=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},KH=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},SZe=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},EZe=n=>{n.start=(e=>(t=0,i=0,r)=>{const s=n.buffer,a=s===null?i:Math.min(s.duration,i);s!==null&&a>s.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,a,r)})(n.start)},Ole=(n,e)=>{const t=e.createGain();n.connect(t);const i=(r=>()=>{r.call(n,t),n.removeEventListener("ended",i)})(n.disconnect);n.addEventListener("ended",i),Gx(n,t),n.stop=(r=>{let s=!1;return(a=0)=>{if(s)try{r.call(n,a)}catch{t.gain.setValueAtTime(0,a)}else r.call(n,a),s=!0}})(n.stop)},qx=(n,e)=>t=>{const i={value:n};return Object.defineProperties(t,{currentTarget:i,target:i}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},TZe=VWe(Jb),xZe=XWe(Jb),wZe=oXe(EU),Ile=new WeakMap,CZe=wXe(Ile),Cf=UYe(new Map,new WeakMap),Up=uZe(),Nle=tKe(Cf,Jp),ZH=xXe(zc),kl=YKe(zc,ZH,Mb),AZe=eYe(Nle,Bs,kl),xs=MXe(SU),Qg=MKe(Up),as=qXe(Qg),Ple=new WeakMap,Dle=vXe(qx),gM=sKe(Up),JH=jXe(gM),QH=HXe(Up),kle=VXe(Up),WC=oKe(Up),Za=wYe(GWe(lle),YWe(TZe,xZe,BP,wZe,FP,zc,CZe,cM,Bs,Jb,Og,Mb,uI),Cf,LXe(k5,FP,zc,Bs,qC,Og),Jp,TU,Wc,iXe(BP,k5,zc,Bs,qC,xs,Og,as),uXe(Ple,zc,mf),Dle,xs,JH,QH,kle,as,WC),MZe=QWe(Za,AZe,Jp,Nle,xs,as),eV=new WeakSet,lX=nKe(Up),Lle=KYe(new Uint32Array(1)),tV=hZe(Lle,Jp),nV=dZe(Lle),Ule=nYe(eV,Cf,Wc,lX,Qg,iZe(lX),tV,nV),xU=KWe(Uu),Ble=XKe(ZH,hM,Mb),Qp=GYe(Ble),$x=rKe(xU,Cf,yZe,_Ze,bZe,XH,Rle,KH,EZe,fZe(mM),Ole),em=WKe(CXe(hM),Ble),RZe=sYe(Qp,$x,Bs,em,kl),Af=CYe(qWe(cle),Ple,VH,AYe,UWe,BWe,FWe,zWe,jWe,N5,ale,gM,Mle),OZe=rYe(Za,RZe,Af,ml,$x,xs,as,qx),IZe=pYe(Za,mYe,Jp,ml,aKe(Uu,mM),xs,as,kl),NZe=LYe(Qp,Tle,Bs,em,kl),Qb=JKe(Ile),PZe=kYe(Za,Af,NZe,TU,Tle,xs,as,Qb),g0=QXe(Jb,QH),DZe=pZe(ml,g0),v0=pKe(gM,DZe),kZe=zYe(v0,Bs,kl),LZe=FYe(Za,kZe,v0,xs,as),UZe=VYe(fM,Bs,kl),BZe=HYe(Za,UZe,fM,xs,as,gZe),FZe=vKe(xU,$x,Uu,g0),Wx=gKe(xU,Cf,FZe,XH,KH),zZe=XYe(Qp,Wx,Bs,em,kl),jZe=YYe(Za,Af,zZe,Wx,xs,as,qx),Fle=yKe(Wc,mM),HZe=QYe(Fle,Bs,kl),VZe=JYe(Za,HZe,Fle,xs,as,Qb),GZe=aXe(Qp,xle,Bs,em,kl),qZe=sXe(Za,Af,GZe,xle,xs,as,Qb),zle=_Ke(Wc),$Ze=pXe(Qp,zle,Bs,em,kl),WZe=fXe(Za,Af,$Ze,zle,Wc,xs,as,Qb),YZe=EXe(Qp,Uu,Bs,em,kl),XZe=SXe(Za,Af,YZe,Uu,xs,as),KZe=TKe(TU,ml,pM,Wc),wU=KKe(Cf,Uu,pM,sZe(Uu,Qg)),ZZe=kXe($x,Bs,Qg,kl,wU),JZe=bKe(KZe),QZe=PXe(Za,JZe,ZZe,xs,as,Qb),eJe=gYe(Af,v0,Wx,pM,Wc,Cle,as,mM),jle=new WeakMap,tJe=JXe(IZe,eJe,Dle,as,jle,qx),Hle=RKe(xU,Cf,XH,Rle,KH,Ole),nJe=jKe(Qp,Hle,Bs,em,kl),iJe=zKe(Za,Af,Hle,nJe,xs,as,qx),Vle=$Ye($x),rJe=LKe(Vle,ml,Uu,Ale,g0),CU=kKe(Vle,ml,rJe,Ale,g0,gM,mM),sJe=IKe(BP,ml,v0,Uu,pM,CU,Wc,FP,Cle,g0),Gle=OKe(sJe),aJe=GKe(Qp,v0,Wx,Uu,Gle,Bs,Qg,em,kl,wU),oJe=VKe(Za,Af,Gle,aJe,xs,as,Qb),lJe=NKe(Jp),cJe=$Ke(lJe,xs,new WeakSet,vZe),uJe=DKe(v0,fM,Uu,CU,Wc,g0),qle=PKe(uJe,Wc),hJe=nZe(Qp,qle,Bs,em,kl),dJe=tZe(Za,Af,qle,hJe,xs,as),fJe=cZe(CU,Bs,kl),pJe=lZe(Za,ml,CU,fJe,xs,as,Qb),$le=$Xe(Up),iV=yXe(Up),Wle=new WeakMap,mJe=RXe(Wle,Qg),gJe=$le?WWe(Cf,Wc,gXe(Up),iV,_Xe(HWe),xs,mJe,as,WC,new WeakMap,new WeakMap,rZe(WC,Qg),Up):void 0,vJe=GXe(JH,as),yJe=nXe(eV,Cf,tXe,mXe,new WeakSet,xs,vJe,LP,$C,tV,nV),Yle=PYe(gJe,MZe,Ule,OZe,PZe,LZe,BZe,jZe,VZe,yJe,qZe,WZe,XZe,QZe,tJe,iJe,oJe,cJe,dJe,pJe),_Je=WXe(Za,xKe,xs,as),bJe=XXe(Za,wKe,xs,as),SJe=KXe(Za,CKe,xs,as),EJe=AKe(ml,as),TJe=ZXe(Za,EJe,xs),xJe=fYe(Yle,ml,Wc,aZe,_Je,bJe,SJe,TJe,gM),rV=OXe(jle),wJe=ZWe(rV),Xle=qYe(Jp),CJe=lXe(rV),Kle=hXe(Jp),Zle=new WeakMap,AJe=TXe(Zle,mf),MJe=fKe(Xle,Jp,ml,v0,fM,Wx,Uu,pM,Wc,Kle,iV,AJe,g0),RJe=cKe(ml,MJe,Uu,Wc,g0),OJe=NYe(Qp,Xle,$x,v0,fM,Wx,Uu,CJe,Kle,iV,Bs,WC,Qg,em,kl,wU),IJe=AXe(Wle),NJe=ZKe(Zle),cX=$le?RYe(wJe,Za,Af,OJe,RJe,zc,IJe,xs,as,WC,mZe,NJe,SZe,qx):void 0,PJe=eXe(Wc,Qg),DJe=QKe(eV,Cf,ZH,rV,wU,LP,tV,nV),kJe=BKe(Yle,Cf,ml,PJe,DJe),LJe=UXe(SU,JH),UJe=BXe(HH,QH),BJe=FXe(VH,kle),FJe=zXe(SU,as);function Th(n){return n===void 0}function Hi(n){return n!==void 0}function zJe(n){return typeof n=="function"}function gf(n){return typeof n=="number"}function Ly(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function Jle(n){return typeof n=="boolean"}function Mu(n){return Array.isArray(n)}function Hg(n){return typeof n=="string"}function dO(n){return Hg(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ai(n,e){if(!n)throw new Error(e)}function fd(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function Qle(n){!n.isOffline&&n.state!=="running"&&AU('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ece=!1,uX=!1;function hX(n){ece=n}function jJe(n){Th(n)&&ece&&!uX&&(uX=!0,AU("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let tce=console;function HJe(...n){tce.log(...n)}function AU(...n){tce.warn(...n)}function VJe(n){return new xJe(n)}function GJe(n,e,t){return new kJe(n,e,t)}const fh=typeof self=="object"?self:null,qJe=fh&&(fh.hasOwnProperty("AudioContext")||fh.hasOwnProperty("webkitAudioContext"));function $Je(n,e,t){return ai(Hi(cX),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof(fh==null?void 0:fh.BaseAudioContext)?fh==null?void 0:fh.AudioWorkletNode:cX)(n,e,t)}var z5=function(n,e){return z5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},z5(n,e)};function nce(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");z5(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ws(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(s=(r<3?a(s):r>3?a(e,t,s):a(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function ua(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(i.next(u))}catch(h){a(h)}}function l(u){try{c(i.throw(u))}catch(h){a(h)}}function c(u){u.done?s(u.value):r(u.value).then(o,l)}c((i=i.apply(n,e||[])).next())})}function sV(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(t=0)),t;)try{if(i=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(u){c=[6,u],r=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function MU(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function j5(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}class WJe{constructor(e,t,i,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),i=new Worker(t);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Rb(n){return BJe(n)}function Uy(n){return UJe(n)}function hI(n){return FJe(n)}function _E(n){return LJe(n)}function YJe(n){return n instanceof Ule}function XJe(n,e){return n==="value"||Rb(e)||Uy(e)||YJe(e)}function By(n,...e){if(!e.length)return n;const t=e.shift();if(Ly(n)&&Ly(t))for(const i in t)XJe(i,t[i])?n[i]=t[i]:Ly(t[i])?(n[i]||Object.assign(n,{[i]:{}}),By(n[i],t[i])):Object.assign(n,{[i]:t[i]});return By(n,...e)}function KJe(n,e){return n.length===e.length&&n.every((t,i)=>e[i]===t)}function fn(n,e,t=[],i){const r={},s=Array.from(e);if(Ly(s[0])&&i&&!Reflect.has(s[0],i)&&(Object.keys(s[0]).some(o=>Reflect.has(n,o))||(By(r,{[i]:s[0]}),t.splice(t.indexOf(i),1),s.shift())),s.length===1&&Ly(s[0]))By(r,s[0]);else for(let a=0;a<t.length;a++)Hi(s[a])&&(r[t[a]]=s[a]);return By(n,r)}function ZJe(n){return n.constructor.getDefaults()}function Rp(n,e){return Th(n)?e:n}function Ep(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class ev{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||fh&&this.toString()===fh.TONE_DEBUG_CLASS)&&HJe(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}ev.version=sle;const aV=1e-6;function ox(n,e){return n>e+aV}function H5(n,e){return ox(n,e)||rf(n,e)}function VP(n,e){return n+aV<e}function rf(n,e){return Math.abs(n-e)<aV}function JJe(n,e,t){return Math.max(Math.min(n,t),e)}class yd extends ev{constructor(){super(),this.name="Timeline",this._timeline=[];const e=fn(yd.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ai(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ai(H5(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const i=this._search(e,t);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const i=this._search(e,t);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const i=this._search(e);return i-1>=0?this._timeline[i-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(rf(this._timeline[t].time,e)){for(let i=t;i>=0&&rf(this._timeline[i].time,e);i--)t=i;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&H5(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let i=0;const r=this._timeline.length;let s=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;i<s;){let a=Math.floor(i+(s-i)/2);const o=this._timeline[a],l=this._timeline[a+1];if(rf(o[t],e)){for(let c=a;c<this._timeline.length;c++){const u=this._timeline[c];if(rf(u[t],e))a=c;else break}return a}else{if(VP(o[t],e)&&ox(l[t],e))return a;ox(o[t],e)?s=a:i=a+1}}return-1}_iterate(e,t=0,i=this._timeline.length-1){this._timeline.slice(t,i+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const i=this._search(e);return i!==-1&&this._iterate(t,0,i),this}forEachAfter(e,t){const i=this._search(e);return this._iterate(t,i+1),this}forEachBetween(e,t,i){let r=this._search(e),s=this._search(t);return r!==-1&&s!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[s].time===t&&(s-=1),this._iterate(i,r,s)):r===-1&&this._iterate(i,0,s),this}forEachFrom(e,t){let i=this._search(e);for(;i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(t,i+1),this}forEachAtTime(e,t){const i=this._search(e);if(i!==-1&&rf(this._timeline[i].time,e)){let r=i;for(let s=i;s>=0&&rf(this._timeline[s].time,e);s--)r=s;this._iterate(s=>{t(s)},r,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const ice=[];function RU(n){ice.push(n)}function QJe(n){ice.forEach(e=>e(n))}const rce=[];function OU(n){rce.push(n)}function eQe(n){rce.forEach(e=>e(n))}class vM extends ev{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Th(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const i=(...r)=>{t(...r),this.off(e,i)};return this.on(e,i),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Th(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Th(t))this._events[r]=[];else{const s=this._events[r];for(let a=s.length-1;a>=0;a--)s[a]===t&&s.splice(a,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(let r=0,s=i.length;r<s;r++)i[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const i=Object.getOwnPropertyDescriptor(vM.prototype,t);Object.defineProperty(e.prototype,t,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class sce extends vM{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class yM extends sce{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new yd,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=fn(yM.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=VJe({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new WJe(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(QJe(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,i){return this._context.createBuffer(e,t,i)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,i){return this._context.createPeriodicWave(e,t,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ai(_E(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ai(_E(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ai(_E(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ai(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ai(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ai(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ai(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return $Je(this.rawContext,e,t)}addAudioWorkletModule(e){return ua(this,void 0,void 0,function*(){ai(Hi(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ua(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return _E(this._context)?this._context.resume():Promise.resolve()}close(){return ua(this,void 0,void 0,function*(){_E(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&eQe(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),i=t.getChannelData(0);for(let s=0;s<i.length;s++)i[s]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:i+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const i=++this._timeoutIds,r=()=>{const s=this.now();this._timeouts.add({callback:()=>{e(),r()},id:i,time:s+t})};return r(),i}}class tQe extends sce{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,i){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ua(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Gi(n,e){Mu(e)?e.forEach(t=>Gi(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function _M(n,e){Mu(e)?e.forEach(t=>_M(n,t)):Object.defineProperty(n,e,{writable:!0})}const Br=()=>{};class hs extends ev{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Br;const e=fn(hs.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Hg(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Br,onload:Br,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ec().sampleRate}set(e){return e instanceof hs?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ua(this,void 0,void 0,function*(){const t=hs.load(e).then(i=>{this.set(i),this.onload(this)});hs.downloads.push(t);try{yield t}finally{const i=hs.downloads.indexOf(t);hs.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Mu(e)&&e[0].length>0,i=t?e.length:1,r=t?e[0].length:e.length,s=ec(),a=s.createBuffer(i,r,s.sampleRate),o=!t&&i===1?[e]:e;for(let l=0;l<i;l++)a.copyToChannel(o[l],l);return this._buffer=a,this}toMono(e){if(gf(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const i=this.numberOfChannels;for(let r=0;r<i;r++){const s=this.toArray(r);for(let a=0;a<s.length;a++)t[a]+=s[a]}t=t.map(r=>r/i),this.fromArray(t)}return this}toArray(e){if(gf(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let i=0;i<this.numberOfChannels;i++)t[i]=this.getChannelData(i);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){ai(this.loaded,"Buffer is not loaded");const i=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);ai(i<r,"The start time must be less than the end time");const s=r-i,a=ec().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)a.copyToChannel(this.getChannelData(o).subarray(i,r),o);return new hs(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new hs().fromArray(e)}static fromUrl(e){return ua(this,void 0,void 0,function*(){return yield new hs().load(e)})}static load(e){return ua(this,void 0,void 0,function*(){const t=hs.baseUrl===""||hs.baseUrl.endsWith("/")?hs.baseUrl:hs.baseUrl+"/",i=yield fetch(t+e);if(!i.ok)throw new Error(`could not load url: ${e}`);const r=yield i.arrayBuffer();return yield ec().decodeAudioData(r)})}static supportsType(e){const t=e.split("."),i=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return ua(this,void 0,void 0,function*(){for(yield Promise.resolve();hs.downloads.length;)yield hs.downloads[0]})}}hs.baseUrl="";hs.downloads=[];class IU extends yM{constructor(){super({clockSource:"offline",context:hI(arguments[0])?arguments[0]:GJe(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:hI(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=hI(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ua(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const i=Math.floor(this.sampleRate/128);e&&t%i===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return ua(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new hs(t)})}close(){return Promise.resolve()}}const ace=new tQe;let H_=ace;function ec(){return H_===ace&&qJe&&nQe(new yM),H_}function nQe(n,e=!1){e&&H_.dispose(),_E(n)?H_=new yM(n):hI(n)?H_=new IU(n):H_=n}function qat(){return H_.resume()}if(fh&&!fh.TONE_SILENCE_LOGGING){const e=` * Tone.js v${sle} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function oce(n){return Math.pow(10,n/20)}function lce(n){return 20*(Math.log(n)/Math.LN10)}function cce(n){return Math.pow(2,n/12)}let NU=440;function iQe(){return NU}function rQe(n){NU=n}function V_(n){return Math.round(uce(n))}function uce(n){return 69+12*Math.log2(n/NU)}function hce(n){return NU*Math.pow(2,(n-69)/12)}class oV extends ev{constructor(e,t,i){super(),this.defaultUnits="s",this._val=t,this._units=i,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const i=parseInt(e,10),r=t==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/i)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,i)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),i&&i!=="0"&&(r+=this._beatsToUnits(parseFloat(i)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof oV&&this.fromType(this._val),Th(this._val))return this._noArg();if(Hg(this._val)&&Th(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Ly(this._val)){let e=0;for(const t in this._val)if(Hi(this._val[t])){const i=this._val[t],r=new this.constructor(this.context,t).valueOf()*i;e+=r}return e}if(Hi(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Hg(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class pd extends oV{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new pd(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const i=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),o=Math.round(r/i)*i-r;return r+o*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let s=1;s<9;s++){const a=Math.pow(2,s);t.push(a+"n."),t.push(a+"n"),t.push(a+"t")}t.push("0");let i=t[0],r=new pd(this.context,t[0]).toSeconds();return t.forEach(s=>{const a=new pd(this.context,s).toSeconds();Math.abs(a-e)<Math.abs(r-e)&&(i=s,r=a)}),i}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const i=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const s=r.toString();return s.length>3&&(r=parseFloat(parseFloat(s).toFixed(3))),[i,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return V_(this.toFrequency())}_now(){return this.context.now()}}function $at(n,e){return new pd(ec(),n,e)}class wu extends pd{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return iQe()}static set A4(e){rQe(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:wu.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=sQe[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:wu.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,i){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),i&&i!=="0"&&(r*=this._beatsToUnits(parseFloat(i)/4)),r}}})}transpose(e){return new wu(this.context,this.valueOf()*cce(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return V_(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/wu.A4);let i=Math.round(12*t)+57;const r=Math.floor(i/12);return r<0&&(i+=-12*r),aQe[i%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return hce(e)}static ftom(e){return V_(e)}}const sQe={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},aQe=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Wat(n,e){return new wu(ec(),n,e)}class lT extends pd{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class sc extends ev{constructor(){super();const e=fn(sc.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:ec()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return jJe(e),new pd(this.context,e).toSeconds()}toFrequency(e){return new wu(this.context,e).toFrequency()}toTicks(e){return new lT(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(i=>{Th(e[i])&&delete t[i]}),t}get(){const e=ZJe(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const i=this[t];Hi(i)&&Hi(i.value)&&Hi(i.setValueAtTime)?e[t]=i.value:i instanceof sc?e[t]=i._getPartialProperties(e[t]):Mu(i)||gf(i)||Hg(i)||Jle(i)?e[t]=i:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Hi(this[t])&&(this[t]&&Hi(this[t].value)&&Hi(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof sc?this[t].set(e[t]):this[t]=e[t])}),this}}class bM extends yd{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,i){return fd(t,0),this.add(Object.assign({},i,{state:e,time:t})),this}getLastState(e,t){const i=this._search(t);for(let r=i;r>=0;r--){const s=this._timeline[r];if(s.state===e)return s}}getNextState(e,t){const i=this._search(t);if(i!==-1)for(let r=i;r<this._timeline.length;r++){const s=this._timeline[r];if(s.state===e)return s}}}class Yi extends sc{constructor(){const e=fn(Yi.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ai(Hi(e.param)&&(Rb(e.param)||e.param instanceof Yi),"param must be an AudioParam");!Rb(e.param);)e.param=e.param._param;this._swappable=Hi(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new yd(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Hi(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(sc.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Hi(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Hi(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Hi(this.maxValue)&&Hi(this.minValue)&&fd(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?oce(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?lce(e):e}setValueAtTime(e,t){const i=this.toSeconds(t),r=this._fromType(e);return ai(isFinite(r)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,i),this._events.add({time:i,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,i),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),i=this._events.getAfter(t),r=this._events.get(t);let s=this._initialValue;if(r===null)s=this._initialValue;else if(r.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const a=this._events.getBefore(r.time);let o;a===null?o=this._initialValue:o=a.value,r.type==="setTargetAtTime"&&(s=this._exponentialApproach(r.time,o,r.value,r.constant,t))}else if(i===null)s=r.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let a=r.value;if(r.type==="setTargetAtTime"){const o=this._events.getBefore(r.time);o===null?a=this._initialValue:a=o.value}i.type==="linearRampToValueAtTime"?s=this._linearInterpolate(r.time,a,i.time,i.value,t):s=this._exponentialInterpolate(r.time,a,i.time,i.value,t)}else s=r.value;return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const i=this._fromType(e),r=this.toSeconds(t);return ai(isFinite(i)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(i),this._events.add({time:r,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(i,r),this}exponentialRampToValueAtTime(e,t){let i=this._fromType(e);i=rf(i,0)?this._minOutput:i,this._assertRange(i);const r=this.toSeconds(t);return ai(isFinite(i)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(i,r),this}exponentialRampTo(e,t,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(e,i+this.toSeconds(t)),this}linearRampTo(e,t,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(e,i+this.toSeconds(t)),this}targetRampTo(e,t,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(e,i,t),this}exponentialApproachValueAtTime(e,t,i){t=this.toSeconds(t),i=this.toSeconds(i);const r=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+i*.9),this.linearRampToValueAtTime(e,t+i),this}setTargetAtTime(e,t,i){const r=this._fromType(e);ai(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const s=this.toSeconds(t);return this._assertRange(r),ai(isFinite(r)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:i,time:s,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,s,i),this._param.setTargetAtTime(r,s,i),this}setValueCurveAtTime(e,t,i,r=1){i=this.toSeconds(i),t=this.toSeconds(t);const s=this._fromType(e[0])*r;this.setValueAtTime(this._toType(s),t);const a=i/(e.length-1);for(let o=1;o<e.length;o++){const l=this._fromType(e[o])*r;this.linearRampToValueAtTime(this._toType(l),t+o*a)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ai(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),i=this._fromType(this.getValueAtTime(t));ai(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+i);const r=this._events.get(t),s=this._events.getAfter(t);return r&&rf(r.time,t)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),t):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),t)),this._events.add({time:t,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,t),this}rampTo(e,t=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,i):this.linearRampTo(e,t,i),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const i=this._events.get(t);if(i&&i.type==="setTargetAtTime"){const r=this._events.getAfter(i.time),s=r?r.time:t+2,a=(s-t)/10;for(let o=t;o<s;o+=a)e.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ai(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,i,r,s){return i+(t-i)*Math.exp(-(s-e)/r)}_linearInterpolate(e,t,i,r,s){return t+(r-t)*((s-e)/(i-e))}_exponentialInterpolate(e,t,i,r,s){return t*Math.pow(r/t,(s-e)/(i-e))}}class _n extends sc{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Hi(this.input)?Rb(this.input)||this.input instanceof Yi?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Hi(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Hi(e)&&(e instanceof _n||Uy(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(i=>{i.channelCount=e.channelCount,i.channelCountMode=e.channelCountMode,i.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ai(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,i=0){return vf(this,e,t,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return AU("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,i=0){return dce(this,e,t,i),this}chain(...e){return Ob(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Hi(this.input)&&(this.input instanceof _n?this.input.dispose():Uy(this.input)&&this.input.disconnect()),Hi(this.output)&&(this.output instanceof _n?this.output.dispose():Uy(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Ob(...n){const e=n.shift();n.reduce((t,i)=>(t instanceof _n?t.connect(i):Uy(t)&&vf(t,i),i),e)}function vf(n,e,t=0,i=0){for(ai(Hi(n),"Cannot connect from undefined node"),ai(Hi(e),"Cannot connect to undefined node"),(e instanceof _n||Uy(e))&&ai(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ai(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof _n||e instanceof Yi;)Hi(e.input)&&(e=e.input);for(;n instanceof _n;)Hi(n.output)&&(n=n.output);Rb(e)?n.connect(e,t):n.connect(e,t,i)}function dce(n,e,t=0,i=0){if(Hi(e))for(;e instanceof _n;)e=e.input;for(;!Uy(n);)Hi(n.output)&&(n=n.output);Rb(e)?n.disconnect(e,t):Uy(e)?n.disconnect(e,t,i):n.disconnect()}class Ii extends _n{constructor(){const e=fn(Ii.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Yi({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Gi(this,"gain")}static getDefaults(){return Object.assign(_n.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class lx extends _n{constructor(e){super(e),this.onended=Br,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ii({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const i=this.toSeconds(t);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(_n.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Br})}_startGain(e,t=1){ai(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=e+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+i):this._gainNode.gain.exponentialApproachValueAtTime(t,e,i)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ai(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Br&&(this.onended(this),this.onended=Br,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ai(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Br,this}}class lV extends lx{constructor(){const e=fn(lV.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),vf(this._source,this._gainNode),this.offset=new Yi({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(lx.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class rr extends _n{constructor(){const e=fn(rr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new lV({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(_n.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,i=0){return PU(this,e,t,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,i){return this._param.exponentialRampTo(e,t,i),this}linearRampTo(e,t,i){return this._param.linearRampTo(e,t,i),this}targetRampTo(e,t,i){return this._param.targetRampTo(e,t,i),this}exponentialApproachValueAtTime(e,t,i){return this._param.exponentialApproachValueAtTime(e,t,i),this}setTargetAtTime(e,t,i){return this._param.setTargetAtTime(e,t,i),this}setValueCurveAtTime(e,t,i,r){return this._param.setValueCurveAtTime(e,t,i,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,i){return this._param.rampTo(e,t,i),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function PU(n,e,t,i){(e instanceof Yi||Rb(e)||e instanceof rr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof rr&&(e.overridden=!0)),vf(n,e,t,i)}class cV extends Yi{constructor(){const e=fn(cV.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new yd(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Yi.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,i){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),s=this._events.get(t),a=Math.round(Math.max(1/i,1));for(let o=0;o<=a;o++){const l=i*o+t,c=this._exponentialApproach(s.time,s.value,r,i,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,t){const i=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(i),s=this._events.previousEvent(r),a=this._getTicksUntilEvent(s,i);return r.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,t){const i=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(i),s=this._events.previousEvent(r),a=this._getTicksUntilEvent(s,i);return r.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const i=this._fromType(e),r=this._events.get(t),s=Math.round(Math.max((t-r.time)*10,1)),a=(t-r.time)/s;for(let o=0;o<=s;o++){const l=a*o+r.time,c=this._exponentialInterpolate(r.time,r.value,t,i,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Th(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const i=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const s=this._events.get(t);return s&&s.time===t&&s.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(i+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),i=this._events.get(t);return Math.max(this._getTicksUntilEvent(i,t),0)}getDurationOfTicks(e,t){const i=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-i}getTimeOfTick(e){const t=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&i&&i.type==="linearRampToValueAtTime"&&t.value!==i.value){const r=this._fromType(this.getValueAtTime(t.time)),a=(this._fromType(this.getValueAtTime(i.time))-r)/(i.time-t.time),o=Math.sqrt(Math.pow(r,2)-2*a*(t.ticks-e)),l=(-r+o)/a,c=(-r-o)/a;return(l>0?l:c)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const i=this.toSeconds(t),r=this.toSeconds(e),s=this.getTicksAtTime(i);return this.getTicksAtTime(i+r)-s}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class uV extends rr{constructor(){const e=fn(uV.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new cV({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(rr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class hV extends sc{constructor(){const e=fn(hV.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new bM,this._tickOffset=new yd,this._ticksAtTime=new yd,this._secondsAtTime=new yd,this.frequency=new uV({context:this.context,units:e.units,value:e.frequency}),Gi(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},sc.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const i=this.toSeconds(e);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),Hi(t)&&this.setTicksAtTime(t,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const i=this._state.get(t);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),i=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),s={state:"paused",time:t};this._state.add(s);let a=r||i,o=r?r.ticks:0,l=null;return this._state.forEachBetween(a.time,t+this.sampleTime,c=>{let u=a.time;const h=this._tickOffset.get(c.time);h&&h.time>=a.time&&(o=h.ticks,u=h.time),a.state==="started"&&c.state!=="started"&&(o+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!==s.time&&(l={state:c.state,time:c.time,ticks:o})),a=c}),this._state.remove(s),l&&this._ticksAtTime.add(l),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),i=this.frequency.timeToTicks(e,t);this.setTicksAtTime(i,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);const r=this._secondsAtTime.get(e);let s=r||t,a=r?r.seconds:0,o=null;return this._state.forEachBetween(s.time,e+this.sampleTime,l=>{let c=s.time;const u=this._tickOffset.get(l.time);u&&u.time>=s.time&&(a=u.seconds,c=u.time),s.state==="started"&&l.state!=="started"&&(a+=l.time-c,l.time!==i.time&&(o={state:l.state,time:l.time,seconds:a})),s=l}),this._state.remove(i),o&&this._secondsAtTime.add(o),a}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const i=this._tickOffset.get(t),r=this._state.get(t),s=Math.max(i.time,r.time),a=this.frequency.getTicksAtTime(s)+e-i.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,t,i){let r=this._state.get(e);this._state.forEachBetween(e,t,a=>{r&&r.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),a.time-this.sampleTime,i),r=a});let s=null;if(r&&r.state==="started"){const a=Math.max(r.time,e),o=this.frequency.getTicksAtTime(a),l=this.frequency.getTicksAtTime(r.time),c=o-l;let u=Math.ceil(c)-c;u=rf(u,1)?0:u;let h=this.frequency.getTimeOfTick(o+u);for(;h<t;){try{i(h,Math.round(this.getTicksAtTime(h)))}catch(d){s=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class DU extends sc{constructor(){const e=fn(DU.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Br,this._lastUpdate=0,this._state=new bM("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new hV({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Gi(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(sc.getDefaults(),{callback:Br,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Qle(this.context);const i=this.toSeconds(e);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,t),i<this._lastUpdate&&this.emit("start",i,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const i=this.toSeconds(t),r=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(r+e,i)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,i=>{switch(i.state){case"started":const r=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,r);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(e,t,(i,r)=>{this.callback(i,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}vM.mixin(DU);class cx extends _n{constructor(){const e=fn(cx.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const t=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(t,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(t),this.delayTime=new Yi({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Gi(this,"delayTime")}static getDefaults(){return Object.assign(_n.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Yx extends _n{constructor(){const e=fn(Yx.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ii({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Gi(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(_n.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class dV extends _n{constructor(){const e=fn(dV.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Yx({context:this.context}),this.output=new Ii({context:this.context}),this.volume=this.input.volume,Ob(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(_n.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Ob(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}RU(n=>{n.destination=new dV({context:n})});OU(n=>{n.destination.dispose()});class oQe extends _n{constructor(){super(...arguments),this.name="Listener",this.positionX=new Yi({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Yi({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Yi({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Yi({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Yi({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Yi({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Yi({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Yi({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Yi({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(_n.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}RU(n=>{n.listener=new oQe({context:n})});OU(n=>{n.listener.dispose()});class fV extends ev{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=fn(fV.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const i=e.urls[t];this.add(t,i,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Br,onload:Br,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ai(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,i=Br,r=Br){return Hg(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new hs(this.baseUrl+t,i,r))):this._buffers.set(e.toString(),new hs(t,i,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class GP extends wu{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return V_(super._frequencyToUnits(e))}_ticksToUnits(e){return V_(super._ticksToUnits(e))}_beatsToUnits(e){return V_(super._beatsToUnits(e))}_secondsToUnits(e){return V_(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return hce(this.toMidi())}transpose(e){return new GP(this.context,this.toMidi()+e)}}class Do extends lT{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class lQe extends sc{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new yd,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}RU(n=>{n.draw=new lQe({context:n})});OU(n=>{n.draw.dispose()});class cQe extends ev{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ai(Hi(e.time),"Events must have a time property"),ai(Hi(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new uQe(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const i of t)if(i.event===e){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let i,r=null;if(t>0)if(e.left.right===null)i=e.left,i.right=e.right,r=i;else{for(i=e.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,r=i.parent,i.left=e.left,i.right=e.right)}else if(e.right.left===null)i=e.right,i.left=e.left,r=i;else{for(i=e.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,r=i.parent,i.left=e.left,i.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=i:e.parent.right=i:this._setRoot(i),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,i=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?i?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,i=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?i?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let i=t[0];for(let r=1;r<t.length;r++)t[r].low>i.low&&(i=t[r]);return i.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(i=>t.push(i)),t.forEach(i=>{i.event&&e(i.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const i=[];this._root.search(e,i),i.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const i=[];this._root.searchAfter(e,i),i.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class uQe{constructor(e,t,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class hQe extends ev{constructor(e){super(),this.name="TimelineValue",this._timeline=new yd({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class yf extends _n{constructor(){super(fn(yf.getDefaults(),arguments,["context"]))}connect(e,t=0,i=0){return PU(this,e,t,i),this}}class y0 extends yf{constructor(){const e=fn(y0.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Mu(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):zJe(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(rr.getDefaults(),{length:1024})}setMap(e,t=1024){const i=new Float32Array(t);for(let r=0,s=t;r<s;r++){const a=r/(s-1)*2-1;i[r]=e(a,r)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(i=>i.includes(e));ai(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kU extends yf{constructor(){const e=fn(kU.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new y0({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(yf.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Jy{constructor(e,t){this.id=Jy._eventId++,this._remainderTime=0;const i=Object.assign(Jy.getDefaults(),t);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:Br,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Jy._eventId=0;class pV extends Jy{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(pV.getDefaults(),t);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Jy.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return VP(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Do(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){VP(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Do(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);ox(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class LU extends sc{constructor(){const e=fn(LU.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new hQe(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new yd,this._repeatedEvents=new cQe,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new DU({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Gi(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(sc.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const i=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(i*Math.PI)*this._swingAmount;e+=new Do(this.context,this._swingTicks*2/3).toSeconds()*r}hX(!0),this._timeline.forEachAtTime(t,i=>i.invoke(e)),hX(!1)}schedule(e,t){const i=new Jy(this,{callback:e,time:new lT(this.context,t).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(e,t,i,r=1/0){const s=new pV(this,{callback:e,duration:new pd(this.context,r).toTicks(),interval:new pd(this.context,t).toTicks(),time:new lT(this.context,i).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,t){const i=new Jy(this,{callback:e,once:!0,time:new lT(this.context,t).toTicks()});return this._addEvent(i,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(t,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Do(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let i;return Hi(t)&&(i=this.toTicks(t)),this._clock.start(e,i),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Mu(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new pd(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new pd(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Do(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Do(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),i=this._clock.frequency.timeToTicks(e,t);this.ticks=i}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,t),s=t+r;this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),i=this.getTicksAtTime(t),r=e-i%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const i=this.now();let r=this.bpm,s=1/(60/r.getValueAtTime(i)/this.PPQ),a=[];if(e.units==="time"){const l=.015625/s,c=new Ii(l),u=new kU(-1),h=new Ii(l);r.chain(c,u,h),r=h,s=1/s,a=[c,u,h]}t||(e.getValueAtTime(i)!==0?t=e.getValueAtTime(i)/s:t=0);const o=new Ii(t);return r.connect(o),o.connect(e._param),a.push(o),this._syncedSignals.push({initial:e.value,nodes:a,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const i=this._syncedSignals[t];i.signal===e&&(i.nodes.forEach(r=>r.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),_M(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}vM.mixin(LU);RU(n=>{n.transport=new LU({context:n})});OU(n=>{n.transport.dispose()});class gl extends _n{constructor(e){super(e),this.input=void 0,this._state=new bM("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Br,this._syncedStop=Br,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Yx({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Gi(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(_n.getDefaults(),{mute:!1,onstop:Br,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,i){let r=Th(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ai(ox(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,i);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const s=this._state.get(r);s&&(s.offset=this.toSeconds(Rp(t,0)),s.duration=i?this.toSeconds(i):void 0);const a=this.context.transport.schedule(o=>{this._start(o,t,i)},r);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Qle(this.context),this._start(r,t,i);return this}stop(e){let t=Th(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Hi(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const i=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(i)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(ox(t,0)){const i=this._state.get(t);if(i&&i.state==="started"&&i.time!==t){const r=t-this.toSeconds(i.time);let s;i.duration&&(s=this.toSeconds(i.duration)-r),this._start(e,this.toSeconds(i.offset)+r,s)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Br,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class SM extends lx{constructor(){const e=fn(SM.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,vf(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Yi({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new hs(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(lx.getDefaults(),{url:new hs,loop:!1,loopEnd:0,loopStart:0,onload:Br,onerror:Br,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,i,r=1){ai(this.buffer.loaded,"buffer is either not set or not loaded");const s=this.toSeconds(e);this._startGain(s,r),this.loop?t=Rp(t,this.loopStart):t=Rp(t,0);let a=Math.max(this.toSeconds(t),0);if(this.loop){const o=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=o-l;H5(a,o)&&(a=(a-l)%c+l),rf(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,VP(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,a)),Hi(i)){let o=this.toSeconds(i);o=Math.max(o,0),this.stop(s+o)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ux extends gl{constructor(){const e=fn(ux.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gl.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(ai(e in dX,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=dX[this._type];this._source=new SM({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const lE=44100*5,VF=2,sg={brown:null,pink:null,white:null},dX={get brown(){if(!sg.brown){const n=[];for(let e=0;e<VF;e++){const t=new Float32Array(lE);n[e]=t;let i=0;for(let r=0;r<lE;r++){const s=Math.random()*2-1;t[r]=(i+.02*s)/1.02,i=t[r],t[r]*=3.5}}sg.brown=new hs().fromArray(n)}return sg.brown},get pink(){if(!sg.pink){const n=[];for(let e=0;e<VF;e++){const t=new Float32Array(lE);n[e]=t;let i,r,s,a,o,l,c;i=r=s=a=o=l=c=0;for(let u=0;u<lE;u++){const h=Math.random()*2-1;i=.99886*i+h*.0555179,r=.99332*r+h*.0750759,s=.969*s+h*.153852,a=.8665*a+h*.3104856,o=.55*o+h*.5329522,l=-.7616*l-h*.016898,t[u]=i+r+s+a+o+l+c+h*.5362,t[u]*=.11,c=h*.115926}}sg.pink=new hs().fromArray(n)}return sg.pink},get white(){if(!sg.white){const n=[];for(let e=0;e<VF;e++){const t=new Float32Array(lE);n[e]=t;for(let i=0;i<lE;i++)t[i]=Math.random()*2-1}sg.white=new hs().fromArray(n)}return sg.white}};function eS(n,e){return ua(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,i=new IU(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class mV extends lx{constructor(){const e=fn(mV.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],vf(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Yi({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Yi({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Gi(this,["frequency","detune"])}static getDefaults(){return Object.assign(lx.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oa extends gl{constructor(){const e=fn(Oa.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new rr({context:this.context,units:"frequency",value:e.frequency}),Gi(this,"frequency"),this.detune=new rr({context:this.context,units:"cents",value:e.detune}),Gi(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(gl.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),i=new mV({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oa._periodicWaveCache.find(t=>t.phase===this._phase&&KJe(t.partials,this._partials));{const e=Oa._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const i=this._getCachedPeriodicWave();if(Hi(i)){const{partials:r,wave:s}=i;this._wave=s,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,s]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(r,s);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oa._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Oa._periodicWaveCache.length>100&&Oa._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){fd(e,0);let t=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(t=i[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((s,a)=>r[a]=s),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const s=new Float32Array(r),a=new Float32Array(r);let o=1;if(e==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,r=o,this._partials.length===0)return[s,a]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(o=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],o=Math.max(o,2),r=o):this._partialCount=0,this._partials=[]}for(let l=1;l<r;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=o?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(s[l]=-u*Math.sin(t*l),a[l]=u*Math.cos(t*l)):(s[l]=0,a[l]=0)}return[s,a]}_inverseFFT(e,t,i){let r=0;const s=e.length;for(let a=0;a<s;a++)r+=e[a]*Math.cos(a*i)+t[a]*Math.sin(a*i);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let i=0;const r=Math.PI*2,s=32;for(let a=0;a<s;a++)i=Math.max(this._inverseFFT(e,t,a/s*r),i);return JJe(-this._inverseFFT(e,t,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oa._periodicWaveCache=[];class fce extends yf{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new y0({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Bp extends rr{constructor(){const e=fn(Bp.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ii({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(rr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class UU extends gl{constructor(){const e=fn(UU.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new fce({context:this.context}),this._modulationNode=new Ii({context:this.context}),this._carrier=new Oa({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oa({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Bp({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Gi(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oa.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class EM extends gl{constructor(){const e=fn(EM.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ii({context:this.context,gain:0}),this._carrier=new Oa({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new rr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Oa({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Bp({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Bp({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Gi(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oa.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class TM extends gl{constructor(){const e=fn(TM.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ii({context:this.context,gain:0}),this._thresh=new y0({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new rr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Oa({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Gi(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(gl.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class BU extends gl{constructor(){const e=fn(BU.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new rr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new rr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Gi(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oa.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,i=e/(this._oscillators.length-1);this._forEach((r,s)=>r.detune.value=t+i*s)}}get count(){return this._oscillators.length}set count(e){if(fd(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const i=new Oa({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):Br});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[t]=i}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,i)=>t.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class FU extends gl{constructor(){const e=fn(FU.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Bp({context:this.context,value:2}),this._pulse=new TM({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oa({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Gi(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(gl.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const fX={am:UU,fat:BU,fm:EM,oscillator:Oa,pulse:TM,pwm:FU};class hx extends gl{constructor(){const e=fn(hx.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new rr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new rr({context:this.context,units:"cents",value:e.detune}),Gi(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Oa.getDefaults(),EM.getDefaults(),UU.getDefaults(),BU.getDefaults(),TM.getDefaults(),FU.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=fX[e],i=this.now();if(this._oscillator){const r=this._oscillator;r.stop(i),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof fX[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&gf(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&gf(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Hg(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ua(this,arguments,void 0,function*(e=1024){return eS(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class gV extends rr{constructor(){super(fn(gV.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Ii({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Ob(this._constantSource,this._sum)}static getDefaults(){return Object.assign(rr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class dx extends yf{constructor(){const e=fn(dx.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Bp({context:this.context,value:e.max-e.min}),this._add=this.output=new gV({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(yf.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class vV extends yf{constructor(){super(fn(vV.getDefaults(),arguments)),this.name="Zero",this._gain=new Ii({context:this.context}),this.output=this._gain,this.input=void 0,vf(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),dce(this.context.getConstant(0),this._gain),this}}class Ib extends _n{constructor(){const e=fn(Ib.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Yi.prototype._fromType,this._toType=Yi.prototype._toType,this._is=Yi.prototype._is,this._clampValue=Yi.prototype._clampValue,this._oscillator=new Oa(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ii({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new rr({context:this.context,units:"audioRange",value:0}),this._zeros=new vV({context:this.context}),this._a2g=new fce({context:this.context}),this._scaler=this.output=new dx({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Gi(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Oa.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const t=this.min,i=this.max;this._units=e,this.min=t,this.max=i}get state(){return this._oscillator.state}connect(e,t,i){return(e instanceof Yi||e instanceof rr)&&(this.convert=e.convert,this.units=e.units),PU(this,e,t,i),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function pce(n,e=1/0){const t=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){fd(s,n,e),t.set(this,s)}})}}function tv(n,e=1/0){const t=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(s){fd(this.toSeconds(s),n,e),t.set(this,s)}})}}class zU extends gl{constructor(){const e=fn(zU.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new hs({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(gl.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Br,onerror:Br,playbackRate:1,reverse:!1})}load(e){return ua(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Br){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,i){return super.start(e,t,i),this}_start(e,t,i){this._loop?t=Rp(t,this._loopStart):t=Rp(t,0);const r=this.toSeconds(t),s=i;i=Rp(i,Math.max(this._buffer.duration-r,0));let a=this.toSeconds(i);a=a/this._playbackRate,e=this.toSeconds(e);const o=new SM({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Th(s)?o.start(e,r):o.start(e,r,a-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(i=>i.stop(t))}restart(e,t,i){return super.restart(e,t,i),this}_restart(e,t,i){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,i)}seek(e,t){const i=this.toSeconds(t);if(this._state.getValueAtTime(i)==="started"){const r=this.toSeconds(e);this._stop(i),this._start(i,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&fd(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&fd(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),i=this._state.getNextState("stopped",t);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ws([tv(0)],zU.prototype,"fadeIn",void 0);ws([tv(0)],zU.prototype,"fadeOut",void 0);class dQe extends yf{constructor(){super(...arguments),this.name="Abs",this._abs=new y0({context:this.context,mapping:e=>Math.abs(e)<.001?0:Math.abs(e)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class fQe extends yf{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new y0({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class yV extends dx{constructor(){const e=fn(yV.getDefaults(),arguments,["min","max","exponent"]);super(e),this.name="ScaleExp",this.input=this._exp=new kU({context:this.context,value:e.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(dx.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(e){this._exp.value=e}dispose(){return super.dispose(),this._exp.dispose(),this}}class wh extends _n{constructor(){const e=fn(wh.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new rr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(_n.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Hg(e))return e;{let i;for(i in fO)if(fO[i][t]===e)return i;return e}}_setCurve(e,t,i){if(Hg(i)&&Reflect.has(fO,i)){const r=fO[i];Ly(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Mu(i)&&e!=="_decayCurve")this[e]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const o=1/r;r=(1-a)/o}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let o=this._attackCurve;for(let l=1;l<o.length;l++)if(o[l-1]<=a&&a<=o[l]){o=this._attackCurve.slice(l),o[0]=a;break}this._sig.setValueCurveAtTime(o,e,r,t)}if(s&&this.sustain<1){const o=t*this.sustain,l=e+r;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,s+l):this._sig.exponentialApproachValueAtTime(o,l,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,e):(ai(Mu(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,i,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,i=1){return t=this.toSeconds(t),this.triggerAttack(t,i),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,i=0){return PU(this,e,t,i),this}asArray(){return ua(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,i=new IU(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=r+this.toSeconds(this.release),a=s*.1,o=s+a,l=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/o,decay:t*this.toSeconds(this.decay)/o,release:t*this.toSeconds(this.release)/o,context:i}));return l._sig.toDestination(),l.triggerAttackRelease(t*(r+a)/o,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ws([tv(0)],wh.prototype,"attack",void 0);ws([tv(0)],wh.prototype,"decay",void 0);ws([pce(0,1)],wh.prototype,"sustain",void 0);ws([tv(0)],wh.prototype,"release",void 0);const fO=(()=>{let e,t;const i=[];for(e=0;e<128;e++)i[e]=Math.sin(e/127*(Math.PI/2));const r=[],s=6.4;for(e=0;e<127;e++){t=e/127;const d=Math.sin(t*(Math.PI*2)*s-Math.PI/2)+1;r[e]=d/10+t*.83}r[127]=1;const a=[],o=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/127*o)/o;const l=[];for(e=0;e<128;e++)t=e/127,l[e]=.5*(1-Math.cos(Math.PI*t));const c=[];for(e=0;e<128;e++){t=e/127;const d=Math.pow(t,3)*4+.2,f=Math.cos(d*Math.PI*2*t);c[e]=Math.abs(f*(1-t))}function u(d){const f=new Array(d.length);for(let m=0;m<d.length;m++)f[m]=1-d[m];return f}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:i,Out:h(i)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:l,Out:u(l)},step:{In:a,Out:u(a)}}})();class Fp extends _n{constructor(){const e=fn(Fp.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Yx({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Gi(this,"volume")}static getDefaults(){return Object.assign(_n.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const i=this["_original_"+e]=this[e];this[e]=(...r)=>{const s=r[t],a=this.context.transport.schedule(o=>{r[t]=o,i.apply(this,r)},s);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,i,r){const s=this.toSeconds(i),a=this.toSeconds(t);return this.triggerAttack(e,s,r),this.triggerRelease(s+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class _f extends Fp{constructor(){const e=fn(_f.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Fp.getDefaults(),{detune:0,onsilence:Br,portamento:0})}triggerAttack(e,t,i=1){this.log("triggerAttack",e,t,i);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,i),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const i=this.toSeconds(t),r=e instanceof wu?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,s,i)}else this.frequency.setValueAtTime(r,i);return this}}ws([tv(0)],_f.prototype,"portamento",void 0);class jU extends wh{constructor(){super(fn(jU.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ii({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Nb extends _f{constructor(){const e=fn(Nb.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new hx(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new jU(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Gi(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(_f.getDefaults(),{envelope:Object.assign(Ep(wh.getDefaults(),Object.keys(_n.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ep(hx.getDefaults(),[...Object.keys(gl.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+i+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class qP extends _f{constructor(){const e=fn(qP.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new Nb({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Nb({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new rr({context:this.context,units:"frequency"}),this.detune=new rr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Bp({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new Ii({context:this.context,gain:0}),Gi(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(_f.getDefaults(),{harmonicity:3,oscillator:Object.assign(Ep(hx.getDefaults(),[...Object.keys(gl.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Ep(wh.getDefaults(),Object.keys(_n.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Ep(hx.getDefaults(),[...Object.keys(gl.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Ep(wh.getDefaults(),Object.keys(_n.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class $P extends _n{constructor(){const e=fn($P.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Yi({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Yi({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Yi({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Yi({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(_n.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){ai(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let a=0;a<e;a++){const l=Math.pow(a/e,2)*19980+20;t[a]=l}const i=new Float32Array(e),r=new Float32Array(e),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(t,i,r),i}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Tg extends _n{constructor(){const e=fn(Tg.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Ii({context:this.context}),this.output=new Ii({context:this.context}),this._filters=[],this._filters=[],this.Q=new rr({context:this.context,units:"positive",value:e.Q}),this.frequency=new rr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new rr({context:this.context,units:"cents",value:e.detune}),this.gain=new rr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Gi(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(_n.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){ai(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(i=>i.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=gf(e)?e:parseInt(e,10),i=[-12,-24,-48,-96];let r=i.indexOf(t);ai(r!==-1,`rolloff can only be ${i.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(s=>s.disconnect()),this._filters=new Array(r);for(let s=0;s<r;s++){const a=new $P({context:this.context});a.type=this._type,this.frequency.connect(a.frequency),this.detune.connect(a.detune),this.Q.connect(a.Q),this.gain.connect(a.gain),this._filters[s]=a}this._internalChannels=this._filters,Ob(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new $P({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),i=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((s,a)=>i[a]*=s)}),t.dispose(),i}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),_M(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class mce extends qP{constructor(){const e=fn(mce.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Bp({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(qP.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const pX=[1,1.483,1.932,2.546,2.63,3.897];class gce extends _f{constructor(){const e=fn(gce.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new rr({context:this.context,units:"cents",value:e.detune}),this.frequency=new rr({context:this.context,units:"frequency"}),this._amplitude=new Ii({context:this.context,gain:0}).connect(this.output),this._highpass=new Tg({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let t=0;t<pX.length;t++){const i=new EM({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:t===0?()=>this.onsilence(this):Br,type:"square"});i.connect(this._highpass),this._oscillators[t]=i;const r=new Bp({context:this.context,value:pX[t]});this._freqMultipliers[t]=r,this.frequency.chain(r,i.frequency),this.detune.connect(i.detune)}this._filterFreqScaler=new dx({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new wh({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return By(_f.getDefaults(),{envelope:Object.assign(Ep(wh.getDefaults(),Object.keys(_n.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,t=1){return this.envelope.triggerAttack(e,t),this._oscillators.forEach(i=>i.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(i=>{i.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(t=>t.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(t=>t.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(t=>t.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class HU extends Nb{constructor(){const e=fn(HU.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Gi(this,["oscillator","envelope"])}static getDefaults(){return By(_f.getDefaults(),Nb.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const i=this.toSeconds(t),r=this.toFrequency(e instanceof wu?e.toFrequency():e),s=r*this.octaves;return this.oscillator.frequency.setValueAtTime(s,i),this.oscillator.frequency.exponentialRampToValueAtTime(r,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ws([pce(0)],HU.prototype,"octaves",void 0);ws([tv(0)],HU.prototype,"pitchDecay",void 0);class vce extends Fp{constructor(){const e=fn(vce.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new ux(Object.assign({context:this.context},e.noise)),this.envelope=new jU(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Fp.getDefaults(),{envelope:Object.assign(Ep(wh.getDefaults(),Object.keys(_n.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Ep(ux.getDefaults(),Object.keys(gl.getDefaults())),{type:"white"})})}triggerAttack(e,t=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t,i=1){return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,i),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const yce=new Set;function _V(n){yce.add(n)}function _ce(n,e){const t=`registerProcessor("${n}", ${e})`;yce.add(t)}const pQe=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;_V(pQe);const mQe=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;_V(mQe);const gQe=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;_V(gQe);const vQe="feedback-comb-filter",yQe=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;_ce(vQe,yQe);class bV extends _n{constructor(){const e=fn(bV.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OnePoleFilter",this._frequency=e.frequency,this._type=e.type,this.input=new Ii({context:this.context}),this.output=new Ii({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(_n.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,t=this.toFrequency(this._frequency),i=1/(2*Math.PI*t);if(this._type==="lowpass"){const r=1/(i*this.context.sampleRate),s=r-1;this._filter=this.context.createIIRFilter([r,0],[1,s])}else{const r=1/(i*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let s=0;s<e;s++){const o=Math.pow(s/e,2)*19980+20;t[s]=o}const i=new Float32Array(e),r=new Float32Array(e);return this._filter.getFrequencyResponse(t,i,r),i}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class bce extends Fp{constructor(){const e=fn(bce.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r),ai(!gf(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const i=this._voices.indexOf(this._dummyVoice);this._voices.splice(i,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Fp.getDefaults(),{maxPolyphony:32,options:{},voice:Nb})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(i=>i.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ai(e instanceof _f,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else AU("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,i){e.forEach(r=>{const s=new GP(this.context,r).toMidi(),a=this._getNextAvailableVoice();a&&(a.triggerAttack(r,t,i),this._activeVoices.push({midi:s,voice:a,released:!1}),this.log("triggerAttack",r,t))})}_triggerRelease(e,t){e.forEach(i=>{const r=new GP(this.context,i).toMidi(),s=this._activeVoices.find(({midi:a,released:o})=>a===r&&!o);s&&(s.voice.triggerRelease(t),s.released=!0,this.log("triggerRelease",i,t))})}_scheduleEvent(e,t,i,r){ai(!this.disposed,"Synth was already disposed"),i<=this.now()?e==="attack"?this._triggerAttack(t,i,r):this._triggerRelease(t,i):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,i,r)},i-this.now())}triggerAttack(e,t,i){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,i),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const i=this.toSeconds(t);return this._scheduleEvent("release",e,i),this}triggerAttackRelease(e,t,i,r){const s=this.toSeconds(i);if(this.triggerAttack(e,s,r),Mu(t)){ai(Mu(e),"If the duration is an array, the notes must also be an array"),e=e;for(let a=0;a<e.length;a++){const o=t[Math.min(a,t.length-1)],l=this.toSeconds(o);ai(l>0,"The duration must be greater than 0"),this.triggerRelease(e[a],s+l)}}else{const a=this.toSeconds(t);ai(a>0,"The duration must be greater than 0"),this.triggerRelease(e,s+a)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=Ep(e,["onsilence","context"]);return this.options=By(this.options,t),this._voices.forEach(i=>i.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:i})=>{i.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class VU extends Fp{constructor(){const e=fn(VU.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(i=>{const r=parseInt(i,10);if(ai(dO(i)||gf(r)&&isFinite(r),`url key is neither a note or midi pitch: ${i}`),dO(i)){const s=new wu(this.context,i).toMidi();t[s]=e.urls[i]}else gf(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new fV({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Fp.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Br,onerror:Br,release:.1,urls:{}})}_findClosest(e){let i=0;for(;i<96;){if(this._buffers.has(e+i))return-i;if(this._buffers.has(e-i))return i;i++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,i=1){return this.log("triggerAttack",e,t,i),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=uce(new wu(this.context,r).toFrequency()),a=Math.round(s),o=s-a,l=this._findClosest(a),c=a-l,u=this._buffers.get(c),h=cce(l+o),d=new SM({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,u.duration/h,i),Mu(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const f=this._activeSources.get(a),m=f.indexOf(d);m!==-1&&f.splice(m,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(i=>{const r=new wu(this.context,i).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const s=this._activeSources.get(r);t=this.toSeconds(t),s.forEach(a=>{a.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,i,r=1){const s=this.toSeconds(i);return this.triggerAttack(e,s,r),Mu(t)?(ai(Mu(e),"notes must be an array when duration is array"),e.forEach((a,o)=>{const l=t[Math.min(o,t.length-1)];this.triggerRelease(a,s+this.toSeconds(l))})):this.triggerRelease(e,s+this.toSeconds(t)),this}add(e,t,i){if(ai(dO(e)||isFinite(e),`note must be a pitch or midi: ${e}`),dO(e)){const r=new wu(this.context,e).toMidi();this._buffers.add(r,t,i)}else this._buffers.add(e,t,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}ws([tv(0)],VU.prototype,"attack",void 0);ws([tv(0)],VU.prototype,"release",void 0);class jE extends sc{constructor(){const e=fn(jE.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new bM("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(sc.getDefaults(),{callback:Br,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,t=>{let i;if(t.state==="started"){t.id!==-1&&this.context.transport.clear(t.id);const r=t.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||gf(this._loop)&&this._loop>1){i=1/0,gf(this._loop)&&(i=this._loop*this._getLoopDuration());const s=this._state.getAfter(r);s!==null&&(i=Math.min(i,s.time-r)),i!==1/0&&(i=new Do(this.context,i));const a=new Do(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),a,new Do(this.context,r),i)}else t.id=this.context.transport.schedule(this._tick.bind(this),new Do(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return this._state.getValueAtTime(t)==="stopped"&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if(this._state.getValueAtTime(t)==="started"){this._state.setStateAtTime("stopped",t,{id:-1});const i=this._state.getBefore(t);let r=t;i!==null&&(r=i.time),this._rescheduleEvents(r)}return this}cancel(e){e=Rp(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,i=>{this.context.transport.clear(i.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(t)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;Jle(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*i}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Do(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Do(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(t!==null&&t.state==="started"){const i=this._getLoopDuration();return(e-t.time)%i/i}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class V5 extends jE{constructor(){const e=fn(V5.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new bM("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(t=>{Mu(t)?this.add(t[0],t[1]):this.add(t)})}static getDefaults(){return Object.assign(jE.getDefaults(),{events:[]})}start(e,t){const i=this.toTicks(e);if(this._state.getValueAtTime(i)!=="started"){t=Rp(t,this._loop?this._loopStart:0),this._loop?t=Rp(t,this._loopStart):t=Rp(t,0);const r=this.toTicks(t);this._state.add({id:-1,offset:r,state:"started",time:i}),this._forEach(s=>{this._startNote(s,i,r)})}return this}_startNote(e,t,i){t-=i,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<i&&(t+=this._getLoopDuration()),e.start(new Do(this.context,t))):e.startOffset<this._loopStart&&e.startOffset>=i&&(e.loop=!1,e.start(new Do(this.context,t))):e.startOffset>=i&&e.start(new Do(this.context,t))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(t=>{t.startOffset+=this._startOffset})}stop(e){const t=this.toTicks(e);return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._forEach(i=>{i.stop(e)}),this}at(e,t){const i=new lT(this.context,e).toTicks(),r=new Do(this.context,1).toSeconds(),s=this._events.values();let a=s.next();for(;!a.done;){const o=a.value;if(Math.abs(i-o.startOffset)<r)return Hi(t)&&(o.value=t),o;a=s.next()}return Hi(t)?(this.add(e,t),this.at(e)):null}add(e,t){e instanceof Object&&Reflect.has(e,"time")&&(t=e,e=t.time);const i=this.toTicks(e);let r;return t instanceof jE?(r=t,r.callback=this._tick.bind(this)):r=new jE({callback:this._tick.bind(this),context:this.context,value:t}),r.startOffset=i,r.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(r),this._restartEvent(r),this}_restartEvent(e){this._state.forEach(t=>{t.state==="started"?this._startNote(e,t.time,t.offset):e.stop(new Do(this.context,t.time))})}remove(e,t){return Ly(e)&&e.hasOwnProperty("time")&&(t=e,e=t.time),e=this.toTicks(e),this._events.forEach(i=>{i.startOffset===e&&(Th(t)||Hi(t)&&i.value===t)&&(this._events.delete(i),i.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(t=>t.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(t=>{t instanceof V5?t._forEach(e):e(t)}),this}_setAll(e,t){this._forEach(i=>{i[e]=t})}_tick(e,t){this.mute||this.callback(e,t)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(t=>{t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.loop=e,this._testLoopBoundries(t)})}get loopEnd(){return new Do(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopEnd=e,this._testLoopBoundries(t)})}get loopStart(){return new Do(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class GU extends _n{constructor(){const e=fn(GU.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new fQe({context:this.context}),this.a=new Ii({context:this.context,gain:0}),this.b=new Ii({context:this.context,gain:0}),this.output=new Ii({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new rr({context:this.context,units:"normalRange",value:e.fade}),Gi(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",vf(this._split,this.a.gain,0),vf(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(_n.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}let zp=class extends _n{constructor(e){super(e),this.name="Effect",this._dryWet=new GU({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ii({context:this.context}),this.effectReturn=new Ii({context:this.context}),this.input=new Ii({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Gi(this,"wet")}static getDefaults(){return Object.assign(_n.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}};class SV extends _n{constructor(){const e=fn(SV.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Yi({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Gi(this,"pan")}static getDefaults(){return Object.assign(_n.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class EV extends _n{constructor(){const e=fn(EV.getDefaults(),arguments,["smoothing"]);super(e),this.name="Follower",this._abs=this.input=new dQe({context:this.context}),this._lowpass=this.output=new bV({context:this.context,frequency:1/this.toSeconds(e.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=e.smoothing}static getDefaults(){return Object.assign(_n.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class Sce extends zp{constructor(){const e=fn(Sce.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(e),this.name="AutoWah",this._follower=new EV({context:this.context,smoothing:e.follower}),this._sweepRange=new yV({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this._inputBoost=new Ii({context:this.context}),this._bandpass=new Tg({context:this.context,rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new Tg({context:this.context,type:"peaking"}),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,Gi(this,["gain","Q"])}static getDefaults(){return Object.assign(zp.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(e){this._follower.smoothing=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()}get sensitivity(){return lce(1/this._inputBoost.gain.value)}set sensitivity(e){this._inputBoost.gain.value=1/oce(e)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const _Qe="bit-crusher",bQe=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;_ce(_Qe,bQe);class qU extends _n{constructor(){const e=fn(qU.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(_n.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class xM extends _n{constructor(){const e=fn(xM.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(_n.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class WP extends _n{constructor(e){super(e),this.name="StereoEffect",this.input=new Ii({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new GU({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new qU({context:this.context,channels:2}),this._merge=new xM({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Gi(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Ob(...e),vf(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Ob(...e),vf(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(_n.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class mX extends WP{constructor(e){super(e),this.feedback=new rr({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Ii({context:this.context}),this._feedbackR=new Ii({context:this.context}),this._feedbackSplit=new qU({context:this.context,channels:2}),this._feedbackMerge=new xM({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Gi(this,["feedback"])}static getDefaults(){return Object.assign(WP.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Ece extends mX{constructor(){const e=fn(Ece.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new Ib({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new Ib({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new cx({context:this.context}),this._delayNodeR=new cx({context:this.context}),this.frequency=this._lfoL.frequency,Gi(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(mX.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Tce extends zp{constructor(){const e=fn(Tce.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new y0({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(zp.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const t=e*100,i=Math.PI/180;this._shaper.setMap(r=>Math.abs(r)<.001?0:(3+t)*r*20*i/(Math.PI+t*Math.abs(r)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class gX extends zp{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Ii({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Gi(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(zp.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class xce extends gX{constructor(){const e=fn(xce.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new cx({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Gi(this,"delayTime")}static getDefaults(){return Object.assign(gX.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class wce extends WP{constructor(){const e=fn(wce.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(e),this.name="Phaser",this._lfoL=new Ib({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new Ib({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new rr({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),Gi(this,["frequency","Q"])}static getDefaults(){return Object.assign(WP.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,t){const i=[];for(let r=0;r<e;r++){const s=this.context.createBiquadFilter();s.type="allpass",this.Q.connect(s.Q),t.connect(s.frequency),i.push(s)}return i}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const t=this._baseFrequency*Math.pow(2,e);this._lfoL.max=t,this._lfoR.max=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class Cce extends zp{constructor(){const e=fn(Cce.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=this.toSeconds(e.decay);fd(t,.001),this._decay=t;const i=this.toSeconds(e.preDelay);fd(i,0),this._preDelay=i,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(zp.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),fd(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),fd(e,0),this._preDelay=e,this.generate()}generate(){return ua(this,void 0,void 0,function*(){const e=this.ready,t=new IU(2,this._decay+this._preDelay,this.context.sampleRate),i=new ux({context:t}),r=new ux({context:t}),s=new xM({context:t});i.connect(s,0,0),r.connect(s,0,1);const a=new Ii({context:t}).toDestination();s.connect(a),i.start(0),r.start(0),a.gain.setValueAtTime(0,0),a.gain.setValueAtTime(1,this._preDelay),a.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=t.render();return this.ready=o.then(Br),yield e,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Ace extends zp{constructor(){const e=fn(Ace.getDefaults(),arguments,["frequency","depth"]);super(e),this.name="Vibrato",this._delayNode=new cx({context:this.context,delayTime:0,maxDelay:e.maxDelay}),this._lfo=new Ib({context:this.context,type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,Gi(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(zp.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(e){this._lfo.type=e}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class po extends _n{constructor(){const e=fn(po.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ii({context:this.context}),po._allSolos.has(this.context)||po._allSolos.set(this.context,new Set),po._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(_n.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),po._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){po._soloed.has(this.context)||po._soloed.set(this.context,new Set),po._soloed.get(this.context).add(this)}_removeSolo(){po._soloed.has(this.context)&&po._soloed.get(this.context).delete(this)}_isSoloed(){return po._soloed.has(this.context)&&po._soloed.get(this.context).has(this)}_noSolos(){return!po._soloed.has(this.context)||po._soloed.has(this.context)&&po._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),po._allSolos.get(this.context).delete(this),this._removeSolo(),this}}po._allSolos=new Map;po._soloed=new Map;class TV extends _n{constructor(){const e=fn(TV.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new SV({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Yx({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Gi(this,["pan","volume"])}static getDefaults(){return Object.assign(_n.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class HE extends _n{constructor(){const e=fn(HE.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new po({solo:e.solo,context:this.context}),this._panVol=this.output=new TV({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Gi(this,["pan","volume"])}static getDefaults(){return Object.assign(_n.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return HE.buses.has(e)||HE.buses.set(e,new Ii({context:this.context})),HE.buses.get(e)}send(e,t=0){const i=this._getBus(e),r=new Ii({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(i),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}HE.buses=new Map;class xV extends _n{constructor(){const e=fn(xV.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(e),this.name="MultibandSplit",this.input=new Ii({context:this.context}),this.output=void 0,this.low=new Tg({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Tg({context:this.context,frequency:0,type:"highpass"}),this.mid=new Tg({context:this.context,frequency:0,type:"lowpass"}),this.high=new Tg({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new rr({context:this.context,units:"frequency",value:e.lowFrequency}),this.highFrequency=new rr({context:this.context,units:"frequency",value:e.highFrequency}),this.Q=new rr({context:this.context,units:"positive",value:e.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Gi(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(_n.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),_M(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Mce extends _n{constructor(){const e=fn(Mce.getDefaults(),arguments,["threshold","ratio"]);super(e),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new Yi({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new Yi({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new Yi({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new Yi({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new Yi({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),Gi(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(_n.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Rce extends _n{constructor(){const e=fn(Rce.getDefaults(),arguments,["low","mid","high"]);super(e),this.name="EQ3",this.output=new Ii({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new xV({context:this.context,highFrequency:e.highFrequency,lowFrequency:e.lowFrequency}),this._lowGain=new Ii({context:this.context,gain:e.low,units:"decibels"}),this._midGain=new Ii({context:this.context,gain:e.mid,units:"decibels"}),this._highGain=new Ii({context:this.context,gain:e.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Gi(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(_n.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),_M(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}ec().transport;function Xat(){return ec().transport}ec().destination;ec().destination;function Kat(){return ec().destination}ec().listener;ec().draw;function Zat(){return ec().draw}ec();function Oce(n){return n!==null&&typeof n=="object"&&"name"in n&&typeof n.name=="string"}function Ice(n){return n!==null&&typeof n=="object"&&"step"in n&&typeof n.step=="number"&&"alt"in n&&typeof n.alt=="number"&&!isNaN(n.step)&&!isNaN(n.alt)}var Nce=[0,2,4,-1,1,3,5],Pce=Nce.map(n=>Math.floor(n*7/12));function Dce(n){const{step:e,alt:t,oct:i,dir:r=1}=n,s=Nce[e]+7*t;if(i===void 0)return[r*s];const a=i-Pce[e]-4*t;return[r*s,r*a]}var SQe=[3,0,4,1,5,2,6];function EQe(n){const[e,t,i]=n,r=SQe[TQe(e)],s=Math.floor((e+1)/7);if(t===void 0)return{step:r,alt:s,dir:i};const a=t+4*s+Pce[r];return{step:r,alt:s,oct:a,dir:i}}function TQe(n){const e=(n+1)%7;return e<0?7+e:e}var vX=(n,e)=>Array(Math.abs(e)+1).join(n),G5=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),xQe="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",wQe="(AA|A|P|M|m|d|dd)([-+]?\\d+)",CQe=new RegExp("^"+xQe+"|"+wQe+"$");function AQe(n){const e=CQe.exec(`${n}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var yX={};function YP(n){return typeof n=="string"?yX[n]||(yX[n]=MQe(n)):Ice(n)?YP(OQe(n)):Oce(n)?YP(n.name):G5}var _X=[0,2,4,5,7,9,11],kce="PMMPPMM";function MQe(n){const e=AQe(n);if(e[0]==="")return G5;const t=+e[0],i=e[1],r=(Math.abs(t)-1)%7,s=kce[r];if(s==="M"&&i==="P")return G5;const a=s==="M"?"majorable":"perfectable",o=""+t+i,l=t<0?-1:1,c=t===8||t===-8?t:l*(r+1),u=RQe(a,i),h=Math.floor((Math.abs(t)-1)/7),d=l*(_X[r]+u+12*h),f=(l*(_X[r]+u)%12+12)%12,m=Dce({step:r,alt:u,oct:h,dir:l});return{empty:!1,name:o,num:t,q:i,step:r,alt:u,dir:l,type:a,simple:c,semitones:d,chroma:f,coord:m,oct:h}}function RQe(n,e){return e==="M"&&n==="majorable"||e==="P"&&n==="perfectable"?0:e==="m"&&n==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(n==="perfectable"?e.length:e.length+1):0}function OQe(n){const{step:e,alt:t,oct:i=0,dir:r}=n;if(!r)return"";const s=e+1+7*i,a=s===0?e+1:s,o=r<0?"-":"",l=kce[e]==="M"?"majorable":"perfectable";return o+a+IQe(l,t)}function IQe(n,e){return e===0?n==="majorable"?"M":"P":e===-1&&n==="majorable"?"m":e>0?vX("A",e):vX("d",n==="perfectable"?e:e+1)}var bX=(n,e)=>Array(Math.abs(e)+1).join(n),Lce=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),SX=new Map,NQe=n=>"CDEFGAB".charAt(n),PQe=n=>n<0?bX("b",-n):bX("#",n),DQe=n=>n[0]==="b"?-n.length:n.length;function YC(n){const e=JSON.stringify(n),t=SX.get(e);if(t)return t;const i=typeof n=="string"?FQe(n):Ice(n)?YC(zQe(n)):Oce(n)?YC(n.name):Lce;return SX.set(e,i),i}var kQe=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function LQe(n){const e=kQe.exec(n);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:["","","",""]}function UQe(n){return YC(EQe(n))}var BQe=(n,e)=>(n%e+e)%e,GF=[0,2,4,5,7,9,11];function FQe(n){const e=LQe(n);if(e[0]===""||e[3]!=="")return Lce;const t=e[0],i=e[1],r=e[2],s=(t.charCodeAt(0)+3)%7,a=DQe(i),o=r.length?+r:void 0,l=Dce({step:s,alt:a,oct:o}),c=t+i+r,u=t+i,h=(GF[s]+a+120)%12,d=o===void 0?BQe(GF[s]+a,12)-12*99:GF[s]+a+12*(o+1),f=d>=0&&d<=127?d:null,m=o===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:i,alt:a,chroma:h,coord:l,freq:m,height:d,letter:t,midi:f,name:c,oct:o,pc:u,step:s}}function zQe(n){const{step:e,alt:t,oct:i}=n,r=NQe(e);if(!r)return"";const s=r+PQe(t);return i||i===0?s+i:s}function Uce(n,e){const t=YC(n),i=Array.isArray(e)?e:YP(e).coord;if(t.empty||!i||i.length<2)return"";const r=t.coord,s=r.length===1?[r[0]+i[0]]:[r[0]+i[0],r[1]+i[1]];return UQe(s).name}function Bce(n,e){const t=e.length,i=(n%t+t)%t;return e.slice(i,t).concat(e.slice(0,i))}var Pb={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Fce=n=>Number(n).toString(2).padStart(12,"0"),EX=n=>parseInt(n,2),jQe=/^[01]{12}$/;function zce(n){return jQe.test(n)}var HQe=n=>typeof n=="number"&&n>=0&&n<=4095,VQe=n=>n&&zce(n.chroma),TX={[Pb.chroma]:Pb};function jce(n){const e=zce(n)?n:HQe(n)?Fce(n):Array.isArray(n)?YQe(n):VQe(n)?n.chroma:Pb.chroma;return TX[e]=TX[e]||WQe(e)}var GQe=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function qQe(n){const e=[];for(let t=0;t<12;t++)n.charAt(t)==="1"&&e.push(GQe[t]);return e}function $Qe(n){const e=n.split("");return e.map((t,i)=>Bce(i,e).join(""))}function WQe(n){const e=EX(n),t=$Qe(n).map(EX).filter(s=>s>=2048).sort()[0],i=Fce(t),r=qQe(n);return{empty:!1,name:"",setNum:e,chroma:n,normalized:i,intervals:r}}function YQe(n){if(n.length===0)return Pb.chroma;let e;const t=[0,0,0,0,0,0,0,0,0,0,0,0];for(let i=0;i<n.length;i++)e=YC(n[i]),e.empty&&(e=YP(n[i])),e.empty||(t[e.chroma]=1);return t.join("")}var XQe=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],KQe=XQe;({...Pb});var Hce=[],dI={};function ZQe(n,e,t){const i=QQe(n),r={...jce(n),name:t||"",quality:i,intervals:n,aliases:e};Hce.push(r),r.name&&(dI[r.name]=r),dI[r.setNum]=r,dI[r.chroma]=r,r.aliases.forEach(s=>JQe(r,s))}function JQe(n,e){dI[e]=n}function QQe(n){const e=t=>n.indexOf(t)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}KQe.forEach(([n,e,t])=>ZQe(n.split(" "),t.split(" "),e));Hce.sort((n,e)=>n.setNum-e.setNum);var eet=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],tet=eet,net={...Pb,intervals:[],aliases:[]},Uw={};function iet(n){return Uw[n]||net}function ret(n,e,t=[]){const i={...jce(n),name:e,intervals:n,aliases:t};return Uw[i.name]=i,Uw[i.setNum]=i,Uw[i.chroma]=i,i.aliases.forEach(r=>set(i,r)),i}function set(n,e){Uw[e]=n}tet.forEach(([n,e,...t])=>ret(n.split(" "),e,t));var aet=Uce;function Jat(n,e){return aet(n,[0,e])}var wV=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],xX={...Pb,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},oet=wV.map(cet),q5={};oet.forEach(n=>{q5[n.name]=n,n.aliases.forEach(e=>{q5[e]=n})});function Vce(n){return typeof n=="string"?q5[n.toLowerCase()]||xX:n&&n.name?Vce(n.name):xX}function cet(n){const[e,t,i,r,s,a,o]=n,l=o?[o]:[],c=Number(t).toString(2);return{empty:!1,intervals:iet(r).intervals,modeNum:e,chroma:c,normalized:c,name:r,setNum:t,alt:i,triad:s,seventh:a,aliases:l}}function Gce(n){return(e,t)=>{const i=Vce(e);if(i.empty)return[];const r=Bce(i.modeNum,n),s=i.intervals.map(a=>Uce(t,a));return r.map((a,o)=>s[o]+a)}}Gce(wV.map(n=>n[4]));Gce(wV.map(n=>n[5]));function Db(n){"@babel/helpers - typeof";return Db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(n)}function ph(){ph=function(){return e};var n,e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(W,Q,X){W[Q]=X.value},s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(W,Q,X){return Object.defineProperty(W,Q,{value:X,enumerable:!0,configurable:!0,writable:!0}),W[Q]}try{c({},"")}catch{c=function(X,Y,ae){return X[Y]=ae}}function u(W,Q,X,Y){var ae=Q&&Q.prototype instanceof y?Q:y,se=Object.create(ae.prototype),ue=new U(Y||[]);return r(se,"_invoke",{value:z(W,X,ue)}),se}function h(W,Q,X){try{return{type:"normal",arg:W.call(Q,X)}}catch(Y){return{type:"throw",arg:Y}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",m="executing",v="completed",_={};function y(){}function S(){}function T(){}var x={};c(x,a,function(){return this});var I=Object.getPrototypeOf,R=I&&I(I(ee([])));R&&R!==t&&i.call(R,a)&&(x=R);var N=T.prototype=y.prototype=Object.create(x);function L(W){["next","throw","return"].forEach(function(Q){c(W,Q,function(X){return this._invoke(Q,X)})})}function k(W,Q){function X(ae,se,ue,Ne){var ve=h(W[ae],W,se);if(ve.type!=="throw"){var _e=ve.arg,Le=_e.value;return Le&&Db(Le)=="object"&&i.call(Le,"__await")?Q.resolve(Le.__await).then(function(He){X("next",He,ue,Ne)},function(He){X("throw",He,ue,Ne)}):Q.resolve(Le).then(function(He){_e.value=He,ue(_e)},function(He){return X("throw",He,ue,Ne)})}Ne(ve.arg)}var Y;r(this,"_invoke",{value:function(se,ue){function Ne(){return new Q(function(ve,_e){X(se,ue,ve,_e)})}return Y=Y?Y.then(Ne,Ne):Ne()}})}function z(W,Q,X){var Y=d;return function(ae,se){if(Y===m)throw Error("Generator is already running");if(Y===v){if(ae==="throw")throw se;return{value:n,done:!0}}for(X.method=ae,X.arg=se;;){var ue=X.delegate;if(ue){var Ne=Z(ue,X);if(Ne){if(Ne===_)continue;return Ne}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(Y===d)throw Y=v,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);Y=m;var ve=h(W,Q,X);if(ve.type==="normal"){if(Y=X.done?v:f,ve.arg===_)continue;return{value:ve.arg,done:X.done}}ve.type==="throw"&&(Y=v,X.method="throw",X.arg=ve.arg)}}}function Z(W,Q){var X=Q.method,Y=W.iterator[X];if(Y===n)return Q.delegate=null,X==="throw"&&W.iterator.return&&(Q.method="return",Q.arg=n,Z(W,Q),Q.method==="throw")||X!=="return"&&(Q.method="throw",Q.arg=new TypeError("The iterator does not provide a '"+X+"' method")),_;var ae=h(Y,W.iterator,Q.arg);if(ae.type==="throw")return Q.method="throw",Q.arg=ae.arg,Q.delegate=null,_;var se=ae.arg;return se?se.done?(Q[W.resultName]=se.value,Q.next=W.nextLoc,Q.method!=="return"&&(Q.method="next",Q.arg=n),Q.delegate=null,_):se:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,_)}function H(W){var Q={tryLoc:W[0]};1 in W&&(Q.catchLoc=W[1]),2 in W&&(Q.finallyLoc=W[2],Q.afterLoc=W[3]),this.tryEntries.push(Q)}function q(W){var Q=W.completion||{};Q.type="normal",delete Q.arg,W.completion=Q}function U(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(H,this),this.reset(!0)}function ee(W){if(W||W===""){var Q=W[a];if(Q)return Q.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length)){var X=-1,Y=function ae(){for(;++X<W.length;)if(i.call(W,X))return ae.value=W[X],ae.done=!1,ae;return ae.value=n,ae.done=!0,ae};return Y.next=Y}}throw new TypeError(Db(W)+" is not iterable")}return S.prototype=T,r(N,"constructor",{value:T,configurable:!0}),r(T,"constructor",{value:S,configurable:!0}),S.displayName=c(T,l,"GeneratorFunction"),e.isGeneratorFunction=function(W){var Q=typeof W=="function"&&W.constructor;return!!Q&&(Q===S||(Q.displayName||Q.name)==="GeneratorFunction")},e.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,T):(W.__proto__=T,c(W,l,"GeneratorFunction")),W.prototype=Object.create(N),W},e.awrap=function(W){return{__await:W}},L(k.prototype),c(k.prototype,o,function(){return this}),e.AsyncIterator=k,e.async=function(W,Q,X,Y,ae){ae===void 0&&(ae=Promise);var se=new k(u(W,Q,X,Y),ae);return e.isGeneratorFunction(Q)?se:se.next().then(function(ue){return ue.done?ue.value:se.next()})},L(N),c(N,l,"Generator"),c(N,a,function(){return this}),c(N,"toString",function(){return"[object Generator]"}),e.keys=function(W){var Q=Object(W),X=[];for(var Y in Q)X.push(Y);return X.reverse(),function ae(){for(;X.length;){var se=X.pop();if(se in Q)return ae.value=se,ae.done=!1,ae}return ae.done=!0,ae}},e.values=ee,U.prototype={constructor:U,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(q),!Q)for(var X in this)X.charAt(0)==="t"&&i.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=n)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var X=this;function Y(_e,Le){return ue.type="throw",ue.arg=Q,X.next=_e,Le&&(X.method="next",X.arg=n),!!Le}for(var ae=this.tryEntries.length-1;ae>=0;--ae){var se=this.tryEntries[ae],ue=se.completion;if(se.tryLoc==="root")return Y("end");if(se.tryLoc<=this.prev){var Ne=i.call(se,"catchLoc"),ve=i.call(se,"finallyLoc");if(Ne&&ve){if(this.prev<se.catchLoc)return Y(se.catchLoc,!0);if(this.prev<se.finallyLoc)return Y(se.finallyLoc)}else if(Ne){if(this.prev<se.catchLoc)return Y(se.catchLoc,!0)}else{if(!ve)throw Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return Y(se.finallyLoc)}}}},abrupt:function(Q,X){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var ae=this.tryEntries[Y];if(ae.tryLoc<=this.prev&&i.call(ae,"finallyLoc")&&this.prev<ae.finallyLoc){var se=ae;break}}se&&(Q==="break"||Q==="continue")&&se.tryLoc<=X&&X<=se.finallyLoc&&(se=null);var ue=se?se.completion:{};return ue.type=Q,ue.arg=X,se?(this.method="next",this.next=se.finallyLoc,_):this.complete(ue)},complete:function(Q,X){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&X&&(this.next=X),_},finish:function(Q){for(var X=this.tryEntries.length-1;X>=0;--X){var Y=this.tryEntries[X];if(Y.finallyLoc===Q)return this.complete(Y.completion,Y.afterLoc),q(Y),_}},catch:function(Q){for(var X=this.tryEntries.length-1;X>=0;--X){var Y=this.tryEntries[X];if(Y.tryLoc===Q){var ae=Y.completion;if(ae.type==="throw"){var se=ae.arg;q(Y)}return se}}throw Error("illegal catch attempt")},delegateYield:function(Q,X,Y){return this.delegate={iterator:ee(Q),resultName:X,nextLoc:Y},this.method==="next"&&(this.arg=n),_}},e}function wX(n,e,t,i,r,s,a){try{var o=n[s](a),l=o.value}catch(c){return void t(c)}o.done?e(l):Promise.resolve(l).then(i,r)}function cT(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function a(l){wX(s,i,r,a,o,"next",l)}function o(l){wX(s,i,r,a,o,"throw",l)}a(void 0)})}}function uet(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function het(n,e){if(Db(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Db(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qce(n){var e=het(n,"string");return Db(e)=="symbol"?e:e+""}function det(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,qce(i.key),i)}}function fet(n,e,t){return e&&det(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function pp(n,e,t){return(e=qce(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const fI={"ar-SA":["ar-SA-HamedNeural","ar-SA-ZariyahNeural"],"de-DE":["de-DE-AmalaNeural","de-DE-ConradNeural","de-DE-KatjaNeural","de-DE-KillianNeural"],"en-US":["en-US-AriaNeural","en-US-AnaNeural","en-US-ChristopherNeural","en-US-EricNeural","en-US-GuyNeural","en-US-JennyNeural","en-US-MichelleNeural","en-US-RogerNeural","en-US-SteffanNeural"],"es-ES":["es-ES-AlvaroNeural","es-ES-ElviraNeural"],"fr-FR":["fr-FR-DeniseNeural","fr-FR-EloiseNeural","fr-FR-HenriNeural"],"ja-JP":["ja-JP-KeitaNeural","ja-JP-NanamiNeural"],"ko-KR":["ko-KR-InJoonNeural","ko-KR-SunHiNeural"],"pt-BR":["pt-BR-AntonioNeural","pt-BR-FranciscaNeural"],"ru-RU":["ru-RU-DmitryNeural","ru-RU-SvetlanaNeural"],"zh-CN":["zh-CN-XiaoxiaoNeural","zh-CN-XiaoyiNeural","zh-CN-YunjianNeural","zh-CN-liaoning-XiaobeiNeural","zh-CN-shaanxi-XiaoniNeural","zh-CN-YunxiNeural","zh-CN-YunxiaNeural","zh-CN-YunyangNeural"],"zh-TW":["zh-TW-HsiaoChenNeural","zh-TW-YunJheNeural","zh-TW-HsiaoYuNeural"]},pI={"ar-SA-HamedNeural":"","ar-SA-ZariyahNeural":"","de-DE-AmalaNeural":"Amala","de-DE-BerndNeural":"Bernd","de-DE-ChristophNeural":"Christoph","de-DE-ConradNeural":"Conrad","de-DE-ElkeNeural":"Elke","de-DE-GiselaNeural":"Gisela","de-DE-KasperNeural":"Kasper","de-DE-KatjaNeural":"Katja","de-DE-KillianNeural":"Killian","de-DE-KlarissaNeural":"Klarissa","de-DE-KlausNeural":"Klaus","de-DE-LouisaNeural":"Louisa","de-DE-MajaNeural":"Maja","de-DE-RalfNeural":"Ralf","de-DE-TanjaNeural":"Tanja","en-US-AIGenerate1Neural":"AIGenerate1","en-US-AIGenerate2Neural":"AIGenerate2","en-US-AmberNeural":"Amber","en-US-AnaNeural":"Ana","en-US-AndrewNeural":"Andrew","en-US-AriaNeural":"Aria","en-US-AshleyNeural":"Ashley","en-US-BlueNeural":"Blue","en-US-BrandonNeural":"Brandon","en-US-BrianNeural":"Brian","en-US-ChristopherNeural":"Christopher","en-US-CoraNeural":"Cora","en-US-DavisNeural":"Davis","en-US-ElizabethNeural":"Elizabeth","en-US-EmmaNeural":"Emma","en-US-EricNeural":"Eric","en-US-GuyNeural":"Guy","en-US-JacobNeural":"Jacob","en-US-JaneNeural":"Jane","en-US-JasonNeural":"Jason","en-US-JennyMultilingualNeural":"Jenny Multilingual","en-US-JennyMultilingualV2Neural":"Jenny Multilingual V2","en-US-JennyNeural":"Jenny","en-US-MichelleNeural":"Michelle","en-US-MonicaNeural":"Monica","en-US-NancyNeural":"Nancy","en-US-RogerNeural":"Roger","en-US-RyanMultilingualNeural":"Ryan Multilingual","en-US-SaraNeural":"Sara","en-US-SteffanNeural":"Steffan","en-US-TonyNeural":"Tony","es-ES-AbrilNeural":"Abril","es-ES-AlvaroNeural":"lvaro","es-ES-ArnauNeural":"Arnau","es-ES-DarioNeural":"Dario","es-ES-EliasNeural":"Elias","es-ES-ElviraNeural":"Elvira","es-ES-EstrellaNeural":"Estrella","es-ES-IreneNeural":"Irene","es-ES-LaiaNeural":"Laia","es-ES-LiaNeural":"Lia","es-ES-NilNeural":"Nil","es-ES-SaulNeural":"Saul","es-ES-TeoNeural":"Teo","es-ES-TrianaNeural":"Triana","es-ES-VeraNeural":"Vera","fr-FR-AlainNeural":"Alain","fr-FR-BrigitteNeural":"Brigitte","fr-FR-CelesteNeural":"Celeste","fr-FR-ClaudeNeural":"Claude","fr-FR-CoralieNeural":"Coralie","fr-FR-DeniseNeural":"Denise","fr-FR-EloiseNeural":"Eloise","fr-FR-HenriNeural":"Henri","fr-FR-JacquelineNeural":"Jacqueline","fr-FR-JeromeNeural":"Jerome","fr-FR-JosephineNeural":"Josephine","fr-FR-MauriceNeural":"Maurice","fr-FR-YvesNeural":"Yves","fr-FR-YvetteNeural":"Yvette","ja-JP-AoiNeural":"","ja-JP-DaichiNeural":"","ja-JP-KeitaNeural":"","ja-JP-MayuNeural":"","ja-JP-NanamiNeural":"","ja-JP-NaokiNeural":"","ja-JP-ShioriNeural":"","ko-KR-BongJinNeural":"","ko-KR-GookMinNeural":"","ko-KR-InJoonNeural":"","ko-KR-JiMinNeural":"","ko-KR-SeoHyeonNeural":"","ko-KR-SoonBokNeural":"","ko-KR-SunHiNeural":"","ko-KR-YuJinNeural":"","pt-BR-AntonioNeural":"Antnio","pt-BR-BrendaNeural":"Brenda","pt-BR-DonatoNeural":"Donato","pt-BR-ElzaNeural":"Elza","pt-BR-FabioNeural":"Fabio","pt-BR-FranciscaNeural":"Francisca","pt-BR-GiovannaNeural":"Giovanna","pt-BR-HumbertoNeural":"Humberto","pt-BR-JulioNeural":"Julio","pt-BR-LeilaNeural":"Leila","pt-BR-LeticiaNeural":"Leticia","pt-BR-ManuelaNeural":"Manuela","pt-BR-NicolauNeural":"Nicolau","pt-BR-ValerioNeural":"Valerio","pt-BR-YaraNeural":"Yara","ru-RU-DariyaNeural":"","ru-RU-DmitryNeural":"","ru-RU-SvetlanaNeural":"","wuu-CN-XiaotongNeural":"","wuu-CN-YunzheNeural":"","yue-CN-XiaoMinNeural":"","yue-CN-YunSongNeural":"","zh-CN-XiaochenNeural":"","zh-CN-XiaohanNeural":"","zh-CN-XiaomengNeural":"","zh-CN-XiaomoNeural":"","zh-CN-XiaoqiuNeural":"","zh-CN-XiaorouNeural":"","zh-CN-XiaoruiNeural":"","zh-CN-XiaoshuangNeural":"","zh-CN-XiaoxiaoNeural":"","zh-CN-XiaoxuanNeural":"","zh-CN-XiaoyanNeural":"","zh-CN-XiaoyiNeural":"","zh-CN-XiaoyouNeural":"","zh-CN-XiaozhenNeural":"","zh-CN-YunfengNeural":"","zh-CN-YunhaoNeural":"","zh-CN-YunjianNeural":"","zh-CN-YunjieNeural":"","zh-CN-YunxiNeural":"","zh-CN-YunxiaNeural":"","zh-CN-YunyangNeural":"","zh-CN-YunyeNeural":"","zh-CN-YunzeNeural":"","zh-CN-guangxi-YunqiNeural":"","zh-CN-henan-YundengNeural":"","zh-CN-liaoning-XiaobeiNeural":"","zh-CN-liaoning-YunbiaoNeural":"","zh-CN-shaanxi-XiaoniNeural":"","zh-CN-shandong-YunxiangNeural":"","zh-CN-sichuan-YunxiNeural":"","zh-TW-HsiaoChenNeural":"","zh-TW-HsiaoYuNeural":"","zh-TW-YunJheNeural":""};var pet=function(){var n=cT(ph().mark(function e(t){var i;return ph().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=new AudioContext,s.next=3,i.decodeAudioData(t);case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}},e)}));return function(t){return n.apply(this,arguments)}}();function met(n){if(Array.isArray(n))return n}function get(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(i=s.call(t)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}function CX(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function $ce(n,e){if(n){if(typeof n=="string")return CX(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?CX(n,e):void 0}}function vet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CV(n,e){return met(n)||get(n,e)||$ce(n,e)||vet()}const yet={"ar-SA":"","de-DE":"Deutsch","en-US":"English","es-ES":"Espaol","fr-FR":"Franais","ja-JP":"","ko-KR":"","pt-BR":"Portugus","ru-RU":"","zh-CN":"","zh-TW":""};var _et=function(){return Object.entries(yet).map(function(e){var t=CV(e,2),i=t[0],r=t[1];return{label:r,value:i}})};const Wce="%[a-f0-9]{2}",AX=new RegExp("("+Wce+")|([^%]+?)","gi"),MX=new RegExp("("+Wce+")+","gi");function $5(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;const t=n.slice(0,e),i=n.slice(e);return Array.prototype.concat.call([],$5(t),$5(i))}function bet(n){try{return decodeURIComponent(n)}catch{let e=n.match(AX)||[];for(let t=1;t<e.length;t++)n=$5(e,t).join(""),e=n.match(AX)||[];return n}}function Eet(n){const e={"%FE%FF":"","%FF%FE":""};let t=MX.exec(n);for(;t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{const r=bet(t[0]);r!==t[0]&&(e[t[0]]=r)}t=MX.exec(n)}e["%C2"]="";const i=Object.keys(e);for(const r of i)n=n.replace(new RegExp(r,"g"),e[r]);return n}function Tet(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return decodeURIComponent(n)}catch{return Eet(n)}}function xet(n,e){const t={};if(Array.isArray(e))for(const i of e){const r=Object.getOwnPropertyDescriptor(n,i);r!=null&&r.enumerable&&Object.defineProperty(t,i,r)}else for(const i of Reflect.ownKeys(n)){const r=Object.getOwnPropertyDescriptor(n,i);if(r.enumerable){const s=n[i];e(i,s,n)&&Object.defineProperty(t,i,r)}}return t}function Yce(n,e){if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(n===""||e==="")return[];const t=n.indexOf(e);return t===-1?[]:[n.slice(0,t),n.slice(t+e.length)]}const wet=n=>n==null,Cet=n=>encodeURIComponent(n).replaceAll(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),W5=Symbol("encodeFragmentIdentifier");function Aet(n){switch(n.arrayFormat){case"index":return e=>(t,i)=>{const r=t.length;return i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?t:i===null?[...t,[mo(e,n),"[",r,"]"].join("")]:[...t,[mo(e,n),"[",mo(r,n),"]=",mo(i,n)].join("")]};case"bracket":return e=>(t,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?t:i===null?[...t,[mo(e,n),"[]"].join("")]:[...t,[mo(e,n),"[]=",mo(i,n)].join("")];case"colon-list-separator":return e=>(t,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?t:i===null?[...t,[mo(e,n),":list="].join("")]:[...t,[mo(e,n),":list=",mo(i,n)].join("")];case"comma":case"separator":case"bracket-separator":{const e=n.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(i,r)=>r===void 0||n.skipNull&&r===null||n.skipEmptyString&&r===""?i:(r=r===null?"":r,i.length===0?[[mo(t,n),e,mo(r,n)].join("")]:[[i,mo(r,n)].join(n.arrayFormatSeparator)])}default:return e=>(t,i)=>i===void 0||n.skipNull&&i===null||n.skipEmptyString&&i===""?t:i===null?[...t,mo(e,n)]:[...t,[mo(e,n),"=",mo(i,n)].join("")]}}function Met(n){let e;switch(n.arrayFormat){case"index":return(t,i,r)=>{if(e=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),!e){r[t]=i;return}r[t]===void 0&&(r[t]={}),r[t][e[1]]=i};case"bracket":return(t,i,r)=>{if(e=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),!e){r[t]=i;return}if(r[t]===void 0){r[t]=[i];return}r[t]=[...r[t],i]};case"colon-list-separator":return(t,i,r)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){r[t]=i;return}if(r[t]===void 0){r[t]=[i];return}r[t]=[...r[t],i]};case"comma":case"separator":return(t,i,r)=>{const s=typeof i=="string"&&i.includes(n.arrayFormatSeparator),a=typeof i=="string"&&!s&&cg(i,n).includes(n.arrayFormatSeparator);i=a?cg(i,n):i;const o=s||a?i.split(n.arrayFormatSeparator).map(l=>cg(l,n)):i===null?i:cg(i,n);r[t]=o};case"bracket-separator":return(t,i,r)=>{const s=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!s){r[t]=i&&cg(i,n);return}const a=i===null?[]:cg(i,n).split(n.arrayFormatSeparator);if(r[t]===void 0){r[t]=a;return}r[t]=[...r[t],...a]};default:return(t,i,r)=>{if(r[t]===void 0){r[t]=i;return}r[t]=[...[r[t]].flat(),i]}}}function Xce(n){if(typeof n!="string"||n.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function mo(n,e){return e.encode?e.strict?Cet(n):encodeURIComponent(n):n}function cg(n,e){return e.decode?Tet(n):n}function Kce(n){return Array.isArray(n)?n.sort():typeof n=="object"?Kce(Object.keys(n)).sort((e,t)=>Number(e)-Number(t)).map(e=>n[e]):n}function Zce(n){const e=n.indexOf("#");return e!==-1&&(n=n.slice(0,e)),n}function Ret(n){let e="";const t=n.indexOf("#");return t!==-1&&(e=n.slice(t)),e}function RX(n,e,t){return t==="string"&&typeof n=="string"?n:typeof t=="function"&&typeof n=="string"?t(n):e.parseBooleans&&n!==null&&(n.toLowerCase()==="true"||n.toLowerCase()==="false")?n.toLowerCase()==="true":t==="number"&&!Number.isNaN(Number(n))&&typeof n=="string"&&n.trim()!==""||e.parseNumbers&&!Number.isNaN(Number(n))&&typeof n=="string"&&n.trim()!==""?Number(n):n}function AV(n){n=Zce(n);const e=n.indexOf("?");return e===-1?"":n.slice(e+1)}function MV(n,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...e},Xce(e.arrayFormatSeparator);const t=Met(e),i=Object.create(null);if(typeof n!="string"||(n=n.trim().replace(/^[?#&]/,""),!n))return i;for(const r of n.split("&")){if(r==="")continue;const s=e.decode?r.replaceAll("+"," "):r;let[a,o]=Yce(s,"=");a===void 0&&(a=s),o=o===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:cg(o,e),t(cg(a,e),o,i)}for(const[r,s]of Object.entries(i))if(typeof s=="object"&&s!==null&&e.types[r]!=="string")for(const[a,o]of Object.entries(s)){const l=e.types[r]?e.types[r].replace("[]",""):void 0;s[a]=RX(o,e,l)}else typeof s=="object"&&s!==null&&e.types[r]==="string"?i[r]=Object.values(s).join(e.arrayFormatSeparator):i[r]=RX(s,e,e.types[r]);return e.sort===!1?i:(e.sort===!0?Object.keys(i).sort():Object.keys(i).sort(e.sort)).reduce((r,s)=>{const a=i[s];return r[s]=a&&typeof a=="object"&&!Array.isArray(a)?Kce(a):a,r},Object.create(null))}function Jce(n,e){if(!n)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},Xce(e.arrayFormatSeparator);const t=a=>e.skipNull&&wet(n[a])||e.skipEmptyString&&n[a]==="",i=Aet(e),r={};for(const[a,o]of Object.entries(n))t(a)||(r[a]=o);const s=Object.keys(r);return e.sort!==!1&&s.sort(e.sort),s.map(a=>{const o=n[a];return o===void 0?"":o===null?mo(a,e):Array.isArray(o)?o.length===0&&e.arrayFormat==="bracket-separator"?mo(a,e)+"[]":o.reduce(i(a),[]).join("&"):mo(a,e)+"="+mo(o,e)}).filter(a=>a.length>0).join("&")}function Qce(n,e){var r;e={decode:!0,...e};let[t,i]=Yce(n,"#");return t===void 0&&(t=n),{url:((r=t==null?void 0:t.split("?"))==null?void 0:r[0])??"",query:MV(AV(n),e),...e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:cg(i,e)}:{}}}function eue(n,e){e={encode:!0,strict:!0,[W5]:!0,...e};const t=Zce(n.url).split("?")[0]||"",i=AV(n.url),r={...MV(i,{sort:!1}),...n.query};let s=Jce(r,e);s&&(s=`?${s}`);let a=Ret(n.url);if(typeof n.fragmentIdentifier=="string"){const o=new URL(t);o.hash=n.fragmentIdentifier,a=e[W5]?o.hash:`#${n.fragmentIdentifier}`}return`${t}${s}${a}`}function tue(n,e,t){t={parseFragmentIdentifier:!0,[W5]:!1,...t};const{url:i,query:r,fragmentIdentifier:s}=Qce(n,t);return eue({url:i,query:xet(r,e),fragmentIdentifier:s},t)}function Oet(n,e,t){const i=Array.isArray(e)?r=>!e.includes(r):(r,s)=>!e(r,s);return tue(n,i,t)}const Iet=Object.freeze(Object.defineProperty({__proto__:null,exclude:Oet,extract:AV,parse:MV,parseUrl:Qce,pick:tue,stringify:Jce,stringifyUrl:eue},Symbol.toStringTag,{value:"Module"}));var Cl=[];for(var qF=0;qF<256;++qF)Cl.push((qF+256).toString(16).slice(1));function Net(n,e=0){return(Cl[n[e+0]]+Cl[n[e+1]]+Cl[n[e+2]]+Cl[n[e+3]]+"-"+Cl[n[e+4]]+Cl[n[e+5]]+"-"+Cl[n[e+6]]+Cl[n[e+7]]+"-"+Cl[n[e+8]]+Cl[n[e+9]]+"-"+Cl[n[e+10]]+Cl[n[e+11]]+Cl[n[e+12]]+Cl[n[e+13]]+Cl[n[e+14]]+Cl[n[e+15]]).toLowerCase()}var pO,Pet=new Uint8Array(16);function Det(){if(!pO&&(pO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pO(Pet)}var ket=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const OX={randomUUID:ket};function Let(n,e,t){if(OX.randomUUID&&!e&&!n)return OX.randomUUID();n=n||{};var i=n.random||(n.rng||Det)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Net(i)}var Uet=function(e,t){var i=t.voice;return'<voice name="'.concat(i,'">').concat(e,"</voice>")},Bet=function(e,t){var i=t.style;return i?'<mstts:express-as style="'.concat(i,'">').concat(e,"</mstts:express-as>"):e},Fet=function(e,t){var i=t.pitch,r=t.rate;return!i&&!r?e:'<prosody pitch="'.concat(Math.floor((i||1)*100),'%" rate="').concat(Math.floor((r||1)*100),'%">').concat(e,"</prosody>")},zet=function(e){return'<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="https://www.w3.org/2001/mstts" xml:lang="en-US">'.concat(e,"</speak>")},jet=function(e,t){var i=Fet(e,t);return i=Bet(i,t),i=Uet(i,t),i=zet(i),i},IX=function(e,t){for(var i=[],r=0,s=Object.entries(e);r<s.length;r++){var a=CV(s[r],2),o=a[0],l=a[1];i.push("".concat(o,":").concat(l))}return i.push("",t),i.join(`\r
`)};function Het(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=$ce(n))||e){t&&(n=t);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(c){throw c},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw s}}}}var Vet=function(e){var t={},i=Het(e.slice(0,e.indexOf(`\r
\r
`)).split(`\r
`)),r;try{for(i.s();!(r=i.n()).done;){var s=r.value,a=s.split(":",2),o=CV(a,2),l=o[0],c=o[1];t[l]=c}}catch(u){i.e(u)}finally{i.f()}return{data:e.slice(e.indexOf(`\r
\r
`)+4),headers:t}},Get="wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1",qet="6A5AA1D4EAFF4E9FB37E23D68491D6F4",$et=JSON.stringify({context:{synthesis:{audio:{metadataoptions:{sentenceBoundaryEnabled:!1,wordBoundaryEnabled:!0},outputFormat:"audio-24khz-48kbitrate-mono-mp3"}}}}),Wet=function(e){var t=new Date().toString(),i={"Content-Type":"application/json; charset=utf-8",Path:"speech.config","X-Timestamp":t},r={"Content-Type":"application/ssml+xml",Path:"ssml","X-RequestId":e,"X-Timestamp":t};return{configHeader:i,contentHeader:r}},nue=function(){var n=cT(ph().mark(function e(t){var i,r,s,a,o,l,c,u,h,d,f,m,v,_=arguments;return ph().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return i=t.payload,r=_.length>1&&_[1]!==void 0?_[1]:{},s=r.proxyUrl,a=r.token,o=i.input,l=i.options,c=Let().replaceAll("-",""),u=Iet.stringifyUrl({query:{ConnectionId:c,TrustedClientToken:a||qet},url:s||Get}),h=Wet(c),d=h.configHeader,f=h.contentHeader,m=IX(d,$et),v=IX(f,jet(o,l)),S.abrupt("return",new Promise(function(T,x){var I=new WebSocket(u);I.binaryType="arraybuffer";var R=function(){I.send(m),I.send(v)},N=new ArrayBuffer(0),L=function(){var z=cT(ph().mark(function Z(H){var q,U,ee,W,Q,X,Y,ae;return ph().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(typeof H.data!="string"){ue.next=13;break}q=Vet(H.data),U=q.headers,ue.t0=U.Path,ue.next=ue.t0==="turn.end"?5:11;break;case 5:if(I.close(),N.byteLength){ue.next=8;break}return ue.abrupt("return");case 8:return ee=new Response(N),T(ee),ue.abrupt("break",11);case 11:ue.next=14;break;case 13:H.data instanceof ArrayBuffer&&(W=new DataView(H.data),Q=W.getInt16(0),H.data.byteLength>Q+2&&(X=H.data.slice(2+Q),Y=new ArrayBuffer(N.byteLength+X.byteLength),ae=new Uint8Array(Y),ae.set(new Uint8Array(N),0),ae.set(new Uint8Array(X),N.byteLength),N=Y));case 14:case"end":return ue.stop()}},Z)}));return function(H){return z.apply(this,arguments)}}(),k=function(){x(new Error("WebSocket error occurred.")),I.close()};I.addEventListener("open",R),I.addEventListener("message",L),I.addEventListener("error",k)}));case 9:case"end":return S.stop()}},e)}));return function(t){return n.apply(this,arguments)}}(),Yet=function(e){var t=e&&fI[e]?fI[e]||[]:Cu(Object.values(fI));return t.map(function(i){return{label:(pI==null?void 0:pI[i])||i,value:i}})},$U=function(){function n(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.serviceUrl,r=t.locale,s=t.headers;uet(this,n),pp(this,"locale",void 0),pp(this,"serviceUrl",void 0),pp(this,"headers",void 0),pp(this,"fetch",function(){var a=cT(ph().mark(function o(l){var c;return ph().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,e.serviceUrl?fetch(e.serviceUrl,{body:JSON.stringify(l),headers:e.headers,method:"POST"}):nue({payload:l});case 2:return c=h.sent,h.abrupt("return",c);case 4:case"end":return h.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()),pp(this,"create",function(){var a=cT(ph().mark(function o(l){return ph().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",e.fetch(l));case 1:case"end":return u.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()),pp(this,"createAudio",function(){var a=cT(ph().mark(function o(l){var c,u;return ph().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e.create(l);case 2:return c=d.sent,d.next=5,c.arrayBuffer();case 5:return u=d.sent,d.abrupt("return",pet(u));case 7:case"end":return d.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()),this.locale=r,this.serviceUrl=i,this.headers=s}return fet(n,[{key:"voiceOptions",get:function(){return Yet(this.locale)}}]),n}();pp($U,"localeOptions",_et());pp($U,"voiceList",fI);pp($U,"voiceName",pI);pp($U,"createRequest",nue);function Vg(){return Vg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vg.apply(null,arguments)}var Qat=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},Xet=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function mI(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Xet,o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=o)return n[e]=t,!1;i=Math.max(1e-4,i);var c=2/i,u=a(c*r),h=n[e]-t,d=t,f=s*i;h=Math.min(Math.max(h,-f),f),t=n[e]-h;var m=(n.__damp[l]+c*h)*r;n.__damp[l]=(n.__damp[l]-c*m)*u;var v=t+(h+m)*u;return d-n[e]>0==v>d&&(v=d,n.__damp[l]=(v-d)/r),n[e]=v,!0}function $F(n,e,t,i,r,s,a,o){return mI(n,e,n[e]+Wxe(n[e],t),i,r,s,a,o)}var cE=new Re,NX,PX,DX;function eot(n,e,t,i,r,s,a){return typeof e=="number"?cE.setScalar(e):Array.isArray(e)?cE.set(e[0],e[1],e[2]):cE.copy(e),NX=mI(n,"x",cE.x,t,i,r,s,a),PX=mI(n,"y",cE.y,t,i,r,s,a),DX=mI(n,"z",cE.z,t,i,r,s,a),NX||PX||DX}var F1=new Ru,kX,LX,UX;function tot(n,e,t,i,r,s,a){return Array.isArray(e)?F1.set(e[0],e[1],e[2],e[3]):F1.copy(e),kX=$F(n,"x",F1.x,t,i,r,s,a),LX=$F(n,"y",F1.y,t,i,r,s,a),UX=$F(n,"z",F1.z,t,i,r,s,a),kX||LX||UX}const BX=n=>Symbol.iterator in n,FX=n=>"entries"in n,zX=(n,e)=>{const t=n instanceof Map?n:new Map(n.entries()),i=e instanceof Map?e:new Map(e.entries());if(t.size!==i.size)return!1;for(const[r,s]of t)if(!Object.is(s,i.get(r)))return!1;return!0},Ket=(n,e)=>{const t=n[Symbol.iterator](),i=e[Symbol.iterator]();let r=t.next(),s=i.next();for(;!r.done&&!s.done;){if(!Object.is(r.value,s.value))return!1;r=t.next(),s=i.next()}return!!r.done&&!!s.done};function Zet(n,e){return Object.is(n,e)?!0:typeof n!="object"||n===null||typeof e!="object"||e===null?!1:!BX(n)||!BX(e)?zX({entries:()=>Object.entries(n)},{entries:()=>Object.entries(e)}):FX(n)&&FX(e)?zX(n,e):Ket(n,e)}function not(n){const e=TT.useRef();return t=>{const i=n(t);return Zet(e.current,i)?e.current:e.current=i}}function RV(n,e,t){const i=md(d=>d.size),r=md(d=>d.viewport),s=typeof n=="number"?n:i.width*r.dpr,a=typeof e=="number"?e:i.height*r.dpr,o=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...u}=o,h=vt.useMemo(()=>{const d=new Xa(s,a,{minFilter:Ls,magFilter:Ls,type:t0,...u});return c&&(d.depthTexture=new bx(s,a,Zl)),d.samples=l,d},[]);return vt.useLayoutEffect(()=>{h.setSize(s,a),l&&(h.samples=l)},[l,h,s,a]),vt.useEffect(()=>()=>h.dispose(),[]),h}const Jet=n=>typeof n=="function",iot=vt.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:i,makeDefault:r,...s},a)=>{const o=md(({set:_})=>_),l=md(({camera:_})=>_),c=md(({size:_})=>_),u=vt.useRef(null);vt.useImperativeHandle(a,()=>u.current,[]);const h=vt.useRef(null),d=RV(e);vt.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[c,s]),vt.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),vt.useLayoutEffect(()=>{if(r){const _=l;return o(()=>({camera:u.current})),()=>o(()=>({camera:_}))}},[u,r,o]);let f=0,m=null;const v=Jet(i);return mA(_=>{v&&(t===1/0||f<t)&&(h.current.visible=!1,_.gl.setRenderTarget(d),m=_.scene.background,n&&(_.scene.background=n),_.gl.render(_.scene,u.current),_.scene.background=m,_.gl.setRenderTarget(null),h.current.visible=!0,f++)}),vt.createElement(vt.Fragment,null,vt.createElement("orthographicCamera",Vg({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:u},s),!v&&i),vt.createElement("group",{ref:h},v&&i(d.texture)))}),Qet=n=>typeof n=="function",rot=vt.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},a)=>{const o=md(({set:_})=>_),l=md(({camera:_})=>_),c=md(({size:_})=>_),u=vt.useRef(null);vt.useImperativeHandle(a,()=>u.current,[]);const h=vt.useRef(null),d=RV(e);vt.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),vt.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let f=0,m=null;const v=Qet(r);return mA(_=>{v&&(t===1/0||f<t)&&(h.current.visible=!1,_.gl.setRenderTarget(d),m=_.scene.background,n&&(_.scene.background=n),_.gl.render(_.scene,u.current),_.scene.background=m,_.gl.setRenderTarget(null),h.current.visible=!0,f++)}),vt.useLayoutEffect(()=>{if(i){const _=l;return o(()=>({camera:u.current})),()=>o(()=>({camera:_}))}},[u,i,o]),vt.createElement(vt.Fragment,null,vt.createElement("perspectiveCamera",Vg({ref:u},s),!v&&r),vt.createElement("group",{ref:h},v&&r(d.texture)))});var iue={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Rl,function(){var t=function(){function i(f){return a.appendChild(f.dom),f}function r(f){for(var m=0;m<a.children.length;m++)a.children[m].style.display=m===f?"block":"none";s=f}var s=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(f){f.preventDefault(),r(++s%a.children.length)},!1);var o=(performance||Date).now(),l=o,c=0,u=i(new t.Panel("FPS","#0ff","#002")),h=i(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=i(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:a,addPanel:i,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){c++;var f=(performance||Date).now();if(h.update(f-o,200),f>l+1e3&&(u.update(1e3*c/(f-l),100),l=f,c=0,d)){var m=performance.memory;d.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return f},update:function(){o=this.end()},domElement:a,setMode:r}};return t.Panel=function(i,r,s){var a=1/0,o=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,h=48*c,d=3*c,f=2*c,m=3*c,v=15*c,_=74*c,y=30*c,S=document.createElement("canvas");S.width=u,S.height=h,S.style.cssText="width:80px;height:48px";var T=S.getContext("2d");return T.font="bold "+9*c+"px Helvetica,Arial,sans-serif",T.textBaseline="top",T.fillStyle=s,T.fillRect(0,0,u,h),T.fillStyle=r,T.fillText(i,d,f),T.fillRect(m,v,_,y),T.fillStyle=s,T.globalAlpha=.9,T.fillRect(m,v,_,y),{dom:S,update:function(x,I){a=Math.min(a,x),o=Math.max(o,x),T.fillStyle=s,T.globalAlpha=1,T.fillRect(0,0,u,v),T.fillStyle=r,T.fillText(l(x)+" "+i+" ("+l(a)+"-"+l(o)+")",d,f),T.drawImage(S,m+c,v,_-c,y,m,v,_-c,y),T.fillRect(m+_-c,v,c,y),T.fillStyle=s,T.globalAlpha=.9,T.fillRect(m+_-c,v,c,l((1-x/I)*y))}}},t})})(iue);var ett=iue.exports;const sot=Dl(ett);function WF(n,e,t,i){return new(t||(t=Promise))(function(r,s){function a(c){try{l(i.next(c))}catch(u){s(u)}}function o(c){try{l(i.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?r(c.value):(u=c.value,u instanceof t?u:new t(function(h){h(u)})).then(a,o)}l((i=i.apply(n,[])).next())})}const ttt=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function jX(n){return n=n.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const rue=typeof window>"u",up=(()=>{if(rue)return;const{userAgent:n,platform:e,maxTouchPoints:t}=window.navigator,i=/(iphone|ipod|ipad)/i.test(n),r=e==="iPad"||e==="MacIntel"&&t>0&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(n)||i||r,isSafari12:/Version\/12.+Safari/.test(n),isFirefox:/Firefox/.test(n)}})();function ntt(n,e,t){if(!t)return[e];const i=function(c){const u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,h=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,d=c.createShader(35633),f=c.createShader(35632),m=c.createProgram();if(!(f&&d&&m))return;c.shaderSource(d,u),c.shaderSource(f,h),c.compileShader(d),c.compileShader(f),c.attachShader(m,d),c.attachShader(m,f),c.linkProgram(m),c.detachShader(m,d),c.detachShader(m,f),c.deleteShader(d),c.deleteShader(f),c.useProgram(m);const v=c.createBuffer();c.bindBuffer(34962,v),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const _=c.getAttribLocation(m,"aPosition");c.vertexAttribPointer(_,3,5126,!1,0,0),c.enableVertexAttribArray(_),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);const y=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,y),c.deleteProgram(m),c.deleteBuffer(v),y.join("")}(n),r="801621810",s="8016218135",a="80162181161",o=up!=null&&up.isIpad?[["a7",a,12],["a8",s,15],["a8x",s,15],["a9",s,15],["a9x",s,15],["a10",s,15],["a10x",s,15],["a12",r,15],["a12x",r,15],["a12z",r,15],["a14",r,15],["a15",r,15],["m1",r,15],["m2",r,15]]:[["a7",a,12],["a8",s,12],["a9",s,15],["a10",s,15],["a11",r,15],["a12",r,15],["a13",r,15],["a14",r,15],["a15",r,15],["a16",r,15],["a17",r,15]];let l;return i==="80162181255"?l=o.filter(([,,c])=>c>=14):(l=o.filter(([,c])=>c===i),l.length||(l=o)),l.map(([c])=>`apple ${c} gpu`)}class HX extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const YF=[],VX=[];function itt(n,e){if(n===e)return 0;const t=n;n.length>e.length&&(n=e,e=t);let i=n.length,r=e.length;for(;i>0&&n.charCodeAt(~-i)===e.charCodeAt(~-r);)i--,r--;let s,a=0;for(;a<i&&n.charCodeAt(a)===e.charCodeAt(a);)a++;if(i-=a,r-=a,i===0)return r;let o,l,c=0,u=0,h=0;for(;u<i;)VX[u]=n.charCodeAt(a+u),YF[u]=++u;for(;h<r;)for(s=e.charCodeAt(a+h),o=h++,c=h,u=0;u<i;u++)l=s===VX[u]?o:o+1,o=YF[u],c=YF[u]=o>c?l>c?c+1:l:l>o?o+1:l;return c}function rtt(n){return n!=null}const stt=({mobileTiers:n=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:t={},glContext:i,failIfMajorPerformanceCaveat:r=!1,benchmarksURL:s="https://unpkg.com/detect-gpu@5.0.56/dist/benchmarks"}={})=>WF(void 0,void 0,void 0,function*(){const a={};if(rue)return{tier:0,type:"SSR"};const{isIpad:o=!!(up!=null&&up.isIpad),isMobile:l=!!(up!=null&&up.isMobile),screenSize:c=window.screen,loadBenchmarks:u=I=>WF(void 0,void 0,void 0,function*(){const R=yield fetch(`${s}/${I}`).then(N=>N.json());if(parseInt(R.shift().split(".")[0],10)<4)throw new HX("Detect GPU benchmark data is out of date. Please update to version 4x");return R})}=t;let{renderer:h}=t;const d=(I,R,N,L,k)=>({device:k,fps:L,gpu:N,isMobile:l,tier:I,type:R});let f,m="";if(h)h=jX(h),f=[h];else{const I=i||function(N,L=!1){const k={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:L,powerPreference:"high-performance",stencil:!1};N&&delete k.powerPreference;const z=window.document.createElement("canvas"),Z=z.getContext("webgl",k)||z.getContext("experimental-webgl",k);return Z??void 0}(up==null?void 0:up.isSafari12,r);if(!I)return d(0,"WEBGL_UNSUPPORTED");const R=up!=null&&up.isFirefox?null:I.getExtension("WEBGL_debug_renderer_info");if(h=R?I.getParameter(R.UNMASKED_RENDERER_WEBGL):I.getParameter(I.RENDERER),!h)return d(1,"FALLBACK");m=h,h=jX(h),f=function(N,L,k){return L==="apple gpu"?ntt(N,L,k):[L]}(I,h,l)}const v=(yield Promise.all(f.map(function(I){var R;return WF(this,void 0,void 0,function*(){const N=(Ne=>{const ve=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const _e of ve)if(Ne.includes(_e))return _e})(I);if(!N)return;const L=`${l?"m":"d"}-${N}${o?"-ipad":""}.json`,k=a[L]=(R=a[L])!==null&&R!==void 0?R:u(L);let z;try{z=yield k}catch(Ne){if(Ne instanceof HX)throw Ne;return}const Z=function(Ne){var ve;const _e=(Ne=Ne.replace(/\([^)]+\)/,"")).match(/\d+/)||Ne.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(ve=_e==null?void 0:_e.join("").replace(/\W|amd/g,""))!==null&&ve!==void 0?ve:""}(I);let H=z.filter(([,Ne])=>Ne===Z);H.length||(H=z.filter(([Ne])=>Ne.includes(I)));const q=H.length;if(q===0)return;const U=I.split(/[.,()\[\]/\s]/g).sort().filter((Ne,ve,_e)=>ve===0||Ne!==_e[ve-1]).join(" ");let ee,[W,,,,Q]=q>1?H.map(Ne=>[Ne,itt(U,Ne[2])]).sort(([,Ne],[,ve])=>Ne-ve)[0][0]:H[0],X=Number.MAX_VALUE;const{devicePixelRatio:Y}=window,ae=c.width*Y*c.height*Y;for(const Ne of Q){const[ve,_e]=Ne,Le=ve*_e,He=Math.abs(ae-Le);He<X&&(X=He,ee=Ne)}if(!ee)return;const[,,se,ue]=ee;return[X,se,W,ue]})}))).filter(rtt).sort(([I=Number.MAX_VALUE,R],[N=Number.MAX_VALUE,L])=>I===N?R-L:I-N);if(!v.length){const I=ttt.find(R=>h.includes(R));return I?d(0,"BLOCKLISTED",I):d(1,"FALLBACK",`${h} (${m})`)}const[,_,y,S]=v[0];if(_===-1)return d(0,"BLOCKLISTED",y,_,S);const T=l?n:e;let x=0;for(let I=0;I<T.length;I++)_>=T[I]&&(x=I);return d(x,"BENCHMARK",y,_,S)}),aot=n=>eQ(()=>stt(n),["useDetectGPU"]),GX=(n,e)=>{n.updateRanges[0]=e};function att(n){return typeof n=="function"}const qX=new Yn,$X=new Yn,mO=[],z1=new Na;class ott extends B_{constructor(){super(),this.color=new dn("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,t){const i=this.instance.current;if(!i||!i.geometry||!i.material)return;z1.geometry=i.geometry;const r=i.matrixWorld,s=i.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>i.count)){i.getMatrixAt(s,qX),$X.multiplyMatrices(r,qX),z1.matrixWorld=$X,i.material instanceof Wo?z1.material.side=i.material.side:z1.material.side=i.material[0].side,z1.raycast(e,mO);for(let a=0,o=mO.length;a<o;a++){const l=mO[a];l.instanceId=s,l.object=this,t.push(l)}mO.length=0}}}const sue=vt.createContext(null),WX=new Yn,YX=new Yn,ltt=new Yn,XX=new Re,KX=new jc,ZX=new Re,ctt=n=>n.isInstancedBufferAttribute,utt=vt.forwardRef(({context:n,children:e,...t},i)=>{vt.useMemo(()=>u8({PositionMesh:ott}),[]);const r=vt.useRef(null);vt.useImperativeHandle(i,()=>r.current,[]);const{subscribe:s,getParent:a}=vt.useContext(n||sue);return vt.useLayoutEffect(()=>s(r),[]),vt.createElement("positionMesh",Vg({instance:a(),instanceKey:r,ref:r},t),e)}),oot=vt.forwardRef(({context:n,children:e,range:t,limit:i=1e3,frames:r=1/0,...s},a)=>{const[{localContext:o,instance:l}]=vt.useState(()=>{const S=vt.createContext(null);return{localContext:S,instance:vt.forwardRef((T,x)=>vt.createElement(utt,Vg({context:S},T,{ref:x})))}}),c=vt.useRef(null);vt.useImperativeHandle(a,()=>c.current,[]);const[u,h]=vt.useState([]),[[d,f]]=vt.useState(()=>{const S=new Float32Array(i*16);for(let T=0;T<i;T++)ltt.identity().toArray(S,T*16);return[S,new Float32Array([...new Array(i*3)].map(()=>1))]});vt.useEffect(()=>{c.current.instanceMatrix.needsUpdate=!0});let m=0,v=0;const _=vt.useRef([]);vt.useLayoutEffect(()=>{_.current=Object.entries(c.current.geometry.attributes).filter(([S,T])=>ctt(T))}),mA(()=>{if(r===1/0||m<r){c.current.updateMatrix(),c.current.updateMatrixWorld(),WX.copy(c.current.matrixWorld).invert(),v=Math.min(i,t!==void 0?t:i,u.length),c.current.count=v,GX(c.current.instanceMatrix,{start:0,count:v*16}),GX(c.current.instanceColor,{start:0,count:v*3});for(let S=0;S<u.length;S++){const T=u[S].current;T.matrixWorld.decompose(XX,KX,ZX),YX.compose(XX,KX,ZX).premultiply(WX),YX.toArray(d,S*16),c.current.instanceMatrix.needsUpdate=!0,T.color.toArray(f,S*3),c.current.instanceColor.needsUpdate=!0}m++}});const y=vt.useMemo(()=>({getParent:()=>c,subscribe:S=>(h(T=>[...T,S]),()=>h(T=>T.filter(x=>x.current!==S.current)))}),[]);return vt.createElement("instancedMesh",Vg({userData:{instances:u,limit:i,frames:r},matrixAutoUpdate:!1,ref:c,args:[null,null,0],raycast:()=>null},s),vt.createElement("instancedBufferAttribute",{attach:"instanceMatrix",args:[d,16],usage:d4}),vt.createElement("instancedBufferAttribute",{attach:"instanceColor",args:[f,3],usage:d4}),att(e)?vt.createElement(o.Provider,{value:y},e(l)):n?vt.createElement(n.Provider,{value:y},e):vt.createElement(sue.Provider,{value:y},e))});function htt(n,e){const t=n+"Geometry";return vt.forwardRef(({args:i,children:r,...s},a)=>{const o=vt.useRef(null);return vt.useImperativeHandle(a,()=>o.current),vt.useLayoutEffect(()=>void(e==null?void 0:e(o.current))),vt.createElement("mesh",Vg({ref:o},s),vt.createElement(t,{attach:"geometry",args:i}),r)})}const lot=htt("plane"),cot=vt.forwardRef(({children:n,compute:e,width:t,height:i,samples:r=8,renderPriority:s=0,eventPriority:a=0,frames:o=1/0,stencilBuffer:l=!1,depthBuffer:c=!0,generateMipmaps:u=!1,...h},d)=>{const{size:f,viewport:m}=md(),v=RV((t||f.width)*m.dpr,(i||f.height)*m.dpr,{samples:r,stencilBuffer:l,depthBuffer:c,generateMipmaps:u}),[_]=vt.useState(()=>new bT),y=vt.useCallback((S,T,x)=>{var I,R;let N=(I=v.texture)==null||(I=I.__r3f.parent)==null?void 0:I.object;for(;N&&!(N instanceof mr);){var L;N=(L=N.__r3f.parent)==null?void 0:L.object}if(!N)return!1;x.raycaster.camera||x.events.compute(S,x,(R=x.previousRoot)==null?void 0:R.getState());const[k]=x.raycaster.intersectObject(N);if(!k)return!1;const z=k.uv;if(!z)return!1;T.raycaster.setFromCamera(T.pointer.set(z.x*2-1,z.y*2-1),T.camera)},[]);return vt.useImperativeHandle(d,()=>v.texture,[v]),vt.createElement(vt.Fragment,null,tEe(vt.createElement(dtt,{renderPriority:s,frames:o,fbo:v},n,vt.createElement("group",{onPointerOver:()=>null})),_,{events:{compute:e||y,priority:a}}),vt.createElement("primitive",Vg({object:v.texture},h)))});function dtt({frames:n,renderPriority:e,children:t,fbo:i}){let r=0,s,a,o,l;return mA(c=>{(n===1/0||r<n)&&(s=c.gl.autoClear,a=c.gl.xr.enabled,o=c.gl.getRenderTarget(),l=c.gl.xr.isPresenting,c.gl.autoClear=!0,c.gl.xr.enabled=!1,c.gl.xr.isPresenting=!1,c.gl.setRenderTarget(i),c.gl.render(c.scene,c.camera),c.gl.setRenderTarget(o),c.gl.autoClear=s,c.gl.xr.enabled=a,c.gl.xr.isPresenting=l,r++)},e),vt.createElement(vt.Fragment,null,t)}/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var XF=1/1e3,ftt=1e3,ptt=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*XF}get fixedDelta(){return this._fixedDelta*XF}set fixedDelta(n){this._fixedDelta=n*ftt}get elapsed(){return this._elapsed*XF}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},mtt=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new xi;return t.setAttribute("position",new Vr(n,3)),t.setAttribute("uv",new Vr(e,2)),t})(),zu=class Y5{static get fullscreenGeometry(){return mtt}constructor(e="Pass",t=new bT,i=new aA){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Na(Y5.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new bT),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=n0){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Xa||t instanceof Wo||t instanceof Js||t instanceof Y5)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},gtt=class extends zu{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},vtt=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,aue="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",oue=class extends jo{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Mi(null),opacity:new Mi(1)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vtt,vertexShader:aue})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},ytt=class extends zu{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new oue,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Xa(1,1,{minFilter:Ls,magFilter:Ls,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Ya?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===Mr&&(this.renderTarget.texture.colorSpace=Mr))}},JX=new dn,lue=class extends zu{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=n.getClearAlpha(),l=s!==null,c=a>=0;l?(n.getClearColor(JX),n.setClearColor(s,c?a:o)):c&&n.setClearAlpha(a),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(JX,o):c&&n.setClearAlpha(o)}},_tt=class extends zu{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new lue(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),a=n.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,u,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(n,null):(c.render(n,e),c.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(o,l)):(n.setRenderTarget(e),n.render(o,l),n.setRenderTarget(t),n.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},btt=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new ytt,this.depthTexture=null,this.passes=[],this.timer=new ptt,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new gt),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Ya&&n.outputColorSpace===Mr&&(this.inputBuffer.texture.colorSpace=Mr,this.outputBuffer.texture.colorSpace=Mr,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new bx;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=ub,n.type=cb):n.type=Np,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const r=this.renderer,s=r===null?new gt:r.getDrawingBufferSize(new gt),a={minFilter:Ls,magFilter:Ls,stencilBuffer:e,depthBuffer:n,type:t},o=new Xa(s.width,s.height,a);return i>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=i),t===Ya&&r!==null&&r.outputColorSpace===Mr&&(o.texture.colorSpace=Mr),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new gt),s=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(r.width,r.height),n.initialize(i,s,a),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(n of t)n.setDepthTexture(o)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(o,l)=>o||l.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,s=!1,a,o,l;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(e,i,r,n,s),c.needsSwap&&(s&&(t.renderToScreen=c.renderToScreen,a=e.getContext(),o=e.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),t.render(e,i,r,n,s),o.setFunc(a.EQUAL,1,4294967295)),l=i,i=r,r=l),c instanceof _tt?s=!0:c instanceof gtt&&(s=!1))}setSize(n,e,t){const i=this.renderer,r=i.getSize(new gt);(n===void 0||e===void 0)&&(n=r.width,e=r.height),(r.width!==n||r.height!==e)&&i.setSize(n,e,t);const s=i.getDrawingBufferSize(new gt);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const a of this.passes)a.setSize(s.width,s.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),zu.fullscreenGeometry.dispose()}},ab={NONE:0,DEPTH:1,CONVOLUTION:2},Ar={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Stt=class{constructor(){this.shaderParts=new Map([[Ar.FRAGMENT_HEAD,null],[Ar.FRAGMENT_MAIN_UV,null],[Ar.FRAGMENT_MAIN_IMAGE,null],[Ar.VERTEX_HEAD,null],[Ar.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ab.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Pp}},KF=!1,QX=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Eu:t=this.materialsFlatShadedDoubleSide;break;case Bo:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Eu:t=this.materialsDoubleSide;break;case Bo:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof jo))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Ip;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Bo,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Eu,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Bo,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Eu,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,KF){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return KF}static set workaroundEnabled(n){KF=n}},qv=-1,tc=class extends Ch{constructor(n,e=qv,t=qv,i=1){super(),this.resizable=n,this.baseSize=new gt(1,1),this.preferredSize=new gt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new gt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==qv?t.width=e.width:e.height!==qv?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==qv?t.height=e.height:e.width!==qv?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(qv),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return qv}},Wi={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Ett="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Ttt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",xtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",wtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Ctt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Att="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Mtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Rtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Ott="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Itt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Ntt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Ptt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Dtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",ktt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Ltt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Utt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Btt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Ftt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",ztt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",jtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Htt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Vtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Gtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",qtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",$tt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Wtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Ytt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Xtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",Ktt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Ztt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Jtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Qtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",ent=new Map([[Wi.ADD,Ett],[Wi.ALPHA,Ttt],[Wi.AVERAGE,xtt],[Wi.COLOR,wtt],[Wi.COLOR_BURN,Ctt],[Wi.COLOR_DODGE,Att],[Wi.DARKEN,Mtt],[Wi.DIFFERENCE,Rtt],[Wi.DIVIDE,Ott],[Wi.DST,null],[Wi.EXCLUSION,Itt],[Wi.HARD_LIGHT,Ntt],[Wi.HARD_MIX,Ptt],[Wi.HUE,Dtt],[Wi.INVERT,ktt],[Wi.INVERT_RGB,Ltt],[Wi.LIGHTEN,Utt],[Wi.LINEAR_BURN,Btt],[Wi.LINEAR_DODGE,Ftt],[Wi.LINEAR_LIGHT,ztt],[Wi.LUMINOSITY,jtt],[Wi.MULTIPLY,Htt],[Wi.NEGATION,Vtt],[Wi.NORMAL,Gtt],[Wi.OVERLAY,qtt],[Wi.PIN_LIGHT,$tt],[Wi.REFLECT,Wtt],[Wi.SATURATION,Ytt],[Wi.SCREEN,Xtt],[Wi.SOFT_LIGHT,Ktt],[Wi.SRC,Ztt],[Wi.SUBTRACT,Jtt],[Wi.VIVID_LIGHT,Qtt]]),tnt=class extends Ch{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Mi(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return ent.get(this.blendFunction)}},kb=class extends Ch{constructor(n,e,{attributes:t=ab.NONE,blendFunction:i=Wi.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new tnt(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Pp,this._outputColorSpace=sf}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=n0){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Xa||e instanceof Wo||e instanceof Js||e instanceof zu)&&this[n].dispose()}}},OV={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},nnt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,int="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",rnt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],snt=class extends jo{constructor(n=new cr){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Mi(null),texelSize:new Mi(new cr),scale:new Mi(1),kernel:new Mi(0)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:nnt,vertexShader:int}),this.setTexelSize(n.x,n.y),this.kernelSize=OV.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return rnt[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},ant=class extends zu{constructor({kernelSize:n=OV.MEDIUM,resolutionScale:e=.5,width:t=tc.AUTO_SIZE,height:i=tc.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Xa(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new tc(this,r,s,e);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new snt,this._blurMaterial.kernelSize=n,this.copyMaterial=new oue}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=e;this.fullscreenMaterial=c;for(let d=0,f=u.length;d<f;++d){const m=d&1?l:o;c.kernel=u[d],c.inputBuffer=h.texture,n.setRenderTarget(m),n.render(s,a),h=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Ya?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===Mr&&(this.renderTargetA.texture.colorSpace=Mr,this.renderTargetB.texture.colorSpace=Mr))}static get AUTO_SIZE(){return tc.AUTO_SIZE}},ont=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,lnt=class extends jo{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:mx.replace(/\D+/g,"")},uniforms:{inputBuffer:new Mi(null),threshold:new Mi(0),smoothing:new Mi(1),range:new Mi(null)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ont,vertexShader:aue}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},cnt=class extends zu{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=tc.AUTO_SIZE,height:s=tc.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("LuminancePass"),this.fullscreenMaterial=new lnt(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Xa(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new tc(this,a,o,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==Ya&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},unt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,hnt="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",dnt=class extends jo{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Mi(null),texelSize:new Mi(new gt)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:unt,vertexShader:hnt})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},fnt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,pnt="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",mnt=class extends jo{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Mi(null),supportBuffer:new Mi(null),texelSize:new Mi(new gt),radius:new Mi(.85)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:fnt,vertexShader:pnt})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},gnt=class extends zu{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Xa(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new dnt,this.upsamplingMaterial=new mnt,this.resolution=new gt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=e;this.fullscreenMaterial=o;for(let d=0,f=c.length;d<f;++d){const m=c[d];o.setSize(h.width,h.height),o.inputBuffer=h.texture,n.setRenderTarget(m),n.render(s,a),h=m}this.fullscreenMaterial=l;for(let d=u.length-1;d>=0;--d){const f=u[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[d].texture,n.setRenderTarget(f),n.render(s,a),h=f}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==Ya)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===Mr)for(const r of i)r.texture.colorSpace=Mr}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},vnt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,ynt=class extends kb{constructor({blendFunction:n=Wi.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:o=OV.LARGE,resolutionScale:l=.5,width:c=tc.AUTO_SIZE,height:u=tc.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("BloomEffect",vnt,{blendFunction:n,uniforms:new Map([["map",new Mi(null)],["intensity",new Mi(r)]])}),this.renderTarget=new Xa(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new ant({kernelSize:o}),this.luminancePass=new cnt({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new gnt,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const f=this.resolution=new tc(this,h,d,l);f.addEventListener("change",m=>this.setSize(f.baseWidth,f.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===Mr&&(this.renderTarget.texture.colorSpace=Mr))}},uot={RED:0,GREEN:1,BLUE:2,ALPHA:3},P_={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3};function _nt(n,e,t){const i=new Map([[vx,1],[u2,2],[Fo,4]]);let r;if(i.has(e)||console.error("Invalid noise texture format"),t===Ya){r=new Uint8Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()*255+.5}else{r=new Float32Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()}return r}var eK=class extends cf{constructor(n,e,t=vx,i=Ya){super(_nt(n*e,t,i),n,e,t,i),this.needsUpdate=!0}},bnt="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",gO="Glitch.Generated";function mu(n,e){return n+Math.random()*(e-n)}var Snt=class extends kb{constructor({chromaticAberrationOffset:n=null,delay:e=new gt(1.5,3.5),duration:t=new gt(.6,1),strength:i=new gt(.3,1),columns:r=.05,ratio:s=.85,perturbationMap:a=null,dtSize:o=64}={}){if(super("GlitchEffect",bnt,{uniforms:new Map([["perturbationMap",new Mi(null)],["columns",new Mi(r)],["active",new Mi(!1)],["random",new Mi(1)],["seeds",new Mi(new gt)],["distortion",new Mi(new gt)]])}),a===null){const l=new eK(o,o,Fo);l.name=gO,this.perturbationMap=l}else this.perturbationMap=a;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=t,this.breakPoint=new gt(mu(this.delay.x,this.delay.y),mu(this.duration.x,this.duration.y)),this.strength=i,this.mode=P_.SPORADIC,this.ratio=s,this.chromaticAberrationOffset=n}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(n){this.delay.x=n}getMinDelay(){return this.delay.x}setMinDelay(n){this.delay.x=n}get maxDelay(){return this.delay.y}set maxDelay(n){this.delay.y=n}getMaxDelay(){return this.delay.y}setMaxDelay(n){this.delay.y=n}get minDuration(){return this.duration.x}set minDuration(n){this.duration.x=n}getMinDuration(){return this.duration.x}setMinDuration(n){this.duration.x=n}get maxDuration(){return this.duration.y}set maxDuration(n){this.duration.y=n}getMaxDuration(){return this.duration.y}setMaxDuration(n){this.duration.y=n}get minStrength(){return this.strength.x}set minStrength(n){this.strength.x=n}getMinStrength(){return this.strength.x}setMinStrength(n){this.strength.x=n}get maxStrength(){return this.strength.y}set maxStrength(n){this.strength.y=n}getMaxStrength(){return this.strength.y}setMaxStrength(n){this.strength.y=n}getMode(){return this.mode}setMode(n){this.mode=n}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(n){this.ratio=Math.min(Math.max(1-n,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(n){this.uniforms.get("columns").value=n}getGlitchColumns(){return this.columns}setGlitchColumns(n){this.columns=n}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(n){this.chromaticAberrationOffset=n}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(n){const e=this.perturbationMap;e!==null&&e.name===gO&&e.dispose(),n.minFilter=n.magFilter=Pa,n.wrapS=n.wrapT=pT,n.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=n}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(n){this.perturbationMap=n}generatePerturbationMap(n=64){const e=new eK(n,n,Fo);return e.name=gO,e}update(n,e,t){const i=this.mode,r=this.breakPoint,s=this.chromaticAberrationOffset,a=this.strength;let o=this.time,l=!1,c=0,u=0,h;i!==P_.DISABLED&&(i===P_.SPORADIC&&(o+=t,h=o>r.x,o>=r.x+r.y&&(r.set(mu(this.delay.x,this.delay.y),mu(this.duration.x,this.duration.y)),o=0)),c=Math.random(),this.uniforms.get("random").value=c,h&&c>this.ratio||i===P_.CONSTANT_WILD?(l=!0,c*=a.y*.03,u=mu(-Math.PI,Math.PI),this.seeds.set(mu(-a.y,a.y),mu(-a.y,a.y)),this.distortion.set(mu(0,1),mu(0,1))):(h||i===P_.CONSTANT_MILD)&&(l=!0,c*=a.x*.03,u=mu(-Math.PI,Math.PI),this.seeds.set(mu(-a.x,a.x),mu(-a.x,a.x)),this.distortion.set(mu(0,1),mu(0,1))),this.time=o),s!==null&&(l?s.set(Math.cos(u),Math.sin(u)).multiplyScalar(c):s.set(0,0)),this.uniforms.get("active").value=l}dispose(){const n=this.perturbationMap;n!==null&&n.name===gO&&n.dispose()}},cue=class extends zu{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new lue,this.overrideMaterialManager=t===null?null:new QX(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new QX(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,c=s.background,u=n.shadowMap.autoUpdate,h=this.renderToScreen?null:e;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,a):n.render(s,a),a.layers.mask=l,s.background=c,n.shadowMap.autoUpdate=u}},j1={DEFAULT:0,ESKIL:1},Ent=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Tnt=class extends kb{constructor({blendFunction:n=Wi.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",Ent,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},xnt=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,wnt=class extends kb{constructor({blendFunction:n=Wi.OVERLAY,density:e=1.25,scrollSpeed:t=0}={}){super("ScanlineEffect",xnt,{blendFunction:n,uniforms:new Map([["count",new Mi(0)],["scrollSpeed",new Mi(0)]])}),this.resolution=new gt,this.d=e,this.scrollSpeed=t}get density(){return this.d}set density(n){this.d=n,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(n){this.density=n}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(n){this.uniforms.get("scrollSpeed").value=n,n===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(n,e){this.resolution.set(n,e),this.uniforms.get("count").value=Math.round(e*this.density)}},Cnt=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Ant="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Mnt=class extends jo{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Mi(null),normalBuffer:new Mi(null),texelSize:new Mi(new gt)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Cnt,vertexShader:Ant})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=n0){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Rnt=class extends zu{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=tc.AUTO_SIZE,height:i=tc.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const a=new Mnt;a.normalBuffer=n,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Xa(1,1,{minFilter:Pa,magFilter:Pa,depthBuffer:!1,type:Zl}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new tc(this,r,s,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=n0){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},Ont=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Int=class extends kb{constructor({blendFunction:n,eskil:e=!1,technique:t=e?j1.ESKIL:j1.DEFAULT,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",Ont,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Mi(i)],["darkness",new Mi(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===j1.ESKIL}set eskil(n){this.technique=n?j1.ESKIL:j1.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}},Nnt=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Pnt="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Dnt=class extends jo{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:mx.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Mi(null),depthBuffer:new Mi(null),resolution:new Mi(new gt),texelSize:new Mi(new gt),cameraNear:new Mi(.3),cameraFar:new Mi(1e3),aspect:new Mi(1),time:new Mi(0)},blending:nc,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=n0){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=Nnt.replace(Ar.FRAGMENT_HEAD,n.get(Ar.FRAGMENT_HEAD)||"").replace(Ar.FRAGMENT_MAIN_UV,n.get(Ar.FRAGMENT_MAIN_UV)||"").replace(Ar.FRAGMENT_MAIN_IMAGE,n.get(Ar.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Pnt.replace(Ar.VERTEX_HEAD,n.get(Ar.VERTEX_HEAD)||"").replace(Ar.VERTEX_MAIN_SUPPORT,n.get(Ar.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ko?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Ar}};function tK(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(s,r))}}function knt(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&t.attributes&ab.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let c=l.get(Ar.FRAGMENT_HEAD)||"",u=l.get(Ar.FRAGMENT_MAIN_UV)||"",h=l.get(Ar.FRAGMENT_MAIN_IMAGE)||"",d=l.get(Ar.VERTEX_HEAD)||"",f=l.get(Ar.VERTEX_MAIN_SUPPORT)||"";const m=new Set,v=new Set;if(a&&(u+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const S=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);f+=`	${n}MainSupport(`,f+=S?`vUv);
`:`);
`;for(const T of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const x of T[1].split(/\s*,\s*/))t.varyings.add(x),m.add(x),v.add(x);for(const T of r.matchAll(o))v.add(T[1])}for(const S of i.matchAll(o))v.add(S[1]);for(const S of e.defines.keys())v.add(S.replace(/\([\w\s,]*\)/g,""));for(const S of e.uniforms.keys())v.add(S);v.delete("while"),v.delete("for"),v.delete("if"),e.uniforms.forEach((S,T)=>t.uniforms.set(n+T.charAt(0).toUpperCase()+T.slice(1),S)),e.defines.forEach((S,T)=>t.defines.set(n+T.charAt(0).toUpperCase()+T.slice(1),S));const _=new Map([["fragment",i],["vertex",r]]);tK(n,v,t.defines),tK(n,v,_),i=_.get("fragment"),r=_.get("vertex");const y=e.blendMode;if(t.blendModes.set(y.blendFunction,y),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(h+=e.inputColorSpace===Mr?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==sf?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const S=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,t.attributes&ab.DEPTH&&S.test(i)&&(h+="depth, ",t.readDepth=!0),h+=`color1);
	`;const T=n+"BlendOpacity";t.uniforms.set(T,y.opacity),h+=`color0 = blend${y.blendFunction}(color0, color1, ${T});

	`,c+=`uniform float ${T};

`}if(c+=i+`
`,r!==null&&(d+=r+`
`),l.set(Ar.FRAGMENT_HEAD,c),l.set(Ar.FRAGMENT_MAIN_UV,u),l.set(Ar.FRAGMENT_MAIN_IMAGE,h),l.set(Ar.VERTEX_HEAD,d),l.set(Ar.VERTEX_MAIN_SUPPORT,f),e.extensions!==null)for(const S of e.extensions)t.extensions.add(S)}}var Lnt=class extends zu{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Dnt(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new Stt;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===Wi.DST)n.attributes|=a.getAttributes()&ab.DEPTH;else{if(n.attributes&a.getAttributes()&ab.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);knt("e"+e++,a,n)}let t=n.shaderParts.get(Ar.FRAGMENT_HEAD),i=n.shaderParts.get(Ar.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(Ar.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of n.blendModes.values())t+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+`
`;n.attributes&ab.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Mr&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Ar.FRAGMENT_HEAD,t),n.shaderParts.set(Ar.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Ar.FRAGMENT_MAIN_UV,r);for(const[a,o]of n.shaderParts)o!==null&&n.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=n0){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==Ya&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Unt=class extends zu{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=tc.AUTO_SIZE,height:s=tc.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new cue(n,e,new F6);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new dn(7829503),c.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Xa(1,1,{minFilter:Pa,magFilter:Pa}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new tc(this,a,o,i);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}};function Bw(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}new gt;new gt;function uue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Kh=function n(e,t,i){var r=this;uue(this,n),Bw(this,"dot2",function(s,a){return r.x*s+r.y*a}),Bw(this,"dot3",function(s,a,o){return r.x*s+r.y*a+r.z*o}),this.x=e,this.y=t,this.z=i},Bnt=[new Kh(1,1,0),new Kh(-1,1,0),new Kh(1,-1,0),new Kh(-1,-1,0),new Kh(1,0,1),new Kh(-1,0,1),new Kh(1,0,-1),new Kh(-1,0,-1),new Kh(0,1,1),new Kh(0,-1,1),new Kh(0,1,-1),new Kh(0,-1,-1)],nK=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],iK=new Array(512),rK=new Array(512),Fnt=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=nK[t]^e&255:i=nK[t]^e>>8&255,iK[t]=iK[t+256]=i,rK[t]=rK[t+256]=Bnt[i%12]}};Fnt(0);function znt(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function sK(n){var e=znt(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var jnt=function n(e){var t=this;uue(this,n),Bw(this,"seed",0),Bw(this,"init",function(i){t.seed=i,t.value=sK(i)}),Bw(this,"value",sK(this.seed)),this.init(e)};new jnt(Math.random());new Ex(-1,1,1,-1,0,1);class Hnt extends xi{constructor(){super(),this.setAttribute("position",new Tn([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Tn([0,2,0,0,2,0],2))}}new Hnt;const Vnt=vt.createContext(null),aK=n=>(n.getAttributes()&2)===2,hot=vt.memo(vt.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:l,stencilBuffer:c,multisampling:u=8,frameBufferType:h=t0},d)=>{const{gl:f,scene:m,camera:v,size:_}=md(),y=t||m,S=e||v,[T,x,I]=vt.useMemo(()=>{const L=new btt(f,{depthBuffer:o,stencilBuffer:c,multisampling:u,frameBufferType:h});L.addPass(new cue(y,S));let k=null,z=null;return l&&(z=new Unt(y,S),z.enabled=!1,L.addPass(z),i!==void 0&&(k=new Rnt({normalBuffer:z.texture,resolutionScale:i}),k.enabled=!1,L.addPass(k))),[L,z,k]},[S,f,o,c,u,h,y,l,i]);vt.useEffect(()=>T==null?void 0:T.setSize(_.width,_.height),[T,_]),mA((L,k)=>{if(r){const z=f.autoClear;f.autoClear=a,c&&!a&&f.clearStencil(),T.render(k),f.autoClear=z}},r?s:0);const R=vt.useRef(null);vt.useLayoutEffect(()=>{var z;const L=[],k=R.current.__r3f;if(k&&T){const Z=k.children;for(let H=0;H<Z.length;H++){const q=Z[H].object;if(q instanceof kb){const U=[q];if(!aK(q)){let W=null;for(;(W=(z=Z[H+1])==null?void 0:z.object)instanceof kb&&!aK(W);)U.push(W),H++}const ee=new Lnt(S,...U);L.push(ee)}else q instanceof zu&&L.push(q)}for(const H of L)T==null||T.addPass(H);x&&(x.enabled=!0),I&&(I.enabled=!0)}return()=>{for(const Z of L)T==null||T.removePass(Z);x&&(x.enabled=!1),I&&(I.enabled=!1)}},[T,n,S,x,I]),vt.useEffect(()=>{const L=f.toneMapping;return f.toneMapping=lf,()=>{f.toneMapping=L}},[f]);const N=vt.useMemo(()=>({composer:T,normalPass:x,downSamplingPass:I,resolutionScale:i,camera:S,scene:y}),[T,x,I,i,S,y]);return vt.useImperativeHandle(d,()=>T,[T]),$a.jsx(Vnt.Provider,{value:N,children:$a.jsx("group",{ref:R,children:n})})}));let Gnt=0;const oK=new WeakMap,WU=(n,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...r}){let s=oK.get(n);if(!s){const l=`@react-three/postprocessing/${n.name}-${Gnt++}`;u8({[l]:n}),oK.set(n,s=l)}const a=md(l=>l.camera),o=TT.useMemo(()=>[...(e==null?void 0:e.args)??[],...r.args??[{...e,...r}]],[JSON.stringify(r)]);return $a.jsx(s,{camera:a,"blendMode-blendFunction":t,"blendMode-opacity-value":i,...r,args:o})},vO=(n,e)=>{const t=n[e];return TT.useMemo(()=>typeof t=="number"?new gt(t,t):t?new gt(...t):new gt,[t])},dot=WU(ynt,{blendFunction:0}),fot=vt.forwardRef(function({active:n=!0,...e},t){const i=md(c=>c.invalidate),r=vO(e,"delay"),s=vO(e,"duration"),a=vO(e,"strength"),o=vO(e,"chromaticAberrationOffset"),l=vt.useMemo(()=>new Snt({...e,delay:r,duration:s,strength:a,chromaticAberrationOffset:o}),[r,s,e,a,o]);return vt.useLayoutEffect(()=>{l.mode=n?e.mode||P_.SPORADIC:P_.DISABLED,i()},[n,l,i,e.mode]),vt.useEffect(()=>()=>{var c;(c=l.dispose)==null||c.call(l)},[l]),$a.jsx("primitive",{ref:t,object:l,dispose:null})}),pot=WU(Tnt,{blendFunction:5}),mot=WU(wnt,{blendFunction:24,density:1.25}),got=WU(Int);var wd=typeof window<"u"?window:{screen:{},navigator:{}},fx=(wd.matchMedia||function(){return{matches:!1}}).bind(wd),qnt={get passive(){return!0}},hue=function(){};wd.addEventListener&&wd.addEventListener("p",hue,qnt);wd.removeEventListener&&wd.removeEventListener("p",hue,!1);var IV="ontouchstart"in wd,$nt="TouchEvent"in wd,Wnt=IV||$nt&&fx("(any-pointer: coarse)").matches,lK=(wd.navigator.maxTouchPoints||0)>0||Wnt,due=wd.navigator.userAgent||"",Ynt=fx("(pointer: coarse)").matches&&/iPad|Macintosh/.test(due)&&Math.min(wd.screen.width||0,wd.screen.height||0)>=768,fue=(fx("(pointer: coarse)").matches||!fx("(pointer: fine)").matches&&IV)&&!/Windows.*Firefox/.test(due),Xnt=fx("(any-pointer: fine)").matches||fx("(any-hover: hover)").matches||Ynt||!IV,cK=lK&&(Xnt||!fue)?"hybrid":lK?"touchOnly":"mouseOnly",vot=cK==="mouseOnly"?"mouse":cK==="touchOnly"||fue?"touch":"mouse",pue={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Rl,()=>(()=>{var t={944:function(a){var o;o=()=>(()=>{var l={d:(y,S)=>{for(var T in S)l.o(S,T)&&!l.o(y,T)&&Object.defineProperty(y,T,{enumerable:!0,get:S[T]})},o:(y,S)=>Object.prototype.hasOwnProperty.call(y,S)},c={};function u(y){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u(y)}function h(y,S){var T=typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(!T){if(Array.isArray(y)||(T=f(y))||S){T&&(y=T);var x=0,I=function(){};return{s:I,n:function(){return x>=y.length?{done:!0}:{done:!1,value:y[x++]}},e:function(k){throw k},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R,N=!0,L=!1;return{s:function(){T=T.call(y)},n:function(){var k=T.next();return N=k.done,k},e:function(k){L=!0,R=k},f:function(){try{N||T.return==null||T.return()}finally{if(L)throw R}}}}function d(y,S){return function(T){if(Array.isArray(T))return T}(y)||function(T,x){var I=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(I!=null){var R,N,L,k,z=[],Z=!0,H=!1;try{if(L=(I=I.call(T)).next,x!==0)for(;!(Z=(R=L.call(I)).done)&&(z.push(R.value),z.length!==x);Z=!0);}catch(q){H=!0,N=q}finally{try{if(!Z&&I.return!=null&&(k=I.return(),Object(k)!==k))return}finally{if(H)throw N}}return z}}(y,S)||f(y,S)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f(y,S){if(y){if(typeof y=="string")return m(y,S);var T=Object.prototype.toString.call(y).slice(8,-1);return T==="Object"&&y.constructor&&(T=y.constructor.name),T==="Map"||T==="Set"?Array.from(y):T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?m(y,S):void 0}}function m(y,S){(S==null||S>y.length)&&(S=y.length);for(var T=0,x=new Array(S);T<S;T++)x[T]=y[T];return x}function v(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}l.d(c,{default:()=>_});var _=function(){function y(){var x=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];v(this,y),this.strict=x,this.defaults=new Map,this.validators=new Map,this.types=new Map,this.optional=new Set,this.required=new Set}var S,T;return S=y,(T=[{key:"allowExtra",value:function(){return this.strict=!1,this}},{key:"setDefaults",value:function(x){var I=this;return Object.entries(x).forEach(function(R){var N=d(R,2),L=N[0],k=N[1];return I.defaults.set(L,k)}),this}},{key:"setValidators",value:function(x){var I=this;return Object.entries(x).forEach(function(R){var N=d(R,2),L=N[0],k=N[1];return I.validators.set(L,k)}),this}},{key:"setTypes",value:function(x){var I=this;return Object.entries(x).forEach(function(R){var N=d(R,2),L=N[0],k=N[1];return I.types.set(L,k)}),this}},{key:"setOptional",value:function(x){var I=this;return x.forEach(function(R){return I.optional.add(R)}),this}},{key:"setRequired",value:function(x){var I=this;return x.forEach(function(R){return I.required.add(R)}),this}},{key:"resolve",value:function(x){return this.validate(Object.assign(this.getDefaults(),x))}},{key:"getDefaults",value:function(){var x,I={},R=h(this.defaults);try{for(R.s();!(x=R.n()).done;){var N=d(x.value,2),L=N[0],k=N[1];I[L]=k}}catch(z){R.e(z)}finally{R.f()}return I}},{key:"validate",value:function(x){for(var I in x)this.validators.has(I)&&(x[I]=this.validators.get(I)(x[I]));for(var R in x){if(!this.optionExists(R))throw new Error('Unkown option "'.concat(R,'".'));this.checkType(R,x[R])}var N,L=h(this.required.values());try{for(L.s();!(N=L.n()).done;){var k=N.value;if(x[k]===void 0)throw new Error('Option "'.concat(k,'" is required.'))}}catch(z){L.e(z)}finally{L.f()}return x}},{key:"checkType",value:function(x,I){if(this.types.has(x)){var R=this.types.get(x),N=u(I);if(N!==R)throw new Error('Wrong value for option "'.concat(x,'": expected type "').concat(R,'", got "').concat(N,'".'))}}},{key:"optionExists",value:function(x){return!this.strict||this.defaults.has(x)||this.validators.has(x)||this.optional.has(x)||this.required.has(x)||this.types.has(x)}}])&&function(x,I){for(var R=0;R<I.length;R++){var N=I[R];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,(L=function(k,z){if(u(k)!=="object"||k===null)return k;var Z=k[Symbol.toPrimitive];if(Z!==void 0){var H=Z.call(k,"string");if(u(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(N.key),u(L)==="symbol"?L:String(L)),N)}var L}(S.prototype,T),Object.defineProperty(S,"prototype",{writable:!1}),y}();return c.default})(),a.exports=o()},162:function(a){a.exports=(()=>{var o={d:(u,h)=>{for(var d in h)o.o(h,d)&&!o.o(u,d)&&Object.defineProperty(u,d,{enumerable:!0,get:h[d]})},o:(u,h)=>Object.prototype.hasOwnProperty.call(u,h)},l={};o.d(l,{default:()=>c});var c=function(){function u(){(function(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")})(this,u),this._events={},this.on=this.addEventListener,this.off=this.removeEventListener}var h;return(h=[{key:"emit",value:function(d,f){if(Object.prototype.hasOwnProperty.call(this._events,d))for(var m=this._events[d],v={type:d,detail:f},_=m.length,y=0;y<_;y++)this.handle(m[y],v)}},{key:"handle",value:function(d,f){d(f)}},{key:"addEventListener",value:function(d,f){Object.prototype.hasOwnProperty.call(this._events,d)||(this._events[d]=[]),this._events[d].indexOf(f)<0&&this._events[d].push(f)}},{key:"removeEventListener",value:function(d,f){if(Object.prototype.hasOwnProperty.call(this._events,d)){var m=this._events[d],v=m.indexOf(f);v>=0&&m.splice(v,1),m.length===0&&delete this._events[d]}}}])&&function(d,f){for(var m=0;m<f.length;m++){var v=f[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}(u.prototype,h),u}();return l.default})()}},i={};function r(a){var o=i[a];if(o!==void 0)return o.exports;var l=i[a]={exports:{}};return t[a].call(l.exports,l,l.exports,r),l.exports}r.n=a=>{var o=a&&a.__esModule?()=>a.default:()=>a;return r.d(o,{a:o}),o},r.d=(a,o)=>{for(var l in o)r.o(o,l)&&!r.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:o[l]})},r.o=(a,o)=>Object.prototype.hasOwnProperty.call(a,o),r.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var s={};return(()=>{r.r(s),r.d(s,{GamepadHandler:()=>x,GamepadListener:()=>Q});var a=r(162),o=r.n(a),l=r(944),c=r.n(l);function u(X){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},u(X)}function h(X,Y){if(!(X instanceof Y))throw new TypeError("Cannot call a class as a function")}function d(X,Y){for(var ae=0;ae<Y.length;ae++){var se=Y[ae];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(X,_(se.key),se)}}function f(X,Y){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ae,se){return ae.__proto__=se,ae},f(X,Y)}function m(X,Y){if(Y&&(u(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}(X)}function v(X){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},v(X)}function _(X){var Y=function(ae,se){if(u(ae)!=="object"||ae===null)return ae;var ue=ae[Symbol.toPrimitive];if(ue!==void 0){var Ne=ue.call(ae,"string");if(u(Ne)!=="object")return Ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ae)}(X);return u(Y)==="symbol"?Y:String(Y)}var y,S,T,x=function(X){(function(Le,He){if(typeof He!="function"&&He!==null)throw new TypeError("Super expression must either be null or a function");Le.prototype=Object.create(He&&He.prototype,{constructor:{value:Le,writable:!0,configurable:!0}}),Object.defineProperty(Le,"prototype",{writable:!1}),He&&f(Le,He)})(_e,X);var Y,ae,se,ue,Ne,ve=(ue=_e,Ne=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Le,He=v(ue);if(Ne){var $e=v(this).constructor;Le=Reflect.construct(He,arguments,$e)}else Le=He.apply(this,arguments);return m(this,Le)});function _e(Le,He){var $e,bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return h(this,_e),($e=ve.call(this)).index=Le,$e.gamepad=He,$e.options=$e.constructor.resolveOptions(bt),$e.axes=new Array(He.axes.length).fill(null),$e.buttons=new Array(He.buttons.length).fill(null),$e.initAxes(),$e.initButtons(),$e}return Y=_e,se=[{key:"resolveOptions",value:function(Le){var He,$e,bt,Ct,Lt=Le.axis,Gt=Le.button;return{axis:this.optionResolver.resolve((He=($e=Lt??Gt)!==null&&$e!==void 0?$e:Le)!==null&&He!==void 0?He:{}),button:this.optionResolver.resolve((bt=(Ct=Gt??Lt)!==null&&Ct!==void 0?Ct:Le)!==null&&bt!==void 0?bt:{})}}}],(ae=[{key:"initAxes",value:function(){for(var Le=this.axes.length,He=0;He<Le;He++)this.axes[He]=this.resolveAxisValue(He)}},{key:"initButtons",value:function(){for(var Le=this.buttons.length,He=0;He<Le;He++)this.buttons[He]=this.resolveButtonValue(He)}},{key:"update",value:function(Le){this.gamepad=Le,this.updateAxis(),this.updateButtons()}},{key:"updateAxis",value:function(){for(var Le=this.axes.length,He=0;He<Le;He++)this.setAxisValue(He,this.resolveAxisValue(He))}},{key:"updateButtons",value:function(){for(var Le=this.buttons.length,He=0;He<Le;He++)this.setButtonValue(He,this.resolveButtonValue(He))}},{key:"setAxisValue",value:function(Le,He){this.axes[Le]!==He&&(this.axes[Le]=He,this.emit("axis",{gamepad:this.gamepad,index:this.index,axis:Le,value:He}))}},{key:"setButtonValue",value:function(Le,He){this.buttons[Le]!==He&&(this.buttons[Le]=He,this.emit("button",{gamepad:this.gamepad,index:this.index,button:Le,pressed:this.gamepad.buttons[Le].pressed,value:He}))}},{key:"resolveAxisValue",value:function(Le){var He=this.options.axis,$e=He.deadZone,bt=He.analog,Ct=He.precision,Lt=this.gamepad.axes[Le];return $e&&Lt<$e&&Lt>-$e?0:bt?Ct?Math.round(Lt*Ct)/Ct:Lt:Lt>0?1:Lt<0?-1:0}},{key:"resolveButtonValue",value:function(Le){var He=this.options.button,$e=He.deadZone,bt=He.analog,Ct=He.precision,Lt=this.gamepad.buttons[Le].value;return $e>0&&Lt<$e&&Lt>-$e?0:bt?Ct?Math.round(Lt*Ct)/Ct:Lt:Lt===0?0:1}}])&&d(Y.prototype,ae),se&&d(Y,se),Object.defineProperty(Y,"prototype",{writable:!1}),_e}(o());function I(X){return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},I(X)}function R(X,Y){for(var ae=0;ae<Y.length;ae++){var se=Y[ae];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(X,N(se.key),se)}}function N(X){var Y=function(ae,se){if(I(ae)!=="object"||ae===null)return ae;var ue=ae[Symbol.toPrimitive];if(ue!==void 0){var Ne=ue.call(ae,"string");if(I(Ne)!=="object")return Ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ae)}(X);return I(Y)==="symbol"?Y:String(Y)}y=x,S="optionResolver",T=new(c())().setDefaults({analog:!0,deadZone:0,precision:0}).setTypes({analog:"boolean",deadZone:"number",precision:"number"}).setValidators({deadZone:function(X){return Math.max(Math.min(X,1),0)},precision:function(X){return X>0?Math.pow(10,X):0}}),(S=_(S))in y?Object.defineProperty(y,S,{value:T,enumerable:!0,configurable:!0,writable:!0}):y[S]=T;var L=function(){function X(se){(function(ue,Ne){if(!(ue instanceof Ne))throw new TypeError("Cannot call a class as a function")})(this,X),this.callback=se,this.frame=null,this.update=this.update.bind(this)}var Y,ae;return Y=X,(ae=[{key:"setCallback",value:function(se){this.callback=se}},{key:"start",value:function(){this.frame||(this.frame=window.requestAnimationFrame(this.update))}},{key:"stop",value:function(){this.frame&&(window.cancelAnimationFrame(this.frame),this.frame=null)}},{key:"update",value:function(){this.frame=window.requestAnimationFrame(this.update),this.callback()}}])&&R(Y.prototype,ae),Object.defineProperty(Y,"prototype",{writable:!1}),X}();function k(X){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},k(X)}function z(X,Y){if(!(X instanceof Y))throw new TypeError("Cannot call a class as a function")}function Z(X,Y){for(var ae=0;ae<Y.length;ae++){var se=Y[ae];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(X,H(se.key),se)}}function H(X){var Y=function(ae,se){if(k(ae)!=="object"||ae===null)return ae;var ue=ae[Symbol.toPrimitive];if(ue!==void 0){var Ne=ue.call(ae,"string");if(k(Ne)!=="object")return Ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ae)}(X);return k(Y)==="symbol"?Y:String(Y)}function q(X,Y){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ae,se){return ae.__proto__=se,ae},q(X,Y)}function U(X,Y){if(Y&&(k(Y)==="object"||typeof Y=="function"))return Y;if(Y!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(X)}function ee(X){if(X===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function W(X){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Y){return Y.__proto__||Object.getPrototypeOf(Y)},W(X)}var Q=function(X){(function(_e,Le){if(typeof Le!="function"&&Le!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(Le&&Le.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),Le&&q(_e,Le)})(ve,X);var Y,ae,se,ue,Ne=(se=ve,ue=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var _e,Le=W(se);if(ue){var He=W(this).constructor;_e=Reflect.construct(Le,arguments,He)}else _e=Le.apply(this,arguments);return U(this,_e)});function ve(){var _e,Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(z(this,ve),_e=Ne.call(this),typeof navigator.getGamepads!="function")throw new Error("This browser does not support gamepad API.");return _e.options=Le,_e.onAxis=_e.onAxis.bind(ee(_e)),_e.update=_e.update.bind(ee(_e)),_e.start=_e.start.bind(ee(_e)),_e.stop=_e.stop.bind(ee(_e)),_e.discover=_e.discover.bind(ee(_e)),_e.onButton=_e.onButton.bind(ee(_e)),_e.handlers=new Array(4).fill(null),_e.loop=new L(_e.update),window.addEventListener("error",_e.stop),_e}return Y=ve,(ae=[{key:"start",value:function(){this.loop.start()}},{key:"stop",value:function(){this.loop.stop()}},{key:"update",value:function(){var _e=navigator.getGamepads();this.discover(_e[0],0),this.discover(_e[1],1),this.discover(_e[2],2),this.discover(_e[3],3)}},{key:"discover",value:function(_e,Le){_e?(this.handlers[Le]===null&&this.registerHandler(Le,_e),this.handlers[Le].update(_e)):this.handlers[Le]&&this.removeGamepad(Le)}},{key:"registerHandler",value:function(_e,Le){var He=new x(_e,Le,this.options);this.handlers[_e]=He,He.addEventListener("axis",this.onAxis),He.addEventListener("button",this.onButton),this.emit("gamepad:connected",{index:_e,gamepad:Le}),this.emit("gamepad:".concat(_e,":connected"),{index:_e,gamepad:Le})}},{key:"removeGamepad",value:function(_e){var Le=this.handlers[_e];Le.removeEventListener("axis",this.onAxis),Le.removeEventListener("button",this.onButton),this.handlers[_e]=null,this.emit("gamepad:disconnected",{index:_e}),this.emit("gamepad:".concat(_e,":disconnected"),{index:_e})}},{key:"onAxis",value:function(_e){var Le=_e.detail.index;this.emit("gamepad:axis",_e.detail),this.emit("gamepad:".concat(Le,":axis"),_e.detail),this.emit("gamepad:".concat(Le,":axis:").concat(_e.detail.axis),_e.detail)}},{key:"onButton",value:function(_e){var Le=_e.detail.index;this.emit("gamepad:button",_e.detail),this.emit("gamepad:".concat(Le,":button"),_e.detail),this.emit("gamepad:".concat(Le,":button:").concat(_e.detail.button),_e.detail)}}])&&Z(Y.prototype,ae),Object.defineProperty(Y,"prototype",{writable:!1}),ve}(o())})(),s})())})(pue);var yot=pue.exports,nv={};Object.defineProperty(nv,"__esModule",{value:!0});var Knt=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ZF={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},mue={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Knt?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},NV={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var yO=1;yO<20;yO++)NV["f"+yO]=111+yO;function YU(n,e,t){e&&!("byKey"in e)&&(t=e,e=null),Array.isArray(n)||(n=[n]);var i=n.map(function(a){return gue(a,e)}),r=function(o){return i.some(function(l){return vue(l,o)})},s=t==null?r:r(t);return s}function Znt(n,e){return YU(n,e)}function Jnt(n,e){return YU(n,{byKey:!0},e)}function gue(n,e){var t=e&&e.byKey,i={};n=n.replace("++","+add");var r=n.split("+"),s=r.length;for(var a in ZF)i[ZF[a]]=!1;var o=!0,l=!1,c=void 0;try{for(var u=r[Symbol.iterator](),h;!(o=(h=u.next()).done);o=!0){var d=h.value,f=d.endsWith("?")&&d.length>1;f&&(d=d.slice(0,-1));var m=PV(d),v=ZF[m];if(d.length>1&&!v&&!mue[d]&&!NV[m])throw new TypeError('Unknown modifier: "'+d+'"');(s===1||!v)&&(t?i.key=m:i.which=yue(d)),v&&(i[v]=f?null:!0)}}catch(_){l=!0,c=_}finally{try{!o&&u.return&&u.return()}finally{if(l)throw c}}return i}function vue(n,e){for(var t in n){var i=n[t],r=void 0;if(i!=null&&(t==="key"&&e.key!=null?r=e.key.toLowerCase():t==="which"?r=i===91&&e.which===93?91:e.which:r=e[t],!(r==null&&i===!1)&&r!==i))return!1}return!0}function yue(n){n=PV(n);var e=NV[n]||n.toUpperCase().charCodeAt(0);return e}function PV(n){return n=n.toLowerCase(),n=mue[n]||n,n}var _ot=nv.default=YU;nv.isHotkey=YU;nv.isCodeHotkey=Znt;nv.isKeyHotkey=Jnt;nv.parseHotkey=gue;nv.compareHotkey=vue;nv.toKeyCode=yue;nv.toKeyName=PV;function bot(n){return{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map(function(r){r(t)}),(i=n.get("*"))&&i.slice().map(function(r){r(e,t)})}}}const Qnt=n=>{const e="nativeEvent"in n?n.nativeEvent:n;return{deltaX:e.deltaX||0,deltaY:e.deltaY||0,deltaZ:e.deltaZ||0,timeStamp:e.timeStamp}},eit=n=>[n.deltaX,n.deltaY,n.deltaZ],_O=n=>{const e=eit(n).map(Math.abs);return Math.max(...e)};var ry;(function(n){n.ALL_OTHER_CHECKS_FAILED="ALL_OTHER_CHECKS_FAILED",n.NO_PREVIOUS_EVENT_TO_COMPARE="NO_PREVIOUS_EVENT_TO_COMPARE",n.PAST_TIMESTAMP_EVENT="PAST_TIMESTAMP_EVENT",n.ENOUGH_TIME_PASSED="ENOUGH_TIME_PASSED",n.NON_DECREASING_DELTAS_OF_KNOWN_HUMAN="NON_DECREASING_DELTAS_OF_KNOWN_HUMAN",n.DELTA_MODULE_HAS_BEEN_INCREASING="DELTA_MODULE_HAS_BEEN_INCREASING"})(ry||(ry={}));class Sot{constructor({sensitivity:e=2,delay:t=100,increasingDeltasThreshold:i=3}={}){c1(this,"sensitivity");c1(this,"delay");c1(this,"increasingDeltasThreshold");c1(this,"previousEvents");this.sensitivity=Math.max(1,e),this.delay=Math.max(1,t),this.increasingDeltasThreshold=Math.max(2,i),this.previousEvents=[]}check(e){var s;if(!(("nativeEvent"in e?e.nativeEvent:e)instanceof Event))throw new Error(`"${e}" is not a valid event`);const i=Qnt(e);if(_O(i)<this.sensitivity)return!1;const{isHuman:r}=this.isHuman(i);return r?this.previousEvents=[i]:i.timeStamp>(((s=this.previousEvents.at(-1))==null?void 0:s.timeStamp)||0)&&this.previousEvents.push(i),r}isHuman(e){const t=this.previousEvents.at(-1);if(!t)return{isHuman:!0,reason:ry.NO_PREVIOUS_EVENT_TO_COMPARE};if(e.timeStamp<t.timeStamp)return{isHuman:!1,reason:ry.PAST_TIMESTAMP_EVENT};if(e.timeStamp>t.timeStamp+this.delay)return{isHuman:!0,reason:ry.ENOUGH_TIME_PASSED};const s=_O(e),a=_O(t);if(s>=a){if(this.previousEvents.length===1)return{isHuman:!0,reason:ry.NON_DECREASING_DELTAS_OF_KNOWN_HUMAN};if(this.increasingDeltasThreshold<=2||this.previousEvents.length>=this.increasingDeltasThreshold&&this.previousEvents.slice(-this.increasingDeltasThreshold).map(_O).every((u,h,d)=>h===0||u>d[h-1]))return{isHuman:!0,reason:ry.DELTA_MODULE_HAS_BEEN_INCREASING}}return{isHuman:!1,reason:ry.ALL_OTHER_CHECKS_FAILED}}}class tit{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return nit(e).buffer}}function nit(n){let e=0;for(const r of n)e+=r.byteLength;const t=new Uint8Array(e);let i=0;for(const r of n){const s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t.set(s,i),i+=r.byteLength}return t}function _ue(n){return new iit(n).unpack()}function bue(n){const e=new rit,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class iit{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let i=0,r="",s,a;for(;i<e;)s=t[i],s<160?(a=s,i++):(s^192)<32?(a=(s&31)<<6|t[i+1]&63,i+=2):(s^224)<16?(a=(s&15)<<12|(t[i+1]&63)<<6|t[i+2]&63,i+=3):(a=(s&7)<<18|(t[i+1]&63)<<12|(t[i+2]&63)<<6|t[i+3]&63,i+=4),r+=String.fromCodePoint(a);return this.index+=e,r}unpack_array(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=this.unpack();return t}unpack_map(e){const t={};for(let i=0;i<e;i++){const r=this.unpack();t[r]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,i=(e>>23&255)-127,r=e&8388607|8388608;return(t===0?1:-1)*r*2**(i-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),i=e>>31,r=(e>>20&2047)-1023,a=(e&1048575|1048576)*2**(r-20)+t*2**(r-52);return(i===0?1:-1)*a}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class rit{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const i=this.pack_array(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const i=e;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const i=this.pack_object(e);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),i=t.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const i=r=>{if(r<t){const s=this.pack(e[r]);return s instanceof Promise?s.then(()=>i(r+1)):i(r+1)}};return i(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const i=Math.floor(Math.log(e)/Math.LN2),r=e/2**i-1,s=Math.floor(r*2**52),a=2**32,o=t<<31|i+1023<<20|s/a&1048575,l=s%a;this._bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(l)}pack_object(e){const t=Object.keys(e),i=t.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const r=s=>{if(s<t.length){const a=t[s];if(e.hasOwnProperty(a)){this.pack(a);const o=this.pack(e[a]);if(o instanceof Promise)return o.then(()=>r(s+1))}return r(s+1)}};return r(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),i=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new tit,this._textEncoder=new TextEncoder}}let Sue=!0,Eue=!0;function gI(n,e,t){const i=n.match(e);return i&&i.length>=t&&parseInt(i[t],10)}function tS(n,e,t){if(!n.RTCPeerConnection)return;const i=n.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(a,o){if(a!==e)return r.apply(this,arguments);const l=c=>{const u=t(c);u&&(o.handleEvent?o.handleEvent(u):o(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(o,l),r.apply(this,[a,l])};const s=i.removeEventListener;i.removeEventListener=function(a,o){if(a!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(o))return s.apply(this,arguments);const l=this._eventMap[e].get(o);return this._eventMap[e].delete(o),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,l])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function sit(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Sue=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function ait(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(Eue=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function Tue(){if(typeof window=="object"){if(Sue)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function DV(n,e){Eue&&console.warn(n+" is deprecated, please use "+e+" instead.")}function oit(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const i=t.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=gI(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=gI(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=gI(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function uK(n){return Object.prototype.toString.call(n)==="[object Object]"}function xue(n){return uK(n)?Object.keys(n).reduce(function(e,t){const i=uK(n[t]),r=i?xue(n[t]):n[t],s=i&&!Object.keys(r).length;return r===void 0||s?e:Object.assign(e,{[t]:r})},{}):n}function X5(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?X5(n,n.get(e[i]),t):i.endsWith("Ids")&&e[i].forEach(r=>{X5(n,n.get(r),t)})}))}function hK(n,e,t){const i=t?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const s=[];return n.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&s.push(a)}),s.forEach(a=>{n.forEach(o=>{o.type===i&&o.trackId===a.id&&X5(n,o,r)})}),r}const dK=Tue;function wue(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const i=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const l={};return Object.keys(o).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof o[c]=="object"?o[c]:{ideal:o[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const h=function(d,f){return d?d+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(u.ideal!==void 0){l.optional=l.optional||[];let d={};typeof u.ideal=="number"?(d[h("min",c)]=u.ideal,l.optional.push(d),d={},d[h("max",c)]=u.ideal,l.optional.push(d)):(d[h("",c)]=u.ideal,l.optional.push(d))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[h("",c)]=u.exact):["min","max"].forEach(d=>{u[d]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[h(d,c)]=u[d])})}),o.advanced&&(l.optional=(l.optional||[]).concat(o.advanced)),l},r=function(o,l){if(e.version>=61)return l(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const c=function(u,h,d){h in u&&!(d in u)&&(u[d]=u[h],delete u[h])};o=JSON.parse(JSON.stringify(o)),c(o.audio,"autoGainControl","googAutoGainControl"),c(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=i(o.audio)}if(o&&typeof o.video=="object"){let c=o.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete o.video.facingMode;let h;if(c.exact==="environment"||c.ideal==="environment"?h=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(h=["front"]),h)return t.mediaDevices.enumerateDevices().then(d=>{d=d.filter(m=>m.kind==="videoinput");let f=d.find(m=>h.some(v=>m.label.toLowerCase().includes(v)));return!f&&d.length&&h.includes("back")&&(f=d[d.length-1]),f&&(o.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId}),o.video=i(o.video),dK("chrome: "+JSON.stringify(o)),l(o)})}o.video=i(o.video)}return dK("chrome: "+JSON.stringify(o)),l(o)},s=function(o){return e.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(o,l,c){r(o,u=>{t.webkitGetUserMedia(u,l,h=>{c&&c(s(h))})})};if(t.getUserMedia=a.bind(t),t.mediaDevices.getUserMedia){const o=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(l){return r(l,c=>o(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function Cue(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Aue(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===r.track.id):s={track:r.track};const a=new Event("track");a.track=r.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[i.stream],this.dispatchEvent(a)}),i.stream.getTracks().forEach(r=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===r.id):s={track:r};const a=new Event("track");a.track=r,a.receiver=s,a.transceiver={receiver:s},a.streams=[i.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else tS(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Mue(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(r,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=r.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:r}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,l){let c=r.apply(this,arguments);return c||(c=e(this,o),this._senders.push(c)),c};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const l=this._senders.indexOf(o);l!==-1&&this._senders.splice(l,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(e(this,a))})};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],i.apply(this,[s]),s.getTracks().forEach(a=>{const o=this._senders.find(l=>l.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Rue(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(a=>a._pc=this),s});const i=n.RTCPeerConnection.prototype.addTrack;i&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=i.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>hK(a,s.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(s=>s._pc=this),r}),tS(n,"track",i=>(i.receiver._pc=i.srcElement,i)),n.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(s=>hK(s,r.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const i=arguments[0];let r,s,a;return this.getSenders().forEach(o=>{o.track===i&&(r?a=!0:r=o)}),this.getReceivers().forEach(o=>(o.track===i&&(s?a=!0:s=o),o.track===i)),a||r&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Oue(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(l)===-1&&this._shimmedLocalStreams[o.id].push(l):this._shimmedLocalStreams[o.id]=[o,l],l};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(c=>{if(this.getSenders().find(h=>h.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();t.apply(this,arguments);const l=this.getSenders().filter(c=>o.indexOf(c)===-1);this._shimmedLocalStreams[a.id]=[a].concat(l)};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],i.apply(this,arguments)};const r=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const l=this._shimmedLocalStreams[o].indexOf(a);l!==-1&&this._shimmedLocalStreams[o].splice(l,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),r.apply(this,arguments)}}function Iue(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Oue(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const u=t.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(h=>this._reverseStreams[h.id])};const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(h=>{if(this.getSenders().find(f=>f.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const h=new n.MediaStream(u.getTracks());this._streams[u.id]=h,this._reverseStreams[h.id]=u,u=h}i.apply(this,[u])};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},n.RTCPeerConnection.prototype.addTrack=function(u,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(v=>v===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[h.id];if(m)m.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new n.MediaStream([u]);this._streams[h.id]=v,this._reverseStreams[v.id]=h,this.addStream(v)}return this.getSenders().find(v=>v.track===u)};function s(c,u){let h=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(d=>{const f=c._reverseStreams[d],m=c._streams[f.id];h=h.replace(new RegExp(m.id,"g"),f.id)}),new RTCSessionDescription({type:u.type,sdp:h})}function a(c,u){let h=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(d=>{const f=c._reverseStreams[d],m=c._streams[f.id];h=h.replace(new RegExp(f.id,"g"),m.id)}),new RTCSessionDescription({type:u.type,sdp:h})}["createOffer","createAnswer"].forEach(function(c){const u=n.RTCPeerConnection.prototype[c],h={[c](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[m=>{const v=s(this,m);d[0].apply(null,[v])},m=>{d[1]&&d[1].apply(null,m)},arguments[2]]):u.apply(this,arguments).then(m=>s(this,m))}};n.RTCPeerConnection.prototype[c]=h[c]});const o=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=a(this,arguments[0]),o.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),n.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(v=>u.track===v)&&(d=this._streams[f])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function K5(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const i=n.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=r[t]})}function Nue(n,e){tS(n,"negotiationneeded",t=>{const i=t.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return t})}const fK=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Nue,shimAddTrackRemoveTrack:Iue,shimAddTrackRemoveTrackWithNative:Oue,shimGetSendersWithDtmf:Mue,shimGetUserMedia:wue,shimMediaStream:Cue,shimOnTrack:Aue,shimPeerConnection:K5,shimSenderReceiverGetStats:Rue},Symbol.toStringTag,{value:"Module"}));function Pue(n,e){const t=n&&n.navigator,i=n&&n.MediaStreamTrack;if(t.getUserMedia=function(r,s,a){DV("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(r).then(s,a)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const r=function(a,o,l){o in a&&!(l in a)&&(a[l]=a[o],delete a[o])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a.audio,"autoGainControl","mozAutoGainControl"),r(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},i&&i.prototype.getSettings){const a=i.prototype.getSettings;i.prototype.getSettings=function(){const o=a.apply(this,arguments);return r(o,"mozAutoGainControl","autoGainControl"),r(o,"mozNoiseSuppression","noiseSuppression"),o}}if(i&&i.prototype.applyConstraints){const a=i.prototype.applyConstraints;i.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),r(o,"autoGainControl","mozAutoGainControl"),r(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function lit(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(i)})}function Due(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Z5(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=n.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[r]=a[r]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,a,o]=arguments;return i.apply(this,[s||null]).then(l=>{if(e.version<53&&!a)try{l.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,h)=>{l.set(h,Object.assign({},u,{type:t[u.type]||u.type}))})}return l}).then(a,o)}}function kue(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const r=t.apply(this,arguments);return r._pc=this,r}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Lue(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),tS(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Uue(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){DV("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&t.getTracks().includes(i.track)&&this.removeTrack(i)})})}function Bue(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function Fue(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(r){const{sender:a}=s,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=i,a.sendEncodings=i,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function zue(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function jue(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Hue(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const pK=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Fue,shimCreateAnswer:Hue,shimCreateOffer:jue,shimGetDisplayMedia:lit,shimGetParameters:zue,shimGetUserMedia:Pue,shimOnTrack:Due,shimPeerConnection:Z5,shimRTCDataChannel:Bue,shimReceiverGetStats:Lue,shimRemoveStream:Uue,shimSenderGetStats:kue},Symbol.toStringTag,{value:"Module"}));function Vue(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},n.RTCPeerConnection.prototype.addTrack=function(i,...r){return r&&r.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(t);if(i===-1)return;this._localStreams.splice(i,1);const r=t.getTracks();this.getSenders().forEach(s=>{r.includes(s.track)&&this.removeTrack(s)})})}}function Gue(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const s=new Event("addstream");s.stream=r,this.dispatchEvent(s)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(s=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(s)>=0)return;i._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,i.dispatchEvent(a)})}),e.apply(i,arguments)}}}function que(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(c,u){const h=arguments.length>=2?arguments[2]:arguments[0],d=t.apply(this,[h]);return u?(d.then(c,u),Promise.resolve()):d},e.createAnswer=function(c,u){const h=arguments.length>=2?arguments[2]:arguments[0],d=i.apply(this,[h]);return u?(d.then(c,u),Promise.resolve()):d};let o=function(l,c,u){const h=r.apply(this,[l]);return u?(h.then(c,u),Promise.resolve()):h};e.setLocalDescription=o,o=function(l,c,u){const h=s.apply(this,[l]);return u?(h.then(c,u),Promise.resolve()):h},e.setRemoteDescription=o,o=function(l,c,u){const h=a.apply(this,[l]);return u?(h.then(c,u),Promise.resolve()):h},e.addIceCandidate=o}function $ue(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,i=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=r=>i(Wue(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,r,s){e.mediaDevices.getUserMedia(i).then(r,s)}).bind(e))}function Wue(n){return n&&n.video!==void 0?Object.assign({},n,{video:xue(n.video)}):n}function Yue(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const s=[];for(let a=0;a<i.iceServers.length;a++){let o=i.iceServers[a];o.urls===void 0&&o.url?(DV("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(i.iceServers[a])}i.iceServers=s}return new e(i,r)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Xue(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Kue(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):i.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Zue(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const mK=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Zue,shimCallbacksAPI:que,shimConstraints:Wue,shimCreateOfferLegacy:Kue,shimGetUserMedia:$ue,shimLocalStreamsAPI:Vue,shimRTCIceServerUrls:Yue,shimRemoteStreamsAPI:Gue,shimTrackEventTransceiver:Xue},Symbol.toStringTag,{value:"Module"}));var Jue={exports:{}};(function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(t){return t.split(`
m=`).map((r,s)=>(s>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(t){const i=e.splitSections(t);return i&&i[0]},e.getMediaSections=function(t){const i=e.splitSections(t);return i.shift(),i},e.matchPrefix=function(t,i){return e.splitLines(t).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(t){let i;t.indexOf("a=candidate:")===0?i=t.substring(12).split(" "):i=t.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let s=8;s<i.length;s+=2)switch(i[s]){case"raddr":r.relatedAddress=i[s+1];break;case"rport":r.relatedPort=parseInt(i[s+1],10);break;case"tcptype":r.tcpType=i[s+1];break;case"ufrag":r.ufrag=i[s+1],r.usernameFragment=i[s+1];break;default:r[i[s]]===void 0&&(r[i[s]]=i[s+1]);break}return r},e.writeCandidate=function(t){const i=[];i.push(t.foundation);const r=t.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(t.protocol.toUpperCase()),i.push(t.priority),i.push(t.address||t.ip),i.push(t.port);const s=t.type;return i.push("typ"),i.push(s),s!=="host"&&t.relatedAddress&&t.relatedPort&&(i.push("raddr"),i.push(t.relatedAddress),i.push("rport"),i.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(i.push("ufrag"),i.push(t.usernameFragment||t.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let i=t.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(t){let i=t.payloadType;t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType);const r=t.channels||t.numChannels||1;return"a=rtpmap:"+i+" "+t.name+"/"+t.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(t){const i=t.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const i={};let r;const s=t.substring(t.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)r=s[a].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(t){let i="",r=t.payloadType;if(t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const s=[];Object.keys(t.parameters).forEach(a=>{t.parameters[a]!==void 0?s.push(a+"="+t.parameters[a]):s.push(a)}),i+="a=fmtp:"+r+" "+s.join(";")+`\r
`}return i},e.parseRtcpFb=function(t){const i=t.substring(t.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(t){let i="",r=t.payloadType;return t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(s=>{i+="a=rtcp-fb:"+r+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(t){const i=t.indexOf(" "),r={ssrc:parseInt(t.substring(7,i),10)},s=t.indexOf(":",i);return s>-1?(r.attribute=t.substring(i+1,s),r.value=t.substring(s+1)):r.attribute=t.substring(i+1),r},e.parseSsrcGroup=function(t){const i=t.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(t){const i=e.matchPrefix(t,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(t){const i=t.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(t,i){return{role:"auto",fingerprints:e.matchPrefix(t+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,i){let r="a=setup:"+i+`\r
`;return t.fingerprints.forEach(s=>{r+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),r},e.parseCryptoLine=function(t){const i=t.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const i=t.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,i){return e.matchPrefix(t+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,i){const r=e.matchPrefix(t+i,"a=ice-ufrag:")[0],s=e.matchPrefix(t+i,"a=ice-pwd:")[0];return r&&s?{usernameFragment:r.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(t){let i="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(t){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(t)[0].split(" ");i.profile=s[2];for(let o=3;o<s.length;o++){const l=s[o],c=e.matchPrefix(t,"a=rtpmap:"+l+" ")[0];if(c){const u=e.parseRtpMap(c),h=e.matchPrefix(t,"a=fmtp:"+l+" ");switch(u.parameters=h.length?e.parseFmtp(h[0]):{},u.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),i.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(o=>{i.headerExtensions.push(e.parseExtmap(o))});const a=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(o=>{a.forEach(l=>{o.rtcpFeedback.find(u=>u.type===l.type&&u.parameter===l.parameter)||o.rtcpFeedback.push(l)})}),i},e.writeRtpDescription=function(t,i){let r="";r+="m="+t+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(a=>{r+=e.writeRtpMap(a),r+=e.writeFmtp(a),r+=e.writeRtcpFb(a)});let s=0;return i.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(r+="a=maxptime:"+s+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(a=>{r+=e.writeExtmap(a)}),r},e.parseRtpEncodingParameters=function(t){const i=[],r=e.parseRtpParameters(t),s=r.fecMechanisms.indexOf("RED")!==-1,a=r.fecMechanisms.indexOf("ULPFEC")!==-1,o=e.matchPrefix(t,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="cname"),l=o.length>0&&o[0].ssrc;let c;const u=e.matchPrefix(t,"a=ssrc-group:FID").map(d=>d.substring(17).split(" ").map(m=>parseInt(m,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),r.codecs.forEach(d=>{if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){let f={ssrc:l,codecPayloadType:parseInt(d.parameters.apt,10)};l&&c&&(f.rtx={ssrc:c}),i.push(f),s&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:l,mechanism:a?"red+ulpfec":"red"},i.push(f))}}),i.length===0&&l&&i.push({ssrc:l});let h=e.matchPrefix(t,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substring(5),10)*1e3*.95-50*40*8:h=void 0,i.forEach(d=>{d.maxBitrate=h})),i},e.parseRtcpParameters=function(t){const i={},r=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const s=e.matchPrefix(t,"a=rtcp-rsize");i.reducedSize=s.length>0,i.compound=s.length===0;const a=e.matchPrefix(t,"a=rtcp-mux");return i.mux=a.length>0,i},e.writeRtcpParameters=function(t){let i="";return t.reducedSize&&(i+=`a=rtcp-rsize\r
`),t.mux&&(i+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(i+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),i},e.parseMsid=function(t){let i;const r=e.matchPrefix(t,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const s=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return i=s[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(t){const i=e.parseMLine(t),r=e.matchPrefix(t,"a=max-message-size:");let s;r.length>0&&(s=parseInt(r[0].substring(19),10)),isNaN(s)&&(s=65536);const a=e.matchPrefix(t,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:i.fmt,maxMessageSize:s};const o=e.matchPrefix(t,"a=sctpmap:");if(o.length>0){const l=o[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(t,i){let r=[];return t.protocol!=="DTLS/SCTP"?r=["m="+t.kind+" 9 "+t.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+t.kind+" 9 "+t.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,i,r){let s;const a=i!==void 0?i:2;return t?s=t:s=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,i){const r=e.splitLines(t);for(let s=0;s<r.length;s++)switch(r[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[s].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const r=e.splitLines(t)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(t){const r=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const i=e.splitLines(t);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},n.exports=e})(Jue);var Que=Jue.exports;const uT=Dl(Que),cit=rfe({__proto__:null,default:uT},[Que]);function vI(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),s=uT.parseCandidate(i.candidate);for(const a in s)a in r||Object.defineProperty(r,a,{value:s[a]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},n.RTCIceCandidate.prototype=e.prototype,tS(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function J5(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||tS(n,"icecandidate",e=>{if(e.candidate){const t=uT.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function yI(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(o){if(!o||!o.sdp)return!1;const l=uT.splitSections(o.sdp);return l.shift(),l.some(c=>{const u=uT.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},i=function(o){const l=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},r=function(o){let l=65536;return e.browser==="firefox"&&(e.version<57?o===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(o,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=uT.matchPrefix(o.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},a=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const l=i(arguments[0]),c=r(l),u=s(arguments[0],l);let h;c===0&&u===0?h=Number.POSITIVE_INFINITY:c===0||u===0?h=Math.max(c,u):h=Math.min(c,u);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return h}}),this._sctp=d}return a.apply(this,arguments)}}function _I(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(i,r){const s=i.send;i.send=function(){const o=arguments[0],l=o.length||o.size||o.byteLength;if(i.readyState==="open"&&r.sctp&&l>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return s.apply(i,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const r=t.apply(this,arguments);return e(r,this),r},tS(n,"datachannel",i=>(e(i.channel,i.target),i))}function Q5(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const i=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const s=r.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",r);s.dispatchEvent(a)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function e6(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=r.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&r instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:r.type,sdp:s}):r.sdp=s}return t.apply(this,arguments)}}function bI(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function SI(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return t.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?t.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>t.apply(this,[a]))})}const uit=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:e6,shimAddIceCandidateNullOrEmpty:bI,shimConnectionState:Q5,shimMaxMessageSize:yI,shimParameterlessSetLocalDescription:SI,shimRTCIceCandidate:vI,shimRTCIceCandidateRelayProtocol:J5,shimSendThrowTypeError:_I},Symbol.toStringTag,{value:"Module"}));function hit({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=Tue,i=oit(n),r={browserDetails:i,commonShim:uit,extractVersion:gI,disableLog:sit,disableWarnings:ait,sdp:cit};switch(i.browser){case"chrome":if(!fK||!K5||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),r;if(i.version===null)return t("Chrome shim can not determine version, not shimming."),r;t("adapter.js shimming chrome."),r.browserShim=fK,bI(n,i),SI(n),wue(n,i),Cue(n),K5(n,i),Aue(n),Iue(n,i),Mue(n),Rue(n),Nue(n,i),vI(n),J5(n),Q5(n),yI(n,i),_I(n),e6(n,i);break;case"firefox":if(!pK||!Z5||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),r;t("adapter.js shimming firefox."),r.browserShim=pK,bI(n,i),SI(n),Pue(n,i),Z5(n,i),Due(n),Uue(n),kue(n),Lue(n),Bue(n),Fue(n),zue(n),jue(n),Hue(n),vI(n),Q5(n),yI(n,i),_I(n);break;case"safari":if(!mK||!e.shimSafari)return t("Safari shim is not included in this adapter release."),r;t("adapter.js shimming safari."),r.browserShim=mK,bI(n,i),SI(n),Yue(n),Kue(n),que(n),Vue(n),Gue(n),Xue(n),$ue(n),Zue(n),vI(n),J5(n),yI(n,i),_I(n),e6(n,i);break;default:t("Unsupported browser!");break}return r}const gK=hit({window:typeof window>"u"?void 0:window});function nS(n,e,t,i){Object.defineProperty(n,e,{get:t,set:i,enumerable:!0,configurable:!0})}class ehe{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],i=e.byteLength,r=Math.ceil(i/this.chunkedMTU);let s=0,a=0;for(;a<i;){const o=Math.min(i,a+this.chunkedMTU),l=e.slice(a,o),c={__peerData:this._dataCount,n:s,data:l,total:r};t.push(c),a=o,s++}return this._dataCount++,t}}}function dit(n){let e=0;for(const r of n)e+=r.byteLength;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.byteLength;return t}const JF=gK.default||gK,H1=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(n)?n==="chrome"?e>=this.minChromeVersion:n==="firefox"?e>=this.minFirefoxVersion:n==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return JF.browserDetails.browser}getVersion(){return JF.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=JF.browserDetails.version||0;if(n==="chrome"&&e<this.minChromeVersion)return!1;if(n==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,i=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),i=!0}catch{}finally{t&&t.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},fit=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),the=()=>Math.random().toString(36).slice(2),vK={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class pit extends ehe{noop(){}blobToArrayBuffer(e,t){const i=new FileReader;return i.onload=function(r){r.target&&t(r.target.result)},i.readAsArrayBuffer(e),i}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=vK,this.browser=H1.getBrowser(),this.browserVersion=H1.getVersion(),this.pack=bue,this.unpack=_ue,this.supports=function(){const t={browser:H1.isBrowserSupported(),webRTC:H1.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let i;try{i=new RTCPeerConnection(vK),t.audioVideo=!0;let r;try{r=i.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!H1.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{i&&i.close()}return t}(),this.validateId=fit,this.randomToken=the}}const _u=new pit,mit="PeerJS: ";var yK;(function(n){n[n.Disabled=0]="Disabled",n[n.Errors=1]="Errors",n[n.Warnings=2]="Warnings",n[n.All=3]="All"})(yK||(yK={}));class git{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const i=[mit,...t];for(const r in i)i[r]instanceof Error&&(i[r]="("+i[r].name+") "+i[r].message);e>=3?console.log(...i):e>=2?console.warn("WARNING",...i):e>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var Rn=new git,kV={},vit=Object.prototype.hasOwnProperty,Vc="~";function XC(){}Object.create&&(XC.prototype=Object.create(null),new XC().__proto__||(Vc=!1));function yit(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function nhe(n,e,t,i,r){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new yit(t,i||n,r),a=Vc?Vc+e:e;return n._events[a]?n._events[a].fn?n._events[a]=[n._events[a],s]:n._events[a].push(s):(n._events[a]=s,n._eventsCount++),n}function EI(n,e){--n._eventsCount===0?n._events=new XC:delete n._events[e]}function oc(){this._events=new XC,this._eventsCount=0}oc.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)vit.call(t,i)&&e.push(Vc?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};oc.prototype.listeners=function(e){var t=Vc?Vc+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,a=new Array(s);r<s;r++)a[r]=i[r].fn;return a};oc.prototype.listenerCount=function(e){var t=Vc?Vc+e:e,i=this._events[t];return i?i.fn?1:i.length:0};oc.prototype.emit=function(e,t,i,r,s,a){var o=Vc?Vc+e:e;if(!this._events[o])return!1;var l=this._events[o],c=arguments.length,u,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,r),!0;case 5:return l.fn.call(l.context,t,i,r,s),!0;case 6:return l.fn.call(l.context,t,i,r,s,a),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var d=l.length,f;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,i);break;case 4:l[h].fn.call(l[h].context,t,i,r);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l[h].fn.apply(l[h].context,u)}}return!0};oc.prototype.on=function(e,t,i){return nhe(this,e,t,i,!1)};oc.prototype.once=function(e,t,i){return nhe(this,e,t,i,!0)};oc.prototype.removeListener=function(e,t,i,r){var s=Vc?Vc+e:e;if(!this._events[s])return this;if(!t)return EI(this,s),this;var a=this._events[s];if(a.fn)a.fn===t&&(!r||a.once)&&(!i||a.context===i)&&EI(this,s);else{for(var o=0,l=[],c=a.length;o<c;o++)(a[o].fn!==t||r&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[s]=l.length===1?l[0]:l:EI(this,s)}return this};oc.prototype.removeAllListeners=function(e){var t;return e?(t=Vc?Vc+e:e,this._events[t]&&EI(this,t)):(this._events=new XC,this._eventsCount=0),this};oc.prototype.off=oc.prototype.removeListener;oc.prototype.addListener=oc.prototype.on;oc.prefixed=Vc;oc.EventEmitter=oc;kV=oc;var iS={};nS(iS,"ConnectionType",()=>Op);nS(iS,"PeerErrorType",()=>Ta);nS(iS,"BaseConnectionErrorType",()=>KC);nS(iS,"DataConnectionErrorType",()=>ZC);nS(iS,"SerializationType",()=>px);nS(iS,"SocketEventType",()=>Tp);nS(iS,"ServerMessageType",()=>ul);var Op;(function(n){n.Data="data",n.Media="media"})(Op||(Op={}));var Ta;(function(n){n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc"})(Ta||(Ta={}));var KC;(function(n){n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed"})(KC||(KC={}));var ZC;(function(n){n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big"})(ZC||(ZC={}));var px;(function(n){n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw"})(px||(px={}));var Tp;(function(n){n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close"})(Tp||(Tp={}));var ul;(function(n){n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE"})(ul||(ul={}));var LV={};LV=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class _it extends kV.EventEmitter{constructor(e,t,i,r,s,a=5e3){super(),this.pingInterval=a,this._disconnected=!0,this._messagesQueue=[];const o=e?"wss://":"ws://";this._baseUrl=o+t+":"+i+r+"peerjs?key="+s}start(e,t){this._id=e;const i=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+LV.version),this._disconnected=!1,this._socket.onmessage=r=>{let s;try{s=JSON.parse(r.data),Rn.log("Server message received:",s)}catch{Rn.log("Invalid server message",r.data);return}this.emit(Tp.Message,s)},this._socket.onclose=r=>{this._disconnected||(Rn.log("Socket closed.",r),this._cleanup(),this._disconnected=!0,this.emit(Tp.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Rn.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Rn.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ul.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Tp.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class ihe{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Op.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const i=this.connection,r={ordered:!!e.reliable},s=t.createDataChannel(i.label,r);i._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Rn.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,i=this.connection.connectionId,r=this.connection.type,s=this.connection.provider;Rn.log("Listening for ICE candidates."),e.onicecandidate=a=>{!a.candidate||!a.candidate.candidate||(Rn.log(`Received ICE candidates for ${t}:`,a.candidate),s.socket.send({type:ul.Candidate,payload:{candidate:a.candidate,type:r,connectionId:i},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Rn.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(KC.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Rn.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(KC.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Rn.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},Rn.log("Listening for data channel"),e.ondatachannel=a=>{Rn.log("Received data channel");const o=a.channel;s.getConnection(t,i)._initializeDataChannel(o)},Rn.log("Listening for remote stream"),e.ontrack=a=>{Rn.log("Received remote stream");const o=a.streams[0],l=s.getConnection(t,i);if(l.type===Op.Media){const c=l;this._addStreamToMediaConnection(o,c)}}}cleanup(){Rn.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let i=!1;const r=this.connection.dataChannel;r&&(i=!!r.readyState&&r.readyState!=="closed"),(t||i)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createOffer(this.connection.options.constraints);Rn.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),Rn.log("Set localDescription:",i,`for:${this.connection.peer}`);let r={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Op.Data){const s=this.connection;r={...r,label:s.label,reliable:s.reliable,serialization:s.serialization}}t.socket.send({type:ul.Offer,payload:r,dst:this.connection.peer})}catch(r){r!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(Ta.WebRTC,r),Rn.log("Failed to setLocalDescription, ",r))}}catch(i){t.emitError(Ta.WebRTC,i),Rn.log("Failed to createOffer, ",i)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const i=await e.createAnswer();Rn.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await e.setLocalDescription(i),Rn.log("Set localDescription:",i,`for:${this.connection.peer}`),t.socket.send({type:ul.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(r){t.emitError(Ta.WebRTC,r),Rn.log("Failed to setLocalDescription, ",r)}}catch(i){t.emitError(Ta.WebRTC,i),Rn.log("Failed to create answer, ",i)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const i=this.connection.peerConnection,r=this.connection.provider;Rn.log("Setting remote description",t);const s=this;try{await i.setRemoteDescription(t),Rn.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(a){r.emitError(Ta.WebRTC,a),Rn.log("Failed to setRemoteDescription, ",a)}}async handleCandidate(e){Rn.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),Rn.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(Ta.WebRTC,t),Rn.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(Rn.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Rn.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(i=>{t.addTrack(i,e)})}_addStreamToMediaConnection(e,t){Rn.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class rhe extends kV.EventEmitter{emitError(e,t){Rn.error("Error:",t),this.emit("error",new bit(`${e}`,t))}}class bit extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class she extends rhe{get open(){return this._open}constructor(e,t,i){super(),this.peer=e,this.provider=t,this.options=i,this._open=!1,this.metadata=i.metadata}}var d6;const Hw=class Hw extends she{get type(){return Op.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,i){super(e,t,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Hw.ID_PREFIX+_u.randomToken(),this._negotiator=new ihe(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Rn.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Rn.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Rn.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,i=e.payload;switch(e.type){case ul.Answer:this._negotiator.handleSDP(t,i.sdp),this._open=!0;break;case ul.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:Rn.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){Rn.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const i=this.provider._getMessages(this.connectionId);for(const r of i)this.handleMessage(r);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};d6=new WeakMap,u1(Hw,d6,Hw.ID_PREFIX="mc_");let XP=Hw;class Sit{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:i,port:r,path:s,key:a}=this._options,o=new URL(`${t}://${i}:${r}${s}${a}/${e}`);return o.searchParams.set("ts",`${Date.now()}${Math.random()}`),o.searchParams.set("version",LV.version),fetch(o.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){Rn.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==_u.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===_u.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw Rn.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var f6,p6;const D_=class D_ extends she{get type(){return Op.Data}constructor(e,t,i){super(e,t,i),this.connectionId=this.options.connectionId||D_.ID_PREFIX+the(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new ihe(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Rn.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Rn.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Rn.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(ZC.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case ul.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case ul.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:Rn.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};f6=new WeakMap,p6=new WeakMap,u1(D_,f6,D_.ID_PREFIX="dc_"),u1(D_,p6,D_.MAX_BUFFERED_AMOUNT=8388608);let KP=D_;class UV extends KP{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>KP.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Rn.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class QF extends UV{close(e){super.close(e),this._chunkedData={}}constructor(e,t,i){super(e,t,i),this.chunker=new ehe,this.serialization=px.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=_ue(e),i=t.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,i=this._chunkedData[t]||{data:[],count:0,total:e.total};if(i.data[e.n]=new Uint8Array(e.data),i.count++,this._chunkedData[t]=i,i.total===i.count){delete this._chunkedData[t];const r=dit(i.data);this._handleDataMessage({data:r})}}_send(e,t){const i=bue(e);if(i instanceof Promise)return this._send_blob(i);if(!t&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);Rn.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const i of t)this.send(i,!0)}}class Eit extends UV{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=px.None}}class Tit extends UV{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),i=t.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const i=this.encoder.encode(this.stringify(e));if(i.byteLength>=_u.chunkedMTU){this.emitError(ZC.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...e){super(...e),this.serialization=px.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var m6;const Vw=class Vw extends rhe{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,i]of this._connections)e[t]=i;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:Eit,json:Tit,binary:QF,"binary-utf8":QF,default:QF},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(e&&e.constructor==Object?t=e:e&&(i=e.toString()),t={debug:0,host:_u.CLOUD_HOST,port:_u.CLOUD_PORT,path:"/",key:Vw.DEFAULT_KEY,token:_u.randomToken(),config:_u.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==_u.CLOUD_HOST?this._options.secure=_u.isSecure():this._options.host==_u.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Rn.setLogFunction(this._options.logFunction),Rn.logLevel=this._options.debug||0,this._api=new Sit(t),this._socket=this._createServerConnection(),!_u.supports.audioVideo&&!_u.supports.data){this._delayedAbort(Ta.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!_u.validateId(i)){this._delayedAbort(Ta.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(r=>this._initialize(r)).catch(r=>this._abort(Ta.ServerError,r))}_createServerConnection(){const e=new _it(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Tp.Message,t=>{this._handleMessage(t)}),e.on(Tp.Error,t=>{this._abort(Ta.SocketError,t)}),e.on(Tp.Disconnected,()=>{this.disconnected||(this.emitError(Ta.Network,"Lost connection to server."),this.disconnect())}),e.on(Tp.Close,()=>{this.disconnected||this._abort(Ta.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,i=e.payload,r=e.src;switch(t){case ul.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ul.Error:this._abort(Ta.ServerError,i.msg);break;case ul.IdTaken:this._abort(Ta.UnavailableID,`ID "${this.id}" is taken`);break;case ul.InvalidKey:this._abort(Ta.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ul.Leave:Rn.log(`Received leave message from ${r}`),this._cleanupPeer(r),this._connections.delete(r);break;case ul.Expire:this.emitError(Ta.PeerUnavailable,`Could not connect to peer ${r}`);break;case ul.Offer:{const s=i.connectionId;let a=this.getConnection(r,s);if(a&&(a.close(),Rn.warn(`Offer received for existing Connection ID:${s}`)),i.type===Op.Media){const l=new XP(r,this,{connectionId:s,_payload:i,metadata:i.metadata});a=l,this._addConnection(r,a),this.emit("call",l)}else if(i.type===Op.Data){const l=new this._serializers[i.serialization](r,this,{connectionId:s,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});a=l,this._addConnection(r,a),this.emit("connection",l)}else{Rn.warn(`Received malformed connection type:${i.type}`);return}const o=this._getMessages(s);for(const l of o)a.handleMessage(l);break}default:{if(!i){Rn.warn(`You received a malformed message from ${r} of type ${t}`);return}const s=i.connectionId,a=this.getConnection(r,s);a&&a.peerConnection?a.handleMessage(e):s?this._storeMessage(s,e):Rn.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){Rn.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ta.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,i),i}call(e,t,i={}){if(this.disconnected){Rn.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ta.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){Rn.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const r=new XP(e,this,{...i,_stream:t});return this._addConnection(e,r),r}_addConnection(e,t){Rn.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const i=this._connections.get(e);if(!i)return null;for(const r of i)if(r.connectionId===t)return r;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Rn.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Rn.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const i of t)i.close()}disconnect(){if(this.disconnected)return;const e=this.id;Rn.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Rn.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Rn.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(Ta.ServerError,t))}};m6=new WeakMap,u1(Vw,m6,Vw.DEFAULT_KEY="peerjs");let t6=Vw;var Eot=t6;const BV=Object.prototype.toString.call(typeof ss<"u"?ss:0)==="[object process]";var $v,Xn;(function(n){n[n.CRITICAL=0]="CRITICAL",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.TRACE=7]="TRACE"})(Xn||(Xn={}));function FV(n){if(typeof n=="number"){if(Object.prototype.hasOwnProperty.call(Xn,n))return n;var e=Object.keys(Xn).map(function(i){return parseInt(i,10)}).filter(function(i){return!isNaN(i)&&i<n});return e.length?Math.max.apply(Math,e):Xn.WARNING}var t=n.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(Xn,t))throw new Error("Unknown log level string: ".concat(n));return Xn[t]}var xit=BV?console.log.bind(console):console.debug.bind(console),ahe=($v={},$v[Xn.CRITICAL]=console.error.bind(console),$v[Xn.ERROR]=console.error.bind(console),$v[Xn.WARNING]=console.warn.bind(console),$v[Xn.INFO]=console.info.bind(console),$v[Xn.DEBUG]=xit.bind(console),$v[Xn.TRACE]=console.trace.bind(console),$v);function _0(n){return function(e,t){Object.defineProperty(e,t,{get:function(){},set:function(i){Object.defineProperty(this,t,{value:i,writable:!0,enumerable:n})},enumerable:n})}}function n6(n){return ua(this,void 0,Promise,function(){return sV(this,function(e){switch(e.label){case 0:return typeof n!="function"?[3,2]:[4,n()];case 1:return[2,e.sent()];case 2:return[2,n]}})})}function wit(n){return typeof n=="function"?n():n}function ohe(n){var e,t,i;return sV(this,function(r){switch(r.label){case 0:e=0,t=1,r.label=1;case 1:return e<n?[4,e]:[3,3];case 2:return r.sent(),i=MU([t,e+t],2),e=i[0],t=i[1],[3,1];case 3:return[4,n];case 4:return r.sent(),[3,3];case 5:return[2]}})}function bO(n,e){return Object.assign.apply(Object,j5([{}],MU(n.map(e)),!1))}function i6(n,e){Object.entries(n).forEach(function(t){var i=MU(t,2),r=i[0],s=i[1];return e(s,r)})}function lhe(n){return n==null}function JC(n,e){return lhe(n)?null:e(n)}function che(n,e){return lhe(n)?void 0:e(n)}function Cit(n){return ua(this,void 0,Promise,function(){return sV(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){return setTimeout(t,n)})];case 1:return e.sent(),[2]}})})}function r6(){var n,e,t=new Promise(function(i,r){n=i,e=r});return{promise:t,resolve:n,reject:e}}function Ait(n,e,t){if(typeof n=="number"&&(n=n.toString()),e=e-n.length,e<=0)return n;t===void 0&&(t=" ");var i="";do(e&1)===1&&(i+=t),e>>=1,e&&(t+=t);while(e);return i+n}function ob(n,e,t){var i=n.split(e);return i.length<=t?i:j5(j5([],MU(i.slice(0,t-1)),!1),[i.slice(t-1).join(e)],!1)}var Mit={},e4,t4,ZP=typeof ss>"u"?[]:(t4=(e4=Mit.LOGGING)===null||e4===void 0?void 0:e4.split(";").map(function(n){var e=n.split("=",2),t=e[0],i=e[1];return i?[t==="default"?void 0:t.split(":"),FV(i)]:null}).filter(function(n){return!!n}).sort(function(n,e){var t,i,r=n[0],s=e[0];return((t=s==null?void 0:s.length)!==null&&t!==void 0?t:0)-((i=r==null?void 0:r.length)!==null&&i!==void 0?i:0)}))!==null&&t4!==void 0?t4:[],n4=ZP.findIndex(function(n){var e=n[0];return!e}),uhe=void 0;n4!==-1&&(uhe=ZP[n4][1],ZP.splice(n4));function Rit(n,e){return e.length<=n.length&&e.every(function(t,i){return t===n[i]})}function hhe(n){for(var e=n.split(":"),t=0,i=ZP;t<i.length;t++){var r=i[t],s=r[0],a=r[1];if(Rit(e,s))return a}return uhe}var dhe=function(){function n(e){var t=e.name,i=e.minLevel,r=e.emoji,s=r===void 0?!1:r,a=e.colors,o=e.timestamps,l=o===void 0?BV:o,c,u;this._name=t,this._minLevel=(u=(c=che(i,function(h){return FV(h)}))!==null&&c!==void 0?c:hhe(t))!==null&&u!==void 0?u:Xn.WARNING,this._emoji=s,this._colors=a,this._timestamps=l}return n.prototype.crit=function(e){this.log(Xn.CRITICAL,e)},n.prototype.error=function(e){this.log(Xn.ERROR,e)},n.prototype.warn=function(e){this.log(Xn.WARNING,e)},n.prototype.info=function(e){this.log(Xn.INFO,e)},n.prototype.debug=function(e){this.log(Xn.DEBUG,e)},n.prototype.trace=function(e){this.log(Xn.TRACE,e)},n}(),Oit=function(n){nce(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,i){if(!(t>this._minLevel)){var r=ahe[t],s="[".concat(this._name,"] ").concat(i);this._timestamps&&(s="[".concat(new Date().toISOString(),"] ").concat(i)),r(s)}},e}(dhe),Iit=function(){function n(e){var t=e.name,i=e.minLevel,r=e.custom,s;this._minLevel=(s=che(i,function(a){return FV(a)}))!==null&&s!==void 0?s:hhe(t),this._override=typeof r=="function"?{log:r}:r}return n.prototype.log=function(e,t){this._shouldLog(e)&&this._override.log(e,t)},n.prototype.crit=function(e){this._override.crit?this._shouldLog(Xn.CRITICAL)&&this._override.crit(e):this.log(Xn.CRITICAL,e)},n.prototype.error=function(e){this._override.error?this._shouldLog(Xn.ERROR)&&this._override.error(e):this.log(Xn.ERROR,e)},n.prototype.warn=function(e){this._override.warn?this._shouldLog(Xn.WARNING)&&this._override.warn(e):this.log(Xn.WARNING,e)},n.prototype.info=function(e){this._override.info?this._shouldLog(Xn.INFO)&&this._override.info(e):this.log(Xn.INFO,e)},n.prototype.debug=function(e){this._override.debug?this._shouldLog(Xn.DEBUG)&&this._override.debug(e):this.log(Xn.DEBUG,e)},n.prototype.trace=function(e){this._override.trace?this._shouldLog(Xn.TRACE)&&this._override.trace(e):this.log(Xn.TRACE,e)},n.prototype._shouldLog=function(e){return this._minLevel===void 0||this._minLevel>=e},n}(),Wv,Yv,Xv,Nit=(Wv={},Wv[Xn.CRITICAL]="",Wv[Xn.ERROR]="",Wv[Xn.WARNING]=" ",Wv[Xn.INFO]=" ",Wv[Xn.DEBUG]="",Wv[Xn.TRACE]="",Wv),Pit={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},Dit={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function XU(n,e,t){return function(i){return"\x1B[".concat(n,"m").concat(t?t(i):i,"\x1B[").concat(e,"m")}}function yp(n){return XU(Pit[n],39)}function V1(n,e){return XU(Dit[n],49,e)}var kit=(Yv={},Yv[Xn.CRITICAL]=yp("red"),Yv[Xn.ERROR]=yp("redBright"),Yv[Xn.WARNING]=yp("yellow"),Yv[Xn.INFO]=yp("blue"),Yv[Xn.DEBUG]=yp("magenta"),Yv[Xn.TRACE]=XU(0,0),Yv),_K=(Xv={},Xv[Xn.CRITICAL]=V1("bgRed",yp("white")),Xv[Xn.ERROR]=V1("bgRedBright",yp("white")),Xv[Xn.WARNING]=V1("bgYellow",yp("black")),Xv[Xn.INFO]=V1("bgBlue",yp("white")),Xv[Xn.DEBUG]=V1("bgMagenta",yp("black")),Xv[Xn.TRACE]=XU(7,27),Xv),Lit=function(n){nce(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.log=function(t,i){var r,s,a;if(!(t>this._minLevel)){var o=ahe[t],l="";if(this._timestamps&&(l+="[".concat(new Date().toISOString(),"] ")),this._emoji){var c=Nit[t];l+="".concat(c," ")}var u=(a=(r=this._colors)!==null&&r!==void 0?r:(s=ss.stdout)===null||s===void 0?void 0:s.isTTY)!==null&&a!==void 0?a:!0;u?l+="".concat(_K[t](this._name)," ").concat(_K[t](Xn[t])," ").concat(kit[t](i)):l+="[".concat(this._name,":").concat(Xn[t].toLowerCase(),"] ").concat(i),o(l)}},e}(dhe);function KU(n){return n.custom?new Iit(n):BV?new Lit(n):new Oit(n)}let Uit=class extends Error{constructor(...e){var t;super(...e),Object.setPrototypeOf(this,new.target.prototype),(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}};class fhe extends Uit{}class Bit{constructor({logger:e,bucketSize:t,timeFrame:i,doRequest:r,getPartitionKey:s}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._paused=!1,this._logger=KU({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=i,this._callback=r,this._partitionKeyCallback=s}async request(e,t){return await new Promise((i,r)=>{var s,a;const o={req:e,resolve:i,reject:r,limitReachedBehavior:(s=t==null?void 0:t.limitReachedBehavior)!==null&&s!==void 0?s:"enqueue"},l=this._partitionKeyCallback(e),c=(a=this._usedFromBucket.get(l))!==null&&a!==void 0?a:0;if(c>=this._bucketSize||this._paused)switch(o.limitReachedBehavior){case"enqueue":{const u=this._getPartitionedQueue(l);u.push(o),c+u.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${l?`partition ${l}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${u.length}`):this._logger.info(`Enqueueing request for ${l?`partition ${l}`:"default partition"} because the rate limiter is paused; queue size is ${u.length}`);break}case"null":{o.resolve(null),this._paused?this._logger.info(`Returning null for request for ${l?`partition ${l}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${l?`partition ${l}`:"default partition"} was reached, dropping request and returning null`);break}case"throw":{o.reject(new fhe(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${l?`partition ${l}`:"default partition"} was reached`}`));break}default:throw new Error("this should never happen")}else this._runRequest(o,l)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){this._paused=!1;for(const e of this._partitionedQueue.keys())this._runNextRequest(e)}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);const t=[];return this._partitionedQueue.set(e,t),t}async _runRequest(e,t){var i;const r=this._getPartitionedQueue(t);this._logger.debug(`doing a request for ${t?`partition ${t}`:"default partition"}, new queue length is ${r.length}`),this._usedFromBucket.set(t,((i=this._usedFromBucket.get(t))!==null&&i!==void 0?i:0)+1);const{req:s,resolve:a,reject:o}=e;try{a(await this._callback(s))}catch(l){o(l)}finally{setTimeout(()=>{const l=this._usedFromBucket.get(t)-1;this._usedFromBucket.set(t,l),r.length&&l<this._bucketSize&&this._runNextRequest(t)},this._timeFrame)}}_runNextRequest(e){if(this._paused)return;const i=this._getPartitionedQueue(e).shift();i&&this._runRequest(i,e)}}class s6{constructor({logger:e,bucketSize:t,timeFrame:i,doRequest:r}){this._queue=[],this._usedFromBucket=0,this._paused=!1,this._logger=KU({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=i,this._callback=r}async request(e,t){return await new Promise((i,r)=>{var s;const a={req:e,resolve:i,reject:r,limitReachedBehavior:(s=t==null?void 0:t.limitReachedBehavior)!==null&&s!==void 0?s:"enqueue"};if(this._usedFromBucket>=this._bucketSize||this._paused)switch(a.limitReachedBehavior){case"enqueue":{this._queue.push(a),this._usedFromBucket+this._queue.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${this._queue.length}`):this._logger.info(`Enqueueing request because the rate limiter is paused; queue size is ${this._queue.length}`);break}case"null":{a.resolve(null),this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`),this._paused?this._logger.info("Returning null for request because the rate limiter is paused"):this._logger.warn(`Rate limit of ${this._bucketSize} was reached, dropping request and returning null`);break}case"throw":{a.reject(new fhe(`Request dropped because ${this._paused?"the rate limiter is paused":"the rate limit was reached"}`));break}default:throw new Error("this should never happen")}else this._runRequest(a)})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextRequest()}async _runRequest(e){this._logger.debug(`doing a request, new queue length is ${this._queue.length}`),this._usedFromBucket+=1;const{req:t,resolve:i,reject:r}=e;try{i(await this._callback(t))}catch(s){r(s)}finally{setTimeout(()=>{this._usedFromBucket-=1,this._queue.length&&this._usedFromBucket<this._bucketSize&&this._runNextRequest()},this._timeFrame)}}_runNextRequest(){if(this._paused)return;const e=this._queue.shift();e&&this._runRequest(e)}}class Fit extends s6{constructor(e,t){super({...t,async doRequest(i,r){return await e.request(i,r)}})}}class zit{constructor(e,t,i,r=!1){this.owner=e,this.event=t,this.listener=i,this._internal=r}unbind(){this.owner.removeListener(this)}}class wM{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,t){return this._addListener(!1,e,t)}addListener(e,t){return this._addListener(!1,e,t)}removeListener(e,t){this._removeListener(!1,e,t)}registerEvent(){const e=t=>this.addListener(e,t);return e}emit(e,...t){if(this._eventListeners.has(e))for(const i of this._eventListeners.get(e))i(...t);if(this._internalEventListeners.has(e))for(const i of this._internalEventListeners.get(e))i(...t)}registerInternalEvent(){const e=t=>this.addInternalListener(e,t);return e}addInternalListener(e,t){return this._addListener(!0,e,t)}removeInternalListener(e,t){this._removeListener(!0,e,t)}_addListener(e,t,i){const r=e?this._eventListeners:this._internalEventListeners;return r.has(t)?r.get(t).push(i):r.set(t,[i]),new zit(this,t,i,e)}_removeListener(e,t,i){const r=e?this._eventListeners:this._internalEventListeners;if(!t)r.clear();else if(typeof t=="object"){const s=t;this._removeListener(s._internal,s.event,s.listener)}else{const s=t;if(r.has(s))if(i){const a=r.get(s);let o=0;for(;(o=a.indexOf(i))!==-1;)a.splice(o,1)}else r.delete(s)}}}const jit=6e4;function Hit(n){return JC(n.expiresIn,e=>n.obtainmentTimestamp+e*1e3-jit)}function TI(n){var e;return(e=JC(Hit(n),t=>Date.now()>t))!==null&&e!==void 0?e:!1}var a6={exports:{}};(function(n,e){var t=typeof self<"u"?self:Rl,i=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var o={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(U){return U&&DataView.prototype.isPrototypeOf(U)}if(o.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(U){return U&&c.indexOf(Object.prototype.toString.call(U))>-1};function h(U){if(typeof U!="string"&&(U=String(U)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(U))throw new TypeError("Invalid character in header field name");return U.toLowerCase()}function d(U){return typeof U!="string"&&(U=String(U)),U}function f(U){var ee={next:function(){var W=U.shift();return{done:W===void 0,value:W}}};return o.iterable&&(ee[Symbol.iterator]=function(){return ee}),ee}function m(U){this.map={},U instanceof m?U.forEach(function(ee,W){this.append(W,ee)},this):Array.isArray(U)?U.forEach(function(ee){this.append(ee[0],ee[1])},this):U&&Object.getOwnPropertyNames(U).forEach(function(ee){this.append(ee,U[ee])},this)}m.prototype.append=function(U,ee){U=h(U),ee=d(ee);var W=this.map[U];this.map[U]=W?W+", "+ee:ee},m.prototype.delete=function(U){delete this.map[h(U)]},m.prototype.get=function(U){return U=h(U),this.has(U)?this.map[U]:null},m.prototype.has=function(U){return this.map.hasOwnProperty(h(U))},m.prototype.set=function(U,ee){this.map[h(U)]=d(ee)},m.prototype.forEach=function(U,ee){for(var W in this.map)this.map.hasOwnProperty(W)&&U.call(ee,this.map[W],W,this)},m.prototype.keys=function(){var U=[];return this.forEach(function(ee,W){U.push(W)}),f(U)},m.prototype.values=function(){var U=[];return this.forEach(function(ee){U.push(ee)}),f(U)},m.prototype.entries=function(){var U=[];return this.forEach(function(ee,W){U.push([W,ee])}),f(U)},o.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function v(U){if(U.bodyUsed)return Promise.reject(new TypeError("Already read"));U.bodyUsed=!0}function _(U){return new Promise(function(ee,W){U.onload=function(){ee(U.result)},U.onerror=function(){W(U.error)}})}function y(U){var ee=new FileReader,W=_(ee);return ee.readAsArrayBuffer(U),W}function S(U){var ee=new FileReader,W=_(ee);return ee.readAsText(U),W}function T(U){for(var ee=new Uint8Array(U),W=new Array(ee.length),Q=0;Q<ee.length;Q++)W[Q]=String.fromCharCode(ee[Q]);return W.join("")}function x(U){if(U.slice)return U.slice(0);var ee=new Uint8Array(U.byteLength);return ee.set(new Uint8Array(U)),ee.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(U){this._bodyInit=U,U?typeof U=="string"?this._bodyText=U:o.blob&&Blob.prototype.isPrototypeOf(U)?this._bodyBlob=U:o.formData&&FormData.prototype.isPrototypeOf(U)?this._bodyFormData=U:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(U)?this._bodyText=U.toString():o.arrayBuffer&&o.blob&&l(U)?(this._bodyArrayBuffer=x(U.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(U)||u(U))?this._bodyArrayBuffer=x(U):this._bodyText=U=Object.prototype.toString.call(U):this._bodyText="",this.headers.get("content-type")||(typeof U=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(U)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var U=v(this);if(U)return U;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var U=v(this);if(U)return U;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var R=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function N(U){var ee=U.toUpperCase();return R.indexOf(ee)>-1?ee:U}function L(U,ee){ee=ee||{};var W=ee.body;if(U instanceof L){if(U.bodyUsed)throw new TypeError("Already read");this.url=U.url,this.credentials=U.credentials,ee.headers||(this.headers=new m(U.headers)),this.method=U.method,this.mode=U.mode,this.signal=U.signal,!W&&U._bodyInit!=null&&(W=U._bodyInit,U.bodyUsed=!0)}else this.url=String(U);if(this.credentials=ee.credentials||this.credentials||"same-origin",(ee.headers||!this.headers)&&(this.headers=new m(ee.headers)),this.method=N(ee.method||this.method||"GET"),this.mode=ee.mode||this.mode||null,this.signal=ee.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&W)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(W)}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function k(U){var ee=new FormData;return U.trim().split("&").forEach(function(W){if(W){var Q=W.split("="),X=Q.shift().replace(/\+/g," "),Y=Q.join("=").replace(/\+/g," ");ee.append(decodeURIComponent(X),decodeURIComponent(Y))}}),ee}function z(U){var ee=new m,W=U.replace(/\r?\n[\t ]+/g," ");return W.split(/\r?\n/).forEach(function(Q){var X=Q.split(":"),Y=X.shift().trim();if(Y){var ae=X.join(":").trim();ee.append(Y,ae)}}),ee}I.call(L.prototype);function Z(U,ee){ee||(ee={}),this.type="default",this.status=ee.status===void 0?200:ee.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ee?ee.statusText:"OK",this.headers=new m(ee.headers),this.url=ee.url||"",this._initBody(U)}I.call(Z.prototype),Z.prototype.clone=function(){return new Z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},Z.error=function(){var U=new Z(null,{status:0,statusText:""});return U.type="error",U};var H=[301,302,303,307,308];Z.redirect=function(U,ee){if(H.indexOf(ee)===-1)throw new RangeError("Invalid status code");return new Z(null,{status:ee,headers:{location:U}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(ee,W){this.message=ee,this.name=W;var Q=Error(ee);this.stack=Q.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function q(U,ee){return new Promise(function(W,Q){var X=new L(U,ee);if(X.signal&&X.signal.aborted)return Q(new a.DOMException("Aborted","AbortError"));var Y=new XMLHttpRequest;function ae(){Y.abort()}Y.onload=function(){var se={status:Y.status,statusText:Y.statusText,headers:z(Y.getAllResponseHeaders()||"")};se.url="responseURL"in Y?Y.responseURL:se.headers.get("X-Request-URL");var ue="response"in Y?Y.response:Y.responseText;W(new Z(ue,se))},Y.onerror=function(){Q(new TypeError("Network request failed"))},Y.ontimeout=function(){Q(new TypeError("Network request failed"))},Y.onabort=function(){Q(new a.DOMException("Aborted","AbortError"))},Y.open(X.method,X.url,!0),X.credentials==="include"?Y.withCredentials=!0:X.credentials==="omit"&&(Y.withCredentials=!1),"responseType"in Y&&o.blob&&(Y.responseType="blob"),X.headers.forEach(function(se,ue){Y.setRequestHeader(ue,se)}),X.signal&&(X.signal.addEventListener("abort",ae),Y.onreadystatechange=function(){Y.readyState===4&&X.signal.removeEventListener("abort",ae)}),Y.send(typeof X._bodyInit>"u"?null:X._bodyInit)})}return q.polyfill=!0,s.fetch||(s.fetch=q,s.Headers=m,s.Request=L,s.Response=Z),a.Headers=m,a.Request=L,a.Response=Z,a.fetch=q,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var r=i;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,n.exports=e})(a6,a6.exports);var phe=a6.exports;const Vit=Dl(phe);var i4=Object.prototype.hasOwnProperty,bE=Array.isArray,cp=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),Git=function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(bE(i)){for(var r=[],s=0;s<i.length;++s)typeof i[s]<"u"&&r.push(i[s]);t.obj[t.prop]=r}}},mhe=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(i[r]=e[r]);return i},qit=function n(e,t,i){if(!t)return e;if(typeof t!="object"){if(bE(e))e.push(t);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!i4.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var r=e;return bE(e)&&!bE(t)&&(r=mhe(e,i)),bE(e)&&bE(t)?(t.forEach(function(s,a){if(i4.call(e,a)){var o=e[a];o&&typeof o=="object"&&s&&typeof s=="object"?e[a]=n(o,s,i):e.push(s)}else e[a]=s}),e):Object.keys(t).reduce(function(s,a){var o=t[a];return i4.call(s,a)?s[a]=n(s[a],o,i):s[a]=o,s},r)},$it=function(e,t){return Object.keys(t).reduce(function(i,r){return i[r]=t[r],i},e)},Wit=function(n,e,t){var i=n.replace(/\+/g," ");if(t==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Yit=function(e,t,i){if(e.length===0)return e;var r=e;if(typeof e=="symbol"?r=Symbol.prototype.toString.call(e):typeof e!="string"&&(r=String(e)),i==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});for(var s="",a=0;a<r.length;++a){var o=r.charCodeAt(a);if(o===45||o===46||o===95||o===126||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122){s+=r.charAt(a);continue}if(o<128){s=s+cp[o];continue}if(o<2048){s=s+(cp[192|o>>6]+cp[128|o&63]);continue}if(o<55296||o>=57344){s=s+(cp[224|o>>12]+cp[128|o>>6&63]+cp[128|o&63]);continue}a+=1,o=65536+((o&1023)<<10|r.charCodeAt(a)&1023),s+=cp[240|o>>18]+cp[128|o>>12&63]+cp[128|o>>6&63]+cp[128|o&63]}return s},Xit=function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],r=0;r<t.length;++r)for(var s=t[r],a=s.obj[s.prop],o=Object.keys(a),l=0;l<o.length;++l){var c=o[l],u=a[c];typeof u=="object"&&u!==null&&i.indexOf(u)===-1&&(t.push({obj:a,prop:c}),i.push(u))}return Git(t),e},Kit=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Zit=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Jit=function(e,t){return[].concat(e,t)},zV={arrayToObject:mhe,assign:$it,combine:Jit,compact:Xit,decode:Wit,encode:Yit,isBuffer:Zit,isRegExp:Kit,merge:qit},Qit=String.prototype.replace,ert=/%20/g,trt=zV,bK={RFC1738:"RFC1738",RFC3986:"RFC3986"},nrt=trt.assign({default:bK.RFC3986,formatters:{RFC1738:function(n){return Qit.call(n,ert,"+")},RFC3986:function(n){return String(n)}}},bK),ghe=zV,Fw=nrt,irt=Object.prototype.hasOwnProperty,SK={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},hT=Array.isArray,rrt=Array.prototype.push,o6=function(n,e){rrt.apply(n,hT(e)?e:[e])},srt=Date.prototype.toISOString,EK=Fw.default,Xl={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ghe.encode,encodeValuesOnly:!1,format:EK,formatter:Fw.formatters[EK],indices:!1,serializeDate:function(e){return srt.call(e)},skipNulls:!1,strictNullHandling:!1},art=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ort=function n(e,t,i,r,s,a,o,l,c,u,h,d,f){var m=e;if(typeof o=="function"?m=o(t,m):m instanceof Date?m=u(m):i==="comma"&&hT(m)&&(m=m.join(",")),m===null){if(r)return a&&!d?a(t,Xl.encoder,f,"key"):t;m=""}if(art(m)||ghe.isBuffer(m)){if(a){var v=d?t:a(t,Xl.encoder,f,"key");return[h(v)+"="+h(a(m,Xl.encoder,f,"value"))]}return[h(t)+"="+h(String(m))]}var _=[];if(typeof m>"u")return _;var y;if(hT(o))y=o;else{var S=Object.keys(m);y=l?S.sort(l):S}for(var T=0;T<y.length;++T){var x=y[T];s&&m[x]===null||(hT(m)?o6(_,n(m[x],typeof i=="function"?i(t,x):t,i,r,s,a,o,l,c,u,h,d,f)):o6(_,n(m[x],t+(c?"."+x:"["+x+"]"),i,r,s,a,o,l,c,u,h,d,f)))}return _},lrt=function(e){if(!e)return Xl;if(e.encoder!==null&&e.encoder!==void 0&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Xl.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Fw.default;if(typeof e.format<"u"){if(!irt.call(Fw.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=Fw.formatters[i],s=Xl.filter;return(typeof e.filter=="function"||hT(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Xl.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Xl.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Xl.charsetSentinel,delimiter:typeof e.delimiter>"u"?Xl.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Xl.encode,encoder:typeof e.encoder=="function"?e.encoder:Xl.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Xl.encodeValuesOnly,filter:s,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Xl.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Xl.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Xl.strictNullHandling}},crt=function(n,e){var t=n,i=lrt(e),r,s;typeof i.filter=="function"?(s=i.filter,t=s("",t)):hT(i.filter)&&(s=i.filter,r=s);var a=[];if(typeof t!="object"||t===null)return"";var o;e&&e.arrayFormat in SK?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var l=SK[o];r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);for(var c=0;c<r.length;++c){var u=r[c];i.skipNulls&&t[u]===null||o6(a,ort(t[u],u,l,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var h=a.join(i.delimiter),d=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""};const vhe=Dl(crt);var urt=zV;urt.decode;const SE=Symbol("twurpleRawData");class hrt{constructor(e){this[SE]=e}}class rS extends Error{constructor(e,t){var i;super(e,t),Object.setPrototypeOf(this,new.target.prototype),(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}function CM(n,e,t){return i=>{const r=t?function(){return`[${e}#${this[t]} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`}:function(){return`[${e} - please check https://twurple.js.org/reference/${n}/classes/${e}.html for available properties]`};Object.defineProperty(i.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:r,enumerable:!1})}}class TK extends rS{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}}function ag(n){return typeof n=="string"?n:typeof n=="number"?n.toString(10):n.id}class yhe extends rS{constructor(e,t,i,r,s,a){super(`Encountered HTTP status code ${e}: ${t}

URL: ${i}
Method: ${r}
Body:
${!a&&s.length>150?`${s.slice(0,147)}...`:s}`),this._statusCode=e,this._url=i,this._method=r,this._body=s}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}async function drt(n,e){var t;if(!n.ok){const i=n.headers.get("Content-Type")==="application/json",r=i?JSON.stringify(await n.json(),null,2):await n.text(),s=vhe(e.query,{arrayFormat:"repeat",addQueryPrefix:!0}),a=`${e.url}${s}`;throw new yhe(n.status,n.statusText,a,(t=e.method)!==null&&t!==void 0?t:"GET",r,i)}}async function frt(n){if(n.status===204)return;const e=await n.text();if(e)return JSON.parse(e)}function prt(n,e,t){switch(e){case"helix":return`https://api.twitch.tv/helix/${n.replace(/^\//,"")}`;case"auth":return`https://id.twitch.tv/oauth2/${n.replace(/^\//,"")}`;case"custom":return n;default:return n}}async function mrt(n,e,t,i,r={},s){var a,o;const l=(a=n.type)!==null&&a!==void 0?a:"helix",c=prt(n.url,l),u=vhe(n.query,{arrayFormat:"repeat",addQueryPrefix:!0}),h=new phe.Headers({Accept:"application/json"});let d;n.jsonBody&&(d=JSON.stringify(n.jsonBody),h.append("Content-Type","application/json")),e&&l!=="auth"&&h.append("Client-ID",e),t&&h.append("Authorization",`${l==="helix"?"Bearer":"OAuth"} ${t}`);const f={...r,method:(o=n.method)!==null&&o!==void 0?o:"GET",headers:h,body:d};return await Vit(`${c}${u}`,f)}async function ZU(n,e,t,i,r={}){const s=await mrt(n,e,t,i,r);return await drt(s,n),await frt(s)}class dT extends rS{constructor(e){super("Invalid token supplied",e)}}class xI extends rS{}function grt(n,e,t,i){return{grant_type:"authorization_code",client_id:n,client_secret:e,code:t,redirect_uri:i}}function vrt(n,e){return{grant_type:"client_credentials",client_id:n,client_secret:e}}function yrt(n,e,t){return{grant_type:"refresh_token",client_id:n,client_secret:e,refresh_token:t}}let l6=class extends hrt{constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[SE].client_id}get userId(){var e;return(e=this[SE].user_id)!==null&&e!==void 0?e:null}get userName(){var e;return(e=this[SE].login)!==null&&e!==void 0?e:null}get scopes(){return this[SE].scopes}get expiryDate(){return JC(this[SE].expires_in,e=>new Date(this._obtainmentDate.getTime()+e*1e3))}};l6=ws([CM("auth","TokenInfo","clientId")],l6);function jV(n){var e,t;return{accessToken:n.access_token,refreshToken:n.refresh_token||null,scope:(e=n.scope)!==null&&e!==void 0?e:[],expiresIn:(t=n.expires_in)!==null&&t!==void 0?t:null,obtainmentTimestamp:Date.now()}}async function _rt(n,e,t,i){return jV(await ZU({type:"auth",url:"token",method:"POST",query:grt(n,e,t,i)}))}async function brt(n,e){return jV(await ZU({type:"auth",url:"token",method:"POST",query:vrt(n,e)}))}async function xK(n,e,t){return jV(await ZU({type:"auth",url:"token",method:"POST",query:yrt(n,e,t)}))}async function QC(n,e){try{const t=await ZU({type:"auth",url:"validate"},e,n);return new l6(t)}catch(t){throw t instanceof yhe&&t.statusCode===401?new dT({cause:t}):t}}const Srt=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);function Ert(n,e){if(e!=null&&e.length){const t=new Set(n.flatMap(i=>{var r;return[i,...(r=Srt.get(i))!==null&&r!==void 0?r:[]]}));if(e.every(i=>!t.has(i))){const i=e.join(", ");throw new Error(`This token does not have any of the requested scopes (${i}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}function wI(n,e){for(const t of e)Ert(n,t)}async function Trt(n,e,t,i,r){if(r!=null&&r.length||!t){const s=await QC(e,n);if(!s.userId)throw new Error("Trying to use an app access token as a user access token");const a=i??s.scopes;return r&&wI(a,r.filter(o=>!!o)),[a,s.userId]}return[i,t]}class wK{constructor(e){this._newTokenScopeSets=[],this._newTokenPromise=null,this._queuedScopeSets=[],this._queueExecutor=null,this._queuePromise=null,this._executor=e}async fetch(...e){var t;const i=e.filter(o=>!!o);if(this._newTokenPromise){if(!i.length)return await this._newTokenPromise;if(this._queueExecutor?this._queuedScopeSets.push(...i):this._queuedScopeSets=[...i],!this._queuePromise){const{promise:o,resolve:l,reject:c}=r6();this._queuePromise=o,this._queueExecutor=async()=>{var u;if(this._queuePromise){this._newTokenScopeSets=this._queuedScopeSets,this._queuedScopeSets=[],this._newTokenPromise=this._queuePromise,this._queuePromise=null,this._queueExecutor=null;try{l(await this._executor(this._newTokenScopeSets))}catch(h){c(h)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(u=this._queueExecutor)===null||u===void 0||u.call(this)}}}}return await this._queuePromise}this._newTokenScopeSets=[...i];const{promise:r,resolve:s,reject:a}=r6();this._newTokenPromise=r;try{s(await this._executor(this._newTokenScopeSets))}catch(o){a(o)}finally{this._newTokenPromise=null,this._newTokenScopeSets=[],(t=this._queueExecutor)===null||t===void 0||t.call(this)}return await r}}class CK extends rS{constructor(e){super(`The user context for the user ${e} has been disabled.
This happened because the access token became invalid (e.g. by expiry) and refreshing it failed (e.g. because the account's password was changed).

Use .addUser(), .addUserForToken() or .addUserForCode() for the same user context to re-enable the user with a new, valid token.`),this.userId=e}}class xrt extends rS{constructor(e){super(`User ${e} was removed while trying to fetch a token.

Make sure you're not executing any actions when you want to remove a user.`),this.userId=e}}class wrt extends rS{constructor(e){super(`Unknown intent: ${e}`),this.intent=e}}let Qy=class extends wM{constructor(e){var t;super(),this._userAccessTokens=new Map,this._userTokenFetchers=new Map,this._intentToUserId=new Map,this._userIdToIntents=new Map,this._cachedRefreshFailures=new Set,this.onRefresh=this.registerEvent(),this.onRefreshFailure=this.registerEvent(),this._clientId=e.clientId,this._clientSecret=e.clientSecret,this._redirectUri=e.redirectUri,this._appImpliedScopes=(t=e.appImpliedScopes)!==null&&t!==void 0?t:[],this._appTokenFetcher=new wK(async i=>await this._fetchAppToken(i))}addUser(e,t,i){const r=ag(e);if(!t.refreshToken)throw new Error(`Trying to add user ${r} without refresh token`);this._cachedRefreshFailures.delete(r),this._userAccessTokens.set(r,{...t,userId:r}),this._userTokenFetchers.has(r)||this._userTokenFetchers.set(r,new wK(async s=>await this._fetchUserToken(r,s))),i&&this.addIntentsToUser(e,i)}async addUserForToken(e,t){let i=null;if(e.accessToken&&!TI(e))try{const o=await QC(e.accessToken);i=[e,o]}catch(o){if(!(o instanceof dT))throw o}if(!i){if(!e.refreshToken)throw new dT;const o=await xK(this._clientId,this._clientSecret,e.refreshToken),l=await QC(o.accessToken);this.emit(this.onRefresh,l.userId,o),i=[o,l]}const[r,s]=i;if(!s.userId)throw new xI("Could not determine a user ID for your token; you might be trying to disguise an app token as a user token.");const a=r.scope?r:{...r,scope:s.scopes};return this.addUser(s.userId,a,t),s.userId}async addUserForCode(e,t){if(!this._redirectUri)throw new Error("This method requires you to pass a `redirectUri` as a configuration property");const i=await _rt(this._clientId,this._clientSecret,e,this._redirectUri);return await this.addUserForToken(i,t)}hasUser(e){return this._userTokenFetchers.has(ag(e))}removeUser(e){const t=ag(e);if(this._userIdToIntents.has(t)){const i=this._userIdToIntents.get(t);for(const r of i)this._intentToUserId.delete(r);this._userIdToIntents.delete(t)}this._userAccessTokens.delete(t),this._userTokenFetchers.delete(t),this._cachedRefreshFailures.delete(t)}addIntentsToUser(e,t){const i=ag(e);if(!this._userAccessTokens.has(i))throw new Error("Trying to add intents to a user that was not added to this provider");for(const r of t)this._intentToUserId.has(r)&&this._userIdToIntents.get(this._intentToUserId.get(r)).delete(r),this._intentToUserId.set(r,i),this._userIdToIntents.has(i)?this._userIdToIntents.get(i).add(r):this._userIdToIntents.set(i,new Set([r]))}getIntentsForUser(e){const t=ag(e);return this._userIdToIntents.has(t)?Array.from(this._userIdToIntents.get(t)):[]}removeIntents(e){var t;for(const i of e)if(this._intentToUserId.has(i)){const r=this._intentToUserId.get(i);(t=this._userIdToIntents.get(r))===null||t===void 0||t.delete(i),this._intentToUserId.delete(i)}}async refreshAccessTokenForUser(e){const t=ag(e);if(this._cachedRefreshFailures.has(t))throw new CK(t);const i=this._userAccessTokens.get(t);if(!i)throw new Error("Trying to refresh token for user that was not added to the provider");const r=await this._refreshUserTokenWithCallback(t,i.refreshToken);return this._checkIntermediateUserRemoval(t),this._userAccessTokens.set(t,{...r,userId:t}),this.emit(this.onRefresh,t,r),{...r,userId:t}}async refreshAccessTokenForIntent(e){if(!this._intentToUserId.has(e))throw new wrt(e);const t=this._intentToUserId.get(e);return await this.refreshAccessTokenForUser(t)}get clientId(){return this._clientId}getCurrentScopesForUser(e){var t;const i=this._userAccessTokens.get(ag(e));if(!i)throw new Error("Trying to get scopes for user that was not added to the provider");return(t=i.scope)!==null&&t!==void 0?t:[]}async getAccessTokenForUser(e,...t){const i=ag(e),r=this._userTokenFetchers.get(i);if(!r)return null;if(this._cachedRefreshFailures.has(i))throw new CK(i);return wI(this.getCurrentScopesForUser(i),t.filter(Boolean)),await r.fetch(...t)}async getAccessTokenForIntent(e,...t){if(!this._intentToUserId.has(e))return null;const i=this._intentToUserId.get(e),r=await this.getAccessTokenForUser(i,...t);if(!r)throw new TK(`Found intent ${e} corresponding to user ID ${i} but no token was found`);return{...r,userId:i}}async getAnyAccessToken(e){if(e){const t=ag(e);if(this._userAccessTokens.has(t)){const i=await this.getAccessTokenForUser(t);if(!i)throw new TK(`Token for user ID ${t} exists but nothing was returned by getAccessTokenForUser`);return{...i,userId:t}}}return await this.getAppAccessToken()}async getAppAccessToken(e=!1){return e&&(this._appAccessToken=void 0),await this._appTokenFetcher.fetch(...this._appImpliedScopes.map(t=>[t]))}_checkIntermediateUserRemoval(e){if(!this._userTokenFetchers.has(e))throw this._cachedRefreshFailures.delete(e),new xrt(e)}async _fetchUserToken(e,t){const i=this._userAccessTokens.get(e);if(!i)throw new Error("Trying to get token for user that was not added to the provider");if(i.accessToken&&!TI(i))try{if(i.scope)return wI(i.scope,t),i;const[s=[]]=await Trt(this._clientId,i.accessToken,e,i.scope,t),a={...i,scope:s};return this._checkIntermediateUserRemoval(e),this._userAccessTokens.set(e,a),a}catch(s){if(!(s instanceof dT))throw s}this._checkIntermediateUserRemoval(e);const r=await this.refreshAccessTokenForUser(e);return wI(r.scope,t),r}async _refreshUserTokenWithCallback(e,t){try{return await xK(this.clientId,this._clientSecret,t)}catch(i){throw this._cachedRefreshFailures.add(e),this.emit(this.onRefreshFailure,e,i),i}}async _fetchAppToken(e){if(e.length>0)for(const t of e)if(this._appImpliedScopes.length){if(t.every(i=>!this._appImpliedScopes.includes(i)))throw new Error(`One of the scopes ${t.join(", ")} requested but only the scope ${this._appImpliedScopes.join(", ")} is implied`)}else throw new Error(`One of the scopes ${t.join(", ")} requested but the client credentials flow does not support scopes`);return!this._appAccessToken||TI(this._appAccessToken)?await this._refreshAppToken():this._appAccessToken}async _refreshAppToken(){return this._appAccessToken=await brt(this._clientId,this._clientSecret)}};ws([_0(!1)],Qy.prototype,"_clientSecret",void 0);ws([_0(!1)],Qy.prototype,"_userAccessTokens",void 0);ws([_0(!1)],Qy.prototype,"_userTokenFetchers",void 0);ws([_0(!1)],Qy.prototype,"_appAccessToken",void 0);ws([_0(!1)],Qy.prototype,"_appTokenFetcher",void 0);Qy=ws([CM("auth","RefreshingAuthProvider","clientId")],Qy);class Crt extends wM{constructor({lineBased:e,logger:t,additionalOptions:i}={}){super(),this._currentLine="",this._connecting=!1,this._connected=!1,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._lineBased=e??!1,this._logger=t,this._additionalOptions=i}get isConnecting(){return this._connecting}get isConnected(){return this._connected}sendLine(e){this._connected&&(e=e.replace(/[\0\r\n]/g,""),this.sendRaw(`${e}\r
`))}assumeExternalDisconnect(){var e;(e=this._logger)===null||e===void 0||e.trace("AbstractConnection assumeExternalDisconnect"),this._connected=!1,this._connecting=!1,this.clearSocket(),this.emit(this.onDisconnect,!1)}receiveRaw(e){var t,i;if(!this._lineBased){this.emit(this.onReceive,e);return}const r=e.split(`\r
`);if(this._currentLine+=(t=r.shift())!==null&&t!==void 0?t:"",r.length){this.emit(this.onReceive,this._currentLine),this._currentLine=(i=r.pop())!==null&&i!==void 0?i:"";for(const s of r)this.emit(this.onReceive,s)}}}class Art{constructor(){throw new Error("DirectConnection is not implemented in a browser environment")}}class Mrt extends wM{constructor(e,t,i={}){var r;super(),this._type=e,this._target=t,this._config=i,this._retryLimit=1/0,this._initialRetryLimit=3,this._connecting=!1,this._connectionRetryCount=0,this.onReceive=this.registerEvent(),this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onEnd=this.registerEvent(),this._retryLimit=(r=i.retryLimit)!==null&&r!==void 0?r:1/0,this._logger=i.logger}get isConnected(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnected)!==null&&t!==void 0?t:!1}get isConnecting(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.isConnecting)!==null&&t!==void 0?t:this._connecting}get hasSocket(){var e,t;return(t=(e=this._currentConnection)===null||e===void 0?void 0:e.hasSocket)!==null&&t!==void 0?t:!1}sendLine(e){var t;(t=this._currentConnection)===null||t===void 0||t.sendLine(e)}connect(){if(this._currentConnection||this._connecting)throw new Error("Connection already present");this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(!0)}disconnect(){var e;if((e=this._logger)===null||e===void 0||e.trace(`PersistentConnection disconnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`),this._connecting=!1,this._currentConnection){const t=this._currentConnection;this._currentConnection=void 0,t.disconnect()}}assumeExternalDisconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("PersistentConnection assumeExternalDisconnect"),(t=this._currentConnection)===null||t===void 0||t.assumeExternalDisconnect()}reconnect(){this._reconnect(!0)}acknowledgeSuccessfulReconnect(){this._previousConnection&&(this._previousConnection.disconnect(),this._previousConnection=void 0)}_startTryingToConnect(e=!1){this._connecting=!0,this._connectionRetryCount=0,this._tryConnect(e)}_tryConnect(e=!1){var t,i;(t=this._logger)===null||t===void 0||t.trace(`PersistentConnection tryConnect currentConnectionExists:${(!!this._currentConnection).toString()} connecting:${this._connecting.toString()}`);const r=e?this._initialRetryLimit:this._retryLimit;(i=this._retryTimerGenerator)!==null&&i!==void 0||(this._retryTimerGenerator=ohe(120));const s=this._currentConnection=new this._type(wit(this._target),this._config);s.onReceive(a=>this.emit(this.onReceive,a)),s.onConnect(()=>{this.emit(this.onConnect),this._connecting=!1,this._retryTimerGenerator=void 0}),s.onDisconnect((a,o)=>{var l,c,u;if(this.emit(this.onDisconnect,a,o),a)this.emit(this.onEnd,!0),this._connecting=!1,this._retryTimerGenerator=void 0,s.disconnect(),this._currentConnection===s&&(this._currentConnection=void 0),this._previousConnection===s&&(this._previousConnection=void 0);else if(this._connecting){if((l=this._logger)===null||l===void 0||l.debug(`Connection error caught: ${(c=o==null?void 0:o.message)!==null&&c!==void 0?c:"unknown error"}`),this._connectionRetryCount>=r)return;this._connectionRetryCount++;const h=this._retryTimerGenerator.next().value;h!==0&&((u=this._logger)===null||u===void 0||u.info(`Retrying in ${h} seconds`)),setTimeout(()=>{var d;this._connecting&&((d=this._logger)===null||d===void 0||d.info(e?"Retrying connection":"Trying to reconnect"),this._tryConnect())},h*1e3)}else this._reconnect()}),s.connect()}_reconnect(e=!1){e&&this._config.overlapManualReconnect?(this._previousConnection=this._currentConnection,this._currentConnection=void 0):this.disconnect(),this._startTryingToConnect(e)}}var EE=null;typeof WebSocket<"u"?EE=WebSocket:typeof MozWebSocket<"u"?EE=MozWebSocket:typeof Eg<"u"?EE=Eg.WebSocket||Eg.MozWebSocket:typeof window<"u"?EE=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(EE=self.WebSocket||self.MozWebSocket);class Rrt extends Crt{constructor(e,t){if(super(t),this._socket=null,this._closingOnDemand=!1,e.hostName&&e.port)this._url=`ws${e.secure?"s":""}://${e.hostName}:${e.port}`;else if(e.url)this._url=e.url;else throw new Error("WebSocketConnection requires either hostName & port or url to be set")}get hasSocket(){return!!this._socket}sendRaw(e){var t;(t=this._socket)===null||t===void 0||t.send(e)}connect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection connect"),this._connecting=!0,this._socket=new EE(this._url,(t=this._additionalOptions)===null||t===void 0?void 0:t.wsOptions),this._socket.onopen=()=>{var i;(i=this._logger)===null||i===void 0||i.trace("WebSocketConnection onOpen"),this._connected=!0,this._connecting=!1,this._closingOnDemand=!1,this.emit(this.onConnect)},this._socket.onmessage=({data:i})=>{this.receiveRaw(i.toString())},this._socket.onerror=i=>{var r;(r=this._logger)===null||r===void 0||r.trace(`WebSocketConnection onError message:${i.message}`)},this._socket.onclose=i=>{var r;const s=this._connected,a=this._connecting;if((r=this._logger)===null||r===void 0||r.trace(`WebSocketConnection onClose wasConnected:${s.toString()} wasConnecting:${a.toString()} closingOnDemand:${this._closingOnDemand.toString()} wasClean:${i.wasClean.toString()}`),this._connected=!1,this._connecting=!1,this._closingOnDemand)this._closingOnDemand=!1,this.emit(this.onDisconnect,!0),this.emit(this.onEnd,!0);else{const o=new Error(`[${i.code}] ${i.reason}`);this.emit(this.onDisconnect,!1,o),this.emit(this.onEnd,!1,o)}this.clearSocket()}}disconnect(){var e,t;(e=this._logger)===null||e===void 0||e.trace("WebSocketConnection disconnect"),this._closingOnDemand=!0,(t=this._socket)===null||t===void 0||t.close()}clearSocket(){this._socket&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onerror=null,this._socket.onclose=null,this._socket=null)}}function zw(n){var e,t,i;if(Array.isArray(n)){for(t=Array(e=n.length);e--;)t[e]=(i=n[e])&&typeof i=="object"?zw(i):i;return t}if(Object.prototype.toString.call(n)==="[object Object]"){t={};for(e in n)e==="__proto__"?Object.defineProperty(t,e,{value:zw(n[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=(i=n[e])&&typeof i=="object"?zw(i):i;return t}return n}const Ort={name:"away-notify"};class JP extends Error{constructor(e,t,i){super(`command "${e}" expected ${t} or more parameters, got ${i}`),this._command=e,this._expectedParams=t,this._actualParams=i,Object.setPrototypeOf(this,JP.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,JP)}get command(){return this._command}get expectedParams(){return this._expectedParams}get actualParams(){return this._actualParams}}class QP extends Error{constructor(e,t,i,r){var s;super(`required parameter "${t}" did not validate against ${(s=i.type)!==null&&s!==void 0?s:"regex"} validation: "${r}"`),this._command=e,this._paramName=t,this._paramSpec=i,this._givenValue=r,Object.setPrototypeOf(this,QP.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,QP)}get command(){return this._command}get paramName(){return this._paramName}get paramSpec(){return this._paramSpec}get givenValue(){return this._givenValue}}const fT={channelTypes:"#&",supportedUserModes:"iwso",supportedChannelModes:{prefix:"ov",list:"b",alwaysWithParam:"ovk",paramWhenSet:"l",noParam:"imnpst"},prefixes:[{modeChar:"v",prefix:"+"},{modeChar:"o",prefix:"@"}]};var _he={exports:{}};(function(n){n.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},n.exports.default=n.exports})(_he);var Irt=_he.exports;const Nrt=Dl(Irt);function c6(n,e="#&"){return new RegExp(`^[${Nrt(e)}][^ \b\0
\r,]+$`).test(n)}const AK={0:"\0",n:`
`,r:"\r","":""};function MK(n){if(!n.startsWith("")||(n=n.substring(1),n.endsWith("")&&(n=n.slice(0,-1)),!n))return!1;n=n.replace(/\x10(.)/,(i,r)=>r in AK?AK[r]:"");let[e,t=""]=ob(n," ",2);return e=e?e.toUpperCase():"",{command:e,params:t}}const Prt={"\\":"\\",";":":","\n":"n","\r":"r"," ":"s"};function Drt(n){return n.replace(/[\\;\n\r ]/g,e=>`\\${Prt[e]}`)}function krt(n){let e=`${n.nick}`;return n.user&&(e+=`!${n.user}`),n.host&&(e+=`@${n.host}`),e}function Lrt(n,e,t,i,r=fT,s=!1){const a=new n(n.COMMAND,void 0,{serverProperties:r}),o={};if(a._paramSpec&&i6(a._paramSpec,(l,c)=>{if(!(s&&l.noServer)&&!(!s&&l.noClient)){if(c in e){const u=e[c];if(u!==void 0){if(n.checkParam(u,l,r))o[c]={value:u,trailing:!!l.trailing};else if(!l.optional)throw new Error(`required parameter "${c}" did not suit requirements: "${u}"`)}}if(!(c in o)&&!l.optional)throw new Error(`required parameter "${c}" not found in command "${n.COMMAND}"`)}}),a._parsedParams=o,a._paramSpec)for(const l of Object.keys(a._paramSpec))Object.defineProperty(a,l,{get(){var c,u;return(u=(c=this._parsedParams)===null||c===void 0?void 0:c[l])===null||u===void 0?void 0:u.value}});return a._initPrefixAndTags(t,i),a}class Nt{static checkParam(e,t,i=fT){return!(t.type==="channel"&&!c6(e,i.channelTypes)||t.type==="channelList"&&!e.split(",").every(s=>c6(s,i.channelTypes))||t.match&&!t.match.test(e))}constructor(e,{params:t,tags:i,prefix:r,rawLine:s}={},{serverProperties:a=fT,isServer:o=!1,shouldParseParams:l=!0}={},c){this._params=[],this._serverProperties=fT,this._paramSpec=c,this._command=e,this._params=t,this._tags=i??new Map,this._prefix=r,this._serverProperties=a,this._raw=s,l&&this.parseParams(o)}getMinParamCount(e=!1){return this._paramSpec?Object.values(this._paramSpec).filter(t=>t.noServer&&e||t.noClient&&!e?!1:!t.optional).length:0}get paramCount(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}prefixToString(){return this._prefix?krt(this._prefix):""}tagsToString(){return[...this._tags.entries()].map(([e,t])=>t?`${e}=${Drt(t)}`:e).join(";")}toString(e=!1,t=!1){const r=[t?this._buildCommandFromRawParams():this._buildCommandFromNamedParams()];if(e){const a=this.prefixToString();a&&r.unshift(`:${a}`)}const s=this.tagsToString();return s&&r.unshift(`@${s}`),r.join(" ")}_initPrefixAndTags(e,t){this._prefix=e,t&&(this._tags=t)}parseParams(e=!1){if(this._params){let t=this.getMinParamCount(e);if(t>this._params.length)throw new JP(this._command,t,this._params.length);const i=this._paramSpec;if(!i)return;let r=0;const s={};for(const[a,o]of Object.entries(i)){if(o.noServer&&e||o.noClient&&!e)continue;if(this._params.length-r<=t){if(o.optional)continue;if(this._params.length-r!==t)throw new Error("not enough parameters left for required parameters parsing (this is a library bug)")}let l=this._params[r];if(!l){if(o.optional)break;throw new Error("unexpected parameter underflow")}if(o.rest){const c=[];for(;this._params[r]&&!this._params[r].trailing;)c.push(this._params[r].value),++r;if(!c.length){if(o.optional)continue;throw new Error(`no parameters left for required rest parameter "${a}"`)}l={value:c.join(" "),trailing:!1}}if(Nt.checkParam(l.value,o))s[a]={...l},o.optional||--t,o.rest||++r;else if(!o.optional)throw new QP(this._command,a,o,l.value);if(o.trailing)break}if(this._parsedParams=s,this._paramSpec)for(const a of Object.keys(this._paramSpec))Object.defineProperty(this,a,{get(){var o,l;return(l=(o=this._parsedParams)===null||o===void 0?void 0:o[a])===null||l===void 0?void 0:l.value}})}}get rawParamValues(){var e,t;return(t=(e=this._params)===null||e===void 0?void 0:e.map(i=>i.value))!==null&&t!==void 0?t:[]}get prefix(){return this._prefix}get command(){return this._command}get tags(){return this._tags}get rawLine(){return this._raw}isResponseTo(e){return!1}endsResponseTo(e){return!1}_acceptsInReplyCollection(e){return e.isResponseTo(this)}_buildCommandFromNamedParams(){const e=this._paramSpec?Object.keys(this._paramSpec):[];return[this._command,...e.map(t=>{var i;const r=(i=this._parsedParams)===null||i===void 0?void 0:i[t];if(r)return(r.trailing?":":"")+r.value}).filter(t=>t!==void 0)].join(" ")}_buildCommandFromRawParams(){var e,t;return[this._command,...(t=(e=this._params)===null||e===void 0?void 0:e.map(i=>`${i.trailing?":":""}${i.value}`))!==null&&t!==void 0?t:[]].join(" ")}}Nt.COMMAND="";Nt.SUPPORTS_CAPTURE=!1;class bhe extends Nt{constructor(e,t,i){super(e,t,i,{reference:{},type:{optional:!0},additionalParams:{optional:!0}})}}bhe.COMMAND="BATCH";const Urt={name:"batch",messageTypes:[bhe],usesTags:!0},Brt={name:"cap-notify"};class She extends Nt{constructor(e,t,i){super(e,t,i,{newUser:{},newHost:{}})}}She.COMMAND="CHGHOST";const Frt={name:"chghost",messageTypes:[She]},zrt={name:"invite-notify"};class Ehe extends Nt{}Ehe.COMMAND="ACK";const jrt={name:"labeled-response",messageTypes:[Ehe],usesTags:!0},Hrt={name:"message-tags",usesTags:!0},Vrt={name:"multi-prefix"},Grt=Object.freeze(Object.defineProperty({__proto__:null,AwayNotify:Ort,Batch:Urt,CapNotify:Brt,ChgHost:Frt,InviteNotify:zrt,LabeledResponse:jrt,MessageTags:Hrt,MultiPrefix:Vrt},Symbol.toStringTag,{value:"Module"}));class qrt{constructor(e,t,...i){this._client=e,this._originalMessage=t,this._messages=[],this._endEventHandlers=new Map,this._types=new Set(i)}untilEvent(e){this._cleanEndEventHandler(e);const t=this._client.on(e,()=>this.end());this._endEventHandlers.set(e,t)}async promise(){return this._promise||(this._promise=new Promise(e=>{this._promiseResolve=e})),await this._promise}collect(e){return this._originalMessage._acceptsInReplyCollection(e)?(this._messages.push(e),e.endsResponseTo(this._originalMessage)&&this.end(),!0):!1}end(){this._client.stopCollect(this),this._cleanEndEventHandlers(),this._promiseResolve&&this._promiseResolve(this._messages)}_cleanEndEventHandlers(){this._endEventHandlers.forEach(e=>{this._client.removeListener(e)}),this._endEventHandlers.clear()}_cleanEndEventHandler(e){this._endEventHandlers.has(e)&&(this._client.removeListener(this._endEventHandlers.get(e)),this._endEventHandlers.delete(e))}}class HV extends Nt{constructor(e,t,i){super(e,t,i,{password:{}})}}HV.COMMAND="PASS";class jw extends Nt{constructor(e,t,i){super(e,t,i,{nick:{}})}}jw.COMMAND="NICK";class VV extends Nt{constructor(e,t,i){super(e,t,i,{user:{},mode:{},unused:{},realName:{trailing:!0}})}}VV.COMMAND="USER";class The extends Nt{constructor(e,t,i){super(e,t,i,{name:{},password:{}})}}The.COMMAND="OPER";class GV extends Nt{constructor(e,t,i){super(e,t,i,{text:{trailing:!0,optional:!0}})}}GV.COMMAND="QUIT";class xhe extends Nt{constructor(e,t,i){super(e,t,i,{server:{},reason:{trailing:!0}})}}xhe.COMMAND="SQUIT";class eA extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},key:{optional:!0}})}}eA.COMMAND="JOIN";class tA extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},reason:{trailing:!0,optional:!0}})}}tA.COMMAND="PART";class e2 extends Error{constructor(e){super(`Unknown channel mode character ${e}`),this._char=e,Object.setPrototypeOf(this,e2.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,e2)}get char(){return this._char}}class whe extends Nt{constructor(e,t,i){super(e,t,i,{target:{},modes:{rest:!0,optional:!0}})}get isChannel(){return c6(this.target,this._serverProperties.channelTypes)}separate(){const e=[],t=this.modes;if(!t)throw new Error("can't separate a channel mode request, just set actions");const i=t.split(" "),r=i.shift();let s="add";for(const a of r){let o=s;switch(a){case"+":{s="add";break}case"-":{s="remove";break}default:{let l=!1,c=!0;if(this.isChannel){if(this._serverProperties.supportedChannelModes.alwaysWithParam.includes(a)||this._serverProperties.supportedChannelModes.prefix.includes(a))l=!0;else if(this._serverProperties.supportedChannelModes.paramWhenSet.includes(a))s==="add"&&(l=!0);else if(this._serverProperties.supportedChannelModes.list.includes(a))i.length?l=!0:o="getList";else if(!this._serverProperties.supportedChannelModes.noParam.includes(a))throw new e2(a)}else c=this._serverProperties.supportedUserModes.includes(a);if(l&&!i.length)continue;e.push({prefix:this._prefix,action:o,letter:a,param:l?i.shift():void 0,known:c})}}}return e}}whe.COMMAND="MODE";class Che extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},newTopic:{optional:!0,trailing:!0}})}}Che.COMMAND="TOPIC";class AM extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channelList",optional:!0}})}}AM.COMMAND="NAMES";AM.SUPPORTS_CAPTURE=!0;class Ahe extends Nt{constructor(e,t,i){super(e,t,i,{channel:{optional:!0},server:{optional:!0}})}}Ahe.COMMAND="LIST";class Mhe extends Nt{constructor(e,t,i){super(e,t,i,{target:{},channel:{type:"channel"}})}}Mhe.COMMAND="INVITE";class Rhe extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},target:{},reason:{trailing:!0,optional:!0}})}}Rhe.COMMAND="KICK";class Ohe extends Nt{constructor(e,t,i){super(e,t,i,{server:{optional:!0}})}}Ohe.COMMAND="TIME";class nA extends Nt{constructor(e,t,i){super(e,t,i,{target:{},text:{trailing:!0}})}}nA.COMMAND="PRIVMSG";class JU extends Nt{constructor(e,t,i){super(e,t,i,{target:{},text:{trailing:!0}})}}JU.COMMAND="NOTICE";class QU extends Nt{constructor(e,t,i){super(e,t,i,{mask:{},flags:{optional:!0},extendedMask:{optional:!0,trailing:!0}})}}QU.COMMAND="WHO";class Ihe extends Nt{constructor(e,t,i){super(e,t,i,{server:{optional:!0},nickMask:{}})}}Ihe.COMMAND="WHOIS";class Nhe extends Nt{constructor(e,t,i){super(e,t,i,{nick:{},count:{optional:!0},server:{optional:!0}})}}Nhe.COMMAND="WHOWAS";class Phe extends Nt{constructor(e,t,i){super(e,t,i,{target:{},reason:{trailing:!0,optional:!0}})}}Phe.COMMAND="KILL";class t2 extends Nt{constructor(e,t,i){super(e,t,i,{text:{trailing:!0}})}}t2.COMMAND="PING";class n2 extends Nt{constructor(e,t,i){super(e,t,i,{server:{noClient:!0},text:{trailing:!0}})}}n2.COMMAND="PONG";class Dhe extends Nt{constructor(e,t,i){super(e,t,i,{text:{trailing:!0}})}}Dhe.COMMAND="ERROR";class khe extends Nt{constructor(e,t,i){super(e,t,i,{text:{trailing:!0,optional:!0}})}}khe.COMMAND="AWAY";class Lhe extends Nt{}Lhe.COMMAND="REHASH";class Uhe extends Nt{}Uhe.COMMAND="RESTART";class Bhe extends Nt{constructor(e,t,i){super(e,t,i,{text:{trailing:!0}})}}Bhe.COMMAND="WALLOPS";class Fhe extends Nt{constructor(e,t,i){super(e,t,i,{nicks:{rest:!0}})}}Fhe.COMMAND="USERHOST";class zhe extends Nt{constructor(e,t,i){super(e,t,i,{nicks:{rest:!0}})}}zhe.COMMAND="ISON";class rd extends Nt{constructor(e,t,i){super(e,t,i,{target:{match:/^(?:[a-z_\-\[\]\\^{}|`][a-z0-9_\-\[\]\\^{}|`]+|\*)$/i,optional:!0,noClient:!0},subCommand:{match:/^(?:LS|LIST|REQ|ACK|NAK|END|NEW|DEL)$/i},version:{match:/^\d+$/,optional:!0},continued:{match:/^\*$/,optional:!0},capabilities:{trailing:!0,optional:!0}})}isResponseTo(e){if(!(e instanceof rd))return!1;switch(this.subCommand){case"ACK":case"NAK":return e.subCommand==="REQ"&&e.capabilities===this.capabilities.trim();case"LS":case"LIST":return e.subCommand===this.subCommand;default:return!1}}endsResponseTo(e){if(!(e instanceof rd))return!1;switch(this.subCommand){case"LS":case"LIST":return!this.continued;default:return!0}}}rd.COMMAND="CAP";rd.SUPPORTS_CAPTURE=!0;class jhe extends Nt{constructor(e,t,i){super(e,t,i,{target:{}})}}jhe.COMMAND="TAGMSG";const Hhe=Object.freeze(Object.defineProperty({__proto__:null,Away:khe,CapabilityNegotiation:rd,ChannelInvite:Mhe,ChannelJoin:eA,ChannelKick:Rhe,ChannelList:Ahe,ChannelPart:tA,ClientQuit:GV,ErrorMessage:Dhe,IsOnQuery:zhe,Kill:Phe,Mode:whe,Names:AM,NickChange:jw,Notice:JU,OperLogin:The,Password:HV,Ping:t2,Pong:n2,PrivateMessage:nA,Rehash:Lhe,Restart:Uhe,ServerQuit:xhe,TagMessage:jhe,Time:Ohe,Topic:Che,UserHostQuery:Fhe,UserRegistration:VV,Wallops:Bhe,WhoIsQuery:Ihe,WhoQuery:QU,WhoWasQuery:Nhe},Symbol.toStringTag,{value:"Module"}));class qV extends Nt{constructor(e,t,i){super(e,t,i,{me:{},welcomeText:{trailing:!0}})}}qV.COMMAND="001";class Vhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},yourHost:{trailing:!0}})}}Vhe.COMMAND="002";class Ghe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},createdText:{trailing:!0}})}}Ghe.COMMAND="003";class $V extends Nt{constructor(e,t,i){super(e,t,i,{me:{},serverName:{},version:{},userModes:{},channelModes:{},channelModesWithParam:{optional:!0}})}}$V.COMMAND="004";class WV extends Nt{constructor(e,t,i){super(e,t,i,{me:{},supports:{rest:!0},suffix:{trailing:!0}})}}WV.COMMAND="005";class qhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},modes:{}})}}qhe.COMMAND="221";class $he extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},text:{trailing:!0}})}}$he.COMMAND="301";class Whe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},hosts:{trailing:!0}})}}Whe.COMMAND="302";class Yhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}Yhe.COMMAND="305";class Xhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}Xhe.COMMAND="306";class Khe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},username:{},host:{},_unused:{},realname:{trailing:!0}})}}Khe.COMMAND="311";class Zhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},query:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof QU}endsResponseTo(){return!0}}Zhe.COMMAND="315";class Jhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nickMask:{},suffix:{trailing:!0}})}}Jhe.COMMAND="318";class Qhe extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},channels:{trailing:!0}})}}Qhe.COMMAND="319";class ede extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},memberCount:{},topic:{trailing:!0}})}}ede.COMMAND="322";class tde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}tde.COMMAND="323";class nde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},modes:{rest:!0}})}}nde.COMMAND="324";class ide extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}ide.COMMAND="331";class rde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},topic:{trailing:!0}})}}rde.COMMAND="332";class sde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},who:{},ts:{}})}}sde.COMMAND="333";class ade extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},channel:{type:"channel"}})}}ade.COMMAND="341";class ode extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}ode.COMMAND="348";class lde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}lde.COMMAND="349";class cde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{},user:{},host:{},server:{},nick:{},flags:{},hopsAndRealName:{trailing:!0}})}get isAway(){return this.flags.includes("G")}get isOper(){return this.flags.includes("*")}get isBot(){return this.flags.includes("B")}isResponseTo(e){return e instanceof QU}}cde.COMMAND="352";class ude extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channelType:{},channel:{type:"channel"},names:{trailing:!0}})}isResponseTo(e){return e instanceof AM}}ude.COMMAND="353";class hde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{},suffix:{trailing:!0}})}isResponseTo(e){return e instanceof AM}endsResponseTo(){return!0}}hde.COMMAND="366";class dde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},mask:{},creatorName:{optional:!0},timestamp:{optional:!0}})}}dde.COMMAND="367";class fde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}fde.COMMAND="368";class pde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},line:{trailing:!0}})}}pde.COMMAND="372";class mde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},line:{trailing:!0}})}}mde.COMMAND="375";class YV extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}YV.COMMAND="376";class gde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}gde.COMMAND="381";class vde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},server:{optional:!0},timestamp:{trailing:!0}})}}vde.COMMAND="391";class yde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},suffix:{trailing:!0}})}}yde.COMMAND="401";class _de extends Nt{constructor(e,t,i){super(e,t,i,{me:{},server:{},suffix:{trailing:!0}})}}_de.COMMAND="402";class bde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{},suffix:{trailing:!0}})}}bde.COMMAND="403";class Sde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Sde.COMMAND="404";class Ede extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Ede.COMMAND="405";class Tde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},subCommand:{},suffix:{trailing:!0}})}}Tde.COMMAND="410";class xde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},originalCommand:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command===this.originalCommand}endsResponseTo(){return!0}}xde.COMMAND="421";class XV extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}XV.COMMAND="422";class wde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}wde.COMMAND="431";class Cde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Cde.COMMAND="432";class Ade extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Ade.COMMAND="433";class Mde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Mde.COMMAND="436";class Rde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Rde.COMMAND="441";class Ode extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Ode.COMMAND="442";class Ide extends Nt{constructor(e,t,i){super(e,t,i,{me:{},nick:{},channel:{type:"channel"},suffix:{trailing:!0}})}isResponseTo(e){return e.command==="NICK"}endsResponseTo(){return!0}}Ide.COMMAND="443";class Nde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}Nde.COMMAND="451";class Pde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},originalCommand:{},suffix:{trailing:!0}})}}Pde.COMMAND="461";class KV extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}KV.COMMAND="462";class Dde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Dde.COMMAND="471";class kde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},char:{},suffix:{trailing:!0}})}}kde.COMMAND="472";class Lde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Lde.COMMAND="473";class Ude extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Ude.COMMAND="474";class Bde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{type:"channel"},suffix:{trailing:!0}})}}Bde.COMMAND="475";class Fde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{},suffix:{trailing:!0}})}}Fde.COMMAND="479";class zde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}zde.COMMAND="481";class jde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},channel:{},suffix:{trailing:!0}})}}jde.COMMAND="482";class Hde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}Hde.COMMAND="491";class Vde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},modeChar:{optional:!0,match:/^\w$/},suffix:{trailing:!0}})}}Vde.COMMAND="501";class Gde extends Nt{constructor(e,t,i){super(e,t,i,{me:{},suffix:{trailing:!0}})}}Gde.COMMAND="502";const qde=Object.freeze(Object.defineProperty({__proto__:null,Error401NoSuchNick:yde,Error402NoSuchServer:_de,Error403NoSuchChannel:bde,Error404CanNotSendToChan:Sde,Error405TooManyChannels:Ede,Error410InvalidCapCmd:Tde,Error421UnknownCommand:xde,Error422NoMotd:XV,Error431NoNickNameGiven:wde,Error432ErroneusNickname:Cde,Error433NickNameInUse:Ade,Error436NickCollision:Mde,Error441UserNotInChannel:Rde,Error442NotOnChannel:Ode,Error443UserOnChannel:Ide,Error451NotRegistered:Nde,Error461NeedMoreParams:Pde,Error462AlreadyRegistered:KV,Error471ChannelIsFull:Dde,Error472UnknownMode:kde,Error473InviteOnlyChan:Lde,Error474BannedFromChan:Ude,Error475BadChannelKey:Bde,Error479BadChanName:Fde,Error481NoPrivileges:zde,Error482ChanOpPrivsNeeded:jde,Error491NoOperHost:Hde,Error501UmodeUnknownFlag:Vde,Error502UsersDontMatch:Gde,Reply001Welcome:qV,Reply002YourHost:Vhe,Reply003Created:Ghe,Reply004ServerInfo:$V,Reply005Isupport:WV,Reply221UmodeIs:qhe,Reply301Away:$he,Reply302UserHost:Whe,Reply305UnAway:Yhe,Reply306NowAway:Xhe,Reply311WhoisUser:Khe,Reply315EndOfWho:Zhe,Reply318EndOfWhois:Jhe,Reply319WhoisChannels:Qhe,Reply322List:ede,Reply323ListEnd:tde,Reply324ChannelModeIs:nde,Reply331NoTopic:ide,Reply332Topic:rde,Reply333TopicWhoTime:sde,Reply341Inviting:ade,Reply348ExceptList:ode,Reply349EndOfExceptList:lde,Reply352WhoReply:cde,Reply353NamesReply:ude,Reply366EndOfNames:hde,Reply367BanList:dde,Reply368EndOfBanList:fde,Reply372Motd:pde,Reply375MotdStart:mde,Reply376EndOfMotd:YV,Reply381YoureOper:gde,Reply391Time:vde},Symbol.toStringTag,{value:"Module"})),$rt=new Map([...Object.values(Hhe),...Object.values(qde)].map(n=>[n.COMMAND,n]));function Wrt(n){const[e,t]=ob(n,"!",2);if(t){const[i,r]=ob(t,"@",2);return r?{nick:e,user:i,host:r}:{nick:e,host:i}}return{nick:e}}const RK={":":";",n:`
`,r:"\r",s:" "};function Yrt(n){const e=new Map,t=n.split(";");for(const i of t){const[r,s]=ob(i,"=",2);r!==""&&e.set(r,s?s.replace(/\\(.?)/g,(a,o)=>Object.prototype.hasOwnProperty.call(RK,o)?RK[o]:o):"")}return e}function Xrt(n,e=fT,t=$rt,i=!1,r=[],s=!0){const a=n.split(" ");let o,l;const c=[];let u,h;for(;a.length;){if([o]=a,o.startsWith("@")&&!u&&!l&&!h)u=Yrt(o.slice(1));else if(o.startsWith(":"))if(!h&&!l)o.length>1&&(h=Wrt(o.slice(1)));else{c.push({value:a.join(" ").slice(1),trailing:!0});break}else l?c.push({value:o,trailing:!1}):l=o.toUpperCase();a.shift()}if(u||(u=new Map),!l)throw new Error(`line without command received: ${n}`);s&&(s=!r.includes(l));let d=Nt;return t.has(l)&&(d=t.get(l)),new d(l,{params:c,tags:u,prefix:h,rawLine:n},{serverProperties:e,isServer:i,shouldParseParams:s})}class $de extends wM{constructor(e){super(),this._registered=!1,this._supportsCapabilities=!0,this._events=new Map,this._registeredMessageTypes=new Map,this.onConnect=this.registerEvent(),this.onRegister=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onPrivmsg=this.registerEvent(),this.onAction=this.registerEvent(),this.onNotice=this.registerEvent(),this.onNickChange=this.registerEvent(),this.onCtcp=this.registerEvent(),this.onCtcpReply=this.registerEvent(),this.onPasswordError=this.registerEvent(),this.onAnyMessage=this.registerEvent(),this._serverProperties=zw(fT),this._supportedFeatures={},this._collectors=[],this._clientCapabilities=new Map,this._serverCapabilities=new Map,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._hasRegisteredBefore=!1,this._channelsFromLastRegister=new Set,this._initialConnectionSetupDone=!1;const{connection:t,credentials:i,channels:r,channelTypes:s,webSocket:a,logger:o={}}=e;this._options=e;const{pingOnInactivity:l=60,pingTimeout:c=10}=t;this._pingOnInactivity=l,this._pingTimeout=c,this._currentNick=i.nick,this._logger=KU({name:"ircv3",emoji:!0,...o}),this.registerCoreMessageTypes();const{hostName:u,secure:h,reconnect:d=!0}=t,f={hostName:u,port:this.port,secure:h},m={lineBased:!0,logger:this._logger,additionalOptions:e.connectionOptions},v=a?Rrt:Art;d?this._connection=new Mrt(v,f,m):this._connection=new v(m,this._logger,e.connectionOptions);for(const _ of Object.values(Grt))this.addCapability(_);this.addInternalListener(this.onRegister,async()=>{const _=this._hasRegisteredBefore,y=this._channelsFromLastRegister;this._hasRegisteredBefore=!0,this._channelsFromLastRegister=new Set;const S=_&&this._options.rejoinChannelsOnReconnect?y:await n6(r);if(S)for(const T of S)this.join(T)}),this.onTypedMessage(rd,async({subCommand:_,capabilities:y})=>{const S=y.split(" ");switch(_.toUpperCase()){case"NEW":{this._logger.debug(`Server registered new capabilities: ${S.join(", ")}`);const T=bO(S,I=>{if(!I)return{};const[R,N]=ob(I,"=",2);return{[R]:{name:R,param:N||!0}}});for(const[I,R]of Object.entries(T))this._serverCapabilities.set(I,R);const x=Object.keys(T);await this._negotiateCapabilities(Array.from(this._clientCapabilities.entries()).filter(([I])=>x.includes(I)).map(([,I])=>I));break}case"DEL":{this._logger.debug(`Server removed capabilities: ${S.join(", ")}`);for(const T of S)this._serverCapabilities.delete(T),this._negotiatedCapabilities.delete(T)}}}),this.onTypedMessage(t2,({text:_})=>{this.sendMessage(n2,{text:_})}),this.onTypedMessage(qV,({me:_})=>this._handleReceivedClientNick(_)),this.onTypedMessage($V,({userModes:_})=>{_&&(this._serverProperties.supportedUserModes=_)}),this.onTypedMessage(WV,({supports:_})=>{const y=bO(_.split(" "),S=>{const[T,x]=ob(S,"=",2);return{[T]:x||!0}});this._supportedFeatures={...this._supportedFeatures,...y}}),this.onTypedMessage(YV,({me:_})=>{this._registered||(this._handleReceivedClientNick(_),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(XV,({me:_})=>{this._registered||(this._handleReceivedClientNick(_),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(KV,({me:_})=>{this._registered||(this._logger.warn("We thought we're not registered yet, but we actually are"),this._handleReceivedClientNick(_),this._registered=!0,this.emit(this.onRegister))}),this.onTypedMessage(nA,_=>{var y;const{target:S,text:T}=_,x=MK(T),I=(y=_.prefix)===null||y===void 0?void 0:y.nick;x?x.command==="ACTION"?this.emit(this.onAction,S,I,x.params,_):this.emit(this.onCtcp,S,I,x.command,x.params,_):this.emit(this.onPrivmsg,S,I,T,_)}),this.onTypedMessage(jw,_=>{var y;const{nick:S}=_,T=(y=_.prefix)===null||y===void 0?void 0:y.nick;T===this._currentNick&&(this._currentNick=S),this.emit(this.onNickChange,T,S,_)}),this.onTypedMessage(JU,_=>{var y;const{target:S,text:T}=_,x=MK(T),I=(y=_.prefix)===null||y===void 0?void 0:y.nick;x&&this.emit(this.onCtcpReply,S,I,x.command,x.params,_),this.emit(this.onNotice,S,I,T,_)}),this._options.manuallyAcknowledgeJoins||this.onTypedMessage(eA,({channel:_,prefix:y})=>{(y==null?void 0:y.nick)===this._currentNick&&this.acknowledgeJoin(_)}),this.onTypedMessage(tA,_=>{var y;((y=_.prefix)===null||y===void 0?void 0:y.nick)===this._currentNick&&(this._currentChannels.delete(_.channel),this._channelsFromLastRegister.delete(_.channel))}),this.addInternalListener(this.onRegister,()=>this._startPingCheckTimer()),this._desiredNick=i.nick,this._userName=i.userName,this._realName=i.realName,s&&(this._serverProperties.channelTypes=s)}receiveLine(e){var t;this._logger.debug(`Received message: ${e}`);let i;try{i=Xrt(e,this._serverProperties,this._registeredMessageTypes,!0,this._options.nonConformingCommands)}catch(r){this._logger.error(`Error parsing message: ${r.message}`),this._logger.trace((t=r.stack)!==null&&t!==void 0?t:"No stack available");return}this._logger.trace(`Parsed message: ${JSON.stringify(i)}`),this._startPingCheckTimer(),this.emit(this.onAnyMessage,i),this._handleEvents(i)}get serverProperties(){return zw(this._serverProperties)}get port(){const{webSocket:e,connection:{port:t,secure:i}}=this._options;return t||(e?i?443:80:i?6697:6667)}pingCheck(){const e=Date.now(),t=e.toString(),i=this.onTypedMessage(n2,r=>{const{text:s}=r;s===t&&(this._logger.debug(`Current ping: ${Date.now()-e}ms`),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),this.removeMessageListener(i))});this._pingTimeoutTimer=setTimeout(()=>{this.removeMessageListener(i),this._options.connection.reconnect===!1?this._logger.error(`Disconnecting because the last ping took over ${this._pingTimeout} seconds`):this._logger.warn(`Reconnecting because the last ping took over ${this._pingTimeout} seconds`),this._connection.assumeExternalDisconnect()},this._pingTimeout*1e3),this.sendMessage(t2,{text:t})}reconnect(e){this.quit(e),this.connect()}registerMessageType(e){e.COMMAND!==""&&(this._logger.trace(`Registering message type ${e.COMMAND}`),this._registeredMessageTypes.set(e.COMMAND.toUpperCase(),e))}knowsCommand(e){return this._registeredMessageTypes.has(e.toUpperCase())}getCommandClass(e){return this._registeredMessageTypes.get(e.toUpperCase())}acknowledgeJoin(e){this._currentChannels.add(e),this._channelsFromLastRegister.add(e)}connect(){this._supportsCapabilities=!1,this._negotiatedCapabilities=new Map,this._currentChannels=new Set,this._currentNick=this._desiredNick,this._setupConnection(),this._logger.info(`Connecting to ${this._options.connection.hostName}:${this.port}`),this._connection.connect()}addCapability(e){if(this._clientCapabilities.set(e.name,e),e.messageTypes)for(const t of Object.values(e.messageTypes))this.registerMessageType(t)}async registerCapability(e){return this.addCapability(e),this._serverCapabilities.has(e.name)?await this._negotiateCapabilities([e]):[]}send(e){this.sendRaw(e.toString())}sendRaw(e){this._connection.isConnected&&(this._logger.debug(`Sending message: ${e}`),this._connection.sendLine(e))}onNamedMessage(e,t,i){this._events.has(e)||this._events.set(e,new Map);const r=this._events.get(e);if(!i)do i=`${e}:${Ait(Math.random()*1e4,4,"0")}`;while(r.has(i));return r.set(i,t),i}onTypedMessage(e,t,i){return this.onNamedMessage(e.COMMAND,t,i)}removeMessageListener(e){const[t]=e.split(":");this._events.has(t)&&this._events.get(t).delete(e)}createMessage(e,t,i){const r=i?new Map(Object.entries(i)):void 0;return Lrt(e,t,void 0,r,this.serverProperties)}sendMessage(e,t,i){this.send(this.createMessage(e,t,i))}async sendMessageAndCaptureReply(e,t){if(!e.SUPPORTS_CAPTURE)throw new Error(`The command "${e.COMMAND}" does not support reply capture`);const i=this.createMessage(e,t),r=this.collect(i).promise();return this.send(i),await r}get isConnected(){return this._connection.isConnected}get isConnecting(){return this._connection.isConnecting}get isRegistered(){return this._registered}get currentNick(){return this._currentNick}get currentChannels(){return Array.from(this._currentChannels)}collect(e,...t){const i=new qrt(this,e,...t);return this._collectors.push(i),i}stopCollect(e){this._collectors.splice(this._collectors.findIndex(t=>t===e),1)}join(e,t){this.sendMessage(eA,{channel:e,key:t})}part(e){this.sendMessage(tA,{channel:e})}quit(e){this.sendMessage(GV,{text:e}),this.quitAbruptly()}quitAbruptly(){this._registered=!1,this._connection.disconnect()}say(e,t,i={}){this.sendMessage(nA,{target:e,text:t},i)}sendCtcp(e,t,i){this.say(e,`${t.toUpperCase()} ${i}`)}action(e,t){this.sendCtcp(e,"ACTION",t)}changeNick(e){this._currentNick!==e&&(this._desiredNick=e,this.isRegistered&&this.sendMessage(jw,{nick:e}))}registerCoreMessageTypes(){i6(Hhe,e=>{this.registerMessageType(e)}),i6(qde,e=>{this.registerMessageType(e)})}async _negotiateCapabilityBatch(e){return await Promise.all(e.filter(t=>t.length).map(async t=>await this._negotiateCapabilities(t)))}async _negotiateCapabilities(e){const t=bO(e,a=>({[a.name]:a})),r=(await this.sendMessageAndCaptureReply(rd,{subCommand:"REQ",capabilities:e.map(a=>a.name).join(" ")})).shift();if(!r)throw new Error("capability negotiation failed unexpectedly without any reply");if(!(r instanceof rd))throw new Error(`capability negotiation failed unexpectedly with "${r.command}" command`);const s=r.capabilities.split(" ").filter(a=>a);if(r.subCommand==="ACK"){this._logger.debug(`Successfully negotiated capabilities: ${s.join(", ")}`);const a=s.map(o=>t[o]);for(const o of a){const l=this._clientCapabilities.get(o.name);l.param=o.param,this._negotiatedCapabilities.set(l.name,l)}return a}return this._logger.warn(`Failed to negotiate capabilities: ${s.join(", ")}`),new Error("capabilities failed to negotiate")}_setupConnection(){this._initialConnectionSetupDone||(this._connection.onConnect(async()=>{var e,t;this._logger.info(`Connection to server ${this._options.connection.hostName}:${this.port} established`),this.emit(this.onConnect),this._logger.debug("Determining connection password");try{const[i]=await Promise.all([n6(this._options.credentials.password),this.sendMessageAndCaptureReply(rd,{subCommand:"LS",version:"302"}).then(async r=>{if(!r.length||!(r[0]instanceof rd))return this._logger.debug("Server does not support capabilities"),[];this._supportsCapabilities=!0;const s=r.map(o=>bO(o.capabilities.split(" "),l=>{if(!l)return{};const[c,u]=ob(l,"=",2);return{[c]:{name:c,param:u||!0}}}));this._serverCapabilities=new Map(Object.entries(Object.assign({},...s))),this._logger.debug(`Capabilities supported by server: ${Array.from(this._serverCapabilities.keys()).join(", ")}`);const a=s.map(o=>{const l=Object.keys(o);return Array.from(this._clientCapabilities.entries()).filter(([c])=>l.includes(c)).map(([,c])=>c)});return await this._negotiateCapabilityBatch(a)}).then(()=>{this.sendMessage(rd,{subCommand:"END"})})]);i&&this.sendMessage(HV,{password:i}),this.sendMessage(jw,{nick:this._desiredNick}),this.sendMessage(VV,{user:(e=this._userName)!==null&&e!==void 0?e:this._desiredNick,mode:"8",unused:"*",realName:(t=this._realName)!==null&&t!==void 0?t:this._desiredNick})}catch(i){this.emit(this.onPasswordError,i),this.quit()}}),this._initialConnectionSetupDone=!0,this._connection.onReceive(e=>{this.receiveLine(e)}),this._connection.onDisconnect((e,t)=>{var i;if(this._registered=!1,this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._pingTimeoutTimer&&clearTimeout(this._pingTimeoutTimer),e)this._logger.info("Disconnected");else{const r=(i=this._options.connection.reconnect)!==null&&i!==void 0?i:!0,s=t?`Disconnected unexpectedly: ${t.message}`:"Disconnected unexpectedly";r?this._logger.warn(`${s}; trying to reconnect`):this._logger.error(s)}this.emit(this.onDisconnect,e,t)}),this._connection.onEnd(e=>{e||this._logger.warn("No further retries will be made")}))}_handleReceivedClientNick(e){this._currentNick!==e&&(this._currentNick!==""&&this._logger.warn(`Mismatching nicks: passed ${this._currentNick}, but you're actually ${e}`),this._currentNick=e)}_handleEvents(e){this._collectors.some(i=>i.collect(e));const t=this._events.get(e.constructor.COMMAND);if(t)for(const i of t.values())i(e)}_startPingCheckTimer(){this._pingCheckTimer&&clearTimeout(this._pingCheckTimer),this._connection.isConnected?this._pingCheckTimer=setTimeout(()=>this.pingCheck(),this._pingOnInactivity*1e3):this._pingCheckTimer=void 0}}ws([_0(!1)],$de.prototype,"_options",void 0);class ZV extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},user:{trailing:!0,optional:!0}})}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get channelId(){return this._tags.get("room-id")}get targetUserId(){var e;return(e=this._tags.get("target-user-id"))!==null&&e!==void 0?e:null}}ZV.COMMAND="CLEARCHAT";class Wde extends Nt{}Wde.COMMAND="RECONNECT";class JV extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"}})}}JV.COMMAND="ROOMSTATE";function Krt(n){switch(typeof n){case"undefined":return"";case"object":{if(n===null)return"";if("cacheKey"in n)return n.cacheKey;const e=JSON.stringify(n);if(e!=="{}")return e}default:return n.toString()}}function Yde(n,e,t){return[n,...e.map(Krt)].join("/")+(t?"/":"")}const og=Symbol("cache");function Zrt(n){var e,t;return t=class extends n{constructor(){super(...arguments),this[e]=new Map}getFromCache(i){if(this._cleanCache(),this[og].has(i)){const r=this[og].get(i);if(r)return r.value}}setCache(i,r,s){this[og].set(i,{value:r,expires:Date.now()+s*1e3})}removeFromCache(i,r){const s=this._getInternalCacheKey(i,r);r?this[og].forEach((a,o)=>{o.startsWith(s)&&this[og].delete(o)}):this[og].delete(s)}_cleanCache(){const i=Date.now();this[og].forEach((r,s)=>{r.expires<i&&this[og].delete(s)})}_getInternalCacheKey(i,r){if(typeof i=="string"){let s=i;return s.endsWith("/")||(s+="/"),s}else{const s=i.shift();return Yde(s,i,r)}}},e=og,t}function Xde(n=1/0){return function(e,t,i){if(i.get){const r=i.get;i.get=function(){const s=Yde(t,[]),a=this.getFromCache(s);if(a)return a;const o=r.call(this);return this.setCache(s,o,n),o}}return i}}var CI;let e0=CI=class{constructor(e,t){this._userName=e.toLowerCase(),this._userData=t?new Map(t):new Map}static _parseBadgesLike(e){return e?new Map(e.split(",").map(t=>{const i=t.indexOf("/");return i===-1?[t,""]:[t.slice(0,i),t.slice(i+1)]})):new Map}get userName(){return this._userName}get displayName(){var e;return(e=this._userData.get("display-name"))!==null&&e!==void 0?e:this._userName}get color(){return this._userData.get("color")}get badges(){const e=this._userData.get("badges");return CI._parseBadgesLike(e)}get badgeInfo(){const e=this._userData.get("badge-info");return CI._parseBadgesLike(e)}get userId(){return this._userData.get("user-id")}get userType(){return this._userData.get("user-type")}get isBroadcaster(){return this.badges.has("broadcaster")}get isSubscriber(){return this.badges.has("subscriber")||this.isFounder}get isFounder(){return this.badges.has("founder")}get isMod(){return this.badges.has("moderator")}get isVip(){const e=this._userData.get("vip");return e!=null&&e!=="0"}get isArtist(){return this.badges.has("artist-badge")}};ws([_0(!1)],e0.prototype,"_userData",void 0);ws([Xde()],e0.prototype,"badges",null);ws([Xde()],e0.prototype,"badgeInfo",null);e0=CI=ws([Zrt,CM("chat","ChatUser","userId")],e0);function QV(n){return n?new Map(n.split("/").map(e=>{const[t,i]=e.split(":",2);return i?[t,i.split(",")]:null}).filter(e=>e!==null)):new Map}class eG extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},text:{trailing:!0,optional:!0}})}get id(){return this._tags.get("id")}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get userInfo(){return new e0(this._tags.get("login"),this._tags)}get channelId(){var e;return(e=this._tags.get("room-id"))!==null&&e!==void 0?e:null}get emoteOffsets(){return QV(this._tags.get("emotes"))}}eG.COMMAND="USERNOTICE";class Kde extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"}})}}Kde.COMMAND="USERSTATE";class tG extends Nt{constructor(e,t,i){super(e,t,i,{target:{},text:{trailing:!0}})}get userInfo(){return new e0(this._prefix.nick,this._tags)}get emoteOffsets(){return QV(this._tags.get("emotes"))}}tG.COMMAND="WHISPER";const Jrt={name:"twitch.tv/commands",messageTypes:[ZV,Wde,JV,eG,Kde,tG]},Qrt={name:"twitch.tv/membership"};class nG extends Nt{constructor(e,t,i){super(e,t,i,{channel:{type:"channel"},text:{trailing:!0}})}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get userName(){return this._tags.get("login")}get channelId(){return this._tags.get("room-id")}get targetMessageId(){return this._tags.get("target-msg-id")}}nG.COMMAND="CLEARMSG";class Zde extends Nt{}Zde.COMMAND="GLOBALUSERSTATE";const est={name:"twitch.tv/tags",messageTypes:[Zde,nG]},tst=["ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN"];let i2=class extends nA{get id(){return this._tags.get("id")}get date(){const e=this._tags.get("tmi-sent-ts");return new Date(Number(e))}get userInfo(){return new e0(this._prefix.nick,this._tags)}get channelId(){var e;return(e=this._tags.get("room-id"))!==null&&e!==void 0?e:null}get isCheer(){return this._tags.has("bits")}get isRedemption(){return!!this._tags.get("custom-reward-id")}get rewardId(){return this._tags.get("custom-reward-id")||null}get isFirst(){return this._tags.get("first-msg")==="1"}get isReturningChatter(){return this._tags.get("returning-chatter")==="1"}get isHighlight(){return this._tags.get("msg-id")==="highlighted-message"}get isReply(){return this._tags.has("reply-parent-msg-id")}get parentMessageId(){var e;return(e=this._tags.get("reply-parent-msg-id"))!==null&&e!==void 0?e:null}get parentMessageText(){var e;return(e=this._tags.get("reply-parent-msg-body"))!==null&&e!==void 0?e:null}get parentMessageUserId(){var e;return(e=this._tags.get("reply-parent-user-id"))!==null&&e!==void 0?e:null}get parentMessageUserName(){var e;return(e=this._tags.get("reply-parent-user-login"))!==null&&e!==void 0?e:null}get parentMessageUserDisplayName(){var e;return(e=this._tags.get("reply-parent-display-name"))!==null&&e!==void 0?e:null}get threadMessageId(){var e;return(e=this._tags.get("reply-thread-parent-msg-id"))!==null&&e!==void 0?e:null}get threadMessageUserId(){var e;return(e=this._tags.get("reply-thread-parent-user-id"))!==null&&e!==void 0?e:null}get bits(){var e;return Number((e=this._tags.get("bits"))!==null&&e!==void 0?e:0)}get emoteOffsets(){return QV(this._tags.get("emotes"))}get isHypeChat(){return this._tags.has("pinned-chat-paid-amount")}get hypeChatAmount(){return JC(this._tags.get("pinned-chat-paid-amount"),Number)}get hypeChatDecimalPlaces(){return JC(this._tags.get("pinned-chat-paid-exponent"),Number)}get hypeChatLocalizedAmount(){const e=this.hypeChatAmount;return e?e/10**this.hypeChatDecimalPlaces:null}get hypeChatCurrency(){var e;return(e=this._tags.get("pinned-chat-paid-currency"))!==null&&e!==void 0?e:null}get hypeChatLevel(){const e=this._tags.get("pinned-chat-paid-level");return e?tst.indexOf(e)+1:null}get hypeChatIsSystemMessage(){const e=this._tags.get("pinned-chat-paid-is-system-message");return e?!!Number(e):null}};i2=ws([CM("chat","ChatMessage","id")],i2);function nst(n){return n instanceof i2?n.tags.get("id"):n}function OK(n,e){if(n.length<=e)return[n];n=n.trim();const t=[];let i=0,r=e;for(;i<n.length;){let s=n.lastIndexOf(" ",r);(s===-1||s<=i||n.length-i+1<=e)&&(s=i+e);const a=n.slice(i,s).trim();a.length&&t.push(a),i=s+(n[s]===" "?1:0),r=i+e}return t}const ist=/^[a-z0-9][a-z0-9_]{0,24}$/;function Io(n){const e=n.replace(/^#/,"").toLowerCase();if(!ist.test(e))throw new Error(`"${e}" is not a valid user or channel name. It must be at most 25 characters long, can only include letters, numbers and underscores, and can not start with an underscore.`);return e}function SO(n){return`#${Io(n)}`}var u6;let h6=u6=class extends wM{constructor(e={}){var t,i,r,s,a;if(e.authProvider&&!e.authProvider.getAccessTokenForIntent)throw new xI("You can not connect to chat using an AuthProvider that does not support intents.\nTo get an anonymous, read-only connection, please don't pass an `AuthProvider` at all.\nTo get a read-write connection, please provide an auth provider that provides user access tokens via intents, such as `RefreshingAuthProvider`.");super(),this._authVerified=!1,this._authRetryCount=0,this.onConnect=this.registerEvent(),this.onDisconnect=this.registerEvent(),this.onTimeout=this.registerEvent(),this.onBan=this.registerEvent(),this.onBitsBadgeUpgrade=this.registerEvent(),this.onChatClear=this.registerEvent(),this.onEmoteOnly=this.registerEvent(),this.onFollowersOnly=this.registerEvent(),this.onJoin=this.registerEvent(),this.onJoinFailure=this.registerEvent(),this.onPart=this.registerEvent(),this.onMessageRemove=this.registerEvent(),this.onUniqueChat=this.registerEvent(),this.onRaid=this.registerEvent(),this.onRaidCancel=this.registerEvent(),this.onRitual=this.registerEvent(),this.onSlow=this.registerEvent(),this.onSubsOnly=this.registerEvent(),this.onSub=this.registerEvent(),this.onResub=this.registerEvent(),this.onSubGift=this.registerEvent(),this.onCommunitySub=this.registerEvent(),this.onSubExtend=this.registerEvent(),this.onRewardGift=this.registerEvent(),this.onPrimePaidUpgrade=this.registerEvent(),this.onGiftPaidUpgrade=this.registerEvent(),this.onPrimeCommunityGift=this.registerEvent(),this.onStandardPayForward=this.registerEvent(),this.onCommunityPayForward=this.registerEvent(),this.onAnnouncement=this.registerEvent(),this.onWhisper=this.registerEvent(),this.onNoPermission=this.registerEvent(),this.onMessageRatelimit=this.registerEvent(),this.onAuthenticationSuccess=this.registerEvent(),this.onAuthenticationFailure=this.registerEvent(),this.onTokenFetchFailure=this.registerEvent(),this.onMessageFailed=this.registerEvent(),this.onMessage=this.registerEvent(),this.onAction=this.registerEvent(),this._onJoinResult=this.registerInternalEvent(),this._ircClient=new $de({connection:{hostName:(t=e.hostName)!==null&&t!==void 0?t:!((i=e.webSocket)!==null&&i!==void 0)||i?"irc-ws.chat.twitch.tv":"irc.chat.twitch.tv",secure:(r=e.ssl)!==null&&r!==void 0?r:!0},credentials:{nick:"",password:async()=>await this._getAuthToken()},webSocket:(s=e.webSocket)!==null&&s!==void 0?s:!0,connectionOptions:e.connectionOptions,logger:{name:"twurple:chat:irc",...e.logger},nonConformingCommands:["004"],manuallyAcknowledgeJoins:!0,rejoinChannelsOnReconnect:e.rejoinChannelsOnReconnect}),this._ircClient.onDisconnect((c,u)=>{this._messageRateLimiter.clear(),this._messageRateLimiter.pause(),this._joinRateLimiter.clear(),this._joinRateLimiter.pause(),this.emit(this.onDisconnect,c,u)}),this._ircClient.registerMessageType(i2),this._chatLogger=KU({name:"twurple:chat:twitch",...e.logger}),this._authProvider=e.authProvider,this._useLegacyScopes=!!e.legacyScopes,this._readOnly=!!e.readOnly,this._authIntents=[...(a=e.authIntents)!==null&&a!==void 0?a:[],"chat"];const o=async({type:c,text:u,channel:h,tags:d})=>{c==="say"?this._ircClient.say(h,u,d):this._ircClient.action(h,u)},l=async c=>{const{promise:u,resolve:h,reject:d}=r6();let f;const m=this.addInternalListener(this._onJoinResult,(v,_,y)=>{v===c&&(clearTimeout(f),y?d(y):h(),this.removeListener(m))});f=setTimeout(()=>{this.removeListener(m),this.emit(this._onJoinResult,c,void 0,"twurple_timeout"),d(new Error(`Did not receive a reply to join ${c} in time; assuming that the join failed`))},1e4),this._ircClient.join(c),await u};if(e.isAlwaysMod)this._messageRateLimiter=new s6({bucketSize:e.botLevel==="verified"?7500:100,timeFrame:32e3,doRequest:o});else{let c=20;e.botLevel==="verified"?c=7500:e.botLevel==="known"&&(c=50),this._messageRateLimiter=new Fit(new Bit({bucketSize:1,timeFrame:1200,logger:{minLevel:Xn.ERROR},doRequest:o,getPartitionKey:({channel:u})=>u}),{bucketSize:c,timeFrame:32e3})}this._joinRateLimiter=new s6({bucketSize:e.botLevel==="verified"?2e3:20,timeFrame:11e3,doRequest:l}),this._messageRateLimiter.pause(),this._joinRateLimiter.pause(),this._ircClient.addCapability(est),this._ircClient.addCapability(Jrt),e.requestMembershipEvents&&this._ircClient.addCapability(Qrt),this._ircClient.onConnect(()=>{this.emit(this.onConnect)}),this._ircClient.onRegister(async()=>{this._messageRateLimiter.resume(),this._joinRateLimiter.resume(),this._authVerified=!0,this._authRetryTimer=void 0,this._authRetryCount=0,this.emit(this.onAuthenticationSuccess);const c=await n6(e.channels);c&&await Promise.all(c.map(async u=>{var h;try{await this.join(u)}catch(d){this._chatLogger.warn(`Failed to join configured channel ${u}; original message: ${(h=d==null?void 0:d.message)!==null&&h!==void 0?h:d}`)}}))}),this._ircClient.onPasswordError(c=>{this._chatLogger.error(`Error fetching a token for connecting to the server: ${c.message}`),this.emit(this.onTokenFetchFailure,c)}),this._ircClient.onPrivmsg((c,u,h,d)=>{u!=="jtv"&&this.emit(this.onMessage,Io(c),u,h,d)}),this._ircClient.onAction((c,u,h,d)=>{this.emit(this.onAction,Io(c),u,h,d)}),this.addInternalListener(this._onJoinResult,(c,u,h)=>{h?this.emit(this.onJoinFailure,Io(c),h):this._ircClient.acknowledgeJoin(c)}),this._ircClient.onTypedMessage(ZV,c=>{const{channel:u,user:h,tags:d}=c,f=Io(u);if(h){const m=d.get("ban-duration");m===void 0?this.emit(this.onBan,f,h,c):this.emit(this.onTimeout,f,h,Number(m),c)}else this.emit(this.onChatClear,f,c)}),this._ircClient.onTypedMessage(nG,c=>{const{channel:u,targetMessageId:h}=c;this.emit(this.onMessageRemove,Io(u),h,c)}),this._ircClient.onTypedMessage(eA,({prefix:c,channel:u})=>{this.emit(this.onJoin,Io(u),c.nick)}),this._ircClient.onTypedMessage(tA,({prefix:c,channel:u})=>{this.emit(this.onPart,Io(u),c.nick)}),this._ircClient.onTypedMessage(JV,({channel:c,tags:u})=>{let h=!1;if(u.has("subs-only")&&u.has("slow")&&(this.emit(this._onJoinResult,c,u),h=!0),!h){const d=Io(c);if(u.has("slow")){const f=Number(u.get("slow"));f?this.emit(this.onSlow,d,!0,f):this.emit(this.onSlow,d,!1)}if(u.has("followers-only")){const f=Number(u.get("followers-only"));f===-1?this.emit(this.onFollowersOnly,d,!1):this.emit(this.onFollowersOnly,d,!0,f)}}}),this._ircClient.onTypedMessage(eG,c=>{const{channel:u,text:h,tags:d}=c,f=d.get("msg-id"),m=Io(u);switch(f){case"sub":case"resub":{const v=f==="sub"?this.onSub:this.onResub,_=d.get("msg-param-sub-plan"),y=d.get("msg-param-streak-months"),S={userId:d.get("user-id"),displayName:d.get("display-name"),plan:_,planName:d.get("msg-param-sub-plan-name"),isPrime:_==="Prime",months:Number(d.get("msg-param-cumulative-months")),streak:y?Number(y):void 0,message:h};if(d.get("msg-param-was-gifted")==="true"){const x=d.get("msg-param-anon-gift")==="true",I=Number(d.get("msg-param-gift-months")),R=Number(d.get("msg-param-gift-month-being-redeemed"));x?S.originalGiftInfo={anonymous:!0,duration:I,redeemedMonth:R}:S.originalGiftInfo={anonymous:!1,duration:I,redeemedMonth:R,userId:d.get("msg-param-gifter-id"),userName:d.get("msg-param-gifter-login"),userDisplayName:d.get("msg-param-gifter-name")}}this.emit(v,m,d.get("login"),S,c);break}case"subgift":{const v=d.get("msg-param-sub-plan"),_=d.get("login"),y=_==="ananonymousgifter",S={userId:d.get("msg-param-recipient-id"),displayName:d.get("msg-param-recipient-display-name"),gifter:y?void 0:_,gifterUserId:y?void 0:d.get("user-id"),gifterDisplayName:y?void 0:d.get("display-name"),gifterGiftCount:y?void 0:Number(d.get("msg-param-sender-count")),giftDuration:Number(d.get("msg-param-gift-months")),plan:v,planName:d.get("msg-param-sub-plan-name"),isPrime:v==="Prime",months:Number(d.get("msg-param-months"))};this.emit(this.onSubGift,m,d.get("msg-param-recipient-user-name"),S,c);break}case"submysterygift":{const v=d.get("login"),_=v==="ananonymousgifter",y={gifter:_?void 0:v,gifterUserId:_?void 0:d.get("user-id"),gifterDisplayName:_?void 0:d.get("display-name"),gifterGiftCount:_?void 0:Number(d.get("msg-param-sender-count")),count:Number(d.get("msg-param-mass-gift-count")),plan:d.get("msg-param-sub-plan")};this.emit(this.onCommunitySub,m,d.get("login"),y,c);break}case"primepaidupgrade":{const v={userId:d.get("user-id"),displayName:d.get("display-name"),plan:d.get("msg-param-sub-plan")};this.emit(this.onPrimePaidUpgrade,m,d.get("login"),v,c);break}case"giftpaidupgrade":{const v={userId:d.get("user-id"),displayName:d.get("display-name"),gifter:d.get("msg-param-sender-login"),gifterDisplayName:d.get("msg-param-sender-name")};this.emit(this.onGiftPaidUpgrade,m,d.get("login"),v,c);break}case"standardpayforward":{const v=d.get("msg-param-prior-gifter-anonymous")==="true",_={userId:d.get("user-id"),displayName:d.get("display-name"),originalGifterUserId:v?void 0:d.get("msg-param-prior-gifter-id"),originalGifterDisplayName:v?void 0:d.get("msg-param-prior-gifter-display-name"),recipientUserId:d.get("msg-param-recipient-id"),recipientDisplayName:d.get("msg-param-recipient-display-name")};this.emit(this.onStandardPayForward,m,d.get("login"),_,c);break}case"communitypayforward":{const v=d.get("msg-param-prior-gifter-anonymous")==="true",_={userId:d.get("user-id"),displayName:d.get("display-name"),originalGifterUserId:v?void 0:d.get("msg-param-prior-gifter-id"),originalGifterDisplayName:v?void 0:d.get("msg-param-prior-gifter-display-name")};this.emit(this.onCommunityPayForward,m,d.get("login"),_,c);break}case"primecommunitygiftreceived":{const v={name:d.get("msg-param-gift-name"),gifter:d.get("login"),gifterDisplayName:d.get("display-name")};this.emit(this.onPrimeCommunityGift,m,d.get("msg-param-recipient"),v,c);break}case"raid":{const v={displayName:d.get("msg-param-displayName"),viewerCount:Number(d.get("msg-param-viewerCount"))};this.emit(this.onRaid,m,d.get("login"),v,c);break}case"unraid":{this.emit(this.onRaidCancel,m,c);break}case"ritual":{const v={ritualName:d.get("msg-param-ritual-name"),message:h};this.emit(this.onRitual,m,d.get("login"),v,c);break}case"bitsbadgetier":{const v={displayName:d.get("display-name"),threshold:Number(d.get("msg-param-threshold"))};this.emit(this.onBitsBadgeUpgrade,m,d.get("login"),v,c);break}case"extendsub":{const v={userId:d.get("user-id"),displayName:d.get("display-name"),plan:d.get("msg-param-sub-plan"),months:Number(d.get("msg-param-cumulative-months")),endMonth:Number(d.get("msg-param-sub-benefit-end-month"))};this.emit(this.onSubExtend,m,d.get("login"),v,c);break}case"rewardgift":{const v={domain:d.get("msg-param-domain"),gifterId:d.get("user-id"),gifterDisplayName:d.get("display-name"),count:Number(d.get("msg-param-selected-count")),gifterGiftCount:Number(d.get("msg-param-total-reward-count")),triggerType:d.get("msg-param-trigger-type")};this.emit(this.onRewardGift,m,d.get("login"),v,c);break}case"announcement":{const v={color:d.get("msg-param-color")};this.emit(this.onAnnouncement,m,d.get("login"),v,c);break}default:this._chatLogger.warn(`Unrecognized usernotice ID: ${f}`)}}),this._ircClient.onTypedMessage(tG,c=>{this.emit(this.onWhisper,c.prefix.nick,c.text,c)}),this._ircClient.onTypedMessage(JU,async({target:c,text:u,tags:h})=>{const d=h.get("msg-id");switch(d){case"emote_only_on":{this.emit(this.onEmoteOnly,Io(c),!0);break}case"emote_only_off":{this.emit(this.onEmoteOnly,Io(c),!1);break}case"msg_channel_suspended":case"msg_banned":{this.emit(this._onJoinResult,c,void 0,d);break}case"r9k_on":{this.emit(this.onUniqueChat,Io(c),!0);break}case"r9k_off":{this.emit(this.onUniqueChat,Io(c),!1);break}case"subs_on":{this.emit(this.onSubsOnly,Io(c),!0);break}case"subs_off":{this.emit(this.onSubsOnly,Io(c),!1);break}case"cmds_available":break;case"followers_on":case"followers_on_zero":case"followers_off":case"slow_on":case"slow_off":break;case"timeout_success":break;case"unrecognized_cmd":break;case"no_permission":{this.emit(this.onNoPermission,Io(c),u);break}case"msg_ratelimit":{this.emit(this.onMessageRatelimit,Io(c),u);break}case"msg_duplicate":case"msg_emoteonly":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_subsonly":case"msg_slowmode":case"msg_r9k":case"msg_verified_email":case"msg_timedout":case"msg_rejected_mandatory":case"msg_channel_blocked":{this.emit(this.onMessageFailed,Io(c),d);break}case void 0:{if(u==="Login authentication failed"||u==="Improperly formatted AUTH"||u==="Invalid NICK"){this._authVerified=!1,this._authRetryTimer||(this._authRetryTimer=ohe(120),this._authRetryCount=0);const f=this._authRetryTimer.next().value,m=++this._authRetryCount;this.emit(this.onAuthenticationFailure,u,m),f!==0&&this._chatLogger.info(`Retrying authentication in ${f} seconds`),await Cit(f*1e3),this._ircClient.reconnect()}break}default:d.startsWith("usage_")||this._chatLogger.warn(`Unrecognized notice ID: '${d}'`)}})}connect(){this._authProvider||this._ircClient.changeNick(u6._generateJustinfanNick()),this._ircClient.connect()}get irc(){return this._ircClient}get isConnected(){return this._ircClient.isConnected}get isConnecting(){return this._ircClient.isConnecting}get currentChannels(){return this._ircClient.currentChannels}async say(e,t,i={},r){const s={};i.replyTo&&(s["reply-parent-msg-id"]=nst(i.replyTo));const a=OK(t,500);await Promise.all(a.map(async o=>await this._messageRateLimiter.request({type:"say",channel:SO(e),text:o,tags:s},r)))}async action(e,t,i){const r=OK(t,490);await Promise.all(r.map(async s=>await this._messageRateLimiter.request({type:"action",channel:SO(e),text:s},i)))}async join(e){await this._joinRateLimiter.request(SO(e))}part(e){this._ircClient.part(SO(e))}quit(){this._ircClient.quitAbruptly()}reconnect(){this.quit(),this.connect()}async _getAuthToken(){var e,t;if(!this._authProvider){this._chatLogger.debug("No authProvider given; connecting anonymously");return}if(this._authToken&&!TI(this._authToken)&&this._authVerified)return this._chatLogger.debug("AccessToken assumed to be correct from last connection"),`oauth:${this._authToken.accessToken}`;const i=this._getNecessaryScopes();let r,s=!1;for(const a of this._authIntents){try{if(this._authToken=await this._authProvider.getAccessTokenForIntent(a,i),!this._authToken)continue;s=!0;const o=await QC(this._authToken.accessToken);if(!o.userName)throw new xI("Could not determine a user name for your token; you might be trying to disguise an app token as a user token.");return this._ircClient.changeNick(o.userName),`oauth:${this._authToken.accessToken}`}catch(o){o instanceof dT?r=o:this._chatLogger.error(`Retrieving an access token failed: ${o.message}`)}this._chatLogger.warn("No valid token available; trying to refresh");try{if(this._authToken=await((t=(e=this._authProvider).refreshAccessTokenForIntent)===null||t===void 0?void 0:t.call(e,a)),this._authToken){const o=await QC(this._authToken.accessToken);if(!o.userName)throw new xI("Could not determine a user name for your token; you might be trying to disguise an app token as a user token.");return this._ircClient.changeNick(o.userName),`oauth:${this._authToken.accessToken}`}}catch(o){o instanceof dT?r=o:this._chatLogger.error(`Refreshing the access token failed: ${o.message}`)}}throw this._authVerified=!1,r??new Error(s?"Could not retrieve a valid token":`None of the queried intents (${this._authIntents.join(", ")}) are known by the auth provider${this._authProvider instanceof Qy?".\nPlease add one of these to the user you want to connect with using the `addIntentToUser` method or the additional parameter to `addUser` or `addUserForToken`.":""}`)}_getNecessaryScopes(){return this._useLegacyScopes?["chat_login"]:this._readOnly?["chat:read"]:["chat:read","chat:edit"]}static _generateJustinfanNick(){return`justinfan${Math.floor(Math.random()*1e5).toString().padStart(5,"0")}`}};ws([_0(!1)],h6.prototype,"_authProvider",void 0);h6=u6=ws([CM("chat","ChatClient")],h6);var Jde={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(self,()=>(()=>{var t={9669:(a,o,l)=>{a.exports=l(1609)},5448:(a,o,l)=>{var c=l(4867),u=l(6026),h=l(4372),d=l(5327),f=l(4097),m=l(4109),v=l(7985),_=l(7874),y=l(2648),S=l(644),T=l(205);a.exports=function(x){return new Promise(function(I,R){var N,L=x.data,k=x.headers,z=x.responseType;function Z(){x.cancelToken&&x.cancelToken.unsubscribe(N),x.signal&&x.signal.removeEventListener("abort",N)}c.isFormData(L)&&c.isStandardBrowserEnv()&&delete k["Content-Type"];var H=new XMLHttpRequest;if(x.auth){var q=x.auth.username||"",U=x.auth.password?unescape(encodeURIComponent(x.auth.password)):"";k.Authorization="Basic "+btoa(q+":"+U)}var ee=f(x.baseURL,x.url);function W(){if(H){var Y="getAllResponseHeaders"in H?m(H.getAllResponseHeaders()):null,ae={data:z&&z!=="text"&&z!=="json"?H.response:H.responseText,status:H.status,statusText:H.statusText,headers:Y,config:x,request:H};u(function(se){I(se),Z()},function(se){R(se),Z()},ae),H=null}}if(H.open(x.method.toUpperCase(),d(ee,x.params,x.paramsSerializer),!0),H.timeout=x.timeout,"onloadend"in H?H.onloadend=W:H.onreadystatechange=function(){H&&H.readyState===4&&(H.status!==0||H.responseURL&&H.responseURL.indexOf("file:")===0)&&setTimeout(W)},H.onabort=function(){H&&(R(new y("Request aborted",y.ECONNABORTED,x,H)),H=null)},H.onerror=function(){R(new y("Network Error",y.ERR_NETWORK,x,H,H)),H=null},H.ontimeout=function(){var Y=x.timeout?"timeout of "+x.timeout+"ms exceeded":"timeout exceeded",ae=x.transitional||_;x.timeoutErrorMessage&&(Y=x.timeoutErrorMessage),R(new y(Y,ae.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,x,H)),H=null},c.isStandardBrowserEnv()){var Q=(x.withCredentials||v(ee))&&x.xsrfCookieName?h.read(x.xsrfCookieName):void 0;Q&&(k[x.xsrfHeaderName]=Q)}"setRequestHeader"in H&&c.forEach(k,function(Y,ae){L===void 0&&ae.toLowerCase()==="content-type"?delete k[ae]:H.setRequestHeader(ae,Y)}),c.isUndefined(x.withCredentials)||(H.withCredentials=!!x.withCredentials),z&&z!=="json"&&(H.responseType=x.responseType),typeof x.onDownloadProgress=="function"&&H.addEventListener("progress",x.onDownloadProgress),typeof x.onUploadProgress=="function"&&H.upload&&H.upload.addEventListener("progress",x.onUploadProgress),(x.cancelToken||x.signal)&&(N=function(Y){H&&(R(!Y||Y&&Y.type?new S:Y),H.abort(),H=null)},x.cancelToken&&x.cancelToken.subscribe(N),x.signal&&(x.signal.aborted?N():x.signal.addEventListener("abort",N))),L||(L=null);var X=T(ee);X&&["http","https","file"].indexOf(X)===-1?R(new y("Unsupported protocol "+X+":",y.ERR_BAD_REQUEST,x)):H.send(L)})}},1609:(a,o,l)=>{var c=l(4867),u=l(1849),h=l(321),d=l(7185),f=function m(v){var _=new h(v),y=u(h.prototype.request,_);return c.extend(y,h.prototype,_),c.extend(y,_),y.create=function(S){return m(d(v,S))},y}(l(5546));f.Axios=h,f.CanceledError=l(644),f.CancelToken=l(4972),f.isCancel=l(6502),f.VERSION=l(7288).version,f.toFormData=l(7675),f.AxiosError=l(2648),f.Cancel=f.CanceledError,f.all=function(m){return Promise.all(m)},f.spread=l(8713),f.isAxiosError=l(6268),a.exports=f,a.exports.default=f},4972:(a,o,l)=>{var c=l(644);function u(h){if(typeof h!="function")throw new TypeError("executor must be a function.");var d;this.promise=new Promise(function(m){d=m});var f=this;this.promise.then(function(m){if(f._listeners){var v,_=f._listeners.length;for(v=0;v<_;v++)f._listeners[v](m);f._listeners=null}}),this.promise.then=function(m){var v,_=new Promise(function(y){f.subscribe(y),v=y}).then(m);return _.cancel=function(){f.unsubscribe(v)},_},h(function(m){f.reason||(f.reason=new c(m),d(f.reason))})}u.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},u.prototype.subscribe=function(h){this.reason?h(this.reason):this._listeners?this._listeners.push(h):this._listeners=[h]},u.prototype.unsubscribe=function(h){if(this._listeners){var d=this._listeners.indexOf(h);d!==-1&&this._listeners.splice(d,1)}},u.source=function(){var h;return{token:new u(function(d){h=d}),cancel:h}},a.exports=u},644:(a,o,l)=>{var c=l(2648);function u(h){c.call(this,h??"canceled",c.ERR_CANCELED),this.name="CanceledError"}l(4867).inherits(u,c,{__CANCEL__:!0}),a.exports=u},6502:a=>{a.exports=function(o){return!(!o||!o.__CANCEL__)}},321:(a,o,l)=>{var c=l(4867),u=l(5327),h=l(782),d=l(3572),f=l(7185),m=l(4097),v=l(4875),_=v.validators;function y(S){this.defaults=S,this.interceptors={request:new h,response:new h}}y.prototype.request=function(S,T){typeof S=="string"?(T=T||{}).url=S:T=S||{},(T=f(this.defaults,T)).method?T.method=T.method.toLowerCase():this.defaults.method?T.method=this.defaults.method.toLowerCase():T.method="get";var x=T.transitional;x!==void 0&&v.assertOptions(x,{silentJSONParsing:_.transitional(_.boolean),forcedJSONParsing:_.transitional(_.boolean),clarifyTimeoutError:_.transitional(_.boolean)},!1);var I=[],R=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(T)===!1||(R=R&&q.synchronous,I.unshift(q.fulfilled,q.rejected))});var N,L=[];if(this.interceptors.response.forEach(function(q){L.push(q.fulfilled,q.rejected)}),!R){var k=[d,void 0];for(Array.prototype.unshift.apply(k,I),k=k.concat(L),N=Promise.resolve(T);k.length;)N=N.then(k.shift(),k.shift());return N}for(var z=T;I.length;){var Z=I.shift(),H=I.shift();try{z=Z(z)}catch(q){H(q);break}}try{N=d(z)}catch(q){return Promise.reject(q)}for(;L.length;)N=N.then(L.shift(),L.shift());return N},y.prototype.getUri=function(S){S=f(this.defaults,S);var T=m(S.baseURL,S.url);return u(T,S.params,S.paramsSerializer)},c.forEach(["delete","get","head","options"],function(S){y.prototype[S]=function(T,x){return this.request(f(x||{},{method:S,url:T,data:(x||{}).data}))}}),c.forEach(["post","put","patch"],function(S){function T(x){return function(I,R,N){return this.request(f(N||{},{method:S,headers:x?{"Content-Type":"multipart/form-data"}:{},url:I,data:R}))}}y.prototype[S]=T(),y.prototype[S+"Form"]=T(!0)}),a.exports=y},2648:(a,o,l)=>{var c=l(4867);function u(f,m,v,_,y){Error.call(this),this.message=f,this.name="AxiosError",m&&(this.code=m),v&&(this.config=v),_&&(this.request=_),y&&(this.response=y)}c.inherits(u,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var h=u.prototype,d={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(f){d[f]={value:f}}),Object.defineProperties(u,d),Object.defineProperty(h,"isAxiosError",{value:!0}),u.from=function(f,m,v,_,y,S){var T=Object.create(h);return c.toFlatObject(f,T,function(x){return x!==Error.prototype}),u.call(T,f.message,m,v,_,y),T.name=f.name,S&&Object.assign(T,S),T},a.exports=u},782:(a,o,l)=>{var c=l(4867);function u(){this.handlers=[]}u.prototype.use=function(h,d,f){return this.handlers.push({fulfilled:h,rejected:d,synchronous:!!f&&f.synchronous,runWhen:f?f.runWhen:null}),this.handlers.length-1},u.prototype.eject=function(h){this.handlers[h]&&(this.handlers[h]=null)},u.prototype.forEach=function(h){c.forEach(this.handlers,function(d){d!==null&&h(d)})},a.exports=u},4097:(a,o,l)=>{var c=l(1793),u=l(7303);a.exports=function(h,d){return h&&!c(d)?u(h,d):d}},3572:(a,o,l)=>{var c=l(4867),u=l(8527),h=l(6502),d=l(5546),f=l(644);function m(v){if(v.cancelToken&&v.cancelToken.throwIfRequested(),v.signal&&v.signal.aborted)throw new f}a.exports=function(v){return m(v),v.headers=v.headers||{},v.data=u.call(v,v.data,v.headers,v.transformRequest),v.headers=c.merge(v.headers.common||{},v.headers[v.method]||{},v.headers),c.forEach(["delete","get","head","post","put","patch","common"],function(_){delete v.headers[_]}),(v.adapter||d.adapter)(v).then(function(_){return m(v),_.data=u.call(v,_.data,_.headers,v.transformResponse),_},function(_){return h(_)||(m(v),_&&_.response&&(_.response.data=u.call(v,_.response.data,_.response.headers,v.transformResponse))),Promise.reject(_)})}},7185:(a,o,l)=>{var c=l(4867);a.exports=function(u,h){h=h||{};var d={};function f(T,x){return c.isPlainObject(T)&&c.isPlainObject(x)?c.merge(T,x):c.isPlainObject(x)?c.merge({},x):c.isArray(x)?x.slice():x}function m(T){return c.isUndefined(h[T])?c.isUndefined(u[T])?void 0:f(void 0,u[T]):f(u[T],h[T])}function v(T){if(!c.isUndefined(h[T]))return f(void 0,h[T])}function _(T){return c.isUndefined(h[T])?c.isUndefined(u[T])?void 0:f(void 0,u[T]):f(void 0,h[T])}function y(T){return T in h?f(u[T],h[T]):T in u?f(void 0,u[T]):void 0}var S={url:v,method:v,data:v,baseURL:_,transformRequest:_,transformResponse:_,paramsSerializer:_,timeout:_,timeoutMessage:_,withCredentials:_,adapter:_,responseType:_,xsrfCookieName:_,xsrfHeaderName:_,onUploadProgress:_,onDownloadProgress:_,decompress:_,maxContentLength:_,maxBodyLength:_,beforeRedirect:_,transport:_,httpAgent:_,httpsAgent:_,cancelToken:_,socketPath:_,responseEncoding:_,validateStatus:y};return c.forEach(Object.keys(u).concat(Object.keys(h)),function(T){var x=S[T]||m,I=x(T);c.isUndefined(I)&&x!==y||(d[T]=I)}),d}},6026:(a,o,l)=>{var c=l(2648);a.exports=function(u,h,d){var f=d.config.validateStatus;d.status&&f&&!f(d.status)?h(new c("Request failed with status code "+d.status,[c.ERR_BAD_REQUEST,c.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d)):u(d)}},8527:(a,o,l)=>{var c=l(4867),u=l(5546);a.exports=function(h,d,f){var m=this||u;return c.forEach(f,function(v){h=v.call(m,h,d)}),h}},5546:(a,o,l)=>{var c=l(4867),u=l(6016),h=l(2648),d=l(7874),f=l(7675),m={"Content-Type":"application/x-www-form-urlencoded"};function v(S,T){!c.isUndefined(S)&&c.isUndefined(S["Content-Type"])&&(S["Content-Type"]=T)}var _,y={transitional:d,adapter:((typeof XMLHttpRequest<"u"||typeof ss<"u"&&Object.prototype.toString.call(ss)==="[object process]")&&(_=l(5448)),_),transformRequest:[function(S,T){if(u(T,"Accept"),u(T,"Content-Type"),c.isFormData(S)||c.isArrayBuffer(S)||c.isBuffer(S)||c.isStream(S)||c.isFile(S)||c.isBlob(S))return S;if(c.isArrayBufferView(S))return S.buffer;if(c.isURLSearchParams(S))return v(T,"application/x-www-form-urlencoded;charset=utf-8"),S.toString();var x,I=c.isObject(S),R=T&&T["Content-Type"];if((x=c.isFileList(S))||I&&R==="multipart/form-data"){var N=this.env&&this.env.FormData;return f(x?{"files[]":S}:S,N&&new N)}return I||R==="application/json"?(v(T,"application/json"),function(L,k,z){if(c.isString(L))try{return(k||JSON.parse)(L),c.trim(L)}catch(Z){if(Z.name!=="SyntaxError")throw Z}return(0,JSON.stringify)(L)}(S)):S}],transformResponse:[function(S){var T=this.transitional||y.transitional,x=T&&T.silentJSONParsing,I=T&&T.forcedJSONParsing,R=!x&&this.responseType==="json";if(R||I&&c.isString(S)&&S.length)try{return JSON.parse(S)}catch(N){if(R)throw N.name==="SyntaxError"?h.from(N,h.ERR_BAD_RESPONSE,this,null,this.response):N}return S}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:l(1623)},validateStatus:function(S){return S>=200&&S<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};c.forEach(["delete","get","head"],function(S){y.headers[S]={}}),c.forEach(["post","put","patch"],function(S){y.headers[S]=c.merge(m)}),a.exports=y},7874:a=>{a.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:a=>{a.exports={version:"0.27.2"}},1849:a=>{a.exports=function(o,l){return function(){for(var c=new Array(arguments.length),u=0;u<c.length;u++)c[u]=arguments[u];return o.apply(l,c)}}},5327:(a,o,l)=>{var c=l(4867);function u(h){return encodeURIComponent(h).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}a.exports=function(h,d,f){if(!d)return h;var m;if(f)m=f(d);else if(c.isURLSearchParams(d))m=d.toString();else{var v=[];c.forEach(d,function(y,S){y!=null&&(c.isArray(y)?S+="[]":y=[y],c.forEach(y,function(T){c.isDate(T)?T=T.toISOString():c.isObject(T)&&(T=JSON.stringify(T)),v.push(u(S)+"="+u(T))}))}),m=v.join("&")}if(m){var _=h.indexOf("#");_!==-1&&(h=h.slice(0,_)),h+=(h.indexOf("?")===-1?"?":"&")+m}return h}},7303:a=>{a.exports=function(o,l){return l?o.replace(/\/+$/,"")+"/"+l.replace(/^\/+/,""):o}},4372:(a,o,l)=>{var c=l(4867);a.exports=c.isStandardBrowserEnv()?{write:function(u,h,d,f,m,v){var _=[];_.push(u+"="+encodeURIComponent(h)),c.isNumber(d)&&_.push("expires="+new Date(d).toGMTString()),c.isString(f)&&_.push("path="+f),c.isString(m)&&_.push("domain="+m),v===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(u){var h=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return h?decodeURIComponent(h[3]):null},remove:function(u){this.write(u,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:a=>{a.exports=function(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}},6268:(a,o,l)=>{var c=l(4867);a.exports=function(u){return c.isObject(u)&&u.isAxiosError===!0}},7985:(a,o,l)=>{var c=l(4867);a.exports=c.isStandardBrowserEnv()?function(){var u,h=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a");function f(m){var v=m;return h&&(d.setAttribute("href",v),v=d.href),d.setAttribute("href",v),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return u=f(window.location.href),function(m){var v=c.isString(m)?f(m):m;return v.protocol===u.protocol&&v.host===u.host}}():function(){return!0}},6016:(a,o,l)=>{var c=l(4867);a.exports=function(u,h){c.forEach(u,function(d,f){f!==h&&f.toUpperCase()===h.toUpperCase()&&(u[h]=d,delete u[f])})}},1623:a=>{a.exports=null},4109:(a,o,l)=>{var c=l(4867),u=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];a.exports=function(h){var d,f,m,v={};return h&&c.forEach(h.split(`
`),function(_){if(m=_.indexOf(":"),d=c.trim(_.substr(0,m)).toLowerCase(),f=c.trim(_.substr(m+1)),d){if(v[d]&&u.indexOf(d)>=0)return;v[d]=d==="set-cookie"?(v[d]?v[d]:[]).concat([f]):v[d]?v[d]+", "+f:f}}),v}},205:a=>{a.exports=function(o){var l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return l&&l[1]||""}},8713:a=>{a.exports=function(o){return function(l){return o.apply(null,l)}}},7675:(a,o,l)=>{var c=l(4867);a.exports=function(u,h){h=h||new FormData;var d=[];function f(m){return m===null?"":c.isDate(m)?m.toISOString():c.isArrayBuffer(m)||c.isTypedArray(m)?typeof Blob=="function"?new Blob([m]):rl.from(m):m}return function m(v,_){if(c.isPlainObject(v)||c.isArray(v)){if(d.indexOf(v)!==-1)throw Error("Circular reference detected in "+_);d.push(v),c.forEach(v,function(y,S){if(!c.isUndefined(y)){var T,x=_?_+"."+S:S;if(y&&!_&&typeof y=="object"){if(c.endsWith(S,"{}"))y=JSON.stringify(y);else if(c.endsWith(S,"[]")&&(T=c.toArray(y)))return void T.forEach(function(I){!c.isUndefined(I)&&h.append(x,f(I))})}m(y,x)}}),d.pop()}else h.append(_,f(v))}(u),h}},4875:(a,o,l)=>{var c=l(7288).version,u=l(2648),h={};["object","boolean","number","function","string","symbol"].forEach(function(f,m){h[f]=function(v){return typeof v===f||"a"+(m<1?"n ":" ")+f}});var d={};h.transitional=function(f,m,v){function _(y,S){return"[Axios v"+c+"] Transitional option '"+y+"'"+S+(v?". "+v:"")}return function(y,S,T){if(f===!1)throw new u(_(S," has been removed"+(m?" in "+m:"")),u.ERR_DEPRECATED);return m&&!d[S]&&(d[S]=!0,console.warn(_(S," has been deprecated since v"+m+" and will be removed in the near future"))),!f||f(y,S,T)}},a.exports={assertOptions:function(f,m,v){if(typeof f!="object")throw new u("options must be an object",u.ERR_BAD_OPTION_VALUE);for(var _=Object.keys(f),y=_.length;y-- >0;){var S=_[y],T=m[S];if(T){var x=f[S],I=x===void 0||T(x,S,f);if(I!==!0)throw new u("option "+S+" must be "+I,u.ERR_BAD_OPTION_VALUE)}else if(v!==!0)throw new u("Unknown option "+S,u.ERR_BAD_OPTION)}},validators:h}},4867:(a,o,l)=>{var c,u=l(1849),h=Object.prototype.toString,d=(c=Object.create(null),function(H){var q=h.call(H);return c[q]||(c[q]=q.slice(8,-1).toLowerCase())});function f(H){return H=H.toLowerCase(),function(q){return d(q)===H}}function m(H){return Array.isArray(H)}function v(H){return H===void 0}var _=f("ArrayBuffer");function y(H){return H!==null&&typeof H=="object"}function S(H){if(d(H)!=="object")return!1;var q=Object.getPrototypeOf(H);return q===null||q===Object.prototype}var T=f("Date"),x=f("File"),I=f("Blob"),R=f("FileList");function N(H){return h.call(H)==="[object Function]"}var L=f("URLSearchParams");function k(H,q){if(H!=null)if(typeof H!="object"&&(H=[H]),m(H))for(var U=0,ee=H.length;U<ee;U++)q.call(null,H[U],U,H);else for(var W in H)Object.prototype.hasOwnProperty.call(H,W)&&q.call(null,H[W],W,H)}var z,Z=(z=typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array),function(H){return z&&H instanceof z});a.exports={isArray:m,isArrayBuffer:_,isBuffer:function(H){return H!==null&&!v(H)&&H.constructor!==null&&!v(H.constructor)&&typeof H.constructor.isBuffer=="function"&&H.constructor.isBuffer(H)},isFormData:function(H){var q="[object FormData]";return H&&(typeof FormData=="function"&&H instanceof FormData||h.call(H)===q||N(H.toString)&&H.toString()===q)},isArrayBufferView:function(H){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(H):H&&H.buffer&&_(H.buffer)},isString:function(H){return typeof H=="string"},isNumber:function(H){return typeof H=="number"},isObject:y,isPlainObject:S,isUndefined:v,isDate:T,isFile:x,isBlob:I,isFunction:N,isStream:function(H){return y(H)&&N(H.pipe)},isURLSearchParams:L,isStandardBrowserEnv:function(){return(typeof navigator>"u"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window<"u"&&typeof document<"u"},forEach:k,merge:function H(){var q={};function U(Q,X){S(q[X])&&S(Q)?q[X]=H(q[X],Q):S(Q)?q[X]=H({},Q):m(Q)?q[X]=Q.slice():q[X]=Q}for(var ee=0,W=arguments.length;ee<W;ee++)k(arguments[ee],U);return q},extend:function(H,q,U){return k(q,function(ee,W){H[W]=U&&typeof ee=="function"?u(ee,U):ee}),H},trim:function(H){return H.trim?H.trim():H.replace(/^\s+|\s+$/g,"")},stripBOM:function(H){return H.charCodeAt(0)===65279&&(H=H.slice(1)),H},inherits:function(H,q,U,ee){H.prototype=Object.create(q.prototype,ee),H.prototype.constructor=H,U&&Object.assign(H.prototype,U)},toFlatObject:function(H,q,U){var ee,W,Q,X={};q=q||{};do{for(W=(ee=Object.getOwnPropertyNames(H)).length;W-- >0;)X[Q=ee[W]]||(q[Q]=H[Q],X[Q]=!0);H=Object.getPrototypeOf(H)}while(H&&(!U||U(H,q))&&H!==Object.prototype);return q},kindOf:d,kindOfTest:f,endsWith:function(H,q,U){H=String(H),(U===void 0||U>H.length)&&(U=H.length),U-=q.length;var ee=H.indexOf(q,U);return ee!==-1&&ee===U},toArray:function(H){if(!H)return null;var q=H.length;if(v(q))return null;for(var U=new Array(q);q-- >0;)U[q]=H[q];return U},isTypedArray:Z,isFileList:R}},1206:function(a){a.exports=function(o){var l={};function c(u){if(l[u])return l[u].exports;var h=l[u]={i:u,l:!1,exports:{}};return o[u].call(h.exports,h,h.exports,c),h.l=!0,h.exports}return c.m=o,c.c=l,c.d=function(u,h,d){c.o(u,h)||Object.defineProperty(u,h,{enumerable:!0,get:d})},c.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},c.t=function(u,h){if(1&h&&(u=c(u)),8&h||4&h&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),2&h&&typeof u!="string")for(var f in u)c.d(d,f,(function(m){return u[m]}).bind(null,f));return d},c.n=function(u){var h=u&&u.__esModule?function(){return u.default}:function(){return u};return c.d(h,"a",h),h},c.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},c.p="",c(c.s=90)}({17:function(o,l,c){l.__esModule=!0,l.default=void 0;var u=c(18),h=function(){function d(){}return d.getFirstMatch=function(f,m){var v=m.match(f);return v&&v.length>0&&v[1]||""},d.getSecondMatch=function(f,m){var v=m.match(f);return v&&v.length>1&&v[2]||""},d.matchAndReturnConst=function(f,m,v){if(f.test(m))return v},d.getWindowsVersionName=function(f){switch(f){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},d.getMacOSVersionName=function(f){var m=f.split(".").splice(0,2).map(function(v){return parseInt(v,10)||0});if(m.push(0),m[0]===10)switch(m[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},d.getAndroidVersionName=function(f){var m=f.split(".").splice(0,2).map(function(v){return parseInt(v,10)||0});if(m.push(0),!(m[0]===1&&m[1]<5))return m[0]===1&&m[1]<6?"Cupcake":m[0]===1&&m[1]>=6?"Donut":m[0]===2&&m[1]<2?"Eclair":m[0]===2&&m[1]===2?"Froyo":m[0]===2&&m[1]>2?"Gingerbread":m[0]===3?"Honeycomb":m[0]===4&&m[1]<1?"Ice Cream Sandwich":m[0]===4&&m[1]<4?"Jelly Bean":m[0]===4&&m[1]>=4?"KitKat":m[0]===5?"Lollipop":m[0]===6?"Marshmallow":m[0]===7?"Nougat":m[0]===8?"Oreo":m[0]===9?"Pie":void 0},d.getVersionPrecision=function(f){return f.split(".").length},d.compareVersions=function(f,m,v){v===void 0&&(v=!1);var _=d.getVersionPrecision(f),y=d.getVersionPrecision(m),S=Math.max(_,y),T=0,x=d.map([f,m],function(I){var R=S-d.getVersionPrecision(I),N=I+new Array(R+1).join(".0");return d.map(N.split("."),function(L){return new Array(20-L.length).join("0")+L}).reverse()});for(v&&(T=S-Math.min(_,y)),S-=1;S>=T;){if(x[0][S]>x[1][S])return 1;if(x[0][S]===x[1][S]){if(S===T)return 0;S-=1}else if(x[0][S]<x[1][S])return-1}},d.map=function(f,m){var v,_=[];if(Array.prototype.map)return Array.prototype.map.call(f,m);for(v=0;v<f.length;v+=1)_.push(m(f[v]));return _},d.find=function(f,m){var v,_;if(Array.prototype.find)return Array.prototype.find.call(f,m);for(v=0,_=f.length;v<_;v+=1){var y=f[v];if(m(y,v))return y}},d.assign=function(f){for(var m,v,_=f,y=arguments.length,S=new Array(y>1?y-1:0),T=1;T<y;T++)S[T-1]=arguments[T];if(Object.assign)return Object.assign.apply(Object,[f].concat(S));var x=function(){var I=S[m];typeof I=="object"&&I!==null&&Object.keys(I).forEach(function(R){_[R]=I[R]})};for(m=0,v=S.length;m<v;m+=1)x();return f},d.getBrowserAlias=function(f){return u.BROWSER_ALIASES_MAP[f]},d.getBrowserTypeByAlias=function(f){return u.BROWSER_MAP[f]||""},d}();l.default=h,o.exports=l.default},18:function(o,l,c){l.__esModule=!0,l.ENGINE_MAP=l.OS_MAP=l.PLATFORMS_MAP=l.BROWSER_MAP=l.BROWSER_ALIASES_MAP=void 0,l.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},l.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},l.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},l.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},l.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(o,l,c){l.__esModule=!0,l.default=void 0;var u,h=(u=c(91))&&u.__esModule?u:{default:u},d=c(18);function f(v,_){for(var y=0;y<_.length;y++){var S=_[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}var m=function(){function v(){}var _,y,S;return v.getParser=function(T,x){if(x===void 0&&(x=!1),typeof T!="string")throw new Error("UserAgent should be a string");return new h.default(T,x)},v.parse=function(T){return new h.default(T).getResult()},_=v,S=[{key:"BROWSER_MAP",get:function(){return d.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return d.ENGINE_MAP}},{key:"OS_MAP",get:function(){return d.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return d.PLATFORMS_MAP}}],(y=null)&&f(_.prototype,y),S&&f(_,S),v}();l.default=m,o.exports=l.default},91:function(o,l,c){l.__esModule=!0,l.default=void 0;var u=v(c(92)),h=v(c(93)),d=v(c(94)),f=v(c(95)),m=v(c(17));function v(y){return y&&y.__esModule?y:{default:y}}var _=function(){function y(T,x){if(x===void 0&&(x=!1),T==null||T==="")throw new Error("UserAgent parameter can't be empty");this._ua=T,this.parsedResult={},x!==!0&&this.parse()}var S=y.prototype;return S.getUA=function(){return this._ua},S.test=function(T){return T.test(this._ua)},S.parseBrowser=function(){var T=this;this.parsedResult.browser={};var x=m.default.find(u.default,function(I){if(typeof I.test=="function")return I.test(T);if(I.test instanceof Array)return I.test.some(function(R){return T.test(R)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},S.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},S.getBrowserName=function(T){return T?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},S.getBrowserVersion=function(){return this.getBrowser().version},S.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},S.parseOS=function(){var T=this;this.parsedResult.os={};var x=m.default.find(h.default,function(I){if(typeof I.test=="function")return I.test(T);if(I.test instanceof Array)return I.test.some(function(R){return T.test(R)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},S.getOSName=function(T){var x=this.getOS().name;return T?String(x).toLowerCase()||"":x||""},S.getOSVersion=function(){return this.getOS().version},S.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},S.getPlatformType=function(T){T===void 0&&(T=!1);var x=this.getPlatform().type;return T?String(x).toLowerCase()||"":x||""},S.parsePlatform=function(){var T=this;this.parsedResult.platform={};var x=m.default.find(d.default,function(I){if(typeof I.test=="function")return I.test(T);if(I.test instanceof Array)return I.test.some(function(R){return T.test(R)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},S.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},S.getEngineName=function(T){return T?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},S.parseEngine=function(){var T=this;this.parsedResult.engine={};var x=m.default.find(f.default,function(I){if(typeof I.test=="function")return I.test(T);if(I.test instanceof Array)return I.test.some(function(R){return T.test(R)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},S.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},S.getResult=function(){return m.default.assign({},this.parsedResult)},S.satisfies=function(T){var x=this,I={},R=0,N={},L=0;if(Object.keys(T).forEach(function(W){var Q=T[W];typeof Q=="string"?(N[W]=Q,L+=1):typeof Q=="object"&&(I[W]=Q,R+=1)}),R>0){var k=Object.keys(I),z=m.default.find(k,function(W){return x.isOS(W)});if(z){var Z=this.satisfies(I[z]);if(Z!==void 0)return Z}var H=m.default.find(k,function(W){return x.isPlatform(W)});if(H){var q=this.satisfies(I[H]);if(q!==void 0)return q}}if(L>0){var U=Object.keys(N),ee=m.default.find(U,function(W){return x.isBrowser(W,!0)});if(ee!==void 0)return this.compareVersion(N[ee])}},S.isBrowser=function(T,x){x===void 0&&(x=!1);var I=this.getBrowserName().toLowerCase(),R=T.toLowerCase(),N=m.default.getBrowserTypeByAlias(R);return x&&N&&(R=N.toLowerCase()),R===I},S.compareVersion=function(T){var x=[0],I=T,R=!1,N=this.getBrowserVersion();if(typeof N=="string")return T[0]===">"||T[0]==="<"?(I=T.substr(1),T[1]==="="?(R=!0,I=T.substr(2)):x=[],T[0]===">"?x.push(1):x.push(-1)):T[0]==="="?I=T.substr(1):T[0]==="~"&&(R=!0,I=T.substr(1)),x.indexOf(m.default.compareVersions(N,I,R))>-1},S.isOS=function(T){return this.getOSName(!0)===String(T).toLowerCase()},S.isPlatform=function(T){return this.getPlatformType(!0)===String(T).toLowerCase()},S.isEngine=function(T){return this.getEngineName(!0)===String(T).toLowerCase()},S.is=function(T,x){return x===void 0&&(x=!1),this.isBrowser(T,x)||this.isOS(T)||this.isPlatform(T)},S.some=function(T){var x=this;return T===void 0&&(T=[]),T.some(function(I){return x.is(I)})},y}();l.default=_,o.exports=l.default},92:function(o,l,c){l.__esModule=!0,l.default=void 0;var u,h=(u=c(17))&&u.__esModule?u:{default:u},d=/version\/(\d+(\.?_?\d+)+)/i,f=[{test:[/googlebot/i],describe:function(m){var v={name:"Googlebot"},_=h.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/opera/i],describe:function(m){var v={name:"Opera"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/opr\/|opios/i],describe:function(m){var v={name:"Opera"},_=h.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/SamsungBrowser/i],describe:function(m){var v={name:"Samsung Internet for Android"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/Whale/i],describe:function(m){var v={name:"NAVER Whale Browser"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/MZBrowser/i],describe:function(m){var v={name:"MZ Browser"},_=h.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/focus/i],describe:function(m){var v={name:"Focus"},_=h.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/swing/i],describe:function(m){var v={name:"Swing"},_=h.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/coast/i],describe:function(m){var v={name:"Opera Coast"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(m){var v={name:"Opera Touch"},_=h.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/yabrowser/i],describe:function(m){var v={name:"Yandex Browser"},_=h.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/ucbrowser/i],describe:function(m){var v={name:"UC Browser"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/Maxthon|mxios/i],describe:function(m){var v={name:"Maxthon"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/epiphany/i],describe:function(m){var v={name:"Epiphany"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/puffin/i],describe:function(m){var v={name:"Puffin"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/sleipnir/i],describe:function(m){var v={name:"Sleipnir"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/k-meleon/i],describe:function(m){var v={name:"K-Meleon"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/micromessenger/i],describe:function(m){var v={name:"WeChat"},_=h.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/qqbrowser/i],describe:function(m){var v={name:/qqbrowserlite/i.test(m)?"QQ Browser Lite":"QQ Browser"},_=h.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/msie|trident/i],describe:function(m){var v={name:"Internet Explorer"},_=h.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/\sedg\//i],describe:function(m){var v={name:"Microsoft Edge"},_=h.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/edg([ea]|ios)/i],describe:function(m){var v={name:"Microsoft Edge"},_=h.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/vivaldi/i],describe:function(m){var v={name:"Vivaldi"},_=h.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/seamonkey/i],describe:function(m){var v={name:"SeaMonkey"},_=h.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/sailfish/i],describe:function(m){var v={name:"Sailfish"},_=h.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,m);return _&&(v.version=_),v}},{test:[/silk/i],describe:function(m){var v={name:"Amazon Silk"},_=h.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/phantom/i],describe:function(m){var v={name:"PhantomJS"},_=h.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/slimerjs/i],describe:function(m){var v={name:"SlimerJS"},_=h.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(m){var v={name:"BlackBerry"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/(web|hpw)[o0]s/i],describe:function(m){var v={name:"WebOS Browser"},_=h.default.getFirstMatch(d,m)||h.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/bada/i],describe:function(m){var v={name:"Bada"},_=h.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/tizen/i],describe:function(m){var v={name:"Tizen"},_=h.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/qupzilla/i],describe:function(m){var v={name:"QupZilla"},_=h.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/firefox|iceweasel|fxios/i],describe:function(m){var v={name:"Firefox"},_=h.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/electron/i],describe:function(m){var v={name:"Electron"},_=h.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/MiuiBrowser/i],describe:function(m){var v={name:"Miui"},_=h.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/chromium/i],describe:function(m){var v={name:"Chromium"},_=h.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,m)||h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/chrome|crios|crmo/i],describe:function(m){var v={name:"Chrome"},_=h.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/GSA/i],describe:function(m){var v={name:"Google Search"},_=h.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:function(m){var v=!m.test(/like android/i),_=m.test(/android/i);return v&&_},describe:function(m){var v={name:"Android Browser"},_=h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/playstation 4/i],describe:function(m){var v={name:"PlayStation 4"},_=h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/safari|applewebkit/i],describe:function(m){var v={name:"Safari"},_=h.default.getFirstMatch(d,m);return _&&(v.version=_),v}},{test:[/.*/i],describe:function(m){var v=m.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:h.default.getFirstMatch(v,m),version:h.default.getSecondMatch(v,m)}}}];l.default=f,o.exports=l.default},93:function(o,l,c){l.__esModule=!0,l.default=void 0;var u,h=(u=c(17))&&u.__esModule?u:{default:u},d=c(18),f=[{test:[/Roku\/DVP/],describe:function(m){var v=h.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,m);return{name:d.OS_MAP.Roku,version:v}}},{test:[/windows phone/i],describe:function(m){var v=h.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,m);return{name:d.OS_MAP.WindowsPhone,version:v}}},{test:[/windows /i],describe:function(m){var v=h.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,m),_=h.default.getWindowsVersionName(v);return{name:d.OS_MAP.Windows,version:v,versionName:_}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(m){var v={name:d.OS_MAP.iOS},_=h.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,m);return _&&(v.version=_),v}},{test:[/macintosh/i],describe:function(m){var v=h.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,m).replace(/[_\s]/g,"."),_=h.default.getMacOSVersionName(v),y={name:d.OS_MAP.MacOS,version:v};return _&&(y.versionName=_),y}},{test:[/(ipod|iphone|ipad)/i],describe:function(m){var v=h.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,m).replace(/[_\s]/g,".");return{name:d.OS_MAP.iOS,version:v}}},{test:function(m){var v=!m.test(/like android/i),_=m.test(/android/i);return v&&_},describe:function(m){var v=h.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,m),_=h.default.getAndroidVersionName(v),y={name:d.OS_MAP.Android,version:v};return _&&(y.versionName=_),y}},{test:[/(web|hpw)[o0]s/i],describe:function(m){var v=h.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,m),_={name:d.OS_MAP.WebOS};return v&&v.length&&(_.version=v),_}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(m){var v=h.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,m)||h.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,m)||h.default.getFirstMatch(/\bbb(\d+)/i,m);return{name:d.OS_MAP.BlackBerry,version:v}}},{test:[/bada/i],describe:function(m){var v=h.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,m);return{name:d.OS_MAP.Bada,version:v}}},{test:[/tizen/i],describe:function(m){var v=h.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,m);return{name:d.OS_MAP.Tizen,version:v}}},{test:[/linux/i],describe:function(){return{name:d.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:d.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(m){var v=h.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,m);return{name:d.OS_MAP.PlayStation4,version:v}}}];l.default=f,o.exports=l.default},94:function(o,l,c){l.__esModule=!0,l.default=void 0;var u,h=(u=c(17))&&u.__esModule?u:{default:u},d=c(18),f=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(m){var v=h.default.getFirstMatch(/(can-l01)/i,m)&&"Nova",_={type:d.PLATFORMS_MAP.mobile,vendor:"Huawei"};return v&&(_.model=v),_}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet}}},{test:function(m){var v=m.test(/ipod|iphone/i),_=m.test(/like (ipod|iphone)/i);return v&&!_},describe:function(m){var v=h.default.getFirstMatch(/(ipod|iphone)/i,m);return{type:d.PLATFORMS_MAP.mobile,vendor:"Apple",model:v}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:d.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:d.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getBrowserName(!0)==="blackberry"},describe:function(){return{type:d.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(m){return m.getBrowserName(!0)==="bada"},describe:function(){return{type:d.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getBrowserName()==="windows phone"},describe:function(){return{type:d.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(m){var v=Number(String(m.getOSVersion()).split(".")[0]);return m.getOSName(!0)==="android"&&v>=3},describe:function(){return{type:d.PLATFORMS_MAP.tablet}}},{test:function(m){return m.getOSName(!0)==="android"},describe:function(){return{type:d.PLATFORMS_MAP.mobile}}},{test:function(m){return m.getOSName(!0)==="macos"},describe:function(){return{type:d.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(m){return m.getOSName(!0)==="windows"},describe:function(){return{type:d.PLATFORMS_MAP.desktop}}},{test:function(m){return m.getOSName(!0)==="linux"},describe:function(){return{type:d.PLATFORMS_MAP.desktop}}},{test:function(m){return m.getOSName(!0)==="playstation 4"},describe:function(){return{type:d.PLATFORMS_MAP.tv}}},{test:function(m){return m.getOSName(!0)==="roku"},describe:function(){return{type:d.PLATFORMS_MAP.tv}}}];l.default=f,o.exports=l.default},95:function(o,l,c){l.__esModule=!0,l.default=void 0;var u,h=(u=c(17))&&u.__esModule?u:{default:u},d=c(18),f=[{test:function(m){return m.getBrowserName(!0)==="microsoft edge"},describe:function(m){if(/\sedg\//i.test(m))return{name:d.ENGINE_MAP.Blink};var v=h.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,m);return{name:d.ENGINE_MAP.EdgeHTML,version:v}}},{test:[/trident/i],describe:function(m){var v={name:d.ENGINE_MAP.Trident},_=h.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:function(m){return m.test(/presto/i)},describe:function(m){var v={name:d.ENGINE_MAP.Presto},_=h.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:function(m){var v=m.test(/gecko/i),_=m.test(/like gecko/i);return v&&!_},describe:function(m){var v={name:d.ENGINE_MAP.Gecko},_=h.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:d.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(m){var v={name:d.ENGINE_MAP.WebKit},_=h.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,m);return _&&(v.version=_),v}}];l.default=f,o.exports=l.default}})},6729:a=>{var o=Object.prototype.hasOwnProperty,l="~";function c(){}function u(m,v,_){this.fn=m,this.context=v,this.once=_||!1}function h(m,v,_,y,S){if(typeof _!="function")throw new TypeError("The listener must be a function");var T=new u(_,y||m,S),x=l?l+v:v;return m._events[x]?m._events[x].fn?m._events[x]=[m._events[x],T]:m._events[x].push(T):(m._events[x]=T,m._eventsCount++),m}function d(m,v){--m._eventsCount==0?m._events=new c:delete m._events[v]}function f(){this._events=new c,this._eventsCount=0}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(l=!1)),f.prototype.eventNames=function(){var m,v,_=[];if(this._eventsCount===0)return _;for(v in m=this._events)o.call(m,v)&&_.push(l?v.slice(1):v);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(m)):_},f.prototype.listeners=function(m){var v=l?l+m:m,_=this._events[v];if(!_)return[];if(_.fn)return[_.fn];for(var y=0,S=_.length,T=new Array(S);y<S;y++)T[y]=_[y].fn;return T},f.prototype.listenerCount=function(m){var v=l?l+m:m,_=this._events[v];return _?_.fn?1:_.length:0},f.prototype.emit=function(m,v,_,y,S,T){var x=l?l+m:m;if(!this._events[x])return!1;var I,R,N=this._events[x],L=arguments.length;if(N.fn){switch(N.once&&this.removeListener(m,N.fn,void 0,!0),L){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,v),!0;case 3:return N.fn.call(N.context,v,_),!0;case 4:return N.fn.call(N.context,v,_,y),!0;case 5:return N.fn.call(N.context,v,_,y,S),!0;case 6:return N.fn.call(N.context,v,_,y,S,T),!0}for(R=1,I=new Array(L-1);R<L;R++)I[R-1]=arguments[R];N.fn.apply(N.context,I)}else{var k,z=N.length;for(R=0;R<z;R++)switch(N[R].once&&this.removeListener(m,N[R].fn,void 0,!0),L){case 1:N[R].fn.call(N[R].context);break;case 2:N[R].fn.call(N[R].context,v);break;case 3:N[R].fn.call(N[R].context,v,_);break;case 4:N[R].fn.call(N[R].context,v,_,y);break;default:if(!I)for(k=1,I=new Array(L-1);k<L;k++)I[k-1]=arguments[k];N[R].fn.apply(N[R].context,I)}}return!0},f.prototype.on=function(m,v,_){return h(this,m,v,_,!1)},f.prototype.once=function(m,v,_){return h(this,m,v,_,!0)},f.prototype.removeListener=function(m,v,_,y){var S=l?l+m:m;if(!this._events[S])return this;if(!v)return d(this,S),this;var T=this._events[S];if(T.fn)T.fn!==v||y&&!T.once||_&&T.context!==_||d(this,S);else{for(var x=0,I=[],R=T.length;x<R;x++)(T[x].fn!==v||y&&!T[x].once||_&&T[x].context!==_)&&I.push(T[x]);I.length?this._events[S]=I.length===1?I[0]:I:d(this,S)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=l?l+m:m,this._events[v]&&d(this,v)):(this._events=new c,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=l,f.EventEmitter=f,a.exports=f},1564:a=>{var o;o=()=>(()=>{var l={228:u=>{var h=Object.prototype.hasOwnProperty,d="~";function f(){}function m(S,T,x){this.fn=S,this.context=T,this.once=x||!1}function v(S,T,x,I,R){if(typeof x!="function")throw new TypeError("The listener must be a function");var N=new m(x,I||S,R),L=d?d+T:T;return S._events[L]?S._events[L].fn?S._events[L]=[S._events[L],N]:S._events[L].push(N):(S._events[L]=N,S._eventsCount++),S}function _(S,T){--S._eventsCount==0?S._events=new f:delete S._events[T]}function y(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(d=!1)),y.prototype.eventNames=function(){var S,T,x=[];if(this._eventsCount===0)return x;for(T in S=this._events)h.call(S,T)&&x.push(d?T.slice(1):T);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(S)):x},y.prototype.listeners=function(S){var T=d?d+S:S,x=this._events[T];if(!x)return[];if(x.fn)return[x.fn];for(var I=0,R=x.length,N=new Array(R);I<R;I++)N[I]=x[I].fn;return N},y.prototype.listenerCount=function(S){var T=d?d+S:S,x=this._events[T];return x?x.fn?1:x.length:0},y.prototype.emit=function(S,T,x,I,R,N){var L=d?d+S:S;if(!this._events[L])return!1;var k,z,Z=this._events[L],H=arguments.length;if(Z.fn){switch(Z.once&&this.removeListener(S,Z.fn,void 0,!0),H){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,T),!0;case 3:return Z.fn.call(Z.context,T,x),!0;case 4:return Z.fn.call(Z.context,T,x,I),!0;case 5:return Z.fn.call(Z.context,T,x,I,R),!0;case 6:return Z.fn.call(Z.context,T,x,I,R,N),!0}for(z=1,k=new Array(H-1);z<H;z++)k[z-1]=arguments[z];Z.fn.apply(Z.context,k)}else{var q,U=Z.length;for(z=0;z<U;z++)switch(Z[z].once&&this.removeListener(S,Z[z].fn,void 0,!0),H){case 1:Z[z].fn.call(Z[z].context);break;case 2:Z[z].fn.call(Z[z].context,T);break;case 3:Z[z].fn.call(Z[z].context,T,x);break;case 4:Z[z].fn.call(Z[z].context,T,x,I);break;default:if(!k)for(q=1,k=new Array(H-1);q<H;q++)k[q-1]=arguments[q];Z[z].fn.apply(Z[z].context,k)}}return!0},y.prototype.on=function(S,T,x){return v(this,S,T,x,!1)},y.prototype.once=function(S,T,x){return v(this,S,T,x,!0)},y.prototype.removeListener=function(S,T,x,I){var R=d?d+S:S;if(!this._events[R])return this;if(!T)return _(this,R),this;var N=this._events[R];if(N.fn)N.fn!==T||I&&!N.once||x&&N.context!==x||_(this,R);else{for(var L=0,k=[],z=N.length;L<z;L++)(N[L].fn!==T||I&&!N[L].once||x&&N[L].context!==x)&&k.push(N[L]);k.length?this._events[R]=k.length===1?k[0]:k:_(this,R)}return this},y.prototype.removeAllListeners=function(S){var T;return S?(T=d?d+S:S,this._events[T]&&_(this,T)):(this._events=new f,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=d,y.EventEmitter=y,u.exports=y},815:function(u,h){var d,f,m=this&&this.__extends||(d=function(X,Y){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,se){ae.__proto__=se}||function(ae,se){for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(ae[ue]=se[ue])},d(X,Y)},function(X,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function ae(){this.constructor=X}d(X,Y),X.prototype=Y===null?Object.create(Y):(ae.prototype=Y.prototype,new ae)});function v(X){return 60*X*60}function _(X){return 60*X*60*24}Object.defineProperty(h,"__esModule",{value:!0}),h.daysToSeconds=h.hoursToSeconds=h.ConfigurationHolder=h.ConfigurationManager=h.Env=void 0,function(X){X.BETA="beta",X.PROD="prod",X.CUSTOM="custom"}(f||(h.Env=f={})),h.hoursToSeconds=v,h.daysToSeconds=_;var y=function(X){function Y(ae){return X.call(this,ae)||this}return m(Y,X),Y}(Error),S="data",T="metrics",x=v(1),I=_(3),R=v(2),N="base64",L=function(){function X(Y,ae){var se,ue,Ne,ve,_e,Le,He,$e;if(!ae.fileKey)throw new Error("options.fileKey cannot be empty");var bt=(se=ae.clock)!==null&&se!==void 0?se:new ee,Ct=bt.getMillis();switch(this.context=Y,this.fileKey=ae.fileKey,this.env=ae.standardEnv,ae.standardEnv){case f.BETA:this.fetchServer="beta.ivs-device-config-beta.live-video.net";break;case f.PROD:this.fetchServer="prod.ivs-device-config.live-video.net";break;case f.CUSTOM:if(!ae.customServer)throw new Error("Custom env requires options.customServer");this.fetchServer=ae.customServer;break;default:throw new Error("Invalid value for standardEnv: ".concat(ae.standardEnv))}this.trace=(ue=ae.trace)!==null&&ue!==void 0?ue:new H(this.env),this.fetch=(Ne=ae.fetch)!==null&&Ne!==void 0?Ne:new Z(Y),this.storage=new U("amazon_ivs_device_config_v1_"+ae.fileKey,Y.localStorage),this.state=new Q(this.storage,"state"),this.refresh={refreshIntervalSeconds:(ve=ae.refresh.refreshIntervalSeconds)!==null&&ve!==void 0?ve:x,retryCount:(_e=ae.refresh.retryCount)!==null&&_e!==void 0?_e:3,retryIntervalSeconds:(Le=ae.refresh.retryIntervalSeconds)!==null&&Le!==void 0?Le:10,maxCacheAgeSeconds:(He=ae.refresh.maxCacheAgeSeconds)!==null&&He!==void 0?He:I,stopRefreshAfterSeconds:($e=ae.refresh.stopRefreshAfterSeconds)!==null&&$e!==void 0?$e:R,canRefreshNow:ae.refresh.canRefreshNow},this.clock=bt,this.isInitialRefreshDone=!1;var Lt=0,Gt=this.state.getState();Gt&&Gt.fetchServer===this.fetchServer&&Gt.lastFetchWhenMs&&(Lt=Gt.lastFetchWhenMs);var qt=bt.getMillis(),V=(qt-Lt)/1e3;if(V<=this.refresh.maxCacheAgeSeconds){var Ae=this.storage.getJson(S);Ae&&Ae.fetchServer===this.fetchServer&&this.setData(Ae.json)}if(this.lastUseMs=qt,V>=this.refresh.refreshIntervalSeconds||Lt==0)this.trace.onTrace("Will start refresh right now"),this.fetchTask=this.context.setTimeout(this.startRefresh.bind(this),0);else{var Se=Math.round(this.refresh.refreshIntervalSeconds-V);this.trace.onTrace("Will start refresh in "+Se+" seconds"),this.fetchTask=this.context.setTimeout(this.startRefresh.bind(this),1e3*Se),this.isInitialRefreshDone=!0}var ge=bt.getMillis();this.initialLoadTime=ge-Ct}return X.getInstance=function(Y,ae){try{if(!(Y.fetch&&Y.setTimeout&&Y.clearTimeout&&Y.localStorage))return void console.log("Context needs to provide fetch, setTimeout, clearTimeout, localStorage")}catch(se){return void console.error("Error checking for context properties "+se)}if(this.gInstance){if(this.gInstance.fileKey!=ae.fileKey)throw new Error("Existing instance has file key ".concat(this.gInstance.fileKey,", now asking for ").concat(ae.fileKey));return this.gInstance}return this.gInstance=new X(Y,ae),this.gInstance},X.prototype.getConfigurationHolder=function(Y){var ae,se=this,ue=this.clock.getMillis();this.lastUseMs=ue;var Ne=(ae=Y.analytics)!==null&&ae!==void 0?ae:new q(this.env);this.context.setTimeout(function(){se.emitMetrics(Ne)});var ve=0,_e=this.state.getState();return _e&&_e.fetchServer===this.fetchServer&&_e.lastFetchWhenMs&&(ve=_e.lastFetchWhenMs),(ue-ve)/1e3<=this.refresh.maxCacheAgeSeconds?new k(Ne,this.properties):new k(Ne,void 0)},X.prototype.getFetchUrl=function(){var Y="https://".concat(this.fetchServer,"/").concat(this.fileKey,".json"),ae=new URL(Y);return ae.searchParams.set("version","1.0"),ae},X.clearInstance=function(){var Y;(Y=this.gInstance)===null||Y===void 0||Y.clearInstanceImpl(),this.gInstance=void 0},X.prototype.clearInstanceImpl=function(){this.context.clearTimeout(this.fetchTask),this.fetchTask=void 0,this.context.clearTimeout(this.retryTask),this.retryTask=void 0},X.prototype.startRefresh=function(){var Y=this;this.trace.onTrace("Starting refresh request..."),this.fetchTask=void 0,this.retryTask&&(this.context.clearTimeout(this.retryTask),this.retryTask=void 0);var ae=this.clock.getMillis();return(ae-this.lastUseMs)/1e3>this.refresh.stopRefreshAfterSeconds?(this.trace.onTrace("Actually will not refresh due to refresh timeout"),void(this.fetchTask=this.context.setTimeout(this.startRefresh.bind(this),1e3*this.refresh.refreshIntervalSeconds))):this.isInitialRefreshDone&&!this.refresh.canRefreshNow()?(this.trace.onTrace("Will not refresh due to callback having returned false"),void(this.fetchTask=this.context.setTimeout(this.startRefresh.bind(this),1e3*this.refresh.refreshIntervalSeconds))):void this.fetchData().then(function(se){Y.processResponse(se,ae)}).catch(function(se){Y.exceptionMetrics(se),Y.trace.onTrace("Fetch error: "+se),Y.refresh.retryCount>0&&Y.scheduleRetry(1)}).finally(function(){Y.isInitialRefreshDone=!0,Y.fetchTask=Y.context.setTimeout(Y.startRefresh.bind(Y),1e3*Y.refresh.refreshIntervalSeconds)})},X.prototype.fetchData=function(){var Y=this.getFetchUrl(),ae=new Headers,se=this.state.getState();return se.fetchServer===this.fetchServer&&(se.lastFetchWhenFullMs&&this.clock.getMillis()-se.lastFetchWhenFullMs>1e3*v(24)?this.trace.onTrace("Forcing full refresh"):this.properties&&se.lastFetchEtagHeader&&ae.set("If-None-Match",se.lastFetchEtagHeader)),this.incrementMetrics("fetch_attempt_count"),this.fetch.fetchUrl(Y,ae)},X.prototype.processResponse=function(Y,ae){var se={fetchServer:this.fetchServer,lastFetchWhenMs:this.clock.getMillis()},ue=Y.headers.get("etag");ue&&(se.lastFetchEtagHeader=ue);try{if(Y.status<300&&Y.json)if(this.setData(Y.json)){this.trace.onTrace("Successfully parsed fetched data"),this.storage.setJson(S,{fetchServer:this.fetchServer,json:Y.json});var Ne=this.clock.getMillis();se.lastFetchWhenFullMs=Ne,this.incrementMetricsWithDuration("success_new_data_count",Ne-ae)}else this.incrementMetrics("fail_invalid_data_count");else{if(Y.status!==304){var ve="Unexpected http fetch status: "+Y.status;throw this.trace.onTrace(ve),new y(ve)}this.trace.onTrace("Server said no change in data"),Ne=this.clock.getMillis(),this.incrementMetricsWithDuration("success_no_change_count",Ne-ae)}}finally{this.state.setState(se)}},X.prototype.scheduleRetry=function(Y){var ae=this;this.retryTask&&this.context.clearTimeout(this.retryTask);var se=Y*this.refresh.retryIntervalSeconds;this.retryTask=this.context.setTimeout(function(){ae.retryTask=void 0,ae.fetchRetry(Y)},1e3*se)},X.prototype.fetchRetry=function(Y){var ae=this;this.trace.onTrace("Starting retry request ".concat(Y,"..."));var se=this.clock.getMillis();this.fetchData().then(function(ue){ae.processResponse(ue,se)}).catch(function(ue){ae.exceptionMetrics(ue),ae.trace.onTrace("Fetch error: "+ue),ae.refresh.retryCount>Y&&ae.scheduleRetry(Y+1)})},X.prototype.setData=function(Y){if(!Y)return!1;if(Y.version!=="1.0")return this.trace.onTrace("Data version is not 1.0, not applying"),!1;var ae=Y.properties;if(!ae||!Array.isArray(ae))return this.trace.onTrace("Data properties is not an array, not applying"),!1;for(var se=new Map,ue=0,Ne=ae;ue<Ne.length;ue++){var ve=Ne[ue];if(ve.name&&ve.type&&this.isValidValueType(ve.type)){if(ve.value_string&&typeof ve.value_string!="string"){this.trace.onTrace("Invalid type of value.value_string "+typeof ve.value_string);continue}if(ve.value_number&&typeof ve.value_number!="number"){this.trace.onTrace("Invalid type of value.value_number "+typeof ve.value_number);continue}if(ve.value_boolean&&typeof ve.value_boolean!="boolean"){this.trace.onTrace("Invalid type of value.value_boolean "+typeof ve.value_boolean);continue}if(ve.value_json&&typeof ve.value_json!="string"){this.trace.onTrace("Invalid type of value.value_json "+typeof ve.value_json);continue}if(ve.value_analytics&&typeof ve.value_analytics!="string"){this.trace.onTrace("Invalid type of item.value_analytics "+typeof ve.value_analytics);continue}var _e=new W(ve.name,this.parseValueType(ve.type),ve.value_string,ve.value_number,ve.value_boolean,ve.value_json,ve.value_analytics,ve.encoding);se.set(_e.name,_e)}}return se.size!=0&&(this.properties=se,!0)},X.prototype.isValidValueType=function(Y){return Y==="string"||Y==="number"||Y==="boolean"||Y=="json"},X.prototype.parseValueType=function(Y){switch(Y){case"string":return z.STRING;case"number":return z.NUMBER;case"boolean":return z.BOOLEAN;case"json":return z.JSON;default:throw new Error("Unsupported value type ".concat(Y))}},X.prototype.emitMetrics=function(Y){var ae,se,ue,Ne,ve,_e,Le,He,$e=(ae=this.storage.getJson(T))!==null&&ae!==void 0?ae:{},bt={initial_load_time:this.initialLoadTime,fetch_attempt_count:(se=$e.fetch_attempt_count)!==null&&se!==void 0?se:0,fetch_duration_average:(ue=$e.fetch_duration_average)!==null&&ue!==void 0?ue:0,success_no_change_count:(Ne=$e.success_no_change_count)!==null&&Ne!==void 0?Ne:0,success_new_data_count:(ve=$e.success_new_data_count)!==null&&ve!==void 0?ve:0,fail_exception_count:(_e=$e.fail_exception_count)!==null&&_e!==void 0?_e:0,fail_http_error_count:(Le=$e.fail_http_error_count)!==null&&Le!==void 0?Le:0,fail_invalid_data_count:(He=$e.fail_invalid_data_count)!==null&&He!==void 0?He:0};Y.onMetrics(bt),$e.fetch_attempt_count=0,$e.success_no_change_count=0,$e.success_new_data_count=0,$e.fail_exception_count=0,$e.fail_http_error_count=0,$e.fail_invalid_data_count=0,this.storage.setJson(T,$e)},X.prototype.exceptionMetrics=function(Y){Y instanceof y||Y.message.startsWith("http error")?this.incrementMetrics("fail_http_error_count"):this.incrementMetrics("fail_exception_count")},X.prototype.incrementMetrics=function(Y){var ae,se,ue=(ae=this.storage.getJson(T))!==null&&ae!==void 0?ae:{};ue[Y]=((se=ue[Y])!==null&&se!==void 0?se:0)+1,this.storage.setJson(T,ue)},X.prototype.incrementMetricsWithDuration=function(Y,ae){var se,ue,Ne=(se=this.storage.getJson(T))!==null&&se!==void 0?se:{};Ne[Y]=((ue=Ne[Y])!==null&&ue!==void 0?ue:0)+1,ae>0&&(Ne.fetch_duration_average!==void 0?Ne.fetch_duration_average=.9*Ne.fetch_duration_average+.1*ae|0:Ne.fetch_duration_average=ae),this.storage.setJson(T,Ne)},X}();h.ConfigurationManager=L;var k=function(){function X(Y,ae){this.analytics=Y,this.properties=ae}return X.prototype.getSize=function(){return this.properties?this.properties.size:-1},X.prototype.getStringValue=function(Y){var ae,se;if(this.properties){var ue=this.properties.get(Y);if(ue){if(ue.type===z.STRING){var Ne=(ae=ue.valueString)!==null&&ae!==void 0?ae:"";return this.analytics.onValue(Y,(se=ue.valueAnalytics)!==null&&se!==void 0?se:Ne),Ne}this.analytics.onError(Y,"Type is not string")}}else this.analytics.onTrace(Y,"Configuration is not available")},X.prototype.getNumberValue=function(Y){var ae,se;if(this.properties){var ue=this.properties.get(Y);if(ue){if(ue.type===z.NUMBER){var Ne=(ae=ue.valueNumber)!==null&&ae!==void 0?ae:0;return this.analytics.onValue(Y,(se=ue.valueAnalytics)!==null&&se!==void 0?se:Ne.toString()),Ne}this.analytics.onError(Y,"Type is not number")}}else this.analytics.onTrace(Y,"Configuration is not available")},X.prototype.getBooleanValue=function(Y){var ae,se;if(this.properties){var ue=this.properties.get(Y);if(ue){if(ue.type===z.BOOLEAN){var Ne=(ae=ue.valueBoolean)!==null&&ae!==void 0&&ae;return this.analytics.onValue(Y,(se=ue.valueAnalytics)!==null&&se!==void 0?se:Ne.toString()),Ne}this.analytics.onError(Y,"Type is not boolean")}}else this.analytics.onTrace(Y,"Configuration is not available")},X.prototype.getJsonValue=function(Y){var ae,se;if(this.properties){var ue=this.properties.get(Y);if(ue){if(ue.type===z.JSON){var Ne=ue.valueJson;if(!Ne)return this.analytics.onValue(Y,(ae=ue.valueAnalytics)!==null&&ae!==void 0?ae:""),null;try{var ve=JSON.parse(Ne);return this.analytics.onValue(Y,(se=ue.valueAnalytics)!==null&&se!==void 0?se:Ne),ve}catch{return void this.analytics.onError(Y,"Json parse error")}}this.analytics.onError(Y,"Type is not json")}}else this.analytics.onTrace(Y,"Configuration is not available")},X}();h.ConfigurationHolder=k;var z,Z=function(){function X(Y){this.context=Y}return X.prototype.fetchUrl=function(Y,ae){var se=this;return new Promise(function(ue,Ne){se.context.fetch(Y,{headers:ae,cache:"no-store"}).then(function(ve){if(ve.status>=400)Ne(new y("http error ".concat(ve.status,", ").concat(ve.statusText)));else{var _e={status:ve.status,headers:ve.headers};ve.json().then(function(Le){_e.json=Le}).catch(function(){}).finally(function(){ue(_e)})}}).catch(function(ve){Ne(ve)})})},X}(),H=function(){function X(Y){this.env=Y}return X.prototype.onTrace=function(Y){this.env!=f.PROD&&console.log("Configuration: "+Y)},X}(),q=function(){function X(Y){this.env=Y}return X.prototype.onMetrics=function(Y){this.env!=f.PROD&&console.log("Metrics",Y)},X.prototype.onValue=function(Y,ae){this.env!=f.PROD&&console.log("Configuration for ".concat(Y,": value = ").concat(ae))},X.prototype.onError=function(Y,ae){this.env!=f.PROD&&console.error("Configuration for ".concat(Y,": error = ").concat(ae))},X.prototype.onTrace=function(Y,ae){this.env!=f.PROD&&console.log("Configuration for ".concat(Y,": trace = ").concat(ae))},X}(),U=function(){function X(Y,ae){this.prefix=Y,this.storage=ae}return X.prototype.getJson=function(Y){var ae=this.prefix+"_"+Y;try{var se=this.storage.getItem(ae);if(se)return JSON.parse(se)}catch(ue){console.error("Error getting local storage key ".concat(ae)+ue)}return null},X.prototype.setJson=function(Y,ae){var se=this.prefix+"_"+Y;try{this.storage.setItem(se,JSON.stringify(ae))}catch(ue){console.error("Error setting local storage key ".concat(se,": ")+ue)}},X}(),ee=function(){function X(){}return X.prototype.getMillis=function(){return Date.now()},X}();(function(X){X[X.STRING=0]="STRING",X[X.NUMBER=1]="NUMBER",X[X.BOOLEAN=2]="BOOLEAN",X[X.JSON=3]="JSON"})(z||(z={}));var W=function(X,Y,ae,se,ue,Ne,ve,_e){switch(this.name=X,this.type=Y,this.valueString=ae,this.valueNumber=se,this.valueBoolean=ue,this.valueJson=Ne,this.valueAnalytics=ve,this.type){case z.STRING:_e===N&&ae&&(this.valueString=atob(ae));break;case z.JSON:_e===N&&Ne&&(this.valueJson=atob(Ne))}},Q=function(){function X(Y,ae){var se;this.storage=Y,this.key=ae,this.state=(se=Y.getJson(ae))!==null&&se!==void 0?se:{}}return X.prototype.getState=function(){return this.state},X.prototype.setState=function(Y){Object.assign(this.state,Y),this.storage.setJson(this.key,this.state)},X}()},456:function(u,h,d){var f=this&&this.__createBinding||(Object.create?function(v,_,y,S){S===void 0&&(S=y);var T=Object.getOwnPropertyDescriptor(_,y);T&&!("get"in T?!_.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return _[y]}}),Object.defineProperty(v,S,T)}:function(v,_,y,S){S===void 0&&(S=y),v[S]=_[y]}),m=this&&this.__exportStar||function(v,_){for(var y in v)y==="default"||Object.prototype.hasOwnProperty.call(_,y)||f(_,v,y)};Object.defineProperty(h,"__esModule",{value:!0}),m(d(903),h)},903:function(u,h,d){var f=this&&this.__spreadArray||function(_,y,S){if(S||arguments.length===2)for(var T,x=0,I=y.length;x<I;x++)!T&&x in y||(T||(T=Array.prototype.slice.call(y,0,x)),T[x]=y[x]);return _.concat(T||Array.prototype.slice.call(y))};Object.defineProperty(h,"__esModule",{value:!0}),h.TypedEmitter=void 0;var m=d(228),v=function(){function _(y){var S=y.propagateErrors;this.emitter=new m.EventEmitter,this.propagateErrors=S!=null&&S}return _.prototype.on=function(y,S){S.call=this.wrapCall(y,S),this.emitter.on(y,S)},_.prototype.off=function(y,S){this.emitter.off(y,S)},_.prototype.emit=function(y){for(var S,T=[],x=1;x<arguments.length;x++)T[x-1]=arguments[x];(S=this.emitter).emit.apply(S,f([y],T,!1))},_.prototype.removeAllListeners=function(){this.emitter.removeAllListeners()},_.prototype.wrapCall=function(y,S){var T=this;return function(x){for(var I=[],R=1;R<arguments.length;R++)I[R-1]=arguments[R];if(T.propagateErrors)S.apply(x,I);else try{S.apply(x,I)}catch(k){var N="Error in callback for ".concat(y),L=S.name;return L&&(N+=" for function ".concat(L)),void console.error(N,k)}}},_}();h.TypedEmitter=v},987:function(u,h,d){var f,m=this&&this.__extends||(f=function(I,R){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,L){N.__proto__=L}||function(N,L){for(var k in L)Object.prototype.hasOwnProperty.call(L,k)&&(N[k]=L[k])},f(I,R)},function(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function N(){this.constructor=I}f(I,R),I.prototype=R===null?Object.create(R):(N.prototype=R.prototype,new N)}),v=this&&this.__createBinding||(Object.create?function(I,R,N,L){L===void 0&&(L=N);var k=Object.getOwnPropertyDescriptor(R,N);k&&!("get"in k?!R.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return R[N]}}),Object.defineProperty(I,L,k)}:function(I,R,N,L){L===void 0&&(L=N),I[L]=R[N]}),_=this&&this.__setModuleDefault||(Object.create?function(I,R){Object.defineProperty(I,"default",{enumerable:!0,value:R})}:function(I,R){I.default=R}),y=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var R={};if(I!=null)for(var N in I)N!=="default"&&Object.prototype.hasOwnProperty.call(I,N)&&v(R,I,N);return _(R,I),R};Object.defineProperty(h,"__esModule",{value:!0}),h.createFsm=h.FsmWildcardState=h.RejectedTransitionError=h.InvalidStateTransitionError=void 0;var S=y(d(293)),T=function(I){function R(N,L){var k=I.call(this,"Invalid transition from '".concat(L,"' via event '").concat(N,"'"))||this;return k.name="InvalidStateTransitionError",k}return m(R,I),R}(Error);h.InvalidStateTransitionError=T;var x=function(I){function R(N,L,k){var z=I.call(this,"Transition from '".concat(L,"' via event '").concat(N,"' was rejected for: ").concat(k))||this;return z.name="RejectedTransitionError",z}return m(R,I),R}(Error);h.RejectedTransitionError=x,h.FsmWildcardState="*",h.createFsm=function(I){var R,N=I.transitions,L=I.callbacks,k=I.initialState,z=function(Z){var H,q=(H=N[Z])===null||H===void 0?void 0:H.from;return!!q&&(typeof q=="string"?q===h.FsmWildcardState:q.includes(k))};return{canTransition:z,transition:function(Z,H){var q,U,ee,W,Q,X;if(!z(Z))return S.err(new T(String(k),String(Z)));var Y=N[Z];return Y.shouldTransition===void 0||Y.shouldTransition(k)?((U=(q=L==null?void 0:L[k])===null||q===void 0?void 0:q.onExiting)===null||U===void 0||U.call(q),(ee=L==null?void 0:L.onStateExiting)===null||ee===void 0||ee.call(L,k),R=k,k=Y.to,(Q=(W=L==null?void 0:L[k])===null||W===void 0?void 0:W.onChanged)===null||Q===void 0||Q.call(W,R,H),(X=L==null?void 0:L.onStateChanged)===null||X===void 0||X.call(L,R,k,H),S.ok(k)):S.err(new x(String(k),String(Z),"shouldTransition returned false"))},previousState:function(){return R},currentState:function(){return k}}}},156:function(u,h,d){var f=this&&this.__createBinding||(Object.create?function(v,_,y,S){S===void 0&&(S=y);var T=Object.getOwnPropertyDescriptor(_,y);T&&!("get"in T?!_.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return _[y]}}),Object.defineProperty(v,S,T)}:function(v,_,y,S){S===void 0&&(S=y),v[S]=_[y]}),m=this&&this.__exportStar||function(v,_){for(var y in v)y==="default"||Object.prototype.hasOwnProperty.call(_,y)||f(_,v,y)};Object.defineProperty(h,"__esModule",{value:!0}),h.VERSION=void 0,h.VERSION="0.2.0",m(d(815),h),m(d(456),h),m(d(987),h),m(d(293),h)},293:(u,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getErr=h.getOk_or=h.getOk=h.isNotOk=h.isOk=h.err=h.ok=void 0,h.ok=function(d){return{ok:!0,value:d}},h.err=function(d){return{ok:!1,error:d}},h.isOk=function(d){return d.ok===!0},h.isNotOk=function(d){return!(0,h.isOk)(d)},h.getOk=function(d){return d.ok===!0?d.value:void 0},h.getOk_or=function(d,f){return d.ok===!0?d.value:f},h.getErr=function(d){return d.ok===!0?void 0:d.error}}},c={};return function u(h){var d=c[h];if(d!==void 0)return d.exports;var f=c[h]={exports:{}};return l[h].call(f.exports,f,f.exports,u),f.exports}(156)})(),a.exports=o()},1989:(a,o,l)=>{var c=l(1789),u=l(401),h=l(7667),d=l(1327),f=l(1866);function m(v){var _=-1,y=v==null?0:v.length;for(this.clear();++_<y;){var S=v[_];this.set(S[0],S[1])}}m.prototype.clear=c,m.prototype.delete=u,m.prototype.get=h,m.prototype.has=d,m.prototype.set=f,a.exports=m},8407:(a,o,l)=>{var c=l(7040),u=l(4125),h=l(2117),d=l(7518),f=l(4705);function m(v){var _=-1,y=v==null?0:v.length;for(this.clear();++_<y;){var S=v[_];this.set(S[0],S[1])}}m.prototype.clear=c,m.prototype.delete=u,m.prototype.get=h,m.prototype.has=d,m.prototype.set=f,a.exports=m},7071:(a,o,l)=>{var c=l(852)(l(5639),"Map");a.exports=c},3369:(a,o,l)=>{var c=l(4785),u=l(1285),h=l(6e3),d=l(9916),f=l(5265);function m(v){var _=-1,y=v==null?0:v.length;for(this.clear();++_<y;){var S=v[_];this.set(S[0],S[1])}}m.prototype.clear=c,m.prototype.delete=u,m.prototype.get=h,m.prototype.has=d,m.prototype.set=f,a.exports=m},6384:(a,o,l)=>{var c=l(8407),u=l(7465),h=l(3779),d=l(7599),f=l(4758),m=l(4309);function v(_){var y=this.__data__=new c(_);this.size=y.size}v.prototype.clear=u,v.prototype.delete=h,v.prototype.get=d,v.prototype.has=f,v.prototype.set=m,a.exports=v},2705:(a,o,l)=>{var c=l(5639).Symbol;a.exports=c},1149:(a,o,l)=>{var c=l(5639).Uint8Array;a.exports=c},6874:a=>{a.exports=function(o,l,c){switch(c.length){case 0:return o.call(l);case 1:return o.call(l,c[0]);case 2:return o.call(l,c[0],c[1]);case 3:return o.call(l,c[0],c[1],c[2])}return o.apply(l,c)}},4636:(a,o,l)=>{var c=l(2545),u=l(5694),h=l(1469),d=l(4144),f=l(5776),m=l(6719),v=Object.prototype.hasOwnProperty;a.exports=function(_,y){var S=h(_),T=!S&&u(_),x=!S&&!T&&d(_),I=!S&&!T&&!x&&m(_),R=S||T||x||I,N=R?c(_.length,String):[],L=N.length;for(var k in _)!y&&!v.call(_,k)||R&&(k=="length"||x&&(k=="offset"||k=="parent")||I&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||f(k,L))||N.push(k);return N}},6556:(a,o,l)=>{var c=l(9465),u=l(7813);a.exports=function(h,d,f){(f!==void 0&&!u(h[d],f)||f===void 0&&!(d in h))&&c(h,d,f)}},4865:(a,o,l)=>{var c=l(9465),u=l(7813),h=Object.prototype.hasOwnProperty;a.exports=function(d,f,m){var v=d[f];h.call(d,f)&&u(v,m)&&(m!==void 0||f in d)||c(d,f,m)}},8470:(a,o,l)=>{var c=l(7813);a.exports=function(u,h){for(var d=u.length;d--;)if(c(u[d][0],h))return d;return-1}},9465:(a,o,l)=>{var c=l(8777);a.exports=function(u,h,d){h=="__proto__"&&c?c(u,h,{configurable:!0,enumerable:!0,value:d,writable:!0}):u[h]=d}},3118:(a,o,l)=>{var c=l(3218),u=Object.create,h=function(){function d(){}return function(f){if(!c(f))return{};if(u)return u(f);d.prototype=f;var m=new d;return d.prototype=void 0,m}}();a.exports=h},8483:(a,o,l)=>{var c=l(5063)();a.exports=c},4239:(a,o,l)=>{var c=l(2705),u=l(9607),h=l(2333),d="[object Null]",f="[object Undefined]",m=c?c.toStringTag:void 0;a.exports=function(v){return v==null?v===void 0?f:d:m&&m in Object(v)?u(v):h(v)}},9454:(a,o,l)=>{var c=l(4239),u=l(7005),h="[object Arguments]";a.exports=function(d){return u(d)&&c(d)==h}},8458:(a,o,l)=>{var c=l(3560),u=l(5346),h=l(3218),d=l(346),f=/^\[object .+?Constructor\]$/,m=Function.prototype,v=Object.prototype,_=m.toString,y=v.hasOwnProperty,S=RegExp("^"+_.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(T){return!(!h(T)||u(T))&&(c(T)?S:f).test(d(T))}},8749:(a,o,l)=>{var c=l(4239),u=l(1780),h=l(7005),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1,a.exports=function(f){return h(f)&&u(f.length)&&!!d[c(f)]}},313:(a,o,l)=>{var c=l(3218),u=l(5726),h=l(3498),d=Object.prototype.hasOwnProperty;a.exports=function(f){if(!c(f))return h(f);var m=u(f),v=[];for(var _ in f)(_!="constructor"||!m&&d.call(f,_))&&v.push(_);return v}},2980:(a,o,l)=>{var c=l(6384),u=l(6556),h=l(8483),d=l(9783),f=l(3218),m=l(1704),v=l(6390);a.exports=function _(y,S,T,x,I){y!==S&&h(S,function(R,N){if(I||(I=new c),f(R))d(y,S,N,T,_,x,I);else{var L=x?x(v(y,N),R,N+"",y,S,I):void 0;L===void 0&&(L=R),u(y,N,L)}},m)}},9783:(a,o,l)=>{var c=l(6556),u=l(4626),h=l(7133),d=l(278),f=l(8517),m=l(5694),v=l(1469),_=l(9246),y=l(4144),S=l(3560),T=l(3218),x=l(8630),I=l(6719),R=l(6390),N=l(9881);a.exports=function(L,k,z,Z,H,q,U){var ee=R(L,z),W=R(k,z),Q=U.get(W);if(Q)c(L,z,Q);else{var X=q?q(ee,W,z+"",L,k,U):void 0,Y=X===void 0;if(Y){var ae=v(W),se=!ae&&y(W),ue=!ae&&!se&&I(W);X=W,ae||se||ue?v(ee)?X=ee:_(ee)?X=d(ee):se?(Y=!1,X=u(W,!0)):ue?(Y=!1,X=h(W,!0)):X=[]:x(W)||m(W)?(X=ee,m(ee)?X=N(ee):T(ee)&&!S(ee)||(X=f(W))):Y=!1}Y&&(U.set(W,X),H(X,W,Z,q,U),U.delete(W)),c(L,z,X)}}},5976:(a,o,l)=>{var c=l(6557),u=l(5357),h=l(61);a.exports=function(d,f){return h(u(d,f,c),d+"")}},6560:(a,o,l)=>{var c=l(5703),u=l(8777),h=l(6557),d=u?function(f,m){return u(f,"toString",{configurable:!0,enumerable:!1,value:c(m),writable:!0})}:h;a.exports=d},2545:a=>{a.exports=function(o,l){for(var c=-1,u=Array(o);++c<o;)u[c]=l(c);return u}},1717:a=>{a.exports=function(o){return function(l){return o(l)}}},4318:(a,o,l)=>{var c=l(1149);a.exports=function(u){var h=new u.constructor(u.byteLength);return new c(h).set(new c(u)),h}},4626:(a,o,l)=>{a=l.nmd(a);var c=l(5639),u=o&&!o.nodeType&&o,h=u&&a&&!a.nodeType&&a,d=h&&h.exports===u?c.Buffer:void 0,f=d?d.allocUnsafe:void 0;a.exports=function(m,v){if(v)return m.slice();var _=m.length,y=f?f(_):new m.constructor(_);return m.copy(y),y}},7133:(a,o,l)=>{var c=l(4318);a.exports=function(u,h){var d=h?c(u.buffer):u.buffer;return new u.constructor(d,u.byteOffset,u.length)}},278:a=>{a.exports=function(o,l){var c=-1,u=o.length;for(l||(l=Array(u));++c<u;)l[c]=o[c];return l}},8363:(a,o,l)=>{var c=l(4865),u=l(9465);a.exports=function(h,d,f,m){var v=!f;f||(f={});for(var _=-1,y=d.length;++_<y;){var S=d[_],T=m?m(f[S],h[S],S,f,h):void 0;T===void 0&&(T=h[S]),v?u(f,S,T):c(f,S,T)}return f}},4429:(a,o,l)=>{var c=l(5639)["__core-js_shared__"];a.exports=c},1463:(a,o,l)=>{var c=l(5976),u=l(6612);a.exports=function(h){return c(function(d,f){var m=-1,v=f.length,_=v>1?f[v-1]:void 0,y=v>2?f[2]:void 0;for(_=h.length>3&&typeof _=="function"?(v--,_):void 0,y&&u(f[0],f[1],y)&&(_=v<3?void 0:_,v=1),d=Object(d);++m<v;){var S=f[m];S&&h(d,S,m,_)}return d})}},5063:a=>{a.exports=function(o){return function(l,c,u){for(var h=-1,d=Object(l),f=u(l),m=f.length;m--;){var v=f[o?m:++h];if(c(d[v],v,d)===!1)break}return l}}},8777:(a,o,l)=>{var c=l(852),u=function(){try{var h=c(Object,"defineProperty");return h({},"",{}),h}catch{}}();a.exports=u},1957:(a,o,l)=>{var c=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g;a.exports=c},5050:(a,o,l)=>{var c=l(7019);a.exports=function(u,h){var d=u.__data__;return c(h)?d[typeof h=="string"?"string":"hash"]:d.map}},852:(a,o,l)=>{var c=l(8458),u=l(7801);a.exports=function(h,d){var f=u(h,d);return c(f)?f:void 0}},5924:(a,o,l)=>{var c=l(5569)(Object.getPrototypeOf,Object);a.exports=c},9607:(a,o,l)=>{var c=l(2705),u=Object.prototype,h=u.hasOwnProperty,d=u.toString,f=c?c.toStringTag:void 0;a.exports=function(m){var v=h.call(m,f),_=m[f];try{m[f]=void 0;var y=!0}catch{}var S=d.call(m);return y&&(v?m[f]=_:delete m[f]),S}},7801:a=>{a.exports=function(o,l){return o==null?void 0:o[l]}},1789:(a,o,l)=>{var c=l(4536);a.exports=function(){this.__data__=c?c(null):{},this.size=0}},401:a=>{a.exports=function(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}},7667:(a,o,l)=>{var c=l(4536),u="__lodash_hash_undefined__",h=Object.prototype.hasOwnProperty;a.exports=function(d){var f=this.__data__;if(c){var m=f[d];return m===u?void 0:m}return h.call(f,d)?f[d]:void 0}},1327:(a,o,l)=>{var c=l(4536),u=Object.prototype.hasOwnProperty;a.exports=function(h){var d=this.__data__;return c?d[h]!==void 0:u.call(d,h)}},1866:(a,o,l)=>{var c=l(4536),u="__lodash_hash_undefined__";a.exports=function(h,d){var f=this.__data__;return this.size+=this.has(h)?0:1,f[h]=c&&d===void 0?u:d,this}},8517:(a,o,l)=>{var c=l(3118),u=l(5924),h=l(5726);a.exports=function(d){return typeof d.constructor!="function"||h(d)?{}:c(u(d))}},5776:a=>{var o=9007199254740991,l=/^(?:0|[1-9]\d*)$/;a.exports=function(c,u){var h=typeof c;return!!(u=u??o)&&(h=="number"||h!="symbol"&&l.test(c))&&c>-1&&c%1==0&&c<u}},6612:(a,o,l)=>{var c=l(7813),u=l(8612),h=l(5776),d=l(3218);a.exports=function(f,m,v){if(!d(v))return!1;var _=typeof m;return!!(_=="number"?u(v)&&h(m,v.length):_=="string"&&m in v)&&c(v[m],f)}},7019:a=>{a.exports=function(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}},5346:(a,o,l)=>{var c,u=l(4429),h=(c=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";a.exports=function(d){return!!h&&h in d}},5726:a=>{var o=Object.prototype;a.exports=function(l){var c=l&&l.constructor;return l===(typeof c=="function"&&c.prototype||o)}},7040:a=>{a.exports=function(){this.__data__=[],this.size=0}},4125:(a,o,l)=>{var c=l(8470),u=Array.prototype.splice;a.exports=function(h){var d=this.__data__,f=c(d,h);return!(f<0)&&(f==d.length-1?d.pop():u.call(d,f,1),--this.size,!0)}},2117:(a,o,l)=>{var c=l(8470);a.exports=function(u){var h=this.__data__,d=c(h,u);return d<0?void 0:h[d][1]}},7518:(a,o,l)=>{var c=l(8470);a.exports=function(u){return c(this.__data__,u)>-1}},4705:(a,o,l)=>{var c=l(8470);a.exports=function(u,h){var d=this.__data__,f=c(d,u);return f<0?(++this.size,d.push([u,h])):d[f][1]=h,this}},4785:(a,o,l)=>{var c=l(1989),u=l(8407),h=l(7071);a.exports=function(){this.size=0,this.__data__={hash:new c,map:new(h||u),string:new c}}},1285:(a,o,l)=>{var c=l(5050);a.exports=function(u){var h=c(this,u).delete(u);return this.size-=h?1:0,h}},6e3:(a,o,l)=>{var c=l(5050);a.exports=function(u){return c(this,u).get(u)}},9916:(a,o,l)=>{var c=l(5050);a.exports=function(u){return c(this,u).has(u)}},5265:(a,o,l)=>{var c=l(5050);a.exports=function(u,h){var d=c(this,u),f=d.size;return d.set(u,h),this.size+=d.size==f?0:1,this}},4536:(a,o,l)=>{var c=l(852)(Object,"create");a.exports=c},3498:a=>{a.exports=function(o){var l=[];if(o!=null)for(var c in Object(o))l.push(c);return l}},1167:(a,o,l)=>{a=l.nmd(a);var c=l(1957),u=o&&!o.nodeType&&o,h=u&&a&&!a.nodeType&&a,d=h&&h.exports===u&&c.process,f=function(){try{var m=h&&h.require&&h.require("util").types;return m||d&&d.binding&&d.binding("util")}catch{}}();a.exports=f},2333:a=>{var o=Object.prototype.toString;a.exports=function(l){return o.call(l)}},5569:a=>{a.exports=function(o,l){return function(c){return o(l(c))}}},5357:(a,o,l)=>{var c=l(6874),u=Math.max;a.exports=function(h,d,f){return d=u(d===void 0?h.length-1:d,0),function(){for(var m=arguments,v=-1,_=u(m.length-d,0),y=Array(_);++v<_;)y[v]=m[d+v];v=-1;for(var S=Array(d+1);++v<d;)S[v]=m[v];return S[d]=f(y),c(h,this,S)}}},5639:(a,o,l)=>{var c=l(1957),u=typeof self=="object"&&self&&self.Object===Object&&self,h=c||u||Function("return this")();a.exports=h},6390:a=>{a.exports=function(o,l){if((l!=="constructor"||typeof o[l]!="function")&&l!="__proto__")return o[l]}},61:(a,o,l)=>{var c=l(6560),u=l(1275)(c);a.exports=u},1275:a=>{var o=800,l=16,c=Date.now;a.exports=function(u){var h=0,d=0;return function(){var f=c(),m=l-(f-d);if(d=f,m>0){if(++h>=o)return arguments[0]}else h=0;return u.apply(void 0,arguments)}}},7465:(a,o,l)=>{var c=l(8407);a.exports=function(){this.__data__=new c,this.size=0}},3779:a=>{a.exports=function(o){var l=this.__data__,c=l.delete(o);return this.size=l.size,c}},7599:a=>{a.exports=function(o){return this.__data__.get(o)}},4758:a=>{a.exports=function(o){return this.__data__.has(o)}},4309:(a,o,l)=>{var c=l(8407),u=l(7071),h=l(3369),d=200;a.exports=function(f,m){var v=this.__data__;if(v instanceof c){var _=v.__data__;if(!u||_.length<d-1)return _.push([f,m]),this.size=++v.size,this;v=this.__data__=new h(_)}return v.set(f,m),this.size=v.size,this}},346:a=>{var o=Function.prototype.toString;a.exports=function(l){if(l!=null){try{return o.call(l)}catch{}try{return l+""}catch{}}return""}},5703:a=>{a.exports=function(o){return function(){return o}}},7813:a=>{a.exports=function(o,l){return o===l||o!=o&&l!=l}},6557:a=>{a.exports=function(o){return o}},5694:(a,o,l)=>{var c=l(9454),u=l(7005),h=Object.prototype,d=h.hasOwnProperty,f=h.propertyIsEnumerable,m=c(function(){return arguments}())?c:function(v){return u(v)&&d.call(v,"callee")&&!f.call(v,"callee")};a.exports=m},1469:a=>{var o=Array.isArray;a.exports=o},8612:(a,o,l)=>{var c=l(3560),u=l(1780);a.exports=function(h){return h!=null&&u(h.length)&&!c(h)}},9246:(a,o,l)=>{var c=l(8612),u=l(7005);a.exports=function(h){return u(h)&&c(h)}},4144:(a,o,l)=>{a=l.nmd(a);var c=l(5639),u=l(5062),h=o&&!o.nodeType&&o,d=h&&a&&!a.nodeType&&a,f=d&&d.exports===h?c.Buffer:void 0,m=(f?f.isBuffer:void 0)||u;a.exports=m},3560:(a,o,l)=>{var c=l(4239),u=l(3218),h="[object AsyncFunction]",d="[object Function]",f="[object GeneratorFunction]",m="[object Proxy]";a.exports=function(v){if(!u(v))return!1;var _=c(v);return _==d||_==f||_==h||_==m}},1780:a=>{var o=9007199254740991;a.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=o}},3218:a=>{a.exports=function(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}},7005:a=>{a.exports=function(o){return o!=null&&typeof o=="object"}},8630:(a,o,l)=>{var c=l(4239),u=l(5924),h=l(7005),d="[object Object]",f=Function.prototype,m=Object.prototype,v=f.toString,_=m.hasOwnProperty,y=v.call(Object);a.exports=function(S){if(!h(S)||c(S)!=d)return!1;var T=u(S);if(T===null)return!0;var x=_.call(T,"constructor")&&T.constructor;return typeof x=="function"&&x instanceof x&&v.call(x)==y}},6719:(a,o,l)=>{var c=l(8749),u=l(1717),h=l(1167),d=h&&h.isTypedArray,f=d?u(d):c;a.exports=f},1704:(a,o,l)=>{var c=l(4636),u=l(313),h=l(8612);a.exports=function(d){return h(d)?c(d,!0):u(d)}},6486:function(a,o,l){var c;a=l.nmd(a),(function(){var u,h="Expected a function",d="__lodash_hash_undefined__",f="__lodash_placeholder__",m=16,v=32,_=64,y=128,S=256,T=1/0,x=9007199254740991,I=NaN,R=4294967295,N=[["ary",y],["bind",1],["bindKey",2],["curry",8],["curryRight",m],["flip",512],["partial",v],["partialRight",_],["rearg",S]],L="[object Arguments]",k="[object Array]",z="[object Boolean]",Z="[object Date]",H="[object Error]",q="[object Function]",U="[object GeneratorFunction]",ee="[object Map]",W="[object Number]",Q="[object Object]",X="[object Promise]",Y="[object RegExp]",ae="[object Set]",se="[object String]",ue="[object Symbol]",Ne="[object WeakMap]",ve="[object ArrayBuffer]",_e="[object DataView]",Le="[object Float32Array]",He="[object Float64Array]",$e="[object Int8Array]",bt="[object Int16Array]",Ct="[object Int32Array]",Lt="[object Uint8Array]",Gt="[object Uint8ClampedArray]",qt="[object Uint16Array]",V="[object Uint32Array]",Ae=/\b__p \+= '';/g,Se=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fe=/&(?:amp|lt|gt|quot|#39);/g,Ce=/[&<>"']/g,ke=RegExp(fe.source),he=RegExp(Ce.source),ie=/<%-([\s\S]+?)%>/g,Me=/<%([\s\S]+?)%>/g,Fe=/<%=([\s\S]+?)%>/g,Ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,We=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_t=/[\\^$.*+?()[\]{}|]/g,tn=RegExp(_t.source),de=/^\s+/,$=/\s/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,me=/\{\n\/\* \[wrapped with (.+)\] \*/,Pe=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,at=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,Cn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,It=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,Et=/^\[object .+?Constructor\]$/,Wt=/^0o[0-7]+$/i,Kt=/^(?:0|[1-9]\d*)$/,je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tt=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",Nn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pi="\\u2700-\\u27bf",ii="a-z\\xdf-\\xf6\\xf8-\\xff",jn="A-Z\\xc0-\\xd6\\xd8-\\xde",ln="\\ufe0e\\ufe0f",Xt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xn="[']",bn="["+St+"]",Wn="["+Xt+"]",Ui="["+Nn+"]",Un="\\d+",Qs="["+Pi+"]",uc="["+ii+"]",Ah="[^"+St+Xt+Un+Pi+ii+jn+"]",Od="\\ud83c[\\udffb-\\udfff]",tm="[^"+St+"]",Mh="(?:\\ud83c[\\udde6-\\uddff]){2}",Rh="[\\ud800-\\udbff][\\udc00-\\udfff]",hc="["+jn+"]",Ee="\\u200d",Ye="(?:"+uc+"|"+Ah+")",ct="(?:"+hc+"|"+Ah+")",ut="(?:['](?:d|ll|m|re|s|t|ve))?",Ke="(?:['](?:D|LL|M|RE|S|T|VE))?",Pt="(?:"+Ui+"|"+Od+")?",Yt="["+ln+"]?",rn=Yt+Pt+("(?:"+Ee+"(?:"+[tm,Mh,Rh].join("|")+")"+Yt+Pt+")*"),cn="(?:"+[Qs,Mh,Rh].join("|")+")"+rn,Hn="(?:"+[tm+Ui+"?",Ui,Mh,Rh,bn].join("|")+")",Vn=RegExp(xn,"g"),mn=RegExp(Ui,"g"),Zn=RegExp(Od+"(?="+Od+")|"+Hn+rn,"g"),Di=RegExp([hc+"?"+uc+"+"+ut+"(?="+[Wn,hc,"$"].join("|")+")",ct+"+"+Ke+"(?="+[Wn,hc+Ye,"$"].join("|")+")",hc+"?"+Ye+"+"+ut,hc+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Un,cn].join("|"),"g"),Kr=RegExp("["+Ee+St+Nn+ln+"]"),zr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pn=-1,ri={};ri[Le]=ri[He]=ri[$e]=ri[bt]=ri[Ct]=ri[Lt]=ri[Gt]=ri[qt]=ri[V]=!0,ri[L]=ri[k]=ri[ve]=ri[z]=ri[_e]=ri[Z]=ri[H]=ri[q]=ri[ee]=ri[W]=ri[Q]=ri[Y]=ri[ae]=ri[se]=ri[Ne]=!1;var An={};An[L]=An[k]=An[ve]=An[_e]=An[z]=An[Z]=An[Le]=An[He]=An[$e]=An[bt]=An[Ct]=An[ee]=An[W]=An[Q]=An[Y]=An[ae]=An[se]=An[ue]=An[Lt]=An[Gt]=An[qt]=An[V]=!0,An[H]=An[q]=An[Ne]=!1;var Ja={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ll=parseFloat,da=parseInt,Yc=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g,Or=typeof self=="object"&&self&&self.Object===Object&&self,on=Yc||Or||Function("return this")(),fa=o&&!o.nodeType&&o,os=fa&&a&&!a.nodeType&&a,On=os&&os.exports===fa,vl=On&&Yc.process,Cs=function(){try{var ot=os&&os.require&&os.require("util").types;return ot||vl&&vl.binding&&vl.binding("util")}catch{}}(),Id=Cs&&Cs.isArrayBuffer,ju=Cs&&Cs.isDate,Xc=Cs&&Cs.isMap,nm=Cs&&Cs.isRegExp,iv=Cs&&Cs.isSet,im=Cs&&Cs.isTypedArray;function Qa(ot,et,Ot){switch(Ot.length){case 0:return ot.call(et);case 1:return ot.call(et,Ot[0]);case 2:return ot.call(et,Ot[0],Ot[1]);case 3:return ot.call(et,Ot[0],Ot[1],Ot[2])}return ot.apply(et,Ot)}function rm(ot,et,Ot,nn){for(var zt=-1,yi=ot==null?0:ot.length;++zt<yi;){var Ms=ot[zt];et(nn,Ms,Ot(Ms),ot)}return nn}function eo(ot,et){for(var Ot=-1,nn=ot==null?0:ot.length;++Ot<nn&&et(ot[Ot],Ot,ot)!==!1;);return ot}function sS(ot,et){for(var Ot=ot==null?0:ot.length;Ot--&&et(ot[Ot],Ot,ot)!==!1;);return ot}function b0(ot,et){for(var Ot=-1,nn=ot==null?0:ot.length;++Ot<nn;)if(!et(ot[Ot],Ot,ot))return!1;return!0}function dc(ot,et){for(var Ot=-1,nn=ot==null?0:ot.length,zt=0,yi=[];++Ot<nn;){var Ms=ot[Ot];et(Ms,Ot,ot)&&(yi[zt++]=Ms)}return yi}function Mf(ot,et){return!!(ot!=null&&ot.length)&&Ih(ot,et,0)>-1}function Hu(ot,et,Ot){for(var nn=-1,zt=ot==null?0:ot.length;++nn<zt;)if(Ot(et,ot[nn]))return!0;return!1}function Gr(ot,et){for(var Ot=-1,nn=ot==null?0:ot.length,zt=Array(nn);++Ot<nn;)zt[Ot]=et(ot[Ot],Ot,ot);return zt}function Kc(ot,et){for(var Ot=-1,nn=et.length,zt=ot.length;++Ot<nn;)ot[zt+Ot]=et[Ot];return ot}function rv(ot,et,Ot,nn){var zt=-1,yi=ot==null?0:ot.length;for(nn&&yi&&(Ot=ot[++zt]);++zt<yi;)Ot=et(Ot,ot[zt],zt,ot);return Ot}function S0(ot,et,Ot,nn){var zt=ot==null?0:ot.length;for(nn&&zt&&(Ot=ot[--zt]);zt--;)Ot=et(Ot,ot[zt],zt,ot);return Ot}function sv(ot,et){for(var Ot=-1,nn=ot==null?0:ot.length;++Ot<nn;)if(et(ot[Ot],Ot,ot))return!0;return!1}var aS=sm("length");function E0(ot,et,Ot){var nn;return Ot(ot,function(zt,yi,Ms){if(et(zt,yi,Ms))return nn=yi,!1}),nn}function Oh(ot,et,Ot,nn){for(var zt=ot.length,yi=Ot+(nn?1:-1);nn?yi--:++yi<zt;)if(et(ot[yi],yi,ot))return yi;return-1}function Ih(ot,et,Ot){return et==et?function(nn,zt,yi){for(var Ms=yi-1,Jc=nn.length;++Ms<Jc;)if(nn[Ms]===zt)return Ms;return-1}(ot,et,Ot):Oh(ot,T0,Ot)}function av(ot,et,Ot,nn){for(var zt=Ot-1,yi=ot.length;++zt<yi;)if(nn(ot[zt],et))return zt;return-1}function T0(ot){return ot!=ot}function x0(ot,et){var Ot=ot==null?0:ot.length;return Ot?Zc(ot,et)/Ot:I}function sm(ot){return function(et){return et==null?u:et[ot]}}function ov(ot){return function(et){return ot==null?u:ot[et]}}function w0(ot,et,Ot,nn,zt){return zt(ot,function(yi,Ms,Jc){Ot=nn?(nn=!1,yi):et(Ot,yi,Ms,Jc)}),Ot}function Zc(ot,et){for(var Ot,nn=-1,zt=ot.length;++nn<zt;){var yi=et(ot[nn]);yi!==u&&(Ot=Ot===u?yi:Ot+yi)}return Ot}function Rf(ot,et){for(var Ot=-1,nn=Array(ot);++Ot<ot;)nn[Ot]=et(Ot);return nn}function C0(ot){return ot&&ot.slice(0,om(ot)+1).replace(de,"")}function _o(ot){return function(et){return ot(et)}}function Zr(ot,et){return Gr(et,function(Ot){return ot[Ot]})}function Vu(ot,et){return ot.has(et)}function oS(ot,et){for(var Ot=-1,nn=ot.length;++Ot<nn&&Ih(et,ot[Ot],0)>-1;);return Ot}function As(ot,et){for(var Ot=ot.length;Ot--&&Ih(et,ot[Ot],0)>-1;);return Ot}var lS=ov({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),am=ov({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cS(ot){return"\\"+Ja[ot]}function Nh(ot){return Kr.test(ot)}function Of(ot){var et=-1,Ot=Array(ot.size);return ot.forEach(function(nn,zt){Ot[++et]=[zt,nn]}),Ot}function pa(ot,et){return function(Ot){return ot(et(Ot))}}function bo(ot,et){for(var Ot=-1,nn=ot.length,zt=0,yi=[];++Ot<nn;){var Ms=ot[Ot];Ms!==et&&Ms!==f||(ot[Ot]=f,yi[zt++]=Ot)}return yi}function If(ot){var et=-1,Ot=Array(ot.size);return ot.forEach(function(nn){Ot[++et]=nn}),Ot}function uS(ot){var et=-1,Ot=Array(ot.size);return ot.forEach(function(nn){Ot[++et]=[nn,nn]}),Ot}function zs(ot){return Nh(ot)?function(et){for(var Ot=Zn.lastIndex=0;Zn.test(et);)++Ot;return Ot}(ot):aS(ot)}function ms(ot){return Nh(ot)?function(et){return et.match(Zn)||[]}(ot):function(et){return et.split("")}(ot)}function om(ot){for(var et=ot.length;et--&&$.test(ot.charAt(et)););return et}var Gu=ov({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Nd=function ot(et){var Ot,nn=(et=et==null?on:Nd.defaults(on.Object(),et,Nd.pick(on,wi))).Array,zt=et.Date,yi=et.Error,Ms=et.Function,Jc=et.Math,Ci=et.Object,Ul=et.RegExp,Qc=et.String,Yo=et.TypeError,Nf=nn.prototype,lm=Ms.prototype,fc=Ci.prototype,Xo=et["__core-js_shared__"],ea=lm.toString,er=fc.hasOwnProperty,cm=0,lv=(Ot=/[^.]+$/.exec(Xo&&Xo.keys&&Xo.keys.IE_PROTO||""))?"Symbol(src)_1."+Ot:"",Ph=fc.toString,Dh=ea.call(Ci),cv=on._,hS=Ul("^"+ea.call(er).replace(_t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),to=On?et.Buffer:u,qu=et.Symbol,eu=et.Uint8Array,A0=to?to.allocUnsafe:u,Pf=pa(Ci.getPrototypeOf,Ci),Df=Ci.create,um=fc.propertyIsEnumerable,kh=Nf.splice,hm=qu?qu.isConcatSpreadable:u,pc=qu?qu.iterator:u,hr=qu?qu.toStringTag:u,dm=function(){try{var b=Tl(Ci,"defineProperty");return b({},"",{}),b}catch{}}(),en=et.clearTimeout!==on.clearTimeout&&et.clearTimeout,Rs=zt&&zt.now!==on.Date.now&&zt.now,fm=et.setTimeout!==on.setTimeout&&et.setTimeout,mc=Jc.ceil,Ko=Jc.floor,pm=Ci.getOwnPropertySymbols,Pd=to?to.isBuffer:u,js=et.isFinite,M0=Nf.join,So=pa(Ci.keys,Ci),qr=Jc.max,gs=Jc.min,ui=zt.now,Eo=et.parseInt,Da=Jc.random,Dd=Nf.reverse,mm=Tl(et,"DataView"),ka=Tl(et,"Map"),Rt=Tl(et,"Promise"),Hs=Tl(et,"Set"),kf=Tl(et,"WeakMap"),Lh=Tl(Ci,"create"),$u=kf&&new kf,Os={},gm=qd(mm),To=qd(ka),dS=qd(Rt),yl=qd(Hs),kd=qd(kf),Bl=qu?qu.prototype:u,Uh=Bl?Bl.valueOf:u,Lf=Bl?Bl.toString:u;function be(b){if(D(b)&&!kn(b)&&!(b instanceof mi)){if(b instanceof ma)return b;if(er.call(b,"__wrapped__"))return W0(b)}return new ma(b)}var Wu=function(){function b(){}return function(w){if(!M(w))return{};if(Df)return Df(w);b.prototype=w;var F=new b;return b.prototype=u,F}}();function tu(){}function ma(b,w){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=u}function mi(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function Yu(b){var w=-1,F=b==null?0:b.length;for(this.clear();++w<F;){var ne=b[w];this.set(ne[0],ne[1])}}function gc(b){var w=-1,F=b==null?0:b.length;for(this.clear();++w<F;){var ne=b[w];this.set(ne[0],ne[1])}}function Zo(b){var w=-1,F=b==null?0:b.length;for(this.clear();++w<F;){var ne=b[w];this.set(ne[0],ne[1])}}function vc(b){var w=-1,F=b==null?0:b.length;for(this.__data__=new Zo;++w<F;)this.add(b[w])}function xo(b){var w=this.__data__=new gc(b);this.size=w.size}function uv(b,w){var F=kn(b),ne=!F&&fr(b),ce=!F&&!ne&&Vh(b),we=!F&&!ne&&!ce&&ye(b),De=F||ne||ce||we,Ge=De?Rf(b.length,Qc):[],it=Ge.length;for(var xt in b)!w&&!er.call(b,xt)||De&&(xt=="length"||ce&&(xt=="offset"||xt=="parent")||we&&(xt=="buffer"||xt=="byteLength"||xt=="byteOffset")||Jr(xt,it))||Ge.push(xt);return Ge}function Fl(b){var w=b.length;return w?b[L0(0,w-1)]:u}function hv(b,w){return Bm(Ao(b),Xu(w,0,b.length))}function vm(b){return Bm(Ao(b))}function ym(b,w,F){(F!==u&&!Qr(b[w],F)||F===u&&!(w in b))&&yc(b,w,F)}function Bh(b,w,F){var ne=b[w];er.call(b,w)&&Qr(ne,F)&&(F!==u||w in b)||yc(b,w,F)}function La(b,w){for(var F=b.length;F--;)if(Qr(b[F][0],w))return F;return-1}function R0(b,w,F,ne){return _l(b,function(ce,we,De){w(ne,ce,F(ce),De)}),ne}function no(b,w){return b&&xc(w,un(w),b)}function yc(b,w,F){w=="__proto__"&&dm?dm(b,w,{configurable:!0,enumerable:!0,value:F,writable:!0}):b[w]=F}function _m(b,w){for(var F=-1,ne=w.length,ce=nn(ne),we=b==null;++F<ne;)ce[F]=we?u:oi(b,w[F]);return ce}function Xu(b,w,F){return b==b&&(F!==u&&(b=b<=F?b:F),w!==u&&(b=b>=w?b:w)),b}function wo(b,w,F,ne,ce,we){var De,Ge=1&w,it=2&w,xt=4&w;if(F&&(De=ce?F(b,ne,ce,we):F(b)),De!==u)return De;if(!M(b))return b;var At=kn(b);if(At){if(De=function(Mt){var Vt=Mt.length,Kn=new Mt.constructor(Vt);return Vt&&typeof Mt[0]=="string"&&er.call(Mt,"index")&&(Kn.index=Mt.index,Kn.input=Mt.input),Kn}(b),!Ge)return Ao(b,De)}else{var Ft=na(b),vn=Ft==q||Ft==U;if(Vh(b))return Jn(b,Ge);if(Ft==Q||Ft==L||vn&&!ce){if(De=it||vn?{}:bS(b),!Ge)return it?function(Mt,Vt){return xc(Mt,V0(Mt),Vt)}(b,function(Mt,Vt){return Mt&&xc(Vt,In(Vt),Mt)}(De,b)):function(Mt,Vt){return xc(Mt,km(Mt),Vt)}(b,no(De,b))}else{if(!An[Ft])return ce?b:{};De=function(Mt,Vt,Kn){var kt=Mt.constructor;switch(Vt){case ve:return Gf(Mt);case z:case Z:return new kt(+Mt);case _e:return function(Zt,Sn){var Jt=Sn?Gf(Zt.buffer):Zt.buffer;return new Zt.constructor(Jt,Zt.byteOffset,Zt.byteLength)}(Mt,Kn);case Le:case He:case $e:case bt:case Ct:case Lt:case Gt:case qt:case V:return vv(Mt,Kn);case ee:return new kt;case W:case se:return new kt(Mt);case Y:return function(Zt){var Sn=new Zt.constructor(Zt.source,ze.exec(Zt));return Sn.lastIndex=Zt.lastIndex,Sn}(Mt);case ae:return new kt;case ue:return yn=Mt,Uh?Ci(Uh.call(yn)):{}}var yn}(b,Ft,Ge)}}we||(we=new xo);var wn=we.get(b);if(wn)return wn;we.set(b,De),J(b)?b.forEach(function(Mt){De.add(wo(Mt,w,F,Mt,b,we))}):B(b)&&b.forEach(function(Mt,Vt){De.set(Vt,wo(Mt,w,F,Vt,b,we))});var Fn=At?u:(xt?it?_v:j0:it?In:un)(b);return eo(Fn||b,function(Mt,Vt){Fn&&(Mt=b[Vt=Mt]),Bh(De,Vt,wo(Mt,w,F,Vt,b,we))}),De}function Ir(b,w,F){var ne=F.length;if(b==null)return!ne;for(b=Ci(b);ne--;){var ce=F[ne],we=w[ce],De=b[ce];if(De===u&&!(ce in b)||!we(De))return!1}return!0}function dv(b,w,F){if(typeof b!="function")throw new Yo(h);return Yf(function(){b.apply(u,F)},w)}function Fh(b,w,F,ne){var ce=-1,we=Mf,De=!0,Ge=b.length,it=[],xt=w.length;if(!Ge)return it;F&&(w=Gr(w,_o(F))),ne?(we=Hu,De=!1):w.length>=200&&(we=Vu,De=!1,w=new vc(w));e:for(;++ce<Ge;){var At=b[ce],Ft=F==null?At:F(At);if(At=ne||At!==0?At:0,De&&Ft==Ft){for(var vn=xt;vn--;)if(w[vn]===Ft)continue e;it.push(At)}else we(w,Ft,ne)||it.push(At)}return it}be.templateSettings={escape:ie,evaluate:Me,interpolate:Fe,variable:"",imports:{_:be}},be.prototype=tu.prototype,be.prototype.constructor=be,ma.prototype=Wu(tu.prototype),ma.prototype.constructor=ma,mi.prototype=Wu(tu.prototype),mi.prototype.constructor=mi,Yu.prototype.clear=function(){this.__data__=Lh?Lh(null):{},this.size=0},Yu.prototype.delete=function(b){var w=this.has(b)&&delete this.__data__[b];return this.size-=w?1:0,w},Yu.prototype.get=function(b){var w=this.__data__;if(Lh){var F=w[b];return F===d?u:F}return er.call(w,b)?w[b]:u},Yu.prototype.has=function(b){var w=this.__data__;return Lh?w[b]!==u:er.call(w,b)},Yu.prototype.set=function(b,w){var F=this.__data__;return this.size+=this.has(b)?0:1,F[b]=Lh&&w===u?d:w,this},gc.prototype.clear=function(){this.__data__=[],this.size=0},gc.prototype.delete=function(b){var w=this.__data__,F=La(w,b);return!(F<0)&&(F==w.length-1?w.pop():kh.call(w,F,1),--this.size,!0)},gc.prototype.get=function(b){var w=this.__data__,F=La(w,b);return F<0?u:w[F][1]},gc.prototype.has=function(b){return La(this.__data__,b)>-1},gc.prototype.set=function(b,w){var F=this.__data__,ne=La(F,b);return ne<0?(++this.size,F.push([b,w])):F[ne][1]=w,this},Zo.prototype.clear=function(){this.size=0,this.__data__={hash:new Yu,map:new(ka||gc),string:new Yu}},Zo.prototype.delete=function(b){var w=bv(this,b).delete(b);return this.size-=w?1:0,w},Zo.prototype.get=function(b){return bv(this,b).get(b)},Zo.prototype.has=function(b){return bv(this,b).has(b)},Zo.prototype.set=function(b,w){var F=bv(this,b),ne=F.size;return F.set(b,w),this.size+=F.size==ne?0:1,this},vc.prototype.add=vc.prototype.push=function(b){return this.__data__.set(b,d),this},vc.prototype.has=function(b){return this.__data__.has(b)},xo.prototype.clear=function(){this.__data__=new gc,this.size=0},xo.prototype.delete=function(b){var w=this.__data__,F=w.delete(b);return this.size=w.size,F},xo.prototype.get=function(b){return this.__data__.get(b)},xo.prototype.has=function(b){return this.__data__.has(b)},xo.prototype.set=function(b,w){var F=this.__data__;if(F instanceof gc){var ne=F.__data__;if(!ka||ne.length<199)return ne.push([b,w]),this.size=++F.size,this;F=this.__data__=new Zo(ne)}return F.set(b,w),this.size=F.size,this};var _l=gS(_c),bm=gS(N0,!0);function O0(b,w){var F=!0;return _l(b,function(ne,ce,we){return F=!!w(ne,ce,we)}),F}function Uf(b,w,F){for(var ne=-1,ce=b.length;++ne<ce;){var we=b[ne],De=w(we);if(De!=null&&(Ge===u?De==De&&!pe(De):F(De,Ge)))var Ge=De,it=we}return it}function Bf(b,w){var F=[];return _l(b,function(ne,ce,we){w(ne,ce,we)&&F.push(ne)}),F}function ta(b,w,F,ne,ce){var we=-1,De=b.length;for(F||(F=G0),ce||(ce=[]);++we<De;){var Ge=b[we];w>0&&F(Ge)?w>1?ta(Ge,w-1,F,ne,ce):Kc(ce,Ge):ne||(ce[ce.length]=Ge)}return ce}var Sm=vS(),I0=vS(!0);function _c(b,w){return b&&Sm(b,w,un)}function N0(b,w){return b&&I0(b,w,un)}function bc(b,w){return dc(w,function(F){return O(b[F])})}function ls(b,w){for(var F=0,ne=(w=au(w,b)).length;b!=null&&F<ne;)b=b[Mc(w[F++])];return F&&F==ne?b:u}function zl(b,w,F){var ne=w(b);return kn(b)?ne:Kc(ne,F(b))}function Is(b){return b==null?b===u?"[object Undefined]":"[object Null]":hr&&hr in Ci(b)?function(w){var F=er.call(w,hr),ne=w[hr];try{w[hr]=u;var ce=!0}catch{}var we=Ph.call(w);return ce&&(F?w[hr]=ne:delete w[hr]),we}(b):function(w){return Ph.call(w)}(b)}function dr(b,w){return b>w}function Ff(b,w){return b!=null&&er.call(b,w)}function zf(b,w){return b!=null&&w in Ci(b)}function fv(b,w,F){for(var ne=F?Hu:Mf,ce=b[0].length,we=b.length,De=we,Ge=nn(we),it=1/0,xt=[];De--;){var At=b[De];De&&w&&(At=Gr(At,_o(w))),it=gs(At.length,it),Ge[De]=!F&&(w||ce>=120&&At.length>=120)?new vc(De&&At):u}At=b[0];var Ft=-1,vn=Ge[0];e:for(;++Ft<ce&&xt.length<it;){var wn=At[Ft],Fn=w?w(wn):wn;if(wn=F||wn!==0?wn:0,!(vn?Vu(vn,Fn):ne(xt,Fn,F))){for(De=we;--De;){var Mt=Ge[De];if(!(Mt?Vu(Mt,Fn):ne(b[De],Fn,F)))continue e}vn&&vn.push(Fn),xt.push(wn)}}return xt}function Co(b,w,F){var ne=(b=$0(b,w=au(w,b)))==null?b:b[Mc(Fa(w))];return ne==null?u:Qa(ne,b,F)}function Em(b){return D(b)&&Is(b)==L}function ki(b,w,F,ne,ce){return b===w||(b==null||w==null||!D(b)&&!D(w)?b!=b&&w!=w:function(we,De,Ge,it,xt,At){var Ft=kn(we),vn=kn(De),wn=Ft?k:na(we),Fn=vn?k:na(De),Mt=(wn=wn==L?Q:wn)==Q,Vt=(Fn=Fn==L?Q:Fn)==Q,Kn=wn==Fn;if(Kn&&Vh(we)){if(!Vh(De))return!1;Ft=!0,Mt=!1}if(Kn&&!Mt)return At||(At=new xo),Ft||ye(we)?z0(we,De,Ge,it,xt,At):function(Jt,Mn,$r,ns,Ro,ar,zi){switch($r){case _e:if(Jt.byteLength!=Mn.byteLength||Jt.byteOffset!=Mn.byteOffset)return!1;Jt=Jt.buffer,Mn=Mn.buffer;case ve:return!(Jt.byteLength!=Mn.byteLength||!ar(new eu(Jt),new eu(Mn)));case z:case Z:case W:return Qr(+Jt,+Mn);case H:return Jt.name==Mn.name&&Jt.message==Mn.message;case Y:case se:return Jt==Mn+"";case ee:var Oo=Of;case ae:var Vl=1&ns;if(Oo||(Oo=If),Jt.size!=Mn.size&&!Vl)return!1;var Rv=zi.get(Jt);if(Rv)return Rv==Mn;ns|=2,zi.set(Jt,Mn);var Gl=z0(Oo(Jt),Oo(Mn),ns,Ro,ar,zi);return zi.delete(Jt),Gl;case ue:if(Uh)return Uh.call(Jt)==Uh.call(Mn)}return!1}(we,De,wn,Ge,it,xt,At);if(!(1&Ge)){var kt=Mt&&er.call(we,"__wrapped__"),yn=Vt&&er.call(De,"__wrapped__");if(kt||yn){var Zt=kt?we.value():we,Sn=yn?De.value():De;return At||(At=new xo),xt(Zt,Sn,Ge,it,At)}}return Kn?(At||(At=new xo),function(Jt,Mn,$r,ns,Ro,ar){var zi=1&$r,Oo=j0(Jt),Vl=Oo.length,Rv=j0(Mn),Gl=Rv.length;if(Vl!=Gl&&!zi)return!1;for(var Wd=Vl;Wd--;){var nh=Oo[Wd];if(!(zi?nh in Mn:er.call(Mn,nh)))return!1}var ih=ar.get(Jt),MS=ar.get(Mn);if(ih&&MS)return ih==Mn&&MS==Jt;var Ov=!0;ar.set(Jt,Mn),ar.set(Mn,Jt);for(var qm=zi;++Wd<Vl;){var $m=Jt[nh=Oo[Wd]],rh=Mn[nh];if(ns)var n_=zi?ns(rh,$m,nh,Mn,Jt,ar):ns($m,rh,nh,Jt,Mn,ar);if(!(n_===u?$m===rh||Ro($m,rh,$r,ns,ar):n_)){Ov=!1;break}qm||(qm=nh=="constructor")}if(Ov&&!qm){var $h=Jt.constructor,ip=Mn.constructor;$h==ip||!("constructor"in Jt)||!("constructor"in Mn)||typeof $h=="function"&&$h instanceof $h&&typeof ip=="function"&&ip instanceof ip||(Ov=!1)}return ar.delete(Jt),ar.delete(Mn),Ov}(we,De,Ge,it,xt,At)):!1}(b,w,F,ne,ki,ce))}function Tm(b,w,F,ne){var ce=F.length,we=ce,De=!ne;if(b==null)return!we;for(b=Ci(b);ce--;){var Ge=F[ce];if(De&&Ge[2]?Ge[1]!==b[Ge[0]]:!(Ge[0]in b))return!1}for(;++ce<we;){var it=(Ge=F[ce])[0],xt=b[it],At=Ge[1];if(De&&Ge[2]){if(xt===u&&!(it in b))return!1}else{var Ft=new xo;if(ne)var vn=ne(xt,At,it,b,w,Ft);if(!(vn===u?ki(At,xt,3,ne,Ft):vn))return!1}}return!0}function fS(b){return!(!M(b)||(w=b,lv&&lv in w))&&(O(b)?hS:Et).test(qd(b));var w}function P0(b){return typeof b=="function"?b:b==null?Lr:typeof b=="object"?kn(b)?nu(b[0],b[1]):xm(b):qh(b)}function D0(b){if(!Lm(b))return So(b);var w=[];for(var F in Ci(b))er.call(b,F)&&F!="constructor"&&w.push(F);return w}function pS(b){if(!M(b))return function(ce){var we=[];if(ce!=null)for(var De in Ci(ce))we.push(De);return we}(b);var w=Lm(b),F=[];for(var ne in b)(ne!="constructor"||!w&&er.call(b,ne))&&F.push(ne);return F}function pv(b,w){return b<w}function Sc(b,w){var F=-1,ne=ba(b)?nn(b.length):[];return _l(b,function(ce,we,De){ne[++F]=w(ce,we,De)}),ne}function xm(b){var w=Bn(b);return w.length==1&&w[0][2]?ES(w[0][0],w[0][1]):function(F){return F===b||Tm(F,b,w)}}function nu(b,w){return Sv(b)&&SS(w)?ES(Mc(b),w):function(F){var ne=oi(F,b);return ne===u&&ne===w?di(F,b):ki(w,ne,3)}}function wm(b,w,F,ne,ce){b!==w&&Sm(w,function(we,De){if(ce||(ce=new xo),M(we))(function(it,xt,At,Ft,vn,wn,Fn){var Mt=Um(it,At),Vt=Um(xt,At),Kn=Fn.get(Vt);if(Kn)return void ym(it,At,Kn);var kt=wn?wn(Mt,Vt,At+"",it,xt,Fn):u,yn=kt===u;if(yn){var Zt=kn(Vt),Sn=!Zt&&Vh(Vt),Jt=!Zt&&!Sn&&ye(Vt);kt=Vt,Zt||Sn||Jt?kn(Mt)?kt=Mt:es(Mt)?kt=Ao(Mt):Sn?(yn=!1,kt=Jn(Vt,!0)):Jt?(yn=!1,kt=vv(Vt,!0)):kt=[]:re(Vt)||fr(Vt)?(kt=Mt,fr(Mt)?kt=jt(Mt):M(Mt)&&!O(Mt)||(kt=bS(Vt))):yn=!1}yn&&(Fn.set(Vt,kt),vn(kt,Vt,Ft,wn,Fn),Fn.delete(Vt)),ym(it,At,kt)})(b,w,De,F,wm,ne,ce);else{var Ge=ne?ne(Um(b,De),we,De+"",b,w,ce):u;Ge===u&&(Ge=we),ym(b,De,Ge)}},In)}function Cm(b,w){var F=b.length;if(F)return Jr(w+=w<0?F:0,F)?b[w]:u}function zh(b,w,F){w=w.length?Gr(w,function(we){return kn(we)?function(De){return ls(De,we.length===1?we[0]:we)}:we}):[Lr];var ne=-1;w=Gr(w,_o(Gn()));var ce=Sc(b,function(we,De,Ge){var it=Gr(w,function(xt){return xt(we)});return{criteria:it,index:++ne,value:we}});return function(we,De){var Ge=we.length;for(we.sort(De);Ge--;)we[Ge]=we[Ge].value;return we}(ce,function(we,De){return function(Ge,it,xt){for(var At=-1,Ft=Ge.criteria,vn=it.criteria,wn=Ft.length,Fn=xt.length;++At<wn;){var Mt=jd(Ft[At],vn[At]);if(Mt)return At>=Fn?Mt:Mt*(xt[At]=="desc"?-1:1)}return Ge.index-it.index}(we,De,F)})}function k0(b,w,F){for(var ne=-1,ce=w.length,we={};++ne<ce;){var De=w[ne],Ge=ls(b,De);F(Ge,De)&&jf(we,au(De,b),Ge)}return we}function Am(b,w,F,ne){var ce=ne?av:Ih,we=-1,De=w.length,Ge=b;for(b===w&&(w=Ao(w)),F&&(Ge=Gr(b,_o(F)));++we<De;)for(var it=0,xt=w[we],At=F?F(xt):xt;(it=ce(Ge,At,it,ne))>-1;)Ge!==b&&kh.call(Ge,it,1),kh.call(b,it,1);return b}function mv(b,w){for(var F=b?w.length:0,ne=F-1;F--;){var ce=w[F];if(F==ne||ce!==we){var we=ce;Jr(ce)?kh.call(b,ce,1):Fd(b,ce)}}return b}function L0(b,w){return b+Ko(Da()*(w-b+1))}function gv(b,w){var F="";if(!b||w<1||w>x)return F;do w%2&&(F+=b),(w=Ko(w/2))&&(b+=b);while(w);return F}function Si(b,w){return Ev(Wf(b,w,Lr),b+"")}function Mm(b){return Fl(Bi(b))}function mS(b,w){var F=Bi(b);return Bm(F,Xu(w,0,F.length))}function jf(b,w,F,ne){if(!M(b))return b;for(var ce=-1,we=(w=au(w,b)).length,De=we-1,Ge=b;Ge!=null&&++ce<we;){var it=Mc(w[ce]),xt=F;if(it==="__proto__"||it==="constructor"||it==="prototype")return b;if(ce!=De){var At=Ge[it];(xt=ne?ne(At,it,Ge):u)===u&&(xt=M(At)?At:Jr(w[ce+1])?[]:{})}Bh(Ge,it,xt),Ge=Ge[it]}return b}var Ku=$u?function(b,w){return $u.set(b,w),b}:Lr,_i=dm?function(b,w){return dm(b,"toString",{configurable:!0,enumerable:!1,value:za(w),writable:!0})}:Lr;function Ld(b){return Bm(Bi(b))}function Nr(b,w,F){var ne=-1,ce=b.length;w<0&&(w=-w>ce?0:ce+w),(F=F>ce?ce:F)<0&&(F+=ce),ce=w>F?0:F-w>>>0,w>>>=0;for(var we=nn(ce);++ne<ce;)we[ne]=b[ne+w];return we}function iu(b,w){var F;return _l(b,function(ne,ce,we){return!(F=w(ne,ce,we))}),!!F}function Ud(b,w,F){var ne=0,ce=b==null?ne:b.length;if(typeof w=="number"&&w==w&&ce<=2147483647){for(;ne<ce;){var we=ne+ce>>>1,De=b[we];De!==null&&!pe(De)&&(F?De<=w:De<w)?ne=we+1:ce=we}return ce}return Hf(b,w,Lr,F)}function Hf(b,w,F,ne){var ce=0,we=b==null?0:b.length;if(we===0)return 0;for(var De=(w=F(w))!=w,Ge=w===null,it=pe(w),xt=w===u;ce<we;){var At=Ko((ce+we)/2),Ft=F(b[At]),vn=Ft!==u,wn=Ft===null,Fn=Ft==Ft,Mt=pe(Ft);if(De)var Vt=ne||Fn;else Vt=xt?Fn&&(ne||vn):Ge?Fn&&vn&&(ne||!wn):it?Fn&&vn&&!wn&&(ne||!Mt):!wn&&!Mt&&(ne?Ft<=w:Ft<w);Vt?ce=At+1:we=At}return gs(we,4294967294)}function Bd(b,w){for(var F=-1,ne=b.length,ce=0,we=[];++F<ne;){var De=b[F],Ge=w?w(De):De;if(!F||!Qr(Ge,it)){var it=Ge;we[ce++]=De===0?0:De}}return we}function ru(b){return typeof b=="number"?b:pe(b)?I:+b}function Jo(b){if(typeof b=="string")return b;if(kn(b))return Gr(b,Jo)+"";if(pe(b))return Lf?Lf.call(b):"";var w=b+"";return w=="0"&&1/b==-1/0?"-0":w}function su(b,w,F){var ne=-1,ce=Mf,we=b.length,De=!0,Ge=[],it=Ge;if(F)De=!1,ce=Hu;else if(we>=200){var xt=w?null:Kx(b);if(xt)return If(xt);De=!1,ce=Vu,it=new vc}else it=w?[]:Ge;e:for(;++ne<we;){var At=b[ne],Ft=w?w(At):At;if(At=F||At!==0?At:0,De&&Ft==Ft){for(var vn=it.length;vn--;)if(it[vn]===Ft)continue e;w&&it.push(Ft),Ge.push(At)}else ce(it,Ft,F)||(it!==Ge&&it.push(Ft),Ge.push(At))}return Ge}function Fd(b,w){return(b=$0(b,w=au(w,b)))==null||delete b[Mc(Fa(w))]}function U0(b,w,F,ne){return jf(b,w,F(ls(b,w)),ne)}function Ec(b,w,F,ne){for(var ce=b.length,we=ne?ce:-1;(ne?we--:++we<ce)&&w(b[we],we,b););return F?Nr(b,ne?0:we,ne?we+1:ce):Nr(b,ne?we+1:0,ne?ce:we)}function Vf(b,w){var F=b;return F instanceof mi&&(F=F.value()),rv(w,function(ne,ce){return ce.func.apply(ce.thisArg,Kc([ne],ce.args))},F)}function Rm(b,w,F){var ne=b.length;if(ne<2)return ne?su(b[0]):[];for(var ce=-1,we=nn(ne);++ce<ne;)for(var De=b[ce],Ge=-1;++Ge<ne;)Ge!=ce&&(we[ce]=Fh(we[ce]||De,b[Ge],w,F));return su(ta(we,1),w,F)}function zd(b,w,F){for(var ne=-1,ce=b.length,we=w.length,De={};++ne<ce;){var Ge=ne<we?w[ne]:u;F(De,b[ne],Ge)}return De}function Om(b){return es(b)?b:[]}function Tc(b){return typeof b=="function"?b:Lr}function au(b,w){return kn(b)?b:Sv(b,w)?[b]:Tv(Tt(b))}var Xx=Si;function ga(b,w,F){var ne=b.length;return F=F===u?ne:F,!w&&F>=ne?b:Nr(b,w,F)}var B0=en||function(b){return on.clearTimeout(b)};function Jn(b,w){if(w)return b.slice();var F=b.length,ne=A0?A0(F):new b.constructor(F);return b.copy(ne),ne}function Gf(b){var w=new b.constructor(b.byteLength);return new eu(w).set(new eu(b)),w}function vv(b,w){var F=w?Gf(b.buffer):b.buffer;return new b.constructor(F,b.byteOffset,b.length)}function jd(b,w){if(b!==w){var F=b!==u,ne=b===null,ce=b==b,we=pe(b),De=w!==u,Ge=w===null,it=w==w,xt=pe(w);if(!Ge&&!xt&&!we&&b>w||we&&De&&it&&!Ge&&!xt||ne&&De&&it||!F&&it||!ce)return 1;if(!ne&&!we&&!xt&&b<w||xt&&F&&ce&&!ne&&!we||Ge&&F&&ce||!De&&ce||!it)return-1}return 0}function Zu(b,w,F,ne){for(var ce=-1,we=b.length,De=F.length,Ge=-1,it=w.length,xt=qr(we-De,0),At=nn(it+xt),Ft=!ne;++Ge<it;)At[Ge]=w[Ge];for(;++ce<De;)(Ft||ce<we)&&(At[F[ce]]=b[ce]);for(;xt--;)At[Ge++]=b[ce++];return At}function Im(b,w,F,ne){for(var ce=-1,we=b.length,De=-1,Ge=F.length,it=-1,xt=w.length,At=qr(we-Ge,0),Ft=nn(At+xt),vn=!ne;++ce<At;)Ft[ce]=b[ce];for(var wn=ce;++it<xt;)Ft[wn+it]=w[it];for(;++De<Ge;)(vn||ce<we)&&(Ft[wn+F[De]]=b[ce++]);return Ft}function Ao(b,w){var F=-1,ne=b.length;for(w||(w=nn(ne));++F<ne;)w[F]=b[F];return w}function xc(b,w,F,ne){var ce=!F;F||(F={});for(var we=-1,De=w.length;++we<De;){var Ge=w[we],it=ne?ne(F[Ge],b[Ge],Ge,F,b):u;it===u&&(it=b[Ge]),ce?yc(F,Ge,it):Bh(F,Ge,it)}return F}function jh(b,w){return function(F,ne){var ce=kn(F)?rm:R0,we=w?w():{};return ce(F,b,Gn(ne,2),we)}}function qf(b){return Si(function(w,F){var ne=-1,ce=F.length,we=ce>1?F[ce-1]:u,De=ce>2?F[2]:u;for(we=b.length>3&&typeof we=="function"?(ce--,we):u,De&&ro(F[0],F[1],De)&&(we=ce<3?u:we,ce=1),w=Ci(w);++ne<ce;){var Ge=F[ne];Ge&&b(w,Ge,ne,we)}return w})}function gS(b,w){return function(F,ne){if(F==null)return F;if(!ba(F))return b(F,ne);for(var ce=F.length,we=w?ce:-1,De=Ci(F);(w?we--:++we<ce)&&ne(De[we],we,De)!==!1;);return F}}function vS(b){return function(w,F,ne){for(var ce=-1,we=Ci(w),De=ne(w),Ge=De.length;Ge--;){var it=De[b?Ge:++ce];if(F(we[it],it,we)===!1)break}return w}}function yS(b){return function(w){var F=Nh(w=Tt(w))?ms(w):u,ne=F?F[0]:w.charAt(0),ce=F?ga(F,1).join(""):w.slice(1);return ne[b]()+ce}}function Hd(b){return function(w){return rv(bi(kr(w).replace(Vn,"")),b,"")}}function Vd(b){return function(){var w=arguments;switch(w.length){case 0:return new b;case 1:return new b(w[0]);case 2:return new b(w[0],w[1]);case 3:return new b(w[0],w[1],w[2]);case 4:return new b(w[0],w[1],w[2],w[3]);case 5:return new b(w[0],w[1],w[2],w[3],w[4]);case 6:return new b(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new b(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var F=Wu(b.prototype),ne=b.apply(F,w);return M(ne)?ne:F}}function F0(b){return function(w,F,ne){var ce=Ci(w);if(!ba(w)){var we=Gn(F,3);w=un(w),F=function(Ge){return we(ce[Ge],Ge,ce)}}var De=b(w,F,ne);return De>-1?ce[we?w[De]:De]:u}}function $f(b){return Ac(function(w){var F=w.length,ne=F,ce=ma.prototype.thru;for(b&&w.reverse();ne--;){var we=w[ne];if(typeof we!="function")throw new Yo(h);if(ce&&!De&&Ju(we)=="wrapper")var De=new ma([],!0)}for(ne=De?ne:F;++ne<F;){var Ge=Ju(we=w[ne]),it=Ge=="wrapper"?H0(we):u;De=it&&q0(it[0])&&it[1]==424&&!it[4].length&&it[9]==1?De[Ju(it[0])].apply(De,it[3]):we.length==1&&q0(we)?De[Ge]():De.thru(we)}return function(){var xt=arguments,At=xt[0];if(De&&xt.length==1&&kn(At))return De.plant(At).value();for(var Ft=0,vn=F?w[Ft].apply(this,xt):At;++Ft<F;)vn=w[Ft].call(this,vn);return vn}})}function Nm(b,w,F,ne,ce,we,De,Ge,it,xt){var At=w&y,Ft=1&w,vn=2&w,wn=24&w,Fn=512&w,Mt=vn?u:Vd(b);return function Vt(){for(var Kn=arguments.length,kt=nn(Kn),yn=Kn;yn--;)kt[yn]=arguments[yn];if(wn)var Zt=El(Vt),Sn=function(ns,Ro){for(var ar=ns.length,zi=0;ar--;)ns[ar]===Ro&&++zi;return zi}(kt,Zt);if(ne&&(kt=Zu(kt,ne,ce,wn)),we&&(kt=Im(kt,we,De,wn)),Kn-=Sn,wn&&Kn<xt){var Jt=bo(kt,Zt);return bl(b,w,Nm,Vt.placeholder,F,kt,Jt,Ge,it,xt-Kn)}var Mn=Ft?F:this,$r=vn?Mn[b]:b;return Kn=kt.length,Ge?kt=function(ns,Ro){for(var ar=ns.length,zi=gs(Ro.length,ar),Oo=Ao(ns);zi--;){var Vl=Ro[zi];ns[zi]=Jr(Vl,ar)?Oo[Vl]:u}return ns}(kt,Ge):Fn&&Kn>1&&kt.reverse(),At&&it<Kn&&(kt.length=it),this&&this!==on&&this instanceof Vt&&($r=Mt||Vd($r)),$r.apply(Mn,kt)}}function _S(b,w){return function(F,ne){return function(ce,we,De,Ge){return _c(ce,function(it,xt,At){we(Ge,De(it),xt,At)}),Ge}(F,b,w(ne),{})}}function yv(b,w){return function(F,ne){var ce;if(F===u&&ne===u)return w;if(F!==u&&(ce=F),ne!==u){if(ce===u)return ne;typeof F=="string"||typeof ne=="string"?(F=Jo(F),ne=Jo(ne)):(F=ru(F),ne=ru(ne)),ce=b(F,ne)}return ce}}function Pm(b){return Ac(function(w){return w=Gr(w,_o(Gn())),Si(function(F){var ne=this;return b(w,function(ce){return Qa(ce,ne,F)})})})}function jl(b,w){var F=(w=w===u?" ":Jo(w)).length;if(F<2)return F?gv(w,b):w;var ne=gv(w,mc(b/zs(w)));return Nh(w)?ga(ms(ne),0,b).join(""):ne.slice(0,b)}function Ua(b){return function(w,F,ne){return ne&&typeof ne!="number"&&ro(w,F,ne)&&(F=ne=u),w=Oe(w),F===u?(F=w,w=0):F=Oe(F),function(ce,we,De,Ge){for(var it=-1,xt=qr(mc((we-ce)/(De||1)),0),At=nn(xt);xt--;)At[Ge?xt:++it]=ce,ce+=De;return At}(w,F,ne=ne===u?w<F?1:-1:Oe(ne),b)}}function wc(b){return function(w,F){return typeof w=="string"&&typeof F=="string"||(w=mt(w),F=mt(F)),b(w,F)}}function bl(b,w,F,ne,ce,we,De,Ge,it,xt){var At=8&w;w|=At?v:_,4&(w&=~(At?_:v))||(w&=-4);var Ft=[b,w,ce,At?we:u,At?De:u,At?u:we,At?u:De,Ge,it,xt],vn=F.apply(u,Ft);return q0(b)&&Qo(vn,Ft),vn.placeholder=ne,ia(vn,b,w)}function Dm(b){var w=Jc[b];return function(F,ne){if(F=mt(F),(ne=ne==null?0:gs(Te(ne),292))&&js(F)){var ce=(Tt(F)+"e").split("e");return+((ce=(Tt(w(ce[0]+"e"+(+ce[1]+ne)))+"e").split("e"))[0]+"e"+(+ce[1]-ne))}return w(F)}}var Kx=Hs&&1/If(new Hs([,-0]))[1]==T?function(b){return new Hs(b)}:Sa;function io(b){return function(w){var F=na(w);return F==ee?Of(w):F==ae?uS(w):function(ne,ce){return Gr(ce,function(we){return[we,ne[we]]})}(w,b(w))}}function va(b,w,F,ne,ce,we,De,Ge){var it=2&w;if(!it&&typeof b!="function")throw new Yo(h);var xt=ne?ne.length:0;if(xt||(w&=-97,ne=ce=u),De=De===u?De:qr(Te(De),0),Ge=Ge===u?Ge:Te(Ge),xt-=ce?ce.length:0,w&_){var At=ne,Ft=ce;ne=ce=u}var vn=it?u:H0(b),wn=[b,w,F,ne,ce,At,Ft,we,De,Ge];if(vn&&function(Mt,Vt){var Kn=Mt[1],kt=Vt[1],yn=Kn|kt,Zt=yn<131,Sn=kt==y&&Kn==8||kt==y&&Kn==S&&Mt[7].length<=Vt[8]||kt==384&&Vt[7].length<=Vt[8]&&Kn==8;if(!Zt&&!Sn)return Mt;1&kt&&(Mt[2]=Vt[2],yn|=1&Kn?0:4);var Jt=Vt[3];if(Jt){var Mn=Mt[3];Mt[3]=Mn?Zu(Mn,Jt,Vt[4]):Jt,Mt[4]=Mn?bo(Mt[3],f):Vt[4]}(Jt=Vt[5])&&(Mn=Mt[5],Mt[5]=Mn?Im(Mn,Jt,Vt[6]):Jt,Mt[6]=Mn?bo(Mt[5],f):Vt[6]),(Jt=Vt[7])&&(Mt[7]=Jt),kt&y&&(Mt[8]=Mt[8]==null?Vt[8]:gs(Mt[8],Vt[8])),Mt[9]==null&&(Mt[9]=Vt[9]),Mt[0]=Vt[0],Mt[1]=yn}(wn,vn),b=wn[0],w=wn[1],F=wn[2],ne=wn[3],ce=wn[4],!(Ge=wn[9]=wn[9]===u?it?0:b.length:qr(wn[9]-xt,0))&&24&w&&(w&=-25),w&&w!=1)Fn=w==8||w==m?function(Mt,Vt,Kn){var kt=Vd(Mt);return function yn(){for(var Zt=arguments.length,Sn=nn(Zt),Jt=Zt,Mn=El(yn);Jt--;)Sn[Jt]=arguments[Jt];var $r=Zt<3&&Sn[0]!==Mn&&Sn[Zt-1]!==Mn?[]:bo(Sn,Mn);return(Zt-=$r.length)<Kn?bl(Mt,Vt,Nm,yn.placeholder,u,Sn,$r,u,u,Kn-Zt):Qa(this&&this!==on&&this instanceof yn?kt:Mt,this,Sn)}}(b,w,Ge):w!=v&&w!=33||ce.length?Nm.apply(u,wn):function(Mt,Vt,Kn,kt){var yn=1&Vt,Zt=Vd(Mt);return function Sn(){for(var Jt=-1,Mn=arguments.length,$r=-1,ns=kt.length,Ro=nn(ns+Mn),ar=this&&this!==on&&this instanceof Sn?Zt:Mt;++$r<ns;)Ro[$r]=kt[$r];for(;Mn--;)Ro[$r++]=arguments[++Jt];return Qa(ar,yn?Kn:this,Ro)}}(b,w,F,ne);else var Fn=function(Mt,Vt,Kn){var kt=1&Vt,yn=Vd(Mt);return function Zt(){return(this&&this!==on&&this instanceof Zt?yn:Mt).apply(kt?Kn:this,arguments)}}(b,w,F);return ia((vn?Ku:Qo)(Fn,wn),b,w)}function Cc(b,w,F,ne){return b===u||Qr(b,fc[F])&&!er.call(ne,F)?w:b}function Sl(b,w,F,ne,ce,we){return M(b)&&M(w)&&(we.set(w,b),wm(b,w,u,Sl,we),we.delete(w)),b}function Pr(b){return re(b)?u:b}function z0(b,w,F,ne,ce,we){var De=1&F,Ge=b.length,it=w.length;if(Ge!=it&&!(De&&it>Ge))return!1;var xt=we.get(b),At=we.get(w);if(xt&&At)return xt==w&&At==b;var Ft=-1,vn=!0,wn=2&F?new vc:u;for(we.set(b,w),we.set(w,b);++Ft<Ge;){var Fn=b[Ft],Mt=w[Ft];if(ne)var Vt=De?ne(Mt,Fn,Ft,w,b,we):ne(Fn,Mt,Ft,b,w,we);if(Vt!==u){if(Vt)continue;vn=!1;break}if(wn){if(!sv(w,function(Kn,kt){if(!Vu(wn,kt)&&(Fn===Kn||ce(Fn,Kn,F,ne,we)))return wn.push(kt)})){vn=!1;break}}else if(Fn!==Mt&&!ce(Fn,Mt,F,ne,we)){vn=!1;break}}return we.delete(b),we.delete(w),vn}function Ac(b){return Ev(Wf(b,u,TS),b+"")}function j0(b){return zl(b,un,km)}function _v(b){return zl(b,In,V0)}var H0=$u?function(b){return $u.get(b)}:Sa;function Ju(b){for(var w=b.name+"",F=Os[w],ne=er.call(Os,w)?F.length:0;ne--;){var ce=F[ne],we=ce.func;if(we==null||we==b)return ce.name}return w}function El(b){return(er.call(be,"placeholder")?be:b).placeholder}function Gn(){var b=be.iteratee||co;return b=b===co?P0:b,arguments.length?b(arguments[0],arguments[1]):b}function bv(b,w){var F,ne,ce=b.__data__;return((ne=typeof(F=w))=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?F!=="__proto__":F===null)?ce[typeof w=="string"?"string":"hash"]:ce.map}function Bn(b){for(var w=un(b),F=w.length;F--;){var ne=w[F],ce=b[ne];w[F]=[ne,ce,SS(ce)]}return w}function Tl(b,w){var F=function(ne,ce){return ne==null?u:ne[ce]}(b,w);return fS(F)?F:u}var km=pm?function(b){return b==null?[]:(b=Ci(b),dc(pm(b),function(w){return um.call(b,w)}))}:th,V0=pm?function(b){for(var w=[];b;)Kc(w,km(b)),b=Pf(b);return w}:th,na=Is;function Gd(b,w,F){for(var ne=-1,ce=(w=au(w,b)).length,we=!1;++ne<ce;){var De=Mc(w[ne]);if(!(we=b!=null&&F(b,De)))break;b=b[De]}return we||++ne!=ce?we:!!(ce=b==null?0:b.length)&&A(ce)&&Jr(De,ce)&&(kn(b)||fr(b))}function bS(b){return typeof b.constructor!="function"||Lm(b)?{}:Wu(Pf(b))}function G0(b){return kn(b)||fr(b)||!!(hm&&b&&b[hm])}function Jr(b,w){var F=typeof b;return!!(w=w??x)&&(F=="number"||F!="symbol"&&Kt.test(b))&&b>-1&&b%1==0&&b<w}function ro(b,w,F){if(!M(F))return!1;var ne=typeof w;return!!(ne=="number"?ba(F)&&Jr(w,F.length):ne=="string"&&w in F)&&Qr(F[w],b)}function Sv(b,w){if(kn(b))return!1;var F=typeof b;return!(F!="number"&&F!="symbol"&&F!="boolean"&&b!=null&&!pe(b))||We.test(b)||!Ve.test(b)||w!=null&&b in Ci(w)}function q0(b){var w=Ju(b),F=be[w];if(typeof F!="function"||!(w in mi.prototype))return!1;if(b===F)return!0;var ne=H0(F);return!!ne&&b===ne[0]}(mm&&na(new mm(new ArrayBuffer(1)))!=_e||ka&&na(new ka)!=ee||Rt&&na(Rt.resolve())!=X||Hs&&na(new Hs)!=ae||kf&&na(new kf)!=Ne)&&(na=function(b){var w=Is(b),F=w==Q?b.constructor:u,ne=F?qd(F):"";if(ne)switch(ne){case gm:return _e;case To:return ee;case dS:return X;case yl:return ae;case kd:return Ne}return w});var Zx=Xo?O:du;function Lm(b){var w=b&&b.constructor;return b===(typeof w=="function"&&w.prototype||fc)}function SS(b){return b==b&&!M(b)}function ES(b,w){return function(F){return F!=null&&F[b]===w&&(w!==u||b in Ci(F))}}function Wf(b,w,F){return w=qr(w===u?b.length-1:w,0),function(){for(var ne=arguments,ce=-1,we=qr(ne.length-w,0),De=nn(we);++ce<we;)De[ce]=ne[w+ce];ce=-1;for(var Ge=nn(w+1);++ce<w;)Ge[ce]=ne[ce];return Ge[w]=F(De),Qa(b,this,Ge)}}function $0(b,w){return w.length<2?b:ls(b,Nr(w,0,-1))}function Um(b,w){if((w!=="constructor"||typeof b[w]!="function")&&w!="__proto__")return b[w]}var Qo=Xf(Ku),Yf=fm||function(b,w){return on.setTimeout(b,w)},Ev=Xf(_i);function ia(b,w,F){var ne=w+"";return Ev(b,function(ce,we){var De=we.length;if(!De)return ce;var Ge=De-1;return we[Ge]=(De>1?"& ":"")+we[Ge],we=we.join(De>2?", ":" "),ce.replace(K,`{
/* [wrapped with `+we+`] */
`)}(ne,function(ce,we){return eo(N,function(De){var Ge="_."+De[0];we&De[1]&&!Mf(ce,Ge)&&ce.push(Ge)}),ce.sort()}(function(ce){var we=ce.match(me);return we?we[1].split(Pe):[]}(ne),F)))}function Xf(b){var w=0,F=0;return function(){var ne=ui(),ce=16-(ne-F);if(F=ne,ce>0){if(++w>=800)return arguments[0]}else w=0;return b.apply(u,arguments)}}function Bm(b,w){var F=-1,ne=b.length,ce=ne-1;for(w=w===u?ne:w;++F<w;){var we=L0(F,ce),De=b[we];b[we]=b[F],b[F]=De}return b.length=w,b}var Tv=function(b){var w=oo(b,function(ne){return F.size===500&&F.clear(),ne}),F=w.cache;return w}(function(b){var w=[];return b.charCodeAt(0)===46&&w.push(""),b.replace(Ut,function(F,ne,ce,we){w.push(ce?we.replace(ft,"$1"):ne||F)}),w});function Mc(b){if(typeof b=="string"||pe(b))return b;var w=b+"";return w=="0"&&1/b==-1/0?"-0":w}function qd(b){if(b!=null){try{return ea.call(b)}catch{}try{return b+""}catch{}}return""}function W0(b){if(b instanceof mi)return b.clone();var w=new ma(b.__wrapped__,b.__chain__);return w.__actions__=Ao(b.__actions__),w.__index__=b.__index__,w.__values__=b.__values__,w}var Kf=Si(function(b,w){return es(b)?Fh(b,ta(w,1,es,!0)):[]}),ra=Si(function(b,w){var F=Fa(w);return es(F)&&(F=u),es(b)?Fh(b,ta(w,1,es,!0),Gn(F,2)):[]}),Zf=Si(function(b,w){var F=Fa(w);return es(F)&&(F=u),es(b)?Fh(b,ta(w,1,es,!0),u,F):[]});function Ns(b,w,F){var ne=b==null?0:b.length;if(!ne)return-1;var ce=F==null?0:Te(F);return ce<0&&(ce=qr(ne+ce,0)),Oh(b,Gn(w,3),ce)}function ou(b,w,F){var ne=b==null?0:b.length;if(!ne)return-1;var ce=ne-1;return F!==u&&(ce=Te(F),ce=F<0?qr(ne+ce,0):gs(ce,ne-1)),Oh(b,Gn(w,3),ce,!0)}function TS(b){return b!=null&&b.length?ta(b,1):[]}function Jf(b){return b&&b.length?b[0]:u}var xv=Si(function(b){var w=Gr(b,Om);return w.length&&w[0]===b[0]?fv(w):[]}),so=Si(function(b){var w=Fa(b),F=Gr(b,Om);return w===Fa(F)?w=u:F.pop(),F.length&&F[0]===b[0]?fv(F,Gn(w,2)):[]}),Ba=Si(function(b){var w=Fa(b),F=Gr(b,Om);return(w=typeof w=="function"?w:u)&&F.pop(),F.length&&F[0]===b[0]?fv(F,u,w):[]});function Fa(b){var w=b==null?0:b.length;return w?b[w-1]:u}var Y0=Si(xS);function xS(b,w){return b&&b.length&&w&&w.length?Am(b,w):b}var Qu=Ac(function(b,w){var F=b==null?0:b.length,ne=_m(b,w);return mv(b,Gr(w,function(ce){return Jr(ce,F)?+ce:ce}).sort(jd)),ne});function $i(b){return b==null?b:Dd.call(b)}var Jx=Si(function(b){return su(ta(b,1,es,!0))}),Qx=Si(function(b){var w=Fa(b);return es(w)&&(w=u),su(ta(b,1,es,!0),Gn(w,2))}),e1=Si(function(b){var w=Fa(b);return w=typeof w=="function"?w:u,su(ta(b,1,es,!0),u,w)});function Qf(b){if(!b||!b.length)return[];var w=0;return b=dc(b,function(F){if(es(F))return w=qr(F.length,w),!0}),Rf(w,function(F){return Gr(b,sm(F))})}function ep(b,w){if(!b||!b.length)return[];var F=Qf(b);return w==null?F:Gr(F,function(ne){return Qa(w,u,ne)})}var Fm=Si(function(b,w){return es(b)?Fh(b,w):[]}),t1=Si(function(b){return Rm(dc(b,es))}),n1=Si(function(b){var w=Fa(b);return es(w)&&(w=u),Rm(dc(b,es),Gn(w,2))}),wS=Si(function(b){var w=Fa(b);return w=typeof w=="function"?w:u,Rm(dc(b,es),u,w)}),Rc=Si(Qf),Oc=Si(function(b){var w=b.length,F=w>1?b[w-1]:u;return F=typeof F=="function"?(b.pop(),F):u,ep(b,F)});function ya(b){var w=be(b);return w.__chain__=!0,w}function lu(b,w){return w(b)}var eh=Ac(function(b){var w=b.length,F=w?b[0]:0,ne=this.__wrapped__,ce=function(we){return _m(we,b)};return!(w>1||this.__actions__.length)&&ne instanceof mi&&Jr(F)?((ne=ne.slice(F,+F+(w?1:0))).__actions__.push({func:lu,args:[ce],thisArg:u}),new ma(ne,this.__chain__).thru(function(we){return w&&!we.length&&we.push(u),we})):this.thru(ce)}),cu=jh(function(b,w,F){er.call(b,F)?++b[F]:yc(b,F,1)}),cs=F0(Ns),ao=F0(ou);function X0(b,w){return(kn(b)?eo:_l)(b,Gn(w,3))}function zm(b,w){return(kn(b)?sS:bm)(b,Gn(w,3))}var K0=jh(function(b,w,F){er.call(b,F)?b[F].push(w):yc(b,F,[w])}),i1=Si(function(b,w,F){var ne=-1,ce=typeof w=="function",we=ba(b)?nn(b.length):[];return _l(b,function(De){we[++ne]=ce?Qa(w,De,F):Co(De,w,F)}),we}),CS=jh(function(b,w,F){yc(b,F,w)});function wv(b,w){return(kn(b)?Gr:Sc)(b,Gn(w,3))}var Z0=jh(function(b,w,F){b[F?0:1].push(w)},function(){return[[],[]]}),r1=Si(function(b,w){if(b==null)return[];var F=w.length;return F>1&&ro(b,w[0],w[1])?w=[]:F>2&&ro(w[0],w[1],w[2])&&(w=[w[0]]),zh(b,ta(w,1),[])}),Vs=Rs||function(){return on.Date.now()};function tp(b,w,F){return w=F?u:w,w=b&&w==null?b.length:w,va(b,y,u,u,u,u,w)}function Cv(b,w){var F;if(typeof w!="function")throw new Yo(h);return b=Te(b),function(){return--b>0&&(F=w.apply(this,arguments)),b<=1&&(w=u),F}}var J0=Si(function(b,w,F){var ne=1;if(F.length){var ce=bo(F,El(J0));ne|=v}return va(b,ne,w,F,ce)}),Q0=Si(function(b,w,F){var ne=3;if(F.length){var ce=bo(F,El(Q0));ne|=v}return va(w,ne,b,F,ce)});function e_(b,w,F){var ne,ce,we,De,Ge,it,xt=0,At=!1,Ft=!1,vn=!0;if(typeof b!="function")throw new Yo(h);function wn(kt){var yn=ne,Zt=ce;return ne=ce=u,xt=kt,De=b.apply(Zt,yn)}function Fn(kt){var yn=kt-it;return it===u||yn>=w||yn<0||Ft&&kt-xt>=we}function Mt(){var kt=Vs();if(Fn(kt))return Vt(kt);Ge=Yf(Mt,function(yn){var Zt=w-(yn-it);return Ft?gs(Zt,we-(yn-xt)):Zt}(kt))}function Vt(kt){return Ge=u,vn&&ne?wn(kt):(ne=ce=u,De)}function Kn(){var kt=Vs(),yn=Fn(kt);if(ne=arguments,ce=this,it=kt,yn){if(Ge===u)return function(Zt){return xt=Zt,Ge=Yf(Mt,w),At?wn(Zt):De}(it);if(Ft)return B0(Ge),Ge=Yf(Mt,w),wn(it)}return Ge===u&&(Ge=Yf(Mt,w)),De}return w=mt(w)||0,M(F)&&(At=!!F.leading,we=(Ft="maxWait"in F)?qr(mt(F.maxWait)||0,w):we,vn="trailing"in F?!!F.trailing:vn),Kn.cancel=function(){Ge!==u&&B0(Ge),xt=0,ne=it=ce=Ge=u},Kn.flush=function(){return Ge===u?De:Vt(Vs())},Kn}var _a=Si(function(b,w){return dv(b,1,w)}),Hh=Si(function(b,w,F){return dv(b,mt(w)||0,F)});function oo(b,w){if(typeof b!="function"||w!=null&&typeof w!="function")throw new Yo(h);var F=function(){var ne=arguments,ce=w?w.apply(this,ne):ne[0],we=F.cache;if(we.has(ce))return we.get(ce);var De=b.apply(this,ne);return F.cache=we.set(ce,De)||we,De};return F.cache=new(oo.Cache||Zo),F}function lo(b){if(typeof b!="function")throw new Yo(h);return function(){var w=arguments;switch(w.length){case 0:return!b.call(this);case 1:return!b.call(this,w[0]);case 2:return!b.call(this,w[0],w[1]);case 3:return!b.call(this,w[0],w[1],w[2])}return!b.apply(this,w)}}oo.Cache=Zo;var s1=Xx(function(b,w){var F=(w=w.length==1&&kn(w[0])?Gr(w[0],_o(Gn())):Gr(ta(w,1),_o(Gn()))).length;return Si(function(ne){for(var ce=-1,we=gs(ne.length,F);++ce<we;)ne[ce]=w[ce].call(this,ne[ce]);return Qa(b,this,ne)})}),Av=Si(function(b,w){var F=bo(w,El(Av));return va(b,v,u,w,F)}),jm=Si(function(b,w){var F=bo(w,El(jm));return va(b,_,u,w,F)}),sa=Ac(function(b,w){return va(b,S,u,u,u,w)});function Qr(b,w){return b===w||b!=b&&w!=w}var uu=wc(dr),a1=wc(function(b,w){return b>=w}),fr=Em(function(){return arguments}())?Em:function(b){return D(b)&&er.call(b,"callee")&&!um.call(b,"callee")},kn=nn.isArray,AS=Id?_o(Id):function(b){return D(b)&&Is(b)==ve};function ba(b){return b!=null&&A(b.length)&&!O(b)}function es(b){return D(b)&&ba(b)}var Vh=Pd||du,np=ju?_o(ju):function(b){return D(b)&&Is(b)==Z};function t_(b){if(!D(b))return!1;var w=Is(b);return w==H||w=="[object DOMException]"||typeof b.message=="string"&&typeof b.name=="string"&&!re(b)}function O(b){if(!M(b))return!1;var w=Is(b);return w==q||w==U||w=="[object AsyncFunction]"||w=="[object Proxy]"}function E(b){return typeof b=="number"&&b==Te(b)}function A(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=x}function M(b){var w=typeof b;return b!=null&&(w=="object"||w=="function")}function D(b){return b!=null&&typeof b=="object"}var B=Xc?_o(Xc):function(b){return D(b)&&na(b)==ee};function G(b){return typeof b=="number"||D(b)&&Is(b)==W}function re(b){if(!D(b)||Is(b)!=Q)return!1;var w=Pf(b);if(w===null)return!0;var F=er.call(w,"constructor")&&w.constructor;return typeof F=="function"&&F instanceof F&&ea.call(F)==Dh}var oe=nm?_o(nm):function(b){return D(b)&&Is(b)==Y},J=iv?_o(iv):function(b){return D(b)&&na(b)==ae};function le(b){return typeof b=="string"||!kn(b)&&D(b)&&Is(b)==se}function pe(b){return typeof b=="symbol"||D(b)&&Is(b)==ue}var ye=im?_o(im):function(b){return D(b)&&A(b.length)&&!!ri[Is(b)]},Ie=wc(pv),Xe=wc(function(b,w){return b<=w});function qe(b){if(!b)return[];if(ba(b))return le(b)?ms(b):Ao(b);if(pc&&b[pc])return function(F){for(var ne,ce=[];!(ne=F.next()).done;)ce.push(ne.value);return ce}(b[pc]());var w=na(b);return(w==ee?Of:w==ae?If:Bi)(b)}function Oe(b){return b?(b=mt(b))===T||b===-1/0?17976931348623157e292*(b<0?-1:1):b==b?b:0:b===0?b:0}function Te(b){var w=Oe(b),F=w%1;return w==w?F?w-F:w:0}function rt(b){return b?Xu(Te(b),0,R):0}function mt(b){if(typeof b=="number")return b;if(pe(b))return I;if(M(b)){var w=typeof b.valueOf=="function"?b.valueOf():b;b=M(w)?w+"":w}if(typeof b!="string")return b===0?b:+b;b=C0(b);var F=nt.test(b);return F||Wt.test(b)?da(b.slice(2),F?2:8):It.test(b)?I:+b}function jt(b){return xc(b,In(b))}function Tt(b){return b==null?"":Jo(b)}var Dn=qf(function(b,w){if(Lm(w)||ba(w))xc(w,un(w),b);else for(var F in w)er.call(w,F)&&Bh(b,F,w[F])}),pn=qf(function(b,w){xc(w,In(w),b)}),Qn=qf(function(b,w,F,ne){xc(w,In(w),b,ne)}),gi=qf(function(b,w,F,ne){xc(w,un(w),b,ne)}),hi=Ac(_m),si=Si(function(b,w){b=Ci(b);var F=-1,ne=w.length,ce=ne>2?w[2]:u;for(ce&&ro(w[0],w[1],ce)&&(ne=1);++F<ne;)for(var we=w[F],De=In(we),Ge=-1,it=De.length;++Ge<it;){var xt=De[Ge],At=b[xt];(At===u||Qr(At,fc[xt])&&!er.call(b,xt))&&(b[xt]=we[xt])}return b}),ei=Si(function(b){return b.push(u,Sl),Qa(Sr,u,b)});function oi(b,w,F){var ne=b==null?u:ls(b,w);return ne===u?F:ne}function di(b,w){return b!=null&&Gd(b,w,zf)}var ti=_S(function(b,w,F){w!=null&&typeof w.toString!="function"&&(w=Ph.call(w)),b[w]=F},za(Lr)),li=_S(function(b,w,F){w!=null&&typeof w.toString!="function"&&(w=Ph.call(w)),er.call(b,w)?b[w].push(F):b[w]=[F]},Gn),qn=Si(Co);function un(b){return ba(b)?uv(b):D0(b)}function In(b){return ba(b)?uv(b,!0):pS(b)}var Ei=qf(function(b,w,F){wm(b,w,F)}),Sr=qf(function(b,w,F,ne){wm(b,w,F,ne)}),jr=Ac(function(b,w){var F={};if(b==null)return F;var ne=!1;w=Gr(w,function(we){return we=au(we,b),ne||(ne=we.length>1),we}),xc(b,_v(b),F),ne&&(F=wo(F,7,Pr));for(var ce=w.length;ce--;)Fd(F,w[ce]);return F}),Er=Ac(function(b,w){return b==null?{}:function(F,ne){return k0(F,ne,function(ce,we){return di(F,we)})}(b,w)});function Dr(b,w){if(b==null)return{};var F=Gr(_v(b),function(ne){return[ne]});return w=Gn(w),k0(b,F,function(ne,ce){return w(ne,ce[0])})}var Tr=io(un),sr=io(In);function Bi(b){return b==null?[]:Zr(b,un(b))}var vr=Hd(function(b,w,F){return w=w.toLowerCase(),b+(F?xr(w):w)});function xr(b){return Ln(Tt(b).toLowerCase())}function kr(b){return(b=Tt(b))&&b.replace(je,lS).replace(mn,"")}var vs=Hd(function(b,w,F){return b+(F?"-":"")+w.toLowerCase()}),Ps=Hd(function(b,w,F){return b+(F?" ":"")+w.toLowerCase()}),Hr=yS("toLowerCase"),ts=Hd(function(b,w,F){return b+(F?"_":"")+w.toLowerCase()}),Fi=Hd(function(b,w,F){return b+(F?" ":"")+Ln(w)}),Gs=Hd(function(b,w,F){return b+(F?" ":"")+w.toUpperCase()}),Ln=yS("toUpperCase");function bi(b,w,F){return b=Tt(b),(w=F?u:w)===u?function(ne){return zr.test(ne)}(b)?function(ne){return ne.match(Di)||[]}(b):function(ne){return ne.match(Ue)||[]}(b):b.match(w)||[]}var tr=Si(function(b,w){try{return Qa(b,u,w)}catch(F){return t_(F)?F:new yi(F)}}),aa=Ac(function(b,w){return eo(w,function(F){F=Mc(F),yc(b,F,J0(b[F],b))}),b});function za(b){return function(){return b}}var Mo=$f(),el=$f(!0);function Lr(b){return b}function co(b){return P0(typeof b=="function"?b:wo(b,1))}var hu=Si(function(b,w){return function(F){return Co(F,b,w)}}),Hl=Si(function(b,w){return function(F){return Co(b,F,w)}});function qs(b,w,F){var ne=un(w),ce=bc(w,ne);F!=null||M(w)&&(ce.length||!ne.length)||(F=w,w=b,b=this,ce=bc(w,un(w)));var we=!(M(F)&&"chain"in F&&!F.chain),De=O(b);return eo(ce,function(Ge){var it=w[Ge];b[Ge]=it,De&&(b.prototype[Ge]=function(){var xt=this.__chain__;if(we||xt){var At=b(this.__wrapped__);return(At.__actions__=Ao(this.__actions__)).push({func:it,args:arguments,thisArg:b}),At.__chain__=xt,At}return it.apply(b,Kc([this.value()],arguments))})}),b}function Sa(){}var ja=Pm(Gr),uo=Pm(b0),Gh=Pm(sv);function qh(b){return Sv(b)?sm(Mc(b)):function(w){return function(F){return ls(F,w)}}(b)}var $d=Ua(),us=Ua(!0);function th(){return[]}function du(){return!1}var Ic=yv(function(b,w){return b+w},0),xl=Dm("ceil"),Hm=yv(function(b,w){return b/w},1),Mv=Dm("floor"),Vm,yr=yv(function(b,w){return b*w},1),Gm=Dm("round"),fu=yv(function(b,w){return b-w},0);return be.after=function(b,w){if(typeof w!="function")throw new Yo(h);return b=Te(b),function(){if(--b<1)return w.apply(this,arguments)}},be.ary=tp,be.assign=Dn,be.assignIn=pn,be.assignInWith=Qn,be.assignWith=gi,be.at=hi,be.before=Cv,be.bind=J0,be.bindAll=aa,be.bindKey=Q0,be.castArray=function(){if(!arguments.length)return[];var b=arguments[0];return kn(b)?b:[b]},be.chain=ya,be.chunk=function(b,w,F){w=(F?ro(b,w,F):w===u)?1:qr(Te(w),0);var ne=b==null?0:b.length;if(!ne||w<1)return[];for(var ce=0,we=0,De=nn(mc(ne/w));ce<ne;)De[we++]=Nr(b,ce,ce+=w);return De},be.compact=function(b){for(var w=-1,F=b==null?0:b.length,ne=0,ce=[];++w<F;){var we=b[w];we&&(ce[ne++]=we)}return ce},be.concat=function(){var b=arguments.length;if(!b)return[];for(var w=nn(b-1),F=arguments[0],ne=b;ne--;)w[ne-1]=arguments[ne];return Kc(kn(F)?Ao(F):[F],ta(w,1))},be.cond=function(b){var w=b==null?0:b.length,F=Gn();return b=w?Gr(b,function(ne){if(typeof ne[1]!="function")throw new Yo(h);return[F(ne[0]),ne[1]]}):[],Si(function(ne){for(var ce=-1;++ce<w;){var we=b[ce];if(Qa(we[0],this,ne))return Qa(we[1],this,ne)}})},be.conforms=function(b){return function(w){var F=un(w);return function(ne){return Ir(ne,w,F)}}(wo(b,1))},be.constant=za,be.countBy=cu,be.create=function(b,w){var F=Wu(b);return w==null?F:no(F,w)},be.curry=function b(w,F,ne){var ce=va(w,8,u,u,u,u,u,F=ne?u:F);return ce.placeholder=b.placeholder,ce},be.curryRight=function b(w,F,ne){var ce=va(w,m,u,u,u,u,u,F=ne?u:F);return ce.placeholder=b.placeholder,ce},be.debounce=e_,be.defaults=si,be.defaultsDeep=ei,be.defer=_a,be.delay=Hh,be.difference=Kf,be.differenceBy=ra,be.differenceWith=Zf,be.drop=function(b,w,F){var ne=b==null?0:b.length;return ne?Nr(b,(w=F||w===u?1:Te(w))<0?0:w,ne):[]},be.dropRight=function(b,w,F){var ne=b==null?0:b.length;return ne?Nr(b,0,(w=ne-(w=F||w===u?1:Te(w)))<0?0:w):[]},be.dropRightWhile=function(b,w){return b&&b.length?Ec(b,Gn(w,3),!0,!0):[]},be.dropWhile=function(b,w){return b&&b.length?Ec(b,Gn(w,3),!0):[]},be.fill=function(b,w,F,ne){var ce=b==null?0:b.length;return ce?(F&&typeof F!="number"&&ro(b,w,F)&&(F=0,ne=ce),function(we,De,Ge,it){var xt=we.length;for((Ge=Te(Ge))<0&&(Ge=-Ge>xt?0:xt+Ge),(it=it===u||it>xt?xt:Te(it))<0&&(it+=xt),it=Ge>it?0:rt(it);Ge<it;)we[Ge++]=De;return we}(b,w,F,ne)):[]},be.filter=function(b,w){return(kn(b)?dc:Bf)(b,Gn(w,3))},be.flatMap=function(b,w){return ta(wv(b,w),1)},be.flatMapDeep=function(b,w){return ta(wv(b,w),T)},be.flatMapDepth=function(b,w,F){return F=F===u?1:Te(F),ta(wv(b,w),F)},be.flatten=TS,be.flattenDeep=function(b){return b!=null&&b.length?ta(b,T):[]},be.flattenDepth=function(b,w){return b!=null&&b.length?ta(b,w=w===u?1:Te(w)):[]},be.flip=function(b){return va(b,512)},be.flow=Mo,be.flowRight=el,be.fromPairs=function(b){for(var w=-1,F=b==null?0:b.length,ne={};++w<F;){var ce=b[w];ne[ce[0]]=ce[1]}return ne},be.functions=function(b){return b==null?[]:bc(b,un(b))},be.functionsIn=function(b){return b==null?[]:bc(b,In(b))},be.groupBy=K0,be.initial=function(b){return b!=null&&b.length?Nr(b,0,-1):[]},be.intersection=xv,be.intersectionBy=so,be.intersectionWith=Ba,be.invert=ti,be.invertBy=li,be.invokeMap=i1,be.iteratee=co,be.keyBy=CS,be.keys=un,be.keysIn=In,be.map=wv,be.mapKeys=function(b,w){var F={};return w=Gn(w,3),_c(b,function(ne,ce,we){yc(F,w(ne,ce,we),ne)}),F},be.mapValues=function(b,w){var F={};return w=Gn(w,3),_c(b,function(ne,ce,we){yc(F,ce,w(ne,ce,we))}),F},be.matches=function(b){return xm(wo(b,1))},be.matchesProperty=function(b,w){return nu(b,wo(w,1))},be.memoize=oo,be.merge=Ei,be.mergeWith=Sr,be.method=hu,be.methodOf=Hl,be.mixin=qs,be.negate=lo,be.nthArg=function(b){return b=Te(b),Si(function(w){return Cm(w,b)})},be.omit=jr,be.omitBy=function(b,w){return Dr(b,lo(Gn(w)))},be.once=function(b){return Cv(2,b)},be.orderBy=function(b,w,F,ne){return b==null?[]:(kn(w)||(w=w==null?[]:[w]),kn(F=ne?u:F)||(F=F==null?[]:[F]),zh(b,w,F))},be.over=ja,be.overArgs=s1,be.overEvery=uo,be.overSome=Gh,be.partial=Av,be.partialRight=jm,be.partition=Z0,be.pick=Er,be.pickBy=Dr,be.property=qh,be.propertyOf=function(b){return function(w){return b==null?u:ls(b,w)}},be.pull=Y0,be.pullAll=xS,be.pullAllBy=function(b,w,F){return b&&b.length&&w&&w.length?Am(b,w,Gn(F,2)):b},be.pullAllWith=function(b,w,F){return b&&b.length&&w&&w.length?Am(b,w,u,F):b},be.pullAt=Qu,be.range=$d,be.rangeRight=us,be.rearg=sa,be.reject=function(b,w){return(kn(b)?dc:Bf)(b,lo(Gn(w,3)))},be.remove=function(b,w){var F=[];if(!b||!b.length)return F;var ne=-1,ce=[],we=b.length;for(w=Gn(w,3);++ne<we;){var De=b[ne];w(De,ne,b)&&(F.push(De),ce.push(ne))}return mv(b,ce),F},be.rest=function(b,w){if(typeof b!="function")throw new Yo(h);return Si(b,w=w===u?w:Te(w))},be.reverse=$i,be.sampleSize=function(b,w,F){return w=(F?ro(b,w,F):w===u)?1:Te(w),(kn(b)?hv:mS)(b,w)},be.set=function(b,w,F){return b==null?b:jf(b,w,F)},be.setWith=function(b,w,F,ne){return ne=typeof ne=="function"?ne:u,b==null?b:jf(b,w,F,ne)},be.shuffle=function(b){return(kn(b)?vm:Ld)(b)},be.slice=function(b,w,F){var ne=b==null?0:b.length;return ne?(F&&typeof F!="number"&&ro(b,w,F)?(w=0,F=ne):(w=w==null?0:Te(w),F=F===u?ne:Te(F)),Nr(b,w,F)):[]},be.sortBy=r1,be.sortedUniq=function(b){return b&&b.length?Bd(b):[]},be.sortedUniqBy=function(b,w){return b&&b.length?Bd(b,Gn(w,2)):[]},be.split=function(b,w,F){return F&&typeof F!="number"&&ro(b,w,F)&&(w=F=u),(F=F===u?R:F>>>0)?(b=Tt(b))&&(typeof w=="string"||w!=null&&!oe(w))&&!(w=Jo(w))&&Nh(b)?ga(ms(b),0,F):b.split(w,F):[]},be.spread=function(b,w){if(typeof b!="function")throw new Yo(h);return w=w==null?0:qr(Te(w),0),Si(function(F){var ne=F[w],ce=ga(F,0,w);return ne&&Kc(ce,ne),Qa(b,this,ce)})},be.tail=function(b){var w=b==null?0:b.length;return w?Nr(b,1,w):[]},be.take=function(b,w,F){return b&&b.length?Nr(b,0,(w=F||w===u?1:Te(w))<0?0:w):[]},be.takeRight=function(b,w,F){var ne=b==null?0:b.length;return ne?Nr(b,(w=ne-(w=F||w===u?1:Te(w)))<0?0:w,ne):[]},be.takeRightWhile=function(b,w){return b&&b.length?Ec(b,Gn(w,3),!1,!0):[]},be.takeWhile=function(b,w){return b&&b.length?Ec(b,Gn(w,3)):[]},be.tap=function(b,w){return w(b),b},be.throttle=function(b,w,F){var ne=!0,ce=!0;if(typeof b!="function")throw new Yo(h);return M(F)&&(ne="leading"in F?!!F.leading:ne,ce="trailing"in F?!!F.trailing:ce),e_(b,w,{leading:ne,maxWait:w,trailing:ce})},be.thru=lu,be.toArray=qe,be.toPairs=Tr,be.toPairsIn=sr,be.toPath=function(b){return kn(b)?Gr(b,Mc):pe(b)?[b]:Ao(Tv(Tt(b)))},be.toPlainObject=jt,be.transform=function(b,w,F){var ne=kn(b),ce=ne||Vh(b)||ye(b);if(w=Gn(w,4),F==null){var we=b&&b.constructor;F=ce?ne?new we:[]:M(b)&&O(we)?Wu(Pf(b)):{}}return(ce?eo:_c)(b,function(De,Ge,it){return w(F,De,Ge,it)}),F},be.unary=function(b){return tp(b,1)},be.union=Jx,be.unionBy=Qx,be.unionWith=e1,be.uniq=function(b){return b&&b.length?su(b):[]},be.uniqBy=function(b,w){return b&&b.length?su(b,Gn(w,2)):[]},be.uniqWith=function(b,w){return w=typeof w=="function"?w:u,b&&b.length?su(b,u,w):[]},be.unset=function(b,w){return b==null||Fd(b,w)},be.unzip=Qf,be.unzipWith=ep,be.update=function(b,w,F){return b==null?b:U0(b,w,Tc(F))},be.updateWith=function(b,w,F,ne){return ne=typeof ne=="function"?ne:u,b==null?b:U0(b,w,Tc(F),ne)},be.values=Bi,be.valuesIn=function(b){return b==null?[]:Zr(b,In(b))},be.without=Fm,be.words=bi,be.wrap=function(b,w){return Av(Tc(w),b)},be.xor=t1,be.xorBy=n1,be.xorWith=wS,be.zip=Rc,be.zipObject=function(b,w){return zd(b||[],w||[],Bh)},be.zipObjectDeep=function(b,w){return zd(b||[],w||[],jf)},be.zipWith=Oc,be.entries=Tr,be.entriesIn=sr,be.extend=pn,be.extendWith=Qn,qs(be,be),be.add=Ic,be.attempt=tr,be.camelCase=vr,be.capitalize=xr,be.ceil=xl,be.clamp=function(b,w,F){return F===u&&(F=w,w=u),F!==u&&(F=(F=mt(F))==F?F:0),w!==u&&(w=(w=mt(w))==w?w:0),Xu(mt(b),w,F)},be.clone=function(b){return wo(b,4)},be.cloneDeep=function(b){return wo(b,5)},be.cloneDeepWith=function(b,w){return wo(b,5,w=typeof w=="function"?w:u)},be.cloneWith=function(b,w){return wo(b,4,w=typeof w=="function"?w:u)},be.conformsTo=function(b,w){return w==null||Ir(b,w,un(w))},be.deburr=kr,be.defaultTo=function(b,w){return b==null||b!=b?w:b},be.divide=Hm,be.endsWith=function(b,w,F){b=Tt(b),w=Jo(w);var ne=b.length,ce=F=F===u?ne:Xu(Te(F),0,ne);return(F-=w.length)>=0&&b.slice(F,ce)==w},be.eq=Qr,be.escape=function(b){return(b=Tt(b))&&he.test(b)?b.replace(Ce,am):b},be.escapeRegExp=function(b){return(b=Tt(b))&&tn.test(b)?b.replace(_t,"\\$&"):b},be.every=function(b,w,F){var ne=kn(b)?b0:O0;return F&&ro(b,w,F)&&(w=u),ne(b,Gn(w,3))},be.find=cs,be.findIndex=Ns,be.findKey=function(b,w){return E0(b,Gn(w,3),_c)},be.findLast=ao,be.findLastIndex=ou,be.findLastKey=function(b,w){return E0(b,Gn(w,3),N0)},be.floor=Mv,be.forEach=X0,be.forEachRight=zm,be.forIn=function(b,w){return b==null?b:Sm(b,Gn(w,3),In)},be.forInRight=function(b,w){return b==null?b:I0(b,Gn(w,3),In)},be.forOwn=function(b,w){return b&&_c(b,Gn(w,3))},be.forOwnRight=function(b,w){return b&&N0(b,Gn(w,3))},be.get=oi,be.gt=uu,be.gte=a1,be.has=function(b,w){return b!=null&&Gd(b,w,Ff)},be.hasIn=di,be.head=Jf,be.identity=Lr,be.includes=function(b,w,F,ne){b=ba(b)?b:Bi(b),F=F&&!ne?Te(F):0;var ce=b.length;return F<0&&(F=qr(ce+F,0)),le(b)?F<=ce&&b.indexOf(w,F)>-1:!!ce&&Ih(b,w,F)>-1},be.indexOf=function(b,w,F){var ne=b==null?0:b.length;if(!ne)return-1;var ce=F==null?0:Te(F);return ce<0&&(ce=qr(ne+ce,0)),Ih(b,w,ce)},be.inRange=function(b,w,F){return w=Oe(w),F===u?(F=w,w=0):F=Oe(F),function(ne,ce,we){return ne>=gs(ce,we)&&ne<qr(ce,we)}(b=mt(b),w,F)},be.invoke=qn,be.isArguments=fr,be.isArray=kn,be.isArrayBuffer=AS,be.isArrayLike=ba,be.isArrayLikeObject=es,be.isBoolean=function(b){return b===!0||b===!1||D(b)&&Is(b)==z},be.isBuffer=Vh,be.isDate=np,be.isElement=function(b){return D(b)&&b.nodeType===1&&!re(b)},be.isEmpty=function(b){if(b==null)return!0;if(ba(b)&&(kn(b)||typeof b=="string"||typeof b.splice=="function"||Vh(b)||ye(b)||fr(b)))return!b.length;var w=na(b);if(w==ee||w==ae)return!b.size;if(Lm(b))return!D0(b).length;for(var F in b)if(er.call(b,F))return!1;return!0},be.isEqual=function(b,w){return ki(b,w)},be.isEqualWith=function(b,w,F){var ne=(F=typeof F=="function"?F:u)?F(b,w):u;return ne===u?ki(b,w,u,F):!!ne},be.isError=t_,be.isFinite=function(b){return typeof b=="number"&&js(b)},be.isFunction=O,be.isInteger=E,be.isLength=A,be.isMap=B,be.isMatch=function(b,w){return b===w||Tm(b,w,Bn(w))},be.isMatchWith=function(b,w,F){return F=typeof F=="function"?F:u,Tm(b,w,Bn(w),F)},be.isNaN=function(b){return G(b)&&b!=+b},be.isNative=function(b){if(Zx(b))throw new yi("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return fS(b)},be.isNil=function(b){return b==null},be.isNull=function(b){return b===null},be.isNumber=G,be.isObject=M,be.isObjectLike=D,be.isPlainObject=re,be.isRegExp=oe,be.isSafeInteger=function(b){return E(b)&&b>=-9007199254740991&&b<=x},be.isSet=J,be.isString=le,be.isSymbol=pe,be.isTypedArray=ye,be.isUndefined=function(b){return b===u},be.isWeakMap=function(b){return D(b)&&na(b)==Ne},be.isWeakSet=function(b){return D(b)&&Is(b)=="[object WeakSet]"},be.join=function(b,w){return b==null?"":M0.call(b,w)},be.kebabCase=vs,be.last=Fa,be.lastIndexOf=function(b,w,F){var ne=b==null?0:b.length;if(!ne)return-1;var ce=ne;return F!==u&&(ce=(ce=Te(F))<0?qr(ne+ce,0):gs(ce,ne-1)),w==w?function(we,De,Ge){for(var it=Ge+1;it--;)if(we[it]===De)return it;return it}(b,w,ce):Oh(b,T0,ce,!0)},be.lowerCase=Ps,be.lowerFirst=Hr,be.lt=Ie,be.lte=Xe,be.max=function(b){return b&&b.length?Uf(b,Lr,dr):u},be.maxBy=function(b,w){return b&&b.length?Uf(b,Gn(w,2),dr):u},be.mean=function(b){return x0(b,Lr)},be.meanBy=function(b,w){return x0(b,Gn(w,2))},be.min=function(b){return b&&b.length?Uf(b,Lr,pv):u},be.minBy=function(b,w){return b&&b.length?Uf(b,Gn(w,2),pv):u},be.stubArray=th,be.stubFalse=du,be.stubObject=function(){return{}},be.stubString=function(){return""},be.stubTrue=function(){return!0},be.multiply=yr,be.nth=function(b,w){return b&&b.length?Cm(b,Te(w)):u},be.noConflict=function(){return on._===this&&(on._=cv),this},be.noop=Sa,be.now=Vs,be.pad=function(b,w,F){b=Tt(b);var ne=(w=Te(w))?zs(b):0;if(!w||ne>=w)return b;var ce=(w-ne)/2;return jl(Ko(ce),F)+b+jl(mc(ce),F)},be.padEnd=function(b,w,F){b=Tt(b);var ne=(w=Te(w))?zs(b):0;return w&&ne<w?b+jl(w-ne,F):b},be.padStart=function(b,w,F){b=Tt(b);var ne=(w=Te(w))?zs(b):0;return w&&ne<w?jl(w-ne,F)+b:b},be.parseInt=function(b,w,F){return F||w==null?w=0:w&&(w=+w),Eo(Tt(b).replace(de,""),w||0)},be.random=function(b,w,F){if(F&&typeof F!="boolean"&&ro(b,w,F)&&(w=F=u),F===u&&(typeof w=="boolean"?(F=w,w=u):typeof b=="boolean"&&(F=b,b=u)),b===u&&w===u?(b=0,w=1):(b=Oe(b),w===u?(w=b,b=0):w=Oe(w)),b>w){var ne=b;b=w,w=ne}if(F||b%1||w%1){var ce=Da();return gs(b+ce*(w-b+Ll("1e-"+((ce+"").length-1))),w)}return L0(b,w)},be.reduce=function(b,w,F){var ne=kn(b)?rv:w0,ce=arguments.length<3;return ne(b,Gn(w,4),F,ce,_l)},be.reduceRight=function(b,w,F){var ne=kn(b)?S0:w0,ce=arguments.length<3;return ne(b,Gn(w,4),F,ce,bm)},be.repeat=function(b,w,F){return w=(F?ro(b,w,F):w===u)?1:Te(w),gv(Tt(b),w)},be.replace=function(){var b=arguments,w=Tt(b[0]);return b.length<3?w:w.replace(b[1],b[2])},be.result=function(b,w,F){var ne=-1,ce=(w=au(w,b)).length;for(ce||(ce=1,b=u);++ne<ce;){var we=b==null?u:b[Mc(w[ne])];we===u&&(ne=ce,we=F),b=O(we)?we.call(b):we}return b},be.round=Gm,be.runInContext=ot,be.sample=function(b){return(kn(b)?Fl:Mm)(b)},be.size=function(b){if(b==null)return 0;if(ba(b))return le(b)?zs(b):b.length;var w=na(b);return w==ee||w==ae?b.size:D0(b).length},be.snakeCase=ts,be.some=function(b,w,F){var ne=kn(b)?sv:iu;return F&&ro(b,w,F)&&(w=u),ne(b,Gn(w,3))},be.sortedIndex=function(b,w){return Ud(b,w)},be.sortedIndexBy=function(b,w,F){return Hf(b,w,Gn(F,2))},be.sortedIndexOf=function(b,w){var F=b==null?0:b.length;if(F){var ne=Ud(b,w);if(ne<F&&Qr(b[ne],w))return ne}return-1},be.sortedLastIndex=function(b,w){return Ud(b,w,!0)},be.sortedLastIndexBy=function(b,w,F){return Hf(b,w,Gn(F,2),!0)},be.sortedLastIndexOf=function(b,w){if(b!=null&&b.length){var F=Ud(b,w,!0)-1;if(Qr(b[F],w))return F}return-1},be.startCase=Fi,be.startsWith=function(b,w,F){return b=Tt(b),F=F==null?0:Xu(Te(F),0,b.length),w=Jo(w),b.slice(F,F+w.length)==w},be.subtract=fu,be.sum=function(b){return b&&b.length?Zc(b,Lr):0},be.sumBy=function(b,w){return b&&b.length?Zc(b,Gn(w,2)):0},be.template=function(b,w,F){var ne=be.templateSettings;F&&ro(b,w,F)&&(w=u),b=Tt(b),w=Qn({},w,ne,Cc);var ce,we,De=Qn({},w.imports,ne.imports,Cc),Ge=un(De),it=Zr(De,Ge),xt=0,At=w.interpolate||tt,Ft="__p += '",vn=Ul((w.escape||tt).source+"|"+At.source+"|"+(At===Fe?Cn:tt).source+"|"+(w.evaluate||tt).source+"|$","g"),wn="//# sourceURL="+(er.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pn+"]")+`
`;b.replace(vn,function(Vt,Kn,kt,yn,Zt,Sn){return kt||(kt=yn),Ft+=b.slice(xt,Sn).replace(yt,cS),Kn&&(ce=!0,Ft+=`' +
__e(`+Kn+`) +
'`),Zt&&(we=!0,Ft+=`';
`+Zt+`;
__p += '`),kt&&(Ft+=`' +
((__t = (`+kt+`)) == null ? '' : __t) +
'`),xt=Sn+Vt.length,Vt}),Ft+=`';
`;var Fn=er.call(w,"variable")&&w.variable;if(Fn){if(at.test(Fn))throw new yi("Invalid `variable` option passed into `_.template`")}else Ft=`with (obj) {
`+Ft+`
}
`;Ft=(we?Ft.replace(Ae,""):Ft).replace(Se,"$1").replace(ge,"$1;"),Ft="function("+(Fn||"obj")+`) {
`+(Fn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ce?", __e = _.escape":"")+(we?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ft+`return __p
}`;var Mt=tr(function(){return Ms(Ge,wn+"return "+Ft).apply(u,it)});if(Mt.source=Ft,t_(Mt))throw Mt;return Mt},be.times=function(b,w){if((b=Te(b))<1||b>x)return[];var F=R,ne=gs(b,R);w=Gn(w),b-=R;for(var ce=Rf(ne,w);++F<b;)w(F);return ce},be.toFinite=Oe,be.toInteger=Te,be.toLength=rt,be.toLower=function(b){return Tt(b).toLowerCase()},be.toNumber=mt,be.toSafeInteger=function(b){return b?Xu(Te(b),-9007199254740991,x):b===0?b:0},be.toString=Tt,be.toUpper=function(b){return Tt(b).toUpperCase()},be.trim=function(b,w,F){if((b=Tt(b))&&(F||w===u))return C0(b);if(!b||!(w=Jo(w)))return b;var ne=ms(b),ce=ms(w);return ga(ne,oS(ne,ce),As(ne,ce)+1).join("")},be.trimEnd=function(b,w,F){if((b=Tt(b))&&(F||w===u))return b.slice(0,om(b)+1);if(!b||!(w=Jo(w)))return b;var ne=ms(b);return ga(ne,0,As(ne,ms(w))+1).join("")},be.trimStart=function(b,w,F){if((b=Tt(b))&&(F||w===u))return b.replace(de,"");if(!b||!(w=Jo(w)))return b;var ne=ms(b);return ga(ne,oS(ne,ms(w))).join("")},be.truncate=function(b,w){var F=30,ne="...";if(M(w)){var ce="separator"in w?w.separator:ce;F="length"in w?Te(w.length):F,ne="omission"in w?Jo(w.omission):ne}var we=(b=Tt(b)).length;if(Nh(b)){var De=ms(b);we=De.length}if(F>=we)return b;var Ge=F-zs(ne);if(Ge<1)return ne;var it=De?ga(De,0,Ge).join(""):b.slice(0,Ge);if(ce===u)return it+ne;if(De&&(Ge+=it.length-Ge),oe(ce)){if(b.slice(Ge).search(ce)){var xt,At=it;for(ce.global||(ce=Ul(ce.source,Tt(ze.exec(ce))+"g")),ce.lastIndex=0;xt=ce.exec(At);)var Ft=xt.index;it=it.slice(0,Ft===u?Ge:Ft)}}else if(b.indexOf(Jo(ce),Ge)!=Ge){var vn=it.lastIndexOf(ce);vn>-1&&(it=it.slice(0,vn))}return it+ne},be.unescape=function(b){return(b=Tt(b))&&ke.test(b)?b.replace(fe,Gu):b},be.uniqueId=function(b){var w=++cm;return Tt(b)+w},be.upperCase=Gs,be.upperFirst=Ln,be.each=X0,be.eachRight=zm,be.first=Jf,qs(be,(Vm={},_c(be,function(b,w){er.call(be.prototype,w)||(Vm[w]=b)}),Vm),{chain:!1}),be.VERSION="4.17.21",eo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){be[b].placeholder=be}),eo(["drop","take"],function(b,w){mi.prototype[b]=function(F){F=F===u?1:qr(Te(F),0);var ne=this.__filtered__&&!w?new mi(this):this.clone();return ne.__filtered__?ne.__takeCount__=gs(F,ne.__takeCount__):ne.__views__.push({size:gs(F,R),type:b+(ne.__dir__<0?"Right":"")}),ne},mi.prototype[b+"Right"]=function(F){return this.reverse()[b](F).reverse()}}),eo(["filter","map","takeWhile"],function(b,w){var F=w+1,ne=F==1||F==3;mi.prototype[b]=function(ce){var we=this.clone();return we.__iteratees__.push({iteratee:Gn(ce,3),type:F}),we.__filtered__=we.__filtered__||ne,we}}),eo(["head","last"],function(b,w){var F="take"+(w?"Right":"");mi.prototype[b]=function(){return this[F](1).value()[0]}}),eo(["initial","tail"],function(b,w){var F="drop"+(w?"":"Right");mi.prototype[b]=function(){return this.__filtered__?new mi(this):this[F](1)}}),mi.prototype.compact=function(){return this.filter(Lr)},mi.prototype.find=function(b){return this.filter(b).head()},mi.prototype.findLast=function(b){return this.reverse().find(b)},mi.prototype.invokeMap=Si(function(b,w){return typeof b=="function"?new mi(this):this.map(function(F){return Co(F,b,w)})}),mi.prototype.reject=function(b){return this.filter(lo(Gn(b)))},mi.prototype.slice=function(b,w){b=Te(b);var F=this;return F.__filtered__&&(b>0||w<0)?new mi(F):(b<0?F=F.takeRight(-b):b&&(F=F.drop(b)),w!==u&&(F=(w=Te(w))<0?F.dropRight(-w):F.take(w-b)),F)},mi.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},mi.prototype.toArray=function(){return this.take(R)},_c(mi.prototype,function(b,w){var F=/^(?:filter|find|map|reject)|While$/.test(w),ne=/^(?:head|last)$/.test(w),ce=be[ne?"take"+(w=="last"?"Right":""):w],we=ne||/^find/.test(w);ce&&(be.prototype[w]=function(){var De=this.__wrapped__,Ge=ne?[1]:arguments,it=De instanceof mi,xt=Ge[0],At=it||kn(De),Ft=function(Kn){var kt=ce.apply(be,Kc([Kn],Ge));return ne&&vn?kt[0]:kt};At&&F&&typeof xt=="function"&&xt.length!=1&&(it=At=!1);var vn=this.__chain__,wn=!!this.__actions__.length,Fn=we&&!vn,Mt=it&&!wn;if(!we&&At){De=Mt?De:new mi(this);var Vt=b.apply(De,Ge);return Vt.__actions__.push({func:lu,args:[Ft],thisArg:u}),new ma(Vt,vn)}return Fn&&Mt?b.apply(this,Ge):(Vt=this.thru(Ft),Fn?ne?Vt.value()[0]:Vt.value():Vt)})}),eo(["pop","push","shift","sort","splice","unshift"],function(b){var w=Nf[b],F=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",ne=/^(?:pop|shift)$/.test(b);be.prototype[b]=function(){var ce=arguments;if(ne&&!this.__chain__){var we=this.value();return w.apply(kn(we)?we:[],ce)}return this[F](function(De){return w.apply(kn(De)?De:[],ce)})}}),_c(mi.prototype,function(b,w){var F=be[w];if(F){var ne=F.name+"";er.call(Os,ne)||(Os[ne]=[]),Os[ne].push({name:w,func:F})}}),Os[Nm(u,2).name]=[{name:"wrapper",func:u}],mi.prototype.clone=function(){var b=new mi(this.__wrapped__);return b.__actions__=Ao(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Ao(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Ao(this.__views__),b},mi.prototype.reverse=function(){if(this.__filtered__){var b=new mi(this);b.__dir__=-1,b.__filtered__=!0}else(b=this.clone()).__dir__*=-1;return b},mi.prototype.value=function(){var b=this.__wrapped__.value(),w=this.__dir__,F=kn(b),ne=w<0,ce=F?b.length:0,we=function(Sn,Jt,Mn){for(var $r=-1,ns=Mn.length;++$r<ns;){var Ro=Mn[$r],ar=Ro.size;switch(Ro.type){case"drop":Sn+=ar;break;case"dropRight":Jt-=ar;break;case"take":Jt=gs(Jt,Sn+ar);break;case"takeRight":Sn=qr(Sn,Jt-ar)}}return{start:Sn,end:Jt}}(0,ce,this.__views__),De=we.start,Ge=we.end,it=Ge-De,xt=ne?Ge:De-1,At=this.__iteratees__,Ft=At.length,vn=0,wn=gs(it,this.__takeCount__);if(!F||!ne&&ce==it&&wn==it)return Vf(b,this.__actions__);var Fn=[];e:for(;it--&&vn<wn;){for(var Mt=-1,Vt=b[xt+=w];++Mt<Ft;){var Kn=At[Mt],kt=Kn.iteratee,yn=Kn.type,Zt=kt(Vt);if(yn==2)Vt=Zt;else if(!Zt){if(yn==1)continue e;break e}}Fn[vn++]=Vt}return Fn},be.prototype.at=eh,be.prototype.chain=function(){return ya(this)},be.prototype.commit=function(){return new ma(this.value(),this.__chain__)},be.prototype.next=function(){this.__values__===u&&(this.__values__=qe(this.value()));var b=this.__index__>=this.__values__.length;return{done:b,value:b?u:this.__values__[this.__index__++]}},be.prototype.plant=function(b){for(var w,F=this;F instanceof tu;){var ne=W0(F);ne.__index__=0,ne.__values__=u,w?ce.__wrapped__=ne:w=ne;var ce=ne;F=F.__wrapped__}return ce.__wrapped__=b,w},be.prototype.reverse=function(){var b=this.__wrapped__;if(b instanceof mi){var w=b;return this.__actions__.length&&(w=new mi(this)),(w=w.reverse()).__actions__.push({func:lu,args:[$i],thisArg:u}),new ma(w,this.__chain__)}return this.thru($i)},be.prototype.toJSON=be.prototype.valueOf=be.prototype.value=function(){return Vf(this.__wrapped__,this.__actions__)},be.prototype.first=be.prototype.head,pc&&(be.prototype[pc]=function(){return this}),be}();on._=Nd,(c=(function(){return Nd}).call(o,l,o,a))===u||(a.exports=c)}).call(this)},2492:(a,o,l)=>{var c=l(2980),u=l(1463)(function(h,d,f){c(h,d,f)});a.exports=u},5062:a=>{a.exports=function(){return!1}},9881:(a,o,l)=>{var c=l(8363),u=l(1704);a.exports=function(h){return c(h,u(h))}},6692:a=>{var o=a.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(l){return l.encoding?"rtpmap:%d %s/%s/%s":l.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(l){return l.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(l){return l.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(l){return"extmap:%d"+(l.direction?"/%s":"%v")+(l["encrypt-uri"]?" %s":"%v")+" %s"+(l.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(l){return l.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(l){var c="candidate:%s %d %s %d %s %d typ %s";return c+=l.raddr!=null?" raddr %s rport %d":"%v%v",c+=l.tcptype!=null?" tcptype %s":"%v",l.generation!=null&&(c+=" generation %d"),c+=l["network-id"]!=null?" network-id %d":"%v",c+=l["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(l){var c="ssrc:%d";return l.attribute!=null&&(c+=" %s",l.value!=null&&(c+=":%s")),c}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(l){return l.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(l){return l.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(l){return"imageattr:%s %s %s"+(l.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(l){return"simulcast:%s %s"+(l.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(l){return"ts-refclk:%s"+(l.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(l){var c="mediaclk:";return c+=l.id!=null?"id=%s %s":"%v%s",c+=l.mediaClockValue!=null?"=%s":"",c+=l.rateNumerator!=null?" rate=%s":"",c+=l.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(o).forEach(function(l){o[l].forEach(function(c){c.reg||(c.reg=/(.*)/),c.format||(c.format="%s")})})},766:(a,o,l)=>{var c=l(962),u=l(8627);o.cW=u,o.Qc=c.parse,o.rz=c.parseParams,c.parseFmtpConfig,c.parsePayloads,c.parseRemoteCandidates,c.parseImageAttributes,c.parseSimulcastStreamList},962:(a,o,l)=>{var c=function(m){return String(Number(m))===m?Number(m):m},u=function(m,v,_){var y=m.name&&m.names;m.push&&!v[m.push]?v[m.push]=[]:y&&!v[m.name]&&(v[m.name]={});var S=m.push?{}:y?v[m.name]:v;(function(T,x,I,R){if(R&&!I)x[R]=c(T[1]);else for(var N=0;N<I.length;N+=1)T[N+1]!=null&&(x[I[N]]=c(T[N+1]))})(_.match(m.reg),S,m.names,m.name),m.push&&v[m.push].push(S)},h=l(6692),d=RegExp.prototype.test.bind(/^([a-z])=(.*)/);o.parse=function(m){var v={},_=[],y=v;return m.split(/(\r\n|\r|\n)/).filter(d).forEach(function(S){var T=S[0],x=S.slice(2);T==="m"&&(_.push({rtp:[],fmtp:[]}),y=_[_.length-1]);for(var I=0;I<(h[T]||[]).length;I+=1){var R=h[T][I];if(R.reg.test(x))return u(R,y,x)}}),v.media=_,v};var f=function(m,v){var _=v.split(/=(.+)/,2);return _.length===2?m[_[0]]=c(_[1]):_.length===1&&v.length>1&&(m[_[0]]=void 0),m};o.parseParams=function(m){return m.split(/;\s?/).reduce(f,{})},o.parseFmtpConfig=o.parseParams,o.parsePayloads=function(m){return m.toString().split(" ").map(Number)},o.parseRemoteCandidates=function(m){for(var v=[],_=m.split(" ").map(c),y=0;y<_.length;y+=3)v.push({component:_[y],ip:_[y+1],port:_[y+2]});return v},o.parseImageAttributes=function(m){return m.split(" ").map(function(v){return v.substring(1,v.length-1).split(",").reduce(f,{})})},o.parseSimulcastStreamList=function(m){return m.split(";").map(function(v){return v.split(",").map(function(_){var y,S=!1;return _[0]!=="~"?y=c(_):(y=c(_.substring(1,_.length)),S=!0),{scid:y,paused:S}})})}},8627:(a,o,l)=>{var c=l(6692),u=/%[sdv%]/g,h=function(v){var _=1,y=arguments,S=y.length;return v.replace(u,function(T){if(_>=S)return T;var x=y[_];switch(_+=1,T){case"%%":return"%";case"%s":return String(x);case"%d":return Number(x);case"%v":return""}})},d=function(v,_,y){var S=[v+"="+(_.format instanceof Function?_.format(_.push?y:y[_.name]):_.format)];if(_.names)for(var T=0;T<_.names.length;T+=1){var x=_.names[T];_.name?S.push(y[_.name][x]):S.push(y[_.names[T]])}else S.push(y[_.name]);return h.apply(null,S)},f=["v","o","s","i","u","e","p","c","b","t","r","z","a"],m=["i","c","b","a"];a.exports=function(v,_){_=_||{},v.version==null&&(v.version=0),v.name==null&&(v.name=" "),v.media.forEach(function(x){x.payloads==null&&(x.payloads="")});var y=_.outerOrder||f,S=_.innerOrder||m,T=[];return y.forEach(function(x){c[x].forEach(function(I){I.name in v&&v[I.name]!=null?T.push(d(x,I,v)):I.push in v&&v[I.push]!=null&&v[I.push].forEach(function(R){T.push(d(x,I,R))})})}),v.media.forEach(function(x){T.push(d("m",c.m[0],x)),S.forEach(function(I){c[I].forEach(function(R){R.name in x&&x[R.name]!=null?T.push(d(I,R,x)):R.push in x&&x[R.push]!=null&&x[R.push].forEach(function(N){T.push(d(I,R,N))})})})}),T.join(`\r
`)+`\r
`}},7539:a=>{const o={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};o.localCName=o.generateIdentifier(),o.splitLines=function(l){return l.trim().split(`
`).map(c=>c.trim())},o.splitSections=function(l){return l.split(`
m=`).map((c,u)=>(u>0?"m="+c:c).trim()+`\r
`)},o.getDescription=function(l){const c=o.splitSections(l);return c&&c[0]},o.getMediaSections=function(l){const c=o.splitSections(l);return c.shift(),c},o.matchPrefix=function(l,c){return o.splitLines(l).filter(u=>u.indexOf(c)===0)},o.parseCandidate=function(l){let c;c=l.indexOf("a=candidate:")===0?l.substring(12).split(" "):l.substring(10).split(" ");const u={foundation:c[0],component:{1:"rtp",2:"rtcp"}[c[1]]||c[1],protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]};for(let h=8;h<c.length;h+=2)switch(c[h]){case"raddr":u.relatedAddress=c[h+1];break;case"rport":u.relatedPort=parseInt(c[h+1],10);break;case"tcptype":u.tcpType=c[h+1];break;case"ufrag":u.ufrag=c[h+1],u.usernameFragment=c[h+1];break;default:u[c[h]]===void 0&&(u[c[h]]=c[h+1])}return u},o.writeCandidate=function(l){const c=[];c.push(l.foundation);const u=l.component;u==="rtp"?c.push(1):u==="rtcp"?c.push(2):c.push(u),c.push(l.protocol.toUpperCase()),c.push(l.priority),c.push(l.address||l.ip),c.push(l.port);const h=l.type;return c.push("typ"),c.push(h),h!=="host"&&l.relatedAddress&&l.relatedPort&&(c.push("raddr"),c.push(l.relatedAddress),c.push("rport"),c.push(l.relatedPort)),l.tcpType&&l.protocol.toLowerCase()==="tcp"&&(c.push("tcptype"),c.push(l.tcpType)),(l.usernameFragment||l.ufrag)&&(c.push("ufrag"),c.push(l.usernameFragment||l.ufrag)),"candidate:"+c.join(" ")},o.parseIceOptions=function(l){return l.substring(14).split(" ")},o.parseRtpMap=function(l){let c=l.substring(9).split(" ");const u={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),u.name=c[0],u.clockRate=parseInt(c[1],10),u.channels=c.length===3?parseInt(c[2],10):1,u.numChannels=u.channels,u},o.writeRtpMap=function(l){let c=l.payloadType;l.preferredPayloadType!==void 0&&(c=l.preferredPayloadType);const u=l.channels||l.numChannels||1;return"a=rtpmap:"+c+" "+l.name+"/"+l.clockRate+(u!==1?"/"+u:"")+`\r
`},o.parseExtmap=function(l){const c=l.substring(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1],attributes:c.slice(2).join(" ")}},o.writeExtmap=function(l){return"a=extmap:"+(l.id||l.preferredId)+(l.direction&&l.direction!=="sendrecv"?"/"+l.direction:"")+" "+l.uri+(l.attributes?" "+l.attributes:"")+`\r
`},o.parseFmtp=function(l){const c={};let u;const h=l.substring(l.indexOf(" ")+1).split(";");for(let d=0;d<h.length;d++)u=h[d].trim().split("="),c[u[0].trim()]=u[1];return c},o.writeFmtp=function(l){let c="",u=l.payloadType;if(l.preferredPayloadType!==void 0&&(u=l.preferredPayloadType),l.parameters&&Object.keys(l.parameters).length){const h=[];Object.keys(l.parameters).forEach(d=>{l.parameters[d]!==void 0?h.push(d+"="+l.parameters[d]):h.push(d)}),c+="a=fmtp:"+u+" "+h.join(";")+`\r
`}return c},o.parseRtcpFb=function(l){const c=l.substring(l.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},o.writeRtcpFb=function(l){let c="",u=l.payloadType;return l.preferredPayloadType!==void 0&&(u=l.preferredPayloadType),l.rtcpFeedback&&l.rtcpFeedback.length&&l.rtcpFeedback.forEach(h=>{c+="a=rtcp-fb:"+u+" "+h.type+(h.parameter&&h.parameter.length?" "+h.parameter:"")+`\r
`}),c},o.parseSsrcMedia=function(l){const c=l.indexOf(" "),u={ssrc:parseInt(l.substring(7,c),10)},h=l.indexOf(":",c);return h>-1?(u.attribute=l.substring(c+1,h),u.value=l.substring(h+1)):u.attribute=l.substring(c+1),u},o.parseSsrcGroup=function(l){const c=l.substring(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(u=>parseInt(u,10))}},o.getMid=function(l){const c=o.matchPrefix(l,"a=mid:")[0];if(c)return c.substring(6)},o.parseFingerprint=function(l){const c=l.substring(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1].toUpperCase()}},o.getDtlsParameters=function(l,c){return{role:"auto",fingerprints:o.matchPrefix(l+c,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(l,c){let u="a=setup:"+c+`\r
`;return l.fingerprints.forEach(h=>{u+="a=fingerprint:"+h.algorithm+" "+h.value+`\r
`}),u},o.parseCryptoLine=function(l){const c=l.substring(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},o.writeCryptoLine=function(l){return"a=crypto:"+l.tag+" "+l.cryptoSuite+" "+(typeof l.keyParams=="object"?o.writeCryptoKeyParams(l.keyParams):l.keyParams)+(l.sessionParams?" "+l.sessionParams.join(" "):"")+`\r
`},o.parseCryptoKeyParams=function(l){if(l.indexOf("inline:")!==0)return null;const c=l.substring(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(l){return l.keyMethod+":"+l.keySalt+(l.lifeTime?"|"+l.lifeTime:"")+(l.mkiValue&&l.mkiLength?"|"+l.mkiValue+":"+l.mkiLength:"")},o.getCryptoParameters=function(l,c){return o.matchPrefix(l+c,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(l,c){const u=o.matchPrefix(l+c,"a=ice-ufrag:")[0],h=o.matchPrefix(l+c,"a=ice-pwd:")[0];return u&&h?{usernameFragment:u.substring(12),password:h.substring(10)}:null},o.writeIceParameters=function(l){let c="a=ice-ufrag:"+l.usernameFragment+`\r
a=ice-pwd:`+l.password+`\r
`;return l.iceLite&&(c+=`a=ice-lite\r
`),c},o.parseRtpParameters=function(l){const c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},u=o.splitLines(l)[0].split(" ");c.profile=u[2];for(let d=3;d<u.length;d++){const f=u[d],m=o.matchPrefix(l,"a=rtpmap:"+f+" ")[0];if(m){const v=o.parseRtpMap(m),_=o.matchPrefix(l,"a=fmtp:"+f+" ");switch(v.parameters=_.length?o.parseFmtp(_[0]):{},v.rtcpFeedback=o.matchPrefix(l,"a=rtcp-fb:"+f+" ").map(o.parseRtcpFb),c.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(v.name.toUpperCase())}}}o.matchPrefix(l,"a=extmap:").forEach(d=>{c.headerExtensions.push(o.parseExtmap(d))});const h=o.matchPrefix(l,"a=rtcp-fb:* ").map(o.parseRtcpFb);return c.codecs.forEach(d=>{h.forEach(f=>{d.rtcpFeedback.find(m=>m.type===f.type&&m.parameter===f.parameter)||d.rtcpFeedback.push(f)})}),c},o.writeRtpDescription=function(l,c){let u="";u+="m="+l+" ",u+=c.codecs.length>0?"9":"0",u+=" "+(c.profile||"UDP/TLS/RTP/SAVPF")+" ",u+=c.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,u+=`c=IN IP4 0.0.0.0\r
`,u+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,c.codecs.forEach(d=>{u+=o.writeRtpMap(d),u+=o.writeFmtp(d),u+=o.writeRtcpFb(d)});let h=0;return c.codecs.forEach(d=>{d.maxptime>h&&(h=d.maxptime)}),h>0&&(u+="a=maxptime:"+h+`\r
`),c.headerExtensions&&c.headerExtensions.forEach(d=>{u+=o.writeExtmap(d)}),u},o.parseRtpEncodingParameters=function(l){const c=[],u=o.parseRtpParameters(l),h=u.fecMechanisms.indexOf("RED")!==-1,d=u.fecMechanisms.indexOf("ULPFEC")!==-1,f=o.matchPrefix(l,"a=ssrc:").map(S=>o.parseSsrcMedia(S)).filter(S=>S.attribute==="cname"),m=f.length>0&&f[0].ssrc;let v;const _=o.matchPrefix(l,"a=ssrc-group:FID").map(S=>S.substring(17).split(" ").map(T=>parseInt(T,10)));_.length>0&&_[0].length>1&&_[0][0]===m&&(v=_[0][1]),u.codecs.forEach(S=>{if(S.name.toUpperCase()==="RTX"&&S.parameters.apt){let T={ssrc:m,codecPayloadType:parseInt(S.parameters.apt,10)};m&&v&&(T.rtx={ssrc:v}),c.push(T),h&&(T=JSON.parse(JSON.stringify(T)),T.fec={ssrc:m,mechanism:d?"red+ulpfec":"red"},c.push(T))}}),c.length===0&&m&&c.push({ssrc:m});let y=o.matchPrefix(l,"b=");return y.length&&(y=y[0].indexOf("b=TIAS:")===0?parseInt(y[0].substring(7),10):y[0].indexOf("b=AS:")===0?1e3*parseInt(y[0].substring(5),10)*.95-16e3:void 0,c.forEach(S=>{S.maxBitrate=y})),c},o.parseRtcpParameters=function(l){const c={},u=o.matchPrefix(l,"a=ssrc:").map(f=>o.parseSsrcMedia(f)).filter(f=>f.attribute==="cname")[0];u&&(c.cname=u.value,c.ssrc=u.ssrc);const h=o.matchPrefix(l,"a=rtcp-rsize");c.reducedSize=h.length>0,c.compound=h.length===0;const d=o.matchPrefix(l,"a=rtcp-mux");return c.mux=d.length>0,c},o.writeRtcpParameters=function(l){let c="";return l.reducedSize&&(c+=`a=rtcp-rsize\r
`),l.mux&&(c+=`a=rtcp-mux\r
`),l.ssrc!==void 0&&l.cname&&(c+="a=ssrc:"+l.ssrc+" cname:"+l.cname+`\r
`),c},o.parseMsid=function(l){let c;const u=o.matchPrefix(l,"a=msid:");if(u.length===1)return c=u[0].substring(7).split(" "),{stream:c[0],track:c[1]};const h=o.matchPrefix(l,"a=ssrc:").map(d=>o.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");return h.length>0?(c=h[0].value.split(" "),{stream:c[0],track:c[1]}):void 0},o.parseSctpDescription=function(l){const c=o.parseMLine(l),u=o.matchPrefix(l,"a=max-message-size:");let h;u.length>0&&(h=parseInt(u[0].substring(19),10)),isNaN(h)&&(h=65536);const d=o.matchPrefix(l,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:c.fmt,maxMessageSize:h};const f=o.matchPrefix(l,"a=sctpmap:");if(f.length>0){const m=f[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:h}}},o.writeSctpDescription=function(l,c){let u=[];return u=l.protocol!=="DTLS/SCTP"?["m="+l.kind+" 9 "+l.protocol+" "+c.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+c.port+`\r
`]:["m="+l.kind+" 9 "+l.protocol+" "+c.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+c.port+" "+c.protocol+` 65535\r
`],c.maxMessageSize!==void 0&&u.push("a=max-message-size:"+c.maxMessageSize+`\r
`),u.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,22)},o.writeSessionBoilerplate=function(l,c,u){let h;const d=c!==void 0?c:2;return h=l||o.generateSessionId(),`v=0\r
o=`+(u||"thisisadapterortc")+" "+h+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},o.getDirection=function(l,c){const u=o.splitLines(l);for(let h=0;h<u.length;h++)switch(u[h]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return u[h].substring(2)}return c?o.getDirection(c):"sendrecv"},o.getKind=function(l){return o.splitLines(l)[0].split(" ")[0].substring(2)},o.isRejected=function(l){return l.split(" ",2)[1]==="0"},o.parseMLine=function(l){const c=o.splitLines(l)[0].substring(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},o.parseOLine=function(l){const c=o.matchPrefix(l,"o=")[0].substring(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},o.isValidSDP=function(l){if(typeof l!="string"||l.length===0)return!1;const c=o.splitLines(l);for(let u=0;u<c.length;u++)if(c[u].length<2||c[u].charAt(1)!=="=")return!1;return!0},a.exports=o},477:a=>{a.exports=function(o,l,c,u){var h=self||window;try{try{var d;try{d=new h.Blob([o])}catch{(d=new(h.BlobBuilder||h.WebKitBlobBuilder||h.MozBlobBuilder||h.MSBlobBuilder)).append(o),d=d.getBlob()}var f=h.URL||h.webkitURL,m=f.createObjectURL(d),v=new h[l](m,c);return f.revokeObjectURL(m),v}catch{return new h[l]("data:application/javascript,".concat(encodeURIComponent(o)),c)}}catch{if(!u)throw Error("Inline worker is not supported");return new h[l](u,c)}}},8520:(a,o,l)=>{var c;(function(u){(function(h){var d=typeof globalThis=="object"?globalThis:typeof l.g=="object"?l.g:typeof self=="object"?self:typeof this=="object"?this:function(){try{return Function("return this;")()}catch{}}()||function(){try{return(0,eval)("(function() { return this; })()")}catch{}}(),f=m(u);function m(v,_){return function(y,S){Object.defineProperty(v,y,{configurable:!0,writable:!0,value:S}),_&&_(y,S)}}d.Reflect!==void 0&&(f=m(d.Reflect,f)),function(v,_){var y=Object.prototype.hasOwnProperty,S=typeof Symbol=="function",T=S&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",x=S&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",I=typeof Object.create=="function",R={__proto__:[]}instanceof Array,N=!I&&!R,L={create:I?function(){return Kt(Object.create(null))}:R?function(){return Kt({__proto__:null})}:function(){return Kt({})},has:N?function(je,tt){return y.call(je,tt)}:function(je,tt){return tt in je},get:N?function(je,tt){return y.call(je,tt)?je[tt]:void 0}:function(je,tt){return je[tt]}},k=Object.getPrototypeOf(Function),z=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:nt(),Z=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Et(),H=typeof WeakMap=="function"?WeakMap:Wt(),q=S?Symbol.for("@reflect-metadata:registry"):void 0,U=ft(),ee=Cn(U);function W(je,tt,yt,St){if(Se(yt)){if(!Ve(je))throw new TypeError;if(!Ut(tt))throw new TypeError;return Le(je,tt)}if(!Ve(je))throw new TypeError;if(!Ce(tt))throw new TypeError;if(!Ce(St)&&!Se(St)&&!ge(St))throw new TypeError;return ge(St)&&(St=void 0),He(je,tt,yt=Fe(yt),St)}function Q(je,tt){function yt(St,Nn){if(!Ce(St))throw new TypeError;if(!Se(Nn)&&!_t(Nn))throw new TypeError;Gt(je,tt,St,Nn)}return yt}function X(je,tt,yt,St){if(!Ce(yt))throw new TypeError;return Se(St)||(St=Fe(St)),Gt(je,tt,yt,St)}function Y(je,tt,yt){if(!Ce(tt))throw new TypeError;return Se(yt)||(yt=Fe(yt)),$e(je,tt,yt)}function ae(je,tt,yt){if(!Ce(tt))throw new TypeError;return Se(yt)||(yt=Fe(yt)),bt(je,tt,yt)}function se(je,tt,yt){if(!Ce(tt))throw new TypeError;return Se(yt)||(yt=Fe(yt)),Ct(je,tt,yt)}function ue(je,tt,yt){if(!Ce(tt))throw new TypeError;return Se(yt)||(yt=Fe(yt)),Lt(je,tt,yt)}function Ne(je,tt){if(!Ce(je))throw new TypeError;return Se(tt)||(tt=Fe(tt)),qt(je,tt)}function ve(je,tt){if(!Ce(je))throw new TypeError;return Se(tt)||(tt=Fe(tt)),V(je,tt)}function _e(je,tt,yt){if(!Ce(tt))throw new TypeError;if(Se(yt)||(yt=Fe(yt)),!Ce(tt))throw new TypeError;Se(yt)||(yt=Fe(yt));var St=It(tt,yt,!1);return!Se(St)&&St.OrdinaryDeleteMetadata(je,tt,yt)}function Le(je,tt){for(var yt=je.length-1;yt>=0;--yt){var St=(0,je[yt])(tt);if(!Se(St)&&!ge(St)){if(!Ut(St))throw new TypeError;tt=St}}return tt}function He(je,tt,yt,St){for(var Nn=je.length-1;Nn>=0;--Nn){var Pi=(0,je[Nn])(tt,yt,St);if(!Se(Pi)&&!ge(Pi)){if(!Ce(Pi))throw new TypeError;St=Pi}}return St}function $e(je,tt,yt){if(bt(je,tt,yt))return!0;var St=Ue(tt);return!ge(St)&&$e(je,St,yt)}function bt(je,tt,yt){var St=It(tt,yt,!1);return!Se(St)&&ie(St.OrdinaryHasOwnMetadata(je,tt,yt))}function Ct(je,tt,yt){if(bt(je,tt,yt))return Lt(je,tt,yt);var St=Ue(tt);return ge(St)?void 0:Ct(je,St,yt)}function Lt(je,tt,yt){var St=It(tt,yt,!1);if(!Se(St))return St.OrdinaryGetOwnMetadata(je,tt,yt)}function Gt(je,tt,yt,St){It(yt,St,!0).OrdinaryDefineOwnMetadata(je,tt,yt,St)}function qt(je,tt){var yt=V(je,tt),St=Ue(je);if(St===null)return yt;var Nn=qt(St,tt);if(Nn.length<=0)return yt;if(yt.length<=0)return Nn;for(var Pi=new Z,ii=[],jn=0,ln=yt;jn<ln.length;jn++){var Xt=ln[jn];Pi.has(Xt)||(Pi.add(Xt),ii.push(Xt))}for(var xn=0,bn=Nn;xn<bn.length;xn++)Xt=bn[xn],Pi.has(Xt)||(Pi.add(Xt),ii.push(Xt));return ii}function V(je,tt){var yt=It(je,tt,!1);return yt?yt.OrdinaryOwnMetadataKeys(je,tt):[]}function Ae(je){if(je===null)return 1;switch(typeof je){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return je===null?1:6;default:return 6}}function Se(je){return je===void 0}function ge(je){return je===null}function fe(je){return typeof je=="symbol"}function Ce(je){return typeof je=="object"?je!==null:typeof je=="function"}function ke(je,tt){switch(Ae(je)){case 0:case 1:case 2:case 3:case 4:case 5:return je}var yt="string",St=de(je,T);if(St!==void 0){var Nn=St.call(je,yt);if(Ce(Nn))throw new TypeError;return Nn}return he(je)}function he(je,tt){var yt,St;{var Nn=je.toString;if(We(Nn)&&!Ce(St=Nn.call(je))||We(yt=je.valueOf)&&!Ce(St=yt.call(je)))return St}throw new TypeError}function ie(je){return!!je}function Me(je){return""+je}function Fe(je){var tt=ke(je);return fe(tt)?tt:Me(tt)}function Ve(je){return Array.isArray?Array.isArray(je):je instanceof Object?je instanceof Array:Object.prototype.toString.call(je)==="[object Array]"}function We(je){return typeof je=="function"}function Ut(je){return typeof je=="function"}function _t(je){switch(Ae(je)){case 3:case 4:return!0;default:return!1}}function tn(je,tt){return je===tt||je!=je&&tt!=tt}function de(je,tt){var yt=je[tt];if(yt!=null){if(!We(yt))throw new TypeError;return yt}}function $(je){var tt=de(je,x);if(!We(tt))throw new TypeError;var yt=tt.call(je);if(!Ce(yt))throw new TypeError;return yt}function K(je){return je.value}function me(je){var tt=je.next();return!tt.done&&tt}function Pe(je){var tt=je.return;tt&&tt.call(je)}function Ue(je){var tt=Object.getPrototypeOf(je);if(typeof je!="function"||je===k||tt!==k)return tt;var yt=je.prototype,St=yt&&Object.getPrototypeOf(yt);if(St==null||St===Object.prototype)return tt;var Nn=St.constructor;return typeof Nn!="function"||Nn===je?tt:Nn}function at(){var je,tt,yt,St;Se(q)||_.Reflect===void 0||q in _.Reflect||typeof _.Reflect.defineMetadata!="function"||(je=ze(_.Reflect));var Nn=new H,Pi={registerProvider:ii,getProvider:ln,setProvider:xn};return Pi;function ii(bn){if(!Object.isExtensible(Pi))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case je===bn:break;case Se(tt):tt=bn;break;case tt===bn:break;case Se(yt):yt=bn;break;case yt===bn:break;default:St===void 0&&(St=new Z),St.add(bn)}}function jn(bn,Wn){if(!Se(tt)){if(tt.isProviderFor(bn,Wn))return tt;if(!Se(yt)){if(yt.isProviderFor(bn,Wn))return tt;if(!Se(St))for(var Ui=$(St);;){var Un=me(Ui);if(!Un)return;var Qs=K(Un);if(Qs.isProviderFor(bn,Wn))return Pe(Ui),Qs}}}if(!Se(je)&&je.isProviderFor(bn,Wn))return je}function ln(bn,Wn){var Ui,Un=Nn.get(bn);return Se(Un)||(Ui=Un.get(Wn)),Se(Ui)&&(Se(Ui=jn(bn,Wn))||(Se(Un)&&(Un=new z,Nn.set(bn,Un)),Un.set(Wn,Ui))),Ui}function Xt(bn){if(Se(bn))throw new TypeError;return tt===bn||yt===bn||!Se(St)&&St.has(bn)}function xn(bn,Wn,Ui){if(!Xt(Ui))throw new Error("Metadata provider not registered.");var Un=ln(bn,Wn);if(Un!==Ui){if(!Se(Un))return!1;var Qs=Nn.get(bn);Se(Qs)&&(Qs=new z,Nn.set(bn,Qs)),Qs.set(Wn,Ui)}return!0}}function ft(){var je;return!Se(q)&&Ce(_.Reflect)&&Object.isExtensible(_.Reflect)&&(je=_.Reflect[q]),Se(je)&&(je=at()),!Se(q)&&Ce(_.Reflect)&&Object.isExtensible(_.Reflect)&&Object.defineProperty(_.Reflect,q,{enumerable:!1,configurable:!1,writable:!1,value:je}),je}function Cn(je){var tt=new H,yt={isProviderFor:function(Xt,xn){var bn=tt.get(Xt);return!Se(bn)&&bn.has(xn)},OrdinaryDefineOwnMetadata:ii,OrdinaryHasOwnMetadata:Nn,OrdinaryGetOwnMetadata:Pi,OrdinaryOwnMetadataKeys:jn,OrdinaryDeleteMetadata:ln};return U.registerProvider(yt),yt;function St(Xt,xn,bn){var Wn=tt.get(Xt),Ui=!1;if(Se(Wn)){if(!bn)return;Wn=new z,tt.set(Xt,Wn),Ui=!0}var Un=Wn.get(xn);if(Se(Un)){if(!bn)return;if(Un=new z,Wn.set(xn,Un),!je.setProvider(Xt,xn,yt))throw Wn.delete(xn),Ui&&tt.delete(Xt),new Error("Wrong provider for target.")}return Un}function Nn(Xt,xn,bn){var Wn=St(xn,bn,!1);return!Se(Wn)&&ie(Wn.has(Xt))}function Pi(Xt,xn,bn){var Wn=St(xn,bn,!1);if(!Se(Wn))return Wn.get(Xt)}function ii(Xt,xn,bn,Wn){St(bn,Wn,!0).set(Xt,xn)}function jn(Xt,xn){var bn=[],Wn=St(Xt,xn,!1);if(Se(Wn))return bn;for(var Ui=$(Wn.keys()),Un=0;;){var Qs=me(Ui);if(!Qs)return bn.length=Un,bn;var uc=K(Qs);try{bn[Un]=uc}catch(Ah){try{Pe(Ui)}finally{throw Ah}}Un++}}function ln(Xt,xn,bn){var Wn=St(xn,bn,!1);if(Se(Wn)||!Wn.delete(Xt))return!1;if(Wn.size===0){var Ui=tt.get(xn);Se(Ui)||(Ui.delete(bn),Ui.size===0&&tt.delete(Ui))}return!0}}function ze(je){var tt=je.defineMetadata,yt=je.hasOwnMetadata,St=je.getOwnMetadata,Nn=je.getOwnMetadataKeys,Pi=je.deleteMetadata,ii=new H;return{isProviderFor:function(jn,ln){var Xt=ii.get(jn);return!(Se(Xt)||!Xt.has(ln))||!!Nn(jn,ln).length&&(Se(Xt)&&(Xt=new Z,ii.set(jn,Xt)),Xt.add(ln),!0)},OrdinaryDefineOwnMetadata:tt,OrdinaryHasOwnMetadata:yt,OrdinaryGetOwnMetadata:St,OrdinaryOwnMetadataKeys:Nn,OrdinaryDeleteMetadata:Pi}}function It(je,tt,yt){var St=U.getProvider(je,tt);if(!Se(St))return St;if(yt){if(U.setProvider(je,tt,ee))return ee;throw new Error("Illegal state.")}}function nt(){var je={},tt=[],yt=function(){function ii(jn,ln,Xt){this._index=0,this._keys=jn,this._values=ln,this._selector=Xt}return ii.prototype["@@iterator"]=function(){return this},ii.prototype[x]=function(){return this},ii.prototype.next=function(){var jn=this._index;if(jn>=0&&jn<this._keys.length){var ln=this._selector(this._keys[jn],this._values[jn]);return jn+1>=this._keys.length?(this._index=-1,this._keys=tt,this._values=tt):this._index++,{value:ln,done:!1}}return{value:void 0,done:!0}},ii.prototype.throw=function(jn){throw this._index>=0&&(this._index=-1,this._keys=tt,this._values=tt),jn},ii.prototype.return=function(jn){return this._index>=0&&(this._index=-1,this._keys=tt,this._values=tt),{value:jn,done:!0}},ii}();return function(){function ii(){this._keys=[],this._values=[],this._cacheKey=je,this._cacheIndex=-2}return Object.defineProperty(ii.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ii.prototype.has=function(jn){return this._find(jn,!1)>=0},ii.prototype.get=function(jn){var ln=this._find(jn,!1);return ln>=0?this._values[ln]:void 0},ii.prototype.set=function(jn,ln){var Xt=this._find(jn,!0);return this._values[Xt]=ln,this},ii.prototype.delete=function(jn){var ln=this._find(jn,!1);if(ln>=0){for(var Xt=this._keys.length,xn=ln+1;xn<Xt;xn++)this._keys[xn-1]=this._keys[xn],this._values[xn-1]=this._values[xn];return this._keys.length--,this._values.length--,tn(jn,this._cacheKey)&&(this._cacheKey=je,this._cacheIndex=-2),!0}return!1},ii.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=je,this._cacheIndex=-2},ii.prototype.keys=function(){return new yt(this._keys,this._values,St)},ii.prototype.values=function(){return new yt(this._keys,this._values,Nn)},ii.prototype.entries=function(){return new yt(this._keys,this._values,Pi)},ii.prototype["@@iterator"]=function(){return this.entries()},ii.prototype[x]=function(){return this.entries()},ii.prototype._find=function(jn,ln){if(!tn(this._cacheKey,jn)){this._cacheIndex=-1;for(var Xt=0;Xt<this._keys.length;Xt++)if(tn(this._keys[Xt],jn)){this._cacheIndex=Xt;break}}return this._cacheIndex<0&&ln&&(this._cacheIndex=this._keys.length,this._keys.push(jn),this._values.push(void 0)),this._cacheIndex},ii}();function St(ii,jn){return ii}function Nn(ii,jn){return jn}function Pi(ii,jn){return[ii,jn]}}function Et(){return function(){function je(){this._map=new z}return Object.defineProperty(je.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),je.prototype.has=function(tt){return this._map.has(tt)},je.prototype.add=function(tt){return this._map.set(tt,tt),this},je.prototype.delete=function(tt){return this._map.delete(tt)},je.prototype.clear=function(){this._map.clear()},je.prototype.keys=function(){return this._map.keys()},je.prototype.values=function(){return this._map.keys()},je.prototype.entries=function(){return this._map.entries()},je.prototype["@@iterator"]=function(){return this.keys()},je.prototype[x]=function(){return this.keys()},je}()}function Wt(){var je=16,tt=L.create(),yt=St();return function(){function ln(){this._key=St()}return ln.prototype.has=function(Xt){var xn=Nn(Xt,!1);return xn!==void 0&&L.has(xn,this._key)},ln.prototype.get=function(Xt){var xn=Nn(Xt,!1);return xn!==void 0?L.get(xn,this._key):void 0},ln.prototype.set=function(Xt,xn){return Nn(Xt,!0)[this._key]=xn,this},ln.prototype.delete=function(Xt){var xn=Nn(Xt,!1);return xn!==void 0&&delete xn[this._key]},ln.prototype.clear=function(){this._key=St()},ln}();function St(){var ln;do ln="@@WeakMap@@"+jn();while(L.has(tt,ln));return tt[ln]=!0,ln}function Nn(ln,Xt){if(!y.call(ln,yt)){if(!Xt)return;Object.defineProperty(ln,yt,{value:L.create()})}return ln[yt]}function Pi(ln,Xt){for(var xn=0;xn<Xt;++xn)ln[xn]=255*Math.random()|0;return ln}function ii(ln){if(typeof Uint8Array=="function"){var Xt=new Uint8Array(ln);return typeof crypto<"u"?crypto.getRandomValues(Xt):typeof msCrypto<"u"?msCrypto.getRandomValues(Xt):Pi(Xt,ln),Xt}return Pi(new Array(ln),ln)}function jn(){var ln=ii(je);ln[6]=79&ln[6]|64,ln[8]=191&ln[8]|128;for(var Xt="",xn=0;xn<je;++xn){var bn=ln[xn];xn!==4&&xn!==6&&xn!==8||(Xt+="-"),bn<16&&(Xt+="0"),Xt+=bn.toString(16).toLowerCase()}return Xt}}function Kt(je){return je.__=void 0,delete je.__,je}v("decorate",W),v("metadata",Q),v("defineMetadata",X),v("hasMetadata",Y),v("hasOwnMetadata",ae),v("getMetadata",se),v("getOwnMetadata",ue),v("getMetadataKeys",Ne),v("getOwnMetadataKeys",ve),v("deleteMetadata",_e)}(f,d),d.Reflect===void 0&&(d.Reflect=u)})()})(c||(c={}))}},i={};function r(a){var o=i[a];if(o!==void 0)return o.exports;var l=i[a]={id:a,loaded:!1,exports:{}};return t[a].call(l.exports,l,l.exports,r),l.loaded=!0,l.exports}r.n=a=>{var o=a&&a.__esModule?()=>a.default:()=>a;return r.d(o,{a:o}),o},r.d=(a,o)=>{for(var l in o)r.o(o,l)&&!r.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:o[l]})},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(a,o)=>Object.prototype.hasOwnProperty.call(a,o),r.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.nmd=a=>(a.paths=[],a.children||(a.children=[]),a);var s={};return(()=>{r.r(s),r.d(s,{BASIC_FULL_HD_LANDSCAPE:()=>ri,BASIC_FULL_HD_PORTRAIT:()=>An,BASIC_LANDSCAPE:()=>wi,BASIC_PORTRAIT:()=>Pn,BroadcastClientError:()=>ft,BroadcastClientEvents:()=>zs,ConnectionState:()=>et,Errors:()=>u,InitialLayerPreference:()=>zl,JitterBufferMinDelay:()=>ls,LOG_LEVEL:()=>K,LocalStageStream:()=>K0,LocalStageStreamEvents:()=>eh,LogLevels:()=>K,RemoteStageStream:()=>Q0,RemoteStageStreamEvents:()=>ya,STANDARD_LANDSCAPE:()=>Ja,STANDARD_PORTRAIT:()=>Ll,Stage:()=>Vh,StageConnectionState:()=>Pr,StageErrorCategory:()=>Qu,StageErrorCode:()=>$i,StageEvents:()=>fr,StageLeftReason:()=>np,StageParticipantPublishState:()=>cs,StageParticipantSubscribeState:()=>ao,StageStream:()=>zm,StageStreamLayerSelectedReason:()=>lu,StreamType:()=>zt,SubscribeType:()=>Ba,__version:()=>dm,create:()=>hr,default:()=>t_,isSupported:()=>$});var a={};r.r(a),r.d(a,{fixNegotiationNeeded:()=>Y,shimAddTrackRemoveTrack:()=>Q,shimAddTrackRemoveTrackWithNative:()=>W,shimGetDisplayMedia:()=>z,shimGetSendersWithDtmf:()=>q,shimGetStats:()=>U,shimGetUserMedia:()=>k,shimMediaStream:()=>Z,shimOnTrack:()=>H,shimPeerConnection:()=>X,shimSenderReceiverGetStats:()=>ee});var o={};r.r(o),r.d(o,{shimAddTransceiver:()=>$e,shimCreateAnswer:()=>Lt,shimCreateOffer:()=>Ct,shimGetDisplayMedia:()=>se,shimGetParameters:()=>bt,shimGetUserMedia:()=>ae,shimOnTrack:()=>ue,shimPeerConnection:()=>Ne,shimRTCDataChannel:()=>He,shimReceiverGetStats:()=>_e,shimRemoveStream:()=>Le,shimSenderGetStats:()=>ve});var l={};r.r(l),r.d(l,{shimAudioContext:()=>ke,shimCallbacksAPI:()=>V,shimConstraints:()=>Se,shimCreateOfferLegacy:()=>Ce,shimGetUserMedia:()=>Ae,shimLocalStreamsAPI:()=>Gt,shimRTCIceServerUrls:()=>ge,shimRemoteStreamsAPI:()=>qt,shimTrackEventTransceiver:()=>fe});var c={};r.r(c),r.d(c,{removeExtmapAllowMixed:()=>_t,shimAddIceCandidateNullOrEmpty:()=>tn,shimConnectionState:()=>Ut,shimMaxMessageSize:()=>Ve,shimParameterlessSetLocalDescription:()=>de,shimRTCIceCandidate:()=>Me,shimRTCIceCandidateRelayProtocol:()=>Fe,shimSendThrowTypeError:()=>We});var u={};r.r(u),r.d(u,{ADD_DEVICE_COMPOSITION_INDEX_MISSING_ERROR:()=>Kt,ADD_DEVICE_COMPOSITION_MISSING_ERROR:()=>Wt,ADD_DEVICE_CONSTRAINTS_ERROR:()=>yt,ADD_DEVICE_DEVICE_ERROR:()=>nt,ADD_DEVICE_NAME_EXISTS_ERROR:()=>Et,ADD_DEVICE_NAME_MISSING_ERROR:()=>je,ADD_DEVICE_UNSUPPORTED:()=>tt,BROADCAST_CONFIGURATION_ERROR:()=>Ui,BROADCAST_ERROR:()=>Cn,CAMERA_ERROR:()=>ze,CLIENT_INVALID_ERROR:()=>tm,EXCHANGE_POSITION_DEVICE_NOT_FOUND_ERROR:()=>ln,FAILED_TO_ADD_IMAGE_ERROR:()=>Xt,INGEST_ENDPOINT_TYPE_ERROR:()=>Qs,INGEST_ENDPOINT_URL_ERROR:()=>uc,INPUT_ERROR:()=>It,INVALID_STREAM_KEY:()=>Wn,LOGGER_TYPE_ERROR:()=>Od,LOG_LEVEL_TYPE_ERROR:()=>Ah,NETWORK_RECONNECT_CONFIGURATION_ERROR:()=>Mh,NETWORK_RECONNECT_CONFIGURATION_INVALID_TIMEOUT_ERROR:()=>Rh,PEER_CONNECTION_ERROR:()=>bn,PEER_SETUP_ERROR:()=>xn,REMOVE_DEVICE_NOT_FOUND_ERROR:()=>St,REMOVE_IMAGE_NOT_FOUND_ERROR:()=>Nn,STAGE_TOKEN_TYPE_ERROR:()=>Ee,STAGE_WHIP_OVERRIDE_ERROR:()=>Ye,STREAM_CONFIGURATION_ERROR:()=>Un,STREAM_KEY_INVALID_CHAR_ERROR:()=>hc,UPDATE_VIDEO_DEVICE_COMPOSITION_INDEX_MISSING_ERROR:()=>ii,UPDATE_VIDEO_DEVICE_COMPOSITION_MISSING_ERROR:()=>Pi,UPDATE_VIDEO_DEVICE_COMPOSITION_NAME_NOT_FOUND_ERROR:()=>jn});var h={};r.r(h),r.d(h,{BASIC_FULL_HD_LANDSCAPE:()=>ri,BASIC_FULL_HD_PORTRAIT:()=>An,BASIC_LANDSCAPE:()=>wi,BASIC_PORTRAIT:()=>Pn,BroadcastClientError:()=>ft,BroadcastClientEvents:()=>zs,ConnectionState:()=>et,Errors:()=>u,LOG_LEVEL:()=>K,LogLevels:()=>K,STANDARD_LANDSCAPE:()=>Ja,STANDARD_PORTRAIT:()=>Ll,__version:()=>dm,create:()=>hr,isSupported:()=>$});let d=!0,f=!0;function m(O,E,A){const M=O.match(E);return M&&M.length>=A&&parseInt(M[A],10)}function v(O,E,A){if(!O.RTCPeerConnection)return;const M=O.RTCPeerConnection.prototype,D=M.addEventListener;M.addEventListener=function(G,re){if(G!==E)return D.apply(this,arguments);const oe=J=>{const le=A(J);le&&(re.handleEvent?re.handleEvent(le):re(le))};return this._eventMap=this._eventMap||{},this._eventMap[E]||(this._eventMap[E]=new Map),this._eventMap[E].set(re,oe),D.apply(this,[G,oe])};const B=M.removeEventListener;M.removeEventListener=function(G,re){if(G!==E||!this._eventMap||!this._eventMap[E])return B.apply(this,arguments);if(!this._eventMap[E].has(re))return B.apply(this,arguments);const oe=this._eventMap[E].get(re);return this._eventMap[E].delete(re),this._eventMap[E].size===0&&delete this._eventMap[E],Object.keys(this._eventMap).length===0&&delete this._eventMap,B.apply(this,[G,oe])},Object.defineProperty(M,"on"+E,{get(){return this["_on"+E]},set(G){this["_on"+E]&&(this.removeEventListener(E,this["_on"+E]),delete this["_on"+E]),G&&this.addEventListener(E,this["_on"+E]=G)},enumerable:!0,configurable:!0})}function _(O){return typeof O!="boolean"?new Error("Argument type: "+typeof O+". Please use a boolean."):(d=O,O?"adapter.js logging disabled":"adapter.js logging enabled")}function y(O){return typeof O!="boolean"?new Error("Argument type: "+typeof O+". Please use a boolean."):(f=!O,"adapter.js deprecation warnings "+(O?"disabled":"enabled"))}function S(){if(typeof window=="object"){if(d)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function T(O,E){f&&console.warn(O+" is deprecated, please use "+E+" instead.")}function x(O){return Object.prototype.toString.call(O)==="[object Object]"}function I(O){return x(O)?Object.keys(O).reduce(function(E,A){const M=x(O[A]),D=M?I(O[A]):O[A],B=M&&!Object.keys(D).length;return D===void 0||B?E:Object.assign(E,{[A]:D})},{}):O}function R(O,E,A){E&&!A.has(E.id)&&(A.set(E.id,E),Object.keys(E).forEach(M=>{M.endsWith("Id")?R(O,O.get(E[M]),A):M.endsWith("Ids")&&E[M].forEach(D=>{R(O,O.get(D),A)})}))}function N(O,E,A){const M=A?"outbound-rtp":"inbound-rtp",D=new Map;if(E===null)return D;const B=[];return O.forEach(G=>{G.type==="track"&&G.trackIdentifier===E.id&&B.push(G)}),B.forEach(G=>{O.forEach(re=>{re.type===M&&re.trackId===G.id&&R(O,re,D)})}),D}const L=S;function k(O,E){const A=O&&O.navigator;if(!A.mediaDevices)return;const M=function(G){if(typeof G!="object"||G.mandatory||G.optional)return G;const re={};return Object.keys(G).forEach(oe=>{if(oe==="require"||oe==="advanced"||oe==="mediaSource")return;const J=typeof G[oe]=="object"?G[oe]:{ideal:G[oe]};J.exact!==void 0&&typeof J.exact=="number"&&(J.min=J.max=J.exact);const le=function(pe,ye){return pe?pe+ye.charAt(0).toUpperCase()+ye.slice(1):ye==="deviceId"?"sourceId":ye};if(J.ideal!==void 0){re.optional=re.optional||[];let pe={};typeof J.ideal=="number"?(pe[le("min",oe)]=J.ideal,re.optional.push(pe),pe={},pe[le("max",oe)]=J.ideal,re.optional.push(pe)):(pe[le("",oe)]=J.ideal,re.optional.push(pe))}J.exact!==void 0&&typeof J.exact!="number"?(re.mandatory=re.mandatory||{},re.mandatory[le("",oe)]=J.exact):["min","max"].forEach(pe=>{J[pe]!==void 0&&(re.mandatory=re.mandatory||{},re.mandatory[le(pe,oe)]=J[pe])})}),G.advanced&&(re.optional=(re.optional||[]).concat(G.advanced)),re},D=function(G,re){if(E.version>=61)return re(G);if((G=JSON.parse(JSON.stringify(G)))&&typeof G.audio=="object"){const oe=function(J,le,pe){le in J&&!(pe in J)&&(J[pe]=J[le],delete J[le])};oe((G=JSON.parse(JSON.stringify(G))).audio,"autoGainControl","googAutoGainControl"),oe(G.audio,"noiseSuppression","googNoiseSuppression"),G.audio=M(G.audio)}if(G&&typeof G.video=="object"){let oe=G.video.facingMode;oe=oe&&(typeof oe=="object"?oe:{ideal:oe});const J=E.version<66;if(oe&&(oe.exact==="user"||oe.exact==="environment"||oe.ideal==="user"||oe.ideal==="environment")&&(!A.mediaDevices.getSupportedConstraints||!A.mediaDevices.getSupportedConstraints().facingMode||J)){let le;if(delete G.video.facingMode,oe.exact==="environment"||oe.ideal==="environment"?le=["back","rear"]:oe.exact!=="user"&&oe.ideal!=="user"||(le=["front"]),le)return A.mediaDevices.enumerateDevices().then(pe=>{let ye=(pe=pe.filter(Ie=>Ie.kind==="videoinput")).find(Ie=>le.some(Xe=>Ie.label.toLowerCase().includes(Xe)));return!ye&&pe.length&&le.includes("back")&&(ye=pe[pe.length-1]),ye&&(G.video.deviceId=oe.exact?{exact:ye.deviceId}:{ideal:ye.deviceId}),G.video=M(G.video),L("chrome: "+JSON.stringify(G)),re(G)})}G.video=M(G.video)}return L("chrome: "+JSON.stringify(G)),re(G)},B=function(G){return E.version>=64?G:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[G.name]||G.name,message:G.message,constraint:G.constraint||G.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(A.getUserMedia=(function(G,re,oe){D(G,J=>{A.webkitGetUserMedia(J,re,le=>{oe&&oe(B(le))})})}).bind(A),A.mediaDevices.getUserMedia){const G=A.mediaDevices.getUserMedia.bind(A.mediaDevices);A.mediaDevices.getUserMedia=function(re){return D(re,oe=>G(oe).then(J=>{if(oe.audio&&!J.getAudioTracks().length||oe.video&&!J.getVideoTracks().length)throw J.getTracks().forEach(le=>{le.stop()}),new DOMException("","NotFoundError");return J},J=>Promise.reject(B(J))))}}}function z(O,E){O.navigator.mediaDevices&&"getDisplayMedia"in O.navigator.mediaDevices||O.navigator.mediaDevices&&(typeof E=="function"?O.navigator.mediaDevices.getDisplayMedia=function(A){return E(A).then(M=>{const D=A.video&&A.video.width,B=A.video&&A.video.height,G=A.video&&A.video.frameRate;return A.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:M,maxFrameRate:G||3}},D&&(A.video.mandatory.maxWidth=D),B&&(A.video.mandatory.maxHeight=B),O.navigator.mediaDevices.getUserMedia(A)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function Z(O){O.MediaStream=O.MediaStream||O.webkitMediaStream}function H(O){if(typeof O=="object"&&O.RTCPeerConnection&&!("ontrack"in O.RTCPeerConnection.prototype)){Object.defineProperty(O.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(A){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=A)},enumerable:!0,configurable:!0});const E=O.RTCPeerConnection.prototype.setRemoteDescription;O.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=A=>{A.stream.addEventListener("addtrack",M=>{let D;D=O.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(G=>G.track&&G.track.id===M.track.id):{track:M.track};const B=new Event("track");B.track=M.track,B.receiver=D,B.transceiver={receiver:D},B.streams=[A.stream],this.dispatchEvent(B)}),A.stream.getTracks().forEach(M=>{let D;D=O.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(G=>G.track&&G.track.id===M.id):{track:M};const B=new Event("track");B.track=M,B.receiver=D,B.transceiver={receiver:D},B.streams=[A.stream],this.dispatchEvent(B)})},this.addEventListener("addstream",this._ontrackpoly)),E.apply(this,arguments)}}else v(O,"track",E=>(E.transceiver||Object.defineProperty(E,"transceiver",{value:{receiver:E.receiver}}),E))}function q(O){if(typeof O=="object"&&O.RTCPeerConnection&&!("getSenders"in O.RTCPeerConnection.prototype)&&"createDTMFSender"in O.RTCPeerConnection.prototype){const E=function(D,B){return{track:B,get dtmf(){return this._dtmf===void 0&&(B.kind==="audio"?this._dtmf=D.createDTMFSender(B):this._dtmf=null),this._dtmf},_pc:D}};if(!O.RTCPeerConnection.prototype.getSenders){O.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const D=O.RTCPeerConnection.prototype.addTrack;O.RTCPeerConnection.prototype.addTrack=function(G,re){let oe=D.apply(this,arguments);return oe||(oe=E(this,G),this._senders.push(oe)),oe};const B=O.RTCPeerConnection.prototype.removeTrack;O.RTCPeerConnection.prototype.removeTrack=function(G){B.apply(this,arguments);const re=this._senders.indexOf(G);re!==-1&&this._senders.splice(re,1)}}const A=O.RTCPeerConnection.prototype.addStream;O.RTCPeerConnection.prototype.addStream=function(D){this._senders=this._senders||[],A.apply(this,[D]),D.getTracks().forEach(B=>{this._senders.push(E(this,B))})};const M=O.RTCPeerConnection.prototype.removeStream;O.RTCPeerConnection.prototype.removeStream=function(D){this._senders=this._senders||[],M.apply(this,[D]),D.getTracks().forEach(B=>{const G=this._senders.find(re=>re.track===B);G&&this._senders.splice(this._senders.indexOf(G),1)})}}else if(typeof O=="object"&&O.RTCPeerConnection&&"getSenders"in O.RTCPeerConnection.prototype&&"createDTMFSender"in O.RTCPeerConnection.prototype&&O.RTCRtpSender&&!("dtmf"in O.RTCRtpSender.prototype)){const E=O.RTCPeerConnection.prototype.getSenders;O.RTCPeerConnection.prototype.getSenders=function(){const A=E.apply(this,[]);return A.forEach(M=>M._pc=this),A},Object.defineProperty(O.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function U(O){if(!O.RTCPeerConnection)return;const E=O.RTCPeerConnection.prototype.getStats;O.RTCPeerConnection.prototype.getStats=function(){const[A,M,D]=arguments;if(arguments.length>0&&typeof A=="function")return E.apply(this,arguments);if(E.length===0&&(arguments.length===0||typeof A!="function"))return E.apply(this,[]);const B=function(re){const oe={};return re.result().forEach(J=>{const le={id:J.id,timestamp:J.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[J.type]||J.type};J.names().forEach(pe=>{le[pe]=J.stat(pe)}),oe[le.id]=le}),oe},G=function(re){return new Map(Object.keys(re).map(oe=>[oe,re[oe]]))};if(arguments.length>=2){const re=function(oe){M(G(B(oe)))};return E.apply(this,[re,A])}return new Promise((re,oe)=>{E.apply(this,[function(J){re(G(B(J)))},oe])}).then(M,D)}}function ee(O){if(!(typeof O=="object"&&O.RTCPeerConnection&&O.RTCRtpSender&&O.RTCRtpReceiver))return;if(!("getStats"in O.RTCRtpSender.prototype)){const A=O.RTCPeerConnection.prototype.getSenders;A&&(O.RTCPeerConnection.prototype.getSenders=function(){const D=A.apply(this,[]);return D.forEach(B=>B._pc=this),D});const M=O.RTCPeerConnection.prototype.addTrack;M&&(O.RTCPeerConnection.prototype.addTrack=function(){const D=M.apply(this,arguments);return D._pc=this,D}),O.RTCRtpSender.prototype.getStats=function(){const D=this;return this._pc.getStats().then(B=>N(B,D.track,!0))}}if(!("getStats"in O.RTCRtpReceiver.prototype)){const A=O.RTCPeerConnection.prototype.getReceivers;A&&(O.RTCPeerConnection.prototype.getReceivers=function(){const M=A.apply(this,[]);return M.forEach(D=>D._pc=this),M}),v(O,"track",M=>(M.receiver._pc=M.srcElement,M)),O.RTCRtpReceiver.prototype.getStats=function(){const M=this;return this._pc.getStats().then(D=>N(D,M.track,!1))}}if(!("getStats"in O.RTCRtpSender.prototype)||!("getStats"in O.RTCRtpReceiver.prototype))return;const E=O.RTCPeerConnection.prototype.getStats;O.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof O.MediaStreamTrack){const A=arguments[0];let M,D,B;return this.getSenders().forEach(G=>{G.track===A&&(M?B=!0:M=G)}),this.getReceivers().forEach(G=>(G.track===A&&(D?B=!0:D=G),G.track===A)),B||M&&D?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):M?M.getStats():D?D.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return E.apply(this,arguments)}}function W(O){O.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(B=>this._shimmedLocalStreams[B][0])};const E=O.RTCPeerConnection.prototype.addTrack;O.RTCPeerConnection.prototype.addTrack=function(B,G){if(!G)return E.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const re=E.apply(this,arguments);return this._shimmedLocalStreams[G.id]?this._shimmedLocalStreams[G.id].indexOf(re)===-1&&this._shimmedLocalStreams[G.id].push(re):this._shimmedLocalStreams[G.id]=[G,re],re};const A=O.RTCPeerConnection.prototype.addStream;O.RTCPeerConnection.prototype.addStream=function(B){this._shimmedLocalStreams=this._shimmedLocalStreams||{},B.getTracks().forEach(oe=>{if(this.getSenders().find(J=>J.track===oe))throw new DOMException("Track already exists.","InvalidAccessError")});const G=this.getSenders();A.apply(this,arguments);const re=this.getSenders().filter(oe=>G.indexOf(oe)===-1);this._shimmedLocalStreams[B.id]=[B].concat(re)};const M=O.RTCPeerConnection.prototype.removeStream;O.RTCPeerConnection.prototype.removeStream=function(B){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[B.id],M.apply(this,arguments)};const D=O.RTCPeerConnection.prototype.removeTrack;O.RTCPeerConnection.prototype.removeTrack=function(B){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},B&&Object.keys(this._shimmedLocalStreams).forEach(G=>{const re=this._shimmedLocalStreams[G].indexOf(B);re!==-1&&this._shimmedLocalStreams[G].splice(re,1),this._shimmedLocalStreams[G].length===1&&delete this._shimmedLocalStreams[G]}),D.apply(this,arguments)}}function Q(O,E){if(!O.RTCPeerConnection)return;if(O.RTCPeerConnection.prototype.addTrack&&E.version>=65)return W(O);const A=O.RTCPeerConnection.prototype.getLocalStreams;O.RTCPeerConnection.prototype.getLocalStreams=function(){const oe=A.apply(this);return this._reverseStreams=this._reverseStreams||{},oe.map(J=>this._reverseStreams[J.id])};const M=O.RTCPeerConnection.prototype.addStream;O.RTCPeerConnection.prototype.addStream=function(oe){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},oe.getTracks().forEach(J=>{if(this.getSenders().find(le=>le.track===J))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[oe.id]){const J=new O.MediaStream(oe.getTracks());this._streams[oe.id]=J,this._reverseStreams[J.id]=oe,oe=J}M.apply(this,[oe])};const D=O.RTCPeerConnection.prototype.removeStream;function B(oe,J){let le=J.sdp;return Object.keys(oe._reverseStreams||[]).forEach(pe=>{const ye=oe._reverseStreams[pe],Ie=oe._streams[ye.id];le=le.replace(new RegExp(Ie.id,"g"),ye.id)}),new RTCSessionDescription({type:J.type,sdp:le})}O.RTCPeerConnection.prototype.removeStream=function(oe){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},D.apply(this,[this._streams[oe.id]||oe]),delete this._reverseStreams[this._streams[oe.id]?this._streams[oe.id].id:oe.id],delete this._streams[oe.id]},O.RTCPeerConnection.prototype.addTrack=function(oe,J){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const le=[].slice.call(arguments,1);if(le.length!==1||!le[0].getTracks().find(ye=>ye===oe))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(ye=>ye.track===oe))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const pe=this._streams[J.id];if(pe)pe.addTrack(oe),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const ye=new O.MediaStream([oe]);this._streams[J.id]=ye,this._reverseStreams[ye.id]=J,this.addStream(ye)}return this.getSenders().find(ye=>ye.track===oe)},["createOffer","createAnswer"].forEach(function(oe){const J=O.RTCPeerConnection.prototype[oe],le={[oe](){const pe=arguments;return arguments.length&&typeof arguments[0]=="function"?J.apply(this,[ye=>{const Ie=B(this,ye);pe[0].apply(null,[Ie])},ye=>{pe[1]&&pe[1].apply(null,ye)},arguments[2]]):J.apply(this,arguments).then(ye=>B(this,ye))}};O.RTCPeerConnection.prototype[oe]=le[oe]});const G=O.RTCPeerConnection.prototype.setLocalDescription;O.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(oe,J){let le=J.sdp;return Object.keys(oe._reverseStreams||[]).forEach(pe=>{const ye=oe._reverseStreams[pe],Ie=oe._streams[ye.id];le=le.replace(new RegExp(ye.id,"g"),Ie.id)}),new RTCSessionDescription({type:J.type,sdp:le})}(this,arguments[0]),G.apply(this,arguments)):G.apply(this,arguments)};const re=Object.getOwnPropertyDescriptor(O.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(O.RTCPeerConnection.prototype,"localDescription",{get(){const oe=re.get.apply(this);return oe.type===""?oe:B(this,oe)}}),O.RTCPeerConnection.prototype.removeTrack=function(oe){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!oe._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(oe._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let J;this._streams=this._streams||{},Object.keys(this._streams).forEach(le=>{this._streams[le].getTracks().find(pe=>oe.track===pe)&&(J=this._streams[le])}),J&&(J.getTracks().length===1?this.removeStream(this._reverseStreams[J.id]):J.removeTrack(oe.track),this.dispatchEvent(new Event("negotiationneeded")))}}function X(O,E){!O.RTCPeerConnection&&O.webkitRTCPeerConnection&&(O.RTCPeerConnection=O.webkitRTCPeerConnection),O.RTCPeerConnection&&E.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(A){const M=O.RTCPeerConnection.prototype[A],D={[A](){return arguments[0]=new(A==="addIceCandidate"?O.RTCIceCandidate:O.RTCSessionDescription)(arguments[0]),M.apply(this,arguments)}};O.RTCPeerConnection.prototype[A]=D[A]})}function Y(O,E){v(O,"negotiationneeded",A=>{const M=A.target;if(!(E.version<72||M.getConfiguration&&M.getConfiguration().sdpSemantics==="plan-b")||M.signalingState==="stable")return A})}function ae(O,E){const A=O&&O.navigator,M=O&&O.MediaStreamTrack;if(A.getUserMedia=function(D,B,G){T("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),A.mediaDevices.getUserMedia(D).then(B,G)},!(E.version>55&&"autoGainControl"in A.mediaDevices.getSupportedConstraints())){const D=function(G,re,oe){re in G&&!(oe in G)&&(G[oe]=G[re],delete G[re])},B=A.mediaDevices.getUserMedia.bind(A.mediaDevices);if(A.mediaDevices.getUserMedia=function(G){return typeof G=="object"&&typeof G.audio=="object"&&(G=JSON.parse(JSON.stringify(G)),D(G.audio,"autoGainControl","mozAutoGainControl"),D(G.audio,"noiseSuppression","mozNoiseSuppression")),B(G)},M&&M.prototype.getSettings){const G=M.prototype.getSettings;M.prototype.getSettings=function(){const re=G.apply(this,arguments);return D(re,"mozAutoGainControl","autoGainControl"),D(re,"mozNoiseSuppression","noiseSuppression"),re}}if(M&&M.prototype.applyConstraints){const G=M.prototype.applyConstraints;M.prototype.applyConstraints=function(re){return this.kind==="audio"&&typeof re=="object"&&(re=JSON.parse(JSON.stringify(re)),D(re,"autoGainControl","mozAutoGainControl"),D(re,"noiseSuppression","mozNoiseSuppression")),G.apply(this,[re])}}}}function se(O,E){O.navigator.mediaDevices&&"getDisplayMedia"in O.navigator.mediaDevices||O.navigator.mediaDevices&&(O.navigator.mediaDevices.getDisplayMedia=function(A){if(!A||!A.video){const M=new DOMException("getDisplayMedia without video constraints is undefined");return M.name="NotFoundError",M.code=8,Promise.reject(M)}return A.video===!0?A.video={mediaSource:E}:A.video.mediaSource=E,O.navigator.mediaDevices.getUserMedia(A)})}function ue(O){typeof O=="object"&&O.RTCTrackEvent&&"receiver"in O.RTCTrackEvent.prototype&&!("transceiver"in O.RTCTrackEvent.prototype)&&Object.defineProperty(O.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ne(O,E){if(typeof O!="object"||!O.RTCPeerConnection&&!O.mozRTCPeerConnection)return;!O.RTCPeerConnection&&O.mozRTCPeerConnection&&(O.RTCPeerConnection=O.mozRTCPeerConnection),E.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(D){const B=O.RTCPeerConnection.prototype[D],G={[D](){return arguments[0]=new(D==="addIceCandidate"?O.RTCIceCandidate:O.RTCSessionDescription)(arguments[0]),B.apply(this,arguments)}};O.RTCPeerConnection.prototype[D]=G[D]});const A={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},M=O.RTCPeerConnection.prototype.getStats;O.RTCPeerConnection.prototype.getStats=function(){const[D,B,G]=arguments;return M.apply(this,[D||null]).then(re=>{if(E.version<53&&!B)try{re.forEach(oe=>{oe.type=A[oe.type]||oe.type})}catch(oe){if(oe.name!=="TypeError")throw oe;re.forEach((J,le)=>{re.set(le,Object.assign({},J,{type:A[J.type]||J.type}))})}return re}).then(B,G)}}function ve(O){if(typeof O!="object"||!O.RTCPeerConnection||!O.RTCRtpSender||O.RTCRtpSender&&"getStats"in O.RTCRtpSender.prototype)return;const E=O.RTCPeerConnection.prototype.getSenders;E&&(O.RTCPeerConnection.prototype.getSenders=function(){const M=E.apply(this,[]);return M.forEach(D=>D._pc=this),M});const A=O.RTCPeerConnection.prototype.addTrack;A&&(O.RTCPeerConnection.prototype.addTrack=function(){const M=A.apply(this,arguments);return M._pc=this,M}),O.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function _e(O){if(typeof O!="object"||!O.RTCPeerConnection||!O.RTCRtpSender||O.RTCRtpSender&&"getStats"in O.RTCRtpReceiver.prototype)return;const E=O.RTCPeerConnection.prototype.getReceivers;E&&(O.RTCPeerConnection.prototype.getReceivers=function(){const A=E.apply(this,[]);return A.forEach(M=>M._pc=this),A}),v(O,"track",A=>(A.receiver._pc=A.srcElement,A)),O.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Le(O){O.RTCPeerConnection&&!("removeStream"in O.RTCPeerConnection.prototype)&&(O.RTCPeerConnection.prototype.removeStream=function(E){T("removeStream","removeTrack"),this.getSenders().forEach(A=>{A.track&&E.getTracks().includes(A.track)&&this.removeTrack(A)})})}function He(O){O.DataChannel&&!O.RTCDataChannel&&(O.RTCDataChannel=O.DataChannel)}function $e(O){if(typeof O!="object"||!O.RTCPeerConnection)return;const E=O.RTCPeerConnection.prototype.addTransceiver;E&&(O.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let A=arguments[1]&&arguments[1].sendEncodings;A===void 0&&(A=[]),A=[...A];const M=A.length>0;M&&A.forEach(B=>{if("rid"in B&&!/^[a-z0-9]{0,16}$/i.test(B.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in B&&!(parseFloat(B.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in B&&!(parseFloat(B.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const D=E.apply(this,arguments);if(M){const{sender:B}=D,G=B.getParameters();(!("encodings"in G)||G.encodings.length===1&&Object.keys(G.encodings[0]).length===0)&&(G.encodings=A,B.sendEncodings=A,this.setParametersPromises.push(B.setParameters(G).then(()=>{delete B.sendEncodings}).catch(()=>{delete B.sendEncodings})))}return D})}function bt(O){if(typeof O!="object"||!O.RTCRtpSender)return;const E=O.RTCRtpSender.prototype.getParameters;E&&(O.RTCRtpSender.prototype.getParameters=function(){const A=E.apply(this,arguments);return"encodings"in A||(A.encodings=[].concat(this.sendEncodings||[{}])),A})}function Ct(O){if(typeof O!="object"||!O.RTCPeerConnection)return;const E=O.RTCPeerConnection.prototype.createOffer;O.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>E.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):E.apply(this,arguments)}}function Lt(O){if(typeof O!="object"||!O.RTCPeerConnection)return;const E=O.RTCPeerConnection.prototype.createAnswer;O.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>E.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):E.apply(this,arguments)}}function Gt(O){if(typeof O=="object"&&O.RTCPeerConnection){if("getLocalStreams"in O.RTCPeerConnection.prototype||(O.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in O.RTCPeerConnection.prototype)){const E=O.RTCPeerConnection.prototype.addTrack;O.RTCPeerConnection.prototype.addStream=function(A){this._localStreams||(this._localStreams=[]),this._localStreams.includes(A)||this._localStreams.push(A),A.getAudioTracks().forEach(M=>E.call(this,M,A)),A.getVideoTracks().forEach(M=>E.call(this,M,A))},O.RTCPeerConnection.prototype.addTrack=function(A,...M){return M&&M.forEach(D=>{this._localStreams?this._localStreams.includes(D)||this._localStreams.push(D):this._localStreams=[D]}),E.apply(this,arguments)}}"removeStream"in O.RTCPeerConnection.prototype||(O.RTCPeerConnection.prototype.removeStream=function(E){this._localStreams||(this._localStreams=[]);const A=this._localStreams.indexOf(E);if(A===-1)return;this._localStreams.splice(A,1);const M=E.getTracks();this.getSenders().forEach(D=>{M.includes(D.track)&&this.removeTrack(D)})})}}function qt(O){if(typeof O=="object"&&O.RTCPeerConnection&&("getRemoteStreams"in O.RTCPeerConnection.prototype||(O.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in O.RTCPeerConnection.prototype))){Object.defineProperty(O.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(A){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=A),this.addEventListener("track",this._onaddstreampoly=M=>{M.streams.forEach(D=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(D))return;this._remoteStreams.push(D);const B=new Event("addstream");B.stream=D,this.dispatchEvent(B)})})}});const E=O.RTCPeerConnection.prototype.setRemoteDescription;O.RTCPeerConnection.prototype.setRemoteDescription=function(){const A=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(M){M.streams.forEach(D=>{if(A._remoteStreams||(A._remoteStreams=[]),A._remoteStreams.indexOf(D)>=0)return;A._remoteStreams.push(D);const B=new Event("addstream");B.stream=D,A.dispatchEvent(B)})}),E.apply(A,arguments)}}}function V(O){if(typeof O!="object"||!O.RTCPeerConnection)return;const E=O.RTCPeerConnection.prototype,A=E.createOffer,M=E.createAnswer,D=E.setLocalDescription,B=E.setRemoteDescription,G=E.addIceCandidate;E.createOffer=function(oe,J){const le=arguments.length>=2?arguments[2]:arguments[0],pe=A.apply(this,[le]);return J?(pe.then(oe,J),Promise.resolve()):pe},E.createAnswer=function(oe,J){const le=arguments.length>=2?arguments[2]:arguments[0],pe=M.apply(this,[le]);return J?(pe.then(oe,J),Promise.resolve()):pe};let re=function(oe,J,le){const pe=D.apply(this,[oe]);return le?(pe.then(J,le),Promise.resolve()):pe};E.setLocalDescription=re,re=function(oe,J,le){const pe=B.apply(this,[oe]);return le?(pe.then(J,le),Promise.resolve()):pe},E.setRemoteDescription=re,re=function(oe,J,le){const pe=G.apply(this,[oe]);return le?(pe.then(J,le),Promise.resolve()):pe},E.addIceCandidate=re}function Ae(O){const E=O&&O.navigator;if(E.mediaDevices&&E.mediaDevices.getUserMedia){const A=E.mediaDevices,M=A.getUserMedia.bind(A);E.mediaDevices.getUserMedia=D=>M(Se(D))}!E.getUserMedia&&E.mediaDevices&&E.mediaDevices.getUserMedia&&(E.getUserMedia=(function(A,M,D){E.mediaDevices.getUserMedia(A).then(M,D)}).bind(E))}function Se(O){return O&&O.video!==void 0?Object.assign({},O,{video:I(O.video)}):O}function ge(O){if(!O.RTCPeerConnection)return;const E=O.RTCPeerConnection;O.RTCPeerConnection=function(A,M){if(A&&A.iceServers){const D=[];for(let B=0;B<A.iceServers.length;B++){let G=A.iceServers[B];G.urls===void 0&&G.url?(T("RTCIceServer.url","RTCIceServer.urls"),G=JSON.parse(JSON.stringify(G)),G.urls=G.url,delete G.url,D.push(G)):D.push(A.iceServers[B])}A.iceServers=D}return new E(A,M)},O.RTCPeerConnection.prototype=E.prototype,"generateCertificate"in E&&Object.defineProperty(O.RTCPeerConnection,"generateCertificate",{get:()=>E.generateCertificate})}function fe(O){typeof O=="object"&&O.RTCTrackEvent&&"receiver"in O.RTCTrackEvent.prototype&&!("transceiver"in O.RTCTrackEvent.prototype)&&Object.defineProperty(O.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ce(O){const E=O.RTCPeerConnection.prototype.createOffer;O.RTCPeerConnection.prototype.createOffer=function(A){if(A){A.offerToReceiveAudio!==void 0&&(A.offerToReceiveAudio=!!A.offerToReceiveAudio);const M=this.getTransceivers().find(B=>B.receiver.track.kind==="audio");A.offerToReceiveAudio===!1&&M?M.direction==="sendrecv"?M.setDirection?M.setDirection("sendonly"):M.direction="sendonly":M.direction==="recvonly"&&(M.setDirection?M.setDirection("inactive"):M.direction="inactive"):A.offerToReceiveAudio!==!0||M||this.addTransceiver("audio",{direction:"recvonly"}),A.offerToReceiveVideo!==void 0&&(A.offerToReceiveVideo=!!A.offerToReceiveVideo);const D=this.getTransceivers().find(B=>B.receiver.track.kind==="video");A.offerToReceiveVideo===!1&&D?D.direction==="sendrecv"?D.setDirection?D.setDirection("sendonly"):D.direction="sendonly":D.direction==="recvonly"&&(D.setDirection?D.setDirection("inactive"):D.direction="inactive"):A.offerToReceiveVideo!==!0||D||this.addTransceiver("video",{direction:"recvonly"})}return E.apply(this,arguments)}}function ke(O){typeof O!="object"||O.AudioContext||(O.AudioContext=O.webkitAudioContext)}var he=r(7539),ie=r.n(he);function Me(O){if(!O.RTCIceCandidate||O.RTCIceCandidate&&"foundation"in O.RTCIceCandidate.prototype)return;const E=O.RTCIceCandidate;O.RTCIceCandidate=function(A){if(typeof A=="object"&&A.candidate&&A.candidate.indexOf("a=")===0&&((A=JSON.parse(JSON.stringify(A))).candidate=A.candidate.substring(2)),A.candidate&&A.candidate.length){const M=new E(A),D=ie().parseCandidate(A.candidate);for(const B in D)B in M||Object.defineProperty(M,B,{value:D[B]});return M.toJSON=function(){return{candidate:M.candidate,sdpMid:M.sdpMid,sdpMLineIndex:M.sdpMLineIndex,usernameFragment:M.usernameFragment}},M}return new E(A)},O.RTCIceCandidate.prototype=E.prototype,v(O,"icecandidate",A=>(A.candidate&&Object.defineProperty(A,"candidate",{value:new O.RTCIceCandidate(A.candidate),writable:"false"}),A))}function Fe(O){!O.RTCIceCandidate||O.RTCIceCandidate&&"relayProtocol"in O.RTCIceCandidate.prototype||v(O,"icecandidate",E=>{if(E.candidate){const A=ie().parseCandidate(E.candidate.candidate);A.type==="relay"&&(E.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[A.priority>>24])}return E})}function Ve(O,E){if(!O.RTCPeerConnection)return;"sctp"in O.RTCPeerConnection.prototype||Object.defineProperty(O.RTCPeerConnection.prototype,"sctp",{get(){return this._sctp===void 0?null:this._sctp}});const A=O.RTCPeerConnection.prototype.setRemoteDescription;O.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,E.browser==="chrome"&&E.version>=76){const{sdpSemantics:M}=this.getConfiguration();M==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return this._sctp===void 0?null:this._sctp},enumerable:!0,configurable:!0})}if(function(M){if(!M||!M.sdp)return!1;const D=ie().splitSections(M.sdp);return D.shift(),D.some(B=>{const G=ie().parseMLine(B);return G&&G.kind==="application"&&G.protocol.indexOf("SCTP")!==-1})}(arguments[0])){const M=function(oe){const J=oe.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(J===null||J.length<2)return-1;const le=parseInt(J[1],10);return le!=le?-1:le}(arguments[0]),D=function(oe){let J=65536;return E.browser==="firefox"&&(J=E.version<57?oe===-1?16384:2147483637:E.version<60?E.version===57?65535:65536:2147483637),J}(M),B=function(oe,J){let le=65536;E.browser==="firefox"&&E.version===57&&(le=65535);const pe=ie().matchPrefix(oe.sdp,"a=max-message-size:");return pe.length>0?le=parseInt(pe[0].substring(19),10):E.browser==="firefox"&&J!==-1&&(le=2147483637),le}(arguments[0],M);let G;G=D===0&&B===0?Number.POSITIVE_INFINITY:D===0||B===0?Math.max(D,B):Math.min(D,B);const re={};Object.defineProperty(re,"maxMessageSize",{get:()=>G}),this._sctp=re}return A.apply(this,arguments)}}function We(O){if(!O.RTCPeerConnection||!("createDataChannel"in O.RTCPeerConnection.prototype))return;function E(M,D){const B=M.send;M.send=function(){const G=arguments[0],re=G.length||G.size||G.byteLength;if(M.readyState==="open"&&D.sctp&&re>D.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+D.sctp.maxMessageSize+" bytes)");return B.apply(M,arguments)}}const A=O.RTCPeerConnection.prototype.createDataChannel;O.RTCPeerConnection.prototype.createDataChannel=function(){const M=A.apply(this,arguments);return E(M,this),M},v(O,"datachannel",M=>(E(M.channel,M.target),M))}function Ut(O){if(!O.RTCPeerConnection||"connectionState"in O.RTCPeerConnection.prototype)return;const E=O.RTCPeerConnection.prototype;Object.defineProperty(E,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(E,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(A){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),A&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=A)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(A=>{const M=E[A];E[A]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=D=>{const B=D.target;if(B._lastConnectionState!==B.connectionState){B._lastConnectionState=B.connectionState;const G=new Event("connectionstatechange",D);B.dispatchEvent(G)}return D},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),M.apply(this,arguments)}})}function _t(O,E){if(!O.RTCPeerConnection||E.browser==="chrome"&&E.version>=71||E.browser==="safari"&&E.version>=605)return;const A=O.RTCPeerConnection.prototype.setRemoteDescription;O.RTCPeerConnection.prototype.setRemoteDescription=function(M){if(M&&M.sdp&&M.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const D=M.sdp.split(`
`).filter(B=>B.trim()!=="a=extmap-allow-mixed").join(`
`);O.RTCSessionDescription&&M instanceof O.RTCSessionDescription?arguments[0]=new O.RTCSessionDescription({type:M.type,sdp:D}):M.sdp=D}return A.apply(this,arguments)}}function tn(O,E){if(!O.RTCPeerConnection||!O.RTCPeerConnection.prototype)return;const A=O.RTCPeerConnection.prototype.addIceCandidate;A&&A.length!==0&&(O.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(E.browser==="chrome"&&E.version<78||E.browser==="firefox"&&E.version<68||E.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():A.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function de(O,E){if(!O.RTCPeerConnection||!O.RTCPeerConnection.prototype)return;const A=O.RTCPeerConnection.prototype.setLocalDescription;A&&A.length!==0&&(O.RTCPeerConnection.prototype.setLocalDescription=function(){let M=arguments[0]||{};if(typeof M!="object"||M.type&&M.sdp)return A.apply(this,arguments);if(M={type:M.type,sdp:M.sdp},!M.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":M.type="offer";break;default:M.type="answer"}return M.sdp||M.type!=="offer"&&M.type!=="answer"?A.apply(this,[M]):(M.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(D=>A.apply(this,[D]))})}(function({window:O}={},E={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const A=S,M=function(B){const G={browser:null,version:null};if(B===void 0||!B.navigator||!B.navigator.userAgent)return G.browser="Not a browser.",G;const{navigator:re}=B;if(re.mozGetUserMedia)G.browser="firefox",G.version=m(re.userAgent,/Firefox\/(\d+)\./,1);else if(re.webkitGetUserMedia||B.isSecureContext===!1&&B.webkitRTCPeerConnection)G.browser="chrome",G.version=m(re.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!B.RTCPeerConnection||!re.userAgent.match(/AppleWebKit\/(\d+)\./))return G.browser="Not a supported browser.",G;G.browser="safari",G.version=m(re.userAgent,/AppleWebKit\/(\d+)\./,1),G.supportsUnifiedPlan=B.RTCRtpTransceiver&&"currentDirection"in B.RTCRtpTransceiver.prototype}return G}(O),D={browserDetails:M,commonShim:c,extractVersion:m,disableLog:_,disableWarnings:y,sdp:he};switch(M.browser){case"chrome":if(!a||!X||!E.shimChrome)return A("Chrome shim is not included in this adapter release."),D;if(M.version===null)return A("Chrome shim can not determine version, not shimming."),D;A("adapter.js shimming chrome."),D.browserShim=a,tn(O,M),de(O),k(O,M),Z(O),X(O,M),H(O),Q(O,M),q(O),U(O),ee(O),Y(O,M),Me(O),Fe(O),Ut(O),Ve(O,M),We(O),_t(O,M);break;case"firefox":if(!o||!Ne||!E.shimFirefox)return A("Firefox shim is not included in this adapter release."),D;A("adapter.js shimming firefox."),D.browserShim=o,tn(O,M),de(O),ae(O,M),Ne(O,M),ue(O),Le(O),ve(O),_e(O),He(O),$e(O),bt(O),Ct(O),Lt(O),Me(O),Ut(O),Ve(O,M),We(O);break;case"safari":if(!l||!E.shimSafari)return A("Safari shim is not included in this adapter release."),D;A("adapter.js shimming safari."),D.browserShim=l,tn(O,M),de(O),ge(O),Ce(O),V(O),Gt(O),qt(O),fe(O),Ae(O),ke(O),Me(O),Fe(O),Ve(O,M),We(O),_t(O,M);break;default:A("Unsupported browser!")}})({window:typeof window>"u"?void 0:window}),r(8520);const $=()=>typeof RTCPeerConnection=="function";var K,me;(function(O){O[O.TRACE=0]="TRACE",O[O.DEBUG=1]="DEBUG",O[O.INFO=2]="INFO",O[O.WARN=3]="WARN",O[O.ERROR=4]="ERROR",O[O.SILENT=5]="SILENT"})(K||(K={})),function(O){O.SPADE="SPADE",O.TIME="Time",O.WEBRTC="WebRTC",O.EMITTER="Emitter",O.MEDIA="Media",O.SUBSCRIPTION="StageSubscription",O.PUBLICATION="StagePublication",O.CONNECTION="StageConnection",O.SOCKET="StageSocket",O.BROADCAST_STAGE_CLIENT="BroadcastStageClient",O.STAGE="Stage",O.REMOTE_PARTICIPANT="RemoteParticipant",O.LOCAL_PARTICIPANT="LocalParticipant",O.CONFIGURATION="Configuration",O.REMOTE_PLAYBACK="RemotePlaybackController",O.REMOTE_STAGE_STREAM="RemoteStageStream"}(me||(me={}));const Pe=1007,Ue=12e4,at=3e5;class ft extends Error{constructor({name:E,message:A,code:M,details:D,cause:B,params:G}){super(A),Error.captureStackTrace&&Error.captureStackTrace(this,ft),this.name=E||"BroadcastClientError",this.message=A,this.code=M,this.details=D,this.cause=B,this.params=G}}const Cn={name:"BroadcastError",code:1e3,message:"Unable to broadcast"},ze={name:"CameraError",code:2e3,message:"Camera could not be captured"},It={name:"InputError",code:3e3,message:"Input could not be attached"},nt={name:"AddDeviceError",code:4e3,message:"Device is missing"},Et={name:"AddDeviceNameExistsError",code:4001,message:"Name is already registered"},Wt={name:"AddDeviceCompositionMissingError",code:4002,message:"VideoComposition is missing"},Kt={name:"AddDeviceCompositionIndexMissingError",code:4003,message:`VideoComposition's "index" property is missing`},je={name:"AddDeviceNameMissingError",code:4004,message:"Name property is missing"},tt={name:"AddDeviceUnsupported",code:4005,message:"Unsupported device"},yt={name:"AddDeviceConstraintsError",code:4006,message:"Constraints error"},St={name:"RemoveDeviceNotFoundError",code:5e3,message:"Device not found"},Nn={name:"RemoveImageNotFoundError",code:6e3,message:"Image not found"},Pi={name:"UpdateVideoDeviceCompositionMissingError",code:7e3,message:"VideoComposition is missing"},ii={name:"UpdateVideoDeviceCompositionIndexMissingError",code:7001,message:`VideoComposition's "index" property is missing`},jn={name:"UpdateVideoDeviceCompositionNameMissingError",code:7002,message:"Video device with that name is not found"},ln={name:"ExchangePositionDeviceNotFoundError",code:8e3,message:"Device with that name is not found"},Xt={name:"FailedToAddImageError",code:9e3,message:"Failed to add image"},xn={name:"PeerSetupError",code:1e4,message:"Unexpected return value from setup request"},bn={name:"PeerConnectionError",code:10001,message:"Peer connection has failed."},Wn={name:"InvalidStreamKey",code:10003,message:"Invalid Stream Key."},Ui={name:"BroadcastConfigurationError",code:11e3,message:"Error when configuring broadcast client"},Un={name:"StreamConfigurationError",code:12e3,message:"Error when configuring stream"},Qs={name:"IngestEndpointTypeError",code:13e3,message:"Ingest endpoint must be a string"},uc={name:"IngestEndpointUrlError",code:13001,message:"Ingest endpoint must be a valid https or rtmps URL"},Ah={name:"LogLevelTypeError",code:14e3,message:"Log Level must be a valid integer between [0..5]"},Od={name:"LoggerTypeError",code:15e3,message:"Logger must be an object"},tm={name:"ClientInvalidError",code:16e3,message:"Client is no longer valid, possibly due to delete() invocation."},Mh={name:"NetworkReconnectConfigurationError",code:17e3,message:"Error when configuring network reconnect"},Rh={name:"NetworkReconnectConfigurationInvalidTimeoutError",code:17001,message:"Network reconnect timeout value must be a number between [10000, 300000]"},hc={name:"StreamKeyInvalidCharError",code:18e3,message:"Streamkey must contain only [A-Za-z0-9_-] characters"},Ee={name:"StageTokenTypeError",code:19e3,message:"Stage token must be a string"},Ye={name:"StageWhipUrlOverrideError",code:19001,message:"Stage WHIP override URL must be a string starting with http"};var ct,ut,Ke,Pt,Yt,rn,cn,Hn,Vn,mn=function(O,E,A,M){if(A==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?O!==E||!M:!E.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?M:A==="a"?M.call(O):M?M.value:E.get(O)},Zn=function(O,E,A,M,D){if(typeof E=="function"?O!==E||!D:!E.has(O))throw new TypeError("Cannot write private member to an object whose class did not declare it");return E.set(O,A),A};const Di=1920,Kr=1080,zr=K.ERROR,wi={maxResolution:{width:852,height:480},maxFramerate:30,maxBitrate:1500},Pn={maxResolution:{width:480,height:852},maxFramerate:30,maxBitrate:1500},ri={maxResolution:{width:1920,height:1080},maxFramerate:30,maxBitrate:3500},An={maxResolution:{width:1080,height:1920},maxFramerate:30,maxBitrate:3500},Ja={maxResolution:{width:1920,height:1080},maxFramerate:30,maxBitrate:8500},Ll={maxResolution:{width:1080,height:1920},maxFramerate:30,maxBitrate:8500},da={reconnect:!1,timeout:Ue};function Yc(O){var E,A;if(typeof O!="string"&&O!==void 0)throw new ft(Qs);if(O){if(O.startsWith("https"))return O;{const M=/(?<protocol>(rtmps|https):\/\/)?(?<id>.+)\.(?<environment>(?=\S*['-])([a-zA-Z'-]+))\.live-video\.net.*/.exec(O);if(((E=M==null?void 0:M.groups)===null||E===void 0?void 0:E.protocol)==="rtmps"&&console.warn("rtmps server url detected; please pass in the ingest endpoint (no rtmps:// protocol) instead"),(A=M==null?void 0:M.groups)===null||A===void 0?void 0:A.id)return`https://${M.groups.id}.webrtc.live-video.net:4443`;throw new ft(uc)}}return""}class Or{constructor(E,A,M=wi,D,B=da){this.LOG_LEVEL=K,this.BASIC_LANDSCAPE=wi,this.BASIC_PORTRAIT=Pn,this.BASIC_FULL_HD_LANDSCAPE=ri,this.BASIC_FULL_HD_PORTRAIT=An,this.STANDARD_LANDSCAPE=Ja,this.STANDARD_PORTRAIT=Ll,ct.set(this,void 0),ut.set(this,void 0),Ke.set(this,wi),Pt.set(this,void 0),Yt.set(this,da),rn.set(this,G=>{if(!G)throw new ft(Object.assign(Object.assign({},Un),{details:"missing stream configuration"}));if(!(G.maxBitrate<=8500&&G.maxBitrate>=200))throw new ft(Object.assign(Object.assign({},Un),{details:"maxBitrate must be between 200 and 8500"}));if(!(G.maxFramerate<=60&&G.maxFramerate>=10))throw new ft(Object.assign(Object.assign({},Un),{details:"maxFramerate must be between 10 and 60"}));const re=G.maxResolution.width,oe=G.maxResolution.height;if(re>Di||oe>Di||re<160||oe<160||re===Di&&oe>Kr||oe===Di&&re>Kr)throw new ft(Object.assign(Object.assign({},Un),{details:"maxResolution values must be between 1080x1920 or 1920x1080"}))}),cn.set(this,G=>{if(!G)return;const re=Number(G),oe=Number.isInteger(re),J=re>=K.TRACE,le=re<=K.SILENT;if(!oe||!J||!le)throw new ft(Ah)}),Hn.set(this,G=>{if(G&&typeof G!="object")throw new ft(Od)}),Vn.set(this,G=>{if(!G)return;if(typeof G!="object"||typeof G.reconnect!="boolean")throw new ft(Mh);const{timeout:re}=G;if(re!==void 0&&(Number.isNaN(re)||typeof re!="number"||re<1e4||re>at))throw new ft(Rh)}),mn(this,Hn,"f").call(this,D),mn(this,cn,"f").call(this,A),mn(this,rn,"f").call(this,M),Zn(this,ct,E),Zn(this,ut,A),Zn(this,Ke,M),Zn(this,Pt,D),Zn(this,Yt,B)}get ingestEndpoint(){return mn(this,ct,"f")}set ingestEndpoint(E){Zn(this,ct,Yc(E))}get streamConfig(){return mn(this,Ke,"f")}set streamConfig(E){mn(this,rn,"f").call(this,E),Zn(this,Ke,E)}get logLevel(){return mn(this,ut,"f")}set logLevel(E){mn(this,cn,"f").call(this,E),Zn(this,ut,E)}get logger(){return mn(this,Pt,"f")}set logger(E){mn(this,Hn,"f").call(this,E),Zn(this,Pt,E)}get networkReconnectConfig(){return mn(this,Yt,"f")}set networkReconnectConfig(E){mn(this,Vn,"f").call(this,E),Zn(this,Yt,E)}}ct=new WeakMap,ut=new WeakMap,Ke=new WeakMap,Pt=new WeakMap,Yt=new WeakMap,rn=new WeakMap,cn=new WeakMap,Hn=new WeakMap,Vn=new WeakMap;var on,fa=r(6729),os=r(1206);(function(O){O.PUBLISHED_VIDEO_STATS="ivs_broadcast_webrtc_published_video_stats",O.PUBLISHED_VIDEO_STATS_WINDOW="ivs_broadcast_webrtc_published_video_stats_window",O.PUBLISHED_AUDIO_STATS="ivs_broadcast_webrtc_published_audio_stats",O.PUBLISHED_AUDIO_STATS_WINDOW="ivs_broadcast_webrtc_published_audio_stats_window",O.SUBSCRIBED_VIDEO_STATS="ivs_broadcast_webrtc_subscribed_video_stats",O.SUBSCRIBED_VIDEO_STATS_WINDOW="ivs_broadcast_webrtc_sbcrbd_video_stats_window",O.SUBSCRIBED_AUDIO_STATS="ivs_broadcast_webrtc_subscribed_audio_stats",O.SUBSCRIBED_AUDIO_STATS_WINDOW="ivs_broadcast_webrtc_sbcrbd_audio_stats_window",O.PUBLISH="ivs_broadcast_multihost_publish",O.UNPUBLISH="ivs_broadcast_multihost_unpublish",O.SUBSCRIBE="ivs_broadcast_multihost_subscribe",O.UNSUBSCRIBE="ivs_broadcast_multihost_unsubscribe",O.PUBLISH_STARTED="ivs_broadcast_multihost_publish_started",O.PUBLISH_FAILED="ivs_broadcast_multihost_publish_failed",O.PUBLISH_ENDED="ivs_broadcast_multihost_publish_ended",O.STATE_UPDATED="ivs_broadcast_multihost_event_state_updated",O.SUBSCRIBE_STARTED="ivs_broadcast_multihost_subscribe_started",O.SUBSCRIBE_FAILED="ivs_broadcast_multihost_subscribe_failed",O.SUBSCRIBE_ENDED="ivs_broadcast_multihost_subscribe_ended",O.FIRST_FRAME="ivs_broadcast_multihost_first_frame",O.JOIN="ivs_broadcast_multihost_join",O.JOIN_ATTEMPT="ivs_broadcast_multihost_event_connect_attempt",O.JOIN_ATTEMPT_FAILED="ivs_broadcast_multihost_event_connect_failed",O.JOIN_ENDED="ivs_broadcast_multihost_join_ended",O.LEAVE="ivs_broadcast_multihost_leave",O.REASSIGNMENT_REQUEST="ivs_broadcast_multihost_reassignment_request",O.SERVER_REQUEST="ivs_broadcast_multihost_server_request",O.TRACE="ivs_broadcast_stage_trace",O.ERROR="ivs_broadcast_error",O.MINUTE="ivs_broadcast_multihost_minute",O.CONNECTION_STATE="ivs_broadcast_webrtc_connection_state",O.ICE_GATHERING_STATE="ivs_broadcast_webrtc_gathering_state",O.EDP_CONNECTED="ivs_broadcast_multihost_event_connected",O.EDP_DISCONNECTED="ivs_broadcast_multihost_event_disconnected",O.EDP_PONG="ivs_broadcast_multihost_edp_rtt",O.SIMULCAST_LAYER_INFO="ivs_broadcast_simulcast_layer_info",O.MULTIHOST_CONFIGURATION="ivs_broadcast_multihost_configuration",O.MULTIHOST_SUBSCRIBE_CONFIGURATION="ivs_broadcast_multihost_subscribe_configuration",O.PLAYBACK_LAYER_REQUEST="ivs_broadcast_multihost_playback_layer_request",O.PLAYBACK_LAYER_STATE="ivs_broadcast_multihost_playback_layer_state"})(on||(on={}));class On{constructor(E,A,M,D){let B="unknown";if(A.stageARN&&A.stageARN.startsWith("arn:aws:ivs:")){const G=A.stageARN.split(":");G.length===6&&(B=G[4])}this.event=E,this.properties={client_time:new Date().toISOString(),customer_id:B,device_software:window.navigator.userAgent,multihost_id:A.stageARN,participant_id:A.participantID,participant_user_id:A.userID,platform:"web",sdk_version:"1.19.0",stage_arn:A.stageARN,trace_id:M.value},A.attrGsRole&&(this.properties.token_attribute_0=A.attrGsRole),A.attrGsSessionId&&(this.properties.token_attribute_1=A.attrGsSessionId),this.critical=D}}class vl extends On{constructor(E){super(on.ERROR,E.token,E.traceId,!0),Object.assign(this.properties,{code:E.code,tag:E.tag,description:E.message,remote_participant_id:E.remoteParticipantId,request_uuid:E.requestUUID,is_nominal:E.nominal,is_fatal:E.fatal,details:E.details,location:E.location})}}const Cs="IVS_CLIENT_OVERRIDES";function Id(O){const E=window[Cs];return typeof E=="object"?E[O]:O==="logLevel"?window.STAGES_LOG_LEVEL:O==="appLabel"?window.IVS_APP_LABEL:O==="whipUrl"?window.IVS_DATA_PLANE_ENDPOINT:void 0}function ju(O){const E=Id(O);if(typeof E=="string")return E}function Xc(O){const E=Id(O);if(typeof E=="boolean")return E}function nm(){const O=Id("logLevel");if(typeof O=="number"&&Object.values(K).includes(O))return O}function iv(){return Xc("disableXdp")}function im(){return Xc("enableXdpPublish")}function Qa(){return Xc("preferMainProfile")}function rm(){return Xc("enableInitialLayerOnSdp")}var eo=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};const sS=4;class b0{constructor(E="https://broadcast.stats.live-video.net/"){this.spadeUrl=E}send(E,A=!1){return eo(this,void 0,void 0,function*(){const M=Date.now();for(const re of E)re.properties.batch_time_millis=M;const D=this.b64EncodeUnicode(JSON.stringify(E)),B={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},G=`data=${D}`;A?navigator.sendBeacon(this.spadeUrl,G):eo(this,void 0,void 0,function*(){try{yield function(re,oe,J={},le=""){return eo(this,void 0,void 0,function*(){const pe=new XMLHttpRequest;return pe.open(re,oe,!0),J&&Object.keys(J).forEach(ye=>{J.hasOwnProperty(ye)&&pe.setRequestHeader(ye,J[ye])}),new Promise((ye,Ie)=>{pe.onreadystatechange=()=>{pe.readyState===sS&&(pe.status>=200&&pe.status<300?ye(pe.responseText):Ie(new Error(`Spade ${re} ${oe} responded ${pe.status}
${pe.responseText}`)))},pe.send(le)})})}("POST",this.spadeUrl,B,G)}catch{}})})}b64EncodeUnicode(E){return btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,(A,M)=>String.fromCharCode(+`0x${M}`)))}}function dc(O){if(!O)throw new Error("SpadeClient is not defined")}function Mf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,O=>{const E=16*Math.random()|0;return(O==="x"?E:3&E|8).toString(16)})}class Hu{constructor(){this.sharedProperties={},this.spadeClient={},this.queuedEvents=[],this.genSessionId();const E=function(){const M=ju("analyticsPostUrl");if(M!==void 0)return M}()||"https://broadcast.stats.live-video.net/",A=function(){const M=ju("appLabel");if(M!==void 0)return M.substring(0,64)}();this.spadeClient=new b0(E),this.initSharedProperties({appLabel:A})}start(){this.flushInterval||(this.flushInterval=window.setInterval(()=>{this.flushEvents()},1e3))}stop(E){let A=!1;clearInterval(this.flushInterval),this.flushInterval=void 0,E&&(this.queuedEvents=this.queuedEvents.filter(M=>M.critical),A=!0),this.flushEvents(A),this.genSessionId()}trackEvent(E,A=!1){let M=this.sharedProperties;A&&(M={global_session_id:Hu.globalSessionId,session_id:this.sharedProperties.session_id,browser:this.sharedProperties.browser,browser_family:this.sharedProperties.browser_family,browser_version:this.sharedProperties.browser_version,os_name:this.sharedProperties.os_name,os_version:this.sharedProperties.os_version}),"data"in E?(E.data.properties=Object.assign({},M,E.data.properties),this.queuedEvents.push(E.data)):(E.properties=Object.assign({},M,E.properties),this.queuedEvents.push(E))}trackEventNoSharedProps(E){this.trackEvent(E,!0)}trackErrorAndThrow(E){throw this.trackError(E),E}trackError(E){this.trackEvent(new vl(E))}batchEvents(E){dc(this.spadeClient);const A=E.map(M=>(M.data.properties=Object.assign({},this.sharedProperties,M.data.properties),M.data));this.spadeClient.send(A)}initSharedProperties({appLabel:E}){const A=os.getParser(navigator.userAgent),M=this.parseSemver(String(A.getBrowserVersion()));this.sharedProperties={browser:navigator.appVersion,browser_family:A.getBrowserName().toLowerCase(),browser_version:`${M.major}.${M.minor}`,customer_id:"ivs",host:window.location.hostname,os_name:A.getOSName(),os_version:String(A.getOSVersion()),platform:"web",global_session_id:Hu.globalSessionId,session_id:this.sessionId,sdk_version:"1.19.0",user_agent:navigator.userAgent},E&&(this.sharedProperties.app_label=E)}genSessionId(){this.sessionId=Mf(),this.sharedProperties.session_id=this.sessionId}flushEvents(E=!1){dc(this.spadeClient),this.queuedEvents.length>0&&this.spadeClient.send(this.queuedEvents,E),this.queuedEvents=[]}parseSemver(E){const A=/^(\d+)\.(\d+)\.(\d+)[+|-]?(.*)?$/.exec(E)||/^(\d+)\.(\d+)[+|-]?(.*)?$/.exec(E)||/^(\d+)$/.exec(E)||[];return{major:parseInt(A[1],10)||0,minor:parseInt(A[2],10)||0,patch:parseInt(A[3],10)||0}}getSessionId(){return this.sessionId}}Hu.globalSessionId=Mf();class Gr{constructor(E,A){this.transformProperties=(D,B)=>({sum:D.sum,median:D.median(),min:D.min,max:D.max,p90:D.percentile(.9),event_count:D.data.length,period:B});const M=this.transformProperties(E,A);this.data={event:Zr.CONGESTION_TIME,properties:M}}}class Kc{constructor(E,A,M){this.transformProperties=(B,G,re)=>({duration:(B.getTime()-((G==null?void 0:G.getTime())||0))/1e3,ecn_negotiated:!1,ingest_session_id:re});const D=this.transformProperties(E,A,M);this.data={event:Zr.CONNECTION_ESTABLISHED,properties:D}}}class rv{constructor(E,A){this.transformProperties=(D,B)=>({sum:D.sum,median:D.median(),min:D.min,max:D.max,p90:D.percentile(.9),event_count:D.data.length,period:B});const M=this.transformProperties(E,A);this.data={event:Zr.CONNECTION_RTT,properties:M}}}class S0{constructor(E){this.transformProperties=M=>{var D;return{is_fatal:(D=M.isFatal)!==null&&D!==void 0&&D,value:M.value,code:M.code,description:M.description}};const A=this.transformProperties(E);this.data={event:Zr.ERROR,properties:A}}}class sv{constructor(E,A){this.transformProperties=(D,B)=>({type:D,input_device_id:B.deviceId,position:B.facingMode||"unknown"});const M=this.transformProperties(E,A);this.data={event:Zr.INPUT_DEVICE_ATTACHED,properties:M}}}class aS{constructor(E,A){this.transformProperties=(D,B)=>({type:D,input_device_id:B.deviceId,position:B.facingMode||"unknown"});const M=this.transformProperties(E,A);this.data={event:Zr.INPUT_DEVICE_DETACHED,properties:M}}}class E0{constructor(E,A){this.transformProperties=(D,B)=>({sum:D.sum,median:D.median(),min:D.min,max:D.max,p90:D.percentile(.9),event_count:D.data.length,period:B});const M=this.transformProperties(E,A);this.data={event:Zr.MEASURED_BITRATE,properties:M}}}class Oh{constructor(E,A){this.transformProperties=(D,B)=>({minutes_logged:Math.round((D.timestamp-B)/6e4)});const M=this.transformProperties(E,A);this.data={event:Zr.MINUTE_BROADCAST,properties:M}}}class Ih{constructor(E,A){this.transformProperties=(D,B)=>({sum:D.sum,median:D.median(),min:D.min,max:D.max,p90:D.percentile(.9),event_count:D.data.length,period:B});const M=this.transformProperties(E,A);this.data={event:Zr.RECOMMENDED_BITRATE,properties:M}}}class av{constructor(E){this.transformProperties=M=>({codec:M.mimeType,bitrate:0,sample_rate:M.clockRate,channel_count:M.channels});const A=this.transformProperties(E);this.data={event:Zr.SESSION_AUDIO_ENCODER_CONFIGURED,properties:A}}}class T0{constructor(E){this.transformProperties=M=>({codec:"audio",bitrate:32e3,sample_rate:M.sampleRate,channel_count:M.channelCount});const A=this.transformProperties(E);this.data={event:Zr.SESSION_AUDIO_PROPERTIES,properties:A}}}class x0{constructor(E,A,M){this.transformProperties=(B,G,re)=>({codec:re.mimeType,codec_profile:G.profile,codec_level:G.level,rate_mode:"vbr",initial_bitrate:0,keyframe_interval:2,width:B.width,height:B.height,bframe_count:0,target_fps:B.frameRate});const D=this.transformProperties(E,A,M);this.data={event:Zr.SESSION_VIDEO_ENCODER_CONFIGURED,properties:D}}}class sm{constructor(E){this.transformProperties=M=>({codec:"video",initial_bitrate:32e3,min_bitrate:0,max_bitrate:0,keyframe_interval:2,width:M.width,height:M.height,auto_bitrate_enabled:!0,bframes_enabled:!1,target_fps:M.frameRate});const A=this.transformProperties(E);this.data={event:Zr.SESSION_VIDEO_PROPERTIES,properties:A}}}class ov{constructor(E,A){this.transformProperties=(D,B)=>({sum:D.sum,median:D.median(),min:D.min,max:D.max,p90:D.percentile(.9),event_count:D.data.length,period:B});const M=this.transformProperties(E,A);this.data={event:Zr.SOURCE_AUDIO_LATENCY,properties:M}}}class w0{constructor(E,A){this.transformProperties=(D,B)=>({sum:D.sum,median:D.median(),min:D.min,max:D.max,p90:D.percentile(.9),event_count:D.data.length,period:B});const M=this.transformProperties(E,A);this.data={event:Zr.SOURCE_VIDEO_LATENCY,properties:M}}}class Zc{constructor(E,A){this.transformProperties=({protocol:D,hostname:B,port:G},re)=>({protocol:D,endpoint_host:B,endpoint_port:G,reason:re});const M=this.transformProperties(E,A);this.data={event:Zr.START_BROADCAST,properties:M}}}class Rf{constructor(E){this.transformProperties=({protocol:M,hostname:D,port:B})=>({protocol:M,endpoint_host:D,endpoint_port:B});const A=this.transformProperties(E);this.data={event:Zr.STOP_BROADCAST,properties:A}}}class C0{constructor(E){this.transformProperties=M=>({bytes_sent:M.bytesSent,header_bytes_sent:M.headerBytesSent,nack_count:M.nackCount,packets_sent:M.packetsSent,retransmitted_bytes_sent:M.retransmittedBytesSent,retransmitted_packets_sent:M.retransmittedPacketsSent});const A=this.transformProperties(E);this.data={event:Zr.WEBRTC_AUDIO_STATS,properties:A}}}class _o{constructor(E){this.transformProperties=M=>({bytes_sent:M.bytesSent,fir_count:M.firCount,frames_encoded:M.framesEncoded,frames_sent:M.framesSent,header_bytes_sent:M.headerBytesSent,huge_frames_sent:M.hugeFramesSent,key_frames_encoded:M.keyFramesEncoded,nack_count:M.nackCount,packets_sent:M.packetsSent,pli_count:M.pliCount,quality_limitation_reason:M.qualityLimitationReason,quality_limitation_resolution_changes:M.qualityLimitationResolutionChanges,retransmitted_bytes_sent:M.retransmittedBytesSent,retransmitted_packets_sent:M.retransmittedPacketsSent,total_encode_time:M.totalEncodeTime,total_encoded_bytes_target:M.totalEncodedBytesTarget,total_packet_send_delay:M.totalPacketSendDelay});const A=this.transformProperties(E);this.data={event:Zr.WEBRTC_VIDEO_STATS,properties:A}}}var Zr,Vu;(function(O){O.START_BROADCAST="ivs_broadcast_start_broadcast",O.STOP_BROADCAST="ivs_broadcast_stop_broadcast",O.MINUTE_BROADCAST="ivs_broadcast_minute_broadcast",O.WEBRTC_AUDIO_STATS="ivs_broadcast_webrtc_audio_stats",O.WEBRTC_VIDEO_STATS="ivs_broadcast_webrtc_video_stats",O.WEBRTC_AUDIO_STATS_WINDOW="ivs_broadcast_webrtc_audio_stats_window",O.WEBRTC_VIDEO_STATS_WINDOW="ivs_broadcast_webrtc_video_stats_window",O.CONNECTION_ESTABLISHED="ivs_broadcast_connection_established",O.SESSION_VIDEO_PROPERTIES="ivs_broadcast_session_video_properties",O.SESSION_AUDIO_PROPERTIES="ivs_broadcast_session_audio_properties",O.SESSION_VIDEO_ENCODER_CONFIGURED="ivs_broadcast_session_video_encoder_configured",O.SESSION_AUDIO_ENCODER_CONFIGURED="ivs_broadcast_session_audio_encoder_configured",O.SOURCE_AUDIO_LATENCY="ivs_broadcast_source_audio_latency",O.SOURCE_VIDEO_LATENCY="ivs_broadcast_source_video_latency",O.INPUT_DEVICE_ATTACHED="ivs_broadcast_input_device_attached",O.INPUT_DEVICE_DETACHED="ivs_broadcast_input_device_detached",O.CONGESTION_TIME="ivs_broadcast_congestion_time",O.BUFFER_DURATION="ivs_broadcast_buffer_duration",O.MEASURED_BITRATE="ivs_broadcast_measured_bitrate",O.RECOMMENDED_BITRATE="ivs_broadcast_recommended_bitrate",O.CONNECTION_RTT="ivs_broadcast_connection_rtt",O.ERROR="ivs_broadcast_error"})(Zr||(Zr={})),function(O){O.USER_INITIATED="user-initiated",O.NETWORK_DISCONNECT="network-disconnect"}(Vu||(Vu={}));const oS={[K.INFO]:"#528bff",[K.WARN]:"#ffb31a",[K.DEBUG]:"#00f593",[K.ERROR]:"#ff4f4d",[K.TRACE]:"",[K.SILENT]:"",[me.SPADE]:"#a970ff",[me.TIME]:"#53535f",[me.WEBRTC]:"#0e9bd8",[me.SUBSCRIPTION]:"#ffc400",[me.CONNECTION]:"#ff5edb",[me.SOCKET]:"#8585ff",[me.EMITTER]:"#adadb8",[me.LOCAL_PARTICIPANT]:"#1DD21D",[me.STAGE]:"#EC9806",[me.REMOTE_PARTICIPANT]:"#0680EC",details:"#808080"},As=({label:O})=>`background: ${oS[O]||"#333333"}; color: white; padding: 3px; margin-left: 3px;`,lS=Object.entries(K),am=(O,E,A)=>{const M=As({label:O}),[D]=lS.find(([,Xe])=>Xe===Number(O))||[],B=`%c${D}`,G=As({label:E}),re=`%c${E}`,oe=As({label:me.TIME}),J=`%c[${new Date().toISOString()}]`,le=As({label:"details"}),pe=`%c[${A}]`,ye=[J,B,re],Ie=[oe,M,G];return A&&(ye.push(pe),Ie.push(le)),[ye.join(""),...Ie]},cS={debug(O){console.groupCollapsed(...am(K.DEBUG,O.scope,O.label)),console.debug(O.msg,Object.assign(Object.assign({},O),{level:"debug"})),console.groupEnd()},info(O){console.groupCollapsed(...am(K.INFO,O.scope,O.label)),console.info(O.msg,Object.assign(Object.assign({},O),{level:"info"})),console.groupEnd()},warn(O){console.groupCollapsed(...am(K.WARN,O.scope,O.label)),console.warn(O.msg,Object.assign(Object.assign({},O),{level:"warn"})),console.groupEnd()},error(O){console.groupCollapsed(...am(K.ERROR,O.scope,O.label)),console.error(O),console.groupEnd()}};var Nh=function(O,E){var A={};for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&E.indexOf(M)<0&&(A[M]=O[M]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function"){var D=0;for(M=Object.getOwnPropertySymbols(O);D<M.length;D++)E.indexOf(M[D])<0&&Object.prototype.propertyIsEnumerable.call(O,M[D])&&(A[M[D]]=O[M[D]])}return A};Object.entries(K);class Of{constructor(E=zr,A=cS){this.logLevel=E,this.loggerInstance=A}debug(E){var A,M;this.logLevel>K.DEBUG||(M=(A=this.loggerInstance).debug)===null||M===void 0||M.call(A,JSON.parse(JSON.stringify(Object.assign(Object.assign({},E),{level:"debug"}))))}info(E){var A,M;this.logLevel>K.INFO||(M=(A=this.loggerInstance).info)===null||M===void 0||M.call(A,JSON.parse(JSON.stringify(Object.assign(Object.assign({},E),{level:"info"}))))}warn(E){var A,M;this.logLevel>K.WARN||(M=(A=this.loggerInstance).warn)===null||M===void 0||M.call(A,JSON.parse(JSON.stringify(Object.assign(Object.assign({},E),{level:"warn"}))))}error(E){var A,M,{err:D}=E,B=Nh(E,["err"]);this.logLevel>K.ERROR||(M=(A=this.loggerInstance).error)===null||M===void 0||M.call(A,Object.assign({err:D},B))}}class pa{constructor(E,A){this.logger=E,this.scope=A}debug(E){var A,M;(M=(A=this.logger).debug)===null||M===void 0||M.call(A,JSON.parse(JSON.stringify(Object.assign(Object.assign({},E),{scope:this.scope}))))}info(E){var A,M;(M=(A=this.logger).info)===null||M===void 0||M.call(A,JSON.parse(JSON.stringify(Object.assign(Object.assign({},E),{scope:this.scope}))))}warn(E){var A,M;(M=(A=this.logger).warn)===null||M===void 0||M.call(A,JSON.parse(JSON.stringify(Object.assign(Object.assign({},E),{scope:this.scope}))))}error(E){var A,M,{err:D}=E,B=Nh(E,["err"]);(M=(A=this.logger).error)===null||M===void 0||M.call(A,Object.assign(Object.assign({err:D},B),{scope:this.scope}))}unwrap(){return this.logger}}class bo{constructor(){this.min=0,this.max=0,this.sum=0,this.data=[]}push(E){(this.min===0||E<this.min)&&(this.min=E),E>=this.max&&(this.max=E),this.data.push(E),this.sum+=E}median(){this.data.sort();const E=this.data.length>>1;return this.data.length%2==0?this.data[E-1]+this.data[E]>>1:this.data[E]}percentile(E){if(this.data.length===0)return 0;if(E<=0)return this.data[0];if(E>=1)return this.data[this.data.length-1];const A=(this.data.length-1)*E,M=Math.floor(A),D=M+1,B=A%1;return D>=this.data.length?this.data[M]:this.data[M]*(1-B)+this.data[D]*B}}var If=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class uS{constructor(E,A,M,D){this.peerClient=E,this.broadcastCanvasManager=A,this.analyticsTracker=D,this.logger=new pa(M,me.EMITTER),this.previousBytesSent=0,this.startTimestamp=0,this.initializeSamples()}start(){this.logger.info({msg:"start emitter"}),this.collectSamplesTimerId=window.setInterval(()=>{this.collectSamples()},1e3),this.trackSamplesTimerId=window.setInterval(()=>{this.trackSamples()},3e4),this.trackPeerConnectionStatsTimerId=window.setInterval(()=>{this.trackPeerConnectionStats()},6e4),this.trackSamples()}stop(){clearInterval(this.collectSamplesTimerId),clearInterval(this.trackSamplesTimerId),clearInterval(this.trackPeerConnectionStatsTimerId),this.collectSamplesTimerId=void 0,this.trackSamplesTimerId=void 0,this.trackPeerConnectionStatsTimerId=void 0}trackPeerConnectionStats(){return If(this,void 0,void 0,function*(){(yield this.peerClient.getReports()).forEach(E=>{if(E.type==="outbound-rtp")switch(E.kind){case"audio":this.analyticsTracker.trackEvent(new C0(E));break;case"video":{const A=new _o(E),M=new Oh(E,this.startTimestamp);this.analyticsTracker.batchEvents([A,M]);break}default:this.logger.warn({msg:"unknown report kind: ",reportKind:E.kind})}})})}collectSamples(){return If(this,void 0,void 0,function*(){let E=0;this.audioLatencySamples.push(this.broadcastCanvasManager.getAudioLatency()),this.videoLatencySamples.push(this.broadcastCanvasManager.getVideoLatency()),(yield this.peerClient.getReports()).forEach(M=>{switch(M.type){case"candidate-pair":M.nominated&&(this.rttSamples.push(M.currentRoundTripTime),this.recommendedBitrateSamples.push(M.availableOutgoingBitrate));break;case"outbound-rtp":E+=M.bytesSent||0,this.startTimestamp===0&&M.kind==="video"&&(this.startTimestamp=M.timestamp)}});const A=8*Math.round(E-this.previousBytesSent);this.previousBytesSent=E,this.measuredBitrateSamples.push(A)})}trackSamples(){const A=new ov(this.audioLatencySamples,30),M=new w0(this.videoLatencySamples,30),D=new Gr(this.congestionTimeSamples,30),B=new E0(this.measuredBitrateSamples,30),G=new Ih(this.recommendedBitrateSamples,30),re=new rv(this.rttSamples,30);this.analyticsTracker.batchEvents([A,M,D,B,G,re]),this.initializeSamples()}initializeSamples(){this.audioLatencySamples=new bo,this.videoLatencySamples=new bo,this.congestionTimeSamples=new bo,this.measuredBitrateSamples=new bo,this.recommendedBitrateSamples=new bo,this.rttSamples=new bo}}const zs={CONNECTION_STATE_CHANGE:"connectionStateChange",ERROR:"clientError",ACTIVE_STATE_CHANGE:"activeStateChange"},ms="connectionStateChange",om="sdpNegotiated",Gu="clientError",Nd="seiMessageReceived",ot="transformError";var et;(function(O){O.CLOSED="closed",O.COMPLETED="completed",O.CONNECTED="connected",O.CONNECTING="connecting",O.DISCONNECTED="disconnected",O.FAILED="failed",O.IDLE="idle",O.NEW="new",O.NONE="none"})(et||(et={}));const Ot=O=>{const E=B=>{var G;return!((G=B.deviceId)===null||G===void 0)&&G.startsWith("web-contents-media-stream")?"tab":void 0},A=B=>{var G;return!((G=B.deviceId)===null||G===void 0)&&G.startsWith("window")&&B.displaySurface==="window"?"window":void 0},M=B=>{var G;return!((G=B.deviceId)===null||G===void 0)&&G.startsWith("screen")&&B.displaySurface==="monitor"?"screen":void 0};return(E(D=O)||A(D)||M(D)?void 0:"camera")||M(O)||A(O)||E(O)||"unknown";var D};function nn(O,E){return O.find(A=>A.kind===E)}var zt;(function(O){O.VIDEO="video",O.AUDIO="audio"})(zt||(zt={}));class yi{constructor(){this.mediaTracks=new Map([[zt.VIDEO,void 0],[zt.AUDIO,void 0]])}setTrack(E,A){this.mediaTracks.set(E,A)}getTrack(E){return this.mediaTracks.get(E)}}class Ms{constructor(){this.levelAsymmetryAllowed=!1,this.packetisationMode=!1,this.profile="",this.level=0}extractVideoSdpFmtpLine(E){return E?(E.split("\r").join(";").split(`
`).join(";").split(" ").join(";").split(";").map(A=>A.trim()).filter(Boolean).forEach(A=>{const M=A.split("=");if(M.length===2)switch(M[0]){case"level-asymmetry-allowed":M[1]==="1"?this.levelAsymmetryAllowed=!0:this.levelAsymmetryAllowed=!1;break;case"packetization-mode":M[1]==="1"?this.packetisationMode=!0:this.packetisationMode=!1;break;case"profile-level-id":this.profile=this.getProfileFromId(M[1]),this.level=this.getLevelFromId(M[1])}}),{levelAsymmetryAllowed:this.levelAsymmetryAllowed,packetisationMode:this.packetisationMode,profile:this.profile,level:this.level}):{levelAsymmetryAllowed:this.levelAsymmetryAllowed,packetisationMode:this.packetisationMode,profile:this.profile,level:this.level}}getProfileFromId(E){const A=E.substr(0,2),M=E.substr(2,2);switch(A.substr(0,2)){case"42":return"baseline";case"4d":return"main";case"58":return"extended";case"64":return"high";case"6e":return M==="00"?"high 10":"high 10 intra";case"7a":return M==="00"?"high 42":"high 42 intra";case"f4":return M==="00"?"high 44":"high 44 intra";default:return"unknown"}}getLevelFromId(E){return parseInt(E.substr(4,2),16)}}function Jc(O){return btoa(JSON.stringify(O))}var Ci,Ul=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};(function(O){O.IDLE="idle",O.EXECUTING="executing",O.RECONNECTING="reconnecting"})(Ci||(Ci={}));class Qc{constructor(E,A=12e4,M,D){this.state=Ci.IDLE,this.failureCallback=()=>{},this.peerClient=E,this.timeout=A,this.logger=M,this.emitter=D}onFailure(E){this.failureCallback=E}setStartConfig(E,A){this.ingestEndpoint=E,this.streamKey=A}execute(){const{id:E}=this;this.state===Ci.IDLE&&(this.state=Ci.EXECUTING,this.emitter.emit(zs.CONNECTION_STATE_CHANGE,et.CONNECTING),this.logger.info({msg:"Starting execution of reconnect strategy.",id:E}),this.startTimeoutTimer(this.timeout),this.executeStrategy())}startTimeoutTimer(E){this.timeoutTimerId=window.setTimeout(()=>{this.state!==Ci.IDLE&&(this.logger.info({msg:"Reconnect strategy timed out."}),this.stop(),this.emitter.emit(zs.CONNECTION_STATE_CHANGE,et.FAILED),this.failureCallback())},E)}stop(){this.state=Ci.IDLE,clearTimeout(this.timeoutTimerId),this.stopStrategy()}reconnect(){return Ul(this,void 0,void 0,function*(){if(this.ingestEndpoint&&this.streamKey){const E=this.peerClient.getConnectionState();try{this.logger.info({msg:"Attempting reconnect."}),E===et.CONNECTED?this.logger.info({msg:"Already connected! Stopping reconnect strategy."}):(yield this.peerClient.start(this.ingestEndpoint,this.streamKey),this.logger.info({msg:"Reconnect succeeded!"})),this.stop()}catch(A){throw this.logger.error({err:A}),A}}})}isActive(){return this.state!==Ci.IDLE}}class Yo extends Qc{constructor(){super(...arguments),this.id="ExponentialBackoffStrategy"}executeStrategy(){let E=5e3;const A=()=>Ul(this,void 0,void 0,function*(){if(this.state===Ci.EXECUTING)try{this.state=Ci.RECONNECTING,yield this.reconnect()}catch{this.logger.warn({msg:"Attempted reconnect failed. Trying again in: ",nextRetry:E}),this.state=Ci.EXECUTING,this.currentTimeoutId=window.setTimeout(A,E),E*=2}});this.currentTimeoutId=window.setTimeout(A,0)}stopStrategy(){clearTimeout(this.currentTimeoutId)}}class Nf extends Qc{constructor(){super(...arguments),this.id="NetworkApiStrategy",this.onConnectionChange=()=>Ul(this,void 0,void 0,function*(){if(navigator.onLine&&this.state===Ci.EXECUTING){this.state=Ci.RECONNECTING;try{yield this.reconnect()}catch{this.logger.warn({msg:"Attempted reconnect failed."}),this.state=Ci.EXECUTING}}})}executeStrategy(){navigator.connection.addEventListener("change",this.onConnectionChange),this.onConnectionChange()}stopStrategy(){navigator.connection.removeEventListener("change",this.onConnectionChange)}}class lm{static create(E,A=da,M,D){const{reconnect:B,timeout:G}=A;if(B){const re=os.getParser(navigator.userAgent).getBrowserName().toLowerCase();return["edge","chrome"].includes(re)&&navigator.connection?new Nf(E,G,M,D):new Yo(E,G,M,D)}}}var fc,Xo=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})},ea=function(O,E,A,M){if(A==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?O!==E||!M:!E.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?M:A==="a"?M.call(O):M?M.value:E.get(O)};const er=O=>!!O;function cm(O){if(!O)throw new Error("PeerConnection is not defined")}const lv={bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",enableDtlsSrtp:{exact:!0},enableRtpDataChannels:{exact:!1},optional:[{googHighStartBitrate:{exact:0}},{googPayloadPadding:{exact:!0}},{googScreencastMinBitrate:{exact:100}},{googCpuOveruseDetection:{exact:!0}},{googCpuOveruseEncodeUsage:{exact:!0}},{googCpuUnderuseThreshold:{exact:55}},{googCpuOveruseThreshold:{exact:85}},{enableDscp:{exact:!0}}]};class Ph{constructor(E,A,M,D,B){this.config=E,this.emitter=A,this.mediaStreamManager=M,this.analyticsTracker=B,this.establishConnection=(G,re)=>Xo(this,void 0,void 0,function*(){var oe,J,le;cm(this.peerConnection);try{const pe=yield this.peerConnection.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1});yield this.handleLocalDescription(pe),yield this.sendSetupRequest(G,re,pe)}catch(pe){if(pe instanceof Error){(oe=(le=pe).code)!==null&&oe!==void 0||(le.code=xn.code);const ye=new ft(Object.assign(Object.assign({},xn),{name:pe.name,message:pe.message,code:pe==null?void 0:pe.code,cause:pe}));throw!((J=this.reconnectStrategy)===null||J===void 0)&&J.isActive()||this.handleError(pe.code,pe.message),this.stop(),ye}}}),this.getSessionId=()=>this.ingestSessionId,this.getConnectionState=()=>{var G;if(!this.peerConnection)return et.NONE;const re=(G=this.reconnectStrategy)===null||G===void 0?void 0:G.isActive(),oe=this.peerConnection.connectionState||this.peerConnection.iceConnectionState;switch(oe){case"new":return et.NEW;case"closed":return et.CLOSED;case"disconnected":return re?et.CONNECTING:et.DISCONNECTED;case"failed":return re?et.CONNECTING:et.FAILED;case"idle":return et.IDLE;case"checking":case"connecting":return et.CONNECTING;case"completed":case"connected":return et.CONNECTED;default:return this.logger.warn({msg:"Unhandled connection state:",rawState:oe}),et.IDLE}},this.onConnectionStateChange=()=>{var G;const re=this.getConnectionState();switch(re){case et.CONNECTED:{this.emitter.emit(zs.CONNECTION_STATE_CHANGE,re);const oe=new Date;this.analyticsTracker.trackEvent(new Kc(oe,this.connectionStartDate,this.ingestSessionId));const J=this.mediaStreamManager.getTrack(zt.AUDIO),le=this.mediaStreamManager.getTrack(zt.VIDEO);if(le){const pe=le.getSettings();this.analyticsTracker.trackEvent(new sm(pe))}if(J){const pe=J.getSettings();this.analyticsTracker.trackEvent(new T0(pe))}(((G=this.peerConnection)===null||G===void 0?void 0:G.getSenders())||[]).forEach(pe=>{var ye;(((ye=pe.getParameters())===null||ye===void 0?void 0:ye.codecs)||[]).forEach(Ie=>{var Xe;switch((Xe=pe.track)===null||Xe===void 0?void 0:Xe.kind){case"video":{if(!le)break;const qe=new Ms().extractVideoSdpFmtpLine(Ie.sdpFmtpLine),Oe=le.getSettings();this.analyticsTracker.trackEvent(new x0(Oe,qe,Ie));break}case"audio":if(!J)break;this.analyticsTracker.trackEvent(new av(Ie))}})});break}case et.CONNECTING:this.emitter.emit(zs.CONNECTION_STATE_CHANGE,re),this.connectionStartDate=new Date,this.disconnectionStartDate=void 0;break;case et.FAILED:this.reconnectStrategy?this.reconnectStrategy.execute():(this.emitter.emit(zs.CONNECTION_STATE_CHANGE,re),this.handleTerminalConnectionFailure());break;case et.DISCONNECTED:this.emitter.emit(zs.CONNECTION_STATE_CHANGE,re),this.disconnectionStartDate=new Date;break;default:this.emitter.emit(zs.CONNECTION_STATE_CHANGE,re)}},this.handleLocalDescription=G=>Xo(this,void 0,void 0,function*(){var re;return(re=this.peerConnection)===null||re===void 0?void 0:re.setLocalDescription(G)}),fc.set(this,G=>{if(typeof G!="string")throw new ft(Qs);try{new URL(G)}catch{throw new ft(uc)}}),this.logger=new pa(D,me.WEBRTC),this.createReconnectStrategy(E)}start(E,A){var M;return Xo(this,void 0,void 0,function*(){ea(this,fc,"f").call(this,E);const D=[this.mediaStreamManager.getTrack(zt.VIDEO),this.mediaStreamManager.getTrack(zt.AUDIO)].filter(er);if(this.createPeerConnection(),this.addTracks({tracks:D}),this.reconnectStrategy&&this.reconnectStrategy.setStartConfig(E,A),yield this.establishConnection(E,A),!((M=this.reconnectStrategy)===null||M===void 0)&&M.isActive()){const B=new URL(E);this.analyticsTracker.trackEvent(new Zc({protocol:"webrtc",hostname:B.hostname,port:B.port},Vu.NETWORK_DISCONNECT))}})}stop(){var E,A,M,D;this.stateCheckInterval&&(clearInterval(this.stateCheckInterval),this.stateCheckInterval=void 0),this.stopStreamDataChannel&&this.stopStreamDataChannel.readyState==="open"&&this.stopStreamDataChannel.send(" "),[et.NEW,et.CONNECTING,et.CONNECTED].includes(this.getConnectionState())&&this.emitter.emit(zs.CONNECTION_STATE_CHANGE,et.CLOSED),(E=this.peerConnection)===null||E===void 0||E.close(),(A=this.peerConnection)===null||A===void 0||A.removeEventListener("connectionstatechange",this.onConnectionStateChange),(M=this.peerConnection)===null||M===void 0||M.removeEventListener("iceconnectionstatechange",this.onConnectionStateChange),this.ingestSessionId=void 0,(D=this.reconnectStrategy)===null||D===void 0||D.stop()}addTracks(E){var A;if(cm(this.peerConnection),!E)return;const M=this.peerConnection.getSenders().map(B=>{var G;return(G=B.track)===null||G===void 0?void 0:G.id}),D=E.tracks.filter(B=>!M.includes(B.id));for(const B of D)(A=this.peerConnection)===null||A===void 0||A.addTrack(B)}getReports(){var E;return Xo(this,void 0,void 0,function*(){try{const A=(yield(E=this.peerConnection)===null||E===void 0?void 0:E.getStats())||[],M=[];return A.forEach(D=>{M.push(D)}),M}catch{return[]}})}sendSetupRequest(E,A,M){var D;return Xo(this,void 0,void 0,function*(){const B=yield fetch(`${E}/v1/offer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({offer:Jc(M),streamKey:A},this.config.streamConfig))});if(!B.ok)throw function(re){let oe=new ft(Object.assign({},xn));return(re==null?void 0:re.code)===Pe&&(oe=new ft(Object.assign({},Wn))),re!=null&&re.message&&(oe.message=re.message),oe}(yield B.json());const G=yield B.json();G!=null&&G.answer&&(yield(D=this.peerConnection)===null||D===void 0?void 0:D.setRemoteDescription(function(re){return JSON.parse(atob(re))}(G.answer)),this.ingestSessionId=G.ingestSessionId)})}handleTerminalConnectionFailure(){const E=new ft(bn);this.handleError(E.code,E.message)}handleError(E,A){this.analyticsTracker.trackEvent(new S0({code:E,description:A,isFatal:!0})),this.emitter.emit(zs.ERROR,{code:E,message:A})}createPeerConnection(){var E;const A=this.getConnectionState(),M=A!==et.NONE,D=A!==et.CLOSED,B=(E=this.reconnectStrategy)===null||E===void 0?void 0:E.isActive();M&&D&&!B||(this.stateCheckInterval&&(clearInterval(this.stateCheckInterval),this.stateCheckInterval=void 0),this.stateCheckInterval=window.setInterval(()=>{const G=this.getConnectionState();if(this.reconnectStrategy&&G===et.DISCONNECTED&&this.disconnectionStartDate){const re=Date.now()-this.disconnectionStartDate.getTime();this.logger.info({msg:"Time since disconnected:",timeSinceDisconnect:re}),re>1e4&&(this.disconnectionStartDate=void 0,this.reconnectStrategy.execute())}else G===et.CLOSED&&(this.handleTerminalConnectionFailure(),clearInterval(this.stateCheckInterval),this.stateCheckInterval=void 0)},1e3),this.peerConnection=new RTCPeerConnection(lv),this.stopStreamDataChannel=this.peerConnection.createDataChannel("stopStream"),this.peerConnection.addEventListener("connectionstatechange",this.onConnectionStateChange),this.peerConnection.addEventListener("iceconnectionstatechange",this.onConnectionStateChange))}createReconnectStrategy(E){if(this.reconnectStrategy=lm.create(this,E.networkReconnectConfig,this.logger,this.emitter),this.reconnectStrategy){this.reconnectStrategy.onFailure(this.handleTerminalConnectionFailure.bind(this));const A=this.reconnectStrategy.id;this.logger.info({msg:"Using reconnect strategy:",strategyId:A})}}}fc=new WeakMap;var Dh,cv=r(2492);(function(O){O.CONFIG="config",O.UPDATE="update",O.START="start",O.STOP="stop"})(Dh||(Dh={}));var hS=r(477),to=r.n(hS);function qu(){return to()(`/*! For license information please see scheduler.worker.worker.js.LICENSE.txt */
(()=>{"use strict";var t;!function(t){t.CONFIG="config",t.UPDATE="update",t.START="start",t.STOP="stop"}(t||(t={}));const i=self;const s=new class Scheduler{constructor(){this.config={frameRate:60,isRunning:!1}}setConfig(t){this.config=Object.assign(Object.assign({},this.config),t),this.config.isRunning&&(this.stop(),this.start())}start(){this.config.isRunning||(this.intervalId=setInterval((()=>{i.postMessage({type:t.UPDATE})}),1e3/this.config.frameRate),this.config.isRunning=!0)}stop(){this.config.isRunning&&(clearInterval(this.intervalId),this.intervalId=void 0,this.config.isRunning=!1)}};i.addEventListener("message",(function(i){var n;if(null===(n=null==i?void 0:i.data)||void 0===n?void 0:n.type)switch(i.data.type){case t.CONFIG:s.setConfig(i.data.payload||{});break;case t.START:s.start();break;case t.STOP:s.stop()}}))})();`,"Worker",void 0,void 0)}var eu=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class A0{constructor(E,A,M){this.config=E,this.mediaStreamManager=A,this.analyticsTracker=M,this.handleWorkerEvent=re=>{var oe;((oe=re.data)===null||oe===void 0?void 0:oe.type)===Dh.UPDATE&&this.drawComposite()},this.mixer={video:[],audio:[]},this.schedulerWorker=new qu,this.running=!1,this.compositeEl=document.createElement("canvas"),this.compositeEl.height=this.config.streamConfig.maxResolution.height,this.compositeEl.width=this.config.streamConfig.maxResolution.width;const D=this.compositeEl.getContext("2d");if(D===null)throw new ft(Object.assign({},Cn));this.compositeContext=D,this.compositeStream=this.compositeEl.captureStream(typeof CanvasCaptureMediaStreamTrack!==void 0?0:30);const B=nn(this.compositeStream.getTracks(),zt.VIDEO);this.audioContext=new AudioContext,this.unlockAudioContext(),this.audioDestination=this.audioContext.createMediaStreamDestination(),this.setupSilence();const G=nn(this.audioDestination.stream.getTracks(),zt.AUDIO);B&&this.mediaStreamManager.setTrack(zt.VIDEO,B),G&&this.mediaStreamManager.setTrack(zt.AUDIO,G),this.schedulerWorker.addEventListener("message",this.handleWorkerEvent),this.schedulerWorker.postMessage({type:Dh.CONFIG,payload:{frameRate:this.config.streamConfig.maxFramerate}}),this.previewElement=null,this.previewCtx=null,this.nextMix=new Date().getTime()}attachPreview(E){this.previewElement=E;const{width:A,height:M}=this.config.streamConfig.maxResolution;this.previewElement.width=A,this.previewElement.height=M,this.previewCtx=this.previewElement.getContext("2d")}detachPreview(){this.previewElement=null,this.previewCtx=null}setupSilence(){const E=this.audioContext.createConstantSource(),A=this.audioContext.createGain();A.gain.value=.001,E.connect(A),A.connect(this.audioDestination),E.start()}unlockAudioContext(){if(this.audioContext.state!=="suspended")return;const E=document.body,A=["touchstart","touchend","mousedown","keydown"],M=()=>{A.forEach(B=>{E.removeEventListener(B,D)})},D=()=>{this.audioContext.resume().then(M)};A.forEach(B=>{E.addEventListener(B,D,!1)})}getTracks(){return[this.mediaStreamManager.getTrack(zt.VIDEO),this.mediaStreamManager.getTrack(zt.AUDIO)]}getCanvasVideoTrack(){return this.mediaStreamManager.getTrack(zt.VIDEO)}getAudioInputDevice(E){if(typeof E!="string")return;const A=this.mixer.audio.find(M=>{if(M.name===E)return M.source});return A==null?void 0:A.source}getVideoInputDevice(E){if(typeof E=="string")return this.mixer.video.find(A=>A.name===E)}getCanvasDimensions(){return{height:this.compositeEl.height,width:this.compositeEl.width}}addVideoInputDevice(E,A,M){var D;return eu(this,void 0,void 0,function*(){if(typeof E!="object")throw new ft(Object.assign({},nt));if(!A||typeof A!="string")throw new ft(Object.assign({},je));if(this.mixer.video.some(ye=>ye.name===A))throw new ft(Object.assign({},Et));if(!M)throw new ft(Object.assign({},Wt));if(typeof M.index!="number")throw new ft(Object.assign({},Kt));const B=function(){const ye=document.createElement("video");return ye.autoplay=!0,ye.muted=!0,ye.setAttribute("playsinline",""),ye.setAttribute("webkit-playsinline",""),ye}(),G=E.getVideoTracks(),[re]=G;if(!G.length)throw new ft(Object.assign({},ze));const oe=re.getConstraints(),J=cv({},oe,{frameRate:this.config.streamConfig.maxFramerate});try{yield re.applyConstraints(J)}catch(ye){let Ie="Unknown constraints error";ye instanceof Error&&(Ie=ye.message),this.analyticsTracker.trackEvent(new S0({description:`${yt.message}: ${Ie}`,isFatal:!1,code:yt.code}))}const le=()=>eu(this,void 0,void 0,function*(){let ye=0;for(;ye<5;)try{return void(yield B.play())}catch(Ie){if(!(Ie instanceof Error))throw new Error("unknown error trying to add video to broadcast");ye++,yield new Promise(Xe=>setTimeout(Xe,150))}throw new Error("Error playing video, tries exceeded")}),pe=new MediaStream([re]);B.srcObject=pe;try{yield le();const ye={name:A,element:B,position:M,source:pe,render:!0},Ie=((D=re.getSettings)===null||D===void 0?void 0:D.call(re))||{};this.analyticsTracker.trackEvent(new sv(Ot(Ie),Ie)),this.mixer.video.push(ye)}catch(ye){throw new ft(Object.assign(Object.assign({},ze),{cause:ye}))}})}addImageSource(E,A,M){var D;return eu(this,void 0,void 0,function*(){if(!E)throw new ft(Object.assign({},nt));if(!A||typeof A!="string")throw new ft(Object.assign({},je));if(E.tagName==="image")throw new ft(Object.assign({},tt));if(this.mixer.video.some(G=>G.name===A))throw new ft(Object.assign({},Et));if(!M)throw new ft(Object.assign({},Wt));if(typeof M.index!="number")throw new ft(Object.assign({},Kt));if(E instanceof Image){const G=(D=E.src)===null||D===void 0?void 0:D.slice();try{const re=E.src?new URL(E.src):{};if(re.host&&re.hostname){const oe=yield fetch(E.src).then(le=>eu(this,void 0,void 0,function*(){return le.blob()})),J=yield new Promise(le=>{const pe=new FileReader;pe.onload=()=>{le(pe.result)},pe.readAsDataURL(oe)});E.src=J}}catch{throw new ft(Object.assign(Object.assign({},Xt),{params:{details:`Image URL: ${G}`}}))}}const B={name:A,element:E,position:M,render:!0};this.mixer.video.push(B)})}addAudioInputDevice(E,A){return eu(this,void 0,void 0,function*(){if(typeof E!="object")throw new ft(Object.assign({},nt));if(!A||typeof A!="string")throw new ft(Object.assign({},je));if(this.mixer.audio.some(re=>re.name===A))throw new ft(Object.assign({},Et));const M=E.getAudioTracks();if(!M.length)throw new ft(Object.assign({},It));const D=this.audioContext.createMediaStreamSource(new MediaStream(M)),B=this.audioContext.createGain();B.gain.value=1,D.connect(B),B.connect(this.audioDestination);const G={name:A,source:E,audioTrackSource:D,gainNode:B};this.analyticsTracker.trackEvent(new sv("audio",{deviceId:E.id})),this.mixer.audio.push(G)})}removeImage(E){const A=this.mixer.video.findIndex(M=>M.name===E);if(A<0)throw new ft(Object.assign({},Nn));this.mixer.video.splice(A,1)}removeVideoInputDevice(E){var A;const M=this.removeDevice(E,this.mixer.video);if(!M)throw new ft(Object.assign({},St));{const D=nn(M.source.getTracks(),zt.VIDEO);if(!D)throw new ft(Object.assign({},St));M.element.srcObject=null,D.stop();const B=((A=D==null?void 0:D.getSettings)===null||A===void 0?void 0:A.call(D))||{};this.analyticsTracker.trackEvent(new aS(Ot(B),B))}}removeAudioInputDevice(E){const A=this.removeDevice(E,this.mixer.audio);if(A!=null&&A.audioTrackSource){for(const M of A.source.getTracks())M.stop(),this.analyticsTracker.trackEvent(new aS("audio",{deviceId:M.id}));A.gainNode.disconnect(this.audioDestination)}else if(!A)throw new ft(Object.assign({},St))}updateVideoDeviceComposition(E,A){if(!E||typeof E!="string")throw new ft(Object.assign({},jn));if(!A)throw new ft(Object.assign({},Pi));if(typeof A.index!="number")throw new ft(Object.assign({},ii));this.mixer.video.forEach((M,D)=>{M.name===E&&(M.position=A)})}exchangeVideoDevicePositions(E,A){const M=this.getVideoInputDevice(E),D=this.getVideoInputDevice(A);if(!M)throw new ft(Object.assign(Object.assign({},ln),{params:{details:`device with name: "${E}" not found`}}));if(!D)throw new ft(Object.assign(Object.assign({},ln),{params:{details:`device with name: "${A}" not found`}}));const B=Object.assign({},M.position),G=Object.assign({},D.position);for(const re of this.mixer.video)re.name===E&&(Pf(G.x)?re.position=Object.assign(Object.assign({},re.position),G):re.position={index:G.index}),re.name===A&&(Pf(B.x)?re.position=Object.assign(Object.assign({},re.position),B):re.position={index:B.index})}start(){this.running||(this.running=!0,this.schedulerWorker.postMessage({type:Dh.CONFIG,payload:{frameRate:this.config.streamConfig.maxFramerate}}),this.schedulerWorker.postMessage({type:Dh.START}))}stop(){this.running&&(this.running=!1,this.schedulerWorker.removeEventListener("message",this.handleWorkerEvent))}isCapturing(){return this.running}getAudioLatency(){return this.audioContext.baseLatency}getVideoLatency(){var E;return((E=this.mediaStreamManager.getTrack(zt.VIDEO))===null||E===void 0?void 0:E.getConstraints().latency)||0}disableVideo(){this.mixer.video.forEach(E=>{E.render=!1})}enableVideo(){this.mixer.video.forEach(E=>{E.render=!0})}disableAudio(){this.mixer.audio.forEach(E=>{E.audioTrackSource&&(E.gainNode.gain.value=0)})}enableAudio(){this.mixer.audio.forEach(E=>{E.audioTrackSource&&(E.gainNode.gain.value=1)})}getDrawRegion(E,A,M){var D,B,G,re;let oe=(D=E.position.x)!==null&&D!==void 0?D:0,J=(B=E.position.y)!==null&&B!==void 0?B:0;const le=(G=E.position.width)!==null&&G!==void 0?G:A-oe,pe=(re=E.position.height)!==null&&re!==void 0?re:M-J,ye=le/pe;let Ie=E.element.width,Xe=E.element.height;E.element instanceof HTMLVideoElement&&(Ie=E.element.videoWidth,Xe=E.element.videoHeight);const qe=Ie/Xe;let Oe=le,Te=pe;return qe>ye?(Oe=le,Te=2*Math.round(le/qe/2),J+=(pe-Te)/2):qe<ye&&(Te=pe,Oe=2*Math.round(pe*qe/2),oe+=(le-Oe)/2),{x:oe,y:J,width:Oe,height:Te}}drawComposite(){if(!this.shouldMix(new Date))return;this.compositeContext.clearRect(0,0,this.compositeEl.width,this.compositeEl.height),this.drawBlackScreen();const E=this.mixer.video.filter(A=>A.render);E.sort((A,M)=>A.position.index-M.position.index);for(const A of E){const{x:M,y:D,width:B,height:G}=this.getDrawRegion(A,this.compositeEl.width,this.compositeEl.height);this.compositeContext.drawImage(A.element,M,D,B,G)}this.previewElement&&this.previewCtx&&this.previewCtx.drawImage(this.compositeEl,0,0,this.previewElement.width,this.previewElement.height),this.requestCanvasCapture()}requestCanvasCapture(){typeof CanvasCaptureMediaStreamTrack!==void 0&&(typeof this.compositeStream.requestFrame=="function"?this.compositeStream.requestFrame():this.mediaStreamManager.getTrack(zt.VIDEO).requestFrame())}drawBlackScreen(){this.compositeContext.fillStyle="#000000",this.compositeContext.fillRect(0,0,this.compositeEl.width,this.compositeEl.height)}removeDevice(E,A){const M=A.findIndex(D=>(B=>B.name===E)(D));if(!(M<0))return A.splice(M,1)[0]}shouldMix(E){if(E.getTime()<this.nextMix)return!1;for(;this.nextMix<=E.getTime();)this.nextMix+=1e3/this.config.streamConfig.maxFramerate;return!0}}function Pf(O){return Number.isSafeInteger(O)}var Df,um,kh=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})},hm=function(O,E,A,M){if(A==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?O!==E||!M:!E.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?M:A==="a"?M.call(O):M?M.value:E.get(O)};class pc{constructor(E){this.config=E,Df.add(this),this.emitter=new fa,this.isValid=!0,this.emitter.on(zs.ERROR,this.stopBroadcast),this.config.ingestEndpoint&&(this.url=new URL(this.config.ingestEndpoint)),this.analyticsTracker=new Hu,this.mediaStreamManager=new yi;const A=new Of(E.logLevel,E.logger);this.peerClient=new Ph(this.config,this.emitter,this.mediaStreamManager,A,this.analyticsTracker),this.broadcastCanvasManager=new A0(E,this.mediaStreamManager,this.analyticsTracker),this.peerStatsTracker=new uS(this.peerClient,this.broadcastCanvasManager,A,this.analyticsTracker),this.broadcastCanvasManager.start(),Object.getOwnPropertyNames(pc.prototype).forEach(M=>{this[M]=new Proxy(this[M],{apply:(D,B,G)=>{if(!B.isValid)throw new ft(Object.assign({},tm));return Reflect.apply(D,B,G)}})}),window.addEventListener("beforeunload",()=>{this.analyticsTracker.stop(!0)})}delete(){this.isValid=!1,this.peerClient.stop(),this.broadcastCanvasManager.stop(),this.emitter.removeAllListeners()}startBroadcast(E,A){return kh(this,void 0,void 0,function*(){hm(this,Df,"m",um).call(this,E);const M=Yc(A||this.config.ingestEndpoint);this.analyticsTracker.start(),this.peerStatsTracker.start(),yield this.peerClient.start(M,E),this.emitter.emit(zs.ACTIVE_STATE_CHANGE,!0),this.url=new URL(M),this.url&&this.analyticsTracker.trackEvent(new Zc({protocol:"webrtc",hostname:this.url.hostname,port:this.url.port},Vu.USER_INITIATED))})}stopBroadcast(){var E,A,M;this.url&&this.analyticsTracker.trackEvent(new Rf({protocol:"webrtc",hostname:this.url.hostname,port:this.url.port})),(E=this.peerStatsTracker)===null||E===void 0||E.stop(),(A=this.peerClient)===null||A===void 0||A.stop(),(M=this.emitter)===null||M===void 0||M.emit(zs.ACTIVE_STATE_CHANGE,!1)}getCanvasDimensions(){return this.broadcastCanvasManager.getCanvasDimensions()}addVideoInputDevice(E,A,M){return kh(this,void 0,void 0,function*(){return this.broadcastCanvasManager.addVideoInputDevice(E,A,M)})}addImageSource(E,A,M){return kh(this,void 0,void 0,function*(){return this.broadcastCanvasManager.addImageSource(E,A,M)})}addAudioInputDevice(E,A){return kh(this,void 0,void 0,function*(){return this.broadcastCanvasManager.addAudioInputDevice(E,A)})}removeVideoInputDevice(E){this.broadcastCanvasManager.removeVideoInputDevice(E)}removeAudioInputDevice(E){this.broadcastCanvasManager.removeAudioInputDevice(E)}removeImage(E){this.broadcastCanvasManager.removeImage(E)}updateVideoDeviceComposition(E,A){this.broadcastCanvasManager.updateVideoDeviceComposition(E,A)}exchangeVideoDevicePositions(E,A){this.broadcastCanvasManager.exchangeVideoDevicePositions(E,A)}getAudioInputDevice(E){return this.broadcastCanvasManager.getAudioInputDevice(E)}getVideoInputDevice(E){return this.broadcastCanvasManager.getVideoInputDevice(E)}getConnectionState(){return this.peerClient.getConnectionState()}getSessionId(){return this.peerClient.getSessionId()}on(E,A){this.emitter.on(E,A)}off(E,A){this.emitter.off(E,A)}getAudioContext(){return this.broadcastCanvasManager.audioContext}attachPreview(E){this.broadcastCanvasManager.attachPreview(E)}detachPreview(){this.broadcastCanvasManager.detachPreview()}disableVideo(){this.broadcastCanvasManager.disableVideo()}enableVideo(){this.broadcastCanvasManager.enableVideo()}disableAudio(){this.broadcastCanvasManager.disableAudio()}enableAudio(){this.broadcastCanvasManager.enableAudio()}}function hr(O){return new pc(function(E){const A=new Or;return A.streamConfig=E.streamConfig,A.ingestEndpoint=E.ingestEndpoint,A.logger=E.logger,A.logLevel=E.logLevel,A.networkReconnectConfig=E.networkReconnectConfig,A}(O))}Df=new WeakSet,um=function(O){if(typeof O!="string"||!/^[a-zA-Z0-9_-]+$/.test(O))throw new ft(hc)};const dm="1.19.0";var en,Rs=r(6486);(function(O){O.PUBLISH="publish",O.SUBSCRIBE="subscribe",O.JOIN="join",O.LEAVE="leave"})(en||(en={}));const fm=2;class mc extends On{constructor(E){super(on.LEAVE,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.LEAVE,event_endpoint:E.eventEndpoint,whip_endpoint:E.whipEndpoint,reason:E.reason}),this.critical=!0}}class Ko{constructor(){this.emitter=new fa}on(E,A,M){A.call=function(D,B){return function(G,...re){try{B.apply(G,re)}catch(oe){let J=`Error in callback for ${D}`;const le=B.name;return le&&(J+=` for function ${le}`),void console.error(`${J}
`,oe)}}}(E,A),this.emitter.on(E,A,M)}off(E,A,M){this.emitter.off(E,A,M)}emit(E,...A){this.emitter.emit(E,...A)}removeAllListeners(){this.emitter.removeAllListeners()}}function pm(O){const E="0123456789abcdef";let A="";for(let M=0;M<O;M+=1)A+=E.charAt(Math.floor(Math.random()*E.length));return A}class Pd{constructor(){const E=pm;this.value=`${E(8)}-${E(4)}-${E(4)}-${E(4)}-${E(12)}`}}function js(){return new Pd}class M0{constructor(){const E=(Date.now()/1e3|0).toString(16);this.value=`1-${E}-${pm(24)}`}}function So(){return new M0}var qr=r(9669),gs=r.n(qr);class ui extends ft{constructor({token:E,traceId:A,code:M,tag:D,location:B,message:G,details:re,remoteParticipantId:oe,requestUUID:J,fatal:le,nominal:pe,action:ye}){super({name:"StageClientError",message:G,code:M}),Error.captureStackTrace&&Error.captureStackTrace(this,ui),this.action=ye,this.token=E,this.traceId=A,this.code=M,this.tag=D,this.location=B,this.message=G,this.details=re,this.remoteParticipantId=oe,this.requestUUID=J,this.fatal=le,this.nominal=pe}}const Eo={JOIN_RELATED:"signalling_session",PUBLISH_RELATED:"webrtc_sink",UNPUBLISH_RELATED:"webrtc_unsink",SUBSCRIBE_RELATED:"webrtc_source"};function Da(O,E){switch(O){case en.PUBLISH:return Eo.PUBLISH_RELATED;case en.SUBSCRIBE:return`webrtc_source:${E}`;default:return"unknown"}}function Dd(O,E){var A,M,D,B;const G={code:O.code,message:`${O.message}: ${E.name} ${E.message}`,fatal:(A=O.fatal)!==null&&A!==void 0&&A,nominal:(M=O.nominal)!==null&&M!==void 0&&M};return E instanceof ui&&(G.fatal=(D=E.fatal)!==null&&D!==void 0&&D,G.nominal=(B=E.nominal)!==null&&B!==void 0&&B),G}function mm(O,E){if(O===0)return Rt.UNKNOWN_SERVER_ERROR;if(!(O<400))if(O>=400&&O<=403)switch(E){case ka.TokenExpired:return Rt.EXPIRED_TOKEN;case ka.NoPermissions:return Rt.TOKEN_PERMISSIONS_DENIED;case ka.StageAtCapacity:return Rt.STAGE_AT_CAPACITY;case ka.NoMatchingCodec:return Rt.NO_MATCHING_CODEC;default:return Rt.UNKNOWN_SERVER_ERROR}else{if(O===404)return E===ka.RemoteStreamNotFound?Rt.REMOTE_STREAM_NOT_FOUND:Rt.UNKNOWN_SERVER_ERROR;if(O===412)return E===ka.AbortedMHCPError?Rt.MHCP_ABORTED:Rt.UNKNOWN_SERVER_ERROR;if(O===429)return E===ka.StageAuthThrottled?Rt.STAGE_AUTH_THROTTLED:Rt.WHIP_TOO_MANY_REQUESTS;if(O!==500)return Rt.UNKNOWN_SERVER_ERROR;switch(E){case ka.InternalMHCPError:return Rt.INTERNAL_MHCP_ERROR;case ka.UnreachableMHCP:return Rt.UNREACHABLE_MHCP;case ka.InvalidSessionStatus:return Rt.INVALID_SESSION_STATUS;default:return Rt.INTERNAL_SERVER_ERROR}}}var ka;(function(O){O[O.Unspecified=2001]="Unspecified",O[O.TokenExpired=2002]="TokenExpired",O[O.NoPermissions=2003]="NoPermissions",O[O.RemoteStreamNotFound=2004]="RemoteStreamNotFound",O[O.StageAtCapacity=2005]="StageAtCapacity",O[O.InternalMHCPError=2006]="InternalMHCPError",O[O.UncategorizedMHCPError=2007]="UncategorizedMHCPError",O[O.UnreachableMHCP=2008]="UnreachableMHCP",O[O.InvalidSessionStatus=2010]="InvalidSessionStatus",O[O.PostWithoutOptions=2011]="PostWithoutOptions",O[O.AbortedMHCPError=2012]="AbortedMHCPError",O[O.StageAuthThrottled=2013]="StageAuthThrottled",O[O.NoMatchingCodec=2014]="NoMatchingCodec"})(ka||(ka={}));const Rt={MALFORMED_TOKEN:{code:1e3,message:"Token is malformed",fatal:!0,nominal:!0},EXPIRED_TOKEN:{code:1001,message:"Token expired and is no longer valid",fatal:!0,nominal:!0},UNPUBLISH_FAILURE:{code:1013,message:"Failed to unpublish",fatal:!1,nominal:!1},UNSUBSCRIBE_FAILURE:{code:1014,message:"Failed to unsubscribe",fatal:!1,nominal:!1},PUBLISH_FAILURE:{code:1015,message:"Failed to publish",fatal:!1,nominal:!1},SUBSCRIBE_FAILURE:{code:1016,message:"Failed to subscribe",fatal:!1,nominal:!1},JOIN_FAILURE:{code:1017,message:"Failed to join",fatal:!0,nominal:!1},JOIN_TIMED_OUT:{code:1019,message:"Join timed out",fatal:!0,nominal:!1},PUBLISH_TIMED_OUT:{code:1020,message:"Publish timed out",fatal:!1,nominal:!1},SUBSCRIBE_TIMED_OUT:{code:1021,message:"Subscribe timed out",fatal:!1,nominal:!1},NO_CANDIDATES:{code:1022,message:"No ICE candidates",fatal:!1,nominal:!1},OPERATION_ABORTED:{code:1023,message:"Request aborted",fatal:!1,nominal:!0},STAGE_AT_CAPACITY:{code:1024,message:"Stage at capacity",fatal:!0,nominal:!0},INTERNAL_SERVER_ERROR:{code:1025,message:"Internal server error",fatal:!0,nominal:!1},TOKEN_PERMISSIONS_DENIED:{code:1026,message:"Token permissions are not valid for the operation",fatal:!0,nominal:!1},REMOTE_STREAM_NOT_FOUND:{code:1027,message:"Contributor group (PUBLISH) or remote stream (SUBSCRIBE) not found",fatal:!0,nominal:!1},INTERNAL_MHCP_ERROR:{code:1028,message:"Authorization failed due to internal MHCP error",fatal:!0,nominal:!1},UNCATEGORIZED_MHCP_ERROR:{code:1029,message:"Authorization failed due to uncategorized MHCP error",fatal:!0,nominal:!1},UNREACHABLE_MHCP:{code:1030,message:"Authorization failed due to MHCP unreachable",fatal:!0,nominal:!1},INVALID_SESSION_STATUS:{code:1031,message:"Stream has already been published (PUBLISH) or subscribed to (SUBSCRIBE)",fatal:!0,nominal:!1},POST_WITHOUT_OPTIONS:{code:1032,message:"Cannot POST without OPTIONS in mandatory TURN",fatal:!0,nominal:!1},MHCP_ABORTED:{code:1033,message:"Publisher state conflict",fatal:!0,nominal:!1},STAGE_AUTH_THROTTLED:{code:1034,message:"Too many requests",fatal:!1,nominal:!1},NO_MATCHING_CODEC:{code:1035,message:"No matching codec found",fatal:!0,nominal:!1},CHIME_MEETING_NOT_FOUND:{code:1098,message:"Meeting or Attendee was deleted",fatal:!0,nominal:!0},UNKNOWN_SERVER_ERROR:{code:1099,message:"Service error code unknown or not found",fatal:!0,nominal:!1},XDP_CONNECTION_LOST:{code:1221,message:"Connection lost during SDP exchange",fatal:!1,nominal:!1},XDP_INVALID_ANSWER_MSG:{code:1222,message:"Invalid answer message received by client",fatal:!1,nominal:!1},XDP_TIMEOUT:{code:1223,message:"Failed to receive SDP answer within timeout period",fatal:!1,nominal:!1},XDP_UNEXPECTED_ERROR:{code:1224,message:"Unexpected error encountered",fatal:!1,nominal:!1},WEBSOCKET_MESSAGE_PARSE_FAILURE:{code:1204,message:"Failed to parse websocket message",fatal:!1,nominal:!1},WHIP_SESSION_RESOURCE_DELETED:{code:1206,message:"WHIP signaling session resource not found",fatal:!0,nominal:!0},WHIP_TOO_MANY_REQUESTS:{code:1207,message:"WHIP endpoint received too many requests",fatal:!1,nominal:!1},WHIP_OPTIONS_FAILURE:{code:1501,message:"Failed to get ICE Servers from OPTIONS",fatal:!1,nominal:!1},WHIP_POST_FAILURE:{code:1502,message:"WHIP post failure",fatal:!1,nominal:!1},WHIP_DELETE_FAILURE:{code:1503,message:"WHIP delete failure",fatal:!1,nominal:!1},WHIP_URL_MISSING:{code:1504,message:"WHIP delete failure",fatal:!1,nominal:!1},WHEP_SET_LAYER_REQUEST_FAILED:{code:1510,message:"Set layer request failed for reason: Unknown",fatal:!1,nominal:!1},WHEP_SET_LAYER_REQUEST_THROTTLED:{code:1511,message:"Too many set layer requests",fatal:!1,nominal:!0},WHEP_GET_LAYER_STATE_FAILED:{code:1512,message:"Get layer state failed for reason: Unknown",fatal:!1,nominal:!1},WHEP_GET_LAYER_STATE_THROTTLED:{code:1513,message:"Too many get layer state requests",fatal:!1,nominal:!0},EVENT_PLANE_WS_CREATE_FAILED:{code:1300,message:"Error creating WebSocket",fatal:!0,nominal:!1},EVENT_PLANE_WS_UNEXPECTED_CLOSE:{code:1302,message:"Unexpectedly not connected to event plane",fatal:!1,nominal:!1},EVENT_PLANE_PING_SEND_FAIL:{code:1303,message:"Ping send fail",fatal:!1,nominal:!1},EVENT_PLANE_PONG_TIMEOUT:{code:1304,message:"Pong timed out",fatal:!1,nominal:!1},EVENT_PLANE_WS_CLOSE_BEFORE_OPEN:{code:1305,message:"Connect attempt closed by server",fatal:!1,nominal:!1},PEER_CONNECTION_NETWORK_FAILURE:{code:1400,message:"PeerConnection is lost due to unknown network error",fatal:!1,nominal:!1},CREATE_OFFER_FAILURE:{code:1402,message:"Failed to set local description",fatal:!1,nominal:!1},CREATE_PEER_CONNECTION_FAILURE:{code:1403,message:"Failed to create a peer connection",fatal:!1,nominal:!1},ICE_CANDIDATE_ERROR:{code:1404,message:"ICE candidate error",fatal:!1,nominal:!1},SET_ANSWER_FAILURE:{code:1405,message:"Failed to set remote answer",fatal:!1,nominal:!1},NETWORK_FAILURE:{code:1406,message:"Failed due to network problem",fatal:!1,nominal:!1},REASSIGNMENT_REQUEST_INVALID_LOCAL_PARTICIPANT_ID:{code:1470,message:"Invalid participant id in the reassignment message",fatal:!1,nominal:!1},REASSIGNMENT_REQUEST_INVALID_REMOTE_PARTICIPANT_ID:{code:1471,message:"Invalid remote participant id in the reassignment message",fatal:!1,nominal:!1},REASSIGNMENT_REQUEST_INVALID_REMOTE_PEER_CONNECTION_STATE:{code:1472,message:"Invalid subscriber peer connection state for reassignment",fatal:!1,nominal:!1},REASSIGNMENT_REQUEST_ALREADY_IN_PROGRESS:{code:1473,message:"Request rejected because client is already processing a previous reassignment request",fatal:!1,nominal:!1},UNEXPECTED_ERROR:{code:9999,message:"Encountered unexpected error condition. Expected StageClientError type.",fatal:!1,nominal:!1},TRANSFORM_UNEXPECTED_ERROR:{code:1480,message:"Unexpected error occurred during transform execution",fatal:!1,nominal:!1},TRANSFORM_TOO_MANY_ERRORS:{code:1481,message:"Transformer encountered too many consecutive errors",fatal:!1,nominal:!1},TRANSFORM_NOT_SUPPORTED_BY_PLATFORM:{code:1482,message:"Transforms are not supported by this platform",fatal:!1,nominal:!1},CODEC_HANDLE_INCOMPATIBLE_UNEXPECTED_ERROR:{code:1490,message:"Unexpected error occurred when handling incompatible codecs",fatal:!1,nominal:!1}};var Hs;(function(O){O.UNPUBLISH="unpublish",O.UNSUBSCRIBE="unsubscribe",O.UNLOAD="unload",O.CONNECTION_FAIL="connection fail",O.REASSIGNMENT="reassignment"})(Hs||(Hs={}));const kf="stageJoined",Lh="stageParticipantJoined",$u="stageParticipantLeft",Os="stageParticipantKicked",gm="stageParticipantUpdated",To="localPublishingChanged",dS="stageRefresh",yl="stateChange",kd="error",Bl="reassignmentRequest",Uh="incompatibleCodecs",Lf="connectionStateChange",be="stageStreamUpdate",Wu="error",tu="stageStreamSeiMessageReceived",ma="transformError",mi="reassignmentStarted",Yu="reassignmentSuccess",gc="reassignmentFailed",Zo="open",vc="closed",xo="messageParseError",uv="refresh",Fl="error",hv="stageStateMessage",vm="sdpAnswer",ym="disconnectMessage",Bh="reassignmentMessage",La="incompatibleCodecs";function R0(O){return A=function(M){return M.replace(/-/g,"+").replace(/_/g,"/").padEnd(M.length+(4-M.length%4)%4,"=")}(O),window.atob(A);var A}class no{constructor(E,A){this.analyticsTracker=A,this.rawToken=E;const M=E.split(".");if(M.length!==3)throw Error(`Token format incorrect. length: ${M.length}`);try{this.header=JSON.parse(R0(M[0]))}catch(G){const re=G instanceof Error?`: ${G.message}`:"";throw Error(`Error parsing Stage Token header${re}`)}try{this.claims=JSON.parse(R0(M[1]))}catch(G){const re=G instanceof Error?`: ${G.message}`:"";throw Error(`Error parsing Stage Token claims${re}`)}this.signature=M[2];const{claims:D}=this;this.stageARN=D.resource,this.participantID=D.jti,this.eventsURL=D.events_url,this.whipURL=ju("whipUrl")||D.whip_url,this.userID=D.user_id,this.expirationTime=D.exp,this.topic=D.topic,this.parseVersionFlags(D.version);const{attributes:B}=D;B&&(this.attrGsRole=B.gs_role,this.attrGsSessionId=B.gs_session_id)}getPublishEndpoint(){let E="";return this.whipURL&&this.participantID&&(E=`${this.whipURL}/publish/${this.participantID}`),E}getSubscribeEndpoint(E){let A="";return this.whipURL&&(A=`${this.whipURL}/subscribe/${E}`),A}assertTokenIsUnexpired(E,A,M,D){(!this.expirationTime||Date.now()/1e3>=this.expirationTime)&&this.analyticsTracker.trackErrorAndThrow(new ui(Object.assign(Object.assign({},Rt.EXPIRED_TOKEN),{action:en.JOIN,location:M,tag:A,token:this,traceId:E,remoteParticipantId:D,message:Rt.EXPIRED_TOKEN.message,details:`Token expired at ${this.expirationTime} and is no longer valid`})))}parseVersionFlags(E){if(!E)return;const A=E.split(".");A.length===2&&(this.versionFlags=parseInt(A[1],10))}shouldSendSilentAudio(){return this.versionFlags===void 0||(this.versionFlags&fm)!=0}}function yc(O,E){return new no(O,E)}class _m{constructor(E,A){this.throttleDuration=0,this.throttled=!1,this.timeout=0,this.unthrottle=()=>{this.trailing&&this.trailingFn&&this.trailingFn(...this.trailingFnArgs),this.clear()},this.throttleDuration=E,this.trailing=!(A&&A.skipTrailing)}invoke(E,...A){return this.throttled?(this.trailingFn=E,this.trailingFnArgs=A,!1):(this.throttled=!0,this.timeout=window.setTimeout(this.unthrottle,this.throttleDuration),E(...A),!0)}clear(){clearTimeout(this.timeout),this.timeout=0,this.throttled=!1,delete this.trailingFn,delete this.trailingFnArgs}}class Xu extends On{constructor(E,A,M,D,B,G,re,oe){super(on.SERVER_REQUEST,A,re,!0),Object.assign(this.properties,{action:E,http_method:D,remote_participant_id:G,request_uuid:B,url:M,transport:oe})}}const wo="draft-ietf-wish-whip-04";var Ir,dv=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};function Fh(O,E){return dv(this,void 0,void 0,function*(){O.validateStatus=M=>M>=200&&M<300||M===403;const A=yield gs()(O);if(A.status===403){if(A.data.code===2003)throw new qr.AxiosError("Request failed with status code 403","ERR_BAD_REQUEST",O,A.request,A);return O.url===A.request.responseURL?(O.validateStatus=M=>M>=200&&M<300,gs()(O)):(O.url=A.request.responseURL,E<5?Fh(O,E+1):(O.validateStatus=M=>M>=200&&M<300,gs()(O)))}return A})}function _l(O){return dv(this,void 0,void 0,function*(){return Fh(O,0)})}function bm(){}function O0(O){switch(O){case"new":return et.NEW;case"closed":return et.CLOSED;case"disconnected":return et.DISCONNECTED;case"failed":return et.FAILED;case"idle":return et.IDLE;case"checking":case"connecting":return et.CONNECTING;case"completed":case"connected":return et.CONNECTED;default:throw new Error(`unknown connecion state: ${O}`)}}function Uf(O,E,A){let M=document.createElement(E);const D=()=>{M&&(M.removeEventListener("loadeddata",B),M.removeEventListener("error",D),M.srcObject=null,M.src="",M=null)},B=()=>{D(),A(E)};return M.addEventListener("loadeddata",B),M.addEventListener("error",D),M.srcObject=O,D}class Bf extends On{constructor(E,A,M,D,B){super(on.TRACE,E,A,!1),Object.assign(this.properties,{action:D,message:M,remote_participant_id:B})}}class ta extends On{constructor(E,A,M,D,B){super(on.CONNECTION_STATE,A,M,!1),Object.assign(this.properties,{action:E,remote_participant_id:B,state:D})}}class Sm extends On{constructor(E,A,M,D,B){super(on.ICE_GATHERING_STATE,A,M,!1),Object.assign(this.properties,{action:E,remote_participant_id:B,state:D})}}(function(O){O.POST="post",O.CONNECTED="connected",O.ICE_GATHERING="icegathering",O.SDP_EXCHANGE="sdpExchange",O.SET_REMOTE_DESC="setRemoteDesc",O.PEER_CONNECTION="peerConnection"})(Ir||(Ir={}));const I0="start",_c="stop";class N0{constructor(E,A){this.marks={},this.optionsDuration=0,this.postDuration=0,this.timeToCandidate=0,this.timeToConnected=0,this.sdpExchangeDuration=0,this.sdpExchangeTransport="",this.setRemoteDescDuration=0,this.peerConnectionDuration=0,this.action=E,this.traceId=A}markActionStart(){this.markStart(Ir.CONNECTED)}markPostStart(){this.markStart(Ir.POST)}markPostStop(){this.markStop(Ir.POST),this.postDuration=this.measure(Ir.POST)}markIceGatheringStart(){this.markStart(Ir.ICE_GATHERING)}markIceGatheringStop(){this.markStop(Ir.ICE_GATHERING),this.timeToCandidate=this.measure(Ir.ICE_GATHERING)}markActionStop(){this.markStop(Ir.CONNECTED),this.timeToConnected=this.measure(Ir.CONNECTED),this.markStop(Ir.PEER_CONNECTION),this.peerConnectionDuration=this.measure(Ir.PEER_CONNECTION)}markSetRemoteDescStart(){this.markStart(Ir.SET_REMOTE_DESC)}markSetRemoteDescStop(){const E=Ir.SET_REMOTE_DESC;this.markStop(E),this.setRemoteDescDuration=this.measure(E),this.markStart(Ir.PEER_CONNECTION)}markSdpExchangeStart(){this.markStart(Ir.SDP_EXCHANGE)}markSdpExchangeStop(){const E=Ir.SDP_EXCHANGE;this.markStop(E),this.sdpExchangeDuration=this.measure(E)}setTransport(E){this.sdpExchangeTransport=E}markStart(E){this.marks[`${this.namespace}.${E}.${I0}`]=performance.now()}markStop(E){this.marks[`${this.namespace}.${E}.${_c}`]=performance.now()}measure(E){const A=`${this.namespace}.${E}.${I0}`,M=`${this.namespace}.${E}.${_c}`,D=this.marks[A],B=this.marks[M];return D===void 0||B===void 0?0:B-D}get namespace(){return`ivswb.peerclient.${this.action}.${this.traceId.value}`}getMeasurements(){const{optionsDuration:E,postDuration:A,timeToCandidate:M,timeToConnected:D,sdpExchangeDuration:B,sdpExchangeTransport:G,setRemoteDescDuration:re,peerConnectionDuration:oe}=this;return{optionsDuration:E,postDuration:A,timeToCandidate:M,timeToConnected:D,sdpExchangeDuration:B,sdpExchangeTransport:G,setRemoteDescDuration:re,peerConnectionDuration:oe}}resetMeasurements(E){this.traceId=E,this.marks={},this.optionsDuration=0,this.postDuration=0,this.timeToCandidate=0,this.timeToConnected=0,this.sdpExchangeDuration=0,this.sdpExchangeTransport="",this.setRemoteDescDuration=0,this.peerConnectionDuration=0}}var bc,ls,zl;(function(O){O.VIDEO="video",O.AUDIO="audio"})(bc||(bc={})),function(O){O.DEFAULT="default",O.LOW="low",O.MEDIUM="medium",O.HIGH="high"}(ls||(ls={})),function(O){O.LOWEST_QUALITY="lowest_quality",O.HIGHEST_QUALITY="highest_quality"}(zl||(zl={}));var Is=r(766);class dr{constructor(E){this.sdp=E}static splitLines(E){return E.trim().split(`
`).map(A=>A.trim())}static splitSections(E){return E.split(`
m=`).map((A,M)=>(M>0?`m=${A}`:A).trim()+dr.CRLF)}getUniqueRtpHeaderExtensionId(E){const A=[];for(const D of E)if(/^a=extmap:/.test(D.trim())){const B=+D.split("a=extmap:")[1].split(" ")[0];A.includes(B)||A.push(B)}A.sort((D,B)=>D-B);let M=0;for(const D of A){if(D-M>1)return M+1;M=D}return M===14?-1:M+1}withVideoLayersAllocationRtpHeaderExtension(E){const A="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00",M=E?E.getRtpHeaderExtensionId(A):-1,D=M===-1?this.getUniqueRtpHeaderExtensionId(dr.splitLines(this.sdp)):M,B=dr.splitSections(this.sdp),G=[];for(let oe of B){if(/^m=video/.test(oe)&&dr.getRtpHeaderExtensionIdInSection(oe,A)===-1){const J=dr.splitLines(oe),le=[];if(D===-1||this.hasRtpHeaderExtensionId(D)){G.push(oe);continue}for(const pe of J)if(le.push(pe),/^a=sendrecv/.test(pe.trim())){const ye=`a=extmap:${D} ${A}`;le.push(ye)}oe=le.join(dr.CRLF)+dr.CRLF}else if(M!==-1&&/^m=video/.test(oe)&&dr.getRtpHeaderExtensionIdInSection(oe,A)!==M){const J=dr.splitLines(oe),le=[];for(const pe of J){if(/^a=extmap:/.test(pe.trim())&&pe.split("a=extmap:")[1].split(" ")[1]===A){if(!this.hasRtpHeaderExtensionId(M)){const ye=`a=extmap:${M} ${A}`;le.push(ye)}continue}le.push(pe)}oe=le.join(dr.CRLF)+dr.CRLF}G.push(oe)}const re=G.join("");return new dr(re)}withOpusAudioConfig(E,A){const M=Is.Qc(this.sdp);for(const D of M.media)if(D.type==="audio"){const{payload:B}=D.rtp.find(J=>J.codec==="opus");if(!B)continue;let G=D.fmtp.find(J=>J.payload===B);G||(G={payload:B,config:""});const re=Is.rz(G.config);if(re.maxaveragebitrate=E,typeof A=="boolean"){const J=A?1:0;re["sprop-stereo"]=J,re.stereo=J}let oe="";for(const J of Object.keys(re))oe+=`${J}=${re[J]}; `;G.config=oe.trim()}return new dr(Is.cW(M))}static getRtpHeaderExtensionIdInSection(E,A){const M=dr.splitLines(E);for(const D of M)if(/^a=extmap:/.test(D.trim())){const B=D.split("a=extmap:")[1].split(" "),G=+B[0];if(B[1]===A)return G}return-1}getRtpHeaderExtensionId(E){const A=dr.splitSections(this.sdp);for(const M of A)if(/^m=video/.test(M)){const D=dr.getRtpHeaderExtensionIdInSection(M,E);if(D!==-1)return D}return-1}hasRtpHeaderExtensionId(E){const A=dr.splitLines(this.sdp);for(const M of A)if(/^a=extmap:/.test(M.trim())&&+M.split("a=extmap:")[1].split(" ")[0]===E)return!0;return!1}hasAudioNacksEnabled(){var E,A,M;return((M=(A=((E=Is.Qc(this.sdp).media.filter(D=>D.type==="audio")[0])!==null&&E!==void 0?E:{}).rtcpFb)===null||A===void 0?void 0:A.filter(D=>D.type==="nack"))!==null&&M!==void 0?M:[]).length>0}}dr.CRLF=`\r
`,dr.rfc7587LowestBitrate=6e3,dr.rfc7587HighestBitrate=51e4;const Ff=200,zf=2500,fv=10,Co=30,Em=12,ki=128,Tm={[ls.DEFAULT]:0,[ls.LOW]:50,[ls.MEDIUM]:150,[ls.HIGH]:250},fS={[ls.DEFAULT]:0,[ls.LOW]:100,[ls.MEDIUM]:200,[ls.HIGH]:300},P0=()=>({minBitrate:Ff,maxBitrate:zf,maxFramerate:Co,simulcast:{enabled:!1},maxAudioBitrateKbps:64,stereo:!1});var D0=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};const pS="H264",pv=O=>{const E=O==null?void 0:O.split("/");if((E==null?void 0:E.length)===2)return E[1]},Sc=(O,E)=>{const A=pv(O);if(O===void 0||A===void 0)return;const M={mimeSubtype:A};if(E){const D=(B=>{const G=B.split(";"),re=new Map;for(const oe of G){const[J,le]=oe.split("=");re.set(J,le)}return re})(E);switch(A){case pS:{const B=D.get("profile-level-id");B&&((G,re)=>{if(re.length<6)return;const oe=re.substring(0,4),J=parseInt(re.substring(4,6),16);G.profile=oe,G.level=J})(M,B);break}case"H265":((B,G)=>{const re=G.get("profile-id")||"0",oe=G.get("tier-flag")||"0",J=parseInt(G.get("level-id")||"0",10),le=[oe,re].join("_");B.profile=le,B.level=J})(M,D)}}return M},xm=(O,E)=>O.sort((A,M)=>{if(pv(A.mimeType)===pS){const D=Sc(A.mimeType,A.sdpFmtpLine);if((D==null?void 0:D.profile)===E)return-1}return 0}),nu=(O,E)=>{var A;const M=Sc(O.mimeType,O.sdpFmtpLine);return(M==null?void 0:M.mimeSubtype.toLowerCase())===E.mime.toLowerCase()&&((A=M==null?void 0:M.profile)===null||A===void 0?void 0:A.toLowerCase().indexOf(E.config.toLowerCase()))===0},wm=(O,E)=>E.filter(A=>!A.mimeType.endsWith("rtx")).filter(A=>A.mimeType.indexOf("packetization-mode=0")===-1).find(A=>O.reduce((M,D)=>M&&nu(A,D)===!1,!0));class Cm extends On{constructor(E,A,M,D,B,G,re,oe,J){var le,pe;super(on.PUBLISHED_VIDEO_STATS,E,A,!1),Object.assign(this.properties,Object.assign({action:en.PUBLISH,node:(le=M==null?void 0:M.node)!==null&&le!==void 0?le:"",cluster:(pe=M==null?void 0:M.cluster)!==null&&pe!==void 0?pe:""},((ye,Ie,Xe,qe,Oe,Te)=>{var rt,mt,jt,Tt,Dn,pn,Qn,gi,hi,si,ei,oi,di,ti,li,qn,un,In,Ei,Sr,jr,Er,Dr,Tr,sr,Bi,vr,xr,kr,vs,Ps;const Hr=(mt=(rt=ye==null?void 0:ye.qualityLimitationDurations)===null||rt===void 0?void 0:rt.cpu)!==null&&mt!==void 0?mt:0,ts=(Tt=(jt=ye==null?void 0:ye.qualityLimitationDurations)===null||jt===void 0?void 0:jt.bandwidth)!==null&&Tt!==void 0?Tt:0,Fi=Math.max((Dn=ye==null?void 0:ye.bytesSent)!==null&&Dn!==void 0?Dn:0,0),Gs=8*Fi/(Te??1),Ln=Math.max((pn=Ie==null?void 0:Ie.packetsLost)!==null&&pn!==void 0?pn:0,0),bi=Math.max((Qn=ye==null?void 0:ye.packetsSent)!==null&&Qn!==void 0?Qn:0,0),tr=Ln/Math.max(bi,1),aa=Sc(qe==null?void 0:qe.mimeType,qe==null?void 0:qe.sdpFmtpLine);return{active:!!(ye!=null&&ye.framesPerSecond)&&ye.framesPerSecond!==0,bytes_sent:Fi,codec_mime_type:aa==null?void 0:aa.mimeSubtype,codec_profile:aa==null?void 0:aa.profile,codec_level:aa==null?void 0:aa.level,configured_bitrate:Oe==null?void 0:Oe.max_bitrate,connection_bandwidth:(gi=Xe==null?void 0:Xe.availableOutgoingBitrate)!==null&&gi!==void 0?gi:0,encode_bitrate:Gs,encoder_implementation:(hi=ye==null?void 0:ye.encoderImplementation)!==null&&hi!==void 0?hi:"unknown",fir_count:(si=ye==null?void 0:ye.firCount)!==null&&si!==void 0?si:0,fraction_packets_lost:tr,frame_height:Math.max((ei=ye==null?void 0:ye.frameHeight)!==null&&ei!==void 0?ei:0,0),frame_width:Math.max((oi=ye==null?void 0:ye.frameWidth)!==null&&oi!==void 0?oi:0,0),frames_encoded:(di=ye==null?void 0:ye.framesEncoded)!==null&&di!==void 0?di:0,frames_per_second:Math.max((ti=ye==null?void 0:ye.framesPerSecond)!==null&&ti!==void 0?ti:0,0),frames_sent:(li=ye==null?void 0:ye.framesSent)!==null&&li!==void 0?li:0,header_bytes_sent:(qn=ye==null?void 0:ye.headerBytesSent)!==null&&qn!==void 0?qn:0,huge_frames_sent:(un=ye==null?void 0:ye.hugeFramesSent)!==null&&un!==void 0?un:0,key_frames_encoded:(In=ye==null?void 0:ye.keyFramesEncoded)!==null&&In!==void 0?In:0,nack_count:(Ei=ye==null?void 0:ye.nackCount)!==null&&Ei!==void 0?Ei:0,packets_lost:Ln,packets_sent:bi,power_efficient_encoder:(Sr=ye==null?void 0:ye.powerEfficientEncoder)!==null&&Sr!==void 0&&Sr,pli_count:(jr=ye==null?void 0:ye.pliCount)!==null&&jr!==void 0?jr:0,quality_limitation_reason:(Er=ye==null?void 0:ye.qualityLimitationReason)!==null&&Er!==void 0?Er:"none",quality_limitation_resolution_changes:(Dr=ye==null?void 0:ye.qualityLimitationResolutionChanges)!==null&&Dr!==void 0?Dr:0,quality_limitation_cpu_duration:Hr,quality_limitation_bandwidth_duration:ts,retransmitted_bytes_sent:(Tr=ye==null?void 0:ye.retransmittedBytesSent)!==null&&Tr!==void 0?Tr:0,retransmitted_packets_sent:(sr=ye==null?void 0:ye.retransmittedPacketsSent)!==null&&sr!==void 0?sr:0,rid:(Bi=ye==null?void 0:ye.rid)!==null&&Bi!==void 0?Bi:"no-rid",scalability_mode:(vr=ye==null?void 0:ye.scalabilityMode)!==null&&vr!==void 0?vr:"unknown",target_bitrate:Math.max((xr=ye==null?void 0:ye.targetBitrate)!==null&&xr!==void 0?xr:0,0),total_encode_time:(kr=ye==null?void 0:ye.totalEncodeTime)!==null&&kr!==void 0?kr:0,total_encoded_bytes_target:(vs=ye==null?void 0:ye.totalEncodedBytesTarget)!==null&&vs!==void 0?vs:0,total_packet_send_delay:(Ps=ye==null?void 0:ye.totalPacketSendDelay)!==null&&Ps!==void 0?Ps:0}})(D,B,G,re,oe,J)))}}class zh extends On{constructor(E,A,M,D,B,G,re,oe,J,le){var pe,ye,Ie,Xe;super(on.PUBLISHED_VIDEO_STATS_WINDOW,E,A,!1);const qe=Math.max(((pe=D==null?void 0:D.timestamp)!==null&&pe!==void 0?pe:0)-((ye=B==null?void 0:B.timestamp)!==null&&ye!==void 0?ye:0),0);Object.assign(this.properties,Object.assign({action:en.PUBLISH,node:(Ie=M==null?void 0:M.node)!==null&&Ie!==void 0?Ie:"",cluster:(Xe=M==null?void 0:M.cluster)!==null&&Xe!==void 0?Xe:"",window_size_ms:qe},((Oe,Te,rt,mt,jt,Tt,Dn,pn)=>{var Qn,gi,hi,si,ei,oi,di,ti,li,qn,un,In,Ei,Sr,jr,Er,Dr,Tr,sr,Bi,vr,xr,kr,vs,Ps,Hr,ts,Fi,Gs,Ln,bi,tr,aa,za,Mo,el,Lr,co,hu,Hl,qs,Sa,ja,uo,Gh,qh,$d,us,th,du,Ic,xl;const Hm=(gi=(Qn=Oe==null?void 0:Oe.qualityLimitationDurations)===null||Qn===void 0?void 0:Qn.cpu)!==null&&gi!==void 0?gi:0,Mv=(si=(hi=Te==null?void 0:Te.qualityLimitationDurations)===null||hi===void 0?void 0:hi.cpu)!==null&&si!==void 0?si:0,Vm=(oi=(ei=Oe==null?void 0:Oe.qualityLimitationDurations)===null||ei===void 0?void 0:ei.bandwidth)!==null&&oi!==void 0?oi:0,yr=(ti=(di=Te==null?void 0:Te.qualityLimitationDurations)===null||di===void 0?void 0:di.bandwidth)!==null&&ti!==void 0?ti:0,Gm=Math.max(((li=Oe==null?void 0:Oe.bytesSent)!==null&&li!==void 0?li:0)-((qn=Te==null?void 0:Te.bytesSent)!==null&&qn!==void 0?qn:0),0),fu=8*Gm/(typeof pn!="number"?1:pn/1e3),b=Math.max(((un=rt==null?void 0:rt.packetsLost)!==null&&un!==void 0?un:0)-((In=mt==null?void 0:mt.packetsLost)!==null&&In!==void 0?In:0),0),w=Math.max(((Ei=Oe==null?void 0:Oe.packetsSent)!==null&&Ei!==void 0?Ei:0)-((Sr=Te==null?void 0:Te.packetsSent)!==null&&Sr!==void 0?Sr:0),0),F=b/Math.max(w,1),ne=Sc(Tt==null?void 0:Tt.mimeType,Tt==null?void 0:Tt.sdpFmtpLine);return{active:!!(Oe!=null&&Oe.framesPerSecond)&&(Oe==null?void 0:Oe.framesPerSecond)!==0,bytes_sent:Gm,codec_mime_type:ne==null?void 0:ne.mimeSubtype,codec_profile:ne==null?void 0:ne.profile,codec_level:ne==null?void 0:ne.level,configured_bitrate:Dn==null?void 0:Dn.max_bitrate,connection_bandwidth:(jr=jt==null?void 0:jt.availableOutgoingBitrate)!==null&&jr!==void 0?jr:0,encode_bitrate:fu,encoder_implementation:(Er=Oe==null?void 0:Oe.encoderImplementation)!==null&&Er!==void 0?Er:"unknown",fir_count:Math.max(((Dr=Oe==null?void 0:Oe.firCount)!==null&&Dr!==void 0?Dr:0)-((Tr=Te==null?void 0:Te.firCount)!==null&&Tr!==void 0?Tr:0),0),fraction_packets_lost:F,frame_height:Math.max((sr=Oe==null?void 0:Oe.frameHeight)!==null&&sr!==void 0?sr:0,0),frame_width:Math.max((Bi=Oe==null?void 0:Oe.frameWidth)!==null&&Bi!==void 0?Bi:0,0),frames_encoded:Math.max(((vr=Oe==null?void 0:Oe.framesEncoded)!==null&&vr!==void 0?vr:0)-((xr=Te==null?void 0:Te.framesEncoded)!==null&&xr!==void 0?xr:0),0),frames_per_second:Math.max((kr=Oe==null?void 0:Oe.framesPerSecond)!==null&&kr!==void 0?kr:0,0),frames_sent:Math.max(((vs=Oe==null?void 0:Oe.framesSent)!==null&&vs!==void 0?vs:0)-((Ps=Te==null?void 0:Te.framesSent)!==null&&Ps!==void 0?Ps:0),0),header_bytes_sent:Math.max(((Hr=Oe==null?void 0:Oe.headerBytesSent)!==null&&Hr!==void 0?Hr:0)-((ts=Te==null?void 0:Te.headerBytesSent)!==null&&ts!==void 0?ts:0),0),huge_frames_sent:Math.max(((Fi=Oe==null?void 0:Oe.hugeFramesSent)!==null&&Fi!==void 0?Fi:0)-((Gs=Te==null?void 0:Te.hugeFramesSent)!==null&&Gs!==void 0?Gs:0),0),key_frames_encoded:Math.max(((Ln=Oe==null?void 0:Oe.keyFramesEncoded)!==null&&Ln!==void 0?Ln:0)-((bi=Te==null?void 0:Te.keyFramesEncoded)!==null&&bi!==void 0?bi:0),0),nack_count:Math.max(((tr=Oe==null?void 0:Oe.nackCount)!==null&&tr!==void 0?tr:0)-((aa=Te==null?void 0:Te.nackCount)!==null&&aa!==void 0?aa:0),0),packets_lost:b,packets_sent:w,power_efficient_encoder:(za=Oe==null?void 0:Oe.powerEfficientEncoder)!==null&&za!==void 0&&za,pli_count:Math.max(((Mo=Oe==null?void 0:Oe.pliCount)!==null&&Mo!==void 0?Mo:0)-((el=Te==null?void 0:Te.pliCount)!==null&&el!==void 0?el:0),0),quality_limitation_reason:(Lr=Oe==null?void 0:Oe.qualityLimitationReason)!==null&&Lr!==void 0?Lr:"none",quality_limitation_resolution_changes:Math.max(((co=Oe==null?void 0:Oe.qualityLimitationResolutionChanges)!==null&&co!==void 0?co:0)-((hu=Te==null?void 0:Te.qualityLimitationResolutionChanges)!==null&&hu!==void 0?hu:0),0),quality_limitation_cpu_duration:Math.max(Hm-Mv,0),quality_limitation_bandwidth_duration:Math.max(Vm-yr,0),retransmitted_bytes_sent:Math.max(((Hl=Oe==null?void 0:Oe.retransmittedBytesSent)!==null&&Hl!==void 0?Hl:0)-((qs=Te==null?void 0:Te.retransmittedBytesSent)!==null&&qs!==void 0?qs:0),0),rid:(Sa=Oe==null?void 0:Oe.rid)!==null&&Sa!==void 0?Sa:"no-rid",retransmitted_packets_sent:Math.max(((ja=Oe==null?void 0:Oe.retransmittedPacketsSent)!==null&&ja!==void 0?ja:0)-((uo=Te==null?void 0:Te.retransmittedPacketsSent)!==null&&uo!==void 0?uo:0),0),scalability_mode:(Gh=Oe==null?void 0:Oe.scalabilityMode)!==null&&Gh!==void 0?Gh:"unknown",target_bitrate:Math.max((qh=Oe==null?void 0:Oe.targetBitrate)!==null&&qh!==void 0?qh:0,0),total_encode_time:Math.max((($d=Oe==null?void 0:Oe.totalEncodeTime)!==null&&$d!==void 0?$d:0)-((us=Te==null?void 0:Te.totalEncodeTime)!==null&&us!==void 0?us:0),0),total_encoded_bytes_target:Math.max(((th=Oe==null?void 0:Oe.totalEncodedBytesTarget)!==null&&th!==void 0?th:0)-((du=Te==null?void 0:Te.totalEncodedBytesTarget)!==null&&du!==void 0?du:0),0),total_packet_send_delay:Math.max(((Ic=Oe==null?void 0:Oe.totalPacketSendDelay)!==null&&Ic!==void 0?Ic:0)-((xl=Te==null?void 0:Te.totalPacketSendDelay)!==null&&xl!==void 0?xl:0),0)}})(D,B,G,re,oe,J,le,qe)))}}class k0 extends On{constructor(E,A,M,D,B,G,re,oe,J,le){var pe,ye;super(on.PUBLISHED_AUDIO_STATS,E,A,!1),Object.assign(this.properties,Object.assign({action:en.PUBLISH,node:(pe=M==null?void 0:M.node)!==null&&pe!==void 0?pe:"",cluster:(ye=M==null?void 0:M.cluster)!==null&&ye!==void 0?ye:""},((Ie,Xe,qe,Oe,Te,rt,mt)=>{var jt,Tt,Dn,pn,Qn,gi,hi,si,ei,oi,di;const ti=Math.max((jt=Ie==null?void 0:Ie.bytesSent)!==null&&jt!==void 0?jt:0,0),li=8*ti/(rt??1),qn=Math.max((Tt=Xe==null?void 0:Xe.packetsLost)!==null&&Tt!==void 0?Tt:0,0),un=Math.max((Dn=Ie==null?void 0:Ie.packetsSent)!==null&&Dn!==void 0?Dn:0,0),In=qn/Math.max(un,1),Ei=Sc(Oe==null?void 0:Oe.mimeType,Oe==null?void 0:Oe.sdpFmtpLine);return{audio_nacks_enabled:(pn=mt==null?void 0:mt.audioNacks)!==null&&pn!==void 0&&pn,bytes_sent:ti,codec_mime_type:Ei==null?void 0:Ei.mimeSubtype,configured_bitrate:(Qn=Te==null?void 0:Te.max_audio_bitrate_bps)!==null&&Qn!==void 0?Qn:0,connection_bandwidth:(gi=qe==null?void 0:qe.availableOutgoingBitrate)!==null&&gi!==void 0?gi:0,encode_bitrate:li,fraction_packets_lost:In,header_bytes_sent:(hi=Ie==null?void 0:Ie.headerBytesSent)!==null&&hi!==void 0?hi:0,nack_count:(si=Ie==null?void 0:Ie.nackCount)!==null&&si!==void 0?si:0,packets_lost:qn,packets_sent:un,retransmitted_bytes_sent:(ei=Ie==null?void 0:Ie.retransmittedBytesSent)!==null&&ei!==void 0?ei:0,retransmitted_packets_sent:(oi=Ie==null?void 0:Ie.retransmittedPacketsSent)!==null&&oi!==void 0?oi:0,target_bitrate:(di=Ie==null?void 0:Ie.targetBitrate)!==null&&di!==void 0?di:0}})(D,B,G,re,oe,J,le)))}}class Am extends On{constructor(E,A,M,D,B,G,re,oe,J,le,pe){var ye,Ie,Xe,qe;super(on.PUBLISHED_AUDIO_STATS_WINDOW,E,A,!1);const Oe=Math.max(((ye=D==null?void 0:D.timestamp)!==null&&ye!==void 0?ye:0)-((Ie=B==null?void 0:B.timestamp)!==null&&Ie!==void 0?Ie:0),0);Object.assign(this.properties,Object.assign({action:en.PUBLISH,node:(Xe=M==null?void 0:M.node)!==null&&Xe!==void 0?Xe:"",cluster:(qe=M==null?void 0:M.cluster)!==null&&qe!==void 0?qe:"",window_size_ms:Oe},((Te,rt,mt,jt,Tt,Dn,pn,Qn,gi)=>{var hi,si,ei,oi,di,ti,li,qn,un,In,Ei,Sr,jr,Er,Dr,Tr,sr,Bi,vr,xr;const kr=Math.max(((hi=Te==null?void 0:Te.bytesSent)!==null&&hi!==void 0?hi:0)-((si=rt==null?void 0:rt.bytesSent)!==null&&si!==void 0?si:0),0),vs=8*kr/(typeof Qn!="number"?1:Qn/1e3),Ps=Math.max(((ei=mt==null?void 0:mt.packetsLost)!==null&&ei!==void 0?ei:0)-((oi=jt==null?void 0:jt.packetsLost)!==null&&oi!==void 0?oi:0),0),Hr=Math.max(((di=Te==null?void 0:Te.packetsSent)!==null&&di!==void 0?di:0)-((ti=rt==null?void 0:rt.packetsSent)!==null&&ti!==void 0?ti:0),0),ts=Ps/Math.max(Hr,1),Fi=Sc(Dn==null?void 0:Dn.mimeType,Dn==null?void 0:Dn.sdpFmtpLine);return{audio_nacks_enabled:(li=gi==null?void 0:gi.audioNacks)!==null&&li!==void 0&&li,bytes_sent:kr,codec_mime_type:Fi==null?void 0:Fi.mimeSubtype,configured_bitrate:(qn=pn==null?void 0:pn.max_audio_bitrate_bps)!==null&&qn!==void 0?qn:0,connection_bandwidth:(un=Tt==null?void 0:Tt.availableOutgoingBitrate)!==null&&un!==void 0?un:0,encode_bitrate:vs,fraction_packets_lost:ts,header_bytes_sent:Math.max(((In=Te==null?void 0:Te.headerBytesSent)!==null&&In!==void 0?In:0)-((Ei=rt==null?void 0:rt.headerBytesSent)!==null&&Ei!==void 0?Ei:0),0),nack_count:Math.max(((Sr=Te==null?void 0:Te.nackCount)!==null&&Sr!==void 0?Sr:0)-((jr=rt==null?void 0:rt.nackCount)!==null&&jr!==void 0?jr:0),0),packets_lost:Ps,packets_sent:Math.max(((Er=Te==null?void 0:Te.packetsSent)!==null&&Er!==void 0?Er:0)-((Dr=rt==null?void 0:rt.packetsSent)!==null&&Dr!==void 0?Dr:0),0),retransmitted_bytes_sent:Math.max(((Tr=Te==null?void 0:Te.retransmittedBytesSent)!==null&&Tr!==void 0?Tr:0)-((sr=rt==null?void 0:rt.retransmittedBytesSent)!==null&&sr!==void 0?sr:0),0),retransmitted_packets_sent:Math.max(((Bi=Te==null?void 0:Te.retransmittedPacketsSent)!==null&&Bi!==void 0?Bi:0)-((vr=rt==null?void 0:rt.retransmittedPacketsSent)!==null&&vr!==void 0?vr:0),0),target_bitrate:Math.max((xr=Te==null?void 0:Te.targetBitrate)!==null&&xr!==void 0?xr:0,0)}})(D,B,G,re,oe,J,le,Oe,pe)))}}class mv extends On{constructor(E,A,M,D,B,G,re,oe){var J,le;super(on.SUBSCRIBED_VIDEO_STATS,E,A,!1),Object.assign(this.properties,Object.assign({action:en.SUBSCRIBE,node:(J=D==null?void 0:D.node)!==null&&J!==void 0?J:"",cluster:(le=D==null?void 0:D.cluster)!==null&&le!==void 0?le:"",remote_participant_id:M},((pe,ye,Ie,Xe)=>{var qe,Oe,Te,rt,mt,jt,Tt,Dn,pn,Qn,gi,hi,si,ei,oi,di,ti,li,qn,un,In,Ei,Sr;let jr=0;pe!=null&&pe.jitterBufferDelay&&(pe!=null&&pe.jitterBufferEmittedCount)&&pe.jitterBufferEmittedCount>0&&(jr=pe.jitterBufferDelay/pe.jitterBufferEmittedCount);const Er=Xe??1,Dr=Math.max((qe=pe==null?void 0:pe.bytesReceived)!==null&&qe!==void 0?qe:0,0),Tr=8*Dr/Er;let sr=0;pe!=null&&pe.totalDecodeTime&&(pe!=null&&pe.framesDecoded)&&(sr=pe.totalDecodeTime/Math.max(pe==null?void 0:pe.framesDecoded,1));const Bi=Math.max((Oe=pe==null?void 0:pe.packetsLost)!==null&&Oe!==void 0?Oe:0,0),vr=Math.max((Te=pe==null?void 0:pe.packetsReceived)!==null&&Te!==void 0?Te:0,0),xr=Bi/Math.max(vr+Bi,1),kr=Sc(Ie==null?void 0:Ie.mimeType,Ie==null?void 0:Ie.sdpFmtpLine);return{bytes_received:Dr,codec_mime_type:kr==null?void 0:kr.mimeSubtype,codec_profile:kr==null?void 0:kr.profile,codec_level:kr==null?void 0:kr.level,connection_bandwidth:(rt=ye==null?void 0:ye.availableIncomingBitrate)!==null&&rt!==void 0?rt:0,decode_bitrate:Tr,decoder_implementation:(mt=pe==null?void 0:pe.decoderImplementation)!==null&&mt!==void 0?mt:"unknown",fir_count:Math.max((jt=pe==null?void 0:pe.firCount)!==null&&jt!==void 0?jt:0,0),fraction_packets_lost:xr,frame_decode_time_avg:sr,frame_height:Math.max((Tt=pe==null?void 0:pe.frameHeight)!==null&&Tt!==void 0?Tt:0,0),frame_width:Math.max((Dn=pe==null?void 0:pe.frameWidth)!==null&&Dn!==void 0?Dn:0,0),frames_decoded:Math.max((pn=pe==null?void 0:pe.framesDecoded)!==null&&pn!==void 0?pn:0,0),frames_dropped:Math.max((Qn=pe==null?void 0:pe.framesDropped)!==null&&Qn!==void 0?Qn:0,0),frames_received:Math.max((gi=pe==null?void 0:pe.framesReceived)!==null&&gi!==void 0?gi:0,0),freeze_count:Math.max((hi=pe==null?void 0:pe.freezeCount)!==null&&hi!==void 0?hi:0,0),frames_rendered:Math.max((si=pe==null?void 0:pe.framesRendered)!==null&&si!==void 0?si:0,0),frames_per_second:Math.max((ei=pe==null?void 0:pe.framesPerSecond)!==null&&ei!==void 0?ei:0,0),header_bytes_received:Math.max((oi=pe==null?void 0:pe.headerBytesReceived)!==null&&oi!==void 0?oi:0,0),jitter_buffer_delay_avg:jr,key_frames_decoded:Math.max((di=pe==null?void 0:pe.keyFramesDecoded)!==null&&di!==void 0?di:0,0),nack_count:Math.max((ti=pe==null?void 0:pe.nackCount)!==null&&ti!==void 0?ti:0,0),packets_discarded:Math.max((li=pe==null?void 0:pe.packetsDiscarded)!==null&&li!==void 0?li:0,0),packets_lost:Bi,packets_received:vr,pause_count:Math.max((qn=pe==null?void 0:pe.pauseCount)!==null&&qn!==void 0?qn:0,0),pli_count:Math.max((un=pe==null?void 0:pe.pliCount)!==null&&un!==void 0?un:0,0),power_efficient_decoder:(In=pe==null?void 0:pe.powerEfficientDecoder)!==null&&In!==void 0&&In,total_freezes_duration:Math.max((Ei=pe==null?void 0:pe.totalFreezesDuration)!==null&&Ei!==void 0?Ei:0,0),total_pauses_duration:Math.max((Sr=pe==null?void 0:pe.totalPausesDuration)!==null&&Sr!==void 0?Sr:0,0)}})(B,G,re,oe)))}}class L0 extends On{constructor(E,A,M,D,B,G,re,oe,J,le,pe){var ye,Ie,Xe,qe;super(on.SUBSCRIBED_VIDEO_STATS_WINDOW,E,A,!1);const Oe=Math.max(((ye=B==null?void 0:B.timestamp)!==null&&ye!==void 0?ye:0)-((Ie=G==null?void 0:G.timestamp)!==null&&Ie!==void 0?Ie:0),0);Object.assign(this.properties,Object.assign({action:en.SUBSCRIBE,node:(Xe=D==null?void 0:D.node)!==null&&Xe!==void 0?Xe:"",cluster:(qe=D==null?void 0:D.cluster)!==null&&qe!==void 0?qe:"",window_size_ms:Oe,remote_participant_id:M},((Te,rt,mt,jt,Tt,Dn,pn,Qn)=>{var gi,hi,si,ei,oi,di,ti,li,qn,un,In,Ei,Sr,jr,Er,Dr,Tr,sr,Bi,vr,xr,kr,vs,Ps,Hr,ts,Fi,Gs,Ln,bi,tr,aa,za,Mo,el,Lr,co,hu,Hl,qs,Sa,ja,uo;let Gh=0,qh=0;if(Te!=null&&Te.jitterBufferEmittedCount&&(rt!=null&&rt.jitterBufferEmittedCount)&&Te.jitterBufferEmittedCount>rt.jitterBufferEmittedCount){Te!=null&&Te.jitterBufferDelay&&(rt!=null&&rt.jitterBufferDelay)&&(Gh=(Te.jitterBufferDelay-rt.jitterBufferDelay)/(Te.jitterBufferEmittedCount-rt.jitterBufferEmittedCount));const fu=rt==null?void 0:rt.jitterBufferMinimumDelay,b=Te==null?void 0:Te.jitterBufferMinimumDelay;fu&&b&&(qh=(b-fu)/(Te.jitterBufferEmittedCount-rt.jitterBufferEmittedCount))}const $d=Math.max(((gi=Te==null?void 0:Te.bytesReceived)!==null&&gi!==void 0?gi:0)-((hi=rt==null?void 0:rt.bytesReceived)!==null&&hi!==void 0?hi:0),0),us=typeof Tt!="number"?1:Tt/1e3,th=8*$d/us,du=Math.max(((si=Te==null?void 0:Te.totalDecodeTime)!==null&&si!==void 0?si:0)-((ei=rt==null?void 0:rt.totalDecodeTime)!==null&&ei!==void 0?ei:0),0),Ic=Math.max(((oi=Te==null?void 0:Te.framesDecoded)!==null&&oi!==void 0?oi:0)-((di=rt==null?void 0:rt.framesDecoded)!==null&&di!==void 0?di:0),0),xl=du/Math.max(Ic,1),Hm=Math.max(((ti=Te==null?void 0:Te.packetsLost)!==null&&ti!==void 0?ti:0)-((li=rt==null?void 0:rt.packetsLost)!==null&&li!==void 0?li:0),0),Mv=Math.max(((qn=Te==null?void 0:Te.packetsReceived)!==null&&qn!==void 0?qn:0)-((un=rt==null?void 0:rt.packetsReceived)!==null&&un!==void 0?un:0),0),Vm=Hm/Math.max(Mv+Hm,1),yr=Sc(jt==null?void 0:jt.mimeType,jt==null?void 0:jt.sdpFmtpLine),Gm=8*(Qn||0)/us;return{bytes_received:$d,codec_mime_type:yr==null?void 0:yr.mimeSubtype,codec_profile:yr==null?void 0:yr.profile,codec_level:yr==null?void 0:yr.level,connection_bandwidth:(In=mt==null?void 0:mt.availableIncomingBitrate)!==null&&In!==void 0?In:0,decode_bitrate:th,decoder_implementation:(Ei=Te==null?void 0:Te.decoderImplementation)!==null&&Ei!==void 0?Ei:"unknown",fir_count:Math.max(((Sr=Te==null?void 0:Te.firCount)!==null&&Sr!==void 0?Sr:0)-((jr=rt==null?void 0:rt.firCount)!==null&&jr!==void 0?jr:0),0),fraction_packets_lost:Vm,frame_decode_time_avg:xl,frame_height:Math.max((Er=Te==null?void 0:Te.frameHeight)!==null&&Er!==void 0?Er:0,0),frame_width:Math.max((Dr=Te==null?void 0:Te.frameWidth)!==null&&Dr!==void 0?Dr:0,0),frames_decoded:Math.max(((Tr=Te==null?void 0:Te.framesDecoded)!==null&&Tr!==void 0?Tr:0)-((sr=rt==null?void 0:rt.framesDecoded)!==null&&sr!==void 0?sr:0),0),frames_dropped:Math.max(((Bi=Te==null?void 0:Te.framesDropped)!==null&&Bi!==void 0?Bi:0)-((vr=rt==null?void 0:rt.framesDropped)!==null&&vr!==void 0?vr:0),0),frames_received:Math.max(((xr=Te==null?void 0:Te.framesReceived)!==null&&xr!==void 0?xr:0)-((kr=rt==null?void 0:rt.framesReceived)!==null&&kr!==void 0?kr:0),0),freeze_count:Math.max(((vs=Te==null?void 0:Te.freezeCount)!==null&&vs!==void 0?vs:0)-((Ps=rt==null?void 0:rt.freezeCount)!==null&&Ps!==void 0?Ps:0),0),frames_rendered:Math.max((Hr=Te==null?void 0:Te.framesRendered)!==null&&Hr!==void 0?Hr:0,0),frames_per_second:Math.max((ts=Te==null?void 0:Te.framesPerSecond)!==null&&ts!==void 0?ts:0,0),header_bytes_received:Math.max(((Fi=Te==null?void 0:Te.headerBytesReceived)!==null&&Fi!==void 0?Fi:0)-((Gs=rt==null?void 0:rt.headerBytesReceived)!==null&&Gs!==void 0?Gs:0),0),configured_jitter_buffer_min_delay_ms:Dn??0,jitter_buffer_min_obtainable_delay:qh,jitter_buffer_delay_avg:Gh,key_frames_decoded:Math.max(((Ln=Te==null?void 0:Te.keyFramesDecoded)!==null&&Ln!==void 0?Ln:0)-((bi=rt==null?void 0:rt.keyFramesDecoded)!==null&&bi!==void 0?bi:0),0),nack_count:Math.max(((tr=Te==null?void 0:Te.nackCount)!==null&&tr!==void 0?tr:0)-((aa=rt==null?void 0:rt.nackCount)!==null&&aa!==void 0?aa:0),0),packets_discarded:Math.max(((za=Te==null?void 0:Te.packetsDiscarded)!==null&&za!==void 0?za:0)-((Mo=rt==null?void 0:rt.packetsDiscarded)!==null&&Mo!==void 0?Mo:0),0),packets_lost:Hm,packets_received:Mv,pause_count:Math.max(((el=Te==null?void 0:Te.pauseCount)!==null&&el!==void 0?el:0)-((Lr=rt==null?void 0:rt.pauseCount)!==null&&Lr!==void 0?Lr:0),0),pli_count:Math.max(((co=Te==null?void 0:Te.pliCount)!==null&&co!==void 0?co:0)-((hu=rt==null?void 0:rt.pliCount)!==null&&hu!==void 0?hu:0),0),power_efficient_decoder:(Hl=Te==null?void 0:Te.powerEfficientDecoder)!==null&&Hl!==void 0&&Hl,total_freezes_duration:Math.max(((qs=Te==null?void 0:Te.totalFreezesDuration)!==null&&qs!==void 0?qs:0)-((Sa=rt==null?void 0:rt.totalFreezesDuration)!==null&&Sa!==void 0?Sa:0),0),total_pauses_duration:Math.max(((ja=Te==null?void 0:Te.totalPausesDuration)!==null&&ja!==void 0?ja:0)-((uo=rt==null?void 0:rt.totalPausesDuration)!==null&&uo!==void 0?uo:0),0),sei_read_count:pn,sei_bytes_received:Qn,sei_bitrate:Gm}})(B,G,re,oe,Oe,J,le,pe)))}}class gv extends On{constructor(E,A,M,D,B,G,re,oe,J){var le,pe;super(on.SUBSCRIBED_AUDIO_STATS,E,A,!1),Object.assign(this.properties,Object.assign({action:en.SUBSCRIBE,node:(le=D==null?void 0:D.node)!==null&&le!==void 0?le:"",cluster:(pe=D==null?void 0:D.cluster)!==null&&pe!==void 0?pe:"",remote_participant_id:M},((ye,Ie,Xe,qe,Oe)=>{var Te,rt,mt,jt,Tt,Dn,pn,Qn,gi,hi,si,ei,oi,di,ti,li,qn;let un=0;ye!=null&&ye.jitterBufferDelay&&(ye!=null&&ye.jitterBufferEmittedCount)&&ye.jitterBufferEmittedCount>0&&(un=ye.jitterBufferDelay/ye.jitterBufferEmittedCount);const In=qe??1,Ei=Math.max((Te=ye==null?void 0:ye.bytesReceived)!==null&&Te!==void 0?Te:0,0),Sr=8*Ei/In,jr=Math.max((rt=ye==null?void 0:ye.packetsLost)!==null&&rt!==void 0?rt:0,0),Er=Math.max((mt=ye==null?void 0:ye.packetsReceived)!==null&&mt!==void 0?mt:0,0),Dr=jr/Math.max(Er+jr,1),Tr=Math.max((jt=ye==null?void 0:ye.concealedSamples)!==null&&jt!==void 0?jt:0,0),sr=Math.max((Tt=ye==null?void 0:ye.totalSamplesReceived)!==null&&Tt!==void 0?Tt:0,0),Bi=Tr/Math.max(sr,1),vr=Sc(Xe==null?void 0:Xe.mimeType,Xe==null?void 0:Xe.sdpFmtpLine);return{audio_level:(Dn=ye==null?void 0:ye.audioLevel)!==null&&Dn!==void 0?Dn:0,audio_nacks_enabled:(pn=Oe==null?void 0:Oe.audioNacks)!==null&&pn!==void 0&&pn,bytes_received:Ei,codec_mime_type:vr==null?void 0:vr.mimeSubtype,connection_bandwidth:(Qn=Ie==null?void 0:Ie.availableIncomingBitrate)!==null&&Qn!==void 0?Qn:0,concealed_samples:Tr,concealment_events:Math.max((gi=ye==null?void 0:ye.concealmentEvents)!==null&&gi!==void 0?gi:0,0),silent_concealed_samples:Math.max((hi=ye==null?void 0:ye.silentConcealedSamples)!==null&&hi!==void 0?hi:0,0),decode_bitrate:Sr,fraction_audio_concealed:Bi,fraction_packets_lost:Dr,header_bytes_received:Math.max((si=ye==null?void 0:ye.headerBytesReceived)!==null&&si!==void 0?si:0,0),inserted_samples_for_deceleration:Math.max((ei=ye==null?void 0:ye.insertedSamplesForDeceleration)!==null&&ei!==void 0?ei:0,0),jitter_buffer_delay_avg:un,packets_discarded:Math.max((oi=ye==null?void 0:ye.packetsDiscarded)!==null&&oi!==void 0?oi:0,0),retransmitted_packets_received:Math.max((di=ye==null?void 0:ye.retransmittedPacketsReceived)!==null&&di!==void 0?di:0,0),retransmitted_bytes_received:Math.max((ti=ye==null?void 0:ye.retransmittedBytesReceived)!==null&&ti!==void 0?ti:0,0),packets_lost:jr,packets_received:Er,nack_count:Math.max((li=ye==null?void 0:ye.nackCount)!==null&&li!==void 0?li:0,0),removed_samples_for_acceleration:Math.max((qn=ye==null?void 0:ye.removedSamplesForAcceleration)!==null&&qn!==void 0?qn:0,0),total_samples_received:sr}})(B,G,re,oe,J)))}}class Si extends On{constructor(E,A,M,D,B,G,re,oe,J,le){var pe,ye,Ie,Xe;super(on.SUBSCRIBED_AUDIO_STATS_WINDOW,E,A,!1);const qe=Math.max(((pe=B==null?void 0:B.timestamp)!==null&&pe!==void 0?pe:0)-((ye=G==null?void 0:G.timestamp)!==null&&ye!==void 0?ye:0),0);Object.assign(this.properties,Object.assign({action:en.SUBSCRIBE,window_size_ms:qe,node:(Ie=D==null?void 0:D.node)!==null&&Ie!==void 0?Ie:"",cluster:(Xe=D==null?void 0:D.cluster)!==null&&Xe!==void 0?Xe:"",remote_participant_id:M},((Oe,Te,rt,mt,jt,Tt,Dn)=>{var pn,Qn,gi,hi,si,ei,oi,di,ti,li,qn,un,In,Ei,Sr,jr,Er,Dr,Tr,sr,Bi,vr,xr,kr,vs,Ps,Hr,ts,Fi,Gs,Ln;let bi=0,tr=0;if(Oe!=null&&Oe.jitterBufferEmittedCount&&(Te!=null&&Te.jitterBufferEmittedCount)&&Oe.jitterBufferEmittedCount>Te.jitterBufferEmittedCount){Oe!=null&&Oe.jitterBufferDelay&&(Te!=null&&Te.jitterBufferDelay)&&(bi=(Oe.jitterBufferDelay-Te.jitterBufferDelay)/(Oe.jitterBufferEmittedCount-Te.jitterBufferEmittedCount));const ja=Te==null?void 0:Te.jitterBufferMinimumDelay,uo=Oe==null?void 0:Oe.jitterBufferMinimumDelay;ja&&uo&&(tr=(uo-ja)/(Oe.jitterBufferEmittedCount-Te.jitterBufferEmittedCount))}const aa=typeof jt!="number"?1:jt/1e3,za=Math.max(((pn=Oe==null?void 0:Oe.bytesReceived)!==null&&pn!==void 0?pn:0)-((Qn=Te==null?void 0:Te.bytesReceived)!==null&&Qn!==void 0?Qn:0),0),Mo=8*za/aa,el=Math.max(((gi=Oe==null?void 0:Oe.packetsLost)!==null&&gi!==void 0?gi:0)-((hi=Te==null?void 0:Te.packetsLost)!==null&&hi!==void 0?hi:0),0),Lr=Math.max(((si=Oe==null?void 0:Oe.packetsReceived)!==null&&si!==void 0?si:0)-((ei=Te==null?void 0:Te.packetsReceived)!==null&&ei!==void 0?ei:0),0),co=el/Math.max(Lr+el,1),hu=Math.max(((oi=Oe==null?void 0:Oe.concealedSamples)!==null&&oi!==void 0?oi:0)-((di=Te==null?void 0:Te.concealedSamples)!==null&&di!==void 0?di:0),0),Hl=Math.max(((ti=Oe==null?void 0:Oe.totalSamplesReceived)!==null&&ti!==void 0?ti:0)-((li=Te==null?void 0:Te.totalSamplesReceived)!==null&&li!==void 0?li:0),0),qs=hu/Math.max(Hl,1),Sa=Sc(mt==null?void 0:mt.mimeType,mt==null?void 0:mt.sdpFmtpLine);return{audio_level:(qn=Oe==null?void 0:Oe.audioLevel)!==null&&qn!==void 0?qn:0,audio_nacks_enabled:(un=Tt==null?void 0:Tt.audioNacks)!==null&&un!==void 0&&un,bytes_received:za,codec_mime_type:Sa==null?void 0:Sa.mimeSubtype,connection_bandwidth:(In=rt==null?void 0:rt.availableIncomingBitrate)!==null&&In!==void 0?In:0,decode_bitrate:Mo,concealed_samples:hu,concealment_events:Math.max(((Ei=Oe==null?void 0:Oe.concealmentEvents)!==null&&Ei!==void 0?Ei:0)-((Sr=Te==null?void 0:Te.concealmentEvents)!==null&&Sr!==void 0?Sr:0),0),silent_concealed_samples:Math.max(((jr=Oe==null?void 0:Oe.silentConcealedSamples)!==null&&jr!==void 0?jr:0)-((Er=Te==null?void 0:Te.silentConcealedSamples)!==null&&Er!==void 0?Er:0),0),fraction_audio_concealed:qs,fraction_packets_lost:co,header_bytes_received:Math.max(((Dr=Oe==null?void 0:Oe.headerBytesReceived)!==null&&Dr!==void 0?Dr:0)-((Tr=Te==null?void 0:Te.headerBytesReceived)!==null&&Tr!==void 0?Tr:0),0),inserted_samples_for_deceleration:Math.max(((sr=Oe==null?void 0:Oe.insertedSamplesForDeceleration)!==null&&sr!==void 0?sr:0)-((Bi=Te==null?void 0:Te.insertedSamplesForDeceleration)!==null&&Bi!==void 0?Bi:0),0),configured_jitter_buffer_min_delay_ms:Dn??0,jitter_buffer_min_obtainable_delay:tr,jitter_buffer_delay_avg:bi,packets_discarded:Math.max(((vr=Oe==null?void 0:Oe.packetsDiscarded)!==null&&vr!==void 0?vr:0)-((xr=Te==null?void 0:Te.packetsDiscarded)!==null&&xr!==void 0?xr:0),0),packets_lost:el,packets_received:Lr,nack_count:Math.max(((kr=Oe==null?void 0:Oe.nackCount)!==null&&kr!==void 0?kr:0)-((vs=Te==null?void 0:Te.nackCount)!==null&&vs!==void 0?vs:0),0),removed_samples_for_acceleration:Math.max(((Ps=Oe==null?void 0:Oe.removedSamplesForAcceleration)!==null&&Ps!==void 0?Ps:0)-((Hr=Te==null?void 0:Te.removedSamplesForAcceleration)!==null&&Hr!==void 0?Hr:0),0),retransmitted_packets_received:Math.max(((ts=Oe==null?void 0:Oe.retransmittedPacketsReceived)!==null&&ts!==void 0?ts:0)-((Fi=Te==null?void 0:Te.retransmittedPacketsReceived)!==null&&Fi!==void 0?Fi:0),0),retransmitted_bytes_received:Math.max(((Gs=Oe==null?void 0:Oe.retransmittedBytesReceived)!==null&&Gs!==void 0?Gs:0)-((Ln=Te==null?void 0:Te.retransmittedBytesReceived)!==null&&Ln!==void 0?Ln:0),0),total_samples_received:Hl}})(B,G,re,oe,qe,J,le)))}}class Mm extends On{constructor(E,A,M,D,B=en.PUBLISH,G=!1,re=""){super(on.SIMULCAST_LAYER_INFO,E,A,!1),Object.assign(this.properties,{rid:M,active:D,selected:G,source:B===en.PUBLISH?"publisher":"subscriber",remote_participant_id:re})}}class mS extends On{constructor(E,A,M,D){super(on.MULTIHOST_CONFIGURATION,E,A,!1),Object.assign(this.properties,Object.assign(Object.assign({},M),{action:D}))}}class jf extends On{constructor(E,A,M){super(on.MULTIHOST_SUBSCRIBE_CONFIGURATION,E,A,!1),Object.assign(this.properties,Object.assign({},M))}}var Ku,_i,Ld;(function(O){O.Mobile="mobile",O.Tablet="tablet",O.Desktop="desktop",O.Tv="tv"})(Ku||(Ku={})),function(O){O.IOS="iOS",O.MacOS="macOS",O.Windows="Windows",O.Android="Android"}(_i||(_i={})),function(O){O.Safari="Safari",O.Firefox="Firefox",O.Chrome="Chrome",O.IE="Internet Explorer",O.Edge="Microsoft Edge"}(Ld||(Ld={}));const Nr=function(O){const E=iu(O);return{platform:{isMobile:Ud(Ku.Mobile,E),isTablet:Ud(Ku.Tablet,E),isDesktop:Ud(Ku.Desktop,E),isTv:Ud(Ku.Tv,E)},os:{name:Bd(E),version:Hf(E),isIOS:ru(_i.IOS,E),isMacOS:ru(_i.MacOS,E),isWindows:ru(_i.Windows,E),isAndroid:ru(_i.Android,E)},browser:{name:su(E),version:Jo(E),isSafari:Fd(Ld.Safari,E),isFirefox:Fd(Ld.Firefox,E),isChrome:Fd(Ld.Chrome,E),isIE:Fd(Ld.IE,E),isEdge:Fd(Ld.Edge,E)}}}(window.navigator.userAgent);function iu(O){try{return os.getParser(O||window.navigator.userAgent)}catch{}}function Ud(O,E){return()=>(E||(E=iu()),!(!E||E.getPlatformType(!0)!==O.toLowerCase()))}function Hf(O){return()=>(O||(O=iu()),O&&O.getOSVersion()||"")}function Bd(O){return()=>(O||(O=iu()),O&&O.getOSName()||"")}function ru(O,E){return()=>(E||(E=iu()),!(!E||E.getOSName(!0)!==O.toLowerCase()))}function Jo(O){return()=>(O||(O=iu()),O&&O.getBrowserVersion()||"")}function su(O){return()=>(O||(O=iu()),O&&O.getBrowserName()||"")}function Fd(O,E){return()=>(E||(E=iu()),!(!E||E.getBrowserName().toLowerCase()!==O.toLowerCase()))}const U0={active:!1,maxBitrate:2e5,rid:"low",maxFramerate:15,scaleResolutionDownBy:4},Ec={width:320,height:180},Vf={active:!1,maxBitrate:7e5,rid:"mid",maxFramerate:20,scaleResolutionDownBy:2},Rm={width:640,height:360},zd={active:!1,maxBitrate:17e5,rid:"hi",maxFramerate:30,scaleResolutionDownBy:1},Om={width:1280,height:720};function Tc(O){const{config:E}=O;return[{maxBitrate:E.maxBitrateBps}]}function au(O,E){var A,M;const D=E==null?void 0:E.track,B=E==null?void 0:E.config;if(O&&D){const G=(0,Rs.cloneDeep)([{encodingParams:U0,targetResolution:Ec},{encodingParams:Vf,targetResolution:Rm},{encodingParams:zd,targetResolution:Om}]),{height:re,width:oe}=D.getSettings(),J=re&&oe?{width:oe,height:re}:void 0;for(const ye of G){ye.encodingParams.active=!0;let Ie=1;J&&(Ie=Math.floor(Math.sqrt(J.width*J.height/(ye.targetResolution.width*ye.targetResolution.height))),Ie=Math.max(Ie,1)),ye.encodingParams.scaleResolutionDownBy=Ie}let le=(A=B==null?void 0:B.maxBitrateBps)!==null&&A!==void 0?A:zd.maxBitrate;const pe=(M=B==null?void 0:B.maxFramerate)!==null&&M!==void 0?M:zd.maxFramerate;return le<Vf.maxBitrate&&(le=zd.maxBitrate),G[2].encodingParams.maxBitrate=le,G[2].encodingParams.maxFramerate=pe,G[2].encodingParams.scaleResolutionDownBy=1,G.map(ye=>ye.encodingParams)}return B?[{maxBitrate:B.maxBitrateBps,maxFramerate:B.maxFramerate}]:[{maxBitrate:ga(zf),maxFramerate:Co}]}const Xx=1e3;function ga(O){return O*Xx}const B0=(O,...E)=>{const A=E.map(M=>typeof M!="object").filter(Boolean).length>0;if(typeof O=="object"&&!A)return(0,Rs.merge)({},O,...E)},Jn=O=>Gf(O),Gf=O=>(0,Rs.cloneDeep)(O),vv=O=>{switch(O){case zl.HIGHEST_QUALITY:return"highest";case zl.LOWEST_QUALITY:default:return"lowest"}};var jd=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};const Zu="no-rid";class Im{constructor(E,A,M,D,B,G){this.analyticsTracker=B,this.receiveVideoTransformer=G,this.simulcastEnabled=!1,this.simulcastState={low:!1,mid:!1,hi:!1},this.sdp=new dr(""),this.sdpFeatures={audioNacks:!1},this.multihostConfiguration=Im.defaultMultihostConfiguration(),this.prevOutboundVideoStats=new Map,this.prevInboundVideoStats=new Map,this.prevRemoteInboundStats=new Map,this.sfuResource={node:"",cluster:""},this.connectionStartedTimestamp=Date.now(),this.prevVideoReceiverTransformerStats={seiReadCnt:0,seiBytesRead:0},this.onPeerConnectionStateChange=()=>{switch(this.getConnectionState()){case et.CONNECTED:this.connectionStartedTimestamp=Date.now(),this.setupIntervals();break;case et.FAILED:this.flushStats()}},this.action=E,this.token=A,this.traceId=M,this.identifier=D}static defaultMultihostConfiguration(){return{video_codec:"unknown",width:0,height:0,max_bitrate:0,min_bitrate:0,target_fps:0,echo_cancellation:!1,auto_gain:!1,noise_suppression:!1,enable_simulcast:!1,max_audio_bitrate_bps:ga(ki)}}set sdpAnswer(E){try{this.sdp=new dr(E),this.sdpFeatures.audioNacks=this.sdp.hasAudioNacksEnabled()}catch{}}start(E,A=!1){this.peerConnection=E,this.simulcastEnabled=A,this.prevOutboundAudioStats=void 0,this.prevOutboundVideoStats=new Map,this.prevRemoteInboundStats=new Map,this.peerConnection.addEventListener("connectionstatechange",this.onPeerConnectionStateChange)}stop(){var E;clearInterval(this.uploadStatsInterval),this.uploadStatsInterval=void 0,(E=this.peerConnection)===null||E===void 0||E.removeEventListener("connectionstatechange",this.onPeerConnectionStateChange)}updateSfuResource(E){this.sfuResource=E}updateMultihostConfiguration(E,A){var M,D,B,G,re,oe;return jd(this,void 0,void 0,function*(){if(this.action!==en.PUBLISH||!this.peerConnection)return;const J=Im.defaultMultihostConfiguration();if(A){const le=this.peerConnection.getSenders().filter(ye=>ye.track!==null&&ye.track.kind==="video");le.length>0&&(yield le[0].getStats()).forEach(ye=>{ye.type==="codec"&&(J.video_codec=ye.mimeType)});const pe=A.track.getSettings();J.width=(M=pe.width)!==null&&M!==void 0?M:0,J.height=(D=pe.height)!==null&&D!==void 0?D:0,J.target_fps=(B=pe.frameRate)!==null&&B!==void 0?B:0,A.config?(J.max_bitrate=A.config.maxBitrateBps,J.min_bitrate=A.config.minBitrateBps,J.enable_simulcast=A.config.simulcastEnabled):(J.max_bitrate=ga(zf),J.min_bitrate=ga(Ff),J.enable_simulcast=!1)}if(E){const le=E.track.getSettings();J.auto_gain=(G=le.autoGainControl)!==null&&G!==void 0&&G,J.echo_cancellation=(re=le.echoCancellation)!==null&&re!==void 0&&re,J.noise_suppression=(oe=le.noiseSuppression)!==null&&oe!==void 0&&oe,J.max_audio_bitrate_bps=E.config.maxBitrateBps,J.stereo=E.config.stereo}(0,Rs.isEqual)(J,this.multihostConfiguration)||(this.analyticsTracker.trackEventNoSharedProps(new mS(this.token,this.traceId,J,this.action)),this.multihostConfiguration=J)})}updateJitterBufferMinDelay(E){this.jitterBufferMinDelayInMs=E}setupIntervals(){this.action===en.PUBLISH&&this.simulcastEnabled&&!this.pollSimulcastLayerInterval&&(this.pollSimulcastLayers(),this.pollSimulcastLayerInterval=this.startInterval(this.pollSimulcastLayers,5e3)),this.uploadStatsInterval||(this.uploadStats(),this.uploadStatsInterval=this.startInterval(this.uploadStats,1e4))}startInterval(E,A){return setInterval(E.bind(this),A)}getConnectionState(){var E;if(!this.peerConnection)return et.NONE;const A=(E=this.peerConnection.connectionState)!==null&&E!==void 0?E:this.peerConnection.iceConnectionState;try{return O0(A)}catch{return et.IDLE}}pollSimulcastLayers(){var E;return jd(this,void 0,void 0,function*(){if(this.getConnectionState()===et.CONNECTED){const A=yield(E=this.peerConnection)===null||E===void 0?void 0:E.getStats();if(!A)return;A.forEach(M=>{var D;if(M.type==="outbound-rtp"){const B=((D=M.framesPerSecond)!==null&&D!==void 0?D:0)!==0;switch(M.rid){case"low":B!==this.simulcastState.low&&(this.simulcastState.low=B,this.analyticsTracker.trackEventNoSharedProps(new Mm(this.token,this.traceId,M.rid,B)));break;case"mid":B!==this.simulcastState.mid&&(this.simulcastState.mid=B,this.analyticsTracker.trackEventNoSharedProps(new Mm(this.token,this.traceId,M.rid,B)));break;case"hi":B!==this.simulcastState.hi&&(this.simulcastState.hi=B,this.analyticsTracker.trackEventNoSharedProps(new Mm(this.token,this.traceId,M.rid,B)))}}})}})}flushStats(){var E;return jd(this,void 0,void 0,function*(){const A=yield(E=this.peerConnection)===null||E===void 0?void 0:E.getStats();A&&(this.action===en.PUBLISH?this.uploadPublisherStats(A):this.action===en.SUBSCRIBE&&this.uploadSubscriberStats(A))})}uploadStats(){var E;return jd(this,void 0,void 0,function*(){if(this.getConnectionState()===et.CONNECTED){const A=yield(E=this.peerConnection)===null||E===void 0?void 0:E.getStats();if(!A)return;this.action===en.PUBLISH?this.uploadPublisherStats(A):this.action===en.SUBSCRIBE&&this.uploadSubscriberStats(A)}})}uploadPublisherStats(E){const A={audio:{},video:[]},M=new Map,D=(Date.now()-this.connectionStartedTimestamp)/1e3,B=Object.assign({},this.multihostConfiguration);E.forEach(G=>{if(G.type==="outbound-rtp"){const re=E.get(G.remoteId),oe=this.prevRemoteInboundStats.get(G.remoteId);switch(re&&this.prevRemoteInboundStats.set(re.id,re),G.kind){case"audio":A.audio=this.updateOutboundAudio(G),A.audio.remoteInbound=re,A.audio.prevRemoteInbound=oe,A.audio.codec=M.get(G.codecId);break;case"video":A.video.push(Object.assign({},this.updateOutboundVideo(G),{remoteInbound:re,prevRemoteInbound:oe,codec:M.get(G.codecId)}))}}G.type==="candidate-pair"&&G.nominated&&(A.candidatePair=G),G.type==="codec"&&M.set(G.id,G)}),this.analyticsTracker.trackEventNoSharedProps(new k0(this.token,this.traceId,this.sfuResource,A.audio.outbound,A.audio.remoteInbound,A.candidatePair,A.audio.codec,B,D,this.sdpFeatures)),A.audio.prevOutbound&&this.analyticsTracker.trackEventNoSharedProps(new Am(this.token,this.traceId,this.sfuResource,A.audio.outbound,A.audio.prevOutbound,A.audio.remoteInbound,A.audio.prevRemoteInbound,A.candidatePair,A.audio.codec,B,this.sdpFeatures)),A.video.forEach(G=>{this.analyticsTracker.trackEventNoSharedProps(new Cm(this.token,this.traceId,this.sfuResource,G.outbound,G.remoteInbound,A.candidatePair,G.codec,B,D)),G.prevOutbound&&this.analyticsTracker.trackEventNoSharedProps(new zh(this.token,this.traceId,this.sfuResource,G.outbound,G.prevOutbound,G.remoteInbound,G.prevRemoteInbound,A.candidatePair,G.codec,B))})}uploadSubscriberStats(E){var A;const M={audio:{},video:{}},D=new Map,B=(Date.now()-this.connectionStartedTimestamp)/1e3,G=(A=this.jitterBufferMinDelayInMs)!==null&&A!==void 0?A:0,{seiReadCnt:re,seiBytesRead:oe}=this.updateAndDiffSinceLastUpdate(this.receiveVideoTransformer.getReceiverStats());E.forEach(J=>{if(J.type==="inbound-rtp")switch(J.kind){case"audio":M.audio=this.updateInboundAudio(J),M.audio.codec=D.get(J.codecId);break;case"video":M.video=this.updateInboundVideo(J),M.video.codec=D.get(J.codecId)}J.type==="candidate-pair"&&J.nominated&&(M.candidatePair=J),J.type==="codec"&&D.set(J.id,J)}),this.analyticsTracker.trackEventNoSharedProps(new gv(this.token,this.traceId,this.identifier,this.sfuResource,M.audio.inbound,M.candidatePair,M.audio.codec,B,this.sdpFeatures)),M.audio.prevInbound&&this.analyticsTracker.trackEventNoSharedProps(new Si(this.token,this.traceId,this.identifier,this.sfuResource,M.audio.inbound,M.audio.prevInbound,M.candidatePair,M.audio.codec,this.sdpFeatures,G)),this.analyticsTracker.trackEventNoSharedProps(new mv(this.token,this.traceId,this.identifier,this.sfuResource,M.video.inbound,M.candidatePair,M.video.codec,B)),M.video.prevInbound&&this.analyticsTracker.trackEventNoSharedProps(new L0(this.token,this.traceId,this.identifier,this.sfuResource,M.video.inbound,M.video.prevInbound,M.candidatePair,M.video.codec,G,re,oe))}updateAndDiffSinceLastUpdate(E){const A=this.prevVideoReceiverTransformerStats,M=E.seiReadCnt-A.seiReadCnt,D=E.seiBytesRead-A.seiBytesRead;return this.prevVideoReceiverTransformerStats={seiReadCnt:E.seiReadCnt,seiBytesRead:E.seiBytesRead},{seiReadCnt:M,seiBytesRead:D}}updateOutboundAudio(E){const A=E,M=this.prevOutboundAudioStats,D=E.id===(M==null?void 0:M.id)?M:void 0;return this.prevOutboundAudioStats=E,{outbound:A,prevOutbound:D}}updateInboundAudio(E){const A=E,M=this.prevInboundAudioStats,D=E.id===(M==null?void 0:M.id)?M:void 0;return this.prevInboundAudioStats=E,{inbound:A,prevInbound:D}}updateInboundVideo(E){const A=E,M=this.prevInboundVideoStats.get(Zu),D=E.id===(M==null?void 0:M.id)?M:void 0;return this.prevInboundVideoStats.set(Zu,E),{inbound:A,prevInbound:D}}updateOutboundVideo(E){const A=E,M=this.getPrevOutboundVideo(E),D=E.id===(M==null?void 0:M.id)?M:void 0;return this.setPrevVideoStat(E),{outbound:A,prevOutbound:D}}getPrevOutboundVideo(E){return this.simulcastEnabled&&E.rid&&this.prevOutboundVideoStats.has(E.rid)?this.prevOutboundVideoStats.get(E.rid):!this.simulcastEnabled&&this.prevOutboundVideoStats.has(Zu)?this.prevOutboundVideoStats.get(Zu):void 0}setPrevVideoStat(E){this.simulcastEnabled&&E.rid?this.prevOutboundVideoStats.set(E.rid,E):this.simulcastEnabled||this.prevOutboundVideoStats.set(Zu,E)}}class Ao extends On{constructor(E,A,M,D,B){super(on.MINUTE,E,A,!1),Object.assign(this.properties,{action:D?en.PUBLISH:en.SUBSCRIBE,is_publishing:D,minutes_logged:M,subscribed_number:B})}}class xc extends On{constructor(E){super(on.PUBLISH,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.PUBLISH,remote_participant_id:E.token.participantID})}}class jh extends On{constructor(E){super(on.UNPUBLISH,E.token,E.traceId,!0),Object.assign(this.properties,{action:en.PUBLISH,remote_participant_id:E.token.participantID})}}class qf extends On{constructor(E){var A,M,D,B;super(on.SUBSCRIBE,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.SUBSCRIBE,remote_participant_id:E.subscribedId,subscribed_id:E.subscribedId,is_edp_connected:E.isEdpConnected,is_reassignment:E.isReassignment,node:(M=(A=E.preAttemptSfuResource)===null||A===void 0?void 0:A.node)!==null&&M!==void 0?M:"",cluster:(B=(D=E.preAttemptSfuResource)===null||D===void 0?void 0:D.cluster)!==null&&B!==void 0?B:""})}}class gS extends On{constructor(E){super(on.UNSUBSCRIBE,E.token,E.traceId,!0),Object.assign(this.properties,{action:en.SUBSCRIBE,remote_participant_id:E.unsubscribedId,unsubscribed_id:E.unsubscribedId})}}class vS extends On{constructor(E){var A,M,D,B;super(on.PUBLISH_STARTED,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.PUBLISH,options_duration:E.optionsDuration,post_duration:E.postDuration,remote_participant_id:E.token.participantID,time_to_candidate:E.timeToCandidate,total_duration:E.totalDuration,edp_initial_connect_duration:E.edpInitialConnectDuration,edp_initial_connect_retry_times:E.edpInitialConnectRetries,edp_initial_state_duration:E.edpInitialStateDuration,edp_state_update_count:E.edpStateUpdateCount,sdp_exchange_duration:E.sdpExchangeDuration,sdp_exchange_transport:E.sdpExchangeTransport,set_remote_desc_duration:E.setRemoteDescDuration,peer_connection_duration:E.peerConnectionDuration,node:(M=(A=E.sfuResource)===null||A===void 0?void 0:A.node)!==null&&M!==void 0?M:"",cluster:(B=(D=E.sfuResource)===null||D===void 0?void 0:D.cluster)!==null&&B!==void 0?B:"",publish_retry_times:E.publishRetries,total_duration_with_retries:E.totalDurationWithRetries})}}class yS extends On{constructor(E){super(on.PUBLISH_FAILED,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.PUBLISH,code:E.code,message:E.message,fatal:E.fatal,nominal:E.nominal})}}class Hd extends On{constructor(E){super(on.PUBLISH_ENDED,E.token,E.traceId,!0),Object.assign(this.properties,{action:en.PUBLISH,remote_participant_id:E.token.participantID,unpublish_successful:E.isUnpublishSuccessful,reason:E.reason})}}class Vd extends On{constructor(E){var A,M,D,B;super(on.SUBSCRIBE_STARTED,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.SUBSCRIBE,options_duration:E.optionsDuration,post_duration:E.postDuration,remote_participant_id:E.remoteParticipantId,time_to_candidate:E.timeToCandidate,total_duration:E.totalDuration,edp_initial_connect_duration:E.edpInitialConnectDuration,edp_initial_connect_retry_times:E.edpInitialConnectRetries,edp_initial_state_duration:E.edpInitialStateDuration,edp_initial_state_publishing_count:E.edpInitialStatePublishingCount,edp_state_update_count:E.edpStateUpdateCount,sdp_exchange_duration:E.sdpExchangeDuration,sdp_exchange_transport:E.sdpExchangeTransport,set_remote_desc_duration:E.setRemoteDescDuration,peer_connection_duration:E.peerConnectionDuration,node:(M=(A=E.sfuResource)===null||A===void 0?void 0:A.node)!==null&&M!==void 0?M:"",cluster:(B=(D=E.sfuResource)===null||D===void 0?void 0:D.cluster)!==null&&B!==void 0?B:"",total_duration_with_retries:E.totalDurationWithRetries,subscribe_retry_times:E.subscribeRetryTimes,is_reassignment:E.isReassignment})}}class F0 extends On{constructor(E){super(on.SUBSCRIBE_FAILED,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.SUBSCRIBE,remote_participant_id:E.remoteParticipantId,code:E.code,message:E.message,fatal:E.fatal,nominal:E.nominal,is_reassignment:E.isReassignment})}}class $f extends On{constructor(E){super(on.SUBSCRIBE_ENDED,E.token,E.traceId,!0),Object.assign(this.properties,{action:en.SUBSCRIBE,remote_participant_id:E.remoteParticipantId,unsubscribe_successful:E.isUnsubscribeSuccessful,reason:E.reason}),this.critical=!0}}class Nm extends On{constructor(E){super(on.STATE_UPDATED,E.token,E.traceId,!1),Object.assign(this.properties,{audio_muted:E.isAudioMuted,is_disconnected:E.isDisconnected,is_publishing:E.isPublishing,other_participant_id:E.otherParticipantId,other_participant_user_id:E.otherParticipantUserId,video_stopped:E.isVideoStopped})}}class _S extends On{constructor(E){var A,M,D,B,G;super(on.FIRST_FRAME,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.SUBSCRIBE,remote_participant_id:E.remoteParticipantId,edp_initial_connect_duration:E.edpInitialConnectDuration,edp_initial_connect_retry_times:E.edpInitialConnectRetries,edp_initial_state_duration:E.edpInitialStateDuration,edp_initial_state_publishing_count:E.edpInitialStatePublishingCount,edp_state_update_count:E.edpStateUpdateCount,sdp_exchange_duration:E.sdpExchangeDuration,sdp_exchange_transport:E.sdpExchangeTransport,set_remote_desc_duration:E.setRemoteDescDuration,peer_connection_duration:E.peerConnectionDuration,node:(M=(A=E.sfuResource)===null||A===void 0?void 0:A.node)!==null&&M!==void 0?M:"",cluster:(B=(D=E.sfuResource)===null||D===void 0?void 0:D.cluster)!==null&&B!==void 0?B:"",video_was_paused:E.videoWasPaused,first_frame_duration:E.firstFrameDuration,total_duration_with_retries:E.totalDurationWithRetries,subscribe_retry_times:E.subscribeRetryTimes,media_type:E.mediaType,configured_jitter_buffer_min_delay_ms:(G=E.currentJitterBufferMinDelayInMs)!==null&&G!==void 0?G:0})}}class yv extends On{constructor(E){super(on.EDP_PONG,E.token,E.traceId,!1),Object.assign(this.properties,{event_endpoint:E.eventEndpoint,protocol:E.protocol,edp_rtt:E.edpRttMs})}}class Pm extends On{constructor(E){super(on.JOIN,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.JOIN,event_endpoint:E.eventEndpoint,whip_endpoint:E.whipEndpoint})}}class jl extends On{constructor(E){super(on.JOIN_ATTEMPT,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.JOIN,event_endpoint:E.eventEndpoint,whip_endpoint:E.whipEndpoint})}}class Ua extends On{constructor(E){super(on.JOIN_ATTEMPT_FAILED,E.token,E.traceId,!1),Object.assign(this.properties,{action:en.JOIN,event_endpoint:E.eventEndpoint,whip_endpoint:E.whipEndpoint,code:E.code,message:E.message,fatal:E.fatal,nominal:E.nominal,connect_retry_times:E.retryCnt})}}class wc extends On{constructor(E){super(on.EDP_DISCONNECTED,E.token,E.traceId,!1),Object.assign(this.properties,{event_endpoint:E.eventEndpoint,protocol:E.protocol}),this.critical=!0}}class bl extends On{constructor(E){super(on.EDP_CONNECTED,E.token,E.traceId,!1),Object.assign(this.properties,{event_endpoint:E.eventEndpoint,protocol:E.protocol,connect_retry_times:E.numRetries}),this.critical=!0}}var Dm;(function(O){O.MESSAGE="message",O.RESPONSE="response"})(Dm||(Dm={}));class Kx{constructor(E,A,M){this.token=E,this.analyticsTracker=M,this.protocol="",this.connecting=!1,this.closing=!1,this.windowUnloading=!1,this.latestPingTimestamp=0,this.pongCount=0,this.latestSequenceNumber=0,this.nextConnectionAttempt=0,this.pingInterval=0,this.pongTimeout=0,this.connectTimeout=0,this.beforeUnload=()=>{this.emitter.emit(vc,"beforeunload"),this.windowUnloading=!0},this.sendSdpOffer=(D,B,G,re,oe,J,le,pe)=>{var ye;const Ie={type:"aws:ivs:SDP_OFFER",payload:{whipUrl:B,requestId:re,traceId:G,platform:"web",sdk:"1.19.0",whipVersion:wo,content:D,contentType:"application/sdp"}};oe&&(Ie.payload.forceNode=oe),J&&(Ie.payload.assignmentToken=J),le&&(Ie.payload.multiCodec=le);const Xe=rm()===void 0,qe=rm()||Xe;pe&&qe&&(Ie.payload.initialLayerPref=vv(pe)),(ye=this.socket)===null||ye===void 0||ye.send(JSON.stringify(Ie))},this.getRetryCount=()=>Math.max(this.connectionAttempts-1,0),this.trackJoinEnded=()=>{this.analyticsTracker.trackEventNoSharedProps(new wc({token:this.token,eventEndpoint:this.token.eventsURL,traceId:this.traceId,protocol:this.protocol}))},this.logger=new pa(A,me.SOCKET),this.emitter=new fa.EventEmitter,this.connectionAttempts=0,this.sentPing=!1,this.receivedPong=!1,this.traceId=So(),this.id=`[${js().value}] `,window.addEventListener("beforeunload",this.beforeUnload)}connect(E,A,M=!1){this.logger.debug({msg:`${this.id}connecting to ${this.addr}`}),this.addr=E,this.traceId=A,M&&!this.connecting&&(window.clearTimeout(this.connectTimeout),this.connectTimeout=window.setTimeout(this.connectTimedOut.bind(this),1e4)),this.attemptConnect(A)}attemptConnect(E){this.traceId=E||So(),this.connectionAttempts++,this.trackJoinAttempt(this.connectionAttempts);const{topic:A,rawToken:M}=this.token;this.connecting=!0,this.closing=!1;try{const D=encodeURIComponent(this.traceId.value);this.socket=this.createWebSocket(`${this.addr}?topic=${A}/publishers&traceid=${D}`,M),this.socket.onmessage=this.onMessage.bind(this),this.socket.onerror=this.onError.bind(this),this.socket.onclose=this.onClose.bind(this),this.socket.onopen=this.onOpen.bind(this),this.protocol=this.socket.protocol}catch(D){const B=D instanceof Error?D.message:void 0,G=this.createError(Rt.EVENT_PLANE_WS_CREATE_FAILED,B);this.trackJoinFailed(G,this.getRetryCount()),this.emitter.emit(Fl,G)}}send(E){var A;this.logger.debug({msg:`${this.id}sending ${JSON.stringify(E)}`}),this.isReady()?(A=this.socket)===null||A===void 0||A.send(JSON.stringify(E)):this.logger.warn({msg:"Trying to send data over stage socket that is not ready"})}close(){this.logger.debug({msg:`${this.id}closing`});const E=this.connecting,A=this.socket&&this.socket.readyState===this.socket.OPEN,M=this.socket&&this.socket.readyState===this.socket.CLOSING,D=this.getRetryCount();if(this.closing=!0,this.connecting=!1,this.cleanPingPongTimeouts(),window.clearTimeout(this.nextConnectionAttempt),window.clearTimeout(this.connectTimeout),this.connectionAttempts=0,this.connectTimeout=0,this.socket){if(this.socket.close(),this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.onopen=null,A)this.trackJoinEnded(),this.emitter.emit(vc,"intentional-close");else if(E&&!M){const B=this.createError(Rt.OPERATION_ABORTED);this.trackJoinFailed(B,D),this.analyticsTracker.trackError(B),this.emitter.emit(Fl,B)}}}removeAllListeners(){window.removeEventListener("beforeunload",this.beforeUnload),this.emitter.removeAllListeners()}createWebSocket(E,A){return new WebSocket(E,A)}createError(E,A){return new ui(Object.assign({action:en.JOIN,traceId:this.traceId,token:this.token,location:"StageSocket.connection",tag:Eo.JOIN_RELATED,details:A},E))}on(E,A){this.emitter.on(E,A)}off(E,A){this.emitter.off(E,A)}isReady(){return this.logger.debug({msg:`${this.id}isReady called`}),!!this.socket&&this.socket.readyState===this.socket.OPEN}onMessage(E){this.logger.debug({msg:`${this.id}received message: ${E.data}`});try{const A=JSON.parse(E.data);switch(A.type){case"STAGE_STATE":case"aws:ivs:STAGE_STATE":{const M=A.payload.sequenceNumber;M>this.latestSequenceNumber&&(this.latestSequenceNumber===0&&im()&&this.connectTimeout>0&&this.triggerSocketOpen(A),this.emitter.emit(hv,A),this.latestSequenceNumber=M);break}case"PONG":this.receivedPong=!0,this.pongCount%2==0&&this.analyticsTracker.trackEventNoSharedProps(new yv({token:this.token,eventEndpoint:this.token.eventsURL,protocol:this.protocol,traceId:this.traceId,edpRttMs:performance.now()-this.latestPingTimestamp})),this.pongCount++;break;case"REFRESH":this.emitter.emit(uv);break;case"aws:ivs:SDP_ANSWER":this.emitter.emit(vm,A.payload);break;case"aws:ivs:DISCONNECT":this.emitter.emit(ym,A.payload);break;case"aws:ivs:REASSIGN":this.emitter.emit(Bh,A.payload);break;case"aws:ivs:INCOMPATIBLE_CODECS":this.emitter.emit(La,A.payload);break;default:(0,Rs.noop)()}}catch(A){this.logger.debug({msg:`onMessage JSON Parse error: ${A}`}),this.emitter.emit(xo,A)}}onError(E){this.logger.debug({msg:`${this.id}error: ${JSON.stringify(E)}`})}onClose(E){if(this.logger.debug({msg:`${this.id}onClose triggered with code (closing = ${this.closing}, connecting = ${this.connecting})`}),this.cleanPingPongTimeouts(),this.closing)this.closing=!1;else if(!this.windowUnloading)if(this.connecting){let A=Math.pow(2,this.connectionAttempts-1);A>64&&(A=64),this.logger.debug({msg:`${this.id}reconnecting in ${A} seconds`}),window.clearTimeout(this.nextConnectionAttempt),this.nextConnectionAttempt=window.setTimeout(this.attemptConnect.bind(this),1e3*A);const M=this.createError(Rt.EVENT_PLANE_WS_CLOSE_BEFORE_OPEN,`code: ${E==null?void 0:E.code}, reason: ${E==null?void 0:E.reason}, wasClean: ${E==null?void 0:E.wasClean}`);this.trackJoinFailed(M,this.getRetryCount()),this.analyticsTracker.trackError(M)}else{this.logger.debug({msg:`${this.id}unexpected close`}),this.emitter.emit(vc,"unknown");const A=this.createError(Rt.EVENT_PLANE_WS_UNEXPECTED_CLOSE,`code: ${E==null?void 0:E.code}, reason: ${E==null?void 0:E.reason}, wasClean: ${E==null?void 0:E.wasClean}`);this.trackJoinEnded(),this.emitter.emit(Fl,A)}}onOpen(){this.logger.debug({msg:`${this.id} socket opened`}),this.clearConnectionAttemptTimeouts(),im()?this.connectTimeout=window.setTimeout(()=>{this.triggerSocketOpen()},1e4):this.triggerSocketOpen()}clearConnectionAttemptTimeouts(){window.clearTimeout(this.nextConnectionAttempt),window.clearTimeout(this.connectTimeout),this.nextConnectionAttempt=0,this.connectTimeout=0}triggerSocketOpen(E){this.clearConnectionAttemptTimeouts();const A=this.getRetryCount();this.connectionAttempts=0,this.connecting=!1,this.trackJoinStarted(),this.emitter.emit(Zo,{retryCnt:A,traceId:this.traceId,initialStageState:E}),this.pingInterval=window.setInterval(this.ping.bind(this),3e4)}ping(){var E;this.logger.debug({msg:`${this.id}sending PING`});try{this.latestPingTimestamp=performance.now(),(E=this.socket)===null||E===void 0||E.send(JSON.stringify({type:"PING"})),this.sentPing=!0,this.receivedPong=!1,this.pongTimeout&&clearTimeout(this.pongTimeout),this.pongTimeout=window.setTimeout(this.pongTimedOut.bind(this),5e3)}catch(A){const M=A instanceof Error?A.message:void 0,D=this.createError(Rt.EVENT_PLANE_PING_SEND_FAIL,M);this.emitter.emit(Fl,D)}}connectTimedOut(){const E=this.socket&&this.socket.readyState===this.socket.CONNECTING;this.connecting=!1,this.logger.debug({msg:`${this.id}Connect timed out!`});const A=this.createError(Rt.JOIN_TIMED_OUT);E&&this.trackJoinFailed(A,this.getRetryCount()),this.createError(Rt.JOIN_TIMED_OUT),this.emitter.emit(Fl,A),this.close()}pongTimedOut(){if(this.sentPing&&!this.receivedPong){this.logger.debug({msg:`${this.id}Pong timed out!`});const E=this.createError(Rt.EVENT_PLANE_PONG_TIMEOUT);this.emitter.emit(Fl,E)}}cleanPingPongTimeouts(){this.sentPing=this.receivedPong=!1,window.clearTimeout(this.pongTimeout),window.clearInterval(this.pingInterval)}trackJoinAttempt(E){const{token:A,traceId:M}=this;this.analyticsTracker.trackEvent(new jl({token:A,eventEndpoint:(A==null?void 0:A.eventsURL)||"",whipEndpoint:(A==null?void 0:A.whipURL)||"",traceId:M}))}trackJoinFailed(E,A){const{token:M,traceId:D,code:B,message:G,fatal:re,nominal:oe}=E;this.analyticsTracker.trackEvent(new Ua({token:M,eventEndpoint:M.eventsURL,whipEndpoint:M.whipURL,traceId:D,code:B,message:G,fatal:re,nominal:oe,retryCnt:A}))}trackJoinStarted(){this.analyticsTracker.trackEventNoSharedProps(new bl({token:this.token,eventEndpoint:this.token.eventsURL,numRetries:this.getRetryCount(),protocol:this.protocol,traceId:this.traceId}))}}var io=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})},va,Cc,Sl,Pr;(function(O){O.SDP_EXCHANGE="xdp",O.JITTER_BUFFER_MIN_DELAY_MS="jit_buf_min_delay_ms"})(va||(va={})),function(O){O.USER_INITIATED="user-initiated",O.CLIENT_RECONNECT="reconnect",O.TOKEN_REUSED="token-reused",O.UNKNOWN="unknown",O.PARTICIPANT_DISCONNECTED="participant-disconnected",O.STAGE_DELETED="stage-deleted"}(Cc||(Cc={})),function(O){O[O.NOT_CONNECTED=0]="NOT_CONNECTED",O[O.CONNECTION_LOST=1]="CONNECTION_LOST",O[O.TIMEDOUT=2]="TIMEDOUT",O[O.ABORTED=3]="ABORTED",O[O.INVALID_MESSAGE=4]="INVALID_MESSAGE",O[O.UNEXPECTED_ERROR=5]="UNEXPECTED_ERROR"}(Sl||(Sl={})),function(O){O.DISCONNECTED="disconnected",O.CONNECTING="connecting",O.CONNECTED="connected",O.ERRORED="errored"}(Pr||(Pr={}));class z0 extends Ko{constructor(E,A,M){super(),this.token=E,this.nonScopedLogger=A,this.analyticsTracker=M,this.participants=new Map,this.disconnected=[],this.state={value:Pr.DISCONNECTED,context:{connectStartTime:0,hasConnected:!1}},this.features={sdpExchange:!1},this.stats=this.resetStats(),this.stageMinutesLogged=0,this.isStagePublishing=!1,this.onConnecting=(D,B)=>{this.logger.debug({msg:"onConnecting",context:D,event:B}),D.connectStartTime=performance.now();const G=B.type==="RECONNECT";G&&this.stageSocket.close();const{eventsURL:re}=this.token;this.emit(yl,Pr.CONNECTING),this.state.value=Pr.CONNECTING;const oe=!G;this.stageSocket.connect(re,this.traceId,oe)},this.onConnected=(D,B)=>{this.logger.debug({msg:"onConnected",context:D,event:B}),D.hasConnected=!0,this.emit(kf),this.emit(yl,Pr.CONNECTED),this.state.value=Pr.CONNECTED},this.onDisconnected=(D,B)=>{this.logger.debug({msg:"onDisconnected",context:D}),this.state.value=Pr.DISCONNECTED,this.stopStageMinuteLoggedInterval(!0),this.stageSocket.close(),D.hasConnected=!1,this.participants=new Map,this.disconnected=[],this.stageSocket.removeAllListeners(),this.resetStats(),this.emit(yl,Pr.DISCONNECTED,B)},this.onErrored=(D,B)=>{this.logger.error({msg:"Connection failure occurred",err:B.payload.error}),this.emit(yl,Pr.ERRORED),this.emit(kd,B.payload.error),this.state.value=Pr.ERRORED,D.hasConnected?this.processStateUpdate({type:"RECONNECT"}):this.stageSocket.close()},this.processStateUpdate=D=>{const B=this.state.value,G=this.state.context;switch(B){case Pr.DISCONNECTED:D.type==="CONNECT"&&this.onConnecting(G,D);break;case Pr.CONNECTING:D.type==="RECONNECT"?this.onConnecting(G,D):D.type==="DISCONNECT"?this.onDisconnected(G,D.reason):D.type==="CONNECT_SUCCESS"?this.onConnected(G,D):D.type==="ERROR"&&this.onErrored(G,D);break;case Pr.CONNECTED:D.type==="RECONNECT"?this.onConnecting(G,D):D.type==="DISCONNECT"?this.onDisconnected(G,D.reason):D.type==="ERROR"&&this.onErrored(G,D);break;case Pr.ERRORED:D.type==="RECONNECT"?this.onConnecting(G,D):D.type==="DISCONNECT"&&this.onDisconnected(G,D.reason)}},this.measureConnect=(D,B)=>{const G=this.stats.edpConnectCount,re=G+1,oe=performance.now(),J=oe-B;return Object.assign(this.stats,{edpConnectCount:re,edpConnectDuration:J}),G===0&&Object.assign(this.stats,{edpInitialStartConnectTime:B,edpInitialFinishConnectTime:oe,edpInitialConnectDuration:J,edpInitialConnectRetries:D}),this.stats},this.measureStateUpdate=D=>{const{edpInitialFinishConnectTime:B}=this.stats,G=this.stats.edpStateUpdateCount,re=G+1;return Object.assign(this.stats,{edpStateUpdateCount:re}),G===0&&Object.assign(this.stats,{edpInitialStateDuration:performance.now()-B,edpInitialStatePublishingCount:D}),this.stats},this.trackMessageParseError=D=>{this.logger.error({msg:"Message Parse Error occurred",err:D.err});const B=new ui({token:D.token,traceId:D.traceId,code:Rt.WEBSOCKET_MESSAGE_PARSE_FAILURE.code,tag:D.tag,location:D.location,message:D.message,details:D.err.message});this.analyticsTracker.trackEvent(new vl(B))},this.trackStageSocketMessageParseError=(D,B,G)=>{this.trackMessageParseError({token:D,traceId:B,tag:Eo.JOIN_RELATED,location:"StageConnection.onMessage",message:Rt.WEBSOCKET_MESSAGE_PARSE_FAILURE.message,err:G})},this.trackStageStateMessageParseError=(D,B,G,re)=>{this.trackMessageParseError({token:D,traceId:B,tag:Eo.JOIN_RELATED,location:"StageConnection.onStageStateMessage",message:re,err:G})},this.onDisconnectMessage=D=>{this.analyticsTracker.trackEventNoSharedProps(new Bf(this.token,this.traceId,`DISCONNECT message received: ${D.code}:${D.reason}`,en.JOIN));let B=Cc.UNKNOWN;if(D.code==="PARTICIPANT_DISCONNECTED")B=Cc.PARTICIPANT_DISCONNECTED;else if(D.code==="STAGE_DELETED")B=Cc.STAGE_DELETED;else if(D.code==="TOKEN_REUSED"&&(B=Cc.TOKEN_REUSED,Xc("disableTokenReuseMessage")))return void console.warn("Token reuse is detected, but skipping as feature is disabled");console.warn(`Disconnecting client due to: ${D.reason}`),this.processStateUpdate({type:"DISCONNECT",reason:B})},this.onReassignmentMessage=D=>{this.emit(Bl,D)},this.onIncompatibleCodecsMessage=D=>{this.emit(Uh,D)},this.onStageStateMessage=(D,B,G)=>{var re,oe;this.logger.debug({msg:"State Stage Message occurred",state:G});const J=G.payload,le=(re=J.participants)!==null&&re!==void 0?re:[],pe=(oe=J.disconnected)!==null&&oe!==void 0?oe:[],ye=[],Ie=[];this.measureStateUpdate(le.length),this.enableFeaturesBasedOnServerFeatures(J.serverFeatures||[]);const Xe=(qe,Oe)=>{this.analyticsTracker.trackEventNoSharedProps(new Nm({token:D,otherParticipantId:qe.id,otherParticipantUserId:qe.userId,isAudioMuted:qe.audioMuted,isVideoStopped:qe.videoStopped,isPublishing:qe.isPublishing,isDisconnected:Oe,traceId:B}))};this.participants.forEach(qe=>{const Oe=le.find(Te=>Te.id===qe.id);if(Oe){let Te=!0,rt=!1;["isPublishing","id","audioMuted","joinedAt","userId","videoStopped"].forEach(mt=>{Te=Te&&Oe[mt.toString()]===qe[mt.toString()],Te||(qe[mt.toString()]=Oe[mt.toString()],rt=!0)}),Object.keys(qe.attributes).forEach(mt=>{Te=Te&&Oe.attributes[mt]===qe.attributes[mt],Te||(qe.attributes=Oe.attributes,rt=!0)}),rt&&(Xe(qe,!1),this.emit(gm,Oe))}else Ie.push(qe)}),le.forEach(qe=>{this.participants.get(qe.id)||ye.push(qe)}),Ie.forEach(qe=>{this.participants.delete(qe.id),Xe(qe,!0),this.emit($u,qe)}),ye.forEach(qe=>{this.participants.set(qe.id,qe),Xe(qe,!1),this.emit(Lh,qe)}),pe.forEach(qe=>{this.disconnected.find(Oe=>Oe.id===qe.id)||(this.disconnected.push(qe),qe.status==="KICKED"&&this.emit(Os,qe))}),this.disconnected=pe},this.nonScopedLogger=A,this.logger=new pa(A,me.CONNECTION),this.stageSocket=new Kx(E,this.nonScopedLogger,M),this.token=E,this.traceId=So()}resetStats(){return this.stats={isConnected:!1,edpInitialStartConnectTime:0,edpInitialFinishConnectTime:0,edpConnectCount:0,edpInitialConnectDuration:0,edpConnectDuration:0,edpInitialStateDuration:0,edpInitialStatePublishingCount:0,edpStateUpdateCount:0,edpInitialConnectRetries:0},this.stats}connect(E){return io(this,void 0,void 0,function*(){return this.logger.debug({msg:"connect invoked",token:this.token,traceId:E}),this.traceId=E,this.state.value!==Pr.DISCONNECTED&&(this.logger.debug({msg:"Disconnecting previous connection"}),this.processStateUpdate({type:"DISCONNECT",reason:Cc.CLIENT_RECONNECT})),new Promise((A,M)=>{this.stageSocket.on(Zo,D=>{var B,G;const{retryCnt:re,initialStageState:oe}=D;oe&&this.enableFeaturesBasedOnServerFeatures((G=(B=oe.payload)===null||B===void 0?void 0:B.serverFeatures)!==null&&G!==void 0?G:[]),this.traceId=D.traceId||So(),this.measureConnect(re,this.state.context.connectStartTime),this.processStateUpdate({type:"CONNECT_SUCCESS"}),this.startStageMinuteLoggedInterval(this.token,this.traceId),A(this.traceId)}),this.stageSocket.on(Fl,D=>{M(D),this.processStateUpdate({type:"ERROR",payload:{error:D}})}),this.stageSocket.on(uv,()=>{this.logger.debug({msg:"Refresh event occurred"}),this.emit(dS),this.processStateUpdate({type:"RECONNECT"})}),this.stageSocket.on(hv,D=>this.onStageStateMessage(this.token,this.traceId,D)),this.stageSocket.on(xo,D=>this.trackStageSocketMessageParseError(this.token,this.traceId,D)),this.stageSocket.on(ym,this.onDisconnectMessage),this.stageSocket.on(Bh,this.onReassignmentMessage),this.stageSocket.on(La,this.onIncompatibleCodecsMessage),this.stageSocket.on(vc,D=>{this.stopStageMinuteLoggedInterval()}),this.processStateUpdate({type:"CONNECT",payload:{token:this.token,traceId:E}})})})}disconnect(){return this.logger.debug({msg:"disconnect invoked"}),this.processStateUpdate({type:"DISCONNECT",reason:Cc.USER_INITIATED}),this.traceId}getParticipant(E){return this.participants.get(E)}listConnectedParticipants(){const E=[];return this.participants.forEach(A=>{A.subscribed&&E.push(A)}),E}listAvailableParticipants(){return Array.from(this.participants.values())}emitStageState(E,A){this.stageSocket.send({audioMuted:E,type:"SET_STATE",version:"0",videoStopped:A})}setStagePublishing(E){this.isStagePublishing=E,this.emit(To,this.isStagePublishing)}getIsStagePublishing(){return this.isStagePublishing}startStageMinuteLoggedInterval(E,A){this.uploadStageMinutesBroadcastInterval||(this.analyticsTracker.trackEvent(new Ao(E,A,this.stageMinutesLogged,this.isStagePublishing,0)),this.stageMinutesLogged++,this.uploadStageMinutesBroadcastInterval=setInterval(()=>{this.analyticsTracker.trackEvent(new Ao(E,A??So(),this.stageMinutesLogged,this.isStagePublishing,0)),this.stageMinutesLogged++},6e4))}stopStageMinuteLoggedInterval(E=!1){this.uploadStageMinutesBroadcastInterval&&(clearInterval(this.uploadStageMinutesBroadcastInterval),this.uploadStageMinutesBroadcastInterval=void 0),E&&(this.stageMinutesLogged=0)}enableFeaturesBasedOnServerFeatures(E){const A=(G,re)=>{this.trackStageStateMessageParseError(this.token,this.traceId,re,`Could not parse "${G}" from the Eevee server features list`)},M=E.includes(va.SDP_EXCHANGE);this.features.sdpExchange!==M&&(this.logger.debug({msg:`XDP SDP exchange feature toggled: ${M}`}),this.features.sdpExchange=M);const D=E.find(G=>G.indexOf(va.JITTER_BUFFER_MIN_DELAY_MS)!==-1),B=G=>{this.logger.debug({msg:`jitterBufferMinDelay feature updated to: ${G}`}),this.features.jitterBufferMinDelayInMs=G};if(D!==void 0)try{const G=D.split("=")[1],re=parseInt(G,10);if(isNaN(re))throw new Error("Unable to parse - result is NaN");if(re<0)throw new Error("Unable to apply - result is negative");this.features.jitterBufferMinDelayInMs!==void 0&&this.features.jitterBufferMinDelayInMs===re||B(re)}catch(G){A(D,G),B(void 0)}else B(void 0)}isConnected(){return this.state.value===Pr.CONNECTED}supportsSdpExchange(){return this.features.sdpExchange}jitterBufferMinDelayInMs(){return this.features.jitterBufferMinDelayInMs}getConnectionStats(){return Object.assign({},this.stats,{isConnected:this.isConnected()})}exchangeSdp(E,A,M,D,B,G,re,oe,J){return io(this,void 0,void 0,function*(){return this.isConnected()?new Promise((le,pe)=>{const ye=window.setTimeout(()=>{Ie(),pe(Sl.TIMEDOUT)},8e3),Ie=()=>{window.clearTimeout(ye),this.stageSocket.off(vm,Xe),this.stageSocket.off(Fl,qe)},Xe=Oe=>{Oe.requestId===D&&(Ie(),le(Oe))},qe=()=>{Ie(),pe(Sl.CONNECTION_LOST)};B==null||B.addEventListener("abort",()=>{Ie(),pe(Sl.ABORTED)}),this.stageSocket.on(vm,Xe),this.stageSocket.on(Fl,qe),this.stageSocket.sendSdpOffer(E,A,M,D,G,re,oe,J)}):Promise.reject(Sl.NOT_CONNECTED)})}}class Ac{constructor(E){this.token=E}}var j0=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};const _v={[Sl.ABORTED]:Rt.OPERATION_ABORTED,[Sl.NOT_CONNECTED]:Rt.EVENT_PLANE_WS_UNEXPECTED_CLOSE,[Sl.CONNECTION_LOST]:Rt.XDP_CONNECTION_LOST,[Sl.TIMEDOUT]:Rt.XDP_TIMEOUT,[Sl.INVALID_MESSAGE]:Rt.XDP_INVALID_ANSWER_MSG,[Sl.UNEXPECTED_ERROR]:Rt.XDP_UNEXPECTED_ERROR};class H0 extends Ac{constructor(E,A,M,D){super(E),this.token=E,this.stageConnection=A,this.contextData=M,this.analyticsTracker=D}exchange(E){return j0(this,void 0,void 0,function*(){const A=js(),{action:M}=this.contextData,{sdpOffer:D,url:B,traceId:G,forceNode:re,assignmentToken:oe,multiCodec:J,abortController:le,initialLayerPreference:pe}=E;let ye;this.trackAttempt(B,A,G);try{ye=yield this.stageConnection.exchangeSdp(D,B,G.value,A.value,le==null?void 0:le.signal,re,oe,J,pe)}catch(jt){if(typeof jt=="number")throw this.createClientSideErrorFromReasonCode(jt,G,A,M)}if(!ye)return;const{httpStatusCode:Ie,errorCode:Xe,location:qe,content:Oe,sessionDeleteLink:Te,subscriberControlLink:rt,videoLayersLink:mt}=ye;if(Ie>=200&&Ie<300)return{sdpAnswer:Oe,url:B,location:qe,sessionDeleteLink:Te,mediaControls:rt,layerControls:mt};throw this.createServerSideError(G,A,Ie,Xe,M)})}trackAttempt(E,A,M){const{remoteParticipantId:D,action:B}=this.contextData;this.analyticsTracker.trackEventNoSharedProps(new Xu(B,this.token,E,"POST",A.value,D,M,"xdp"))}createServerSideError(E,A,M,D,B){const G=this.baseErrorProps(E,A);let re=mm(M,D);return re||(re=Rt.UNKNOWN_SERVER_ERROR),new ui(Object.assign(Object.assign({action:B},G),re))}baseErrorProps(E,A){const{remoteParticipantId:M,action:D}=this.contextData;return{token:this.token,traceId:E,tag:Da(D,M),location:"EdpSdpExchanger.exchange",requestUUID:A,remoteParticipantId:M}}createClientSideErrorFromReasonCode(E,A,M,D){const B=this.baseErrorProps(A,M),G=_v[E];return new ui(G?Object.assign(Object.assign({action:D},B),G):Object.assign(Object.assign({action:D},B),Rt.XDP_INVALID_ANSWER_MSG))}getTransport(){return"sdp"}}const Ju=new RegExp("^(?:[a-z+]+:)?//","i");function El(O){return Ju.test(O)}var Gn=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class bv extends Ac{constructor(E,A,M){super(E),this.contextData=A,this.analyticsTracker=M}exchange(E){return Gn(this,void 0,void 0,function*(){const A=js(),{token:M}=this,{action:D,remoteParticipantId:B}=this.contextData,{sdpOffer:G,url:re,traceId:oe,forceNode:J,assignmentToken:le,multiCodec:pe,abortController:ye,initialLayerPreference:Ie}=E;try{const qe="POST",Oe="http";this.analyticsTracker.trackEventNoSharedProps(new Xu(D,M,re,qe,A.value,B,oe,Oe));const Te={data:G,headers:{Authorization:`Bearer ${M.rawToken}`,"Content-Type":"application/sdp","X-Stages-Platform":"web","X-Stages-Request-ID":A.value,"X-Stages-SDK":"1.19.0","X-Stages-Session-ID":this.analyticsTracker.getSessionId(),"X-Stages-Trace-ID":oe.value,"X-Stages-WHIP-Version":wo,"X-Stages-Options":(Xe=JSON.stringify({cap:["sau"]}),btoa(Xe).replace(/[^A-Za-z0-9+/]/g,""))},method:qe,responseType:"text",url:re,signal:ye==null?void 0:ye.signal,params:{}};J&&(Te.params.force_node=J),le&&(Te.params.assignment_token=le),pe&&(Te.params.multi_codec=!0);const rt=rm()===void 0,mt=rm()||rt;Ie&&Te.headers&&mt&&(Te.headers["X-Stages-Initial-Layer-Pref"]=vv(Ie));const{data:jt,headers:Tt,request:Dn}=yield _l(Te),pn=this.parseWhipResource(re,Tt.location,Tt.link);return{url:Dn.responseURL,sdpAnswer:jt,location:pn==null?void 0:pn.location,sessionDeleteLink:pn==null?void 0:pn.sessionDeleteLink,mediaControls:pn==null?void 0:pn.mediaControls,layerControls:pn==null?void 0:pn.layerControls}}catch(qe){if(gs().isCancel(qe))throw new ui(Object.assign(Object.assign({},Dd(Rt.OPERATION_ABORTED,qe)),{action:D,token:M,traceId:oe,tag:Da(D,B),location:"StagePeerClient.start",requestUUID:A,remoteParticipantId:B}));const Oe=function(Te,rt){var mt;return Te instanceof qr.AxiosError&&Te.response&&typeof Te.response.status=="number"?Te instanceof qr.AxiosError&&Te.code==="ERR_NETWORK"?Rt.NETWORK_FAILURE:mm(Number(Te.response.status),(mt=Te.response.data)===null||mt===void 0?void 0:mt.code)||rt:rt}(qe,Rt.WHIP_POST_FAILURE);throw new ui(Object.assign(Object.assign({},Dd(Oe,qe)),{action:D,token:M,traceId:oe,tag:Da(D,B),location:"StagePeerClient.start",requestUUID:A,remoteParticipantId:B}))}var Xe})}parseWhipResource(E,A,M){const D=new URL(E);let B;return B=function(G,re,oe){if(!oe)return G;if(G||(G={}),El(oe))return G.location=oe,G;const J=re.port?`:${re.port}`:"";return G.location=`${re.protocol}//${re.hostname}${J}${oe}`,G}(B,D,A),B=function(G,re,oe){if(!oe)return G;G||(G={});const J=G;return oe.split(",").forEach(le=>{const pe=/<(.+)>;\s?rel="([a-z:-]+)"/.exec(le);if((pe==null?void 0:pe.length)!==3)return;let ye;if(El(pe[1]))ye=pe[1];else{const Ie=re.port?`:${re.port}`:"";ye=`${re.protocol}//${re.hostname}${Ie}${pe[1]}`}switch(pe[2]){case"urn:ietf:params:whip:ivs-stages:session-delete":J.sessionDeleteLink=ye;break;case"urn:ietf:params:whep:core:playback-controls":J.mediaControls=ye;break;case"urn:ietf:params:whep:ext:core:layer":J.layerControls=ye;break;default:return}}),J}(B,D,M),B}getTransport(){return"http"}}var Bn=r(1564);function Tl(O){return O.track.kind===bc.AUDIO}function km(O){return O.track.kind===bc.VIDEO&&typeof O.config=="object"}const V0=(O,E)=>function(A){return A.kind===bc.AUDIO}(O)?((A,M)=>{var D;const B={maxBitrateBps:ga((D=M==null?void 0:M.maxAudioBitrateKbps)!==null&&D!==void 0?D:64)},G=M==null?void 0:M.stereo;return typeof G=="boolean"&&(B.stereo=G),{track:A,config:B}})(O,E):((A,M)=>{var D,B,G,re;const oe=(D=M==null?void 0:M.minBitrate)!==null&&D!==void 0?D:Ff,J=(B=M==null?void 0:M.maxBitrate)!==null&&B!==void 0?B:zf,le=(G=M==null?void 0:M.maxFramerate)!==null&&G!==void 0?G:Co,pe=!!(!((re=M==null?void 0:M.simulcast)===null||re===void 0)&&re.enabled);return{track:A,config:{minBitrateBps:ga(oe),maxBitrateBps:ga(J),maxFramerate:le,simulcastEnabled:pe,inBandMessagingEnabled:!1}}})(O,E),na=(O,E)=>{if(typeof O=="number")return O;const A=E?Tm:fS;return A[O]!==void 0?A[O]:0};function Gd(O){if(O<Ff||O>zf)throw new Error(`Stage bitrate must be between ${Ff} kbps and ${zf} kbps`)}function bS(O,E){const A=P0();let M=Object.assign({},A,(0,Rs.cloneDeep)(E));return M=function(D,B){var G,re,oe;const J=Object.assign({},(0,Rs.cloneDeep)(B)),le=!Nr.browser.isChrome()&&!Nr.browser.isEdge(),pe=(oe=(re=(G=D.getSettings)===null||G===void 0?void 0:G.call(D))===null||re===void 0?void 0:re.displaySurface)!==null&&oe!==void 0&&oe,ye=ga(J.maxBitrate)<Vf.maxBitrate;return(le||pe||ye)&&(J.simulcast.enabled=!1),J}(O,M),Gd(M.maxBitrate),Gd(M.minBitrate),function(D){if(D&&(D>Co||D<fv))throw new Error(`framerate cannot exceed ${Co} fps`)}(M.maxFramerate),function(D){if(D<Em||D>ki)throw new Error(`Stage audio bitrate must be between ${Em} kbps and ${ki} kbps`)}(M.maxAudioBitrateKbps),function(D){if(typeof D!="boolean")throw new Error("Stage stereo prop must be a boolean")}(M.stereo),M}function G0({stageErrorValue:O,action:E,token:A,traceId:M,tag:D,identifier:B,details:G}){return new ui(Object.assign(Object.assign({},O),{token:A,traceId:M,location:"peer-client",tag:D,action:E,remoteParticipantId:B,details:G}))}var Jr;function ro(O){var E;return!((E=O==null?void 0:O.sender)===null||E===void 0)&&E.createEncodedStreams?Jr.INSERTABLE_STREAMS:window.RTCRtpSender&&"transform"in RTCRtpSender.prototype&&window.RTCRtpScriptTransform?Jr.ENCODED_TRANSFORMS:Jr.NONE}function Sv(O){var E;return!((E=O==null?void 0:O.receiver)===null||E===void 0)&&E.createEncodedStreams?Jr.INSERTABLE_STREAMS:window.RTCRtpReceiver&&"transform"in RTCRtpReceiver.prototype&&window.RTCRtpScriptTransform?Jr.ENCODED_TRANSFORMS:Jr.NONE}function q0(O){let E=[];const A=new Map;function M(D){const B="0123456789abcdef";let G="";for(let re=0;re<D;re+=1)G+=B.charAt(Math.floor(Math.random()*B.length));return G}return{add(D){const B=M,G=`${B(8)}-${B(4)}-${B(4)}-${B(4)}-${B(12)}`,re=Date.now();return E.push({id:G,enqueuedAt:re,payload:D}),G},poll(D){return A.has(D)||A.set(D,[]),A.size>=O&&(A.forEach(B=>{B.push(...E)}),E=[]),(A.get(D)||[]).splice(0,1)}}}function Zx(O,E){return E.type==="sei"?function(A,M){const re=new Uint8Array([1,2,1,8,1,2,3,4,2,2,2,4,4,3,2,1]);function oe(pe,ye,Ie){return Ie+ye.length<=pe.byteLength&&ye.every((Xe,qe)=>pe.getUint8(Ie+qe)===Xe)}function J(pe,ye){const Ie=function(qe,Oe){return new Uint8Array([0,0,1,6,5,...Oe,...qe])}(pe,function(qe){const Oe=[];for(;qe>=255;)Oe.push(255),qe-=255;return Oe.push(qe),new Uint8Array(Oe)}(ye.length+pe.length)),Xe=function(qe){const Oe=[...qe];let Te=3;for(;Te<Oe.length-2;)Oe[Te]!==0||Oe[Te+1]!==0||Oe[Te+2]!==0&&Oe[Te+2]!==1&&Oe[Te+2]!==2&&Oe[Te+2]!==3?Te+=1:(Oe.splice(Te+2,0,3),Te+=3);return Oe}(new Uint8Array([...Ie,...ye,128]));return new Uint8Array(Xe)}function le(pe,ye){const Ie=function(Xe){const qe=new DataView(Xe);for(let Oe=0;Oe<qe.byteLength-4;Oe++)if(oe(qe,[0,0,1],Oe)){const Te=31&qe.getUint8(Oe+3);if(Te>=1&&Te<=5)return Oe}return-1}(A.data);if(Ie>=0){const Xe=new ArrayBuffer(A.data.byteLength+ye.byteLength),qe=new Uint8Array(Xe);return qe.set(new Uint8Array(A.data.slice(0,Ie)),0),qe.set(ye,Ie),qe.set(new Uint8Array(A.data.slice(Ie)),Ie+ye.byteLength),Xe}return pe}return function(){for(let pe=0;pe<M.length;pe+=1){const ye=J(re,new Uint8Array(M[pe]));A.data=le(A.data,ye)}return A}()}(O,E.payloads||[]):O}function Lm(O,E){const{type:A,transformerId:M}=E;if(A==="sei"){const D=function(re){function le(Ie,Xe,qe){return qe+Xe.length<Ie.byteLength&&Xe.every((Oe,Te)=>Ie.getUint8(qe+Te)===Oe)}function pe(Ie){const Xe=[];let qe=0;for(;qe<Ie.length;)Ie[qe]===0&&Ie[qe+1]===0&&Ie[qe+2]===3?(Xe.push(Ie[qe]),Xe.push(Ie[qe+1]),qe+=3):(Xe.push(Ie[qe]),qe+=1);return new Uint8Array(Xe)}function ye(Ie){let Xe=2;const qe=Ie.byteLength;for(;Xe<qe;){let Oe=0;for(;Xe<qe&&Ie[Xe]===255;)Oe+=255,Xe++;Oe+=Ie[Xe],Xe++;const Te=Math.min(Xe+Oe,qe),rt=new Uint8Array(Ie.slice(Xe,Te));return{uuid:rt.slice(0,16),payload:rt.slice(16)}}}return{messages:function(Ie){const Xe=new DataView(Ie.data),qe=[];let Oe=0;if(!le(Xe,[0,0,1],0)&&!le(Xe,[0,0,0,1],0))return[];for(;Oe<Xe.byteLength-5;)if(le(Xe,[0,0,1],Oe)){const Te=Oe+3;Oe=Te;const rt=31&Xe.getUint8(Oe),mt=31&Xe.getUint8(Oe+1);if(rt===6&&mt===5){for(;Oe<Xe.byteLength&&!le(Xe,[0,0,1],Oe);)Oe++;const jt=Oe,Tt=ye(pe(new Uint8Array(Ie.data.slice(Te,jt))));Tt&&qe.push(Object.assign(Object.assign({},Tt),{timestamp:Ie.timestamp,type:Ie.type}))}else Oe++}else Oe++;return qe}(re),frame:re}}(O),{frame:B,messages:G}=D;return{success:!0,frame:B,type:A,transformerId:M,seiResult:G}}return{success:!0,frame:O,transformerId:M,type:A}}function SS(){let O;const E=D=>(B,G)=>{const re=B.getMetadata().synchronizationSource,oe=(O?O.poll(re):[]).map(J=>J.payload);G.enqueue("<SEND_TRANSFORMER_IMPL>"(B,Object.assign(Object.assign({},D),{payloads:oe})))},A=D=>(B,G)=>{try{const re="<RECEIVE_TRANSFORMER_IMPL>"(B,D);G.enqueue(re.frame),self.postMessage(Object.assign(Object.assign({success:re.success},D),{seiResult:re.seiResult}))}catch{self.postMessage(Object.assign({success:!1},D))}};function M(D,B,G,re){const oe=new TransformStream({transform:D==="video/send"?E(B):A(B)});G.pipeThrough(oe).pipeTo(re)}return self.onrtctransform=D=>{const B=D.transformer;B&&M(B.options.method,B.options,B.readable,B.writable)},self.onmessage=D=>{var B;const{operation:G,transformerId:re}=D.data;G==="insert"?(O||(O="<CREATE_MESSAGE_QUEUE>"(1)),O.add((B=D.data)===null||B===void 0?void 0:B.payload)):G!=="video/receive"&&G!=="video/send"||M(G,{method:G,transformerId:re,type:"sei"},D.data.readable,D.data.writable)},{videoReceiveTransform:A,videoSendTransform:E}}(function(O){O.NONE="none",O.ENCODED_TRANSFORMS="encodedTransforms",O.INSERTABLE_STREAMS="insertableStreams"})(Jr||(Jr={}));const ES=()=>{let O=SS.toString();return O=O.replace('"<SEND_TRANSFORMER_IMPL>"',Zx.toString()),O=O.replace('"<RECEIVE_TRANSFORMER_IMPL>"',Lm.toString()),O=O.replace('"<CREATE_MESSAGE_QUEUE>"',q0.toString()),O},Wf=(()=>{let O;return{getWorker:()=>(O||(O=function(){const E=new Blob([`(${ES()})()`],{type:"text/javascript"}),A=URL.createObjectURL(E);return new Worker(A)}()),O),destroy:()=>{O&&O.terminate(),O=void 0}}})(),$0="seiMessageReceived",Um="error";var Qo;(function(O){O.CREATED="created",O.INITIALIZED="initialized",O.DESTROYED="destroyed"})(Qo||(Qo={}));class Yf extends Ko{constructor({enabled:E}){super(),this.state=Qo.CREATED,this.transformerId=js().value,this.prevResultWasError=!1,this.consecutiveErrorResults=0,this.seiReadCnt=0,this.seiBytesRead=0,this.onMessage=A=>{this.onTransformResult(A.data)},E||this.destroy()}initializeInsertableStreams(E){var A;this.worker=Wf.getWorker();const M=E.receiver.createEncodedStreams(),{readable:D,writable:B}=M;(A=this.worker)===null||A===void 0||A.postMessage({operation:"video/receive",transformerId:this.transformerId,readable:D,writable:B},[D,B]),this.worker.addEventListener("message",this.onMessage)}initializeEncodedTransforms(E){this.worker=Wf.getWorker();const A={method:"video/receive",type:"sei",transformerId:this.transformerId};E.receiver.transform=new RTCRtpScriptTransform(this.worker,A),this.worker.addEventListener("message",this.onMessage)}initialize(E,A){if(this.state!==Qo.CREATED)return!1;const M=Sv(E);if(M===Jr.NONE)return!1;if(A&&M===Jr.INSERTABLE_STREAMS)this.initializeInsertableStreams(E);else{if(A||M!==Jr.ENCODED_TRANSFORMS)return!1;this.initializeEncodedTransforms(E)}return this.transceiver=E,this.state=Qo.INITIALIZED,!0}onTransceiverAdd(E){return this.initialize(E,!0)}onTrackEvent(E){return E.track.kind==="video"&&this.initialize(E.transceiver,!1)}static isSupported(E){return Sv(E)!==Jr.NONE}onTransformResult(E){return E.transformerId===this.transformerId&&(E.success?(this.prevResultWasError=!1,this.consecutiveErrorResults=0,!!E.seiResult&&(E.seiResult.forEach(A=>{const{payload:M,uuid:D}=A;this.updateReadStats(A),this.emit($0,{uuid:D,payload:M})}),E.seiResult.length>0)):(this.prevResultWasError&&this.consecutiveErrorResults++,this.consecutiveErrorResults>=300&&this.onError(E,Rt.TRANSFORM_TOO_MANY_ERRORS),this.prevResultWasError=!0,this.onError(E,Rt.TRANSFORM_UNEXPECTED_ERROR),!1))}updateReadStats(E){this.seiReadCnt++,this.seiBytesRead+=E.payload.byteLength}getReceiverStats(){const{seiBytesRead:E,seiReadCnt:A}=this;return{seiReadCnt:A,seiBytesRead:E}}onError(E,A){const{type:M}=E;this.emit(Um,{type:M,stageErrorValue:A})}destroy(){var E,A;this.state!==Qo.DESTROYED&&(this.removeAllListeners(),(E=this.worker)===null||E===void 0||E.removeEventListener("message",this.onMessage),!((A=this.transceiver)===null||A===void 0)&&A.receiver&&(this.transceiver.receiver.transform=null),this.state=Qo.DESTROYED)}getState(){return this.state}}class Ev{constructor({enabled:E}){this.state=Qo.CREATED,this.transformerId=js().value,E||this.destroy()}initializeInsertableStreams(E,A){var M;this.worker=Wf.getWorker();const D=E.sender.createEncodedStreams(),{readable:B,writable:G}=D;(M=this.worker)===null||M===void 0||M.postMessage({operation:"video/send",transformerId:this.transformerId,readable:B,writable:G},[B,G])}initializeEncodedTransforms(E,A){this.worker=Wf.getWorker();const M={method:"video/send",type:"sei",transformerId:this.transformerId,encodingLayers:A};E.sender.transform=new RTCRtpScriptTransform(this.worker,M)}initialize(E){var A;if(this.state!==Qo.CREATED)return!1;const M=ro(E);if(M===Jr.NONE)return!1;const D=E.sender.getParameters(),B=((A=D==null?void 0:D.encodings)===null||A===void 0?void 0:A.length)||1;if(M===Jr.INSERTABLE_STREAMS)this.initializeInsertableStreams(E,B);else{if(M!==Jr.ENCODED_TRANSFORMS)return!1;this.initializeEncodedTransforms(E,B)}return this.transceiver=E,this.state=Qo.INITIALIZED,!0}static isSupported(E){return ro(E)!==Jr.NONE}sendSeiMessage(E){var A;this.state===Qo.INITIALIZED&&this.transceiver&&((A=this.worker)===null||A===void 0||A.postMessage({operation:"insert",transformerId:this.transformerId,payload:E}))}onTransceiverAdd(E){return this.initialize(E)}onTrackEvent(E){return!1}destroy(){var E;this.state!==Qo.DESTROYED&&(!((E=this.transceiver)===null||E===void 0)&&E.receiver&&(this.transceiver.receiver.transform=null),this.state=Qo.DESTROYED)}getState(){return this.state}}var ia=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};let Xf=null;class Bm extends Ko{constructor(E,A,M,D,B,G,re,oe,J){var le,pe;if(super(),this.analyticsTracker=G,this.sfuResource={node:"",cluster:""},this.stageCapabilities={simulcastNegotiated:!1},this.incompatibleCodecs=new Set,this.connect=({audioOnly:ye=!1,traceId:Ie,iceRestartOptions:Xe})=>ia(this,void 0,void 0,function*(){const{token:qe,tag:Oe,identifier:Te,action:rt}=this,mt=!!Xe,jt=new AbortController;let Tt,Dn,pn;this.abortController=jt,this.traceId=Ie,this.perfTracker.resetMeasurements(Ie);const Qn=()=>{Tt&&this.off(Gu,Tt),Dn&&this.off(ms,Dn)},gi=new Promise((hi,si)=>{const ei=function({action:ti,token:li,traceId:qn,tag:un,identifier:In}){const Ei=ti===en.SUBSCRIBE?Rt.SUBSCRIBE_TIMED_OUT:Rt.PUBLISH_TIMED_OUT;return new ui(Object.assign(Object.assign({},Ei),{action:ti,token:li,traceId:qn,tag:un,location:"connect",remoteParticipantId:In}))}({action:rt,token:qe,traceId:Ie,tag:Oe,identifier:Te}),oi=function({action:ti,token:li,traceId:qn,tag:un}){const In=Rt.OPERATION_ABORTED;return new ui(Object.assign(Object.assign({},In),{token:li,traceId:qn,location:"peer-client.connect",tag:un,action:ti}))}({action:rt,token:qe,traceId:Ie,tag:Oe}),di=setTimeout(()=>{this.stop(),this.analyticsTracker.trackError(ei),si(ei)},1e4);Tt=ti=>{clearTimeout(di),mt||this.stop(),si(ti)},Dn=ti=>{if(ti===et.CONNECTED)clearTimeout(di),hi();else if(ti===et.FAILED){const li=function({action:qn,token:un,traceId:In,tag:Ei}){return new ui(Object.assign(Object.assign({},Rt.PEER_CONNECTION_NETWORK_FAILURE),{token:un,traceId:In,location:"peer-client.connect",tag:Ei,action:qn}))}({action:rt,token:qe,traceId:Ie,tag:Oe});clearTimeout(di),si(li)}},this.on(Gu,Tt),this.on(ms,Dn),pn=()=>{clearTimeout(di)},jt.signal.aborted&&(clearTimeout(di),si(oi)),jt.signal.addEventListener("abort",()=>{clearTimeout(di),si(oi)})});try{const hi=yield Promise.all([ia(this,void 0,void 0,function*(){mt||(yield this.start(),this.mediaStream=yield this.initializePeerConnection(ye));const ei=Xe==null?void 0:Xe.assignmentToken,oi=Xe==null?void 0:Xe.nodeOverride;return yield this.exchangeSdp({iceRestart:mt,nodeOverride:oi,assignmentToken:ei,abortController:jt}),this.mediaStream}),gi]);this.statsReporter.traceId=Ie;const si=hi[0];if(this.abortController=void 0,!mt&&rt===en.PUBLISH)try{yield this.verifyOrUpdateTransceiverSync()}catch(ei){this.logger.error({err:ei,msg:"error syncing transceivers"})}return{mediaStream:si}}catch(hi){throw pn&&pn(),hi}finally{Qn()}}),this.disconnect=(ye=!1)=>ia(this,void 0,void 0,function*(){var Ie;const{token:Xe,action:qe}=this;(Ie=this.abortController)===null||Ie===void 0||Ie.abort(),this.stop(),ye?this.cleanup(qe,Xe.participantID,Xe,ye):yield this.cleanup(qe,Xe.participantID,Xe,ye)}),this.onTrack=ye=>{const{token:Ie,action:Xe,traceId:qe,identifier:Oe}=this;this.trace(Ie,qe,`onTrack: ${ye.track.kind}`,Xe,Oe),this.videoSenderTransformer.onTrackEvent(ye),this.videoReceiverTransformer.onTrackEvent(ye)},this.onIceGatheringStateChange=()=>{var ye,Ie,Xe;const{token:qe,action:Oe,traceId:Te,identifier:rt}=this;if(((ye=this.peerConnection)===null||ye===void 0?void 0:ye.iceGatheringState)==="gathering"?this.perfTracker.markIceGatheringStart():((Ie=this.peerConnection)===null||Ie===void 0?void 0:Ie.iceGatheringState)==="complete"&&this.perfTracker.markIceGatheringStop(),this.peerConnection){const mt=this.peerConnection.iceGatheringState,jt=new Sm(Oe,qe,Te,mt,rt);this.analyticsTracker.trackEventNoSharedProps(jt)}this.trace(qe,Te,`ICE gathering state change: ${(Xe=this.peerConnection)===null||Xe===void 0?void 0:Xe.iceGatheringState}`,Oe,rt)},this.onSelectedCandidatePairChange=()=>{var ye,Ie;const{token:Xe,action:qe,traceId:Oe,identifier:Te}=this,rt=(Ie=(ye=this.peerConnection)===null||ye===void 0?void 0:ye.getReceivers()[0].transport)===null||Ie===void 0?void 0:Ie.iceTransport,mt=rt==null?void 0:rt.getSelectedCandidatePair();if(mt){const{local:jt,remote:Tt}=mt,Dn=`Selected candidate pair change (local, remote): ${jt==null?void 0:jt.candidate}, ${Tt==null?void 0:Tt.candidate}`;this.logger.debug({msg:Dn}),this.trace(Xe,Oe,Dn,qe,Te)}},this.onIceCandidate=ye=>ia(this,void 0,void 0,function*(){var Ie,Xe;const{identifier:qe,action:Oe,traceId:Te}=this,rt=(Ie=ye.target.localDescription)===null||Ie===void 0?void 0:Ie.sdp.includes("relay");this.analyticsTracker.trackEventNoSharedProps(new Bf(this.token,Te,`ice candidate: hasRelay = ${rt}, candidate = ${(Xe=ye.candidate)===null||Xe===void 0?void 0:Xe.candidate}`,Oe,qe))}),this.onMute=()=>ia(this,void 0,void 0,function*(){const{token:ye,action:Ie,traceId:Xe,identifier:qe}=this;this.trace(ye,Xe,"Track has muted",Ie,qe)}),this.onUnMute=()=>ia(this,void 0,void 0,function*(){const{token:ye,action:Ie,traceId:Xe,identifier:qe}=this;this.trace(ye,Xe,"Track has unmuted",Ie,qe)}),this.fetchAndSetRemoteDescription=ye=>ia(this,void 0,void 0,function*(){var Ie,Xe,qe,Oe;const Te=(Xe=(Ie=this.peerConnection)===null||Ie===void 0?void 0:Ie.localDescription)===null||Xe===void 0?void 0:Xe.sdp;Te||this.logger.warn({msg:"Unexpected state: No SDP offer when attempting to fetch remote description"});const{token:rt,traceId:mt,action:jt,identifier:Tt,tag:Dn}=this,{endpointURL:pn,nodeOverride:Qn,assignmentToken:gi,multiCodec:hi,abortController:si}=ye;let ei;this.perfTracker.markPostStart(),this.perfTracker.markSdpExchangeStart();try{this.perfTracker.setTransport(this.sdpExchanger.getTransport());const qn=Qn||ju("node")||ju("dataPlaneEndpoint");ei=yield this.sdpExchanger.exchange({sdpOffer:Te,url:pn,traceId:mt,forceNode:qn,assignmentToken:gi,multiCodec:hi,abortController:si,initialLayerPreference:(qe=this.simulcastSubscribeConfig)===null||qe===void 0?void 0:qe.initialLayerPreference})}catch(qn){let un=qn;un instanceof ui||(un=new ui(Object.assign(Object.assign({},Rt.UNEXPECTED_ERROR),{action:jt,token:rt,traceId:mt,tag:Dn,details:qn instanceof Error?qn.message:"",location:"sdp-exchange"}))),un instanceof ui&&(this.analyticsTracker.trackError(un),this.emit(Gu,un))}if(this.perfTracker.markSdpExchangeStop(),!ei)return;const{location:oi,sessionDeleteLink:di,mediaControls:ti}=ei;let li=ei.sdpAnswer;try{li=this.mungeSdpAnswer(li),ei.sdpAnswer=li}catch(qn){this.logger.error({err:qn,msg:"Error while attempting to munge SDP, keeping original answer"})}this.statsReporter.sdpAnswer=li,this.emit(om,ei),oi&&(this.whipResource={location:oi,sessionDeleteLink:di,mediaControls:ti},this.sfuResource=function(qn){const un=qn.match(/https:\/\/([^/]+)\//);if(un){const In=un[1].split(".");if(In[0].includes("video-rtx"))return{node:`${In[0]}.${In[1]}`,cluster:In[1]}}}(oi)||{node:"",cluster:""},this.statsReporter.updateSfuResource(this.sfuResource));try{this.perfTracker.markSetRemoteDescStart(),yield(Oe=this.peerConnection)===null||Oe===void 0?void 0:Oe.setRemoteDescription({sdp:li,type:"answer"}),this.perfTracker.markSetRemoteDescStop(),this.perfTracker.markPostStop()}catch(qn){const un=new ui(Object.assign(Object.assign({},Rt.SET_ANSWER_FAILURE),{action:jt,token:rt,traceId:mt,tag:Da(jt,Tt),location:"setRemoteDescription",remoteParticipantId:Tt,details:qn instanceof Error?qn.message:""}));this.analyticsTracker.trackError(un),this.emit(Gu,un)}}),this.cleanup=(ye,Ie,Xe,qe=!1)=>ia(this,void 0,void 0,function*(){var Oe,Te,rt;const mt=js();if(this.toggleStageConnectionListeners(!1),this.currentJitterBufferMinDelayInMs=void 0,this.stageConnection=void 0,!(!((Oe=this.whipResource)===null||Oe===void 0)&&Oe.location))return this.trace(Xe,this.traceId,"whipResource location not known, exiting cleanup",ye,Ie),void this.analyticsTracker.trackError(new ui(Object.assign(Object.assign({},Rt.WHIP_URL_MISSING),{action:ye,token:Xe,traceId:this.traceId,tag:Da(ye,Ie),location:ye===en.SUBSCRIBE?"unsubscribe":"unpublish",requestUUID:mt,remoteParticipantId:Ie})));let jt=this.whipResource.location;if(this.trace(Xe,this.traceId,`use hostnamecachedurl: ${jt}`,ye,Ie),qe){if(!((rt=this.whipResource)===null||rt===void 0)&&rt.sessionDeleteLink){jt=this.whipResource.sessionDeleteLink,this.trace(Xe,this.traceId,`DELETE via session-delete beacon path: ${jt}`,ye,Ie);try{navigator.sendBeacon(jt,JSON.stringify({authorization:Xe.rawToken}))}catch(Tt){this.analyticsTracker.trackErrorAndThrow(new ui(Object.assign(Object.assign({},Dd(Rt.WHIP_DELETE_FAILURE,Tt)),{action:ye,token:Xe,traceId:this.traceId,tag:Da(ye,Ie),location:en.SUBSCRIBE?"unsubscribe":"unpublish",requestUUID:mt,remoteParticipantId:Ie})))}}}else try{yield gs().delete(jt,{headers:{Authorization:`Bearer ${Xe.rawToken}`,"X-Stages-Platform":"web","X-Stages-Request-ID":mt.value,"X-Stages-SDK":"1.19.0","X-Stages-Session-ID":this.analyticsTracker.getSessionId(),"X-Stages-Trace-ID":this.traceId.value,"X-Stages-WHIP-Version":wo}})}catch(Tt){((Te=Tt.response)===null||Te===void 0?void 0:Te.status)===404?this.trace(Xe,this.traceId,`DELETE returned 404, ignoring, action = ${ye}, uuid = ${mt.value}`,ye,Ie):this.analyticsTracker.trackErrorAndThrow(new ui(Object.assign(Object.assign({},Dd(Rt.WHIP_DELETE_FAILURE,Tt)),{action:ye,token:Xe,traceId:this.traceId,tag:Da(ye,Ie),location:en.SUBSCRIBE?"unsubscribe":"unpublish",requestUUID:mt,remoteParticipantId:Ie})))}}),this.getConnectionState=()=>{if(!this.peerConnection)return et.NONE;const ye=this.peerConnection.connectionState||this.peerConnection.iceConnectionState;try{return O0(ye)}catch{return this.logger.warn({msg:"Unhandled connection state:",rawState:ye}),et.IDLE}},this.onIceCandidateError=ye=>{const{token:Ie,traceId:Xe,tag:qe}=this;if(ye.errorCode!==701){const Oe=new ui(Object.assign(Object.assign({},Rt.ICE_CANDIDATE_ERROR),{action:this.action,token:Ie,traceId:Xe,tag:qe,location:"onIceCandidateError",remoteParticipantId:this.identifier}));this.analyticsTracker.trackError(Oe),this.emit(Gu,Oe)}},this.onIceConnectionStateChange=()=>{var ye;const{token:Ie,traceId:Xe,action:qe,identifier:Oe}=this;this.trace(Ie,Xe,`ICE connection state change: ${(ye=this.peerConnection)===null||ye===void 0?void 0:ye.iceConnectionState}`,qe,Oe),this.onConnectionStateChange()},this.createVideoReceiverTransformer=({enabled:ye})=>{const Ie=new Yf({enabled:ye}),{token:Xe,tag:qe,identifier:Oe,action:Te,traceId:rt}=this;Ie.on($0,Tt=>{this.emit(Nd,Tt)});const mt=function(Tt,Dn){let pn=0;return function(...Qn){const gi=Date.now();gi-pn>=Dn&&(pn=gi,Tt(...Qn))}}(Tt=>{const Dn=`Transform error occurred: ${Tt.type}`,pn=G0({traceId:rt,token:Xe,tag:qe,identifier:Oe,action:Te,details:Dn,stageErrorValue:Rt.TRANSFORM_UNEXPECTED_ERROR});this.logger.warn({err:pn,msg:"Error encountered when transforming receiver",error:Tt})},1e3),jt=Tt=>{const Dn=`Too many errors occurred: ${Tt.type}`,pn=G0({traceId:rt,token:Xe,tag:qe,identifier:Oe,action:Te,details:Dn,stageErrorValue:Rt.TRANSFORM_TOO_MANY_ERRORS});this.logger.error({err:pn,msg:"Too many errors encountered when transforming receiver. Shutting down transformer.",error:Tt}),Ie.destroy(),this.analyticsTracker.trackError(pn),this.emit(ot,pn)};return Ie.on(Um,Tt=>{Tt.stageErrorValue.code!==Rt.TRANSFORM_TOO_MANY_ERRORS.code?mt(Tt):jt(Tt)}),Ie},this.onConnectionStateChange=()=>{var ye;if(this.peerConnection){const Xe=this.peerConnection.connectionState||this.peerConnection.iceConnectionState,{token:qe,traceId:Oe,identifier:Te,action:rt}=this,mt=new ta(rt,qe,Oe,Xe,Te);this.analyticsTracker.trackEventNoSharedProps(mt),this.trace(qe,Oe,`connection state change: ${Xe}`,rt,Te)}const Ie=this.getConnectionState();switch(Ie){case et.CONNECTED:this.perfTracker.markActionStop(),this.emit(ms,Ie),this.statsReporter.updateMultihostConfiguration(this.audioTrackForPub,this.videoTrackForPub),(ye=this.peerConnection)===null||ye===void 0||ye.getTransceivers().forEach(Xe=>{var qe,Oe;!((Oe=(qe=Xe.receiver)===null||qe===void 0?void 0:qe.transport)===null||Oe===void 0)&&Oe.iceTransport&&Xe.receiver.transport.iceTransport.addEventListener("selectedcandidatepairchange",this.onSelectedCandidatePairChange)});break;case et.FAILED:this.emit(ms,Ie),this.handleConnectionFailure();break;default:this.emit(ms,Ie)}},this.onIncompatibleCodecs=ye=>ia(this,void 0,void 0,function*(){if(ye.forEach(qe=>{let Oe=!1;this.incompatibleCodecs.forEach(Te=>{Te.config===qe.config&&Te.mime===qe.mime&&(Oe=!0)}),Oe||this.incompatibleCodecs.add(qe)}),this.peerConnection)try{yield(Ie=this.peerConnection,Xe=[...this.incompatibleCodecs],D0(void 0,void 0,void 0,function*(){var qe;for(const Oe of Ie.getSenders()){const Te=Oe.getParameters();if(Te.codecs.length>1){const rt=Te.codecs[0];let mt=!1;for(const jt of Xe)nu(rt,jt)&&(mt=!0);if(mt){const jt=wm(Xe,Te.codecs);(qe=Te.encodings)===null||qe===void 0||qe.forEach(Tt=>{Tt.active&&(Tt.codec=jt)}),yield Oe.setParameters(Te)}}}}))}catch(qe){const{token:Oe,action:Te,traceId:rt,identifier:mt}=this,jt=new ui(Object.assign(Object.assign({},Rt.CODEC_HANDLE_INCOMPATIBLE_UNEXPECTED_ERROR),{action:Te,token:Oe,traceId:rt,tag:Da(Te,mt),location:"onIncompatibleCodecs",remoteParticipantId:mt,details:qe instanceof Error?qe.message:""}));this.analyticsTracker.trackError(jt),this.emit(Gu,jt)}var Ie,Xe}),this.token=E,this.logger=new pa(A,me.WEBRTC),this.action=M,this.tag=D,this.traceId=B,M===en.SUBSCRIBE&&!re)throw new Error("Subscribe action provided without subscriber Id");this.inBandMessagingEnabled=M===en.SUBSCRIBE?!!(!((le=J==null?void 0:J.inBandMessaging)===null||le===void 0)&&le.enabled):(pe=Xc("enableInBandMessaging"))!==null&&pe!==void 0&&pe,this.jitterBufferConfig=J==null?void 0:J.jitterBuffer,this.simulcastSubscribeConfig=J==null?void 0:J.simulcast,this.subscriberId=re,this.stageConnection=oe,this.videoSenderTransformer=new Ev({enabled:this.action===en.PUBLISH&&this.inBandMessagingEnabled}),this.videoReceiverTransformer=this.createVideoReceiverTransformer({enabled:this.action===en.SUBSCRIBE&&this.inBandMessagingEnabled}),this.perfTracker=new N0(this.action,this.traceId),this.statsReporter=new Im(M,E,B,this.identifier,this.analyticsTracker,this.videoReceiverTransformer),this.sdpExchanger=function(ye){const{connection:Ie,token:Xe,action:qe,identifier:Oe,tracker:Te}=ye,rt=Ie&&Ie.supportsSdpExchange(),mt=qe===en.SUBSCRIBE&&rt&&!iv(),jt=qe===en.PUBLISH&&rt&&im()&&!iv();return mt||jt?new H0(Xe,Ie,{action:qe,remoteParticipantId:Oe},Te):new bv(Xe,{action:qe,remoteParticipantId:Oe},Te)}({connection:oe,action:M,token:E,identifier:this.identifier,tracker:G}),this.handlePublishingChangedBinding=this.handlePublishingChanged.bind(this),this.toggleStageConnectionListeners(!0)}get videoMediaId(){var E,A;return(A=(E=this.videoTransceiver)===null||E===void 0?void 0:E.mid)!==null&&A!==void 0?A:null}toggleStageConnectionListeners(E){var A,M;E?(A=this.stageConnection)===null||A===void 0||A.on(To,this.handlePublishingChangedBinding):(M=this.stageConnection)===null||M===void 0||M.off(To,this.handlePublishingChangedBinding)}updateSubscribeConfig(E){var A,M;this.jitterBufferConfig=E.jitterBuffer,this.simulcastSubscribeConfig=E.simulcast,this.action===en.SUBSCRIBE&&(this.inBandMessagingEnabled=E.inBandMessaging.enabled),this.applyJitterBufferMinDelayConditionally((M=(A=this.stageConnection)===null||A===void 0?void 0:A.getIsStagePublishing())!==null&&M!==void 0&&M)}verifyOrUpdateTransceiverSync(){var E,A;return ia(this,void 0,void 0,function*(){if(this.videoTrackForPub){const M=this.getTransceiverForKind("video");M?this.videoTrackForPub.track.id!==((E=M.sender.track)===null||E===void 0?void 0:E.id)&&(this.logger.debug({msg:"found out of sync video transceiver... updating"}),yield this.replaceOrUpdateTrack(this.videoTrackForPub)):this.logger.warn({msg:"missing transceiver for video"})}if(this.audioTrackForPub){const M=this.getTransceiverForKind("audio");M?this.audioTrackForPub.track.id!==((A=M.sender.track)===null||A===void 0?void 0:A.id)&&(this.logger.debug({msg:"found out of sync audio transceiver... updating"}),yield this.replaceOrUpdateTrack(this.audioTrackForPub)):this.logger.warn({msg:"missing transceiver for audio"})}})}start(){var E,A,M;return ia(this,void 0,void 0,function*(){const{token:D,action:B,traceId:G,identifier:re}=this;B!==en.PUBLISH||D.claims.capabilities.allow_publish||this.analyticsTracker.trackErrorAndThrow(new ui(Object.assign(Object.assign({},Dd(Rt.TOKEN_PERMISSIONS_DENIED,new Error("Cannot publish with subscribe only token"))),{action:B,token:D,traceId:G,tag:Da(B,re),location:"StagePeerClient.start",remoteParticipantId:re})));const oe=function({action:J,identifier:le,token:pe,analyticsTracker:ye}){let Ie="";const Xe=yc(pe,ye);switch(J){case en.PUBLISH:Ie=Xe.getPublishEndpoint();break;case en.SUBSCRIBE:le&&(Ie=Xe.getSubscribeEndpoint(le))}return Ie}({action:B,identifier:re,token:D.rawToken,analyticsTracker:this.analyticsTracker});try{this.perfTracker.markActionStart(),this.stageCapabilities={simulcastNegotiated:(M=(A=(E=this.videoTrackForPub)===null||E===void 0?void 0:E.config)===null||A===void 0?void 0:A.simulcastEnabled)!==null&&M!==void 0&&M},this.endpointURL=oe,this.peerConnection=new RTCPeerConnection({iceTransportPolicy:"all"}),this.statsReporter.start(this.peerConnection,this.stageCapabilities.simulcastNegotiated),this.peerConnection.addEventListener("connectionstatechange",this.onConnectionStateChange),this.peerConnection.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.peerConnection.addEventListener("icecandidateerror",this.onIceCandidateError),this.peerConnection.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this.peerConnection.addEventListener("icecandidate",this.onIceCandidate),this.peerConnection.addEventListener("track",this.onTrack),this.peerConnection.addEventListener("mute",this.onMute),this.peerConnection.addEventListener("unmute",this.onUnMute),this.trace(D,G,"peer connection created",B,re)}catch(J){const le=new ui(Object.assign(Object.assign({action:B},Dd(Rt.CREATE_PEER_CONNECTION_FAILURE,J)),{token:D,traceId:G,tag:Da(B,re),location:"StagePeerClient.start",remoteParticipantId:re}));B===en.PUBLISH&&this.emit(ms,et.FAILED),this.emit(Gu,le),this.analyticsTracker.trackErrorAndThrow(le)}})}mungeSdpOffer(E,A,M){if(M.simulcastNegotiated&&(E=new dr(E).withVideoLayersAllocationRtpHeaderExtension().sdp),A===en.SUBSCRIBE)E=new dr(E).withOpusAudioConfig(ga(ki),!0).sdp;else if(A===en.PUBLISH&&M.audioConfig){const{maxBitrateBps:D,stereo:B}=M.audioConfig;E=new dr(E).withOpusAudioConfig(D,B).sdp}return E}mungeSdpAnswer(E){return Nr.browser.isFirefox()&&this.audioTrackForPub&&this.action===en.PUBLISH&&(E=new dr(E).withOpusAudioConfig(this.audioTrackForPub.config.maxBitrateBps,void 0).sdp),E}stop(){var E,A,M,D,B,G,re,oe,J;this.statsReporter.stop(),this.videoReceiverTransformer.destroy(),this.videoSenderTransformer.destroy(),(E=this.peerConnection)===null||E===void 0||E.removeEventListener("connectionstatechange",this.onConnectionStateChange),(A=this.peerConnection)===null||A===void 0||A.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),(M=this.peerConnection)===null||M===void 0||M.removeEventListener("icecandidateerror",this.onIceCandidateError),(D=this.peerConnection)===null||D===void 0||D.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),(B=this.peerConnection)===null||B===void 0||B.removeEventListener("track",this.onTrack),(G=this.peerConnection)===null||G===void 0||G.removeEventListener("mute",this.onMute),(re=this.peerConnection)===null||re===void 0||re.removeEventListener("unmute",this.onUnMute),(oe=this.peerConnection)===null||oe===void 0||oe.removeEventListener("icecandidate",this.onIceCandidate),(J=this.peerConnection)===null||J===void 0||J.close()}getTransceiverForKind(E){if(!this.peerConnection)return;const A=this.peerConnection.getTransceivers();return E==="audio"?A.find(M=>M.mid==="0"):E==="video"?A.find(M=>M.mid==="1"):void 0}removeTrack(E){return ia(this,void 0,void 0,function*(){if(E==="audio"||E==="video")if(this.peerConnection)try{const A=this.getTransceiverForKind(E);if(!A)return void this.logger.warn({msg:`tried removing track type ${E} but couldn't find transceiver`});yield A.sender.replaceTrack(null),E===bc.AUDIO?this.audioTrackForPub=void 0:this.videoTrackForPub=void 0,yield this.statsReporter.updateMultihostConfiguration(this.audioTrackForPub,this.videoTrackForPub)}catch(A){this.logger.warn({msg:"error replacing track",err:A})}else E===bc.AUDIO?this.audioTrackForPub=void 0:this.videoTrackForPub=void 0;else this.logger.warn({msg:"RemoveTrack called with invalid track type",trackType:E})})}replaceOrUpdateTrack(E){return ia(this,void 0,void 0,function*(){if(E.track){if(Tl(E)?this.audioTrackForPub=E:km(E)&&(this.videoTrackForPub=E),this.peerConnection)try{const A=this.getTransceiverForKind(E.track.kind);if(!A)return void this.logger.warn({msg:`tried replacing track type ${E.track.kind} but couldn't find transceiver`,track:E.track});if(km(E)){const M=A.sender.getParameters(),D=au(this.stageCapabilities.simulcastNegotiated,E);M.encodings=M.encodings.map(B=>{var G;const re=(G=B.rid)!==null&&G!==void 0?G:"",oe=D.find(J=>{var le;return((le=J.rid)!==null&&le!==void 0?le:"")===re});return oe?Object.assign(Object.assign({},B),oe):B}),yield A.sender.setParameters(M)}else if(Tl(E)){const M=A.sender.getParameters(),D=Tc(E)[0];M.encodings=M.encodings.map(B=>Object.assign(Object.assign({},B),D)),yield A.sender.setParameters(M)}yield A.sender.replaceTrack(E.track),yield this.statsReporter.updateMultihostConfiguration(this.audioTrackForPub,this.videoTrackForPub)}catch(A){this.logger.warn({msg:"error replacing track",err:A})}}else this.logger.warn({msg:"Unexpected call to replaceOrUpdateTrack with no track"})})}initializePeerConnection(E=!1){var A,M,D;return ia(this,void 0,void 0,function*(){const{traceId:B,token:G,action:re,identifier:oe}=this;cm(this.peerConnection);let J=new MediaStream;if(re===en.PUBLISH){this.audioTrackForPub||(this.audioTrackForPub={track:this.getSilentAudio(),config:{maxBitrateBps:ga(Em),stereo:!1}});const le=this.peerConnection.getTransceivers(),pe=[];le.forEach(Te=>{var rt;pe.concat((rt=Te.sender.track)===null||rt===void 0?void 0:rt.id)}),J=new MediaStream([this.audioTrackForPub.track,(A=this.videoTrackForPub)===null||A===void 0?void 0:A.track].filter(Te=>!!Te&&!pe.includes(Te.id)));const ye=J.getAudioTracks()[0]||"audio",Ie=J.getVideoTracks()[0]||"video",Xe={direction:"sendonly",streams:[J],sendEncodings:Tc(this.audioTrackForPub)},qe={direction:"sendrecv",streams:[J],sendEncodings:au(this.stageCapabilities.simulcastNegotiated,this.videoTrackForPub)};this.peerConnection.addTransceiver(ye,Xe),this.trace(G,B,`track added, type: ${ye.kind||ye}`,re,oe);const Oe=this.peerConnection.addTransceiver(Ie,qe);this.trace(G,B,`track added, type: ${Ie.kind||Ie}`,re,oe),this.inBandMessagingEnabled&&!Ev.isSupported(Oe)&&this.handleTransformNotSupported(),this.videoSenderTransformer.onTransceiverAdd(Oe)}else re===en.SUBSCRIBE&&(G.shouldSendSilentAudio()?this.peerConnection.addTransceiver(this.getSilentAudio(),{direction:"sendrecv"}):this.peerConnection.addTransceiver("audio",{direction:"recvonly"}),this.trace(G,B,"track added, type: audio",re,oe),E||(this.videoTransceiver=this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.trace(G,B,"track added, type: video",re,oe),this.inBandMessagingEnabled&&!Yf.isSupported(this.videoTransceiver)&&this.handleTransformNotSupported(),this.videoReceiverTransformer.onTransceiverAdd(this.videoTransceiver)),this.peerConnection.getTransceivers().forEach(le=>{le.receiver?(this.logger.info({msg:"dbg: Subscribe succeeded, adding media track to participant mediaStream"}),J==null||J.addTrack(le.receiver.track)):this.logger.info({msg:"dbg: Subscribe succeeded, but Transceiver were negotiated without Receiver"})}),this.applyJitterBufferMinDelayConditionally((D=(M=this.stageConnection)===null||M===void 0?void 0:M.getIsStagePublishing())!==null&&D!==void 0&&D));return J})}handlePublishingChanged(E){this.logger.debug({msg:`[handlePublishingChanged (${this.subscriberId})] isStagePublishing: ${E}, currentMinDelay: ${this.currentJitterBufferMinDelayInMs}`}),this.action===en.SUBSCRIBE&&this.applyJitterBufferMinDelayConditionally(E)}applyJitterBufferMinDelayConditionally(E){const A=this.currentJitterBufferMinDelayInMs,M=this.calcJitterBufferMinDelay(E,this.jitterBufferConfig);if(E){if(A===void 0||A>M){const D=`[applyJitterBufferMinDelayConditionally (${this.subscriberId})] participant is publishing and min delay is unset or > configured; attempting to update to ${M}`;this.logger.debug({msg:D}),this.trace(this.token,this.traceId,D,this.action,this.identifier),this.applyAndTrackJitterBufferMinDelay(M)}}else if(A===void 0||M!==A){const D=`[applyJitterBufferMinDelayConditionally (${this.subscriberId})] participant is subscribe-only and min delay is unset or != configured; attempting to update to ${M}`;this.logger.debug({msg:D}),this.trace(this.token,this.traceId,D,this.action,this.identifier),this.applyAndTrackJitterBufferMinDelay(M)}}calcJitterBufferMinDelay(E,A){var M,D,B;let G=0;if(!(()=>{const re=RTCRtpReceiver.prototype;return!(!re||typeof re!="object")&&("jitterBufferTarget"in re||"playoutDelayHint"in re)})())return 0;if(E)G=na((M=A==null?void 0:A.minDelayWhenPublishing)!==null&&M!==void 0?M:ls.DEFAULT,E);else{G=na((D=A==null?void 0:A.minDelayWhenSubscribeOnly)!==null&&D!==void 0?D:ls.DEFAULT,E);const re=(B=this.stageConnection)===null||B===void 0?void 0:B.jitterBufferMinDelayInMs();(A==null?void 0:A.minDelayWhenSubscribeOnly)===ls.DEFAULT&&re!==void 0&&(G=re,this.logger.debug({msg:`[calcJitterBufferMinDelay] overriding min delay with remote value: ${G}`}))}return G}applyAndTrackJitterBufferMinDelay(E){var A,M;this.currentJitterBufferMinDelayInMs=E,this.statsReporter.updateJitterBufferMinDelay(E),E!==void 0&&((M=(A=this.peerConnection)===null||A===void 0?void 0:A.getTransceivers())===null||M===void 0||M.forEach(D=>{D.receiver&&this.applyJitterBufferMinDelay(D.receiver,E)}))}applyJitterBufferMinDelay(E,A){let M="Unable to set jitter buffer min delay";if("jitterBufferTarget"in E)M=`setting jitterBufferTarget to: ${A} for track: ${E.track.kind}`,this.logger.debug({msg:M}),E.jitterBufferTarget=A;else if("playoutDelayHint"in E){const D=A/1e3;M=`setting playoutDelayHint to: ${A} for track: ${E.track.kind}`,this.logger.debug({msg:M}),E.playoutDelayHint=D}else this.logger.warn({msg:M});this.trace(this.token,this.traceId,M,this.action,this.identifier)}exchangeSdp(E){var A;return ia(this,void 0,void 0,function*(){const{traceId:M,token:D,action:B,identifier:G,tag:re,endpointURL:oe}=this,{iceRestart:J=!1,nodeOverride:le,assignmentToken:pe,abortController:ye}=E;let Ie;this.logger.debug({msg:`Exchanging SDP: ${M.value}, iceRestart=${J}, nodeOverride=${le}, assignmentToken=${pe}`}),cm(this.peerConnection),B===en.PUBLISH&&Qa()&&(this.logger.debug({msg:"Applying publisher codec preference for main profile."}),((qe,Oe)=>{var Te,rt;const mt=(Te=RTCRtpReceiver.getCapabilities("video"))===null||Te===void 0?void 0:Te.codecs;if(!mt)return;let jt=mt;jt=xm(mt,"42e0"),Oe.preferMainProfile&&(jt=xm(mt,"4d00")),(rt=qe.getTransceivers().find(Tt=>Tt.receiver.track.kind==="video"))===null||rt===void 0||rt.setCodecPreferences(jt)})(this.peerConnection,{preferMainProfile:Qa()}));try{this.trace(D,M,"Creating offer",B,G),Ie=yield this.peerConnection.createOffer({iceRestart:J})}catch(qe){const Oe=new ui(Object.assign(Object.assign({},Dd(Rt.CREATE_OFFER_FAILURE,qe)),{action:B,token:D,traceId:M,tag:re,location:"exchangeSdp",remoteParticipantId:G}));this.emit(Gu,Oe),this.analyticsTracker.trackErrorAndThrow(Oe)}Ie.sdp&&(Ie.sdp=this.mungeSdpOffer(Ie.sdp,B,{simulcastNegotiated:this.stageCapabilities.simulcastNegotiated,audioConfig:(A=this.audioTrackForPub)===null||A===void 0?void 0:A.config})),this.trace(D,M,"Setting local description",B,G),yield this.peerConnection.setLocalDescription(Ie),this.trace(D,M,"local description set",B,G),oe||this.logger.warn({msg:"Unexpected state: No endpointURL specified for fetching of remote description."});const Xe=B===en.PUBLISH&&Qa()||B===en.SUBSCRIBE&&Xc("multiCodecAnswer");yield this.fetchAndSetRemoteDescription({endpointURL:oe,nodeOverride:le,assignmentToken:pe,multiCodec:Xe,abortController:ye})})}getReports(){var E;return ia(this,void 0,void 0,function*(){try{const A=(yield(E=this.peerConnection)===null||E===void 0?void 0:E.getStats())||[],M=[];return A.forEach(D=>{M.push(D)}),M}catch{return[]}})}requestRTCStats(E){return ia(this,void 0,void 0,function*(){if(this.peerConnection)return this.peerConnection.getStats(E)})}get identifier(){return this.subscriberId||this.token.participantID}handleTransformNotSupported(){const{token:E,tag:A,identifier:M,action:D,traceId:B}=this,G=G0({traceId:B,token:E,tag:A,identifier:M,action:D,stageErrorValue:Rt.TRANSFORM_NOT_SUPPORTED_BY_PLATFORM});this.logger.error({err:G,msg:"Transforms not supported by this platform"}),this.analyticsTracker.trackError(G),this.emit(ot,G)}handleConnectionFailure(){return ia(this,void 0,void 0,function*(){const{token:E,traceId:A,tag:M}=this;this.analyticsTracker.trackError(new ui(Object.assign(Object.assign({},Rt.PEER_CONNECTION_NETWORK_FAILURE),{action:this.action,token:E,traceId:A,tag:M,location:"onIceCandidateError",remoteParticipantId:this.identifier})))})}getSilentAudio(){Xf||(Xf=new AudioContext);const E=Xf.createOscillator(),A=Xf.createGain();E.connect(A);const M=Xf.createMediaStreamDestination();return A.connect(M),A.gain.value=0,E.start(),M.stream.getAudioTracks()[0]}getActionMeasurements(){return this.perfTracker.getMeasurements()}initTracksToPublish(E){this.videoTrackForPub=E.find(km),this.audioTrackForPub=E.find(Tl)}getSfuResource(){return this.sfuResource}getExpectedJitterBufferMinDelayInMs(){var E,A;return this.calcJitterBufferMinDelay((A=(E=this.stageConnection)===null||E===void 0?void 0:E.getIsStagePublishing())!==null&&A!==void 0&&A,this.jitterBufferConfig)}trace(E,A,M,D,B){this.analyticsTracker.trackEventNoSharedProps(new Bf(E,A,M,D,B))}sendSeiMessage(E){var A;this.action===en.PUBLISH&&((A=this.videoSenderTransformer)===null||A===void 0||A.sendSeiMessage(E))}}const Tv=en.SUBSCRIBE;class Mc{constructor(E,A,M){this.analyticsTracker=E,this.token=A,this.remoteId=M,this.action=Tv}trackAttempt({stageConnectionStats:E,isReassignment:A=!1,traceIdOverride:M,preAttemptSfuResource:D}){const{action:B,analyticsTracker:G,token:re,remoteId:oe}=this,J=M||So();return G.trackEvent(new qf({token:this.token,subscribedId:this.remoteId,traceId:J,isEdpConnected:E.isConnected,isReassignment:A,preAttemptSfuResource:D})),{getTraceId:()=>J,trackSubscribeStarted({totalDurationWithRetries:le,retryTimes:pe,sfuResource:ye,peerClientPerfStats:Ie}){const{optionsDuration:Xe,postDuration:qe,timeToCandidate:Oe,timeToConnected:Te,sdpExchangeDuration:rt,sdpExchangeTransport:mt,setRemoteDescDuration:jt,peerConnectionDuration:Tt}=Ie,{edpInitialConnectDuration:Dn,edpInitialConnectRetries:pn,edpInitialStateDuration:Qn,edpInitialStatePublishingCount:gi,edpStateUpdateCount:hi}=E;G.trackEvent(new Vd({token:re,traceId:J,remoteParticipantId:oe,optionsDuration:Xe,postDuration:qe,timeToCandidate:Oe,totalDuration:Te,edpInitialConnectDuration:Dn,edpInitialConnectRetries:pn,edpInitialStateDuration:Qn,edpInitialStatePublishingCount:gi,edpStateUpdateCount:hi,sdpExchangeDuration:rt,sdpExchangeTransport:mt,setRemoteDescDuration:jt,peerConnectionDuration:Tt,sfuResource:ye,totalDurationWithRetries:le,subscribeRetryTimes:pe,isReassignment:A}))},trackSubscribeFirstFrame:({peerClientPerfStats:le,totalDurationWithRetries:pe,sfuResource:ye,retryTimes:Ie,currentJitterBufferMinDelayInMs:Xe,mediaType:qe,firstFrameDuration:Oe})=>{const{sdpExchangeDuration:Te,sdpExchangeTransport:rt,setRemoteDescDuration:mt,peerConnectionDuration:jt}=le,{edpInitialConnectDuration:Tt,edpInitialConnectRetries:Dn,edpInitialStateDuration:pn,edpInitialStatePublishingCount:Qn,edpStateUpdateCount:gi}=E;this.analyticsTracker.trackEvent(new _S({token:this.token,traceId:J,remoteParticipantId:oe,edpInitialConnectDuration:Tt,edpInitialConnectRetries:Dn,edpInitialStateDuration:pn,edpInitialStatePublishingCount:Qn,edpStateUpdateCount:gi,sdpExchangeDuration:Te,sdpExchangeTransport:rt,setRemoteDescDuration:mt,peerConnectionDuration:jt,videoWasPaused:!1,firstFrameDuration:Oe,mediaType:qe,sfuResource:ye,totalDurationWithRetries:pe,subscribeRetryTimes:Ie,currentJitterBufferMinDelayInMs:Xe}))},trackSubscribeFailed(le,pe){const ye=((qe,Oe,Te)=>{if(qe instanceof ui)return qe;let rt="";return qe instanceof qr.AxiosError&&(rt+=`AxiosError - ${qe.code}`),new ui(Object.assign(Object.assign(Object.assign({},Rt.SUBSCRIBE_FAILURE),{action:Tv,token:Oe,traceId:Te,tag:Eo.SUBSCRIBE_RELATED,location:"subscribe",details:`${rt} ${qe==null?void 0:qe.message}`}),{fatal:!0}))})(le,re,J);G.trackEvent(new F0({token:re,traceId:J,remoteParticipantId:oe,code:ye.code,message:ye.message,fatal:ye.fatal,nominal:ye.nominal,isReassignment:A}));const{isConnected:Ie}=E,Xe=new ui(Object.assign(Object.assign({},Rt.SUBSCRIBE_FAILURE),{action:B,token:re,traceId:J,tag:Da(en.SUBSCRIBE,oe),location:"subscribe",remoteParticipantId:oe,isEdpConnected:Ie,details:pe}));return le instanceof ui&&(Xe.fatal=le.fatal,Xe.nominal=le.nominal,Xe.location=`subscribe > ${le.location}`),G.trackError(Xe),ye},trackUnsubscribe:()=>{G.trackEvent(new gS({token:re,unsubscribedId:oe,traceId:J}))},trackEndSucceeded:le=>{G.trackEvent(new $f({token:re,traceId:J,remoteParticipantId:oe,isUnsubscribeSuccessful:!0,reason:le}))},trackEndFailed:le=>{const pe=new ui(Object.assign(Object.assign({},Rt.UNSUBSCRIBE_FAILURE),{token:re,traceId:J,tag:Da(en.SUBSCRIBE,oe),location:"unsubscribe",remoteParticipantId:oe}));return le!==Hs.UNLOAD&&le!==Hs.UNSUBSCRIBE||G.trackError(pe),G.trackEvent(new $f({token:re,traceId:J,remoteParticipantId:oe,isUnsubscribeSuccessful:!0,reason:le})),pe}}}}class qd extends On{constructor(E,A,M,D,B,G){super(on.PLAYBACK_LAYER_REQUEST,E,A,!1),Object.assign(this.properties,{media_type:M,remote_participant_id:D,track_id:B,layer_id:G})}}class W0 extends On{constructor(E,A,M,D,B,G=1){super(on.PLAYBACK_LAYER_STATE,E,A,!1),Object.assign(this.properties,{media_type:M,remote_participant_id:D,track_id:B,request_count:G})}}var Kf,ra,Zf,Ns;(function(O){O.PAUSE="pause",O.PLAY="play"})(Kf||(Kf={})),function(O){O.IDLE="idle",O.ACTIVE="active",O.ERRORED="errored",O.DESTROYED="destroyed"}(ra||(ra={})),function(O){O.SUCCESS="success"}(Zf||(Zf={})),function(O){O.FAILED="failed",O.DESTROYED="destroyed",O.THROTTLED="throttled"}(Ns||(Ns={}));var ou=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class TS{constructor(E){this.state=ra.IDLE,this.mid=null,this.playbackEndpoint=null,this.layersEndpoint=null,this.stopVideo=()=>ou(this,void 0,void 0,function*(){return this.state!==ra.ACTIVE?(this.logCommandSkipped("stopVideo"),this.mapSkippedResultFromState(this.state)):this.sendPlaybackRequest(Kf.PAUSE)}),this.startVideo=()=>ou(this,void 0,void 0,function*(){return this.state!==ra.ACTIVE?(this.logCommandSkipped("startVideo"),this.mapSkippedResultFromState(this.state)):this.sendPlaybackRequest(Kf.PLAY)}),this.setLayer=A=>ou(this,void 0,void 0,function*(){return this.state!==ra.ACTIVE?(this.logCommandSkipped("setLayer"),this.mapSkippedResultFromState(this.state)):this.sendLayerRequest(A)}),this.unsetLayer=()=>ou(this,void 0,void 0,function*(){return this.state!==ra.ACTIVE?(this.logCommandSkipped("unsetLayer"),this.mapSkippedResultFromState(this.state)):this.sendLayerRequest()}),this.getLayers=()=>ou(this,void 0,void 0,function*(){return this.state!==ra.ACTIVE?(this.logCommandSkipped("getLayers"),this.mapSkippedResultFromState(this.state)):this.sendLayerStateRequest()}),this.sendPlaybackRequest=A=>ou(this,void 0,void 0,function*(){if(!this.mid)return this.logger.warn({msg:"mid is unexpectedly undefined"}),(0,Bn.err)(Ns.FAILED);if(!this.playbackEndpoint)return this.logger.warn({msg:"Playback endpoint is unset and required for playback control requests"}),(0,Bn.err)(Ns.FAILED);this.logger.info({msg:`Sending ${A} request to ${this.playbackEndpoint}`});const M=A===Kf.PAUSE?{pause:[this.mid]}:{play:[this.mid]},D=this.createPostWhepRequest(M);return fetch(this.playbackEndpoint,D).then(B=>B.status>=300?(new Error(`Error sending media controls request: ${B.status}:${B.statusText}`),this.logger.error({err:Bn.err}),(0,Bn.err)(Ns.FAILED)):(this.logger.debug({msg:`Request to ${A} was successful: ${B.status}`}),(0,Bn.ok)(Zf.SUCCESS))).catch(B=>(this.logger.error({err:B,msg:"Error sending media controls request"}),(0,Bn.err)(Ns.FAILED)))}),this.sendLayerRequest=A=>ou(this,void 0,void 0,function*(){if(!this.mid)return this.logger.warn({msg:"mid is unexpectedly undefined"}),(0,Bn.err)(Ns.FAILED);if(!this.layersEndpoint)return this.logger.warn({msg:"Layers endpoint is unset and required for layer requests"}),(0,Bn.err)(Ns.FAILED);const M=typeof A=="string",D=M?{mediaId:this.mid,encodingId:A}:{},B=M?`set : ${A}`:"unset layer";this.logger.info({msg:`sendLayerRequest for ${B} at ${this.layersEndpoint}`});const G=this.createPostWhepRequest(D);return this.trackLayerRequest(A??"auto"),fetch(this.layersEndpoint,G).then(re=>this.state===ra.DESTROYED?(0,Bn.err)(Ns.DESTROYED):re.status>=300?this.handleLayerRequestError(re.status,re.statusText):(this.logger.debug({msg:`Request to ${B} was successful: ${re.status}`}),(0,Bn.ok)(Zf.SUCCESS))).catch(re=>this.handleLayerRequestError(0,re.message))}),this.sendLayerStateRequest=()=>ou(this,void 0,void 0,function*(){if(!this.mid)return this.logger.warn({msg:"mid is unexpectedly undefined"}),(0,Bn.err)(Ns.FAILED);if(!this.layersEndpoint)return this.logger.warn({msg:"Layers endpoint is unset and required for layer requests"}),(0,Bn.err)(Ns.FAILED);this.logger.info({msg:`sendLayerStateRequest for ${this.mid} at ${this.layersEndpoint}`});const A=this.createGetWhepRequest();return this.trackLayerStateRequest(),fetch(this.layersEndpoint,A).then(M=>ou(this,void 0,void 0,function*(){var D;if(this.state===ra.DESTROYED)return(0,Bn.err)(Ns.DESTROYED);if(M.status>=300)return this.handleLayerStateRequestError(M.status,M.statusText);const B=yield M.json(),G=(D=B==null?void 0:B.layers)!==null&&D!==void 0?D:[],re=JSON.stringify(G,null,2);return this.logger.debug({msg:`sendLayerStateRequest was successful: ${re}`}),(0,Bn.ok)(G)})).catch(M=>this.handleLayerStateRequestError(0,M.message))}),this.logger=new pa(E.logger,me.REMOTE_PLAYBACK),this.token=E.token,this.traceId=E.traceId,this.analyticsTracker=E.analyticsTracker,this.remoteParticipantId=E.remoteParticipantId}set mediaId(E){if(this.state!==ra.DESTROYED){if(this.mid=E,this.mid===null)return this.logger.info({msg:"media id is unset, controller is transitioning to idle state"}),void(this.state=ra.IDLE);(this.playbackEndpoint||this.layersEndpoint)&&(this.state=ra.ACTIVE)}else this.logCommandSkipped("set mediaId")}set endpoints(E){var A,M;if(this.state!==ra.DESTROYED){if(this.playbackEndpoint=(A=E.playback)!==null&&A!==void 0?A:null,this.layersEndpoint=(M=E.layers)!==null&&M!==void 0?M:null,!this.playbackEndpoint||!this.layersEndpoint){const D={playbackEndpoint:this.playbackEndpoint,layersEndpoint:this.layersEndpoint};return this.logger.info({msg:`no endpoints are set, transitioning to idle state: ${JSON.stringify(D,null)}`}),void(this.state=ra.IDLE)}this.mid&&(this.state=ra.ACTIVE)}else this.logCommandSkipped("set endpoints")}destroy(){this.state=ra.DESTROYED,this.mid=null,this.playbackEndpoint=null,this.layersEndpoint=null}logCommandSkipped(E="command"){this.logger.info({msg:`skipping ${E}, controller state invalid: ${this.state}`})}mapSkippedResultFromState(E){return E===ra.DESTROYED?(0,Bn.err)(Ns.DESTROYED):(0,Bn.err)(Ns.FAILED)}createPostWhepRequest(E){return{method:"POST",headers:this.createRequestHeaders(),body:JSON.stringify(E)}}createGetWhepRequest(){return{method:"GET",headers:this.createRequestHeaders()}}createRequestHeaders(){var E,A;return{Authorization:`Bearer ${this.token.rawToken}`,"Content-Type":"application/json","X-Stages-Platform":"web","X-Stages-Request-ID":js().value,"X-Stages-SDK":"1.19.0","X-Stages-Session-ID":this.analyticsTracker.getSessionId(),"X-Stages-Trace-ID":(A=(E=this.traceId)===null||E===void 0?void 0:E.value)!==null&&A!==void 0?A:"","X-Stages-WHIP-Version":wo}}trackLayerRequest(E){var A;this.analyticsTracker.trackEventNoSharedProps(new qd(this.token,this.traceId,zt.VIDEO,this.remoteParticipantId,(A=this.mid)!==null&&A!==void 0?A:"unknown",E))}trackLayerStateRequest(E=1){var A;this.analyticsTracker.trackEventNoSharedProps(new W0(this.token,this.traceId,zt.VIDEO,this.remoteParticipantId,(A=this.mid)!==null&&A!==void 0?A:"unknown",E))}handleLayerRequestError(E,A){const M=`sendLayerRequest failed for reason: ${E} ${A}`;let D,B;return E===429?(D=Ns.THROTTLED,B=Rt.WHEP_SET_LAYER_REQUEST_THROTTLED):(D=Ns.FAILED,B=Rt.WHEP_SET_LAYER_REQUEST_FAILED),this.trackRequestError(B,M),(0,Bn.err)(D)}handleLayerStateRequestError(E,A){const M=`sendLayerStateRequest failed for reason: ${E} ${A}`;let D,B;return E===429?(D=Ns.THROTTLED,B=Rt.WHEP_GET_LAYER_STATE_THROTTLED):(D=Ns.FAILED,B=Rt.WHEP_GET_LAYER_STATE_FAILED),this.trackRequestError(B,M),(0,Bn.err)(D)}trackRequestError(E,A){const M=new Error(A);this.logger.error({err:M}),E.message=A;const D=this.createError(E);this.analyticsTracker.trackError(D)}createError(E,A){return new ui(Object.assign({action:en.SUBSCRIBE,traceId:this.traceId,token:this.token,location:"RemotePlaybackController",tag:Eo.SUBSCRIBE_RELATED,details:A},E))}}var Jf,xv,so,Ba,Fa=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})},Y0=function(O,E,A,M){if(A==="a"&&!M)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?O!==E||!M:!E.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?M:A==="a"?M.call(O):M?M.value:E.get(O)};(function(O){O.DISCONNECTED="disconnected",O.CONNECTING="connecting",O.CONNECTED="connected",O.ERRORED="errored"})(so||(so={})),function(O){O.NONE="none",O.AUDIO_ONLY="audio_only",O.AUDIO_VIDEO="audio_video"}(Ba||(Ba={}));class xS extends Ko{constructor(E,A,M,D,B,G,re){super(),this.id=E,this.token=A,this.stageConnection=M,this.nonScopedLogger=D,this.analyticsTracker=B,this.desiredSubscribeType=G,Jf.add(this),this.isSubscriptionActive=!1,this.subscriptionState={connectionState:so.DISCONNECTED,subscribeInProgress:!1},this.previousSignalState={isTargetPublishing:!1},this.failedRetries=0,this.startConnectingTimestamp=-1,this.throttler=new _m(1e3),this.cleanupFirstFrameTracking=bm,this.actualSubscribeType=Ba.NONE,this.action=en.SUBSCRIBE,this.updateDesiredSubscribeType=J=>{this.desiredSubscribeType=J,this.attemptToActualizeSubscribeType()},this.updateSubscribeConfig=J=>{this.peerClient.updateSubscribeConfig(J)},this.getDesiredSubscribeType=()=>this.desiredSubscribeType,this.attemptToActualizeSubscribeType=()=>{const J=this.actualSubscribeType,le=this.desiredSubscribeType;this.logger.debug({msg:`Attempt to actualize subscribe type to ${le}`}),this.subscriptionState.connectionState===so.CONNECTED&&le!==Ba.NONE&&J!==le&&this.applyVideoControlsBySubscribeType(le,J)},this.onParticipantUpdated=J=>{Y0(this,Jf,"m",xv).call(this,J)&&(this.logger.debug({msg:"onParticipantUpdated",participant:J}),this.processStateUpdate({isTargetPublishing:J.isPublishing}))},this.onParticipantJoined=J=>{Y0(this,Jf,"m",xv).call(this,J)&&(this.logger.debug({msg:"onParticipantJoined",participant:J}),this.processStateUpdate({isTargetPublishing:J.isPublishing}))},this.onParticipantLeft=J=>{Y0(this,Jf,"m",xv).call(this,J)&&(this.logger.debug({msg:"onParticipantLeft",participant:J}),this.processStateUpdate({isTargetPublishing:!1}))},this.requestRTCStats=J=>Fa(this,void 0,void 0,function*(){return this.peerClient.requestRTCStats(J)}),this.trySubscribe=J=>Fa(this,void 0,void 0,function*(){if(this.logger.debug({msg:`Subscribe attempt started: ${J}`}),!this.isSubscriptionActive)return this.logger.warn({msg:"Subscribe attempt invalid: Subscription is inactive"}),!1;this.logger.debug({msg:"Subscribe attempt is valid."}),this.startConnectingTimestamp<0&&(this.startConnectingTimestamp=performance.now()),this.subscriptionState.connectionState!==so.ERRORED&&(this.logger.debug({msg:"Updating state to CONNECTING"}),this.updateState({connectionState:so.CONNECTING}));const le=this.stageConnection.getConnectionStats(),pe=this.peerClient.getExpectedJitterBufferMinDelayInMs(),ye=this.peerClient.getSfuResource();this.attemptTracker=this.subscribeTracker.trackAttempt({stageConnectionStats:le,preAttemptSfuResource:ye});try{this.remotePlaybackController.traceId=this.attemptTracker.getTraceId();const{mediaStream:Ie}=yield this.subscribe(this.attemptTracker.getTraceId()),Xe=performance.now()-this.startConnectingTimestamp,qe=this.peerClient.getSfuResource();this.remotePlaybackController.mediaId=this.peerClient.videoMediaId;const Oe=this.failedRetries;this.attemptToActualizeSubscribeType();const Te=this.peerClient.getActionMeasurements();if(this.attemptTracker.trackSubscribeStarted({sfuResource:qe,totalDurationWithRetries:Xe,retryTimes:Oe,peerClientPerfStats:Te}),Ie){this.cleanupFirstFrameTracking();const rt=this.actualSubscribeType,mt=this.attemptTracker,jt=(Tt,Dn)=>{mt.trackSubscribeFirstFrame({peerClientPerfStats:Te,sfuResource:qe,totalDurationWithRetries:Xe,retryTimes:Oe,currentJitterBufferMinDelayInMs:pe,mediaType:Dn,firstFrameDuration:Tt})};this.cleanupFirstFrameTracking=this.measureFirstFrameDuration({mediaStream:Ie,subscribeType:rt,callback:jt})}return this.throttler.clear(),this.failedRetries=0,this.startConnectingTimestamp=-1,Ie&&this.emit(be,Ie,this.remotePlaybackController),this.logger.debug({msg:"Subscribe attempt succeeded"}),!0}catch(Ie){const Xe=this.attemptTracker.trackSubscribeFailed(Ie);this.logger.error({log:"Subscribe attempt failed",err:Ie}),this.onTrySubscribeFailure(Xe,J)}return!1});const oe=So();this.peerClient=new Bm(A,this.nonScopedLogger,this.action,Da(this.action,E),oe,B,E,M,re),this.logger=new pa(D,me.SUBSCRIPTION),this.subscribeTracker=new Mc(this.analyticsTracker,A,E),this.remotePlaybackController=new TS({token:A,analyticsTracker:B,traceId:oe,logger:this.nonScopedLogger,remoteParticipantId:this.id})}applyVideoControlsBySubscribeType(E,A){try{E===Ba.AUDIO_ONLY?this.remotePlaybackController.stopVideo().catch(M=>{this.logger.error({err:M,msg:"Remote playback request to stop video failed"})}):E===Ba.AUDIO_VIDEO&&this.remotePlaybackController.startVideo().catch(M=>{this.logger.error({err:M,msg:"Remote playback request to start video failed"})}),this.actualSubscribeType=E,this.logger.debug({msg:`Desired subscribe type actualized from ${A} to ${E}.`})}catch(M){this.logger.error({err:M,msg:`Error updating subscribe type from ${A} to ${E}.`})}}onPeerClientConnectionStateChange(E){const A=this.stageConnection.getParticipant(this.id);this.logger.debug({msg:`onPeerClientConnectionStateChange: ${E}`,state:E,targetParticipant:A}),this.processStateUpdate({peerClientState:E})}onPeerClientTransformError(E){this.emit(ma,E)}processStateUpdate(E){const A=this.previousSignalState,M=Object.assign({},A,E);this.isSubscriptionActive?(M.isTargetPublishing?E.peerClientState===et.CONNECTED?this.updateState({connectionState:so.CONNECTED,subscribeInProgress:!0}):E.peerClientState===et.FAILED&&this.subscriptionState.subscribeInProgress&&(this.attemptTracker&&this.attemptTracker.trackEndFailed(Hs.CONNECTION_FAIL),this.updateState({subscribeInProgress:!1})):(A.isTargetPublishing&&this.subscriptionState.subscribeInProgress&&(this.logger.debug({msg:"Scheduling an unsubscribe on the event loop"}),this.unsubscribe()),this.throttler.clear(),this.updateState({connectionState:so.DISCONNECTED})),(!A.isTargetPublishing&&E.isTargetPublishing||E.peerClientState===et.FAILED)&&this.throttledTrySubscribe("onSignalState change: isTargetPublishing is now true"),Object.assign(this.previousSignalState,E)):this.logger.warn({msg:"Unexpected processStateUpdate when subscription is inactive"})}onTrySubscribeFailure(E,A){this.logger.debug({msg:"Changing/keeping state FAILED"});const M=E.fatal,D=E.code===Rt.OPERATION_ABORTED.code,B=this.failedRetries<=4;if(!D&&!M&&B){const G=1e3*Math.pow(2,this.failedRetries);this.logger.debug({msg:`Retrying in ${G}ms`}),this.failedRetries++,this.nextAttemptTimerId=window.setTimeout(()=>Fa(this,void 0,void 0,function*(){this.throttledTrySubscribe(A)}),G)}else this.updateState({connectionState:so.ERRORED}),this.emit(Wu,E),this.onTerminalFailure()}onTerminalFailure(){this.previousSignalState.isTargetPublishing=!1,this.startConnectingTimestamp=-1,this.failedRetries=0}start(){this.isSubscriptionActive=!0,this.peerClient.on(ms,this.onPeerClientConnectionStateChange,this),this.peerClient.on(om,A=>{this.remotePlaybackController.endpoints={playback:A.mediaControls,layers:A.layerControls}}),this.peerClient.on(Nd,A=>{this.emit(tu,A)}),this.peerClient.on(ot,this.onPeerClientTransformError,this),this.stageConnection.on(gm,this.onParticipantUpdated),this.stageConnection.on(Lh,this.onParticipantJoined),this.stageConnection.on($u,this.onParticipantLeft),this.stageConnection.on(Os,this.onParticipantLeft);let E=!0;if(this.stageConnection.isConnected()){const A=this.stageConnection.getParticipant(this.id);E=!!(A!=null&&A.isPublishing)}this.processStateUpdate({isTargetPublishing:E})}throttledTrySubscribe(E){return this.throttler.invoke(this.trySubscribe,E)}updateState(E){E.subscribeInProgress!==void 0&&(this.subscriptionState.subscribeInProgress=E.subscribeInProgress),E.connectionState&&this.subscriptionState.connectionState!==E.connectionState&&(this.subscriptionState.connectionState=E.connectionState,this.emit(Lf,this.subscriptionState.connectionState))}stop(E=!1){this.peerClient.off(ms,this.onPeerClientConnectionStateChange,this),this.peerClient.off(ot,this.onPeerClientTransformError,this),this.unsubscribe(E),this.throttler.clear(),this.stageConnection.off(gm,this.onParticipantUpdated),this.stageConnection.off(Lh,this.onParticipantJoined),this.stageConnection.off($u,this.onParticipantLeft),this.stageConnection.off(Os,this.onParticipantLeft),this.isSubscriptionActive=!1,this.updateState({connectionState:so.DISCONNECTED})}isActive(){return this.isSubscriptionActive}subscribe(E,A){return Fa(this,void 0,void 0,function*(){const{token:M,id:D}=this;M.assertTokenIsUnexpired(E,Da(en.SUBSCRIBE,D),"subscribe",D);const{mediaStream:B}=yield this.peerClient.connect({audioOnly:A,traceId:E});return{peerClient:this.peerClient,mediaStream:B}})}unsubscribe(E=!1){return Fa(this,void 0,void 0,function*(){if(window.clearTimeout(this.nextAttemptTimerId),this.remotePlaybackController.destroy(),!this.isSubscriptionActive||!this.attemptTracker||this.subscriptionState.connectionState===so.DISCONNECTED)return;this.cleanupFirstFrameTracking(),this.attemptTracker.trackUnsubscribe();const A=E?Hs.UNLOAD:Hs.UNSUBSCRIBE;try{E?this.peerClient.disconnect(E):yield this.peerClient.disconnect(E),this.updateState({subscribeInProgress:!1}),this.attemptTracker.trackEndSucceeded(A)}catch{this.attemptTracker.trackEndFailed(A)}})}triggerIceRestart(E){var A;return Fa(this,void 0,void 0,function*(){const M=this.stageConnection.getConnectionStats(),D=this.peerClient.getSfuResource(),B=this.subscribeTracker.trackAttempt({stageConnectionStats:M,isReassignment:!0,traceIdOverride:E.traceId,preAttemptSfuResource:D}),G=performance.now();try{this.emit(mi),this.logger.debug({msg:`Triggering attempt. Current node: ${this.peerClient.getSfuResource().node}`}),yield this.peerClient.connect({iceRestartOptions:E,traceId:E.traceId}),this.logger.debug({msg:`Successful ICE restart attempt. Current node: ${this.peerClient.getSfuResource().node}`});const re=performance.now()-G,oe=this.peerClient.getSfuResource(),J=this.peerClient.getActionMeasurements();(A=this.attemptTracker)===null||A===void 0||A.trackEndSucceeded(Hs.REASSIGNMENT),this.applyVideoControlsBySubscribeType(this.actualSubscribeType,this.actualSubscribeType),B.trackSubscribeStarted({totalDurationWithRetries:re,sfuResource:oe,retryTimes:0,peerClientPerfStats:J}),this.emit(Yu)}catch(re){this.emit(gc),this.logger.error({msg:"ICE restart attempt failed",err:re});const oe=this.peerClient.getSfuResource(),J=B.trackSubscribeFailed(re,`iceRestart=true, startNode=${D.node}, endNode=${oe==null?void 0:oe.node}`);throw J.code===Rt.SUBSCRIBE_TIMED_OUT.code&&this.onTrySubscribeFailure(J,"ice restart timeout"),re}})}measureFirstFrameDuration({mediaStream:E,subscribeType:A,callback:M}){const D=performance.now(),B=oe=>{const J=performance.now()-D;M(J,oe),oe==="audio"?re():G()};let G=bm,re=bm;return A!==Ba.AUDIO_ONLY&&(G=function(oe,J){return Uf(oe,"video",J)}(E,B)),re=function(oe,J){return Uf(oe,"audio",J)}(E,B),()=>{G(),re()}}}var Qu,$i;Jf=new WeakSet,xv=function(O){return O.id===this.id},function(O){O.JOIN_ERROR="JOIN_ERROR",O.PUBLISH_ERROR="PUBLISH_ERROR",O.SUBSCRIBE_ERROR="SUBSCRIBE_ERROR"}(Qu||(Qu={})),function(O){O[O.TOKEN_MALFORMED=1]="TOKEN_MALFORMED",O[O.TOKEN_EXPIRED=2]="TOKEN_EXPIRED",O[O.TIMEOUT=3]="TIMEOUT",O[O.FAILED=4]="FAILED",O[O.CANCELED=5]="CANCELED",O[O.STAGE_AT_CAPACITY=6]="STAGE_AT_CAPACITY",O[O.CODEC_MISMATCH=7]="CODEC_MISMATCH",O[O.TOKEN_NOT_ALLOWED=8]="TOKEN_NOT_ALLOWED"}($i||($i={}));const Jx={[$i.TOKEN_MALFORMED]:"Token is malformed",[$i.TOKEN_EXPIRED]:"Token expired and is no longer valid",[$i.TIMEOUT]:"Operation timed out",[$i.FAILED]:"Operation failed",[$i.CANCELED]:"Operation canceled",[$i.STAGE_AT_CAPACITY]:"Stage at capacity",[$i.CODEC_MISMATCH]:"Client codec is not supported",[$i.TOKEN_NOT_ALLOWED]:"Token not allowed to perform operation"},Qx={[Rt.EXPIRED_TOKEN.code]:$i.TOKEN_EXPIRED,[Rt.MALFORMED_TOKEN.code]:$i.TOKEN_MALFORMED,[Rt.TOKEN_PERMISSIONS_DENIED.code]:$i.TOKEN_NOT_ALLOWED,[Rt.OPERATION_ABORTED.code]:$i.CANCELED,[Rt.JOIN_TIMED_OUT.code]:$i.TIMEOUT,[Rt.EVENT_PLANE_WS_CREATE_FAILED.code]:$i.FAILED,[Rt.EVENT_PLANE_PONG_TIMEOUT.code]:$i.FAILED,[Rt.EVENT_PLANE_WS_UNEXPECTED_CLOSE.code]:$i.FAILED,[Rt.PUBLISH_TIMED_OUT.code]:$i.TIMEOUT,[Rt.PUBLISH_FAILURE.code]:$i.FAILED,[Rt.SUBSCRIBE_TIMED_OUT.code]:$i.TIMEOUT,[Rt.SUBSCRIBE_FAILURE.code]:$i.FAILED,[Rt.STAGE_AT_CAPACITY.code]:$i.STAGE_AT_CAPACITY,[Rt.NO_MATCHING_CODEC.code]:$i.CODEC_MISMATCH,[Rt.NETWORK_FAILURE.code]:$i.FAILED,[Rt.INTERNAL_SERVER_ERROR.code]:$i.FAILED,[Rt.REMOTE_STREAM_NOT_FOUND.code]:$i.FAILED,[Rt.INTERNAL_MHCP_ERROR.code]:$i.FAILED,[Rt.UNREACHABLE_MHCP.code]:$i.FAILED,[Rt.INVALID_SESSION_STATUS.code]:$i.FAILED,[Rt.MHCP_ABORTED.code]:$i.FAILED};class e1 extends Error{constructor(E,A,M){super(),this.code=E,this.category=A,this.message=M,this.name="StageError",this.errorDetails=[],this.message=`[${A}] ${M}`}addDetails(E){this.errorDetails.push(E)}get details(){return this.errorDetails.length?JSON.stringify(this.errorDetails):""}toString(){return`
${this.message}
details - ${this.details}
        `.trim()}}var Qf,ep,Fm;(function(O){O.ERROR="error"})(Qf||(Qf={}));class t1 extends Ko{constructor(){super(...arguments),this.handleError=(E,A,M=!0)=>{let D;if(E instanceof ui){const B=Qx[E.code];B&&(D=function(G,re,oe){var J,le;const pe=Jx[G],ye=new e1(G,re,pe);return ye.addDetails({stageErrorMessage:pe,stageErrorCode:G,stageErrorCategory:re,stageArn:(J=oe.token)===null||J===void 0?void 0:J.stageARN,traceId:(le=oe.traceId)===null||le===void 0?void 0:le.value,causeCode:oe.code,causeDetails:oe.details,causeMessage:oe.message,causeLocation:oe.location}),ye}(B,A,E))}if(D)return M&&this.emit(Qf.ERROR,D),D}}}(function(O){O.INTERNAL="internal",O.API="api"})(ep||(ep={})),function(O){O.ADDITIVE="additive",O.REPLACE="replace"}(Fm||(Fm={}));class n1{constructor(E){this.logger=new pa(E.logger,me.CONNECTION),this.subscribeConfig={defaults:E.subscribeDefaults,participants:{}}}handleSubscribeConfigUpdate(E,A,M,D=Fm.REPLACE){A=(le=>{const pe=Gf(le);if(pe.jitterBuffer!==void 0){const ye=Ie=>{if(typeof Ie=="number"){if(Ie<0)return 0;if(Ie>4e3)return 4e3}return Ie};pe.jitterBuffer.minDelayWhenPublishing!==void 0&&(pe.jitterBuffer.minDelayWhenPublishing=ye(pe.jitterBuffer.minDelayWhenPublishing)),pe.jitterBuffer.minDelayWhenSubscribeOnly!==void 0&&(pe.jitterBuffer.minDelayWhenSubscribeOnly=ye(pe.jitterBuffer.minDelayWhenSubscribeOnly))}return pe})(A),this.subscribeConfig.participants[E]===void 0&&(this.subscribeConfig.participants[E]={internalOverrides:{},apiOverrides:{},lastMerged:this.subscribeConfig.defaults});const B=this.subscribeConfig.participants[E];switch(M){case ep.INTERNAL:B.internalOverrides=this.handleSubscribeConfigLevelMerging(B.internalOverrides,A,D);break;case ep.API:B.apiOverrides=this.handleSubscribeConfigLevelMerging(B.apiOverrides,A,D);break;default:(function(le){throw new Error(`Unknown case kind: ${le}`)})(M)}const G=B0(this.subscribeConfig.defaults,B.internalOverrides,B.apiOverrides);if(G===void 0)return this.logger.warn({msg:`Unable to merge subscribe configs for participant: ${E} | ${B}, ${A}`}),!1;const re=(oe=B.lastMerged,J=G,(typeof oe=="object"&&typeof J=="object"&&(0,Rs.isEqual)(oe,J))===!1);var oe,J;return B.lastMerged=G,this.subscribeConfig.participants[E]=B,re}handleExternalSubscribeConfigUpdate(E,A,M,D=Fm.REPLACE){const B=(G=>{const re={};return typeof G!="object"?Bn.err(new Error("Invalid input")):(G.jitterBuffer!==void 0&&(re.jitterBuffer={},G.jitterBuffer.minDelay!==void 0&&(re.jitterBuffer.minDelayWhenSubscribeOnly=G.jitterBuffer.minDelay)),G.inBandMessaging!==void 0&&(re.inBandMessaging={enabled:G.inBandMessaging.enabled===!0}),G.simulcast!==void 0&&(re.simulcast={},G.simulcast.initialLayerPreference!==void 0&&(re.simulcast.initialLayerPreference=G.simulcast.initialLayerPreference)),Bn.ok(re))})(A);return B.ok===!0&&this.handleSubscribeConfigUpdate(E,B.value,M,D)}handleSubscribeConfigLevelMerging(E,A,M){if(M===Fm.REPLACE)return A;{const D=B0(E,A);return D===void 0?(this.logger.warn({msg:`Unable to merge '${E}' and '${A}' with type ${M}`}),E):D}}getSubscribeConfigSnapshot(E){return this.subscribeConfig.participants[E]===void 0?Jn(this.subscribeConfig.defaults):Jn(this.subscribeConfig.participants[E].lastMerged)}}class wS extends On{constructor(E){super(on.REASSIGNMENT_REQUEST,E.token,E.traceId,!1),Object.assign(this.properties,{target_local_participant_id:E.targetLocalParticipantId,target_remote_participant_id:E.targetRemoteParticipantId}),this.critical=!0}}var Rc,Oc,ya,lu,eh,cu,cs,ao,X0=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class zm extends Ko{constructor(E,A){super(),this.setGetStats=M=>{this.getInternalStats=M},this.getStats=()=>X0(this,void 0,void 0,function*(){return this.requestRTCStats()}),this.requestRTCStats=()=>X0(this,void 0,void 0,function*(){if(this.getInternalStats)return this.getInternalStats(this.mediaStreamTrack)}),this.getInternalStats=A,this.id=E.id,this.isMuted=!E.enabled,this.mediaStreamTrack=E,this.streamType=this.mediaStreamTrack.kind==="audio"?zt.AUDIO:zt.VIDEO}cleanup(){this.removeAllListeners(),this.getInternalStats=void 0}}(function(O){O.IDLE="IDLE",O.INITIALIZING="INITIALIZING",O.ACTIVE="ACTIVE",O.CONTROLS_PAUSED="CONTROLS_PAUSED",O.DESTROYED="DESTROYED"})(Rc||(Rc={})),function(O){O.LAYERS_CHANGED="LAYERS_CHANGED",O.LAYER_SELECTED="LAYER_SELECTED",O.ADAPTION_CHANGED="ADAPTION_CHANGED"}(Oc||(Oc={})),function(O){O.LAYERS_CHANGED="LAYERS_CHANGED",O.LAYER_SELECTED="LAYER_SELECTED",O.ADAPTION_CHANGED="ADAPTION_CHANGED"}(ya||(ya={})),function(O){O.UNAVAILABLE="unavailable",O.SELECTED="selected"}(lu||(lu={})),function(O){O.LOCAL_STREAM_MUTE_CHANGED="localStreamMutedChanged"}(eh||(eh={}));class K0 extends zm{constructor(E,A){super(E),this.setMuted=M=>{M!==this.isMuted&&(this.mediaStreamTrack.enabled=!M,this.isMuted=M,this.emit(eh.LOCAL_STREAM_MUTE_CHANGED,this))},this.mediaConfig=bS(E,A)}}class i1{constructor(E,A){this.strategy=E,this.logger=A}setStrategy(E){this.strategy=E}stageStreamsToPublish(){let E=[];try{E=this.strategy.stageStreamsToPublish(),E=E.filter(D=>D instanceof K0)}catch(D){return this.logger.warn({msg:"error executing stageStreamsToPublish treating this as a no-op",err:D}),console.error("Error executing stageStreamsToPublish",D),Bn.err(D)}let A=0,M=0;for(const D of E)D.mediaStreamTrack.kind==="audio"?A++:D.mediaStreamTrack.kind==="video"&&M++;if(A>1||M>1){const D=Error("stageStreamsToPublish strategy function returned more than 1 video or audio stream and as a result will not publish",{cause:"UserStrategy"});return Bn.err(D)}return Bn.ok(E)}shouldPublishParticipant(E){try{return Bn.ok(this.strategy.shouldPublishParticipant(E))}catch(A){return this.logger.warn({msg:"error executing shouldPublishParticipant treating this as a no-op",err:A}),console.error("Error executing shouldPublishParticipant",A),Bn.err(A)}}shouldSubscribeToParticipant(E){try{return Bn.ok(this.strategy.shouldSubscribeToParticipant(E))}catch(A){return this.logger.warn({msg:"error executing shouldSubscribeToParticipant. Treating it as a no-op",err:A}),console.error("Error executing shouldSubscribeToParticipant",A),Bn.err(A)}}subscribeConfiguration(E){var A,M;try{return Bn.ok((M=(A=this.strategy).subscribeConfiguration)===null||M===void 0?void 0:M.call(A,E))}catch(D){return this.logger.warn({msg:"error executing subscribeConfiguration. Treating it as a no-op",err:D}),console.error("Error executing subscribeConfiguration",D),Bn.err(D)}}preferredLayerForStream(E,A){var M,D;try{return Bn.ok((D=(M=this.strategy).preferredLayerForStream)===null||D===void 0?void 0:D.call(M,E,A))}catch(B){return this.logger.warn({msg:"error executing preferredLayerForStream. Treating it as a no-op",err:B}),console.error("Error executing preferredLayerForStream",B),Bn.err(B)}}}class CS extends Ko{constructor(E,A){super(),this.audioMuted=!0,this.videoStopped=!0,this.publishState=cs.NOT_PUBLISHED,this.logger=A,this.info=E,this.audioMuted=E.audioMuted,this.videoStopped=E.videoStopped}}(function(O){O.PUBLISH="publish",O.SUBSCRIBE="subscribe"})(cu||(cu={})),function(O){O.NOT_PUBLISHED="not_published",O.ATTEMPTING_PUBLISH="attempting_publish",O.PUBLISHED="published",O.ERRORED="errored"}(cs||(cs={})),function(O){O.NOT_SUBSCRIBED="not_subscribed",O.ATTEMPTING_SUBSCRIBE="attempting_subscribe",O.SUBSCRIBED="subscribed",O.ERRORED="errored"}(ao||(ao={}));const wv=1e3;function Z0(O){return O.map(E=>E.remote)}function r1(O){return{label:O.encodingId,bitrateBps:O.bitrate*wv,width:O.width,height:O.height,framesPerSecond:O.framesPerSecond,selected:O.selected}}function Vs(O,E){const A=O.width*O.height,M=E.width*E.height;return A>M||O.bitrateBps>E.bitrateBps||O.framesPerSecond>E.framesPerSecond?1:A===M||O.bitrateBps===E.bitrateBps||O.framesPerSecond>E.framesPerSecond?0:-1}var tp,Cv,J0=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class Q0 extends Ko{constructor(E){super(),this.setGetStats=()=>{},this.requestRTCStats=()=>this.internalStream.requestRTCStats(),this.getStats=()=>J0(this,void 0,void 0,function*(){return this.internalStream.requestRTCStats()}),this.setMuted=A=>{this.internalStream.setMuted(A)},this.getLayers=()=>this.internalStream.layers,this.getSelectedLayer=()=>this.internalStream.selectedLayer,this.getLowestQualityLayer=()=>this.internalStream.lowestQualityLayer,this.getHighestQualityLayer=()=>this.internalStream.highestQualityLayer,this.internalStream=E,this.internalStream.on(Oc.ADAPTION_CHANGED,A=>{this.emit(ya.ADAPTION_CHANGED,A)}),this.internalStream.on(Oc.LAYERS_CHANGED,A=>{this.emit(ya.LAYERS_CHANGED,A)}),this.internalStream.on(Oc.LAYER_SELECTED,(A,M)=>{this.emit(ya.LAYER_SELECTED,A,M)})}get id(){return this.internalStream.id}get participantInfo(){return this.internalStream.participantInfo}get streamType(){return this.internalStream.streamType}get mediaStreamTrack(){return this.internalStream.mediaStreamTrack}get isMuted(){return this.internalStream.isMuted}set isMuted(E){this.internalStream.setMuted(E)}get isAdapting(){return this.internalStream.isAdapting}cleanup(){this.removeAllListeners()}}class e_ extends zm{constructor({track:E,info:A,getStats:M,remotePlaybackController:D,analyticsTracker:B,token:G}){super(E,M),this.setMuted=oe=>{this.isMuted=oe},this.setLayer=oe=>{const J=(0,Rs.cloneDeep)(oe);if(this.queueLayerUpdateForValidState(J))return void this.logger.debug({msg:`setLayer:${J} queued, skipping for now`});const le=function(ye,Ie){if(!ye)return(0,Bn.ok)(void 0);const Xe=typeof ye=="string"?ye:ye.label,qe=Ie.filter(Oe=>Oe.label===Xe)[0];return qe?(0,Bn.ok)(qe):(0,Bn.err)(`Provided layer with id ${Xe} does not exist`)}(J,this._layers);if(!le.ok){const ye=le.error;return void this.logger.error({err:ye,msg:"Unable to select layer, skipping skipping selection"})}const pe=le.value;if(this.isNextUpdateAdaptionOnly(pe))return this.logger.warn({msg:"setLayer:dynamic"}),void this.handleDynamicUpdate();this.isFirstLayerUpdate()||!this.isRepeatLayerSelection(pe)||this.isAdapting?pe&&(this.logger.warn({msg:`setLayer:${JSON.stringify(pe)} `}),this.handleManualUpdate(pe)):this.logger.debug({msg:"Setting the same layer, same adaption state, skipping selection"})},this.state=Rc.INITIALIZING,this.prevState=Rc.IDLE,this.analyticsTracker=B,this.token=G,this.id=E.id,this.info=A,this.mediaStreamTrack=E,this.remotePlaybackController=D,this.layerPollingTimeoutId=null,this.weakRemoteMap=new WeakMap,this.weakRemoteKey={id:"remote"},this.commandMap=new Map,this._isAdapting=!0,this._layers=[],this._selectedLayer=null;const re=nm();this.logger=new pa(new Of(re),me.REMOTE_STAGE_STREAM),this.streamType===zt.AUDIO?this.isMuted=A.audioMuted:this.isMuted=A.videoStopped,this.initializeLayerPolling(),this.pollInternalLayers()}transitionStateTo(E){this.state!==E&&(this.prevState=this.state,this.state=E)}initializeLayerPolling(){this.streamType!==zt.AUDIO?(this.logger.debug({msg:"Setting up RemoteStageStream, requesting initial layers"}),this.layerPollingTimeoutId=setInterval(()=>{this.pollInternalLayers()},3e3)):this.logger.debug({msg:"Skipping initializing polling for audio streams"})}startLayerPolling(){this.layerPollingTimeoutId===null?this.initializeLayerPolling():this.logger.debug({msg:"Skipping start polling request, already started"})}stopLayerPolling(){this.layerPollingTimeoutId!==null?(clearInterval(this.layerPollingTimeoutId),this.layerPollingTimeoutId=null):this.logger.debug({msg:"Skipping stop polling request, already stopped"})}pollInternalLayers(){this.streamType!==zt.AUDIO?this.remotePlaybackController.getLayers().then(E=>{if(this.isStateValidForLayerUpdates()){if(!E.ok)throw Error(E.error);this.updateInternalLayersFromRemote(E.value),this.transitionStateTo(Rc.ACTIVE),this.flushCommandQueue()}else this.logger.warn({msg:"Stream controls have been paused, skipping getLayers"})}).catch(E=>{this.logger.error({err:E,msg:"Error calling getLayers, returning current layers"})}):this.logger.debug({msg:"Skipping layer poll request for audio stream"})}updateInternalLayersFromRemote(E){const A=this._layers,M=E.map(r1).sort(Vs),D=!(0,Rs.isEqual)(M,A);this._layers=M;const B=this._selectedLayer,G=this._layers.filter(oe=>oe.selected)[0],re=!(0,Rs.isEqual)(G,B);B&&(B.selected=!1),this._selectedLayer=G,re&&(this.trackLayerUpdate(B),this.trackLayerUpdate(G)),this.isCommandQueueEmpty()&&(D&&this.emitLayersChanged(),re&&this.emitLayerSelected(G))}flushCommandQueue(){if(this.isCommandQueueEmpty())return;const E=Array.from(this.commandMap.keys());this.logger.debug({msg:`Flushing active commands from map ${E}`});for(const A of this.commandMap.keys()){const M=this.commandMap.get(A);M==null||M()}this.commandMap.clear()}queueLayerUpdateForValidState(E){if(!E)return this.commandMap.delete("setLayer"),!1;if(this.state===Rc.INITIALIZING){const A=this.setLayer.bind(this,E);return this.commandMap.set("setLayer",A),!0}return!1}handleDynamicUpdate(){if(!this.isStateValidForLayerUpdates())return void this.logger.warn({msg:"Stream controls have been paused, skipping dynamic mode transition"});const E=this._isAdapting;this._isAdapting=!0,this.emitAdaptionChanged(),this.remotePlaybackController.unsetLayer().then(A=>{if(!this.isStateValidForLayerUpdates())return this.logger.warn({msg:"Stream controls have been paused, skipping dynamic mode transition"}),void this.resetAdaptionStateOnError(E,`Stream in invalid state: ${this.state}`);A.ok?this.logger.debug({msg:"Layer successfully unset, restarting dynamic adaption"}):this.resetAdaptionStateOnError(E,A.error)}).catch(()=>{})}resetAdaptionStateOnError(E,A){this._isAdapting=E,this.emitAdaptionChanged(),this.logger.error({err:A,msg:"Error unsetting layer, reverting adaption state"})}handleManualUpdate(E){if(!this.isStateValidForLayerUpdates())return void this.logger.warn({msg:"Stream controls have been paused, skipping manual updates"});const A=this._isAdapting,M=this._selectedLayer;M&&(M.selected=!1),this._isAdapting=!1,this._selectedLayer=E,E.selected=!0,A!==this._isAdapting&&this.emitAdaptionChanged(),this.updateLocalLayerStateBeforeRemote(E,M),this.trackLayerUpdate(M),this.trackLayerUpdate(E),this.emitLayersChanged(),this.emitLayerSelected(E),this.remotePlaybackController.setLayer(E.label).then(D=>{if(!this.isStateValidForLayerUpdates()){this.logger.warn({msg:"Stream controls have been paused, skipping dynamic mode transition"});const B=`Stream in invalid state: ${this.state}`;return this.resetAdaptionStateOnError(A,B),void this.resetLayerOnError(M,E,B)}if(!D.ok){const B=D.error;return this.resetAdaptionStateOnError(A,B),void this.resetLayerOnError(M,E,B)}this.logger.debug({msg:`Layer successfully selected: ${E.label}`})}).catch(()=>{})}applyExistingControlState(){var E;this._isAdapting?this.remotePlaybackController.unsetLayer().then(()=>{}).catch(()=>{}):!((E=this._selectedLayer)===null||E===void 0)&&E.label&&this.remotePlaybackController.setLayer(this._selectedLayer.label).then(()=>{}).catch(()=>{})}resetLayerOnError(E,A,M){A&&(A.selected=!1),E&&(E.selected=!0),this._selectedLayer=E,this.logger.error({err:M,msg:"Error unsetting layer, leaving current selection in place"}),this.updateLocalLayerStateBeforeRemote(E,A),this.emitLayersChanged(),E!==null&&this.emitLayerSelected(E,lu.UNAVAILABLE),this.trackLayerUpdate(A),this.trackLayerUpdate(E)}updateLocalLayerStateBeforeRemote(E,A){this._layers=this._layers.map(M=>M.label===(E==null?void 0:E.label)?E:M.label===(A==null?void 0:A.label)?A:M).sort(Vs)}trackLayerUpdate(E){var A,M;this.analyticsTracker.trackEventNoSharedProps(new Mm(this.token,So(),(A=E==null?void 0:E.label)!==null&&A!==void 0?A:"auto",!0,en.SUBSCRIBE,(M=E==null?void 0:E.selected)!==null&&M!==void 0&&M,this.info.id))}isNextUpdateAdaptionOnly(E){return E===void 0&&this.isFirstLayerUpdate()||E===void 0&&!this.isAdapting}isFirstLayerUpdate(){return this._selectedLayer===null}isRepeatLayerSelection(E){var A;return((A=this._selectedLayer)===null||A===void 0?void 0:A.label)===(E==null?void 0:E.label)}isStateValidForLayerUpdates(){return this.state===Rc.ACTIVE||this.state===Rc.INITIALIZING}isCommandQueueEmpty(){return this.commandMap.size===0}emitLayerSelected(E,A=lu.SELECTED){this.logger.debug({msg:`Emitting layers selected ${JSON.stringify(E,null,2)}`}),this.emit(Oc.LAYER_SELECTED,(0,Rs.cloneDeep)(E),A)}emitLayersChanged(){this.emit(Oc.LAYERS_CHANGED,(0,Rs.cloneDeep)(this._layers))}emitAdaptionChanged(){this.emit(Oc.ADAPTION_CHANGED,this._isAdapting)}get remote(){const E=this.weakRemoteMap.get(this.weakRemoteKey);if(E)return E;const A=new Q0(this);return this.weakRemoteMap.set(this.weakRemoteKey,A),A}get participantInfo(){return(0,Rs.cloneDeep)(this.info)}get isAdapting(){return this._isAdapting}get layers(){return(0,Rs.cloneDeep)(this._layers)}get selectedLayer(){var E;return(0,Rs.cloneDeep)((E=this._selectedLayer)!==null&&E!==void 0?E:void 0)}get highestQualityLayer(){return(0,Rs.cloneDeep)(this.layers[this.layers.length-1])}get lowestQualityLayer(){return(0,Rs.cloneDeep)(this.layers[0])}pauseControls(){this.transitionStateTo(Rc.CONTROLS_PAUSED),this.stopLayerPolling()}resumeControls(){this.applyExistingControlState(),this.startLayerPolling(),this.transitionStateTo(Rc.ACTIVE)}cleanup(){this.transitionStateTo(Rc.DESTROYED),super.cleanup(),this.stopLayerPolling(),this._layers=[],this._selectedLayer=null,this._isAdapting=!0,this.commandMap.clear()}}(function(O){O.STATE_CHANGE="stateChange",O.MEDIA_STREAM_ADDED="mediaStreamAdded",O.MEDIA_STREAM_REMOVED="mediaStreamRemoved",O.MEDIA_STREAM_MUTE_CHANGED="mediaStreamMuteChanged",O.ERROR="error"})(tp||(tp={})),function(O){O.SUBSCRIPTION_STATE_CHANGE="subscriptionStateChange",O.MEDIA_STREAM_SEI_MESSAGE_RECEIVED="mediaStreamSeiMessageReceived"}(Cv||(Cv={}));const _a=Object.assign(Object.assign({},tp),Cv);var Hh;(function(O){O.PUBLICATION_STATE_CHANGE="publicationStateChange"})(Hh||(Hh={}));const oo=Object.assign(Object.assign({},tp),Hh);var lo=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class s1 extends CS{constructor(E,A,M,D,B,G,re,oe=!1){super(E,new pa(D,me.REMOTE_PARTICIPANT)),this.subscribeState=ao.NOT_SUBSCRIBED,this.reassigning=!1,this.streams=[],this.left=!1,this.onSubscriptionStateChange=J=>{this.logger.debug({msg:"subscriptionStateChange",state:J}),J===so.DISCONNECTED?this.updateSubscriptionState(ao.NOT_SUBSCRIBED):J===so.CONNECTED?this.updateSubscriptionState(ao.SUBSCRIBED):J===so.CONNECTING?this.updateSubscriptionState(ao.ATTEMPTING_SUBSCRIBE):J===so.ERRORED?this.updateSubscriptionState(ao.ERRORED):this.logger.warn({msg:"FIXME onSubscriptionStateChange UNHANDLED STATE",state:J})},this.onSubscriptionMediaStream=(J,le)=>{this.logger.debug({msg:"onSubscriptionMediaStream",stream:J});let pe=J.getTracks().map(ye=>{const Ie=new e_({track:ye,info:this.info,getStats:this.subscription.requestRTCStats,remotePlaybackController:le,analyticsTracker:this.analyticsTracker,token:this.token});return this.streams.push(Ie),Ie});this.subscription.getDesiredSubscribeType()===Ba.AUDIO_ONLY&&(pe=pe.filter(ye=>ye.streamType!==zt.VIDEO)),this.emit(_a.MEDIA_STREAM_ADDED,pe)},this.onSubscriptionError=J=>{this.emit(_a.ERROR,J)},this.onSubscriptionSeiMessageReceived=J=>{this.emit(_a.MEDIA_STREAM_SEI_MESSAGE_RECEIVED,J)},this.onSubscriptionTransformError=J=>{this.emit(_a.ERROR,J)},this.onSubscriptionReassignmentStart=()=>{for(const J of this.streams)J.pauseControls()},this.onSubscriptionReassignmentDone=()=>{for(const J of this.streams)J.resumeControls()},this.updateSubscribeStateIfNecessary=(J,le)=>{if(!this.info.capabilities.has(cu.SUBSCRIBE))return;le!==void 0&&this.subscription.updateSubscribeConfig(le);const pe=J!==Ba.NONE&&this.publishState===cs.PUBLISHED,ye=this.subscribeState!==ao.NOT_SUBSCRIBED&&this.subscribeState!==ao.ERRORED;if(pe&&!ye)this.subscription.updateDesiredSubscribeType(J),this.subscribe();else if(!pe&&ye)this.unsubscribe(),this.subscription.updateDesiredSubscribeType(J);else if(this.subscribeState===ao.SUBSCRIBED&&this.subscription.getDesiredSubscribeType()!==J)try{J===Ba.AUDIO_ONLY?this.emit(_a.MEDIA_STREAM_REMOVED,this.streams.filter(Ie=>Ie.streamType===zt.VIDEO)):J===Ba.AUDIO_VIDEO&&this.emit(_a.MEDIA_STREAM_ADDED,this.streams.filter(Ie=>Ie.streamType===zt.VIDEO)),this.subscription.updateDesiredSubscribeType(J)}catch(Ie){this.logger.error({err:Ie,msg:"error updating subscribe type"})}},this.updatePublishState=J=>{const le=J&&this.publishState===cs.PUBLISHED,pe=!J&&this.publishState===cs.NOT_PUBLISHED;return!le&&!pe&&(this.info.isPublishing=J,this.publishState=J?cs.PUBLISHED:cs.NOT_PUBLISHED,!0)},this.updateStreamState=(J,le)=>{this.audioMuted!==J&&(this.audioMuted=J,this.info.audioMuted=J,this.updateStreamMuteState(zt.AUDIO,J)),this.videoStopped!==le&&(this.videoStopped=le,this.info.videoStopped=le,this.updateStreamMuteState(zt.VIDEO,le))},this.updateStreamMuteState=(J,le)=>{const pe=this.streams.find(ye=>ye.streamType===J);pe?(pe.setMuted(le),this.emit(_a.MEDIA_STREAM_MUTE_CHANGED,pe)):this.logger.warn({msg:`tried to update mute state for ${J} stream on participant ${this.info.id} that didn't exist`})},this.cleanup=()=>{for(const J of this.streams)J.remote.removeAllListeners(),J.removeAllListeners();this.removeAllListeners()},this.quickUnsubscribe=()=>this.subscribeState!==ao.NOT_SUBSCRIBED&&this.subscription.stop(!0),this.getDesiredSubscribeType=()=>this.subscription.getDesiredSubscribeType(),this.isReassigning=()=>this.reassigning,this.analyticsTracker=re,this.token=A,this.createSubscription=()=>{const J=new xS(E.id,A,M,D,re,B,G);return J.on(Lf,this.onSubscriptionStateChange),J.on(be,this.onSubscriptionMediaStream),J.on(Wu,this.onSubscriptionError),J.on(tu,this.onSubscriptionSeiMessageReceived),J.on(ma,this.onSubscriptionTransformError),J.on(mi,this.onSubscriptionReassignmentStart),J.on(Yu,this.onSubscriptionReassignmentDone),J.on(gc,this.onSubscriptionReassignmentDone),J},this.subscription=this.createSubscription(),oe&&(this.publishState=cs.PUBLISHED)}updateSubscriptionState(E){E!==this.subscribeState&&(this.subscribeState=E,this.emit(_a.SUBSCRIPTION_STATE_CHANGE,this.subscribeState))}participantLeave(){this.left=!0}subscribe(){this.left?this.logger.warn({msg:"tried to subscribe to a participant that left"}):(this.updateSubscriptionState(ao.ATTEMPTING_SUBSCRIBE),this.logger.debug({msg:"subscribe"}),this.subscription.start())}unsubscribe(){if(this.subscribeState===ao.NOT_SUBSCRIBED)return;this.logger.debug({msg:"unsubscribe"}),this.subscription.stop(),this.subscription.off(Lf,this.onSubscriptionStateChange),this.subscription.off(be,this.onSubscriptionMediaStream),this.subscription.off(Wu,this.onSubscriptionError),this.subscription.off(ma,this.onSubscriptionTransformError);const E=this.getDesiredSubscribeType();this.subscription=this.createSubscription(),E===Ba.AUDIO_ONLY?this.emit(_a.MEDIA_STREAM_REMOVED,this.streams.filter(A=>A.streamType===zt.AUDIO)):this.emit(_a.MEDIA_STREAM_REMOVED,this.streams),this.updateSubscriptionState(ao.NOT_SUBSCRIBED),this.streams.forEach(A=>{A.cleanup()}),this.streams=[]}triggerIceRestart(E){return lo(this,void 0,void 0,function*(){this.reassigning=!0;try{yield this.subscription.triggerIceRestart(E)}finally{this.reassigning=!1}})}}const Av=en.PUBLISH;class jm{constructor(E,A){this.analyticsTracker=E,this.token=A,this.action=Av,this.traceId=So()}trackPublish(E){const{action:A,traceId:M,analyticsTracker:D,token:B}=this;return D.trackEvent(new xc({token:B,traceId:M})),{getTraceId:()=>M,trackPublishStarted({totalDurationWithRetries:G,retryTimes:re,sfuResource:oe,peerClientPerfStats:J}){const{optionsDuration:le,postDuration:pe,timeToCandidate:ye,timeToConnected:Ie,sdpExchangeDuration:Xe,sdpExchangeTransport:qe,setRemoteDescDuration:Oe,peerConnectionDuration:Te}=J,{edpInitialConnectDuration:rt,edpInitialConnectRetries:mt,edpInitialStateDuration:jt,edpStateUpdateCount:Tt}=E;D.trackEvent(new vS({token:B,traceId:M,optionsDuration:le,postDuration:pe,timeToCandidate:ye,totalDuration:Ie,edpInitialConnectDuration:rt,edpInitialConnectRetries:mt,edpInitialStateDuration:jt,edpStateUpdateCount:Tt,sdpExchangeDuration:Xe,sdpExchangeTransport:qe,setRemoteDescDuration:Oe,peerConnectionDuration:Te,publishRetries:re,totalDurationWithRetries:G,sfuResource:oe}))},trackPublishFailed(G){const re=((J,le,pe)=>{if(J instanceof ui)return J;let ye="";return J instanceof qr.AxiosError&&(ye+=`AxiosError - ${J.code}`),new ui(Object.assign(Object.assign(Object.assign({},Rt.PUBLISH_FAILURE),{action:Av,token:le,traceId:pe,tag:Eo.PUBLISH_RELATED,location:"publish",details:`${ye} ${J.message}`}),{fatal:!0}))})(G,B,M);D.trackEvent(new yS({token:B,traceId:M,code:re.code,message:re.message,fatal:re.fatal,nominal:re.nominal}));const oe=new ui(Object.assign(Object.assign({},Rt.PUBLISH_FAILURE),{action:A,token:B,traceId:M,tag:Eo.PUBLISH_RELATED,location:"publish"}));return G instanceof ui&&(oe.fatal=G.fatal,oe.nominal=G.nominal,oe.location=`publish > ${G.location}`),D.trackError(oe),re},trackUnpublish:()=>{D.trackEvent(new jh({token:B,traceId:M}))},trackEndSucceeded:G=>{D.trackEvent(new Hd({token:B,isUnpublishSuccessful:!0,traceId:M,reason:G}))},trackEndFailed:G=>{const re=new ui(Object.assign(Object.assign({},Rt.UNPUBLISH_FAILURE),{token:B,traceId:M,tag:Eo.UNPUBLISH_RELATED,location:"unpublish"}));return G!==Hs.UNLOAD&&G!==Hs.UNPUBLISH||this.analyticsTracker.trackError(re),D.trackEvent(new Hd({token:B,isUnpublishSuccessful:!1,traceId:M,reason:G})),re}}}}var sa,Qr,uu=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};(function(O){O.DISCONNECTED="disconnected",O.CONNECTING="connecting",O.CONNECTED="connected",O.ERRORED="errored"})(sa||(sa={})),function(O){O.STATE_CHANGE="stateChange",O.ERROR="error",O.TRANSFORM_ERROR="transformError"}(Qr||(Qr={}));class a1 extends Ko{constructor(E,A,M,D){super(),this.token=E,this.stageConnection=A,this.nonScopedLogger=M,this.analyticsTracker=D,this.tracksToPublish=[],this.publicationState=sa.DISCONNECTED,this.latestPubAttemptNum=0,this.startConnectingTimestamp=-1,this.action=en.PUBLISH,this.start=B=>{this.publicationState===sa.DISCONNECTED||this.publicationState===sa.ERRORED?(this.tracksToPublish=B,this.latestPubAttemptNum=0,this.processStateUpdate()):this.logger.warn({msg:"publication cannot be started if not in disconnected or error state"})},this.requestRTCStats=B=>uu(this,void 0,void 0,function*(){return this.peerClient.requestRTCStats(B)}),this.stop=(B=!1)=>uu(this,void 0,void 0,function*(){this.peerClient.off(ms,this.onPeerClientConnectionStateChange,this),this.peerClient.off(ot,this.onPeerClientTransformError,this),yield this.unpublish(B),this.updateState(sa.DISCONNECTED)}),this.processStateUpdate=B=>{const{publicationState:G}=this;G===sa.DISCONNECTED||G===sa.ERRORED?this.latestPubAttemptNum===0&&(this.startConnectingTimestamp=performance.now(),this.updateState(sa.CONNECTING),this.tryPublish()):G===sa.CONNECTING?B===et.CONNECTED&&this.updateState(sa.CONNECTED):G===sa.CONNECTED&&B===et.FAILED&&(this.attemptTracker&&this.attemptTracker.trackEndFailed(Hs.CONNECTION_FAIL),this.latestPubAttemptNum===0&&(this.startConnectingTimestamp=performance.now(),this.updateState(sa.CONNECTING),this.tryPublish()))},this.updateState=B=>{this.publicationState=B,this.emit(Qr.STATE_CHANGE,B)},this.tryPublish=()=>uu(this,void 0,void 0,function*(){if(this.latestPubAttemptNum++,this.latestPubAttemptNum<=4){const B=this.stageConnection.getConnectionStats();this.attemptTracker=this.publishTracker.trackPublish(B);try{this.logger.debug({msg:`attempting to publish, attemptNum: ${this.latestPubAttemptNum}`}),yield this.publish(this.tracksToPublish,this.attemptTracker.getTraceId()),this.logger.debug({msg:"publish succeeded!"});const G=this.peerClient.getSfuResource(),re=this.latestPubAttemptNum-1,oe=performance.now()-this.startConnectingTimestamp,J=this.peerClient.getActionMeasurements();this.attemptTracker.trackPublishStarted({sfuResource:G,totalDurationWithRetries:oe,retryTimes:re,peerClientPerfStats:J}),this.latestPubAttemptNum=0}catch(G){this.logger.error({msg:"publish failed!",err:G});const re=this.attemptTracker.trackPublishFailed(G),oe=re.code===Rt.OPERATION_ABORTED.code,J=re.fatal,le=this.latestPubAttemptNum===4;if(oe)return;if(J||le)return this.logger.error({msg:`Stopping attempts: isFatal=${J}, isLastAttempt=${le}`,err:G}),this.updateState(sa.ERRORED),void this.emit(Qr.ERROR,re);const pe=1e3*Math.pow(2,this.latestPubAttemptNum);this.logger.debug({msg:`attempt failed, retrying in ${pe}ms`}),this.nextAttemptTimerId=window.setTimeout(()=>{this.tryPublish()},pe)}}}),this.publish=(B,G)=>uu(this,void 0,void 0,function*(){this.peerClient.initTracksToPublish(B),yield this.peerClient.connect({audioOnly:!1,traceId:G})}),this.unpublish=(B=!1)=>uu(this,void 0,void 0,function*(){if(window.clearTimeout(this.nextAttemptTimerId),this.publicationState===sa.DISCONNECTED||this.publicationState===sa.ERRORED||!this.attemptTracker)return;this.attemptTracker.trackUnpublish();const G=B?Hs.UNLOAD:Hs.UNPUBLISH;try{B?this.peerClient.disconnect(B):yield this.peerClient.disconnect(B),this.attemptTracker.trackEndSucceeded(G)}catch{this.attemptTracker.trackEndFailed(G)}}),this.replaceOrUpdateTrack=B=>uu(this,void 0,void 0,function*(){this.tracksToPublish.find(G=>G.track.kind===B.track.kind)?this.tracksToPublish=this.tracksToPublish.map(G=>G.track.kind===B.track.kind?B:G):this.tracksToPublish.push(B),yield this.peerClient.replaceOrUpdateTrack(B)}),this.onPeerClientConnectionStateChange=B=>{this.logger.debug({msg:`onPeerClientConnectionStateChange: ${B}`,state:B}),this.processStateUpdate(B)},this.onPeerClientTransformError=B=>{this.emit(Qr.TRANSFORM_ERROR,B)},this.onIncompatibleCodecs=B=>uu(this,void 0,void 0,function*(){yield this.peerClient.onIncompatibleCodecs(B)}),this.sendSeiMessage=B=>{this.peerClient.sendSeiMessage(B)},this.peerClient=new Bm(E,this.nonScopedLogger,this.action,Da(this.action),So(),this.analyticsTracker,void 0,A,void 0),this.logger=new pa(M,me.PUBLICATION),this.peerClient.on(ms,this.onPeerClientConnectionStateChange,this),this.peerClient.on(ot,this.onPeerClientTransformError,this),this.publishTracker=new jm(this.analyticsTracker,this.token)}removeTrack(E){return uu(this,void 0,void 0,function*(){this.tracksToPublish=this.tracksToPublish.filter(A=>A.track.kind!==E),yield this.peerClient.removeTrack(E)})}}var fr,kn=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};class AS extends CS{constructor(E,A,M,D,B){super(E,new pa(M,me.LOCAL_PARTICIPANT)),this.onPublicationStateChange=G=>{switch(this.logger.debug({msg:"publicationStateChange",state:G}),G){case"connected":this.connection.setStagePublishing(!0),this.updatePublishState(cs.PUBLISHED);break;case"connecting":this.updatePublishState(cs.ATTEMPTING_PUBLISH);break;case"errored":this.updatePublishState(cs.ERRORED),this.connection.setStagePublishing(!1);break;default:return void this.logger.warn({msg:"FIXME onPublicationStateChange UNHANDLED STATE",state:G})}},this.onPublicationError=G=>{this.emit(oo.ERROR,G)},this.updatePublishState=G=>{this.info.isPublishing=G===cs.PUBLISHED,this.publishState=G,this.emit(oo.PUBLICATION_STATE_CHANGE,this.publishState)},this.handleMute=G=>{G.streamType===zt.AUDIO&&(this.audioMuted=G.isMuted,this.info.audioMuted=G.isMuted),G.streamType===zt.VIDEO&&(this.videoStopped=G.isMuted,this.info.videoStopped=G.isMuted),this.connection.emitStageState(this.audioMuted,this.videoStopped),this.emit(oo.MEDIA_STREAM_MUTE_CHANGED,G)},this.publish=G=>{this.logger.debug({msg:"publish"}),G.forEach(oe=>{oe&&(this.setupStreamListener(oe),oe.streamType===zt.AUDIO?(this.audioStream=oe,this.audioMuted=!oe.mediaStreamTrack.enabled,this.info.audioMuted=this.audioMuted):oe.streamType===zt.VIDEO&&(this.videoStream=oe,this.videoStopped=!oe.mediaStreamTrack.enabled,this.info.videoStopped=this.videoStopped),oe.setGetStats(this.publication.requestRTCStats))}),this.connection.emitStageState(this.audioMuted,this.videoStopped);const re=G.map(oe=>V0(oe.mediaStreamTrack,oe.mediaConfig));this.publication.start(re)},this.cleanup=()=>this.removeAllListeners(),this.quickUnpublish=()=>this.publishState!==cs.NOT_PUBLISHED&&this.publishState!==cs.ERRORED&&void this.publication.stop(!0),this.onIncompatibleCodecs=G=>kn(this,void 0,void 0,function*(){yield this.publication.onIncompatibleCodecs(G)}),this.sendSeiMessage=G=>{this.publication.sendSeiMessage(G)},this.sendSeiMessageString=G=>{const re=new TextEncoder().encode(G);this.publication.sendSeiMessage(re)},this.connection=D,this.createPublication=()=>{const G=new a1(A,D,M,B);return G.on(Qr.STATE_CHANGE,this.onPublicationStateChange),G.on(Qr.ERROR,this.onPublicationError),G.on(Qr.TRANSFORM_ERROR,this.onPublicationError),G},this.publication=this.createPublication()}setupStreamListener(E){E.on(eh.LOCAL_STREAM_MUTE_CHANGED,this.handleMute)}removeTrack(E){var A,M;E.streamType===zt.AUDIO?((A=this.audioStream)===null||A===void 0||A.off(eh.LOCAL_STREAM_MUTE_CHANGED,this.handleMute),this.audioStream=void 0,this.audioMuted=!0,this.info.audioMuted=!0):E.streamType===zt.VIDEO&&((M=this.videoStream)===null||M===void 0||M.off(eh.LOCAL_STREAM_MUTE_CHANGED,this.handleMute),this.videoStream=void 0,this.videoStopped=!0,this.info.videoStopped=!0),this.connection.emitStageState(this.audioMuted,this.videoStopped),this.publication.removeTrack(E.streamType)}replaceOrAddTrack(E){return kn(this,void 0,void 0,function*(){this.setupStreamListener(E),E.setGetStats(this.publication.requestRTCStats),E.streamType===zt.AUDIO?(this.audioStream=E,this.audioMuted=!E.mediaStreamTrack.enabled):E.streamType===zt.VIDEO&&(this.videoStream=E,this.videoStopped=!E.mediaStreamTrack.enabled),this.connection.emitStageState(this.audioMuted,this.videoStopped);const A=V0(E.mediaStreamTrack,E.mediaConfig);yield this.publication.replaceOrUpdateTrack(A)})}unpublish(){if(this.publishState===cs.NOT_PUBLISHED||this.publishState===cs.ERRORED)return;this.logger.debug({msg:"unpublish"}),this.connection.setStagePublishing(!1),this.publication.stop(),this.publication.off(Qr.STATE_CHANGE,this.onPublicationStateChange),this.publication.off(Qr.ERROR,this.onPublicationError),this.publication.off(Qr.TRANSFORM_ERROR,this.onPublicationError);const E=[this.audioStream,this.videoStream].filter(A=>!!A);E.forEach(A=>{A.cleanup()}),this.audioStream=void 0,this.videoStream=void 0,this.emit(oo.MEDIA_STREAM_REMOVED,E),this.updatePublishState(cs.NOT_PUBLISHED),this.publication=this.createPublication()}}(function(O){O.STAGE_CONNECTION_STATE_CHANGED="stageConnectionStateChanged",O.STAGE_PARTICIPANT_JOINED="stageParticipantJoined",O.STAGE_PARTICIPANT_LEFT="stageParticipantLeft",O.STAGE_PARTICIPANT_STREAMS_ADDED="stageParticipantStreamsAdded",O.STAGE_PARTICIPANT_STREAMS_REMOVED="stageParticipantStreamsRemoved",O.STAGE_STREAM_MUTE_CHANGED="stageStreamMuteChanged",O.STAGE_STREAM_SEI_MESSAGE_RECEIVED="stageStreamSeiMessageReceived",O.STAGE_STREAM_LAYERS_CHANGED="stageStreamLayersChanged",O.STAGE_STREAM_LAYER_SELECTED="stageStreamLayerSelected",O.STAGE_STREAM_ADAPTION_CHANGED="stageStreamAdaptionChanged",O.STAGE_PARTICIPANT_SUBSCRIBE_STATE_CHANGED="stageParticipantSubscribeStateChanged",O.STAGE_PARTICIPANT_PUBLISH_STATE_CHANGED="stageParticipantPublishStateChanged",O.ERROR="error",O.STAGE_LEFT="stageLeft"})(fr||(fr={}));var ba=function(O,E,A,M){return new(A||(A=Promise))(function(D,B){function G(J){try{oe(M.next(J))}catch(le){B(le)}}function re(J){try{oe(M.throw(J))}catch(le){B(le)}}function oe(J){var le;J.done?D(J.value):(le=J.value,le instanceof A?le:new A(function(pe){pe(le)})).then(G,re)}oe((M=M.apply(O,[])).next())})};const es=O=>!!O;class Vh extends Ko{constructor(E,A){super(),this.connectionState=Pr.DISCONNECTED,this.participants=new Map,this.connectionStateErrored=!1,this.onConnectionStateChanged=(D,B)=>{var G,re;if(this.connectionState=D,D===Pr.ERRORED&&(this.connectionStateErrored=!0),D===Pr.CONNECTED&&this.localParticipant&&this.localParticipant.publishState!==cs.NOT_PUBLISHED&&this.stageConnection.emitStageState((G=this.localParticipant)===null||G===void 0?void 0:G.audioMuted,(re=this.localParticipant)===null||re===void 0?void 0:re.videoStopped),D===Pr.CONNECTED&&this.connectionStateErrored&&(this.connectionStateErrored=!1,this.refreshStrategy()),D===Pr.DISCONNECTED){if(B&&B!==Cc.CLIENT_RECONNECT&&B!==Cc.USER_INITIATED){let oe=np.UNKNOWN;(function(J){return Object.values(np).includes(J)})(B)?oe=B:this.logger.warn({msg:`DISCONNECTED reason is not a StageLeftReason: ${B}`}),this.cleanup(oe)}}else this.emit(fr.STAGE_CONNECTION_STATE_CHANGED,this.connectionState)},this.setupLocalParticipantOnce=()=>{var D;this.localParticipant?this.analyticsTracker.trackEventNoSharedProps(new Bf(this.token,(D=this.joinTraceId)!==null&&D!==void 0?D:new M0,"reusing local participant from repeat join",en.JOIN,"")):this.createLocalParticipant()},this.createLocalParticipant=()=>{const D=function(B){var G,re;const oe=new Set;return B.token.claims.capabilities.allow_publish&&oe.add(cu.PUBLISH),B.token.claims.capabilities.allow_subscribe&&oe.add(cu.SUBSCRIBE),{id:B.token.participantID,userId:(G=B.token.userID)!==null&&G!==void 0?G:"",attributes:(re=B.token.claims.attributes)!==null&&re!==void 0?re:{},capabilities:oe,isLocal:!0,userInfo:{},videoStopped:B.videoStopped,audioMuted:B.audioMuted,isPublishing:B.isPublishing}}({token:this.token,videoStopped:!0,audioMuted:!0,isPublishing:!1});this.localParticipant=new AS(D,this.token,this.logger.unwrap(),this.stageConnection,this.analyticsTracker),this.localParticipant.on(oo.PUBLICATION_STATE_CHANGE,B=>{this.onPublishStateChanged(this.localParticipant.info,B)}),this.localParticipant.on(oo.MEDIA_STREAM_REMOVED,this.onLocalStreamsRemoved),this.localParticipant.on(oo.MEDIA_STREAM_MUTE_CHANGED,B=>{this.localParticipant?this.onStreamMuteChange(this.localParticipant.info,B):this.logger.warn({msg:"tried to emit a stream mute change event for undefined local participant"})}),this.localParticipant.on(oo.ERROR,B=>{this.errorManager.handleError(B,Qu.PUBLISH_ERROR)}),this.emit(fr.STAGE_PARTICIPANT_JOINED,D)},this.onRemoteParticipantJoined=D=>{var B;if(D.id!==((B=this.localParticipant)===null||B===void 0?void 0:B.info.id)){const G=function(le){return{id:le.id,userId:le.userId,attributes:le.attributes,capabilities:new Set([cu.SUBSCRIBE]),isLocal:!1,userInfo:{},videoStopped:le.videoStopped,audioMuted:le.audioMuted,isPublishing:le.isPublishing}}(D);if(this.participants.has(G.id))return void this.logger.warn({msg:"Remote participant already tracked"});let re=Ba.NONE;G.capabilities.has(cu.SUBSCRIBE)&&(re=Bn.getOk_or(this.strategyWrapper.shouldSubscribeToParticipant(G),re),this.updateManagerWithExternalSubscribeConfig(G,"joined"));const oe=this.configManager.getSubscribeConfigSnapshot(G.id),J=new s1(G,this.token,this.stageConnection,this.logger.unwrap(),re,oe,this.analyticsTracker,D.isPublishing);this.participants.set(G.id,J),this.setupRemoteParticipantListeners(J),this.emit(fr.STAGE_PARTICIPANT_JOINED,J.info),J.updateSubscribeStateIfNecessary(re)}},this.setupRemoteParticipantListeners=D=>{D.on(_a.SUBSCRIPTION_STATE_CHANGE,B=>{this.onParticipantSubscribeStateChanged(D.info.id,B)}),D.on(_a.MEDIA_STREAM_ADDED,B=>{const G=this.participants.get(D.info.id);if(G){for(const re of B)this.setupRemoteParticipantStreamEvents(G.info,re);this.emit(fr.STAGE_PARTICIPANT_STREAMS_ADDED,G.info,Z0(B)),this.updateStreamLayerForParticipant(D)}else this.logger.warn({msg:"Got stream add for participant no longer being tracked"})}),D.on(_a.MEDIA_STREAM_REMOVED,B=>{const G=this.participants.get(D.info.id);G?this.emit(fr.STAGE_PARTICIPANT_STREAMS_REMOVED,G.info,Z0(B)):this.logger.warn({msg:"Got stream remove for participant no longer being tracked"})}),D.on(_a.MEDIA_STREAM_MUTE_CHANGED,B=>{this.onStreamMuteChange(D.info,B.remote)}),D.on(_a.ERROR,B=>{this.errorManager.handleError(B,Qu.SUBSCRIBE_ERROR)}),D.on(_a.MEDIA_STREAM_SEI_MESSAGE_RECEIVED,B=>{this.onSeiMessageReceived(D.info,B)})},this.onRemoteParticipantLeft=D=>{if(this.connectionState!==Pr.CONNECTED)return;const B=this.participants.get(D);B?(B.participantLeave(),B.unsubscribe(),B.cleanup(),this.participants.delete(D),this.emitParticipantLeave(B.info)):this.logger.warn({msg:"Remote participant no longer tracked"})},this.emitParticipantLeave=D=>{this.emit(fr.STAGE_PARTICIPANT_LEFT,D)},this.onRemoteParticipantStateChanged=D=>{const B=this.participants.get(D.id);if(!B)return void this.logger.warn({msg:"Remote participant updated but not tracked"});B.updatePublishState(D.isPublishing)&&this.onPublishStateChanged(B.info,B.publishState),B.updateStreamState(D.audioMuted,D.videoStopped);const G=this.strategyWrapper.shouldSubscribeToParticipant(B.info);if(Bn.isNotOk(G))return;this.updateManagerWithExternalSubscribeConfig(B.info,"updated");const re=this.configManager.getSubscribeConfigSnapshot(B.info.id),oe=Bn.getOk_or(G,Ba.NONE);B.updateSubscribeStateIfNecessary(oe,re)},this.onPublishStateChanged=(D,B)=>{this.emit(fr.STAGE_PARTICIPANT_PUBLISH_STATE_CHANGED,D,B)},this.onParticipantSubscribeStateChanged=(D,B)=>{const G=this.participants.get(D);G?this.emit(fr.STAGE_PARTICIPANT_SUBSCRIBE_STATE_CHANGED,G.info,B):this.logger.warn({msg:"Remote participant subscribe state changed but not tracked"})},this.onLocalStreamsAdded=D=>{this.localParticipant&&this.emit(fr.STAGE_PARTICIPANT_STREAMS_ADDED,this.localParticipant.info,D)},this.onLocalStreamsRemoved=D=>{this.localParticipant&&this.emit(fr.STAGE_PARTICIPANT_STREAMS_REMOVED,this.localParticipant.info,D)},this.onStreamMuteChange=(D,B)=>{this.emit(fr.STAGE_STREAM_MUTE_CHANGED,D,B)},this.onSeiMessageReceived=(D,B)=>{this.emit(fr.STAGE_STREAM_SEI_MESSAGE_RECEIVED,D,B)},this.leave=()=>{this.cleanup(np.USER_INITIATED)},this.onBeforeUnloadCleanup=()=>{var D;this.participants.forEach(B=>{B.quickUnsubscribe()}),(D=this.localParticipant)===null||D===void 0||D.quickUnpublish(),this.stageConnection.disconnect(),this.emit(fr.STAGE_CONNECTION_STATE_CHANGED,Pr.DISCONNECTED),this.analyticsTracker.stop(!0)},this.cleanup=D=>{if(!this.localParticipant)return;this.analyticsTracker.trackEventNoSharedProps(new mc({token:this.token,eventEndpoint:this.token.eventsURL,whipEndpoint:this.token.whipURL,traceId:this.joinTraceId,reason:D})),this.localParticipant.unpublish(),this.localParticipant.cleanup();const B=this.localParticipant.info;this.localParticipant=void 0,this.emitParticipantLeave(B);const G=this.participants.entries();for(const[re,oe]of G)oe.unsubscribe(),this.participants.delete(re),oe.cleanup(),this.emitParticipantLeave(oe.info);Wf.destroy(),this.stageConnection.disconnect(),this.emit(fr.STAGE_CONNECTION_STATE_CHANGED,Pr.DISCONNECTED),this.emit(fr.STAGE_LEFT,D),this.stageConnection.removeAllListeners(),this.stageConnection=new z0(this.token,this.logger.unwrap(),this.analyticsTracker),this.setupListeners(),this.analyticsTracker.stop(!1),window.removeEventListener("beforeunload",this.onBeforeUnloadCleanup)},this.refreshStrategy=()=>{this.participants.forEach(D=>{if(D.info.capabilities.has(cu.SUBSCRIBE)){const B=this.strategyWrapper.shouldSubscribeToParticipant(D.info);if(Bn.isNotOk(B))return;const G=Bn.getOk_or(B,Ba.NONE);this.updateManagerWithExternalSubscribeConfig(D.info,"updated");const re=this.configManager.getSubscribeConfigSnapshot(D.info.id);D.updateSubscribeStateIfNecessary(G,re),this.updateStreamLayerForParticipant(D)}}),this.updateStreamsToPublishIfNecessary()},this.updateStreamsToPublishIfNecessary=()=>{var D;if(!this.localParticipant||!(!((D=this.localParticipant)===null||D===void 0)&&D.info.capabilities.has(cu.PUBLISH)))return;const B=this.localParticipant.publishState!==cs.NOT_PUBLISHED&&this.localParticipant.publishState!==cs.ERRORED,G=this.strategyWrapper.shouldPublishParticipant(this.localParticipant.info);if(Bn.isNotOk(G))return;let re=Bn.getOk_or(G,!1);if(!B&&!re)return;if(B&&!re)return void this.localParticipant.unpublish();const oe=this.strategyWrapper.stageStreamsToPublish();if(Bn.isNotOk(oe)){const le=Bn.getErr(oe);if(le instanceof Error&&le.cause==="UserStrategy")throw le;return}const J=Bn.getOk_or(oe,[]);re=re&&J.length>0,!B&&re?(this.localParticipant.publish(J),this.onLocalStreamsAdded(J)):this.syncTracksToPublish(J)},this.syncTracksToPublish=D=>{var B;if(!this.localParticipant)return;const G=this.localParticipant.audioStream,re=this.localParticipant.videoStream,{updates:oe,streamsToAdd:J,streamsToRemove:le}=this.determineStreamUpdates(G,re,D);if(oe.length){for(const pe of oe)pe.newStream?(B=this.localParticipant)===null||B===void 0||B.replaceOrAddTrack(pe.newStream):pe.oldStream&&this.localParticipant.removeTrack(pe.oldStream);le.length!==0&&this.onLocalStreamsRemoved(le),J.length!==0&&this.onLocalStreamsAdded(J)}},this.determineStreamUpdates=(D,B,G=[])=>{const re=[],oe=G.slice(0,2);if(oe.sort((pe,ye)=>pe.streamType===zt.AUDIO?-1:1),oe.length===0)D&&re.push({oldStream:D}),B&&re.push({oldStream:B});else if(oe.length===1){const pe=oe[0];pe.streamType===zt.AUDIO?B&&re.push({oldStream:B}):pe.streamType===zt.VIDEO&&D&&re.push({oldStream:D})}oe.forEach(pe=>{var ye,Ie;pe.streamType===zt.AUDIO?D?D.id===pe.id&&(0,Rs.isEqual)(D.mediaConfig,pe.mediaConfig)||(!!(!((ye=D.mediaConfig)===null||ye===void 0)&&ye.stereo)!=!!(!((Ie=pe.mediaConfig)===null||Ie===void 0)&&Ie.stereo)&&this.logger.warn({msg:"Ignoring change to audio stream's stereo configuration. Re-publish to change stereo configuraiton."}),re.push({oldStream:D,newStream:pe})):re.push({newStream:pe}):pe.streamType===zt.VIDEO&&(B?B.id===pe.id&&(0,Rs.isEqual)(B.mediaConfig,pe.mediaConfig)||re.push({oldStream:B,newStream:pe}):re.push({newStream:pe}))});const J=re.map(pe=>pe.newStream).filter(es),le=re.map(pe=>pe.oldStream).filter(es);return{updates:re,streamsToAdd:J,streamsToRemove:le}},this.onReassignmentMessage=D=>ba(this,void 0,void 0,function*(){if(Xc("disableReassignments"))return void this.logger.debug({msg:"REASSIGN message ignored: disableReassignments is configured"});if(!Nr.browser.isChrome())return void this.logger.debug({msg:"REASSIGN message ignored: browser is not chrome"});const B=So();this.trackReassignmentRequest(D,B);const G=this.participants.get(D.remoteParticipantId),re=this.token.participantID,oe=function(J,{localParticipantId:le,remoteParticipant:pe}){const{participantId:ye}=J;if(le!==ye)return Bn.err(Object.assign(Object.assign({},Rt.REASSIGNMENT_REQUEST_INVALID_LOCAL_PARTICIPANT_ID),{details:`Invalid participantId received: ${ye}`}));if(!pe)return Bn.err(Object.assign(Object.assign({},Rt.REASSIGNMENT_REQUEST_INVALID_REMOTE_PARTICIPANT_ID),{details:`Invalid remoteParticipantId received: ${pe}`}));if(pe.isReassigning())return Bn.err(Rt.REASSIGNMENT_REQUEST_ALREADY_IN_PROGRESS);const Ie=pe.subscription.peerClient.getConnectionState();return[et.CONNECTED,et.DISCONNECTED].includes(Ie)?Bn.ok(pe):Bn.err(Object.assign(Object.assign({},Rt.REASSIGNMENT_REQUEST_INVALID_REMOTE_PEER_CONNECTION_STATE),{details:`connectionState: ${Ie}`}))}(D,{localParticipantId:re,remoteParticipant:G});if(!oe.ok)this.trackReassignmentRequestRejected(oe.error,B);else try{const{token:J,nodeOverride:le}=D;yield oe.value.triggerIceRestart({assignmentToken:J,traceId:B,nodeOverride:le})}catch(J){this.logger.error({msg:"Reassignment failed.",err:J})}}),this.onIncompatibleCodecsMessage=D=>ba(this,void 0,void 0,function*(){var B;yield(B=this.localParticipant)===null||B===void 0?void 0:B.onIncompatibleCodecs(D.codecs)}),this.analyticsTracker=new Hu;const M=nm();this.logger=new pa(new Of(M),me.STAGE),this.strategyWrapper=new i1(A,this.logger),this.configManager=new n1({logger:this.logger.unwrap(),subscribeDefaults:{jitterBuffer:{minDelayWhenPublishing:ls.DEFAULT,minDelayWhenSubscribeOnly:ls.DEFAULT},inBandMessaging:{enabled:!1},simulcast:{initialLayerPreference:zl.LOWEST_QUALITY}}}),this.errorManager=new t1;try{this.token=yc(E,this.analyticsTracker)}catch(D){const B=new ui(Object.assign({action:en.JOIN,token:E,traceId:So(),tag:Eo.JOIN_RELATED,location:"Stage.constructor"},Rt.MALFORMED_TOKEN));throw D instanceof Error&&(B.details=D.message),this.errorManager.handleError(B,Qu.JOIN_ERROR)||D}this.stageConnection=new z0(this.token,this.logger.unwrap(),this.analyticsTracker),this.setupListeners()}setupListeners(){this.stageConnection.on(yl,(E,A)=>{this.onConnectionStateChanged(E,A)}),this.stageConnection.on(Lh,E=>{this.onRemoteParticipantJoined(E)}),this.stageConnection.on($u,E=>{this.onRemoteParticipantLeft(E.id)}),this.stageConnection.on(gm,E=>{var A;E.id!==((A=this.localParticipant)===null||A===void 0?void 0:A.info.id)&&this.onRemoteParticipantStateChanged(E)}),this.stageConnection.on(Bl,E=>ba(this,void 0,void 0,function*(){yield this.onReassignmentMessage(E)})),this.stageConnection.on(Uh,E=>ba(this,void 0,void 0,function*(){yield this.onIncompatibleCodecsMessage(E)})),this.stageConnection.on(kd,E=>{E instanceof ui&&this.analyticsTracker.trackError(E),this.errorManager.handleError(E,Qu.JOIN_ERROR)}),this.errorManager.on(Qf.ERROR,E=>{this.emit(fr.ERROR,E)})}setupRemoteParticipantStreamEvents(E,A){const M=A.remote;A.on(Oc.ADAPTION_CHANGED,D=>{this.emit(fr.STAGE_STREAM_ADAPTION_CHANGED,E,M,D)}),A.on(Oc.LAYERS_CHANGED,D=>{this.emit(fr.STAGE_STREAM_LAYERS_CHANGED,E,M,D)}),A.on(Oc.LAYER_SELECTED,(D,B)=>{this.emit(fr.STAGE_STREAM_LAYER_SELECTED,E,M,D,B)}),A.layers.length>0&&(this.emit(fr.STAGE_STREAM_LAYERS_CHANGED,E,M,M.getLayers()),this.emit(fr.STAGE_STREAM_LAYER_SELECTED,E,M,M.getSelectedLayer(),lu.SELECTED))}join(){return ba(this,void 0,void 0,function*(){this.analyticsTracker.start(),this.joinTraceId=So(),this.analyticsTracker.trackEvent(new Pm({token:this.token,eventEndpoint:this.token.eventsURL,whipEndpoint:this.token.whipURL,traceId:this.joinTraceId}));try{this.token.assertTokenIsUnexpired(So(),Eo.JOIN_RELATED,"join")}catch(E){throw this.errorManager.handleError(E,Qu.JOIN_ERROR)||E}try{this.joinTraceId=yield this.stageConnection.connect(this.joinTraceId),this.connectionState===Pr.CONNECTED&&(this.setupLocalParticipantOnce(),this.updateStreamsToPublishIfNecessary()),window.addEventListener("beforeunload",this.onBeforeUnloadCleanup)}catch(E){throw this.logger.error({err:E,msg:"error joining stage"}),this.errorManager.handleError(E,Qu.JOIN_ERROR,!1)||E}})}replaceStrategy(E){this.strategyWrapper.setStrategy(E),this.refreshStrategy()}updateManagerWithExternalSubscribeConfig(E,A){const M=Bn.getOk(this.strategyWrapper.subscribeConfiguration(E));if(M===void 0)return;const D=E.id;if(this.configManager.handleExternalSubscribeConfigUpdate(D,M,ep.API)){const B=this.configManager.getSubscribeConfigSnapshot(D);this.analyticsTracker.trackEventNoSharedProps(new jf(this.token,this.joinTraceId,{trigger:A==="joined"?"initial":"ad-hoc",remote_participant_id:D,min_delay_when_publishing:na(B.jitterBuffer.minDelayWhenPublishing,!0),min_delay_when_subscribe_only:na(B.jitterBuffer.minDelayWhenSubscribeOnly,!1),in_band_messaging_enabled:B.inBandMessaging.enabled,simulcast_initial_layer_preference:B.simulcast.initialLayerPreference}))}}updateStreamLayerForParticipant(E){E.streams.forEach(A=>{if(A.streamType==="audio")return;const M=this.strategyWrapper.preferredLayerForStream(E.info,A.remote),D=Bn.getOk_or(M,void 0);A.setLayer(D)})}trackReassignmentRequestRejected(E,A){const{token:M}=this,D=new ui(Object.assign(Object.assign({},E),{token:M,action:en.JOIN,traceId:A,tag:Eo.SUBSCRIBE_RELATED,location:"publish"}));this.logger.error({err:D,msg:"Reassignment request rejected."}),this.analyticsTracker.trackError(D)}trackReassignmentRequest(E,A){const{token:M}=this;this.analyticsTracker.trackEvent(new wS({token:M,traceId:A,targetLocalParticipantId:E.participantId,targetRemoteParticipantId:E.remoteParticipantId}))}}var np;(function(O){O.UNKNOWN="unknown",O.USER_INITIATED="user-initiated",O.TOKEN_REUSED="token-reused",O.PARTICIPANT_DISCONNECTED="participant-disconnected",O.STAGE_DELETED="stage-deleted"})(np||(np={}));const t_=h})(),s})())})(Jde);var rst=Jde.exports;const Rot=Dl(rst),Qde="0123456789abcdefABCDEF";Qde.split("").map(n=>n.codePointAt(0));Array(256).fill(!0).map((n,e)=>{const t=String.fromCodePoint(e),i=Qde.indexOf(t);return i<0?void 0:i<16?i:i-6});new TextEncoder;new TextDecoder;function uE(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;++i)if(n[i]!==e[i])return n[i]<e[i]?-1:1;return n.length===e.length?0:n.length>e.length?1:-1}var sst=(n,e,t=Math.min(n.byteLength,e.byteLength))=>{for(let i=0;i<t;i++){const r=n[i],s=e[i];if(r!==s)return 8*t-(i*8+Math.clz32(r^s)-24)}return 0},Oot=class{constructor(n,e){this.id=n,this.bucketSize=e.bucketSize||20,this.buckets=new Array(n.length*8+1).fill(void 0).map(()=>[]),this.compare=e.compare||(()=>0),this.getId=e.getId}get length(){return this.buckets.reduce((n,e)=>n+e.length,0)}*[Symbol.iterator](){for(const n of this.buckets)for(const e of n)yield e}add(n,e=this.getBitwiseDistance(this.getId(n))){if(this.has(this.getId(n),e))return!1;if(this.buckets[e].length<this.bucketSize)return this.buckets[e].push(n),!0;const t=this.buckets[e].slice(0);t.push(n);const i=t.sort(this.compare);this.buckets[e]=i.slice(0,this.bucketSize);const r=i.at(-1);return uE(this.getId(n),this.getId(r))!==0}clear(){for(let n=0;n<this.buckets.length;n++)this.buckets[n]=[]}listClosestToId(n,e=this.buckets.length*this.bucketSize){const t=this.getBitwiseDistance(n);return this.getNodes(t,e)}get(n){const e=this.buckets[n].shift();return e&&this.buckets[n].push(e),e}getById(n,e=this.getBitwiseDistance(n)){const t=this.buckets[e].findIndex(r=>uE(this.getId(r),n)===0);if(t===-1)return;const i=this.buckets[e][t];return this.buckets[e].splice(t,1),this.buckets[e].push(i),i}getBitwiseDistance(n){return sst(this.id,n)}getNodes(n,e,t=0){const i=(t%2===0?1:-1)*Math.ceil(t/2);if(Math.abs(i)>Math.max(n,this.buckets.length-1-n))return[];const r=n+i;if(0>r||r>this.buckets.length-1)return this.getNodes(n,e,t+1);const s=this.buckets[r].slice(0,e);return s.length>=e?(this.buckets[r]=this.buckets[r].slice(s.length).concat(this.buckets[r].slice(0,s.length)),s):s.concat(this.getNodes(n,e-s.length,t+1))}has(n,e=this.getBitwiseDistance(n)){return!!this.buckets[e].find(t=>uE(this.getId(t),n)===0)}peek(n){return this.buckets[n].at(0)}peekById(n,e=this.getBitwiseDistance(n)){return this.buckets[e].find(t=>uE(this.getId(t),n)===0)}update(n,e=this.getBitwiseDistance(this.getId(n))){const t=this.buckets[e].findIndex(i=>uE(this.getId(i),this.getId(n))===0);return t===-1?!1:(this.buckets[e][t]=n,!0)}remove(n,e=this.getBitwiseDistance(n)){const t=this.buckets[e].findIndex(i=>uE(this.getId(i),n)===0);return t===-1?!1:(this.buckets[e].splice(t,1),!0)}};export{fn as $,bst as A,Mst as B,dn as C,jx as D,oat as E,Dst as F,Rst as G,Rce as H,Tg as I,Lst as J,vce as K,vd as L,Ii as M,Pa as N,Tce as O,bce as P,Nb as Q,HU as R,mat as S,BBe as T,$at as U,gt as V,Wat as W,ec as X,nx as Y,zp as Z,gh as _,Pst as a,cot as a$,Yi as a0,Cce as a1,xce as a2,wce as a3,Ace as a4,Sce as a5,HE as a6,mce as a7,gce as a8,VU as a9,cf as aA,Vr as aB,d2 as aC,Age as aD,$a as aE,dpe as aF,yot as aG,bot as aH,_ot as aI,NWe as aJ,not as aK,lot as aL,Re as aM,mA as aN,Est as aO,md as aP,iot as aQ,TT as aR,Sot as aS,uat as aT,eot as aU,mI as aV,Qat as aW,vf as aX,Eot as aY,oot as aZ,utt as a_,$P as aa,Kat as ab,Yx as ac,Ece as ad,ux as ae,fce as af,Oa as ag,Mce as ah,V5 as ai,Zat as aj,Jat as ak,zU as al,$U as am,nQe as an,yM as ao,qat as ap,Xat as aq,WU as ar,kb as as,Wi as at,ab as au,Mi as av,Ya as aw,uot as ax,jo as ay,Eu as az,iat as b,tot as b0,rot as b1,hQ as b2,Wme as b3,fne as b4,oj as b5,Oot as b6,Rot as b7,h6 as b8,wst as b9,sot as ba,mst as bb,gst as bc,aot as bd,hot as be,fot as bf,P_ as bg,pot as bh,dot as bi,OV as bj,mot as bk,got as bl,j1 as bm,cK as bn,vot as bo,yst as bp,_st as bq,vst as br,rEe as bs,Ist as c,Lse as d,rH as e,qxe as f,lat as g,Ast as h,xst as i,nat as j,cat as k,hat as l,Sst as m,Nst as n,Cst as o,aat as p,sat as q,vt as r,dat as s,Tst as t,tat as u,ome as v,fat as w,gat as x,OWe as y,Ost as z};
