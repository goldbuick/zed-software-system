import{c as yt,r as ji,B as j,p as D,a as Zo,b as re}from"./index-CkaPtcMD.js";var nt={},Kt={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Kt.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,o=r&&!r.nodeType&&r,i=typeof yt=="object"&&yt;(i.global===i||i.window===i||i.self===i)&&(t=i);var s,a=2147483647,f=36,l=1,c=26,p=38,u=700,y=72,h=128,d="-",S=/^xn--/,k=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=f-l,A=Math.floor,C=String.fromCharCode,G;function N(m){throw new RangeError(v[m])}function F(m,E){for(var I=m.length,U=[];I--;)U[I]=E(m[I]);return U}function q(m,E){var I=m.split("@"),U="";I.length>1&&(U=I[0]+"@",m=I[1]),m=m.replace(g,".");var B=m.split("."),H=F(B,E).join(".");return U+H}function b(m){for(var E=[],I=0,U=m.length,B,H;I<U;)B=m.charCodeAt(I++),B>=55296&&B<=56319&&I<U?(H=m.charCodeAt(I++),(H&64512)==56320?E.push(((B&1023)<<10)+(H&1023)+65536):(E.push(B),I--)):E.push(B);return E}function w(m){return F(m,function(E){var I="";return E>65535&&(E-=65536,I+=C(E>>>10&1023|55296),E=56320|E&1023),I+=C(E),I}).join("")}function _(m){return m-48<10?m-22:m-65<26?m-65:m-97<26?m-97:f}function R(m,E){return m+22+75*(m<26)-((E!=0)<<5)}function M(m,E,I){var U=0;for(m=I?A(m/u):m>>1,m+=A(m/E);m>$*c>>1;U+=f)m=A(m/$);return A(U+($+1)*m/(m+p))}function T(m){var E=[],I=m.length,U,B=0,H=h,X=y,ne,se,ue,me,Z,ie,fe,Ee,$e;for(ne=m.lastIndexOf(d),ne<0&&(ne=0),se=0;se<ne;++se)m.charCodeAt(se)>=128&&N("not-basic"),E.push(m.charCodeAt(se));for(ue=ne>0?ne+1:0;ue<I;){for(me=B,Z=1,ie=f;ue>=I&&N("invalid-input"),fe=_(m.charCodeAt(ue++)),(fe>=f||fe>A((a-B)/Z))&&N("overflow"),B+=fe*Z,Ee=ie<=X?l:ie>=X+c?c:ie-X,!(fe<Ee);ie+=f)$e=f-Ee,Z>A(a/$e)&&N("overflow"),Z*=$e;U=E.length+1,X=M(B-me,U,me==0),A(B/U)>a-H&&N("overflow"),H+=A(B/U),B%=U,E.splice(B++,0,H)}return w(E)}function ce(m){var E,I,U,B,H,X,ne,se,ue,me,Z,ie=[],fe,Ee,$e,_r;for(m=b(m),fe=m.length,E=h,I=0,H=y,X=0;X<fe;++X)Z=m[X],Z<128&&ie.push(C(Z));for(U=B=ie.length,B&&ie.push(d);U<fe;){for(ne=a,X=0;X<fe;++X)Z=m[X],Z>=E&&Z<ne&&(ne=Z);for(Ee=U+1,ne-E>A((a-I)/Ee)&&N("overflow"),I+=(ne-E)*Ee,E=ne,X=0;X<fe;++X)if(Z=m[X],Z<E&&++I>a&&N("overflow"),Z==E){for(se=I,ue=f;me=ue<=H?l:ue>=H+c?c:ue-H,!(se<me);ue+=f)_r=se-me,$e=f-me,ie.push(C(R(me+_r%$e,0))),se=A(_r/$e);ie.push(C(R(se,0))),H=M(I,Ee,U==B),I=0,++U}++I,++E}return ie.join("")}function Be(m){return q(m,function(E){return S.test(E)?T(E.slice(4).toLowerCase()):E})}function be(m){return q(m,function(E){return k.test(E)?"xn--"+ce(E):E})}if(s={version:"1.4.1",ucs2:{decode:b,encode:w},decode:T,encode:ce,toASCII:be,toUnicode:Be},n&&o)if(r.exports==n)o.exports=s;else for(G in s)s.hasOwnProperty(G)&&(n[G]=s[G]);else t.punycode=s})(yt)})(Kt,Kt.exports);var Gi=Kt.exports,Oe=TypeError,mn=typeof Map=="function"&&Map.prototype,Sr=Object.getOwnPropertyDescriptor&&mn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Yt=mn&&Sr&&typeof Sr.get=="function"?Sr.get:null,Dn=mn&&Map.prototype.forEach,gn=typeof Set=="function"&&Set.prototype,br=Object.getOwnPropertyDescriptor&&gn?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Jt=gn&&br&&typeof br.get=="function"?br.get:null,Mn=gn&&Set.prototype.forEach,qi=typeof WeakMap=="function"&&WeakMap.prototype,ht=qi?WeakMap.prototype.has:null,Vi=typeof WeakSet=="function"&&WeakSet.prototype,dt=Vi?WeakSet.prototype.has:null,zi=typeof WeakRef=="function"&&WeakRef.prototype,Bn=zi?WeakRef.prototype.deref:null,Hi=Boolean.prototype.valueOf,Ki=Object.prototype.toString,Yi=Function.prototype.toString,Ji=String.prototype.match,_n=String.prototype.slice,Pe=String.prototype.replace,Qi=String.prototype.toUpperCase,Ln=String.prototype.toLowerCase,ei=RegExp.prototype.test,Wn=Array.prototype.concat,ve=Array.prototype.join,Xi=Array.prototype.slice,jn=Math.floor,on=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Er=Object.getOwnPropertySymbols,an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ee=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ze||!0)?Symbol.toStringTag:null,ti=Object.prototype.propertyIsEnumerable,Gn=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function qn(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||ei.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-jn(-r):jn(r);if(n!==r){var o=String(n),i=_n.call(e,o.length+1);return Pe.call(o,t,"$&_")+"."+Pe.call(Pe.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pe.call(e,t,"$&_")}var sn=ji,Vn=sn.custom,zn=oi(Vn)?Vn:null,ri={__proto__:null,double:'"',single:"'"},Zi={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},sr=function r(e,t,n,o){var i=t||{};if(ge(i,"quoteStyle")&&!ge(ri,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ge(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=ge(i,"customInspect")?i.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ge(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ge(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return ai(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var f=String(e);return a?qn(e,f):f}if(typeof e=="bigint"){var l=String(e)+"n";return a?qn(e,l):l}var c=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return fn(e)?"[Array]":"[Object]";var p=ma(i,n);if(typeof o>"u")o=[];else if(ii(o,e)>=0)return"[Circular]";function u(_,R,M){if(R&&(o=Xi.call(o),o.push(R)),M){var T={depth:i.depth};return ge(i,"quoteStyle")&&(T.quoteStyle=i.quoteStyle),r(_,T,n+1,o)}return r(_,i,n+1,o)}if(typeof e=="function"&&!Hn(e)){var y=fa(e),h=Tt(e,u);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(h.length>0?" { "+ve.call(h,", ")+" }":"")}if(oi(e)){var d=Ze?Pe.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):an.call(e);return typeof e=="object"&&!Ze?it(d):d}if(ha(e)){for(var S="<"+Ln.call(String(e.nodeName)),k=e.attributes||[],g=0;g<k.length;g++)S+=" "+k[g].name+"="+ni(ea(k[g].value),"double",i);return S+=">",e.childNodes&&e.childNodes.length&&(S+="..."),S+="</"+Ln.call(String(e.nodeName))+">",S}if(fn(e)){if(e.length===0)return"[]";var v=Tt(e,u);return p&&!va(v)?"["+ln(v,p)+"]":"[ "+ve.call(v,", ")+" ]"}if(ra(e)){var $=Tt(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!ti.call(e,"cause")?"{ ["+String(e)+"] "+ve.call(Wn.call("[cause]: "+u(e.cause),$),", ")+" }":$.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+ve.call($,", ")+" }"}if(typeof e=="object"&&s){if(zn&&typeof e[zn]=="function"&&sn)return sn(e,{depth:c-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(la(e)){var A=[];return Dn&&Dn.call(e,function(_,R){A.push(u(R,e,!0)+" => "+u(_,e))}),Kn("Map",Yt.call(e),A,p)}if(pa(e)){var C=[];return Mn&&Mn.call(e,function(_){C.push(u(_,e))}),Kn("Set",Jt.call(e),C,p)}if(ca(e))return wr("WeakMap");if(ya(e))return wr("WeakSet");if(ua(e))return wr("WeakRef");if(oa(e))return it(u(Number(e)));if(aa(e))return it(u(on.call(e)));if(ia(e))return it(Hi.call(e));if(na(e))return it(u(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof yt<"u"&&e===yt)return"{ [object globalThis] }";if(!ta(e)&&!Hn(e)){var G=Tt(e,u),N=Gn?Gn(e)===Object.prototype:e instanceof Object||e.constructor===Object,F=e instanceof Object?"":"null prototype",q=!N&&ee&&Object(e)===e&&ee in e?_n.call(xe(e),8,-1):F?"Object":"",b=N||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",w=b+(q||F?"["+ve.call(Wn.call([],q||[],F||[]),": ")+"] ":"");return G.length===0?w+"{}":p?w+"{"+ln(G,p)+"}":w+"{ "+ve.call(G,", ")+" }"}return String(e)};function ni(r,e,t){var n=t.quoteStyle||e,o=ri[n];return o+r+o}function ea(r){return Pe.call(String(r),/"/g,"&quot;")}function fn(r){return xe(r)==="[object Array]"&&(!ee||!(typeof r=="object"&&ee in r))}function ta(r){return xe(r)==="[object Date]"&&(!ee||!(typeof r=="object"&&ee in r))}function Hn(r){return xe(r)==="[object RegExp]"&&(!ee||!(typeof r=="object"&&ee in r))}function ra(r){return xe(r)==="[object Error]"&&(!ee||!(typeof r=="object"&&ee in r))}function na(r){return xe(r)==="[object String]"&&(!ee||!(typeof r=="object"&&ee in r))}function oa(r){return xe(r)==="[object Number]"&&(!ee||!(typeof r=="object"&&ee in r))}function ia(r){return xe(r)==="[object Boolean]"&&(!ee||!(typeof r=="object"&&ee in r))}function oi(r){if(Ze)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!an)return!1;try{return an.call(r),!0}catch{}return!1}function aa(r){if(!r||typeof r!="object"||!on)return!1;try{return on.call(r),!0}catch{}return!1}var sa=Object.prototype.hasOwnProperty||function(r){return r in this};function ge(r,e){return sa.call(r,e)}function xe(r){return Ki.call(r)}function fa(r){if(r.name)return r.name;var e=Ji.call(Yi.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function ii(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function la(r){if(!Yt||!r||typeof r!="object")return!1;try{Yt.call(r);try{Jt.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function ca(r){if(!ht||!r||typeof r!="object")return!1;try{ht.call(r,ht);try{dt.call(r,dt)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function ua(r){if(!Bn||!r||typeof r!="object")return!1;try{return Bn.call(r),!0}catch{}return!1}function pa(r){if(!Jt||!r||typeof r!="object")return!1;try{Jt.call(r);try{Yt.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function ya(r){if(!dt||!r||typeof r!="object")return!1;try{dt.call(r,dt);try{ht.call(r,ht)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function ha(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function ai(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return ai(_n.call(r,0,e.maxStringLength),e)+n}var o=Zi[e.quoteStyle||"single"];o.lastIndex=0;var i=Pe.call(Pe.call(r,o,"\\$1"),/[\x00-\x1f]/g,da);return ni(i,"single",e)}function da(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+Qi.call(e.toString(16))}function it(r){return"Object("+r+")"}function wr(r){return r+" { ? }"}function Kn(r,e,t,n){var o=n?ln(t,n):ve.call(t,", ");return r+" ("+e+") {"+o+"}"}function va(r){for(var e=0;e<r.length;e++)if(ii(r[e],`
`)>=0)return!1;return!0}function ma(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=ve.call(Array(r.indent+1)," ");else return null;return{base:t,prev:ve.call(Array(e+1),t)}}function ln(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+ve.call(r,","+t)+`
`+e.prev}function Tt(r,e){var t=fn(r),n=[];if(t){n.length=r.length;for(var o=0;o<r.length;o++)n[o]=ge(r,o)?e(r[o],r):""}var i=typeof Er=="function"?Er(r):[],s;if(Ze){s={};for(var a=0;a<i.length;a++)s["$"+i[a]]=i[a]}for(var f in r)ge(r,f)&&(t&&String(Number(f))===f&&f<r.length||Ze&&s["$"+f]instanceof Symbol||(ei.call(/[^\w$]/,f)?n.push(e(f,r)+": "+e(r[f],r)):n.push(f+": "+e(r[f],r))));if(typeof Er=="function")for(var l=0;l<i.length;l++)ti.call(r,i[l])&&n.push("["+e(i[l])+"]: "+e(r[i[l]],r));return n}var ga=sr,_a=Oe,fr=function(r,e,t){for(var n=r,o;(o=n.next)!=null;n=o)if(o.key===e)return n.next=o.next,t||(o.next=r.next,r.next=o),o},Sa=function(r,e){if(r){var t=fr(r,e);return t&&t.value}},ba=function(r,e,t){var n=fr(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},Ea=function(r,e){return r?!!fr(r,e):!1},wa=function(r,e){if(r)return fr(r,e,!0)},Aa=function(){var e,t={assert:function(n){if(!t.has(n))throw new _a("Side channel does not contain "+ga(n))},delete:function(n){var o=e&&e.next,i=wa(e,n);return i&&o&&o===i&&(e=void 0),!!i},get:function(n){return Sa(e,n)},has:function(n){return Ea(e,n)},set:function(n,o){e||(e={next:void 0}),ba(e,n,o)}};return t},lr=Object,Sn=Error,bn=EvalError,En=RangeError,wn=ReferenceError,An=SyntaxError,Pn=URIError,On=Math.abs,xn=Math.floor,$n=Math.max,In=Math.min,Rn=Math.pow,Tn=Math.round,Pa=Number.isNaN||function(e){return e!==e},Oa=Pa,Cn=function(e){return Oa(e)||e===0?e:e<0?-1:1},xa=Object.getOwnPropertyDescriptor,Bt=xa;if(Bt)try{Bt([],"length")}catch{Bt=null}var $a=Bt,Lt=Object.defineProperty||!1;if(Lt)try{Lt({},"a",{value:1})}catch{Lt=!1}var Ia=Lt,Ar,Yn;function Ra(){return Yn||(Yn=1,Ar=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==o||a.enumerable!==!0)return!1}return!0}),Ar}var Pr,Jn;function Ta(){if(Jn)return Pr;Jn=1;var r=typeof Symbol<"u"&&Symbol,e=Ra();return Pr=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Pr}var Or,Qn;function cr(){return Qn||(Qn=1,Or=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Or}var xr,Xn;function ur(){if(Xn)return xr;Xn=1;var r=lr;return xr=r.getPrototypeOf||null,xr}var Ca="Function.prototype.bind called on incompatible ",Na=Object.prototype.toString,ka=Math.max,Fa="[object Function]",Zn=function(e,t){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},Ua=function(e,t){for(var n=[],o=t,i=0;o<e.length;o+=1,i+=1)n[i]=e[o];return n},Da=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},Ma=function(e){var t=this;if(typeof t!="function"||Na.apply(t)!==Fa)throw new TypeError(Ca+t);for(var n=Ua(arguments,1),o,i=function(){if(this instanceof o){var c=t.apply(this,Zn(n,arguments));return Object(c)===c?c:this}return t.apply(e,Zn(n,arguments))},s=ka(0,t.length-n.length),a=[],f=0;f<s;f++)a[f]="$"+f;if(o=Function("binder","return function ("+Da(a,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var l=function(){};l.prototype=t.prototype,o.prototype=new l,l.prototype=null}return o},Ba=Ma,ot=Function.prototype.bind||Ba,St=Function.prototype.call,$r,eo;function pr(){return eo||(eo=1,$r=Function.prototype.apply),$r}var La=typeof Reflect<"u"&&Reflect&&Reflect.apply,Wa=ot,ja=pr(),Ga=St,qa=La,Va=qa||Wa.call(Ga,ja),za=ot,Ha=Oe,Ka=St,Ya=Va,si=function(e){if(e.length<1||typeof e[0]!="function")throw new Ha("a function is required");return Ya(za,Ka,e)},Ir,to;function Ja(){return to||(to=1,Ir=Object.getOwnPropertyDescriptor),Ir}var Rr,ro;function Qa(){if(ro)return Rr;ro=1;var r=Ja();if(r)try{r([],"length")}catch{r=null}return Rr=r,Rr}var Tr,no;function Xa(){if(no)return Tr;no=1;var r=si,e=Qa(),t;try{t=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var n=!!t&&e&&e(Object.prototype,"__proto__"),o=Object,i=o.getPrototypeOf;return Tr=n&&typeof n.get=="function"?r([n.get]):typeof i=="function"?function(a){return i(a==null?a:o(a))}:!1,Tr}var Cr,oo;function Nn(){if(oo)return Cr;oo=1;var r=cr(),e=ur(),t=Xa();return Cr=r?function(o){return r(o)}:e?function(o){if(!o||typeof o!="object"&&typeof o!="function")throw new TypeError("getProto: not an object");return e(o)}:t?function(o){return t(o)}:null,Cr}var Nr,io;function kn(){if(io)return Nr;io=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=ot;return Nr=t.call(r,e),Nr}var P,Za=lr,es=Sn,ts=bn,rs=En,ns=wn,et=An,Ye=Oe,os=Pn,is=On,as=xn,ss=$n,fs=In,ls=Rn,cs=Tn,us=Cn,fi=Function,kr=function(r){try{return fi('"use strict"; return ('+r+").constructor;")()}catch{}},mt=$a,ps=Ia,Fr=function(){throw new Ye},ys=mt?function(){try{return arguments.callee,Fr}catch{try{return mt(arguments,"callee").get}catch{return Fr}}}():Fr,Le=Ta()(),Y=Nn(),hs=ur(),ds=cr(),li=pr(),bt=St,Ve={},vs=typeof Uint8Array>"u"||!Y?P:Y(Uint8Array),Ne={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?P:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?P:ArrayBuffer,"%ArrayIteratorPrototype%":Le&&Y?Y([][Symbol.iterator]()):P,"%AsyncFromSyncIteratorPrototype%":P,"%AsyncFunction%":Ve,"%AsyncGenerator%":Ve,"%AsyncGeneratorFunction%":Ve,"%AsyncIteratorPrototype%":Ve,"%Atomics%":typeof Atomics>"u"?P:Atomics,"%BigInt%":typeof BigInt>"u"?P:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?P:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?P:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?P:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":es,"%eval%":eval,"%EvalError%":ts,"%Float32Array%":typeof Float32Array>"u"?P:Float32Array,"%Float64Array%":typeof Float64Array>"u"?P:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?P:FinalizationRegistry,"%Function%":fi,"%GeneratorFunction%":Ve,"%Int8Array%":typeof Int8Array>"u"?P:Int8Array,"%Int16Array%":typeof Int16Array>"u"?P:Int16Array,"%Int32Array%":typeof Int32Array>"u"?P:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Le&&Y?Y(Y([][Symbol.iterator]())):P,"%JSON%":typeof JSON=="object"?JSON:P,"%Map%":typeof Map>"u"?P:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Le||!Y?P:Y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Za,"%Object.getOwnPropertyDescriptor%":mt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?P:Promise,"%Proxy%":typeof Proxy>"u"?P:Proxy,"%RangeError%":rs,"%ReferenceError%":ns,"%Reflect%":typeof Reflect>"u"?P:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?P:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Le||!Y?P:Y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?P:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Le&&Y?Y(""[Symbol.iterator]()):P,"%Symbol%":Le?Symbol:P,"%SyntaxError%":et,"%ThrowTypeError%":ys,"%TypedArray%":vs,"%TypeError%":Ye,"%Uint8Array%":typeof Uint8Array>"u"?P:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?P:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?P:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?P:Uint32Array,"%URIError%":os,"%WeakMap%":typeof WeakMap>"u"?P:WeakMap,"%WeakRef%":typeof WeakRef>"u"?P:WeakRef,"%WeakSet%":typeof WeakSet>"u"?P:WeakSet,"%Function.prototype.call%":bt,"%Function.prototype.apply%":li,"%Object.defineProperty%":ps,"%Object.getPrototypeOf%":hs,"%Math.abs%":is,"%Math.floor%":as,"%Math.max%":ss,"%Math.min%":fs,"%Math.pow%":ls,"%Math.round%":cs,"%Math.sign%":us,"%Reflect.getPrototypeOf%":ds};if(Y)try{null.error}catch(r){var ms=Y(Y(r));Ne["%Error.prototype%"]=ms}var gs=function r(e){var t;if(e==="%AsyncFunction%")t=kr("async function () {}");else if(e==="%GeneratorFunction%")t=kr("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=kr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=r("%AsyncGenerator%");o&&Y&&(t=Y(o.prototype))}return Ne[e]=t,t},ao={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Et=ot,Qt=kn(),_s=Et.call(bt,Array.prototype.concat),Ss=Et.call(li,Array.prototype.splice),so=Et.call(bt,String.prototype.replace),Xt=Et.call(bt,String.prototype.slice),bs=Et.call(bt,RegExp.prototype.exec),Es=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ws=/\\(\\)?/g,As=function(e){var t=Xt(e,0,1),n=Xt(e,-1);if(t==="%"&&n!=="%")throw new et("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new et("invalid intrinsic syntax, expected opening `%`");var o=[];return so(e,Es,function(i,s,a,f){o[o.length]=a?so(f,ws,"$1"):s||i}),o},Ps=function(e,t){var n=e,o;if(Qt(ao,n)&&(o=ao[n],n="%"+o[0]+"%"),Qt(Ne,n)){var i=Ne[n];if(i===Ve&&(i=gs(n)),typeof i>"u"&&!t)throw new Ye("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new et("intrinsic "+e+" does not exist!")},Os=function(e,t){if(typeof e!="string"||e.length===0)throw new Ye("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ye('"allowMissing" argument must be a boolean');if(bs(/^%?[^%]*%?$/,e)===null)throw new et("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=As(e),o=n.length>0?n[0]:"",i=Ps("%"+o+"%",t),s=i.name,a=i.value,f=!1,l=i.alias;l&&(o=l[0],Ss(n,_s([0,1],l)));for(var c=1,p=!0;c<n.length;c+=1){var u=n[c],y=Xt(u,0,1),h=Xt(u,-1);if((y==='"'||y==="'"||y==="`"||h==='"'||h==="'"||h==="`")&&y!==h)throw new et("property names with quotes must have matching quotes");if((u==="constructor"||!p)&&(f=!0),o+="."+u,s="%"+o+"%",Qt(Ne,s))a=Ne[s];else if(a!=null){if(!(u in a)){if(!t)throw new Ye("base intrinsic for "+e+" exists, but the property is not available.");return}if(mt&&c+1>=n.length){var d=mt(a,u);p=!!d,p&&"get"in d&&!("originalValue"in d.get)?a=d.get:a=a[u]}else p=Qt(a,u),a=a[u];p&&!f&&(Ne[s]=a)}}return a},xs=Object.getOwnPropertyDescriptor,Wt=xs;if(Wt)try{Wt([],"length")}catch{Wt=null}var $s=Wt,jt=Object.defineProperty||!1;if(jt)try{jt({},"a",{value:1})}catch{jt=!1}var Is=jt,Ur,fo;function Rs(){return fo||(fo=1,Ur=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==o||a.enumerable!==!0)return!1}return!0}),Ur}var Dr,lo;function Ts(){if(lo)return Dr;lo=1;var r=typeof Symbol<"u"&&Symbol,e=Rs();return Dr=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Dr}var O,Cs=lr,Ns=Sn,ks=bn,Fs=En,Us=wn,tt=An,Je=Oe,Ds=Pn,Ms=On,Bs=xn,Ls=$n,Ws=In,js=Rn,Gs=Tn,qs=Cn,ci=Function,Mr=function(r){try{return ci('"use strict"; return ('+r+").constructor;")()}catch{}},gt=$s,Vs=Is,Br=function(){throw new Je},zs=gt?function(){try{return arguments.callee,Br}catch{try{return gt(arguments,"callee").get}catch{return Br}}}():Br,We=Ts()(),J=Nn(),Hs=ur(),Ks=cr(),ui=pr(),wt=St,ze={},Ys=typeof Uint8Array>"u"||!J?O:J(Uint8Array),ke={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?O:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?O:ArrayBuffer,"%ArrayIteratorPrototype%":We&&J?J([][Symbol.iterator]()):O,"%AsyncFromSyncIteratorPrototype%":O,"%AsyncFunction%":ze,"%AsyncGenerator%":ze,"%AsyncGeneratorFunction%":ze,"%AsyncIteratorPrototype%":ze,"%Atomics%":typeof Atomics>"u"?O:Atomics,"%BigInt%":typeof BigInt>"u"?O:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?O:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?O:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?O:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Ns,"%eval%":eval,"%EvalError%":ks,"%Float32Array%":typeof Float32Array>"u"?O:Float32Array,"%Float64Array%":typeof Float64Array>"u"?O:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?O:FinalizationRegistry,"%Function%":ci,"%GeneratorFunction%":ze,"%Int8Array%":typeof Int8Array>"u"?O:Int8Array,"%Int16Array%":typeof Int16Array>"u"?O:Int16Array,"%Int32Array%":typeof Int32Array>"u"?O:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":We&&J?J(J([][Symbol.iterator]())):O,"%JSON%":typeof JSON=="object"?JSON:O,"%Map%":typeof Map>"u"?O:Map,"%MapIteratorPrototype%":typeof Map>"u"||!We||!J?O:J(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Cs,"%Object.getOwnPropertyDescriptor%":gt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?O:Promise,"%Proxy%":typeof Proxy>"u"?O:Proxy,"%RangeError%":Fs,"%ReferenceError%":Us,"%Reflect%":typeof Reflect>"u"?O:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?O:Set,"%SetIteratorPrototype%":typeof Set>"u"||!We||!J?O:J(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?O:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":We&&J?J(""[Symbol.iterator]()):O,"%Symbol%":We?Symbol:O,"%SyntaxError%":tt,"%ThrowTypeError%":zs,"%TypedArray%":Ys,"%TypeError%":Je,"%Uint8Array%":typeof Uint8Array>"u"?O:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?O:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?O:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?O:Uint32Array,"%URIError%":Ds,"%WeakMap%":typeof WeakMap>"u"?O:WeakMap,"%WeakRef%":typeof WeakRef>"u"?O:WeakRef,"%WeakSet%":typeof WeakSet>"u"?O:WeakSet,"%Function.prototype.call%":wt,"%Function.prototype.apply%":ui,"%Object.defineProperty%":Vs,"%Object.getPrototypeOf%":Hs,"%Math.abs%":Ms,"%Math.floor%":Bs,"%Math.max%":Ls,"%Math.min%":Ws,"%Math.pow%":js,"%Math.round%":Gs,"%Math.sign%":qs,"%Reflect.getPrototypeOf%":Ks};if(J)try{null.error}catch(r){var Js=J(J(r));ke["%Error.prototype%"]=Js}var Qs=function r(e){var t;if(e==="%AsyncFunction%")t=Mr("async function () {}");else if(e==="%GeneratorFunction%")t=Mr("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Mr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=r("%AsyncGenerator%");o&&J&&(t=J(o.prototype))}return ke[e]=t,t},co={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},At=ot,Zt=kn(),Xs=At.call(wt,Array.prototype.concat),Zs=At.call(ui,Array.prototype.splice),uo=At.call(wt,String.prototype.replace),er=At.call(wt,String.prototype.slice),ef=At.call(wt,RegExp.prototype.exec),tf=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,rf=/\\(\\)?/g,nf=function(e){var t=er(e,0,1),n=er(e,-1);if(t==="%"&&n!=="%")throw new tt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new tt("invalid intrinsic syntax, expected opening `%`");var o=[];return uo(e,tf,function(i,s,a,f){o[o.length]=a?uo(f,rf,"$1"):s||i}),o},of=function(e,t){var n=e,o;if(Zt(co,n)&&(o=co[n],n="%"+o[0]+"%"),Zt(ke,n)){var i=ke[n];if(i===ze&&(i=Qs(n)),typeof i>"u"&&!t)throw new Je("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new tt("intrinsic "+e+" does not exist!")},af=function(e,t){if(typeof e!="string"||e.length===0)throw new Je("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Je('"allowMissing" argument must be a boolean');if(ef(/^%?[^%]*%?$/,e)===null)throw new tt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=nf(e),o=n.length>0?n[0]:"",i=of("%"+o+"%",t),s=i.name,a=i.value,f=!1,l=i.alias;l&&(o=l[0],Zs(n,Xs([0,1],l)));for(var c=1,p=!0;c<n.length;c+=1){var u=n[c],y=er(u,0,1),h=er(u,-1);if((y==='"'||y==="'"||y==="`"||h==='"'||h==="'"||h==="`")&&y!==h)throw new tt("property names with quotes must have matching quotes");if((u==="constructor"||!p)&&(f=!0),o+="."+u,s="%"+o+"%",Zt(ke,s))a=ke[s];else if(a!=null){if(!(u in a)){if(!t)throw new Je("base intrinsic for "+e+" exists, but the property is not available.");return}if(gt&&c+1>=n.length){var d=gt(a,u);p=!!d,p&&"get"in d&&!("originalValue"in d.get)?a=d.get:a=a[u]}else p=Zt(a,u),a=a[u];p&&!f&&(ke[s]=a)}}return a},pi=af,yi=si,sf=yi([pi("%String.prototype.indexOf%")]),hi=function(e,t){var n=pi(e,!!t);return typeof n=="function"&&sf(e,".prototype.")>-1?yi([n]):n},ff=Os,Pt=hi,lf=sr,cf=Oe,po=ff("%Map%",!0),uf=Pt("Map.prototype.get",!0),pf=Pt("Map.prototype.set",!0),yf=Pt("Map.prototype.has",!0),hf=Pt("Map.prototype.delete",!0),df=Pt("Map.prototype.size",!0),di=!!po&&function(){var e,t={assert:function(n){if(!t.has(n))throw new cf("Side channel does not contain "+lf(n))},delete:function(n){if(e){var o=hf(e,n);return df(e)===0&&(e=void 0),o}return!1},get:function(n){if(e)return uf(e,n)},has:function(n){return e?yf(e,n):!1},set:function(n,o){e||(e=new po),pf(e,n,o)}};return t},vf=Object.getOwnPropertyDescriptor,Gt=vf;if(Gt)try{Gt([],"length")}catch{Gt=null}var mf=Gt,qt=Object.defineProperty||!1;if(qt)try{qt({},"a",{value:1})}catch{qt=!1}var gf=qt,Lr,yo;function _f(){return yo||(yo=1,Lr=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==o||a.enumerable!==!0)return!1}return!0}),Lr}var Wr,ho;function Sf(){if(ho)return Wr;ho=1;var r=typeof Symbol<"u"&&Symbol,e=_f();return Wr=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Wr}var x,bf=lr,Ef=Sn,wf=bn,Af=En,Pf=wn,rt=An,Qe=Oe,Of=Pn,xf=On,$f=xn,If=$n,Rf=In,Tf=Rn,Cf=Tn,Nf=Cn,vi=Function,jr=function(r){try{return vi('"use strict"; return ('+r+").constructor;")()}catch{}},_t=mf,kf=gf,Gr=function(){throw new Qe},Ff=_t?function(){try{return arguments.callee,Gr}catch{try{return _t(arguments,"callee").get}catch{return Gr}}}():Gr,je=Sf()(),Q=Nn(),Uf=ur(),Df=cr(),mi=pr(),Ot=St,He={},Mf=typeof Uint8Array>"u"||!Q?x:Q(Uint8Array),Fe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?x:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?x:ArrayBuffer,"%ArrayIteratorPrototype%":je&&Q?Q([][Symbol.iterator]()):x,"%AsyncFromSyncIteratorPrototype%":x,"%AsyncFunction%":He,"%AsyncGenerator%":He,"%AsyncGeneratorFunction%":He,"%AsyncIteratorPrototype%":He,"%Atomics%":typeof Atomics>"u"?x:Atomics,"%BigInt%":typeof BigInt>"u"?x:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?x:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?x:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?x:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Ef,"%eval%":eval,"%EvalError%":wf,"%Float32Array%":typeof Float32Array>"u"?x:Float32Array,"%Float64Array%":typeof Float64Array>"u"?x:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?x:FinalizationRegistry,"%Function%":vi,"%GeneratorFunction%":He,"%Int8Array%":typeof Int8Array>"u"?x:Int8Array,"%Int16Array%":typeof Int16Array>"u"?x:Int16Array,"%Int32Array%":typeof Int32Array>"u"?x:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":je&&Q?Q(Q([][Symbol.iterator]())):x,"%JSON%":typeof JSON=="object"?JSON:x,"%Map%":typeof Map>"u"?x:Map,"%MapIteratorPrototype%":typeof Map>"u"||!je||!Q?x:Q(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":bf,"%Object.getOwnPropertyDescriptor%":_t,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?x:Promise,"%Proxy%":typeof Proxy>"u"?x:Proxy,"%RangeError%":Af,"%ReferenceError%":Pf,"%Reflect%":typeof Reflect>"u"?x:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?x:Set,"%SetIteratorPrototype%":typeof Set>"u"||!je||!Q?x:Q(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?x:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":je&&Q?Q(""[Symbol.iterator]()):x,"%Symbol%":je?Symbol:x,"%SyntaxError%":rt,"%ThrowTypeError%":Ff,"%TypedArray%":Mf,"%TypeError%":Qe,"%Uint8Array%":typeof Uint8Array>"u"?x:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?x:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?x:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?x:Uint32Array,"%URIError%":Of,"%WeakMap%":typeof WeakMap>"u"?x:WeakMap,"%WeakRef%":typeof WeakRef>"u"?x:WeakRef,"%WeakSet%":typeof WeakSet>"u"?x:WeakSet,"%Function.prototype.call%":Ot,"%Function.prototype.apply%":mi,"%Object.defineProperty%":kf,"%Object.getPrototypeOf%":Uf,"%Math.abs%":xf,"%Math.floor%":$f,"%Math.max%":If,"%Math.min%":Rf,"%Math.pow%":Tf,"%Math.round%":Cf,"%Math.sign%":Nf,"%Reflect.getPrototypeOf%":Df};if(Q)try{null.error}catch(r){var Bf=Q(Q(r));Fe["%Error.prototype%"]=Bf}var Lf=function r(e){var t;if(e==="%AsyncFunction%")t=jr("async function () {}");else if(e==="%GeneratorFunction%")t=jr("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=jr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=r("%AsyncGenerator%");o&&Q&&(t=Q(o.prototype))}return Fe[e]=t,t},vo={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xt=ot,tr=kn(),Wf=xt.call(Ot,Array.prototype.concat),jf=xt.call(mi,Array.prototype.splice),mo=xt.call(Ot,String.prototype.replace),rr=xt.call(Ot,String.prototype.slice),Gf=xt.call(Ot,RegExp.prototype.exec),qf=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Vf=/\\(\\)?/g,zf=function(e){var t=rr(e,0,1),n=rr(e,-1);if(t==="%"&&n!=="%")throw new rt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new rt("invalid intrinsic syntax, expected opening `%`");var o=[];return mo(e,qf,function(i,s,a,f){o[o.length]=a?mo(f,Vf,"$1"):s||i}),o},Hf=function(e,t){var n=e,o;if(tr(vo,n)&&(o=vo[n],n="%"+o[0]+"%"),tr(Fe,n)){var i=Fe[n];if(i===He&&(i=Lf(n)),typeof i>"u"&&!t)throw new Qe("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new rt("intrinsic "+e+" does not exist!")},Kf=function(e,t){if(typeof e!="string"||e.length===0)throw new Qe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Qe('"allowMissing" argument must be a boolean');if(Gf(/^%?[^%]*%?$/,e)===null)throw new rt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=zf(e),o=n.length>0?n[0]:"",i=Hf("%"+o+"%",t),s=i.name,a=i.value,f=!1,l=i.alias;l&&(o=l[0],jf(n,Wf([0,1],l)));for(var c=1,p=!0;c<n.length;c+=1){var u=n[c],y=rr(u,0,1),h=rr(u,-1);if((y==='"'||y==="'"||y==="`"||h==='"'||h==="'"||h==="`")&&y!==h)throw new rt("property names with quotes must have matching quotes");if((u==="constructor"||!p)&&(f=!0),o+="."+u,s="%"+o+"%",tr(Fe,s))a=Fe[s];else if(a!=null){if(!(u in a)){if(!t)throw new Qe("base intrinsic for "+e+" exists, but the property is not available.");return}if(_t&&c+1>=n.length){var d=_t(a,u);p=!!d,p&&"get"in d&&!("originalValue"in d.get)?a=d.get:a=a[u]}else p=tr(a,u),a=a[u];p&&!f&&(Fe[s]=a)}}return a},Yf=Kf,yr=hi,Jf=sr,Ct=di,Qf=Oe,Ge=Yf("%WeakMap%",!0),Xf=yr("WeakMap.prototype.get",!0),Zf=yr("WeakMap.prototype.set",!0),el=yr("WeakMap.prototype.has",!0),tl=yr("WeakMap.prototype.delete",!0),rl=Ge?function(){var e,t,n={assert:function(o){if(!n.has(o))throw new Qf("Side channel does not contain "+Jf(o))},delete:function(o){if(Ge&&o&&(typeof o=="object"||typeof o=="function")){if(e)return tl(e,o)}else if(Ct&&t)return t.delete(o);return!1},get:function(o){return Ge&&o&&(typeof o=="object"||typeof o=="function")&&e?Xf(e,o):t&&t.get(o)},has:function(o){return Ge&&o&&(typeof o=="object"||typeof o=="function")&&e?el(e,o):!!t&&t.has(o)},set:function(o,i){Ge&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Ge),Zf(e,o,i)):Ct&&(t||(t=Ct()),t.set(o,i))}};return n}:Ct,nl=Oe,ol=sr,il=Aa,al=di,sl=rl,fl=sl||al||il,ll=function(){var e,t={assert:function(n){if(!t.has(n))throw new nl("Side channel does not contain "+ol(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,o){e||(e=fl()),e.set(n,o)}};return t},cl=String.prototype.replace,ul=/%20/g,qr={RFC1738:"RFC1738",RFC3986:"RFC3986"},Fn={default:qr.RFC3986,formatters:{RFC1738:function(r){return cl.call(r,ul,"+")},RFC3986:function(r){return String(r)}},RFC1738:qr.RFC1738,RFC3986:qr.RFC3986},pl=Fn,Vr=Object.prototype.hasOwnProperty,Ce=Array.isArray,pe=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),yl=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Ce(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);t.obj[t.prop]=o}}},gi=function(e,t){for(var n=t&&t.plainObjects?{__proto__:null}:{},o=0;o<e.length;++o)typeof e[o]<"u"&&(n[o]=e[o]);return n},hl=function r(e,t,n){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(Ce(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Vr.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var o=e;return Ce(e)&&!Ce(t)&&(o=gi(e,n)),Ce(e)&&Ce(t)?(t.forEach(function(i,s){if(Vr.call(e,s)){var a=e[s];a&&typeof a=="object"&&i&&typeof i=="object"?e[s]=r(a,i,n):e.push(i)}else e[s]=i}),e):Object.keys(t).reduce(function(i,s){var a=t[s];return Vr.call(i,s)?i[s]=r(i[s],a,n):i[s]=a,i},o)},dl=function(e,t){return Object.keys(t).reduce(function(n,o){return n[o]=t[o],n},e)},vl=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},zr=1024,ml=function(e,t,n,o,i){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});for(var a="",f=0;f<s.length;f+=zr){for(var l=s.length>=zr?s.slice(f,f+zr):s,c=[],p=0;p<l.length;++p){var u=l.charCodeAt(p);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||i===pl.RFC1738&&(u===40||u===41)){c[c.length]=l.charAt(p);continue}if(u<128){c[c.length]=pe[u];continue}if(u<2048){c[c.length]=pe[192|u>>6]+pe[128|u&63];continue}if(u<55296||u>=57344){c[c.length]=pe[224|u>>12]+pe[128|u>>6&63]+pe[128|u&63];continue}p+=1,u=65536+((u&1023)<<10|l.charCodeAt(p)&1023),c[c.length]=pe[240|u>>18]+pe[128|u>>12&63]+pe[128|u>>6&63]+pe[128|u&63]}a+=c.join("")}return a},gl=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var i=t[o],s=i.obj[i.prop],a=Object.keys(s),f=0;f<a.length;++f){var l=a[f],c=s[l];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:s,prop:l}),n.push(c))}return yl(t),e},_l=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Sl=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},bl=function(e,t){return[].concat(e,t)},El=function(e,t){if(Ce(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)},_i={arrayToObject:gi,assign:dl,combine:bl,compact:gl,decode:vl,encode:ml,isBuffer:Sl,isRegExp:_l,maybeMap:El,merge:hl},Si=ll,Vt=_i,vt=Fn,wl=Object.prototype.hasOwnProperty,bi={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},de=Array.isArray,Al=Array.prototype.push,Ei=function(r,e){Al.apply(r,de(e)?e:[e])},Pl=Date.prototype.toISOString,go=vt.default,V={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Vt.encode,encodeValuesOnly:!1,filter:void 0,format:go,formatter:vt.formatters[go],indices:!1,serializeDate:function(e){return Pl.call(e)},skipNulls:!1,strictNullHandling:!1},Ol=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Hr={},xl=function r(e,t,n,o,i,s,a,f,l,c,p,u,y,h,d,S,k,g){for(var v=e,$=g,A=0,C=!1;($=$.get(Hr))!==void 0&&!C;){var G=$.get(e);if(A+=1,typeof G<"u"){if(G===A)throw new RangeError("Cyclic object value");C=!0}typeof $.get(Hr)>"u"&&(A=0)}if(typeof c=="function"?v=c(t,v):v instanceof Date?v=y(v):n==="comma"&&de(v)&&(v=Vt.maybeMap(v,function(m){return m instanceof Date?y(m):m})),v===null){if(s)return l&&!S?l(t,V.encoder,k,"key",h):t;v=""}if(Ol(v)||Vt.isBuffer(v)){if(l){var N=S?t:l(t,V.encoder,k,"key",h);return[d(N)+"="+d(l(v,V.encoder,k,"value",h))]}return[d(t)+"="+d(String(v))]}var F=[];if(typeof v>"u")return F;var q;if(n==="comma"&&de(v))S&&l&&(v=Vt.maybeMap(v,l)),q=[{value:v.length>0?v.join(",")||null:void 0}];else if(de(c))q=c;else{var b=Object.keys(v);q=p?b.sort(p):b}var w=f?String(t).replace(/\./g,"%2E"):String(t),_=o&&de(v)&&v.length===1?w+"[]":w;if(i&&de(v)&&v.length===0)return _+"[]";for(var R=0;R<q.length;++R){var M=q[R],T=typeof M=="object"&&M&&typeof M.value<"u"?M.value:v[M];if(!(a&&T===null)){var ce=u&&f?String(M).replace(/\./g,"%2E"):String(M),Be=de(v)?typeof n=="function"?n(_,ce):_:_+(u?"."+ce:"["+ce+"]");g.set(e,A);var be=Si();be.set(Hr,g),Ei(F,r(T,Be,n,o,i,s,a,f,n==="comma"&&S&&de(v)?null:l,c,p,u,y,h,d,S,k,be))}}return F},$l=function(e){if(!e)return V;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||V.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=vt.default;if(typeof e.format<"u"){if(!wl.call(vt.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=vt.formatters[n],i=V.filter;(typeof e.filter=="function"||de(e.filter))&&(i=e.filter);var s;if(e.arrayFormat in bi?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=V.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:V.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:V.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:V.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:V.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?V.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:V.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:V.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:V.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:V.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:V.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:V.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:V.strictNullHandling}},Il=function(r,e){var t=r,n=$l(e),o,i;typeof n.filter=="function"?(i=n.filter,t=i("",t)):de(n.filter)&&(i=n.filter,o=i);var s=[];if(typeof t!="object"||t===null)return"";var a=bi[n.arrayFormat],f=a==="comma"&&n.commaRoundTrip;o||(o=Object.keys(t)),n.sort&&o.sort(n.sort);for(var l=Si(),c=0;c<o.length;++c){var p=o[c],u=t[p];n.skipNulls&&u===null||Ei(s,xl(u,p,a,f,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var y=s.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),y.length>0?h+y:""},Ue=_i,cn=Object.prototype.hasOwnProperty,_o=Array.isArray,W={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Ue.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},Rl=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},wi=function(r,e,t){if(r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1)return r.split(",");if(e.throwOnLimitExceeded&&t>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return r},Tl="utf8=%26%2310003%3B",Cl="utf8=%E2%9C%93",Nl=function(e,t){var n={__proto__:null},o=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;o=o.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=o.split(t.delimiter,t.throwOnLimitExceeded?i+1:i);if(t.throwOnLimitExceeded&&s.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(i===1?"":"s")+" allowed.");var a=-1,f,l=t.charset;if(t.charsetSentinel)for(f=0;f<s.length;++f)s[f].indexOf("utf8=")===0&&(s[f]===Cl?l="utf-8":s[f]===Tl&&(l="iso-8859-1"),a=f,f=s.length);for(f=0;f<s.length;++f)if(f!==a){var c=s[f],p=c.indexOf("]="),u=p===-1?c.indexOf("="):p+1,y,h;u===-1?(y=t.decoder(c,W.decoder,l,"key"),h=t.strictNullHandling?null:""):(y=t.decoder(c.slice(0,u),W.decoder,l,"key"),h=Ue.maybeMap(wi(c.slice(u+1),t,_o(n[y])?n[y].length:0),function(S){return t.decoder(S,W.decoder,l,"value")})),h&&t.interpretNumericEntities&&l==="iso-8859-1"&&(h=Rl(String(h))),c.indexOf("[]=")>-1&&(h=_o(h)?[h]:h);var d=cn.call(n,y);d&&t.duplicates==="combine"?n[y]=Ue.combine(n[y],h):(!d||t.duplicates==="last")&&(n[y]=h)}return n},kl=function(r,e,t,n){var o=0;if(r.length>0&&r[r.length-1]==="[]"){var i=r.slice(0,-1).join("");o=Array.isArray(e)&&e[i]?e[i].length:0}for(var s=n?e:wi(e,t,o),a=r.length-1;a>=0;--a){var f,l=r[a];if(l==="[]"&&t.parseArrays)f=t.allowEmptyArrays&&(s===""||t.strictNullHandling&&s===null)?[]:Ue.combine([],s);else{f=t.plainObjects?{__proto__:null}:{};var c=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,p=t.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(p,10);!t.parseArrays&&p===""?f={0:s}:!isNaN(u)&&l!==p&&String(u)===p&&u>=0&&t.parseArrays&&u<=t.arrayLimit?(f=[],f[u]=s):p!=="__proto__"&&(f[p]=s)}s=f}return s},Fl=function(e,t,n,o){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,f=n.depth>0&&s.exec(i),l=f?i.slice(0,f.index):i,c=[];if(l){if(!n.plainObjects&&cn.call(Object.prototype,l)&&!n.allowPrototypes)return;c.push(l)}for(var p=0;n.depth>0&&(f=a.exec(i))!==null&&p<n.depth;){if(p+=1,!n.plainObjects&&cn.call(Object.prototype,f[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(f[1])}if(f){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");c.push("["+i.slice(f.index)+"]")}return kl(c,t,n,o)}},Ul=function(e){if(!e)return W;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=typeof e.charset>"u"?W.charset:e.charset,n=typeof e.duplicates>"u"?W.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:W.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:W.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:W.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:W.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:W.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:W.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:W.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:W.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:W.decoder,delimiter:typeof e.delimiter=="string"||Ue.isRegExp(e.delimiter)?e.delimiter:W.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:W.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:W.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:W.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:W.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:W.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:W.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},Dl=function(r,e){var t=Ul(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?{__proto__:null}:{};for(var n=typeof r=="string"?Nl(r,t):r,o=t.plainObjects?{__proto__:null}:{},i=Object.keys(n),s=0;s<i.length;++s){var a=i[s],f=Fl(a,n[a],t,typeof r=="string");o=Ue.merge(o,f,t)}return t.allowSparse===!0?o:Ue.compact(o)},Ml=Il,Bl=Dl,Ll=Fn,Wl={formats:Ll,parse:Bl,stringify:Ml},jl=Gi;function ae(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Gl=/^([a-z0-9.+-]+:)/i,ql=/:[0-9]*$/,Vl=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,zl=["<",">",'"',"`"," ","\r",`
`,"	"],Hl=["{","}","|","\\","^","`"].concat(zl),un=["'"].concat(Hl),So=["%","/","?",";","#"].concat(un),bo=["/","?","#"],Kl=255,Eo=/^[+a-z0-9A-Z_-]{0,63}$/,Yl=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Jl={javascript:!0,"javascript:":!0},pn={javascript:!0,"javascript:":!0},Xe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},yn=Wl;function $t(r,e,t){if(r&&typeof r=="object"&&r instanceof ae)return r;var n=new ae;return n.parse(r,e,t),n}ae.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),o=n!==-1&&n<r.indexOf("#")?"?":"#",i=r.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),r=i.join(o);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var f=Vl.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],e?this.query=yn.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=Gl.exec(a);if(l){l=l[0];var c=l.toLowerCase();this.protocol=c,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@/]+@[^@/]+/)){var p=a.substr(0,2)==="//";p&&!(l&&pn[l])&&(a=a.substr(2),this.slashes=!0)}if(!pn[l]&&(p||l&&!Xe[l])){for(var u=-1,y=0;y<bo.length;y++){var h=a.indexOf(bo[y]);h!==-1&&(u===-1||h<u)&&(u=h)}var d,S;u===-1?S=a.lastIndexOf("@"):S=a.lastIndexOf("@",u),S!==-1&&(d=a.slice(0,S),a=a.slice(S+1),this.auth=decodeURIComponent(d)),u=-1;for(var y=0;y<So.length;y++){var h=a.indexOf(So[y]);h!==-1&&(u===-1||h<u)&&(u=h)}u===-1&&(u=a.length),this.host=a.slice(0,u),a=a.slice(u),this.parseHost(),this.hostname=this.hostname||"";var k=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!k)for(var g=this.hostname.split(/\./),y=0,v=g.length;y<v;y++){var $=g[y];if($&&!$.match(Eo)){for(var A="",C=0,G=$.length;C<G;C++)$.charCodeAt(C)>127?A+="x":A+=$[C];if(!A.match(Eo)){var N=g.slice(0,y),F=g.slice(y+1),q=$.match(Yl);q&&(N.push(q[1]),F.unshift(q[2])),F.length&&(a="/"+F.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>Kl?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=jl.toASCII(this.hostname));var b=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+b,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Jl[c])for(var y=0,v=un.length;y<v;y++){var _=un[y];if(a.indexOf(_)!==-1){var R=encodeURIComponent(_);R===_&&(R=escape(_)),a=a.split(_).join(R)}}var M=a.indexOf("#");M!==-1&&(this.hash=a.substr(M),a=a.slice(0,M));var T=a.indexOf("?");if(T!==-1?(this.search=a.substr(T),this.query=a.substr(T+1),e&&(this.query=yn.parse(this.query)),a=a.slice(0,T)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Xe[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var b=this.pathname||"",ce=this.search||"";this.path=b+ce}return this.href=this.format(),this};function Ql(r){return typeof r=="string"&&(r=$t(r)),r instanceof ae?r.format():ae.prototype.format.call(r)}ae.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=r+this.host:this.hostname&&(o=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(i=yn.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Xe[e])&&o!==!1?(o="//"+(o||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):o||(o=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+o+t+s+n};function Xl(r,e){return $t(r,!1,!0).resolve(e)}ae.prototype.resolve=function(r){return this.resolveObject($t(r,!1,!0)).format()};function Zl(r,e){return r?$t(r,!1,!0).resolveObject(e):e}ae.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new ae;e.parse(r,!1,!0),r=e}for(var t=new ae,n=Object.keys(this),o=0;o<n.length;o++){var i=n[o];t[i]=this[i]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var f=s[a];f!=="protocol"&&(t[f]=r[f])}return Xe[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Xe[r.protocol]){for(var l=Object.keys(r),c=0;c<l.length;c++){var p=l[c];t[p]=r[p]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!pn[r.protocol]){for(var v=(r.pathname||"").split("/");v.length&&!(r.host=v.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),t.pathname=v.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var u=t.pathname||"",y=t.search||"";t.path=u+y}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var h=t.pathname&&t.pathname.charAt(0)==="/",d=r.host||r.pathname&&r.pathname.charAt(0)==="/",S=d||h||t.host&&r.pathname,k=S,g=t.pathname&&t.pathname.split("/")||[],v=r.pathname&&r.pathname.split("/")||[],$=t.protocol&&!Xe[t.protocol];if($&&(t.hostname="",t.port=null,t.host&&(g[0]===""?g[0]=t.host:g.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(v[0]===""?v[0]=r.host:v.unshift(r.host)),r.host=null),S=S&&(v[0]===""||g[0]==="")),d)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,g=v;else if(v.length)g||(g=[]),g.pop(),g=g.concat(v),t.search=r.search,t.query=r.query;else if(r.search!=null){if($){t.host=g.shift(),t.hostname=t.host;var A=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;A&&(t.auth=A.shift(),t.hostname=A.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!g.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var C=g.slice(-1)[0],G=(t.host||r.host||g.length>1)&&(C==="."||C==="..")||C==="",N=0,F=g.length;F>=0;F--)C=g[F],C==="."?g.splice(F,1):C===".."?(g.splice(F,1),N++):N&&(g.splice(F,1),N--);if(!S&&!k)for(;N--;N)g.unshift("..");S&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),G&&g.join("/").substr(-1)!=="/"&&g.push("");var q=g[0]===""||g[0]&&g[0].charAt(0)==="/";if($){t.hostname=q?"":g.length?g.shift():"",t.host=t.hostname;var A=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;A&&(t.auth=A.shift(),t.hostname=A.shift(),t.host=t.hostname)}return S=S||t.host&&g.length,S&&!q&&g.unshift(""),g.length>0?t.pathname=g.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};ae.prototype.parseHost=function(){var r=this.host,e=ql.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};nt.parse=$t;nt.resolve=Xl;nt.resolveObject=Zl;nt.format=Ql;nt.Url=ae;var he={};function It(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ec(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var o=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return r[n]}})}),t}const{Duplex:tc}=re;function wo(r){r.emit("close")}function rc(){!this.destroyed&&this._writableState.finished&&this.destroy()}function Ai(r){this.removeListener("error",Ai),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function nc(r,e){let t=!0;const n=new tc({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(i,s){const a=!s&&n._readableState.objectMode?i.toString():i;n.push(a)||r.pause()}),r.once("error",function(i){n.destroyed||(t=!1,n.destroy(i))}),r.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(o,i){if(r.readyState===r.CLOSED){i(o),D.nextTick(wo,n);return}let s=!1;r.once("error",function(f){s=!0,i(f)}),r.once("close",function(){s||i(o),D.nextTick(wo,n)}),t&&r.terminate()},n._final=function(o){if(r.readyState===r.CONNECTING){r.once("open",function(){n._final(o)});return}r._socket!==null&&(r._socket._writableState.finished?(o(),n._readableState.endEmitted&&n.destroy()):(r._socket.once("finish",function(){o()}),r.close()))},n._read=function(){r.isPaused&&r.resume()},n._write=function(o,i,s){if(r.readyState===r.CONNECTING){r.once("open",function(){n._write(o,i,s)});return}r.send(o,s)},n.on("end",rc),n.on("error",Ai),n}var oc=nc;const Cu=It(oc);var nr={exports:{}},De={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:j.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}},Nt={exports:{}},kt={exports:{}};function ic(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kr,Ao;function ac(){if(Ao)return Kr;Ao=1;var r=re,e=re,t=re,n=typeof __webpack_require__=="function"?__non_webpack_require__:ic,o=D.config&&D.config.variables||{},i=!!he.PREBUILDS_ONLY,s=D.versions.modules,a=F()?"electron":N()?"node-webkit":"node",f=he.npm_config_arch||t.arch(),l=he.npm_config_platform||t.platform(),c=he.LIBC||(q(l)?"musl":"glibc"),p=he.ARM_VERSION||(f==="arm64"?"8":o.arm_version)||"",u=(D.versions.uv||"").split(".")[0];Kr=y;function y(b){return n(y.resolve(b))}y.resolve=y.path=function(b){b=e.resolve(b||".");try{var w=n(e.join(b,"package.json")).name.toUpperCase().replace(/-/g,"_");he[w+"_PREBUILD"]&&(b=he[w+"_PREBUILD"])}catch{}if(!i){var _=d(e.join(b,"build/Release"),S);if(_)return _;var R=d(e.join(b,"build/Debug"),S);if(R)return R}var M=Be(b);if(M)return M;var T=Be(e.dirname(D.execPath));if(T)return T;var ce=["platform="+l,"arch="+f,"runtime="+a,"abi="+s,"uv="+u,p?"armv="+p:"","libc="+c,"node="+D.versions.node,D.versions.electron?"electron="+D.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+ce+`
    loaded from: `+b+`
`);function Be(be){var m=h(e.join(be,"prebuilds")).map(k),E=m.filter(g(l,f)).sort(v)[0];if(E){var I=e.join(be,"prebuilds",E.name),U=h(I).map($),B=U.filter(A(a,s)),H=B.sort(G(a))[0];if(H)return e.join(I,H.file)}}};function h(b){try{return r.readdirSync(b)}catch{return[]}}function d(b,w){var _=h(b).filter(w);return _[0]&&e.join(b,_[0])}function S(b){return/\.node$/.test(b)}function k(b){var w=b.split("-");if(w.length===2){var _=w[0],R=w[1].split("+");if(_&&R.length&&R.every(Boolean))return{name:b,platform:_,architectures:R}}}function g(b,w){return function(_){return _==null||_.platform!==b?!1:_.architectures.includes(w)}}function v(b,w){return b.architectures.length-w.architectures.length}function $(b){var w=b.split("."),_=w.pop(),R={file:b,specificity:0};if(_==="node"){for(var M=0;M<w.length;M++){var T=w[M];if(T==="node"||T==="electron"||T==="node-webkit")R.runtime=T;else if(T==="napi")R.napi=!0;else if(T.slice(0,3)==="abi")R.abi=T.slice(3);else if(T.slice(0,2)==="uv")R.uv=T.slice(2);else if(T.slice(0,4)==="armv")R.armv=T.slice(4);else if(T==="glibc"||T==="musl")R.libc=T;else continue;R.specificity++}return R}}function A(b,w){return function(_){return!(_==null||_.runtime!==b&&!C(_)||_.abi!==w&&!_.napi||_.uv&&_.uv!==u||_.armv&&_.armv!==p||_.libc&&_.libc!==c)}}function C(b){return b.runtime==="node"&&b.napi}function G(b){return function(w,_){return w.runtime!==_.runtime?w.runtime===b?-1:1:w.abi!==_.abi?w.abi?-1:1:w.specificity!==_.specificity?w.specificity>_.specificity?-1:1:0}}function N(){return!!(D.versions&&D.versions.nw)}function F(){return D.versions&&D.versions.electron||he.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function q(b){return b==="linux"&&r.existsSync("/etc/alpine-release")}return y.parseTags=$,y.matchTags=A,y.compareTags=G,y.parseTuple=k,y.matchTuple=g,y.compareTuples=v,Kr}var Po;function sc(){return Po||(Po=1,typeof D.addon=="function"?kt.exports=D.addon.bind(D):kt.exports=ac()),kt.exports}var Yr,Oo;function fc(){return Oo||(Oo=1,Yr={mask:(t,n,o,i,s)=>{for(var a=0;a<s;a++)o[i+a]=t[a]^n[a&3]},unmask:(t,n)=>{const o=t.length;for(var i=0;i<o;i++)t[i]^=n[i&3]}}),Yr}var xo;function lc(){if(xo)return Nt.exports;xo=1;try{Nt.exports=sc()(__dirname)}catch{Nt.exports=fc()}return Nt.exports}var cc,uc;const{EMPTY_BUFFER:pc}=De,hn=j[Symbol.species];function yc(r,e){if(r.length===0)return pc;if(r.length===1)return r[0];const t=j.allocUnsafe(e);let n=0;for(let o=0;o<r.length;o++){const i=r[o];t.set(i,n),n+=i.length}return n<e?new hn(t.buffer,t.byteOffset,n):t}function Pi(r,e,t,n,o){for(let i=0;i<o;i++)t[n+i]=r[i]^e[i&3]}function Oi(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function hc(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function dn(r){if(dn.readOnly=!0,j.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new hn(r):ArrayBuffer.isView(r)?e=new hn(r.buffer,r.byteOffset,r.byteLength):(e=j.from(r),dn.readOnly=!1),e}nr.exports={concat:yc,mask:Pi,toArrayBuffer:hc,toBuffer:dn,unmask:Oi};if(!he.WS_NO_BUFFER_UTIL)try{const r=lc();uc=nr.exports.mask=function(e,t,n,o,i){i<48?Pi(e,t,n,o,i):r.mask(e,t,n,o,i)},cc=nr.exports.unmask=function(e,t){e.length<32?Oi(e,t):r.unmask(e,t)}}catch{}var hr=nr.exports;const $o=Symbol("kDone"),Jr=Symbol("kRun");let dc=class{constructor(e){this[$o]=()=>{this.pending--,this[Jr]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Jr]()}[Jr](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[$o])}}};var vc=dc;const at=re,Io=hr,mc=vc,{kStatusCode:xi}=De,gc=j[Symbol.species],_c=j.from([0,0,255,255]),or=Symbol("permessage-deflate"),_e=Symbol("total-length"),ut=Symbol("callback"),we=Symbol("buffers"),zt=Symbol("error");let Ft,Sc=class{constructor(e,t,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!Ft){const o=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Ft=new mc(o)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[ut];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(o=>!(t.serverNoContextTakeover===!1&&o.server_no_context_takeover||o.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>o.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!o.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(n.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?n.client_max_window_bits=t.clientMaxWindowBits:(n.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(n=>{let o=t[n];if(o.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(o=o[0],n==="client_max_window_bits"){if(o!==!0){const i=+o;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${o}`);o=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${o}`)}else if(n==="server_max_window_bits"){const i=+o;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${o}`);o=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(o!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${o}`)}else throw new Error(`Unknown parameter "${n}"`);t[n]=o})}),e}decompress(e,t,n){Ft.add(o=>{this._decompress(e,t,(i,s)=>{o(),n(i,s)})})}compress(e,t,n){Ft.add(o=>{this._compress(e,t,(i,s)=>{o(),n(i,s)})})}_decompress(e,t,n){const o=this._isServer?"client":"server";if(!this._inflate){const i=`${o}_max_window_bits`,s=typeof this.params[i]!="number"?at.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=at.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[or]=this,this._inflate[_e]=0,this._inflate[we]=[],this._inflate.on("error",Ec),this._inflate.on("data",$i)}this._inflate[ut]=n,this._inflate.write(e),t&&this._inflate.write(_c),this._inflate.flush(()=>{const i=this._inflate[zt];if(i){this._inflate.close(),this._inflate=null,n(i);return}const s=Io.concat(this._inflate[we],this._inflate[_e]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[_e]=0,this._inflate[we]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,t,n){const o=this._isServer?"server":"client";if(!this._deflate){const i=`${o}_max_window_bits`,s=typeof this.params[i]!="number"?at.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=at.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[_e]=0,this._deflate[we]=[],this._deflate.on("data",bc)}this._deflate[ut]=n,this._deflate.write(e),this._deflate.flush(at.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=Io.concat(this._deflate[we],this._deflate[_e]);t&&(i=new gc(i.buffer,i.byteOffset,i.length-4)),this._deflate[ut]=null,this._deflate[_e]=0,this._deflate[we]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};var dr=Sc;function bc(r){this[we].push(r),this[_e]+=r.length}function $i(r){if(this[_e]+=r.length,this[or]._maxPayload<1||this[_e]<=this[or]._maxPayload){this[we].push(r);return}this[zt]=new RangeError("Max payload size exceeded"),this[zt].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[zt][xi]=1009,this.removeListener("data",$i),this.reset()}function Ec(r){this[or]._inflate=null,r[xi]=1007,this[ut](r)}var ir={exports:{}};const wc={},Ac=Object.freeze(Object.defineProperty({__proto__:null,default:wc},Symbol.toStringTag,{value:"Module"})),Pc=ec(Ac);var Ro;const{isUtf8:To}=j,Oc=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function xc(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function vn(r){const e=r.length;let t=0;for(;t<e;)if(!(r[t]&128))t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}ir.exports={isValidStatusCode:xc,isValidUTF8:vn,tokenChars:Oc};if(To)Ro=ir.exports.isValidUTF8=function(r){return r.length<24?vn(r):To(r)};else if(!he.WS_NO_UTF_8_VALIDATE)try{const r=Pc;Ro=ir.exports.isValidUTF8=function(e){return e.length<32?vn(e):r(e)}}catch{}var vr=ir.exports;const{Writable:$c}=re,Co=dr,{BINARY_TYPES:Ic,EMPTY_BUFFER:No,kStatusCode:Rc,kWebSocket:Tc}=De,{concat:Qr,toArrayBuffer:Cc,unmask:Nc}=hr,{isValidStatusCode:kc,isValidUTF8:ko}=vr,Ut=j[Symbol.species],st=0,Fo=1,Uo=2,Do=3,Xr=4,Fc=5;let Uc=class extends $c{constructor(e={}){super(),this._binaryType=e.binaryType||Ic[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Tc]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=st,this._loop=!1}_write(e,t,n){if(this._opcode===8&&this._state==st)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const n=this._buffers[0];return this._buffers[0]=new Ut(n.buffer,n.byteOffset+e,n.length-e),new Ut(n.buffer,n.byteOffset,e)}const t=j.allocUnsafe(e);do{const n=this._buffers[0],o=t.length-e;e>=n.length?t.set(this._buffers.shift(),o):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),o),this._buffers[0]=new Ut(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case st:t=this.getInfo();break;case Fo:t=this.getPayloadLength16();break;case Uo:t=this.getPayloadLength64();break;case Do:this.getMask();break;case Xr:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}const e=this.consume(2);if(e[0]&48)return this._loop=!1,K(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=(e[0]&64)===64;if(t&&!this._extensions[Co.extensionName])return this._loop=!1,K(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,K(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,K(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,K(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,K(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,K(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,K(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,K(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,K(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,K(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Fo;else if(this._payloadLength===127)this._state=Uo;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,K(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,K(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Do:this._state=Xr}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Xr}getData(e){let t=No;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&Nc(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=Fc,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[Co.extensionName].decompress(e,this._fin,(o,i)=>{if(o)return t(o);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(K(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(i)}const s=this.dataMessage();if(s)return t(s);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=Qr(t,e):this._binaryType==="arraybuffer"?n=Cc(Qr(t,e)):n=t,this.emit("message",n,!0)}else{const n=Qr(t,e);if(!this._skipUTF8Validation&&!ko(n))return this._loop=!1,K(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=st}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,No),this.end();else{const t=e.readUInt16BE(0);if(!kc(t))return K(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const n=new Ut(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!ko(n))return K(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,n),this.end()}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=st}};var Ii=Uc;function K(r,e,t,n,o){const i=new r(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(i,K),i.code=o,i[Rc]=n,i}const Uu=It(Ii),{randomFillSync:Dc}=re,Mo=dr,{EMPTY_BUFFER:Mc}=De,{isValidStatusCode:Bc}=vr,{mask:Bo,toBuffer:qe}=hr,le=Symbol("kByteLength"),Lc=j.alloc(4);let Wc=class Re{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=j.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let n,o=!1,i=2,s=!1;t.mask&&(n=t.maskBuffer||Lc,t.generateMask?t.generateMask(n):Dc(n,0,4),s=(n[0]|n[1]|n[2]|n[3])===0,i=6);let a;typeof e=="string"?(!t.mask||s)&&t[le]!==void 0?a=t[le]:(e=j.from(e),a=e.length):(a=e.length,o=t.mask&&t.readOnly&&!s);let f=a;a>=65536?(i+=8,f=127):a>125&&(i+=2,f=126);const l=j.allocUnsafe(o?a+i:i);return l[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(l[0]|=64),l[1]=f,f===126?l.writeUInt16BE(a,2):f===127&&(l[2]=l[3]=0,l.writeUIntBE(a,4,6)),t.mask?(l[1]|=128,l[i-4]=n[0],l[i-3]=n[1],l[i-2]=n[2],l[i-1]=n[3],s?[l,e]:o?(Bo(e,n,l,i,a),[l]):(Bo(e,n,e,0,a),[l,e])):[l,e]}close(e,t,n,o){let i;if(e===void 0)i=Mc;else{if(typeof e!="number"||!Bc(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)i=j.allocUnsafe(2),i.writeUInt16BE(e,0);else{const a=j.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=j.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof t=="string"?i.write(t,2):i.set(t,2)}}const s={[le]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,s,o]):this.sendFrame(Re.frame(i,s),o)}ping(e,t,n){let o,i;if(typeof e=="string"?(o=j.byteLength(e),i=!1):(e=qe(e),o=e.length,i=qe.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");const s={[le]:o,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(Re.frame(e,s),n)}pong(e,t,n){let o,i;if(typeof e=="string"?(o=j.byteLength(e),i=!1):(e=qe(e),o=e.length,i=qe.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");const s={[le]:o,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(Re.frame(e,s),n)}send(e,t,n){const o=this._extensions[Mo.extensionName];let i=t.binary?2:1,s=t.compress,a,f;if(typeof e=="string"?(a=j.byteLength(e),f=!1):(e=qe(e),a=e.length,f=qe.readOnly),this._firstFragment?(this._firstFragment=!1,s&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=o._threshold),this._compress=s):(s=!1,i=0),t.fin&&(this._firstFragment=!0),o){const l={[le]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:f,rsv1:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,l,n]):this.dispatch(e,this._compress,l,n)}else this.sendFrame(Re.frame(e,{[le]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:f,rsv1:!1}),n)}dispatch(e,t,n,o){if(!t){this.sendFrame(Re.frame(e,n),o);return}const i=this._extensions[Mo.extensionName];this._bufferedBytes+=n[le],this._deflating=!0,i.compress(e,n.fin,(s,a)=>{if(this._socket.destroyed){const f=new Error("The socket was closed while data was being compressed");typeof o=="function"&&o(f);for(let l=0;l<this._queue.length;l++){const c=this._queue[l],p=c[c.length-1];typeof p=="function"&&p(f)}return}this._bufferedBytes-=n[le],this._deflating=!1,n.readOnly=!1,this.sendFrame(Re.frame(a,n),o),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][le],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][le],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};var Ri=Wc;const Du=It(Ri),{kForOnEventAttribute:ft,kListener:Zr}=De,Lo=Symbol("kCode"),Wo=Symbol("kData"),jo=Symbol("kError"),Go=Symbol("kMessage"),qo=Symbol("kReason"),Ke=Symbol("kTarget"),Vo=Symbol("kType"),zo=Symbol("kWasClean");class Me{constructor(e){this[Ke]=null,this[Vo]=e}get target(){return this[Ke]}get type(){return this[Vo]}}Object.defineProperty(Me.prototype,"target",{enumerable:!0});Object.defineProperty(Me.prototype,"type",{enumerable:!0});class Rt extends Me{constructor(e,t={}){super(e),this[Lo]=t.code===void 0?0:t.code,this[qo]=t.reason===void 0?"":t.reason,this[zo]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Lo]}get reason(){return this[qo]}get wasClean(){return this[zo]}}Object.defineProperty(Rt.prototype,"code",{enumerable:!0});Object.defineProperty(Rt.prototype,"reason",{enumerable:!0});Object.defineProperty(Rt.prototype,"wasClean",{enumerable:!0});class mr extends Me{constructor(e,t={}){super(e),this[jo]=t.error===void 0?null:t.error,this[Go]=t.message===void 0?"":t.message}get error(){return this[jo]}get message(){return this[Go]}}Object.defineProperty(mr.prototype,"error",{enumerable:!0});Object.defineProperty(mr.prototype,"message",{enumerable:!0});class Un extends Me{constructor(e,t={}){super(e),this[Wo]=t.data===void 0?null:t.data}get data(){return this[Wo]}}Object.defineProperty(Un.prototype,"data",{enumerable:!0});const jc={addEventListener(r,e,t={}){for(const o of this.listeners(r))if(!t[ft]&&o[Zr]===e&&!o[ft])return;let n;if(r==="message")n=function(i,s){const a=new Un("message",{data:s?i:i.toString()});a[Ke]=this,Dt(e,this,a)};else if(r==="close")n=function(i,s){const a=new Rt("close",{code:i,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Ke]=this,Dt(e,this,a)};else if(r==="error")n=function(i){const s=new mr("error",{error:i,message:i.message});s[Ke]=this,Dt(e,this,s)};else if(r==="open")n=function(){const i=new Me("open");i[Ke]=this,Dt(e,this,i)};else return;n[ft]=!!t[ft],n[Zr]=e,t.once?this.once(r,n):this.on(r,n)},removeEventListener(r,e){for(const t of this.listeners(r))if(t[Zr]===e&&!t[ft]){this.removeListener(r,t);break}}};var Gc={CloseEvent:Rt,ErrorEvent:mr,Event:Me,EventTarget:jc,MessageEvent:Un};function Dt(r,e,t){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,t):r.call(e,t)}const{tokenChars:lt}=vr;function ye(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function qc(r){const e=Object.create(null);let t=Object.create(null),n=!1,o=!1,i=!1,s,a,f=-1,l=-1,c=-1,p=0;for(;p<r.length;p++)if(l=r.charCodeAt(p),s===void 0)if(c===-1&&lt[l]===1)f===-1&&(f=p);else if(p!==0&&(l===32||l===9))c===-1&&f!==-1&&(c=p);else if(l===59||l===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${p}`);c===-1&&(c=p);const y=r.slice(f,c);l===44?(ye(e,y,t),t=Object.create(null)):s=y,f=c=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(c===-1&&lt[l]===1)f===-1&&(f=p);else if(l===32||l===9)c===-1&&f!==-1&&(c=p);else if(l===59||l===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${p}`);c===-1&&(c=p),ye(t,r.slice(f,c),!0),l===44&&(ye(e,s,t),t=Object.create(null),s=void 0),f=c=-1}else if(l===61&&f!==-1&&c===-1)a=r.slice(f,p),f=c=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(o){if(lt[l]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);f===-1?f=p:n||(n=!0),o=!1}else if(i)if(lt[l]===1)f===-1&&(f=p);else if(l===34&&f!==-1)i=!1,c=p;else if(l===92)o=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(l===34&&r.charCodeAt(p-1)===61)i=!0;else if(c===-1&&lt[l]===1)f===-1&&(f=p);else if(f!==-1&&(l===32||l===9))c===-1&&(c=p);else if(l===59||l===44){if(f===-1)throw new SyntaxError(`Unexpected character at index ${p}`);c===-1&&(c=p);let y=r.slice(f,c);n&&(y=y.replace(/\\/g,""),n=!1),ye(t,a,y),l===44&&(ye(e,s,t),t=Object.create(null),s=void 0),a=void 0,f=c=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(f===-1||i||l===32||l===9)throw new SyntaxError("Unexpected end of input");c===-1&&(c=p);const u=r.slice(f,c);return s===void 0?ye(e,u,t):(a===void 0?ye(t,u,!0):n?ye(t,a,u.replace(/\\/g,"")):ye(t,a,u),ye(e,s,t)),e}function Vc(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(n=>[e].concat(Object.keys(n).map(o=>{let i=n[o];return Array.isArray(i)||(i=[i]),i.map(s=>s===!0?o:`${o}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}var Ti={format:Vc,parse:qc};const zc=Zo,Hc=re,Kc=re,Ci=re,Yc=re,{randomBytes:Jc,createHash:Qc}=re,{URL:en}=nt,Ae=dr,Xc=Ii,Zc=Ri,{BINARY_TYPES:Ho,EMPTY_BUFFER:Mt,GUID:eu,kForOnEventAttribute:tn,kListener:tu,kStatusCode:ru,kWebSocket:te,NOOP:Ni}=De,{EventTarget:{addEventListener:nu,removeEventListener:ou}}=Gc,{format:iu,parse:au}=Ti,{toBuffer:su}=hr,fu=30*1e3,ki=Symbol("kAborted"),rn=[8,13],Se=["CONNECTING","OPEN","CLOSING","CLOSED"],lu=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;let z=class L extends zc{constructor(e,t,n){super(),this._binaryType=Ho[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Mt,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=L.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(n=t,t=[]):t=[t]),Ui(this,e,t,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){Ho.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const o=new Xc({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Zc(e,this._extensions,n.generateMask),this._receiver=o,this._socket=e,o[te]=this,e[te]=this,o.on("conclude",pu),o.on("drain",yu),o.on("error",hu),o.on("message",du),o.on("ping",vu),o.on("pong",mu),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Mi),e.on("data",gr),e.on("end",Bi),e.on("error",Li),this._readyState=L.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=L.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Ae.extensionName]&&this._extensions[Ae.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=L.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==L.CLOSED){if(this.readyState===L.CONNECTING){oe(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===L.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=L.CLOSING,this._sender.close(e,t,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),fu)}}pause(){this.readyState===L.CONNECTING||this.readyState===L.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===L.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==L.OPEN){nn(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||Mt,t,n)}pong(e,t,n){if(this.readyState===L.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==L.OPEN){nn(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||Mt,t,n)}resume(){this.readyState===L.CONNECTING||this.readyState===L.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===L.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(n=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==L.OPEN){nn(this,e,n);return}const o={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[Ae.extensionName]||(o.compress=!1),this._sender.send(e||Mt,o,n)}terminate(){if(this.readyState!==L.CLOSED){if(this.readyState===L.CONNECTING){oe(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=L.CLOSING,this._socket.destroy())}}};Object.defineProperty(z,"CONNECTING",{enumerable:!0,value:Se.indexOf("CONNECTING")});Object.defineProperty(z.prototype,"CONNECTING",{enumerable:!0,value:Se.indexOf("CONNECTING")});Object.defineProperty(z,"OPEN",{enumerable:!0,value:Se.indexOf("OPEN")});Object.defineProperty(z.prototype,"OPEN",{enumerable:!0,value:Se.indexOf("OPEN")});Object.defineProperty(z,"CLOSING",{enumerable:!0,value:Se.indexOf("CLOSING")});Object.defineProperty(z.prototype,"CLOSING",{enumerable:!0,value:Se.indexOf("CLOSING")});Object.defineProperty(z,"CLOSED",{enumerable:!0,value:Se.indexOf("CLOSED")});Object.defineProperty(z.prototype,"CLOSED",{enumerable:!0,value:Se.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(z.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(z.prototype,`on${r}`,{enumerable:!0,get(){for(const e of this.listeners(r))if(e[tn])return e[tu];return null},set(e){for(const t of this.listeners(r))if(t[tn]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[tn]:!0})}})});z.prototype.addEventListener=nu;z.prototype.removeEventListener=ou;var Fi=z;function Ui(r,e,t,n){const o={protocolVersion:rn[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!rn.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${rn.join(", ")})`);let i;if(e instanceof en)i=e,r._url=e.href;else{try{i=new en(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}r._url=e}const s=i.protocol==="wss:",a=i.protocol==="ws+unix:";let f;if(i.protocol!=="ws:"&&!s&&!a?f=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:a&&!i.pathname?f="The URL's pathname is empty":i.hash&&(f="The URL contains a fragment identifier"),f){const d=new SyntaxError(f);if(r._redirects===0)throw d;Ht(r,d);return}const l=s?443:80,c=Jc(16).toString("base64"),p=s?Hc.request:Kc.request,u=new Set;let y;if(o.createConnection=s?uu:cu,o.defaultPort=o.defaultPort||l,o.port=i.port||l,o.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":c,Connection:"Upgrade",Upgrade:"websocket"},o.path=i.pathname+i.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(y=new Ae(o.perMessageDeflate!==!0?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=iu({[Ae.extensionName]:y.offer()})),t.length){for(const d of t){if(typeof d!="string"||!lu.test(d)||u.has(d))throw new SyntaxError("An invalid or duplicated subprotocol was specified");u.add(d)}o.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(i.username||i.password)&&(o.auth=`${i.username}:${i.password}`),a){const d=o.path.split(":");o.socketPath=d[0],o.path=d[1]}let h;if(o.followRedirects){if(r._redirects===0){r._originalIpc=a,r._originalSecure=s,r._originalHostOrSocketPath=a?o.socketPath:i.host;const d=n&&n.headers;if(n={...n,headers:{}},d)for(const[S,k]of Object.entries(d))n.headers[S.toLowerCase()]=k}else if(r.listenerCount("redirect")===0){const d=a?r._originalIpc?o.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:i.host===r._originalHostOrSocketPath;(!d||r._originalSecure&&!s)&&(delete o.headers.authorization,delete o.headers.cookie,d||delete o.headers.host,o.auth=void 0)}o.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+j.from(o.auth).toString("base64")),h=r._req=p(o),r._redirects&&r.emit("redirect",r.url,h)}else h=r._req=p(o);o.timeout&&h.on("timeout",()=>{oe(r,h,"Opening handshake has timed out")}),h.on("error",d=>{h===null||h[ki]||(h=r._req=null,Ht(r,d))}),h.on("response",d=>{const S=d.headers.location,k=d.statusCode;if(S&&o.followRedirects&&k>=300&&k<400){if(++r._redirects>o.maxRedirects){oe(r,h,"Maximum redirects exceeded");return}h.abort();let g;try{g=new en(S,e)}catch{const $=new SyntaxError(`Invalid URL: ${S}`);Ht(r,$);return}Ui(r,g,t,n)}else r.emit("unexpected-response",h,d)||oe(r,h,`Unexpected server response: ${d.statusCode}`)}),h.on("upgrade",(d,S,k)=>{if(r.emit("upgrade",d),r.readyState!==z.CONNECTING)return;if(h=r._req=null,d.headers.upgrade.toLowerCase()!=="websocket"){oe(r,S,"Invalid Upgrade header");return}const g=Qc("sha1").update(c+eu).digest("base64");if(d.headers["sec-websocket-accept"]!==g){oe(r,S,"Invalid Sec-WebSocket-Accept header");return}const v=d.headers["sec-websocket-protocol"];let $;if(v!==void 0?u.size?u.has(v)||($="Server sent an invalid subprotocol"):$="Server sent a subprotocol but none was requested":u.size&&($="Server sent no subprotocol"),$){oe(r,S,$);return}v&&(r._protocol=v);const A=d.headers["sec-websocket-extensions"];if(A!==void 0){if(!y){oe(r,S,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let C;try{C=au(A)}catch{oe(r,S,"Invalid Sec-WebSocket-Extensions header");return}const G=Object.keys(C);if(G.length!==1||G[0]!==Ae.extensionName){oe(r,S,"Server indicated an extension that was not requested");return}try{y.accept(C[Ae.extensionName])}catch{oe(r,S,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[Ae.extensionName]=y}r.setSocket(S,k,{generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}),o.finishRequest?o.finishRequest(h,r):h.end()}function Ht(r,e){r._readyState=z.CLOSING,r.emit("error",e),r.emitClose()}function cu(r){return r.path=r.socketPath,Ci.connect(r)}function uu(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=Ci.isIP(r.host)?"":r.host),Yc.connect(r)}function oe(r,e,t){r._readyState=z.CLOSING;const n=new Error(t);Error.captureStackTrace(n,oe),e.setHeader?(e[ki]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),D.nextTick(Ht,r,n)):(e.destroy(n),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function nn(r,e,t){if(e){const n=su(e).length;r._socket?r._sender._bufferedBytes+=n:r._bufferedAmount+=n}if(t){const n=new Error(`WebSocket is not open: readyState ${r.readyState} (${Se[r.readyState]})`);D.nextTick(t,n)}}function pu(r,e){const t=this[te];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[te]!==void 0&&(t._socket.removeListener("data",gr),D.nextTick(Di,t._socket),r===1005?t.close():t.close(r,e))}function yu(){const r=this[te];r.isPaused||r._socket.resume()}function hu(r){const e=this[te];e._socket[te]!==void 0&&(e._socket.removeListener("data",gr),D.nextTick(Di,e._socket),e.close(r[ru])),e.emit("error",r)}function Ko(){this[te].emitClose()}function du(r,e){this[te].emit("message",r,e)}function vu(r){const e=this[te];e.pong(r,!e._isServer,Ni),e.emit("ping",r)}function mu(r){this[te].emit("pong",r)}function Di(r){r.resume()}function Mi(){const r=this[te];this.removeListener("close",Mi),this.removeListener("data",gr),this.removeListener("end",Bi),r._readyState=z.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[te]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",Ko),r._receiver.on("finish",Ko))}function gr(r){this[te]._receiver.write(r)||this.pause()}function Bi(){const r=this[te];r._readyState=z.CLOSING,r._receiver.end(),this.end()}function Li(){const r=this[te];this.removeListener("error",Li),this.on("error",Ni),r&&(r._readyState=z.CLOSING,this.destroy())}const Mu=It(Fi),{tokenChars:gu}=vr;function _u(r){const e=new Set;let t=-1,n=-1,o=0;for(o;o<r.length;o++){const s=r.charCodeAt(o);if(n===-1&&gu[s]===1)t===-1&&(t=o);else if(o!==0&&(s===32||s===9))n===-1&&t!==-1&&(n=o);else if(s===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${o}`);n===-1&&(n=o);const a=r.slice(t,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),t=n=-1}else throw new SyntaxError(`Unexpected character at index ${o}`)}if(t===-1||n!==-1)throw new SyntaxError("Unexpected end of input");const i=r.slice(t,o);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}var Su={parse:_u};const bu=Zo,ar=re,{createHash:Eu}=re,Yo=Ti,Ie=dr,wu=Su,Au=Fi,{GUID:Pu,kWebSocket:Ou}=De,xu=/^[+/0-9A-Za-z]{22}==$/,Jo=0,Qo=1,Wi=2;class $u extends bu{constructor(e,t){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Au,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=ar.createServer((n,o)=>{const i=ar.STATUS_CODES[426];o.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),o.end(i)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const n=this.emit.bind(this,"connection");this._removeListeners=Ru(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(o,i,s)=>{this.handleUpgrade(o,i,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Jo}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===Wi){e&&this.once("close",()=>{e(new Error("The server is not running"))}),D.nextTick(ct,this);return}if(e&&this.once("close",e),this._state!==Qo)if(this._state=Qo,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:D.nextTick(ct,this):D.nextTick(ct,this);else{const t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{ct(this)})}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,o){t.on("error",Xo);const i=e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Te(this,e,t,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){Te(this,e,t,400,"Invalid Upgrade header");return}if(!i||!xu.test(i)){Te(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(s!==8&&s!==13){Te(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){pt(t,400);return}const a=e.headers["sec-websocket-protocol"];let f=new Set;if(a!==void 0)try{f=wu.parse(a)}catch{Te(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}const l=e.headers["sec-websocket-extensions"],c={};if(this.options.perMessageDeflate&&l!==void 0){const p=new Ie(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const u=Yo.parse(l);u[Ie.extensionName]&&(p.accept(u[Ie.extensionName]),c[Ie.extensionName]=p)}catch{Te(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){const p={origin:e.headers[`${s===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(u,y,h,d)=>{if(!u)return pt(t,y||401,h,d);this.completeUpgrade(c,i,f,e,t,n,o)});return}if(!this.options.verifyClient(p))return pt(t,401)}this.completeUpgrade(c,i,f,e,t,n,o)}completeUpgrade(e,t,n,o,i,s,a){if(!i.readable||!i.writable)return i.destroy();if(i[Ou])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Jo)return pt(i,503);const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Eu("sha1").update(t+Pu).digest("base64")}`],c=new this.options.WebSocket(null);if(n.size){const p=this.options.handleProtocols?this.options.handleProtocols(n,o):n.values().next().value;p&&(l.push(`Sec-WebSocket-Protocol: ${p}`),c._protocol=p)}if(e[Ie.extensionName]){const p=e[Ie.extensionName].params,u=Yo.format({[Ie.extensionName]:[p]});l.push(`Sec-WebSocket-Extensions: ${u}`),c._extensions=e}this.emit("headers",l,o),i.write(l.concat(`\r
`).join(`\r
`)),i.removeListener("error",Xo),c.setSocket(i,s,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(c),c.on("close",()=>{this.clients.delete(c),this._shouldEmitClose&&!this.clients.size&&D.nextTick(ct,this)})),a(c,o)}}var Iu=$u;function Ru(r,e){for(const t of Object.keys(e))r.on(t,e[t]);return function(){for(const n of Object.keys(e))r.removeListener(n,e[n])}}function ct(r){r._state=Wi,r.emit("close")}function Xo(){this.destroy()}function pt(r,e,t,n){t=t||ar.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":j.byteLength(t),...n},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${ar.STATUS_CODES[e]}\r
`+Object.keys(n).map(o=>`${o}: ${n[o]}`).join(`\r
`)+`\r
\r
`+t)}function Te(r,e,t,n,o){if(r.listenerCount("wsClientError")){const i=new Error(o);Error.captureStackTrace(i,Te),r.emit("wsClientError",i,t,e)}else pt(t,n,o)}const Bu=It(Iu);export{Uu as Receiver,Du as Sender,Mu as WebSocket,Bu as WebSocketServer,Cu as createWebSocketStream,Mu as default};
