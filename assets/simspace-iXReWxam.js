(function(){"use strict";const Bd=new Set,ka={emit(t,e,A,n,r){ka.invoke(uC(t,e,A,n,r))},invoke(t){Bd.forEach(e=>e.handle(t))},connect(t){Bd.add(t)},disconnect(t){Bd.delete(t)}};var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function di(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function z_(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var A=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};A.prototype=e.prototype}else A={};return Object.defineProperty(A,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(A,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),A}var Xl={exports:{}},NS=Xl.exports,H_;function TS(){return H_||(H_=1,(function(t,e){(function(A,n){t.exports=n()})(NS,function(){return A.importState=function(r){var s=new A;return s.importState(r),s},A;function A(){return(function(r){var s=0,i=0,o=0,a=1;r.length==0&&(r=[+new Date]);var c=n();s=c(" "),i=c(" "),o=c(" ");for(var l=0;l<r.length;l++)s-=c(r[l]),s<0&&(s+=1),i-=c(r[l]),i<0&&(i+=1),o-=c(r[l]),o<0&&(o+=1);c=null;var u=function(){var f=2091639*s+a*23283064365386963e-26;return s=i,i=o,o=f-(a=f|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=r,u.exportState=function(){return[s,i,o,a]},u.importState=function(f){s=+f[0]||0,i=+f[1]||0,o=+f[2]||0,a=+f[3]||0},u})(Array.prototype.slice.call(arguments))}function n(){var r=4022871197,s=function(i){i=i.toString();for(var o=0;o<i.length;o++){r+=i.charCodeAt(o);var a=.02519603282416938*r;r=a>>>0,a-=r,a*=r,r=a>>>0,a-=r,r+=a*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})})(Xl)),Xl.exports}var OS=TS(),L_=di(OS),Ea={},U_;function YS(){return U_||(U_=1,(function(t){var e=Ea&&Ea.__spreadArray||function(c,l,u){if(u||arguments.length===2)for(var f=0,h=l.length,d;f<h;f++)(d||!(f in l))&&(d||(d=Array.prototype.slice.call(l,0,f)),d[f]=l[f]);return c.concat(d||Array.prototype.slice.call(l))};Object.defineProperty(t,"__esModule",{value:!0}),t.minLength=t.maxLength=t.poolSize=t.humanId=t.adverbs=t.verbs=t.nouns=t.adjectives=void 0,t.adjectives=["afraid","all","beige","better","big","blue","bold","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","common","cool","cozy","crisp","cuddly","curly","curvy","cute","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","fair","famous","fancy","fast","few","fiery","fifty","fine","five","flat","floppy","fluffy","forty","four","frank","free","fresh","fruity","full","funky","funny","fuzzy","gentle","giant","gold","good","goofy","great","green","grumpy","happy","heavy","hip","honest","hot","huge","humble","hungry","icy","itchy","jolly","khaki","kind","large","late","lazy","legal","lemon","light","little","long","loose","loud","lovely","lucky","major","many","metal","mighty","modern","moody","neat","new","nice","nine","ninety","odd","old","olive","open","orange","perky","petite","pink","plain","plenty","polite","pretty","proud","public","puny","purple","quick","quiet","rare","ready","real","red","rich","ripe","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","sparkly","spicy","spotty","stale","strict","strong","sunny","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","wacky","warm","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],t.nouns=["actors","ads","adults","aliens","animals","ants","apes","apples","areas","baboons","badgers","bags","balloons","bananas","banks","bars","baths","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","breads","brooms","buckets","bugs","buses","bushes","buttons","camels","cameras","candies","candles","canyons","carpets","carrots","cars","cases","cats","chairs","chefs","chicken","cities","clocks","cloths","clouds","clowns","clubs","coats","cobras","coins","colts","comics","cooks","corners","cougars","cows","crabs","crews","cups","cycles","dancers","days","deer","deserts","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","eagles","ears","eels","eggs","emus","ends","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hoops","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lilies","lines","lions","lizards","llamas","loops","mails","mammals","mangos","maps","masks","meals","melons","memes","meteors","mice","mirrors","moles","moments","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","papers","parents","parks","parrots","parts","paths","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","regions","results","rice","rings","rivers","rockets","rocks","rooms","roses","rules","sails","schools","seals","seas","sheep","shirts","shoes","showers","shrimps","sides","signs","singers","sites","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stamps","stars","states","steaks","streets","suits","suns","swans","symbols","tables","taxes","taxis","teams","teeth","terms","things","ties","tigers","times","tips","tires","toes","tools","towns","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","wasps","waves","ways","webs","weeks","windows","wings","wolves","wombats","words","worlds","worms","yaks","years","zebras","zoos"],t.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enjoy","enter","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","lie","like","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","pick","play","poke","post","press","prove","pull","pump","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","search","see","sell","send","serve","shake","share","shave","shine","shop","shout","show","sin","sing","sink","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","stare","start","stay","stick","stop","strive","study","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],t.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowingly","lazily","noisily","oddly","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"];function A(c){return c[Math.floor(Math.random()*c.length)]}function n(c){return c.reduce(function(l,u){return l.length>u.length?l:u})}function r(c){return c.reduce(function(l,u){return l.length<u.length?l:u})}function s(c){c===void 0&&(c={}),typeof c=="string"&&(c={separator:c}),typeof c=="boolean"&&(c={capitalize:c});var l=c.separator,u=l===void 0?"":l,f=c.capitalize,h=f===void 0?!0:f,d=c.adjectiveCount,m=d===void 0?1:d,p=c.addAdverb,w=p===void 0?!1:p,b=e(e(e([],e([],Array(m),!0).map(function(g){return A(t.adjectives)}),!0),[A(t.nouns),A(t.verbs)],!1),w?[A(t.adverbs)]:[],!0);return h&&(b=b.map(function(g){return g.charAt(0).toUpperCase()+g.substr(1)})),b.join(u)}t.humanId=s;function i(c){c===void 0&&(c={});var l=c.adjectiveCount,u=l===void 0?1:l,f=c.addAdverb,h=f===void 0?!1:f;return t.adjectives.length*u*t.nouns.length*t.verbs.length*(h?t.adverbs.length:1)}t.poolSize=i;function o(c){c===void 0&&(c={});var l=c.adjectiveCount,u=l===void 0?1:l,f=c.addAdverb,h=f===void 0?!1:f,d=c.separator,m=d===void 0?"":d;return n(t.adjectives).length*u+u*m.length+n(t.nouns).length+m.length+n(t.verbs).length+(h?n(t.adverbs).length+m.length:0)}t.maxLength=o;function a(c){c===void 0&&(c={});var l=c.adjectiveCount,u=l===void 0?1:l,f=c.addAdverb,h=f===void 0?!1:f,d=c.separator,m=d===void 0?"":d;return r(t.adjectives).length*u+u*m.length+r(t.nouns).length+m.length+r(t.verbs).length+(h?r(t.adverbs).length+m.length:0)}t.minLength=a,t.default=s})(Ea)),Ea}var SS=YS(),F_=di(SS);const CS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let PS=t=>crypto.getRandomValues(new Uint8Array(t)),ZS=(t,e,A)=>{let n=(2<<Math.log2(t.length-1))-1,r=-~(1.6*n*e/t.length);return(s=e)=>{let i="";for(;;){let o=A(r),a=r|0;for(;a--;)if(i+=t[o[a]&n]||"",i.length>=s)return i}}},$_=(t,e=21)=>ZS(t,e|0,PS),IS=(t=21)=>{let e="",A=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=CS[A[t]&63];return e};var kd,V_;function q_(){return V_||(V_=1,kd="abcdefghijklmnopqrstuvwxyz"),kd}var Ed,W_;function Q_(){return W_||(W_=1,Ed="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),Ed}var Nd,K_;function J_(){return K_||(K_=1,Nd="0123456789"),Nd}var Td,X_;function RS(){return X_||(X_=1,Td="346789ABCDEFGHJKLMNPQRTUVWXYabcdefghijkmnpqrtwxyz"),Td}var Od,ex;function jS(){return ex||(ex=1,Od="6789BCDFGHJKLMNPQRTWbcdfghjkmnpqrtwz"),Od}var Yd,tx;function zS(){if(tx)return Yd;tx=1;const t=J_(),e=q_(),A=Q_();return Yd=t+e+A,Yd}var Sd,Ax;function HS(){return Ax||(Ax=1,Sd={lowercase:q_(),uppercase:Q_(),numbers:J_(),nolookalikes:RS(),nolookalikesSafe:jS(),alphanumeric:zS()}),Sd}var Cd=HS();function rA(){return`sid_${IS(12).replaceAll("-",".")}`}const LS=$_(Cd.numbers,4),US=$_(`${Cd.numbers}${Cd.lowercase}`,16);function FS(){return`pid_${LS()}_${US()}`}function $t(t){return t?.startsWith("pid_")??!1}function Pd(){return F_({capitalize:!1,adjectiveCount:1})}function $S(){return F_({addAdverb:!1,capitalize:!1,adjectiveCount:0})}var VS=(function(){var t=function(e,A){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},t(e,A)};return function(e,A){t(e,A);function n(){this.constructor=e}e.prototype=A===null?Object.create(A):(n.prototype=A.prototype,new n)}})(),qS=Object.prototype.hasOwnProperty;function Zd(t,e){return qS.call(t,e)}function Id(t){if(Array.isArray(t)){for(var e=new Array(t.length),A=0;A<e.length;A++)e[A]=""+A;return e}if(Object.keys)return Object.keys(t);var n=[];for(var r in t)Zd(t,r)&&n.push(r);return n}function dn(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Rd(t){for(var e=0,A=t.length,n;e<A;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function mi(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function nx(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function jd(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,A=t.length;e<A;e++)if(jd(t[e]))return!0}else if(typeof t=="object"){for(var n=Id(t),r=n.length,s=0;s<r;s++)if(jd(t[n[s]]))return!0}}return!1}function rx(t,e){var A=[t];for(var n in e){var r=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof r<"u"&&A.push(n+": "+r)}return A.join(`
`)}var sx=(function(t){VS(e,t);function e(A,n,r,s,i){var o=this.constructor,a=t.call(this,rx(A,{name:n,index:r,operation:s,tree:i}))||this;return a.name=n,a.index=r,a.operation=s,a.tree=i,Object.setPrototypeOf(a,o.prototype),a.message=rx(A,{name:n,index:r,operation:s,tree:i}),a}return e})(Error),sA=sx,WS=dn,bo={add:function(t,e,A){return t[e]=this.value,{newDocument:A}},remove:function(t,e,A){var n=t[e];return delete t[e],{newDocument:A,removed:n}},replace:function(t,e,A){var n=t[e];return t[e]=this.value,{newDocument:A,removed:n}},move:function(t,e,A){var n=eu(A,this.path);n&&(n=dn(n));var r=pi(A,{op:"remove",path:this.from}).removed;return pi(A,{op:"add",path:this.path,value:r}),{newDocument:A,removed:n}},copy:function(t,e,A){var n=eu(A,this.from);return pi(A,{op:"add",path:this.path,value:dn(n)}),{newDocument:A}},test:function(t,e,A){return{newDocument:A,test:Na(t[e],this.value)}},_get:function(t,e,A){return this.value=t[e],{newDocument:A}}},QS={add:function(t,e,A){return Rd(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:A,index:e}},remove:function(t,e,A){var n=t.splice(e,1);return{newDocument:A,removed:n[0]}},replace:function(t,e,A){var n=t[e];return t[e]=this.value,{newDocument:A,removed:n}},move:bo.move,copy:bo.copy,test:bo.test,_get:bo._get};function eu(t,e){if(e=="")return t;var A={op:"_get",path:e};return pi(t,A),A.value}function pi(t,e,A,n,r,s){if(A===void 0&&(A=!1),n===void 0&&(n=!0),r===void 0&&(r=!0),s===void 0&&(s=0),A&&(typeof A=="function"?A(e,0,t,e.path):tu(e,0)),e.path===""){var i={newDocument:t};if(e.op==="add")return i.newDocument=e.value,i;if(e.op==="replace")return i.newDocument=e.value,i.removed=t,i;if(e.op==="move"||e.op==="copy")return i.newDocument=eu(t,e.from),e.op==="move"&&(i.removed=t),i;if(e.op==="test"){if(i.test=Na(t,e.value),i.test===!1)throw new sA("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return i.newDocument=t,i}else{if(e.op==="remove")return i.removed=t,i.newDocument=null,i;if(e.op==="_get")return e.value=t,i;if(A)throw new sA("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return i}}else{n||(t=dn(t));var o=e.path||"",a=o.split("/"),c=t,l=1,u=a.length,f=void 0,h=void 0,d=void 0;for(typeof A=="function"?d=A:d=tu;;){if(h=a[l],h&&h.indexOf("~")!=-1&&(h=nx(h)),r&&(h=="__proto__"||h=="prototype"&&l>0&&a[l-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(A&&f===void 0&&(c[h]===void 0?f=a.slice(0,l).join("/"):l==u-1&&(f=e.path),f!==void 0&&d(e,0,t,f)),l++,Array.isArray(c)){if(h==="-")h=c.length;else{if(A&&!Rd(h))throw new sA("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);Rd(h)&&(h=~~h)}if(l>=u){if(A&&e.op==="add"&&h>c.length)throw new sA("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var i=QS[e.op].call(e,c,h,t);if(i.test===!1)throw new sA("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return i}}else if(l>=u){var i=bo[e.op].call(e,c,h,t);if(i.test===!1)throw new sA("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return i}if(c=c[h],A&&l<u&&(!c||typeof c!="object"))throw new sA("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function zd(t,e,A,n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!0),A&&!Array.isArray(e))throw new sA("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=dn(t));for(var s=new Array(e.length),i=0,o=e.length;i<o;i++)s[i]=pi(t,e[i],A,!0,r,i),t=s[i].newDocument;return s.newDocument=t,s}function KS(t,e,A){var n=pi(t,e);if(n.test===!1)throw new sA("Test operation failed","TEST_OPERATION_FAILED",A,e,t);return n.newDocument}function tu(t,e,A,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new sA("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,A);if(bo[t.op]){if(typeof t.path!="string")throw new sA("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,A);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new sA('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,A);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new sA("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,A);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new sA("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,A);if((t.op==="add"||t.op==="replace"||t.op==="test")&&jd(t.value))throw new sA("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,A);if(A){if(t.op=="add"){var r=t.path.split("/").length,s=n.split("/").length;if(r!==s+1&&r!==s)throw new sA("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,A)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new sA("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,A)}else if(t.op==="move"||t.op==="copy"){var i={op:"_get",path:t.from,value:void 0},o=ix([i],A);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new sA("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,A)}}}else throw new sA("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,A)}function ix(t,e,A){try{if(!Array.isArray(t))throw new sA("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)zd(dn(e),dn(t),A||!0);else{A=A||tu;for(var n=0;n<t.length;n++)A(t[n],n,e,void 0)}}catch(r){if(r instanceof sA)return r;throw r}}function Na(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var A=Array.isArray(t),n=Array.isArray(e),r,s,i;if(A&&n){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!Na(t[r],e[r]))return!1;return!0}if(A!=n)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!e.hasOwnProperty(o[r]))return!1;for(r=s;r--!==0;)if(i=o[r],!Na(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}var JS=Object.freeze({__proto__:null,JsonPatchError:sA,_areEquals:Na,applyOperation:pi,applyPatch:zd,applyReducer:KS,deepClone:WS,getValueByPointer:eu,validate:ix,validator:tu});var Hd=new WeakMap,XS=(function(){function t(e){this.observers=new Map,this.obj=e}return t})(),eC=(function(){function t(e,A){this.callback=e,this.observer=A}return t})();function tC(t){return Hd.get(t)}function AC(t,e){return t.observers.get(e)}function nC(t,e){t.observers.delete(e.callback)}function rC(t,e){e.unobserve()}function sC(t,e){var A=[],n,r=tC(t);if(!r)r=new XS(t),Hd.set(t,r);else{var s=AC(r,e);n=s&&s.observer}if(n)return n;if(n={},r.value=dn(t),e){n.callback=e,n.next=null;var i=function(){Ld(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(i)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=A,n.object=t,n.unobserve=function(){Ld(n),clearTimeout(n.next),nC(r,n),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(e,new eC(e,n)),n}function Ld(t,e){e===void 0&&(e=!1);var A=Hd.get(t.object);Ud(A.value,t.object,t.patches,"",e),t.patches.length&&zd(A.value,t.patches);var n=t.patches;return n.length>0&&(t.patches=[],t.callback&&t.callback(n)),n}function Ud(t,e,A,n,r){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=Id(e),i=Id(t),o=!1,a=i.length-1;a>=0;a--){var c=i[a],l=t[c];if(Zd(e,c)&&!(e[c]===void 0&&l!==void 0&&Array.isArray(e)===!1)){var u=e[c];typeof l=="object"&&l!=null&&typeof u=="object"&&u!=null&&Array.isArray(l)===Array.isArray(u)?Ud(l,u,A,n+"/"+mi(c),r):l!==u&&(r&&A.push({op:"test",path:n+"/"+mi(c),value:dn(l)}),A.push({op:"replace",path:n+"/"+mi(c),value:dn(u)}))}else Array.isArray(t)===Array.isArray(e)?(r&&A.push({op:"test",path:n+"/"+mi(c),value:dn(l)}),A.push({op:"remove",path:n+"/"+mi(c)}),o=!0):(r&&A.push({op:"test",path:n,value:t}),A.push({op:"replace",path:n,value:e}))}if(!(!o&&s.length==i.length))for(var a=0;a<s.length;a++){var c=s[a];!Zd(t,c)&&e[c]!==void 0&&A.push({op:"add",path:n+"/"+mi(c),value:dn(e[c])})}}}function ox(t,e,A){A===void 0&&(A=!1);var n=[];return Ud(t,e,n,"",A),n}var iC=Object.freeze({__proto__:null,compare:ox,generate:Ld,observe:sC,unobserve:rC});Object.assign({},JS,iC,{JsonPatchError:sx,deepClone:dn,escapePathComponent:mi,unescapePathComponent:nx});var Fd,ax;function oC(){if(ax)return Fd;ax=1;var t=typeof Element<"u",e=typeof Map=="function",A=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r(s,i){if(s===i)return!0;if(s&&i&&typeof s=="object"&&typeof i=="object"){if(s.constructor!==i.constructor)return!1;var o,a,c;if(Array.isArray(s)){if(o=s.length,o!=i.length)return!1;for(a=o;a--!==0;)if(!r(s[a],i[a]))return!1;return!0}var l;if(e&&s instanceof Map&&i instanceof Map){if(s.size!==i.size)return!1;for(l=s.entries();!(a=l.next()).done;)if(!i.has(a.value[0]))return!1;for(l=s.entries();!(a=l.next()).done;)if(!r(a.value[1],i.get(a.value[0])))return!1;return!0}if(A&&s instanceof Set&&i instanceof Set){if(s.size!==i.size)return!1;for(l=s.entries();!(a=l.next()).done;)if(!i.has(a.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(i)){if(o=s.length,o!=i.length)return!1;for(a=o;a--!==0;)if(s[a]!==i[a])return!1;return!0}if(s.constructor===RegExp)return s.source===i.source&&s.flags===i.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof i.valueOf=="function")return s.valueOf()===i.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof i.toString=="function")return s.toString()===i.toString();if(c=Object.keys(s),o=c.length,o!==Object.keys(i).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(i,c[a]))return!1;if(t&&s instanceof Element)return!1;for(a=o;a--!==0;)if(!((c[a]==="_owner"||c[a]==="__v"||c[a]==="__o")&&s.$$typeof)&&!r(s[c[a]],i[c[a]]))return!1;return!0}return s!==s&&i!==i}return Fd=function(i,o){try{return r(i,o)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},Fd}var aC=oC(),cC=di(aC);function E(t){return t!=null}const mn=Object.keys;function FA(t){return dn(t)}function lC(t){return typeof t=="boolean"}function Ne(t){return typeof t=="number"&&isNaN(t)===!1}function xe(t){return typeof t=="string"}function st(t){return Array.isArray(t)}function $d(t){return t}var Xe=(t=>(t[t.BLACK=0]="BLACK",t[t.DKBLUE=1]="DKBLUE",t[t.DKGREEN=2]="DKGREEN",t[t.DKCYAN=3]="DKCYAN",t[t.DKRED=4]="DKRED",t[t.DKPURPLE=5]="DKPURPLE",t[t.DKYELLOW=6]="DKYELLOW",t[t.LTGRAY=7]="LTGRAY",t[t.DKGRAY=8]="DKGRAY",t[t.BLUE=9]="BLUE",t[t.GREEN=10]="GREEN",t[t.CYAN=11]="CYAN",t[t.RED=12]="RED",t[t.PURPLE=13]="PURPLE",t[t.YELLOW=14]="YELLOW",t[t.WHITE=15]="WHITE",t[t.ONBLACK=16]="ONBLACK",t[t.ONDKBLUE=17]="ONDKBLUE",t[t.ONDKGREEN=18]="ONDKGREEN",t[t.ONDKCYAN=19]="ONDKCYAN",t[t.ONDKRED=20]="ONDKRED",t[t.ONDKPURPLE=21]="ONDKPURPLE",t[t.ONDKYELLOW=22]="ONDKYELLOW",t[t.ONLTGRAY=23]="ONLTGRAY",t[t.ONDKGRAY=24]="ONDKGRAY",t[t.ONBLUE=25]="ONBLUE",t[t.ONGREEN=26]="ONGREEN",t[t.ONCYAN=27]="ONCYAN",t[t.ONRED=28]="ONRED",t[t.ONPURPLE=29]="ONPURPLE",t[t.ONYELLOW=30]="ONYELLOW",t[t.ONWHITE=31]="ONWHITE",t[t.ONCLEAR=32]="ONCLEAR",t[t.BLBLACK=33]="BLBLACK",t[t.BLDKBLUE=34]="BLDKBLUE",t[t.BLDKGREEN=35]="BLDKGREEN",t[t.BLDKCYAN=36]="BLDKCYAN",t[t.BLDKRED=37]="BLDKRED",t[t.BLDKPURPLE=38]="BLDKPURPLE",t[t.BLDKYELLOW=39]="BLDKYELLOW",t[t.BLLTGRAY=40]="BLLTGRAY",t[t.BLDKGRAY=41]="BLDKGRAY",t[t.BLBLUE=42]="BLBLUE",t[t.BLGREEN=43]="BLGREEN",t[t.BLCYAN=44]="BLCYAN",t[t.BLRED=45]="BLRED",t[t.BLPURPLE=46]="BLPURPLE",t[t.BLYELLOW=47]="BLYELLOW",t[t.BLWHITE=48]="BLWHITE",t))(Xe||{}),$e=(t=>(t[t.ISWALK=0]="ISWALK",t[t.ISSOLID=1]="ISSOLID",t[t.ISSWIM=2]="ISSWIM",t[t.ISBULLET=3]="ISBULLET",t[t.ISGHOST=4]="ISGHOST",t))($e||{}),pn=(t=>(t[t.ISTERRAIN=0]="ISTERRAIN",t[t.ISOBJECT=1]="ISOBJECT",t))(pn||{}),De=(t=>(t[t.IDLE=0]="IDLE",t[t.NORTH=1]="NORTH",t[t.SOUTH=2]="SOUTH",t[t.WEST=3]="WEST",t[t.EAST=4]="EAST",t[t.BY=5]="BY",t[t.AT=6]="AT",t[t.FLOW=7]="FLOW",t[t.SEEK=8]="SEEK",t[t.RNDNS=9]="RNDNS",t[t.RNDNE=10]="RNDNE",t[t.RND=11]="RND",t[t.CW=12]="CW",t[t.CCW=13]="CCW",t[t.OPP=14]="OPP",t[t.RNDP=15]="RNDP",t[t.AWAY=16]="AWAY",t[t.TOWARD=17]="TOWARD",t[t.FIND=18]="FIND",t[t.FLEE=19]="FLEE",t[t.TO=20]="TO",t[t.MID=21]="MID",t[t.OVER=22]="OVER",t[t.UNDER=23]="UNDER",t[t.GROUND=24]="GROUND",t[t.WITHIN=25]="WITHIN",t[t.AWAYBY=26]="AWAYBY",t[t.ELEMENTS=27]="ELEMENTS",t))(De||{}),ye=(t=>(t[t.LOADER=0]="LOADER",t[t.BOARD=1]="BOARD",t[t.OBJECT=2]="OBJECT",t[t.TERRAIN=3]="TERRAIN",t[t.CHARSET=4]="CHARSET",t[t.PALETTE=5]="PALETTE",t[t.CONST=6]="CONST",t[t.RANGE=7]="RANGE",t[t.SELECT=8]="SELECT",t[t.NUMBER=9]="NUMBER",t[t.TEXT=10]="TEXT",t[t.HOTKEY=11]="HOTKEY",t[t.COPYIT=12]="COPYIT",t[t.OPENIT=13]="OPENIT",t[t.VIEWIT=14]="VIEWIT",t[t.RUNIT=15]="RUNIT",t[t.ZSSEDIT=16]="ZSSEDIT",t[t.CHAREDIT=17]="CHAREDIT",t[t.COLOREDIT=18]="COLOREDIT",t))(ye||{});function je(t){return xe(t)?t.toLowerCase().trim():""}function uC(t,e,A,n,r){return{session:t,player:e,id:rA(),sender:A,target:n,data:r}}function Un(t){const[e,...A]=t.split(":");return{target:e,path:A.join(":")}}function gi(t,e=[],A=$d,n=""){const r=rA(),s=je(t),i=e.map(je);let o=n;const a={id(){return r},name(){return t},session(c){return E(c)?c.session===o?c.session:"":o},topics(){return e},emit(c,l,u){ka.emit(o,c,r,l,u)},reply(c,l,u){a.emit(c.player,`${c.sender}:${l}`,u)},replynext(c,l,u){setTimeout(()=>a.emit(c.player,`${c.sender}:${l}`,u),64)},handle(c){const{target:l,path:u}=Un(c.target),f=je(l);!o&&f==="ready"&&(o=c.session),f==="sessionreset"&&(o=""),i.findIndex(h=>h==="all"||h===f)!==-1&&A(c),(r===l||f==="all"||s===f)&&A({...c,target:u})},disconnect(){ka.disconnect(a)}};return ka.connect(a),a}function hC(t){return typeof t=="object"&&xe(t.session)&&xe(t.player)&&xe(t.id)&&xe(t.sender)&&xe(t.target)}function xt(t,e,A,...n){return t.emit(e,"log",[`$red${A}$blue>>`,...n]),!1}function _A(t,e,...A){return t.emit(e,"log",A),!0}function Vd(t,e,...A){return t.emit(e,"chat",A),!0}function is(t,e,A){t.emit(e,"toast",A)}function fC(t,e,A){t.emit(e,"bridge:streamstart",A)}function dC(t,e){t.emit(e,"bridge:streamstop",void 0)}function mC(t,e,A){t.emit(e,"bridge:chatstart",A)}function pC(t,e){t.emit(e,"bridge:chatstop")}function gC(t,e,A,n,r,s,i){t.emit(e,"bridge:fetch",[A,n,r,s,i])}function wC(t,e,A){t.emit(e,"bridge:start",A)}function bC(t,e,A){t.emit(e,"bridge:tab",A)}function _C(t,e,A){t.emit(e,"gadgetclient:paint",A)}function xC(t,e,A){t.emit(e,"gadgetclient:patch",A)}function yC(t,e){t.emit(e,"gadgetserver:clearscroll")}function GC(t,e,A,n){t.emit(e,"heavy:modelprompt",[A,n])}function MC(t){t.emit("","ready")}function Pr(t,e,A,n){t.emit(e,"register:input",[A,n])}function qd(t,e){t.emit(e,"register:loginready",!0)}function vC(t,e,A,n,r){t.emit(e,"register:savemem",[A,n,r])}function DC(t,e,A,n){t.emit(e,"register:forkmem",[A,n])}function BC(t,e,A,...n){t.emit(e,"register:publishmem",[A,...n])}function Au(t,e,A){t.emit(e,"register:copy",A)}function kC(t,e){t.emit(e,"register:screenshot")}function cx(t,e,A,n){t.emit(e,"register:downloadjsonfile",[A,n])}function EC(t,e){t.emit(e,"register:share",void 0)}function NC(t,e){t.emit(e,"register:nuke",void 0)}function Wd(t,e,A,n){t.emit(e,"synth:play",[A,n])}function TC(t,e,A,n,r){t.emit(e,"synth:bgplay",[A,n,r])}function OC(t,e,A,n){t.emit(e,"synth:bpm",[A,n])}function YC(t,e,A,n){t.emit(e,"synth:playvolume",[A,n])}function SC(t,e,A,n){t.emit(e,"synth:bgplayvolume",[A,n])}function CC(t,e,A,n){t.emit(e,"synth:ttsvolume",[A,n])}function PC(t,e,A,n,r){t.emit(e,"synth:ttsengine",[A,n,r])}function ZC(t,e,A,n,r){t.emit(e,"synth:tts",[A,n,r])}function IC(t,e,A,n){t.emit(e,"synth:ttsinfo",[A,n])}function RC(t,e,A,n,r){t.emit(e,"synth:ttsqueue",[A,n,r])}function jC(t,e,A){t.emit(e,"synth:ttsclearqueue",[A])}function Qd(t,e,A,n,r,s){t.emit(e,"synth:voice",[A,n,r,s])}function lx(t,e,A,n,r,s,i){t.emit(e,"synth:voicefx",[A,n,r,s,i])}function zC(t,e,A){t.emit(e,"synth:record",A)}function HC(t,e){t.emit(e,"synth:flush")}function LC(t,e,A,n){t.emit(e,"register:store",[A,n])}function ux(t,e,A){t.emit(e,"register:inspector",A)}function hx(t,e,A){t.emit(e,"register:findany",A)}function UC(t,e){t.emit(e,"register:terminal:full")}function fx(t,e,A,n,r,s){t.emit(e,"register:editor:open",[A,n,r,s])}function FC(t,e){t.emit(e,"vm:admin")}function $C(t,e,A,n){t.emit(e,"vm:zztsearch",[A,n])}function VC(t,e){t.emit(e,"vm:zztrandom")}function qC(t,e){t.emit(e,"vm:halt")}function WC(t,e,A){t.emit(e,"vm:login",A)}function QC(t,e){t.emit(e,"vm:local")}function Ta(t,e,A){t.emit(e,"vm:logout",A)}function KC(t,e){t.emit(e,"vm:doot")}function JC(t,e){t.emit(e,"vm:agentstart")}function XC(t,e,A){t.emit(e,"vm:agentstop",A)}function Kd(t,e){t.emit(e,"vm:agentlist")}function eP(t,e,A,n){t.emit(e,"vm:agentprompt",[A,n])}function tP(t,e,A){t.emit(e,"vm:makeitscroll",A)}function dx(t,e){t.emit(e,"vm:refscroll")}function AP(t,e){t.emit(e,"vm:readzipfilelist")}function nu(t,e){const[A,n]=e;return`${t}:${[A,n].filter(E).join(":")}`}function mx(t,e){t.emit(e,"vm:clearscroll")}function wi(t,e,A){t.emit(e,"vm:cli",A)}function nP(t,e){t.emit(e,"vm:restart")}function px(t,e){t.emit(e,"vm:flush")}function rP(t,e,A){t.emit(e,"vm:fork",A)}function gx(t,e,A,...n){t.emit(e,"vm:publish",[A,...n])}function sP(t,e){return{filename:t,cursor:0,lines:e.split(`
`)}}function iP(t,e){return{filename:t,json:e}}function oP(t,e){return{filename:t,cursor:0,bytes:e,dataview:new DataView(e.buffer)}}function Oa(t,e,A,n,r,s){let i;switch(n){case"file":i=s;break;case"text":i=sP(r,s);break;case"json":i=iP(r,s);break;case"binary":i=oP(r,s);break}setTimeout(()=>{t.emit(e,"vm:loader",[A,n,r,i])},1)}function aP(t){const e=new Set;function A(s){hC(s)&&s.target!=="tick"&&s.target!=="tock"&&e.has(s.id)===!1&&(e.add(s.id),ka.invoke(s))}const n=gi("forward",["all"],s=>{e.has(s.id)||(e.add(s.id),t(s))});function r(){n.disconnect()}return{forward:A,disconnect:r}}function cP(t){switch(t.target){case"log":case"chat":case"tick":case"tock":case"ready":case"toast":case"second":return!0;default:{const e=Un(t.target);switch(e.target){case"vm":case"heavy":case"synth":case"modem":case"bridge":case"register":case"gadgetclient":return!0}switch(e.path){case"sync":case"heavy":case"joinack":case"acklook":case"acklogin":case"ackoperator":case"ackzsswords":case"gadgetclient":return!0}break}}return!1}const Jd=80,wx=1e3/Jd,bx=3;function bi(t){return new Promise(e=>setTimeout(e,t))}const Xd=gi("clock");let ru=0,em=0,tm=0,_x=performance.now();function xx(){const t=performance.now(),e=t-_x;em+=e,em>=Jd&&(em%=Jd,Xd.emit("","tick",ru),Xd.emit("","tock",ru),++ru),tm+=e,tm>=1e3&&(tm-=1e3,Xd.emit("","second",ru)),_x=t,setTimeout(xx,2)}xx();var Ya={},yx={},su={};su.byteLength=hP,su.toByteArray=dP,su.fromByteArray=gP;for(var Zr=[],Fn=[],lP=typeof Uint8Array<"u"?Uint8Array:Array,Am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_o=0,uP=Am.length;_o<uP;++_o)Zr[_o]=Am[_o],Fn[Am.charCodeAt(_o)]=_o;Fn[45]=62,Fn[95]=63;function Gx(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=t.indexOf("=");A===-1&&(A=e);var n=A===e?0:4-A%4;return[A,n]}function hP(t){var e=Gx(t),A=e[0],n=e[1];return(A+n)*3/4-n}function fP(t,e,A){return(e+A)*3/4-A}function dP(t){var e,A=Gx(t),n=A[0],r=A[1],s=new lP(fP(t,n,r)),i=0,o=r>0?n-4:n,a;for(a=0;a<o;a+=4)e=Fn[t.charCodeAt(a)]<<18|Fn[t.charCodeAt(a+1)]<<12|Fn[t.charCodeAt(a+2)]<<6|Fn[t.charCodeAt(a+3)],s[i++]=e>>16&255,s[i++]=e>>8&255,s[i++]=e&255;return r===2&&(e=Fn[t.charCodeAt(a)]<<2|Fn[t.charCodeAt(a+1)]>>4,s[i++]=e&255),r===1&&(e=Fn[t.charCodeAt(a)]<<10|Fn[t.charCodeAt(a+1)]<<4|Fn[t.charCodeAt(a+2)]>>2,s[i++]=e>>8&255,s[i++]=e&255),s}function mP(t){return Zr[t>>18&63]+Zr[t>>12&63]+Zr[t>>6&63]+Zr[t&63]}function pP(t,e,A){for(var n,r=[],s=e;s<A;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),r.push(mP(n));return r.join("")}function gP(t){for(var e,A=t.length,n=A%3,r=[],s=16383,i=0,o=A-n;i<o;i+=s)r.push(pP(t,i,i+s>o?o:i+s));return n===1?(e=t[A-1],r.push(Zr[e>>2]+Zr[e<<4&63]+"==")):n===2&&(e=(t[A-2]<<8)+t[A-1],r.push(Zr[e>>10]+Zr[e>>4&63]+Zr[e<<2&63]+"=")),r.join("")}var nm={};nm.read=function(t,e,A,n,r){var s,i,o=r*8-n-1,a=(1<<o)-1,c=a>>1,l=-7,u=A?r-1:0,f=A?-1:1,h=t[e+u];for(u+=f,s=h&(1<<-l)-1,h>>=-l,l+=o;l>0;s=s*256+t[e+u],u+=f,l-=8);for(i=s&(1<<-l)-1,s>>=-l,l+=n;l>0;i=i*256+t[e+u],u+=f,l-=8);if(s===0)s=1-c;else{if(s===a)return i?NaN:(h?-1:1)*(1/0);i=i+Math.pow(2,n),s=s-c}return(h?-1:1)*i*Math.pow(2,s-n)},nm.write=function(t,e,A,n,r,s){var i,o,a,c=s*8-r-1,l=(1<<c)-1,u=l>>1,f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,i=l):(i=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-i))<1&&(i--,a*=2),i+u>=1?e+=f/a:e+=f*Math.pow(2,1-u),e*a>=2&&(i++,a/=2),i+u>=l?(o=0,i=l):i+u>=1?(o=(e*a-1)*Math.pow(2,r),i=i+u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),i=0));r>=8;t[A+h]=o&255,h+=d,o/=256,r-=8);for(i=i<<r|o,c+=r;c>0;t[A+h]=i&255,h+=d,i/=256,c-=8);t[A+h-d]|=m*128};(function(t){const e=su,A=nm,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r;const{Uint8Array:s,ArrayBuffer:i,SharedArrayBuffer:o}=globalThis;l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const z=new s(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,s.prototype),Object.setPrototypeOf(z,T),z.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function c(z){if(z>r)throw new RangeError('The value "'+z+'" is invalid for option "size"');const T=new s(z);return Object.setPrototypeOf(T,l.prototype),T}function l(z,T,S){if(typeof z=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(z)}return u(z,T,S)}l.poolSize=8192;function u(z,T,S){if(typeof z=="string")return m(z,T);if(i.isView(z))return w(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(Be(z,i)||z&&Be(z.buffer,i)||typeof o<"u"&&(Be(z,o)||z&&Be(z.buffer,o)))return b(z,T,S);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=z.valueOf&&z.valueOf();if(L!=null&&L!==z)return l.from(L,T,S);const ne=g(z);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return l.from(z[Symbol.toPrimitive]("string"),T,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}l.from=function(z,T,S){return u(z,T,S)},Object.setPrototypeOf(l.prototype,s.prototype),Object.setPrototypeOf(l,s);function f(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function h(z,T,S){return f(z),z<=0?c(z):T!==void 0?typeof S=="string"?c(z).fill(T,S):c(z).fill(T):c(z)}l.alloc=function(z,T,S){return h(z,T,S)};function d(z){return f(z),c(z<0?0:x(z)|0)}l.allocUnsafe=function(z){return d(z)},l.allocUnsafeSlow=function(z){return d(z)};function m(z,T){if((typeof T!="string"||T==="")&&(T="utf8"),!l.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const S=G(z,T)|0;let L=c(S);const ne=L.write(z,T);return ne!==S&&(L=L.slice(0,ne)),L}function p(z){const T=z.length<0?0:x(z.length)|0,S=c(T);for(let L=0;L<T;L+=1)S[L]=z[L]&255;return S}function w(z){if(Be(z,s)){const T=new s(z);return b(T.buffer,T.byteOffset,T.byteLength)}return p(z)}function b(z,T,S){if(T<0||z.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<T+(S||0))throw new RangeError('"length" is outside of buffer bounds');let L;return T===void 0&&S===void 0?L=new s(z):S===void 0?L=new s(z,T):L=new s(z,T,S),Object.setPrototypeOf(L,l.prototype),L}function g(z){if(l.isBuffer(z)){const T=x(z.length)|0,S=c(T);return S.length===0||z.copy(S,0,0,T),S}if(z.length!==void 0)return typeof z.length!="number"||Ue(z.length)?c(0):p(z);if(z.type==="Buffer"&&Array.isArray(z.data))return p(z.data)}function x(z){if(z>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return z|0}function _(z){return+z!=z&&(z=0),l.alloc(+z)}l.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==l.prototype},l.compare=function(T,S){if(Be(T,s)&&(T=l.from(T,T.offset,T.byteLength)),Be(S,s)&&(S=l.from(S,S.offset,S.byteLength)),!l.isBuffer(T)||!l.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===S)return 0;let L=T.length,ne=S.length;for(let ue=0,F=Math.min(L,ne);ue<F;++ue)if(T[ue]!==S[ue]){L=T[ue],ne=S[ue];break}return L<ne?-1:ne<L?1:0},l.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(T,S){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return l.alloc(0);let L;if(S===void 0)for(S=0,L=0;L<T.length;++L)S+=T[L].length;const ne=l.allocUnsafe(S);let ue=0;for(L=0;L<T.length;++L){let F=T[L];if(Be(F,s))ue+F.length>ne.length?(l.isBuffer(F)||(F=l.from(F)),F.copy(ne,ue)):s.prototype.set.call(ne,F,ue);else if(l.isBuffer(F))F.copy(ne,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=F.length}return ne};function G(z,T){if(l.isBuffer(z))return z.length;if(i.isView(z)||Be(z,i))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const S=z.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&S===0)return 0;let ne=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return de(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return Me(z).length;default:if(ne)return L?-1:de(z).length;T=(""+T).toLowerCase(),ne=!0}}l.byteLength=G;function y(z,T,S){let L=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,T>>>=0,S<=T))return"";for(z||(z="utf8");;)switch(z){case"hex":return j(this,T,S);case"utf8":case"utf-8":return I(this,T,S);case"ascii":return q(this,T,S);case"latin1":case"binary":return C(this,T,S);case"base64":return R(this,T,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,T,S);default:if(L)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),L=!0}}l.prototype._isBuffer=!0;function v(z,T,S){const L=z[T];z[T]=z[S],z[S]=L}l.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<T;S+=2)v(this,S,S+1);return this},l.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<T;S+=4)v(this,S,S+3),v(this,S+1,S+2);return this},l.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<T;S+=8)v(this,S,S+7),v(this,S+1,S+6),v(this,S+2,S+5),v(this,S+3,S+4);return this},l.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?I(this,0,T):y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(T){if(!l.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:l.compare(this,T)===0},l.prototype.inspect=function(){let T="";const S=t.INSPECT_MAX_BYTES;return T=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(T+=" ... "),"<Buffer "+T+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(T,S,L,ne,ue){if(Be(T,s)&&(T=l.from(T,T.offset,T.byteLength)),!l.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(S===void 0&&(S=0),L===void 0&&(L=T?T.length:0),ne===void 0&&(ne=0),ue===void 0&&(ue=this.length),S<0||L>T.length||ne<0||ue>this.length)throw new RangeError("out of range index");if(ne>=ue&&S>=L)return 0;if(ne>=ue)return-1;if(S>=L)return 1;if(S>>>=0,L>>>=0,ne>>>=0,ue>>>=0,this===T)return 0;let F=ue-ne,se=L-S;const Ve=Math.min(F,se),We=this.slice(ne,ue),Ke=T.slice(S,L);for(let Re=0;Re<Ve;++Re)if(We[Re]!==Ke[Re]){F=We[Re],se=Ke[Re];break}return F<se?-1:se<F?1:0};function O(z,T,S,L,ne){if(z.length===0)return-1;if(typeof S=="string"?(L=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,Ue(S)&&(S=ne?0:z.length-1),S<0&&(S=z.length+S),S>=z.length){if(ne)return-1;S=z.length-1}else if(S<0)if(ne)S=0;else return-1;if(typeof T=="string"&&(T=l.from(T,L)),l.isBuffer(T))return T.length===0?-1:B(z,T,S,L,ne);if(typeof T=="number")return T=T&255,typeof s.prototype.indexOf=="function"?ne?s.prototype.indexOf.call(z,T,S):s.prototype.lastIndexOf.call(z,T,S):B(z,[T],S,L,ne);throw new TypeError("val must be string, number or Buffer")}function B(z,T,S,L,ne){let ue=1,F=z.length,se=T.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(z.length<2||T.length<2)return-1;ue=2,F/=2,se/=2,S/=2}function Ve(Ke,Re){return ue===1?Ke[Re]:Ke.readUInt16BE(Re*ue)}let We;if(ne){let Ke=-1;for(We=S;We<F;We++)if(Ve(z,We)===Ve(T,Ke===-1?0:We-Ke)){if(Ke===-1&&(Ke=We),We-Ke+1===se)return Ke*ue}else Ke!==-1&&(We-=We-Ke),Ke=-1}else for(S+se>F&&(S=F-se),We=S;We>=0;We--){let Ke=!0;for(let Re=0;Re<se;Re++)if(Ve(z,We+Re)!==Ve(T,Re)){Ke=!1;break}if(Ke)return We}return-1}l.prototype.includes=function(T,S,L){return this.indexOf(T,S,L)!==-1},l.prototype.indexOf=function(T,S,L){return O(this,T,S,L,!0)},l.prototype.lastIndexOf=function(T,S,L){return O(this,T,S,L,!1)};function Y(z,T,S,L){S=Number(S)||0;const ne=z.length-S;L?(L=Number(L),L>ne&&(L=ne)):L=ne;const ue=T.length;L>ue/2&&(L=ue/2);let F;for(F=0;F<L;++F){const se=parseInt(T.substr(F*2,2),16);if(Ue(se))return F;z[S+F]=se}return F}function D(z,T,S,L){return Se(de(T,z.length-S),z,S,L)}function N(z,T,S,L){return Se(pe(T),z,S,L)}function M(z,T,S,L){return Se(Me(T),z,S,L)}function Z(z,T,S,L){return Se(oe(T,z.length-S),z,S,L)}l.prototype.write=function(T,S,L,ne){if(S===void 0)ne="utf8",L=this.length,S=0;else if(L===void 0&&typeof S=="string")ne=S,L=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(L)?(L=L>>>0,ne===void 0&&(ne="utf8")):(ne=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-S;if((L===void 0||L>ue)&&(L=ue),T.length>0&&(L<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");let F=!1;for(;;)switch(ne){case"hex":return Y(this,T,S,L);case"utf8":case"utf-8":return D(this,T,S,L);case"ascii":case"latin1":case"binary":return N(this,T,S,L);case"base64":return M(this,T,S,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,T,S,L);default:if(F)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),F=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(z,T,S){return T===0&&S===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(T,S))}function I(z,T,S){S=Math.min(z.length,S);const L=[];let ne=T;for(;ne<S;){const ue=z[ne];let F=null,se=ue>239?4:ue>223?3:ue>191?2:1;if(ne+se<=S){let Ve,We,Ke,Re;switch(se){case 1:ue<128&&(F=ue);break;case 2:Ve=z[ne+1],(Ve&192)===128&&(Re=(ue&31)<<6|Ve&63,Re>127&&(F=Re));break;case 3:Ve=z[ne+1],We=z[ne+2],(Ve&192)===128&&(We&192)===128&&(Re=(ue&15)<<12|(Ve&63)<<6|We&63,Re>2047&&(Re<55296||Re>57343)&&(F=Re));break;case 4:Ve=z[ne+1],We=z[ne+2],Ke=z[ne+3],(Ve&192)===128&&(We&192)===128&&(Ke&192)===128&&(Re=(ue&15)<<18|(Ve&63)<<12|(We&63)<<6|Ke&63,Re>65535&&Re<1114112&&(F=Re))}}F===null?(F=65533,se=1):F>65535&&(F-=65536,L.push(F>>>10&1023|55296),F=56320|F&1023),L.push(F),ne+=se}return V(L)}const $=4096;function V(z){const T=z.length;if(T<=$)return String.fromCharCode.apply(String,z);let S="",L=0;for(;L<T;)S+=String.fromCharCode.apply(String,z.slice(L,L+=$));return S}function q(z,T,S){let L="";S=Math.min(z.length,S);for(let ne=T;ne<S;++ne)L+=String.fromCharCode(z[ne]&127);return L}function C(z,T,S){let L="";S=Math.min(z.length,S);for(let ne=T;ne<S;++ne)L+=String.fromCharCode(z[ne]);return L}function j(z,T,S){const L=z.length;(!T||T<0)&&(T=0),(!S||S<0||S>L)&&(S=L);let ne="";for(let ue=T;ue<S;++ue)ne+=vt[z[ue]];return ne}function te(z,T,S){const L=z.slice(T,S);let ne="";for(let ue=0;ue<L.length-1;ue+=2)ne+=String.fromCharCode(L[ue]+L[ue+1]*256);return ne}l.prototype.slice=function(T,S){const L=this.length;T=~~T,S=S===void 0?L:~~S,T<0?(T+=L,T<0&&(T=0)):T>L&&(T=L),S<0?(S+=L,S<0&&(S=0)):S>L&&(S=L),S<T&&(S=T);const ne=this.subarray(T,S);return Object.setPrototypeOf(ne,l.prototype),ne};function W(z,T,S){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+T>S)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(T,S,L){T=T>>>0,S=S>>>0,L||W(T,S,this.length);let ne=this[T],ue=1,F=0;for(;++F<S&&(ue*=256);)ne+=this[T+F]*ue;return ne},l.prototype.readUintBE=l.prototype.readUIntBE=function(T,S,L){T=T>>>0,S=S>>>0,L||W(T,S,this.length);let ne=this[T+--S],ue=1;for(;S>0&&(ue*=256);)ne+=this[T+--S]*ue;return ne},l.prototype.readUint8=l.prototype.readUInt8=function(T,S){return T=T>>>0,S||W(T,1,this.length),this[T]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(T,S){return T=T>>>0,S||W(T,2,this.length),this[T]|this[T+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(T,S){return T=T>>>0,S||W(T,2,this.length),this[T]<<8|this[T+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(T,S){return T=T>>>0,S||W(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(T,S){return T=T>>>0,S||W(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},l.prototype.readBigUInt64LE=tt(function(T){T=T>>>0,ee(T,"offset");const S=this[T],L=this[T+7];(S===void 0||L===void 0)&&U(T,this.length-8);const ne=S+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,ue=this[++T]+this[++T]*2**8+this[++T]*2**16+L*2**24;return BigInt(ne)+(BigInt(ue)<<BigInt(32))}),l.prototype.readBigUInt64BE=tt(function(T){T=T>>>0,ee(T,"offset");const S=this[T],L=this[T+7];(S===void 0||L===void 0)&&U(T,this.length-8);const ne=S*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],ue=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+L;return(BigInt(ne)<<BigInt(32))+BigInt(ue)}),l.prototype.readIntLE=function(T,S,L){T=T>>>0,S=S>>>0,L||W(T,S,this.length);let ne=this[T],ue=1,F=0;for(;++F<S&&(ue*=256);)ne+=this[T+F]*ue;return ue*=128,ne>=ue&&(ne-=Math.pow(2,8*S)),ne},l.prototype.readIntBE=function(T,S,L){T=T>>>0,S=S>>>0,L||W(T,S,this.length);let ne=S,ue=1,F=this[T+--ne];for(;ne>0&&(ue*=256);)F+=this[T+--ne]*ue;return ue*=128,F>=ue&&(F-=Math.pow(2,8*S)),F},l.prototype.readInt8=function(T,S){return T=T>>>0,S||W(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},l.prototype.readInt16LE=function(T,S){T=T>>>0,S||W(T,2,this.length);const L=this[T]|this[T+1]<<8;return L&32768?L|4294901760:L},l.prototype.readInt16BE=function(T,S){T=T>>>0,S||W(T,2,this.length);const L=this[T+1]|this[T]<<8;return L&32768?L|4294901760:L},l.prototype.readInt32LE=function(T,S){return T=T>>>0,S||W(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},l.prototype.readInt32BE=function(T,S){return T=T>>>0,S||W(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},l.prototype.readBigInt64LE=tt(function(T){T=T>>>0,ee(T,"offset");const S=this[T],L=this[T+7];(S===void 0||L===void 0)&&U(T,this.length-8);const ne=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(L<<24);return(BigInt(ne)<<BigInt(32))+BigInt(S+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),l.prototype.readBigInt64BE=tt(function(T){T=T>>>0,ee(T,"offset");const S=this[T],L=this[T+7];(S===void 0||L===void 0)&&U(T,this.length-8);const ne=(S<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(ne)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+L)}),l.prototype.readFloatLE=function(T,S){return T=T>>>0,S||W(T,4,this.length),A.read(this,T,!0,23,4)},l.prototype.readFloatBE=function(T,S){return T=T>>>0,S||W(T,4,this.length),A.read(this,T,!1,23,4)},l.prototype.readDoubleLE=function(T,S){return T=T>>>0,S||W(T,8,this.length),A.read(this,T,!0,52,8)},l.prototype.readDoubleBE=function(T,S){return T=T>>>0,S||W(T,8,this.length),A.read(this,T,!1,52,8)};function J(z,T,S,L,ne,ue){if(!l.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>ne||T<ue)throw new RangeError('"value" argument is out of bounds');if(S+L>z.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(T,S,L,ne){if(T=+T,S=S>>>0,L=L>>>0,!ne){const se=Math.pow(2,8*L)-1;J(this,T,S,L,se,0)}let ue=1,F=0;for(this[S]=T&255;++F<L&&(ue*=256);)this[S+F]=T/ue&255;return S+L},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(T,S,L,ne){if(T=+T,S=S>>>0,L=L>>>0,!ne){const se=Math.pow(2,8*L)-1;J(this,T,S,L,se,0)}let ue=L-1,F=1;for(this[S+ue]=T&255;--ue>=0&&(F*=256);)this[S+ue]=T/F&255;return S+L},l.prototype.writeUint8=l.prototype.writeUInt8=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,1,255,0),this[S]=T&255,S+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,2,65535,0),this[S]=T&255,this[S+1]=T>>>8,S+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,2,65535,0),this[S]=T>>>8,this[S+1]=T&255,S+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,4,4294967295,0),this[S+3]=T>>>24,this[S+2]=T>>>16,this[S+1]=T>>>8,this[S]=T&255,S+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,4,4294967295,0),this[S]=T>>>24,this[S+1]=T>>>16,this[S+2]=T>>>8,this[S+3]=T&255,S+4};function fe(z,T,S,L,ne){X(T,L,ne,z,S,7);let ue=Number(T&BigInt(4294967295));z[S++]=ue,ue=ue>>8,z[S++]=ue,ue=ue>>8,z[S++]=ue,ue=ue>>8,z[S++]=ue;let F=Number(T>>BigInt(32)&BigInt(4294967295));return z[S++]=F,F=F>>8,z[S++]=F,F=F>>8,z[S++]=F,F=F>>8,z[S++]=F,S}function be(z,T,S,L,ne){X(T,L,ne,z,S,7);let ue=Number(T&BigInt(4294967295));z[S+7]=ue,ue=ue>>8,z[S+6]=ue,ue=ue>>8,z[S+5]=ue,ue=ue>>8,z[S+4]=ue;let F=Number(T>>BigInt(32)&BigInt(4294967295));return z[S+3]=F,F=F>>8,z[S+2]=F,F=F>>8,z[S+1]=F,F=F>>8,z[S]=F,S+8}l.prototype.writeBigUInt64LE=tt(function(T,S=0){return fe(this,T,S,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=tt(function(T,S=0){return be(this,T,S,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(T,S,L,ne){if(T=+T,S=S>>>0,!ne){const Ve=Math.pow(2,8*L-1);J(this,T,S,L,Ve-1,-Ve)}let ue=0,F=1,se=0;for(this[S]=T&255;++ue<L&&(F*=256);)T<0&&se===0&&this[S+ue-1]!==0&&(se=1),this[S+ue]=(T/F>>0)-se&255;return S+L},l.prototype.writeIntBE=function(T,S,L,ne){if(T=+T,S=S>>>0,!ne){const Ve=Math.pow(2,8*L-1);J(this,T,S,L,Ve-1,-Ve)}let ue=L-1,F=1,se=0;for(this[S+ue]=T&255;--ue>=0&&(F*=256);)T<0&&se===0&&this[S+ue+1]!==0&&(se=1),this[S+ue]=(T/F>>0)-se&255;return S+L},l.prototype.writeInt8=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,1,127,-128),T<0&&(T=255+T+1),this[S]=T&255,S+1},l.prototype.writeInt16LE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,2,32767,-32768),this[S]=T&255,this[S+1]=T>>>8,S+2},l.prototype.writeInt16BE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,2,32767,-32768),this[S]=T>>>8,this[S+1]=T&255,S+2},l.prototype.writeInt32LE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,4,2147483647,-2147483648),this[S]=T&255,this[S+1]=T>>>8,this[S+2]=T>>>16,this[S+3]=T>>>24,S+4},l.prototype.writeInt32BE=function(T,S,L){return T=+T,S=S>>>0,L||J(this,T,S,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[S]=T>>>24,this[S+1]=T>>>16,this[S+2]=T>>>8,this[S+3]=T&255,S+4},l.prototype.writeBigInt64LE=tt(function(T,S=0){return fe(this,T,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=tt(function(T,S=0){return be(this,T,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(z,T,S,L,ne,ue){if(S+L>z.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function _e(z,T,S,L,ne){return T=+T,S=S>>>0,ne||me(z,T,S,4),A.write(z,T,S,L,23,4),S+4}l.prototype.writeFloatLE=function(T,S,L){return _e(this,T,S,!0,L)},l.prototype.writeFloatBE=function(T,S,L){return _e(this,T,S,!1,L)};function ke(z,T,S,L,ne){return T=+T,S=S>>>0,ne||me(z,T,S,8),A.write(z,T,S,L,52,8),S+8}l.prototype.writeDoubleLE=function(T,S,L){return ke(this,T,S,!0,L)},l.prototype.writeDoubleBE=function(T,S,L){return ke(this,T,S,!1,L)},l.prototype.copy=function(T,S,L,ne){if(!l.isBuffer(T))throw new TypeError("argument should be a Buffer");if(L||(L=0),!ne&&ne!==0&&(ne=this.length),S>=T.length&&(S=T.length),S||(S=0),ne>0&&ne<L&&(ne=L),ne===L||T.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),T.length-S<ne-L&&(ne=T.length-S+L);const ue=ne-L;return this===T&&typeof s.prototype.copyWithin=="function"?this.copyWithin(S,L,ne):s.prototype.set.call(T,this.subarray(L,ne),S),ue},l.prototype.fill=function(T,S,L,ne){if(typeof T=="string"){if(typeof S=="string"?(ne=S,S=0,L=this.length):typeof L=="string"&&(ne=L,L=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!l.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(T.length===1){const F=T.charCodeAt(0);(ne==="utf8"&&F<128||ne==="latin1")&&(T=F)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(S<0||this.length<S||this.length<L)throw new RangeError("Out of range index");if(L<=S)return this;S=S>>>0,L=L===void 0?this.length:L>>>0,T||(T=0);let ue;if(typeof T=="number")for(ue=S;ue<L;++ue)this[ue]=T;else{const F=l.isBuffer(T)?T:l.from(T,ne),se=F.length;if(se===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(ue=0;ue<L-S;++ue)this[ue+S]=F[ue%se]}return this};const Oe={};function Ze(z,T,S){Oe[z]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ne,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(z,T){return`The "${z}" argument must be of type number. Received type ${typeof T}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(z,T,S){let L=`The value of "${z}" is out of range.`,ne=S;return Number.isInteger(S)&&Math.abs(S)>2**32?ne=Fe(String(S)):typeof S=="bigint"&&(ne=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(ne=Fe(ne)),ne+="n"),L+=` It must be ${T}. Received ${ne}`,L},RangeError);function Fe(z){let T="",S=z.length;const L=z[0]==="-"?1:0;for(;S>=L+4;S-=3)T=`_${z.slice(S-3,S)}${T}`;return`${z.slice(0,S)}${T}`}function P(z,T,S){ee(T,"offset"),(z[T]===void 0||z[T+S]===void 0)&&U(T,z.length-(S+1))}function X(z,T,S,L,ne,ue){if(z>S||z<T){const F=typeof T=="bigint"?"n":"";let se;throw T===0||T===BigInt(0)?se=`>= 0${F} and < 2${F} ** ${(ue+1)*8}${F}`:se=`>= -(2${F} ** ${(ue+1)*8-1}${F}) and < 2 ** ${(ue+1)*8-1}${F}`,new Oe.ERR_OUT_OF_RANGE("value",se,z)}P(L,ne,ue)}function ee(z,T){if(typeof z!="number")throw new Oe.ERR_INVALID_ARG_TYPE(T,"number",z)}function U(z,T,S){throw Math.floor(z)!==z?(ee(z,S),new Oe.ERR_OUT_OF_RANGE("offset","an integer",z)):T<0?new Oe.ERR_BUFFER_OUT_OF_BOUNDS:new Oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,z)}const H=/[^+/0-9A-Za-z-_]/g;function Q(z){if(z=z.split("=")[0],z=z.trim().replace(H,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function de(z,T){T=T||1/0;let S;const L=z.length;let ne=null;const ue=[];for(let F=0;F<L;++F){if(S=z.charCodeAt(F),S>55295&&S<57344){if(!ne){if(S>56319){(T-=3)>-1&&ue.push(239,191,189);continue}else if(F+1===L){(T-=3)>-1&&ue.push(239,191,189);continue}ne=S;continue}if(S<56320){(T-=3)>-1&&ue.push(239,191,189),ne=S;continue}S=(ne-55296<<10|S-56320)+65536}else ne&&(T-=3)>-1&&ue.push(239,191,189);if(ne=null,S<128){if((T-=1)<0)break;ue.push(S)}else if(S<2048){if((T-=2)<0)break;ue.push(S>>6|192,S&63|128)}else if(S<65536){if((T-=3)<0)break;ue.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((T-=4)<0)break;ue.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return ue}function pe(z){const T=[];for(let S=0;S<z.length;++S)T.push(z.charCodeAt(S)&255);return T}function oe(z,T){let S,L,ne;const ue=[];for(let F=0;F<z.length&&!((T-=2)<0);++F)S=z.charCodeAt(F),L=S>>8,ne=S%256,ue.push(ne),ue.push(L);return ue}function Me(z){return e.toByteArray(Q(z))}function Se(z,T,S,L){let ne;for(ne=0;ne<L&&!(ne+S>=T.length||ne>=z.length);++ne)T[ne+S]=z[ne];return ne}function Be(z,T){return z instanceof T||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===T.name}function Ue(z){return z!==z}const vt=(function(){const z="0123456789abcdef",T=new Array(256);for(let S=0;S<16;++S){const L=S*16;for(let ne=0;ne<16;++ne)T[L+ne]=z[S]+z[ne]}return T})();function tt(z){return typeof BigInt>"u"?DA:z}function DA(){throw new Error("BigInt not supported")}})(yx);const Tt=yx.Buffer;var Sa={},Ca={},Mx;function wP(){if(Mx)return Ca;Mx=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.Slice=void 0;let t=class{constructor(A,n,r,s){this.uint8=A,this.view=n,this.start=r,this.end=s}subarray(){return this.uint8.subarray(this.start,this.end)}};return Ca.Slice=t,Ca}var vx;function rm(){if(vx)return Sa;vx=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.Writer=void 0;const t=wP(),e=new Uint8Array([]),A=new DataView(e.buffer),n=typeof Tt=="function",r=n?Tt.prototype.utf8Write:null,s=n?Tt.from:null,i=typeof TextEncoder<"u"?new TextEncoder:null;let o=class{constructor(c=64*1024){this.allocSize=c,this.view=A,this.x0=0,this.x=0,this.uint8=new Uint8Array(c),this.size=c,this.view=new DataView(this.uint8.buffer)}grow(c){const l=this.x0,u=this.x,f=this.uint8,h=new Uint8Array(c),d=new DataView(h.buffer),m=f.subarray(l,u);h.set(m,0),this.x=u-l,this.x0=0,this.uint8=h,this.size=c,this.view=d}ensureCapacity(c){const l=this.size,u=l-this.x;if(u<c){const f=l-this.x0,h=c-u,d=f+h;this.grow(d<=this.allocSize?this.allocSize:d*2)}}move(c){this.ensureCapacity(c),this.x+=c}reset(){this.x0=this.x}newBuffer(c){const l=this.uint8=new Uint8Array(c);this.size=c,this.view=new DataView(l.buffer),this.x=this.x0=0}flush(){const c=this.uint8.subarray(this.x0,this.x);return this.x0=this.x,c}flushSlice(){const c=new t.Slice(this.uint8,this.view,this.x0,this.x);return this.x0=this.x,c}u8(c){this.ensureCapacity(1),this.uint8[this.x++]=c}u16(c){this.ensureCapacity(2),this.view.setUint16(this.x,c),this.x+=2}u32(c){this.ensureCapacity(4),this.view.setUint32(this.x,c),this.x+=4}i32(c){this.ensureCapacity(4),this.view.setInt32(this.x,c),this.x+=4}u64(c){this.ensureCapacity(8),this.view.setBigUint64(this.x,BigInt(c)),this.x+=8}f64(c){this.ensureCapacity(8),this.view.setFloat64(this.x,c),this.x+=8}u8u16(c,l){this.ensureCapacity(3);let u=this.x;this.uint8[u++]=c,this.uint8[u++]=l>>>8,this.uint8[u++]=l&255,this.x=u}u8u32(c,l){this.ensureCapacity(5);let u=this.x;this.uint8[u++]=c,this.view.setUint32(u,l),this.x=u+4}u8u64(c,l){this.ensureCapacity(9);let u=this.x;this.uint8[u++]=c,this.view.setBigUint64(u,BigInt(l)),this.x=u+8}u8f32(c,l){this.ensureCapacity(5);let u=this.x;this.uint8[u++]=c,this.view.setFloat32(u,l),this.x=u+4}u8f64(c,l){this.ensureCapacity(9);let u=this.x;this.uint8[u++]=c,this.view.setFloat64(u,l),this.x=u+8}buf(c,l){this.ensureCapacity(l);const u=this.x;this.uint8.set(c,u),this.x=u+l}utf8(c){const l=c.length*4;if(l<168)return this.utf8Native(c);this.ensureCapacity(l);const u=this.size-this.x;if(r){const f=r.call(this.uint8,c,this.x,u);return this.x+=f,f}else if(s){const f=this.uint8,h=f.byteOffset+this.x,m=s(f.buffer).subarray(h,h+u).write(c,0,u,"utf8");return this.x+=m,m}else if(l>1024&&i){const f=i.encodeInto(c,this.uint8.subarray(this.x,this.x+u)).written;return this.x+=f,f}return this.utf8Native(c)}utf8Native(c){const l=c.length,u=this.uint8;let f=this.x,h=0;for(;h<l;){let m=c.charCodeAt(h++);if((m&4294967168)===0){u[f++]=m;continue}else if((m&4294965248)===0)u[f++]=m>>6&31|192;else{if(m>=55296&&m<=56319&&h<l){const p=c.charCodeAt(h);(p&64512)===56320&&(h++,m=((m&1023)<<10)+(p&1023)+65536)}(m&4294901760)===0?(u[f++]=m>>12&15|224,u[f++]=m>>6&63|128):(u[f++]=m>>18&7|240,u[f++]=m>>12&63|128,u[f++]=m>>6&63|128)}u[f++]=m&63|128}const d=f-this.x;return this.x=f,d}ascii(c){const l=c.length;this.ensureCapacity(l);const u=this.uint8;let f=this.x,h=0;for(;h<l;)u[f++]=c.charCodeAt(h++);this.x=f}};return Sa.Writer=o,Sa}var Dx;function bP(){if(Dx)return Ya;Dx=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.MsgPackEncoderFast=void 0;const t=rm();let e=class{constructor(n=new t.Writer){this.writer=n}encode(n){return this.writer.reset(),this.writeAny(n),this.writer.flush()}encodeAny(n){this.writeAny(n)}writeAny(n){switch(n){case null:return this.writer.u8(192);case!1:return this.writer.u8(194);case!0:return this.writer.u8(195)}if(n instanceof Array)return this.writeArr(n);switch(typeof n){case"number":return this.writeNumber(n);case"string":return this.writeStr(n);case"object":return this.writeObj(n)}}encodeFloat64(n){this.writeFloat(n)}writeNull(){return this.writer.u8(192)}writeFloat(n){this.writer.u8f64(203,n)}u32(n){const r=this.writer;this.writer.ensureCapacity(5);const s=r.uint8;n<=127?s[r.x++]=n:n<=65535?(s[r.x++]=205,r.view.setUint16(r.x,n),r.x+=2):n<=4294967295?(s[r.x++]=206,r.view.setUint32(r.x,n),r.x+=4):this.writeFloat(n)}n32(n){const r=this.writer;this.writer.ensureCapacity(5);const s=r.uint8;n>=-32?s[r.x++]=256+n:n>=-32768?(s[r.x++]=209,r.view.setInt16(r.x,n),r.x+=2):n>=-2147483648?(s[r.x++]=210,r.view.setInt32(r.x,n),r.x+=4):this.writeFloat(n)}encodeNumber(n){this.writeNumber(n)}writeNumber(n){if(n>>>0===n)return this.u32(n);if(n>>0===n)return this.n32(n);this.writeFloat(n)}writeInteger(n){if(n>=0){if(n<=4294967295)return this.u32(n);if(n>-2147483648)return this.n32(n)}this.writeFloat(n)}writeUInteger(n){if(n<=4294967295)return this.u32(n);this.writeFloat(n)}encodeNull(){this.writer.u8(192)}encodeTrue(){this.writer.u8(195)}encodeFalse(){this.writer.u8(194)}encodeBoolean(n){this.writeBoolean(n)}writeBoolean(n){n?this.writer.u8(195):this.writer.u8(194)}encodeStringHeader(n){this.writeStrHdr(n)}writeStrHdr(n){n<=31?this.writer.u8(160|n):n<=255?this.writer.u16(55552+n):n<=65535?this.writer.u8u16(218,n):this.writer.u8u32(219,n)}encodeString(n){this.writeStr(n)}writeStr(n){const r=this.writer,i=n.length*4;r.ensureCapacity(5+i);const o=r.uint8;let a=r.x;i<=31?r.x++:i<=255?(o[r.x++]=217,a=r.x,r.x++):i<=65535?(o[r.x++]=218,a=r.x,r.x+=2):(o[r.x++]=219,a=r.x,r.x+=4);const c=this.writer.utf8(n);i<=31?o[a]=160|c:i<=255?o[a]=c:i<=65535?r.view.setUint16(a,c):r.view.setUint32(a,c)}encodeAsciiString(n){this.writeAsciiStr(n)}writeAsciiStr(n){this.writeStrHdr(n.length),this.writer.ascii(n)}encodeArrayHeader(n){this.writeArrHdr(n)}encodeArray(n){this.writeArr(n)}writeArrHdr(n){n<=15?this.writer.u8(144|n):n<=65535?this.writer.u8u16(220,n):n<=4294967295&&this.writer.u8u32(221,n)}writeArr(n){const r=n.length;r<=15?this.writer.u8(144|r):r<=65535?this.writer.u8u16(220,r):r<=4294967295&&this.writer.u8u32(221,r);for(let s=0;s<r;s++)this.writeAny(n[s])}encodeObjectHeader(n){this.writeObjHdr(n)}encodeObject(n){this.writeObj(n)}writeObjHdr(n){n<=15?this.writer.u8(128|n):n<=65535?this.writer.u8u16(222,n):n<=4294967295&&this.writer.u8u32(223,n)}writeObj(n){const r=Object.keys(n),s=r.length;this.writeObjHdr(s);for(let i=0;i<s;i++){const o=r[i];this.writeStr(o),this.writeAny(n[o])}}encodeExtHeader(n,r){switch(r){case 1:this.writer.u16(54272|n);break;case 2:this.writer.u16(54528|n);break;case 4:this.writer.u16(54784|n);break;case 8:this.writer.u16(55040|n);break;case 16:this.writer.u16(55296|n);break;default:r<=255?(this.writer.u16(50944|r),this.writer.u8(n)):r<=65535?(this.writer.u8u16(200,r),this.writer.u8(n)):r<=4294967295&&(this.writer.u8u32(201,r),this.writer.u8(n))}}encodeExt(n){const{tag:r,val:s}=n,i=s.length;this.encodeExtHeader(r,i),this.writer.buf(s,i)}encodeBinaryHeader(n){this.writeBinHdr(n)}encodeBinary(n){this.writeBin(n)}writeBinHdr(n){n<=255?this.writer.u16(50176|n):n<=65535?this.writer.u8u16(197,n):n<=4294967295&&this.writer.u8u32(198,n)}writeBin(n){const r=n.length;this.writeBinHdr(r),this.writer.buf(n,r)}};return Ya.MsgPackEncoderFast=e,Ya}var _P=bP(),ge;(function(t){t[t.add=0]="add",t[t.remove=1]="remove",t[t.replace=2]="replace",t[t.copy=3]="copy",t[t.move=4]="move",t[t.test=5]="test",t[t.str_ins=6]="str_ins",t[t.str_del=7]="str_del",t[t.flip=8]="flip",t[t.inc=9]="inc",t[t.split=10]="split",t[t.merge=11]="merge",t[t.extend=12]="extend",t[t.contains=30]="contains",t[t.defined=31]="defined",t[t.ends=32]="ends",t[t.in=33]="in",t[t.less=34]="less",t[t.matches=35]="matches",t[t.more=36]="more",t[t.starts=37]="starts",t[t.undefined=38]="undefined",t[t.test_type=39]="test_type",t[t.test_string=40]="test_string",t[t.test_string_len=41]="test_string_len",t[t.type=42]="type",t[t.and=43]="and",t[t.not=44]="not",t[t.or=45]="or"})(ge||(ge={}));let xP=class extends _P.MsgPackEncoderFast{encode(e){this.writer.reset(),this.encodeArrayHeader(e.length);const A=e.length;for(let n=0;n<A;n++)this.encodeOp(e[n]);return this.writer.flush()}encodeOp(e,A){switch(e.code()){case ge.add:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.add),this.encodeArray(n.path),this.encodeAny(n.value);break}case ge.remove:{const n=e,r=n.oldValue!==void 0;this.encodeArrayHeader(r?3:2),this.writer.u8(ge.remove),this.encodeArray(n.path),r&&this.encodeAny(n.oldValue);break}case ge.replace:{const n=e,r=n.oldValue!==void 0;this.encodeArrayHeader(r?4:3),this.writer.u8(ge.replace),this.encodeArray(n.path),this.encodeAny(n.value),r&&this.encodeAny(n.oldValue);break}case ge.copy:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.copy),this.encodeArray(n.path),this.encodeArray(n.from);break}case ge.move:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.move),this.encodeArray(n.path),this.encodeArray(n.from);break}case ge.test:{const n=e;this.encodeArrayHeader(n.not?4:3),this.writer.u8(ge.test),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeAny(n.value),n.not&&this.writer.u8(1);break}case ge.str_ins:{const n=e;this.encodeArrayHeader(4),this.writer.u8(ge.str_ins),this.encodeArray(n.path),this.encodeNumber(n.pos),this.encodeString(n.str);break}case ge.str_del:{const n=e,r=typeof n.str=="string";this.encodeArrayHeader(r?4:5),this.writer.u8(ge.str_del),this.encodeArray(n.path),this.encodeNumber(n.pos),r?this.encodeString(n.str):(this.writer.u8(0),this.encodeNumber(n.len));break}case ge.flip:{const n=e;this.encodeArrayHeader(2),this.writer.u8(ge.flip),this.encodeArray(n.path);break}case ge.inc:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.inc),this.encodeArray(n.path),this.encodeNumber(n.inc);break}case ge.split:{const n=e;this.encodeArrayHeader(n.props?4:3),this.writer.u8(ge.split),this.encodeArray(n.path),this.encodeNumber(n.pos),n.props&&this.encodeObject(n.props);break}case ge.merge:{const n=e;this.encodeArrayHeader(n.props?4:3),this.writer.u8(ge.merge),this.encodeArray(n.path),this.encodeNumber(n.pos),n.props&&this.encodeAny(n.props);break}case ge.extend:{const n=e,{deleteNull:r}=n;this.encodeArrayHeader(r?4:3),this.writer.u8(ge.extend),this.encodeArray(n.path),this.encodeObject(n.props),r&&this.writer.u8(1);break}case ge.contains:{const n=e,r=n.ignore_case;this.encodeArrayHeader(r?4:3),this.writer.u8(ge.contains),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeString(n.value),r&&this.writer.u8(1);break}case ge.defined:{const n=e;this.encodeArrayHeader(2),this.writer.u8(ge.defined),this.encodeArray(A?n.path.slice(A.path.length):n.path);break}case ge.ends:{const n=e,r=n.ignore_case;this.encodeArrayHeader(r?4:3),this.writer.u8(ge.ends),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeString(n.value),r&&this.writer.u8(1);break}case ge.in:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.in),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeArray(n.value);break}case ge.less:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.less),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeNumber(n.value);break}case ge.matches:{const n=e,r=n.ignore_case;this.encodeArrayHeader(r?4:3),this.writer.u8(ge.matches),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeString(n.value),r&&this.writer.u8(1);break}case ge.more:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.more),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeNumber(n.value);break}case ge.starts:{const n=e,r=n.ignore_case;this.encodeArrayHeader(r?4:3),this.writer.u8(ge.starts),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeString(n.value),r&&this.writer.u8(1);break}case ge.test_type:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.test_type),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeArray(n.type);break}case ge.test_string:{const n=e;this.encodeArrayHeader(n.not?5:4),this.writer.u8(ge.test_string),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeNumber(n.pos),this.encodeString(n.str),n.not&&this.writer.u8(1);break}case ge.test_string_len:{const n=e;this.encodeArrayHeader(n.not?4:3),this.writer.u8(ge.test_string_len),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeNumber(n.len),n.not&&this.writer.u8(1);break}case ge.type:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.type),this.encodeArray(A?n.path.slice(A.path.length):n.path),this.encodeString(n.value);break}case ge.undefined:{const n=e;this.encodeArrayHeader(2),this.writer.u8(ge.undefined),this.encodeArray(A?n.path.slice(A.path.length):n.path);break}case ge.and:{const n=e,r=A?n.path.slice(A.path.length):n.path;this.encodeArrayHeader(3),this.writer.u8(ge.and),this.encodeArray(r);const s=n.ops.length;this.encodeArrayHeader(s);for(let i=0;i<s;i++)this.encodeOp(n.ops[i],n);break}case ge.not:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.not),this.encodeArray(A?n.path.slice(A.path.length):n.path);const r=n.ops.length;this.encodeArrayHeader(r);for(let s=0;s<r;s++)this.encodeOp(n.ops[s],n);break}case ge.or:{const n=e;this.encodeArrayHeader(3),this.writer.u8(ge.or),this.encodeArray(A?n.path.slice(A.path.length):n.path);const r=n.ops.length;this.encodeArrayHeader(r);for(let s=0;s<r;s++)this.encodeOp(n.ops[s],n);break}default:throw new Error(`Unknown operation code: ${e.code()}`)}}};class On{path;from;constructor(e){this.path=e}}var sm={},im=function(t,e){return im=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(A[r]=n[r])},im(t,e)};function Bx(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");im(t,e);function A(){this.constructor=t}t.prototype=e===null?Object.create(e):(A.prototype=e.prototype,new A)}var iu=function(){return iu=Object.assign||function(e){for(var A,n=1,r=arguments.length;n<r;n++){A=arguments[n];for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&(e[s]=A[s])}return e},iu.apply(this,arguments)};function kx(t,e){var A={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(A[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(A[n[r]]=t[n[r]]);return A}function Yn(t,e,A,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,A):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,A,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,A,s):i(e,A))||s);return r>3&&s&&Object.defineProperty(e,A,s),s}function Ex(t,e){return function(A,n){e(A,n,t)}}function Nx(t,e,A,n,r,s){function i(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=n.kind,a=o==="getter"?"get":o==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),u,f=!1,h=A.length-1;h>=0;h--){var d={};for(var m in n)d[m]=m==="access"?{}:n[m];for(var m in n.access)d.access[m]=n.access[m];d.addInitializer=function(w){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(w||null))};var p=(0,A[h])(o==="accessor"?{get:l.get,set:l.set}:l[a],d);if(o==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(u=i(p.get))&&(l.get=u),(u=i(p.set))&&(l.set=u),(u=i(p.init))&&r.unshift(u)}else(u=i(p))&&(o==="field"?r.unshift(u):l[a]=u)}c&&Object.defineProperty(c,n.name,l),f=!0}function Tx(t,e,A){for(var n=arguments.length>2,r=0;r<e.length;r++)A=n?e[r].call(t,A):e[r].call(t);return n?A:void 0}function Ox(t){return typeof t=="symbol"?t:"".concat(t)}function Yx(t,e,A){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:A?"".concat(A," ",e):e})}function Sx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function iA(t,e,A,n){function r(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(l){try{c(n.next(l))}catch(u){i(u)}}function a(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?s(l.value):r(l.value).then(o,a)}c((n=n.apply(t,e||[])).next())})}function Cx(t,e){var A={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(l){return a([c,l])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(A=0)),A;)try{if(n=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return A.label++,{value:c[1],done:!1};case 5:A.label++,r=c[1],c=[0];continue;case 7:c=A.ops.pop(),A.trys.pop();continue;default:if(s=A.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){A=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){A.label=c[1];break}if(c[0]===6&&A.label<s[1]){A.label=s[1],s=c;break}if(s&&A.label<s[2]){A.label=s[2],A.ops.push(c);break}s[2]&&A.ops.pop(),A.trys.pop();continue}c=e.call(t,A)}catch(l){c=[6,l],r=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var ou=Object.create?(function(t,e,A,n){n===void 0&&(n=A);var r=Object.getOwnPropertyDescriptor(e,A);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[A]}}),Object.defineProperty(t,n,r)}):(function(t,e,A,n){n===void 0&&(n=A),t[n]=e[A]});function Px(t,e){for(var A in t)A!=="default"&&!Object.prototype.hasOwnProperty.call(e,A)&&ou(e,t,A)}function au(t){var e=typeof Symbol=="function"&&Symbol.iterator,A=e&&t[e],n=0;if(A)return A.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function om(t,e){var A=typeof Symbol=="function"&&t[Symbol.iterator];if(!A)return t;var n=A.call(t),r,s=[],i;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(A=n.return)&&A.call(n)}finally{if(i)throw i.error}}return s}function Zx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(om(arguments[e]));return t}function Ix(){for(var t=0,e=0,A=arguments.length;e<A;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<A;e++)for(var s=arguments[e],i=0,o=s.length;i<o;i++,r++)n[r]=s[i];return n}function Rx(t,e,A){if(A||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function xo(t){return this instanceof xo?(this.v=t,this):new xo(t)}function jx(t,e,A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=A.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),r[Symbol.asyncIterator]=function(){return this},r;function i(h){return function(d){return Promise.resolve(d).then(h,u)}}function o(h,d){n[h]&&(r[h]=function(m){return new Promise(function(p,w){s.push([h,m,p,w])>1||a(h,m)})},d&&(r[h]=d(r[h])))}function a(h,d){try{c(n[h](d))}catch(m){f(s[0][3],m)}}function c(h){h.value instanceof xo?Promise.resolve(h.value.v).then(l,u):f(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function f(h,d){h(d),s.shift(),s.length&&a(s[0][0],s[0][1])}}function zx(t){var e,A;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,s){e[r]=t[r]?function(i){return(A=!A)?{value:xo(t[r](i)),done:!1}:s?s(i):i}:s}}function Hx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],A;return e?e.call(t):(t=typeof au=="function"?au(t):t[Symbol.iterator](),A={},n("next"),n("throw"),n("return"),A[Symbol.asyncIterator]=function(){return this},A);function n(s){A[s]=t[s]&&function(i){return new Promise(function(o,a){i=t[s](i),r(o,a,i.done,i.value)})}}function r(s,i,o,a){Promise.resolve(a).then(function(c){s({value:c,done:o})},i)}}function Lx(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var yP=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},am=function(t){return am=Object.getOwnPropertyNames||function(e){var A=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(A[A.length]=n);return A},am(t)};function Ux(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var A=am(t),n=0;n<A.length;n++)A[n]!=="default"&&ou(e,t,A[n]);return yP(e,t),e}function Fx(t){return t&&t.__esModule?t:{default:t}}function $x(t,e,A,n){if(A==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?n:A==="a"?n.call(t):n?n.value:e.get(t)}function Vx(t,e,A,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,A):r?r.value=A:e.set(t,A),A}function qx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Wx(t,e,A){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,r;if(A){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],A&&(r=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");r&&(n=function(){try{r.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:A})}else A&&t.stack.push({async:!0});return e}var GP=typeof SuppressedError=="function"?SuppressedError:function(t,e,A){var n=new Error(A);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Qx(t){function e(s){t.error=t.hasError?new GP(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var A,n=0;function r(){for(;A=t.stack.pop();)try{if(!A.async&&n===1)return n=0,t.stack.push(A),Promise.resolve().then(r);if(A.dispose){var s=A.dispose.call(A.value);if(A.async)return n|=2,Promise.resolve(s).then(r,function(i){return e(i),r()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return r()}function Kx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(A,n,r,s,i){return n?e?".jsx":".js":r&&(!s||!i)?A:r+s+"."+i.toLowerCase()+"js"}):t}var MP={__extends:Bx,__assign:iu,__rest:kx,__decorate:Yn,__param:Ex,__esDecorate:Nx,__runInitializers:Tx,__propKey:Ox,__setFunctionName:Yx,__metadata:Sx,__awaiter:iA,__generator:Cx,__createBinding:ou,__exportStar:Px,__values:au,__read:om,__spread:Zx,__spreadArrays:Ix,__spreadArray:Rx,__await:xo,__asyncGenerator:jx,__asyncDelegator:zx,__asyncValues:Hx,__makeTemplateObject:Lx,__importStar:Ux,__importDefault:Fx,__classPrivateFieldGet:$x,__classPrivateFieldSet:Vx,__classPrivateFieldIn:qx,__addDisposableResource:Wx,__disposeResources:Qx,__rewriteRelativeImportExtension:Kx},vP=Object.freeze({__proto__:null,__addDisposableResource:Wx,get __assign(){return iu},__asyncDelegator:zx,__asyncGenerator:jx,__asyncValues:Hx,__await:xo,__awaiter:iA,__classPrivateFieldGet:$x,__classPrivateFieldIn:qx,__classPrivateFieldSet:Vx,__createBinding:ou,__decorate:Yn,__disposeResources:Qx,__esDecorate:Nx,__exportStar:Px,__extends:Bx,__generator:Cx,__importDefault:Fx,__importStar:Ux,__makeTemplateObject:Lx,__metadata:Sx,__param:Ex,__propKey:Ox,__read:om,__rest:kx,__rewriteRelativeImportExtension:Kx,__runInitializers:Tx,__setFunctionName:Yx,__spread:Zx,__spreadArray:Rx,__spreadArrays:Ix,__values:au,default:MP}),Dt=z_(vP),cm={},Jx;function DP(){return Jx||(Jx=1,Object.defineProperty(cm,"__esModule",{value:!0})),cm}var lm={},Xx;function um(){return Xx||(Xx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isInteger=t.isRoot=t.toPath=void 0,t.unescapeComponent=s,t.escapeComponent=i,t.parseJsonPointer=o,t.formatJsonPointer=a,t.isChild=l,t.isPathEqual=u,t.parent=h,t.isValidIndex=d;const e=/~1/g,A=/~0/g,n=/~/g,r=/\//g;function s(p){return p.indexOf("~")===-1?p:p.replace(e,"/").replace(A,"~")}function i(p){return p.indexOf("/")===-1&&p.indexOf("~")===-1?p:p.replace(n,"~0").replace(r,"~1")}function o(p){return p?p.slice(1).split("/").map(s):[]}function a(p){return(0,t.isRoot)(p)?"":"/"+p.map(w=>i(String(w))).join("/")}const c=p=>typeof p=="string"?o(p):p;t.toPath=c;function l(p,w){if(p.length>=w.length)return!1;for(let b=0;b<p.length;b++)if(p[b]!==w[b])return!1;return!0}function u(p,w){if(p.length!==w.length)return!1;for(let b=0;b<p.length;b++)if(p[b]!==w[b])return!1;return!0}const f=p=>!p.length;t.isRoot=f;function h(p){if(p.length<1)throw new Error("NO_PARENT");return p.slice(0,p.length-1)}function d(p){if(typeof p=="number")return!0;const w=Number.parseInt(p,10);return String(w)===p&&w>=0}const m=p=>{const w=p.length;let b=0,g;for(;b<w;){if(g=p.charCodeAt(b),g>=48&&g<=57){b++;continue}return!1}return!0};t.isInteger=m})(lm)),lm}var hm={},ey;function BP(){return ey||(ey=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validatePath=t.validateJsonPointer=void 0;const e=r=>{if(typeof r=="string"){if(r){if(r[0]!=="/")throw new Error("POINTER_INVALID");if(r.length>1024)throw new Error("POINTER_TOO_LONG")}}else(0,t.validatePath)(r)};t.validateJsonPointer=e;const{isArray:A}=Array,n=r=>{if(!A(r))throw new Error("Invalid path.");if(r.length>256)throw new Error("Path too long.");for(const s of r)switch(typeof s){case"string":case"number":continue;default:throw new Error("Invalid path step.")}};t.validatePath=n})(hm)),hm}var Pa={},cu={},ty;function fm(){if(ty)return cu;ty=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.hasOwnProperty=e;const t=Object.prototype.hasOwnProperty;function e(A,n){return t.call(A,n)}return cu}var Ay;function ny(){if(Ay)return Pa;Ay=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.get=void 0;const t=fm(),e=(A,n)=>{const r=n.length;let s;if(!r)return A;for(let i=0;i<r;i++)if(s=n[i],A instanceof Array){if(typeof s!="number"){if(s==="-")return;const o=~~s;if(""+o!==s)return;s=o}A=A[s]}else if(typeof A=="object"){if(!A||!(0,t.hasOwnProperty)(A,s))return;A=A[s]}else return;return A};return Pa.get=e,Pa}var ur={},ry;function kP(){if(ry)return ur;ry=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.isObjectReference=ur.isArrayEnd=ur.isArrayReference=ur.find=void 0;const t=fm(),{isArray:e}=Array,A=(i,o)=>{const a=o.length;if(!a)return{val:i};let c,l;for(let f=0;f<a;f++)if(c=i,l=o[f],e(c)){const h=c.length;if(l==="-")l=h;else if(typeof l=="string"){const d=~~l;if(""+d!==l)throw new Error("INVALID_INDEX");if(l=d,l<0)throw new Error("INVALID_INDEX")}i=c[l]}else if(typeof c=="object"&&c)i=(0,t.hasOwnProperty)(c,l)?c[l]:void 0;else throw new Error("NOT_FOUND");return{val:i,obj:c,key:l}};ur.find=A;const n=i=>e(i.obj)&&typeof i.key=="number";ur.isArrayReference=n;const r=i=>i.obj.length===i.key;ur.isArrayEnd=r;const s=i=>typeof i.obj=="object"&&typeof i.key=="string";return ur.isObjectReference=s,ur}var dm={},Za={},sy;function EP(){if(sy)return Za;sy=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.findByPointer=void 0;const t=fm(),e=um(),{isArray:A}=Array,n=(r,s)=>{if(!r)return{val:s};let i,o,a=0,c=1;for(;a>-1;)if(a=r.indexOf("/",c),o=a>-1?r.substring(c,a):r.substring(c),c=a+1,i=s,A(i)){const l=i.length;if(o==="-")o=l;else{const u=~~o;if(""+u!==o)throw new Error("INVALID_INDEX");if(o=u,o<0)throw"INVALID_INDEX"}s=i[o]}else if(typeof i=="object"&&i)o=(0,e.unescapeComponent)(o),s=(0,t.hasOwnProperty)(i,o)?i[o]:void 0;else throw"NOT_FOUND";return{val:s,obj:i,key:o}};return Za.findByPointer=n,Za}var iy;function NP(){return iy||(iy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Dt.__exportStar(EP(),t)})(dm)),dm}var oy;function ay(){return oy||(oy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(DP(),t),e.__exportStar(um(),t),e.__exportStar(BP(),t),e.__exportStar(ny(),t),e.__exportStar(kP(),t),e.__exportStar(NP(),t)})(sm)),sm}var ve=ay(),mm={},cy;function TP(){return cy||(cy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0;const{isArray:e}=Array,A=Object.keys,n=r=>{if(!r)return r;if(e(r)){const s=[],i=r.length;for(let o=0;o<i;o++)s.push((0,t.clone)(r[o]));return s}else if(typeof r=="object"){const s=A(r),i=s.length,o={};for(let a=0;a<i;a++){const c=s[a];o[c]=(0,t.clone)(r[c])}return o}return r};t.clone=n})(mm)),mm}var pm=TP();class gm extends On{value;constructor(e,A){super(e),this.value=A}op(){return"add"}code(){return ge.add}apply(e){const{val:A,key:n,obj:r}=ve.find(e,this.path),s=pm.clone(this.value);if(!r)e=s;else if(typeof n=="string")r[n]=s;else{const i=r.length;if(n<i)r.splice(n,0,s);else{if(n>i)throw new Error("INVALID_INDEX");r.push(s)}}return{doc:e,old:A}}toJson(e){return{op:"add",path:ve.formatJsonPointer(this.path),value:this.value}}toCompact(e,A){return[A?"add":ge.add,this.path,this.value]}}class ly extends On{oldValue;constructor(e,A){super(e),this.oldValue=A}op(){return"remove"}code(){return ge.remove}apply(e){const A=ve.find(e,this.path);if(A.val===void 0)throw new Error("NOT_FOUND");return ve.isObjectReference(A)?delete A.obj[A.key]:ve.isArrayReference(A)?A.val!==void 0&&A.obj.splice(A.key,1):e=null,{doc:e,old:A.val}}toJson(e){const A={op:"remove",path:ve.formatJsonPointer(this.path)};return this.oldValue!==void 0&&(A.oldValue=this.oldValue),A}toCompact(e,A){const n=A?"remove":ge.remove;return this.oldValue===void 0?[n,this.path]:[n,this.path,this.oldValue]}}class OP extends On{value;oldValue;constructor(e,A,n){super(e),this.value=A,this.oldValue=n}op(){return"replace"}code(){return ge.replace}apply(e){const A=ve.find(e,this.path);if(A.val===void 0)throw new Error("NOT_FOUND");const n=pm.clone(this.value);return ve.isObjectReference(A)||ve.isArrayReference(A)?A.obj[A.key]=n:e=n,{doc:e,old:A.val}}toJson(e){const A={op:"replace",path:ve.formatJsonPointer(this.path),value:this.value};return this.oldValue!==void 0&&(A.oldValue=this.oldValue),A}toCompact(e,A){const n=A?"replace":ge.replace;return this.oldValue===void 0?[n,this.path,this.value]:[n,this.path,this.value,this.oldValue]}}class YP extends On{from;constructor(e,A){super(e),this.from=A}op(){return"move"}code(){return ge.move}apply(e){const A=new ly(ve.toPath(this.from),void 0).apply(e);return new gm(this.path,A.old).apply(A.doc)}toJson(e){return{op:"move",path:ve.formatJsonPointer(this.path),from:ve.formatJsonPointer(this.from)}}toCompact(e,A){return[A?"move":ge.move,this.path,this.from]}}class SP extends On{from;constructor(e,A){super(e),this.from=A}op(){return"copy"}code(){return ge.copy}apply(e){const{val:A}=ve.find(e,this.from);if(A===void 0)throw new Error("NOT_FOUND");return new gm(this.path,pm.clone(A)).apply(e)}toJson(e){return{op:"copy",path:ve.formatJsonPointer(this.path),from:ve.formatJsonPointer(this.from)}}toCompact(e,A){return[A?"copy":ge.copy,this.path,this.from]}}class XA extends On{apply(e){if(!this.test(e))throw new Error("TEST");return{doc:e}}}var wm={},bm={},uy;function CP(){return uy||(uy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=void 0;const e=Array.isArray,A=Object.prototype,n=(r,s)=>{if(r===s)return!0;let i=0,o=0;if(e(r)){if(!e(s)||(i=r.length,i!==s.length))return!1;for(o=i;o--!==0;)if(!(0,t.deepEqual)(r[o],s[o]))return!1;return!0}if(r&&s&&typeof r=="object"&&typeof s=="object"){e:{if(r.__proto__===A)break e;if(r instanceof Uint8Array){if(!(s instanceof Uint8Array))return!1;const c=r.length;if(c!==s.length)return!1;for(let l=0;l<c;l++)if(r[l]!==s[l])return!1;return!0}}const a=Object.keys(r);if(i=a.length,i!==Object.keys(s).length||e(s))return!1;for(o=i;o--!==0;){const c=a[o];if(!(0,t.deepEqual)(r[c],s[c]))return!1}return!0}return!1};t.deepEqual=n})(bm)),bm}var hy;function fy(){return hy||(hy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Dt.__exportStar(CP(),t)})(wm)),wm}var dy=fy();class PP extends XA{value;not;constructor(e,A,n){super(e),this.value=A,this.not=n}op(){return"test"}code(){return ge.test}test(e){const{val:A}=ve.find(e,this.path);if(A===void 0)return!!this.not;const n=dy.deepEqual(A,this.value);return this.not?!n:n}toJson(e){const A={op:"test",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value};return this.not&&(A.not=this.not),A}toCompact(e,A){const n=e?this.path.slice(e.path.length):this.path,r=A?"test":ge.test;return this.not?[r,n,this.value,1]:[r,n,this.value]}}class ZP extends On{op(){return"flip"}code(){return ge.flip}apply(e){const A=ve.find(e,this.path);return A.obj?A.obj[A.key]=!A.val:e=!A.val,{doc:e,old:A.val}}toJson(e){return{op:"flip",path:ve.formatJsonPointer(this.path)}}toCompact(e,A){return[A?"flip":ge.flip,this.path]}}class IP extends On{inc;constructor(e,A){super(e),this.inc=A}op(){return"inc"}code(){return ge.inc}apply(e){const A=ve.find(e,this.path),n=this.inc+Number(A.val);return A.obj?A.obj[A.key]=n:e=n,{doc:e,old:A.val}}toJson(e){return{op:"inc",path:ve.formatJsonPointer(this.path),inc:this.inc}}toCompact(e,A){return[A?"inc":ge.inc,this.path,this.inc]}}class RP extends On{pos;str;constructor(e,A,n){super(e),this.pos=A,this.str=n}op(){return"str_ins"}code(){return ge.str_ins}apply(e){const{val:A,key:n,obj:r}=ve.find(e,this.path);if(typeof A!="string"){if(A!==void 0)throw new Error("NOT_A_STRING");if(this.pos!==0)throw new Error("POS")}const s=typeof A=="string"?A:"",i=Math.min(this.pos,s.length),o=s.slice(0,i),a=s.slice(i),c=o+this.str+a;return r?r[n]=c:e=c,{doc:e,old:A}}toJson(e){return{op:"str_ins",path:ve.formatJsonPointer(this.path),pos:this.pos,str:this.str}}toCompact(e,A){return[A?"str_ins":ge.str_ins,this.path,this.pos,this.str]}}class jP extends On{pos;str;len;constructor(e,A,n,r){super(e),this.pos=A,this.str=n,this.len=r}op(){return"str_del"}code(){return ge.str_del}deleteLength(){return typeof this.str=="string"?this.str.length:this.len}apply(e){const{val:A,key:n,obj:r}=ve.find(e,this.path);if(typeof A!="string")throw new Error("NOT_A_STRING");const s=A.length,i=Math.min(this.pos,A.length),o=Math.min(i,s),a=this.str!==void 0?this.str.length:this.len,c=Math.min(i+a,s),l=A.slice(0,o),u=A.substr(c),f=l+u;return r?r[n]=f:e=f,{doc:e,old:A}}toJson(e){return typeof this.str=="string"?{op:"str_del",path:ve.formatJsonPointer(this.path),pos:this.pos,str:this.str}:{op:"str_del",path:ve.formatJsonPointer(this.path),pos:this.pos,len:this.len}}toCompact(e,A){const n=A?"str_del":ge.str_del;return typeof this.str=="string"?[n,this.path,this.pos,this.str]:[n,this.path,this.pos,0,this.len]}}const{isArray:zP}=Array,_m=t=>!!t&&typeof t=="object"&&typeof t.text=="string",xm=t=>!!t&&typeof t=="object"&&zP(t.children),HP=(t,e)=>{const A=new RegExp(t,e?"i":void 0);return n=>A.test(n)};class LP extends On{pos;props;constructor(e,A,n){super(e),this.pos=A,this.props=n}op(){return"split"}code(){return ge.split}apply(e){const A=ve.find(e,this.path);if(A.val===void 0)throw new Error("NOT_FOUND");const n=this.split(A.val);return ve.isObjectReference(A)?A.obj[A.key]=n:ve.isArrayReference(A)?(A.obj[A.key]=n[0],A.obj.splice(A.key+1,0,n[1])):e=n,{doc:e,old:A.val}}split(e){if(typeof e=="string"){const{pos:A,props:n}=this,r=e.slice(0,A),s=e.slice(A);return n?[{...n,text:r},{...n,text:s}]:[r,s]}else if(_m(e)){const{pos:A,props:n}=this,r=e.text.slice(0,A),s=e.text.slice(A);return[{...e,...n,text:r},{...e,...n,text:s}]}else if(xm(e)){const{pos:A,props:n}=this,r=e.children.slice(0,A),s=e.children.slice(A);return[{...e,...n,children:r},{...e,...n,children:s}]}else if(typeof e=="number"){const{pos:A}=this;return[A,e-A]}else return[e,e]}toJson(e){const A={op:"split",path:ve.formatJsonPointer(this.path),pos:this.pos};return this.props&&(A.props=this.props),A}toCompact(e,A){const n=A?"split":ge.split;return this.props?[n,this.path,this.pos,this.props]:[n,this.path,this.pos]}}class UP extends On{pos;props;constructor(e,A,n){super(e),this.pos=A,this.props=n}op(){return"merge"}code(){return ge.merge}apply(e){const A=ve.find(e,this.path);if(!ve.isArrayReference(A))throw new Error("INVALID_TARGET");if(A.key<=0)throw new Error("INVALID_KEY");const n=A.obj[A.key-1],r=A.obj[A.key],s=this.merge(n,r);return A.obj[A.key-1]=s,A.obj.splice(A.key,1),{doc:e,old:[n,r]}}merge(e,A){return typeof e=="string"&&typeof A=="string"||typeof e=="number"&&typeof A=="number"?e+A:_m(e)&&_m(A)?{...e,...A,text:e.text+A.text}:xm(e)&&xm(A)?{...e,...A,children:[...e.children,...A.children]}:[e,A]}toJson(e){const A={op:"merge",path:ve.formatJsonPointer(this.path),pos:this.pos};return this.props&&(A.props=this.props),A}toCompact(e,A){const n=A?"merge":ge.merge;return this.props?[n,this.path,this.pos,this.props]:[n,this.path,this.pos]}}const{isArray:FP}=Array;class $P extends On{props;deleteNull;constructor(e,A,n){super(e),this.props=A,this.deleteNull=n}op(){return"extend"}code(){return ge.extend}apply(e){const A=ve.find(e,this.path);return ve.isArrayReference(A)?A.val!==void 0&&(A.obj[A.key]=this.extend(A.val)):ve.isObjectReference(A)?A.obj[A.key]=this.extend(A.val):e=this.extend(e),{doc:e}}extend(e){if(FP(e)||typeof e!="object"||!e)return e;for(const[A,n]of Object.entries(this.props)){if(A==="__proto__")throw new Error("NO_PROTO");if(n===null&&this.deleteNull){delete e[A];continue}e[A]=n}return e}toJson(e){const A={op:"extend",path:ve.formatJsonPointer(this.path),props:this.props};return this.deleteNull&&(A.deleteNull=this.deleteNull),A}toCompact(e,A){const n=A?"extend":ge.extend;return this.deleteNull?[n,this.path,this.props,1]:[n,this.path,this.props]}}class VP extends XA{op(){return"defined"}code(){return ge.defined}test(e){const{val:A}=ve.find(e,this.path);return A!==void 0}toJson(e){return{op:"defined",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path)}}toCompact(e,A){return[A?"defined":ge.defined,e?this.path.slice(e.path.length):this.path]}}class qP extends XA{op(){return"undefined"}code(){return ge.undefined}test(e){try{const{val:A}=ve.find(e,this.path);return A===void 0}catch(A){if(A.message==="NOT_FOUND")return!0;throw A}}toJson(e){return{op:"undefined",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path)}}toCompact(e,A){return[A?"undefined":ge.undefined,e?this.path.slice(e.path.length):this.path]}}const{isArray:WP}=Array;class QP extends XA{type;constructor(e,A){super(e),this.type=A}op(){return"test_type"}code(){return ge.test_type}test(e){const{val:A}=ve.find(e,this.path);return A===null?this.type.indexOf("null")>-1:WP(A)?this.type.indexOf("array")>-1:this.type.indexOf(typeof A)>-1||typeof A=="number"&&A===Math.round(A)&&this.type.indexOf("integer")>-1}toJson(e){return{op:"test_type",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),type:this.type}}toCompact(e,A){return[A?"test_type":ge.test_type,e?this.path.slice(e.path.length):this.path,this.type]}}class KP extends XA{pos;str;not;constructor(e,A,n,r){super(e),this.pos=A,this.str=n,this.not=r}op(){return"test_string"}code(){return ge.test_string}test(e){const{val:A}=ve.find(e,this.path);if(typeof A!="string")return!1;const n=A.length,r=Math.min(this.pos,n),s=Math.min(this.pos+this.str.length,n),i=A.substring(r,s)===this.str;return this.not?!i:i}toJson(e){const A={op:"test_string",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),pos:this.pos,str:this.str};return this.not&&(A.not=this.not),A}toCompact(e,A){const n=A?"test_string":ge.test_string,r=e?this.path.slice(e.path.length):this.path;return this.not?[n,r,this.pos,this.str,1]:[n,r,this.pos,this.str]}}class JP extends XA{len;not;constructor(e,A,n){super(e),this.len=A,this.not=n}op(){return"test_string_len"}code(){return ge.test_string_len}test(e){const{val:A}=ve.find(e,this.path);if(typeof A!="string")return!1;const r=A.length>=this.len;return this.not?!r:r}toJson(e){const A={op:"test_string_len",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),len:this.len};return this.not&&(A.not=this.not),A}toCompact(e,A){const n=A?"test_string_len":ge.test_string_len,r=e?this.path.slice(e.path.length):this.path;return this.not?[n,r,this.len,1]:[n,r,this.len]}}class XP extends XA{value;ignore_case;constructor(e,A,n){super(e),this.value=A,this.ignore_case=n}op(){return"contains"}code(){return ge.contains}test(e){const{val:A}=ve.find(e,this.path);if(typeof A!="string")return!1;const n=this.ignore_case?A.toLowerCase():A,r=this.ignore_case?this.value.toLowerCase():this.value;return n.indexOf(r)>-1}toJson(e){const A={op:"contains",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value};return this.ignore_case&&(A.ignore_case=this.ignore_case),A}toCompact(e,A){const n=A?"contains":ge.contains;return this.ignore_case?[n,e?this.path.slice(e.path.length):this.path,this.value,1]:[n,e?this.path.slice(e.path.length):this.path,this.value]}}class eZ extends XA{value;ignore_case;constructor(e,A,n){super(e),this.value=A,this.ignore_case=n}op(){return"ends"}code(){return ge.ends}test(e){const{val:A}=ve.find(e,this.path);if(typeof A!="string")return!1;const n=this.ignore_case?A.toLowerCase():A,r=this.ignore_case?this.value.toLowerCase():this.value;return n.endsWith(r)}toJson(e){const A={op:"ends",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value};return this.ignore_case&&(A.ignore_case=this.ignore_case),A}toCompact(e,A){const n=A?"ends":ge.ends;return this.ignore_case?[n,e?this.path.slice(e.path.length):this.path,this.value,1]:[n,e?this.path.slice(e.path.length):this.path,this.value]}}class tZ extends XA{value;ignore_case;constructor(e,A,n){super(e),this.value=A,this.ignore_case=n}op(){return"starts"}code(){return ge.starts}test(e){const{val:A}=ve.find(e,this.path);if(typeof A!="string")return!1;const n=this.ignore_case?A.toLowerCase():A,r=this.ignore_case?this.value.toLowerCase():this.value;return n.startsWith(r)}toJson(e){const A={op:"starts",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value};return this.ignore_case&&(A.ignore_case=this.ignore_case),A}toCompact(e,A){const n=A?"starts":ge.starts;return this.ignore_case?[n,e?this.path.slice(e.path.length):this.path,this.value,1]:[n,e?this.path.slice(e.path.length):this.path,this.value]}}class AZ extends XA{value;constructor(e,A){super(e),this.value=A}op(){return"in"}code(){return ge.in}test(e){const{val:A}=ve.find(e,this.path);for(const n of this.value)if(dy.deepEqual(A,n))return!0;return!1}toJson(e){return{op:"in",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value}}toCompact(e,A){return[A?"in":ge.in,e?this.path.slice(e.path.length):this.path,this.value]}}class nZ extends XA{value;constructor(e,A){super(e),this.value=A}op(){return"less"}code(){return ge.less}test(e){const{val:A}=ve.find(e,this.path);return typeof A!="number"?!1:A<this.value}toJson(e){return{op:"less",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value}}toCompact(e,A){return[A?"less":ge.less,e?this.path.slice(e.path.length):this.path,this.value]}}class rZ extends XA{value;constructor(e,A){super(e),this.value=A}op(){return"more"}code(){return ge.more}test(e){const{val:A}=ve.find(e,this.path);return typeof A!="number"?!1:A>this.value}toJson(e){return{op:"more",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value}}toCompact(e,A){return[A?"more":ge.more,e?this.path.slice(e.path.length):this.path,this.value]}}class ym extends XA{ops;constructor(e,A){super(e),this.ops=A}}class sZ extends ym{ops;constructor(e,A){super(e,A),this.ops=A}op(){return"and"}code(){return ge.and}test(e){for(const A of this.ops)if(!A.test(e))return!1;return!0}toJson(e){return{op:"and",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),apply:this.ops.map(n=>n.toJson(this))}}toCompact(e,A){return[A?"and":ge.and,e?this.path.slice(e.path.length):this.path,this.ops.map(r=>r.toCompact(this,A))]}}class iZ extends ym{ops;constructor(e,A){super(e,A),this.ops=A}op(){return"or"}code(){return ge.or}test(e){for(const A of this.ops)if(A.test(e))return!0;return!1}toJson(e){return{op:"or",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),apply:this.ops.map(n=>n.toJson(this))}}toCompact(e,A){return[A?"or":ge.or,e?this.path.slice(e.path.length):this.path,this.ops.map(r=>r.toCompact(this,A))]}}class oZ extends ym{ops;constructor(e,A){super(e,A),this.ops=A}op(){return"not"}code(){return ge.not}test(e){for(const A of this.ops)if(A.test(e))return!1;return!0}toJson(e){return{op:"not",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),apply:this.ops.map(n=>n.toJson(this))}}toCompact(e,A){return[A?"not":ge.not,e?this.path.slice(e.path.length):this.path,this.ops.map(r=>r.toCompact(this,A))]}}class aZ extends XA{value;ignore_case;matcher;constructor(e,A,n,r){super(e),this.value=A,this.ignore_case=n,this.matcher=r(A,n)}op(){return"matches"}code(){return ge.matches}test(e){const{val:A}=ve.find(e,this.path);return typeof A!="string"?!1:this.matcher(A)}toJson(e){const A={op:"matches",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value};return this.ignore_case&&(A.ignore_case=this.ignore_case),A}toCompact(e,A){const n=A?"matches":ge.matches;return this.ignore_case?[n,e?this.path.slice(e.path.length):this.path,this.value,1]:[n,e?this.path.slice(e.path.length):this.path,this.value]}}const{isArray:cZ}=Array;class lZ extends XA{value;constructor(e,A){super(e),this.value=A}op(){return"type"}code(){return ge.type}test(e){const{val:A}=ve.find(e,this.path);return A===null?this.value==="null":cZ(A)?this.value==="array":typeof A===this.value||typeof A=="number"&&A===Math.round(A)&&this.value==="integer"}toJson(e){return{op:"type",path:ve.formatJsonPointer(e?this.path.slice(e.path.length):this.path),value:this.value}}toCompact(e,A){return[A?"type":ge.type,e?this.path.slice(e.path.length):this.path,this.value]}}var Ia={},Ra={},ja={},lu={},_i={},my;function uZ(){if(my)return _i;my=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.decodeAsciiMax15=_i.decodeAscii=void 0;const t=String.fromCharCode,e=(n,r,s)=>{const i=[];for(let o=0;o<s;o++){const a=n[r++];if(a&128)return;i.push(a)}return t.apply(String,i)};_i.decodeAscii=e;const A=(n,r,s)=>{if(s<4)if(s<2){if(s===0)return"";{const i=n[r++];if((i&128)>1){r-=1;return}return t(i)}}else{const i=n[r++],o=n[r++];if((i&128)>0||(o&128)>0){r-=2;return}if(s<3)return t(i,o);const a=n[r++];if((a&128)>0){r-=3;return}return t(i,o,a)}else{const i=n[r++],o=n[r++],a=n[r++],c=n[r++];if((i&128)>0||(o&128)>0||(a&128)>0||(c&128)>0){r-=4;return}if(s<6){if(s===4)return t(i,o,a,c);{const l=n[r++];if((l&128)>0){r-=5;return}return t(i,o,a,c,l)}}else if(s<8){const l=n[r++],u=n[r++];if((l&128)>0||(u&128)>0){r-=6;return}if(s<7)return t(i,o,a,c,l,u);const f=n[r++];if((f&128)>0){r-=7;return}return t(i,o,a,c,l,u,f)}else{const l=n[r++],u=n[r++],f=n[r++],h=n[r++];if((l&128)>0||(u&128)>0||(f&128)>0||(h&128)>0){r-=8;return}if(s<10){if(s===8)return t(i,o,a,c,l,u,f,h);{const d=n[r++];if((d&128)>0){r-=9;return}return t(i,o,a,c,l,u,f,h,d)}}else if(s<12){const d=n[r++],m=n[r++];if((d&128)>0||(m&128)>0){r-=10;return}if(s<11)return t(i,o,a,c,l,u,f,h,d,m);const p=n[r++];if((p&128)>0){r-=11;return}return t(i,o,a,c,l,u,f,h,d,m,p)}else{const d=n[r++],m=n[r++],p=n[r++],w=n[r++];if((d&128)>0||(m&128)>0||(p&128)>0||(w&128)>0){r-=12;return}if(s<14){if(s===12)return t(i,o,a,c,l,u,f,h,d,m,p,w);{const b=n[r++];if((b&128)>0){r-=13;return}return t(i,o,a,c,l,u,f,h,d,m,p,w,b)}}else{const b=n[r++],g=n[r++];if((b&128)>0||(g&128)>0){r-=14;return}if(s<15)return t(i,o,a,c,l,u,f,h,d,m,p,w,b,g);const x=n[r++];if((x&128)>0){r-=15;return}return t(i,o,a,c,l,u,f,h,d,m,p,w,b,g,x)}}}}};return _i.decodeAsciiMax15=A,_i}var uu={},py;function hZ(){if(py)return uu;py=1,Object.defineProperty(uu,"__esModule",{value:!0});const t=String.fromCharCode;return uu.default=(e,A,n)=>{let r=A;const s=r+n,i=[];for(;r<s;){let o=e[r++];if((o&128)!==0){const a=e[r++]&63;if((o&224)===192)o=(o&31)<<6|a;else{const c=e[r++]&63;if((o&240)===224)o=(o&31)<<12|a<<6|c;else if((o&248)===240){const l=e[r++]&63;let u=(o&7)<<18|a<<12|c<<6|l;if(u>65535){u-=65536;const f=u>>>10&1023|55296;o=56320|u&1023,i.push(f)}else o=u}}}i.push(o)}return t.apply(String,i)},uu}var gy;function fZ(){if(gy)return lu;gy=1,Object.defineProperty(lu,"__esModule",{value:!0});const t=Dt,e=uZ(),A=t.__importDefault(hZ()),n=typeof Tt<"u",r=n?Tt.prototype.utf8Slice:null,s=n?Tt.from:null,i=(l,u,f)=>(0,e.decodeAsciiMax15)(l,u,f)??(0,A.default)(l,u,f),o=(l,u,f)=>(0,e.decodeAscii)(l,u,f)??(0,A.default)(l,u,f),a=r?(l,u,f)=>r.call(l,u,u+f):s?(l,u,f)=>s(l).subarray(u,u+f).toString("utf8"):A.default,c=(l,u,f)=>f<16?i(l,u,f):f<32?o(l,u,f):a(l,u,f);return lu.default=c,lu}var wy;function dZ(){if(wy)return ja;wy=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.decodeUtf8=void 0;const e=Dt.__importDefault(fZ());return ja.decodeUtf8=e.default,ja}var by;function Gm(){if(by)return Ra;by=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.Reader=void 0;const t=dZ();let e=class GS{constructor(n=new Uint8Array([]),r=new DataView(n.buffer,n.byteOffset,n.length),s=0,i=n.length){this.uint8=n,this.view=r,this.x=s,this.end=i}reset(n){this.x=0,this.uint8=n,this.view=new DataView(n.buffer,n.byteOffset,n.length)}size(){return this.end-this.x}peek(){return this.view.getUint8(this.x)}peak(){return this.peek()}skip(n){this.x+=n}buf(n=this.size()){const r=this.x,s=r+n,i=this.uint8.subarray(r,s);return this.x=s,i}subarray(n=0,r){const s=this.x,i=s+n,o=typeof r=="number"?s+r:this.end;return this.uint8.subarray(i,o)}slice(n=0,r){const s=this.x,i=s+n,o=typeof r=="number"?s+r:this.end;return new GS(this.uint8,this.view,i,o)}cut(n=this.size()){const r=this.slice(0,n);return this.skip(n),r}u8(){return this.uint8[this.x++]}i8(){return this.view.getInt8(this.x++)}u16(){let n=this.x;const r=(this.uint8[n++]<<8)+this.uint8[n++];return this.x=n,r}i16(){const n=this.view.getInt16(this.x);return this.x+=2,n}u32(){const n=this.view.getUint32(this.x);return this.x+=4,n}i32(){const n=this.view.getInt32(this.x);return this.x+=4,n}u64(){const n=this.view.getBigUint64(this.x);return this.x+=8,n}i64(){const n=this.view.getBigInt64(this.x);return this.x+=8,n}f32(){const n=this.x;return this.x+=4,this.view.getFloat32(n)}f64(){const n=this.x;return this.x+=8,this.view.getFloat64(n)}utf8(n){const r=this.x;return this.x+=n,(0,t.decodeUtf8)(this.uint8,r,n)}ascii(n){const r=this.uint8;let s="";const i=this.x+n;for(let o=this.x;o<i;o++)s+=String.fromCharCode(r[o]);return this.x=i,s}};return Ra.Reader=e,Ra}var hu={},za={},fu={},_y;function mZ(){if(_y)return fu;_y=1,Object.defineProperty(fu,"__esModule",{value:!0});const t=String.fromCharCode;return fu.default=(e,A,n)=>{let r=A;const s=r+n;let i="";for(;r<s;){const o=e[r++];if((o&128)===0){i+=t(o);continue}const a=e[r++]&63;if((o&224)===192){i+=t((o&31)<<6|a);continue}const c=e[r++]&63;if((o&240)===224){i+=t((o&31)<<12|a<<6|c);continue}if((o&248)===240){const l=e[r++]&63;let u=(o&7)<<18|a<<12|c<<6|l;if(u>65535){u-=65536;const f=u>>>10&1023|55296;u=56320|u&1023,i+=t(f,u)}else i+=t(u)}else i+=t(o)}return i},fu}var xy;function pZ(){if(xy)return za;xy=1,Object.defineProperty(za,"__esModule",{value:!0}),za.CachedUtf8Decoder=void 0;const e=Dt.__importDefault(mZ());let A=1+Math.round(Math.random()*((-1>>>0)-1));function n(i,o){return A^=A<<13,A^=A>>>17,A^=A<<5,(A>>>0)%(o-i+1)+i}class r{constructor(o,a){this.bytes=o,this.value=a}}let s=class{constructor(){this.caches=[];for(let o=0;o<31;o++)this.caches.push([])}get(o,a,c){const l=this.caches[c-1],u=l.length;e:for(let f=0;f<u;f++){const h=l[f],d=h.bytes;for(let m=0;m<c;m++)if(d[m]!==o[a+m])continue e;return h.value}return null}store(o,a){const c=this.caches[o.length-1],l=new r(o,a);c.length>=16?c[n(0,15)]=l:c.push(l)}decode(o,a,c){if(!c)return"";const l=this.get(o,a,c);if(l!==null)return l;const u=(0,e.default)(o,a,c),f=Uint8Array.prototype.slice.call(o,a,a+c);return this.store(f,u),u}};return za.CachedUtf8Decoder=s,za}var yy;function Gy(){if(yy)return hu;yy=1,Object.defineProperty(hu,"__esModule",{value:!0});const t=pZ();return hu.default=new t.CachedUtf8Decoder,hu}var Ha={},My;function Mm(){if(My)return Ha;My=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.JsonPackExtension=void 0;let t=class{constructor(A,n){this.tag=A,this.val=n}};return Ha.JsonPackExtension=t,Ha}var vy;function gZ(){if(vy)return Ia;vy=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.MsgPackDecoderFast=void 0;const t=Dt,e=Gm(),A=t.__importDefault(Gy()),n=Mm();let r=class{constructor(i=new e.Reader,o=A.default){this.reader=i,this.keyDecoder=o}decode(i){return this.reader.reset(i),this.readAny()}read(i){return this.reader.reset(i),this.readAny()}val(){return this.readAny()}readAny(){const i=this.reader,o=i.u8();if(o>=224)return o-256;if(o<=191)return o<144?o<=127?o:this.obj(o&15):o<160?this.arr(o&15):i.utf8(o&31);if(o<=208)return o<=200?o<=196?o<=194?o===194?!1:o===192?null:void 0:o===196?i.buf(i.u8()):!0:o<=198?o===198?i.buf(i.u32()):i.buf(i.u16()):o===200?this.ext(i.u16()):this.ext(i.u8()):o<=204?o<=202?o===202?i.f32():this.ext(i.u32()):o===204?i.u8():i.f64():o<=206?o===206?i.u32():i.u16():o===208?i.i8():i.u32()*4294967296+i.u32();if(o<=216)return o<=212?o<=210?o===210?i.i32():i.i16():o===212?this.ext(1):i.i32()*4294967296+i.u32():o<=214?o===214?this.ext(4):this.ext(2):o===216?this.ext(16):this.ext(8);switch(o){case 217:return i.utf8(i.u8());case 218:return i.utf8(i.u16());case 219:return i.utf8(i.u32());case 220:return this.arr(i.u16());case 221:return this.arr(i.u32());case 222:return this.obj(i.u16());case 223:return this.obj(i.u32())}}str(){const i=this.reader,o=i.u8();if(o>>5===5)return i.utf8(o&31);switch(o){case 217:return i.utf8(i.u8());case 218:return i.utf8(i.u16());case 219:return i.utf8(i.u32())}}obj(i){const o={};for(let a=0;a<i;a++){const c=this.key();if(c==="__proto__")throw 6;o[c]=this.readAny()}return o}key(){const i=this.reader,o=i.view.getUint8(i.x);if(o>=160&&o<=191){const a=o&31,c=this.keyDecoder.decode(i.uint8,i.x+1,a);return i.x+=1+a,c}else if(o===217){const a=i.view.getUint8(i.x+1);if(a<32){const c=this.keyDecoder.decode(i.uint8,i.x+2,a);return i.x+=2+a,c}}switch(i.x++,o){case 217:return i.utf8(i.u8());case 218:return i.utf8(i.u16());case 219:return i.utf8(i.u32());default:return""}}arr(i){const o=[];for(let a=0;a<i;a++)o.push(this.readAny());return o}ext(i){const o=this.reader,a=o.u8(),c=o.x+i,l=o.uint8.subarray(o.x,c);return o.x=c,new n.JsonPackExtension(a,l)}back(i){this.reader.x-=i}};return Ia.MsgPackDecoderFast=r,Ia}gZ();const wZ=(t,e)=>{switch(t.op){case"add":return new gm(ve.toPath(t.path),t.value);case"remove":return new ly(ve.toPath(t.path),t.oldValue);case"replace":return new OP(ve.toPath(t.path),t.value,t.oldValue);case"move":return new YP(ve.toPath(t.path),ve.toPath(t.from));case"copy":return new SP(ve.toPath(t.path),ve.toPath(t.from));case"flip":return new ZP(ve.toPath(t.path));case"inc":return new IP(ve.toPath(t.path),t.inc);case"str_ins":return new RP(ve.toPath(t.path),t.pos,t.str);case"str_del":return new jP(ve.toPath(t.path),t.pos,t.str,t.len);case"split":return new LP(ve.toPath(t.path),t.pos,t.props||null);case"merge":return new UP(ve.toPath(t.path),t.pos,t.props||null);case"extend":return new $P(ve.toPath(t.path),t.props,!!t.deleteNull);default:return du(t,e)}},du=(t,e)=>{switch(t.op){case"test":return new PP(ve.toPath(t.path),t.value,!!t.not);case"defined":return new VP(ve.toPath(t.path));case"undefined":return new qP(ve.toPath(t.path));case"type":return new lZ(ve.toPath(t.path),t.value);case"test_type":return new QP(ve.toPath(t.path),t.type);case"test_string":return new KP(ve.toPath(t.path),t.pos,t.str,!!t.not);case"test_string_len":return new JP(ve.toPath(t.path),t.len,!!t.not);case"contains":return new XP(ve.toPath(t.path),t.value,!!t.ignore_case);case"ends":return new eZ(ve.toPath(t.path),t.value,!!t.ignore_case);case"starts":return new tZ(ve.toPath(t.path),t.value,!!t.ignore_case);case"matches":return new aZ(ve.toPath(t.path),t.value,!!t.ignore_case,e.createMatcher||HP);case"in":return new AZ(ve.toPath(t.path),t.value);case"less":return new nZ(ve.toPath(t.path),t.value);case"more":return new rZ(ve.toPath(t.path),t.value);case"and":{const A=ve.toPath(t.path);return new sZ(A,t.apply.map(n=>du({...n,path:[...A,...ve.toPath(n.path)]},e)))}case"or":{const A=ve.toPath(t.path);return new iZ(A,t.apply.map(n=>du({...n,path:[...A,...ve.toPath(n.path)]},e)))}case"not":{const A=ve.toPath(t.path);return new oZ(A,t.apply.map(n=>du({...n,path:[...A,...ve.toPath(n.path)]},e)))}default:throw new Error("OP_UNKNOWN")}};function bZ(t,e){const A=[],n=t.length;for(let r=0;r<n;r++){const s=wZ(t[r],e);A.push(s)}return A}var vm={},Dm={},Bm={},Dy;function _Z(){return Dy||(Dy=1,Object.defineProperty(Bm,"__esModule",{value:!0})),Bm}var km={},La={},Em={},Nm={},Ua={},By;function xZ(){if(By)return Ua;By=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.dim=void 0;const t=e=>e;return Ua.dim=t,Ua}var ky;function yZ(){return ky||(ky=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toLine=void 0;const e=xZ(),A=r=>" "+(r.length?`{ ${r.toString().split(",").map(s=>Number(s).toString(16).toUpperCase().padStart(r.BYTES_PER_ELEMENT<<1,"0")).join(" ")} }`:"{}"),n=(r,s=" ")=>{switch(r){case null:return"!n";case void 0:return"!u";case!0:return"!t";case!1:return"!f"}switch(typeof r){case"number":case"bigint":{const i=typeof r=="number"&&Math.round(r)!==r?r+"":Intl.NumberFormat("en-US").format(r)+(typeof r=="bigint"?"n":"");return i[0]==="0"&&i[1]==="."?i.slice(1):i}case"string":return r?r.split(/([\u0000-\u001F]|\n|\t)/).filter(Boolean).map(o=>o===`
`?"":o==="	"?"":o.length===1&&o.charCodeAt(0)<32?"\\x"+o.charCodeAt(0).toString(16).padStart(2,"0"):(0,e.dim)('"')+JSON.stringify(o).slice(1,-1)+(0,e.dim)('"')).join(" "):'""';case"object":{if(Array.isArray(r))return r.length?`[${s}${r.map(o=>(0,t.toLine)(o,s)).join(","+s)}${s}]`:"[]";if(r instanceof DataView)return r.constructor.name+A(new Uint8Array(r.buffer,r.byteOffset,r.byteLength));if(ArrayBuffer.isView(r))return r.constructor.name+A(r);if(r instanceof ArrayBuffer)return"ArrayBuffer"+A(new Uint8Array(r));if(r instanceof Date)return"Date { "+r.getTime()+" }";if(r instanceof RegExp)return r+"";const i=Object.keys(r);return i.length?`{${s}${i.map(o=>`${o}${s}${(0,e.dim)("=")}${s}${(0,t.toLine)(r[o],s)}`).join(","+s)}${s}}`:"{}"}case"function":return`fn ${(0,t.toLine)(r.name)} ( ${r.length} args )`;case"symbol":return`sym ( ${r.description} )`}return"?"};t.toLine=n})(Nm)),Nm}var Tm={},Om={},Ey;function GZ(){return Ey||(Ey=1,Object.defineProperty(Om,"__esModule",{value:!0})),Om}var Ym={},Sm={},Ny;function MZ(){return Ny||(Ny=1,Object.defineProperty(Sm,"__esModule",{value:!0})),Sm}var Cm={},Ty;function vZ(){return Ty||(Ty=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServerClockVector=t.ClockVector=t.LogicalClock=t.interval=t.printTs=t.containsId=t.contains=t.compare=t.equal=t.tick=t.tss=t.ts=t.Timespan=t.Timestamp=void 0;class e{constructor(p,w){this.sid=p,this.time=w}}t.Timestamp=e;class A{constructor(p,w,b){this.sid=p,this.time=w,this.span=b}}t.Timespan=A;const n=(m,p)=>new e(m,p);t.ts=n;const r=(m,p,w)=>new A(m,p,w);t.tss=r;const s=(m,p)=>(0,t.ts)(m.sid,m.time+p);t.tick=s;const i=(m,p)=>m.time===p.time&&m.sid===p.sid;t.equal=i;const o=(m,p)=>{const w=m.time,b=p.time;if(w>b)return 1;if(w<b)return-1;const g=m.sid,x=p.sid;return g>x?1:g<x?-1:0};t.compare=o;const a=(m,p,w,b)=>{if(m.sid!==w.sid)return!1;const g=m.time,x=w.time;return!(g>x||g+p<x+b)};t.contains=a;const c=(m,p,w)=>{if(m.sid!==w.sid)return!1;const b=m.time,g=w.time;return!(b>g||b+p<g+1)};t.containsId=c;const l=m=>{if(m.sid===1)return"."+m.time;let p=""+m.sid;return p.length>4&&(p=".."+p.slice(p.length-4)),p+"."+m.time};t.printTs=l;const u=(m,p,w)=>new A(m.sid,m.time+p,w);t.interval=u;class f extends e{tick(p){const w=new e(this.sid,this.time);return this.time+=p,w}}t.LogicalClock=f;class h extends f{constructor(){super(...arguments),this.peers=new Map}observe(p,w){const b=p.time+w-1,g=p.sid;if(g!==this.sid){const x=this.peers.get(p.sid);x?b>x.time&&(x.time=b):this.peers.set(p.sid,(0,t.ts)(g,b))}b>=this.time&&(this.time=b+1)}clone(){return this.fork(this.sid)}fork(p){const w=new h(p,this.time);return p!==this.sid&&w.observe((0,t.tick)(this,-1),1),this.peers.forEach(b=>{w.observe(b,1)}),w}toString(p=""){const w=this.peers.size;let b=1,g="";return this.peers.forEach(x=>{g+=`
${p}${b===w?"":""} ${x.sid}.${x.time}`,b++}),`clock ${this.sid}.${this.time}${g}`}}t.ClockVector=h;class d extends f{constructor(){super(...arguments),this.peers=new Map}observe(p,w){if(p.sid>8)throw new Error("INVALID_SERVER_SESSION");if(this.time<p.time)throw new Error("TIME_TRAVEL");const b=p.time+w;b>this.time&&(this.time=b)}clone(){return this.fork()}fork(){return new d(1,this.time)}toString(){return`clock ${this.sid}.${this.time}`}}t.ServerClockVector=d})(Cm)),Cm}var Oy;function Qt(){return Oy||(Oy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(MZ(),t),e.__exportStar(vZ(),t)})(Ym)),Ym}var ft={},Fa={},Yy;function Sn(){if(Yy)return Fa;Yy=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.printTree=void 0;const t=(e="",A)=>{let n="",r=A.length-1;for(;r>=0&&!A[r];r--);for(let s=0;s<=r;s++){const i=A[s];if(!i)continue;const o=s===r,a=i(e+(o?" ":"")+"  "),c=a?o?"":"":"";n+=`
`+e+c+(a?" "+a:"")}return n};return Fa.printTree=t,Fa}var Sy;function $a(){if(Sy)return ft;Sy=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.NopOp=ft.DelOp=ft.UpdArrOp=ft.InsArrOp=ft.InsBinOp=ft.InsStrOp=ft.InsVecOp=ft.InsObjOp=ft.InsValOp=ft.NewArrOp=ft.NewBinOp=ft.NewStrOp=ft.NewVecOp=ft.NewObjOp=ft.NewValOp=ft.NewConOp=void 0;const t=Sn(),e=Qt();class A{constructor(x){this.id=x}span(){return 1}toString(){let x=this.name()+" "+(0,e.printTs)(this.id);const _=this.span();return _>1&&(x+="!"+_),x}}class n extends A{constructor(x,_){super(x),this.id=x,this.val=_}name(){return"new_con"}toString(){const x=this.val,_="Uint8Array",G=x instanceof e.Timestamp?`{ ${(0,e.printTs)(x)} }`:x instanceof Uint8Array?x.length<13?`${_} { ${(""+x).replaceAll(",",", ")} }`:`${_}(${x.length})`:`{ ${JSON.stringify(x)} }`;return super.toString()+" "+G}}ft.NewConOp=n;class r extends A{name(){return"new_val"}}ft.NewValOp=r;class s extends A{name(){return"new_obj"}}ft.NewObjOp=s;class i extends A{name(){return"new_vec"}}ft.NewVecOp=i;class o extends A{name(){return"new_str"}}ft.NewStrOp=o;class a extends A{name(){return"new_bin"}}ft.NewBinOp=a;class c extends A{name(){return"new_arr"}}ft.NewArrOp=c;class l extends A{constructor(x,_,G){super(x),this.id=x,this.obj=_,this.val=G}name(){return"ins_val"}toString(){return super.toString()+`, obj = ${(0,e.printTs)(this.obj)}, val = ${(0,e.printTs)(this.val)}`}}ft.InsValOp=l;class u extends A{constructor(x,_,G){super(x),this.id=x,this.obj=_,this.data=G}name(){return"ins_obj"}toString(x=""){return super.toString()+`, obj = ${(0,e.printTs)(this.obj)}`+(0,t.printTree)(x,this.data.map(G=>y=>`${JSON.stringify(G[0])}: ${(0,e.printTs)(G[1])}`))}}ft.InsObjOp=u;class f extends A{constructor(x,_,G){super(x),this.id=x,this.obj=_,this.data=G}name(){return"ins_vec"}toString(x=""){return super.toString()+`, obj = ${(0,e.printTs)(this.obj)}`+(0,t.printTree)(x,this.data.map(G=>y=>`${G[0]}: ${(0,e.printTs)(G[1])}`))}}ft.InsVecOp=f;class h extends A{constructor(x,_,G,y){super(x),this.id=x,this.obj=_,this.ref=G,this.data=y}span(){return this.data.length}name(){return"ins_str"}toString(){return super.toString()+`, obj = ${(0,e.printTs)(this.obj)} { ${(0,e.printTs)(this.ref)}  ${JSON.stringify(this.data)} }`}}ft.InsStrOp=h;class d extends A{constructor(x,_,G,y){super(x),this.id=x,this.obj=_,this.ref=G,this.data=y}span(){return this.data.length}name(){return"ins_bin"}toString(){const x=(0,e.printTs)(this.ref);return super.toString()+`, obj = ${(0,e.printTs)(this.obj)} { ${x}  ${this.data} }`}}ft.InsBinOp=d;class m extends A{constructor(x,_,G,y){super(x),this.id=x,this.obj=_,this.ref=G,this.data=y}span(){return this.data.length}name(){return"ins_arr"}toString(){const x=(0,e.printTs)(this.obj),_=(0,e.printTs)(this.ref),G=this.data.map(e.printTs).join(", ");return super.toString()+", obj = "+x+" { "+_+"  "+G+" }"}}ft.InsArrOp=m;class p extends A{constructor(x,_,G,y){super(x),this.id=x,this.obj=_,this.ref=G,this.val=y}name(){return"upd_arr"}toString(){const x=(0,e.printTs)(this.obj),_=(0,e.printTs)(this.ref),G=(0,e.printTs)(this.val);return super.toString()+", obj = "+x+" { "+_+": "+G+" }"}}ft.UpdArrOp=p;class w extends A{constructor(x,_,G){super(x),this.id=x,this.obj=_,this.what=G}name(){return"del"}toString(){const x=this.what.map(_=>(0,e.printTs)(_)+"!"+_.span).join(", ");return super.toString()+`, obj = ${(0,e.printTs)(this.obj)} { ${x} }`}}ft.DelOp=w;class b extends A{constructor(x,_){super(x),this.id=x,this.len=_}span(){return this.len}name(){return"nop"}}return ft.NopOp=b,ft}var Va={},Pm={},qa={},Wa={},Cy;function Zm(){if(Cy)return Wa;Cy=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.CrdtWriter=void 0;const t=rm();let e=class extends t.Writer{id(n,r){n<=7&&r<=15?this.u8(n<<4|r):(this.b1vu56(1,n),this.vu57(r))}vu57(n){if(n<=127)this.u8(n);else if(n<=16383){this.ensureCapacity(2);const r=this.uint8;r[this.x++]=128|n&127,r[this.x++]=n>>>7}else if(n<=2097151){this.ensureCapacity(3);const r=this.uint8;r[this.x++]=128|n&127,r[this.x++]=128|n>>>7&127,r[this.x++]=n>>>14}else if(n<=268435455){this.ensureCapacity(4);const r=this.uint8;r[this.x++]=128|n&127,r[this.x++]=128|n>>>7&127,r[this.x++]=128|n>>>14&127,r[this.x++]=n>>>21}else{let r=n|0;r<0&&(r+=4294967296);const s=(n-r)/4294967296;if(n<=34359738367){this.ensureCapacity(5);const i=this.uint8;i[this.x++]=128|n&127,i[this.x++]=128|n>>>7&127,i[this.x++]=128|n>>>14&127,i[this.x++]=128|n>>>21&127,i[this.x++]=s<<4|n>>>28}else if(n<=4398046511103){this.ensureCapacity(6);const i=this.uint8;i[this.x++]=128|n&127,i[this.x++]=128|n>>>7&127,i[this.x++]=128|n>>>14&127,i[this.x++]=128|n>>>21&127,i[this.x++]=128|(s&7)<<4|n>>>28,i[this.x++]=s>>>3}else if(n<=562949953421311){this.ensureCapacity(7);const i=this.uint8;i[this.x++]=128|n&127,i[this.x++]=128|n>>>7&127,i[this.x++]=128|n>>>14&127,i[this.x++]=128|n>>>21&127,i[this.x++]=128|(s&7)<<4|n>>>28,i[this.x++]=128|(s&1016)>>>3,i[this.x++]=s>>>10}else{this.ensureCapacity(8);const i=this.uint8;i[this.x++]=128|n&127,i[this.x++]=128|n>>>7&127,i[this.x++]=128|n>>>14&127,i[this.x++]=128|n>>>21&127,i[this.x++]=128|(s&7)<<4|n>>>28,i[this.x++]=128|(s&1016)>>>3,i[this.x++]=128|(s&130048)>>>10,i[this.x++]=s>>>17}}}b1vu56(n,r){if(r<=63)this.u8(n<<7|r);else{const s=n<<7|64;if(r<=8191){this.ensureCapacity(2);const i=this.uint8;i[this.x++]=s|r&63,i[this.x++]=r>>>6}else if(r<=1048575){this.ensureCapacity(3);const i=this.uint8;i[this.x++]=s|r&63,i[this.x++]=128|r>>>6&127,i[this.x++]=r>>>13}else if(r<=134217727){this.ensureCapacity(4);const i=this.uint8;i[this.x++]=s|r&63,i[this.x++]=128|r>>>6&127,i[this.x++]=128|r>>>13&127,i[this.x++]=r>>>20}else{let i=r|0;i<0&&(i+=4294967296);const o=(r-i)/4294967296;if(r<=17179869183){this.ensureCapacity(5);const a=this.uint8;a[this.x++]=s|r&63,a[this.x++]=128|r>>>6&127,a[this.x++]=128|r>>>13&127,a[this.x++]=128|r>>>20&127,a[this.x++]=o<<5|r>>>27}else if(r<=2199023255551){this.ensureCapacity(6);const a=this.uint8;a[this.x++]=s|r&63,a[this.x++]=128|r>>>6&127,a[this.x++]=128|r>>>13&127,a[this.x++]=128|r>>>20&127,a[this.x++]=128|(o&3)<<5|r>>>27,a[this.x++]=o>>>2}else if(r<=0xffffffffffff){this.ensureCapacity(7);const a=this.uint8;a[this.x++]=s|r&63,a[this.x++]=128|r>>>6&127,a[this.x++]=128|r>>>13&127,a[this.x++]=128|r>>>20&127,a[this.x++]=128|(o&3)<<5|r>>>27,a[this.x++]=128|(o&508)>>>2,a[this.x++]=o>>>9}else{this.ensureCapacity(8);const a=this.uint8;a[this.x++]=s|r&63,a[this.x++]=128|r>>>6&127,a[this.x++]=128|r>>>13&127,a[this.x++]=128|r>>>20&127,a[this.x++]=128|(o&3)<<5|r>>>27,a[this.x++]=128|(o&508)>>>2,a[this.x++]=128|(o&65024)>>>9,a[this.x++]=o>>>16}}}}};return Wa.CrdtWriter=e,Wa}var Qa={},Ka={},Py;function DZ(){if(Py)return Ka;Py=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.isFloat32=void 0;const t=new DataView(new ArrayBuffer(4)),e=A=>(t.setFloat32(0,A),A===t.getFloat32(0));return Ka.isFloat32=e,Ka}var Ja={},Zy;function BZ(){if(Zy)return Ja;Zy=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.CborEncoderFast=void 0;const t=rm(),e=Number.isSafeInteger;let A=class{constructor(r=new t.Writer){this.writer=r}encode(r){return this.writeAny(r),this.writer.flush()}writeAny(r){switch(typeof r){case"number":return this.writeNumber(r);case"string":return this.writeStr(r);case"boolean":return this.writer.u8(244+ +r);case"object":return r?r.constructor===Array?this.writeArr(r):this.writeObj(r):this.writer.u8(246)}}writeCbor(){this.writer.u8u16(217,55799)}writeEnd(){this.writer.u8(255)}writeNull(){this.writer.u8(246)}writeBoolean(r){r?this.writer.u8(245):this.writer.u8(244)}writeNumber(r){e(r)?this.writeInteger(r):typeof r=="bigint"?this.writeBigInt(r):this.writeFloat(r)}writeBigInt(r){r>=0?this.writeBigUint(r):this.writeBigSint(r)}writeBigUint(r){if(r<=Number.MAX_SAFE_INTEGER)return this.writeUInteger(Number(r));this.writer.u8u64(27,r)}writeBigSint(r){if(r>=Number.MIN_SAFE_INTEGER)return this.encodeNint(Number(r));const s=-BigInt(1)-r;this.writer.u8u64(59,s)}writeInteger(r){r>=0?this.writeUInteger(r):this.encodeNint(r)}writeUInteger(r){const s=this.writer;s.ensureCapacity(9);const i=s.uint8;let o=s.x;r<=23?i[o++]=0+r:r<=255?(i[o++]=24,i[o++]=r):r<=65535?(i[o++]=25,s.view.setUint16(o,r),o+=2):r<=4294967295?(i[o++]=26,s.view.setUint32(o,r),o+=4):(i[o++]=27,s.view.setBigUint64(o,BigInt(r)),o+=8),s.x=o}encodeNumber(r){this.writeNumber(r)}encodeInteger(r){this.writeInteger(r)}encodeUint(r){this.writeUInteger(r)}encodeNint(r){const s=-1-r,i=this.writer;i.ensureCapacity(9);const o=i.uint8;let a=i.x;s<24?o[a++]=32+s:s<=255?(o[a++]=56,o[a++]=s):s<=65535?(o[a++]=57,i.view.setUint16(a,s),a+=2):s<=4294967295?(o[a++]=58,i.view.setUint32(a,s),a+=4):(o[a++]=59,i.view.setBigUint64(a,BigInt(s)),a+=8),i.x=a}writeFloat(r){this.writer.u8f64(251,r)}writeBin(r){const s=r.length;this.writeBinHdr(s),this.writer.buf(r,s)}writeBinHdr(r){const s=this.writer;r<=23?s.u8(64+r):r<=255?s.u16(22528+r):r<=65535?s.u8u16(89,r):r<=4294967295?s.u8u32(90,r):s.u8u64(91,r)}writeStr(r){const s=this.writer,o=r.length*4;s.ensureCapacity(5+o);const a=s.uint8;let c=s.x;o<=23?s.x++:o<=255?(a[s.x++]=120,c=s.x,s.x++):o<=65535?(a[s.x++]=121,c=s.x,s.x+=2):(a[s.x++]=122,c=s.x,s.x+=4);const l=s.utf8(r);o<=23?a[c]=96+l:o<=255?a[c]=l:o<=65535?s.view.setUint16(c,l):s.view.setUint32(c,l)}writeStrHdr(r){const s=this.writer;r<=23?s.u8(96+r):r<=255?s.u16(30720+r):r<=65535?s.u8u16(121,r):s.u8u32(122,r)}writeAsciiStr(r){this.writeStrHdr(r.length),this.writer.ascii(r)}writeArr(r){const s=r.length;this.writeArrHdr(s);for(let i=0;i<s;i++)this.writeAny(r[i])}writeArrHdr(r){const s=this.writer;r<=23?s.u8(128+r):r<=255?s.u16(38912+r):r<=65535?s.u8u16(153,r):r<=4294967295?s.u8u32(154,r):s.u8u64(155,r)}writeObj(r){const s=Object.keys(r),i=s.length;this.writeObjHdr(i);for(let o=0;o<i;o++){const a=s[o];this.writeStr(a),this.writeAny(r[a])}}writeObjHdr(r){const s=this.writer;r<=23?s.u8(160+r):r<=255?s.u16(47104+r):r<=65535?s.u8u16(185,r):r<=4294967295?s.u8u32(186,r):s.u8u64(187,r)}writeMapHdr(r){this.writeObjHdr(r)}writeStartMap(){this.writer.u8(191)}writeTag(r,s){this.writeTagHdr(r),this.writeAny(s)}writeTagHdr(r){const s=this.writer;r<=23?s.u8(192+r):r<=255?s.u16(55296+r):r<=65535?s.u8u16(217,r):r<=4294967295?s.u8u32(218,r):s.u8u64(219,r)}writeTkn(r){const s=this.writer;r<=23?s.u8(224+r):r<=255&&s.u16(63488+r)}writeStartStr(){this.writer.u8(127)}writeStrChunk(r){throw new Error("Not implemented")}writeEndStr(){throw new Error("Not implemented")}writeStartBin(){this.writer.u8(95)}writeBinChunk(r){throw new Error("Not implemented")}writeEndBin(){throw new Error("Not implemented")}writeStartArr(){this.writer.u8(159)}writeArrChunk(r){throw new Error("Not implemented")}writeEndArr(){this.writer.u8(255)}writeStartObj(){this.writer.u8(191)}writeObjChunk(r,s){throw new Error("Not implemented")}writeEndObj(){this.writer.u8(255)}};return Ja.CborEncoderFast=A,Ja}var Xa={},Iy;function Im(){if(Iy)return Xa;Iy=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.JsonPackValue=void 0;let t=class{constructor(A){this.val=A}};return Xa.JsonPackValue=t,Xa}var Ry;function jy(){if(Ry)return Qa;Ry=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.CborEncoder=void 0;const t=DZ(),e=Mm(),A=BZ(),n=Im();let r=class extends A.CborEncoderFast{writeUnknown(i){this.writeNull()}writeAny(i){switch(typeof i){case"number":return this.writeNumber(i);case"string":return this.writeStr(i);case"boolean":return this.writer.u8(244+ +i);case"object":{if(!i)return this.writer.u8(246);switch(i.constructor){case Object:return this.writeObj(i);case Array:return this.writeArr(i);case Uint8Array:return this.writeBin(i);case Map:return this.writeMap(i);case e.JsonPackExtension:return this.writeTag(i.tag,i.val);case n.JsonPackValue:{const a=i.val;return this.writer.buf(a,a.length)}default:return i instanceof Uint8Array?this.writeBin(i):Array.isArray(i)?this.writeArr(i):i instanceof Map?this.writeMap(i):this.writeUnknown(i)}}case"undefined":return this.writeUndef();case"bigint":return this.writeBigInt(i);default:return this.writeUnknown(i)}}writeFloat(i){(0,t.isFloat32)(i)?this.writer.u8f32(250,i):this.writer.u8f64(251,i)}writeMap(i){this.writeMapHdr(i.size),i.forEach((o,a)=>{this.writeAny(a),this.writeAny(o)})}writeUndef(){this.writer.u8(247)}};return Qa.CborEncoder=r,Qa}var zy;function Hy(){if(zy)return qa;zy=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.Encoder=void 0;const e=Dt.__importStar($a()),A=Zm(),n=Qt(),r=jy();class s extends r.CborEncoder{constructor(o=new A.CrdtWriter){super(o),this.writer=o,this.patchSid=0}encode(o){this.writer.reset();const a=o.getId(),c=this.patchSid=a.sid,l=this.writer;l.vu57(c),l.vu57(a.time);const u=o.meta;return u===void 0?this.writeUndef():this.writeArr([u]),this.encodeOperations(o),l.flush()}encodeOperations(o){const a=o.ops,c=a.length;this.writer.vu57(c);for(let l=0;l<c;l++)this.encodeOperation(a[l])}encodeId(o){const a=o.sid,c=o.time,l=this.writer;a===this.patchSid?l.b1vu56(0,c):(l.b1vu56(1,c),l.vu57(a))}encodeTss(o){this.encodeId(o),this.writer.vu57(o.span)}writeInsStr(o,a,c,l){const u=this.writer;return o<=7?u.u8(96+o):(u.u8(96),u.vu57(o)),this.encodeId(a),this.encodeId(c),u.utf8(l)}encodeOperation(o){const a=this.writer;switch(o.constructor){case e.NewConOp:{const u=o.val;u instanceof n.Timestamp?(a.u8(1),this.encodeId(u)):(a.u8(0),this.writeAny(u));break}case e.NewValOp:{a.u8(8);break}case e.NewObjOp:{a.u8(16);break}case e.NewVecOp:{a.u8(24);break}case e.NewStrOp:{a.u8(32);break}case e.NewBinOp:{a.u8(40);break}case e.NewArrOp:{a.u8(48);break}case e.InsValOp:{const l=o;a.u8(72),this.encodeId(l.obj),this.encodeId(l.val);break}case e.InsObjOp:{const l=o,u=l.data,f=u.length;f<=7?a.u8(80+f):(a.u8(80),a.vu57(f)),this.encodeId(l.obj);for(let h=0;h<f;h++){const d=u[h];this.writeStr(d[0]),this.encodeId(d[1])}break}case e.InsVecOp:{const l=o,u=l.data,f=u.length;f<=7?a.u8(88+f):(a.u8(88),a.vu57(f)),this.encodeId(l.obj);for(let h=0;h<f;h++){const d=u[h];a.u8(d[0]),this.encodeId(d[1])}break}case e.InsStrOp:{const l=o,u=l.obj,f=l.ref,h=l.data,d=h.length;a.ensureCapacity(24+d*4);const m=a.x,p=this.writeInsStr(d,u,f,h);d!==p&&(a.x=m,this.writeInsStr(p,u,f,h));break}case e.InsBinOp:{const l=o,u=l.data,f=u.length;f<=7?a.u8(104+f):(a.u8(104),a.vu57(f)),this.encodeId(l.obj),this.encodeId(l.ref),a.buf(u,f);break}case e.InsArrOp:{const l=o,u=l.data,f=u.length;f<=7?a.u8(112+f):(a.u8(112),a.vu57(f)),this.encodeId(l.obj),this.encodeId(l.ref);for(let h=0;h<f;h++)this.encodeId(u[h]);break}case e.UpdArrOp:{const l=o;a.u8(120),this.encodeId(l.obj),this.encodeId(l.ref),this.encodeId(l.val);break}case e.DelOp:{const l=o,u=l.what,f=u.length;f<=7?a.u8(128+f):(a.u8(128),a.vu57(f)),this.encodeId(l.obj);for(let h=0;h<f;h++)this.encodeTss(u[h]);break}case e.NopOp:{const u=o.len;u<=7?a.u8(136+u):(a.u8(136),a.vu57(u));break}default:throw new Error("UNKNOWN_OP")}}}return qa.Encoder=s,qa}var ec={},tc={},Ly;function Uy(){if(Ly)return tc;Ly=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.CrdtReader=void 0;const t=Gm();let e=class extends t.Reader{id(){const n=this.u8();return n<=127?[n>>>4,n&15]:(this.x--,[this.b1vu56()[1],this.vu57()])}idSkip(){this.u8()<=127||(this.x--,this.b1vu56(),this.vu57Skip())}vu57(){const n=this.u8();if(n<=127)return n;const r=this.u8();if(r<=127)return r<<7|n&127;const s=this.u8();if(s<=127)return s<<14|(r&127)<<7|n&127;const i=this.u8();if(i<=127)return i<<21|(s&127)<<14|(r&127)<<7|n&127;const o=this.u8();if(o<=127)return o*268435456+((i&127)<<21|(s&127)<<14|(r&127)<<7|n&127);const a=this.u8();if(a<=127)return a*34359738368+((o&127)*268435456+((i&127)<<21|(s&127)<<14|(r&127)<<7|n&127));const c=this.u8();return c<=127?c*4398046511104+((a&127)*34359738368+((o&127)*268435456+((i&127)<<21|(s&127)<<14|(r&127)<<7|n&127))):this.u8()*562949953421312+((c&127)*4398046511104+((a&127)*34359738368+((o&127)*268435456+((i&127)<<21|(s&127)<<14|(r&127)<<7|n&127))))}vu57Skip(){this.u8()<=127||this.u8()<=127||this.u8()<=127||this.u8()<=127||this.u8()<=127||this.u8()<=127||this.u8()<=127||this.x++}b1vu56(){const n=this.u8(),r=n&128?1:0,s=127&n;if(s<=63)return[r,s];const i=this.u8();if(i<=127)return[r,i<<6|s&63];const o=this.u8();if(o<=127)return[r,o<<13|(i&127)<<6|s&63];const a=this.u8();if(a<=127)return[r,a<<20|(o&127)<<13|(i&127)<<6|s&63];const c=this.u8();if(c<=127)return[r,c*134217728+((a&127)<<20|(o&127)<<13|(i&127)<<6|s&63)];const l=this.u8();if(l<=127)return[r,l*17179869184+((c&127)*134217728+((a&127)<<20|(o&127)<<13|(i&127)<<6|s&63))];const u=this.u8();if(u<=127)return[r,u*2199023255552+((l&127)*17179869184+((c&127)*134217728+((a&127)<<20|(o&127)<<13|(i&127)<<6|s&63)))];const f=this.u8();return[r,f*281474976710656+((u&127)*2199023255552+((l&127)*17179869184+((c&127)*134217728+((a&127)<<20|(o&127)<<13|(i&127)<<6|s&63))))]}};return tc.CrdtReader=e,tc}var Ac={},nc={},Fy;function mu(){return Fy||(Fy=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.isUint8Array=void 0,nc.isUint8Array=typeof Tt=="function"?t=>t instanceof Uint8Array||Tt.isBuffer(t):t=>t instanceof Uint8Array),nc}var Rm={},jm={},$y;function kZ(){return $y||($y=1,Object.defineProperty(jm,"__esModule",{value:!0})),jm}var Vy;function pu(){return Vy||(Vy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ORIGIN=void 0;const e=Dt,A=Qt();e.__exportStar(kZ(),t),t.ORIGIN=(0,A.ts)(0,0)})(Rm)),Rm}var zm={},Hm={},rc={},qy;function gu(){if(qy)return rc;qy=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.printBinary=void 0;const t=(e="",A)=>{const n=A[0],r=A[1];let s="";return n&&(s+=`
`+e+" "+n(e+"  ")),r&&(s+=`
`+e+" "+r(e+"  ")),s};return rc.printBinary=t,rc}var sc={},Wy;function EZ(){if(Wy)return sc;Wy=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.printJson=void 0;const t=(e="",A,n=2)=>(JSON.stringify(A,null,n)||"nil").split(`
`).join(`
`+e);return sc.printJson=t,sc}var Qy;function NZ(){return Qy||(Qy=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(Sn(),t),e.__exportStar(gu(),t),e.__exportStar(EZ(),t)})(Hm)),Hm}var Ky;function Lm(){return Ky||(Ky=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.s=t.schema=t.nodes=t.SchemaNode=t.NodeBuilder=void 0;const e=Dt,A=mu(),n=Qt(),r=e.__importStar(uG()),s=NZ(),i=l=>{switch(typeof l){case"number":case"boolean":case"undefined":return!0;case"object":return l===null||l instanceof n.Timestamp;default:return!1}};class o{constructor(u){this._build=u}build(u){return this._build?.(u)??u.con(void 0)}}t.NodeBuilder=o;class a extends o{toString(u){return this.type}}t.SchemaNode=a;var c;(function(l){class u extends a{constructor(x){super(),this.raw=x,this.type="con"}build(x){return x.con(this.raw)}toString(x){return this.type+" "+r.con(this.raw)}}l.con=u;class f extends a{constructor(x){super(),this.raw=x,this.type="str"}build(x){return x.json(this.raw)}toString(x){return this.type+" "+r.con(this.raw)}}l.str=f;class h extends a{constructor(x){super(),this.raw=x,this.type="bin"}build(x){return x.json(this.raw)}toString(x){return this.type+" "+r.bin(this.raw)}}l.bin=h;class d extends a{constructor(x){super(),this.value=x,this.type="val"}build(x){const _=x.val(),G=this.value.build(x);return x.setVal(_,G),_}toString(x){return this.type+(0,s.printTree)(x,[_=>this.value.toString(_)])}}l.val=d;class m extends a{constructor(x){super(),this.value=x,this.type="vec"}build(x){const _=x.vec(),G=this.value,y=G.length;if(y){const v=[];for(let O=0;O<y;O++){const B=G[O];if(!B)continue;const Y=B.build(x);v.push([O,Y])}x.insVec(_,v)}return _}toString(x){return this.type+(0,s.printTree)(x,[...this.value.map((_,G)=>y=>`${G}: ${_?_.toString(y):r.line(_)}`)])}}l.vec=m;class p extends a{constructor(x,_){super(),this.obj=x,this.opt=_,this.type="obj"}optional(){return this}build(x){const _=x.obj(),G=[],y={...this.obj,...this.opt},v=Object.keys(y),O=v.length;if(O){for(let B=0;B<O;B++){const Y=v[B],D=y[Y].build(x);G.push([Y,D])}x.insObj(_,G)}return _}toString(x=""){return this.type+(0,s.printTree)(x,[...[...Object.entries(this.obj)].map(([_,G])=>y=>r.line(_)+(0,s.printTree)(y+" ",[v=>G.toString(v)])),...[...Object.entries(this.opt??[])].map(([_,G])=>y=>r.line(_)+"?"+(0,s.printTree)(y+" ",[v=>G.toString(v)]))])}}l.obj=p;class w extends a{constructor(x){super(),this.arr=x,this.type="arr"}build(x){const _=x.arr(),G=this.arr,y=G.length;if(y){const v=[];for(let O=0;O<y;O++)v.push(G[O].build(x));x.insArr(_,_,v)}return _}toString(x){return this.type+(0,s.printTree)(x,[...this.arr.map((_,G)=>y=>`[${G}]: ${_?_.toString(y):r.line(_)}`)])}}l.arr=w;class b extends a{constructor(x,_){super(),this.id=x,this.data=_,this.type="ext"}build(x){const _=new Uint8Array([this.id,0,0]),G=x.vec();return _[1]=G.sid%256,_[2]=G.time%256,x.insVec(G,[[0,x.constOrJson(t.s.con(_))],[1,this.data.build(x)]]),G}toString(x){return this.type+"("+this.id+")"+(0,s.printTree)(x,[_=>this.data.toString(_)])}}l.ext=b})(c||(t.nodes=c={})),t.schema={con:l=>new c.con(l),str:l=>new c.str(l||""),bin:l=>new c.bin(l),val:l=>new c.val(l),vec:(...l)=>new c.vec(l),obj:(l,u)=>new c.obj(l,u),map:l=>t.schema.obj(l),arr:l=>new c.arr(l),json:l=>{switch(typeof l){case"object":{if(!l)return t.s.val(t.s.con(l));if(l instanceof o)return l;if(Array.isArray(l))return t.s.arr(l.map(u=>t.s.json(u)));if((0,A.isUint8Array)(l))return t.s.bin(l);if(l instanceof n.Timestamp)return t.s.val(t.s.con(l));{const u={},f=Object.keys(l);for(const h of f)u[h]=t.s.jsonCon(l[h]);return t.s.obj(u)}}case"string":return t.s.str(l);default:return t.s.val(t.s.con(l))}},jsonCon:l=>i(l)?t.s.con(l):t.s.json(l),ext:(l,u)=>new c.ext(l,u)},t.s=t.schema})(zm)),zm}var Jy;function Um(){if(Jy)return Ac;Jy=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.PatchBuilder=void 0;const e=Dt.__importStar($a()),A=Qt(),n=mu(),r=aG(),s=pu(),i=Lm(),o=c=>{switch(typeof c){case"number":case"boolean":return!0;default:return c===null}};let a=class{constructor(l){this.clock=l,this.patch=new r.Patch}nextTime(){return this.patch.nextTime()||this.clock.time}flush(){const l=this.patch;return this.patch=new r.Patch,l}obj(){this.pad();const l=this.clock.tick(1);return this.patch.ops.push(new e.NewObjOp(l)),l}arr(){this.pad();const l=this.clock.tick(1);return this.patch.ops.push(new e.NewArrOp(l)),l}vec(){this.pad();const l=this.clock.tick(1);return this.patch.ops.push(new e.NewVecOp(l)),l}str(){this.pad();const l=this.clock.tick(1);return this.patch.ops.push(new e.NewStrOp(l)),l}bin(){this.pad();const l=this.clock.tick(1);return this.patch.ops.push(new e.NewBinOp(l)),l}con(l){this.pad();const u=this.clock.tick(1);return this.patch.ops.push(new e.NewConOp(u,l)),u}val(){this.pad();const l=this.clock.tick(1);return this.patch.ops.push(new e.NewValOp(l)),l}root(l){return this.setVal(s.ORIGIN,l)}insObj(l,u){if(!u.length)throw new Error("EMPTY_TUPLES");this.pad();const f=this.clock.tick(1),h=new e.InsObjOp(f,l,u),d=h.span();return d>1&&this.clock.tick(d-1),this.patch.ops.push(h),f}insVec(l,u){if(!u.length)throw new Error("EMPTY_TUPLES");this.pad();const f=this.clock.tick(1),h=new e.InsVecOp(f,l,u),d=h.span();return d>1&&this.clock.tick(d-1),this.patch.ops.push(h),f}setVal(l,u){this.pad();const f=this.clock.tick(1),h=new e.InsValOp(f,l,u);return this.patch.ops.push(h),f}insStr(l,u,f){if(!f.length)throw new Error("EMPTY_STRING");this.pad();const h=this.clock.tick(1),d=new e.InsStrOp(h,l,u,f),m=d.span();return m>1&&this.clock.tick(m-1),this.patch.ops.push(d),h}insBin(l,u,f){if(!f.length)throw new Error("EMPTY_BINARY");this.pad();const h=this.clock.tick(1),d=new e.InsBinOp(h,l,u,f),m=d.span();return m>1&&this.clock.tick(m-1),this.patch.ops.push(d),h}insArr(l,u,f){this.pad();const h=this.clock.tick(1),d=new e.InsArrOp(h,l,u,f),m=d.span();return m>1&&this.clock.tick(m-1),this.patch.ops.push(d),h}updArr(l,u,f){this.pad();const h=this.clock.tick(1),d=new e.UpdArrOp(h,l,u,f);return this.patch.ops.push(d),h}del(l,u){this.pad();const f=this.clock.tick(1);return this.patch.ops.push(new e.DelOp(f,l,u)),f}nop(l){this.pad();const u=this.clock.tick(l);return this.patch.ops.push(new e.NopOp(u,l)),u}jsonObj(l){const u=this.obj(),f=Object.keys(l);if(f.length){const h=[];for(const d of f){const m=l[d],p=m instanceof A.Timestamp?m:o(m)?this.con(m):this.json(m);h.push([d,p])}this.insObj(u,h)}return u}jsonArr(l){const u=this.arr();if(l.length){const f=[];for(const h of l)f.push(this.json(h));this.insArr(u,u,f)}return u}jsonStr(l){const u=this.str();return l&&this.insStr(u,u,l),u}jsonBin(l){const u=this.bin();return l.length&&this.insBin(u,u,l),u}jsonVal(l){const u=this.val(),f=this.con(l);return this.setVal(u,f),u}json(l){if(l instanceof A.Timestamp)return l;if(l===void 0)return this.con(l);if(l instanceof Array)return this.jsonArr(l);if((0,n.isUint8Array)(l))return this.jsonBin(l);if(l instanceof i.NodeBuilder)return l.build(this);switch(typeof l){case"object":return l===null?this.jsonVal(l):this.jsonObj(l);case"string":return this.jsonStr(l);case"number":case"boolean":return this.jsonVal(l)}throw new Error("INVALID_JSON")}constOrJson(l){return l instanceof A.Timestamp?l:o(l)?this.con(l):this.json(l)}maybeConst(l){return l instanceof A.Timestamp?l:this.con(l)}pad(){const l=this.patch.nextTime();if(!l)return;const u=this.clock.time-l;if(u>0){const f=(0,A.ts)(this.clock.sid,l),h=new e.NopOp(f,u);this.patch.ops.push(h)}}};return Ac.PatchBuilder=a,Ac}var ic={},oc={},ac={},Xy;function TZ(){if(Xy)return ac;Xy=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.decodeF16=void 0;const t=Math.pow,e=A=>{const n=(A&31744)>>10,r=A&1023;return(A>>15?-1:1)*(n?n===31?r?NaN:1/0:t(2,n-15)*(1+r/1024):6103515625e-14*(r/1024))};return ac.decodeF16=e,ac}var eG;function tG(){if(eG)return oc;eG=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.CborDecoderBase=void 0;const t=Dt,e=TZ(),A=Mm(),n=Im(),r=Gm(),s=t.__importDefault(Gy());let i=class{constructor(a=new r.Reader,c=s.default){this.reader=a,this.keyDecoder=c}read(a){return this.reader.reset(a),this.readAny()}decode(a){return this.reader.reset(a),this.readAny()}val(){return this.readAny()}readAny(){const c=this.reader.u8(),l=c>>5,u=c&31;return l<4?l<2?l===0?this.readUint(u):this.readNint(u):l===2?this.readBin(u):this.readStr(u):l<6?l===4?this.readArr(u):this.readObj(u):l===6?this.readTag(u):this.readTkn(u)}readAnyRaw(a){const c=a>>5,l=a&31;return c<4?c<2?c===0?this.readUint(l):this.readNint(l):c===2?this.readBin(l):this.readStr(l):c<6?c===4?this.readArr(l):this.readObj(l):c===6?this.readTag(l):this.readTkn(l)}readMinorLen(a){if(a<24)return a;switch(a){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1;default:throw 1}}readUint(a){if(a<25)return a===24?this.reader.u8():a;if(a<27)return a===25?this.reader.u16():this.reader.u32();{const c=this.reader.u64();return c>9007199254740991?c:Number(c)}}readNint(a){if(a<25)return a===24?-this.reader.u8()-1:-a-1;if(a<27)return a===25?-this.reader.u16()-1:-this.reader.u32()-1;{const c=this.reader.u64();return c>9007199254740991-1?-c-BigInt(1):-Number(c)-1}}readBin(a){const c=this.reader;if(a<=23)return c.buf(a);switch(a){case 24:return c.buf(c.u8());case 25:return c.buf(c.u16());case 26:return c.buf(c.u32());case 27:return c.buf(Number(c.u64()));case 31:{let l=0;const u=[];for(;this.reader.peak()!==255;){const m=this.readBinChunk();l+=m.length,u.push(m)}this.reader.x++;const f=new Uint8Array(l);let h=0;const d=u.length;for(let m=0;m<d;m++){const p=u[m];f.set(p,h),h+=p.length}return f}default:throw 1}}readBinChunk(){const a=this.reader.u8(),c=a>>5,l=a&31;if(c!==2)throw 2;if(l>27)throw 3;return this.readBin(l)}readAsStr(){const c=this.reader.u8(),l=c>>5,u=c&31;if(l!==3)throw 11;return this.readStr(u)}readStr(a){const c=this.reader;if(a<=23)return c.utf8(a);switch(a){case 24:return c.utf8(c.u8());case 25:return c.utf8(c.u16());case 26:return c.utf8(c.u32());case 27:return c.utf8(Number(c.u64()));case 31:{let l="";for(;c.peak()!==255;)l+=this.readStrChunk();return this.reader.x++,l}default:throw 1}}readStrLen(a){if(a<=23)return a;switch(a){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());default:throw 1}}readStrChunk(){const a=this.reader.u8(),c=a>>5,l=a&31;if(c!==3)throw 4;if(l>27)throw 5;return this.readStr(l)}readArr(a){const c=this.readMinorLen(a);return c>=0?this.readArrRaw(c):this.readArrIndef()}readArrRaw(a){const c=[];for(let l=0;l<a;l++)c.push(this.readAny());return c}readArrIndef(){const a=[];for(;this.reader.peak()!==255;)a.push(this.readAny());return this.reader.x++,a}readObj(a){if(a<28){let c=a;switch(a){case 24:c=this.reader.u8();break;case 25:c=this.reader.u16();break;case 26:c=this.reader.u32();break;case 27:c=Number(this.reader.u64());break}const l={};for(let u=0;u<c;u++){const f=this.key();if(f==="__proto__")throw 6;const h=this.readAny();l[f]=h}return l}else{if(a===31)return this.readObjIndef();throw 1}}readObjRaw(a){const c={};for(let l=0;l<a;l++){const u=this.key(),f=this.readAny();c[u]=f}return c}readObjIndef(){const a={};for(;this.reader.peak()!==255;){const c=this.key();if(this.reader.peak()===255)throw 7;const l=this.readAny();a[c]=l}return this.reader.x++,a}key(){const a=this.reader.u8(),c=a>>5,l=a&31;if(c!==3)return String(this.readAnyRaw(a));const u=this.readStrLen(l);if(u>31)return this.reader.utf8(u);const f=this.keyDecoder.decode(this.reader.uint8,this.reader.x,u);return this.reader.skip(u),f}readTag(a){if(a<=23)return this.readTagRaw(a);switch(a){case 24:return this.readTagRaw(this.reader.u8());case 25:return this.readTagRaw(this.reader.u16());case 26:return this.readTagRaw(this.reader.u32());case 27:return this.readTagRaw(Number(this.reader.u64()));default:throw 1}}readTagRaw(a){return new A.JsonPackExtension(a,this.readAny())}readTkn(a){switch(a){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 24:return new n.JsonPackValue(this.reader.u8());case 25:return this.f16();case 26:return this.reader.f32();case 27:return this.reader.f64()}if(a<=23)return new n.JsonPackValue(a);throw 1}f16(){return(0,e.decodeF16)(this.reader.u16())}};return oc.CborDecoderBase=i,oc}var AG;function OZ(){if(AG)return ic;AG=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.CborDecoder=void 0;const t=tG(),e=Im();let A=class extends t.CborDecoderBase{readAsMap(){const r=this.reader.u8(),s=r>>5,i=r&31;if(s===5)return this.readMap(i);throw 0}readMap(r){const s=this.readMinorLen(r);return s>=0?this.readMapRaw(s):this.readMapIndef()}readMapRaw(r){const s=new Map;for(let i=0;i<r;i++){const o=this.readAny(),a=this.readAny();s.set(o,a)}return s}readMapIndef(){const r=new Map;for(;this.reader.peak()!==255;){const s=this.readAny();if(this.reader.peak()===255)throw 7;const i=this.readAny();r.set(s,i)}return this.reader.x++,r}skipN(r){for(let s=0;s<r;s++)this.skipAny()}skipAny(){this.skipAnyRaw(this.reader.u8())}skipAnyRaw(r){const s=r>>5,i=r&31;switch(s){case 0:case 1:this.skipUNint(i);break;case 2:this.skipBin(i);break;case 3:this.skipStr(i);break;case 4:this.skipArr(i);break;case 5:this.skipObj(i);break;case 7:this.skipTkn(i);break;case 6:this.skipTag(i);break}}skipMinorLen(r){if(r<=23)return r;switch(r){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1;default:throw 1}}skipUNint(r){if(!(r<=23))switch(r){case 24:return this.reader.skip(1);case 25:return this.reader.skip(2);case 26:return this.reader.skip(4);case 27:return this.reader.skip(8);default:throw 1}}skipBin(r){const s=this.skipMinorLen(r);if(s>=0)this.reader.skip(s);else{for(;this.reader.peak()!==255;)this.skipBinChunk();this.reader.x++}}skipBinChunk(){const r=this.reader.u8(),s=r>>5,i=r&31;if(s!==2)throw 2;if(i>27)throw 3;this.skipBin(i)}skipStr(r){const s=this.skipMinorLen(r);if(s>=0)this.reader.skip(s);else{for(;this.reader.peak()!==255;)this.skipStrChunk();this.reader.x++}}skipStrChunk(){const r=this.reader.u8(),s=r>>5,i=r&31;if(s!==3)throw 4;if(i>27)throw 5;this.skipStr(i)}skipArr(r){const s=this.skipMinorLen(r);if(s>=0)this.skipN(s);else{for(;this.reader.peak()!==255;)this.skipAny();this.reader.x++}}skipObj(r){const s=this.readMinorLen(r);if(s>=0)return this.skipN(s*2);for(;this.reader.peak()!==255;){if(this.skipAny(),this.reader.peak()===255)throw 7;this.skipAny()}this.reader.x++}skipTag(r){if(this.skipMinorLen(r)<0)throw 1;this.skipAny()}skipTkn(r){switch(r){case 24:this.reader.skip(1);return;case 25:this.reader.skip(2);return;case 26:this.reader.skip(4);return;case 27:this.reader.skip(8);return}if(!(r<=23))throw 1}validate(r,s=0,i=r.length){this.reader.reset(r),this.reader.x=s;const o=s;if(this.skipAny(),this.reader.x-o!==i)throw 8}decodeLevel(r){return this.reader.reset(r),this.readLevel()}readLevel(){const r=this.reader.u8(),s=r>>5,i=r&31;switch(s){case 4:return this.readArrLevel(i);case 5:return this.readObjLevel(i);default:return super.readAnyRaw(r)}}readPrimitiveOrVal(){switch(this.reader.peak()>>5){case 4:case 5:return this.readAsValue();default:return this.readAny()}}readAsValue(){const r=this.reader,s=r.x;this.skipAny();const i=r.x;return new e.JsonPackValue(r.uint8.subarray(s,i))}readObjLevel(r){const s=this.readMinorLen(r);return s>=0?this.readObjRawLevel(s):this.readObjIndefLevel()}readObjRawLevel(r){const s={};for(let i=0;i<r;i++){const o=this.key(),a=this.readPrimitiveOrVal();s[o]=a}return s}readObjIndefLevel(){const r={};for(;this.reader.peak()!==255;){const s=this.key();if(this.reader.peak()===255)throw 7;const i=this.readPrimitiveOrVal();r[s]=i}return this.reader.x++,r}readArrLevel(r){const s=this.readMinorLen(r);return s>=0?this.readArrRawLevel(s):this.readArrIndefLevel()}readArrRawLevel(r){const s=[];for(let i=0;i<r;i++)s.push(this.readPrimitiveOrVal());return s}readArrIndefLevel(){const r=[];for(;this.reader.peak()!==255;)r.push(this.readPrimitiveOrVal());return this.reader.x++,r}readHdr(r){const s=this.reader.u8();if(s>>5!==r)throw 0;const o=s&31;if(o<24)return o;switch(o){case 24:return this.reader.u8();case 25:return this.reader.u16();case 26:return this.reader.u32();case 27:return Number(this.reader.u64());case 31:return-1}throw 1}readStrHdr(){return this.readHdr(3)}readObjHdr(){return this.readHdr(5)}readArrHdr(){return this.readHdr(4)}findKey(r){const s=this.readObjHdr();for(let i=0;i<s;i++){if(this.key()===r)return this;this.skipAny()}throw 9}findIndex(r){const s=this.readArrHdr();if(r>=s)throw 10;for(let i=0;i<r;i++)this.skipAny();return this}find(r){for(let s=0;s<r.length;s++){const i=r[s];typeof i=="string"?this.findKey(i):this.findIndex(i)}return this}};return ic.CborDecoder=A,ic}var nG;function rG(){if(nG)return ec;nG=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.Decoder=void 0;const t=Uy(),e=Qt(),A=Um(),n=OZ();class r extends n.CborDecoder{constructor(i=new t.CrdtReader){super(i)}decode(i){return this.reader.reset(i),this.readPatch()}readPatch(){const i=this.reader,o=i.vu57(),a=i.vu57(),l=o===1?new e.ServerClockVector(1,a):new e.ClockVector(o,a);this.patchSid=l.sid;const u=this.builder=new A.PatchBuilder(l),f=this.val();return Array.isArray(f)&&(u.patch.meta=f[0]),this.decodeOperations(),u.patch}decodeId(){const i=this.reader,[o,a]=i.b1vu56();return o?new e.Timestamp(i.vu57(),a):new e.Timestamp(this.patchSid,a)}decodeTss(){const i=this.decodeId(),o=this.reader.vu57();return(0,e.interval)(i,0,o)}decodeOperations(){const o=this.reader.vu57();for(let a=0;a<o;a++)this.decodeOperation()}decodeOperation(){const i=this.builder,o=this.reader,a=o.u8();switch(a>>3){case 0:{const l=a&7;i.con(l?this.decodeId():this.val());break}case 1:{i.val();break}case 2:{i.obj();break}case 3:{i.vec();break}case 4:{i.str();break}case 5:{i.bin();break}case 6:{i.arr();break}case 9:{const l=this.decodeId(),u=this.decodeId();i.setVal(l,u);break}case 10:{const l=a&7||o.vu57(),u=this.decodeId(),f=[];for(let h=0;h<l;h++){const d=this.val();if(typeof d!="string")continue;const m=this.decodeId();f.push([d,m])}i.insObj(u,f);break}case 11:{const l=a&7||o.vu57(),u=this.decodeId(),f=[];for(let h=0;h<l;h++){const d=this.val();if(typeof d!="number")continue;const m=this.decodeId();f.push([d,m])}i.insVec(u,f);break}case 12:{const l=a&7||o.vu57(),u=this.decodeId(),f=this.decodeId(),h=o.utf8(l);i.insStr(u,f,h);break}case 13:{const l=a&7||o.vu57(),u=this.decodeId(),f=this.decodeId(),h=o.buf(l);if(!(h instanceof Uint8Array))return;i.insBin(u,f,h);break}case 14:{const l=a&7||o.vu57(),u=this.decodeId(),f=this.decodeId(),h=[];for(let d=0;d<l;d++)h.push(this.decodeId());i.insArr(u,f,h);break}case 15:{const l=this.decodeId(),u=this.decodeId(),f=this.decodeId();i.updArr(l,u,f);break}case 16:{const l=a&7||o.vu57(),u=this.decodeId(),f=[];for(let h=0;h<l;h++)f.push(this.decodeTss());i.del(u,f);break}case 17:{const l=a&7||o.vu57();i.nop(l);break}default:throw new Error("UNKNOWN_OP")}}}return ec.Decoder=r,ec}var Fm={},sG;function YZ(){return sG||(sG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.decoder=t.encode=t.encoder=void 0;const e=Hy(),A=rG(),n=Zm(),r=new n.CrdtWriter(1024*4);t.encoder=new e.Encoder(r);const s=o=>t.encoder.encode(o);t.encode=s,t.decoder=new A.Decoder;const i=o=>t.decoder.decode(o);t.decode=i})(Fm)),Fm}var iG;function SZ(){return iG||(iG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(Hy(),t),e.__exportStar(rG(),t),e.__exportStar(YZ(),t)})(Pm)),Pm}var oG;function aG(){if(oG)return Va;oG=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.Patch=void 0;const e=Dt.__importStar($a()),A=Qt(),n=Sn(),r=SZ();let s=class MS{constructor(){this.ops=[],this.meta=void 0}static fromBinary(o){return(0,r.decode)(o)}getId(){const o=this.ops[0];if(o)return o.id}span(){let o=0;for(const a of this.ops)o+=a.span();return o}nextTime(){const o=this.ops,a=o.length;if(!a)return 0;const c=o[a-1];return c.id.time+c.span()}rewriteTime(o){const a=new MS,c=this.ops,l=c.length,u=a.ops;for(let f=0;f<l;f++){const h=c[f];h instanceof e.DelOp?u.push(new e.DelOp(o(h.id),o(h.obj),h.what)):h instanceof e.NewConOp?u.push(new e.NewConOp(o(h.id),h.val instanceof A.Timestamp?o(h.val):h.val)):h instanceof e.NewVecOp?u.push(new e.NewVecOp(o(h.id))):h instanceof e.NewValOp?u.push(new e.NewValOp(o(h.id))):h instanceof e.NewObjOp?u.push(new e.NewObjOp(o(h.id))):h instanceof e.NewStrOp?u.push(new e.NewStrOp(o(h.id))):h instanceof e.NewBinOp?u.push(new e.NewBinOp(o(h.id))):h instanceof e.NewArrOp?u.push(new e.NewArrOp(o(h.id))):h instanceof e.InsArrOp?u.push(new e.InsArrOp(o(h.id),o(h.obj),o(h.ref),h.data.map(o))):h instanceof e.UpdArrOp?u.push(new e.UpdArrOp(o(h.id),o(h.obj),o(h.ref),o(h.val))):h instanceof e.InsStrOp?u.push(new e.InsStrOp(o(h.id),o(h.obj),o(h.ref),h.data)):h instanceof e.InsBinOp?u.push(new e.InsBinOp(o(h.id),o(h.obj),o(h.ref),h.data)):h instanceof e.InsValOp?u.push(new e.InsValOp(o(h.id),o(h.obj),o(h.val))):h instanceof e.InsObjOp?u.push(new e.InsObjOp(o(h.id),o(h.obj),h.data.map(([d,m])=>[d,o(m)]))):h instanceof e.InsVecOp?u.push(new e.InsVecOp(o(h.id),o(h.obj),h.data.map(([d,m])=>[d,o(m)]))):h instanceof e.NopOp&&u.push(new e.NopOp(o(h.id),h.len))}return a}rebase(o,a){const c=this.getId();if(!c)throw new Error("EMPTY_PATCH");const l=c.sid,u=c.time;if(a??(a=u),u===o)return this;const f=o-u;return this.rewriteTime(h=>{if(h.sid!==l)return h;const d=h.time;return d<a?h:(0,A.ts)(l,d+f)})}clone(){return this.rewriteTime(o=>o)}toBinary(){return(0,r.encode)(this)}toString(o=""){const a=this.getId();return`Patch ${a?(0,A.printTs)(a):"(nil)"}!${this.span()}`+(0,n.printTree)(o,this.ops.map(l=>u=>l.toString(u)))}};return Va.Patch=s,Va}var cG;function xi(){return cG||(cG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(GZ(),t),e.__exportStar(Qt(),t),e.__exportStar($a(),t),e.__exportStar(aG(),t),e.__exportStar(Um(),t),e.__exportStar(Lm(),t)})(Tm)),Tm}var lG;function uG(){return lG||(lG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bin=t.con=t.line=void 0;const e=yZ(),A=xi();t.line=e.toLine;const n=s=>s instanceof Uint8Array?"Uint8Array "+(0,t.bin)(s):`{ ${s instanceof A.Timestamp?(0,A.printTs)(s):(0,t.line)(s)} }`;t.con=n;const r=s=>"{ "+(""+s).replaceAll(",",", ")+" }";t.bin=r})(Em)),Em}var hG;function wu(){if(hG)return La;hG=1,Object.defineProperty(La,"__esModule",{value:!0}),La.ConNode=void 0;const t=uG(),e=Qt();let A=class{constructor(r,s){this.id=r,this.val=s,this.api=void 0}children(){}child(){}container(){}view(){return this.val}name(){return"con"}toString(r){return this.name()+" "+(0,e.printTs)(this.id)+" "+(0,t.con)(this.val)}};return La.ConNode=A,La}var cc={},yi={},Gi={},lc={},uc={},hc={},fG;function CZ(){if(fG)return hc;fG=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.RelativeTimestamp=void 0;let t=class{constructor(A,n){this.sessionIndex=A,this.timeDiff=n}};return hc.RelativeTimestamp=t,hc}var dG;function PZ(){if(dG)return uc;dG=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.ClockEncoder=void 0;const t=Qt(),e=CZ();class A{constructor(s,i){this.index=s,this.clock=i}}let n=class{constructor(){this.table=new Map,this.index=1,this.clock=null}reset(s){this.index=1,this.clock=s;const i=new A(this.index++,(0,t.tick)(s,-1));this.table.clear(),this.table.set(s.sid,i)}append(s){const i=s.time,o=s.sid;let a=this.table.get(o);if(!a){let u=this.clock.peers.get(o);u||(u=new t.Timestamp(o,this.clock.time-1)),a=new A(this.index++,u),this.table.set(o,a)}const l=a.clock.time-i;if(l<0)throw new Error("TIME_TRAVEL");return new e.RelativeTimestamp(a.index,l)}toJson(){const s=[];return this.table.forEach(i=>{const o=i.clock;s.push(o.sid,o.time)}),s}};return uc.ClockEncoder=n,uc}var Mi={},mG;function pG(){if(mG)return Mi;mG=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.CRDT_MAJOR_OVERLAY=Mi.CRDT_MAJOR=void 0;var t;(function(A){A[A.CON=0]="CON",A[A.VAL=1]="VAL",A[A.OBJ=2]="OBJ",A[A.VEC=3]="VEC",A[A.STR=4]="STR",A[A.BIN=5]="BIN",A[A.ARR=6]="ARR"})(t||(Mi.CRDT_MAJOR=t={}));var e;return(function(A){A[A.CON=0]="CON",A[A.VAL=32]="VAL",A[A.VEC=96]="VEC",A[A.OBJ=64]="OBJ",A[A.STR=128]="STR",A[A.BIN=160]="BIN",A[A.ARR=192]="ARR"})(e||(Mi.CRDT_MAJOR_OVERLAY=e={})),Mi}var gG;function ZZ(){if(gG)return lc;gG=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.Encoder=void 0;const e=Dt.__importStar(os()),A=PZ(),n=Zm(),r=Qt(),s=jy(),i=pG();let o=class extends s.CborEncoder{constructor(c){super(c||new n.CrdtWriter),this.clockEncoder=new A.ClockEncoder,this.time=0,this.cTableEntry=l=>{const u=l.clock,f=this.writer;f.vu57(u.sid),f.vu57(u.time)},this.tsLogical=l=>{const u=this.clockEncoder.append(l);this.writer.id(u.sessionIndex,u.timeDiff)},this.tsServer=l=>{this.writer.vu57(l.time)},this.ts=this.tsLogical,this.cKey=(l,u)=>{this.writeStr(u),this.cNode(this.doc.index.get(l))}}encode(c){this.doc=c;const l=this.writer;return l.reset(),c.clock.sid===1?this.encodeServer(c):this.encodeLogical(c),l.flush()}encodeLogical(c){const l=this.writer;this.ts=this.tsLogical,this.clockEncoder.reset(c.clock),l.ensureCapacity(4);const u=l.x0,f=l.x;l.x+=4,this.cRoot(c.root),this.encodeClockTable(u,f)}encodeServer(c){this.ts=this.tsServer;const l=this.writer;l.u8(128),l.vu57(this.time=c.clock.time),this.cRoot(c.root)}encodeClockTable(c,l){const u=this.writer,f=u.x0-c;u.view.setUint32(u.x0+(l-c),u.x-l-f-4);const d=this.clockEncoder.table,m=d.size;u.vu57(m),d.forEach(this.cTableEntry)}cRoot(c){c.val.sid===0?this.writer.u8(0):this.cNode(c.node())}writeTL(c,l){const u=this.writer;l<31?u.u8(c|l):(u.u8(c|31),u.vu57(l))}cNode(c){c instanceof e.ConNode?this.cCon(c):c instanceof e.ValNode?this.cVal(c):c instanceof e.StrNode?this.cStr(c):c instanceof e.ObjNode?this.cObj(c):c instanceof e.VecNode?this.cVec(c):c instanceof e.ArrNode?this.cArr(c):c instanceof e.BinNode&&this.cBin(c)}cCon(c){const l=c.val;this.ts(c.id),l instanceof r.Timestamp?(this.writer.u8(1),this.ts(l)):(this.writer.u8(0),this.writeAny(l))}cVal(c){this.ts(c.id),this.writer.u8(32),this.cNode(c.node())}cObj(c){this.ts(c.id);const l=c.keys;this.writeTL(i.CRDT_MAJOR_OVERLAY.OBJ,l.size),l.forEach(this.cKey)}cVec(c){const l=c.elements,u=l.length;this.ts(c.id),this.writeTL(i.CRDT_MAJOR_OVERLAY.VEC,u);const f=this.doc.index;for(let h=0;h<u;h++){const d=l[h];d?this.cNode(f.get(d)):this.writer.u8(0)}}cStr(c){const l=this.ts;l(c.id),this.writeTL(i.CRDT_MAJOR_OVERLAY.STR,c.count);for(let u=c.first();u;u=c.next(u))l(u.id),u.del?this.writeUInteger(u.span):this.writeStr(u.data)}cBin(c){const l=this.ts,u=this.writer;l(c.id),this.writeTL(i.CRDT_MAJOR_OVERLAY.BIN,c.count);for(let f=c.first();f;f=c.next(f)){l(f.id);const h=f.span,d=f.del;u.b1vu56(~~d,h),!d&&u.buf(f.data,h)}}cArr(c){const l=this.ts,u=this.writer;l(c.id),this.writeTL(i.CRDT_MAJOR_OVERLAY.ARR,c.count);const f=this.doc.index;for(let h=c.first();h;h=c.next(h)){l(h.id);const d=h.span,m=h.del;if(u.b1vu56(~~m,d),m)continue;const p=h.data;for(let w=0;w<d;w++)this.cNode(f.get(p[w]))}}};return lc.Encoder=o,lc}var fc={},dc={},wG;function IZ(){if(wG)return dc;wG=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.ClockDecoder=void 0;const t=Qt();let e=class vS{static fromArr(n){const r=new vS(n[0],n[1]),s=n.length;for(let i=2;i<s;i+=2)r.pushTuple(n[i],n[i+1]);return r}constructor(n,r){this.table=[],this.clock=new t.ClockVector(n,r+1),this.table.push((0,t.ts)(n,r))}pushTuple(n,r){const s=(0,t.ts)(n,r);this.clock.observe(s,1),this.table.push(s)}decodeId(n,r){if(!n)return(0,t.ts)(0,r);const s=this.table[n-1];if(!s)throw new Error("INVALID_CLOCK_TABLE");return(0,t.ts)(s.sid,s.time-r)}};return dc.ClockDecoder=e,dc}var bG;function RZ(){if(bG)return fc;bG=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.Decoder=void 0;const e=Dt.__importStar(os()),A=IZ(),n=Uy(),r=Qt(),s=cp(),i=tG(),o=pG();let a=class extends i.CborDecoderBase{constructor(){super(new n.CrdtReader),this.clockDecoder=void 0,this.time=-1,this.cStrChunk=()=>{const l=this.ts(),u=this.val();return typeof u=="string"?new e.StrChunk(l,u.length,u):new e.StrChunk(l,~~u,"")},this.cBinChunk=()=>{const l=this.ts(),u=this.reader,[f,h]=u.b1vu56();return f?new e.BinChunk(l,h,void 0):new e.BinChunk(l,h,u.buf(h))},this.cArrChunk=()=>{const l=this.ts(),[u,f]=this.reader.b1vu56();if(u)return new e.ArrChunk(l,f,void 0);const h=[];for(let d=0;d<f;d++)h.push(this.cNode().id);return new e.ArrChunk(l,f,h)}}decode(l,u){this.clockDecoder=void 0,this.time=-1;const f=this.reader;if(f.reset(l),f.peak()&128){f.x++;const d=this.time=f.vu57();u||(u=s.Model.withServerClock(void 0,d))}else if(this.decodeClockTable(),!u){const d=this.clockDecoder.clock;u=s.Model.create(void 0,d)}return this.doc=u,u.root=new e.RootNode(this.doc,this.cRoot().id),this.clockDecoder=void 0,u}decodeClockTable(){const l=this.reader,u=l.u32(),f=l.x;l.x+=u;const h=l.vu57(),d=l.vu57(),m=l.vu57();this.clockDecoder=new A.ClockDecoder(d,m);for(let p=1;p<h;p++){const w=l.vu57(),b=l.vu57();this.clockDecoder.pushTuple(w,b)}l.x=f}ts(){if(this.time<0){const[f,h]=this.reader.id();return this.clockDecoder.decodeId(f,h)}else return new r.Timestamp(1,this.reader.vu57())}cRoot(){const l=this.reader;return l.uint8[l.x]?this.cNode():s.UNDEFINED}cNode(){const l=this.reader,u=this.ts(),f=l.u8(),h=f>>5,d=f&31;switch(h){case o.CRDT_MAJOR.CON:return this.cCon(u,d);case o.CRDT_MAJOR.VAL:return this.cVal(u);case o.CRDT_MAJOR.OBJ:return this.cObj(u,d!==31?d:l.vu57());case o.CRDT_MAJOR.VEC:return this.cVec(u,d!==31?d:l.vu57());case o.CRDT_MAJOR.STR:return this.cStr(u,d!==31?d:l.vu57());case o.CRDT_MAJOR.BIN:return this.cBin(u,d!==31?d:l.vu57());case o.CRDT_MAJOR.ARR:return this.cArr(u,d!==31?d:l.vu57())}throw new Error("UNKNOWN_NODE")}cCon(l,u){const f=this.doc,h=u?this.ts():this.val(),d=new e.ConNode(l,h);return f.index.set(l,d),d}cVal(l){const u=this.cNode(),f=this.doc,h=new e.ValNode(f,l,u.id);return f.index.set(l,h),h}cObj(l,u){const f=new e.ObjNode(this.doc,l);for(let h=0;h<u;h++)this.cObjChunk(f);return this.doc.index.set(l,f),f}cObjChunk(l){const u=this.key();l.keys.set(u,this.cNode().id)}cVec(l,u){const f=this.reader,h=new e.VecNode(this.doc,l),d=h.elements;for(let m=0;m<u;m++)f.peak()?d.push(this.cNode().id):(f.x++,d.push(void 0));return this.doc.index.set(l,h),h}cStr(l,u){const f=new e.StrNode(l);return u&&f.ingest(u,this.cStrChunk),this.doc.index.set(l,f),f}cBin(l,u){const f=new e.BinNode(l);return u&&f.ingest(u,this.cBinChunk),this.doc.index.set(l,f),f}cArr(l,u){const f=new e.ArrNode(this.doc,l);return u&&f.ingest(u,this.cArrChunk),this.doc.index.set(l,f),f}};return fc.Decoder=a,fc}var _G;function jZ(){if(_G)return Gi;_G=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.decoder=Gi.encoder=void 0;const t=ZZ(),e=RZ();return Gi.encoder=new t.Encoder,Gi.decoder=new e.Decoder,Gi}var $m={},hA={},mc={},xG;function zZ(){if(xG)return mc;xG=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.find=void 0;const t=ay(),e=os(),A=(n,r)=>{const s=(0,t.toPath)(r);let i=n;const o=s.length;if(!o)return i;let a=0;for(;a<o&&i;){const c=s[a++];if(i=i.container(),!i)throw new Error("NOT_CONTAINER");if(i instanceof e.ObjNode){const l=i.get(String(c));if(!l)throw new Error("NOT_FOUND");i=l}else if(i instanceof e.ArrNode){const l=i.getNode(Number(c));if(!l)throw new Error("NOT_FOUND");i=l}else if(i instanceof e.VecNode){const l=i.get(Number(c));if(!l)throw new Error("NOT_FOUND");i=l}}return i};return mc.find=A,mc}var pc={},hr={},gc={},yG;function GG(){if(yG)return gc;yG=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.FanOut=void 0;class t{constructor(){this.listeners=new Set}emit(A){this.listeners.forEach(n=>n(A))}listen(A){const n=this.listeners;return n.add(A),()=>n.delete(A)}}return gc.FanOut=t,gc}var MG;function vG(){if(MG)return hr;MG=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.OnNewFanOut=hr.MapFanOut=hr.MicrotaskBufferFanOut=hr.MergeFanOut=void 0;const t=GG();class e extends t.FanOut{constructor(i){super(),this.fanouts=i,this.unsubs=[]}listen(i){this.listeners.size||(this.unsubs=this.fanouts.map(a=>a.listen(c=>this.emit(c))));const o=super.listen(i);return()=>{if(o(),!this.listeners.size){for(const a of this.unsubs)a();this.unsubs=[]}}}}hr.MergeFanOut=e;class A extends t.FanOut{constructor(i){super(),this.source=i,this.buffer=[],this.unsub=void 0}listen(i){this.unsub||(this.unsub=this.source.listen(a=>{const c=this.buffer;c.length||queueMicrotask(()=>{this.emit(c),this.buffer=[]}),c.push(a)}));const o=super.listen(i);return()=>{o(),this.listeners.size||this.clear()}}clear(){this.listeners.clear(),this.buffer=[],this.unsub?.(),this.unsub=void 0}}hr.MicrotaskBufferFanOut=A;class n extends t.FanOut{constructor(i,o){super(),this.source=i,this.mapper=o,this.unsub=void 0}listen(i){this.unsub||(this.unsub=this.source.listen(a=>this.emit(this.mapper(a))));const o=super.listen(i);return()=>{o(),this.listeners.size||this.clear()}}clear(){this.listeners.clear(),this.unsub?.(),this.unsub=void 0}}hr.MapFanOut=n;class r extends t.FanOut{constructor(i,o=void 0){super(),this.source=i,this.last=o,this.unsub=void 0}listen(i){this.unsub||(this.unsub=this.source.listen(a=>{this.last!==a&&this.emit(this.last=a)}));const o=super.listen(i);return()=>{o(),this.listeners.size||this.clear()}}clear(){this.listeners.clear(),this.last=void 0,this.unsub?.(),this.unsub=void 0}}return hr.OnNewFanOut=r,hr}var DG;function HZ(){if(DG)return pc;DG=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.NodeEvents=void 0;const t=vG();let e=class{constructor(n){this.api=n,this.subscribe=r=>this.onViewChanges.listen(()=>r()),this.getSnapshot=()=>this.api.view(),this.onChanges=new t.MapFanOut(this.api.api.onChanges,this.getSnapshot),this.onViewChanges=new t.OnNewFanOut(this.onChanges,this.api.view())}handleDelete(){this.onViewChanges.clear(),this.onChanges.clear()}};return pc.NodeEvents=e,pc}var wc={},BG;function LZ(){if(BG)return wc;BG=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.ExtNode=void 0;const t=Qt();let e=class{constructor(n){this.data=n,this.api=void 0,this.id=n.id}children(n){}child(){return this.data}container(){return this.data.container()}toString(n,r){return this.name()+(r?" "+(0,t.printTs)(r):"")+" "+this.data.toString(n)}};return wc.ExtNode=e,wc}var vi={},bc={},kG;function UZ(){if(kG)return bc;kG=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.cmpUint8Array=void 0;const t=(e,A)=>{const n=e.length;if(n!==A.length)return!1;for(let r=0;r<n;r++)if(e[r]!==A[r])return!1;return!0};return bc.cmpUint8Array=t,bc}var Vm={},EG;function qm(){return EG||(EG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.invert=t.dst=t.src=t.diffEdit=t.diff=t.overlap=t.sfx=t.pfx=t.normalize=void 0;const e=g=>{const x=g.length;if(x<2)return g;let _=0;e:{if(!g[0][1])break e;for(_=1;_<x;_++){const y=g[_-1],v=g[_];if(!v[1]||y[0]===v[0])break e}return g}const G=[];for(let y=0;y<_;y++)G.push(g[y]);for(let y=_;y<x;y++){const v=g[y];if(!v[1])continue;const O=G.length>0?G[G.length-1]:null;O&&O[0]===v[0]?O[1]+=v[1]:G.push(v)}return G};t.normalize=e;const A=g=>{const x=g.charCodeAt(0);return x>=56320&&x<=57343},n=g=>{const x=g.charCodeAt(g.length-1);return x>=55296&&x<=56319},r=(g,x)=>{g.push([0,""]);let _=0,G=0,y=0,v="",O="",B=0;for(;_<g.length;){if(_<g.length-1&&!g[_][1]){g.splice(_,1);continue}const D=g[_];switch(D[0]){case 1:y++,_++,O+=D[1];break;case-1:G++,_++,v+=D[1];break;case 0:{let N=_-y-G-1;if(x){const I=g[N];if(N>=0){let q=I[1];if(n(q)){const C=q.slice(-1);if(I[1]=q=q.slice(0,-1),v=C+v,O=C+O,!q){g.splice(N,1),_--;let j=N-1;const te=g[j];if(te){const W=te[0];W===1?(y++,j--,O=te[1]+O):W===-1&&(G++,j--,v=te[1]+v)}N=j}}}const $=g[_],V=$[1];if(A(V)){const q=V.charAt(0);$[1]=V.slice(1),v+=q,O+=q}}if(_<g.length-1&&!g[_][1]){g.splice(_,1);break}const M=v.length>0,Z=O.length>0;if(M||Z){M&&Z&&(B=(0,t.pfx)(O,v),B!==0&&(N>=0?g[N][1]+=O.slice(0,B):(g.splice(0,0,[0,O.slice(0,B)]),_++),O=O.slice(B),v=v.slice(B)),B=(0,t.sfx)(O,v),B!==0&&(g[_][1]=O.slice(O.length-B)+g[_][1],O=O.slice(0,O.length-B),v=v.slice(0,v.length-B)));const I=y+G,$=v.length,V=O.length;$===0&&V===0?(g.splice(_-I,I),_=_-I):$===0?(g.splice(_-I,I,[1,O]),_=_-I+1):V===0?(g.splice(_-I,I,[-1,v]),_=_-I+1):(g.splice(_-I,I,[-1,v],[1,O]),_=_-I+2)}const R=g[_-1];_!==0&&R[0]===0?(R[1]+=g[_][1],g.splice(_,1)):_++,y=0,G=0,v="",O="";break}}}g[g.length-1][1]===""&&g.pop();let Y=!1;for(_=1;_<g.length-1;){const D=g[_-1],N=g[_+1];if(D[0]===0&&N[0]===0){const M=D[1],Z=g[_],R=Z[1],I=N[1];R.slice(R.length-M.length)===M?(g[_][1]=M+R.slice(0,R.length-M.length),N[1]=M+I,g.splice(_-1,1),Y=!0):R.slice(0,I.length)===I&&(D[1]+=N[1],Z[1]=R.slice(I.length)+I,g.splice(_+1,1),Y=!0)}_++}Y&&r(g,x)},s=(g,x,_,G)=>{if(_>0&&_<g.length){const O=g.charCodeAt(_);O>=56320&&O<=57343&&_--}if(G>0&&G<x.length){const O=x.charCodeAt(G);O>=56320&&O<=57343&&G--}const y=u(g.slice(0,_),x.slice(0,G),!1),v=u(g.slice(_),x.slice(G),!1);return y.concat(v)},i=(g,x)=>{const _=g.length,G=x.length,y=Math.ceil((_+G)/2),v=y,O=2*y,B=new Array(O),Y=new Array(O);for(let $=0;$<O;$++)B[$]=-1,Y[$]=-1;B[v+1]=0,Y[v+1]=0;const D=_-G,N=D%2!==0;let M=0,Z=0,R=0,I=0;for(let $=0;$<y;$++){for(let V=-$+M;V<=$-Z;V+=2){const q=v+V;let C=0;const j=B[q-1],te=B[q+1];V===-$||V!==$&&j<te?C=te:C=j+1;let W=C-V;for(;C<_&&W<G&&g.charAt(C)===x.charAt(W);)C++,W++;if(B[q]=C,C>_)Z+=2;else if(W>G)M+=2;else if(N){const J=v+D-V,fe=Y[J];if(J>=0&&J<O&&fe!==-1&&C>=_-fe)return s(g,x,C,W)}}for(let V=-$+R;V<=$-I;V+=2){const q=v+V;let C=V===-$||V!==$&&Y[q-1]<Y[q+1]?Y[q+1]:Y[q-1]+1,j=C-V;for(;C<_&&j<G&&g.charAt(_-C-1)===x.charAt(G-j-1);)C++,j++;if(Y[q]=C,C>_)I+=2;else if(j>G)R+=2;else if(!N){const te=v+D-V,W=B[te];if(te>=0&&te<O&&W!==-1){const J=v+W-te;if(C=_-C,W>=C)return s(g,x,W,J)}}}}return[[-1,g],[1,x]]},o=(g,x)=>{if(!g)return[[1,x]];if(!x)return[[-1,g]];const _=g.length,G=x.length,y=_>G?g:x,v=_>G?x:g,O=v.length,B=y.indexOf(v);if(B>=0){const Y=y.slice(0,B),D=y.slice(B+O);return _>G?[[-1,Y],[0,v],[-1,D]]:[[1,Y],[0,v],[1,D]]}return O===1?[[-1,g],[1,x]]:i(g,x)},a=(g,x)=>{if(!g||!x||g.charAt(0)!==x.charAt(0))return 0;let _=0,G=Math.min(g.length,x.length),y=G,v=0;for(;_<y;)g.slice(v,y)===x.slice(v,y)?(_=y,v=_):G=y,y=Math.floor((G-_)/2+_);const O=g.charCodeAt(y-1);return O>=55296&&O<=56319&&y--,y};t.pfx=a;const c=(g,x)=>{if(!g||!x||g.slice(-1)!==x.slice(-1))return 0;let _=0,G=Math.min(g.length,x.length),y=G,v=0;for(;_<y;)g.slice(g.length-y,g.length-v)===x.slice(x.length-y,x.length-v)?(_=y,v=_):G=y,y=Math.floor((G-_)/2+_);if(y>0&&y<g.length){const O=g.length-y-1,B=g.charCodeAt(O),Y=B>=55296&&B<=56319,D=B===8205||B>=65024&&B<=65039||B>=768&&B<=879;if(Y||D)for(y--;y>0;){const N=g.length-y-1;if(N<0)break;const M=g.charCodeAt(N),Z=M>=55296&&M<=56319,R=M===8205||M>=65024&&M<=65039||M>=768&&M<=879;if(!Z&&!R)break;y--}}return y};t.sfx=c;const l=(g,x)=>{const _=g.length,G=x.length;if(_===0||G===0)return 0;let y=_;if(_>G?(y=G,g=g.substring(_-G)):_<G&&(x=x.substring(0,_)),g===x)return y;let v=0,O=1;for(;;){const B=g.substring(y-O),Y=x.indexOf(B);if(Y===-1)return v;O+=Y,(Y===0||g.substring(y-O)===x.substring(0,O))&&(v=O,O++)}};t.overlap=l;const u=(g,x,_)=>{if(g===x)return g?[[0,g]]:[];const G=(0,t.pfx)(g,x),y=g.slice(0,G);g=g.slice(G),x=x.slice(G);const v=(0,t.sfx)(g,x),O=g.slice(g.length-v);g=g.slice(0,g.length-v),x=x.slice(0,x.length-v);const B=o(g,x);return y&&B.unshift([0,y]),O&&B.push([0,O]),r(B,_),B},f=(g,x)=>u(g,x,!0);t.diff=f;const h=(g,x,_)=>{e:{if(_<0)break e;const G=g.length,y=x.length;if(G===y)break e;const v=x.slice(_),O=v.length;if(O>G||g.slice(G-O)!==v)break e;if(y>G){const D=G-O,N=g.slice(0,D),M=x.slice(0,D);if(N!==M)break e;const Z=x.slice(D,_),R=[];return N&&R.push([0,N]),Z&&R.push([1,Z]),v&&R.push([0,v]),R}else{const D=y-O,N=x.slice(0,D),M=g.slice(0,D);if(M!==N)break e;const Z=g.slice(D,G-O),R=[];return M&&R.push([0,M]),Z&&R.push([-1,Z]),v&&R.push([0,v]),R}}return(0,t.diff)(g,x)};t.diffEdit=h;const d=g=>{let x="";const _=g.length;for(let G=0;G<_;G++){const y=g[G];y[0]!==1&&(x+=y[1])}return x};t.src=d;const m=g=>{let x="";const _=g.length;for(let G=0;G<_;G++){const y=g[G];y[0]!==-1&&(x+=y[1])}return x};t.dst=m;const p=g=>{const x=g[0];return x===0?g:x===1?[-1,g[1]]:[1,g[1]]},w=g=>g.map(p);t.invert=w;const b=(g,x,_,G)=>{const y=g.length;let v=x;for(let O=y-1;O>=0;O--){const[B,Y]=g[O];if(B===0)v-=Y.length;else if(B===1)_(v,Y);else{const D=Y.length;v-=D,G(v,D,Y)}}};t.apply=b})(Vm)),Vm}var Wm={},NG;function FZ(){return NG||(NG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.dst=t.src=t.apply=t.diff=t.toBin=t.toStr=void 0;const A=Dt.__importStar(qm()),n=c=>{let l="";const u=c.length;for(let f=0;f<u;f++)l+=String.fromCharCode(c[f]);return l};t.toStr=n;const r=c=>{const l=c.length,u=new Uint8Array(l);for(let f=0;f<l;f++)u[f]=c.charCodeAt(f);return u};t.toBin=r;const s=(c,l)=>{const u=(0,t.toStr)(c),f=(0,t.toStr)(l);return A.diff(u,f)};t.diff=s;const i=(c,l,u,f)=>A.apply(c,l,(h,d)=>u(h,(0,t.toBin)(d)),f);t.apply=i;const o=c=>(0,t.toBin)(A.src(c));t.src=o;const a=c=>(0,t.toBin)(A.dst(c));t.dst=a})(Wm)),Wm}var Qm={},TG;function $Z(){return TG||(TG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.diff=t.agg=void 0;const A=Dt.__importStar(qm()),n=i=>{const o=[],a=i.length;let c=[];const l=(u,f)=>{if(!f.length)return;const h=c.length;if(h){const d=c[h-1];if(d[0]===u){d[1]+=f;return}}c.push([u,f])};e:for(let u=0;u<a;u++){const f=i[u],h=f[0],d=f[1],m=d.indexOf(`
`);if(m<0){l(h,d);continue e}else l(h,d.slice(0,m+1)),c.length&&o.push(c),c=[];let p=m;const w=d.length;t:for(;p<w;){const b=d.indexOf(`
`,p+1);if(b<0){l(h,d.slice(p+1));break t}o.push([[h,d.slice(p+1,b+1)]]),p=b}}c.length&&o.push(c);{const u=o.length;for(let f=0;f<u;f++){const h=o[f]=A.normalize(o[f]),d=h.length;e:{if(d<2)break e;const m=h[0],p=h[1],w=p[0];if(m[0]!==0||w!==-1&&w!==1)break e;for(let b=2;b<d;b++)if(h[b][0]!==w)break e;for(let b=f+1;b<u;b++){const g=o[b]=A.normalize(o[b]),x=g.length,_=m[1];let G,y;if(g.length>1&&(G=g[0])[0]===w&&(y=g[1])[0]===0&&_===G[1]){h.splice(0,1),p[1]=_+p[1],y[1]=_+y[1],g.splice(0,1);break e}else for(let v=0;v<x;v++)if(g[v][0]!==w)break e}}e:{if(h.length<2)break e;const m=h[h.length-1],p=m[1];if(m[0]!==-1)break e;t:for(let w=f+1;w<u;w++){const b=o[w]=A.normalize(o[w]),g=b.length;let x;if(g===0)continue t;if(g===1){if(x=b[0],x[0]===-1)continue t;if(b[0][0]!==0)break e}else if(x=b[1],g>2||b[0][0]!==-1)break e;const _=x[0];if(_===-1)continue t;if(_!==0)break e;const G=x[1];if(G.length>p.length||!p.endsWith(G))break e;const y=p.length-G.length;m[1]=p.slice(0,y),h.push([0,G]),x[0]=-1,o[f]=A.normalize(o[f]),o[w]=A.normalize(o[w]);break e}}}}return o};t.agg=n;const r=(i,o)=>{if(!o.length)return i.map((b,g)=>[-1,g,-1]);if(!i.length)return o.map((b,g)=>[1,-1,g]);const a=i.join(`
`)+`
`,c=o.join(`
`)+`
`;if(a===c)return[];const l=A.diff(a,c),u=(0,t.agg)(l),f=u.length,h=[];let d=-1,m=-1;const p=i.length,w=o.length;for(let b=0;b<f;b++){const g=u[b];let x=g.length;if(!x)continue;const _=g[x-1],G=_[0],y=_[1];if(y===`
`)g.splice(x-1,1);else{const O=y.length;y[O-1]===`
`&&(O===1?g.splice(x-1,1):_[1]=y.slice(0,O-1))}let v=0;if(x=g.length,!x)G===0?(v=0,d++,m++):G===1?(v=1,m++):G===-1&&(v=-1,d++);else if(b+1===f)d+1<p?m+1<w?(v=x===1&&g[0][0]===0?0:2,d++,m++):(v=-1,d++):(v=1,m++);else{const B=g[0][0];x===1&&B===G&&B===0?(d++,m++):G===0?(v=2,d++,m++):G===1?(v=1,m++):G===-1&&(v=-1,d++)}v===0&&i[d]!==o[m]&&(v=2),h.push([v,d,m])}return h};t.diff=r;const s=(i,o,a,c)=>{const l=i.length;e:for(let u=l-1;u>=0;u--){const[f,h,d]=i[u];switch(f){case 0:continue e;case-1:o(h);break;case 1:a(h,d);break;case 2:c(h,d);break}}};t.apply=s})(Qm)),Qm}var Km={},_c={},OG;function bu(){if(OG)return _c;OG=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.sort=void 0;const t=e=>{const A=e.length;for(let n=1;n<A;n++){const r=e[n];let s=n;for(;s!==0&&e[s-1]>r;)e[s]=e[s-1],s--;e[s]=r}return e};return _c.sort=t,_c}var Jm={},YG;function Xm(){return YG||(YG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash=t.updateJson=t.updateBin=t.updateStr=t.updateNum=t.CONST=void 0;const e=bu();var A;(function(a){a[a.START_STATE=5381]="START_STATE",a[a.NULL=982452847]="NULL",a[a.TRUE=982453247]="TRUE",a[a.FALSE=982454243]="FALSE",a[a.ARRAY=982452259]="ARRAY",a[a.STRING=982453601]="STRING",a[a.OBJECT=982454533]="OBJECT",a[a.BINARY=982454837]="BINARY"})(A||(t.CONST=A={}));const n=(a,c)=>(a<<5)+a+c;t.updateNum=n;const r=(a,c)=>{const l=c.length;a=(0,t.updateNum)(a,A.STRING),a=(0,t.updateNum)(a,l);let u=l;for(;u;)a=(a<<5)+a+c.charCodeAt(--u);return a};t.updateStr=r;const s=(a,c)=>{const l=c.length;a=(0,t.updateNum)(a,A.BINARY),a=(0,t.updateNum)(a,l);let u=l;for(;u;)a=(a<<5)+a+c[--u];return a};t.updateBin=s;const i=(a,c)=>{switch(typeof c){case"number":return(0,t.updateNum)(a,c);case"string":return a=(0,t.updateNum)(a,A.STRING),(0,t.updateStr)(a,c);case"object":{if(c===null)return(0,t.updateNum)(a,A.NULL);if(Array.isArray(c)){const f=c.length;a=(0,t.updateNum)(a,A.ARRAY);for(let h=0;h<f;h++)a=(0,t.updateJson)(a,c[h]);return a}if(c instanceof Uint8Array)return(0,t.updateBin)(a,c);a=(0,t.updateNum)(a,A.OBJECT);const l=(0,e.sort)(Object.keys(c)),u=l.length;for(let f=0;f<u;f++){const h=l[f];a=(0,t.updateStr)(a,h),a=(0,t.updateJson)(a,c[h])}return a}case"boolean":return(0,t.updateNum)(a,c?A.TRUE:A.FALSE)}return a};t.updateJson=i;const o=a=>(0,t.updateJson)(A.START_STATE,a)>>>0;t.hash=o})(Jm)),Jm}var ep={},SG;function CG(){return SG||(SG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.structHash=void 0;const e=bu(),A=Xm(),n=xi(),r=s=>{switch(typeof s){case"string":return(0,A.hash)(s).toString(36);case"number":case"bigint":return s.toString(36);case"boolean":return s?"T":"F";case"object":if(s===null)return"N";if(s instanceof n.Timestamp)return(s.sid%2e6).toString(36)+"."+s.time.toString(36);if(Array.isArray(s)){const i=s.length;let o="[";for(let a=0;a<i;a++)o+=(0,t.structHash)(s[a])+";";return o+"]"}else{if(s instanceof Uint8Array)return(0,A.hash)(s).toString(36);{const i=Object.keys(s);(0,e.sort)(i);let o="{";const a=i.length;for(let c=0;c<a;c++){const l=i[c];o+=(0,A.hash)(l).toString(36)+":"+(0,t.structHash)(s[l])+","}return o+"}"}}default:return"U"}};t.structHash=r})(ep)),ep}var PG;function VZ(){return PG||(PG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.structHashCrdt=void 0;const e=bu(),A=BM(),n=Xm(),r=CG(),s=i=>{if(i instanceof A.ConNode)return(0,r.structHash)(i.val);if(i instanceof A.ValNode)return(0,t.structHashCrdt)(i.node());if(i instanceof A.StrNode)return(0,n.hash)(i.view()).toString(36);if(i instanceof A.ObjNode){let o="{";const a=Array.from(i.keys.keys());(0,e.sort)(a);const c=a.length;for(let l=0;l<c;l++){const u=a[l],f=i.get(u);o+=(0,n.hash)(u).toString(36)+":"+(0,t.structHashCrdt)(f)+","}return o+"}"}else if(i instanceof A.ArrNode||i instanceof A.VecNode){let o="[";return i.children(a=>{o+=(0,t.structHashCrdt)(a)+";"}),o+"]"}else if(i instanceof A.BinNode)return(0,n.hash)(i.view()).toString(36);return"U"};t.structHashCrdt=s})(Km)),Km}var tp={},ZG;function qZ(){return ZG||(ZG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.structHashSchema=void 0;const e=bu(),A=Lm(),n=Xm(),r=CG(),s=i=>{if(i instanceof A.nodes.con||i instanceof A.nodes.str||i instanceof A.nodes.bin)return(0,r.structHash)(i.raw);if(i instanceof A.nodes.val)return(0,t.structHashSchema)(i.value);if(i instanceof A.nodes.obj){let o="{";const a={...i.obj,...i.opt},c=Object.keys(a);(0,e.sort)(c);const l=c.length;for(let u=0;u<l;u++){const f=c[u],h=a[f];o+=(0,n.hash)(f).toString(36)+":"+(0,t.structHashSchema)(h)+","}return o+"}"}else if(i instanceof A.nodes.arr||i instanceof A.nodes.vec){let o="[";const a=i instanceof A.nodes.arr?i.arr:i.value;for(const c of a)o+=(0,t.structHashSchema)(c)+";";return o+"]"}return(0,r.structHash)(i)};t.structHashSchema=s})(tp)),tp}var IG;function RG(){if(IG)return vi;IG=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.JsonCrdtDiff=vi.DiffError=void 0;const t=Dt,e=fy(),A=UZ(),n=xi(),r=os(),s=t.__importStar(qm()),i=t.__importStar(FZ()),o=t.__importStar($Z()),a=VZ(),c=qZ();class l extends Error{constructor(h="DIFF"){super(h)}}vi.DiffError=l;let u=class{constructor(h){this.model=h,this.builder=new n.PatchBuilder(h.clock.clone())}diffStr(h,d){const m=h.view();if(m===d)return;const p=this.builder;s.apply(s.diff(m,d),m.length,(w,b)=>p.insStr(h.id,w?h.find(w-1):h.id,b),(w,b)=>p.del(h.id,h.findInterval(w,b)))}diffBin(h,d){const m=h.view();if((0,A.cmpUint8Array)(m,d))return;const p=this.builder;i.apply(i.diff(m,d),m.length,(w,b)=>p.insBin(h.id,w?h.find(w-1):h.id,b),(w,b)=>p.del(h.id,h.findInterval(w,b)))}diffArr(h,d){if(h.size()===0){const y=d.length;if(y===0)return;let v=h.id;for(let O=0;O<y;O++)v=this.builder.insArr(h.id,v,[this.buildView(d[O])]);return}else if(d.length===0){const y=[];for(const v of h.chunks()){if(v.del)continue;const O=v.id;y.push((0,n.tss)(O.sid,O.time,v.span))}y.length&&this.builder.del(h.id,y);return}const m=[];h.children(y=>m.push((0,a.structHashCrdt)(y)));const p=[],w=d.length;for(let y=0;y<w;y++)p.push((0,c.structHashSchema)(d[y]));const b=o.diff(m,p);if(!b.length)return;const g=[],x=[];o.apply(b,y=>{const v=h.findInterval(y,1);if(!v||!v.length)throw new l;x.push(...v)},(y,v)=>{const O=d[v],B=y>=0?h.find(y):h.id;if(!B)throw new l;g.push([B,[O]])},(y,v)=>{const O=d[v];try{this.diffAny(h.getNode(y),O)}catch(B){if(B instanceof l){const Y=h.findInterval(y,1);x.push(...Y);const D=y?h.find(y-1):h.id;if(!D)throw new l;g.push([D,[O]])}else throw B}});const _=this.builder,G=g.length;for(let y=0;y<G;y++){const[v,O]=g[y];_.insArr(h.id,v,O.map(B=>this.buildView(B)))}x.length&&_.del(h.id,x)}diffObj(h,d){const m=this.builder,p=[],w=new Set;h.forEach(x=>{w.add(x),d[x]===void 0&&p.push([x,m.con(void 0)])});const b=Object.keys(d),g=b.length;for(let x=0;x<g;x++){const _=b[x],G=d[_];if(w.has(_)){const y=h.get(_);if(y)try{this.diffAny(y,G);continue}catch(v){if(!(v instanceof l))throw v}}p.push([_,this.buildConView(G)])}p.length&&m.insObj(h.id,p)}diffVec(h,d){const m=this.builder,p=[],w=h.elements,b=w.length,g=d.length,x=h.doc.index,_=Math.min(b,g);for(let G=g;G<b;G++){const y=w[G];if(y){const v=x.get(y);if(!v||v instanceof r.ConNode&&v.val===void 0)continue;p.push([G,m.con(void 0)])}}e:for(let G=0;G<_;G++){const y=d[G],v=h.get(G);if(v){try{this.diffAny(v,y);continue}catch(O){if(!(O instanceof l))throw O}if(v instanceof r.ConNode&&typeof y!="object"){const O=m.con(y);p.push([G,O]);continue e}}p.push([G,this.buildConView(y)])}for(let G=b;G<g;G++)p.push([G,this.buildConView(d[G])]);p.length&&m.insVec(h.id,p)}diffVal(h,d){try{this.diffAny(h.node(),d)}catch(m){if(m instanceof l)this.builder.setVal(h.id,this.buildConView(d));else throw m}}diffAny(h,d){if(h instanceof r.ConNode){d instanceof n.nodes.con&&(d=d.raw);const m=h.val;if(m!==d&&(m instanceof n.Timestamp&&!(d instanceof n.Timestamp)||!(m instanceof n.Timestamp)&&d instanceof n.Timestamp||!(0,e.deepEqual)(h.val,d)))throw new l}else if(h instanceof r.StrNode){if(d instanceof n.nodes.str&&(d=d.raw),typeof d!="string")throw new l;this.diffStr(h,d)}else if(h instanceof r.ObjNode){if(d instanceof n.nodes.obj&&(d=d.opt?{...d.obj,...d.opt}:d.obj),d instanceof n.NodeBuilder)throw new l;if(d instanceof Uint8Array)throw new l;if(!d||typeof d!="object"||Array.isArray(d))throw new l;this.diffObj(h,d)}else if(h instanceof r.ValNode)d instanceof n.nodes.val&&(d=d.value),this.diffVal(h,d);else if(h instanceof r.ArrNode){if(d instanceof n.nodes.arr&&(d=d.arr),!Array.isArray(d))throw new l;this.diffArr(h,d)}else if(h instanceof r.VecNode){if(d instanceof n.nodes.vec&&(d=d.value),!Array.isArray(d))throw new l;this.diffVec(h,d)}else if(h instanceof r.BinNode){if(d instanceof n.nodes.bin&&(d=d.raw),!(d instanceof Uint8Array))throw new l;this.diffBin(h,d)}else throw new l}diff(h,d){return this.diffAny(h,d),this.builder.flush()}diffDstKeys(h,d){const m=this.builder,p=[],w=Object.keys(d),b=w.length;for(let g=0;g<b;g++){const x=w[g],_=h.get(x),G=d[x];if(!_){p.push([x,this.buildConView(G)]);continue}try{this.diffAny(_,G)}catch(y){if(y instanceof l)p.push([x,this.buildConView(G)]);else throw y}}return p.length&&m.insObj(h.id,p),this.builder.flush()}buildView(h){const d=this.builder;return h instanceof n.Timestamp?d.con(h):h instanceof n.nodes.con?d.con(h.raw):d.json(h)}buildConView(h){const d=this.builder;return h instanceof n.Timestamp?d.con(h):h instanceof n.nodes.con?d.con(h.raw):d.constOrJson(h)}};return vi.JsonCrdtDiff=u,vi}var Ap={},jG;function WZ(){return jG||(jG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.merge=t.diff=void 0;const e=RG(),A=(r,s)=>{const o=new e.JsonCrdtDiff(r.api.model).diff(r.node,s);return o.ops.length?o:void 0};t.diff=A;const n=(r,s)=>{const i=(0,t.diff)(r,s);return i&&r.api.model.applyLocalPatch(i),i};t.merge=n})(Ap)),Ap}var np={},zG;function QZ(){return zG||(zG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.proxy$=t.proxy=void 0;const e=(n,r=[])=>new Proxy(()=>{},{get:(s,i,o)=>(r.push(String(i)),(0,t.proxy)(n,r)),apply:(s,i,o)=>n(r,...o)});t.proxy=e;const A=(n,r,s=[])=>new Proxy({},{get:(i,o,a)=>o===r?n(s):(s.push(String(o)),(0,t.proxy$)(n,r,s))});t.proxy$=A})(np)),np}var HG;function KZ(){if(HG)return hA;HG=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.ModelApi=hA.ArrApi=hA.BinApi=hA.StrApi=hA.ObjApi=hA.VecApi=hA.ValApi=hA.ConApi=hA.NodeApi=void 0;const t=Dt,e=Sn(),A=ny(),n=um(),r=zZ(),s=os(),i=HZ(),o=GG(),a=Um(),c=vG(),l=LZ(),u=RG(),f=t.__importStar(WZ()),h=Qt(),d=QZ(),m=O=>{if(!O)return[void 0,""];if(typeof O=="number")return[void 0,O];switch(typeof O=="string"&&(O=(0,n.toPath)(O)),O.length){case 0:return[void 0,""];case 1:return[void 0,O[0]];default:{const B=O[O.length-1];return[O.slice(0,-1),B]}}};class p{constructor(B,Y){this.node=B,this.api=Y,this.ev=void 0}get events(){return this.ev||(this.ev=new i.NodeEvents(this))}find(B){let Y=this.node;if(B===void 0){if(typeof Y.child=="function"){const D=Y.child();if(!D){if(Y instanceof s.RootNode)return Y;throw new Error("NO_CHILD")}return D}throw new Error("CANNOT_IN")}for(typeof B=="string"&&B&&B[0]!=="/"&&(B="/"+B),typeof B=="number"&&(B=[B]);Y instanceof s.ValNode;)Y=Y.child();return(0,r.find)(Y,B)}in(B){const Y=this.find(B);return this.api.wrap(Y)}asVal(){if(this.node instanceof s.ValNode)return this.api.wrap(this.node);throw new Error("NOT_VAL")}asStr(){if(this.node instanceof s.StrNode)return this.api.wrap(this.node);throw new Error("NOT_STR")}asBin(){if(this.node instanceof s.BinNode)return this.api.wrap(this.node);throw new Error("NOT_BIN")}asArr(){if(this.node instanceof s.ArrNode)return this.api.wrap(this.node);throw new Error("NOT_ARR")}asVec(){if(this.node instanceof s.VecNode)return this.api.wrap(this.node);throw new Error("NOT_VEC")}asObj(){if(this.node instanceof s.ObjNode)return this.api.wrap(this.node);throw new Error("NOT_OBJ")}asCon(){if(this.node instanceof s.ConNode)return this.api.wrap(this.node);throw new Error("NOT_CON")}asExt(B){let Y;const D=this.node;if(D instanceof l.ExtNode&&(Y=D),D instanceof s.VecNode&&(Y=D.ext()),!Y)throw new Error("NOT_EXT");const N=this.api.wrap(Y);if(!B||N instanceof B.Api)return N;throw new Error("NOT_EXT")}val(B){return this.in(B).asVal()}str(B){return this.in(B).asStr()}bin(B){return this.in(B).asBin()}arr(B){return this.in(B).asArr()}vec(B){return this.in(B).asVec()}obj(B){return this.in(B).asObj()}con(B){return this.in(B).asCon()}view(){return this.node.view()}select(B,Y){try{let D=B!==void 0?this.find(B):this.node;if(Y)for(;D instanceof s.ValNode;)D=D.child();return this.api.wrap(D)}catch{return}}read(B){const Y=this.view();if(Array.isArray(B))return(0,A.get)(Y,B);if(!B)return Y;let D=B+"";return B&&D[0]!=="/"&&(D="/"+D),(0,A.get)(Y,(0,n.toPath)(D))}add(B,Y){const[D,N]=m(B);e:try{const M=this.select(D,!0);if(M instanceof x)M.set({[N]:Y});else if(M instanceof y||M instanceof _||M instanceof G){const Z=M.length();let R=0;if(typeof N=="number")R=N;else if(N==="-")R=Z;else if(R=~~N,R+""!==N)break e;if(R!==R)break e;if(R<0&&(R=0),R>Z&&(R=Z),M instanceof y)M.ins(R,Array.isArray(Y)?Y:[Y]);else if(M instanceof _)M.ins(R,Y+"");else if(M instanceof G){if(!(Y instanceof Uint8Array))break e;M.ins(R,Y)}}else if(M instanceof g)M.set([[~~N,Y]]);else break e;return!0}catch{}return!1}replace(B,Y){const[D,N]=m(B);e:try{const M=this.select(D,!0);if(M instanceof x){const Z=N+"";if(!M.has(Z))break e;M.set({[N]:Y})}else if(M instanceof y){const Z=M.length();let R=0;if(typeof N=="number")R=N;else if(R=~~N,R+""!==N)break e;if(R!==R||R<0||R>Z)break e;R===Z?M.ins(R,[Y]):M.upd(R,Y)}else if(M instanceof g)M.set([[~~N,Y]]);else break e;return!0}catch{}return!1}remove(B,Y=1){const[D,N]=m(B);e:try{const M=this.select(D,!0);if(M instanceof x){const Z=N+"";if(!M.has(Z))break e;M.del([Z])}else if(M instanceof y||M instanceof _||M instanceof G){const Z=M.length();let R=0;if(typeof N=="number")R=N;else if(N==="-")R=Y;else if(R=~~N,R+""!==N)break e;if(R!==R||R<0||R>Z)break e;M.del(R,Math.min(Y,Z-R))}else if(M instanceof g)M.set([[~~N,void 0]]);else break e;return!0}catch{}return!1}diff(B){return f.diff(this,B)}merge(B){return f.merge(this,B)}op(B){if(!Array.isArray(B))return!1;const[Y,D,N]=B;switch(Y){case"add":return this.add(D,N);case"replace":return this.replace(D,N);case"merge":return!!this.select(D)?.merge(N);case"remove":return this.remove(D,N)}}get s(){return{$:this}}get $(){return(0,d.proxy$)(B=>{try{return this.api.wrap(this.find(B))}catch{return}},"$")}toString(B=""){return"api("+(this.constructor===p?"*":this.node.name())+")"+(0,e.printTree)(B,[D=>this.node.toString(D)])}}hA.NodeApi=p;class w extends p{get s(){return{$:this}}}hA.ConApi=w;class b extends p{get(){return this.in()}set(B){const{api:Y,node:D}=this,M=Y.builder.constOrJson(B);Y.builder.setVal(D.id,M),Y.apply()}get s(){const B=this;return{$:this,get _(){const D=B.node.node();return B.api.wrap(D).s}}}}hA.ValApi=b;class g extends p{get(B){return this.in(B)}set(B){const{api:Y,node:D}=this,{builder:N}=Y;N.insVec(D.id,B.map(([M,Z])=>[M,N.constOrJson(Z)])),Y.apply()}push(...B){const Y=this.length();this.set(B.map((D,N)=>[Y+N,D]))}length(){return this.node.elements.length}get s(){return new Proxy({},{get:(Y,D,N)=>{if(D==="$")return this;if(D==="toExt")return()=>this.asExt();const M=Number(D);if(Number.isNaN(M))throw new Error("INVALID_INDEX");const Z=this.node.get(M);if(!Z)throw new Error("OUT_OF_BOUNDS");return this.api.wrap(Z).s}})}}hA.VecApi=g;class x extends p{get(B){return this.in(B)}set(B){const{api:Y,node:D}=this,{builder:N}=Y;N.insObj(D.id,Object.entries(B).map(([M,Z])=>[M,N.constOrJson(Z)])),Y.apply()}del(B){const{api:Y,node:D}=this,{builder:N}=Y;Y.builder.insObj(D.id,B.map(M=>[M,N.con(void 0)])),Y.apply()}has(B){return this.node.keys.has(B)}diffKeys(B){const D=new u.JsonCrdtDiff(this.api.model).diffDstKeys(this.node,B);return D.ops.length?D:void 0}mergeKeys(B){const Y=this.diffKeys(B);return Y&&this.api.model.applyLocalPatch(Y),Y}get s(){return new Proxy({},{get:(Y,D,N)=>{if(D==="$")return this;const M=String(D),Z=this.node.get(M);if(!Z)throw new Error("NO_SUCH_KEY");return this.api.wrap(Z).s}})}}hA.ObjApi=x;class _ extends p{ins(B,Y){const{api:D,node:N}=this;D.onBeforeLocalChange.emit(D.next);const M=D.builder;M.pad();const Z=D.builder.nextTime(),R=new h.Timestamp(M.clock.sid,Z),I=N.insAt(B,R,Y);if(!I)throw new Error("OUT_OF_BOUNDS");M.insStr(N.id,I,Y),D.advance()}del(B,Y){const{api:D,node:N}=this;D.onBeforeLocalChange.emit(D.next);const M=D.builder;M.pad();const Z=N.findInterval(B,Y);if(!Z)throw new Error("OUT_OF_BOUNDS");N.delete(Z),M.del(N.id,Z),D.advance()}findId(B){const Y=this.node,N=Y.length()-1;return B>N&&(B=N),B<0?Y.id:Y.find(B)||Y.id}findPos(B){const Y=this.node,D=Y.id;if(D.sid===B.sid&&D.time===B.time)return-1;const N=Y.findById(B);return N?Y.pos(N)+(N.del?0:B.time-N.id.time):-1}length(){return this.node.length()}get s(){return{$:this}}}hA.StrApi=_;class G extends p{ins(B,Y){const{api:D,node:N}=this,M=B?N.find(B-1):N.id;if(!M)throw new Error("OUT_OF_BOUNDS");D.builder.insBin(N.id,M,Y),D.apply()}del(B,Y){const{api:D,node:N}=this,M=N.findInterval(B,Y);if(!M)throw new Error("OUT_OF_BOUNDS");D.builder.del(N.id,M),D.apply()}length(){return this.node.length()}get s(){return{$:this}}}hA.BinApi=G;class y extends p{get(B){return this.in(B)}ins(B,Y){const{api:D,node:N}=this,{builder:M}=D,Z=B?N.find(B-1):N.id;if(!Z)throw new Error("OUT_OF_BOUNDS");const R=[];for(let I=0;I<Y.length;I++)R.push(M.json(Y[I]));M.insArr(N.id,Z,R),D.apply()}push(...B){const Y=this.length();this.ins(Y,B)}upd(B,Y){const{api:D,node:N}=this,M=N.getId(B);if(!M)throw new Error("OUT_OF_BOUNDS");const{builder:Z}=D;Z.updArr(N.id,M,Z.constOrJson(Y)),D.apply()}del(B,Y){const{api:D,node:N}=this,M=N.findInterval(B,Y);if(!M)throw new Error("OUT_OF_BOUNDS");D.builder.del(N.id,M),D.apply()}length(){return this.node.length()}get s(){return new Proxy({},{get:(Y,D,N)=>{if(D==="$")return this;const M=Number(D);if(Number.isNaN(M))throw new Error("INVALID_INDEX");const Z=this.node.getNode(M);if(!Z)throw new Error("OUT_OF_BOUNDS");return this.api.wrap(Z).s}})}}hA.ArrApi=y;class v extends b{constructor(B){super(B.root,void 0),this.model=B,this.next=0,this.onBeforeReset=new o.FanOut,this.onReset=new o.FanOut,this.onBeforePatch=new o.FanOut,this.onPatch=new o.FanOut,this.onBeforeLocalChange=new o.FanOut,this.onLocalChange=new o.FanOut,this.onLocalChanges=new c.MicrotaskBufferFanOut(this.onLocalChange),this.onBeforeTransaction=new o.FanOut,this.onTransaction=new o.FanOut,this.onChange=new c.MergeFanOut([this.onReset,this.onPatch,this.onLocalChange]),this.onChanges=new c.MicrotaskBufferFanOut(this.onChange),this.onFlush=new o.FanOut,this.inTx=!1,this.stopAutoFlush=void 0,this.subscribe=Y=>this.onChanges.listen(()=>Y()),this.getSnapshot=()=>this.view(),this.api=this,this.builder=new a.PatchBuilder(B.clock),B.onbeforereset=()=>this.onBeforeReset.emit(),B.onreset=()=>this.onReset.emit(),B.onbeforepatch=Y=>this.onBeforePatch.emit(Y),B.onpatch=Y=>this.onPatch.emit(Y)}wrap(B){if(B instanceof s.ValNode)return B.api||(B.api=new b(B,this));if(B instanceof s.StrNode)return B.api||(B.api=new _(B,this));if(B instanceof s.BinNode)return B.api||(B.api=new G(B,this));if(B instanceof s.ArrNode)return B.api||(B.api=new y(B,this));if(B instanceof s.ObjNode)return B.api||(B.api=new x(B,this));if(B instanceof s.ConNode)return B.api||(B.api=new w(B,this));if(B instanceof s.VecNode)return B.api||(B.api=new g(B,this));if(B instanceof l.ExtNode){if(B.api)return B.api;const Y=this.model.ext.get(B.extId);return B.api=new Y.Api(B,this)}else throw new Error("UNKNOWN_NODE")}root(B){return this.set(B)}set(B){return super.set(B),this}apply(){const B=this.builder.patch.ops,Y=B.length,D=this.model,N=this.next;this.onBeforeLocalChange.emit(N);for(let M=this.next;M<Y;M++)D.applyOperation(B[M]);this.next=Y,D.tick++,this.onLocalChange.emit(N)}advance(){const B=this.next;this.next=this.builder.patch.ops.length,this.model.tick++,this.onLocalChange.emit(B)}transaction(B){if(this.inTx)B();else{this.inTx=!0;try{this.onBeforeTransaction.emit(),B(),this.onTransaction.emit()}finally{this.inTx=!1}}}flush(){const B=this.builder.flush();return this.next=0,B.ops.length&&this.onFlush.emit(B),B}autoFlush(B=!1){const Y=()=>this.builder.patch.ops.length&&this.flush(),D=this.onLocalChanges.listen(Y),N=this.onBeforeTransaction.listen(Y),M=this.onTransaction.listen(Y);return B&&Y(),this.stopAutoFlush=()=>{this.stopAutoFlush=void 0,D(),N(),M()}}}return hA.ModelApi=v,hA}var LG;function UG(){return LG||(LG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Dt.__exportStar(KZ(),t)})($m)),$m}var xc={},FG;function JZ(){if(FG)return xc;FG=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.randomSessionId=void 0;const t=65535,e=9007199254740991-t,A=()=>Math.floor(e*Math.random()+t);return xc.randomSessionId=A,xc}var yc={},$G;function XZ(){if($G)return yc;$G=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.Extensions=void 0;const t=Sn();let e=class DS{constructor(){this.ext={}}register(n){this.ext[n.id]=n}get(n){return this.ext[n]}size(){return Object.keys(this.ext).length}clone(){const n=new DS;for(const r of Object.values(this.ext))n.register(r);return n}toString(n=""){const r=Object.keys(this.ext).map(s=>+s).sort();return"extensions"+(0,t.printTree)(n,r.map(s=>i=>`${s}: ${this.ext[s].name}`))}};return yc.Extensions=e,yc}var Di={},rp={},sp={},VG;function eI(){return VG||(VG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Dt.__exportStar(gu(),t)})(sp)),sp}var qG;function tI(){return qG||(qG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.print=t.remove=t.insert=t.insertLeft=t.insertRight=void 0;const e=eI(),A=JSON.stringify,n=(m,p,w)=>{const b=p.p;if(!b)return m;const g=p===b.l;let x=b.bf|0;switch(g?b.bf=++x:b.bf=--x,x){case 0:return m;case 1:case-1:return n(m,b,p);default:{const _=w===p.l;return g?_?(r(b,p),p.p?m:p):(i(b,p,w),w.p?m:w):_?(o(b,p,w),w.p?m:w):(s(b,p),p.p?m:p)}}},r=(m,p)=>{const w=m.p,b=p.r;p.p=w,p.r=m,m.p=p,m.l=b,b&&(b.p=m),w&&(w.l===m?w.l=p:w.r=p);let g=m.bf,x=p.bf;g+=-1-(x>0?x:0),x+=-1+(g<0?g:0),m.bf=g,p.bf=x},s=(m,p)=>{const w=m.p,b=p.l;p.p=w,p.l=m,m.p=p,m.r=b,b&&(b.p=m),w&&(w.l===m?w.l=p:w.r=p);let g=m.bf,x=p.bf;g+=1-(x<0?x:0),x+=1+(g>0?g:0),m.bf=g,p.bf=x},i=(m,p,w)=>{s(p,w),r(m,w)},o=(m,p,w)=>{r(p,w),s(m,w)},a=(m,p,w)=>(w.r=p,p.p=w,w.bf--,w.l?m:n(m,w,p));t.insertRight=a;const c=(m,p,w)=>(w.l=p,p.p=w,w.bf++,w.r?m:n(m,w,p));t.insertLeft=c;const l=(m,p,w)=>{if(!m)return p;const b=p.k;let g=m,x,_=0;for(;x=(_=w(b,g.k))<0?g.l:g.r;)g=x;return _<0?(0,t.insertLeft)(m,p,g):(0,t.insertRight)(m,p,g)};t.insert=l;const u=(m,p)=>{if(!m)return p;const w=p.p,b=p.l,g=p.r;if(p.p=p.l=p.r=void 0,b&&g)if(b.r){let G=b,y=G;for(;y=G.r;)G=y;const v=G.l,O=G.p,B=v;return w&&(w.l===p?w.l=G:w.r=G),G.p=w,G.r=g,G.bf=p.bf,b!==G&&(G.l=b,b.p=G),g.p=G,O&&(O.l===G?O.l=B:O.r=B),B&&(B.p=O),h(w?m:G,O,1)}else{w&&(w.l===p?w.l=b:w.r=b),b.p=w,b.r=g,g.p=b;const G=p.bf;if(w)return b.bf=G,f(m,b,1);const y=G-1;if(b.bf=y,y>=-1)return b;const v=g.l;return g.bf>0?(o(b,g,v),v):(s(b,g),g)}const x=b||g;return x&&(x.p=w),w?w.l===p?(w.l=x,f(m,w,1)):(w.r=x,h(m,w,1)):x};t.remove=u;const f=(m,p,w)=>{let b=p.bf|0;b-=w,p.bf=b;let g=w;if(b===-1)return m;if(b<-1){const _=p.r;if(_.bf<=0)_.l&&_.bf===0&&(g=0),s(p,_),p=_;else{const G=_.l;o(p,_,G),p=G}}const x=p.p;return x?x.l===p?f(m,x,g):h(m,x,g):p},h=(m,p,w)=>{let b=p.bf|0;b+=w,p.bf=b;let g=w;if(b===1)return m;if(b>1){const _=p.l;if(_.bf>=0)_.r&&_.bf===0&&(g=0),r(p,_),p=_;else{const G=_.r;i(p,_,G),p=G}}const x=p.p;return x?x.l===p?f(m,x,g):h(m,x,g):p},d=(m,p="")=>{if(!m)return"";const{bf:w,l:b,r:g,k:x,v:_}=m,G=_&&typeof _=="object"&&_.constructor===Object?A(_):_&&typeof _=="object"?_.toString(p):A(_),y=x!==void 0?` { ${A(x)} = ${G} }`:"",v=w?` [${w}]`:"";return m.constructor.name+`${v}`+y+(0,e.printBinary)(p,[b?O=>(0,t.print)(b,O):null,g?O=>(0,t.print)(g,O):null])};t.print=d})(rp)),rp}var Gc={},ip={},Mc={},WG;function QG(){if(WG)return Mc;WG=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.first=void 0;const t=e=>{let A=e;for(;A;)if(A.l)A=A.l;else return A;return A};return Mc.first=t,Mc}var vc={},KG;function AI(){if(KG)return vc;KG=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.next=void 0;const t=QG(),e=A=>{const n=A.r;if(n)return(0,t.first)(n);let r=A.p;for(;r&&r.r===A;)A=r,r=r.p;return r};return vc.next=e,vc}var JG;function op(){return JG||(JG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.insert=t.insertLeft=t.insertRight=t.findOrNextLower=t.find=t.size=t.prev=t.last=t.next=t.first=void 0;const e=QG();Object.defineProperty(t,"first",{enumerable:!0,get:function(){return e.first}});const A=AI();Object.defineProperty(t,"next",{enumerable:!0,get:function(){return A.next}});const n=h=>{let d=h;for(;d;)if(d.r)d=d.r;else return d;return d};t.last=n;const r=h=>{if(h.l){for(h=h.l;h.r;)h=h.r;return h}let d=h.p;for(;d&&d.l===h;)h=d,d=d.p;return d};t.prev=r;const s=h=>{const d=h.l,m=h.r;return 1+(d?s(d):0)+(m?s(m):0)},i=h=>h?s(h):0;t.size=i;const o=(h,d,m)=>{let p=h;for(;p;){const w=m(d,p.k);if(w===0)return p;p=w<0?p.l:p.r}return p};t.find=o;const a=(h,d,m)=>{let p=h,w;for(;p;){const b=m(p.k,d);if(b===0)return p;if(b>0)p=p.l;else{const g=p.r;if(w=p,!g)return w;p=g}}return w};t.findOrNextLower=a;const c=(h,d)=>{const m=h.r=d.r;d.r=h,h.p=d,m&&(m.p=h)};t.insertRight=c;const l=(h,d)=>{const m=h.l=d.l;d.l=h,h.p=d,m&&(m.p=h)};t.insertLeft=l;const u=(h,d,m)=>{if(!h)return d;const p=d.k;let w=h;for(;w;){const b=m(p,w.k),g=b<0?w.l:w.r;if(g)w=g;else{b<0?(0,t.insertLeft)(d,w):(0,t.insertRight)(d,w);break}}return h};t.insert=u;const f=(h,d)=>{const m=d.p,p=d.l,w=d.r;if(d.p=d.l=d.r=void 0,!p&&!w){if(m)m.l===d?m.l=void 0:m.r=void 0;else return;return h}else if(p&&w){let g=p;for(;g.r;)g=g.r;return g.r=w,w.p=g,m?(m.l===d?m.l=p:m.r=p,p.p=m,h):(p.p=void 0,p)}const b=p||w;if(b.p=m,m)m.l===d?m.l=b:m.r=b;else return b;return h};t.remove=f})(ip)),ip}var ap={},XG;function nI(){return XG||(XG=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Dt.__exportStar(Sn(),t)})(ap)),ap}var eM;function rI(){if(eM)return Gc;eM=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.createMap=void 0;const t=op(),e=nI(),A=(r,s)=>r===s?0:r<s?-1:1,n=(r,s,i,o,a,c)=>{class l{constructor(f){this.min=void 0,this.root=void 0,this.max=void 0,this._size=0,this.next=t.next,this.comparator=f||A}set(f,h){const d=this.root;if(d===void 0){this._size=1;const x=new r(f,h);return this.root=this.min=this.max=s(void 0,x,this.comparator)}const m=this.comparator;let p;const w=this.max;if(p=m(f,w.k),p===0)return w.v=h,w;if(p>0){const x=this.max=new r(f,h);return this.root=o(d,x,w),this._size++,x}const b=this.min;if(p=m(f,b.k),p===0)return b.v=h,b;if(p<0){const x=this.min=new r(f,h);return this.root=i(d,x,b),this._size++,x}let g=d;do{if(p=m(f,g.k),p===0)return g.v=h,g;if(p>0){const x=g.r;if(x===void 0){const _=new r(f,h);return this.root=o(d,_,g),this._size++,_}g=x}else if(p<0){const x=g.l;if(x===void 0){const _=new r(f,h);return this.root=i(d,_,g),this._size++,_}g=x}}while(!0)}find(f){const h=this.comparator;let d=this.root;for(;d;){const m=+h(f,d.k);if(m===0)return d;d=m<0?d.l:d.r}}get(f){return this.find(f)?.v}del(f){const h=this.find(f);return h?(h===this.max&&(this.max=(0,t.prev)(h)),h===this.min&&(this.min=(0,t.next)(h)),this.root=a(this.root,h),this._size--,!0):!1}clear(){this._size=0,this.root=this.min=this.max=void 0}has(f){return!!this.find(f)}size(){return this._size}isEmpty(){return!this.min}getOrNextLower(f){return(0,t.findOrNextLower)(this.root,f,this.comparator)||void 0}forEach(f){let h=this.first();if(h)do f(h);while(h=(0,t.next)(h))}first(){return this.min}last(){return this.max}iterator0(){let f=this.first();return()=>{if(!f)return;const h=f;return f=(0,t.next)(f),h}}iterator(){const f=this.iterator0();return{next:()=>{const h=f();return{value:h,done:!h}}}}entries(){return{[Symbol.iterator]:()=>this.iterator()}}toString(f){return this.constructor.name+(0,e.printTree)(f,[h=>c(this.root,h)])}}return l};return Gc.createMap=n,Gc}var tM;function AM(){if(tM)return Di;tM=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.AvlMap=Di.AvlNode=void 0;const t=tI(),e=rI();class A{constructor(r,s){this.k=r,this.v=s,this.p=void 0,this.l=void 0,this.r=void 0,this.bf=0}}return Di.AvlNode=A,Di.AvlMap=(0,e.createMap)(A,t.insert,t.insertLeft,t.insertRight,t.remove,t.print),Di}var nM;function cp(){if(nM)return yi;nM=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Model=yi.UNDEFINED=void 0;const t=Dt,e=t.__importStar($a()),A=t.__importStar(Qt()),n=jZ(),r=UG(),s=pu(),i=JZ(),o=os(),a=wu(),c=Sn(),l=XZ(),u=AM(),f=xi();yi.UNDEFINED=new a.ConNode(s.ORIGIN,void 0);let h=class I_{rndSid(){const m=this.clock,p=m.sid,w=m.peers;for(;;){const b=(0,i.randomSessionId)();if(p!==b&&!w.has(b))return b}}static fromPatches(m){if(!m.length)throw new Error("NO_PATCHES");const b=m[0].getId().sid;if(!b)throw new Error("NO_SID");const g=I_.create(void 0,b);return g.applyBatch(m),g}constructor(m){this.root=new o.RootNode(this,s.ORIGIN),this.index=new u.AvlMap(A.compare),this.ext=new l.Extensions,this.tick=0,this.onbeforepatch=void 0,this.onpatch=void 0,this.onbeforereset=void 0,this.onreset=void 0,this.clock=m,m.time||(m.time=1)}get api(){return this._api||(this._api=new r.ModelApi(this)),this._api}get s(){return this.api.s._}get $(){return this.api.$}applyBatch(m){const p=m.length;for(let w=0;w<p;w++)this.applyPatch(m[w])}applyLocalPatch(m){const p=m.getId();if(p){const w=this.clock;if(w.sid===p.sid){const b=w.time;b>p.time&&(m=m.rebase(b))}}this.applyPatch(m)}applyPatch(m){this.onbeforepatch?.(m);const p=m.ops,{length:w}=p;for(let b=0;b<w;b++)this.applyOperation(p[b]);this.tick++,this.onpatch?.(m)}applyOperation(m){this.clock.observe(m.id,m.span());const p=this.index;if(m instanceof e.InsStrOp){const w=p.get(m.obj);w instanceof o.StrNode&&w.ins(m.ref,m.id,m.data)}else if(m instanceof e.NewObjOp){const w=m.id;p.get(w)||p.set(w,new o.ObjNode(this,w))}else if(m instanceof e.NewArrOp){const w=m.id;p.get(w)||p.set(w,new o.ArrNode(this,w))}else if(m instanceof e.NewStrOp){const w=m.id;p.get(w)||p.set(w,new o.StrNode(w))}else if(m instanceof e.NewValOp){const w=m.id;p.get(w)||p.set(w,new o.ValNode(this,w,s.ORIGIN))}else if(m instanceof e.NewConOp){const w=m.id;p.get(w)||p.set(w,new a.ConNode(w,m.val))}else if(m instanceof e.InsObjOp){const w=p.get(m.obj),b=m.data,g=b.length;if(w instanceof o.ObjNode)for(let x=0;x<g;x++){const _=b[x],G=p.get(_[1]);if(!G||w.id.time>=_[1].time)continue;const y=w.put(_[0]+"",G.id);y&&this._gcTree(y)}}else if(m instanceof e.InsVecOp){const w=p.get(m.obj),b=m.data,g=b.length;if(w instanceof o.VecNode)for(let x=0;x<g;x++){const _=b[x],G=p.get(_[1]);if(!G||w.id.time>=_[1].time)continue;const y=w.put(Number(_[0]),G.id);y&&this._gcTree(y)}}else if(m instanceof e.InsValOp){const w=m.obj,b=w.sid===0&&w.time===0?this.root:p.get(w);if(b instanceof o.ValNode&&p.get(m.val)){const x=b.set(m.val);x&&this._gcTree(x)}}else if(m instanceof e.InsArrOp){const w=p.get(m.obj);if(w instanceof o.ArrNode){const b=[],g=m.data,x=g.length;for(let _=0;_<x;_++){const G=g[_];p.get(G)&&(w.id.time>=G.time||b.push(G))}b.length&&w.ins(m.ref,m.id,b)}}else if(m instanceof e.UpdArrOp){const w=p.get(m.obj);if(w instanceof o.ArrNode){const b=m.val;if(p.get(b)){const g=w.upd(m.ref,b);g&&this._gcTree(g)}}}else if(m instanceof e.DelOp){const w=p.get(m.obj);if(w instanceof o.ArrNode){const b=m.what.length;for(let g=0;g<b;g++){const x=m.what[g];for(let _=0;_<x.span;_++){const G=w.getById(new A.Timestamp(x.sid,x.time+_));G&&this._gcTree(G)}}w.delete(m.what)}else(w instanceof o.StrNode||w instanceof o.BinNode)&&w.delete(m.what)}else if(m instanceof e.NewBinOp){const w=m.id;p.get(w)||p.set(w,new o.BinNode(w))}else if(m instanceof e.InsBinOp){const w=p.get(m.obj);w instanceof o.BinNode&&w.ins(m.ref,m.id,m.data)}else if(m instanceof e.NewVecOp){const w=m.id;p.get(w)||p.set(w,new o.VecNode(this,w))}}_gcTree(m){if(m.sid===0)return;const w=this.index.get(m);if(!w)return;const b=w.api;b&&b.events.handleDelete(),w.children(g=>this._gcTree(g.id)),this.index.del(m)}fork(m=this.rndSid()){const p=I_.fromBinary(this.toBinary());return p.clock.sid!==m&&p.clock instanceof A.ClockVector&&(p.clock=p.clock.fork(m)),p.ext=this.ext,p}clone(){return this.fork(this.clock.sid)}reset(m){this.onbeforereset?.();const p=this.index;this.index=new u.AvlMap(A.compare);const w=m.toBinary();n.decoder.decode(w,this),this.clock=m.clock.clone(),this.ext=m.ext.clone();const b=this._api;b&&(b.flush(),b.builder.clock=this.clock,b.node=this.root),p.forEach(({v:g})=>{const x=g.api;if(!x)return;const _=this.index.get(g.id);if(!_){x.events.handleDelete();return}x.node=_,_.api=x}),this.tick++,this.onreset?.()}view(){return this.root.view()}toBinary(){return n.encoder.encode(this)}setSchema(m,p=!0){const w=this.clock;if(w.time===1){const g=w.sid;p&&(w.sid=2),this.api.set(m),p&&this.setSid(g)}return this}setSid(m){const p=this.clock,w=p.sid;w!==m&&(p.sid=m,p.observe(new A.Timestamp(w,p.time-1),1))}toString(m=""){const p=()=>"",w=this.ext.size()>0;return"model"+(0,c.printTree)(m,[b=>this.root.toString(b),p,b=>{const g=[];return this.index.forEach(x=>g.push(x.v)),`index (${g.length} nodes)`+(g.length?(0,c.printTree)(b,g.map(x=>_=>`${x.name()} ${A.printTs(x.id)}`)):"")},p,b=>`view${(0,c.printTree)(b,[g=>String(JSON.stringify(this.view(),null,2)).replace(/\n/g,`
`+g)])}`,p,b=>this.clock.toString(b),w?p:null,w?b=>this.ext.toString(b):null])}};return yi.Model=h,h.sid=i.randomSessionId,h.create=(d,m=h.sid())=>{const p=typeof m=="number"?m===1?new A.ServerClockVector(1,1):new A.ClockVector(m,1):m,w=new h(p);return d!==void 0&&w.setSchema(d instanceof f.NodeBuilder?d:f.s.json(d),!0),w},h.withServerClock=(d,m=1)=>h.create(d,new A.ServerClockVector(1,m)),h.fromBinary=d=>n.decoder.decode(d),h.load=(d,m,p)=>{const w=n.decoder.decode(d);return p&&w.setSchema(p,!0),typeof m=="number"&&w.setSid(m),w},yi}var rM;function sM(){if(rM)return cc;rM=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.ValNode=void 0;const t=Qt(),e=Sn(),A=cp();let n=class{constructor(s,i,o){this.doc=s,this.id=i,this.val=o,this.api=void 0}set(s){if((0,t.compare)(s,this.val)<=0&&this.val.sid!==0||(0,t.compare)(s,this.id)<=0)return;const i=this.val;return this.val=s,i}node(){return this.val.sid===0?A.UNDEFINED:this.child()}view(){return this.node()?.view()}children(s){s(this.node())}child(){return this.doc.index.get(this.val)}container(){const s=this.node();return s?s.container():void 0}name(){return"val"}toString(s=""){const i=this.node();return this.name()+" "+(0,t.printTs)(this.id)+(0,e.printTree)(s,[a=>i?i.toString(a):(0,t.printTs)(this.val)])}};return cc.ValNode=n,cc}var Dc={},iM;function sI(){if(iM)return Dc;iM=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.RootNode=void 0;const t=pu(),e=sM();let A=class extends e.ValNode{constructor(r,s){super(r,t.ORIGIN,s)}name(){return"root"}};return Dc.RootNode=A,Dc}var Bc={},kc={},oM;function iI(){if(oM)return kc;oM=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.CRDT_CONSTANTS=void 0;var t;return(function(e){e[e.MAX_TUPLE_LENGTH=255]="MAX_TUPLE_LENGTH"})(t||(kc.CRDT_CONSTANTS=t={})),kc}var aM;function oI(){if(aM)return Bc;aM=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.VecNode=void 0;const t=wu(),e=iI(),A=Sn(),n=Qt();let r=class{constructor(i,o){this.doc=i,this.id=o,this.elements=[],this.__extNode=void 0,this._view=[],this.api=void 0}length(){return this.elements.length}val(i){return this.elements[i]}get(i){const o=this.elements[i];if(o)return this.doc.index.get(o)}put(i,o){if(i>e.CRDT_CONSTANTS.MAX_TUPLE_LENGTH)throw new Error("OUT_OF_BOUNDS");const a=this.val(i);if(!(a&&(0,n.compare)(a,o)>=0)){if(i>this.elements.length)for(let c=this.elements.length;c<i;c++)this.elements.push(void 0);return i<this.elements.length?this.elements[i]=o:this.elements.push(o),a}}ext(){if(this.__extNode)return this.__extNode;const i=this.getExtId();if(!(i>=0))return;const a=this.doc.ext.get(i);if(a)return this.__extNode=new a.Node(this.get(1)),this.__extNode}isExt(){return!!this.ext()}getExtId(){if(this.elements.length!==2)return-1;const i=this.get(0);if(!(i instanceof t.ConNode))return-1;const o=i.val,a=this.id;return!(o instanceof Uint8Array)||o.length!==3||o[1]!==a.sid%256||o[2]!==a.time%256?-1:o[0]}child(){return this.ext()}container(){return this}children(i){const o=this.elements,a=o.length,c=this.doc.index;for(let l=0;l<a;l++){const u=o[l];if(!u)continue;const f=c.get(u);f&&i(f)}}view(){const i=this.ext();if(i)return i.view();let o=!0;const a=this._view,c=[],l=this.doc.index,u=this.elements,f=u.length;for(let h=0;h<f;h++){const d=u[h],m=d?l.get(d):void 0,p=m?m.view():void 0;a[h]!==p&&(o=!1),c.push(p)}return o?a:this._view=c}name(){return"vec"}toString(i=""){const o=this.ext(),a=this.name()+" "+(0,n.printTs)(this.id)+(o?` { extension = ${this.getExtId()} }`:"");if(o)return this.child().toString(i,this.id);const c=this.doc.index;return a+(0,A.printTree)(i,[...this.elements.map((l,u)=>f=>`${u}: ${l&&c.get(l)?c.get(l).toString(f+"  "+" ".repeat((""+u).length)):"nil"}`),...o?[l=>`${this.child().toString(l)}`]:[]])}};return Bc.VecNode=r,Bc}var Ec={},cM;function aI(){if(cM)return Ec;cM=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.ObjNode=void 0;const t=Sn(),e=Qt(),A=wu();let n=class{constructor(s,i){this.doc=s,this.id=i,this.keys=new Map,this._tick=0,this._view={},this.api=void 0}get(s){const i=this.keys.get(s);if(i)return this.doc.index.get(i)}put(s,i){const o=this.keys.get(s);if(!(o&&(0,e.compare)(o,i)>=0))return this.keys.set(s,i),o}nodes(s){const i=this.doc.index;this.keys.forEach((o,a)=>s(i.get(o),a))}forEach(s){const i=this.doc.index;this.keys.forEach((o,a)=>{const c=i.get(o);!c||c instanceof A.ConNode&&c.val===void 0||s(a,c)})}children(s){const i=this.doc.index;this.keys.forEach((o,a)=>s(i.get(o)))}child(){}container(){return this}view(){const s=this.doc,i=s.clock.time+s.tick,o=this._view;if(this._tick===i)return o;const a={},c=s.index;let l=!0;return this.keys.forEach((u,f)=>{const h=c.get(u);if(!h){l=!1;return}const d=h.view();d!==void 0?(o[f]!==d&&(l=!1),a[f]=d):o[f]!==void 0&&(l=!1)}),l?o:(this._tick=i,this._view=a)}name(){return"obj"}toString(s=""){return this.name()+" "+(0,e.printTs)(this.id)+(0,t.printTree)(s,[...this.keys.entries()].filter(([,o])=>!!this.doc.index.get(o)).map(([o,a])=>c=>JSON.stringify(o)+(0,t.printTree)(c+" ",[l=>this.doc.index.get(a).toString(l)])))}};return Ec.ObjNode=n,Ec}var Bi={},Nc={},Tc={},lM;function cI(){if(lM)return Tc;lM=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.printOctets=void 0;const t=(e,A=16)=>{let n="";if(!e.length)return n;e[0]<16&&(n+="0"),n+=e[0].toString(16);for(let r=1;r<e.length&&r<A;r++){const s=e[r];n+=" ",s<16&&(n+="0"),n+=s.toString(16)}return e.length>A&&(n+=` (${e.length-A} more)`),n};return Tc.printOctets=t,Tc}var lp={},uM;function lI(){return uM||(uM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.rlSplay=t.lrSplay=t.llSplay=t.rrSplay=t.lSplay=t.rSplay=t.splay=void 0;const e=(a,c,l)=>{const u=c.p;if(!u)return a;const f=u.p,h=u.l===c;return f?(f.l===u?h?a=(0,t.llSplay)(a,c,u,f):a=(0,t.lrSplay)(a,c,u,f):h?a=(0,t.rlSplay)(a,c,u,f):a=(0,t.rrSplay)(a,c,u,f),l>1?(0,t.splay)(a,c,l-1):a):(h?(0,t.rSplay)(c,u):(0,t.lSplay)(c,u),c)};t.splay=e;const A=(a,c)=>{const l=a.r;a.p=void 0,a.r=c,c.p=a,c.l=l,l&&(l.p=c)};t.rSplay=A;const n=(a,c)=>{const l=a.l;a.p=void 0,a.l=c,c.p=a,c.r=l,l&&(l.p=c)};t.lSplay=n;const r=(a,c,l,u)=>{const f=l.l,h=c.l,d=u.p;return c.p=d,c.l=l,l.p=c,l.l=u,l.r=h,u.p=l,u.r=f,f&&(f.p=u),h&&(h.p=l),d?d.l===u?d.l=c:d.r=c:a=c,a};t.rrSplay=r;const s=(a,c,l,u)=>{const f=l.r,h=c.r,d=u.p;return c.p=d,c.r=l,l.p=c,l.l=h,l.r=u,u.p=l,u.l=f,f&&(f.p=u),h&&(h.p=l),d?d.l===u?d.l=c:d.r=c:a=c,a};t.llSplay=s;const i=(a,c,l,u)=>{const f=c.l,h=c.r,d=u.p;return c.p=d,c.l=l,c.r=u,l.p=c,l.r=f,u.p=c,u.l=h,f&&(f.p=l),h&&(h.p=u),d?d.l===u?d.l=c:d.r=c:a=c,a};t.lrSplay=i;const o=(a,c,l,u)=>{const f=c.r,h=c.l,d=u.p;return c.p=d,c.l=u,c.r=l,l.p=c,l.l=f,u.p=c,u.r=h,f&&(f.p=l),h&&(h.p=u),d?d.l===u?d.l=c:d.r=c:a=c,a};t.rlSplay=o})(lp)),lp}var up={},hM;function uI(){return hM||(hM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.splay2=void 0;const e=(a,c)=>{const l=c.p2;if(!l)return a;const u=l.p2,f=l.l2===c;return u?(u.l2===l?f?a=s(a,c,l,u):a=i(a,c,l,u):f?a=o(a,c,l,u):a=r(a,c,l,u),(0,t.splay2)(a,c)):(f?A(c,l):n(c,l),c)};t.splay2=e;const A=(a,c)=>{const l=a.r2;a.p2=void 0,a.r2=c,c.p2=a,c.l2=l,l&&(l.p2=c)},n=(a,c)=>{const l=a.l2;a.p2=void 0,a.l2=c,c.p2=a,c.r2=l,l&&(l.p2=c)},r=(a,c,l,u)=>{const f=l.l2,h=c.l2,d=u.p2;return c.p2=d,c.l2=l,l.p2=c,l.l2=u,l.r2=h,u.p2=l,u.r2=f,f&&(f.p2=u),h&&(h.p2=l),d?d.l2===u?d.l2=c:d.r2=c:a=c,a},s=(a,c,l,u)=>{const f=l.r2,h=c.r2,d=u.p2;return c.p2=d,c.r2=l,l.p2=c,l.l2=h,l.r2=u,u.p2=l,u.l2=f,f&&(f.p2=u),h&&(h.p2=l),d?d.l2===u?d.l2=c:d.r2=c:a=c,a},i=(a,c,l,u)=>{const f=c.l2,h=c.r2,d=u.p2;return c.p2=d,c.l2=l,c.r2=u,l.p2=c,l.r2=f,u.p2=c,u.l2=h,f&&(f.p2=l),h&&(h.p2=u),d?d.l2===u?d.l2=c:d.r2=c:a=c,a},o=(a,c,l,u)=>{const f=c.r2,h=c.l2,d=u.p2;return c.p2=d,c.l2=u,c.r2=l,l.p2=c,l.l2=f,u.p2=c,u.r2=h,f&&(f.p2=l),h&&(h.p2=u),d?d.l2===u?d.l2=c:d.r2=c:a=c,a}})(up)),up}var en={},fM;function hI(){if(fM)return en;fM=1,Object.defineProperty(en,"__esModule",{value:!0}),en.remove2=en.insert2=en.prev2=en.next2=en.last2=en.first2=void 0;const t=a=>{let c=a;for(;c;)if(c.l2)c=c.l2;else return c;return c};en.first2=t;const e=a=>{let c=a;for(;c;)if(c.r2)c=c.r2;else return c;return c};en.last2=e;const A=a=>{if(a.r2){for(a=a.r2;a.l2;)a=a.l2;return a}let c=a.p2;for(;c&&c.r2===a;)a=c,c=c.p2;return c};en.next2=A;const n=a=>{if(a.l2){for(a=a.l2;a.r2;)a=a.r2;return a}let c=a.p2;for(;c&&c.l2===a;)a=c,c=c.p2;return c};en.prev2=n;const r=(a,c)=>{const l=a.r2=c.r2;c.r2=a,a.p2=c,l&&(l.p2=a)},s=(a,c)=>{const l=a.l2=c.l2;c.l2=a,a.p2=c,l&&(l.p2=a)},i=(a,c,l)=>{if(!a)return c;let u=a;for(;u;){const f=l(c,u),h=f<0?u.l2:u.r2;if(h)u=h;else{f<0?s(c,u):r(c,u);break}}return a};en.insert2=i;const o=(a,c)=>{const l=c.p2,u=c.l2,f=c.r2;if(c.p2=c.l2=c.r2=void 0,!u&&!f){if(l)l.l2===c?l.l2=void 0:l.r2=void 0;else return;return a}else if(u&&f){let d=u;for(;d.r2;)d=d.r2;return d.r2=f,f.p2=d,l?(l.l2===c?l.l2=u:l.r2=u,u.p2=l,a):(u.p2=void 0,u)}const h=u||f;if(h.p2=l,l)l.l2===c?l.l2=h:l.r2=h;else return h;return a};return en.remove2=o,en}var Oc={},dM={},mM;function fI(){if(mM)return dM;if(mM=1,typeof Iterator>"u"&&typeof globalThis=="object"){class t{[Symbol.iterator](){return this}find(A){for(const n of this)if(A(n))return n}}globalThis.Iterator=t}return dM}var pM;function dI(){if(pM)return Oc;pM=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.UndEndIterator=void 0,fI();class t extends Iterator{constructor(n){super(),this.n=n}next(){const n=this.n();return new e(n,n===void 0)}}Oc.UndEndIterator=t;class e{constructor(n,r){this.value=n,this.done=r}}return Oc}var gM;function hp(){if(gM)return Nc;gM=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.AbstractRga=void 0;const t=Qt(),e=mu(),A=cI(),n=lI(),r=uI(),s=hI(),i=pu(),o=Sn(),a=gu(),c=dI(),l=(w,b)=>{const g=w.id,x=b.id;return g.sid-x.sid||g.time-x.time},u=w=>{const b=w.l,g=w.r;w.len=(w.del?0:w.span)+(b?b.len:0)+(g?g.len:0)},f=w=>{const b=w.l,g=w.r;w.len=w.span+(b?b.len:0)+(g?g.len:0)},h=(w,b)=>{for(;w;)w.len+=b,w=w.p},d=w=>{const b=w.r;if(b){w=b;let x;for(;x=w.l;)w=x;return w}let g=w.p;for(;g&&g.r===w;)w=g,g=g.p;return g},m=w=>{const b=w.l;if(b){w=b;let x;for(;x=w.r;)w=x;return w}let g=w.p;for(;g&&g.l===w;)w=g,g=g.p;return g};let p=class{constructor(b){this.id=b,this.root=void 0,this.ids=void 0,this.count=0}ins(b,g,x){const _=this.id,G=b.time,y=b.sid;if(_.time===G&&_.sid===y){this.insAfterRoot(b,g,x);return}let O=this.ids,B=O;for(;O;){const I=O.id,$=I.sid;if($>y)O=O.l2;else if($<y)B=O,O=O.r2;else{const V=I.time;if(V>G)O=O.l2;else if(V<G)B=O,O=O.r2;else{B=O;break}}}if(!B)return;const Y=B.id,D=Y.time,N=Y.sid,M=B.span;if(N!==y||G-D>=M)return;const R=G-D;this.insAfterChunk(b,B,R,g,x)}insAt(b,g,x){if(!b){const B=this.id;return this.insAfterRoot(B,g,x),B}const _=this.findChunk(b-1);if(!_)return;const[G,y]=_,v=G.id,O=y===0?v:new t.Timestamp(v.sid,v.time+y);return this.insAfterChunk(O,G,y,g,x),O}insAfterRoot(b,g,x){const _=this.createChunk(g,x),G=this.first();if(!G)this.setRoot(_);else if((0,t.compare)(G.id,g)<0)this.insertBefore(_,G);else{if((0,t.containsId)(G.id,G.span,g))return;this.insertAfterRef(_,b,G)}}insAfterChunk(b,g,x,_,G){const y=g.id,v=y.time,O=y.sid,B=g.span,Y=this.createChunk(_,G);if(x+1<B){const N=_.sid,M=_.time;if(O===N&&v<=M&&v+B-1>=M)return;if(M>b.time+1||N>b.sid){this.insertInside(Y,g,x+1),this.splay(Y);return}}this.insertAfterRef(Y,b,g),this.splay(Y)}delete(b){const g=b.length;for(let x=0;x<g;x++)this.deleteSpan(b[x]);this.onChange()}deleteSpan(b){const g=b.span,x=b.time,_=x+g-1,G=this.findById(b);if(!G)return;let y=G,v=y;for(;y;){v=y;const O=y.id,B=y.span,Y=O.time,D=Y+B-1;if(y.del){if(D>=_)break;y=y.s;continue}const N=x<=Y,M=x<=D;if(N)if(_>=D){if(y.delete(),h(y,-y.span),_<=D)break}else{const R=_-Y+1,I=this.split(y,R);y.delete(),u(I),h(y,-y.span);break}else if(M)if(_>=D){const R=x-Y,I=this.split(y,R);if(I.delete(),I.len=I.r?I.r.len:0,h(y,-I.span),_<=D)break}else{const R=this.split(y,_-Y+1),I=this.split(y,x-Y);I.delete(),u(R),u(I),h(y,-I.span);break}y=y.s}v&&this.mergeTombstones2(G,v)}find(b){let g=this.root;for(;g;){const x=g.l,_=x?x.len:0;let G;if(b<_)g=x;else if(g.del)b-=_,g=g.r;else if(b<_+(G=g.span)){const y=b-_,v=g.id;return y?new t.Timestamp(v.sid,v.time+y):v}else b-=_+G,g=g.r}}findChunk(b){let g=this.root;for(;g;){const x=g.l,_=x?x.len:0;let G;if(b<_)g=x;else if(g.del)b-=_,g=g.r;else{if(b<_+(G=g.span))return[g,b-_];b-=_+G,g=g.r}}}findInterval(b,g){const x=[];if(!g)return x;let _=this.root,G=0;for(;_;){const O=_.l?_.l.len:0;if(b<O)_=_.l;else if(_.del)b-=O,_=_.r;else if(b<O+_.span){G=b-O;break}else b-=O+_.span,_=_.r}if(!_)return x;if(_.span>=g+G){const O=_.id;return x.push((0,t.tss)(O.sid,O.time+G,g)),x}const y=_.span-G,v=_.id;if(x.push((0,t.tss)(v.sid,v.time+G,y)),g-=y,_=d(_),!_)return x;do{if(_.del)continue;const O=_.id,B=_.span;if(g<=B)return x.push((0,t.tss)(O.sid,O.time,g)),x;x.push((0,t.tss)(O.sid,O.time,B)),g-=B}while((_=d(_))&&g>0);return x}findInterval2(b,g){const x=[];return this.range0(void 0,b,g,(_,G,y)=>{const v=_.id;x.push((0,t.tss)(v.sid,v.time+G,y))}),x}range0(b,g,x,_){let G=b||this.findById(g);if(b)for(;G&&!(0,t.containsId)(G.id,G.span,g);)G=d(G);if(G){if(G.del){if((0,t.containsId)(G.id,G.span,x))return}else{const y=g.time-G.id.time;if((0,t.containsId)(G.id,G.span,x)){const B=x.time-g.time+1;return _(G,y,B),G}const O=G.span-y;if(_(G,y,O))return G}for(G=d(G);G;){if((0,t.containsId)(G.id,G.span,x))return!G.del&&_(G,0,x.time-G.id.time+1),G;if(!G.del&&_(G,0,G.span))return G;G=d(G)}return G}}first(){let b=this.root;for(;b;){const g=b.l;if(g)b=g;else return b}return b}last(){let b=this.root;for(;b;){const g=b.r;if(g)b=g;else return b}return b}lastId(){const b=this.last();if(!b)return;const g=b.id,x=b.span;return x===1?g:new t.Timestamp(g.sid,g.time+x-1)}next(b){return d(b)}prev(b){return m(b)}length(){const b=this.root;return b?b.len:0}size(){return this.count}pos(b){const g=b.p,x=b.l;if(!g)return x?x.len:0;const _=this.pos(g);if(g.r===b)return _+(g.del?0:g.span)+(x?x.len:0);const y=b.r;return _-(b.del?0:b.span)-(y?y.len:0)}chunks0(){let b=this.first();return()=>{const g=b;return b&&(b=d(b)),g}}chunks(){return new c.UndEndIterator(this.chunks0())}setRoot(b){this.root=b,this.insertId(b),this.onChange()}insertBefore(b,g){const x=g.l;g.l=b,b.l=x,b.p=g;let _=0;x&&(x.p=b,_=x.len),b.len=b.span+_,h(g,b.span),this.insertId(b),this.onChange()}insertAfter(b,g){const x=g.r;g.r=b,b.r=x,b.p=g;let _=0;x&&(x.p=b,_=x.len),b.len=b.span+_,h(g,b.span),this.insertId(b),this.onChange()}insertAfterRef(b,g,x){const _=b.id,G=_.sid,y=_.time;let v=!1;for(;;){const O=x.id,B=O.time+x.span;x.s||(v=O.sid===G&&B===y&&B-1===g.time,v&&(x.s=b));const Y=d(x);if(!Y)break;const D=Y.id,N=D.time,M=D.sid;if(N<y)break;if(N===y){if(M===G)return;if(M<G)break}x=Y}v&&!x.del?(this.mergeContent(x,b.data),x.s=void 0):this.insertAfter(b,x)}mergeContent(b,g){const x=b.span;b.merge(g),h(b,b.span-x),this.onChange()}insertInside(b,g,x){const _=g.p,G=g.l,y=g.r,v=g.s,O=g.len,B=g.split(x);if(g.s=B,B.s=v,g.l=g.r=B.l=B.r=void 0,B.l=void 0,b.p=_,!G)b.l=g,g.p=b;else{b.l=G,G.p=b;const N=G.r;G.r=g,g.p=G,g.l=N,N&&(N.p=g)}if(!y)b.r=B,B.p=b;else{b.r=y,y.p=b;const N=y.l;y.l=B,B.p=y,B.r=N,N&&(N.p=B)}_?_.l===g?_.l=b:_.r=b:this.root=b,u(g),u(B),G&&(G.len=(G.l?G.l.len:0)+g.len+(G.del?0:G.span)),y&&(y.len=(y.r?y.r.len:0)+B.len+(y.del?0:y.span)),b.len=O+b.span;const Y=b.span;let D=b.p;for(;D;)D.len+=Y,D=D.p;this.insertId(B),this.insertIdFast(b),this.onChange()}split(b,g){const x=b.s,_=b.split(g),G=b.r;return b.s=_,_.r=G,_.s=x,b.r=_,_.p=b,this.insertId(_),G&&(G.p=_),_}mergeTombstones(b,g){if(!b.del||!g.del)return!1;const x=b.id,_=g.id;return x.sid!==_.sid||x.time+b.span!==_.time?!1:(b.s=g.s,b.span+=g.span,this.deleteChunk(g),!0)}mergeTombstones2(b,g){let x=b;for(;x;){const G=d(x);if(!G)break;if(!this.mergeTombstones(x,G)){if(G===g){if(G){const v=d(G);v&&this.mergeTombstones(G,v)}break}x=x.s}}const _=m(b);_&&this.mergeTombstones(_,b)}rmTombstones(){let b=this.first();const g=[];for(;b;)b.del&&g.push(b),b=d(b);for(let x=0;x<g.length;x++)this.deleteChunk(g[x])}deleteChunk(b){this.deleteId(b);const g=b.p,x=b.l,_=b.r;if(b.id=i.ORIGIN,!x&&!_)g?g.l===b?g.l=void 0:g.r=void 0:this.root=void 0;else if(x&&_){let G=x;for(;G.r;)G=G.r;G.r=_,_.p=G;const y=_.len;let v;for(v=G,g?(g.l===b?g.l=x:g.r=x,x.p=g):(this.root=x,x.p=void 0);v&&v!==g;)v.len+=y,v=v.p}else{const G=x||_;G.p=g,g?g.l===b?g.l=G:g.r=G:this.root=G}}insertId(b){this.ids=(0,s.insert2)(this.ids,b,l),this.count++,this.ids=(0,r.splay2)(this.ids,b)}insertIdFast(b){this.ids=(0,s.insert2)(this.ids,b,l),this.count++}deleteId(b){this.ids=(0,s.remove2)(this.ids,b),this.count--}findById(b){const g=b.sid,x=b.time;let _=this.ids,G=_;for(;_;){const D=_.id,N=D.sid;if(N>g)_=_.l2;else if(N<g)G=_,_=_.r2;else{const M=D.time;if(M>x)_=_.l2;else if(M<x)G=_,_=_.r2;else{G=_;break}}}if(!G)return;const y=G.id,v=y.time,O=y.sid,B=G.span;if(!(O!==g||x<v||x-v>=B))return G}posById(b){const g=this.findById(b);if(!g)return;const x=this.pos(g);return g.del?x:x+(b.time-g.id.time)}prevId(b){let g=this.findById(b);if(!g)return;const x=b.time;if(g.id.time<x)return new t.Timestamp(b.sid,x-1);if(g=m(g),!g)return;const _=g.id;return g.span>1?new t.Timestamp(_.sid,_.time+g.span-1):_}spanView(b){const g=[];let x=b.span;const _=b.time;let G=this.findById(b);if(!G)return g;if(!G.del)if(G.span>=x+_-G.id.time){const y=_-G.id.time,v=y+x,O=G.view().slice(y,v);return g.push(O),g}else{const y=_-G.id.time,v=G.view().slice(y,b.span);x-=G.span-y,g.push(v)}for(;G=G.s;){const y=G.span;if(!G.del){if(y>x){const v=G.view().slice(0,x);g.push(v);break}g.push(G.data)}if(x-=y,x<=0)break}return g}splay(b){const g=b.p;if(!g)return;const x=g.p,_=g.l===b;if(!x){_?(0,n.rSplay)(b,g):(0,n.lSplay)(b,g),this.root=b,u(g),f(b);return}x.l===g?_?this.root=(0,n.llSplay)(this.root,b,g,x):this.root=(0,n.lrSplay)(this.root,b,g,x):_?this.root=(0,n.rlSplay)(this.root,b,g,x):this.root=(0,n.rrSplay)(this.root,b,g,x),u(x),u(g),f(b),this.splay(b)}iterator(){let b=this.first();return()=>{const g=b;return b&&(b=d(b)),g}}ingest(b,g){if(b<1)return;const x=new Map;this.root=this._ingest(b,()=>{const _=g(),G=_.id,y=G.sid+"."+G.time,v=x.get(y);v&&(v.s=_,x.delete(y));const O=(0,t.tick)(G,_.span);return x.set(O.sid+"."+O.time,_),_})}_ingest(b,g){const x=b>>1,_=b-x-1,G=x>0?this._ingest(x,g):void 0,y=g();G&&(y.l=G,G.p=y);const v=_>0?this._ingest(_,g):void 0;return v&&(y.r=v,v.p=y),u(y),this.insertId(y),y}toStringName(){return"AbstractRga"}toString(b=""){const g=this.view();let x="";return(0,e.isUint8Array)(g)?x+=` { ${(0,A.printOctets)(g)||""} }`:typeof g=="string"&&(x+=`{ ${g.length>32?JSON.stringify(g.substring(0,32))+" ":JSON.stringify(g)} }`),`${this.toStringName()} ${(0,t.printTs)(this.id)} ${x}`+(0,o.printTree)(b,[G=>this.root?this.printChunk(G,this.root):""])}printChunk(b,g){return this.formatChunk(g)+(0,a.printBinary)(b,[g.l?x=>this.printChunk(x,g.l):null,g.r?x=>this.printChunk(x,g.r):null])}formatChunk(b){let x=`chunk ${(0,t.printTs)(b.id)}:${b.span} .${b.len}.`;if(b.del)x+=` [${b.span}]`;else if((0,e.isUint8Array)(b.data))x+=` { ${(0,A.printOctets)(b.data)||""} }`;else if(typeof b.data=="string"){const _=b.data.length>32?JSON.stringify(b.data.substring(0,32))+" ":JSON.stringify(b.data);x+=` { ${_} }`}return x}};return Nc.AbstractRga=p,Nc}var wM;function mI(){if(wM)return Bi;wM=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.ArrNode=Bi.ArrChunk=void 0;const t=hp(),e=Qt(),A=gu(),n=Sn();class r{constructor(o,a,c){this.id=o,this.span=a,this.len=c?a:0,this.del=!c,this.p=void 0,this.l=void 0,this.r=void 0,this.s=void 0,this.data=c}merge(o){this.data.push(...o),this.span=this.data.length}split(o){const a=this.span;if(this.span=o,!this.del){const l=this.data.splice(o);return new r((0,e.tick)(this.id,o),a-o,l)}return new r((0,e.tick)(this.id,o),a-o,void 0)}delete(){this.del=!0,this.data=void 0}clone(){return new r(this.id,this.span,this.data?[...this.data]:void 0)}view(){return this.data?[...this.data]:[]}}Bi.ArrChunk=r;let s=class extends t.AbstractRga{constructor(o,a){super(a),this.doc=o,this._tick=0,this._view=[],this.api=void 0}get(o){const a=this.findChunk(o);if(a)return a[0].data[a[1]]}getNode(o){const a=this.get(o);if(a)return this.doc.index.get(a)}getId(o){const a=this.findChunk(o);if(!a)return;const[c,l]=a,u=c.id;return l?(0,e.tick)(u,l):u}getById(o){const a=this.findById(o);if(!a||a.del)return;const c=o.time-a.id.time;return a.data[c]}upd(o,a){const c=this.findById(o);if(!c)return;const l=c.data;if(!l)return;const u=o.time-c.id.time,f=l[u];if(!(f&&(0,e.compare)(f,a)>=0))return l[u]=a,this.onChange(),f}createChunk(o,a){return new r(o,a?a.length:0,a)}onChange(){}toStringName(){return this.name()}child(){}container(){return this}view(){const o=this.doc,a=o.clock.time+o.tick,c=this._view;if(this._tick===a)return c;const l=[],u=o.index;let f=!0;for(let d=this.first();d;d=this.next(d))if(!d.del)for(const m of d.data){const p=u.get(m);if(!p){f=!1;continue}const w=p.view();c[l.length]!==w&&(f=!1),l.push(w)}return c.length!==l.length&&(f=!1),f?c:(this._tick=a,this._view=l)}children(o){const a=this.doc.index;for(let c=this.first();c;c=this.next(c)){const l=c.data;if(!l)continue;const u=l.length;for(let f=0;f<u;f++)o(a.get(l[f]))}}name(){return"arr"}printChunk(o,a){const c=this.pos(a);let l="";if(!a.del){const u=this.doc.index;l=(0,n.printTree)(o,a.data.map(f=>u.get(f)).filter(f=>!!f).map((f,h)=>d=>`[${c+h}]: ${f.toString(d+"    "+" ".repeat(String(h).length))}`))}return this.formatChunk(a)+l+(0,A.printBinary)(o,[a.l?u=>this.printChunk(u,a.l):null,a.r?u=>this.printChunk(u,a.r):null])}};return Bi.ArrNode=s,Bi}var ki={},bM;function pI(){if(bM)return ki;bM=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.BinNode=ki.BinChunk=void 0;const t=Qt(),e=hp();class A{constructor(s,i,o){this.id=s,this.span=i,this.len=o?i:0,this.del=!o,this.p=void 0,this.l=void 0,this.r=void 0,this.s=void 0,this.data=o}merge(s){const i=this.data.length,o=new Uint8Array(i+s.length);o.set(this.data),o.set(s,i),this.data=o,this.span=o.length}split(s){if(!this.del){const o=this.data,a=o.subarray(s),c=new A((0,t.tick)(this.id,s),this.span-s,a);return this.data=o.subarray(0,s),this.span=s,c}const i=new A((0,t.tick)(this.id,s),this.span-s,void 0);return this.span=s,i}delete(){this.del=!0,this.data=void 0}clone(){return new A(this.id,this.span,this.data)}view(){return this.data||new Uint8Array(0)}}ki.BinChunk=A;let n=class extends e.AbstractRga{constructor(){super(...arguments),this._view=null,this.api=void 0}view(){if(this._view)return this._view;const s=new Uint8Array(this.length());let i=0,o=this.first();for(;o;){if(!o.del){const a=o.data;s.set(a,i),i+=a.length}o=this.next(o)}return this._view=s}children(){}child(){}container(){}name(){return"bin"}createChunk(s,i){return new A(s,i?i.length:0,i)}onChange(){this._view=null}toStringName(){return this.name()}};return ki.BinNode=n,ki}var Ei={},_M;function gI(){if(_M)return Ei;_M=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.StrNode=Ei.StrChunk=void 0;const t=Qt(),e=hp(),A=op();class n{constructor(i,o,a){this.id=i,this.span=o,this.len=a?o:0,this.del=!a,this.p=void 0,this.l=void 0,this.r=void 0,this.p2=void 0,this.l2=void 0,this.r2=void 0,this.s=void 0,this.data=a}merge(i){this.data+=i,this.span=this.data.length}split(i){if(!this.del){const a=new n((0,t.tick)(this.id,i),this.span-i,this.data.slice(i));return this.data=this.data.slice(0,i),this.span=i,a}const o=new n((0,t.tick)(this.id,i),this.span-i,"");return this.span=i,o}delete(){this.del=!0,this.data=""}clone(){return new n(this.id,this.span,this.data)}view(){return this.data}}Ei.StrChunk=n;let r=class extends e.AbstractRga{constructor(){super(...arguments),this._view="",this.api=void 0}children(){}child(){}container(){}view(){if(this._view)return this._view;let i="";for(let o=this.first();o;o=(0,A.next)(o))i+=o.data;return this._view=i}name(){return"str"}createChunk(i,o){return new n(i,o?o.length:0,o||"")}onChange(){this._view=""}toStringName(){return this.name()}};return Ei.StrNode=r,Ei}var xM;function wI(){return xM||(xM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StrChunk=t.StrNode=t.BinChunk=t.BinNode=t.ArrChunk=t.ArrNode=t.ObjNode=t.VecNode=t.RootNode=t.ValNode=t.ConNode=void 0;var e=wu();Object.defineProperty(t,"ConNode",{enumerable:!0,get:function(){return e.ConNode}});var A=sM();Object.defineProperty(t,"ValNode",{enumerable:!0,get:function(){return A.ValNode}});var n=sI();Object.defineProperty(t,"RootNode",{enumerable:!0,get:function(){return n.RootNode}});var r=oI();Object.defineProperty(t,"VecNode",{enumerable:!0,get:function(){return r.VecNode}});var s=aI();Object.defineProperty(t,"ObjNode",{enumerable:!0,get:function(){return s.ObjNode}});var i=mI();Object.defineProperty(t,"ArrNode",{enumerable:!0,get:function(){return i.ArrNode}}),Object.defineProperty(t,"ArrChunk",{enumerable:!0,get:function(){return i.ArrChunk}});var o=pI();Object.defineProperty(t,"BinNode",{enumerable:!0,get:function(){return o.BinNode}}),Object.defineProperty(t,"BinChunk",{enumerable:!0,get:function(){return o.BinChunk}});var a=gI();Object.defineProperty(t,"StrNode",{enumerable:!0,get:function(){return a.StrNode}}),Object.defineProperty(t,"StrChunk",{enumerable:!0,get:function(){return a.StrChunk}})})(km)),km}var yM;function os(){return yM||(yM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(_Z(),t),e.__exportStar(wI(),t)})(Dm)),Dm}var fp={},GM;function bI(){return GM||(GM=1,Object.defineProperty(fp,"__esModule",{value:!0})),fp}var dp={},MM;function vM(){return MM||(MM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const e=Dt;var A=cp();Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return A.Model}}),e.__exportStar(UG(),t)})(dp)),dp}var DM;function BM(){return DM||(DM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Dt;e.__exportStar(os(),t),e.__exportStar(bI(),t),e.__exportStar(vM(),t),e.__exportStar(xi(),t)})(vm)),vm}var mp=BM(),Yc={},pp={},kM;function _I(){return kM||(kM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.listToUint8=t.concatList=t.concat=void 0;const e=(r,s)=>{const i=new Uint8Array(r.length+s.length);return i.set(r),i.set(s,r.length),i};t.concat=e;const A=r=>{const s=r.length;let i=0,o=0;for(let c=0;c<s;c++)i+=r[c].length;const a=new Uint8Array(i);for(let c=0;c<s;c++){const l=r[c];a.set(l,o),o+=l.length}return a};t.concatList=A;const n=r=>{switch(r.length){case 0:return new Uint8Array(0);case 1:return r[0];default:return(0,t.concatList)(r)}};t.listToUint8=n})(pp)),pp}var gp={},EM;function xI(){return EM||(EM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.cloneBinary=void 0;const e=mu(),{isArray:A}=Array,n=Object.keys,r=s=>{if(!s)return s;if(A(s)){const i=[],o=s.length;for(let a=0;a<o;a++)i.push((0,t.cloneBinary)(s[a]));return i}else if(typeof s=="object"){if((0,e.isUint8Array)(s))return new Uint8Array(s);const i=n(s),o=i.length,a={};for(let c=0;c<o;c++){const l=i[c];a[l]=(0,t.cloneBinary)(s[l])}return a}return s};t.cloneBinary=r})(gp)),gp}var wp={},NM;function yI(){return NM||(NM=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toSchema=void 0;const e=os(),A=xi(),n=r=>{if(r instanceof e.ConNode)return A.s.con(r.val);if(r instanceof e.ValNode)return A.s.val((0,t.toSchema)(r.node()));if(r instanceof e.ObjNode){const s={};return r.nodes((i,o)=>s[o]=(0,t.toSchema)(i)),A.s.obj(s)}if(r instanceof e.VecNode){const s=[];return r.children(i=>s.push((0,t.toSchema)(i))),A.s.vec(...s)}if(r instanceof e.StrNode)return A.s.str(r.view());if(r instanceof e.BinNode)return A.s.bin(r.view());if(r instanceof e.ArrNode){const s=[];return r.children(i=>{i&&s.push((0,t.toSchema)(i))}),A.s.arr(s)}return A.s.con(void 0)};t.toSchema=n})(wp)),wp}var TM;function GI(){if(TM)return Yc;TM=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.Log=void 0;const t=AM(),e=op(),A=Sn(),n=_I(),r=xI(),s=vM(),i=yI(),o=xi(),a=os();let c=class Dd{static fromNewModel(u){const f=u.clock.sid,h=new Dd(()=>s.Model.create(void 0,f)),d=u.api;return d.builder.patch.ops.length&&h.end.applyPatch(d.flush()),h}static from(u){const f=u.toBinary(),h=()=>s.Model.fromBinary(f);return new Dd(h,u)}constructor(u,f=u(),h){this.start=u,this.end=f,this.patches=new t.AvlMap(o.compare);const d=p=>{const w=p.getId();w&&this.patches.set(w,p)},m=f.api;this.__onPatch=m.onPatch.listen(d),this.__onFlush=m.onFlush.listen(d),this.metadata=h??{}}destroy(){this.__onPatch(),this.__onFlush()}replayToEnd(){const u=this.start().clone();for(let f=(0,e.first)(this.patches.root);f;f=(0,e.next)(f))u.applyPatch(f.v);return u}replayTo(u,f=!0){const h=this.start().clone();let d=0;for(let m=(0,e.first)(this.patches.root);m&&(d=(0,o.compare)(u,m.k))>=0&&!(d===0&&!f);m=(0,e.next)(m))h.applyPatch(m.v);return h}advanceTo(u){const f=[];let h=(0,e.first)(this.patches.root);for(;h&&(0,o.compare)(u,h.k)>=0;h=(0,e.next)(h))f.push(h.v);for(const m of f)this.patches.del(m.getId());const d=this.start;this.start=()=>{const m=d();for(const p of f)m.applyPatch(p);return m}}findMax(u){let f=this.patches.max;for(;f;){if(f.k.sid===u)return f.v;f=(0,e.prev)(f)}}clone(){const u=this.start,f=(0,r.cloneBinary)(this.metadata),h=this.end.clone(),d=new Dd(u,h,f);for(const{v:m}of this.patches.entries()){const p=m.clone(),w=p.getId();w&&d.patches.set(w,p)}return d}rebaseBatch(u,f){const h=f?this.findMax(f):this.patches.max?.v;if(!h)return u;const d=h.getId();if(!d)return u;let m=d.time+h.span();const p=[],w=u.length;for(let b=0;b<w;b++){const g=u[b].rebase(m);m+=g.span(),p.push(g)}return p}reset(u){this.start=u.start,this.metadata=u.metadata,this.patches=u.patches,this.end.reset(u.end),u.destroy()}undo(u){const f=u.ops,h=f.length;if(!h)throw new Error("EMPTY_PATCH");const d=u.getId();let m;const p=()=>m||(m=this.replayTo(d,!1)),w=this.end.api.builder;for(let b=h-1;b>=0;b--){const g=f[b],x=g.id;if(g instanceof o.InsStrOp||g instanceof o.InsArrOp||g instanceof o.InsBinOp){w.del(g.obj,[new o.Timespan(x.sid,x.time,g.span())]);continue}const _=p();if(g instanceof o.InsValOp){const G=_.index.get(g.obj);if(G instanceof a.ValNode){const v=(0,i.toSchema)(G.node()).build(w);w.setVal(g.obj,v)}}else if(g instanceof o.InsObjOp||g instanceof o.InsVecOp){const G=[],y=_.index.get(g.obj);for(const[v]of g.data){let O;if(y instanceof a.ObjNode?O=y.get(v+""):y instanceof a.VecNode&&(O=y.get(+v)),O){const Y=(0,i.toSchema)(O).build(w);G.push([v,Y])}else G.push([v,w.con(void 0)])}G.length&&(g instanceof o.InsObjOp?w.insObj(g.obj,G):g instanceof o.InsVecOp&&w.insVec(g.obj,G))}else if(g instanceof o.DelOp){const G=_.index.find(g.obj);if(G){const y=G.v;if(y instanceof a.StrNode){let v="";for(const Y of g.what)v+=y.spanView(Y).join("");let O=g.obj;const B=g.what[0];if(B){const Y=y.prevId(B);Y&&(O=Y)}w.insStr(g.obj,O,v)}else if(y instanceof a.BinNode){const v=[];for(const D of g.what)v.push(...y.spanView(D));let O=g.obj;const B=g.what[0];if(B){const D=y.prevId(B);D&&(O=D)}const Y=(0,n.listToUint8)(v);w.insBin(g.obj,O,Y)}else if(y instanceof a.ArrNode){const v=[];for(const Y of g.what){const D=y.spanView(Y);for(const N of D)for(const M of N){const Z=_.index.get(M);if(Z){const I=(0,i.toSchema)(Z).build(w);v.push(I)}}}let O=g.obj;const B=g.what[0];if(B){const Y=y.prevId(B);Y&&(O=Y)}w.insArr(g.obj,O,v)}}}}return w.flush()}toString(u){const f=[];return this.patches.forEach(({v:h})=>f.push(h)),"log"+(0,A.printTree)(u,[h=>"start"+(0,A.printTree)(h,[d=>this.start().toString(d)]),()=>"",h=>"history"+(0,A.printTree)(h,f.map((d,m)=>p=>`${m}: ${d.toString(p)}`)),()=>"",h=>"end"+(0,A.printTree)(h,[d=>this.end.toString(d)])])}};return Yc.Log=c,Yc}var MI=GI(),bp={exports:{}};function vI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OM={exports:{}},fA=OM.exports={},Ir,Rr;function _p(){throw new Error("setTimeout has not been defined")}function xp(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ir=setTimeout:Ir=_p}catch{Ir=_p}try{typeof clearTimeout=="function"?Rr=clearTimeout:Rr=xp}catch{Rr=xp}})();function YM(t){if(Ir===setTimeout)return setTimeout(t,0);if((Ir===_p||!Ir)&&setTimeout)return Ir=setTimeout,setTimeout(t,0);try{return Ir(t,0)}catch{try{return Ir.call(null,t,0)}catch{return Ir.call(this,t,0)}}}function DI(t){if(Rr===clearTimeout)return clearTimeout(t);if((Rr===xp||!Rr)&&clearTimeout)return Rr=clearTimeout,clearTimeout(t);try{return Rr(t)}catch{try{return Rr.call(null,t)}catch{return Rr.call(this,t)}}}var as=[],yo=!1,Ni,_u=-1;function BI(){!yo||!Ni||(yo=!1,Ni.length?as=Ni.concat(as):_u=-1,as.length&&SM())}function SM(){if(!yo){var t=YM(BI);yo=!0;for(var e=as.length;e;){for(Ni=as,as=[];++_u<e;)Ni&&Ni[_u].run();_u=-1,e=as.length}Ni=null,yo=!1,DI(t)}}fA.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)e[A-1]=arguments[A];as.push(new CM(t,e)),as.length===1&&!yo&&YM(SM)};function CM(t,e){this.fun=t,this.array=e}CM.prototype.run=function(){this.fun.apply(null,this.array)},fA.title="browser",fA.browser=!0,fA.env={},fA.argv=[],fA.version="",fA.versions={};function cs(){}fA.on=cs,fA.addListener=cs,fA.once=cs,fA.off=cs,fA.removeListener=cs,fA.removeAllListeners=cs,fA.emit=cs,fA.prependListener=cs,fA.prependOnceListener=cs,fA.listeners=function(t){return[]},fA.binding=function(t){throw new Error("process.binding is not supported")},fA.cwd=function(){return"/"},fA.chdir=function(t){throw new Error("process.chdir is not supported")},fA.umask=function(){return 0};var kI=OM.exports;const xu=vI(kI);var At={},PM;function EI(){if(PM)return At;PM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),u=Symbol.for("react.activity"),f=Symbol.iterator;function h(C){return C===null||typeof C!="object"?null:(C=f&&C[f]||C["@@iterator"],typeof C=="function"?C:null)}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,p={};function w(C,j,te){this.props=C,this.context=j,this.refs=p,this.updater=te||d}w.prototype.isReactComponent={},w.prototype.setState=function(C,j){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,j,"setState")},w.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function b(){}b.prototype=w.prototype;function g(C,j,te){this.props=C,this.context=j,this.refs=p,this.updater=te||d}var x=g.prototype=new b;x.constructor=g,m(x,w.prototype),x.isPureReactComponent=!0;var _=Array.isArray;function G(){}var y={H:null,A:null,T:null,S:null},v=Object.prototype.hasOwnProperty;function O(C,j,te){var W=te.ref;return{$$typeof:t,type:C,key:j,ref:W!==void 0?W:null,props:te}}function B(C,j){return O(C.type,j,C.props)}function Y(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function D(C){var j={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(te){return j[te]})}var N=/\/+/g;function M(C,j){return typeof C=="object"&&C!==null&&C.key!=null?D(""+C.key):j.toString(36)}function Z(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(G,G):(C.status="pending",C.then(function(j){C.status==="pending"&&(C.status="fulfilled",C.value=j)},function(j){C.status==="pending"&&(C.status="rejected",C.reason=j)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function R(C,j,te,W,J){var fe=typeof C;(fe==="undefined"||fe==="boolean")&&(C=null);var be=!1;if(C===null)be=!0;else switch(fe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(C.$$typeof){case t:case e:be=!0;break;case l:return be=C._init,R(be(C._payload),j,te,W,J)}}if(be)return J=J(C),be=W===""?"."+M(C,0):W,_(J)?(te="",be!=null&&(te=be.replace(N,"$&/")+"/"),R(J,j,te,"",function(ke){return ke})):J!=null&&(Y(J)&&(J=B(J,te+(J.key==null||C&&C.key===J.key?"":(""+J.key).replace(N,"$&/")+"/")+be)),j.push(J)),1;be=0;var me=W===""?".":W+":";if(_(C))for(var _e=0;_e<C.length;_e++)W=C[_e],fe=me+M(W,_e),be+=R(W,j,te,fe,J);else if(_e=h(C),typeof _e=="function")for(C=_e.call(C),_e=0;!(W=C.next()).done;)W=W.value,fe=me+M(W,_e++),be+=R(W,j,te,fe,J);else if(fe==="object"){if(typeof C.then=="function")return R(Z(C),j,te,W,J);throw j=String(C),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return be}function I(C,j,te){if(C==null)return C;var W=[],J=0;return R(C,W,"","",function(fe){return j.call(te,fe,J++)}),W}function $(C){if(C._status===-1){var j=C._result;j=j(),j.then(function(te){(C._status===0||C._status===-1)&&(C._status=1,C._result=te)},function(te){(C._status===0||C._status===-1)&&(C._status=2,C._result=te)}),C._status===-1&&(C._status=0,C._result=j)}if(C._status===1)return C._result.default;throw C._result}var V=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(j))return}else if(typeof xu=="object"&&typeof xu.emit=="function"){xu.emit("uncaughtException",C);return}console.error(C)},q={map:I,forEach:function(C,j,te){I(C,function(){j.apply(this,arguments)},te)},count:function(C){var j=0;return I(C,function(){j++}),j},toArray:function(C){return I(C,function(j){return j})||[]},only:function(C){if(!Y(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return At.Activity=u,At.Children=q,At.Component=w,At.Fragment=A,At.Profiler=r,At.PureComponent=g,At.StrictMode=n,At.Suspense=a,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=y,At.__COMPILER_RUNTIME={__proto__:null,c:function(C){return y.H.useMemoCache(C)}},At.cache=function(C){return function(){return C.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(C,j,te){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var W=m({},C.props),J=C.key;if(j!=null)for(fe in j.key!==void 0&&(J=""+j.key),j)!v.call(j,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&j.ref===void 0||(W[fe]=j[fe]);var fe=arguments.length-2;if(fe===1)W.children=te;else if(1<fe){for(var be=Array(fe),me=0;me<fe;me++)be[me]=arguments[me+2];W.children=be}return O(C.type,J,W)},At.createContext=function(C){return C={$$typeof:i,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:s,_context:C},C},At.createElement=function(C,j,te){var W,J={},fe=null;if(j!=null)for(W in j.key!==void 0&&(fe=""+j.key),j)v.call(j,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(J[W]=j[W]);var be=arguments.length-2;if(be===1)J.children=te;else if(1<be){for(var me=Array(be),_e=0;_e<be;_e++)me[_e]=arguments[_e+2];J.children=me}if(C&&C.defaultProps)for(W in be=C.defaultProps,be)J[W]===void 0&&(J[W]=be[W]);return O(C,fe,J)},At.createRef=function(){return{current:null}},At.forwardRef=function(C){return{$$typeof:o,render:C}},At.isValidElement=Y,At.lazy=function(C){return{$$typeof:l,_payload:{_status:-1,_result:C},_init:$}},At.memo=function(C,j){return{$$typeof:c,type:C,compare:j===void 0?null:j}},At.startTransition=function(C){var j=y.T,te={};y.T=te;try{var W=C(),J=y.S;J!==null&&J(te,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(G,V)}catch(fe){V(fe)}finally{j!==null&&te.types!==null&&(j.types=te.types),y.T=j}},At.unstable_useCacheRefresh=function(){return y.H.useCacheRefresh()},At.use=function(C){return y.H.use(C)},At.useActionState=function(C,j,te){return y.H.useActionState(C,j,te)},At.useCallback=function(C,j){return y.H.useCallback(C,j)},At.useContext=function(C){return y.H.useContext(C)},At.useDebugValue=function(){},At.useDeferredValue=function(C,j){return y.H.useDeferredValue(C,j)},At.useEffect=function(C,j){return y.H.useEffect(C,j)},At.useEffectEvent=function(C){return y.H.useEffectEvent(C)},At.useId=function(){return y.H.useId()},At.useImperativeHandle=function(C,j,te){return y.H.useImperativeHandle(C,j,te)},At.useInsertionEffect=function(C,j){return y.H.useInsertionEffect(C,j)},At.useLayoutEffect=function(C,j){return y.H.useLayoutEffect(C,j)},At.useMemo=function(C,j){return y.H.useMemo(C,j)},At.useOptimistic=function(C,j){return y.H.useOptimistic(C,j)},At.useReducer=function(C,j,te){return y.H.useReducer(C,j,te)},At.useRef=function(C){return y.H.useRef(C)},At.useState=function(C){return y.H.useState(C)},At.useSyncExternalStore=function(C,j,te){return y.H.useSyncExternalStore(C,j,te)},At.useTransition=function(){return y.H.useTransition()},At.version="19.2.4",At}var ZM;function NI(){return ZM||(ZM=1,bp.exports=EI()),bp.exports}NI();const IM="0123456789abcdef",RM=[],yu=[];for(let t=0;t<256;t++)RM[t]=IM[t>>4&15]+IM[t&15],t<16&&(t<10?yu[48+t]=t:yu[87+t]=t);const jM=t=>{const e=t.length;let A="",n=0;for(;n<e;)A+=RM[t[n++]];return A},Gu=t=>{const e=t.length>>1,A=e<<1,n=new Uint8Array(e);let r=0,s=0;for(;s<A;)n[r++]=yu[t.charCodeAt(s++)]<<4|yu[t.charCodeAt(s++)];return n};for(var zM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TI=typeof Uint8Array>"u"?[]:new Uint8Array(256),Mu=0;Mu<zM.length;Mu++)TI[zM.charCodeAt(Mu)]=Mu;new TextDecoder,new TextEncoder;const HM=typeof window<"u"?window:self,LM=HM.crypto||HM.msCrypto||{};LM.subtle||LM.webkitSubtle;function OI(t){const e=t.node?.id??{sid:-1,time:-1};return{get nodeId(){return e},toJSON(){const A=t.view();return typeof A=="string"?A:""},insert(A,n){t.ins(A,n)},delete(A,n){t.del(A,n)},get length(){return t.length()}}}let UM=!1;const fr=mp.Model.create();(fr.view()===void 0||typeof fr.view()!="object")&&fr.api.set({});const Ti=()=>fr.api.obj();let FM;function $M(){FM?.destroy?.(),FM=MI.Log.from(fr)}$M();function YI(t,e,A){const n=Ti();if(n.has(t))return;const r=A;n.set({[t]:r})}function SI(t,e){YI(t,0,e)}function yp(t,e){const A=Ti();A.has(t)||A.set({[t]:e})}function CI(t,e){Ti().set({[t]:e})}function PI(t,e){Ti().set({[t]:e})}function VM(t){const e=Ti();if(!e.has(t))return;const A=e.get(t);if(A)try{const r=A.get?.()??A,s=r?.view?.();if(typeof s=="string"){const i=r.asStr?.();return i?OI(i):s}return s}catch{return}}function qM(t,e){const A=fr.api.subscribe(()=>{Ti().has(t)&&e(VM(t))});return Ti().has(t)&&e(VM(t)),()=>A()}function ZI(t,e){return qM(t,A=>{Ne(A)&&e(A)})}function WM(t,e){return qM(t,A=>{A&&typeof A.toJSON=="function"&&e(A.toJSON())})}const Ss=gi("modem",["second"],t=>{if(Ss.session(t))switch(t.target){case"second":!UM&&t.data%2===0&&Ss.emit(t.player,"modem:join");break;case"join":t.sender!==Ss.id()&&Ss.reply(t,"joinack",jM(fr.toBinary()));break;case"joinack":if(t.sender!==Ss.id()){UM=!0;try{const e=Gu(t.data),A=mp.Model.fromBinary(e);fr.reset(A),$M()}catch(e){console.error("modem joinack decode",e)}}break;case"sync":{if(t.sender!==Ss.id()&&E(t.data))try{const e=mp.Patch.fromBinary(Gu(t.data));fr.applyPatch(e)}catch(e){console.error("modem sync decode",e)}break}case"presence":{if(t.sender!==Ss.id()&&E(t.data))try{const e=t.data;RI.set(e.clientId,{...e,lastSeen:Date.now()})}catch(e){console.error("modem presence decode",e)}break}}});function II(t){Ss.emit("","modem:sync",jM(t.toBinary()))}fr.api.autoFlush(!0),fr.api.onFlush.listen(II);const RI=new Map;function Ct(t){return`${t??""}`}function Cs(t,e){const A=parseFloat(Ct(t));return isNaN(A)?e:A}var Gp;try{Gp=new TextDecoder}catch{}var Ce,jr,re=0,Pt={},dt,Ps,$n=0,zr=0,OA,ls,gn=[],ut,QM={useRecords:!1,mapsAsObjects:!0};class KM{}const JM=new KM;JM.name="MessagePack 0xC1";var Zs=!1,XM=2,jI;try{new Function("")}catch{XM=1/0}class Sc{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,A){if(Ce)return f1(()=>(kp(),this?this.unpack(e,A):Sc.prototype.unpack.call(QM,e,A)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof Tt<"u"?Tt.from(e):new Uint8Array(e)),typeof A=="object"?(jr=A.end||e.length,re=A.start||0):(re=0,jr=A>-1?A:e.length),zr=0,Ps=null,OA=null,Ce=e;try{ut=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw Ce=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Sc){if(Pt=this,this.structures)return dt=this.structures,vu(A);(!dt||dt.length>0)&&(dt=[])}else Pt=QM,(!dt||dt.length>0)&&(dt=[]);return vu(A)}unpackMultiple(e,A){let n,r=0;try{Zs=!0;let s=e.length,i=this?this.unpack(e,s):Du.unpack(e,s);if(A){if(A(i,r,re)===!1)return;for(;re<s;)if(r=re,A(vu(),r,re)===!1)return}else{for(n=[i];re<s;)r=re,n.push(vu());return n}}catch(s){throw s.lastPosition=r,s.values=n,s}finally{Zs=!1,kp()}}_mergeStructures(e,A){e=e||[],Object.isFrozen(e)&&(e=e.map(n=>n.slice(0)));for(let n=0,r=e.length;n<r;n++){let s=e[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in A||[])if(n>=0){let r=e[n],s=A[n];s&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[n]=r),e[n]=s)}return this.structures=e}decode(e,A){return this.unpack(e,A)}}function vu(t){try{if(!Pt.trusted&&!Zs){let A=dt.sharedLength||0;A<dt.length&&(dt.length=A)}let e;if(Pt.randomAccessStructure&&Ce[re]<64&&Ce[re]>=32&&jI||(e=dA()),OA&&(re=OA.postBundlePosition,OA=null),Zs&&(dt.restoreStructures=null),re==jr)dt&&dt.restoreStructures&&e1(),dt=null,Ce=null,ls&&(ls=null);else{if(re>jr)throw new Error("Unexpected end of MessagePack data");if(!Zs){let A;try{A=JSON.stringify(e,(n,r)=>typeof r=="bigint"?`${r}n`:r).slice(0,100)}catch(n){A="(JSON view not available "+n+")"}throw new Error("Data read, but end of buffer not reached "+A)}}return e}catch(e){throw dt&&dt.restoreStructures&&e1(),kp(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||re>jr)&&(e.incomplete=!0),e}}function e1(){for(let t in dt.restoreStructures)dt[t]=dt.restoreStructures[t];dt.restoreStructures=null}function dA(){let t=Ce[re++];if(t<160)if(t<128){if(t<64)return t;{let e=dt[t&63]||Pt.getStructures&&A1()[t&63];return e?(e.read||(e.read=Mp(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,Pt.mapsAsObjects){let e={};for(let A=0;A<t;A++){let n=a1();n==="__proto__"&&(n="__proto_"),e[n]=dA()}return e}else{let e=new Map;for(let A=0;A<t;A++)e.set(dA(),dA());return e}else{t-=144;let e=new Array(t);for(let A=0;A<t;A++)e[A]=dA();return Pt.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if(zr>=re)return Ps.slice(re-$n,(re+=e)-$n);if(zr==0&&jr<140){let A=e<16?Dp(e):s1(e);if(A!=null)return A}return vp(e)}else{let e;switch(t){case 192:return null;case 193:return OA?(e=dA(),e>0?OA[1].slice(OA.position1,OA.position1+=e):OA[0].slice(OA.position0,OA.position0-=e)):JM;case 194:return!1;case 195:return!0;case 196:if(e=Ce[re++],e===void 0)throw new Error("Unexpected end of buffer");return Bp(e);case 197:return e=ut.getUint16(re),re+=2,Bp(e);case 198:return e=ut.getUint32(re),re+=4,Bp(e);case 199:return Oi(Ce[re++]);case 200:return e=ut.getUint16(re),re+=2,Oi(e);case 201:return e=ut.getUint32(re),re+=4,Oi(e);case 202:if(e=ut.getFloat32(re),Pt.useFloat32>2){let A=Ep[(Ce[re]&127)<<1|Ce[re+1]>>7];return re+=4,(A*e+(e>0?.5:-.5)>>0)/A}return re+=4,e;case 203:return e=ut.getFloat64(re),re+=8,e;case 204:return Ce[re++];case 205:return e=ut.getUint16(re),re+=2,e;case 206:return e=ut.getUint32(re),re+=4,e;case 207:return Pt.int64AsType==="number"?(e=ut.getUint32(re)*4294967296,e+=ut.getUint32(re+4)):Pt.int64AsType==="string"?e=ut.getBigUint64(re).toString():Pt.int64AsType==="auto"?(e=ut.getBigUint64(re),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=ut.getBigUint64(re),re+=8,e;case 208:return ut.getInt8(re++);case 209:return e=ut.getInt16(re),re+=2,e;case 210:return e=ut.getInt32(re),re+=4,e;case 211:return Pt.int64AsType==="number"?(e=ut.getInt32(re)*4294967296,e+=ut.getUint32(re+4)):Pt.int64AsType==="string"?e=ut.getBigInt64(re).toString():Pt.int64AsType==="auto"?(e=ut.getBigInt64(re),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=ut.getBigInt64(re),re+=8,e;case 212:if(e=Ce[re++],e==114)return l1(Ce[re++]&63);{let A=gn[e];if(A)return A.read?(re++,A.read(dA())):A.noBuffer?(re++,A()):A(Ce.subarray(re,++re));throw new Error("Unknown extension "+e)}case 213:return e=Ce[re],e==114?(re++,l1(Ce[re++]&63,Ce[re++])):Oi(2);case 214:return Oi(4);case 215:return Oi(8);case 216:return Oi(16);case 217:return e=Ce[re++],zr>=re?Ps.slice(re-$n,(re+=e)-$n):HI(e);case 218:return e=ut.getUint16(re),re+=2,zr>=re?Ps.slice(re-$n,(re+=e)-$n):LI(e);case 219:return e=ut.getUint32(re),re+=4,zr>=re?Ps.slice(re-$n,(re+=e)-$n):UI(e);case 220:return e=ut.getUint16(re),re+=2,n1(e);case 221:return e=ut.getUint32(re),re+=4,n1(e);case 222:return e=ut.getUint16(re),re+=2,r1(e);case 223:return e=ut.getUint32(re),re+=4,r1(e);default:if(t>=224)return t-256;if(t===void 0){let A=new Error("Unexpected end of MessagePack data");throw A.incomplete=!0,A}throw new Error("Unknown MessagePack token "+t)}}}const zI=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Mp(t,e){function A(){if(A.count++>XM){let r=t.read=new Function("r","return function(){return "+(Pt.freezeData?"Object.freeze":"")+"({"+t.map(s=>s==="__proto__"?"__proto_:r()":zI.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(dA);return t.highByte===0&&(t.read=t1(e,t.read)),r()}let n={};for(let r=0,s=t.length;r<s;r++){let i=t[r];i==="__proto__"&&(i="__proto_"),n[i]=dA()}return Pt.freezeData?Object.freeze(n):n}return A.count=0,t.highByte===0?t1(e,A):A}const t1=(t,e)=>function(){let A=Ce[re++];if(A===0)return e();let n=t<32?-(t+(A<<5)):t+(A<<5),r=dt[n]||A1()[n];if(!r)throw new Error("Record id is not defined for "+n);return r.read||(r.read=Mp(r,t)),r.read()};function A1(){let t=f1(()=>(Ce=null,Pt.getStructures()));return dt=Pt._mergeStructures(t,dt)}var vp=Cc,HI=Cc,LI=Cc,UI=Cc;function Cc(t){let e;if(t<16&&(e=Dp(t)))return e;if(t>64&&Gp)return Gp.decode(Ce.subarray(re,re+=t));const A=re+t,n=[];for(e="";re<A;){const r=Ce[re++];if((r&128)===0)n.push(r);else if((r&224)===192){const s=Ce[re++]&63;n.push((r&31)<<6|s)}else if((r&240)===224){const s=Ce[re++]&63,i=Ce[re++]&63;n.push((r&31)<<12|s<<6|i)}else if((r&248)===240){const s=Ce[re++]&63,i=Ce[re++]&63,o=Ce[re++]&63;let a=(r&7)<<18|s<<12|i<<6|o;a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a)}else n.push(r);n.length>=4096&&(e+=YA.apply(String,n),n.length=0)}return n.length>0&&(e+=YA.apply(String,n)),e}function n1(t){let e=new Array(t);for(let A=0;A<t;A++)e[A]=dA();return Pt.freezeData?Object.freeze(e):e}function r1(t){if(Pt.mapsAsObjects){let e={};for(let A=0;A<t;A++){let n=a1();n==="__proto__"&&(n="__proto_"),e[n]=dA()}return e}else{let e=new Map;for(let A=0;A<t;A++)e.set(dA(),dA());return e}}var YA=String.fromCharCode;function s1(t){let e=re,A=new Array(t);for(let n=0;n<t;n++){const r=Ce[re++];if((r&128)>0){re=e;return}A[n]=r}return YA.apply(String,A)}function Dp(t){if(t<4)if(t<2){if(t===0)return"";{let e=Ce[re++];if((e&128)>1){re-=1;return}return YA(e)}}else{let e=Ce[re++],A=Ce[re++];if((e&128)>0||(A&128)>0){re-=2;return}if(t<3)return YA(e,A);let n=Ce[re++];if((n&128)>0){re-=3;return}return YA(e,A,n)}else{let e=Ce[re++],A=Ce[re++],n=Ce[re++],r=Ce[re++];if((e&128)>0||(A&128)>0||(n&128)>0||(r&128)>0){re-=4;return}if(t<6){if(t===4)return YA(e,A,n,r);{let s=Ce[re++];if((s&128)>0){re-=5;return}return YA(e,A,n,r,s)}}else if(t<8){let s=Ce[re++],i=Ce[re++];if((s&128)>0||(i&128)>0){re-=6;return}if(t<7)return YA(e,A,n,r,s,i);let o=Ce[re++];if((o&128)>0){re-=7;return}return YA(e,A,n,r,s,i,o)}else{let s=Ce[re++],i=Ce[re++],o=Ce[re++],a=Ce[re++];if((s&128)>0||(i&128)>0||(o&128)>0||(a&128)>0){re-=8;return}if(t<10){if(t===8)return YA(e,A,n,r,s,i,o,a);{let c=Ce[re++];if((c&128)>0){re-=9;return}return YA(e,A,n,r,s,i,o,a,c)}}else if(t<12){let c=Ce[re++],l=Ce[re++];if((c&128)>0||(l&128)>0){re-=10;return}if(t<11)return YA(e,A,n,r,s,i,o,a,c,l);let u=Ce[re++];if((u&128)>0){re-=11;return}return YA(e,A,n,r,s,i,o,a,c,l,u)}else{let c=Ce[re++],l=Ce[re++],u=Ce[re++],f=Ce[re++];if((c&128)>0||(l&128)>0||(u&128)>0||(f&128)>0){re-=12;return}if(t<14){if(t===12)return YA(e,A,n,r,s,i,o,a,c,l,u,f);{let h=Ce[re++];if((h&128)>0){re-=13;return}return YA(e,A,n,r,s,i,o,a,c,l,u,f,h)}}else{let h=Ce[re++],d=Ce[re++];if((h&128)>0||(d&128)>0){re-=14;return}if(t<15)return YA(e,A,n,r,s,i,o,a,c,l,u,f,h,d);let m=Ce[re++];if((m&128)>0){re-=15;return}return YA(e,A,n,r,s,i,o,a,c,l,u,f,h,d,m)}}}}}function i1(){let t=Ce[re++],e;if(t<192)e=t-160;else switch(t){case 217:e=Ce[re++];break;case 218:e=ut.getUint16(re),re+=2;break;case 219:e=ut.getUint32(re),re+=4;break;default:throw new Error("Expected string")}return Cc(e)}function Bp(t){return Pt.copyBuffers?Uint8Array.prototype.slice.call(Ce,re,re+=t):Ce.subarray(re,re+=t)}function Oi(t){let e=Ce[re++];if(gn[e]){let A;return gn[e](Ce.subarray(re,A=re+=t),n=>{re=n;try{return dA()}finally{re=A}})}else throw new Error("Unknown extension type "+e)}var o1=new Array(4096);function a1(){let t=Ce[re++];if(t>=160&&t<192){if(t=t-160,zr>=re)return Ps.slice(re-$n,(re+=t)-$n);if(!(zr==0&&jr<180))return vp(t)}else return re--,c1(dA());let e=(t<<5^(t>1?ut.getUint16(re):t>0?Ce[re]:0))&4095,A=o1[e],n=re,r=re+t-3,s,i=0;if(A&&A.bytes==t){for(;n<r;){if(s=ut.getUint32(n),s!=A[i++]){n=1879048192;break}n+=4}for(r+=3;n<r;)if(s=Ce[n++],s!=A[i++]){n=1879048192;break}if(n===r)return re=n,A.string;r-=3,n=re}for(A=[],o1[e]=A,A.bytes=t;n<r;)s=ut.getUint32(n),A.push(s),n+=4;for(r+=3;n<r;)s=Ce[n++],A.push(s);let o=t<16?Dp(t):s1(t);return o!=null?A.string=o:A.string=vp(t)}function c1(t){if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";if(Pt.allowArraysInMapKeys&&Array.isArray(t)&&t.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return t.flat().toString();throw new Error(`Invalid property type for record: ${typeof t}`)}const l1=(t,e)=>{let A=dA().map(c1),n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,A.highByte=e);let r=dt[t];return r&&(r.isShared||Zs)&&((dt.restoreStructures||(dt.restoreStructures=[]))[t]=r),dt[t]=A,A.read=Mp(A,n),A.read()};gn[0]=()=>{},gn[0].noBuffer=!0,gn[66]=t=>{let e=t.byteLength%8||8,A=BigInt(t[0]&128?t[0]-256:t[0]);for(let n=1;n<e;n++)A<<=BigInt(8),A+=BigInt(t[n]);if(t.byteLength!==e){let n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=(s,i)=>{let o=i-s;if(o<=40){let u=n.getBigUint64(s);for(let f=s+8;f<i;f+=8)u<<=64n,u|=n.getBigUint64(f);return u}let a=s+(o>>4<<3),c=r(s,a),l=r(a,i);return c<<BigInt((i-a)*8)|l};A=A<<BigInt((n.byteLength-e)*8)|r(e,n.byteLength)}return A};let u1={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};gn[101]=()=>{let t=dA();if(!u1[t[0]]){let e=Error(t[1],{cause:t[2]});return e.name=t[0],e}return u1[t[0]](t[1],{cause:t[2]})},gn[105]=t=>{if(Pt.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=ut.getUint32(re-4);ls||(ls=new Map);let A=Ce[re],n;A>=144&&A<160||A==220||A==221?n=[]:A>=128&&A<144||A==222||A==223?n=new Map:(A>=199&&A<=201||A>=212&&A<=216)&&Ce[re+1]===115?n=new Set:n={};let r={target:n};ls.set(e,r);let s=dA();if(r.used)Object.assign(n,s);else return r.target=s;if(n instanceof Map)for(let[i,o]of s.entries())n.set(i,o);if(n instanceof Set)for(let i of Array.from(s))n.add(i);return n},gn[112]=t=>{if(Pt.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=ut.getUint32(re-4),A=ls.get(e);return A.used=!0,A.target},gn[115]=()=>new Set(dA());const h1=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");let FI=typeof globalThis=="object"?globalThis:window;gn[116]=t=>{let e=t[0],A=Uint8Array.prototype.slice.call(t,1).buffer,n=h1[e];if(!n){if(e===16)return A;if(e===17)return new DataView(A);throw new Error("Could not find typed array for code "+e)}return new FI[n](A)},gn[120]=()=>{let t=dA();return new RegExp(t[0],t[1])};const $I=[];gn[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],A=re;return re+=e-t.length,OA=$I,OA=[i1(),i1()],OA.position0=0,OA.position1=0,OA.postBundlePosition=re,re=A,dA()},gn[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function f1(t){let e=jr,A=re,n=$n,r=zr,s=Ps,i=ls,o=OA,a=new Uint8Array(Ce.slice(0,jr)),c=dt,l=dt.slice(0,dt.length),u=Pt,f=Zs,h=t();return jr=e,re=A,$n=n,zr=r,Ps=s,ls=i,OA=o,Ce=a,Zs=f,dt=c,dt.splice(0,dt.length,...l),Pt=u,ut=new DataView(Ce.buffer,Ce.byteOffset,Ce.byteLength),h}function kp(){Ce=null,ls=null,dt=null}const Ep=new Array(147);for(let t=0;t<256;t++)Ep[t]=+("1e"+Math.floor(45.15-t*.30103));var Du=new Sc({useRecords:!1});const VI=Du.unpack;Du.unpackMultiple,Du.unpack;let qI=new Float32Array(1);new Uint8Array(qI.buffer,0,4);let Bu;try{Bu=new TextEncoder}catch{}let Np,Tp;const Go=typeof Tt<"u",ku=Go?function(t){return Tt.allocUnsafeSlow(t)}:Uint8Array,d1=Go?Tt:Uint8Array,m1=Go?4294967296:2144337920;let le,Pc,Ot,ie=0,$A,Kt=null,WI;const QI=21760,KI=/[\u0080-\uFFFF]/,Mo=Symbol("record-id");class JI extends Sc{constructor(e){super(e),this.offset=0;let A,n,r,s,i=d1.prototype.utf8Write?function(N,M){return le.utf8Write(N,M,le.byteLength-M)}:Bu&&Bu.encodeInto?function(N,M){return Bu.encodeInto(N,le.subarray(M)).written}:!1,o=this;e||(e={});let a=e&&e.sequential,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(l==null&&(l=c?32:0),l>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let u=e.maxOwnStructures;u==null&&(u=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let f=l>32||u+l>64,h=l+64,d=l+u+64;if(d>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],p=0,w=0;this.pack=this.encode=function(N,M){if(le||(le=new ku(8192),Ot=le.dataView||(le.dataView=new DataView(le.buffer,0,8192)),ie=0),$A=le.length-10,$A-ie<2048?(le=new ku(le.length),Ot=le.dataView||(le.dataView=new DataView(le.buffer,0,le.length)),$A=le.length-10,ie=0):ie=ie+7&2147483640,A=ie,M&rR&&(ie+=M&255),s=o.structuredClone?new Map:null,o.bundleStrings&&typeof N!="string"?(Kt=[],Kt.size=1/0):Kt=null,r=o.structures,r){r.uninitialized&&(r=o._mergeStructures(o.getStructures()));let R=r.sharedLength||0;if(R>l)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let I=0;I<R;I++){let $=r[I];if(!$)continue;let V,q=r.transitions;for(let C=0,j=$.length;C<j;C++){let te=$[C];V=q[te],V||(V=q[te]=Object.create(null)),q=V}q[Mo]=I+64}this.lastNamedStructuresLength=R}a||(r.nextId=R+64)}n&&(n=!1);let Z;try{o.randomAccessStructure&&N&&typeof N=="object"?N.constructor===Object?D(N):N.constructor!==Map&&!Array.isArray(N)&&!Tp.some(I=>N instanceof I)?D(N.toJSON?N.toJSON():N):x(N):x(N);let R=Kt;if(Kt&&g1(A,x,0),s&&s.idsToInsert){let I=s.idsToInsert.sort((C,j)=>C.offset>j.offset?1:-1),$=I.length,V=-1;for(;R&&$>0;){let C=I[--$].offset+A;C<R.stringsPosition+A&&V===-1&&(V=0),C>R.position+A?V>=0&&(V+=6):(V>=0&&(Ot.setUint32(R.position+A,Ot.getUint32(R.position+A)+V),V=-1),R=R.previous,$++)}V>=0&&R&&Ot.setUint32(R.position+A,Ot.getUint32(R.position+A)+V),ie+=I.length*6,ie>$A&&O(ie),o.offset=ie;let q=XI(le.subarray(A,ie),I);return s=null,q}return o.offset=ie,M&AR?(le.start=A,le.end=ie,le):le.subarray(A,ie)}catch(R){throw Z=R,R}finally{if(r&&(b(),n&&o.saveStructures)){let R=r.sharedLength||0,I=le.subarray(A,ie),$=eR(r,o);if(!Z)return o.saveStructures($,$.isCompatible)===!1?o.pack(N,M):(o.lastNamedStructuresLength=R,le.length>1073741824&&(le=null),I)}le.length>1073741824&&(le=null),M&nR&&(ie=A)}};const b=()=>{w<10&&w++;let N=r.sharedLength||0;if(r.length>N&&!a&&(r.length=N),p>1e4)r.transitions=null,w=0,p=0,m.length>0&&(m=[]);else if(m.length>0&&!a){for(let M=0,Z=m.length;M<Z;M++)m[M][Mo]=0;m=[]}},g=N=>{var M=N.length;M<16?le[ie++]=144|M:M<65536?(le[ie++]=220,le[ie++]=M>>8,le[ie++]=M&255):(le[ie++]=221,Ot.setUint32(ie,M),ie+=4);for(let Z=0;Z<M;Z++)x(N[Z])},x=N=>{ie>$A&&(le=O(ie));var M=typeof N,Z;if(M==="string"){let R=N.length;if(Kt&&R>=4&&R<4096){if((Kt.size+=R)>QI){let q,C=(Kt[0]?Kt[0].length*3+Kt[1].length:0)+10;ie+C>$A&&(le=O(ie+C));let j;Kt.position?(j=Kt,le[ie]=200,ie+=3,le[ie++]=98,q=ie-A,ie+=4,g1(A,x,0),Ot.setUint16(q+A-3,ie-A-q)):(le[ie++]=214,le[ie++]=98,q=ie-A,ie+=4),Kt=["",""],Kt.previous=j,Kt.size=0,Kt.position=q}let V=KI.test(N);Kt[V?0:1]+=N,le[ie++]=193,x(V?-R:R);return}let I;R<32?I=1:R<256?I=2:R<65536?I=3:I=5;let $=R*3;if(ie+$>$A&&(le=O(ie+$)),R<64||!i){let V,q,C,j=ie+I;for(V=0;V<R;V++)q=N.charCodeAt(V),q<128?le[j++]=q:q<2048?(le[j++]=q>>6|192,le[j++]=q&63|128):(q&64512)===55296&&((C=N.charCodeAt(V+1))&64512)===56320?(q=65536+((q&1023)<<10)+(C&1023),V++,le[j++]=q>>18|240,le[j++]=q>>12&63|128,le[j++]=q>>6&63|128,le[j++]=q&63|128):(le[j++]=q>>12|224,le[j++]=q>>6&63|128,le[j++]=q&63|128);Z=j-ie-I}else Z=i(N,ie+I);Z<32?le[ie++]=160|Z:Z<256?(I<2&&le.copyWithin(ie+2,ie+1,ie+1+Z),le[ie++]=217,le[ie++]=Z):Z<65536?(I<3&&le.copyWithin(ie+3,ie+2,ie+2+Z),le[ie++]=218,le[ie++]=Z>>8,le[ie++]=Z&255):(I<5&&le.copyWithin(ie+5,ie+3,ie+3+Z),le[ie++]=219,Ot.setUint32(ie,Z),ie+=4),ie+=Z}else if(M==="number")if(N>>>0===N)N<32||N<128&&this.useRecords===!1||N<64&&!this.randomAccessStructure?le[ie++]=N:N<256?(le[ie++]=204,le[ie++]=N):N<65536?(le[ie++]=205,le[ie++]=N>>8,le[ie++]=N&255):(le[ie++]=206,Ot.setUint32(ie,N),ie+=4);else if(N>>0===N)N>=-32?le[ie++]=256+N:N>=-128?(le[ie++]=208,le[ie++]=N+256):N>=-32768?(le[ie++]=209,Ot.setInt16(ie,N),ie+=2):(le[ie++]=210,Ot.setInt32(ie,N),ie+=4);else{let R;if((R=this.useFloat32)>0&&N<4294967296&&N>=-2147483648){le[ie++]=202,Ot.setFloat32(ie,N);let I;if(R<4||(I=N*Ep[(le[ie]&127)<<1|le[ie+1]>>7])>>0===I){ie+=4;return}else ie--}le[ie++]=203,Ot.setFloat64(ie,N),ie+=8}else if(M==="object"||M==="function")if(!N)le[ie++]=192;else{if(s){let I=s.get(N);if(I){if(!I.id){let $=s.idsToInsert||(s.idsToInsert=[]);I.id=$.push(I)}le[ie++]=214,le[ie++]=112,Ot.setUint32(ie,I.id),ie+=4;return}else s.set(N,{offset:ie-A})}let R=N.constructor;if(R===Object)v(N);else if(R===Array)g(N);else if(R===Map)if(this.mapAsEmptyObject)le[ie++]=128;else{Z=N.size,Z<16?le[ie++]=128|Z:Z<65536?(le[ie++]=222,le[ie++]=Z>>8,le[ie++]=Z&255):(le[ie++]=223,Ot.setUint32(ie,Z),ie+=4);for(let[I,$]of N)x(I),x($)}else{for(let I=0,$=Np.length;I<$;I++){let V=Tp[I];if(N instanceof V){let q=Np[I];if(q.write){q.type&&(le[ie++]=212,le[ie++]=q.type,le[ie++]=0);let J=q.write.call(this,N);J===N?Array.isArray(N)?g(N):v(N):x(J);return}let C=le,j=Ot,te=ie;le=null;let W;try{W=q.pack.call(this,N,J=>(le=C,C=null,ie+=J,ie>$A&&O(ie),{target:le,targetView:Ot,position:ie-J}),x)}finally{C&&(le=C,Ot=j,ie=te,$A=le.length-10)}W&&(W.length+ie>$A&&O(W.length+ie),ie=p1(W,le,ie,q.type));return}}if(Array.isArray(N))g(N);else{if(N.toJSON){const I=N.toJSON();if(I!==N)return x(I)}if(M==="function")return x(this.writeFunction&&this.writeFunction(N));v(N)}}}else if(M==="boolean")le[ie++]=N?195:194;else if(M==="bigint"){if(N<9223372036854776e3&&N>=-9223372036854776e3)le[ie++]=211,Ot.setBigInt64(ie,N);else if(N<18446744073709552e3&&N>0)le[ie++]=207,Ot.setBigUint64(ie,N);else if(this.largeBigIntToFloat)le[ie++]=203,Ot.setFloat64(ie,Number(N));else{if(this.largeBigIntToString)return x(N.toString());if(this.useBigIntExtension||this.moreTypes){let R=N<0?BigInt(-1):BigInt(0),I;if(N>>BigInt(65536)===R){let $=BigInt(18446744073709552e3)-BigInt(1),V=[];for(;V.push(N&$),N>>BigInt(63)!==R;)N>>=BigInt(64);I=new Uint8Array(new BigUint64Array(V).buffer),I.reverse()}else{let $=N<0,V=($?~N:N).toString(16);if(V.length%2?V="0"+V:parseInt(V.charAt(0),16)>=8&&(V="00"+V),Go)I=Tt.from(V,"hex");else{I=new Uint8Array(V.length/2);for(let q=0;q<I.length;q++)I[q]=parseInt(V.slice(q*2,q*2+2),16)}if($)for(let q=0;q<I.length;q++)I[q]=~I[q]}I.length+ie>$A&&O(I.length+ie),ie=p1(I,le,ie,66);return}else throw new RangeError(N+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}ie+=8}else if(M==="undefined")this.encodeUndefinedAsNil?le[ie++]=192:(le[ie++]=212,le[ie++]=0,le[ie++]=0);else throw new Error("Unknown type: "+M)},_=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?N=>{let M;if(this.skipValues){M=[];for(let I in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(I))&&!this.skipValues.includes(N[I])&&M.push(I)}else M=Object.keys(N);let Z=M.length;Z<16?le[ie++]=128|Z:Z<65536?(le[ie++]=222,le[ie++]=Z>>8,le[ie++]=Z&255):(le[ie++]=223,Ot.setUint32(ie,Z),ie+=4);let R;if(this.coercibleKeyAsNumber)for(let I=0;I<Z;I++){R=M[I];let $=Number(R);x(isNaN($)?R:$),x(N[R])}else for(let I=0;I<Z;I++)x(R=M[I]),x(N[R])}:N=>{le[ie++]=222;let M=ie-A;ie+=2;let Z=0;for(let R in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty(R))&&(x(R),x(N[R]),Z++);if(Z>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');le[M+++A]=Z>>8,le[M+A]=Z&255},G=this.useRecords===!1?_:e.progressiveRecords&&!f?N=>{let M,Z=r.transitions||(r.transitions=Object.create(null)),R=ie++-A,I;for(let $ in N)if(typeof N.hasOwnProperty!="function"||N.hasOwnProperty($)){if(M=Z[$],M)Z=M;else{let V=Object.keys(N),q=Z;Z=r.transitions;let C=0;for(let j=0,te=V.length;j<te;j++){let W=V[j];M=Z[W],M||(M=Z[W]=Object.create(null),C++),Z=M}R+A+1==ie?(ie--,B(Z,V,C)):Y(Z,V,R,C),I=!0,Z=q[$]}x(N[$])}if(!I){let $=Z[Mo];$?le[R+A]=$:Y(Z,Object.keys(N),R,0)}}:N=>{let M,Z=r.transitions||(r.transitions=Object.create(null)),R=0;for(let $ in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty($))&&(M=Z[$],M||(M=Z[$]=Object.create(null),R++),Z=M);let I=Z[Mo];I?I>=96&&f?(le[ie++]=((I-=96)&31)+96,le[ie++]=I>>5):le[ie++]=I:B(Z,Z.__keys__||Object.keys(N),R);for(let $ in N)(typeof N.hasOwnProperty!="function"||N.hasOwnProperty($))&&x(N[$])},y=typeof this.useRecords=="function"&&this.useRecords,v=y?N=>{y(N)?G(N):_(N)}:G,O=N=>{let M;if(N>16777216){if(N-A>m1)throw new Error("Packed buffer would be larger than maximum buffer size");M=Math.min(m1,Math.round(Math.max((N-A)*(N>67108864?1.25:2),4194304)/4096)*4096)}else M=(Math.max(N-A<<2,le.length-1)>>12)+1<<12;let Z=new ku(M);return Ot=Z.dataView||(Z.dataView=new DataView(Z.buffer,0,M)),N=Math.min(N,le.length),le.copy?le.copy(Z,0,A,N):Z.set(le.slice(A,N)),ie-=A,A=0,$A=Z.length-10,le=Z},B=(N,M,Z)=>{let R=r.nextId;R||(R=64),R<h&&this.shouldShareStructure&&!this.shouldShareStructure(M)?(R=r.nextOwnId,R<d||(R=h),r.nextOwnId=R+1):(R>=d&&(R=h),r.nextId=R+1);let I=M.highByte=R>=96&&f?R-96>>5:-1;N[Mo]=R,N.__keys__=M,r[R-64]=M,R<h?(M.isShared=!0,r.sharedLength=R-63,n=!0,I>=0?(le[ie++]=(R&31)+96,le[ie++]=I):le[ie++]=R):(I>=0?(le[ie++]=213,le[ie++]=114,le[ie++]=(R&31)+96,le[ie++]=I):(le[ie++]=212,le[ie++]=114,le[ie++]=R),Z&&(p+=w*Z),m.length>=u&&(m.shift()[Mo]=0),m.push(N),x(M))},Y=(N,M,Z,R)=>{let I=le,$=ie,V=$A,q=A;le=Pc,ie=0,A=0,le||(Pc=le=new ku(8192)),$A=le.length-10,B(N,M,R),Pc=le;let C=ie;if(le=I,ie=$,$A=V,A=q,C>1){let j=ie+C-1;j>$A&&O(j);let te=Z+A;le.copyWithin(te+C,te+1,ie),le.set(Pc.slice(0,C),te),ie=j}else le[Z+A]=Pc[0]},D=N=>{let M=WI(N,le,A,ie,r,O,(Z,R,I)=>{if(I)return n=!0;ie=R;let $=le;return x(Z),b(),$!==le?{position:ie,targetView:Ot,target:le}:ie},this);if(M===0)return v(N);ie=M}}useBuffer(e){le=e,le.dataView||(le.dataView=new DataView(le.buffer,le.byteOffset,le.byteLength)),Ot=le.dataView,ie=0}set position(e){ie=e}get position(){return ie}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}Tp=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,KM],Np=[{pack(t,e,A){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:r,targetView:s,position:i}=e(6);r[i++]=214,r[i++]=255,s.setUint32(i,n)}else if(n>0&&n<4294967296){let{target:r,targetView:s,position:i}=e(10);r[i++]=215,r[i++]=255,s.setUint32(i,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(i+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),A(this.onInvalidDate());let{target:r,targetView:s,position:i}=e(3);r[i++]=212,r[i++]=255,r[i++]=255}else{let{target:r,targetView:s,position:i}=e(15);r[i++]=199,r[i++]=12,r[i++]=255,s.setUint32(i,t.getMilliseconds()*1e6),s.setBigInt64(i+4,BigInt(Math.floor(n)))}}},{pack(t,e,A){if(this.setAsEmptyObject)return e(0),A({});let n=Array.from(t),{target:r,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(r[s++]=212,r[s++]=115,r[s++]=0),A(n)}},{pack(t,e,A){let{target:n,position:r}=e(this.moreTypes?3:0);this.moreTypes&&(n[r++]=212,n[r++]=101,n[r++]=0),A([t.name,t.message,t.cause])}},{pack(t,e,A){let{target:n,position:r}=e(this.moreTypes?3:0);this.moreTypes&&(n[r++]=212,n[r++]=120,n[r++]=0),A([t.source,t.flags])}},{pack(t,e){this.moreTypes?Op(t,16,e):Yp(Go?Tt.from(t):new Uint8Array(t),e)}},{pack(t,e){let A=t.constructor;A!==d1&&this.moreTypes?Op(t,h1.indexOf(A.name),e):Yp(t,e)}},{pack(t,e){this.moreTypes?Op(t,17,e):Yp(Go?Tt.from(t):new Uint8Array(t),e)}},{pack(t,e){let{target:A,position:n}=e(1);A[n]=193}}];function Op(t,e,A,n){let r=t.byteLength;if(r+1<256){var{target:s,position:i}=A(4+r);s[i++]=199,s[i++]=r+1}else if(r+1<65536){var{target:s,position:i}=A(5+r);s[i++]=200,s[i++]=r+1>>8,s[i++]=r+1&255}else{var{target:s,position:i,targetView:o}=A(7+r);s[i++]=201,o.setUint32(i,r+1),i+=4}s[i++]=116,s[i++]=e,t.buffer||(t=new Uint8Array(t)),s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i)}function Yp(t,e){let A=t.byteLength;var n,r;if(A<256){var{target:n,position:r}=e(A+2);n[r++]=196,n[r++]=A}else if(A<65536){var{target:n,position:r}=e(A+3);n[r++]=197,n[r++]=A>>8,n[r++]=A&255}else{var{target:n,position:r,targetView:s}=e(A+5);n[r++]=198,s.setUint32(r,A),r+=4}n.set(t,r)}function p1(t,e,A,n){let r=t.length;switch(r){case 1:e[A++]=212;break;case 2:e[A++]=213;break;case 4:e[A++]=214;break;case 8:e[A++]=215;break;case 16:e[A++]=216;break;default:r<256?(e[A++]=199,e[A++]=r):r<65536?(e[A++]=200,e[A++]=r>>8,e[A++]=r&255):(e[A++]=201,e[A++]=r>>24,e[A++]=r>>16&255,e[A++]=r>>8&255,e[A++]=r&255)}return e[A++]=n,e.set(t,A),A+=r,A}function XI(t,e){let A,n=e.length*6,r=t.length-n;for(;A=e.pop();){let s=A.offset,i=A.id;t.copyWithin(s+n,s,r),n-=6;let o=s+n;t[o++]=214,t[o++]=105,t[o++]=i>>24,t[o++]=i>>16&255,t[o++]=i>>8&255,t[o++]=i&255,r=s}return t}function g1(t,e,A){if(Kt.length>0){Ot.setUint32(Kt.position+t,ie+A-Kt.position-t),Kt.stringsPosition=ie-t;let n=Kt;Kt=null,e(n[0]),e(n[1])}}function eR(t,e){return t.isCompatible=A=>{let n=!A||(e.lastNamedStructuresLength||0)===A.length;return n||e._mergeStructures(A),n},t}let w1=new JI({useRecords:!1});const tR=w1.pack;w1.pack;const AR=512,nR=1024,rR=2048,Ae=gi("SOFTWARE");function Yt(){return null}function us(t,e,A={}){if(!E(t))return;const n=[],r=Object.keys(t);for(let s=0;s<r.length;++s){let i=r[s],o=t[i];const a=A[i];E(a)&&(o=a(o));const c=e[i];E(c)&&(i=c),o!==null&&n.push(i,o)}return n}function Zc(t,e,A={}){if(E(t))try{const n={};for(let r=0;r<t.length;r+=2){let s=t[r],i=t[r+1];const o=e[s];E(o)&&(s=o);const a=A[s];E(a)&&(i=a(i)),n[s]=i}return n}catch(n){xt(Ae,"","format",n.message)}}function sR(t){try{return tR(t)}catch(e){xt(Ae,"","format",e.message)}}function Sp(t){if(xe(t)){try{return JSON.parse(t)}catch(e){xt(Ae,"","format",e.message)}return}try{return VI(t)}catch(e){xt(Ae,"","format",e.message)}}function b1(t,e){return t%e}function _1(t,e){return Math.floor(t/e)}function iR(t,e){return{x:b1(t,e),y:_1(t,e)}}function x1(t,e){const A=t.x-e.x,n=t.y-e.y;return Math.sqrt(A*A+n*n)}function wn(t,e){return t.x+t.y*e}function dr(t,e){return`${t.x},${t.y},${e.x},${e.y}`}function Cp(t,e,A,n,r,s){return t>=s&&t<=n&&e>=A&&e<=r}function Pp(t,e,A,n){const r=[],s=Math.min(t,A),i=Math.max(t,A),o=Math.min(e,n),a=Math.max(e,n);for(let c=o;c<=a;++c)for(let l=s;l<=i;++l)r.push({x:l,y:c});return r}function y1(t,e,A,n){const r=[],s=Math.abs(A-t),i=Math.abs(n-e),o=t<A?1:-1,a=e<n?1:-1;let c=s-i;for(r.push({x:t,y:e});t!==A||e!==n;){const l=2*c;l>-i&&(c-=i,t+=o),l<s&&(c+=s,e+=a),r.push({x:t,y:e})}return r}const G1="176",oR="",mr="srgb",M1="srgb-linear",v1="linear",Zp="srgb",VA=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let D1=1234567;const B1=Math.PI/180,k1=180/Math.PI;function aR(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,A=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(VA[t&255]+VA[t>>8&255]+VA[t>>16&255]+VA[t>>24&255]+"-"+VA[e&255]+VA[e>>8&255]+"-"+VA[e>>16&15|64]+VA[e>>24&255]+"-"+VA[A&63|128]+VA[A>>8&255]+"-"+VA[A>>16&255]+VA[A>>24&255]+VA[n&255]+VA[n>>8&255]+VA[n>>16&255]+VA[n>>24&255]).toLowerCase()}function Vn(t,e,A){return Math.max(e,Math.min(A,t))}function Ip(t,e){return(t%e+e)%e}function cR(t,e,A,n,r){return n+(t-e)*(r-n)/(A-e)}function lR(t,e,A){return t!==e?(A-t)/(e-t):0}function Ic(t,e,A){return(1-A)*t+A*e}function uR(t,e,A,n){return Ic(t,e,1-Math.exp(-A*n))}function hR(t,e=1){return e-Math.abs(Ip(t,e*2)-e)}function fR(t,e,A){return t<=e?0:t>=A?1:(t=(t-e)/(A-e),t*t*(3-2*t))}function dR(t,e,A){return t<=e?0:t>=A?1:(t=(t-e)/(A-e),t*t*t*(t*(t*6-15)+10))}function mR(t,e){return t+Math.floor(Math.random()*(e-t+1))}function pR(t,e){return t+Math.random()*(e-t)}function gR(t){return t*(.5-Math.random())}function wR(t){t!==void 0&&(D1=t);let e=D1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function bR(t){return t*B1}function _R(t){return t*k1}function xR(t){return(t&t-1)===0&&t!==0}function yR(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function GR(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function MR(t,e,A,n,r){const s=Math.cos,i=Math.sin,o=s(A/2),a=i(A/2),c=s((e+n)/2),l=i((e+n)/2),u=s((e-n)/2),f=i((e-n)/2),h=s((n-e)/2),d=i((n-e)/2);switch(r){case"XYX":t.set(o*l,a*u,a*f,o*c);break;case"YZY":t.set(a*f,o*l,a*u,o*c);break;case"ZXZ":t.set(a*u,a*f,o*l,o*c);break;case"XZX":t.set(o*l,a*d,a*h,o*c);break;case"YXY":t.set(a*h,o*l,a*d,o*c);break;case"ZYZ":t.set(a*d,a*h,o*l,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function vR(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function DR(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const BR={DEG2RAD:B1,RAD2DEG:k1,generateUUID:aR,clamp:Vn,euclideanModulo:Ip,mapLinear:cR,inverseLerp:lR,lerp:Ic,damp:uR,pingpong:hR,smoothstep:fR,smootherstep:dR,randInt:mR,randFloat:pR,randFloatSpread:gR,seededRandom:wR,degToRad:bR,radToDeg:_R,isPowerOfTwo:xR,ceilPowerOfTwo:yR,floorPowerOfTwo:GR,setQuaternionFromProperEuler:MR,normalize:DR,denormalize:vR};class Rc{constructor(e=0,A=0){Rc.prototype.isVector2=!0,this.x=e,this.y=A}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,A){return this.x=e,this.y=A,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,A){switch(e){case 0:this.x=A;break;case 1:this.y=A;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,A){return this.x=e.x+A.x,this.y=e.y+A.y,this}addScaledVector(e,A){return this.x+=e.x*A,this.y+=e.y*A,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,A){return this.x=e.x-A.x,this.y=e.y-A.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const A=this.x,n=this.y,r=e.elements;return this.x=r[0]*A+r[3]*n+r[6],this.y=r[1]*A+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,A){return this.x=Vn(this.x,e.x,A.x),this.y=Vn(this.y,e.y,A.y),this}clampScalar(e,A){return this.x=Vn(this.x,e,A),this.y=Vn(this.y,e,A),this}clampLength(e,A){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vn(n,e,A))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const A=Math.sqrt(this.lengthSq()*e.lengthSq());if(A===0)return Math.PI/2;const n=this.dot(e)/A;return Math.acos(Vn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const A=this.x-e.x,n=this.y-e.y;return A*A+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,A){return this.x+=(e.x-this.x)*A,this.y+=(e.y-this.y)*A,this}lerpVectors(e,A,n){return this.x=e.x+(A.x-e.x)*n,this.y=e.y+(A.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,A=0){return this.x=e[A],this.y=e[A+1],this}toArray(e=[],A=0){return e[A]=this.x,e[A+1]=this.y,e}fromBufferAttribute(e,A){return this.x=e.getX(A),this.y=e.getY(A),this}rotateAround(e,A){const n=Math.cos(A),r=Math.sin(A),s=this.x-e.x,i=this.y-e.y;return this.x=s*n-i*r+e.x,this.y=s*r+i*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jc{constructor(e,A,n,r,s,i,o,a,c){jc.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,A,n,r,s,i,o,a,c)}set(e,A,n,r,s,i,o,a,c){const l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=A,l[4]=s,l[5]=a,l[6]=n,l[7]=i,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const A=this.elements,n=e.elements;return A[0]=n[0],A[1]=n[1],A[2]=n[2],A[3]=n[3],A[4]=n[4],A[5]=n[5],A[6]=n[6],A[7]=n[7],A[8]=n[8],this}extractBasis(e,A,n){return e.setFromMatrix3Column(this,0),A.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const A=e.elements;return this.set(A[0],A[4],A[8],A[1],A[5],A[9],A[2],A[6],A[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,A){const n=e.elements,r=A.elements,s=this.elements,i=n[0],o=n[3],a=n[6],c=n[1],l=n[4],u=n[7],f=n[2],h=n[5],d=n[8],m=r[0],p=r[3],w=r[6],b=r[1],g=r[4],x=r[7],_=r[2],G=r[5],y=r[8];return s[0]=i*m+o*b+a*_,s[3]=i*p+o*g+a*G,s[6]=i*w+o*x+a*y,s[1]=c*m+l*b+u*_,s[4]=c*p+l*g+u*G,s[7]=c*w+l*x+u*y,s[2]=f*m+h*b+d*_,s[5]=f*p+h*g+d*G,s[8]=f*w+h*x+d*y,this}multiplyScalar(e){const A=this.elements;return A[0]*=e,A[3]*=e,A[6]*=e,A[1]*=e,A[4]*=e,A[7]*=e,A[2]*=e,A[5]*=e,A[8]*=e,this}determinant(){const e=this.elements,A=e[0],n=e[1],r=e[2],s=e[3],i=e[4],o=e[5],a=e[6],c=e[7],l=e[8];return A*i*l-A*o*c-n*s*l+n*o*a+r*s*c-r*i*a}invert(){const e=this.elements,A=e[0],n=e[1],r=e[2],s=e[3],i=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=l*i-o*c,f=o*a-l*s,h=c*s-i*a,d=A*u+n*f+r*h;if(d===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/d;return e[0]=u*m,e[1]=(r*c-l*n)*m,e[2]=(o*n-r*i)*m,e[3]=f*m,e[4]=(l*A-r*a)*m,e[5]=(r*s-o*A)*m,e[6]=h*m,e[7]=(n*a-c*A)*m,e[8]=(i*A-n*s)*m,this}transpose(){let e;const A=this.elements;return e=A[1],A[1]=A[3],A[3]=e,e=A[2],A[2]=A[6],A[6]=e,e=A[5],A[5]=A[7],A[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const A=this.elements;return e[0]=A[0],e[1]=A[3],e[2]=A[6],e[3]=A[1],e[4]=A[4],e[5]=A[7],e[6]=A[2],e[7]=A[5],e[8]=A[8],this}setUvTransform(e,A,n,r,s,i,o){const a=Math.cos(s),c=Math.sin(s);return this.set(n*a,n*c,-n*(a*i+c*o)+i+e,-r*c,r*a,-r*(-c*i+a*o)+o+A,0,0,1),this}scale(e,A){return this.premultiply(Rp.makeScale(e,A)),this}rotate(e){return this.premultiply(Rp.makeRotation(-e)),this}translate(e,A){return this.premultiply(Rp.makeTranslation(e,A)),this}makeTranslation(e,A){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,A,0,0,1),this}makeRotation(e){const A=Math.cos(e),n=Math.sin(e);return this.set(A,-n,0,n,A,0,0,0,1),this}makeScale(e,A){return this.set(e,0,0,0,A,0,0,0,1),this}equals(e){const A=this.elements,n=e.elements;for(let r=0;r<9;r++)if(A[r]!==n[r])return!1;return!0}fromArray(e,A=0){for(let n=0;n<9;n++)this.elements[n]=e[n+A];return this}toArray(e=[],A=0){const n=this.elements;return e[A]=n[0],e[A+1]=n[1],e[A+2]=n[2],e[A+3]=n[3],e[A+4]=n[4],e[A+5]=n[5],e[A+6]=n[6],e[A+7]=n[7],e[A+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Rp=new jc,E1=new jc().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),N1=new jc().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function kR(){const t={enabled:!0,workingColorSpace:M1,spaces:{},convert:function(r,s,i){return this.enabled===!1||s===i||!s||!i||(this.spaces[s].transfer===Zp&&(r.r=vo(r.r),r.g=vo(r.g),r.b=vo(r.b)),this.spaces[s].primaries!==this.spaces[i].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===Zp&&(r.r=Do(r.r),r.g=Do(r.g),r.b=Do(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===oR?v1:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,i){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],A=[.2126,.7152,.0722],n=[.3127,.329];return t.define({[M1]:{primaries:e,whitePoint:n,transfer:v1,toXYZ:E1,fromXYZ:N1,luminanceCoefficients:A,workingColorSpaceConfig:{unpackColorSpace:mr},outputColorSpaceConfig:{drawingBufferColorSpace:mr}},[mr]:{primaries:e,whitePoint:n,transfer:Zp,toXYZ:E1,fromXYZ:N1,luminanceCoefficients:A,outputColorSpaceConfig:{drawingBufferColorSpace:mr}}}),t}const pr=kR();function vo(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Do(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const T1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Is={h:0,s:0,l:0},Eu={h:0,s:0,l:0};function jp(t,e,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?t+(e-t)*6*A:A<1/2?e:A<2/3?t+(e-t)*6*(2/3-A):t}class Nu{constructor(e,A,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,A,n)}set(e,A,n){if(A===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,A,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,A=mr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,pr.toWorkingColorSpace(this,A),this}setRGB(e,A,n,r=pr.workingColorSpace){return this.r=e,this.g=A,this.b=n,pr.toWorkingColorSpace(this,r),this}setHSL(e,A,n,r=pr.workingColorSpace){if(e=Ip(e,1),A=Vn(A,0,1),n=Vn(n,0,1),A===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+A):n+A-n*A,i=2*n-s;this.r=jp(i,s,e+1/3),this.g=jp(i,s,e),this.b=jp(i,s,e-1/3)}return pr.toWorkingColorSpace(this,r),this}setStyle(e,A=mr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,A);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,A);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,A);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],i=s.length;if(i===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,A);if(i===6)return this.setHex(parseInt(s,16),A);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,A);return this}setColorName(e,A=mr){const n=T1[e.toLowerCase()];return n!==void 0?this.setHex(n,A):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=vo(e.r),this.g=vo(e.g),this.b=vo(e.b),this}copyLinearToSRGB(e){return this.r=Do(e.r),this.g=Do(e.g),this.b=Do(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=mr){return pr.fromWorkingColorSpace(qA.copy(this),e),Math.round(Vn(qA.r*255,0,255))*65536+Math.round(Vn(qA.g*255,0,255))*256+Math.round(Vn(qA.b*255,0,255))}getHexString(e=mr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,A=pr.workingColorSpace){pr.fromWorkingColorSpace(qA.copy(this),A);const n=qA.r,r=qA.g,s=qA.b,i=Math.max(n,r,s),o=Math.min(n,r,s);let a,c;const l=(o+i)/2;if(o===i)a=0,c=0;else{const u=i-o;switch(c=l<=.5?u/(i+o):u/(2-i-o),i){case n:a=(r-s)/u+(r<s?6:0);break;case r:a=(s-n)/u+2;break;case s:a=(n-r)/u+4;break}a/=6}return e.h=a,e.s=c,e.l=l,e}getRGB(e,A=pr.workingColorSpace){return pr.fromWorkingColorSpace(qA.copy(this),A),e.r=qA.r,e.g=qA.g,e.b=qA.b,e}getStyle(e=mr){pr.fromWorkingColorSpace(qA.copy(this),e);const A=qA.r,n=qA.g,r=qA.b;return e!==mr?`color(${e} ${A.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(A*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,A,n){return this.getHSL(Is),this.setHSL(Is.h+e,Is.s+A,Is.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,A){return this.r=e.r+A.r,this.g=e.g+A.g,this.b=e.b+A.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,A){return this.r+=(e.r-this.r)*A,this.g+=(e.g-this.g)*A,this.b+=(e.b-this.b)*A,this}lerpColors(e,A,n){return this.r=e.r+(A.r-e.r)*n,this.g=e.g+(A.g-e.g)*n,this.b=e.b+(A.b-e.b)*n,this}lerpHSL(e,A){this.getHSL(Is),e.getHSL(Eu);const n=Ic(Is.h,Eu.h,A),r=Ic(Is.s,Eu.s,A),s=Ic(Is.l,Eu.l,A);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const A=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*A+s[3]*n+s[6]*r,this.g=s[1]*A+s[4]*n+s[7]*r,this.b=s[2]*A+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,A=0){return this.r=e[A],this.g=e[A+1],this.b=e[A+2],this}toArray(e=[],A=0){return e[A]=this.r,e[A+1]=this.g,e[A+2]=this.b,e}fromBufferAttribute(e,A){return this.r=e.getX(A),this.g=e.getY(A),this.b=e.getZ(A),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qA=new Nu;Nu.NAMES=T1,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:G1}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=G1),new Rc,new Rc;function gr(t,e,A){return Math.max(e,Math.min(A,t))}function O1(t){return t/180*Math.PI}function Y1(t){return t*180/Math.PI}const ER=L_("089fad0j9awfem09wavefc09uwaef");function NR(){return ER()}function TR(t){return L_(t)()}function tn(t,e){const A=Math.min(t,e),r=Math.max(t,e)-A+1;return A+Math.floor(NR()*r)}function S1(t,e,A){const n=Math.min(e,A),s=Math.max(e,A)-n+1;return n+Math.floor(TR(t)*s)}function zc(t,e,A){typeof t!="number"&&(t=0,e=0,A=1),typeof e!="number"&&(e=t,t=0,A=1),typeof A!="number"&&(A=1);const n=[],r=Math.min(t,e),s=Math.max(t,e);for(let i=r;i<=s;i+=A)n.push(i);return n}function OR(t){return t[tn(0,t.length-1)]}function YR(t,e){return e[S1(t,0,e.length-1)]}function qn(...t){return OR(t.flat())}function SR(t,...e){return YR(t,e.flat())}function CR(t){return[...new Set(t)].filter(E)}function Rs(t){return E(t)&&E(t.x)&&E(t.y)}function Jt(t,e){switch(e){case De.NORTH:--t.y;break;case De.SOUTH:++t.y;break;case De.WEST:--t.x;break;case De.EAST:++t.x;break}return t}function zp(t,e){return t<0?De.WEST:t>0?De.EAST:e<0?De.NORTH:e>0?De.SOUTH:De.IDLE}function Wn(t,e){return zp(e.x-t.x,e.y-t.y)}const Hp={idle:"IDLE",up:"NORTH",down:"SOUTH",left:"WEST",right:"EAST",by:"BY",at:"AT",flow:"FLOW",seek:"SEEK",rndns:"RNDNS",rndne:"RNDNE",rnd:"RND",cw:"CW",ccw:"CCW",opp:"OPP",rndp:"RNDP",away:"AWAY",toward:"TOWARD",find:"FIND",flee:"FLEE",to:"TO",i:"IDLE",u:"NORTH",north:"NORTH",n:"NORTH",d:"SOUTH",south:"SOUTH",s:"SOUTH",l:"WEST",west:"WEST",w:"WEST",r:"EAST",east:"EAST",e:"EAST",over:"OVER",under:"UNDER",ground:"GROUND",within:"WITHIN",awayby:"AWAYBY",elements:"ELEMENTS"};function Cn(t){return st(t)&&C1(t[0])}function C1(t){return E(De[t])&&xe(t)}function P1(t){const e=De[t];return E(e)?e:De.IDLE}function Hc(t){if(xe(t))return Hp[je(t)]}function PR(t){if(Cn(t))return t;if(C1(t))return[t];const e=Hc(t);if(E(e))return[e]}function Z1(t){const e=k.words[t],A=PR(e);return Cn(A)?[A,t+1]:[void 0,t]}function I1(t){const e=[];let[A,n]=Z1(t);for(;Cn(A);){switch(e.push(...A),A[0]){case"AT":case"BY":case"AWAY":case"TOWARD":{const[o,a,c]=ce(k.words,n,[K.NUMBER,K.NUMBER]);e.push(o,a),n=c;break}case"FLEE":case"FIND":{const[o,a]=ce(k.words,n,[K.KIND]);console.info("kind",o),n=a;break}case"TO":{const[o,a,c]=ce(k.words,n,[K.DIR,K.DIR]),l=k.element?.x??0,u=k.element?.y??0;o.destpt.x-=l,o.destpt.y-=u,a.destpt.x-=l,a.destpt.y-=u,e.push(l+o.destpt.x+a.destpt.x,u+o.destpt.y+a.destpt.y),n=c;break}case"WITHIN":case"AWAYBY":{const[o,a]=ce(k.words,n,[K.NUMBER]);e.push(o),n=a;break}}const r=n;switch(A[0]){case"CW":case"CCW":case"OPP":case"RNDP":case"OVER":case"UNDER":case"WITHIN":case"AWAYBY":case"ELEMENTS":break;default:return[e,n]}const[s,i]=Z1(r);A=s,n=i}return e.length?[e,n]:[void 0,t]}function ZR(t){if(E(t)&&(t<Xe.ONBLACK||t>Xe.ONCLEAR))return t}function Lp(t){return E(t)&&t>Xe.WHITE&&t<Xe.ONCLEAR?t-Xe.ONBLACK:void 0}const Lc={black:"BLACK",dkblue:"DKBLUE",dkgreen:"DKGREEN",dkcyan:"DKCYAN",dkred:"DKRED",dkpurple:"DKPURPLE",dkyellow:"DKYELLOW",ltgray:"LTGRAY",dkgray:"DKGRAY",blue:"BLUE",green:"GREEN",cyan:"CYAN",red:"RED",purple:"PURPLE",yellow:"YELLOW",white:"WHITE",brown:"DKYELLOW",dkwhite:"LTGRAY",ltgrey:"LTGRAY",gray:"LTGRAY",grey:"LTGRAY",dkgrey:"DKGRAY",ltblack:"DKGRAY",onblack:"ONBLACK",ondkblue:"ONDKBLUE",ondkgreen:"ONDKGREEN",ondkcyan:"ONDKCYAN",ondkred:"ONDKRED",ondkpurple:"ONDKPURPLE",ondkyellow:"ONDKYELLOW",onltgray:"ONLTGRAY",ondkgray:"ONDKGRAY",onblue:"ONBLUE",ongreen:"ONGREEN",oncyan:"ONCYAN",onred:"ONRED",onpurple:"ONPURPLE",onyellow:"ONYELLOW",onwhite:"ONWHITE",onbrown:"ONDKYELLOW",ondkwhite:"ONLTGRAY",onltgrey:"ONLTGRAY",ongray:"ONLTGRAY",ongrey:"ONLTGRAY",ondkgrey:"ONDKGRAY",onltblack:"ONDKGRAY",onclear:"ONCLEAR",blblack:"BLBLACK",bldkblue:"BLDKBLUE",bldkgreen:"BLDKGREEN",bldkcyan:"BLDKCYAN",bldkred:"BLDKRED",bldkpurple:"BLDKPURPLE",bldkyellow:"BLDKYELLOW",blltgray:"BLLTGRAY",bldkgray:"BLDKGRAY",blblue:"BLBLUE",blgreen:"BLGREEN",blcyan:"BLCYAN",blred:"BLRED",blpurple:"BLPURPLE",blyellow:"BLYELLOW",blwhite:"BLWHITE",blbrown:"BLDKYELLOW",bldkwhite:"BLLTGRAY",blltgrey:"BLLTGRAY",blgray:"BLLTGRAY",blgrey:"BLLTGRAY",bldkgrey:"BLDKGRAY",blltblack:"BLDKGRAY"};function BA(t){return st(t)&&R1(t[0])}function IR(t){return BA(t)&&t[0].startsWith("ON")}function R1(t){return E(Xe[t])&&xe(t)}function Bo(t){if(xe(t))return Lc[je(t)]}function js(t,e){return[E(t)?`${Xe[t]}`:void 0,E(e)?`ON${Xe[e]}`:void 0].filter(E)}function Tu(t){return t.map(e=>Xe[e]).find(e=>E(e)&&e<Xe.ONBLACK)}function Ou(t){return t.map(e=>Xe[e]).find(e=>E(e)&&e>=Xe.ONBLACK)}function RR(t){if(BA(t))return t;if(R1(t))return[t];const e=Bo(t);if(E(e))return[e]}function j1(t){const e=k.words[t],A=RR(e);return BA(A)?[A,t+1]:[void 0,t]}function Yu(t){const e=[];let A=t;const n=parseFloat(k.words[t]);if(Ne(n))return[js(n,void 0),t+1];const[r,s]=j1(t);BA(r)&&(e.push(...r),A=s);const[i,o]=j1(s);return IR(i)&&(e.push(...i),A=o),e.length?[e,A]:[void 0,t]}function ko(t){const e={};for(let A=0;A<t.length;++A){const n=t[A],r=Xe[n];E(r)&&(r<Xe.ONBLACK||r>Xe.ONCLEAR?e.color=r:e.bg=Lp(r))}return e}const Ie=60,rt=25,Up=Ie*rt,zs=3,jR=new Date("1980/09/02");var Fp=(t=>(t[t.width=0]="width",t[t.height=1]="height",t[t.bits=2]="bits",t))(Fp||{}),Su=(t=>(t[t.kind=0]="kind",t[t.id=1]="id",t[t.x=2]="x",t[t.y=3]="y",t[t.lx=4]="lx",t[t.ly=5]="ly",t[t.code=6]="code",t[t.name=7]="name",t[t.char=8]="char",t[t.color=9]="color",t[t.bg=10]="bg",t[t.light=11]="light",t[t.player=12]="player",t[t.bucket=13]="bucket",t[t.pushable=14]="pushable",t[t.collision=15]="collision",t[t.breakable=16]="breakable",t[t.tickertext=17]="tickertext",t[t.tickertime=18]="tickertime",t[t.p1=19]="p1",t[t.p2=20]="p2",t[t.p3=21]="p3",t[t.cycle=22]="cycle",t[t.stepx=23]="stepx",t[t.stepy=24]="stepy",t[t.sender=25]="sender",t[t.arg=26]="arg",t[t.stopped=27]="stopped",t[t.removed=28]="removed",t[t.party=29]="party",t[t.group=30]="group",t[t.lightdir=31]="lightdir",t[t.item=32]="item",t[t.p4=33]="p4",t[t.p5=34]="p5",t[t.p6=35]="p6",t[t.displaychar=36]="displaychar",t[t.displaycolor=37]="displaycolor",t[t.displaybg=38]="displaybg",t[t.shootx=39]="shootx",t[t.shooty=40]="shooty",t[t.p7=41]="p7",t[t.p8=42]="p8",t[t.p9=43]="p9",t[t.p10=44]="p10",t))(Su||{}),$p=(t=>(t[t.terrain=0]="terrain",t[t.objects=1]="objects",t[t.isdark=2]="isdark",t[t.over=3]="over",t[t.under=4]="under",t[t.exitnorth=5]="exitnorth",t[t.exitsouth=6]="exitsouth",t[t.exitwest=7]="exitwest",t[t.exiteast=8]="exiteast",t[t.timelimit=9]="timelimit",t[t.restartonzap=10]="restartonzap",t[t.maxplayershots=11]="maxplayershots",t[t.camera=12]="camera",t[t.graphics=13]="graphics",t[t.b1=14]="b1",t[t.b2=15]="b2",t[t.b3=16]="b3",t[t.b4=17]="b4",t[t.b5=18]="b5",t[t.b6=19]="b6",t[t.b7=20]="b7",t[t.b8=21]="b8",t[t.b9=22]="b9",t[t.b10=23]="b10",t[t.charset=24]="charset",t[t.palette=25]="palette",t))($p||{}),Vp=(t=>(t[t.id=0]="id",t[t.name=1]="name",t[t.timestamp=2]="timestamp",t[t.activelist=3]="activelist",t[t.pages=4]="pages",t[t.flags=5]="flags",t[t.token=6]="token",t))(Vp||{}),qp=(t=>(t[t.id=0]="id",t[t.code=1]="code",t[t.board=2]="board",t[t.object=3]="object",t[t.terrain=4]="terrain",t[t.charset=5]="charset",t[t.palette=6]="palette",t[t.eighttrack=7]="eighttrack",t))(qp||{}),Ye=(t=>(t[t.ERROR=0]="ERROR",t[t.LOADER=1]="LOADER",t[t.BOARD=2]="BOARD",t[t.OBJECT=3]="OBJECT",t[t.TERRAIN=4]="TERRAIN",t[t.CHARSET=5]="CHARSET",t[t.PALETTE=6]="PALETTE",t))(Ye||{}),He=(t=>(t.MAIN="main",t.TEMP="temp",t.TITLE="title",t.PLAYER="player",t.GADGETSTORE="gadgetstore",t))(He||{});function Yi(t,e){if(!E(t)||!BA(e))return;const{color:A,bg:n}=ko(e);E(A)&&(t.color=A),E(n)&&(t.bg=n)}function Cu(t){return E(t?.id)?us(t,Su,{category:Yt,kinddata:Yt,stopped:Yt,removed:Yt,bucket:Yt}):us(t,Su,{id:Yt,x:Yt,y:Yt,lx:Yt,ly:Yt,code:Yt,category:Yt,kinddata:Yt,stopped:Yt,removed:Yt,bucket:Yt})}function Pu(t){return Zc(t,Su)}function Mt(t){return t?.category===pn.ISOBJECT}function z1(){return{id:rA()}}const Uc=14,Zu=3,Hr=8,hs=14,Eo=16;var H1=(t=>(t[t.BLANK=0]="BLANK",t[t.TILES=1]="TILES",t[t.SPRITES=2]="SPRITES",t[t.DITHER=3]="DITHER",t[t.MEDIA=4]="MEDIA",t[t.CONTROL=5]="CONTROL",t))(H1||{}),Iu=(t=>(t[t.FAR=1]="FAR",t[t.MID=1.5]="MID",t[t.NEAR=3]="NEAR",t))(Iu||{});function Fc(t,e){return new Array(t).fill(e)}function zR(t,e,A,n,r=0){const s=A*n;return{id:`t:${t}:${e}`,type:1,width:A,height:n,char:Fc(s,0),color:Fc(s,0),bg:Fc(s,r),stats:Fc(s,0)}}function HR(t,e,A,n=1,r=15){return{id:`s:${t}:${e}:${A}`,x:0,y:0,char:n,color:r,bg:Xe.ONCLEAR,stat:0}}function LR(t,e){return{id:`${t}:${e}`,type:2,sprites:[]}}function UR(t,e,A,n,r=0){const s=A*n;return{id:`d:${t}:${e}`,type:3,width:A,height:n,alphas:Fc(s,r)}}function FR(t,e,A,n){return{id:`m:${t}:${e}`,type:4,mime:A,media:n}}function $R(t){return t.filter(e=>e.type===4)}function VR(t,e){return{id:`c:${t}:${e}`,type:5,focusx:0,focusy:0,focusid:t,viewscale:1.5,graphics:"flat",facing:0}}function L1(t,e){return`${t}:${e}`}const qR=1,WR=16,QR=256;var Lt=(t=>(t[t.NONE=0]="NONE",t[t.ALT=1]="ALT",t[t.CTRL=2]="CTRL",t[t.SHIFT=3]="SHIFT",t[t.MOVE_UP=4]="MOVE_UP",t[t.MOVE_DOWN=5]="MOVE_DOWN",t[t.MOVE_LEFT=6]="MOVE_LEFT",t[t.MOVE_RIGHT=7]="MOVE_RIGHT",t[t.OK_BUTTON=8]="OK_BUTTON",t[t.CANCEL_BUTTON=9]="CANCEL_BUTTON",t[t.MENU_BUTTON=10]="MENU_BUTTON",t))(Lt||{});function U1(t,e){return{width:t,height:e,size:t*e,bits:new Uint8Array(t*e).fill(0)}}function F1(t){const e=Math.floor(t.length/Zu);if(e*Zu!==t.length)return;const A=U1(3,e);for(let n=0;n<A.bits.length;++n)A.bits[n]=t[n];return A}function KR(t,e){return t&1<<e?255:0}function $1(t){const e=Math.floor(t.length/Uc);if(e*Uc!==t.length)return;const A=Math.ceil(e/Eo),n=Hr*Eo,r=U1(n,hs*A);let s=0,i=0,o=0;for(let a=0;a<t.length;++a){const c=i*hs+o,l=t[a];for(let u=0;u<Hr;++u){const f=s*Hr+u;r.bits[f+c*n]=KR(l,7-u)}++o,o===hs&&(o=0,++s,s===Eo&&(s=0,++i))}return r}function JR(t,e,A){if(!E(e))return;const n=Math.floor(e.bits.length/Uc);if(A<0||A>255||t.length===Uc||n*Uc!==e.bits.length)return;const r=Hr*Eo,s=A%Eo*Hr,i=Math.floor(A/Eo)*hs,o=0;for(let a=0;a<hs;++a)for(let c=0;c<Hr;++c){const l=s+c,u=i+a;e.bits[l+u*r]=t[o]?255:0}}const XR=Gu("000000000000000000000000000000007e81a58181bd99817e00000000007effdbffffc3e7ff7e0000000000006cfefefefe7c381000000000000010387cfe7c3810000000000000183c3ce7e7e718183c0000000000183c7effff7e18183c0000000000000000183c3c180000000000ffffffffffe7c3c3e7ffffffffff000000003c664242663c00000000ffffffffc399bdbd99c3ffffffff00001e0e1a3278cccccc7800000000003c6666663c187e181800000000003f333f30303070f0e000000000007f637f63636367e7e6c0000000001818db3ce73cdb1818000000000080c0e0f8fef8e0c080000000000002060e3efe3e0e06020000000000183c7e1818187e3c18000000000066666666666600666600000000007fdbdbdb7b1b1b1b1b000000007cc660386cc6c66c380cc67c000000000000000000fefefe0000000000183c7e1818187e3c187e00000000183c7e18181818181800000000001818181818187e3c1800000000000000180cfe0c180000000000000000003060fe603000000000000000000000c0c0c0fe000000000000000000286cfe6c2800000000000000001038387c7cfefe00000000000000fefe7c7c3838100000000000000000000000000000000000000000183c3c3c1818001818000000006666662400000000000000000000006c6cfe6c6c6cfe6c6c00000018187cc6c2c07c0686c67c18180000000000c2c60c183066c60000000000386c6c3876dccccc76000000003030306000000000000000000000000c183030303030180c000000000030180c0c0c0c0c183000000000000000663cff3c6600000000000000000018187e181800000000000000000000000000181818300000000000000000fe000000000000000000000000000000001818000000000002060c183060c0800000000000007cc6cedef6e6c6c67c000000000018387818181818187e00000000007cc6060c183060c6fe00000000007cc606063c0606c67c00000000000c1c3c6cccfe0c0c1e0000000000fec0c0c0fc0606c67c00000000003860c0c0fcc6c6c67c0000000000fec6060c183030303000000000007cc6c6c67cc6c6c67c00000000007cc6c6c67e06060c78000000000000181800000018180000000000000018180000001818300000000000060c18306030180c0600000000000000007e00007e000000000000006030180c060c18306000000000007cc6c60c181800181800000000007cc6c6dedededcc07c000000000010386cc6c6fec6c6c60000000000fc6666667c666666fc00000000003c66c2c0c0c0c2663c0000000000f86c66666666666cf80000000000fe66626878686266fe0000000000fe66626878686060f000000000003c66c2c0c0dec6663a0000000000c6c6c6c6fec6c6c6c600000000003c181818181818183c00000000001e0c0c0c0c0ccccc780000000000e6666c6c786c6c66e60000000000f060606060606266fe0000000000c6eefefed6c6c6c6c60000000000c6e6f6fedecec6c6c60000000000386cc6c6c6c6c66c380000000000fc6666667c606060f000000000007cc6c6c6c6d6de7c0c0e00000000fc6666667c6c6666e600000000007cc6c660380cc6c67c00000000007e7e5a18181818183c0000000000c6c6c6c6c6c6c6c67c0000000000c6c6c6c6c6c66c38100000000000c6c6c6c6d6d6fe7c6c0000000000c6c66c3838386cc6c60000000000666666663c1818183c0000000000fec68c183060c2c6fe00000000003c303030303030303c000000000080c0e070381c0e060200000000003c0c0c0c0c0c0c0c3c00000010386cc600000000000000000000000000000000000000000000ff0030301800000000000000000000000000000000780c7ccccc760000000000e06060786c6666667c00000000000000007cc6c0c0c67c00000000001c0c0c3c6ccccccc7600000000000000007cc6fec0c67c0000000000386c6460f0606060f0000000000000000076cccccc7c0ccc78000000e060606c76666666e6000000000018180038181818183c00000000000606000e0606060666663c000000e06060666c786c66e6000000000038181818181818183c0000000000000000ecfed6d6d6c60000000000000000dc666666666600000000000000007cc6c6c6c67c0000000000000000dc6666667c6060f000000000000076cccccc7c0c0c1e000000000000dc76666060f000000000000000007cc6701cc67c0000000000103030fc303030361c0000000000000000cccccccccc760000000000000000666666663c180000000000000000c6c6d6d6fe6c0000000000000000c66c38386cc60000000000000000c6c6c6c67e060cf8000000000000fecc183066fe00000000000e181818701818180e00000000001818181800181818180000000000701818180e18181870000000000076dc000000000000000000000000000010386cc6c6fe0000000000003c66c2c0c0c2663c0c067c000000cccc00cccccccccc76000000000c1830007cc6fec0c67c0000000010386c00780c7ccccc760000000000cccc00780c7ccccc760000000060301800780c7ccccc7600000000386c3800780c7ccccc76000000000000003c6660663c0c063c00000010386c007cc6fec0c67c0000000000cccc007cc6fec0c67c00000000603018007cc6fec0c67c000000000066660038181818183c00000000183c660038181818183c000000006030180038181818183c00000000c6c610386cc6c6fec6c6000000386c3800386cc6c6fec6c600000018306000fe66607c6066fe00000000000000cc76367ed8d86e00000000003e6cccccfeccccccce0000000010386c007cc6c6c6c67c0000000000c6c6007cc6c6c6c67c00000000603018007cc6c6c6c67c000000003078cc00cccccccccc760000000060301800cccccccccc760000000000c6c600c6c6c6c67e060c780000c6c6386cc6c6c6c66c3800000000c6c600c6c6c6c6c6c67c0000000018183c666060663c181800000000386c6460f0606060e6fc000000000066663c187e187e181800000000f8ccccf8c4ccdeccccc6000000000e1b1818187e18181818d870000018306000780c7ccccc76000000000c18300038181818183c00000000183060007cc6c6c6c67c0000000018306000cccccccccc76000000000076dc00dc666666666600000076dc00c6e6f6fedecec6c6000000003c6c6c3e007e0000000000000000386c6c38007c000000000000000000303000303060c6c67c000000000000000000fec0c0c000000000000000000000fe0606060000000000c0c0c6ccd83060dc860c183e0000c0c0c6ccd83066ce9e3e060600000018180018183c3c3c1800000000000000366cd86c36000000000000000000d86c366cd80000000000114411441144114411441144114455aa55aa55aa55aa55aa55aa55aadd77dd77dd77dd77dd77dd77dd77181818181818181818181818181818181818181818f81818181818181818181818f818f818181818181836363636363636f636363636363600000000000000fe3636363636360000000000f818f81818181818183636363636f606f636363636363636363636363636363636363636360000000000fe06f63636363636363636363636f606fe00000000000036363636363636fe0000000000001818181818f818f800000000000000000000000000f8181818181818181818181818181f00000000000018181818181818ff00000000000000000000000000ff181818181818181818181818181f18181818181800000000000000ff00000000000018181818181818ff18181818181818181818181f181f1818181818183636363636363637363636363636363636363637303f00000000000000000000003f30373636363636363636363636f700ff0000000000000000000000ff00f736363636363636363636363730373636363636360000000000ff00ff0000000000003636363636f700f73636363636361818181818ff00ff00000000000036363636363636ff0000000000000000000000ff00ff18181818181800000000000000ff363636363636363636363636363f00000000000018181818181f181f00000000000000000000001f181f181818181818000000000000003f36363636363636363636363636ff3636363636361818181818ff18ff18181818181818181818181818f8000000000000000000000000001f181818181818ffffffffffffffffffffffffffff00000000000000fffffffffffffff0f0f0f0f0f0f0f0f0f0f0f0f0f00f0f0f0f0f0f0f0f0f0f0f0f0f0fffffffffffffff00000000000000000000000076dcd8d8dc76000000000000007cc6fcc6c6fcc0c040000000fec6c6c0c0c0c0c0c000000000000000fe6c6c6c6c6c6c0000000000fec66030183060c6fe00000000000000007ed8d8d8d87000000000000000666666667c6060c000000000000076dc181818181800000000007e183c6666663c187e0000000000386cc6c6fec6c66c380000000000386cc6c6c66c6c6cee00000000001e30180c3e6666663c00000000000000007edbdb7e0000000000000003067edbdbf37e60c000000000001c3060607c6060301c0000000000007cc6c6c6c6c6c6c6000000000000fe0000fe0000fe0000000000000018187e18180000ff000000000030180c060c1830007e00000000000c18306030180c007e00000000000e1b1b1818181818181818181818181818181818d8d8700000000000001818007e001818000000000000000076dc0076dc000000000000386c6c3800000000000000000000000000000018180000000000000000000000000018000000000000000f0c0c0c0c0cec6c3c1c00000000d86c6c6c6c6c000000000000000070d83060c8f800000000000000000000007c7c7c7c7c7c000000000000000000000000000000000000"),V1=Gu("00000000002a002a00002a2a2a00002a002a2a15002a2a2a15151515153f153f15153f3f3f15153f153f3f3f153f3f3f"),Ru=globalThis||void 0||self;var q1=typeof Ru=="object"&&Ru&&Ru.Object===Object&&Ru,ej=typeof self=="object"&&self&&self.Object===Object&&self,Lr=q1||ej||Function("return this")(),Qn=Lr.Symbol,W1=Object.prototype,tj=W1.hasOwnProperty,Aj=W1.toString,$c=Qn?Qn.toStringTag:void 0;function nj(t){var e=tj.call(t,$c),A=t[$c];try{t[$c]=void 0;var n=!0}catch{}var r=Aj.call(t);return n&&(e?t[$c]=A:delete t[$c]),r}var rj=Object.prototype,sj=rj.toString;function ij(t){return sj.call(t)}var oj="[object Null]",aj="[object Undefined]",Q1=Qn?Qn.toStringTag:void 0;function Hs(t){return t==null?t===void 0?aj:oj:Q1&&Q1 in Object(t)?nj(t):ij(t)}function wr(t){return t!=null&&typeof t=="object"}var cj="[object Symbol]";function ju(t){return typeof t=="symbol"||wr(t)&&Hs(t)==cj}function zu(t,e){for(var A=-1,n=t==null?0:t.length,r=Array(n);++A<n;)r[A]=e(t[A],A,t);return r}var pt=Array.isArray,K1=Qn?Qn.prototype:void 0,J1=K1?K1.toString:void 0;function X1(t){if(typeof t=="string")return t;if(pt(t))return zu(t,X1)+"";if(ju(t))return J1?J1.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var lj=/\s/;function uj(t){for(var e=t.length;e--&&lj.test(t.charAt(e)););return e}var hj=/^\s+/;function fj(t){return t&&t.slice(0,uj(t)+1).replace(hj,"")}function Kn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ev=NaN,dj=/^[-+]0x[0-9a-f]+$/i,mj=/^0b[01]+$/i,pj=/^0o[0-7]+$/i,gj=parseInt;function wj(t){if(typeof t=="number")return t;if(ju(t))return ev;if(Kn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Kn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=fj(t);var A=mj.test(t);return A||pj.test(t)?gj(t.slice(2),A?2:8):dj.test(t)?ev:+t}var tv=1/0,bj=17976931348623157e292;function _j(t){if(!t)return t===0?t:0;if(t=wj(t),t===tv||t===-tv){var e=t<0?-1:1;return e*bj}return t===t?t:0}function Hu(t){var e=_j(t),A=e%1;return e===e?A?e-A:e:0}function No(t){return t}var xj="[object AsyncFunction]",yj="[object Function]",Gj="[object GeneratorFunction]",Mj="[object Proxy]";function fs(t){if(!Kn(t))return!1;var e=Hs(t);return e==yj||e==Gj||e==xj||e==Mj}var Wp=Lr["__core-js_shared__"],Av=(function(){var t=/[^.]+$/.exec(Wp&&Wp.keys&&Wp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function vj(t){return!!Av&&Av in t}var Dj=Function.prototype,Bj=Dj.toString;function Si(t){if(t!=null){try{return Bj.call(t)}catch{}try{return t+""}catch{}}return""}var kj=/[\\^$.*+?()[\]{}|]/g,Ej=/^\[object .+?Constructor\]$/,Nj=Function.prototype,Tj=Object.prototype,Oj=Nj.toString,Yj=Tj.hasOwnProperty,Sj=RegExp("^"+Oj.call(Yj).replace(kj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Cj(t){if(!Kn(t)||vj(t))return!1;var e=fs(t)?Sj:Ej;return e.test(Si(t))}function Pj(t,e){return t?.[e]}function Ci(t,e){var A=Pj(t,e);return Cj(A)?A:void 0}var Qp=Ci(Lr,"WeakMap"),nv=Object.create,Zj=(function(){function t(){}return function(e){if(!Kn(e))return{};if(nv)return nv(e);t.prototype=e;var A=new t;return t.prototype=void 0,A}})();function Ij(t,e,A){switch(A.length){case 0:return t.call(e);case 1:return t.call(e,A[0]);case 2:return t.call(e,A[0],A[1]);case 3:return t.call(e,A[0],A[1],A[2])}return t.apply(e,A)}function kA(){}function Rj(t,e){var A=-1,n=t.length;for(e||(e=Array(n));++A<n;)e[A]=t[A];return e}var jj=800,zj=16,Hj=Date.now;function Lj(t){var e=0,A=0;return function(){var n=Hj(),r=zj-(n-A);if(A=n,r>0){if(++e>=jj)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Uj(t){return function(){return t}}var Lu=(function(){try{var t=Ci(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Fj=Lu?function(t,e){return Lu(t,"toString",{configurable:!0,enumerable:!1,value:Uj(e),writable:!0})}:No,$j=Lj(Fj);function rv(t,e){for(var A=-1,n=t==null?0:t.length;++A<n&&e(t[A],A,t)!==!1;);return t}function sv(t,e,A,n){for(var r=t.length,s=A+-1;++s<r;)if(e(t[s],s,t))return s;return-1}function Vj(t){return t!==t}function qj(t,e,A){for(var n=A-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function Kp(t,e,A){return e===e?qj(t,e,A):sv(t,Vj,A)}function iv(t,e){var A=t==null?0:t.length;return!!A&&Kp(t,e,0)>-1}var Wj=9007199254740991,Qj=/^(?:0|[1-9]\d*)$/;function Uu(t,e){var A=typeof t;return e=e??Wj,!!e&&(A=="number"||A!="symbol"&&Qj.test(t))&&t>-1&&t%1==0&&t<e}function Jp(t,e,A){e=="__proto__"&&Lu?Lu(t,e,{configurable:!0,enumerable:!0,value:A,writable:!0}):t[e]=A}function Vc(t,e){return t===e||t!==t&&e!==e}var Kj=Object.prototype,Jj=Kj.hasOwnProperty;function Fu(t,e,A){var n=t[e];(!(Jj.call(t,e)&&Vc(n,A))||A===void 0&&!(e in t))&&Jp(t,e,A)}function Xp(t,e,A,n){var r=!A;A||(A={});for(var s=-1,i=e.length;++s<i;){var o=e[s],a=void 0;a===void 0&&(a=t[o]),r?Jp(A,o,a):Fu(A,o,a)}return A}var ov=Math.max;function Xj(t,e,A){return e=ov(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=ov(n.length-e,0),i=Array(s);++r<s;)i[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=A(i),Ij(t,this,o)}}function eg(t,e){return $j(Xj(t,e,No),t+"")}var e2=9007199254740991;function tg(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=e2}function Ur(t){return t!=null&&tg(t.length)&&!fs(t)}function av(t,e,A){if(!Kn(A))return!1;var n=typeof e;return(n=="number"?Ur(A)&&Uu(e,A.length):n=="string"&&e in A)?Vc(A[e],t):!1}function t2(t){return eg(function(e,A){var n=-1,r=A.length,s=r>1?A[r-1]:void 0,i=r>2?A[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,i&&av(A[0],A[1],i)&&(s=r<3?void 0:s,r=1),e=Object(e);++n<r;){var o=A[n];o&&t(e,o,n,s)}return e})}var A2=Object.prototype;function qc(t){var e=t&&t.constructor,A=typeof e=="function"&&e.prototype||A2;return t===A}function n2(t,e){for(var A=-1,n=Array(t);++A<t;)n[A]=e(A);return n}var r2="[object Arguments]";function cv(t){return wr(t)&&Hs(t)==r2}var lv=Object.prototype,s2=lv.hasOwnProperty,i2=lv.propertyIsEnumerable,$u=cv((function(){return arguments})())?cv:function(t){return wr(t)&&s2.call(t,"callee")&&!i2.call(t,"callee")};function o2(){return!1}var uv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hv=uv&&typeof module=="object"&&module&&!module.nodeType&&module,a2=hv&&hv.exports===uv,fv=a2?Lr.Buffer:void 0,c2=fv?fv.isBuffer:void 0,Wc=c2||o2,l2="[object Arguments]",u2="[object Array]",h2="[object Boolean]",f2="[object Date]",d2="[object Error]",m2="[object Function]",p2="[object Map]",g2="[object Number]",w2="[object Object]",b2="[object RegExp]",_2="[object Set]",x2="[object String]",y2="[object WeakMap]",G2="[object ArrayBuffer]",M2="[object DataView]",v2="[object Float32Array]",D2="[object Float64Array]",B2="[object Int8Array]",k2="[object Int16Array]",E2="[object Int32Array]",N2="[object Uint8Array]",T2="[object Uint8ClampedArray]",O2="[object Uint16Array]",Y2="[object Uint32Array]",Ut={};Ut[v2]=Ut[D2]=Ut[B2]=Ut[k2]=Ut[E2]=Ut[N2]=Ut[T2]=Ut[O2]=Ut[Y2]=!0,Ut[l2]=Ut[u2]=Ut[G2]=Ut[h2]=Ut[M2]=Ut[f2]=Ut[d2]=Ut[m2]=Ut[p2]=Ut[g2]=Ut[w2]=Ut[b2]=Ut[_2]=Ut[x2]=Ut[y2]=!1;function S2(t){return wr(t)&&tg(t.length)&&!!Ut[Hs(t)]}function Vu(t){return function(e){return t(e)}}var dv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qc=dv&&typeof module=="object"&&module&&!module.nodeType&&module,C2=Qc&&Qc.exports===dv,Ag=C2&&q1.process,Ls=(function(){try{var t=Qc&&Qc.require&&Qc.require("util").types;return t||Ag&&Ag.binding&&Ag.binding("util")}catch{}})(),mv=Ls&&Ls.isTypedArray,ng=mv?Vu(mv):S2,P2=Object.prototype,Z2=P2.hasOwnProperty;function pv(t,e){var A=pt(t),n=!A&&$u(t),r=!A&&!n&&Wc(t),s=!A&&!n&&!r&&ng(t),i=A||n||r||s,o=i?n2(t.length,String):[],a=o.length;for(var c in t)(e||Z2.call(t,c))&&!(i&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Uu(c,a)))&&o.push(c);return o}function gv(t,e){return function(A){return t(e(A))}}var I2=gv(Object.keys,Object),R2=Object.prototype,j2=R2.hasOwnProperty;function wv(t){if(!qc(t))return I2(t);var e=[];for(var A in Object(t))j2.call(t,A)&&A!="constructor"&&e.push(A);return e}function Jn(t){return Ur(t)?pv(t):wv(t)}var z2=Object.prototype,H2=z2.hasOwnProperty,bn=t2(function(t,e){if(qc(e)||Ur(e)){Xp(e,Jn(e),t);return}for(var A in e)H2.call(e,A)&&Fu(t,A,e[A])});function L2(t){var e=[];if(t!=null)for(var A in Object(t))e.push(A);return e}var U2=Object.prototype,F2=U2.hasOwnProperty;function $2(t){if(!Kn(t))return L2(t);var e=qc(t),A=[];for(var n in t)n=="constructor"&&(e||!F2.call(t,n))||A.push(n);return A}function bv(t){return Ur(t)?pv(t,!0):$2(t)}var V2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q2=/^\w*$/;function rg(t,e){if(pt(t))return!1;var A=typeof t;return A=="number"||A=="symbol"||A=="boolean"||t==null||ju(t)?!0:q2.test(t)||!V2.test(t)||e!=null&&t in Object(e)}var Kc=Ci(Object,"create");function W2(){this.__data__=Kc?Kc(null):{},this.size=0}function Q2(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var K2="__lodash_hash_undefined__",J2=Object.prototype,X2=J2.hasOwnProperty;function e3(t){var e=this.__data__;if(Kc){var A=e[t];return A===K2?void 0:A}return X2.call(e,t)?e[t]:void 0}var t3=Object.prototype,A3=t3.hasOwnProperty;function n3(t){var e=this.__data__;return Kc?e[t]!==void 0:A3.call(e,t)}var r3="__lodash_hash_undefined__";function s3(t,e){var A=this.__data__;return this.size+=this.has(t)?0:1,A[t]=Kc&&e===void 0?r3:e,this}function Pi(t){var e=-1,A=t==null?0:t.length;for(this.clear();++e<A;){var n=t[e];this.set(n[0],n[1])}}Pi.prototype.clear=W2,Pi.prototype.delete=Q2,Pi.prototype.get=e3,Pi.prototype.has=n3,Pi.prototype.set=s3;function i3(){this.__data__=[],this.size=0}function qu(t,e){for(var A=t.length;A--;)if(Vc(t[A][0],e))return A;return-1}var o3=Array.prototype,a3=o3.splice;function c3(t){var e=this.__data__,A=qu(e,t);if(A<0)return!1;var n=e.length-1;return A==n?e.pop():a3.call(e,A,1),--this.size,!0}function l3(t){var e=this.__data__,A=qu(e,t);return A<0?void 0:e[A][1]}function u3(t){return qu(this.__data__,t)>-1}function h3(t,e){var A=this.__data__,n=qu(A,t);return n<0?(++this.size,A.push([t,e])):A[n][1]=e,this}function ds(t){var e=-1,A=t==null?0:t.length;for(this.clear();++e<A;){var n=t[e];this.set(n[0],n[1])}}ds.prototype.clear=i3,ds.prototype.delete=c3,ds.prototype.get=l3,ds.prototype.has=u3,ds.prototype.set=h3;var Jc=Ci(Lr,"Map");function f3(){this.size=0,this.__data__={hash:new Pi,map:new(Jc||ds),string:new Pi}}function d3(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Wu(t,e){var A=t.__data__;return d3(e)?A[typeof e=="string"?"string":"hash"]:A.map}function m3(t){var e=Wu(this,t).delete(t);return this.size-=e?1:0,e}function p3(t){return Wu(this,t).get(t)}function g3(t){return Wu(this,t).has(t)}function w3(t,e){var A=Wu(this,t),n=A.size;return A.set(t,e),this.size+=A.size==n?0:1,this}function ms(t){var e=-1,A=t==null?0:t.length;for(this.clear();++e<A;){var n=t[e];this.set(n[0],n[1])}}ms.prototype.clear=f3,ms.prototype.delete=m3,ms.prototype.get=p3,ms.prototype.has=g3,ms.prototype.set=w3;var b3="Expected a function";function sg(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(b3);var A=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=A.cache;if(s.has(r))return s.get(r);var i=t.apply(this,n);return A.cache=s.set(r,i)||s,i};return A.cache=new(sg.Cache||ms),A}sg.Cache=ms;var _3=500;function x3(t){var e=sg(t,function(n){return A.size===_3&&A.clear(),n}),A=e.cache;return e}var y3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G3=/\\(\\)?/g,M3=x3(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(y3,function(A,n,r,s){e.push(r?s.replace(G3,"$1"):n||A)}),e});function _v(t){return t==null?"":X1(t)}function Qu(t,e){return pt(t)?t:rg(t,e)?[t]:M3(_v(t))}function Xc(t){if(typeof t=="string"||ju(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function ig(t,e){e=Qu(e,t);for(var A=0,n=e.length;t!=null&&A<n;)t=t[Xc(e[A++])];return A&&A==n?t:void 0}function v3(t,e,A){var n=t==null?void 0:ig(t,e);return n===void 0?A:n}function og(t,e){for(var A=-1,n=e.length,r=t.length;++A<n;)t[r+A]=e[A];return t}var xv=Qn?Qn.isConcatSpreadable:void 0;function D3(t){return pt(t)||$u(t)||!!(xv&&t&&t[xv])}function ag(t,e,A,n,r){var s=-1,i=t.length;for(A||(A=D3),r||(r=[]);++s<i;){var o=t[s];A(o)?og(r,o):n||(r[r.length]=o)}return r}function Pn(t){var e=t==null?0:t.length;return e?ag(t):[]}var yv=gv(Object.getPrototypeOf,Object);function cg(t,e,A){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),A=A>r?r:A,A<0&&(A+=r),r=e>A?0:A-e>>>0,e>>>=0;for(var s=Array(r);++n<r;)s[n]=t[n+e];return s}function B3(t,e,A){var n=t.length;return A=A===void 0?n:A,!e&&A>=n?t:cg(t,e,A)}var k3="\\ud800-\\udfff",E3="\\u0300-\\u036f",N3="\\ufe20-\\ufe2f",T3="\\u20d0-\\u20ff",O3=E3+N3+T3,Y3="\\ufe0e\\ufe0f",S3="\\u200d",C3=RegExp("["+S3+k3+O3+Y3+"]");function Gv(t){return C3.test(t)}function P3(t){return t.split("")}var Mv="\\ud800-\\udfff",Z3="\\u0300-\\u036f",I3="\\ufe20-\\ufe2f",R3="\\u20d0-\\u20ff",j3=Z3+I3+R3,z3="\\ufe0e\\ufe0f",H3="["+Mv+"]",lg="["+j3+"]",ug="\\ud83c[\\udffb-\\udfff]",L3="(?:"+lg+"|"+ug+")",vv="[^"+Mv+"]",Dv="(?:\\ud83c[\\udde6-\\uddff]){2}",Bv="[\\ud800-\\udbff][\\udc00-\\udfff]",U3="\\u200d",kv=L3+"?",Ev="["+z3+"]?",F3="(?:"+U3+"(?:"+[vv,Dv,Bv].join("|")+")"+Ev+kv+")*",$3=Ev+kv+F3,V3="(?:"+[vv+lg+"?",lg,Dv,Bv,H3].join("|")+")",q3=RegExp(ug+"(?="+ug+")|"+V3+$3,"g");function W3(t){return t.match(q3)||[]}function Q3(t){return Gv(t)?W3(t):P3(t)}function K3(t){return function(e){e=_v(e);var A=Gv(e)?Q3(e):void 0,n=A?A[0]:e.charAt(0),r=A?B3(A,1).join(""):e.slice(1);return n[t]()+r}}var Nv=K3("toUpperCase");function J3(t,e,A,n){var r=-1,s=t==null?0:t.length;for(n&&s&&(A=t[++r]);++r<s;)A=e(A,t[r],r,t);return A}function X3(){this.__data__=new ds,this.size=0}function ez(t){var e=this.__data__,A=e.delete(t);return this.size=e.size,A}function tz(t){return this.__data__.get(t)}function Az(t){return this.__data__.has(t)}var nz=200;function rz(t,e){var A=this.__data__;if(A instanceof ds){var n=A.__data__;if(!Jc||n.length<nz-1)return n.push([t,e]),this.size=++A.size,this;A=this.__data__=new ms(n)}return A.set(t,e),this.size=A.size,this}function Fr(t){var e=this.__data__=new ds(t);this.size=e.size}Fr.prototype.clear=X3,Fr.prototype.delete=ez,Fr.prototype.get=tz,Fr.prototype.has=Az,Fr.prototype.set=rz;function sz(t,e){return t&&Xp(e,Jn(e),t)}var Tv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ov=Tv&&typeof module=="object"&&module&&!module.nodeType&&module,iz=Ov&&Ov.exports===Tv,Yv=iz?Lr.Buffer:void 0,Sv=Yv?Yv.allocUnsafe:void 0;function oz(t,e){var A=t.length,n=Sv?Sv(A):new t.constructor(A);return t.copy(n),n}function hg(t,e){for(var A=-1,n=t==null?0:t.length,r=0,s=[];++A<n;){var i=t[A];e(i,A,t)&&(s[r++]=i)}return s}function Cv(){return[]}var az=Object.prototype,cz=az.propertyIsEnumerable,Pv=Object.getOwnPropertySymbols,fg=Pv?function(t){return t==null?[]:(t=Object(t),hg(Pv(t),function(e){return cz.call(t,e)}))}:Cv;function lz(t,e){return Xp(t,fg(t),e)}var uz=Object.getOwnPropertySymbols,hz=uz?function(t){for(var e=[];t;)og(e,fg(t)),t=yv(t);return e}:Cv;function Zv(t,e,A){var n=e(t);return pt(t)?n:og(n,A(t))}function dg(t){return Zv(t,Jn,fg)}function fz(t){return Zv(t,bv,hz)}var mg=Ci(Lr,"DataView"),pg=Ci(Lr,"Promise"),To=Ci(Lr,"Set"),Iv="[object Map]",dz="[object Object]",Rv="[object Promise]",jv="[object Set]",zv="[object WeakMap]",Hv="[object DataView]",mz=Si(mg),pz=Si(Jc),gz=Si(pg),wz=Si(To),bz=Si(Qp),Xn=Hs;(mg&&Xn(new mg(new ArrayBuffer(1)))!=Hv||Jc&&Xn(new Jc)!=Iv||pg&&Xn(pg.resolve())!=Rv||To&&Xn(new To)!=jv||Qp&&Xn(new Qp)!=zv)&&(Xn=function(t){var e=Hs(t),A=e==dz?t.constructor:void 0,n=A?Si(A):"";if(n)switch(n){case mz:return Hv;case pz:return Iv;case gz:return Rv;case wz:return jv;case bz:return zv}return e});var _z=Object.prototype,xz=_z.hasOwnProperty;function yz(t){var e=t.length,A=new t.constructor(e);return e&&typeof t[0]=="string"&&xz.call(t,"index")&&(A.index=t.index,A.input=t.input),A}var Ku=Lr.Uint8Array;function Gz(t){var e=new t.constructor(t.byteLength);return new Ku(e).set(new Ku(t)),e}function Mz(t,e){var A=t.buffer;return new t.constructor(A,t.byteOffset,t.byteLength)}var vz=/\w*$/;function Dz(t){var e=new t.constructor(t.source,vz.exec(t));return e.lastIndex=t.lastIndex,e}var Lv=Qn?Qn.prototype:void 0,Uv=Lv?Lv.valueOf:void 0;function Bz(t){return Uv?Object(Uv.call(t)):{}}function kz(t,e){var A=t.buffer;return new t.constructor(A,t.byteOffset,t.length)}var Ez="[object Boolean]",Nz="[object Date]",Tz="[object Map]",Oz="[object Number]",Yz="[object RegExp]",Sz="[object Set]",Cz="[object String]",Pz="[object Symbol]",Zz="[object ArrayBuffer]",Iz="[object DataView]",Rz="[object Float32Array]",jz="[object Float64Array]",zz="[object Int8Array]",Hz="[object Int16Array]",Lz="[object Int32Array]",Uz="[object Uint8Array]",Fz="[object Uint8ClampedArray]",$z="[object Uint16Array]",Vz="[object Uint32Array]";function qz(t,e,A){var n=t.constructor;switch(e){case Zz:return Gz(t);case Ez:case Nz:return new n(+t);case Iz:return Mz(t);case Rz:case jz:case zz:case Hz:case Lz:case Uz:case Fz:case $z:case Vz:return kz(t);case Tz:return new n;case Oz:case Cz:return new n(t);case Yz:return Dz(t);case Sz:return new n;case Pz:return Bz(t)}}function Wz(t){return typeof t.constructor=="function"&&!qc(t)?Zj(yv(t)):{}}var Qz="[object Map]";function Kz(t){return wr(t)&&Xn(t)==Qz}var Fv=Ls&&Ls.isMap,Jz=Fv?Vu(Fv):Kz,Xz="[object Set]";function eH(t){return wr(t)&&Xn(t)==Xz}var $v=Ls&&Ls.isSet,tH=$v?Vu($v):eH,Vv="[object Arguments]",AH="[object Array]",nH="[object Boolean]",rH="[object Date]",sH="[object Error]",qv="[object Function]",iH="[object GeneratorFunction]",oH="[object Map]",aH="[object Number]",Wv="[object Object]",cH="[object RegExp]",lH="[object Set]",uH="[object String]",hH="[object Symbol]",fH="[object WeakMap]",dH="[object ArrayBuffer]",mH="[object DataView]",pH="[object Float32Array]",gH="[object Float64Array]",wH="[object Int8Array]",bH="[object Int16Array]",_H="[object Int32Array]",xH="[object Uint8Array]",yH="[object Uint8ClampedArray]",GH="[object Uint16Array]",MH="[object Uint32Array]",Zt={};Zt[Vv]=Zt[AH]=Zt[dH]=Zt[mH]=Zt[nH]=Zt[rH]=Zt[pH]=Zt[gH]=Zt[wH]=Zt[bH]=Zt[_H]=Zt[oH]=Zt[aH]=Zt[Wv]=Zt[cH]=Zt[lH]=Zt[uH]=Zt[hH]=Zt[xH]=Zt[yH]=Zt[GH]=Zt[MH]=!0,Zt[sH]=Zt[qv]=Zt[fH]=!1;function Ju(t,e,A,n,r,s){var i;if(i!==void 0)return i;if(!Kn(t))return t;var o=pt(t);if(o)return i=yz(t),Rj(t,i);var a=Xn(t),c=a==qv||a==iH;if(Wc(t))return oz(t);if(a==Wv||a==Vv||c&&!r)return i=c?{}:Wz(t),lz(t,sz(i,t));if(!Zt[a])return r?t:{};i=qz(t,a),s||(s=new Fr);var l=s.get(t);if(l)return l;s.set(t,i),tH(t)?t.forEach(function(h){i.add(Ju(h,e,A,h,t,s))}):Jz(t)&&t.forEach(function(h,d){i.set(d,Ju(h,e,A,d,t,s))});var u=dg,f=o?void 0:u(t);return rv(f||t,function(h,d){f&&(d=h,h=t[d]),Fu(i,d,Ju(h,e,A,d,t,s))}),i}var vH=4;function jA(t){return Ju(t,vH)}function el(t){for(var e=-1,A=t==null?0:t.length,n=0,r=[];++e<A;){var s=t[e];s&&(r[n++]=s)}return r}var DH="__lodash_hash_undefined__";function BH(t){return this.__data__.set(t,DH),this}function kH(t){return this.__data__.has(t)}function Oo(t){var e=-1,A=t==null?0:t.length;for(this.__data__=new ms;++e<A;)this.add(t[e])}Oo.prototype.add=Oo.prototype.push=BH,Oo.prototype.has=kH;function Qv(t,e){for(var A=-1,n=t==null?0:t.length;++A<n;)if(e(t[A],A,t))return!0;return!1}function gg(t,e){return t.has(e)}var EH=1,NH=2;function Kv(t,e,A,n,r,s){var i=A&EH,o=t.length,a=e.length;if(o!=a&&!(i&&a>o))return!1;var c=s.get(t),l=s.get(e);if(c&&l)return c==e&&l==t;var u=-1,f=!0,h=A&NH?new Oo:void 0;for(s.set(t,e),s.set(e,t);++u<o;){var d=t[u],m=e[u];if(n)var p=i?n(m,d,u,e,t,s):n(d,m,u,t,e,s);if(p!==void 0){if(p)continue;f=!1;break}if(h){if(!Qv(e,function(w,b){if(!gg(h,b)&&(d===w||r(d,w,A,n,s)))return h.push(b)})){f=!1;break}}else if(!(d===m||r(d,m,A,n,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function TH(t){var e=-1,A=Array(t.size);return t.forEach(function(n,r){A[++e]=[r,n]}),A}function wg(t){var e=-1,A=Array(t.size);return t.forEach(function(n){A[++e]=n}),A}var OH=1,YH=2,SH="[object Boolean]",CH="[object Date]",PH="[object Error]",ZH="[object Map]",IH="[object Number]",RH="[object RegExp]",jH="[object Set]",zH="[object String]",HH="[object Symbol]",LH="[object ArrayBuffer]",UH="[object DataView]",Jv=Qn?Qn.prototype:void 0,bg=Jv?Jv.valueOf:void 0;function FH(t,e,A,n,r,s,i){switch(A){case UH:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case LH:return!(t.byteLength!=e.byteLength||!s(new Ku(t),new Ku(e)));case SH:case CH:case IH:return Vc(+t,+e);case PH:return t.name==e.name&&t.message==e.message;case RH:case zH:return t==e+"";case ZH:var o=TH;case jH:var a=n&OH;if(o||(o=wg),t.size!=e.size&&!a)return!1;var c=i.get(t);if(c)return c==e;n|=YH,i.set(t,e);var l=Kv(o(t),o(e),n,r,s,i);return i.delete(t),l;case HH:if(bg)return bg.call(t)==bg.call(e)}return!1}var $H=1,VH=Object.prototype,qH=VH.hasOwnProperty;function WH(t,e,A,n,r,s){var i=A&$H,o=dg(t),a=o.length,c=dg(e),l=c.length;if(a!=l&&!i)return!1;for(var u=a;u--;){var f=o[u];if(!(i?f in e:qH.call(e,f)))return!1}var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var m=!0;s.set(t,e),s.set(e,t);for(var p=i;++u<a;){f=o[u];var w=t[f],b=e[f];if(n)var g=i?n(b,w,f,e,t,s):n(w,b,f,t,e,s);if(!(g===void 0?w===b||r(w,b,A,n,s):g)){m=!1;break}p||(p=f=="constructor")}if(m&&!p){var x=t.constructor,_=e.constructor;x!=_&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return s.delete(t),s.delete(e),m}var QH=1,Xv="[object Arguments]",eD="[object Array]",Xu="[object Object]",KH=Object.prototype,tD=KH.hasOwnProperty;function JH(t,e,A,n,r,s){var i=pt(t),o=pt(e),a=i?eD:Xn(t),c=o?eD:Xn(e);a=a==Xv?Xu:a,c=c==Xv?Xu:c;var l=a==Xu,u=c==Xu,f=a==c;if(f&&Wc(t)){if(!Wc(e))return!1;i=!0,l=!1}if(f&&!l)return s||(s=new Fr),i||ng(t)?Kv(t,e,A,n,r,s):FH(t,e,a,A,n,r,s);if(!(A&QH)){var h=l&&tD.call(t,"__wrapped__"),d=u&&tD.call(e,"__wrapped__");if(h||d){var m=h?t.value():t,p=d?e.value():e;return s||(s=new Fr),r(m,p,A,n,s)}}return f?(s||(s=new Fr),WH(t,e,A,n,r,s)):!1}function _g(t,e,A,n,r){return t===e?!0:t==null||e==null||!wr(t)&&!wr(e)?t!==t&&e!==e:JH(t,e,A,n,_g,r)}var XH=1,eL=2;function tL(t,e,A,n){var r=A.length,s=r;if(t==null)return!s;for(t=Object(t);r--;){var i=A[r];if(i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++r<s;){i=A[r];var o=i[0],a=t[o],c=i[1];if(i[2]){if(a===void 0&&!(o in t))return!1}else{var l=new Fr,u;if(!(u===void 0?_g(c,a,XH|eL,n,l):u))return!1}}return!0}function AD(t){return t===t&&!Kn(t)}function AL(t){for(var e=Jn(t),A=e.length;A--;){var n=e[A],r=t[n];e[A]=[n,r,AD(r)]}return e}function nD(t,e){return function(A){return A==null?!1:A[t]===e&&(e!==void 0||t in Object(A))}}function nL(t){var e=AL(t);return e.length==1&&e[0][2]?nD(e[0][0],e[0][1]):function(A){return A===t||tL(A,t,e)}}function rL(t,e){return t!=null&&e in Object(t)}function rD(t,e,A){e=Qu(e,t);for(var n=-1,r=e.length,s=!1;++n<r;){var i=Xc(e[n]);if(!(s=t!=null&&A(t,i)))break;t=t[i]}return s||++n!=r?s:(r=t==null?0:t.length,!!r&&tg(r)&&Uu(i,r)&&(pt(t)||$u(t)))}function sL(t,e){return t!=null&&rD(t,e,rL)}var iL=1,oL=2;function aL(t,e){return rg(t)&&AD(e)?nD(Xc(t),e):function(A){var n=v3(A,t);return n===void 0&&n===e?sL(A,t):_g(e,n,iL|oL)}}function cL(t){return function(e){return e?.[t]}}function lL(t){return function(e){return ig(e,t)}}function uL(t){return rg(t)?cL(Xc(t)):lL(t)}function $r(t){return typeof t=="function"?t:t==null?No:typeof t=="object"?pt(t)?aL(t[0],t[1]):nL(t):uL(t)}function hL(t,e,A,n){for(var r=-1,s=t==null?0:t.length;++r<s;){var i=t[r];e(n,i,A(i),t)}return n}function fL(t){return function(e,A,n){for(var r=-1,s=Object(e),i=n(e),o=i.length;o--;){var a=i[++r];if(A(s[a],a,s)===!1)break}return e}}var dL=fL();function mL(t,e){return t&&dL(t,e,Jn)}function pL(t,e){return function(A,n){if(A==null)return A;if(!Ur(A))return t(A,n);for(var r=A.length,s=-1,i=Object(A);++s<r&&n(i[s],s,i)!==!1;);return A}}var Zi=pL(mL);function gL(t,e,A,n){return Zi(t,function(r,s,i){e(n,r,A(r),i)}),n}function wL(t,e){return function(A,n){var r=pt(A)?hL:gL,s=e?e():{};return r(A,t,$r(n),s)}}var sD=Object.prototype,bL=sD.hasOwnProperty,xg=eg(function(t,e){t=Object(t);var A=-1,n=e.length,r=n>2?e[2]:void 0;for(r&&av(e[0],e[1],r)&&(n=1);++A<n;)for(var s=e[A],i=bv(s),o=-1,a=i.length;++o<a;){var c=i[o],l=t[c];(l===void 0||Vc(l,sD[c])&&!bL.call(t,c))&&(t[c]=s[c])}return t});function iD(t){return wr(t)&&Ur(t)}var _L=200;function xL(t,e,A,n){var r=-1,s=iv,i=!0,o=t.length,a=[],c=e.length;if(!o)return a;e.length>=_L&&(s=gg,i=!1,e=new Oo(e));e:for(;++r<o;){var l=t[r],u=l;if(l=l!==0?l:0,i&&u===u){for(var f=c;f--;)if(e[f]===u)continue e;a.push(l)}else s(e,u,n)||a.push(l)}return a}var eh=eg(function(t,e){return iD(t)?xL(t,ag(e,1,iD,!0)):[]});function Ii(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function zA(t,e,A){var n=t==null?0:t.length;return n?(e=e===void 0?1:Hu(e),cg(t,e<0?0:e,n)):[]}function tl(t,e,A){var n=t==null?0:t.length;return n?(e=e===void 0?1:Hu(e),e=n-e,cg(t,0,e<0?0:e)):[]}function yL(t){return typeof t=="function"?t:No}function Je(t,e){var A=pt(t)?rv:Zi;return A(t,yL(e))}function GL(t,e){for(var A=-1,n=t==null?0:t.length;++A<n;)if(!e(t[A],A,t))return!1;return!0}function ML(t,e){var A=!0;return Zi(t,function(n,r,s){return A=!!e(n,r,s),A}),A}function br(t,e,A){var n=pt(t)?GL:ML;return n(t,$r(e))}function oD(t,e){var A=[];return Zi(t,function(n,r,s){e(n,r,s)&&A.push(n)}),A}function er(t,e){var A=pt(t)?hg:oD;return A(t,$r(e))}function vL(t){return function(e,A,n){var r=Object(e);if(!Ur(e)){var s=$r(A);e=Jn(e),A=function(o){return s(r[o],o,r)}}var i=t(e,A,n);return i>-1?r[s?e[i]:i]:void 0}}var DL=Math.max;function BL(t,e,A){var n=t==null?0:t.length;if(!n)return-1;var r=A==null?0:Hu(A);return r<0&&(r=DL(n+r,0)),sv(t,$r(e),r)}var Yo=vL(BL);function _r(t){return t&&t.length?t[0]:void 0}function kL(t,e){var A=-1,n=Ur(t)?Array(t.length):[];return Zi(t,function(r,s,i){n[++A]=e(r,s,i)}),n}function ze(t,e){var A=pt(t)?zu:kL;return A(t,$r(e))}function tr(t,e){return ag(ze(t,e))}var EL=Object.prototype,NL=EL.hasOwnProperty,aD=wL(function(t,e,A){NL.call(t,A)?t[A].push(e):Jp(t,A,[e])}),TL=Object.prototype,OL=TL.hasOwnProperty;function YL(t,e){return t!=null&&OL.call(t,e)}function Qe(t,e){return t!=null&&rD(t,e,YL)}var SL="[object String]";function _n(t){return typeof t=="string"||!pt(t)&&wr(t)&&Hs(t)==SL}function CL(t,e){return zu(e,function(A){return t[A]})}function xA(t){return t==null?[]:CL(t,Jn(t))}var PL=Math.max;function An(t,e,A,n){t=Ur(t)?t:xA(t),A=A?Hu(A):0;var r=t.length;return A<0&&(A=PL(r+A,0)),_n(t)?A<=r&&t.indexOf(e,A)>-1:!!r&&Kp(t,e,A)>-1}function cD(t,e,A){var n=t==null?0:t.length;if(!n)return-1;var r=0;return Kp(t,e,r)}var ZL="[object Map]",IL="[object Set]",RL=Object.prototype,jL=RL.hasOwnProperty;function It(t){if(t==null)return!0;if(Ur(t)&&(pt(t)||typeof t=="string"||typeof t.splice=="function"||Wc(t)||ng(t)||$u(t)))return!t.length;var e=Xn(t);if(e==ZL||e==IL)return!t.size;if(qc(t))return!wv(t).length;for(var A in t)if(jL.call(t,A))return!1;return!0}var zL="[object RegExp]";function HL(t){return wr(t)&&Hs(t)==zL}var lD=Ls&&Ls.isRegExp,ps=lD?Vu(lD):HL;function gs(t){return t===void 0}var LL="Expected a function";function UL(t){if(typeof t!="function")throw new TypeError(LL);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function FL(t,e,A,n){if(!Kn(t))return t;e=Qu(e,t);for(var r=-1,s=e.length,i=s-1,o=t;o!=null&&++r<s;){var a=Xc(e[r]),c=A;if(a==="__proto__"||a==="constructor"||a==="prototype")return t;if(r!=i){var l=o[a];c=void 0,c===void 0&&(c=Kn(l)?l:Uu(e[r+1])?[]:{})}Fu(o,a,c),o=o[a]}return t}function $L(t,e,A){for(var n=-1,r=e.length,s={};++n<r;){var i=e[n],o=ig(t,i);A(o,i)&&FL(s,Qu(i,t),o)}return s}function xr(t,e){if(t==null)return{};var A=zu(fz(t),function(n){return[n]});return e=$r(e),$L(t,A,function(n,r){return e(n,r[0])})}function VL(t,e,A,n,r){return r(t,function(s,i,o){A=n?(n=!1,s):e(A,s,i,o)}),A}function xn(t,e,A){var n=pt(t)?J3:VL,r=arguments.length<3;return n(t,$r(e),A,r,Zi)}function th(t,e){var A=pt(t)?hg:oD;return A(t,UL($r(e)))}function qL(t,e){var A;return Zi(t,function(n,r,s){return A=e(n,r,s),!A}),!!A}function yg(t,e,A){var n=pt(t)?Qv:qL;return n(t,$r(e))}var WL=1/0,QL=To&&1/wg(new To([,-0]))[1]==WL?function(t){return new To(t)}:kA,KL=200;function JL(t,e,A){var n=-1,r=iv,s=t.length,i=!0,o=[],a=o;if(s>=KL){var c=QL(t);if(c)return wg(c);i=!1,r=gg,a=new Oo}else a=o;e:for(;++n<s;){var l=t[n],u=l;if(l=l!==0?l:0,i&&u===u){for(var f=a.length;f--;)if(a[f]===u)continue e;o.push(l)}else r(a,u,A)||(a!==o&&a.push(u),o.push(l))}return o}function Ah(t){return t&&t.length?JL(t):[]}function Gg(t){console&&console.error&&console.error(`Error: ${t}`)}function uD(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function hD(t){const e=new Date().getTime(),A=t();return{time:new Date().getTime()-e,value:A}}function fD(t){function e(){}e.prototype=t;const A=new e;function n(){return typeof A.bar}return n(),n(),t}function XL(t){return e6(t)?t.LABEL:t.name}function e6(t){return _n(t.LABEL)&&t.LABEL!==""}class Vr{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),Je(this.definition,A=>{A.accept(e)})}}class yn extends Vr{constructor(e){super([]),this.idx=1,bn(this,xr(e,A=>A!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class So extends Vr{constructor(e){super(e.definition),this.orgText="",bn(this,xr(e,A=>A!==void 0))}}class Gn extends Vr{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,bn(this,xr(e,A=>A!==void 0))}}class Mn extends Vr{constructor(e){super(e.definition),this.idx=1,bn(this,xr(e,A=>A!==void 0))}}class qr extends Vr{constructor(e){super(e.definition),this.idx=1,bn(this,xr(e,A=>A!==void 0))}}class Wr extends Vr{constructor(e){super(e.definition),this.idx=1,bn(this,xr(e,A=>A!==void 0))}}class EA extends Vr{constructor(e){super(e.definition),this.idx=1,bn(this,xr(e,A=>A!==void 0))}}class yr extends Vr{constructor(e){super(e.definition),this.idx=1,bn(this,xr(e,A=>A!==void 0))}}class Gr extends Vr{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,bn(this,xr(e,A=>A!==void 0))}}class Xt{constructor(e){this.idx=1,bn(this,xr(e,A=>A!==void 0))}accept(e){e.visit(this)}}function t6(t){return ze(t,nh)}function nh(t){function e(A){return ze(A,nh)}if(t instanceof yn){const A={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return _n(t.label)&&(A.label=t.label),A}else{if(t instanceof Gn)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Mn)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof qr)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Wr)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:nh(new Xt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof yr)return{type:"RepetitionWithSeparator",idx:t.idx,separator:nh(new Xt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof EA)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Gr)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Xt){const A={type:"Terminal",name:t.terminalType.name,label:XL(t.terminalType),idx:t.idx};_n(t.label)&&(A.terminalLabel=t.label);const n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(A.pattern=ps(n)?n.source:n),A}else{if(t instanceof So)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class Ri{visit(e){const A=e;switch(A.constructor){case yn:return this.visitNonTerminal(A);case Gn:return this.visitAlternative(A);case Mn:return this.visitOption(A);case qr:return this.visitRepetitionMandatory(A);case Wr:return this.visitRepetitionMandatoryWithSeparator(A);case yr:return this.visitRepetitionWithSeparator(A);case EA:return this.visitRepetition(A);case Gr:return this.visitAlternation(A);case Xt:return this.visitTerminal(A);case So:return this.visitRule(A);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function A6(t){return t instanceof Gn||t instanceof Mn||t instanceof EA||t instanceof qr||t instanceof Wr||t instanceof yr||t instanceof Xt||t instanceof So}function rh(t,e=[]){return t instanceof Mn||t instanceof EA||t instanceof yr?!0:t instanceof Gr?yg(t.definition,n=>rh(n,e)):t instanceof yn&&An(e,t)?!1:t instanceof Vr?(t instanceof yn&&e.push(t),br(t.definition,n=>rh(n,e))):!1}function n6(t){return t instanceof Gr}function Qr(t){if(t instanceof yn)return"SUBRULE";if(t instanceof Mn)return"OPTION";if(t instanceof Gr)return"OR";if(t instanceof qr)return"AT_LEAST_ONE";if(t instanceof Wr)return"AT_LEAST_ONE_SEP";if(t instanceof yr)return"MANY_SEP";if(t instanceof EA)return"MANY";if(t instanceof Xt)return"CONSUME";throw Error("non exhaustive match")}class sh{walk(e,A=[]){Je(e.definition,(n,r)=>{const s=zA(e.definition,r+1);if(n instanceof yn)this.walkProdRef(n,s,A);else if(n instanceof Xt)this.walkTerminal(n,s,A);else if(n instanceof Gn)this.walkFlat(n,s,A);else if(n instanceof Mn)this.walkOption(n,s,A);else if(n instanceof qr)this.walkAtLeastOne(n,s,A);else if(n instanceof Wr)this.walkAtLeastOneSep(n,s,A);else if(n instanceof yr)this.walkManySep(n,s,A);else if(n instanceof EA)this.walkMany(n,s,A);else if(n instanceof Gr)this.walkOr(n,s,A);else throw Error("non exhaustive match")})}walkTerminal(e,A,n){}walkProdRef(e,A,n){}walkFlat(e,A,n){const r=A.concat(n);this.walk(e,r)}walkOption(e,A,n){const r=A.concat(n);this.walk(e,r)}walkAtLeastOne(e,A,n){const r=[new Mn({definition:e.definition})].concat(A,n);this.walk(e,r)}walkAtLeastOneSep(e,A,n){const r=dD(e,A,n);this.walk(e,r)}walkMany(e,A,n){const r=[new Mn({definition:e.definition})].concat(A,n);this.walk(e,r)}walkManySep(e,A,n){const r=dD(e,A,n);this.walk(e,r)}walkOr(e,A,n){const r=A.concat(n);Je(e.definition,s=>{const i=new Gn({definition:[s]});this.walk(i,r)})}}function dD(t,e,A){return[new Mn({definition:[new Xt({terminalType:t.separator})].concat(t.definition)})].concat(e,A)}function Al(t){if(t instanceof yn)return Al(t.referencedRule);if(t instanceof Xt)return i6(t);if(A6(t))return r6(t);if(n6(t))return s6(t);throw Error("non exhaustive match")}function r6(t){let e=[];const A=t.definition;let n=0,r=A.length>n,s,i=!0;for(;r&&i;)s=A[n],i=rh(s),e=e.concat(Al(s)),n=n+1,r=A.length>n;return Ah(e)}function s6(t){const e=ze(t.definition,A=>Al(A));return Ah(Pn(e))}function i6(t){return[t.terminalType]}const mD="_~IN~_";class o6 extends sh{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,A,n){}walkProdRef(e,A,n){const r=c6(e.referencedRule,e.idx)+this.topProd.name,s=A.concat(n),i=new Gn({definition:s}),o=Al(i);this.follows[r]=o}}function a6(t){const e={};return Je(t,A=>{const n=new o6(A).startWalking();bn(e,n)}),e}function c6(t,e){return t.name+e+mD}function et(t){return t.charCodeAt(0)}function Mg(t,e){Array.isArray(t)?t.forEach(function(A){e.push(A)}):e.push(t)}function nl(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function Co(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function l6(){throw Error("Internal Error - Should never get here!")}function pD(t){return t.type==="Character"}const ih=[];for(let t=et("0");t<=et("9");t++)ih.push(t);const oh=[et("_")].concat(ih);for(let t=et("a");t<=et("z");t++)oh.push(t);for(let t=et("A");t<=et("Z");t++)oh.push(t);const gD=[et(" "),et("\f"),et(`
`),et("\r"),et("	"),et("\v"),et("	"),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et(""),et("\u2028"),et("\u2029"),et(""),et(""),et(""),et("\uFEFF")],u6=/[0-9a-fA-F]/,ah=/[0-9]/,h6=/[1-9]/;class f6{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const A=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":nl(n,"global");break;case"i":nl(n,"ignoreCase");break;case"m":nl(n,"multiLine");break;case"u":nl(n,"unicode");break;case"y":nl(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:A,loc:this.loc(0)}}disjunction(){const e=[],A=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(A)}}alternative(){const e=[],A=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(A)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let A;switch(this.popChar()){case"=":A="Lookahead";break;case"!":A="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":A="Lookbehind";break;case"!":A="NegativeLookbehind"}break}}Co(A);const n=this.disjunction();return this.consumeChar(")"),{type:A,value:n,loc:this.loc(e)}}return l6()}quantifier(e=!1){let A;const n=this.idx;switch(this.popChar()){case"*":A={atLeast:0,atMost:1/0};break;case"+":A={atLeast:1,atMost:1/0};break;case"?":A={atLeast:0,atMost:1};break;case"{":const r=this.integerIncludingZero();switch(this.popChar()){case"}":A={atLeast:r,atMost:r};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),A={atLeast:r,atMost:s}):A={atLeast:r,atMost:1/0},this.consumeChar("}");break}if(e===!0&&A===void 0)return;Co(A);break}if(!(e===!0&&A===void 0)&&Co(A))return this.peekChar(0)==="?"?(this.consumeChar("?"),A.greedy=!1):A.greedy=!0,A.type="Quantifier",A.loc=this.loc(n),A}atom(){let e;const A=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Co(e))return e.loc=this.loc(A),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[et(`
`),et("\r"),et("\u2028"),et("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,A=!1;switch(this.popChar()){case"d":e=ih;break;case"D":e=ih,A=!0;break;case"s":e=gD;break;case"S":e=gD,A=!0;break;case"w":e=oh;break;case"W":e=oh,A=!0;break}if(Co(e))return{type:"Set",value:e,complement:A}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=et("\f");break;case"n":e=et(`
`);break;case"r":e=et("\r");break;case"t":e=et("	");break;case"v":e=et("\v");break}if(Co(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:et("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:et(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:et(e)}}}characterClass(){const e=[];let A=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),A=!0);this.isClassAtom();){const n=this.classAtom();if(n.type,pD(n)&&this.isRangeDash()){this.consumeChar("-");const r=this.classAtom();if(r.type,pD(r)){if(r.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:r.value})}else Mg(n.value,e),e.push(et("-")),Mg(r.value,e)}else Mg(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:A,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:et("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const A=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:e,value:A};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(h6.test(e)===!1)throw Error("Expecting a positive integer");for(;ah.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(ah.test(e)===!1)throw Error("Expecting an integer");for(;ah.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:et(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return ah.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let A="";for(let r=0;r<e;r++){const s=this.popChar();if(u6.test(s)===!1)throw Error("Expecting a HexDecimal digits");A+=s}return{type:"Character",value:parseInt(A,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class vg{visitChildren(e){for(const A in e){const n=e[A];e.hasOwnProperty(A)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(r=>{this.visit(r)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let ch={};const d6=new f6;function lh(t){const e=t.toString();if(ch.hasOwnProperty(e))return ch[e];{const A=d6.pattern(e);return ch[e]=A,A}}function m6(){ch={}}const wD="Complement Sets are not supported for first char optimization",uh=`Unable to use "first char" lexer optimizations:
`;function p6(t,e=!1){try{const A=lh(t);return Dg(A.value,{},A.flags.ignoreCase)}catch(A){if(A.message===wD)e&&uD(`${uh}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Gg(`${uh}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function Dg(t,e,A){switch(t.type){case"Disjunction":for(let r=0;r<t.value.length;r++)Dg(t.value[r],e,A);break;case"Alternative":const n=t.value;for(let r=0;r<n.length;r++){const s=n[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const i=s;switch(i.type){case"Character":hh(i.value,e,A);break;case"Set":if(i.complement===!0)throw Error(wD);Je(i.value,a=>{if(typeof a=="number")hh(a,e,A);else{const c=a;if(A===!0)for(let l=c.from;l<=c.to;l++)hh(l,e,A);else{for(let l=c.from;l<=c.to&&l<sl;l++)hh(l,e,A);if(c.to>=sl){const l=c.from>=sl?c.from:sl,u=c.to,f=Us(l),h=Us(u);for(let d=f;d<=h;d++)e[d]=d}}}});break;case"Group":Dg(i.value,e,A);break;default:throw Error("Non Exhaustive Match")}const o=i.quantifier!==void 0&&i.quantifier.atLeast===0;if(i.type==="Group"&&Bg(i)===!1||i.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return xA(e)}function hh(t,e,A){const n=Us(t);e[n]=n,A===!0&&g6(t,e)}function g6(t,e){const A=String.fromCharCode(t),n=A.toUpperCase();if(n!==A){const r=Us(n.charCodeAt(0));e[r]=r}else{const r=A.toLowerCase();if(r!==A){const s=Us(r.charCodeAt(0));e[s]=s}}}function bD(t,e){return Yo(t.value,A=>{if(typeof A=="number")return An(e,A);{const n=A;return Yo(e,r=>n.from<=r&&r<=n.to)!==void 0}})}function Bg(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?pt(t.value)?br(t.value,Bg):Bg(t.value):!1}class w6 extends vg{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){An(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?bD(e,this.targetCharCodes)===void 0&&(this.found=!0):bD(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function kg(t,e){if(e instanceof RegExp){const A=lh(e),n=new w6(t);return n.visit(A),n.found}else return Yo(e,A=>An(t,A.charCodeAt(0)))!==void 0}const ji="PATTERN",rl="defaultMode",fh="modes";let _D=typeof new RegExp("(?:)").sticky=="boolean";function b6(t,e){e=xg(e,{useSticky:_D,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(b,g)=>g()});const A=e.tracer;A("initCharCodeToOptimizedIndexMap",()=>{L6()});let n;A("Reject Lexer.NA",()=>{n=th(t,b=>b[ji]===SA.NA)});let r=!1,s;A("Transform Patterns",()=>{r=!1,s=ze(n,b=>{const g=b[ji];if(ps(g)){const x=g.source;return x.length===1&&x!=="^"&&x!=="$"&&x!=="."&&!g.ignoreCase?x:x.length===2&&x[0]==="\\"&&!An(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],x[1])?x[1]:e.useSticky?yD(g):xD(g)}else{if(fs(g))return r=!0,{exec:g};if(typeof g=="object")return r=!0,g;if(typeof g=="string"){if(g.length===1)return g;{const x=g.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),_=new RegExp(x);return e.useSticky?yD(_):xD(_)}}else throw Error("non exhaustive match")}})});let i,o,a,c,l;A("misc mapping",()=>{i=ze(n,b=>b.tokenTypeIdx),o=ze(n,b=>{const g=b.GROUP;if(g!==SA.SKIPPED){if(_n(g))return g;if(gs(g))return!1;throw Error("non exhaustive match")}}),a=ze(n,b=>{const g=b.LONGER_ALT;if(g)return pt(g)?ze(g,_=>cD(n,_)):[cD(n,g)]}),c=ze(n,b=>b.PUSH_MODE),l=ze(n,b=>Qe(b,"POP_MODE"))});let u;A("Line Terminator Handling",()=>{const b=vD(e.lineTerminatorCharacters);u=ze(n,g=>!1),e.positionTracking!=="onlyOffset"&&(u=ze(n,g=>Qe(g,"LINE_BREAKS")?!!g.LINE_BREAKS:MD(g,b)===!1&&kg(b,g.PATTERN)))});let f,h,d,m;A("Misc Mapping #2",()=>{f=ze(n,GD),h=ze(s,j6),d=xn(n,(b,g)=>{const x=g.GROUP;return _n(x)&&x!==SA.SKIPPED&&(b[x]=[]),b},{}),m=ze(s,(b,g)=>({pattern:s[g],longerAlt:a[g],canLineTerminator:u[g],isCustom:f[g],short:h[g],group:o[g],push:c[g],pop:l[g],tokenTypeIdx:i[g],tokenType:n[g]}))});let p=!0,w=[];return e.safeMode||A("First Char Optimization",()=>{w=xn(n,(b,g,x)=>{if(typeof g.PATTERN=="string"){const _=g.PATTERN.charCodeAt(0),G=Us(_);Eg(b,G,m[x])}else if(pt(g.START_CHARS_HINT)){let _;Je(g.START_CHARS_HINT,G=>{const y=typeof G=="string"?G.charCodeAt(0):G,v=Us(y);_!==v&&(_=v,Eg(b,v,m[x]))})}else if(ps(g.PATTERN))if(g.PATTERN.unicode)p=!1,e.ensureOptimizations&&Gg(`${uh}	Unable to analyze < ${g.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const _=p6(g.PATTERN,e.ensureOptimizations);It(_)&&(p=!1),Je(_,G=>{Eg(b,G,m[x])})}else e.ensureOptimizations&&Gg(`${uh}	TokenType: <${g.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),p=!1;return b},[])}),{emptyGroups:d,patternIdxToConfig:m,charCodeToPatternIdxToConfig:w,hasCustom:r,canBeOptimized:p}}function _6(t,e){let A=[];const n=y6(t);A=A.concat(n.errors);const r=G6(n.valid),s=r.valid;return A=A.concat(r.errors),A=A.concat(x6(s)),A=A.concat(T6(s)),A=A.concat(O6(s,e)),A=A.concat(Y6(s)),A}function x6(t){let e=[];const A=er(t,n=>ps(n[ji]));return e=e.concat(v6(A)),e=e.concat(k6(A)),e=e.concat(E6(A)),e=e.concat(N6(A)),e=e.concat(D6(A)),e}function y6(t){const e=er(t,r=>!Qe(r,ji)),A=ze(e,r=>({message:"Token Type: ->"+r.name+"<- missing static 'PATTERN' property",type:oA.MISSING_PATTERN,tokenTypes:[r]})),n=eh(t,e);return{errors:A,valid:n}}function G6(t){const e=er(t,r=>{const s=r[ji];return!ps(s)&&!fs(s)&&!Qe(s,"exec")&&!_n(s)}),A=ze(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:oA.INVALID_PATTERN,tokenTypes:[r]})),n=eh(t,e);return{errors:A,valid:n}}const M6=/[^\\][$]/;function v6(t){class e extends vg{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const A=er(t,r=>{const s=r.PATTERN;try{const i=lh(s),o=new e;return o.visit(i),o.found}catch{return M6.test(s.source)}});return ze(A,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:oA.EOI_ANCHOR_FOUND,tokenTypes:[r]}))}function D6(t){const e=er(t,n=>n.PATTERN.test(""));return ze(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:oA.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}const B6=/[^\\[][\^]|^\^/;function k6(t){class e extends vg{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const A=er(t,r=>{const s=r.PATTERN;try{const i=lh(s),o=new e;return o.visit(i),o.found}catch{return B6.test(s.source)}});return ze(A,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:oA.SOI_ANCHOR_FOUND,tokenTypes:[r]}))}function E6(t){const e=er(t,n=>{const r=n[ji];return r instanceof RegExp&&(r.multiline||r.global)});return ze(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:oA.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function N6(t){const e=[];let A=ze(t,s=>xn(t,(i,o)=>(s.PATTERN.source===o.PATTERN.source&&!An(e,o)&&o.PATTERN!==SA.NA&&(e.push(o),i.push(o)),i),[]));A=el(A);const n=er(A,s=>s.length>1);return ze(n,s=>{const i=ze(s,a=>a.name);return{message:`The same RegExp pattern ->${_r(s).PATTERN}<-has been used in all of the following Token Types: ${i.join(", ")} <-`,type:oA.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function T6(t){const e=er(t,n=>{if(!Qe(n,"GROUP"))return!1;const r=n.GROUP;return r!==SA.SKIPPED&&r!==SA.NA&&!_n(r)});return ze(e,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:oA.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function O6(t,e){const A=er(t,r=>r.PUSH_MODE!==void 0&&!An(e,r.PUSH_MODE));return ze(A,r=>({message:`Token Type: ->${r.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${r.PUSH_MODE}<-which does not exist`,type:oA.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[r]}))}function Y6(t){const e=[],A=xn(t,(n,r,s)=>{const i=r.PATTERN;return i===SA.NA||(_n(i)?n.push({str:i,idx:s,tokenType:r}):ps(i)&&C6(i)&&n.push({str:i.source,idx:s,tokenType:r})),n},[]);return Je(t,(n,r)=>{Je(A,({str:s,idx:i,tokenType:o})=>{if(r<i&&S6(s,n.PATTERN)){const a=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:a,type:oA.UNREACHABLE_PATTERN,tokenTypes:[n,o]})}})}),e}function S6(t,e){if(ps(e)){if(P6(e))return!1;const A=e.exec(t);return A!==null&&A.index===0}else{if(fs(e))return e(t,0,[],{});if(Qe(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function C6(t){return Yo([".","\\","[","]","|","^","$","(",")","?","*","+","{"],A=>t.source.indexOf(A)!==-1)===void 0}function P6(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function xD(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function yD(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Z6(t,e,A){const n=[];return Qe(t,rl)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+rl+`> property in its definition
`,type:oA.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Qe(t,fh)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+fh+`> property in its definition
`,type:oA.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Qe(t,fh)&&Qe(t,rl)&&!Qe(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${rl}: <${t.defaultMode}>which does not exist
`,type:oA.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Qe(t,fh)&&Je(t.modes,(r,s)=>{Je(r,(i,o)=>{if(gs(i))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:oA.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Qe(i,"LONGER_ALT")){const a=pt(i.LONGER_ALT)?i.LONGER_ALT:[i.LONGER_ALT];Je(a,c=>{!gs(c)&&!An(r,c)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${c.name}> on token <${i.name}> outside of mode <${s}>
`,type:oA.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function I6(t,e,A){const n=[];let r=!1;const s=el(Pn(xA(t.modes))),i=th(s,a=>a[ji]===SA.NA),o=vD(A);return e&&Je(i,a=>{const c=MD(a,o);if(c!==!1){const u={message:H6(a,c),type:c.issue,tokenType:a};n.push(u)}else Qe(a,"LINE_BREAKS")?a.LINE_BREAKS===!0&&(r=!0):kg(o,a.PATTERN)&&(r=!0)}),e&&!r&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:oA.NO_LINE_BREAKS_FLAGS}),n}function R6(t){const e={},A=Jn(t);return Je(A,n=>{const r=t[n];if(pt(r))e[n]=[];else throw Error("non exhaustive match")}),e}function GD(t){const e=t.PATTERN;if(ps(e))return!1;if(fs(e))return!0;if(Qe(e,"exec"))return!0;if(_n(e))return!1;throw Error("non exhaustive match")}function j6(t){return _n(t)&&t.length===1?t.charCodeAt(0):!1}const z6={test:function(t){const e=t.length;for(let A=this.lastIndex;A<e;A++){const n=t.charCodeAt(A);if(n===10)return this.lastIndex=A+1,!0;if(n===13)return t.charCodeAt(A+1)===10?this.lastIndex=A+2:this.lastIndex=A+1,!0}return!1},lastIndex:0};function MD(t,e){if(Qe(t,"LINE_BREAKS"))return!1;if(ps(t.PATTERN)){try{kg(e,t.PATTERN)}catch(A){return{issue:oA.IDENTIFY_TERMINATOR,errMsg:A.message}}return!1}else{if(_n(t.PATTERN))return!1;if(GD(t))return{issue:oA.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function H6(t,e){if(e.issue===oA.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===oA.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function vD(t){return ze(t,A=>_n(A)?A.charCodeAt(0):A)}function Eg(t,e,A){t[e]===void 0?t[e]=[A]:t[e].push(A)}const sl=256;let dh=[];function Us(t){return t<sl?t:dh[t]}function L6(){if(It(dh)){dh=new Array(65536);for(let t=0;t<65536;t++)dh[t]=t>255?255+~~(t/255):t}}function il(t,e){const A=t.tokenTypeIdx;return A===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[A]===!0}function mh(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let DD=1;const BD={};function ol(t){const e=U6(t);F6(e),V6(e),$6(e),Je(e,A=>{A.isParent=A.categoryMatches.length>0})}function U6(t){let e=jA(t),A=t,n=!0;for(;n;){A=el(Pn(ze(A,s=>s.CATEGORIES)));const r=eh(A,e);e=e.concat(r),It(r)?n=!1:A=r}return e}function F6(t){Je(t,e=>{ED(e)||(BD[DD]=e,e.tokenTypeIdx=DD++),ND(e)&&!pt(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),ND(e)||(e.CATEGORIES=[]),q6(e)||(e.categoryMatches=[]),W6(e)||(e.categoryMatchesMap={})})}function $6(t){Je(t,e=>{e.categoryMatches=[],Je(e.categoryMatchesMap,(A,n)=>{e.categoryMatches.push(BD[n].tokenTypeIdx)})})}function V6(t){Je(t,e=>{kD([],e)})}function kD(t,e){Je(t,A=>{e.categoryMatchesMap[A.tokenTypeIdx]=!0}),Je(e.CATEGORIES,A=>{const n=t.concat(e);An(n,A)||kD(n,A)})}function ED(t){return Qe(t,"tokenTypeIdx")}function ND(t){return Qe(t,"CATEGORIES")}function q6(t){return Qe(t,"categoryMatches")}function W6(t){return Qe(t,"categoryMatchesMap")}function Q6(t){return Qe(t,"tokenTypeIdx")}const K6={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,A,n,r,s){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${A} characters.`}};var oA;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(oA||(oA={}));const al={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:K6,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(al);let SA=class{constructor(e,A=al){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(r,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const i=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${i}--> <${r}>`);const{time:o,value:a}=hD(s),c=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${i}<-- <${r}> time: ${o}ms`),this.traceInitIndent--,a}else return s()},typeof A=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=bn({},al,A);const n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let r,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===al.lineTerminatorsPattern)this.config.lineTerminatorsPattern=z6;else if(this.config.lineTerminatorCharacters===al.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(A.safeMode&&A.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),pt(e)?r={modes:{defaultMode:jA(e)},defaultMode:rl}:(s=!1,r=jA(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Z6(r,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(I6(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),r.modes=r.modes?r.modes:{},Je(r.modes,(o,a)=>{r.modes[a]=th(o,c=>gs(c))});const i=Jn(r.modes);if(Je(r.modes,(o,a)=>{this.TRACE_INIT(`Mode: <${a}> processing`,()=>{if(this.modes.push(a),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(_6(o,i))}),It(this.lexerDefinitionErrors)){ol(o);let c;this.TRACE_INIT("analyzeTokenTypes",()=>{c=b6(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:A.positionTracking,ensureOptimizations:A.ensureOptimizations,safeMode:A.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[a]=c.patternIdxToConfig,this.charCodeToPatternIdxToConfig[a]=c.charCodeToPatternIdxToConfig,this.emptyGroups=bn({},this.emptyGroups,c.emptyGroups),this.hasCustom=c.hasCustom||this.hasCustom,this.canModeBeOptimized[a]=c.canBeOptimized}})}),this.defaultMode=r.defaultMode,!It(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const a=ze(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+a)}Je(this.lexerDefinitionWarning,o=>{uD(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(_D?(this.chopInput=No,this.match=this.matchWithTest):(this.updateLastIndex=kA,this.match=this.matchWithExec),s&&(this.handleModes=kA),this.trackStartLines===!1&&(this.computeNewColumn=No),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=kA),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=xn(this.canModeBeOptimized,(a,c,l)=>(c===!1&&a.push(l),a),[]);if(A.ensureOptimizations&&!It(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{m6()}),this.TRACE_INIT("toFastProperties",()=>{fD(this)})})}tokenize(e,A=this.defaultMode){if(!It(this.lexerDefinitionErrors)){const r=ze(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+r)}return this.tokenizeInternal(e,A)}tokenizeInternal(e,A){let n,r,s,i,o,a,c,l,u,f,h,d,m,p,w;const b=e,g=b.length;let x=0,_=0;const G=this.hasCustom?0:Math.floor(e.length/10),y=new Array(G),v=[];let O=this.trackStartLines?1:void 0,B=this.trackStartLines?1:void 0;const Y=R6(this.emptyGroups),D=this.trackStartLines,N=this.config.lineTerminatorsPattern;let M=0,Z=[],R=[];const I=[],$=[];Object.freeze($);let V;function q(){return Z}function C(fe){const be=Us(fe),me=R[be];return me===void 0?$:me}const j=fe=>{if(I.length===1&&fe.tokenType.PUSH_MODE===void 0){const be=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(fe);v.push({offset:fe.startOffset,line:fe.startLine,column:fe.startColumn,length:fe.image.length,message:be})}else{I.pop();const be=Ii(I);Z=this.patternIdxToConfig[be],R=this.charCodeToPatternIdxToConfig[be],M=Z.length;const me=this.canModeBeOptimized[be]&&this.config.safeMode===!1;R&&me?V=C:V=q}};function te(fe){I.push(fe),R=this.charCodeToPatternIdxToConfig[fe],Z=this.patternIdxToConfig[fe],M=Z.length,M=Z.length;const be=this.canModeBeOptimized[fe]&&this.config.safeMode===!1;R&&be?V=C:V=q}te.call(this,A);let W;const J=this.config.recoveryEnabled;for(;x<g;){a=null;const fe=b.charCodeAt(x),be=V(fe),me=be.length;for(n=0;n<me;n++){W=be[n];const _e=W.pattern;c=null;const ke=W.short;if(ke!==!1?fe===ke&&(a=_e):W.isCustom===!0?(w=_e.exec(b,x,y,Y),w!==null?(a=w[0],w.payload!==void 0&&(c=w.payload)):a=null):(this.updateLastIndex(_e,x),a=this.match(_e,e,x)),a!==null){if(o=W.longerAlt,o!==void 0){const Oe=o.length;for(s=0;s<Oe;s++){const Ze=Z[o[s]],Fe=Ze.pattern;if(l=null,Ze.isCustom===!0?(w=Fe.exec(b,x,y,Y),w!==null?(i=w[0],w.payload!==void 0&&(l=w.payload)):i=null):(this.updateLastIndex(Fe,x),i=this.match(Fe,e,x)),i&&i.length>a.length){a=i,c=l,W=Ze;break}}}break}}if(a!==null){if(u=a.length,f=W.group,f!==void 0&&(h=W.tokenTypeIdx,d=this.createTokenInstance(a,x,h,W.tokenType,O,B,u),this.handlePayload(d,c),f===!1?_=this.addToken(y,_,d):Y[f].push(d)),e=this.chopInput(e,u),x=x+u,B=this.computeNewColumn(B,u),D===!0&&W.canLineTerminator===!0){let _e=0,ke,Oe;N.lastIndex=0;do ke=N.test(a),ke===!0&&(Oe=N.lastIndex-1,_e++);while(ke===!0);_e!==0&&(O=O+_e,B=u-Oe,this.updateTokenEndLineColumnLocation(d,f,Oe,_e,O,B,u))}this.handleModes(W,j,te,d)}else{const _e=x,ke=O,Oe=B;let Ze=J===!1;for(;Ze===!1&&x<g;)for(e=this.chopInput(e,1),x++,r=0;r<M;r++){const Fe=Z[r],P=Fe.pattern,X=Fe.short;if(X!==!1?b.charCodeAt(x)===X&&(Ze=!0):Fe.isCustom===!0?Ze=P.exec(b,x,y,Y)!==null:(this.updateLastIndex(P,x),Ze=P.exec(e)!==null),Ze===!0)break}if(m=x-_e,B=this.computeNewColumn(B,m),p=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,_e,m,ke,Oe,Ii(I)),v.push({offset:_e,line:ke,column:Oe,length:m,message:p}),J===!1)break}}return this.hasCustom||(y.length=_),{tokens:y,groups:Y,errors:v}}handleModes(e,A,n,r){if(e.pop===!0){const s=e.push;A(r),s!==void 0&&n.call(this,s)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,A){return e.substring(A)}updateLastIndex(e,A){e.lastIndex=A}updateTokenEndLineColumnLocation(e,A,n,r,s,i,o){let a,c;A!==void 0&&(a=n===o-1,c=a?-1:0,r===1&&a===!0||(e.endLine=s+c,e.endColumn=i-1+-c))}computeNewColumn(e,A){return e+A}createOffsetOnlyToken(e,A,n,r){return{image:e,startOffset:A,tokenTypeIdx:n,tokenType:r}}createStartOnlyToken(e,A,n,r,s,i){return{image:e,startOffset:A,startLine:s,startColumn:i,tokenTypeIdx:n,tokenType:r}}createFullToken(e,A,n,r,s,i,o){return{image:e,startOffset:A,endOffset:A+o-1,startLine:s,endLine:s,startColumn:i,endColumn:i+o-1,tokenTypeIdx:n,tokenType:r}}addTokenUsingPush(e,A,n){return e.push(n),A}addTokenUsingMemberAccess(e,A,n){return e[A]=n,A++,A}handlePayloadNoCustom(e,A){}handlePayloadWithCustom(e,A){A!==null&&(e.payload=A)}matchWithTest(e,A,n){return e.test(A)===!0?A.substring(n,e.lastIndex):null}matchWithExec(e,A){const n=e.exec(A);return n!==null?n[0]:null}};SA.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",SA.NA=/NOT_APPLICABLE/;function cl(t){return TD(t)?t.LABEL:t.name}function TD(t){return _n(t.LABEL)&&t.LABEL!==""}const J6="parent",OD="categories",YD="label",SD="group",CD="push_mode",PD="pop_mode",ZD="longer_alt",ID="line_breaks",RD="start_chars_hint";function nn(t){return X6(t)}function X6(t){const e=t.pattern,A={};if(A.name=t.name,gs(e)||(A.PATTERN=e),Qe(t,J6))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Qe(t,OD)&&(A.CATEGORIES=t[OD]),ol([A]),Qe(t,YD)&&(A.LABEL=t[YD]),Qe(t,SD)&&(A.GROUP=t[SD]),Qe(t,PD)&&(A.POP_MODE=t[PD]),Qe(t,CD)&&(A.PUSH_MODE=t[CD]),Qe(t,ZD)&&(A.LONGER_ALT=t[ZD]),Qe(t,ID)&&(A.LINE_BREAKS=t[ID]),Qe(t,RD)&&(A.START_CHARS_HINT=t[RD]),A}const zi=nn({name:"EOF",pattern:SA.NA});ol([zi]);function ph(t,e,A,n,r,s,i,o){return{image:e,startOffset:A,endOffset:n,startLine:r,endLine:s,startColumn:i,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function e5(t,e){return il(t,e)}const jD={buildMismatchTokenMessage({expected:t,actual:e,previous:A,ruleName:n}){return`Expecting ${TD(t)?`--> ${cl(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:A,customUserDescription:n,ruleName:r}){const s="Expecting: ",o=`
but found: '`+_r(e).image+"'";if(n)return s+n+o;{const a=xn(t,(f,h)=>f.concat(h),[]),c=ze(a,f=>`[${ze(f,h=>cl(h)).join(", ")}]`),u=`one of these possible Token sequences:
${ze(c,(f,h)=>`  ${h+1}. ${f}`).join(`
`)}`;return s+u+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:A,ruleName:n}){const r="Expecting: ",i=`
but found: '`+_r(e).image+"'";if(A)return r+A+i;{const a=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ze(t,c=>`[${ze(c,l=>cl(l)).join(",")}]`).join(" ,")}>`;return r+a+i}}};Object.freeze(jD);const t5={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},Hi={buildDuplicateFoundError(t,e){function A(l){return l instanceof Xt?l.terminalType.name:l instanceof yn?l.nonTerminalName:""}const n=t.name,r=_r(e),s=r.idx,i=Qr(r),o=A(r),a=s>0;let c=`->${i}${a?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=ze(t.prefixPath,r=>cl(r)).join(", "),A=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${A}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=ze(t.prefixPath,r=>cl(r)).join(", "),A=t.alternation.idx===0?"":t.alternation.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${A}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=Qr(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,A=ze(t.leftRecursionPath,s=>s.name),n=`${e} --> ${A.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof So?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function A5(t,e){const A=new n5(t,e);return A.resolveRefs(),A.errors}class n5 extends Ri{constructor(e,A){super(),this.nameToTopRule=e,this.errMsgProvider=A,this.errors=[]}resolveRefs(){Je(xA(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const A=this.nameToTopRule[e.nonTerminalName];if(A)e.referencedRule=A;else{const n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:rn.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class r5 extends sh{constructor(e,A){super(),this.topProd=e,this.path=A,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=jA(this.path.ruleStack).reverse(),this.occurrenceStack=jA(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,A=[]){this.found||super.walk(e,A)}walkProdRef(e,A,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const r=A.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}updateExpectedNext(){It(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class s5 extends r5{constructor(e,A){super(e,A),this.path=A,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,A,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const r=A.concat(n),s=new Gn({definition:r});this.possibleTokTypes=Al(s),this.found=!0}}}class gh extends sh{constructor(e,A){super(),this.topRule=e,this.occurrence=A,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class i5 extends gh{walkMany(e,A,n){if(e.idx===this.occurrence){const r=_r(A.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Xt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkMany(e,A,n)}}class zD extends gh{walkManySep(e,A,n){if(e.idx===this.occurrence){const r=_r(A.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Xt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkManySep(e,A,n)}}class o5 extends gh{walkAtLeastOne(e,A,n){if(e.idx===this.occurrence){const r=_r(A.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Xt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOne(e,A,n)}}class HD extends gh{walkAtLeastOneSep(e,A,n){if(e.idx===this.occurrence){const r=_r(A.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Xt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOneSep(e,A,n)}}function Ng(t,e,A=[]){A=jA(A);let n=[],r=0;function s(o){return o.concat(zA(t,r+1))}function i(o){const a=Ng(s(o),e,A);return n.concat(a)}for(;A.length<e&&r<t.length;){const o=t[r];if(o instanceof Gn)return i(o.definition);if(o instanceof yn)return i(o.definition);if(o instanceof Mn)n=i(o.definition);else if(o instanceof qr){const a=o.definition.concat([new EA({definition:o.definition})]);return i(a)}else if(o instanceof Wr){const a=[new Gn({definition:o.definition}),new EA({definition:[new Xt({terminalType:o.separator})].concat(o.definition)})];return i(a)}else if(o instanceof yr){const a=o.definition.concat([new EA({definition:[new Xt({terminalType:o.separator})].concat(o.definition)})]);n=i(a)}else if(o instanceof EA){const a=o.definition.concat([new EA({definition:o.definition})]);n=i(a)}else{if(o instanceof Gr)return Je(o.definition,a=>{It(a.definition)===!1&&(n=i(a.definition))}),n;if(o instanceof Xt)A.push(o.terminalType);else throw Error("non exhaustive match")}r++}return n.push({partialPath:A,suffixDef:zA(t,r)}),n}function LD(t,e,A,n){const r="EXIT_NONE_TERMINAL",s=[r],i="EXIT_ALTERNATIVE";let o=!1;const a=e.length,c=a-n-1,l=[],u=[];for(u.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!It(u);){const f=u.pop();if(f===i){o&&Ii(u).idx<=c&&u.pop();continue}const h=f.def,d=f.idx,m=f.ruleStack,p=f.occurrenceStack;if(It(h))continue;const w=h[0];if(w===r){const b={idx:d,def:zA(h),ruleStack:tl(m),occurrenceStack:tl(p)};u.push(b)}else if(w instanceof Xt)if(d<a-1){const b=d+1,g=e[b];if(A(g,w.terminalType)){const x={idx:b,def:zA(h),ruleStack:m,occurrenceStack:p};u.push(x)}}else if(d===a-1)l.push({nextTokenType:w.terminalType,nextTokenOccurrence:w.idx,ruleStack:m,occurrenceStack:p}),o=!0;else throw Error("non exhaustive match");else if(w instanceof yn){const b=jA(m);b.push(w.nonTerminalName);const g=jA(p);g.push(w.idx);const x={idx:d,def:w.definition.concat(s,zA(h)),ruleStack:b,occurrenceStack:g};u.push(x)}else if(w instanceof Mn){const b={idx:d,def:zA(h),ruleStack:m,occurrenceStack:p};u.push(b),u.push(i);const g={idx:d,def:w.definition.concat(zA(h)),ruleStack:m,occurrenceStack:p};u.push(g)}else if(w instanceof qr){const b=new EA({definition:w.definition,idx:w.idx}),g=w.definition.concat([b],zA(h)),x={idx:d,def:g,ruleStack:m,occurrenceStack:p};u.push(x)}else if(w instanceof Wr){const b=new Xt({terminalType:w.separator}),g=new EA({definition:[b].concat(w.definition),idx:w.idx}),x=w.definition.concat([g],zA(h)),_={idx:d,def:x,ruleStack:m,occurrenceStack:p};u.push(_)}else if(w instanceof yr){const b={idx:d,def:zA(h),ruleStack:m,occurrenceStack:p};u.push(b),u.push(i);const g=new Xt({terminalType:w.separator}),x=new EA({definition:[g].concat(w.definition),idx:w.idx}),_=w.definition.concat([x],zA(h)),G={idx:d,def:_,ruleStack:m,occurrenceStack:p};u.push(G)}else if(w instanceof EA){const b={idx:d,def:zA(h),ruleStack:m,occurrenceStack:p};u.push(b),u.push(i);const g=new EA({definition:w.definition,idx:w.idx}),x=w.definition.concat([g],zA(h)),_={idx:d,def:x,ruleStack:m,occurrenceStack:p};u.push(_)}else if(w instanceof Gr)for(let b=w.definition.length-1;b>=0;b--){const g=w.definition[b],x={idx:d,def:g.definition.concat(zA(h)),ruleStack:m,occurrenceStack:p};u.push(x),u.push(i)}else if(w instanceof Gn)u.push({idx:d,def:w.definition.concat(zA(h)),ruleStack:m,occurrenceStack:p});else if(w instanceof So)u.push(a5(w,d,m,p));else throw Error("non exhaustive match")}return l}function a5(t,e,A,n){const r=jA(A);r.push(t.name);const s=jA(n);return s.push(1),{idx:e,def:t.definition,ruleStack:r,occurrenceStack:s}}var aA;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(aA||(aA={}));function UD(t){if(t instanceof Mn||t==="Option")return aA.OPTION;if(t instanceof EA||t==="Repetition")return aA.REPETITION;if(t instanceof qr||t==="RepetitionMandatory")return aA.REPETITION_MANDATORY;if(t instanceof Wr||t==="RepetitionMandatoryWithSeparator")return aA.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof yr||t==="RepetitionWithSeparator")return aA.REPETITION_WITH_SEPARATOR;if(t instanceof Gr||t==="Alternation")return aA.ALTERNATION;throw Error("non exhaustive match")}function c5(t,e,A,n,r,s){const i=Og(t,e,A),o=qD(i)?mh:il;return s(i,n,o,r)}function l5(t,e,A,n,r,s){const i=Yg(t,e,r,A),o=qD(i)?mh:il;return s(i[0],o,n)}function u5(t,e,A,n){const r=t.length,s=br(t,i=>br(i,o=>o.length===1));if(e)return function(i){const o=ze(i,a=>a.GATE);for(let a=0;a<r;a++){const c=t[a],l=c.length,u=o[a];if(!(u!==void 0&&u.call(this)===!1))e:for(let f=0;f<l;f++){const h=c[f],d=h.length;for(let m=0;m<d;m++){const p=this.LA(m+1);if(A(p,h[m])===!1)continue e}return a}}};if(s&&!n){const i=ze(t,a=>Pn(a)),o=xn(i,(a,c,l)=>(Je(c,u=>{Qe(a,u.tokenTypeIdx)||(a[u.tokenTypeIdx]=l),Je(u.categoryMatches,f=>{Qe(a,f)||(a[f]=l)})}),a),{});return function(){const a=this.LA(1);return o[a.tokenTypeIdx]}}else return function(){for(let i=0;i<r;i++){const o=t[i],a=o.length;e:for(let c=0;c<a;c++){const l=o[c],u=l.length;for(let f=0;f<u;f++){const h=this.LA(f+1);if(A(h,l[f])===!1)continue e}return i}}}}function h5(t,e,A){const n=br(t,s=>s.length===1),r=t.length;if(n&&!A){const s=Pn(t);if(s.length===1&&It(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const i=xn(s,(o,a,c)=>(o[a.tokenTypeIdx]=!0,Je(a.categoryMatches,l=>{o[l]=!0}),o),[]);return function(){const o=this.LA(1);return i[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<r;s++){const i=t[s],o=i.length;for(let a=0;a<o;a++){const c=this.LA(a+1);if(e(c,i[a])===!1)continue e}return!0}return!1}}class f5 extends sh{constructor(e,A,n){super(),this.topProd=e,this.targetOccurrence=A,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,A,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===A?(this.restDef=n.concat(r),!0):!1}walkOption(e,A,n){this.checkIsTarget(e,aA.OPTION,A,n)||super.walkOption(e,A,n)}walkAtLeastOne(e,A,n){this.checkIsTarget(e,aA.REPETITION_MANDATORY,A,n)||super.walkOption(e,A,n)}walkAtLeastOneSep(e,A,n){this.checkIsTarget(e,aA.REPETITION_MANDATORY_WITH_SEPARATOR,A,n)||super.walkOption(e,A,n)}walkMany(e,A,n){this.checkIsTarget(e,aA.REPETITION,A,n)||super.walkOption(e,A,n)}walkManySep(e,A,n){this.checkIsTarget(e,aA.REPETITION_WITH_SEPARATOR,A,n)||super.walkOption(e,A,n)}}class FD extends Ri{constructor(e,A,n){super(),this.targetOccurrence=e,this.targetProdType=A,this.targetRef=n,this.result=[]}checkIsTarget(e,A){e.idx===this.targetOccurrence&&this.targetProdType===A&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,aA.OPTION)}visitRepetition(e){this.checkIsTarget(e,aA.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,aA.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,aA.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,aA.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,aA.ALTERNATION)}}function $D(t){const e=new Array(t);for(let A=0;A<t;A++)e[A]=[];return e}function Tg(t){let e=[""];for(let A=0;A<t.length;A++){const n=t[A],r=[];for(let s=0;s<e.length;s++){const i=e[s];r.push(i+"_"+n.tokenTypeIdx);for(let o=0;o<n.categoryMatches.length;o++){const a="_"+n.categoryMatches[o];r.push(i+a)}}e=r}return e}function d5(t,e,A){for(let n=0;n<t.length;n++){if(n===A)continue;const r=t[n];for(let s=0;s<e.length;s++){const i=e[s];if(r[i]===!0)return!1}}return!0}function VD(t,e){const A=ze(t,i=>Ng([i],1)),n=$D(A.length),r=ze(A,i=>{const o={};return Je(i,a=>{const c=Tg(a.partialPath);Je(c,l=>{o[l]=!0})}),o});let s=A;for(let i=1;i<=e;i++){const o=s;s=$D(o.length);for(let a=0;a<o.length;a++){const c=o[a];for(let l=0;l<c.length;l++){const u=c[l].partialPath,f=c[l].suffixDef,h=Tg(u);if(d5(r,h,a)||It(f)||u.length===e){const m=n[a];if(Sg(m,u)===!1){m.push(u);for(let p=0;p<h.length;p++){const w=h[p];r[a][w]=!0}}}else{const m=Ng(f,i+1,u);s[a]=s[a].concat(m),Je(m,p=>{const w=Tg(p.partialPath);Je(w,b=>{r[a][b]=!0})})}}}}return n}function Og(t,e,A,n){const r=new FD(t,aA.ALTERNATION,n);return e.accept(r),VD(r.result,A)}function Yg(t,e,A,n){const r=new FD(t,A);e.accept(r);const s=r.result,o=new f5(e,t,A).startWalking(),a=new Gn({definition:s}),c=new Gn({definition:o});return VD([a,c],n)}function Sg(t,e){e:for(let A=0;A<t.length;A++){const n=t[A];if(n.length===e.length){for(let r=0;r<n.length;r++){const s=e[r],i=n[r];if((s===i||i.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function m5(t,e){return t.length<e.length&&br(t,(A,n)=>{const r=e[n];return A===r||r.categoryMatchesMap[A.tokenTypeIdx]})}function qD(t){return br(t,e=>br(e,A=>br(A,n=>It(n.categoryMatches))))}function p5(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return ze(e,A=>Object.assign({type:rn.CUSTOM_LOOKAHEAD_VALIDATION},A))}function g5(t,e,A,n){const r=tr(t,a=>w5(a,A)),s=N5(t,e,A),i=tr(t,a=>D5(a,A)),o=tr(t,a=>x5(a,t,n,A));return r.concat(s,i,o)}function w5(t,e){const A=new _5;t.accept(A);const n=A.allProductions,r=aD(n,b5),s=xr(r,o=>o.length>1);return ze(xA(s),o=>{const a=_r(o),c=e.buildDuplicateFoundError(t,o),l=Qr(a),u={message:c,type:rn.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:l,occurrence:a.idx},f=WD(a);return f&&(u.parameter=f),u})}function b5(t){return`${Qr(t)}_#_${t.idx}_#_${WD(t)}`}function WD(t){return t instanceof Xt?t.terminalType.name:t instanceof yn?t.nonTerminalName:""}class _5 extends Ri{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function x5(t,e,A,n){const r=[];if(xn(e,(i,o)=>o.name===t.name?i+1:i,0)>1){const i=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:A});r.push({message:i,type:rn.DUPLICATE_RULE_NAME,ruleName:t.name})}return r}function y5(t,e,A){const n=[];let r;return An(e,t)||(r=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${A}<-as it is not defined in any of the super grammars `,n.push({message:r,type:rn.INVALID_RULE_OVERRIDE,ruleName:t})),n}function QD(t,e,A,n=[]){const r=[],s=wh(e.definition);if(It(s))return[];{const i=t.name;An(s,t)&&r.push({message:A.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:rn.LEFT_RECURSION,ruleName:i});const a=eh(s,n.concat([t])),c=tr(a,l=>{const u=jA(n);return u.push(l),QD(t,l,A,u)});return r.concat(c)}}function wh(t){let e=[];if(It(t))return e;const A=_r(t);if(A instanceof yn)e.push(A.referencedRule);else if(A instanceof Gn||A instanceof Mn||A instanceof qr||A instanceof Wr||A instanceof yr||A instanceof EA)e=e.concat(wh(A.definition));else if(A instanceof Gr)e=Pn(ze(A.definition,s=>wh(s.definition)));else if(!(A instanceof Xt))throw Error("non exhaustive match");const n=rh(A),r=t.length>1;if(n&&r){const s=zA(t);return e.concat(wh(s))}else return e}class Cg extends Ri{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function G5(t,e){const A=new Cg;t.accept(A);const n=A.alternations;return tr(n,s=>{const i=tl(s.definition);return tr(i,(o,a)=>{const c=LD([o],[],il,1);return It(c)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:a}),type:rn.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:a+1}]:[]})})}function M5(t,e,A){const n=new Cg;t.accept(n);let r=n.alternations;return r=th(r,i=>i.ignoreAmbiguities===!0),tr(r,i=>{const o=i.idx,a=i.maxLookahead||e,c=Og(o,t,a,i),l=k5(c,i,t,A),u=E5(c,i,t,A);return l.concat(u)})}class v5 extends Ri{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function D5(t,e){const A=new Cg;t.accept(A);const n=A.alternations;return tr(n,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:rn.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function B5(t,e,A){const n=[];return Je(t,r=>{const s=new v5;r.accept(s);const i=s.allProductions;Je(i,o=>{const a=UD(o),c=o.maxLookahead||e,l=o.idx,f=Yg(l,r,a,c)[0];if(It(Pn(f))){const h=A.buildEmptyRepetitionError({topLevelRule:r,repetition:o});n.push({message:h,type:rn.NO_NON_EMPTY_LOOKAHEAD,ruleName:r.name})}})}),n}function k5(t,e,A,n){const r=[],s=xn(t,(o,a,c)=>(e.definition[c].ignoreAmbiguities===!0||Je(a,l=>{const u=[c];Je(t,(f,h)=>{c!==h&&Sg(f,l)&&e.definition[h].ignoreAmbiguities!==!0&&u.push(h)}),u.length>1&&!Sg(r,l)&&(r.push(l),o.push({alts:u,path:l}))}),o),[]);return ze(s,o=>{const a=ze(o.alts,l=>l+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:A,alternation:e,ambiguityIndices:a,prefixPath:o.path}),type:rn.AMBIGUOUS_ALTS,ruleName:A.name,occurrence:e.idx,alternatives:o.alts}})}function E5(t,e,A,n){const r=xn(t,(i,o,a)=>{const c=ze(o,l=>({idx:a,path:l}));return i.concat(c)},[]);return el(tr(r,i=>{if(e.definition[i.idx].ignoreAmbiguities===!0)return[];const a=i.idx,c=i.path,l=er(r,f=>e.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<a&&m5(f.path,c));return ze(l,f=>{const h=[f.idx+1,a+1],d=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:A,alternation:e,ambiguityIndices:h,prefixPath:f.path}),type:rn.AMBIGUOUS_PREFIX_ALTS,ruleName:A.name,occurrence:d,alternatives:h}})}))}function N5(t,e,A){const n=[],r=ze(e,s=>s.name);return Je(t,s=>{const i=s.name;if(An(r,i)){const o=A.buildNamespaceConflictError(s);n.push({message:o,type:rn.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:i})}}),n}function T5(t){const e=xg(t,{errMsgProvider:t5}),A={};return Je(t.rules,n=>{A[n.name]=n}),A5(A,e.errMsgProvider)}function O5(t){return t=xg(t,{errMsgProvider:Hi}),g5(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const KD="MismatchedTokenException",JD="NoViableAltException",XD="EarlyExitException",eB="NotAllInputParsedException",tB=[KD,JD,XD,eB];Object.freeze(tB);function bh(t){return An(tB,t.name)}class _h extends Error{constructor(e,A){super(e),this.token=A,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class AB extends _h{constructor(e,A,n){super(e,A),this.previousToken=n,this.name=KD}}class Y5 extends _h{constructor(e,A,n){super(e,A),this.previousToken=n,this.name=JD}}class S5 extends _h{constructor(e,A){super(e,A),this.name=eB}}class C5 extends _h{constructor(e,A,n){super(e,A),this.previousToken=n,this.name=XD}}const Pg={},nB="InRuleRecoveryException";class P5 extends Error{constructor(e){super(e),this.name=nB}}class Z5{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Qe(e,"recoveryEnabled")?e.recoveryEnabled:ws.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=I5)}getTokenToInsert(e){const A=ph(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return A.isInsertedInRecovery=!0,A}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,A,n,r){const s=this.findReSyncTokenType(),i=this.exportLexerState(),o=[];let a=!1;const c=this.LA(1);let l=this.LA(1);const u=()=>{const f=this.LA(0),h=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:c,previous:f,ruleName:this.getCurrRuleFullName()}),d=new AB(h,c,this.LA(0));d.resyncedTokens=tl(o),this.SAVE_ERROR(d)};for(;!a;)if(this.tokenMatcher(l,r)){u();return}else if(n.call(this)){u(),e.apply(this,A);return}else this.tokenMatcher(l,s)?a=!0:(l=this.SKIP_TOKEN(),this.addToResyncTokens(l,o));this.importLexerState(i)}shouldInRepetitionRecoveryBeTried(e,A,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,A)))}getFollowsForInRuleRecovery(e,A){const n=this.getCurrentGrammarPath(e,A);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,A){if(this.canRecoverWithSingleTokenInsertion(e,A))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new P5("sad sad panda")}canPerformInRuleRecovery(e,A){return this.canRecoverWithSingleTokenInsertion(e,A)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,A){if(!this.canTokenTypeBeInsertedInRecovery(e)||It(A))return!1;const n=this.LA(1);return Yo(A,s=>this.tokenMatcher(n,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const A=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(A);return An(n,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let A=this.LA(1),n=2;for(;;){const r=Yo(e,s=>e5(A,s));if(r!==void 0)return r;A=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Pg;const e=this.getLastExplicitRuleShortName(),A=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:A,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,A=this.RULE_OCCURRENCE_STACK;return ze(e,(n,r)=>r===0?Pg:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:A[r],inRule:this.shortRuleNameToFullName(e[r-1])})}flattenFollowSet(){const e=ze(this.buildFullFollowKeyStack(),A=>this.getFollowSetFromFollowKey(A));return Pn(e)}getFollowSetFromFollowKey(e){if(e===Pg)return[zi];const A=e.ruleName+e.idxInCallingRule+mD+e.inRule;return this.resyncFollows[A]}addToResyncTokens(e,A){return this.tokenMatcher(e,zi)||A.push(e),A}reSyncTo(e){const A=[];let n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,A);return tl(A)}attemptInRepetitionRecovery(e,A,n,r,s,i,o){}getCurrentGrammarPath(e,A){const n=this.getHumanReadableRuleStack(),r=jA(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:r,lastTok:e,lastTokOccurrence:A}}getHumanReadableRuleStack(){return ze(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function I5(t,e,A,n,r,s,i){const o=this.getKeyForAutomaticLookahead(n,r);let a=this.firstAfterRepMap[o];if(a===void 0){const f=this.getCurrRuleFullName(),h=this.getGAstProductions()[f];a=new s(h,r).startWalking(),this.firstAfterRepMap[o]=a}let c=a.token,l=a.occurrence;const u=a.isEndOfRule;this.RULE_STACK.length===1&&u&&c===void 0&&(c=zi,l=1),!(c===void 0||l===void 0)&&this.shouldInRepetitionRecoveryBeTried(c,l,i)&&this.tryInRepetitionRecovery(t,e,A,c)}const R5=4,Fs=8,rB=1<<Fs,sB=2<<Fs,Zg=3<<Fs,Ig=4<<Fs,Rg=5<<Fs,xh=6<<Fs;function jg(t,e,A){return A|e|t}class j5{constructor(e){var A;this.maxLookahead=(A=e?.maxLookahead)!==null&&A!==void 0?A:ws.maxLookahead}validate(e){const A=this.validateNoLeftRecursion(e.rules);if(It(A)){const n=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...A,...n,...r,...s]}return A}validateNoLeftRecursion(e){return tr(e,A=>QD(A,A,Hi))}validateEmptyOrAlternatives(e){return tr(e,A=>G5(A,Hi))}validateAmbiguousAlternationAlternatives(e,A){return tr(e,n=>M5(n,A,Hi))}validateSomeNonEmptyLookaheadPath(e,A){return B5(e,A,Hi)}buildLookaheadForAlternation(e){return c5(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,u5)}buildLookaheadForOptional(e){return l5(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,UD(e.prodType),h5)}}class z5{initLooksAhead(e){this.dynamicTokensEnabled=Qe(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:ws.dynamicTokensEnabled,this.maxLookahead=Qe(e,"maxLookahead")?e.maxLookahead:ws.maxLookahead,this.lookaheadStrategy=Qe(e,"lookaheadStrategy")?e.lookaheadStrategy:new j5({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){Je(e,A=>{this.TRACE_INIT(`${A.name} Rule Lookahead`,()=>{const{alternation:n,repetition:r,option:s,repetitionMandatory:i,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:a}=L5(A);Je(n,c=>{const l=c.idx===0?"":c.idx;this.TRACE_INIT(`${Qr(c)}${l}`,()=>{const u=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:c.idx,rule:A,maxLookahead:c.maxLookahead||this.maxLookahead,hasPredicates:c.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=jg(this.fullRuleNameToShort[A.name],rB,c.idx);this.setLaFuncCache(f,u)})}),Je(r,c=>{this.computeLookaheadFunc(A,c.idx,Zg,"Repetition",c.maxLookahead,Qr(c))}),Je(s,c=>{this.computeLookaheadFunc(A,c.idx,sB,"Option",c.maxLookahead,Qr(c))}),Je(i,c=>{this.computeLookaheadFunc(A,c.idx,Ig,"RepetitionMandatory",c.maxLookahead,Qr(c))}),Je(o,c=>{this.computeLookaheadFunc(A,c.idx,xh,"RepetitionMandatoryWithSeparator",c.maxLookahead,Qr(c))}),Je(a,c=>{this.computeLookaheadFunc(A,c.idx,Rg,"RepetitionWithSeparator",c.maxLookahead,Qr(c))})})})}computeLookaheadFunc(e,A,n,r,s,i){this.TRACE_INIT(`${i}${A===0?"":A}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:A,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),a=jg(this.fullRuleNameToShort[e.name],n,A);this.setLaFuncCache(a,o)})}getKeyForAutomaticLookahead(e,A){const n=this.getLastExplicitRuleShortName();return jg(n,e,A)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,A){this.lookAheadFuncsCache.set(e,A)}}class H5 extends Ri{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const yh=new H5;function L5(t){yh.reset(),t.accept(yh);const e=yh.dslMethods;return yh.reset(),e}function iB(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function oB(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function U5(t,e,A){t.children[A]===void 0?t.children[A]=[e]:t.children[A].push(e)}function F5(t,e,A){t.children[e]===void 0?t.children[e]=[A]:t.children[e].push(A)}const $5="name";function aB(t,e){Object.defineProperty(t,$5,{enumerable:!1,configurable:!0,writable:!1,value:e})}function V5(t,e){const A=Jn(t),n=A.length;for(let r=0;r<n;r++){const s=A[r],i=t[s],o=i.length;for(let a=0;a<o;a++){const c=i[a];c.tokenTypeIdx===void 0&&this[c.name](c.children,e)}}}function q5(t,e){const A=function(){};aB(A,t+"BaseSemantics");const n={visit:function(r,s){if(pt(r)&&(r=r[0]),!gs(r))return this[r.name](r.children,s)},validateVisitor:function(){const r=Q5(this,e);if(!It(r)){const s=ze(r,i=>i.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return A.prototype=n,A.prototype.constructor=A,A._RULE_NAMES=e,A}function W5(t,e,A){const n=function(){};aB(n,t+"BaseSemanticsWithDefaults");const r=Object.create(A.prototype);return Je(e,s=>{r[s]=V5}),n.prototype=r,n.prototype.constructor=n,n}var zg;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(zg||(zg={}));function Q5(t,e){return K5(t,e)}function K5(t,e){const A=er(e,r=>fs(t[r])===!1),n=ze(A,r=>({msg:`Missing visitor method: <${r}> on ${t.constructor.name} CST Visitor.`,type:zg.MISSING_METHOD,methodName:r}));return el(n)}class J5{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Qe(e,"nodeLocationTracking")?e.nodeLocationTracking:ws.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=kA,this.cstFinallyStateUpdate=kA,this.cstPostTerminal=kA,this.cstPostNonTerminal=kA,this.cstPostRule=kA;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=oB,this.setNodeLocationFromNode=oB,this.cstPostRule=kA,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=kA,this.setNodeLocationFromNode=kA,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=iB,this.setNodeLocationFromNode=iB,this.cstPostRule=kA,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=kA,this.setNodeLocationFromNode=kA,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=kA,this.setNodeLocationFromNode=kA,this.cstPostRule=kA,this.setInitialNodeLocation=kA;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const A=this.LA(1);e.location={startOffset:A.startOffset,startLine:A.startLine,startColumn:A.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const A={name:e,children:Object.create(null)};this.setInitialNodeLocation(A),this.CST_STACK.push(A)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const A=this.LA(0),n=e.location;n.startOffset<=A.startOffset?(n.endOffset=A.endOffset,n.endLine=A.endLine,n.endColumn=A.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){const A=this.LA(0),n=e.location;n.startOffset<=A.startOffset?n.endOffset=A.endOffset:n.startOffset=NaN}cstPostTerminal(e,A){const n=this.CST_STACK[this.CST_STACK.length-1];U5(n,A,e),this.setNodeLocationFromToken(n.location,A)}cstPostNonTerminal(e,A){const n=this.CST_STACK[this.CST_STACK.length-1];F5(n,A,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(gs(this.baseCstVisitorConstructor)){const e=q5(this.className,Jn(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(gs(this.baseCstVisitorWithDefaultsConstructor)){const e=W5(this.className,Jn(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class X5{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):vh}LA(e){const A=this.currIdx+e;return A<0||this.tokVectorLength<=A?vh:this.tokVector[A]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class eU{ACTION(e){return e.call(this)}consume(e,A,n){return this.consumeInternal(A,e,n)}subrule(e,A,n){return this.subruleInternal(A,e,n)}option(e,A){return this.optionInternal(A,e)}or(e,A){return this.orInternal(A,e)}many(e,A){return this.manyInternal(e,A)}atLeastOne(e,A){return this.atLeastOneInternal(e,A)}CONSUME(e,A){return this.consumeInternal(e,0,A)}CONSUME1(e,A){return this.consumeInternal(e,1,A)}CONSUME2(e,A){return this.consumeInternal(e,2,A)}CONSUME3(e,A){return this.consumeInternal(e,3,A)}CONSUME4(e,A){return this.consumeInternal(e,4,A)}CONSUME5(e,A){return this.consumeInternal(e,5,A)}CONSUME6(e,A){return this.consumeInternal(e,6,A)}CONSUME7(e,A){return this.consumeInternal(e,7,A)}CONSUME8(e,A){return this.consumeInternal(e,8,A)}CONSUME9(e,A){return this.consumeInternal(e,9,A)}SUBRULE(e,A){return this.subruleInternal(e,0,A)}SUBRULE1(e,A){return this.subruleInternal(e,1,A)}SUBRULE2(e,A){return this.subruleInternal(e,2,A)}SUBRULE3(e,A){return this.subruleInternal(e,3,A)}SUBRULE4(e,A){return this.subruleInternal(e,4,A)}SUBRULE5(e,A){return this.subruleInternal(e,5,A)}SUBRULE6(e,A){return this.subruleInternal(e,6,A)}SUBRULE7(e,A){return this.subruleInternal(e,7,A)}SUBRULE8(e,A){return this.subruleInternal(e,8,A)}SUBRULE9(e,A){return this.subruleInternal(e,9,A)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,A,n=Dh){if(An(this.definedRulesNames,e)){const i={message:Hi.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:rn.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(i)}this.definedRulesNames.push(e);const r=this.defineRule(e,A,n);return this[e]=r,r}OVERRIDE_RULE(e,A,n=Dh){const r=y5(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const s=this.defineRule(e,A,n);return this[e]=s,s}BACKTRACK(e,A){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return e.apply(this,A),!0}catch(r){if(bh(r))return!1;throw r}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return t6(xA(this.gastProductionsCache))}}class tU{initRecognizerEngine(e,A){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=mh,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Qe(A,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(pt(e)){if(It(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(pt(e))this.tokensMap=xn(e,(s,i)=>(s[i.name]=i,s),{});else if(Qe(e,"modes")&&br(Pn(xA(e.modes)),Q6)){const s=Pn(xA(e.modes)),i=Ah(s);this.tokensMap=xn(i,(o,a)=>(o[a.name]=a,o),{})}else if(Kn(e))this.tokensMap=jA(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=zi;const n=Qe(e,"modes")?Pn(xA(e.modes)):xA(e),r=br(n,s=>It(s.categoryMatches));this.tokenMatcher=r?mh:il,ol(xA(this.tokensMap))}defineRule(e,A,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=Qe(n,"resyncEnabled")?n.resyncEnabled:Dh.resyncEnabled,s=Qe(n,"recoveryValueFunc")?n.recoveryValueFunc:Dh.recoveryValueFunc,i=this.ruleShortNameIdx<<R5+Fs;this.ruleShortNameIdx++,this.shortRuleNameToFull[i]=e,this.fullRuleNameToShort[e]=i;let o;return this.outputCst===!0?o=function(...l){try{this.ruleInvocationStateUpdate(i,e,this.subruleIdx),A.apply(this,l);const u=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(u),u}catch(u){return this.invokeRuleCatch(u,r,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...l){try{return this.ruleInvocationStateUpdate(i,e,this.subruleIdx),A.apply(this,l)}catch(u){return this.invokeRuleCatch(u,r,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:A})}invokeRuleCatch(e,A,n){const r=this.RULE_STACK.length===1,s=A&&!this.isBackTracking()&&this.recoveryEnabled;if(bh(e)){const i=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(i.resyncedTokens=this.reSyncTo(o),this.outputCst){const a=this.CST_STACK[this.CST_STACK.length-1];return a.recoveredNode=!0,a}else return n(e);else{if(this.outputCst){const a=this.CST_STACK[this.CST_STACK.length-1];a.recoveredNode=!0,i.partialCstResult=a}throw i}}else{if(r)return this.moveToTerminatedState(),n(e);throw i}}else throw e}optionInternal(e,A){const n=this.getKeyForAutomaticLookahead(sB,A);return this.optionInternalLogic(e,A,n)}optionInternalLogic(e,A,n){let r=this.getLaFuncFromCache(n),s;if(typeof e!="function"){s=e.DEF;const i=e.GATE;if(i!==void 0){const o=r;r=()=>i.call(this)&&o.call(this)}}else s=e;if(r.call(this)===!0)return s.call(this)}atLeastOneInternal(e,A){const n=this.getKeyForAutomaticLookahead(Ig,e);return this.atLeastOneInternalLogic(e,A,n)}atLeastOneInternalLogic(e,A,n){let r=this.getLaFuncFromCache(n),s;if(typeof A!="function"){s=A.DEF;const i=A.GATE;if(i!==void 0){const o=r;r=()=>i.call(this)&&o.call(this)}}else s=A;if(r.call(this)===!0){let i=this.doSingleRepetition(s);for(;r.call(this)===!0&&i===!0;)i=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,aA.REPETITION_MANDATORY,A.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,A],r,Ig,e,o5)}atLeastOneSepFirstInternal(e,A){const n=this.getKeyForAutomaticLookahead(xh,e);this.atLeastOneSepFirstInternalLogic(e,A,n)}atLeastOneSepFirstInternalLogic(e,A,n){const r=A.DEF,s=A.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){r.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,r,HD],o,xh,e,HD)}else throw this.raiseEarlyExitException(e,aA.REPETITION_MANDATORY_WITH_SEPARATOR,A.ERR_MSG)}manyInternal(e,A){const n=this.getKeyForAutomaticLookahead(Zg,e);return this.manyInternalLogic(e,A,n)}manyInternalLogic(e,A,n){let r=this.getLaFuncFromCache(n),s;if(typeof A!="function"){s=A.DEF;const o=A.GATE;if(o!==void 0){const a=r;r=()=>o.call(this)&&a.call(this)}}else s=A;let i=!0;for(;r.call(this)===!0&&i===!0;)i=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,A],r,Zg,e,i5,i)}manySepFirstInternal(e,A){const n=this.getKeyForAutomaticLookahead(Rg,e);this.manySepFirstInternalLogic(e,A,n)}manySepFirstInternalLogic(e,A,n){const r=A.DEF,s=A.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){r.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,r,zD],o,Rg,e,zD)}}repetitionSepSecondInternal(e,A,n,r,s){for(;n();)this.CONSUME(A),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,A,n,r,s],n,xh,e,s)}doSingleRepetition(e){const A=this.getLexerPosition();return e.call(this),this.getLexerPosition()>A}orInternal(e,A){const n=this.getKeyForAutomaticLookahead(rB,A),r=pt(e)?e:e.DEF,i=this.getLaFuncFromCache(n).call(this,r);if(i!==void 0)return r[i].ALT.call(this);this.raiseNoAltException(A,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),A=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new S5(A,e))}}subruleInternal(e,A,n){let r;try{const s=n!==void 0?n.ARGS:void 0;return this.subruleIdx=A,r=e.apply(this,s),this.cstPostNonTerminal(r,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),r}catch(s){throw this.subruleInternalError(s,n,e.ruleName)}}subruleInternalError(e,A,n){throw bh(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,A!==void 0&&A.LABEL!==void 0?A.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,A,n){let r;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),r=s):this.consumeInternalError(e,s,n)}catch(s){r=this.consumeInternalRecovery(e,A,s)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,r),r}consumeInternalError(e,A,n){let r;const s=this.LA(0);throw n!==void 0&&n.ERR_MSG?r=n.ERR_MSG:r=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:A,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new AB(r,A,s))}consumeInternalRecovery(e,A,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){const r=this.getFollowsForInRuleRecovery(e,A);try{return this.tryInRuleRecovery(e,r)}catch(s){throw s.name===nB?n:s}}else throw n}saveRecogState(){const e=this.errors,A=jA(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:A,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,A,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(A)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),zi)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class AU{initErrorHandler(e){this._errors=[],this.errorMessageProvider=Qe(e,"errorMessageProvider")?e.errorMessageProvider:ws.errorMessageProvider}SAVE_ERROR(e){if(bh(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:jA(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return jA(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,A,n){const r=this.getCurrRuleFullName(),s=this.getGAstProductions()[r],o=Yg(e,s,A,this.maxLookahead)[0],a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:a,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new C5(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,A){const n=this.getCurrRuleFullName(),r=this.getGAstProductions()[n],s=Og(e,r,this.maxLookahead),i=[];for(let c=1;c<=this.maxLookahead;c++)i.push(this.LA(c));const o=this.LA(0),a=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:i,previous:o,customUserDescription:A,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Y5(a,this.LA(1),o))}}class nU{initContentAssist(){}computeContentAssist(e,A){const n=this.gastProductionsCache[e];if(gs(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return LD([n],A,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const A=_r(e.ruleStack),r=this.getGAstProductions()[A];return new s5(r,e).startWalking()}}const Gh={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Gh);const cB=!0,lB=Math.pow(2,Fs)-1,uB=nn({name:"RECORDING_PHASE_TOKEN",pattern:SA.NA});ol([uB]);const hB=ph(uB,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(hB);const rU={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class sU{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const A=e>0?e:"";this[`CONSUME${A}`]=function(n,r){return this.consumeInternalRecord(n,e,r)},this[`SUBRULE${A}`]=function(n,r){return this.subruleInternalRecord(n,e,r)},this[`OPTION${A}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${A}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${A}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${A}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${A}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${A}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,A,n){return this.consumeInternalRecord(A,e,n)},this.subrule=function(e,A,n){return this.subruleInternalRecord(A,e,n)},this.option=function(e,A){return this.optionInternalRecord(A,e)},this.or=function(e,A){return this.orInternalRecord(A,e)},this.many=function(e,A){this.manyInternalRecord(e,A)},this.atLeastOne=function(e,A){this.atLeastOneInternalRecord(e,A)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let A=0;A<10;A++){const n=A>0?A:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,A){return()=>!0}LA_RECORD(e){return vh}topLevelRuleRecord(e,A){try{const n=new So({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),A.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,A){return ll.call(this,Mn,e,A)}atLeastOneInternalRecord(e,A){ll.call(this,qr,A,e)}atLeastOneSepFirstInternalRecord(e,A){ll.call(this,Wr,A,e,cB)}manyInternalRecord(e,A){ll.call(this,EA,A,e)}manySepFirstInternalRecord(e,A){ll.call(this,yr,A,e,cB)}orInternalRecord(e,A){return iU.call(this,e,A)}subruleInternalRecord(e,A,n){if(Mh(A),!e||Qe(e,"ruleName")===!1){const o=new Error(`<SUBRULE${fB(A)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const r=Ii(this.recordingProdStack),s=e.ruleName,i=new yn({idx:A,nonTerminalName:s,label:n?.LABEL,referencedRule:void 0});return r.definition.push(i),this.outputCst?rU:Gh}consumeInternalRecord(e,A,n){if(Mh(A),!ED(e)){const i=new Error(`<CONSUME${fB(A)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw i.KNOWN_RECORDER_ERROR=!0,i}const r=Ii(this.recordingProdStack),s=new Xt({idx:A,terminalType:e,label:n?.LABEL});return r.definition.push(s),hB}}function ll(t,e,A,n=!1){Mh(A);const r=Ii(this.recordingProdStack),s=fs(e)?e:e.DEF,i=new t({definition:[],idx:A});return n&&(i.separator=e.SEP),Qe(e,"MAX_LOOKAHEAD")&&(i.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(i),s.call(this),r.definition.push(i),this.recordingProdStack.pop(),Gh}function iU(t,e){Mh(e);const A=Ii(this.recordingProdStack),n=pt(t)===!1,r=n===!1?t:t.DEF,s=new Gr({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});Qe(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const i=yg(r,o=>fs(o.GATE));return s.hasPredicates=i,A.definition.push(s),Je(r,o=>{const a=new Gn({definition:[]});s.definition.push(a),Qe(o,"IGNORE_AMBIGUITIES")?a.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:Qe(o,"GATE")&&(a.ignoreAmbiguities=!0),this.recordingProdStack.push(a),o.ALT.call(this),this.recordingProdStack.pop()}),Gh}function fB(t){return t===0?"":`${t}`}function Mh(t){if(t<0||t>lB){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${lB+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class oU{initPerformanceTracer(e){if(Qe(e,"traceInitPerf")){const A=e.traceInitPerf,n=typeof A=="number";this.traceInitMaxIdent=n?A:1/0,this.traceInitPerf=n?A>0:A}else this.traceInitMaxIdent=0,this.traceInitPerf=ws.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,A){if(this.traceInitPerf===!0){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);const{time:r,value:s}=hD(A),i=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&i(`${n}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,s}else return A()}}function aU(t,e){e.forEach(A=>{const n=A.prototype;Object.getOwnPropertyNames(n).forEach(r=>{if(r==="constructor")return;const s=Object.getOwnPropertyDescriptor(n,r);s&&(s.get||s.set)?Object.defineProperty(t.prototype,r,s):t.prototype[r]=A.prototype[r]})})}const vh=ph(zi,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(vh);const ws=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:jD,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Dh=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var rn;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(rn||(rn={}));let Hg=class BS{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const A=this.className;this.TRACE_INIT("toFastProps",()=>{fD(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),Je(this.definedRulesNames,r=>{const i=this[r].originalGrammarAction;let o;this.TRACE_INIT(`${r} Rule`,()=>{o=this.topLevelRuleRecord(r,i)}),this.gastProductionsCache[r]=o})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=T5({rules:xA(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(It(n)&&this.skipValidations===!1){const r=O5({rules:xA(this.gastProductionsCache),tokenTypes:xA(this.tokensMap),errMsgProvider:Hi,grammarName:A}),s=p5({lookaheadStrategy:this.lookaheadStrategy,rules:xA(this.gastProductionsCache),tokenTypes:xA(this.tokensMap),grammarName:A});this.definitionErrors=this.definitionErrors.concat(r,s)}}),It(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const r=a6(xA(this.gastProductionsCache));this.resyncFollows=r}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var r,s;(s=(r=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(r,{rules:xA(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(xA(this.gastProductionsCache))})),!BS.DEFER_DEFINITION_ERRORS_HANDLING&&!It(this.definitionErrors))throw e=ze(this.definitionErrors,r=>r.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,A){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(A),n.initLexerAdapter(),n.initLooksAhead(A),n.initRecognizerEngine(e,A),n.initRecoverable(A),n.initTreeBuilder(A),n.initContentAssist(),n.initGastRecorder(A),n.initPerformanceTracer(A),Qe(A,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=Qe(A,"skipValidations")?A.skipValidations:ws.skipValidations}};Hg.DEFER_DEFINITION_ERRORS_HANDLING=!1,aU(Hg,[Z5,z5,J5,X5,tU,eU,AU,nU,sU,oU]);class cU extends Hg{constructor(e,A=ws){const n=jA(A);n.outputCst=!0,super(e,n)}}function lU(t){const e=new uU,A=xA(t);return ze(A,n=>e.visitRule(n))}class uU extends Ri{visitRule(e){const A=this.visitEach(e.definition),n=aD(A,s=>s.propertyName),r=ze(n,(s,i)=>{const o=!yg(s,c=>!c.canBeNull);let a=s[0].type;return s.length>1&&(a=ze(s,c=>c.type)),{name:i,type:a,optional:o}});return{name:e.name,properties:r}}visitAlternative(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitOption(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitRepetition(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitRepetitionMandatory(e){return this.visitEach(e.definition)}visitRepetitionMandatoryWithSeparator(e){return this.visitEach(e.definition).concat({propertyName:e.separator.name,canBeNull:!0,type:Bh(e.separator)})}visitRepetitionWithSeparator(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0}).concat({propertyName:e.separator.name,canBeNull:!0,type:Bh(e.separator)})}visitAlternation(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitTerminal(e){return[{propertyName:e.label||e.terminalType.name,canBeNull:!1,type:Bh(e)}]}visitNonTerminal(e){return[{propertyName:e.label||e.nonTerminalName,canBeNull:!1,type:Bh(e)}]}visitEachAndOverrideWith(e,A){return ze(this.visitEach(e),n=>bn({},n,A))}visitEach(e){return Pn(ze(e,A=>this.visit(A)))}}function Bh(t){return t instanceof yn?{kind:"rule",name:t.referencedRule.name}:{kind:"token"}}function hU(t,e){let A=[];return A=A.concat('import type { CstNode, ICstVisitor, IToken } from "chevrotain";'),A=A.concat(Pn(ze(t,n=>fU(n)))),e.includeVisitorInterface&&(A=A.concat(gU(e.visitorInterfaceName,t))),A.join(`

`)+`
`}function fU(t){const e=dU(t),A=mU(t);return[e,A]}function dU(t){const e=mB(t.name),A=Lg(t.name);return`export interface ${e} extends CstNode {
  name: "${t.name}";
  children: ${A};
}`}function mU(t){return`export type ${Lg(t.name)} = {
  ${ze(t.properties,A=>pU(A)).join(`
  `)}
};`}function pU(t){const e=bU(t.type);return`${t.name}${t.optional?"?":""}: ${e}[];`}function gU(t,e){return`export interface ${t}<IN, OUT> extends ICstVisitor<IN, OUT> {
  ${ze(e,A=>wU(A)).join(`
  `)}
}`}function wU(t){const e=Lg(t.name);return`${t.name}(children: ${e}, param?: IN): OUT;`}function bU(t){if(pt(t)){const e=Ah(ze(t,n=>dB(n)));return"("+xn(e,(n,r)=>n+" | "+r)+")"}else return dB(t)}function dB(t){return t.kind==="token"?"IToken":mB(t.name)}function mB(t){return Nv(t)+"CstNode"}function Lg(t){return Nv(t)+"CstChildren"}const _U={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function xU(t,e){const A=Object.assign(Object.assign({},_U),e),n=lU(t);return hU(n,A)}const Kr=!!JSON.parse("false"),yU=!!JSON.parse("false");JSON.parse("false");const pB=!!JSON.parse("false");JSON.parse("false"),JSON.parse("false"),JSON.parse("false"),JSON.parse("false");const GU={YIELD_AT_COUNT:512},ul=zc(32,126).map(t=>String.fromCharCode(t));function it(t){return nn({...t,name:`token_${t.name}`})}function he(t){return it({name:t,pattern:new RegExp(t.toLowerCase(),"i"),longer_alt:mA})}const kh=it({name:"newline",line_breaks:!0,start_chars_hint:[`
`,"\r"],pattern:/\n|\r\n?/}),MU=it({name:"whitespace",pattern:/ +/,group:SA.SKIPPED}),vU=it({name:"whitespace",pattern:/\s+/,line_breaks:!0,group:SA.SKIPPED}),Ug=it({name:"stat",pattern:/@.*/,start_chars_hint:["@"]}),Po=it({name:"command",pattern:/#/,start_chars_hint:["#"]});let gB=!1;const DU="@#/?':!",BU=/^(by|at|away|toward|find|flee|to|cw|ccw|opp|rndp)/i;function kU(t,e){if(!gB)return null;let A=e;const n=t[A-1]??"";if(A>0&&n!==" "&&n!==`
`)return null;if(t[A]===" "){for(;t[A]===" ";)A++;if(DU.includes(t[A]))return null}for(;A>0&&`$"@#':!/?
`.includes(t[A])===!1;)A--;switch(t[A]){case"?":case"/":{const i=t.substring(A+1,e+1).toLowerCase();if(i.indexOf(" ")<1||BU.test(i))return null;break}case"#":return null;case'"':{for(A--;A>0&&t[A]===" ";)A--;if(!(A<1||t[A]===`
`))return null;break}case"@":case"'":case":":case"!":return null}let r=e;for(t[r]==='"'&&++r;r<t.length&&t[r]!==`
`;)r++;const s=t.substring(e,r);return s.trim().length===0||s.toLowerCase()==="do"?null:[s]}const wB=it({name:"text",pattern:kU,line_breaks:!1,start_chars_hint:ul}),bB=it({name:"comment",pattern:/'.*/,start_chars_hint:["'"]}),Fg=it({name:"label",pattern:/:[^;:\n]*/,start_chars_hint:[":"]}),_B=it({name:"hyperlink",pattern:/![^;\n]*/,start_chars_hint:["!"]}),xB=it({name:"hyperlinktext",pattern:/;[^;\n]*/,start_chars_hint:[";"]}),mA=it({name:"stringliteral",pattern:/[^-0-9"!:;@#/?()\s]+[^-"!:;@#/?()\s]*/,start_chars_hint:ul}),Eh=it({name:"stringliteraldouble",pattern:/"(?:[^\\"]|\\(?:[^\n\r]|u[0-9a-fA-F]{4}))*"/}),hl=it({name:"numberliteral",pattern:/-?(\d*\.)?\d+([eE][+-]?\d+)?[jJ]?[lL]?/}),yB=he("isterrain"),GB=he("isobject"),MB=he("issolid"),vB=he("iswalk"),DB=he("isswim"),BB=he("isbullet"),kB=he("isghost"),EB=he("iswalking"),NB=he("iswalkable"),TB=he("isswimming"),OB=he("isswimmable"),YB=he("black"),SB=he("dkblue"),CB=he("dkgreen"),PB=he("dkcyan"),ZB=he("dkred"),IB=he("dkpurple"),RB=he("dkyellow"),jB=he("ltgray"),zB=he("dkgray"),HB=he("blue"),LB=he("green"),UB=he("cyan"),FB=he("red"),$B=he("purple"),VB=he("yellow"),qB=he("white"),WB=he("brown"),QB=he("dkwhite"),KB=he("ltgrey"),JB=he("gray"),XB=he("grey"),ek=he("dkgrey"),tk=he("ltblack"),Ak=he("onblack"),nk=he("ondkblue"),rk=he("ondkgreen"),sk=he("ondkcyan"),ik=he("ondkred"),ok=he("ondkpurple"),ak=he("ondkyellow"),ck=he("onltgray"),lk=he("ondkgray"),uk=he("onblue"),hk=he("ongreen"),fk=he("oncyan"),dk=he("onred"),mk=he("onpurple"),pk=he("onyellow"),gk=he("onwhite"),wk=he("onbrown"),bk=he("ondkwhite"),_k=he("onltgrey"),xk=he("ongray"),yk=he("ongrey"),Gk=he("ondkgrey"),Mk=he("onltblack"),vk=he("onclear"),Dk=he("blblack"),Bk=he("bldkblue"),kk=he("bldkgreen"),Ek=he("bldkcyan"),Nk=he("bldkred"),Tk=he("bldkpurple"),Ok=he("bldkyellow"),Yk=he("blltgray"),Sk=he("bldkgray"),Ck=he("blblue"),Pk=he("blgreen"),Zk=he("blcyan"),Ik=he("blred"),Rk=he("blpurple"),jk=he("blyellow"),zk=he("blwhite"),Hk=he("blbrown"),Lk=he("bldkwhite"),Uk=he("blltgrey"),Fk=he("blgray"),$k=he("blgrey"),Vk=he("bldkgrey"),qk=he("blltblack"),Wk=he("idle"),Qk=he("up"),Kk=he("down"),Jk=he("left"),Xk=he("right"),eE=he("by"),tE=he("at"),AE=he("flow"),nE=he("seek"),rE=he("rndns"),sE=he("rndne"),iE=he("rnd"),oE=he("cw"),aE=he("ccw"),cE=he("opp"),lE=he("rndp"),uE=he("away"),hE=he("toward"),fE=he("find"),dE=he("flee"),mE=he("to"),pE=he("i"),gE=he("u"),wE=he("north"),bE=he("n"),_E=he("d"),xE=he("south"),yE=he("s"),GE=he("l"),ME=he("west"),vE=he("w"),DE=he("r"),BE=he("east"),kE=he("e"),EE=he("over"),NE=he("under"),TE=he("ground"),OE=he("within"),YE=he("awayby"),SE=he("elements"),CE=it({name:"expr_aligned",pattern:/aligned|alligned/i,longer_alt:mA}),PE=he("contact"),ZE=he("blocked"),IE=he("any"),RE=he("countof"),jE=he("abs"),zE=he("intceil"),HE=he("intfloor"),LE=he("intround"),UE=he("clamp"),FE=he("min"),$E=he("max"),VE=he("pick"),qE=he("pickwith"),WE=he("random"),QE=he("randomwith"),KE=he("run"),JE=he("runwith"),XE=it({name:"stop",pattern:/\|/,start_chars_hint:["|"]}),e8=it({name:"iseq",pattern:/=|is|eq|equal/i,longer_alt:mA}),t8=it({name:"isnoteq",pattern:/!=|not ?eq|not ?equal/i,longer_alt:mA}),A8=it({name:"islessthan",pattern:/<|below/i,longer_alt:mA}),n8=it({name:"isgreaterthan",pattern:/>|above/i,longer_alt:mA}),r8=it({name:"islessthanorequal",pattern:/<=|below ?or ?eq|below ?or ?equal/i,longer_alt:mA}),s8=it({name:"isgreaterthanorequal",pattern:/>=|above ?or ?eq|above ?or ?equal/i,longer_alt:mA}),$g=it({name:"or",pattern:/or/i,longer_alt:mA}),Vg=it({name:"not",pattern:/not/i,longer_alt:mA}),qg=it({name:"and",pattern:/and/i,longer_alt:mA}),Wg=it({name:"plus",pattern:/\+/}),Qg=it({name:"minus",pattern:/-/}),i8=it({name:"power",pattern:/\*\*/}),o8=it({name:"multiply",pattern:/\*/}),Kg=it({name:"divide",pattern:/\//}),a8=it({name:"moddivide",pattern:/%/}),c8=it({name:"floordivide",pattern:/%%/}),l8=it({name:"query",pattern:/\?/}),u8=it({name:"lparen",pattern:/\(/,push_mode:"ignore_newlines"}),h8=it({name:"rparen",pattern:/\)/,pop_mode:!0}),f8=it({name:"command_play",pattern:/(play|bgplay|bgplayon64n|bgplayon32n|bgplayon16n|bgplayon8n|bgplayon4n|bgplayon2n|bgplayon1n) .*/i,start_chars_hint:ul,longer_alt:mA}),d8=it({name:"command_toast",pattern:/toast .*/i,start_chars_hint:ul,longer_alt:mA}),m8=it({name:"command_ticker",pattern:/ticker .*/i,start_chars_hint:ul,longer_alt:mA}),Jg=it({name:"if",pattern:/if|try|take|give|duplicate/i,longer_alt:mA}),Nh=it({name:"do",pattern:new RegExp("(?<!(zap |send |restore ))(?<=\\s)do","i"),start_chars_hint:["d"],longer_alt:mA}),Xg=he("done"),e0=he("else"),p8=he("while"),g8=he("repeat"),w8=he("waitfor"),b8=it({name:"foreach",pattern:/foreach|for/i,longer_alt:mA}),_8=he("break"),x8=he("continue");function y8(t,e){return[...t,Kk,...e,hl,yB,GB,MB,NB,EB,vB,OB,TB,DB,BB,kB,YB,SB,CB,PB,ZB,IB,RB,jB,zB,HB,LB,UB,FB,$B,VB,qB,WB,QB,KB,JB,XB,ek,tk,Ak,nk,rk,sk,ik,ok,ak,ck,lk,uk,hk,fk,dk,mk,pk,gk,wk,bk,_k,xk,yk,Gk,Mk,vk,Dk,Bk,kk,Ek,Nk,Tk,Ok,Yk,Sk,Ck,Pk,Zk,Ik,Rk,jk,zk,Hk,Lk,Uk,Fk,$k,Vk,qk,Wk,Qk,Jk,Xk,eE,tE,AE,nE,lE,rE,sE,iE,oE,aE,cE,OE,YE,SE,uE,hE,fE,dE,mE,wE,xE,ME,BE,EE,NE,TE,CE,PE,ZE,IE,RE,jE,zE,HE,LE,UE,FE,$E,qE,VE,QE,WE,JE,KE,XE,e8,t8,r8,A8,s8,n8,$g,Vg,qg,Wg,Qg,i8,o8,Kg,c8,a8,l8,u8,h8,pE,gE,bE,_E,yE,GE,vE,DE,kE,Eh,mA]}const G8=y8([wB,Ug,f8,d8,m8,Po,bB,Fg,_B,xB,kh,MU],[_8,x8,Xg,Nh,e0,b8,Jg,g8,w8,p8]),EU=new SA({defaultMode:"use_newlines",modes:{use_newlines:G8,ignore_newlines:y8([vU],[])}},{skipValidations:!Kr,ensureOptimizations:Kr,positionTracking:"full"});function M8(t){gB=!0;const e=EU.tokenize(t||` 
`),[A]=(st(e.tokens)?e.tokens:[]).slice(-1);return A&&A.tokenType.name!=="Newline"&&e.tokens.push(ph(kh,`
`,A.startOffset,A.endOffset??NaN,A.startLine??NaN,A.endLine??NaN,A.startColumn??NaN,A.endColumn??NaN)),e}function t0(t,e,A=!0){if(A){const[n,...r]=e;switch(je(n??"")){default:return{type:ye.OBJECT,values:e};case"loader":return{type:ye.LOADER,values:r};case"board":return{type:ye.BOARD,values:r};case"object":return{type:ye.OBJECT,values:r};case"terrain":return{type:ye.TERRAIN,values:r};case"charset":return{type:ye.CHARSET,values:r};case"palette":return{type:ye.PALETTE,values:r}}}else{const[n,r,...s]=e,i=je(r??""),o=[n,t,...s];switch(i){default:return{type:ye.CONST,values:e};case"rn":case"range":return{type:ye.RANGE,values:o};case"sl":case"select":return{type:ye.SELECT,values:o};case"nm":case"number":return{type:ye.NUMBER,values:o};case"tx":case"text":return{type:ye.TEXT,values:o};case"hk":case"hotkey":return{type:ye.HOTKEY,values:o};case"copyit":return{type:ye.COPYIT,values:o};case"openit":return{type:ye.OPENIT,values:o};case"viewit":return{type:ye.VIEWIT,values:o};case"runit":return{type:ye.RUNIT,values:o};case"zssedit":return{type:ye.ZSSEDIT,values:o};case"charedit":return{type:ye.CHAREDIT,values:o};case"coloredit":return{type:ye.COLOREDIT,values:o}}}}function vn(t){switch(t){case ye.LOADER:return"loader";case ye.BOARD:return"board";case ye.OBJECT:return"object";case ye.TERRAIN:return"terrain";case ye.CHARSET:return"charset";case ye.PALETTE:return"palette";case ye.CONST:return"const";case ye.RANGE:return"range";case ye.SELECT:return"select";case ye.NUMBER:return"number";case ye.TEXT:return"text";case ye.HOTKEY:return"hotkey";case ye.COPYIT:return"copyit";case ye.OPENIT:return"openit";case ye.VIEWIT:return"viewit";case ye.RUNIT:return"runit";case ye.ZSSEDIT:return"zssedit";case ye.CHAREDIT:return"charedit";case ye.COLOREDIT:return"coloredit"}}function Th(t,e){const A=Object.keys(t);for(let n=0;n<A.length;++n){const r=A[n],s=t[r];if(st(s)){const[i,...o]=s;switch(i){case"text":E(e[r])||(e[r]="");break;case"range":E(e[r])||(e[r]=4);break;case"number":E(e[r])||(e[r]=0);break;case"select":if(!E(e[r])){const[,a]=o;e[r]=a}break}continue}switch(r){case"name":case"char":case"light":case"group":case"p1":case"p2":case"p3":case"p4":case"p5":case"p6":case"p7":case"p8":case"p9":case"p10":case"cycle":case"stepx":case"stepy":case"shootx":case"shooty":case"displaychar":e[r]=s;break;case"color":case"bg":case"lightdir":case"displaycolor":case"displaybg":e[r]=B8(s)??s;break;case"isitem":e.item=1;break;case"notitem":e.item=0;break;case"ispushable":e.pushable=s===""?1:s;break;case"notpushable":e.pushable=0;break;case"iswalk":case"iswalking":case"iswalkable":e.collision=$e.ISWALK;break;case"isswim":case"isswimming":case"isswimable":e.collision=$e.ISSWIM;break;case"issolid":e.collision=$e.ISSOLID;break;case"isbullet":e.collision=$e.ISBULLET;break;case"isghost":e.collision=$e.ISGHOST;break;case"isbreakable":e.breakable=1;break;case"notbreakable":e.breakable=0;break}}}function v8(t){return us(t,Fp,{bits:e=>Array.from(e)})}function D8(t){return Zc(t,Fp,{bits:e=>new Uint8Array(e)})}function NU(t){return us(t,qp,{board:Doe,object:Cu,terrain:Cu,charset:v8,palette:v8,stats:Yt})}function TU(t){return Zc(t,qp,{board:koe,object:Pu,terrain:Pu,charset:D8,palette:D8})}function Ar(t){if(E(t))switch(sn(t)){default:return;case Ye.ERROR:return t.code??"";case Ye.LOADER:return t.code??"";case Ye.BOARD:{E(t.board)||(t.board=s_()),t.board.id=t.id,t.board.name=gt(t);const e=Zo(t),A=Object.keys(e);for(let n=0;n<A.length;++n){const r=A[n],s=e[r];switch(r){case"isdark":t.board.isdark=1;break;case"notdark":t.board.isdark=0;break;case"restartonzap":t.board.restartonzap=1;break;case"norestartonzap":t.board.restartonzap=0;break;case"startx":case"starty":case"facing":case"timelimit":case"maxplayershots":Ne(s)&&(t.board[r]=s);break;case"over":case"under":case"camera":case"graphics":case"charset":case"palette":case"exitnorth":case"exitsouth":case"exitwest":case"exiteast":xe(s)&&(je(s)==="empty"?t.board[r]=void 0:t.board[r]=s);break;case"b1":case"b2":case"b3":case"b4":case"b5":case"b6":case"b7":case"b8":case"b9":case"b10":E(s)&&(t.board[r]=B8(s)??s);break}}return t.board}case Ye.OBJECT:return E(t.object)||(t.object=z1()),t.object.id=t.id,t.object.code=t.code,t.object.name=gt(t),t.object.category=pn.ISOBJECT,Th(Zo(t),t.object),t.object;case Ye.TERRAIN:return E(t.terrain)||(t.terrain=z1()),t.terrain.id=t.id,t.terrain.name=gt(t),t.terrain.category=pn.ISTERRAIN,Th(Zo(t),t.terrain),t.terrain;case Ye.PALETTE:{if(E(t.palette)||(t.palette=F1(V1)),E(t.palette?.bits)){const e=Zo(t),A=mn(e);for(let n=0;n<A.length;++n){const r=A[n].toLowerCase(),s=e[r];if(r.startsWith("color")&&xe(s)){const i=parseFloat(r.replace("color",""));if(i>=0&&i<=15){Oh.set(s);const o=i*Zu,a=Oh.r*63,c=Oh.g*63,l=Oh.b*63;t.palette.bits[o+0]=gr(a,0,63),t.palette.bits[o+1]=gr(c,0,63),t.palette.bits[o+2]=gr(l,0,63)}}}}return t.palette}case Ye.CHARSET:{if(E(t.charset)||(t.charset=$1(XR)),E(t.charset?.bits)){const e=Zo(t),A=mn(e);for(let n=0;n<A.length;++n){const r=A[n].toLowerCase(),s=e[r];if(r.startsWith("char")&&xe(s)){const i=parseFloat(r.replace("char",""));if(i>=0&&i<=255){const a=[];for(let c=0;c<112;++c)switch(s[c]){case"-":case void 0:a.push(0);break;default:a.push(128);break}JR(Uint8Array.from(a),t.charset,i)}}}}return t.charset}}}function gt(t){return $s(t).name??""}function OU(t,e){return $s(t)[e]}const Oh=new Nu;function B8(t){if(!xe(t))return;const e=Bo(t);if(E(e)&&E(Xe[e]))return Xe[e];const A=je(t),n=De[A];if(E(n))return n}function Zo(t){const e={...$s(t)};return Object.keys(e).forEach(A=>{switch(A){case"type":case"name":delete e[A];break}}),e}function $s(t){return E(t)?(E(t.stats?.type)||(t.stats=Yh(t.code),E(t.stats.type)||(t.stats.type=Ye.OBJECT)),t.stats):{}}function Yh(t){const e=M8(t),A={};let n=!0;for(let r=0;r<e.tokens.length;++r){const s=e.tokens[r];if(s.tokenType===Ug){const i=s.image.slice(1),[o,a]=i.split(";").map(f=>f.trim()),c=o.split(" "),l=t0(xe(a)?a:"",c,n),u=l.values.join(" ");switch(n=!1,l.type){case ye.LOADER:A.type=Ye.LOADER,A.name=u;break;case ye.BOARD:A.type=Ye.BOARD,A.name=u;break;case ye.OBJECT:A.type=Ye.OBJECT,A.name=u||"object";break;case ye.TERRAIN:A.type=Ye.TERRAIN,A.name=u;break;case ye.CHARSET:A.type=Ye.CHARSET,A.name=u;break;case ye.PALETTE:A.type=Ye.PALETTE,A.name=u;break;case ye.CONST:{const[f,...h]=l.values;if(xe(f)){const d=je(f),m=h.join(" ");if(xe(m)){const p=parseFloat(m);Ne(p)?A[d]=p:A[d]=`${Ct(A[d])}${m}`}else A[d]=1}break}case ye.RANGE:case ye.SELECT:case ye.NUMBER:case ye.TEXT:case ye.HOTKEY:case ye.ZSSEDIT:case ye.CHAREDIT:case ye.COLOREDIT:{const[f,...h]=l.values;if(xe(f)){const d=je(f);A[d]=[vn(l.type),...h]}break}}}}return A}function sn(t){return $s(t).type??Ye.ERROR}function Jr(t){return k8(sn(t))}function YU(t){return E(t)?(t.stats=void 0,$s(t)):{}}function k8(t){switch(t){default:case Ye.ERROR:return"error";case Ye.LOADER:return vn(ye.LOADER);case Ye.BOARD:return vn(ye.BOARD);case Ye.OBJECT:return vn(ye.OBJECT);case Ye.TERRAIN:return vn(ye.TERRAIN);case Ye.CHARSET:return vn(ye.CHARSET);case Ye.PALETTE:return vn(ye.PALETTE)}}function Io(t,e){return{id:rA(),code:t,...e}}function E8(t,e){if(E(e)){const A=r0(t,Ye.TERRAIN,e.kind??"");if(E(A))return A;const n=r0(t,Ye.OBJECT,e.kind??"");if(E(n))return n}}function N8(t,e){const A=Vs(t,e);if(E(t)&&E(A)){const n=je(e);return t.pages=t.pages.filter(r=>r.id!==e&&n!==gt(r)),O8(t),A}}function T8(t,e){t&&delete t.flags[e]}function pA(t,e=1,A=Xe.WHITE,n=Xe.BLACK){const r=t?.kinddata;return{name:je(t?.name??r?.name),char:t?.displaychar??r?.displaychar??t?.char??r?.char??e,color:t?.displaycolor??r?.displaycolor??t?.color??r?.color??A,bg:t?.displaybg??r?.displaybg??t?.bg??r?.bg??n,light:t?.light??r?.light??0}}function SU(t,e,A){let n=r0(t,e,A);if(!E(n)){const r=k8(e);return n=Io(r==="object"?`@${A||"object"}
`:`@${r} ${A}
`,{}),$i(t,n),[n,!0]}return[n,!1]}function CU(t){return us(t,Vp,{pages:e=>e.map(NU),flags:e=>{const A=Object.keys(e);for(let n=0;n<A.length;++n){const r=A[n];Object.keys(e[r]).length===0&&delete e[r]}return e}})}function PU(t,e){return!!t?.flags[e]}function A0(t){const e=Zc(t,Vp,{pages:A=>A.map(TU)});return E(e)&&delete e.flags.gadgetsync,e}function Vs(t,e){if(!E(t))return;const A=je(e);return t.pages.find(r=>r.id===e||A===gt(r))}function ZU(t,e){if(!E(t))return[];const A=je(e);return t.pages.filter(r=>{const s=$s(r),i=je(gt(r));return r.id===e||A===i||E(s[e])})}function Li(t,e){return E(t)?t.pages.filter(A=>sn(A)===e):[]}function n0(t,e,A){if(!E(t))return[];const n=je(A);return t.pages.filter(s=>sn(s)===e).filter(s=>{const i=$s(s),o=je(gt(s));return s.id===A||n===o||E(i[A])})}function r0(t,e,A){if(!E(t))return;const n=je(A);return t.pages.find(s=>sn(s)===e&&(s.id===A||n===gt(s)))}function Ro(t,e,A){return Ui(t,e)?.[A]}function Ui(t,e){return t?(t.flags[e]=t.flags[e]??{},t.flags[e]):{}}function Fi(t){return E(t)?FA(t.pages).sort((A,n)=>{const r=sn(A),s=sn(n);return r===s?gt(A).localeCompare(gt(n)):s-r}):[]}function IU(t){E(t)&&(t.name=Pd())}function O8(t){E(t)&&(t.token=`${$S()}${tn(1111,9999)}`)}function $i(t,e){if(!E(t)||!E(e))return!1;const A=Vs(t,e.id);return E(A)?!1:(t.pages.push(e),O8(t),!0)}function fl(t,e,A,n){const r=Ui(t,e);return r&&(r[A]=n),n}function s0(t){return{id:rA(),name:Pd(),timestamp:0,activelist:[],pages:t,flags:{}}}const Rt={halt:!1,session:rA(),operator:"",software:{main:"",temp:""},books:new Map,loaders:new Map,topic:""};function RU(){return Rt.loaders}function jU(t,e){Rt.loaders.set(t,e)}function zU(){return Rt.session}function gA(){return Rt.operator}function HU(t){return Rt.operator===t}function LU(t){Rt.operator=t}function UU(){return Rt.topic}function FU(t){Rt.topic=t}function $U(t){Rt.halt=t}function i0(){return Rt.halt}function HA(){return[...Rt.books.values()]}function VU(){const[t]=Rt.books.values();return t}function dl(){const t=HA(),e=wt(He.MAIN),[A]=t.filter(n=>n.id!==e?.id);return A??e}function bs(t){const e=je(t);return Rt.books.get(t)??HA().find(A=>A.name===e)}function Y8(t,e){E(bs(e))&&(Rt.software[t]=e)}function wt(t){return bs(Rt.software[t])}function qU(t){const e=s0([]);return xe(t)&&(e.name=t),Sh(e),_A(Ae,Rt.operator,`created [book] ${e.name}`),e}function WU(t){let e=bs(t);return E(e)||(e=s0([]),e.name=t),Sh(e),_A(Ae,Rt.operator,`created [book] ${e.name}`),e}function CA(t,e){let A=E(e)?WU(e):wt(t);return E(A)||(E(A)||(A=VU()),E(A)||(A=qU(e)),E(A)&&_A(Ae,Rt.operator,`opened [book] ${A.name} for ${t}`)),Y8(t,A.id),A}function Vi(t,e,A){return SU(CA(t),A,e)}function yA(t,e){const A=wt(He.MAIN),n=qn(n0(A,t,e));if(E(n))return n;const r=HA();for(let s=0;s<r.length;++s){const i=r[s];if(i.id!==A?.id){const o=qn(n0(i,t,e));if(E(o))return o}}}function S8(t){const e=wt(He.MAIN),A=Fi(e).filter(r=>sn(r)===t),n=HA();for(let r=0;r<n.length;++r){const s=n[r];s.id!==e?.id&&A.push(...Fi(s).filter(i=>sn(i)===t))}return A}function Zn(t){if(E(t?.kinddata))return t.kinddata;if(!xe(t?.kind)||!t.kind)return;const e=yA(Ye.OBJECT,t.kind);if(E(e))return t.kinddata=Ar(e),t.kinddata;const A=yA(Ye.TERRAIN,t.kind);if(E(A))return t.kinddata=Ar(A),t.kinddata}function qe(t,e){const A=t?.kinddata,n=A?.id??"",r=t?.[e];if(E(r))return r;const s=A?.[e];if(E(s))return s;const i=yA(Ye.OBJECT,n)??yA(Ye.TERRAIN,n),o=OU(i,e);if(E(o))return o;switch(e){case"group":return"";case"cycle":return bx;case"p1":case"p2":case"p3":case"p4":case"p5":case"p6":case"p7":case"p8":case"p9":case"p10":case"item":case"pushable":case"breakable":return 0;case"collision":return $e.ISWALK;default:return}}function o0(t,e){const A={x:t?.x??-1,y:t?.y??-1},n={x:e?.x??-1,y:e?.y??-1},r=Wn(A,n),s=qe(e,"pushable");return Ne(s)?s!==0:xe(s)?s.trim().split(" ").map(i=>P1(Hc(i))).some(i=>i===r):!1}function In(t,e,A,n){if(!E(t)||!E(e))return;const[r,s]=e,i=yA(Ye.OBJECT,r);if(E(i)){const a=r_(t,A,r,n);if(E(a))return Yi(a,s),Zn(a),P8(t,a),a0(t,a),a}const o=yA(Ye.TERRAIN,r);if(E(o)){const a=Noe(t,A,r);if(E(a)){Yi(a,s),Zn(a);const c=wn(A,Ie);return a0(t,a,c),a}}}function QU(t,e,A){if(!E(t)||!E(e))return;const[n,r]=e,s=yA(Ye.OBJECT,n);if(E(s)){const i=r_(t,A,n);return Yi(i,r),i}}function ct(t){const e=yA(Ye.BOARD,t);return Ar(e)}function KU(t){if(!E(t))return;if(!xe(t.over)){delete t.overboard;return}if(xe(t.overboard)){const A=ct(t.overboard);if(E(A))return A;delete t.overboard;return}const e=ct(t.over);if(E(e))return t.overboard=e.id,e}function JU(t){if(!E(t))return;if(!xe(t.under)){delete t.underboard;return}if(xe(t.underboard)){const A=ct(t.underboard);if(E(A))return A;delete t.underboard;return}const e=ct(t.under);if(E(e))return t.underboard=e.id,e}function on(t){const e=CA(He.MAIN);return Ui(e,t)}function C8(t){const e=CA(He.MAIN);return PU(e,t)}function XU(t){const e=CA(He.MAIN);return T8(e,t)}function eF(t){if(Rt.books.clear(),t.forEach(e=>{Rt.books.set(e.id,e),e.name==="main"&&(Rt.software.main=e.id)}),!Rt.software.main){const e=Rt.books.values().next();e.value&&(Rt.software.main=e.value.id)}}function Sh(t){return Rt.books.set(t.id,t),t.id}function tF(t){const e=bs(t);e&&Rt.books.delete(e.id)}function eA(t){if(!E(t))return;for(let A=0;A<t.terrain.length;++A)Zn(t.terrain[A]);const e=Object.keys(t.objects);for(let A=0;A<e.length;++A){const n=e[A];Zn(t.objects[n])}AF(t)}function a0(t,e,A){if(!E(t)||!E(t.named)||!E(e))return;const n=je(e.name??e.kinddata?.name??"");t.named[n]||(t.named[n]=new Set),t.named[n].add(e?.id??A??"")}function P8(t,e){if(!(!E(t)||!E(t.lookup)||!E(e?.id))&&!E(e.removed)&&qe(e,"collision")!==$e.ISGHOST){const A=e.x??0,n=e.y??0;t.lookup[A+n*Ie]=e.id}}function Ch(t,e){if(E(t)&&E(e?.id)){if(E(t.lookup)&&E(e.x)&&E(e.y)){const n=e.x+e.y*Ie;t.lookup[n]===e.id&&(t.lookup[n]=void 0)}const A=pA(e);E(t.named?.[A.name])&&E(e.id)&&t.named[A.name].delete(e.id)}}function AF(t){E(t)&&(delete t.named,delete t.lookup,nF(t))}function nF(t){if(!E(t)||E(t.lookup)&&E(t.named))return;const e=new Array(Ie*rt).fill(void 0),A={},n=Object.values(t.objects);for(let i=0;i<n.length;++i){const o=n[i];if(E(o.x)&&E(o.y)&&E(o.id)&&!E(o.removed)){o.category=pn.ISOBJECT,qe(o,"collision")!==$e.ISGHOST&&(e[o.x+o.y*Ie]=o.id),xe(o.code)&&!E(o.name)&&Th(Yh(o.code),o);const a=pA(o);A[a.name]||(A[a.name]=new Set),A[a.name].add(o.id)}}let r=0,s=0;for(let i=0;i<t.terrain.length;++i){const o=t.terrain[i];if(E(o)){o.x=r,o.y=s,o.category=pn.ISTERRAIN;const a=pA(Zn(o));A[a.name]||(A[a.name]=new Set),A[a.name].add(i)}++r,r>=Ie&&(r=0,++s)}t.lookup=e,t.named=A}function rF(t,e){if(E(t)&&E(e?.x)&&E(e.y)){const A=pA(e),n=Os(t,e);E(t.named?.[A.name])&&t.named[A.name].delete(n)}}var Ph={exports:{}},Zh={exports:{}},sF=Zh.exports,Z8;function iF(){return Z8||(Z8=1,(function(t,e){(function(A,n){t.exports=n()})(sF,function(){function A(m){return!isNaN(parseFloat(m))&&isFinite(m)}function n(m){return m.charAt(0).toUpperCase()+m.substring(1)}function r(m){return function(){return this[m]}}var s=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],o=["fileName","functionName","source"],a=["args"],c=["evalOrigin"],l=s.concat(i,o,a,c);function u(m){if(m)for(var p=0;p<l.length;p++)m[l[p]]!==void 0&&this["set"+n(l[p])](m[l[p]])}u.prototype={getArgs:function(){return this.args},setArgs:function(m){if(Object.prototype.toString.call(m)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=m},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(m){if(m instanceof u)this.evalOrigin=m;else if(m instanceof Object)this.evalOrigin=new u(m);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var m=this.getFileName()||"",p=this.getLineNumber()||"",w=this.getColumnNumber()||"",b=this.getFunctionName()||"";return this.getIsEval()?m?"[eval] ("+m+":"+p+":"+w+")":"[eval]:"+p+":"+w:b?b+" ("+m+":"+p+":"+w+")":m+":"+p+":"+w}},u.fromString=function(p){var w=p.indexOf("("),b=p.lastIndexOf(")"),g=p.substring(0,w),x=p.substring(w+1,b).split(","),_=p.substring(b+1);if(_.indexOf("@")===0)var G=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(_,""),y=G[1],v=G[2],O=G[3];return new u({functionName:g,args:x||void 0,fileName:y,lineNumber:v||void 0,columnNumber:O||void 0})};for(var f=0;f<s.length;f++)u.prototype["get"+n(s[f])]=r(s[f]),u.prototype["set"+n(s[f])]=(function(m){return function(p){this[m]=!!p}})(s[f]);for(var h=0;h<i.length;h++)u.prototype["get"+n(i[h])]=r(i[h]),u.prototype["set"+n(i[h])]=(function(m){return function(p){if(!A(p))throw new TypeError(m+" must be a Number");this[m]=Number(p)}})(i[h]);for(var d=0;d<o.length;d++)u.prototype["get"+n(o[d])]=r(o[d]),u.prototype["set"+n(o[d])]=(function(m){return function(p){this[m]=String(p)}})(o[d]);return u})})(Zh)),Zh.exports}var oF=Ph.exports,I8;function aF(){return I8||(I8=1,(function(t,e){(function(A,n){t.exports=n(iF())})(oF,function(n){var r=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/;return{parse:function(a){if(typeof a.stacktrace<"u"||typeof a["opera#sourceloc"]<"u")return this.parseOpera(a);if(a.stack&&a.stack.match(s))return this.parseV8OrIE(a);if(a.stack)return this.parseFFOrSafari(a);throw new Error("Cannot parse given Error object")},extractLocation:function(a){if(a.indexOf(":")===-1)return[a];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,l=c.exec(a.replace(/[()]/g,""));return[l[1],l[2]||void 0,l[3]||void 0]},parseV8OrIE:function(a){var c=a.stack.split(`
`).filter(function(l){return!!l.match(s)},this);return c.map(function(l){l.indexOf("(eval ")>-1&&(l=l.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=l.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),f=u.match(/ (\(.+\)$)/);u=f?u.replace(f[0],""):u;var h=this.extractLocation(f?f[1]:u),d=f&&u||void 0,m=["eval","<anonymous>"].indexOf(h[0])>-1?void 0:h[0];return new n({functionName:d,fileName:m,lineNumber:h[1],columnNumber:h[2],source:l})},this)},parseFFOrSafari:function(a){var c=a.stack.split(`
`).filter(function(l){return!l.match(i)},this);return c.map(function(l){if(l.indexOf(" > eval")>-1&&(l=l.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),l.indexOf("@")===-1&&l.indexOf(":")===-1)return new n({functionName:l});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,f=l.match(u),h=f&&f[1]?f[1]:void 0,d=this.extractLocation(l.replace(u,""));return new n({functionName:h,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:l})},this)},parseOpera:function(a){return!a.stacktrace||a.message.indexOf(`
`)>-1&&a.message.split(`
`).length>a.stacktrace.split(`
`).length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(a){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,l=a.message.split(`
`),u=[],f=2,h=l.length;f<h;f+=2){var d=c.exec(l[f]);d&&u.push(new n({fileName:d[2],lineNumber:d[1],source:l[f]}))}return u},parseOpera10:function(a){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,l=a.stacktrace.split(`
`),u=[],f=0,h=l.length;f<h;f+=2){var d=c.exec(l[f]);d&&u.push(new n({functionName:d[3]||void 0,fileName:d[2],lineNumber:d[1],source:l[f]}))}return u},parseOpera11:function(a){var c=a.stack.split(`
`).filter(function(l){return!!l.match(r)&&!l.match(/^Error created at/)},this);return c.map(function(l){var u=l.split("@"),f=this.extractLocation(u.pop()),h=u.shift()||"",d=h.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,m;h.match(/\(([^)]*)\)/)&&(m=h.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var p=m===void 0||m==="[arguments not available]"?void 0:m.split(",");return new n({functionName:d,args:p,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:l})},this)}}})})(Ph)),Ph.exports}var cF=aF(),lF=di(cF);function qs(t){const e={},A={everytick(){},aftertick(){},listcommands(){return mn(e)},...t,getcommand(n){return e[n]},command(n,r){return e[n]=r,A}};return A}const R8="15.1.22",j8=(t,e,A)=>({endTime:e,insertTime:A,type:"exponentialRampToValue",value:t}),z8=(t,e,A)=>({endTime:e,insertTime:A,type:"linearRampToValue",value:t}),c0=(t,e)=>({startTime:e,type:"setValue",value:t}),H8=(t,e,A)=>({duration:A,startTime:e,type:"setValueCurve",values:t}),L8=(t,e,{startTime:A,target:n,timeConstant:r})=>n+(e-n)*Math.exp((A-t)/r),jo=t=>t.type==="exponentialRampToValue",Ih=t=>t.type==="linearRampToValue",Ws=t=>jo(t)||Ih(t),l0=t=>t.type==="setValue",_s=t=>t.type==="setValueCurve",Rh=(t,e,A,n)=>{const r=t[e];return r===void 0?n:Ws(r)||l0(r)?r.value:_s(r)?r.values[r.values.length-1]:L8(A,Rh(t,e-1,r.startTime,n),r)},U8=(t,e,A,n,r)=>A===void 0?[n.insertTime,r]:Ws(A)?[A.endTime,A.value]:l0(A)?[A.startTime,A.value]:_s(A)?[A.startTime+A.duration,A.values[A.values.length-1]]:[A.startTime,Rh(t,e-1,A.startTime,r)],u0=t=>t.type==="cancelAndHold",h0=t=>t.type==="cancelScheduledValues",Qs=t=>u0(t)||h0(t)?t.cancelTime:jo(t)||Ih(t)?t.endTime:t.startTime,F8=(t,e,A,{endTime:n,value:r})=>A===r?r:0<A&&0<r||A<0&&r<0?A*(r/A)**((t-e)/(n-e)):0,$8=(t,e,A,{endTime:n,value:r})=>A+(t-e)/(n-e)*(r-A),uF=(t,e)=>{const A=Math.floor(e),n=Math.ceil(e);return A===n?t[A]:(1-(e-A))*t[A]+(1-(n-e))*t[n]},hF=(t,{duration:e,startTime:A,values:n})=>{const r=(t-A)/e*(n.length-1);return uF(n,r)},jh=t=>t.type==="setTarget";class fF{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const A=Qs(e);if(u0(e)||h0(e)){const n=this._automationEvents.findIndex(s=>h0(e)&&_s(s)?s.startTime+s.duration>=A:Qs(s)>=A),r=this._automationEvents[n];if(n!==-1&&(this._automationEvents=this._automationEvents.slice(0,n)),u0(e)){const s=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Ws(r)){if(s!==void 0&&jh(s))throw new Error("The internal list is malformed.");const i=s===void 0?r.insertTime:_s(s)?s.startTime+s.duration:Qs(s),o=s===void 0?this._defaultValue:_s(s)?s.values[s.values.length-1]:s.value,a=jo(r)?F8(A,i,o,r):$8(A,i,o,r),c=jo(r)?j8(a,A,this._currenTime):z8(a,A,this._currenTime);this._automationEvents.push(c)}if(s!==void 0&&jh(s)&&this._automationEvents.push(c0(this.getValue(A),A)),s!==void 0&&_s(s)&&s.startTime+s.duration>A){const i=A-s.startTime,o=(s.values.length-1)/s.duration,a=Math.max(2,1+Math.ceil(i*o)),c=i/(a-1)*o,l=s.values.slice(0,a);if(c<1)for(let u=1;u<a;u+=1){const f=c*u%1;l[u]=s.values[u-1]*(1-f)+s.values[u]*f}this._automationEvents[this._automationEvents.length-1]=H8(l,s.startTime,i)}}}else{const n=this._automationEvents.findIndex(i=>Qs(i)>A),r=n===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(r!==void 0&&_s(r)&&Qs(r)+r.duration>A)return!1;const s=jo(e)?j8(e.value,e.endTime,this._currenTime):Ih(e)?z8(e.value,A,this._currenTime):e;if(n===-1)this._automationEvents.push(s);else{if(_s(e)&&A+e.duration>Qs(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,s)}}return!0}flush(e){const A=this._automationEvents.findIndex(n=>Qs(n)>e);if(A>1){const n=this._automationEvents.slice(A-1),r=n[0];jh(r)&&n.unshift(c0(Rh(this._automationEvents,A-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const A=this._automationEvents.findIndex(i=>Qs(i)>e),n=this._automationEvents[A],r=(A===-1?this._automationEvents.length:A)-1,s=this._automationEvents[r];if(s!==void 0&&jh(s)&&(n===void 0||!Ws(n)||n.insertTime>e))return L8(e,Rh(this._automationEvents,r-1,s.startTime,this._defaultValue),s);if(s!==void 0&&l0(s)&&(n===void 0||!Ws(n)))return s.value;if(s!==void 0&&_s(s)&&(n===void 0||!Ws(n)||s.startTime+s.duration>e))return e<s.startTime+s.duration?hF(e,s):s.values[s.values.length-1];if(s!==void 0&&Ws(s)&&(n===void 0||!Ws(n)))return s.value;if(n!==void 0&&jo(n)){const[i,o]=U8(this._automationEvents,r,s,n,this._defaultValue);return F8(e,i,o,n)}if(n!==void 0&&Ih(n)){const[i,o]=U8(this._automationEvents,r,s,n,this._defaultValue);return $8(e,i,o,n)}return this._defaultValue}}const dF=t=>({cancelTime:t,type:"cancelAndHold"}),mF=t=>({cancelTime:t,type:"cancelScheduledValues"}),pF=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),gF=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),wF=(t,e,A)=>({startTime:e,target:t,timeConstant:A,type:"setTarget"}),bF=()=>new DOMException("","AbortError"),_F=t=>(e,A,[n,r,s],i)=>{t(e[r],[A,n,s],o=>o[0]===A&&o[1]===n,i)},xF=t=>(e,A,n)=>{const r=[];for(let s=0;s<n.numberOfInputs;s+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:A})},yF=t=>(e,A)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:A})},zo=new WeakSet,V8=new WeakMap,f0=new WeakMap,q8=new WeakMap,d0=new WeakMap,zh=new WeakMap,W8=new WeakMap,m0=new WeakMap,p0=new WeakMap,g0=new WeakMap,Q8={construct(){return Q8}},GF=t=>{try{const e=new Proxy(t,Q8);new e}catch{return!1}return!0},K8=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,J8=(t,e)=>{const A=[];let n=t.replace(/^[\s]+/,""),r=n.match(K8);for(;r!==null;){const s=r[1].slice(1,-1),i=r[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());A.push(i),n=n.slice(r[0].length).replace(/^[\s]+/,""),r=n.match(K8)}return[A.join(";"),n]},X8=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},eN=t=>{if(!GF(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},MF=(t,e,A,n,r,s,i,o,a,c,l,u,f)=>{let h=0;return(d,m,p={credentials:"omit"})=>{const w=l.get(d);if(w!==void 0&&w.has(m))return Promise.resolve();const b=c.get(d);if(b!==void 0){const _=b.get(m);if(_!==void 0)return _}const g=s(d),x=g.audioWorklet===void 0?r(m).then(([_,G])=>{const[y,v]=J8(_,G),O=`${y};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${v}
})})(window,'_AWGS')`;return A(O)}).then(()=>{const _=f._AWGS.pop();if(_===void 0)throw new SyntaxError;n(g.currentTime,g.sampleRate,()=>_(class{},void 0,(G,y)=>{if(G.trim()==="")throw e();const v=p0.get(g);if(v!==void 0){if(v.has(G))throw e();eN(y),X8(y.parameterDescriptors),v.set(G,y)}else eN(y),X8(y.parameterDescriptors),p0.set(g,new Map([[G,y]]))},g.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(t(u,u))]).then(([[_,G],y])=>{const v=h+1;h=v;const[O,B]=J8(_,G),M=`${O};((AudioWorkletProcessor,registerProcessor)=>{${B}
})(${y?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${y?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${y?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${v}',class extends AudioWorkletProcessor{process(){return !1}})`,Z=new Blob([M],{type:"application/javascript; charset=utf-8"}),R=URL.createObjectURL(Z);return g.audioWorklet.addModule(R,p).then(()=>{if(o(g))return g;const I=i(g);return I.audioWorklet.addModule(R,p).then(()=>I)}).then(I=>{if(a===null)throw new SyntaxError;try{new a(I,`__sac${v}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(R))});return b===void 0?c.set(d,new Map([[m,x]])):b.set(m,x),x.then(()=>{const _=l.get(d);_===void 0?l.set(d,new Set([m])):_.add(m)}).finally(()=>{const _=c.get(d);_!==void 0&&_.delete(m)}),x}},Mr=(t,e)=>{const A=t.get(e);if(A===void 0)throw new Error("A value with the given key could not be found.");return A},Hh=(t,e)=>{const A=Array.from(t).filter(e);if(A.length>1)throw Error("More than one element was found.");if(A.length===0)throw Error("No element was found.");const[n]=A;return t.delete(n),n},tN=(t,e,A,n)=>{const r=Mr(t,e),s=Hh(r,i=>i[0]===A&&i[1]===n);return r.size===0&&t.delete(e),s},ml=t=>Mr(W8,t),Ho=t=>{if(zo.has(t))throw new Error("The AudioNode is already stored.");zo.add(t),ml(t).forEach(e=>e(!0))},AN=t=>"port"in t,pl=t=>{if(!zo.has(t))throw new Error("The AudioNode is not stored.");zo.delete(t),ml(t).forEach(e=>e(!1))},w0=(t,e)=>{!AN(t)&&e.every(A=>A.size===0)&&pl(t)},vF=(t,e,A,n,r,s,i,o,a,c,l,u,f)=>{const h=new WeakMap;return(d,m,p,w,b)=>{const{activeInputs:g,passiveInputs:x}=s(m),{outputs:_}=s(d),G=o(d),y=v=>{const O=a(m),B=a(d);if(v){const Y=tN(x,d,p,w);t(g,d,Y,!1),!b&&!u(d)&&A(B,O,p,w),f(m)&&Ho(m)}else{const Y=n(g,d,p,w);e(x,w,Y,!1),!b&&!u(d)&&r(B,O,p,w);const D=i(m);if(D===0)l(m)&&w0(m,g);else{const N=h.get(m);N!==void 0&&clearTimeout(N),h.set(m,setTimeout(()=>{l(m)&&w0(m,g)},D*1e3))}}};return c(_,[m,p,w],v=>v[0]===m&&v[1]===p&&v[2]===w,!0)?(G.add(y),l(d)?t(g,d,[p,w,y],!0):e(x,w,[d,p,y],!0),!0):!1}},DF=t=>(e,A,[n,r,s],i)=>{const o=e.get(n);o===void 0?e.set(n,new Set([[r,A,s]])):t(o,[r,A,s],a=>a[0]===r&&a[1]===A,i)},BF=t=>(e,A)=>{const n=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});A.connect(n).connect(e.destination);const r=()=>{A.removeEventListener("ended",r),A.disconnect(n),n.disconnect()};A.addEventListener("ended",r)},kF=t=>(e,A)=>{t(e).add(A)},EF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},NF=(t,e,A,n,r,s)=>class extends t{constructor(o,a){const c=r(o),l={...EF,...a},u=n(c,l),f=s(c)?e():null;super(o,!1,u,f),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const a=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=a,A()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const a=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=a,A()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},WA=(t,e)=>t.context===e,TF=(t,e,A)=>()=>{const n=new WeakMap,r=async(s,i)=>{let o=e(s);if(!WA(o,i)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(i,c)}return n.set(i,o),await A(s,i,o),o};return{render(s,i){const o=n.get(i);return o!==void 0?Promise.resolve(o):r(s,i)}}},Lh=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Xr=()=>new DOMException("","IndexSizeError"),b0=t=>{t.getChannelData=(e=>A=>{try{return e.call(t,A)}catch(n){throw n.code===12?Xr():n}})(t.getChannelData)},OF={numberOfChannels:1},YF=(t,e,A,n,r,s,i,o)=>{let a=null;return class kS{constructor(l){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:f,sampleRate:h}={...OF,...l};a===null&&(a=new r(1,1,44100));const d=n!==null&&e(s,s)?new n({length:u,numberOfChannels:f,sampleRate:h}):a.createBuffer(f,u,h);if(d.numberOfChannels===0)throw A();return typeof d.copyFromChannel!="function"?(i(d),b0(d)):e(Lh,()=>Lh(d))||o(d),t.add(d),d}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===kS.prototype||t.has(l)}}},Dn=-34028234663852886e22,an=-Dn,xs=t=>zo.has(t),SF={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},CF=(t,e,A,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),f={...SF,...l},h=r(u,f),d=i(u),m=d?e():null;super(c,!1,h,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=A(this,d,h.playbackRate,an,Dn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeAudioBufferSourceNode.onended=l;const u=this._nativeAudioBufferSourceNode.onended;this._onended=u!==null&&u===l?c:u}get playbackRate(){return this._playbackRate}start(c=0,l=0,u){if(this._nativeAudioBufferSourceNode.start(c,l,u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=u===void 0?[c,l]:[c,l,u]),this.context.state!=="closed"){Ho(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),xs(this)&&pl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},PF=(t,e,A,n,r)=>()=>{const s=new WeakMap;let i=null,o=null;const a=async(c,l)=>{let u=A(c);const f=WA(u,l);if(!f){const h={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=e(l,h),i!==null&&u.start(...i),o!==null&&u.stop(o)}return s.set(l,u),f?await t(l,c.playbackRate,u.playbackRate):await n(l,c.playbackRate,u.playbackRate),await r(c,l,u),u};return{set start(c){i=c},set stop(c){o=c},render(c,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},ZF=t=>"playbackRate"in t,IF=t=>"frequency"in t&&"gain"in t,RF=t=>"offset"in t,jF=t=>!("frequency"in t)&&"gain"in t,zF=t=>"detune"in t&&"frequency"in t&&!("gain"in t),HF=t=>"pan"in t,cn=t=>Mr(V8,t),gl=t=>Mr(q8,t),_0=(t,e)=>{const{activeInputs:A}=cn(t);A.forEach(r=>r.forEach(([s])=>{e.includes(t)||_0(s,[...e,t])}));const n=ZF(t)?[t.playbackRate]:AN(t)?Array.from(t.parameters.values()):IF(t)?[t.Q,t.detune,t.frequency,t.gain]:RF(t)?[t.offset]:jF(t)?[t.gain]:zF(t)?[t.detune,t.frequency]:HF(t)?[t.pan]:[];for(const r of n){const s=gl(r);s!==void 0&&s.activeInputs.forEach(([i])=>_0(i,e))}xs(t)&&pl(t)},nN=t=>{_0(t.destination,[])},LF=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),UF=(t,e,A,n,r,s,i,o,a)=>class extends t{constructor(l={}){if(a===null)throw new Error("Missing the native AudioContext constructor.");let u;try{u=new a(l)}catch(d){throw d.code===12&&d.message==="sampleRate is not in range"?A():d}if(u===null)throw n();if(!LF(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&u.sampleRate!==l.sampleRate)throw A();super(u,2);const{latencyHint:f}=l,{sampleRate:h}=u;if(this._baseLatency=typeof u.baseLatency=="number"?u.baseLatency:f==="balanced"?512/h:f==="interactive"||f===void 0?256/h:f==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(f*h/128)))*128/h,this._nativeAudioContext=u,a.name==="webkitAudioContext"?(this._nativeGainNode=u.createGain(),this._nativeOscillatorNode=u.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(u.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,u.state==="running"){this._state="suspended";const d=()=>{this._state==="suspended"&&(this._state=null),u.removeEventListener("statechange",d)};u.addEventListener("statechange",d)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),nN(this)}))}createMediaElementSource(l){return new r(this,{mediaElement:l})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(l){return new i(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new o(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,u)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?l():this.resume().then(l,u)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?e():l})}},FF=(t,e,A,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),f=i(u),h=r(u,l,f),d=f?e(o):null;super(c,!1,h,d),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw A();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},$F=t=>{const e=new WeakMap,A=async(n,r)=>{const s=r.destination;return e.set(r,s),await t(n,r,s),s};return{render(n,r){const s=e.get(r);return s!==void 0?Promise.resolve(s):A(n,r)}}},VF=(t,e,A,n,r,s,i,o)=>(a,c)=>{const l=c.listener,u=()=>{const _=new Float32Array(1),G=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),y=i(c);let v=!1,O=[0,0,-1,0,1,0],B=[0,0,0];const Y=()=>{if(v)return;v=!0;const Z=n(c,256,9,0);Z.onaudioprocess=({inputBuffer:R})=>{const I=[s(R,_,0),s(R,_,1),s(R,_,2),s(R,_,3),s(R,_,4),s(R,_,5)];I.some((V,q)=>V!==O[q])&&(l.setOrientation(...I),O=I);const $=[s(R,_,6),s(R,_,7),s(R,_,8)];$.some((V,q)=>V!==B[q])&&(l.setPosition(...$),B=$)},G.connect(Z)},D=Z=>R=>{R!==O[Z]&&(O[Z]=R,l.setOrientation(...O))},N=Z=>R=>{R!==B[Z]&&(B[Z]=R,l.setPosition(...B))},M=(Z,R,I)=>{const $=A(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:R});$.connect(G,0,Z),$.start(),Object.defineProperty($.offset,"defaultValue",{get(){return R}});const V=t({context:a},y,$.offset,an,Dn);return o(V,"value",q=>()=>q.call(V),q=>C=>{try{q.call(V,C)}catch(j){if(j.code!==9)throw j}Y(),y&&I(C)}),V.cancelAndHoldAtTime=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.cancelAndHoldAtTime),V.cancelScheduledValues=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.cancelScheduledValues),V.exponentialRampToValueAtTime=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.exponentialRampToValueAtTime),V.linearRampToValueAtTime=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.linearRampToValueAtTime),V.setTargetAtTime=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.setTargetAtTime),V.setValueAtTime=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.setValueAtTime),V.setValueCurveAtTime=(q=>y?()=>{throw r()}:(...C)=>{const j=q.apply(V,C);return Y(),j})(V.setValueCurveAtTime),V};return{forwardX:M(0,0,D(0)),forwardY:M(1,0,D(1)),forwardZ:M(2,-1,D(2)),positionX:M(6,0,N(0)),positionY:M(7,0,N(1)),positionZ:M(8,0,N(2)),upX:M(3,0,D(3)),upY:M(4,1,D(4)),upZ:M(5,0,D(5))}},{forwardX:f,forwardY:h,forwardZ:d,positionX:m,positionY:p,positionZ:w,upX:b,upY:g,upZ:x}=l.forwardX===void 0?u():l;return{get forwardX(){return f},get forwardY(){return h},get forwardZ(){return d},get positionX(){return m},get positionY(){return p},get positionZ(){return w},get upX(){return b},get upY(){return g},get upZ(){return x}}},Uh=t=>"context"in t,wl=t=>Uh(t[0]),qi=(t,e,A,n)=>{for(const r of t)if(A(r)){if(n)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},rN=(t,e,[A,n],r)=>{qi(t,[e,A,n],s=>s[0]===e&&s[1]===A,r)},sN=(t,[e,A,n],r)=>{const s=t.get(e);s===void 0?t.set(e,new Set([[A,n]])):qi(s,[A,n],i=>i[0]===A,r)},Lo=t=>"inputs"in t,Fh=(t,e,A,n)=>{if(Lo(e)){const r=e.inputs[n];return t.connect(r,A,0),[r,A,0]}return t.connect(e,A,n),[e,A,n]},iN=(t,e,A)=>{for(const n of t)if(n[0]===e&&n[1]===A)return t.delete(n),n;return null},qF=(t,e,A)=>Hh(t,n=>n[0]===e&&n[1]===A),oN=(t,e)=>{if(!ml(t).delete(e))throw new Error("Missing the expected event listener.")},aN=(t,e,A)=>{const n=Mr(t,e),r=Hh(n,s=>s[0]===A);return n.size===0&&t.delete(e),r},$h=(t,e,A,n)=>{Lo(e)?t.disconnect(e.inputs[n],A,0):t.disconnect(e,A,n)},Ft=t=>Mr(f0,t),bl=t=>Mr(d0,t),Wi=t=>m0.has(t),Vh=t=>!zo.has(t),cN=(t,e)=>new Promise(A=>{if(e!==null)A(!0);else{const n=t.createScriptProcessor(256,1,1),r=t.createGain(),s=t.createBuffer(1,2,44100),i=s.getChannelData(0);i[0]=1,i[1]=1;const o=t.createBufferSource();o.buffer=s,o.loop=!0,o.connect(n).connect(t.destination),o.connect(r),o.disconnect(r),n.onaudioprocess=a=>{const c=a.inputBuffer.getChannelData(0);Array.prototype.some.call(c,l=>l===1)?A(!0):A(!1),o.stop(),n.onaudioprocess=null,o.disconnect(n),n.disconnect(t.destination)},o.start()}}),x0=(t,e)=>{const A=new Map;for(const n of t)for(const r of n){const s=A.get(r);A.set(r,s===void 0?1:s+1)}A.forEach((n,r)=>e(r,n))},qh=t=>"context"in t,WF=t=>{const e=new Map;t.connect=(A=>(n,r=0,s=0)=>{const i=qh(n)?A(n,r,s):A(n,r),o=e.get(n);return o===void 0?e.set(n,[{input:s,output:r}]):o.every(a=>a.input!==s||a.output!==r)&&o.push({input:s,output:r}),i})(t.connect.bind(t)),t.disconnect=(A=>(n,r,s)=>{if(A.apply(t),n===void 0)e.clear();else if(typeof n=="number")for(const[i,o]of e){const a=o.filter(c=>c.output!==n);a.length===0?e.delete(i):e.set(i,a)}else if(e.has(n))if(r===void 0)e.delete(n);else{const i=e.get(n);if(i!==void 0){const o=i.filter(a=>a.output!==r&&(a.input!==s||s===void 0));o.length===0?e.delete(n):e.set(n,o)}}for(const[i,o]of e)o.forEach(a=>{qh(i)?t.connect(i,a.output,a.input):t.connect(i,a.output)})})(t.disconnect)},QF=(t,e,A,n)=>{const{activeInputs:r,passiveInputs:s}=gl(e),{outputs:i}=cn(t),o=ml(t),a=c=>{const l=Ft(t),u=bl(e);if(c){const f=aN(s,t,A);rN(r,t,f,!1),!n&&!Wi(t)&&l.connect(u,A)}else{const f=qF(r,t,A);sN(s,f,!1),!n&&!Wi(t)&&l.disconnect(u,A)}};return qi(i,[e,A],c=>c[0]===e&&c[1]===A,!0)?(o.add(a),xs(t)?rN(r,t,[A,a],!0):sN(s,[t,A,a],!0),!0):!1},KF=(t,e,A,n)=>{const{activeInputs:r,passiveInputs:s}=cn(e),i=iN(r[n],t,A);return i===null?[tN(s,t,A,n)[2],!1]:[i[2],!0]},JF=(t,e,A)=>{const{activeInputs:n,passiveInputs:r}=gl(e),s=iN(n,t,A);return s===null?[aN(r,t,A)[1],!1]:[s[2],!0]},y0=(t,e,A,n,r)=>{const[s,i]=KF(t,A,n,r);if(s!==null&&(oN(t,s),i&&!e&&!Wi(t)&&$h(Ft(t),Ft(A),n,r)),xs(A)){const{activeInputs:o}=cn(A);w0(A,o)}},G0=(t,e,A,n)=>{const[r,s]=JF(t,A,n);r!==null&&(oN(t,r),s&&!e&&!Wi(t)&&Ft(t).disconnect(bl(A),n))},XF=(t,e)=>{const A=cn(t),n=[];for(const r of A.outputs)wl(r)?y0(t,e,...r):G0(t,e,...r),n.push(r[0]);return A.outputs.clear(),n},e$=(t,e,A)=>{const n=cn(t),r=[];for(const s of n.outputs)s[1]===A&&(wl(s)?y0(t,e,...s):G0(t,e,...s),r.push(s[0]),n.outputs.delete(s));return r},t$=(t,e,A,n,r)=>{const s=cn(t);return Array.from(s.outputs).filter(i=>i[0]===A&&(n===void 0||i[1]===n)&&(r===void 0||i[2]===r)).map(i=>(wl(i)?y0(t,e,...i):G0(t,e,...i),s.outputs.delete(i),i[0]))},A$=(t,e,A,n,r,s,i,o,a,c,l,u,f,h,d,m)=>class extends c{constructor(w,b,g,x){super(g),this._context=w,this._nativeAudioNode=g;const _=l(w);u(_)&&A(cN,()=>cN(_,m))!==!0&&WF(g),f0.set(this,g),W8.set(this,new Set),w.state!=="closed"&&b&&Ho(this),t(this,x,g)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(w){this._nativeAudioNode.channelCount=w}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(w){this._nativeAudioNode.channelCountMode=w}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(w){this._nativeAudioNode.channelInterpretation=w}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(w,b=0,g=0){if(b<0||b>=this._nativeAudioNode.numberOfOutputs)throw r();const x=l(this._context),_=d(x);if(f(w)||h(w))throw s();if(Uh(w)){const v=Ft(w);try{const B=Fh(this._nativeAudioNode,v,b,g),Y=Vh(this);(_||Y)&&this._nativeAudioNode.disconnect(...B),this.context.state!=="closed"&&!Y&&Vh(w)&&Ho(w)}catch(B){throw B.code===12?s():B}if(e(this,w,b,g,_)){const B=a([this],w);x0(B,n(_))}return w}const G=bl(w);if(G.name==="playbackRate"&&G.maxValue===1024)throw i();try{this._nativeAudioNode.connect(G,b),(_||Vh(this))&&this._nativeAudioNode.disconnect(G,b)}catch(v){throw v.code===12?s():v}if(QF(this,w,b,_)){const v=a([this],w);x0(v,n(_))}}disconnect(w,b,g){let x;const _=l(this._context),G=d(_);if(w===void 0)x=XF(this,G);else if(typeof w=="number"){if(w<0||w>=this.numberOfOutputs)throw r();x=e$(this,G,w)}else{if(b!==void 0&&(b<0||b>=this.numberOfOutputs)||Uh(w)&&g!==void 0&&(g<0||g>=w.numberOfInputs))throw r();if(x=t$(this,G,w,b,g),x.length===0)throw s()}for(const y of x){const v=a([this],y);x0(v,o)}}},n$=(t,e,A,n,r,s,i,o,a,c,l,u,f)=>(h,d,m,p=null,w=null)=>{const b=m.value,g=new fF(b),x=d?n(g):null,_={get defaultValue(){return b},get maxValue(){return p===null?m.maxValue:p},get minValue(){return w===null?m.minValue:w},get value(){return m.value},set value(G){m.value=G,_.setValueAtTime(G,h.context.currentTime)},cancelAndHoldAtTime(G){if(typeof m.cancelAndHoldAtTime=="function")x===null&&g.flush(h.context.currentTime),g.add(r(G)),m.cancelAndHoldAtTime(G);else{const y=Array.from(g).pop();x===null&&g.flush(h.context.currentTime),g.add(r(G));const v=Array.from(g).pop();m.cancelScheduledValues(G),y!==v&&v!==void 0&&(v.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(v.value,v.endTime):v.type==="linearRampToValue"?m.linearRampToValueAtTime(v.value,v.endTime):v.type==="setValue"?m.setValueAtTime(v.value,v.startTime):v.type==="setValueCurve"&&m.setValueCurveAtTime(v.values,v.startTime,v.duration))}return _},cancelScheduledValues(G){return x===null&&g.flush(h.context.currentTime),g.add(s(G)),m.cancelScheduledValues(G),_},exponentialRampToValueAtTime(G,y){if(G===0)throw new RangeError;if(!Number.isFinite(y)||y<0)throw new RangeError;const v=h.context.currentTime;return x===null&&g.flush(v),Array.from(g).length===0&&(g.add(c(b,v)),m.setValueAtTime(b,v)),g.add(i(G,y)),m.exponentialRampToValueAtTime(G,y),_},linearRampToValueAtTime(G,y){const v=h.context.currentTime;return x===null&&g.flush(v),Array.from(g).length===0&&(g.add(c(b,v)),m.setValueAtTime(b,v)),g.add(o(G,y)),m.linearRampToValueAtTime(G,y),_},setTargetAtTime(G,y,v){return x===null&&g.flush(h.context.currentTime),g.add(a(G,y,v)),m.setTargetAtTime(G,y,v),_},setValueAtTime(G,y){return x===null&&g.flush(h.context.currentTime),g.add(c(G,y)),m.setValueAtTime(G,y),_},setValueCurveAtTime(G,y,v){const O=G instanceof Float32Array?G:new Float32Array(G);if(u!==null&&u.name==="webkitAudioContext"){const B=y+v,Y=h.context.sampleRate,D=Math.ceil(y*Y),N=Math.floor(B*Y),M=N-D,Z=new Float32Array(M);for(let I=0;I<M;I+=1){const $=(O.length-1)/v*((D+I)/Y-y),V=Math.floor($),q=Math.ceil($);Z[I]=V===q?O[V]:(1-($-V))*O[V]+(1-(q-$))*O[q]}x===null&&g.flush(h.context.currentTime),g.add(l(Z,y,v)),m.setValueCurveAtTime(Z,y,v);const R=N/Y;R<B&&f(_,Z[Z.length-1],R),f(_,O[O.length-1],B)}else x===null&&g.flush(h.context.currentTime),g.add(l(O,y,v)),m.setValueCurveAtTime(O,y,v);return _}};return A.set(_,m),e.set(_,h),t(_,x),_},r$=t=>({replay(e){for(const A of t)if(A.type==="exponentialRampToValue"){const{endTime:n,value:r}=A;e.exponentialRampToValueAtTime(r,n)}else if(A.type==="linearRampToValue"){const{endTime:n,value:r}=A;e.linearRampToValueAtTime(r,n)}else if(A.type==="setTarget"){const{startTime:n,target:r,timeConstant:s}=A;e.setTargetAtTime(r,n,s)}else if(A.type==="setValue"){const{startTime:n,value:r}=A;e.setValueAtTime(r,n)}else if(A.type==="setValueCurve"){const{duration:n,startTime:r,values:s}=A;e.setValueCurveAtTime(s,r,n)}else throw new Error("Can't apply an unknown automation.")}});class lN{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,A=null){return this._map.forEach((n,r)=>e.call(A,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const s$={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},i$=(t,e,A,n,r,s,i,o,a,c,l,u,f,h)=>class extends e{constructor(m,p,w){var b;const g=o(m),x=a(g),_=l({...s$,...w});f(_);const G=p0.get(g),y=G?.get(p),v=x||g.state!=="closed"?g:(b=i(g))!==null&&b!==void 0?b:g,O=r(v,x?null:m.baseLatency,c,p,y,_),B=x?n(p,_,y):null;super(m,!0,O,B);const Y=[];O.parameters.forEach((N,M)=>{const Z=A(this,x,N);Y.push([M,Z])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new lN(Y),x&&t(g,this);const{activeInputs:D}=s(this);u(O,D)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const p=typeof m=="function"?h(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=p;const w=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=w!==null&&w===p?m:w}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Wh(t,e,A,n,r){if(typeof t.copyFromChannel=="function")e[A].byteLength===0&&(e[A]=new Float32Array(128)),t.copyFromChannel(e[A],n,r);else{const s=t.getChannelData(n);if(e[A].byteLength===0)e[A]=s.slice(r,r+128);else{const i=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[A].set(i)}}}const uN=(t,e,A,n,r)=>{typeof t.copyToChannel=="function"?e[A].byteLength!==0&&t.copyToChannel(e[A],n,r):e[A].byteLength!==0&&t.getChannelData(n).set(e[A],r)},Qh=(t,e)=>{const A=[];for(let n=0;n<t;n+=1){const r=[],s=typeof e=="number"?e:e[n];for(let i=0;i<s;i+=1)r.push(new Float32Array(128));A.push(r)}return A},o$=(t,e)=>{const A=Mr(g0,t),n=Ft(e);return Mr(A,n)},a$=async(t,e,A,n,r,s,i)=>{const o=e===null?Math.ceil(t.context.length/128)*128:e.length,a=n.channelCount*n.numberOfInputs,c=r.reduce((p,w)=>p+w,0),l=c===0?null:A.createBuffer(c,o,A.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const u=cn(t),f=await o$(A,t),h=Qh(n.numberOfInputs,n.channelCount),d=Qh(n.numberOfOutputs,r),m=Array.from(t.parameters.keys()).reduce((p,w)=>({...p,[w]:new Float32Array(128)}),{});for(let p=0;p<o;p+=128){if(n.numberOfInputs>0&&e!==null)for(let w=0;w<n.numberOfInputs;w+=1)for(let b=0;b<n.channelCount;b+=1)Wh(e,h[w],b,b,p);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:w},b)=>{Wh(e,m,w,a+b,p)});for(let w=0;w<n.numberOfInputs;w+=1)for(let b=0;b<r[w];b+=1)d[w][b].byteLength===0&&(d[w][b]=new Float32Array(128));try{const w=h.map((g,x)=>u.activeInputs[x].size===0?[]:g),b=i(p/A.sampleRate,A.sampleRate,()=>f.process(w,d,m));if(l!==null)for(let g=0,x=0;g<n.numberOfOutputs;g+=1){for(let _=0;_<r[g];_+=1)uN(l,d[g],_,x+_,p);x+=r[g]}if(!b)break}catch(w){t.dispatchEvent(new ErrorEvent("processorerror",{colno:w.colno,filename:w.filename,lineno:w.lineno,message:w.message}));break}}return l},c$=(t,e,A,n,r,s,i,o,a,c,l,u,f,h,d,m)=>(p,w,b)=>{const g=new WeakMap;let x=null;const _=async(G,y)=>{let v=l(G),O=null;const B=WA(v,y),Y=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(u===null){const D=Y.reduce((R,I)=>R+I,0),N=r(y,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),M=[];for(let R=0;R<G.numberOfOutputs;R+=1)M.push(n(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Y[R]}));const Z=i(y,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1});Z.connect=e.bind(null,M),Z.disconnect=a.bind(null,M),O=[N,M,Z]}else B||(v=new u(y,p));if(g.set(y,O===null?v:O[2]),O!==null){if(x===null){if(b===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=G.channelCount*G.numberOfInputs,$=b.parameterDescriptors===void 0?0:b.parameterDescriptors.length,V=I+$;x=a$(G,V===0?null:await(async()=>{const C=new f(V,Math.ceil(G.context.length/128)*128,y.sampleRate),j=[],te=[];for(let fe=0;fe<w.numberOfInputs;fe+=1)j.push(i(C,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),te.push(r(C,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const W=await Promise.all(Array.from(G.parameters.values()).map(async fe=>{const be=s(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe.value});return await h(C,fe,be.offset),be})),J=n(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+$)});for(let fe=0;fe<w.numberOfInputs;fe+=1){j[fe].connect(te[fe]);for(let be=0;be<w.channelCount;be+=1)te[fe].connect(J,be,fe*w.channelCount+be)}for(const[fe,be]of W.entries())be.connect(J,0,I+fe),be.start(0);return J.connect(C.destination),await Promise.all(j.map(fe=>d(G,C,fe))),m(C)})(),y,w,Y,b,c)}const D=await x,N=A(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[M,Z,R]=O;D!==null&&(N.buffer=D,N.start(0)),N.connect(M);for(let I=0,$=0;I<G.numberOfOutputs;I+=1){const V=Z[I];for(let q=0;q<Y[I];q+=1)M.connect(V,$+q,q);$+=Y[I]}return R}if(B)for(const[D,N]of G.parameters.entries())await t(y,N,v.parameters.get(D));else for(const[D,N]of G.parameters.entries())await h(y,N,v.parameters.get(D));return await d(G,y,v),v};return{render(G,y){o(y,G);const v=g.get(y);return v!==void 0?Promise.resolve(v):_(G,y)}}},l$=(t,e,A,n,r,s,i,o,a,c,l,u,f,h,d,m,p,w,b,g)=>class extends d{constructor(_,G){super(_,G),this._nativeContext=_,this._audioWorklet=t===void 0?void 0:{addModule:(y,v)=>t(this,y,v)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(_,G,y){return new A({length:G,numberOfChannels:_,sampleRate:y})}createBufferSource(){return new n(this)}createChannelMerger(_=6){return new s(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new i(this,{numberOfOutputs:_})}createConstantSource(){return new o(this)}createConvolver(){return new a(this)}createDelay(_=1){return new l(this,{maxDelayTime:_})}createDynamicsCompressor(){return new u(this)}createGain(){return new f(this)}createIIRFilter(_,G){return new h(this,{feedback:G,feedforward:_})}createOscillator(){return new m(this)}createPanner(){return new p(this)}createPeriodicWave(_,G,y={disableNormalization:!1}){return new w(this,{...y,imag:G,real:_})}createStereoPanner(){return new b(this)}createWaveShaper(){return new g(this)}decodeAudioData(_,G,y){return c(this._nativeContext,_).then(v=>(typeof G=="function"&&G(v),v),v=>{throw typeof y=="function"&&y(v),v})}},u$={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},h$=(t,e,A,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),f={...u$,...l},h=r(u,f),d=i(u),m=d?A():null;super(c,!1,h,m),this._Q=e(this,d,h.Q,an,Dn),this._detune=e(this,d,h.detune,1200*Math.log2(an),-1200*Math.log2(an)),this._frequency=e(this,d,h.frequency,c.sampleRate/2,0),this._gain=e(this,d,h.gain,40*Math.log10(an),Dn),this._nativeBiquadFilterNode=h,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,l,u){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,l,u)}catch(f){throw f.code===11?n():f}if(c.length!==l.length||l.length!==u.length)throw n()}},f$=(t,e,A,n,r)=>()=>{const s=new WeakMap,i=async(o,a)=>{let c=A(o);const l=WA(c,a);if(!l){const u={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(a,u)}return s.set(a,c),l?(await t(a,o.Q,c.Q),await t(a,o.detune,c.detune),await t(a,o.frequency,c.frequency),await t(a,o.gain,c.gain)):(await n(a,o.Q,c.Q),await n(a,o.detune,c.detune),await n(a,o.frequency,c.frequency),await n(a,o.gain,c.gain)),await r(o,a,c),c};return{render(o,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):i(o,a)}}},d$=(t,e)=>(A,n)=>{const r=e.get(A);if(r!==void 0)return r;const s=t.get(A);if(s!==void 0)return s;try{const i=n();return i instanceof Promise?(t.set(A,i),i.catch(()=>!1).then(o=>(t.delete(A),e.set(A,o),o))):(e.set(A,i),i)}catch{return e.set(A,!1),!1}},m$={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},p$=(t,e,A,n,r)=>class extends t{constructor(i,o){const a=n(i),c={...m$,...o},l=A(a,c),u=r(a)?e():null;super(i,!1,l,u)}},g$=(t,e,A)=>()=>{const n=new WeakMap,r=async(s,i)=>{let o=e(s);if(!WA(o,i)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(i,c)}return n.set(i,o),await A(s,i,o),o};return{render(s,i){const o=n.get(i);return o!==void 0?Promise.resolve(o):r(s,i)}}},w$={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},b$=(t,e,A,n,r,s)=>class extends t{constructor(o,a){const c=n(o),l=s({...w$,...a}),u=A(c,l),f=r(c)?e():null;super(o,!1,u,f)}},_$=(t,e,A)=>()=>{const n=new WeakMap,r=async(s,i)=>{let o=e(s);if(!WA(o,i)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(i,c)}return n.set(i,o),await A(s,i,o),o};return{render(s,i){const o=n.get(i);return o!==void 0?Promise.resolve(o):r(s,i)}}},x$=t=>(e,A,n)=>t(A,e,n),y$=t=>(e,A,n=0,r=0)=>{const s=e[n];if(s===void 0)throw t();return qh(A)?s.connect(A,0,r):s.connect(A,0)},G$=t=>(e,A)=>{const n=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return n.buffer=r,n.loop=!0,n.connect(A),n.start(),()=>{n.stop(),n.disconnect(A)}},M$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},v$=(t,e,A,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...M$,...c},f=n(l,u),h=s(l),d=h?A():null;super(a,!1,f,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=f,this._offset=e(this,h,f.offset,an,Dn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(a){const c=typeof a=="function"?i(this,a):null;this._nativeConstantSourceNode.onended=c;const l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===c?a:l}start(a=0){if(this._nativeConstantSourceNode.start(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=a),this.context.state!=="closed"){Ho(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),xs(this)&&pl(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(a=0){this._nativeConstantSourceNode.stop(a),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=a)}},D$=(t,e,A,n,r)=>()=>{const s=new WeakMap;let i=null,o=null;const a=async(c,l)=>{let u=A(c);const f=WA(u,l);if(!f){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=e(l,h),i!==null&&u.start(i),o!==null&&u.stop(o)}return s.set(l,u),f?await t(l,c.offset,u.offset):await n(l,c.offset,u.offset),await r(c,l,u),u};return{set start(c){i=c},set stop(c){o=c},render(c,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},B$=t=>e=>(t[0]=e,t[0]),k$={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},E$=(t,e,A,n,r,s)=>class extends t{constructor(o,a){const c=n(o),l={...k$,...a},u=A(c,l),h=r(c)?e():null;super(o,!1,u,h),this._isBufferNullified=!1,this._nativeConvolverNode=u,l.buffer!==null&&s(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const a=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=a.createBuffer(1,1,a.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},N$=(t,e,A)=>()=>{const n=new WeakMap,r=async(s,i)=>{let o=e(s);if(!WA(o,i)){const c={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(i,c)}return n.set(i,o),Lo(o)?await A(s,i,o.inputs[0]):await A(s,i,o),o};return{render(s,i){const o=n.get(i);return o!==void 0?Promise.resolve(o):r(s,i)}}},T$=(t,e)=>(A,n,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(A,n,r)}catch(s){throw s.name==="SyntaxError"?t():s}},O$=()=>new DOMException("","DataCloneError"),hN=t=>{const{port1:e,port2:A}=new MessageChannel;return new Promise(n=>{const r=()=>{A.onmessage=null,e.close(),A.close(),n()};A.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},Y$=(t,e,A,n,r,s,i,o,a,c,l)=>(u,f)=>{const h=i(u)?u:s(u);if(r.has(f)){const d=A();return Promise.reject(d)}try{r.add(f)}catch{}return e(a,()=>a(h))?h.decodeAudioData(f).then(d=>(hN(f).catch(()=>{}),e(o,()=>o(d))||l(d),t.add(d),d)):new Promise((d,m)=>{const p=async()=>{try{await hN(f)}catch{}},w=b=>{m(b),p()};try{h.decodeAudioData(f,b=>{typeof b.copyFromChannel!="function"&&(c(b),b0(b)),t.add(b),p().then(()=>d(b))},b=>{w(b===null?n():b)})}catch(b){w(b)}})},S$=(t,e,A,n,r,s,i,o)=>(a,c)=>{const l=e.get(a);if(l===void 0)throw new Error("Missing the expected cycle count.");const u=s(a.context),f=o(u);if(l===c){if(e.delete(a),!f&&i(a)){const h=n(a),{outputs:d}=A(a);for(const m of d)if(wl(m)){const p=n(m[0]);t(h,p,m[1],m[2])}else{const p=r(m[0]);h.connect(p,m[1])}}}else e.set(a,l-c)},C$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},P$=(t,e,A,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...C$,...c},f=n(l,u),h=s(l),d=h?A(u.maxDelayTime):null;super(a,!1,f,d),this._delayTime=e(this,h,f.delayTime),i(this,u.maxDelayTime)}get delayTime(){return this._delayTime}},Z$=(t,e,A,n,r)=>s=>{const i=new WeakMap,o=async(a,c)=>{let l=A(a);const u=WA(l,c);if(!u){const f={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:s};l=e(c,f)}return i.set(c,l),u?await t(c,a.delayTime,l.delayTime):await n(c,a.delayTime,l.delayTime),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},I$=t=>(e,A,n,r)=>t(e[r],s=>s[0]===A&&s[1]===n),R$=t=>(e,A)=>{t(e).delete(A)},j$=t=>"delayTime"in t,z$=(t,e,A)=>function n(r,s){const i=Uh(s)?s:A(t,s);if(j$(i))return[];if(r[0]===i)return[r];if(r.includes(i))return[];const{outputs:o}=e(i);return Array.from(o).map(a=>n([...r,i],a[0])).reduce((a,c)=>a.concat(c),[])},Kh=(t,e,A)=>{const n=e[A];if(n===void 0)throw t();return n},H$=t=>(e,A=void 0,n=void 0,r=0)=>A===void 0?e.forEach(s=>s.disconnect()):typeof A=="number"?Kh(t,e,A).disconnect():qh(A)?n===void 0?e.forEach(s=>s.disconnect(A)):r===void 0?Kh(t,e,n).disconnect(A,0):Kh(t,e,n).disconnect(A,0,r):n===void 0?e.forEach(s=>s.disconnect(A)):Kh(t,e,n).disconnect(A,0),L$={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},U$=(t,e,A,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),f={...L$,...l},h=n(u,f),d=i(u),m=d?A():null;super(c,!1,h,m),this._attack=e(this,d,h.attack),this._knee=e(this,d,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,d,h.ratio),this._release=e(this,d,h.release),this._threshold=e(this,d,h.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=l,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},F$=(t,e,A,n,r)=>()=>{const s=new WeakMap,i=async(o,a)=>{let c=A(o);const l=WA(c,a);if(!l){const u={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(a,u)}return s.set(a,c),l?(await t(a,o.attack,c.attack),await t(a,o.knee,c.knee),await t(a,o.ratio,c.ratio),await t(a,o.release,c.release),await t(a,o.threshold,c.threshold)):(await n(a,o.attack,c.attack),await n(a,o.knee,c.knee),await n(a,o.ratio,c.ratio),await n(a,o.release,c.release),await n(a,o.threshold,c.threshold)),await r(o,a,c),c};return{render(o,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):i(o,a)}}},$$=()=>new DOMException("","EncodingError"),V$=t=>e=>new Promise((A,n)=>{if(t===null){n(new SyntaxError);return}const r=t.document.head;if(r===null)n(new SyntaxError);else{const s=t.document.createElement("script"),i=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(i),a=t.onerror,c=()=>{t.onerror=a,URL.revokeObjectURL(o)};t.onerror=(l,u,f,h,d)=>{if(u===o||u===t.location.href&&f===1&&h===1)return c(),n(d),!1;if(a!==null)return a(l,u,f,h,d)},s.onerror=()=>{c(),n(new SyntaxError)},s.onload=()=>{c(),A()},s.src=o,s.type="module",r.appendChild(s)}}),q$=t=>class{constructor(A){this._nativeEventTarget=A,this._listeners=new WeakMap}addEventListener(A,n,r){if(n!==null){let s=this._listeners.get(n);s===void 0&&(s=t(this,n),typeof n=="function"&&this._listeners.set(n,s)),this._nativeEventTarget.addEventListener(A,s,r)}}dispatchEvent(A){return this._nativeEventTarget.dispatchEvent(A)}removeEventListener(A,n,r){const s=n===null?void 0:this._listeners.get(n);this._nativeEventTarget.removeEventListener(A,s===void 0?null:s,r)}},W$=t=>(e,A,n)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*A)}},currentTime:{configurable:!0,get(){return e}}});try{return n()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},Q$=t=>async e=>{try{const A=await fetch(e);if(A.ok)return[await A.text(),A.url]}catch{}throw t()},K$={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},J$=(t,e,A,n,r,s)=>class extends t{constructor(o,a){const c=r(o),l={...K$,...a},u=n(c,l),f=s(c),h=f?A():null;super(o,!1,u,h),this._gain=e(this,f,u.gain,an,Dn)}get gain(){return this._gain}},X$=(t,e,A,n,r)=>()=>{const s=new WeakMap,i=async(o,a)=>{let c=A(o);const l=WA(c,a);if(!l){const u={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(a,u)}return s.set(a,c),l?await t(a,o.gain,c.gain):await n(a,o.gain,c.gain),await r(o,a,c),c};return{render(o,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):i(o,a)}}},e7=(t,e)=>A=>e(t,A),t7=t=>e=>{const A=t(e);if(A.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return A.renderer},A7=t=>e=>{var A;return(A=t.get(e))!==null&&A!==void 0?A:0},n7=t=>e=>{const A=t(e);if(A.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return A.renderer},r7=t=>e=>t.get(e),PA=()=>new DOMException("","InvalidStateError"),s7=t=>e=>{const A=t.get(e);if(A===void 0)throw PA();return A},i7=(t,e)=>A=>{let n=t.get(A);if(n!==void 0)return n;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,44100),t.set(A,n),n},o7=t=>e=>{const A=t.get(e);if(A===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return A},Jh=()=>new DOMException("","InvalidAccessError"),a7=t=>{t.getFrequencyResponse=(e=>(A,n,r)=>{if(A.length!==n.length||n.length!==r.length)throw Jh();return e.call(t,A,n,r)})(t.getFrequencyResponse)},c7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},l7=(t,e,A,n,r,s)=>class extends t{constructor(o,a){const c=n(o),l=r(c),u={...c7,...a},f=e(c,l?null:o.baseLatency,u),h=l?A(u.feedback,u.feedforward):null;super(o,!1,f,h),a7(f),this._nativeIIRFilterNode=f,s(this,1)}getFrequencyResponse(o,a,c){return this._nativeIIRFilterNode.getFrequencyResponse(o,a,c)}},fN=(t,e,A,n,r,s,i,o,a,c,l)=>{const u=c.length;let f=o;for(let h=0;h<u;h+=1){let d=A[0]*c[h];for(let m=1;m<r;m+=1){const p=f-m&a-1;d+=A[m]*s[p],d-=t[m]*i[p]}for(let m=r;m<n;m+=1)d+=A[m]*s[f-m&a-1];for(let m=r;m<e;m+=1)d-=t[m]*i[f-m&a-1];s[f]=c[h],i[f]=d,f=f+1&a-1,l[h]=d}return f},u7=(t,e,A,n)=>{const r=A instanceof Float64Array?A:new Float64Array(A),s=n instanceof Float64Array?n:new Float64Array(n),i=r.length,o=s.length,a=Math.min(i,o);if(r[0]!==1){for(let d=0;d<i;d+=1)s[d]/=r[0];for(let d=1;d<o;d+=1)r[d]/=r[0]}const c=32,l=new Float32Array(c),u=new Float32Array(c),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),h=t.numberOfChannels;for(let d=0;d<h;d+=1){const m=t.getChannelData(d),p=f.getChannelData(d);l.fill(0),u.fill(0),fN(r,i,s,o,a,l,u,0,c,m,p)}return f},h7=(t,e,A,n,r)=>(s,i)=>{const o=new WeakMap;let a=null;const c=async(l,u)=>{let f=null,h=e(l);const d=WA(h,u);if(u.createIIRFilter===void 0?f=t(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(h=u.createIIRFilter(i,s)),o.set(u,f===null?h:f),f!==null){if(a===null){if(A===null)throw new Error("Missing the native OfflineAudioContext constructor.");const p=new A(l.context.destination.channelCount,l.context.length,u.sampleRate);a=(async()=>{await n(l,p,p.destination);const w=await r(p);return u7(w,u,s,i)})()}const m=await a;return f.buffer=m,f.start(0),f}return await n(l,u,h),h};return{render(l,u){const f=o.get(u);return f!==void 0?Promise.resolve(f):c(l,u)}}},f7=(t,e,A,n,r,s)=>i=>(o,a)=>{const c=t.get(o);if(c===void 0){if(!i&&s(o)){const l=n(o),{outputs:u}=A(o);for(const f of u)if(wl(f)){const h=n(f[0]);e(l,h,f[1],f[2])}else{const h=r(f[0]);l.disconnect(h,f[1])}}t.set(o,a)}else t.set(o,c+a)},d7=(t,e)=>A=>{const n=t.get(A);return e(n)||e(A)},m7=(t,e)=>A=>t.has(A)||e(A),p7=(t,e)=>A=>t.has(A)||e(A),g7=(t,e)=>A=>{const n=t.get(A);return e(n)||e(A)},w7=t=>e=>t!==null&&e instanceof t,b7=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,_7=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,x7=(t,e)=>A=>t(A)||e(A),y7=t=>e=>t!==null&&e instanceof t,G7=t=>t!==null&&t.isSecureContext,M7=(t,e,A,n)=>class extends t{constructor(s,i){const o=A(s),a=e(o,i);if(n(o))throw TypeError();super(s,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},v7={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},D7=(t,e,A,n)=>class extends t{constructor(s,i){const o=A(s);if(n(o))throw new TypeError;const a={...v7,...i},c=e(o,a);super(s,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},B7=(t,e,A,n)=>class extends t{constructor(s,i){const o=A(s),a=e(o,i);if(n(o))throw new TypeError;super(s,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},k7=(t,e,A)=>class extends t{constructor(r,s){const i=A(r),o=e(i,s);super(r,!0,o,null)}},E7=(t,e,A,n,r,s)=>class extends A{constructor(o,a){super(o),this._nativeContext=o,zh.set(this,o),n(o)&&r.set(o,new Set),this._destination=new t(this,a),this._listener=e(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const a=typeof o=="function"?s(this,o):null;this._nativeContext.onstatechange=a;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===a?o:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},_l=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const A=t.decodeAudioData(e.buffer,()=>{});return A===void 0?!1:(A.catch(()=>{}),!0)}catch{}return!1},N7=(t,e)=>(A,n,r)=>{const s=new Set;return A.connect=(i=>(o,a=0,c=0)=>{const l=s.size===0;if(e(o))return i.call(A,o,a,c),t(s,[o,a,c],u=>u[0]===o&&u[1]===a&&u[2]===c,!0),l&&n(),o;i.call(A,o,a),t(s,[o,a],u=>u[0]===o&&u[1]===a,!0),l&&n()})(A.connect),A.disconnect=(i=>(o,a,c)=>{const l=s.size>0;if(o===void 0)i.apply(A),s.clear();else if(typeof o=="number"){i.call(A,o);for(const f of s)f[1]===o&&s.delete(f)}else{e(o)?i.call(A,o,a,c):i.call(A,o,a);for(const f of s)f[0]===o&&(a===void 0||f[1]===a)&&(c===void 0||f[2]===c)&&s.delete(f)}const u=s.size===0;l&&u&&r()})(A.disconnect),A},Vt=(t,e,A)=>{const n=e[A];n!==void 0&&n!==t[A]&&(t[A]=n)},NA=(t,e)=>{Vt(t,e,"channelCount"),Vt(t,e,"channelCountMode"),Vt(t,e,"channelInterpretation")},dN=t=>typeof t.getFloatTimeDomainData=="function",T7=t=>{t.getFloatTimeDomainData=e=>{const A=new Uint8Array(e.length);t.getByteTimeDomainData(A);const n=Math.max(A.length,t.fftSize);for(let r=0;r<n;r+=1)e[r]=(A[r]-128)*.0078125;return e}},O7=(t,e)=>(A,n)=>{const r=A.createAnalyser();if(NA(r,n),!(n.maxDecibels>n.minDecibels))throw e();return Vt(r,n,"fftSize"),Vt(r,n,"maxDecibels"),Vt(r,n,"minDecibels"),Vt(r,n,"smoothingTimeConstant"),t(dN,()=>dN(r))||T7(r),r},Y7=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,cA=(t,e,A)=>{const n=e[A];n!==void 0&&n!==t[A].value&&(t[A].value=n)},S7=t=>{t.start=(e=>{let A=!1;return(n=0,r=0,s)=>{if(A)throw PA();e.call(t,n,r,s),A=!0}})(t.start)},M0=t=>{t.start=(e=>(A=0,n=0,r)=>{if(typeof r=="number"&&r<0||n<0||A<0)throw new RangeError("The parameters can't be negative.");e.call(t,A,n,r)})(t.start)},v0=t=>{t.stop=(e=>(A=0)=>{if(A<0)throw new RangeError("The parameter can't be negative.");e.call(t,A)})(t.stop)},C7=(t,e,A,n,r,s,i,o,a,c,l)=>(u,f)=>{const h=u.createBufferSource();return NA(h,f),cA(h,f,"playbackRate"),Vt(h,f,"buffer"),Vt(h,f,"loop"),Vt(h,f,"loopEnd"),Vt(h,f,"loopStart"),e(A,()=>A(u))||S7(h),e(n,()=>n(u))||a(h),e(r,()=>r(u))||c(h,u),e(s,()=>s(u))||M0(h),e(i,()=>i(u))||l(h,u),e(o,()=>o(u))||v0(h),t(u,h),h},P7=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Z7=(t,e)=>(A,n,r)=>{const s=A.destination;if(s.channelCount!==n)try{s.channelCount=n}catch{}r&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:n});const i=t(A,{channelCount:n,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(i,"channelCount",o=>()=>o.call(i),o=>a=>{o.call(i,a);try{s.channelCount=a}catch(c){if(a>s.maxChannelCount)throw c}}),e(i,"channelCountMode",o=>()=>o.call(i),o=>a=>{o.call(i,a),s.channelCountMode=a}),e(i,"channelInterpretation",o=>()=>o.call(i),o=>a=>{o.call(i,a),s.channelInterpretation=a}),Object.defineProperty(i,"maxChannelCount",{get:()=>s.maxChannelCount}),i.connect(s),i},I7=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,R7=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},j7=(t,e,A,n,r)=>(s,i,o,a,c,l)=>{if(o!==null)try{const u=new o(s,a,l),f=new Map;let h=null;if(Object.defineProperties(u,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>h,set:d=>{typeof h=="function"&&u.removeEventListener("processorerror",h),h=typeof d=="function"?d:null,typeof h=="function"&&u.addEventListener("processorerror",h)}}}),u.addEventListener=(d=>(...m)=>{if(m[0]==="processorerror"){const p=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(p!==null){const w=f.get(m[1]);w!==void 0?m[1]=w:(m[1]=b=>{b.type==="error"?(Object.defineProperties(b,{type:{value:"processorerror"}}),p(b)):p(new ErrorEvent(m[0],{...b}))},f.set(p,m[1]))}}return d.call(u,"error",m[1],m[2]),d.call(u,...m)})(u.addEventListener),u.removeEventListener=(d=>(...m)=>{if(m[0]==="processorerror"){const p=f.get(m[1]);p!==void 0&&(f.delete(m[1]),m[1]=p)}return d.call(u,"error",m[1],m[2]),d.call(u,m[0],m[1],m[2])})(u.removeEventListener),l.numberOfOutputs!==0){const d=A(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return u.connect(d).connect(s.destination),r(u,()=>d.disconnect(),()=>d.connect(s.destination))}return u}catch(u){throw u.code===11?n():u}if(c===void 0)throw n();return R7(l),e(s,i,c,l)},mN=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),z7=t=>new Promise((e,A)=>{const{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:s})=>{n.close(),r.close(),e(s)},n.onmessageerror=({data:s})=>{n.close(),r.close(),A(s)},r.postMessage(t)}),H7=async(t,e)=>{const A=await z7(e);return new t(A)},L7=(t,e,A,n)=>{let r=g0.get(t);r===void 0&&(r=new WeakMap,g0.set(t,r));const s=H7(A,n);return r.set(e,s),s},U7=(t,e,A,n,r,s,i,o,a,c,l,u,f)=>(h,d,m,p)=>{if(p.numberOfInputs===0&&p.numberOfOutputs===0)throw a();const w=Array.isArray(p.outputChannelCount)?p.outputChannelCount:Array.from(p.outputChannelCount);if(w.some(X=>X<1))throw a();if(w.length!==p.numberOfOutputs)throw e();if(p.channelCountMode!=="explicit")throw a();const b=p.channelCount*p.numberOfInputs,g=w.reduce((X,ee)=>X+ee,0),x=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(b+x>6||g>6)throw a();const _=new MessageChannel,G=[],y=[];for(let X=0;X<p.numberOfInputs;X+=1)G.push(i(h,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),y.push(r(h,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const v=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:X,maxValue:ee,minValue:U,name:H}of m.parameterDescriptors){const Q=s(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:p.parameterData[H]!==void 0?p.parameterData[H]:X===void 0?0:X});Object.defineProperties(Q.offset,{defaultValue:{get:()=>X===void 0?0:X},maxValue:{get:()=>ee===void 0?an:ee},minValue:{get:()=>U===void 0?Dn:U}}),v.push(Q)}const O=n(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,b+x)}),B=mN(d,h.sampleRate),Y=o(h,B,b+x,Math.max(1,g)),D=r(h,{channelCount:Math.max(1,g),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,g)}),N=[];for(let X=0;X<p.numberOfOutputs;X+=1)N.push(n(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:w[X]}));for(let X=0;X<p.numberOfInputs;X+=1){G[X].connect(y[X]);for(let ee=0;ee<p.channelCount;ee+=1)y[X].connect(O,ee,X*p.channelCount+ee)}const M=new lN(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:X},ee)=>{const U=v[ee];return U.connect(O,0,b+ee),U.start(0),[X,U.offset]}));O.connect(Y);let Z=p.channelInterpretation,R=null;const I=p.numberOfOutputs===0?[Y]:N,$={get bufferSize(){return B},get channelCount(){return p.channelCount},set channelCount(X){throw A()},get channelCountMode(){return p.channelCountMode},set channelCountMode(X){throw A()},get channelInterpretation(){return Z},set channelInterpretation(X){for(const ee of G)ee.channelInterpretation=X;Z=X},get context(){return Y.context},get inputs(){return G},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(X){typeof R=="function"&&$.removeEventListener("processorerror",R),R=typeof X=="function"?X:null,typeof R=="function"&&$.addEventListener("processorerror",R)},get parameters(){return M},get port(){return _.port2},addEventListener(...X){return Y.addEventListener(X[0],X[1],X[2])},connect:t.bind(null,I),disconnect:c.bind(null,I),dispatchEvent(...X){return Y.dispatchEvent(X[0])},removeEventListener(...X){return Y.removeEventListener(X[0],X[1],X[2])}},V=new Map;_.port1.addEventListener=(X=>(...ee)=>{if(ee[0]==="message"){const U=typeof ee[1]=="function"?ee[1]:typeof ee[1]=="object"&&ee[1]!==null&&typeof ee[1].handleEvent=="function"?ee[1].handleEvent:null;if(U!==null){const H=V.get(ee[1]);H!==void 0?ee[1]=H:(ee[1]=Q=>{l(h.currentTime,h.sampleRate,()=>U(Q))},V.set(U,ee[1]))}}return X.call(_.port1,ee[0],ee[1],ee[2])})(_.port1.addEventListener),_.port1.removeEventListener=(X=>(...ee)=>{if(ee[0]==="message"){const U=V.get(ee[1]);U!==void 0&&(V.delete(ee[1]),ee[1]=U)}return X.call(_.port1,ee[0],ee[1],ee[2])})(_.port1.removeEventListener);let q=null;Object.defineProperty(_.port1,"onmessage",{get:()=>q,set:X=>{typeof q=="function"&&_.port1.removeEventListener("message",q),q=typeof X=="function"?X:null,typeof q=="function"&&(_.port1.addEventListener("message",q),_.port1.start())}}),m.prototype.port=_.port1;let C=null;L7(h,$,m,p).then(X=>C=X);const te=Qh(p.numberOfInputs,p.channelCount),W=Qh(p.numberOfOutputs,w),J=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((X,{name:ee})=>({...X,[ee]:new Float32Array(128)}),{});let fe=!0;const be=()=>{p.numberOfOutputs>0&&Y.disconnect(D);for(let X=0,ee=0;X<p.numberOfOutputs;X+=1){const U=N[X];for(let H=0;H<w[X];H+=1)D.disconnect(U,ee+H,H);ee+=w[X]}},me=new Map;Y.onaudioprocess=({inputBuffer:X,outputBuffer:ee})=>{if(C!==null){const U=u($);for(let H=0;H<B;H+=128){for(let Q=0;Q<p.numberOfInputs;Q+=1)for(let de=0;de<p.channelCount;de+=1)Wh(X,te[Q],de,de,H);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:Q},de)=>{Wh(X,J,Q,b+de,H)});for(let Q=0;Q<p.numberOfInputs;Q+=1)for(let de=0;de<w[Q];de+=1)W[Q][de].byteLength===0&&(W[Q][de]=new Float32Array(128));try{const Q=te.map((pe,oe)=>{if(U[oe].size>0)return me.set(oe,B/128),pe;const Se=me.get(oe);return Se===void 0?[]:(pe.every(Be=>Be.every(Ue=>Ue===0))&&(Se===1?me.delete(oe):me.set(oe,Se-1)),pe)});fe=l(h.currentTime+H/h.sampleRate,h.sampleRate,()=>C.process(Q,W,J));for(let pe=0,oe=0;pe<p.numberOfOutputs;pe+=1){for(let Me=0;Me<w[pe];Me+=1)uN(ee,W[pe],Me,oe+Me,H);oe+=w[pe]}}catch(Q){fe=!1,$.dispatchEvent(new ErrorEvent("processorerror",{colno:Q.colno,filename:Q.filename,lineno:Q.lineno,message:Q.message}))}if(!fe){for(let Q=0;Q<p.numberOfInputs;Q+=1){G[Q].disconnect(y[Q]);for(let de=0;de<p.channelCount;de+=1)y[H].disconnect(O,de,Q*p.channelCount+de)}if(m.parameterDescriptors!==void 0){const Q=m.parameterDescriptors.length;for(let de=0;de<Q;de+=1){const pe=v[de];pe.disconnect(O,0,b+de),pe.stop()}}O.disconnect(Y),Y.onaudioprocess=null,_e?be():Ze();break}}}};let _e=!1;const ke=i(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Oe=()=>Y.connect(ke).connect(h.destination),Ze=()=>{Y.disconnect(ke),ke.disconnect()},Fe=()=>{if(fe){Ze(),p.numberOfOutputs>0&&Y.connect(D);for(let X=0,ee=0;X<p.numberOfOutputs;X+=1){const U=N[X];for(let H=0;H<w[X];H+=1)D.connect(U,ee+H,H);ee+=w[X]}}_e=!0},P=()=>{fe&&(Oe(),be()),_e=!1};return Oe(),f($,Fe,P)},pN=(t,e)=>{const A=t.createBiquadFilter();return NA(A,e),cA(A,e,"Q"),cA(A,e,"detune"),cA(A,e,"frequency"),cA(A,e,"gain"),Vt(A,e,"type"),A},F7=(t,e)=>(A,n)=>{const r=A.createChannelMerger(n.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(A,r),NA(r,n),r},$7=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:A=>{if(A!==e)throw PA()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:A=>{if(A!=="explicit")throw PA()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:A=>{if(A!=="discrete")throw PA()}})},xl=(t,e)=>{const A=t.createChannelSplitter(e.numberOfOutputs);return NA(A,e),$7(A),A},V7=(t,e,A,n,r)=>(s,i)=>{if(s.createConstantSource===void 0)return A(s,i);const o=s.createConstantSource();return NA(o,i),cA(o,i,"offset"),e(n,()=>n(s))||M0(o),e(r,()=>r(s))||v0(o),t(s,o),o},Uo=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),q7=(t,e,A,n)=>(r,{offset:s,...i})=>{const o=r.createBuffer(1,2,44100),a=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=A(r,{...i,gain:s}),l=o.getChannelData(0);l[0]=1,l[1]=1,a.buffer=o,a.loop=!0;const u={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(d){c.channelCount=d},get channelCountMode(){return c.channelCountMode},set channelCountMode(d){c.channelCountMode=d},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(d){c.channelInterpretation=d},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return a.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return a.onended},set onended(d){a.onended=d},addEventListener(...d){return a.addEventListener(d[0],d[1],d[2])},dispatchEvent(...d){return a.dispatchEvent(d[0])},removeEventListener(...d){return a.removeEventListener(d[0],d[1],d[2])},start(d=0){a.start.call(a,d)},stop(d=0){a.stop.call(a,d)}},f=()=>a.connect(c),h=()=>a.disconnect(c);return t(r,a),n(Uo(u,c),f,h)},W7=(t,e)=>(A,n)=>{const r=A.createConvolver();if(NA(r,n),n.disableNormalization===r.normalize&&(r.normalize=!n.disableNormalization),Vt(r,n,"buffer"),n.channelCount>2||(e(r,"channelCount",s=>()=>s.call(r),s=>i=>{if(i>2)throw t();return s.call(r,i)}),n.channelCountMode==="max"))throw t();return e(r,"channelCountMode",s=>()=>s.call(r),s=>i=>{if(i==="max")throw t();return s.call(r,i)}),r},gN=(t,e)=>{const A=t.createDelay(e.maxDelayTime);return NA(A,e),cA(A,e,"delayTime"),A},Q7=t=>(e,A)=>{const n=e.createDynamicsCompressor();if(NA(n,A),A.channelCount>2||A.channelCountMode==="max")throw t();return cA(n,A,"attack"),cA(n,A,"knee"),cA(n,A,"ratio"),cA(n,A,"release"),cA(n,A,"threshold"),n},Bn=(t,e)=>{const A=t.createGain();return NA(A,e),cA(A,e,"gain"),A},K7=t=>(e,A,n)=>{if(e.createIIRFilter===void 0)return t(e,A,n);const r=e.createIIRFilter(n.feedforward,n.feedback);return NA(r,n),r};function J7(t,e){const A=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/A,(t[1]*e[0]-t[0]*e[1])/A]}function X7(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function wN(t,e){let A=[0,0];for(let n=t.length-1;n>=0;n-=1)A=X7(A,e),A[0]+=t[n];return A}const eV=(t,e,A,n)=>(r,s,{channelCount:i,channelCountMode:o,channelInterpretation:a,feedback:c,feedforward:l})=>{const u=mN(s,r.sampleRate),f=c instanceof Float64Array?c:new Float64Array(c),h=l instanceof Float64Array?l:new Float64Array(l),d=f.length,m=h.length,p=Math.min(d,m);if(d===0||d>20)throw n();if(f[0]===0)throw e();if(m===0||m>20)throw n();if(h[0]===0)throw e();if(f[0]!==1){for(let v=0;v<m;v+=1)h[v]/=f[0];for(let v=1;v<d;v+=1)f[v]/=f[0]}const w=A(r,u,i,i);w.channelCount=i,w.channelCountMode=o,w.channelInterpretation=a;const b=32,g=[],x=[],_=[];for(let v=0;v<i;v+=1){g.push(0);const O=new Float32Array(b),B=new Float32Array(b);O.fill(0),B.fill(0),x.push(O),_.push(B)}w.onaudioprocess=v=>{const O=v.inputBuffer,B=v.outputBuffer,Y=O.numberOfChannels;for(let D=0;D<Y;D+=1){const N=O.getChannelData(D),M=B.getChannelData(D);g[D]=fN(f,d,h,m,p,x[D],_[D],g[D],b,N,M)}};const G=r.sampleRate/2;return Uo({get bufferSize(){return u},get channelCount(){return w.channelCount},set channelCount(v){w.channelCount=v},get channelCountMode(){return w.channelCountMode},set channelCountMode(v){w.channelCountMode=v},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(v){w.channelInterpretation=v},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},addEventListener(...v){return w.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return w.dispatchEvent(v[0])},getFrequencyResponse(v,O,B){if(v.length!==O.length||O.length!==B.length)throw t();const Y=v.length;for(let D=0;D<Y;D+=1){const N=-Math.PI*(v[D]/G),M=[Math.cos(N),Math.sin(N)],Z=wN(h,M),R=wN(f,M),I=J7(Z,R);O[D]=Math.sqrt(I[0]*I[0]+I[1]*I[1]),B[D]=Math.atan2(I[1],I[0])}},removeEventListener(...v){return w.removeEventListener(v[0],v[1],v[2])}},w)},tV=(t,e)=>t.createMediaElementSource(e.mediaElement),AV=(t,e)=>{const A=t.createMediaStreamDestination();return NA(A,e),A.numberOfOutputs===1&&Object.defineProperty(A,"numberOfOutputs",{get:()=>0}),A},nV=(t,{mediaStream:e})=>{const A=e.getAudioTracks();A.sort((s,i)=>s.id<i.id?-1:s.id>i.id?1:0);const n=A.slice(0,1),r=t.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(r,"mediaStream",{value:e}),r},rV=(t,e)=>(A,{mediaStreamTrack:n})=>{if(typeof A.createMediaStreamTrackSource=="function")return A.createMediaStreamTrackSource(n);const r=new MediaStream([n]),s=A.createMediaStreamSource(r);if(n.kind!=="audio")throw t();if(e(A))throw new TypeError;return s},sV=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,iV=(t,e,A,n,r,s)=>(i,o)=>{const a=i.createOscillator();return NA(a,o),cA(a,o,"detune"),cA(a,o,"frequency"),o.periodicWave!==void 0?a.setPeriodicWave(o.periodicWave):Vt(a,o,"type"),e(A,()=>A(i))||M0(a),e(n,()=>n(i))||s(a,i),e(r,()=>r(i))||v0(a),t(i,a),a},oV=t=>(e,A)=>{const n=e.createPanner();return n.orientationX===void 0?t(e,A):(NA(n,A),cA(n,A,"orientationX"),cA(n,A,"orientationY"),cA(n,A,"orientationZ"),cA(n,A,"positionX"),cA(n,A,"positionY"),cA(n,A,"positionZ"),Vt(n,A,"coneInnerAngle"),Vt(n,A,"coneOuterAngle"),Vt(n,A,"coneOuterGain"),Vt(n,A,"distanceModel"),Vt(n,A,"maxDistance"),Vt(n,A,"panningModel"),Vt(n,A,"refDistance"),Vt(n,A,"rolloffFactor"),n)},aV=(t,e,A,n,r,s,i,o,a,c)=>(l,{coneInnerAngle:u,coneOuterAngle:f,coneOuterGain:h,distanceModel:d,maxDistance:m,orientationX:p,orientationY:w,orientationZ:b,panningModel:g,positionX:x,positionY:_,positionZ:G,refDistance:y,rolloffFactor:v,...O})=>{const B=l.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw i();NA(B,O);const Y={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=A(l,{...Y,channelInterpretation:"speakers",numberOfInputs:6}),N=n(l,{...O,gain:1}),M=n(l,{...Y,gain:1}),Z=n(l,{...Y,gain:0}),R=n(l,{...Y,gain:0}),I=n(l,{...Y,gain:0}),$=n(l,{...Y,gain:0}),V=n(l,{...Y,gain:0}),q=r(l,256,6,1),C=s(l,{...Y,curve:new Float32Array([1,1]),oversample:"none"});let j=[p,w,b],te=[x,_,G];const W=new Float32Array(1);q.onaudioprocess=({inputBuffer:me})=>{const _e=[a(me,W,0),a(me,W,1),a(me,W,2)];_e.some((Oe,Ze)=>Oe!==j[Ze])&&(B.setOrientation(..._e),j=_e);const ke=[a(me,W,3),a(me,W,4),a(me,W,5)];ke.some((Oe,Ze)=>Oe!==te[Ze])&&(B.setPosition(...ke),te=ke)},Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return B.channelCount},set channelCount(me){if(me>2)throw i();N.channelCount=me,B.channelCount=me},get channelCountMode(){return B.channelCountMode},set channelCountMode(me){if(me==="max")throw i();N.channelCountMode=me,B.channelCountMode=me},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(me){N.channelInterpretation=me,B.channelInterpretation=me},get coneInnerAngle(){return B.coneInnerAngle},set coneInnerAngle(me){B.coneInnerAngle=me},get coneOuterAngle(){return B.coneOuterAngle},set coneOuterAngle(me){B.coneOuterAngle=me},get coneOuterGain(){return B.coneOuterGain},set coneOuterGain(me){if(me<0||me>1)throw e();B.coneOuterGain=me},get context(){return B.context},get distanceModel(){return B.distanceModel},set distanceModel(me){B.distanceModel=me},get inputs(){return[N]},get maxDistance(){return B.maxDistance},set maxDistance(me){if(me<0)throw new RangeError;B.maxDistance=me},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return Z.gain},get orientationZ(){return R.gain},get panningModel(){return B.panningModel},set panningModel(me){B.panningModel=me},get positionX(){return I.gain},get positionY(){return $.gain},get positionZ(){return V.gain},get refDistance(){return B.refDistance},set refDistance(me){if(me<0)throw new RangeError;B.refDistance=me},get rolloffFactor(){return B.rolloffFactor},set rolloffFactor(me){if(me<0)throw new RangeError;B.rolloffFactor=me},addEventListener(...me){return N.addEventListener(me[0],me[1],me[2])},dispatchEvent(...me){return N.dispatchEvent(me[0])},removeEventListener(...me){return N.removeEventListener(me[0],me[1],me[2])}};u!==J.coneInnerAngle&&(J.coneInnerAngle=u),f!==J.coneOuterAngle&&(J.coneOuterAngle=f),h!==J.coneOuterGain&&(J.coneOuterGain=h),d!==J.distanceModel&&(J.distanceModel=d),m!==J.maxDistance&&(J.maxDistance=m),p!==J.orientationX.value&&(J.orientationX.value=p),w!==J.orientationY.value&&(J.orientationY.value=w),b!==J.orientationZ.value&&(J.orientationZ.value=b),g!==J.panningModel&&(J.panningModel=g),x!==J.positionX.value&&(J.positionX.value=x),_!==J.positionY.value&&(J.positionY.value=_),G!==J.positionZ.value&&(J.positionZ.value=G),y!==J.refDistance&&(J.refDistance=y),v!==J.rolloffFactor&&(J.rolloffFactor=v),(j[0]!==1||j[1]!==0||j[2]!==0)&&B.setOrientation(...j),(te[0]!==0||te[1]!==0||te[2]!==0)&&B.setPosition(...te);const fe=()=>{N.connect(B),t(N,C,0,0),C.connect(M).connect(D,0,0),C.connect(Z).connect(D,0,1),C.connect(R).connect(D,0,2),C.connect(I).connect(D,0,3),C.connect($).connect(D,0,4),C.connect(V).connect(D,0,5),D.connect(q).connect(l.destination)},be=()=>{N.disconnect(B),o(N,C,0,0),C.disconnect(M),M.disconnect(D),C.disconnect(Z),Z.disconnect(D),C.disconnect(R),R.disconnect(D),C.disconnect(I),I.disconnect(D),C.disconnect($),$.disconnect(D),C.disconnect(V),V.disconnect(D),D.disconnect(q),q.disconnect(l.destination)};return c(Uo(J,B),fe,be)},cV=t=>(e,{disableNormalization:A,imag:n,real:r})=>{const s=n instanceof Float32Array?n:new Float32Array(n),i=r instanceof Float32Array?r:new Float32Array(r),o=e.createPeriodicWave(i,s,{disableNormalization:A});if(Array.from(n).length<2)throw t();return o},yl=(t,e,A,n)=>t.createScriptProcessor(e,A,n),lV=(t,e)=>(A,n)=>{const r=n.channelCountMode;if(r==="clamped-max")throw e();if(A.createStereoPanner===void 0)return t(A,n);const s=A.createStereoPanner();return NA(s,n),cA(s,n,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:i=>{if(i!==r)throw e()}}),s},uV=(t,e,A,n,r,s)=>{const o=new Float32Array([1,1]),a=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...c,oversample:"none"},u=(d,m,p,w)=>{const b=new Float32Array(16385),g=new Float32Array(16385);for(let O=0;O<16385;O+=1){const B=O/16384*a;b[O]=Math.cos(B),g[O]=Math.sin(B)}const x=A(d,{...c,gain:0}),_=n(d,{...l,curve:b}),G=n(d,{...l,curve:o}),y=A(d,{...c,gain:0}),v=n(d,{...l,curve:g});return{connectGraph(){m.connect(x),m.connect(G.inputs===void 0?G:G.inputs[0]),m.connect(y),G.connect(p),p.connect(_.inputs===void 0?_:_.inputs[0]),p.connect(v.inputs===void 0?v:v.inputs[0]),_.connect(x.gain),v.connect(y.gain),x.connect(w,0,0),y.connect(w,0,1)},disconnectGraph(){m.disconnect(x),m.disconnect(G.inputs===void 0?G:G.inputs[0]),m.disconnect(y),G.disconnect(p),p.disconnect(_.inputs===void 0?_:_.inputs[0]),p.disconnect(v.inputs===void 0?v:v.inputs[0]),_.disconnect(x.gain),v.disconnect(y.gain),x.disconnect(w,0,0),y.disconnect(w,0,1)}}},f=(d,m,p,w)=>{const b=new Float32Array(16385),g=new Float32Array(16385),x=new Float32Array(16385),_=new Float32Array(16385),G=Math.floor(16385/2);for(let I=0;I<16385;I+=1)if(I>G){const $=(I-G)/(16384-G)*a;b[I]=Math.cos($),g[I]=Math.sin($),x[I]=0,_[I]=1}else{const $=I/(16384-G)*a;b[I]=1,g[I]=0,x[I]=Math.cos($),_[I]=Math.sin($)}const y=e(d,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=A(d,{...c,gain:0}),O=n(d,{...l,curve:b}),B=A(d,{...c,gain:0}),Y=n(d,{...l,curve:g}),D=n(d,{...l,curve:o}),N=A(d,{...c,gain:0}),M=n(d,{...l,curve:x}),Z=A(d,{...c,gain:0}),R=n(d,{...l,curve:_});return{connectGraph(){m.connect(y),m.connect(D.inputs===void 0?D:D.inputs[0]),y.connect(v,0),y.connect(B,0),y.connect(N,1),y.connect(Z,1),D.connect(p),p.connect(O.inputs===void 0?O:O.inputs[0]),p.connect(Y.inputs===void 0?Y:Y.inputs[0]),p.connect(M.inputs===void 0?M:M.inputs[0]),p.connect(R.inputs===void 0?R:R.inputs[0]),O.connect(v.gain),Y.connect(B.gain),M.connect(N.gain),R.connect(Z.gain),v.connect(w,0,0),N.connect(w,0,0),B.connect(w,0,1),Z.connect(w,0,1)},disconnectGraph(){m.disconnect(y),m.disconnect(D.inputs===void 0?D:D.inputs[0]),y.disconnect(v,0),y.disconnect(B,0),y.disconnect(N,1),y.disconnect(Z,1),D.disconnect(p),p.disconnect(O.inputs===void 0?O:O.inputs[0]),p.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),p.disconnect(M.inputs===void 0?M:M.inputs[0]),p.disconnect(R.inputs===void 0?R:R.inputs[0]),O.disconnect(v.gain),Y.disconnect(B.gain),M.disconnect(N.gain),R.disconnect(Z.gain),v.disconnect(w,0,0),N.disconnect(w,0,0),B.disconnect(w,0,1),Z.disconnect(w,0,1)}}},h=(d,m,p,w,b)=>{if(m===1)return u(d,p,w,b);if(m===2)return f(d,p,w,b);throw r()};return(d,{channelCount:m,channelCountMode:p,pan:w,...b})=>{if(p==="max")throw r();const g=t(d,{...b,channelCount:1,channelCountMode:p,numberOfInputs:2}),x=A(d,{...b,channelCount:m,channelCountMode:p,gain:1}),_=A(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:w});let{connectGraph:G,disconnectGraph:y}=h(d,m,x,_,g);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const v={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(D){x.channelCount!==D&&(O&&y(),{connectGraph:G,disconnectGraph:y}=h(d,D,x,_,g),O&&G()),x.channelCount=D},get channelCountMode(){return x.channelCountMode},set channelCountMode(D){if(D==="clamped-max"||D==="max")throw r();x.channelCountMode=D},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(D){x.channelInterpretation=D},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return _.gain},addEventListener(...D){return x.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return x.dispatchEvent(D[0])},removeEventListener(...D){return x.removeEventListener(D[0],D[1],D[2])}};let O=!1;const B=()=>{G(),O=!0},Y=()=>{y(),O=!1};return s(Uo(v,g),B,Y)}},hV=(t,e,A,n,r,s,i)=>(o,a)=>{const c=o.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&o.createGain().gain.automationRate===void 0)return A(o,a);NA(c,a);const l=a.curve===null||a.curve instanceof Float32Array?a.curve:new Float32Array(a.curve);if(l!==null&&l.length<2)throw e();Vt(c,{curve:l},"curve"),Vt(c,a,"oversample");let u=null,f=!1;return i(c,"curve",m=>()=>m.call(c),m=>p=>(m.call(c,p),f&&(n(p)&&u===null?u=t(o,c):!n(p)&&u!==null&&(u(),u=null)),p)),r(c,()=>{f=!0,n(c.curve)&&(u=t(o,c))},()=>{f=!1,u!==null&&(u(),u=null)})},fV=(t,e,A,n,r)=>(s,{curve:i,oversample:o,...a})=>{const c=s.createWaveShaper(),l=s.createWaveShaper();NA(c,a),NA(l,a);const u=A(s,{...a,gain:1}),f=A(s,{...a,gain:-1}),h=A(s,{...a,gain:1}),d=A(s,{...a,gain:-1});let m=null,p=!1,w=null;const b={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(_){u.channelCount=_,f.channelCount=_,c.channelCount=_,h.channelCount=_,l.channelCount=_,d.channelCount=_},get channelCountMode(){return c.channelCountMode},set channelCountMode(_){u.channelCountMode=_,f.channelCountMode=_,c.channelCountMode=_,h.channelCountMode=_,l.channelCountMode=_,d.channelCountMode=_},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(_){u.channelInterpretation=_,f.channelInterpretation=_,c.channelInterpretation=_,h.channelInterpretation=_,l.channelInterpretation=_,d.channelInterpretation=_},get context(){return c.context},get curve(){return w},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)c.curve=_,l.curve=_;else{const G=_.length,y=new Float32Array(G+2-G%2),v=new Float32Array(G+2-G%2);y[0]=_[0],v[0]=-_[G-1];const O=Math.ceil((G+1)/2),B=(G+1)/2-1;for(let Y=1;Y<O;Y+=1){const D=Y/O*B,N=Math.floor(D),M=Math.ceil(D);y[Y]=N===M?_[N]:(1-(D-N))*_[N]+(1-(M-D))*_[M],v[Y]=N===M?-_[G-1-N]:-((1-(D-N))*_[G-1-N])-(1-(M-D))*_[G-1-M]}y[O]=G%2===1?_[O-1]:(_[O-2]+_[O-1])/2,c.curve=y,l.curve=v}w=_,p&&(n(w)&&m===null?m=t(s,u):m!==null&&(m(),m=null))},get inputs(){return[u]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(_){c.oversample=_,l.oversample=_},addEventListener(..._){return u.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return u.dispatchEvent(_[0])},removeEventListener(..._){return u.removeEventListener(_[0],_[1],_[2])}};i!==null&&(b.curve=i instanceof Float32Array?i:new Float32Array(i)),o!==b.oversample&&(b.oversample=o);const g=()=>{u.connect(c).connect(h),u.connect(f).connect(l).connect(d).connect(h),p=!0,n(w)&&(m=t(s,u))},x=()=>{u.disconnect(c),c.disconnect(h),u.disconnect(f),f.disconnect(l),l.disconnect(d),d.disconnect(h),p=!1,m!==null&&(m(),m=null)};return r(Uo(b,h),g,x)},ln=()=>new DOMException("","NotSupportedError"),dV={numberOfChannels:1},mV=(t,e,A,n,r)=>class extends t{constructor(i,o,a){let c;if(typeof i=="number"&&o!==void 0&&a!==void 0)c={length:o,numberOfChannels:i,sampleRate:a};else if(typeof i=="object")c=i;else throw new Error("The given parameters are not valid.");const{length:l,numberOfChannels:u,sampleRate:f}={...dV,...c},h=n(u,l,f);e(_l,()=>_l(h))||h.addEventListener("statechange",(()=>{let d=0;const m=p=>{this._state==="running"&&(d>0?(h.removeEventListener("statechange",m),p.stopImmediatePropagation(),this._waitForThePromiseToSettle(p)):d+=1)};return m})()),super(h,u),this._length=l,this._nativeOfflineAudioContext=h,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(A()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,nN(this)}))}_waitForThePromiseToSettle(i){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(i):setTimeout(()=>this._waitForThePromiseToSettle(i))}},pV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},gV=(t,e,A,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...pV,...c},f=A(l,u),h=s(l),d=h?n():null,m=a.sampleRate/2;super(a,!1,f,d),this._detune=e(this,h,f.detune,153600,-153600),this._frequency=e(this,h,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=d,this._oscillatorNodeRenderer!==null&&u.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(a){const c=typeof a=="function"?i(this,a):null;this._nativeOscillatorNode.onended=c;const l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===c?a:l}get type(){return this._nativeOscillatorNode.type}set type(a){this._nativeOscillatorNode.type=a,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(a){this._nativeOscillatorNode.setPeriodicWave(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=a)}start(a=0){if(this._nativeOscillatorNode.start(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=a),this.context.state!=="closed"){Ho(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),xs(this)&&pl(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(a=0){this._nativeOscillatorNode.stop(a),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=a)}},wV=(t,e,A,n,r)=>()=>{const s=new WeakMap;let i=null,o=null,a=null;const c=async(l,u)=>{let f=A(l);const h=WA(f,u);if(!h){const d={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:i===null?void 0:i,type:f.type};f=e(u,d),o!==null&&f.start(o),a!==null&&f.stop(a)}return s.set(u,f),h?(await t(u,l.detune,f.detune),await t(u,l.frequency,f.frequency)):(await n(u,l.detune,f.detune),await n(u,l.frequency,f.frequency)),await r(l,u,f),f};return{set periodicWave(l){i=l},set start(l){o=l},set stop(l){a=l},render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):c(l,u)}}},bV={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},_V=(t,e,A,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...bV,...c},f=A(l,u),h=s(l),d=h?n():null;super(a,!1,f,d),this._nativePannerNode=f,this._orientationX=e(this,h,f.orientationX,an,Dn),this._orientationY=e(this,h,f.orientationY,an,Dn),this._orientationZ=e(this,h,f.orientationZ,an,Dn),this._positionX=e(this,h,f.positionX,an,Dn),this._positionY=e(this,h,f.positionY,an,Dn),this._positionZ=e(this,h,f.positionZ,an,Dn),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(a){this._nativePannerNode.coneInnerAngle=a}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(a){this._nativePannerNode.coneOuterAngle=a}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(a){this._nativePannerNode.coneOuterGain=a}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(a){this._nativePannerNode.distanceModel=a}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(a){this._nativePannerNode.maxDistance=a}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(a){this._nativePannerNode.panningModel=a}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(a){this._nativePannerNode.refDistance=a}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(a){this._nativePannerNode.rolloffFactor=a}},xV=(t,e,A,n,r,s,i,o,a,c)=>()=>{const l=new WeakMap;let u=null;const f=async(h,d)=>{let m=null,p=s(h);const w={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation},b={...w,coneInnerAngle:p.coneInnerAngle,coneOuterAngle:p.coneOuterAngle,coneOuterGain:p.coneOuterGain,distanceModel:p.distanceModel,maxDistance:p.maxDistance,panningModel:p.panningModel,refDistance:p.refDistance,rolloffFactor:p.rolloffFactor},g=WA(p,d);if("bufferSize"in p)m=n(d,{...w,gain:1});else if(!g){const x={...b,orientationX:p.orientationX.value,orientationY:p.orientationY.value,orientationZ:p.orientationZ.value,positionX:p.positionX.value,positionY:p.positionY.value,positionZ:p.positionZ.value};p=r(d,x)}if(l.set(d,m===null?p:m),m!==null){if(u===null){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Y=new i(6,h.context.length,d.sampleRate),D=e(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});D.connect(Y.destination),u=(async()=>{const N=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(M,Z)=>{const R=A(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z===0?1:0});return await o(Y,M,R.offset),R}));for(let M=0;M<6;M+=1)N[M].connect(D,0,M),N[M].start(0);return c(Y)})()}const x=await u,_=n(d,{...w,gain:1});await a(h,d,_);const G=[];for(let Y=0;Y<x.numberOfChannels;Y+=1)G.push(x.getChannelData(Y));let y=[G[0][0],G[1][0],G[2][0]],v=[G[3][0],G[4][0],G[5][0]],O=n(d,{...w,gain:1}),B=r(d,{...b,orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:v[0],positionY:v[1],positionZ:v[2]});_.connect(O).connect(B.inputs[0]),B.connect(m);for(let Y=128;Y<x.length;Y+=128){const D=[G[0][Y],G[1][Y],G[2][Y]],N=[G[3][Y],G[4][Y],G[5][Y]];if(D.some((M,Z)=>M!==y[Z])||N.some((M,Z)=>M!==v[Z])){y=D,v=N;const M=Y/d.sampleRate;O.gain.setValueAtTime(0,M),O=n(d,{...w,gain:0}),B=r(d,{...b,orientationX:y[0],orientationY:y[1],orientationZ:y[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),O.gain.setValueAtTime(1,M),_.connect(O).connect(B.inputs[0]),B.connect(m)}}return m}return g?(await t(d,h.orientationX,p.orientationX),await t(d,h.orientationY,p.orientationY),await t(d,h.orientationZ,p.orientationZ),await t(d,h.positionX,p.positionX),await t(d,h.positionY,p.positionY),await t(d,h.positionZ,p.positionZ)):(await o(d,h.orientationX,p.orientationX),await o(d,h.orientationY,p.orientationY),await o(d,h.orientationZ,p.orientationZ),await o(d,h.positionX,p.positionX),await o(d,h.positionY,p.positionY),await o(d,h.positionZ,p.positionZ)),Lo(p)?await a(h,d,p.inputs[0]):await a(h,d,p),p};return{render(h,d){const m=l.get(d);return m!==void 0?Promise.resolve(m):f(h,d)}}},yV={disableNormalization:!1},GV=(t,e,A,n)=>class ES{constructor(s,i){const o=e(s),a=n({...yV,...i}),c=t(o,a);return A.add(c),c}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===ES.prototype||A.has(s)}},MV=(t,e)=>(A,n,r)=>(t(n).replay(r),e(n,A,r)),vV=(t,e,A)=>async(n,r,s)=>{const i=t(n);await Promise.all(i.activeInputs.map((o,a)=>Array.from(o).map(async([c,l])=>{const f=await e(c).render(c,r),h=n.context.destination;!A(c)&&(n!==h||!A(n))&&f.connect(s,l,a)})).reduce((o,a)=>[...o,...a],[]))},DV=(t,e,A)=>async(n,r,s)=>{const i=e(n);await Promise.all(Array.from(i.activeInputs).map(async([o,a])=>{const l=await t(o).render(o,r);A(o)||l.connect(s,a)}))},BV=(t,e,A,n)=>r=>t(_l,()=>_l(r))?Promise.resolve(t(n,n)).then(s=>{if(!s){const i=A(r,512,0,1);r.oncomplete=()=>{i.onaudioprocess=null,i.disconnect()},i.onaudioprocess=()=>r.currentTime,i.connect(r.destination)}return r.startRendering()}):new Promise(s=>{const i=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=o=>{i.disconnect(),s(o.renderedBuffer)},i.connect(r.destination),r.startRendering()}),kV=t=>(e,A)=>{t.set(e,A)},EV=t=>(e,A)=>t.set(e,A),NV=(t,e,A,n,r,s,i,o)=>(a,c)=>A(a).render(a,c).then(()=>Promise.all(Array.from(n(c)).map(l=>A(l).render(l,c)))).then(()=>r(c)).then(l=>(typeof l.copyFromChannel!="function"?(i(l),b0(l)):e(s,()=>s(l))||o(l),t.add(l),l)),TV={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},OV=(t,e,A,n,r,s)=>class extends t{constructor(o,a){const c=r(o),l={...TV,...a},u=A(c,l),f=s(c),h=f?n():null;super(o,!1,u,h),this._pan=e(this,f,u.pan)}get pan(){return this._pan}},YV=(t,e,A,n,r)=>()=>{const s=new WeakMap,i=async(o,a)=>{let c=A(o);const l=WA(c,a);if(!l){const u={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(a,u)}return s.set(a,c),l?await t(a,o.pan,c.pan):await n(a,o.pan,c.pan),Lo(c)?await r(o,a,c.inputs[0]):await r(o,a,c),c};return{render(o,a){const c=s.get(a);return c!==void 0?Promise.resolve(c):i(o,a)}}},SV=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},CV=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const A=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,44100),r=URL.createObjectURL(A);let s=!1,i=!1;try{await n.audioWorklet.addModule(r);const o=new t(n,"a",{numberOfOutputs:0}),a=n.createOscillator();o.port.onmessage=()=>s=!0,o.onprocessorerror=()=>i=!0,a.connect(o),a.start(0),await n.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(r)}return s&&!i},PV=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const A=new e(1,1,44100),n=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{A.oncomplete=()=>{n.disconnect(),r(A.currentTime!==0)},A.startRendering()})},ZV=()=>new DOMException("","UnknownError"),IV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},RV=(t,e,A,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...IV,...c},f=A(l,u),d=s(l)?n():null;super(a,!0,f,d),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(a){if(a===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(a.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=a}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(a){this._nativeWaveShaperNode.oversample=a}},jV=(t,e,A)=>()=>{const n=new WeakMap,r=async(s,i)=>{let o=e(s);if(!WA(o,i)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(i,c)}return n.set(i,o),Lo(o)?await A(s,i,o.inputs[0]):await A(s,i,o),o};return{render(s,i){const o=n.get(i);return o!==void 0?Promise.resolve(o):r(s,i)}}},zV=()=>typeof window>"u"?null:window,HV=(t,e)=>A=>{A.copyFromChannel=(n,r,s=0)=>{const i=t(s),o=t(r);if(o>=A.numberOfChannels)throw e();const a=A.length,c=A.getChannelData(o),l=n.length;for(let u=i<0?-i:0;u+i<a&&u<l;u+=1)n[u]=c[u+i]},A.copyToChannel=(n,r,s=0)=>{const i=t(s),o=t(r);if(o>=A.numberOfChannels)throw e();const a=A.length,c=A.getChannelData(o),l=n.length;for(let u=i<0?-i:0;u+i<a&&u<l;u+=1)c[u+i]=n[u]}},LV=t=>e=>{e.copyFromChannel=(A=>(n,r,s=0)=>{const i=t(s),o=t(r);if(i<e.length)return A.call(e,n,o,i)})(e.copyFromChannel),e.copyToChannel=(A=>(n,r,s=0)=>{const i=t(s),o=t(r);if(i<e.length)return A.call(e,n,o,i)})(e.copyToChannel)},UV=t=>(e,A)=>{const n=A.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=n),t(e,"buffer",r=>()=>{const s=r.call(e);return s===n?null:s},r=>s=>r.call(e,s===null?n:s))},FV=(t,e)=>(A,n)=>{n.channelCount=1,n.channelCountMode="explicit",Object.defineProperty(n,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=A.createBufferSource();e(n,()=>{const o=n.numberOfInputs;for(let a=0;a<o;a+=1)r.connect(n,0,a)},()=>r.disconnect(n))},bN=(t,e,A)=>t.copyFromChannel===void 0?t.getChannelData(A)[0]:(t.copyFromChannel(e,A),e[0]),_N=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Gl=(t,e,A,n)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:s,set:i}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:A(s),set:n(i)})},$V=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),VV=t=>({...t,channelCount:t.numberOfOutputs}),qV=t=>{const{imag:e,real:A}=t;return e===void 0?A===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(A,()=>0),real:A}:A===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:A}},xN=(t,e,A)=>{try{t.setValueAtTime(e,A)}catch(n){if(n.code!==9)throw n;xN(t,e,A+1e-7)}},WV=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},QV=t=>{const e=t.createBufferSource(),A=t.createBuffer(1,1,44100);e.buffer=A;try{e.start(0,1)}catch{return!1}return!0},KV=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},D0=t=>{const e=t.createOscillator();try{e.start(-1)}catch(A){return A instanceof RangeError}return!1},yN=t=>{const e=t.createBuffer(1,1,44100),A=t.createBufferSource();A.buffer=e,A.start(),A.stop();try{return A.stop(),!0}catch{return!1}},B0=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(A){return A instanceof RangeError}return!1},JV=t=>{const{port1:e,port2:A}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),A.close()}},XV=t=>{t.start=(e=>(A=0,n=0,r)=>{const s=t.buffer,i=s===null?n:Math.min(s.duration,n);s!==null&&i>s.duration-.5/t.context.sampleRate?e.call(t,A,0,0):e.call(t,A,i,r)})(t.start)},GN=(t,e)=>{const A=e.createGain();t.connect(A);const n=(r=>()=>{r.call(t,A),t.removeEventListener("ended",n)})(t.disconnect);t.addEventListener("ended",n),Uo(t,A),t.stop=(r=>{let s=!1;return(i=0)=>{if(s)try{r.call(t,i)}catch{A.gain.setValueAtTime(0,i)}else r.call(t,i),s=!0}})(t.stop)},Fo=(t,e)=>A=>{const n={value:t};return Object.defineProperties(A,{currentTarget:n,target:n}),typeof e=="function"?e.call(t,A):e.handleEvent.call(t,A)},eq=_F(qi),tq=DF(qi),Aq=I$(Hh),MN=new WeakMap,nq=A7(MN),vr=d$(new Map,new WeakMap),es=zV(),vN=O7(vr,Xr),k0=t7(cn),LA=vV(cn,k0,Wi),rq=TF(vN,Ft,LA),jt=s7(zh),ys=sV(es),Et=y7(ys),DN=new WeakMap,BN=q$(Fo),Ml=P7(es),E0=w7(Ml),N0=b7(es),kN=_7(es),vl=I7(es),wA=A$(xF(V8),vF(eq,tq,Fh,Aq,$h,cn,nq,ml,Ft,qi,xs,Wi,Vh),vr,f7(m0,$h,cn,Ft,bl,xs),Xr,Jh,ln,S$(Fh,m0,cn,Ft,bl,jt,xs,Et),z$(DN,cn,Mr),BN,jt,E0,N0,kN,Et,vl),sq=NF(wA,rq,Xr,vN,jt,Et),T0=new WeakSet,EN=Y7(es),NN=B$(new Uint32Array(1)),O0=HV(NN,Xr),Y0=LV(NN),TN=YF(T0,vr,ln,EN,ys,SV(EN),O0,Y0),Xh=BF(Bn),ON=DV(k0,gl,Wi),ts=x$(ON),$o=C7(Xh,vr,WV,QV,KV,D0,yN,B0,XV,UV(Gl),GN),As=MV(n7(gl),ON),iq=PF(ts,$o,Ft,As,LA),Dr=n$(yF(q8),DN,d0,r$,dF,mF,pF,gF,wF,c0,H8,Ml,xN),oq=CF(wA,iq,Dr,PA,$o,jt,Et,Fo),aq=FF(wA,$F,Xr,PA,Z7(Bn,Gl),jt,Et,LA),cq=f$(ts,pN,Ft,As,LA),Qi=EV(MN),lq=h$(wA,Dr,cq,Jh,pN,jt,Et,Qi),Ks=N7(qi,N0),uq=FV(PA,Ks),Js=F7(Ml,uq),hq=g$(Js,Ft,LA),fq=p$(wA,hq,Js,jt,Et),dq=_$(xl,Ft,LA),mq=b$(wA,dq,xl,jt,Et,VV),pq=q7(Xh,$o,Bn,Ks),Vo=V7(Xh,vr,pq,D0,B0),gq=D$(ts,Vo,Ft,As,LA),wq=v$(wA,Dr,gq,Vo,jt,Et,Fo),YN=W7(ln,Gl),bq=N$(YN,Ft,LA),_q=E$(wA,bq,YN,jt,Et,Qi),xq=Z$(ts,gN,Ft,As,LA),yq=P$(wA,Dr,xq,gN,jt,Et,Qi),SN=Q7(ln),Gq=F$(ts,SN,Ft,As,LA),Mq=U$(wA,Dr,Gq,SN,ln,jt,Et,Qi),vq=X$(ts,Bn,Ft,As,LA),Dq=J$(wA,Dr,vq,Bn,jt,Et),Bq=eV(Jh,PA,yl,ln),ef=BV(vr,Bn,yl,PV(Bn,ys)),kq=h7($o,Ft,ys,LA,ef),Eq=K7(Bq),Nq=l7(wA,Eq,kq,jt,Et,Qi),Tq=VF(Dr,Js,Vo,yl,ln,bN,Et,Gl),CN=new WeakMap,Oq=E7(aq,Tq,BN,Et,CN,Fo),PN=iV(Xh,vr,D0,yN,B0,GN),Yq=wV(ts,PN,Ft,As,LA),Sq=gV(wA,Dr,PN,Yq,jt,Et,Fo),ZN=G$($o),Cq=fV(ZN,PA,Bn,_N,Ks),tf=hV(ZN,PA,Cq,_N,Ks,Ml,Gl),Pq=aV(Fh,PA,Js,Bn,yl,tf,ln,$h,bN,Ks),IN=oV(Pq),Zq=xV(ts,Js,Vo,Bn,IN,Ft,ys,As,LA,ef),Iq=_V(wA,Dr,IN,Zq,jt,Et,Qi),Rq=cV(Xr),jq=GV(Rq,jt,new WeakSet,qV),zq=uV(Js,xl,Bn,tf,ln,Ks),RN=lV(zq,ln),Hq=YV(ts,RN,Ft,As,LA),Lq=OV(wA,Dr,RN,Hq,jt,Et),Uq=jV(tf,Ft,LA),Fq=RV(wA,PA,tf,Uq,jt,Et,Qi),jN=G7(es),S0=W$(es),zN=new WeakMap,$q=i7(zN,ys),Vq=jN?MF(vr,ln,V$(es),S0,Q$(bF),jt,$q,Et,vl,new WeakMap,new WeakMap,CV(vl,ys),es):void 0,qq=x7(E0,Et),Wq=Y$(T0,vr,O$,$$,new WeakSet,jt,qq,Lh,_l,O0,Y0),HN=l$(Vq,sq,TN,oq,lq,fq,mq,wq,_q,Wq,yq,Mq,Dq,Nq,Oq,Sq,Iq,jq,Lq,Fq),Qq=M7(wA,tV,jt,Et),Kq=D7(wA,AV,jt,Et),Jq=B7(wA,nV,jt,Et),Xq=rV(PA,Et),eW=k7(wA,Xq,jt),tW=UF(HN,PA,ln,ZV,Qq,Kq,Jq,eW,Ml),C0=o7(CN),AW=kF(C0),LN=y$(Xr),nW=R$(C0),UN=H$(Xr),FN=new WeakMap,rW=e7(FN,Mr),sW=U7(LN,Xr,PA,Js,xl,Vo,Bn,yl,ln,UN,S0,rW,Ks),iW=j7(PA,sW,Bn,ln,Ks),oW=c$(ts,LN,$o,Js,xl,Vo,Bn,nW,UN,S0,Ft,vl,ys,As,LA,ef),aW=r7(zN),cW=kV(FN),$N=jN?i$(AW,wA,Dr,oW,iW,cn,aW,jt,Et,vl,$V,cW,JV,Fo):void 0,lW=T$(ln,ys),uW=NV(T0,vr,k0,C0,ef,Lh,O0,Y0),hW=mV(HN,vr,PA,lW,uW),fW=d7(zh,E0),dW=m7(f0,N0),mW=p7(d0,kN),pW=g7(zh,Et);function nr(t){return t===void 0}function ht(t){return t!==void 0}function gW(t){return typeof t=="function"}function Ki(t){return typeof t=="number"}function Ji(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function wW(t){return typeof t=="boolean"}function Br(t){return Array.isArray(t)}function Gs(t){return typeof t=="string"}function Af(t){return Gs(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function at(t,e){if(!t)throw new Error(e)}function Xs(t,e,A=1/0){if(!(e<=t&&t<=A))throw new RangeError(`Value must be within [${e}, ${A}], got: ${t}`)}function VN(t){!t.isOffline&&t.state!=="running"&&P0('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let qN=!1,WN=!1;function QN(t){qN=t}function bW(t){nr(t)&&qN&&!WN&&(WN=!0,P0("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let KN=console;function _W(...t){KN.log(...t)}function P0(...t){KN.warn(...t)}function xW(t){return new tW(t)}function yW(t,e,A){return new hW(t,e,A)}const Rn=typeof self=="object"?self:null,GW=Rn&&(Rn.hasOwnProperty("AudioContext")||Rn.hasOwnProperty("webkitAudioContext"));function MW(t,e,A){return at(ht($N),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof Rn?.BaseAudioContext?Rn?.AudioWorkletNode:$N)(t,e,A)}class vW{constructor(e,A,n,r){this._callback=e,this._type=A,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),A=URL.createObjectURL(e),n=new Worker(A);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var A;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((A=this._worker)===null||A===void 0||A.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Xi(t){return mW(t)}function ei(t){return dW(t)}function nf(t){return pW(t)}function qo(t){return fW(t)}function DW(t){return t instanceof TN}function BW(t,e){return t==="value"||Xi(e)||ei(e)||DW(e)}function Wo(t,...e){if(!e.length)return t;const A=e.shift();if(Ji(t)&&Ji(A))for(const n in A)BW(n,A[n])?t[n]=A[n]:Ji(A[n])?(t[n]||Object.assign(t,{[n]:{}}),Wo(t[n],A[n])):Object.assign(t,{[n]:A[n]});return Wo(t,...e)}function kW(t,e){return t.length===e.length&&t.every((A,n)=>e[n]===A)}function ot(t,e,A=[],n){const r={},s=Array.from(e);if(Ji(s[0])&&n&&!Reflect.has(s[0],n)&&(Object.keys(s[0]).some(o=>Reflect.has(t,o))||(Wo(r,{[n]:s[0]}),A.splice(A.indexOf(n),1),s.shift())),s.length===1&&Ji(s[0]))Wo(r,s[0]);else for(let i=0;i<A.length;i++)ht(s[i])&&(r[A[i]]=s[i]);return Wo(t,r)}function EW(t){return t.constructor.getDefaults()}function Qo(t,e){return nr(t)?e:t}function JN(t,e){return e.forEach(A=>{Reflect.has(t,A)&&delete t[A]}),t}class Ms{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Rn&&this.toString()===Rn.TONE_DEBUG_CLASS)&&_W(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ms.version=R8;const Z0=1e-6;function Ko(t,e){return t>e+Z0}function I0(t,e){return Ko(t,e)||kr(t,e)}function rf(t,e){return t+Z0<e}function kr(t,e){return Math.abs(t-e)<Z0}function NW(t,e,A){return Math.max(Math.min(t,A),e)}class rr extends Ms{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ot(rr.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(at(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const A=this._timeline[this.length-1];at(I0(e.time,A.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const A=this._search(e.time);this._timeline.splice(A+1,0,e)}if(this.length>this.memory){const A=this.length-this.memory;this._timeline.splice(0,A)}return this}remove(e){const A=this._timeline.indexOf(e);return A!==-1&&this._timeline.splice(A,1),this}get(e,A="time"){const n=this._search(e,A);return n!==-1?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,A="time"){const n=this._search(e,A);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const A=this._timeline.length;if(A>0&&this._timeline[A-1].time<e)return this._timeline[A-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let A=this._search(e);if(A>=0)if(kr(this._timeline[A].time,e)){for(let n=A;n>=0&&kr(this._timeline[n].time,e);n--)A=n;this._timeline=this._timeline.slice(0,A)}else this._timeline=this._timeline.slice(0,A+1);else this._timeline=[]}else this._timeline.length===1&&I0(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const A=this._search(e);return A>=0&&(this._timeline=this._timeline.slice(A+1)),this}previousEvent(e){const A=this._timeline.indexOf(e);return A>0?this._timeline[A-1]:null}_search(e,A="time"){if(this._timeline.length===0)return-1;let n=0;const r=this._timeline.length;let s=r;if(r>0&&this._timeline[r-1][A]<=e)return r-1;for(;n<s;){let i=Math.floor(n+(s-n)/2);const o=this._timeline[i],a=this._timeline[i+1];if(kr(o[A],e)){for(let c=i;c<this._timeline.length;c++){const l=this._timeline[c];if(kr(l[A],e))i=c;else break}return i}else{if(rf(o[A],e)&&Ko(a[A],e))return i;Ko(o[A],e)?s=i:n=i+1}}return-1}_iterate(e,A=0,n=this._timeline.length-1){this._timeline.slice(A,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,A){const n=this._search(e);return n!==-1&&this._iterate(A,0,n),this}forEachAfter(e,A){const n=this._search(e);return this._iterate(A,n+1),this}forEachBetween(e,A,n){let r=this._search(e),s=this._search(A);return r!==-1&&s!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[s].time===A&&(s-=1),this._iterate(n,r,s)):r===-1&&this._iterate(n,0,s),this}forEachFrom(e,A){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(A,n+1),this}forEachAtTime(e,A){const n=this._search(e);if(n!==-1&&kr(this._timeline[n].time,e)){let r=n;for(let s=n;s>=0&&kr(this._timeline[s].time,e);s--)r=s;this._iterate(s=>{A(s)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const XN=[];function sf(t){XN.push(t)}function TW(t){XN.forEach(e=>e(t))}const eT=[];function of(t){eT.push(t)}function OW(t){eT.forEach(e=>e(t))}class Dl extends Ms{constructor(){super(...arguments),this.name="Emitter"}on(e,A){return e.split(/\W+/).forEach(r=>{nr(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(A)}),this}once(e,A){const n=(...r)=>{A(...r),this.off(e,n)};return this.on(e,n),this}off(e,A){return e.split(/\W+/).forEach(r=>{if(nr(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(nr(A))this._events[r]=[];else{const s=this._events[r];for(let i=s.length-1;i>=0;i--)s[i]===A&&s.splice(i,1)}}),this}emit(e,...A){if(this._events&&this._events.hasOwnProperty(e)){const n=this._events[e].slice(0);for(let r=0,s=n.length;r<s;r++)n[r].apply(this,A)}return this}static mixin(e){["on","once","off","emit"].forEach(A=>{const n=Object.getOwnPropertyDescriptor(Dl.prototype,A);Object.defineProperty(e.prototype,A,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class tT extends Dl{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Bl extends tT{constructor(){var e,A;super(),this.name="Context",this._constants=new Map,this._timeouts=new rr,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=ot(Bl.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=xW({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new vW(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((A=arguments[0])===null||A===void 0)&&A.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(TW(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,A,n){return this._context.createBuffer(e,A,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,A){return this._context.createIIRFilter(e,A)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,A,n){return this._context.createPeriodicWave(e,A,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return at(qo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return at(qo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return at(qo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){at(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){at(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){at(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){at(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,A){return MW(this.rawContext,e,A)}addAudioWorkletModule(e){return iA(this,void 0,void 0,function*(){at(ht(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return iA(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return qo(this._context)?this._context.resume():Promise.resolve()}close(){return iA(this,void 0,void 0,function*(){qo(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&OW(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const A=this._context.createBuffer(1,128,this._context.sampleRate),n=A.getChannelData(0);for(let s=0;s<n.length;s++)n[s]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=A,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,A=>{A.callback(),this._timeouts.remove(A)})}setTimeout(e,A){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+A}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(A=>{A.id===e&&this._timeouts.remove(A)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,A){const n=++this._timeoutIds,r=()=>{const s=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:s+A})};return r(),n}}class YW extends tT{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,A,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,A){return{}}createPanner(){return{}}createPeriodicWave(e,A,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,A){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return iA(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,A){return 0}clearTimeout(e){return this}setInterval(e,A){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function lA(t,e){Br(e)?e.forEach(A=>lA(t,A)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function AT(t,e){Br(e)?e.forEach(A=>AT(t,A)):Object.defineProperty(t,e,{writable:!0})}const Nt=()=>{};class qt extends Ms{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Nt;const e=ot(qt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Gs(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Nt,onload:Nt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:sr().sampleRate}set(e){return e instanceof qt?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return iA(this,void 0,void 0,function*(){const A=qt.load(e).then(n=>{this.set(n),this.onload(this)});qt.downloads.push(A);try{yield A}finally{const n=qt.downloads.indexOf(A);qt.downloads.splice(n,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const A=Br(e)&&e[0].length>0,n=A?e.length:1,r=A?e[0].length:e.length,s=sr(),i=s.createBuffer(n,r,s.sampleRate),o=!A&&n===1?[e]:e;for(let a=0;a<n;a++)i.copyToChannel(o[a],a);return this._buffer=i,this}toMono(e){if(Ki(e))this.fromArray(this.toArray(e));else{let A=new Float32Array(this.length);const n=this.numberOfChannels;for(let r=0;r<n;r++){const s=this.toArray(r);for(let i=0;i<s.length;i++)A[i]+=s[i]}A=A.map(r=>r/n),this.fromArray(A)}return this}toArray(e){if(Ki(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const A=[];for(let n=0;n<this.numberOfChannels;n++)A[n]=this.getChannelData(n);return A}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,A=this.duration){at(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),r=Math.floor(A*this.sampleRate);at(n<r,"The start time must be less than the end time");const s=r-n,i=sr().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)i.copyToChannel(this.getChannelData(o).subarray(n,r),o);return new qt(i)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new qt().fromArray(e)}static fromUrl(e){return iA(this,void 0,void 0,function*(){return yield new qt().load(e)})}static load(e){return iA(this,void 0,void 0,function*(){const A=qt.baseUrl===""||qt.baseUrl.endsWith("/")?qt.baseUrl:qt.baseUrl+"/",n=yield fetch(A+e);if(!n.ok)throw new Error(`could not load url: ${e}`);const r=yield n.arrayBuffer();return yield sr().decodeAudioData(r)})}static supportsType(e){const A=e.split("."),n=A[A.length-1];return document.createElement("audio").canPlayType("audio/"+n)!==""}static loaded(){return iA(this,void 0,void 0,function*(){for(yield Promise.resolve();qt.downloads.length;)yield qt.downloads[0]})}}qt.baseUrl="",qt.downloads=[];class R0 extends Bl{constructor(){super({clockSource:"offline",context:nf(arguments[0])?arguments[0]:yW(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:nf(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=nf(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return iA(this,void 0,void 0,function*(){let A=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,A++;const n=Math.floor(this.sampleRate/128);e&&A%n===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return iA(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const A=yield this._context.startRendering();return new qt(A)})}close(){return Promise.resolve()}}const nT=new YW;let Jo=nT;function sr(){return Jo===nT&&GW&&SW(new Bl),Jo}function SW(t,e=!1){e&&Jo.dispose(),qo(t)?Jo=new Bl(t):nf(t)?Jo=new R0(t):Jo=t}if(Rn&&!Rn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${R8} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function CW(t){return Math.pow(10,t/20)}function PW(t){return 20*(Math.log(t)/Math.LN10)}function rT(t){return Math.pow(2,t/12)}let af=440;function ZW(){return af}function IW(t){af=t}function j0(t){return Math.round(sT(t))}function sT(t){return 69+12*Math.log2(t/af)}function RW(t){return af*Math.pow(2,(t-69)/12)}class z0 extends Ms{constructor(e,A,n){super(),this.defaultUnits="s",this._val=A,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,A)=>{const n=parseInt(e,10),r=A==="."?1.5:1;return n===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const A=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(A)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,A,n)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),A&&A!=="0"&&(r+=this._beatsToUnits(parseFloat(A))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof z0&&this.fromType(this._val),nr(this._val))return this._noArg();if(Gs(this._val)&&nr(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Ji(this._val)){let e=0;for(const A in this._val)if(ht(this._val[A])){const n=this._val[A],r=new this.constructor(this.context,A).valueOf()*n;e+=r}return e}if(ht(this._units)){const e=this._expressions[this._units],A=this._val.toString().trim().match(e.regexp);return A?e.method.apply(this,A.slice(1)):e.method.call(this,this._val)}else return Gs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ir extends z0{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const A=new ir(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(A))},regexp:/^@(.+)/}})}quantize(e,A=1){const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),o=Math.round(r/n)*n-r;return r+o*A}toNotation(){const e=this.toSeconds(),A=["1m"];for(let s=1;s<9;s++){const i=Math.pow(2,s);A.push(i+"n."),A.push(i+"n"),A.push(i+"t")}A.push("0");let n=A[0],r=new ir(this.context,A[0]).toSeconds();return A.forEach(s=>{const i=new ir(this.context,s).toSeconds();Math.abs(i-e)<Math.abs(r-e)&&(n=s,r=i)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let A=this.valueOf()/e;A=parseFloat(A.toFixed(4));const n=Math.floor(A/this._getTimeSignature());let r=A%1*4;A=Math.floor(A)%this._getTimeSignature();const s=r.toString();return s.length>3&&(r=parseFloat(parseFloat(s).toFixed(3))),[n,A,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return j0(this.toFrequency())}_now(){return this.context.now()}}function iT(t,e){return new ir(sr(),t,e)}class or extends ir{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ZW()}static set A4(e){IW(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:or.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,A){const r=jW[e.toLowerCase()]+(parseInt(A,10)+1)*12;return this.defaultUnits==="midi"?r:or.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,A,n){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),A&&A!=="0"&&(r*=this._beatsToUnits(parseFloat(A))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new or(this.context,this.valueOf()*rT(e))}harmonize(e){return e.map(A=>this.transpose(A))}toMidi(){return j0(this.valueOf())}toNote(){const e=this.toFrequency(),A=Math.log2(e/or.A4);let n=Math.round(12*A)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),zW[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),A=this.valueOf()/e;return Math.floor(A*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return RW(e)}static ftom(e){return j0(e)}}const jW={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},zW=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class kl extends ir{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class kn extends Ms{constructor(){super();const e=ot(kn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:sr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return bW(e),new ir(this.context,e).toSeconds()}toFrequency(e){return new or(this.context,e).toFrequency()}toTicks(e){return new kl(this.context,e).toTicks()}_getPartialProperties(e){const A=this.get();return Object.keys(A).forEach(n=>{nr(e[n])&&delete A[n]}),A}get(){const e=EW(this);return Object.keys(e).forEach(A=>{if(Reflect.has(this,A)){const n=this[A];ht(n)&&ht(n.value)&&ht(n.setValueAtTime)?e[A]=n.value:n instanceof kn?e[A]=n._getPartialProperties(e[A]):Br(n)||Ki(n)||Gs(n)||wW(n)?e[A]=n:delete e[A]}}),e}set(e){return Object.keys(e).forEach(A=>{Reflect.has(this,A)&&ht(this[A])&&(this[A]&&ht(this[A].value)&&ht(this[A].setValueAtTime)?this[A].value!==e[A]&&(this[A].value=e[A]):this[A]instanceof kn?this[A].set(e[A]):this[A]=e[A])}),this}}class H0 extends rr{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const A=this.get(e);return A!==null?A.state:this._initial}setStateAtTime(e,A,n){return Xs(A,0),this.add(Object.assign({},n,{state:e,time:A})),this}getLastState(e,A){const n=this._search(A);for(let r=n;r>=0;r--){const s=this._timeline[r];if(s.state===e)return s}}getNextState(e,A){const n=this._search(A);if(n!==-1)for(let r=n;r<this._timeline.length;r++){const s=this._timeline[r];if(s.state===e)return s}}}class tA extends kn{constructor(){const e=ot(tA.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,at(ht(e.param)&&(Xi(e.param)||e.param instanceof tA),"param must be an AudioParam");!Xi(e.param);)e.param=e.param._param;this._swappable=ht(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new rr(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ht(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(kn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ht(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ht(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,A){return this.units===A}_assertRange(e){return ht(this.maxValue)&&ht(this.minValue)&&Xs(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?CW(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?PW(e):e}setValueAtTime(e,A){const n=this.toSeconds(A),r=this._fromType(e);return at(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(A)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const A=Math.max(this.toSeconds(e),0),n=this._events.getAfter(A),r=this._events.get(A);let s=this._initialValue;if(r===null)s=this._initialValue;else if(r.type==="setTargetAtTime"&&(n===null||n.type==="setValueAtTime")){const i=this._events.getBefore(r.time);let o;i===null?o=this._initialValue:o=i.value,r.type==="setTargetAtTime"&&(s=this._exponentialApproach(r.time,o,r.value,r.constant,A))}else if(n===null)s=r.value;else if(n.type==="linearRampToValueAtTime"||n.type==="exponentialRampToValueAtTime"){let i=r.value;if(r.type==="setTargetAtTime"){const o=this._events.getBefore(r.time);o===null?i=this._initialValue:i=o.value}n.type==="linearRampToValueAtTime"?s=this._linearInterpolate(r.time,i,n.time,n.value,A):s=this._exponentialInterpolate(r.time,i,n.time,n.value,A)}else s=r.value;return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let A=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(A)===0&&(A=this._toType(this._minOutput)),this.setValueAtTime(A,e),this}linearRampToValueAtTime(e,A){const n=this._fromType(e),r=this.toSeconds(A);return at(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(A)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,A){let n=this._fromType(e);n=kr(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(A);return at(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(A)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,A,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(A)),this}linearRampTo(e,A,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(A)),this}targetRampTo(e,A,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,A),this}exponentialApproachValueAtTime(e,A,n){A=this.toSeconds(A),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,A,r),this.cancelAndHoldAtTime(A+n*.9),this.linearRampToValueAtTime(e,A+n),this}setTargetAtTime(e,A,n){const r=this._fromType(e);at(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const s=this.toSeconds(A);return this._assertRange(r),at(isFinite(r)&&isFinite(s),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(A)}`),this._events.add({constant:n,time:s,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,s,n),this._param.setTargetAtTime(r,s,n),this}setValueCurveAtTime(e,A,n,r=1){n=this.toSeconds(n),A=this.toSeconds(A);const s=this._fromType(e[0])*r;this.setValueAtTime(this._toType(s),A);const i=n/(e.length-1);for(let o=1;o<e.length;o++){const a=this._fromType(e[o])*r;this.linearRampToValueAtTime(this._toType(a),A+o*i)}return this}cancelScheduledValues(e){const A=this.toSeconds(e);return at(isFinite(A),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(A),this._param.cancelScheduledValues(A),this.log(this.units,"cancelScheduledValues",A),this}cancelAndHoldAtTime(e){const A=this.toSeconds(e),n=this._fromType(this.getValueAtTime(A));at(isFinite(A),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",A,"value="+n);const r=this._events.get(A),s=this._events.getAfter(A);return r&&kr(r.time,A)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(A),this._events.cancel(A+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),s.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(n),A):s.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(n),A)),this._events.add({time:A,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,A),this}rampTo(e,A=.1,n){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,A,n):this.linearRampTo(e,A,n),this}apply(e){const A=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(A),A);const n=this._events.get(A);if(n&&n.type==="setTargetAtTime"){const r=this._events.getAfter(n.time),s=r?r.time:A+2,i=(s-A)/10;for(let o=A;o<s;o+=i)e.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){at(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const A=this.input;return A.disconnect(this._param),this.apply(e),this._param=e,A.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,A,n,r,s){return n+(A-n)*Math.exp(-(s-e)/r)}_linearInterpolate(e,A,n,r,s){return A+(r-A)*((s-e)/(n-e))}_exponentialInterpolate(e,A,n,r,s){return A*Math.pow(r/A,(s-e)/(n-e))}}class lt extends kn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ht(this.input)?Xi(this.input)||this.input instanceof tA?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ht(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ht(e)&&(e instanceof lt||ei(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(n=>{n.channelCount=e.channelCount,n.channelCountMode=e.channelCountMode,n.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();at(e.length>0,"ToneAudioNode does not have any internal nodes");const A=e[0];return{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const A=this._getChannelProperties();this._setChannelProperties(Object.assign(A,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const A=this._getChannelProperties();this._setChannelProperties(Object.assign(A,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const A=this._getChannelProperties();this._setChannelProperties(Object.assign(A,{channelInterpretation:e}))}connect(e,A=0,n=0){return Xo(this,e,A,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return P0("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,A=0,n=0){return HW(this,e,A,n),this}chain(...e){return L0(this,...e),this}fan(...e){return e.forEach(A=>this.connect(A)),this}dispose(){return super.dispose(),ht(this.input)&&(this.input instanceof lt?this.input.dispose():ei(this.input)&&this.input.disconnect()),ht(this.output)&&(this.output instanceof lt?this.output.dispose():ei(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function L0(...t){const e=t.shift();t.reduce((A,n)=>(A instanceof lt?A.connect(n):ei(A)&&Xo(A,n),n),e)}function Xo(t,e,A=0,n=0){for(at(ht(t),"Cannot connect from undefined node"),at(ht(e),"Cannot connect to undefined node"),(e instanceof lt||ei(e))&&at(e.numberOfInputs>0,"Cannot connect to node with no inputs"),at(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof lt||e instanceof tA;)ht(e.input)&&(e=e.input);for(;t instanceof lt;)ht(t.output)&&(t=t.output);Xi(e)?t.connect(e,A):t.connect(e,A,n)}function HW(t,e,A=0,n=0){if(ht(e))for(;e instanceof lt;)e=e.input;for(;!ei(t);)ht(t.output)&&(t=t.output);Xi(e)?t.disconnect(e,A):ei(e)?t.disconnect(e,A,n):t.disconnect()}class QA extends lt{constructor(){const e=ot(QA.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new tA({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),lA(this,"gain")}static getDefaults(){return Object.assign(lt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ea extends lt{constructor(e){super(e),this.onended=Nt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new QA({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(A){const n=this.toSeconds(A);return this._startTime!==-1&&n>=this._startTime&&(this._stopTime===-1||n<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(lt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Nt})}_startGain(e,A=1){at(this._startTime===-1,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(A,e+n):this._gainNode.gain.exponentialApproachValueAtTime(A,e,n)):this._gainNode.gain.setValueAtTime(A,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){at(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const A=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+A,this._stopTime=Math.max(this._stopTime,this.now()),A>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,A,e):this._gainNode.gain.targetRampTo(0,A,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const n=this._curve==="exponential"?A*2:0;this._stopSource(this.now()+n),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Nt&&(this.onended(this),this.onended=Nt,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),at(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Nt,this}}class U0 extends ea{constructor(){const e=ot(U0.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Xo(this._source,this._gainNode),this.offset=new tA({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(ea.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const A=this.toSeconds(e);return this.log("start",A),this._startGain(A),this._source.start(A),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ZA extends lt{constructor(){const e=ot(ZA.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new U0({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(lt.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,A=0,n=0){return F0(this,e,A,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,A){return this._param.setValueAtTime(e,A),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,A){return this._param.linearRampToValueAtTime(e,A),this}exponentialRampToValueAtTime(e,A){return this._param.exponentialRampToValueAtTime(e,A),this}exponentialRampTo(e,A,n){return this._param.exponentialRampTo(e,A,n),this}linearRampTo(e,A,n){return this._param.linearRampTo(e,A,n),this}targetRampTo(e,A,n){return this._param.targetRampTo(e,A,n),this}exponentialApproachValueAtTime(e,A,n){return this._param.exponentialApproachValueAtTime(e,A,n),this}setTargetAtTime(e,A,n){return this._param.setTargetAtTime(e,A,n),this}setValueCurveAtTime(e,A,n,r){return this._param.setValueCurveAtTime(e,A,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,A,n){return this._param.rampTo(e,A,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function F0(t,e,A,n){(e instanceof tA||Xi(e)||e instanceof ZA&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ZA&&(e.overridden=!0)),Xo(t,e,A,n)}class $0 extends tA{constructor(){const e=ot($0.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new rr(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(tA.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,A,n){A=this.toSeconds(A),this.setRampPoint(A);const r=this._fromType(e),s=this._events.get(A),i=Math.round(Math.max(1/n,1));for(let o=0;o<=i;o++){const a=n*o+A,c=this._exponentialApproach(s.time,s.value,r,n,a);this.linearRampToValueAtTime(this._toType(c),a)}return this}setValueAtTime(e,A){const n=this.toSeconds(A);super.setValueAtTime(e,A);const r=this._events.get(n),s=this._events.previousEvent(r),i=this._getTicksUntilEvent(s,n);return r.ticks=Math.max(i,0),this}linearRampToValueAtTime(e,A){const n=this.toSeconds(A);super.linearRampToValueAtTime(e,A);const r=this._events.get(n),s=this._events.previousEvent(r),i=this._getTicksUntilEvent(s,n);return r.ticks=Math.max(i,0),this}exponentialRampToValueAtTime(e,A){A=this.toSeconds(A);const n=this._fromType(e),r=this._events.get(A),s=Math.round(Math.max((A-r.time)*10,1)),i=(A-r.time)/s;for(let o=0;o<=s;o++){const a=i*o+r.time,c=this._exponentialInterpolate(r.time,r.value,A,n,a);this.linearRampToValueAtTime(this._toType(c),a)}return this}_getTicksUntilEvent(e,A){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(nr(e.ticks)){const i=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(i,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(A));const s=this._events.get(A);return s&&s.time===A&&s.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(A-this.sampleTime))),.5*(A-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const A=this.toSeconds(e),n=this._events.get(A);return Math.max(this._getTicksUntilEvent(n,A),0)}getDurationOfTicks(e,A){const n=this.toSeconds(A),r=this.getTicksAtTime(A);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const A=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(A&&A.ticks===e)return A.time;if(A&&n&&n.type==="linearRampToValueAtTime"&&A.value!==n.value){const r=this._fromType(this.getValueAtTime(A.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-A.time),o=Math.sqrt(Math.pow(r,2)-2*i*(A.ticks-e)),a=(-r+o)/i,c=(-r-o)/i;return(a>0?a:c)+A.time}else return A?A.value===0?1/0:A.time+(e-A.ticks)/A.value:e/this._initialValue}ticksToTime(e,A){return this.getDurationOfTicks(e,A)}timeToTicks(e,A){const n=this.toSeconds(A),r=this.toSeconds(e),s=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-s}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const A=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(A,0)}}class V0 extends ZA{constructor(){const e=ot(V0.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new $0({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ZA.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,A){return this._param.ticksToTime(e,A)}timeToTicks(e,A){return this._param.timeToTicks(e,A)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,A){return this._param.getDurationOfTicks(e,A)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class q0 extends kn{constructor(){const e=ot(q0.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new H0,this._tickOffset=new rr,this._ticksAtTime=new rr,this._secondsAtTime=new rr,this.frequency=new V0({context:this.context,units:e.units,value:e.frequency}),lA(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},kn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,A){const n=this.toSeconds(e);return this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),ht(A)&&this.setTicksAtTime(A,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const A=this.toSeconds(e);if(this._state.getValueAtTime(A)==="stopped"){const n=this._state.get(A);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(A),this._state.setStateAtTime("stopped",A),this.setTicksAtTime(0,A),this._ticksAtTime.cancel(A),this._secondsAtTime.cancel(A),this}pause(e){const A=this.toSeconds(e);return this._state.getValueAtTime(A)==="started"&&(this._state.setStateAtTime("paused",A),this._ticksAtTime.cancel(A),this._secondsAtTime.cancel(A)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const A=this.toSeconds(e),n=this._state.getLastState("stopped",A),r=this._ticksAtTime.get(A),s={state:"paused",time:A};this._state.add(s);let i=r||n,o=r?r.ticks:0,a=null;return this._state.forEachBetween(i.time,A+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.ticks,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(l),c.time!==s.time&&(a={state:c.state,time:c.time,ticks:o})),i=c}),this._state.remove(s),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const A=this.now(),n=this.frequency.timeToTicks(e,A);this.setTicksAtTime(n,A)}getSecondsAtTime(e){e=this.toSeconds(e);const A=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const r=this._secondsAtTime.get(e);let s=r||A,i=r?r.seconds:0,o=null;return this._state.forEachBetween(s.time,e+this.sampleTime,a=>{let c=s.time;const l=this._tickOffset.get(a.time);l&&l.time>=s.time&&(i=l.seconds,c=l.time),s.state==="started"&&a.state!=="started"&&(i+=a.time-c,a.time!==n.time&&(o={state:a.state,time:a.time,seconds:i})),s=a}),this._state.remove(n),o&&this._secondsAtTime.add(o),i}setTicksAtTime(e,A){return A=this.toSeconds(A),this._tickOffset.cancel(A),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,A),ticks:e,time:A}),this._ticksAtTime.cancel(A),this._secondsAtTime.cancel(A),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,A=this.now()){const n=this._tickOffset.get(A),r=this._state.get(A),s=Math.max(n.time,r.time),i=this.frequency.getTicksAtTime(s)+e-n.ticks;return this.frequency.getTimeOfTick(i)}forEachTickBetween(e,A,n){let r=this._state.get(e);this._state.forEachBetween(e,A,i=>{r&&r.state==="started"&&i.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),i.time-this.sampleTime,n),r=i});let s=null;if(r&&r.state==="started"){const i=Math.max(r.time,e),o=this.frequency.getTicksAtTime(i),a=this.frequency.getTicksAtTime(r.time),c=o-a;let l=Math.ceil(c)-c;l=kr(l,1)?0:l;let u=this.frequency.getTimeOfTick(o+l);for(;u<A;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(f){s=f;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class cf extends kn{constructor(){const e=ot(cf.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Nt,this._lastUpdate=0,this._state=new H0("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new q0({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,lA(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(kn.getDefaults(),{callback:Nt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,A){VN(this.context);const n=this.toSeconds(e);return this.log("start",n),this._state.getValueAtTime(n)!=="started"&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,A),n<this._lastUpdate&&this.emit("start",n,A)),this}stop(e){const A=this.toSeconds(e);return this.log("stop",A),this._state.cancel(A),this._state.setStateAtTime("stopped",A),this._tickSource.stop(A),A<this._lastUpdate&&this.emit("stop",A),this}pause(e){const A=this.toSeconds(e);return this._state.getValueAtTime(A)==="started"&&(this._state.setStateAtTime("paused",A),this._tickSource.pause(A),A<this._lastUpdate&&this.emit("pause",A)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,A){return this._tickSource.setTicksAtTime(e,A),this}getTimeOfTick(e,A=this.now()){return this._tickSource.getTimeOfTick(e,A)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,A){const n=this.toSeconds(A),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,A=this.now();this._lastUpdate=A,this.log("loop",e,A),e!==A&&(this._state.forEachBetween(e,A,n=>{switch(n.state){case"started":const r=this._tickSource.getTicksAtTime(n.time);this.emit("start",n.time,r);break;case"stopped":n.time!==0&&this.emit("stop",n.time);break;case"paused":this.emit("pause",n.time);break}}),this._tickSource.forEachTickBetween(e,A,(n,r)=>{this.callback(n,r)}))}getStateAtTime(e){const A=this.toSeconds(e);return this._state.getValueAtTime(A)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Dl.mixin(cf);class ta extends lt{constructor(){const e=ot(ta.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new QA({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,lA(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class W0 extends lt{constructor(){const e=ot(W0.getDefaults(),arguments);super(e),this.name="Destination",this.input=new ta({context:this.context}),this.output=new QA({context:this.context}),this.volume=this.input.volume,L0(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),L0(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}sf(t=>{t.destination=new W0({context:t})}),of(t=>{t.destination.dispose()});class LW extends lt{constructor(){super(...arguments),this.name="Listener",this.positionX=new tA({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new tA({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new tA({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new tA({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new tA({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new tA({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new tA({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new tA({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new tA({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(lt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}sf(t=>{t.listener=new LW({context:t})}),of(t=>{t.listener.dispose()});class Q0 extends Ms{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ot(Q0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(A=>{this._loadingCount++;const n=e.urls[A];this.add(A,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Nt,onload:Nt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return at(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,A])=>A.loaded)}add(e,A,n=Nt,r=Nt){return Gs(A)?(this.baseUrl&&A.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new qt(this.baseUrl+A,n,r))):this._buffers.set(e.toString(),new qt(A,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Aa extends kl{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class UW extends kn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new rr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,A){return this._events.add({callback:e,time:this.toSeconds(A)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,A=>{e-A.time<=this.expiration&&A.callback(),this._events.remove(A)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}sf(t=>{t.draw=new UW({context:t})}),of(t=>{t.draw.dispose()});class FW extends Ms{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){at(ht(e.time),"Events must have a time property"),at(ht(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let A=new $W(e.time,e.time+e.duration,e);for(this._root===null?this._root=A:this._root.insert(A),this._length++;A!==null;)A.updateHeight(),A.updateMax(),this._rebalance(A),A=A.parent;return this}remove(e){if(this._root!==null){const A=[];this._root.search(e.time,A);for(const n of A)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,A=>this.remove(A)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,A){e.parent!==null?(e.isLeftChild()?e.parent.left=A:e.parent.right=A,this._rebalance(e.parent)):this._setRoot(A)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const A=e.getBalance();let n,r=null;if(A>0)if(e.left.right===null)n=e.left,n.right=e.right,r=n;else{for(n=e.left.right;n.right!==null;)n=n.right;n.parent&&(n.parent.right=n.left,r=n.parent,n.left=e.left,n.right=e.right)}else if(e.right.left===null)n=e.right,n.left=e.left,r=n;else{for(n=e.right.left;n.left!==null;)n=n.left;n.parent&&(n.parent.left=n.right,r=n.parent,n.left=e.left,n.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=n:e.parent.right=n:this._setRoot(n),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const A=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),A!==null?n?A.left=r:A.right=r:this._setRoot(r)}_rotateRight(e){const A=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),A!==null?n?A.left=r:A.right=r:this._setRoot(r)}_rebalance(e){const A=e.getBalance();A>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):A<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const A=[];if(this._root.search(e,A),A.length>0){let n=A[0];for(let r=1;r<A.length;r++)A[r].low>n.low&&(n=A[r]);return n.event}}return null}forEach(e){if(this._root!==null){const A=[];this._root.traverse(n=>A.push(n)),A.forEach(n=>{n.event&&e(n.event)})}return this}forEachAtTime(e,A){if(this._root!==null){const n=[];this._root.search(e,n),n.forEach(r=>{r.event&&A(r.event)})}return this}forEachFrom(e,A){if(this._root!==null){const n=[];this._root.searchAfter(e,n),n.forEach(r=>{r.event&&A(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class $W{constructor(e,A,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=A,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,A){e>this.max||(this.left!==null&&this.left.search(e,A),this.low<=e&&this.high>e&&A.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,A))}searchAfter(e,A){this.low>=e&&(A.push(this),this.left!==null&&this.left.searchAfter(e,A)),this.right!==null&&this.right.searchAfter(e,A)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class VW extends Ms{constructor(e){super(),this.name="TimelineValue",this._timeline=new rr({memory:10}),this._initialValue=e}set(e,A){return this._timeline.add({value:e,time:A}),this}get(e){const A=this._timeline.get(e);return A?A.value:this._initialValue}}class na extends lt{constructor(){super(ot(na.getDefaults(),arguments,["context"]))}connect(e,A=0,n=0){return F0(this,e,A,n),this}}class El extends na{constructor(){const e=ot(El.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Br(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):gW(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ZA.getDefaults(),{length:1024})}setMap(e,A=1024){const n=new Float32Array(A);for(let r=0,s=A;r<s;r++){const i=r/(s-1)*2-1;n[r]=e(i,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const A=["none","2x","4x"].some(n=>n.includes(e));at(A,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class K0 extends na{constructor(){const e=ot(K0.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new El({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(na.getDefaults(),{value:1})}_expFunc(e){return A=>Math.pow(Math.abs(A),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ti{constructor(e,A){this.id=ti._eventId++,this._remainderTime=0;const n=Object.assign(ti.getDefaults(),A);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Nt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const A=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*A),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ti._eventId=0;class J0 extends ti{constructor(e,A){super(e,A),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(J0.getDefaults(),A);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ti.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return rf(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Aa(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){rf(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Aa(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const A=this.transport.getTicksAtTime(e);Ko(A,this.time)&&(this._nextTick=this.floatTime+Math.ceil((A-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class lf extends kn{constructor(){const e=ot(lf.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new VW(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new rr,this._repeatedEvents=new FW,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new cf({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),lA(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(kn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,A){if(this._loop.get(e)&&A>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),A=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&A%this._ppq!==0&&A%(this._swingTicks*2)!==0){const n=A%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new Aa(this.context,this._swingTicks*2/3).toSeconds()*r}QN(!0),this._timeline.forEachAtTime(A,n=>n.invoke(e)),QN(!1)}schedule(e,A){const n=new ti(this,{callback:e,time:new kl(this.context,A).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,A,n,r=1/0){const s=new J0(this,{callback:e,duration:new ir(this.context,r).toTicks(),interval:new ir(this.context,A).toTicks(),time:new kl(this.context,n).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,A){const n=new ti(this,{callback:e,once:!0,time:new kl(this.context,A).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const A=this._scheduledEvents[e.toString()];A.timeline.remove(A.event),A.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,A){return this._scheduledEvents[e.id.toString()]={event:e,timeline:A},A.add(e),e.id}cancel(e=0){const A=this.toTicks(e);return this._timeline.forEachFrom(A,n=>this.clear(n.id)),this._repeatedEvents.forEachFrom(A,n=>this.clear(n.id)),this}_bindClockEvents(){this._clock.on("start",(e,A)=>{A=new Aa(this.context,A).toSeconds(),this.emit("start",e,A)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,A){this.context.resume();let n;return ht(A)&&(n=this.toTicks(A)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Br(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new ir(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new ir(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,A){return this.loopStart=e,this.loopEnd=A,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Aa(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),A=this._clock.getTicksAtTime(e);return new Aa(this.context,A).toBarsBeatsSixteenths()}set position(e){const A=this.toTicks(e);this.ticks=A}get seconds(){return this._clock.seconds}set seconds(e){const A=this.now(),n=this._clock.frequency.timeToTicks(e,A);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const A=this.now();if(this.state==="started"){const n=this._clock.getTicksAtTime(A),r=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,A),s=A+r;this.emit("stop",s),this._clock.setTicksAtTime(e,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this.emit("ticks",A),this._clock.setTicksAtTime(e,A)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const A=this.now(),n=this.getTicksAtTime(A),r=e-n%e;return this._clock.nextTickTime(r,A)}}syncSignal(e,A){const n=this.now();let r=this.bpm,s=1/(60/r.getValueAtTime(n)/this.PPQ),i=[];if(e.units==="time"){const a=.015625/s,c=new QA(a),l=new K0(-1),u=new QA(a);r.chain(c,l,u),r=u,s=1/s,i=[c,l,u]}A||(e.getValueAtTime(n)!==0?A=e.getValueAtTime(n)/s:A=0);const o=new QA(A);return r.connect(o),o.connect(e._param),i.push(o),this._syncedSignals.push({initial:e.value,nodes:i,signal:e}),e.value=0,this}unsyncSignal(e){for(let A=this._syncedSignals.length-1;A>=0;A--){const n=this._syncedSignals[A];n.signal===e&&(n.nodes.forEach(r=>r.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(A,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),AT(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Dl.mixin(lf),sf(t=>{t.transport=new lf({context:t})}),of(t=>{t.transport.dispose()});class jn extends lt{constructor(e){super(e),this.input=void 0,this._state=new H0("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Nt,this._syncedStop=Nt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ta({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,lA(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,onstop:Nt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,A,n){let r=nr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")at(Ko(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,A,n);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const s=this._state.get(r);s&&(s.offset=this.toSeconds(Qo(A,0)),s.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule(o=>{this._start(o,A,n)},r);this._scheduled.push(i),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else VN(this.context),this._start(r,A,n);return this}stop(e){let A=nr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(A=this._clampToCurrentTime(A),this._state.getValueAtTime(A)==="started"||ht(this._state.getNextState("started",A))){if(this.log("stop",A),!this._synced)this._stop(A);else{const n=this.context.transport.schedule(this._stop.bind(this),A);this._scheduled.push(n)}this._state.cancel(A),this._state.setStateAtTime("stopped",A)}return this}restart(e,A,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,A,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,A)=>{if(Ko(A,0)){const n=this._state.get(A);if(n&&n.state==="started"&&n.time!==A){const r=A-this.toSeconds(n.time);let s;n.duration&&(s=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,s)}}},this._syncedStop=e=>{const A=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(A)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Nt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class uf extends ea{constructor(){const e=ot(uf.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Xo(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new tA({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new qt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ea.getDefaults(),{url:new qt,loop:!1,loopEnd:0,loopStart:0,onload:Nt,onerror:Nt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,A,n,r=1){at(this.buffer.loaded,"buffer is either not set or not loaded");const s=this.toSeconds(e);this._startGain(s,r),this.loop?A=Qo(A,this.loopStart):A=Qo(A,0);let i=Math.max(this.toSeconds(A),0);if(this.loop){const o=this.toSeconds(this.loopEnd)||this.buffer.duration,a=this.toSeconds(this.loopStart),c=o-a;I0(i,o)&&(i=(i-a)%c+a),kr(i,this.buffer.duration)&&(i=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,rf(i,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,i)),ht(n)){let o=this.toSeconds(n);o=Math.max(o,0),this.stop(s+o)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function eo(t,e){return iA(this,void 0,void 0,function*(){const A=e/t.context.sampleRate,n=new R0(1,A,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/A,detune:0,context:n})).toDestination().start(0),(yield n.render()).getChannelData(0)})}class X0 extends ea{constructor(){const e=ot(X0.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Xo(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new tA({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new tA({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),lA(this,["frequency","detune"])}static getDefaults(){return Object.assign(ea.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const A=this.toSeconds(e);return this.log("start",A),this._startGain(A),this._oscillator.start(A),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class GA extends jn{constructor(){const e=ot(GA.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new ZA({context:this.context,units:"frequency",value:e.frequency}),lA(this,"frequency"),this.detune=new ZA({context:this.context,units:"cents",value:e.detune}),lA(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(jn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const A=this.toSeconds(e),n=new X0({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(A)}_stop(e){const A=this.toSeconds(e);this._oscillator&&this._oscillator.stop(A)}_restart(e){const A=this.toSeconds(e);return this.log("restart",A),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(A),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return GA._periodicWaveCache.find(A=>A.phase===this._phase&&kW(A.partials,this._partials));{const e=GA._periodicWaveCache.find(A=>A.type===this._type&&A.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const A=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&A)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const n=this._getCachedPeriodicWave();if(ht(n)){const{partials:r,wave:s}=n;this._wave=s,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,s]=this._getRealImaginary(e,this._phase),i=this.context.createPeriodicWave(r,s);this._wave=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),GA._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),GA._periodicWaveCache.length>100&&GA._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Xs(e,0);let A=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(A=n[1]),this._type!=="custom")e===0?this.type=A:this.type=A+e.toString();else{const r=new Float32Array(e);this._partials.forEach((s,i)=>r[i]=s),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,A){let r=2048;const s=new Float32Array(r),i=new Float32Array(r);let o=1;if(e==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,r=o,this._partials.length===0)return[s,i]}else{const a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);a?(o=parseInt(a[2],10)+1,this._partialCount=parseInt(a[2],10),e=a[1],o=Math.max(o,2),r=o):this._partialCount=0,this._partials=[]}for(let a=1;a<r;++a){const c=2/(a*Math.PI);let l;switch(e){case"sine":l=a<=o?1:0,this._partials[a-1]=l;break;case"square":l=a&1?2*c:0,this._partials[a-1]=l;break;case"sawtooth":l=c*(a&1?1:-1),this._partials[a-1]=l;break;case"triangle":a&1?l=2*(c*c)*(a-1>>1&1?-1:1):l=0,this._partials[a-1]=l;break;case"custom":l=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}l!==0?(s[a]=-l*Math.sin(A*a),i[a]=l*Math.cos(A*a)):(s[a]=0,i[a]=0)}return[s,i]}_inverseFFT(e,A,n){let r=0;const s=e.length;for(let i=0;i<s;i++)r+=e[i]*Math.cos(i*n)+A[i]*Math.sin(i*n);return r}getInitialValue(){const[e,A]=this._getRealImaginary(this._type,0);let n=0;const r=Math.PI*2,s=32;for(let i=0;i<s;i++)n=Math.max(this._inverseFFT(e,A,i/s*r),n);return NW(-this._inverseFFT(e,A,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}GA._periodicWaveCache=[];class qW extends na{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new El({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ra extends ZA{constructor(){const e=ot(ra.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new QA({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ZA.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class hf extends jn{constructor(){const e=ot(hf.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new qW({context:this.context}),this._modulationNode=new QA({context:this.context}),this._carrier=new GA({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new GA({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ra({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),lA(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(GA.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ff extends jn{constructor(){const e=ot(ff.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new QA({context:this.context,gain:0}),this._carrier=new GA({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ZA({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new GA({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ra({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ra({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),lA(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(GA.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Nl extends jn{constructor(){const e=ot(Nl.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new QA({context:this.context,gain:0}),this._thresh=new El({context:this.context,mapping:A=>A<=0?-1:1}),this.width=new ZA({context:this.context,units:"audioRange",value:e.width}),this._triangle=new GA({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),lA(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(jn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class df extends jn{constructor(){const e=ot(df.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ZA({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ZA({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,lA(this,["frequency","detune"])}static getDefaults(){return Object.assign(GA.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(A=>A.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(A=>A.stop(e))}_restart(e){this._forEach(A=>A.restart(e))}_forEach(e){for(let A=0;A<this._oscillators.length;A++)e(this._oscillators[A],A)}get type(){return this._type}set type(e){this._type=e,this._forEach(A=>A.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const A=-e/2,n=e/(this._oscillators.length-1);this._forEach((r,s)=>r.detune.value=A+n*s)}}get count(){return this._oscillators.length}set count(e){if(Xs(e,1),this._oscillators.length!==e){this._forEach(A=>A.dispose()),this._oscillators=[];for(let A=0;A<e;A++){const n=new GA({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+A/e*360,partialCount:this._partialCount,onstop:A===0?()=>this.onstop(this):Nt});this.type==="custom"&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[A]=n}this.spread=this._spread,this.state==="started"&&this._forEach(A=>A.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((A,n)=>A.phase=this._phase+n/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(A=>A.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(A=>A.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(A=>A.partialCount=e),this._type=this._oscillators[0].type}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class mf extends jn{constructor(){const e=ot(mf.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ra({context:this.context,value:2}),this._pulse=new Nl({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new GA({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),lA(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(jn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const oT={am:hf,fat:df,fm:ff,oscillator:GA,pulse:Nl,pwm:mf};class pf extends jn{constructor(){const e=ot(pf.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ZA({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ZA({context:this.context,units:"cents",value:e.detune}),lA(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(GA.getDefaults(),ff.getDefaults(),hf.getDefaults(),df.getDefaults(),Nl.getDefaults(),mf.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(A=>this._sourceType===A)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const A=oT[e],n=this.now();if(this._oscillator){const r=this._oscillator;r.stop(n),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new A({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let A="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(A=this._oscillator.type),e==="fm"?this.type="fm"+A:e==="am"?this.type="am"+A:e==="fat"?this.type="fat"+A:e==="oscillator"?this.type=A:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,A){return e instanceof oT[A]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ki(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ki(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Gs(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return iA(this,arguments,void 0,function*(e=1024){return eo(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function aT(t,e=1/0){const A=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return A.get(this)},set:function(s){Xs(s,t,e),A.set(this,s)}})}}function vs(t,e=1/0){const A=new WeakMap;return function(n,r){Reflect.defineProperty(n,r,{configurable:!0,enumerable:!0,get:function(){return A.get(this)},set:function(s){Xs(this.toSeconds(s),t,e),A.set(this,s)}})}}class gf extends jn{constructor(){const e=ot(gf.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new qt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(jn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Nt,onerror:Nt,playbackRate:1,reverse:!1})}load(e){return iA(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Nt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,A,n){return super.start(e,A,n),this}_start(e,A,n){this._loop?A=Qo(A,this._loopStart):A=Qo(A,0);const r=this.toSeconds(A),s=n;n=Qo(n,Math.max(this._buffer.duration-r,0));let i=this.toSeconds(n);i=i/this._playbackRate,e=this.toSeconds(e);const o=new uf({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+i),this._state.setStateAtTime("stopped",e+i,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&nr(s)?o.start(e,r):o.start(e,r,i-this.toSeconds(this.fadeOut))}_stop(e){const A=this.toSeconds(e);this._activeSources.forEach(n=>n.stop(A))}restart(e,A,n){return super.restart(e,A,n),this}_restart(e,A,n){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,A,n)}seek(e,A){const n=this.toSeconds(A);if(this._state.getValueAtTime(n)==="started"){const r=this.toSeconds(e);this._stop(n),this._start(n,r)}return this}setLoopPoints(e,A){return this.loopStart=e,this.loopEnd=A,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Xs(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(A=>{A.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Xs(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(A=>{A.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(A=>{A.loop=e}),e)){const A=this._state.getNextState("stopped",this.now());A&&this._state.cancel(A.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const A=this.now(),n=this._state.getNextState("stopped",A);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,A)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Yn([vs(0)],gf.prototype,"fadeIn",void 0),Yn([vs(0)],gf.prototype,"fadeOut",void 0);class Ai extends lt{constructor(){const e=ot(Ai.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ZA({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(lt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,A){if(Gs(e))return e;{let n;for(n in wf)if(wf[n][A]===e)return n;return e}}_setCurve(e,A,n){if(Gs(n)&&Reflect.has(wf,n)){const r=wf[n];Ji(r)?e!=="_decayCurve"&&(this[e]=r[A]):this[e]=r}else if(Br(n)&&e!=="_decayCurve")this[e]=n;else throw new Error("Envelope: invalid curve: "+n)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,A=1){this.log("triggerAttack",e,A),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(e);if(i>0){const o=1/r;r=(1-i)/o}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(A,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(A,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(A,r,e);else{this._sig.cancelAndHoldAtTime(e);let o=this._attackCurve;for(let a=1;a<o.length;a++)if(o[a-1]<=i&&i<=o[a]){o=this._attackCurve.slice(a),o[0]=i;break}this._sig.setValueCurveAtTime(o,e,r,A)}if(s&&this.sustain<1){const o=A*this.sustain,a=e+r;this.log("decay",a),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,s+a):this._sig.exponentialApproachValueAtTime(o,a,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const A=this.getValueAtTime(e);if(A>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,n,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,n,e):(at(Br(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,A))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,A,n=1){return A=this.toSeconds(A),this.triggerAttack(A,n),this.triggerRelease(A+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,A=0,n=0){return F0(this,e,A,n),this}asArray(){return iA(this,arguments,void 0,function*(e=1024){const A=e/this.context.sampleRate,n=new R0(1,A,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),s=r+this.toSeconds(this.release),i=s*.1,o=s+i,a=new this.constructor(Object.assign(this.get(),{attack:A*this.toSeconds(this.attack)/o,decay:A*this.toSeconds(this.decay)/o,release:A*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(A*(r+i)/o,0),(yield n.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Yn([vs(0)],Ai.prototype,"attack",void 0),Yn([vs(0)],Ai.prototype,"decay",void 0),Yn([aT(0,1)],Ai.prototype,"sustain",void 0),Yn([vs(0)],Ai.prototype,"release",void 0);const wf=(()=>{let e,A;const n=[];for(e=0;e<128;e++)n[e]=Math.sin(e/127*(Math.PI/2));const r=[],s=6.4;for(e=0;e<127;e++){A=e/127;const f=Math.sin(A*(Math.PI*2)*s-Math.PI/2)+1;r[e]=f/10+A*.83}r[127]=1;const i=[],o=5;for(e=0;e<128;e++)i[e]=Math.ceil(e/127*o)/o;const a=[];for(e=0;e<128;e++)A=e/127,a[e]=.5*(1-Math.cos(Math.PI*A));const c=[];for(e=0;e<128;e++){A=e/127;const f=Math.pow(A,3)*4+.2,h=Math.cos(f*Math.PI*2*A);c[e]=Math.abs(h*(1-A))}function l(f){const h=new Array(f.length);for(let d=0;d<f.length;d++)h[d]=1-f[d];return h}function u(f){return f.slice(0).reverse()}return{bounce:{In:l(c),Out:c},cosine:{In:n,Out:u(n)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:a,Out:l(a)},step:{In:i,Out:l(i)}}})();class sa extends lt{constructor(){const e=ot(sa.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=A=>this._original_triggerRelease(A),this._volume=this.output=new ta({context:this.context,volume:e.volume}),this.volume=this._volume.volume,lA(this,"volume")}static getDefaults(){return Object.assign(lt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,A){const n=this["_original_"+e]=this[e];this[e]=(...r)=>{const s=r[A],i=this.context.transport.schedule(o=>{r[A]=o,n.apply(this,r)},s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,A,n,r){const s=this.toSeconds(n),i=this.toSeconds(A);return this.triggerAttack(e,s,r),this.triggerRelease(s+i),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ia extends sa{constructor(){const e=ot(ia.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(sa.getDefaults(),{detune:0,onsilence:Nt,portamento:0})}triggerAttack(e,A,n=1){this.log("triggerAttack",e,A,n);const r=this.toSeconds(A);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const A=this.toSeconds(e);return this._triggerEnvelopeRelease(A),this}setNote(e,A){const n=this.toSeconds(A),r=e instanceof or?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const s=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,s,n)}else this.frequency.setValueAtTime(r,n);return this}}Yn([vs(0)],ia.prototype,"portamento",void 0);class ew extends Ai{constructor(){super(ot(ew.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new QA({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class bf extends ia{constructor(){const e=ot(bf.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new pf(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ew(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),lA(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ia.getDefaults(),{envelope:Object.assign(JN(Ai.getDefaults(),Object.keys(lt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(JN(pf.getDefaults(),[...Object.keys(jn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,A){if(this.envelope.triggerAttack(e,A),this.oscillator.start(e),this.envelope.sustain===0){const n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+n+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class _f extends bf{constructor(){const e=ot(_f.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,lA(this,["oscillator","envelope"])}static getDefaults(){return Wo(ia.getDefaults(),bf.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,A){const n=this.toSeconds(A),r=this.toFrequency(e instanceof or?e.toFrequency():e),s=r*this.octaves;return this.oscillator.frequency.setValueAtTime(s,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Yn([aT(0)],_f.prototype,"octaves",void 0),Yn([vs(0)],_f.prototype,"pitchDecay",void 0);const cT=new Set;function tw(t){cT.add(t)}function lT(t,e){const A=`registerProcessor("${t}", ${e})`;cT.add(A)}tw(`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`),tw(`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`),tw(`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`),lT("feedback-comb-filter",`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`);class xf extends sa{constructor(){const e=ot(xf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const A={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(at(Af(n)||Ki(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),Af(n)){const s=new or(this.context,n).toMidi();A[s]=e.urls[n]}else Ki(r)&&isFinite(r)&&(A[r]=e.urls[r])}),this._buffers=new Q0({urls:A,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(sa.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Nt,onerror:Nt,release:.1,urls:{}})}_findClosest(e){let n=0;for(;n<96;){if(this._buffers.has(e+n))return-n;if(this._buffers.has(e-n))return n;n++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,A,n=1){return this.log("triggerAttack",e,A,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=sT(new or(this.context,r).toFrequency()),i=Math.round(s),o=s-i,a=this._findClosest(i),c=i-a,l=this._buffers.get(c),u=rT(a+o),f=new uf({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);f.start(A,0,l.duration/u,n),Br(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const h=this._activeSources.get(i),d=h.indexOf(f);d!==-1&&h.splice(d,1)}}}),this}triggerRelease(e,A){return this.log("triggerRelease",e,A),Array.isArray(e)||(e=[e]),e.forEach(n=>{const r=new or(this.context,n).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const s=this._activeSources.get(r);A=this.toSeconds(A),s.forEach(i=>{i.stop(A)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const A=this.toSeconds(e);return this._activeSources.forEach(n=>{for(;n.length;)n.shift().stop(A)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,A,n,r=1){const s=this.toSeconds(n);return this.triggerAttack(e,s,r),Br(A)?(at(Br(e),"notes must be an array when duration is array"),e.forEach((i,o)=>{const a=A[Math.min(o,A.length-1)];this.triggerRelease(i,s+this.toSeconds(a))})):this.triggerRelease(e,s+this.toSeconds(A)),this}add(e,A,n){if(at(Af(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Af(e)){const r=new or(this.context,e).toMidi();this._buffers.add(r,A,n)}else this._buffers.add(e,A,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(A=>A.dispose())}),this._activeSources.clear(),this}}Yn([vs(0)],xf.prototype,"attack",void 0),Yn([vs(0)],xf.prototype,"release",void 0);class Aw extends lt{constructor(){const e=ot(Aw.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new tA({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",lA(this,"pan")}static getDefaults(){return Object.assign(lt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}lT("bit-crusher",`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`);class MA extends lt{constructor(){const e=ot(MA.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new QA({context:this.context}),MA._allSolos.has(this.context)||MA._allSolos.set(this.context,new Set),MA._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(lt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),MA._allSolos.get(this.context).forEach(A=>A._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){MA._soloed.has(this.context)||MA._soloed.set(this.context,new Set),MA._soloed.get(this.context).add(this)}_removeSolo(){MA._soloed.has(this.context)&&MA._soloed.get(this.context).delete(this)}_isSoloed(){return MA._soloed.has(this.context)&&MA._soloed.get(this.context).has(this)}_noSolos(){return!MA._soloed.has(this.context)||MA._soloed.has(this.context)&&MA._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),MA._allSolos.get(this.context).delete(this),this._removeSolo(),this}}MA._allSolos=new Map,MA._soloed=new Map;class nw extends lt{constructor(){const e=ot(nw.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Aw({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ta({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,lA(this,["pan","volume"])}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class oa extends lt{constructor(){const e=ot(oa.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new MA({solo:e.solo,context:this.context}),this._panVol=this.output=new nw({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),lA(this,["pan","volume"])}static getDefaults(){return Object.assign(lt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return oa.buses.has(e)||oa.buses.set(e,new QA({context:this.context})),oa.buses.get(e)}send(e,A=0){const n=this._getBus(e),r=new QA({context:this.context,units:"decibels",gain:A});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}oa.buses=new Map,sr().transport,sr().destination,sr().destination,sr().listener,sr().draw,sr();const WW={a:1,b:2,c:3,d:4,e:5,f:6,g:7,x:8,A:1,B:2,C:3,D:4,E:5,F:6,G:7,X:8,"#":9,"!":10,y:13,t:14,s:15,i:16,q:17,h:18,w:19,Y:13,T:14,S:15,I:16,Q:17,H:18,W:19,3:20,".":21,"+":11,"-":12,0:22,1:23,2:24,p:25,4:26,5:27,6:29,7:28,8:30,9:31},uT="64n";function QW(t){return iT({[uT]:t}).toNotation()}function KW(t){return iT({[uT]:t}).toSeconds()}function JW(t,e,A,n=!0,r=QW,s=KW){let i=e,o=4,a=2,c="",l="";const u=[];function f(){l="",c="",i+=s(a)}function h(){const d=r(a);l===null?(u.push([i,[t,d,l]]),f()):Ne(l)?(u.push([i,[t,d,l]]),f()):l.startsWith("#")?(u.push([i,[t,d,l]]),f()):l!==""&&(u.push([i,[t,d,`${l}${c}${o}`]]),f())}if(xe(A))l=A;else for(let d=0;d<A.length;++d){switch(A[d]){case 9:case 10:break;default:h();break}switch(A[d]){case 1:l="A";break;case 2:l="B";break;case 3:l="C";break;case 4:l="D";break;case 5:l="E";break;case 6:l="F";break;case 7:l="G";break;case 8:l=null;break;case 9:c+="#";break;case 10:c+="b";break;case 11:o<8&&++o;break;case 12:o>0&&--o;break;case 13:a=1;break;case 14:a=2;break;case 15:a=4;break;case 16:a=8;break;case 17:a=16;break;case 18:a=32;break;case 19:a=64;break;case 20:a=Math.round(a/3);break;case 21:a=Math.round(a*3/2);break;case 22:l=0;break;case 23:l=1;break;case 24:l=2;break;case 25:l=3;break;case 26:l=4;break;case 27:l=5;break;case 29:l=6;break;case 28:l=7;break;case 30:l=8;break;case 31:l=9;break}}return h(),n&&u.push([i,[t,"8n",-1]]),u}function XW(t){const e=[],A=t.split(";");for(let n=0;n<A.length;++n){const r=[],s=A[n];for(let i=0;i<s.length;++i){const o=WW[s[i]];E(o)&&r.push(o)}e.push(r)}return e}const hT="synthstate",eQ={voices:{},voicefx:{}};function rw(t){const e=wt(He.MAIN),A=Ro(e,hT,t);if(E(A))return A;const n=FA(eQ);return fl(e,hT,t,n),n}function tQ(t){return rw(t)}function sw(t,e,A,n){const r=rw(t);if(je(A)==="restart"){r.voices={},r.voicefx={};return}E(r.voices[e])||(r.voices[e]={}),r.voices[e][A]=n}function fT(t,e,A,n,r){const s=rw(t);switch(E(s.voicefx[e])||(s.voicefx[e]={}),E(s.voicefx[e][A])||(s.voicefx[e][A]={}),n){case"on":s.voicefx[e][A].on="on";break;case"off":s.voicefx[e][A].on="off";break;default:Ne(n)?s.voicefx[e][A].on=r:s.voicefx[e][A][n]=r;break}}const dT="synthplay",AQ=[];function iw(t){const e=wt(He.MAIN),A=Ro(e,dT,t);if(E(A))return A;const n=FA(AQ);return fl(e,dT,t,n),n}function nQ(t){return iw(t)}function rQ(t,e){const A=wt(He.MAIN);if(!E(A))return;if(t===""){Wd(Ae,"",t,e);return}if(e===""){const i=iw(t);i.length=0,Wd(Ae,"",t,"");return}const n=XW(e);let r=0;for(let i=0;i<n.length;++i){const o=n[i],a=JW(i,0,o,!0,l=>`${l}n`,l=>Math.max(1,Math.round(l*.5-2))),c=a[a.length-1];E(c)&&(r=Math.max(r,c[0]))}iw(t).push([e,r])}let mT=0;const pT=Kr,sQ=["Command","lines"];class iQ extends cU{constructor(){super(G8,{traceInitPerf:Kr,skipValidations:!Kr,maxLookahead:2,recoveryEnabled:!0,nodeLocationTracking:"full"}),this.performSelfAnalysis()}PEEK(e,A,...n){console.info(e,n.map(r=>[r.image,r.tokenType]),A)}RULED(e,A,n){const r=sQ.some(s=>e.includes(s));return this.RULE(e,()=>{const i=(mT++).toString().padStart(3),o=r?"font-weight: bold;":"";if(pT&&!this.RECORDING_PHASE){const a=[this.LA(1),this.LA(2),this.LA(3)].map(c=>`[${c.tokenType.name} ${c.image.replaceAll(`
`,"\\n")}]`);console.info(`${i}%c> ${e} ${a.join(" ")}`,o)}A(),pT&&!this.RECORDING_PHASE&&console.info(`${i}%c< ${e} `,o),mT--},n)}program=this.RULED("program",()=>{this.MANY(()=>this.SUBRULE(this.line))});line=this.RULED("line",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt)},{ALT:()=>this.CONSUME(kh)}])});stmt=this.RULED("stmt",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt_label)},{ALT:()=>this.SUBRULE(this.stmt_stat)},{ALT:()=>this.SUBRULE(this.stmt_text)},{ALT:()=>this.SUBRULE(this.stmt_comment)},{ALT:()=>this.SUBRULE(this.stmt_hyperlink)},{ALT:()=>this.SUBRULE(this.stmt_command)},{ALT:()=>this.SUBRULE(this.short_go)},{ALT:()=>this.SUBRULE(this.short_try)}])});inline_go=this.RULED("inline_go",()=>{this.SUBRULE(this.short_go),this.OPTION(()=>this.SUBRULE(this.inline))});inline_try=this.RULED("inline_try",()=>{this.SUBRULE(this.short_try),this.OPTION(()=>this.SUBRULE(this.inline))});inline_command=this.RULED("inline_command",()=>{this.SUBRULE(this.stmt_command),this.OPTION(()=>this.SUBRULE(this.inline))});inline=this.RULED("inline",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt_stat)},{ALT:()=>this.SUBRULE(this.stmt_text)},{ALT:()=>this.SUBRULE(this.stmt_comment)},{ALT:()=>this.SUBRULE(this.stmt_hyperlink)},{ALT:()=>this.SUBRULE(this.structured_cmd)},{ALT:()=>this.SUBRULE(this.inline_go)},{ALT:()=>this.SUBRULE(this.inline_try)},{ALT:()=>this.SUBRULE(this.inline_command)}])});stmt_label=this.RULED("stmt_label",()=>{this.CONSUME(Fg)});stmt_stat=this.RULED("stmt_stat",()=>{this.CONSUME(Ug)});stmt_text=this.RULED("stmt_text",()=>{this.OR([{ALT:()=>this.CONSUME(wB)}])});stmt_comment=this.RULED("stmt_comment",()=>{this.CONSUME(bB)});stmt_hyperlink=this.RULED("stmt_hyperlink",()=>{this.CONSUME(_B),this.CONSUME(xB)});stmt_command=this.RULED("stmt_command",()=>{this.CONSUME(Po),this.OR([{ALT:()=>this.SUBRULE(this.words)},{ALT:()=>this.SUBRULE(this.structured_cmd)}])});structured_cmd=this.RULED("structured_cmd",()=>{this.OR([{ALT:()=>this.SUBRULE(this.command_if)},{ALT:()=>this.SUBRULE(this.command_while)},{ALT:()=>this.SUBRULE(this.command_repeat)},{ALT:()=>this.SUBRULE(this.command_waitfor)},{ALT:()=>this.SUBRULE(this.command_foreach)},{ALT:()=>this.SUBRULE(this.command_break)},{ALT:()=>this.SUBRULE(this.command_continue)}])});short_go=this.RULED("short_go",()=>{this.CONSUME(Kg),this.OR([{ALT:()=>this.SUBRULE(this.string_token)},{ALT:()=>this.SUBRULE(this.dir)}])});short_try=this.RULED("short_try",()=>{this.CONSUME(l8),this.OR([{ALT:()=>this.SUBRULE(this.string_token)},{ALT:()=>this.SUBRULE(this.dir)}])});command_if=this.RULED("command_if",()=>{this.CONSUME(Jg),this.SUBRULE(this.words),this.OPTION(()=>this.SUBRULE(this.command_if_block))});command_if_block=this.RULED("command_if_block",()=>{this.OR([{ALT:()=>this.SUBRULE(this.inline)},{ALT:()=>{this.CONSUME(Nh),this.MANY(()=>this.SUBRULE(this.line)),this.MANY2({GATE:this.BACKTRACK(this.command_else_if),DEF:()=>this.SUBRULE(this.command_else_if)}),this.OPTION(()=>this.SUBRULE(this.command_else)),this.MANY3(()=>this.CONSUME3(kh)),this.CONSUME4(Po),this.CONSUME4(Xg)}}])});command_block=this.RULED("command_block",()=>{this.OR([{ALT:()=>this.SUBRULE(this.inline)},{ALT:()=>{this.CONSUME(Nh),this.MANY(()=>this.SUBRULE(this.line)),this.CONSUME(Po),this.CONSUME(Xg)}}])});command_fork=this.RULED("command_fork",()=>{this.OR([{ALT:()=>this.SUBRULE(this.inline)},{ALT:()=>{this.CONSUME(Nh),this.MANY({GATE:this.BACKTRACK(this.line),DEF:()=>this.SUBRULE(this.line)})}}])});command_else_if=this.RULED("command_else_if",()=>{this.CONSUME(Po),this.CONSUME(e0),this.CONSUME(Jg),this.SUBRULE(this.words),this.OPTION(()=>this.SUBRULE(this.command_fork))});command_else=this.RULED("command_else",()=>{this.CONSUME(Po),this.CONSUME(e0),this.OPTION1(()=>this.SUBRULE(this.words)),this.OPTION2(()=>this.SUBRULE(this.command_fork))});command_while=this.RULED("command_while",()=>{this.CONSUME(p8),this.SUBRULE(this.words),this.OPTION(()=>this.SUBRULE(this.command_block))});command_repeat=this.RULED("command_repeat",()=>{this.CONSUME(g8),this.SUBRULE(this.words),this.OPTION(()=>this.SUBRULE(this.command_block))});command_waitfor=this.RULED("command_waitfor",()=>{this.CONSUME(w8),this.SUBRULE(this.words),this.OPTION(()=>this.SUBRULE(this.command_block))});command_foreach=this.RULED("command_foreach",()=>{this.CONSUME(b8),this.SUBRULE(this.words),this.OPTION(()=>this.SUBRULE(this.command_block))});command_break=this.RULED("command_break",()=>{this.CONSUME(_8)});command_continue=this.RULED("command_continue",()=>{this.CONSUME(x8)});command_play=this.RULED("command_play",()=>{this.CONSUME(f8)});command_toast=this.RULED("command_toast",()=>{this.CONSUME(d8)});command_ticker=this.RULED("command_ticker",()=>{this.CONSUME(m8)});expr=this.RULED("expr",()=>{this.SUBRULE1(this.and_test,{LABEL:"LHS"}),this.MANY(()=>{this.CONSUME($g),this.SUBRULE2(this.and_test,{LABEL:"RHS"})})});and_test=this.RULED("and_test",()=>{this.SUBRULE1(this.not_test,{LABEL:"LHS"}),this.MANY(()=>{this.CONSUME(qg),this.SUBRULE2(this.not_test,{LABEL:"RHS"})})});not_test=this.RULED("not_test",()=>{this.OR([{ALT:()=>{this.CONSUME(Vg),this.SUBRULE1(this.not_test,{LABEL:"LHS"})}},{ALT:()=>this.SUBRULE2(this.comparison)}])});comparison=this.RULED("comparison",()=>{this.SUBRULE1(this.arith_expr,{LABEL:"LHS"}),this.MANY(()=>{this.SUBRULE(this.comp_op),this.SUBRULE2(this.arith_expr,{LABEL:"RHS"})})});comp_op=this.RULED("comp_op",()=>{this.OR([{ALT:()=>this.CONSUME(e8)},{ALT:()=>this.CONSUME(t8)},{ALT:()=>this.CONSUME(A8)},{ALT:()=>this.CONSUME(n8)},{ALT:()=>this.CONSUME(r8)},{ALT:()=>this.CONSUME(s8)}])});expr_value=this.RULED("expr_value",()=>{this.SUBRULE1(this.and_test_value,{LABEL:"LHS"}),this.MANY(()=>{this.CONSUME($g),this.SUBRULE2(this.and_test_value,{LABEL:"RHS"})})});and_test_value=this.RULED("and_test_value",()=>{this.SUBRULE1(this.not_test_value,{LABEL:"LHS"}),this.MANY(()=>{this.CONSUME(qg),this.SUBRULE2(this.not_test_value,{LABEL:"RHS"})})});not_test_value=this.RULED("not_test_value",()=>{this.OR([{ALT:()=>{this.CONSUME(Vg),this.SUBRULE1(this.not_test_value,{LABEL:"LHS"})}},{ALT:()=>this.SUBRULE2(this.arith_expr)}])});arith_expr=this.RULED("arith_expr",()=>{this.OR([{ALT:()=>this.SUBRULE(this.token_expr,{LABEL:"LHS"})},{ALT:()=>{this.SUBRULE1(this.term),this.MANY(()=>this.SUBRULE2(this.arith_expr_item,{LABEL:"RHS"}))}}])});arith_expr_item=this.RULED("arith_expr_item",()=>{this.OR([{ALT:()=>this.CONSUME(Wg)},{ALT:()=>this.CONSUME(Qg)}]),this.SUBRULE(this.term)});term=this.RULED("term",()=>{this.SUBRULE1(this.factor),this.MANY(()=>this.SUBRULE2(this.term_item))});term_item=this.RULED("term_item",()=>{this.OR([{ALT:()=>this.CONSUME(o8)},{ALT:()=>this.CONSUME(Kg)},{ALT:()=>this.CONSUME(a8)},{ALT:()=>this.CONSUME(c8)}]),this.SUBRULE(this.factor)});factor=this.RULED("factor",()=>{this.OR1([{ALT:()=>{this.OR2([{ALT:()=>this.CONSUME(Wg)},{ALT:()=>this.CONSUME(Qg)}]),this.SUBRULE(this.factor,{LABEL:"LHS"})}},{ALT:()=>this.SUBRULE(this.power)}])});power=this.RULED("power",()=>{this.SUBRULE(this.token),this.OPTION(()=>{this.CONSUME(i8),this.SUBRULE(this.factor)})});words=this.RULED("words",()=>{this.AT_LEAST_ONE(()=>this.SUBRULE(this.expr))});kind=this.RULED("kind",()=>{this.OPTION(()=>this.SUBRULE(this.color)),this.SUBRULE(this.string_token)});category=this.RULED("category",()=>{this.OR([{ALT:()=>this.CONSUME(yB)},{ALT:()=>this.CONSUME(GB)}])});collision=this.RULED("collision",()=>{this.OR([{ALT:()=>this.CONSUME(MB)},{ALT:()=>this.CONSUME(vB)},{ALT:()=>this.CONSUME(DB)},{ALT:()=>this.CONSUME(BB)},{ALT:()=>this.CONSUME(kB)},{ALT:()=>this.CONSUME(EB)},{ALT:()=>this.CONSUME(NB)},{ALT:()=>this.CONSUME(TB)},{ALT:()=>this.CONSUME(OB)}])});color=this.RULED("color",()=>{this.OR([{ALT:()=>this.CONSUME(YB)},{ALT:()=>this.CONSUME(SB)},{ALT:()=>this.CONSUME(CB)},{ALT:()=>this.CONSUME(PB)},{ALT:()=>this.CONSUME(ZB)},{ALT:()=>this.CONSUME(IB)},{ALT:()=>this.CONSUME(RB)},{ALT:()=>this.CONSUME(jB)},{ALT:()=>this.CONSUME(zB)},{ALT:()=>this.CONSUME(HB)},{ALT:()=>this.CONSUME(LB)},{ALT:()=>this.CONSUME(UB)},{ALT:()=>this.CONSUME(FB)},{ALT:()=>this.CONSUME($B)},{ALT:()=>this.CONSUME(VB)},{ALT:()=>this.CONSUME(qB)},{ALT:()=>this.CONSUME(WB)},{ALT:()=>this.CONSUME(QB)},{ALT:()=>this.CONSUME(KB)},{ALT:()=>this.CONSUME(JB)},{ALT:()=>this.CONSUME(XB)},{ALT:()=>this.CONSUME(ek)},{ALT:()=>this.CONSUME(tk)},{ALT:()=>this.CONSUME(Ak)},{ALT:()=>this.CONSUME(nk)},{ALT:()=>this.CONSUME(rk)},{ALT:()=>this.CONSUME(sk)},{ALT:()=>this.CONSUME(ik)},{ALT:()=>this.CONSUME(ok)},{ALT:()=>this.CONSUME(ak)},{ALT:()=>this.CONSUME(ck)},{ALT:()=>this.CONSUME(lk)},{ALT:()=>this.CONSUME(uk)},{ALT:()=>this.CONSUME(hk)},{ALT:()=>this.CONSUME(fk)},{ALT:()=>this.CONSUME(dk)},{ALT:()=>this.CONSUME(mk)},{ALT:()=>this.CONSUME(pk)},{ALT:()=>this.CONSUME(gk)},{ALT:()=>this.CONSUME(wk)},{ALT:()=>this.CONSUME(bk)},{ALT:()=>this.CONSUME(_k)},{ALT:()=>this.CONSUME(xk)},{ALT:()=>this.CONSUME(yk)},{ALT:()=>this.CONSUME(Gk)},{ALT:()=>this.CONSUME(Mk)},{ALT:()=>this.CONSUME(vk)},{ALT:()=>this.CONSUME(Dk)},{ALT:()=>this.CONSUME(Bk)},{ALT:()=>this.CONSUME(kk)},{ALT:()=>this.CONSUME(Ek)},{ALT:()=>this.CONSUME(Nk)},{ALT:()=>this.CONSUME(Tk)},{ALT:()=>this.CONSUME(Ok)},{ALT:()=>this.CONSUME(Yk)},{ALT:()=>this.CONSUME(Sk)},{ALT:()=>this.CONSUME(Ck)},{ALT:()=>this.CONSUME(Pk)},{ALT:()=>this.CONSUME(Zk)},{ALT:()=>this.CONSUME(Ik)},{ALT:()=>this.CONSUME(Rk)},{ALT:()=>this.CONSUME(jk)},{ALT:()=>this.CONSUME(zk)},{ALT:()=>this.CONSUME(Hk)},{ALT:()=>this.CONSUME(Lk)},{ALT:()=>this.CONSUME(Uk)},{ALT:()=>this.CONSUME(Fk)},{ALT:()=>this.CONSUME($k)},{ALT:()=>this.CONSUME(Vk)},{ALT:()=>this.CONSUME(qk)}])});dir_mod=this.RULED("dir_mod",()=>{this.OR([{ALT:()=>this.CONSUME(oE)},{ALT:()=>this.CONSUME(aE)},{ALT:()=>this.CONSUME(cE)},{ALT:()=>this.CONSUME(lE)},{ALT:()=>this.CONSUME(EE)},{ALT:()=>this.CONSUME(NE)},{ALT:()=>this.CONSUME(TE)},{ALT:()=>this.SUBRULE(this.dir_within)},{ALT:()=>this.SUBRULE(this.dir_awayby)},{ALT:()=>this.CONSUME(SE)}])});dir_by=this.RULED("dir_by",()=>{this.CONSUME(eE),this.SUBRULE1(this.simple_token),this.SUBRULE2(this.simple_token)});dir_at=this.RULED("dir_at",()=>{this.CONSUME(tE),this.SUBRULE1(this.simple_token),this.SUBRULE2(this.simple_token)});dir_away=this.RULED("dir_away",()=>{this.CONSUME(uE),this.SUBRULE1(this.simple_token),this.SUBRULE2(this.simple_token)});dir_toward=this.RULED("dir_toward",()=>{this.CONSUME(hE),this.SUBRULE1(this.simple_token),this.SUBRULE2(this.simple_token)});dir_find=this.RULED("dir_find",()=>{this.CONSUME(fE),this.OR([{ALT:()=>this.SUBRULE(this.kind)},{ALT:()=>this.CONSUME(hl)}])});dir_flee=this.RULED("dir_flee",()=>{this.CONSUME(dE),this.OR([{ALT:()=>this.SUBRULE(this.kind)},{ALT:()=>this.CONSUME(hl)}])});dir_to=this.RULED("dir_to",()=>{this.CONSUME(mE),this.SUBRULE1(this.dir),this.SUBRULE2(this.dir)});dir_within=this.RULED("dir_within",()=>{this.CONSUME(OE),this.SUBRULE1(this.simple_token)});dir_awayby=this.RULED("dir_awayby",()=>{this.CONSUME(YE),this.SUBRULE1(this.simple_token)});dir=this.RULED("dir",()=>{this.MANY(()=>this.SUBRULE(this.dir_mod)),this.OR([{ALT:()=>this.CONSUME(Wk)},{ALT:()=>this.CONSUME(Qk)},{ALT:()=>this.CONSUME(Kk)},{ALT:()=>this.CONSUME(Jk)},{ALT:()=>this.CONSUME(Xk)},{ALT:()=>this.SUBRULE(this.dir_by)},{ALT:()=>this.SUBRULE(this.dir_at)},{ALT:()=>this.SUBRULE(this.dir_away)},{ALT:()=>this.SUBRULE(this.dir_toward)},{ALT:()=>this.CONSUME(AE)},{ALT:()=>this.CONSUME(nE)},{ALT:()=>this.CONSUME(rE)},{ALT:()=>this.CONSUME(sE)},{ALT:()=>this.CONSUME(iE)},{ALT:()=>this.SUBRULE(this.dir_find)},{ALT:()=>this.SUBRULE(this.dir_flee)},{ALT:()=>this.SUBRULE(this.dir_to)},{ALT:()=>this.CONSUME(pE)},{ALT:()=>this.CONSUME(gE)},{ALT:()=>this.CONSUME(wE)},{ALT:()=>this.CONSUME(bE)},{ALT:()=>this.CONSUME(_E)},{ALT:()=>this.CONSUME(xE)},{ALT:()=>this.CONSUME(yE)},{ALT:()=>this.CONSUME(GE)},{ALT:()=>this.CONSUME(ME)},{ALT:()=>this.CONSUME(vE)},{ALT:()=>this.CONSUME(DE)},{ALT:()=>this.CONSUME(BE)},{ALT:()=>this.CONSUME(kE)}])});expr_any=this.RULED("expr_any",()=>{this.OR1([{ALT:()=>this.SUBRULE1(this.kind)},{ALT:()=>this.SUBRULE1(this.color)},{ALT:()=>{this.SUBRULE(this.dir),this.OR2([{ALT:()=>this.SUBRULE2(this.kind)},{ALT:()=>this.SUBRULE2(this.color)}])}}])});token_expr_any=this.RULED("token_expr_any",()=>{this.CONSUME(IE),this.SUBRULE(this.expr_any)});token_expr_count=this.RULED("token_expr_count",()=>{this.CONSUME(RE),this.SUBRULE(this.expr_any)});token_expr_blocked=this.RULED("token_expr_blocked",()=>{this.CONSUME(ZE),this.SUBRULE(this.dir)});token_expr_abs=this.RULED("token_expr_abs",()=>{this.CONSUME(jE),this.SUBRULE(this.simple_token)});token_expr_intceil=this.RULED("token_expr_intceil",()=>{this.CONSUME(zE),this.SUBRULE(this.simple_token)});token_expr_intfloor=this.RULED("token_expr_intfloor",()=>{this.CONSUME(HE),this.SUBRULE(this.simple_token)});token_expr_intround=this.RULED("token_expr_intround",()=>{this.CONSUME(LE),this.SUBRULE(this.simple_token)});token_expr_clamp=this.RULED("token_expr_clamp",()=>{this.CONSUME(UE),this.SUBRULE1(this.simple_token),this.SUBRULE2(this.simple_token),this.SUBRULE3(this.simple_token)});token_expr_min=this.RULED("token_expr_min",()=>{this.CONSUME(FE),this.AT_LEAST_ONE(()=>this.SUBRULE1(this.simple_token))});token_expr_max=this.RULED("token_expr_max",()=>{this.CONSUME($E),this.AT_LEAST_ONE(()=>this.SUBRULE1(this.simple_token))});token_expr_pick=this.RULED("token_expr_pick",()=>{this.CONSUME(VE),this.AT_LEAST_ONE(()=>this.SUBRULE1(this.simple_token))});token_expr_pickwith=this.RULED("token_expr_pickwith",()=>{this.CONSUME(qE),this.SUBRULE1(this.simple_token),this.AT_LEAST_ONE(()=>this.SUBRULE2(this.simple_token))});token_expr_random=this.RULED("token_expr_random",()=>{this.CONSUME(WE),this.SUBRULE1(this.simple_token),this.OPTION(()=>this.SUBRULE2(this.simple_token))});token_expr_randomwith=this.RULED("token_expr_randomwith",()=>{this.CONSUME(QE),this.SUBRULE1(this.simple_token),this.SUBRULE2(this.simple_token),this.OPTION(()=>this.SUBRULE3(this.simple_token))});token_expr_run=this.RULED("token_expr_run",()=>{this.CONSUME(KE),this.SUBRULE(this.string_token)});token_expr_runwith=this.RULED("token_expr_runwith",()=>{this.CONSUME(JE),this.SUBRULE(this.simple_token),this.SUBRULE(this.string_token)});token_expr=this.RULED("token_expr",()=>{this.OR([{ALT:()=>this.CONSUME(CE)},{ALT:()=>this.CONSUME(PE)},{ALT:()=>this.SUBRULE(this.token_expr_any)},{ALT:()=>this.SUBRULE(this.token_expr_count)},{ALT:()=>this.SUBRULE(this.token_expr_blocked)},{ALT:()=>this.SUBRULE(this.token_expr_abs)},{ALT:()=>this.SUBRULE(this.token_expr_intceil)},{ALT:()=>this.SUBRULE(this.token_expr_intfloor)},{ALT:()=>this.SUBRULE(this.token_expr_intround)},{ALT:()=>this.SUBRULE(this.token_expr_clamp)},{ALT:()=>this.SUBRULE(this.token_expr_min)},{ALT:()=>this.SUBRULE(this.token_expr_max)},{ALT:()=>this.SUBRULE(this.token_expr_pick)},{ALT:()=>this.SUBRULE(this.token_expr_pickwith)},{ALT:()=>this.SUBRULE(this.token_expr_random)},{ALT:()=>this.SUBRULE(this.token_expr_randomwith)},{ALT:()=>this.SUBRULE(this.token_expr_run)},{ALT:()=>this.SUBRULE(this.token_expr_runwith)}])});string_token=this.RULED("string_token",()=>{this.OR([{ALT:()=>this.CONSUME(mA)},{ALT:()=>this.CONSUME(Eh)}])});simple_token=this.RULED("simple_token",()=>{this.OR([{ALT:()=>this.CONSUME(hl)},{ALT:()=>this.CONSUME(mA)},{ALT:()=>this.CONSUME(Eh)},{ALT:()=>this.SUBRULE(this.color)}])});token=this.RULED("token",()=>{this.OR([{ALT:()=>this.SUBRULE(this.category)},{ALT:()=>this.SUBRULE(this.collision)},{ALT:()=>this.SUBRULE(this.color)},{ALT:()=>this.SUBRULE(this.dir)},{ALT:()=>this.SUBRULE(this.command_play)},{ALT:()=>this.SUBRULE(this.command_toast)},{ALT:()=>this.SUBRULE(this.command_ticker)},{ALT:()=>this.CONSUME(Fg)},{ALT:()=>this.CONSUME(Eh)},{ALT:()=>this.CONSUME(mA)},{ALT:()=>this.CONSUME(hl)},{ALT:()=>this.CONSUME(XE)},{ALT:()=>{this.CONSUME(u8),this.SUBRULE(this.expr),this.CONSUME(h8)}}])})}const aa=new iQ;if(yU){const t=aa.getGAstProductions(),e=xU(t);console.info(e)}const oQ=aa.getBaseCstVisitorConstructor();var Pe=(t=>(t[t.PROGRAM=0]="PROGRAM",t[t.API=1]="API",t[t.LINE=2]="LINE",t[t.MARK=3]="MARK",t[t.GOTO=4]="GOTO",t[t.COUNT=5]="COUNT",t[t.TEXT=6]="TEXT",t[t.LABEL=7]="LABEL",t[t.HYPERLINK=8]="HYPERLINK",t[t.STAT=9]="STAT",t[t.MOVE=10]="MOVE",t[t.COMMAND=11]="COMMAND",t[t.LITERAL=12]="LITERAL",t[t.IF=13]="IF",t[t.IF_CHECK=14]="IF_CHECK",t[t.IF_BLOCK=15]="IF_BLOCK",t[t.ELSE_IF=16]="ELSE_IF",t[t.ELSE=17]="ELSE",t[t.WHILE=18]="WHILE",t[t.BREAK=19]="BREAK",t[t.CONTINUE=20]="CONTINUE",t[t.REPEAT=21]="REPEAT",t[t.WAITFOR=22]="WAITFOR",t[t.FOREACH=23]="FOREACH",t[t.OR=24]="OR",t[t.AND=25]="AND",t[t.NOT=26]="NOT",t[t.COMPARE=27]="COMPARE",t[t.COMPARE_ITEM=28]="COMPARE_ITEM",t[t.OPERATOR=29]="OPERATOR",t[t.OPERATOR_ITEM=30]="OPERATOR_ITEM",t[t.EXPR=31]="EXPR",t))(Pe||{}),to=(t=>(t[t.IS_EQ=0]="IS_EQ",t[t.IS_NOT_EQ=1]="IS_NOT_EQ",t[t.IS_LESS_THAN=2]="IS_LESS_THAN",t[t.IS_GREATER_THAN=3]="IS_GREATER_THAN",t[t.IS_LESS_THAN_OR_EQ=4]="IS_LESS_THAN_OR_EQ",t[t.IS_GREATER_THAN_OR_EQ=5]="IS_GREATER_THAN_OR_EQ",t))(to||{}),ns=(t=>(t[t.EMPTY=0]="EMPTY",t[t.PLUS=1]="PLUS",t[t.MINUS=2]="MINUS",t[t.POWER=3]="POWER",t[t.MULTIPLY=4]="MULTIPLY",t[t.DIVIDE=5]="DIVIDE",t[t.MOD_DIVIDE=6]="MOD_DIVIDE",t[t.FLOOR_DIVIDE=7]="FLOOR_DIVIDE",t[t.UNI_PLUS=8]="UNI_PLUS",t[t.UNI_MINUS=9]="UNI_MINUS",t))(ns||{}),yf=(t=>(t[t.NUMBER=0]="NUMBER",t[t.STRING=1]="STRING",t[t.TEMPLATE=2]="TEMPLATE",t))(yf||{});function AA(t,e){const[A]=t??[];return(A?.image??e).trimStart().replaceAll(/^"|"$/g,"")}class aQ extends oQ{unique=0;constructor(){super(),Kr&&this.validateVisitor()}visit(e){if(st(e)&&(e=e[0]),!!E(e))return this[e.name](e.children,e.location)}createcodenode(e,A){return[{...A,...e,lineindex:0}]}createstringnode(e,A){return this.createcodenode(e,{type:12,literal:1,value:A})}createtemplatenode(e,A){return this.createcodenode(e,{type:12,literal:2,value:A})}createmarknode(e,A,n){return this.createlinenode(e,this.createcodenode(e,{type:3,id:A,comment:n}))}creategotonode(e,A,n){return this.createlinenode(e,this.createcodenode(e,{type:4,id:A,comment:n}))}createlinenode(e,A){return this.createcodenode(e,{type:2,stmts:A})}createapinode(e,A,n){return this.createlinenode(e,this.createcodenode(e,{type:1,words:n,method:A}))}createlogicnode(e,A,n,r){return this.createlinenode(e,this.createcodenode(e,{type:14,skip:n,words:r,method:A}))}createcountnode(e){return this.createcodenode(e,{type:5,index:this.unique++})}createexprnodeondemand(e,A){return e.length===1?e[0]:this.createcodenode(A,{type:31,words:e})[0]}go(e){return Array.isArray(e)?e.map(A=>this.visit(A)).flat():E(e)?[this.visit(e)].flat():[]}program(e,A){return this.unique=0,this.createcodenode(A,{type:0,lines:[this.createlinenode(A,this.createcodenode(A,{type:7,active:!0,name:"restart"})),this.go(e.line)].flat()})}line(e){return e.stmt?this.go(e.stmt):[]}stmt(e){return e.stmt_label?this.go(e.stmt_label):e.stmt_stat?this.go(e.stmt_stat):e.stmt_text?this.go(e.stmt_text):e.stmt_comment?this.go(e.stmt_comment):e.stmt_hyperlink?this.go(e.stmt_hyperlink):e.stmt_command?this.go(e.stmt_command):e.short_go?this.go(e.short_go):e.short_try?this.go(e.short_try):[]}inline_go(e){const A=[];return e.short_go&&A.push(...this.go(e.short_go)),e.inline&&A.push(...this.go(e.inline)),A}inline_try(e){const A=[];return e.short_try&&A.push(...this.go(e.short_try)),e.inline&&A.push(...this.go(e.inline)),A}inline_command(e){const A=[];return e.stmt_command&&A.push(...this.go(e.stmt_command)),e.inline&&A.push(...this.go(e.inline)),A}inline(e){const A=[];return e.stmt_stat&&A.push(...this.go(e.stmt_stat)),e.stmt_text&&A.push(...this.go(e.stmt_text)),e.stmt_comment&&A.push(...this.go(e.stmt_comment)),e.stmt_hyperlink&&A.push(...this.go(e.stmt_hyperlink)),e.inline_go&&A.push(...this.go(e.inline_go)),e.inline_try&&A.push(...this.go(e.inline_try)),e.inline_command&&A.push(...this.go(e.inline_command)),e.structured_cmd&&A.push(...this.go(e.structured_cmd)),A}stmt_label(e,A){return this.createlinenode(A,this.createcodenode(A,{type:7,active:!0,name:AA(e.token_label,":").slice(1).trim()}))}stmt_stat(e,A){return this.createlinenode(A,this.createcodenode(A,{type:9,value:AA(e.token_stat,"@").slice(1)}))}stmt_text(e,A){const n=AA(e.token_text,"");return this.createlinenode(A,this.createcodenode(A,{type:6,value:n}))}stmt_comment(e,A){return this.createlinenode(A,this.createcodenode(A,{type:7,active:!1,name:AA(e.token_comment,"'").slice(1).trim()}))}stmt_hyperlink(e,A){return this.createlinenode(A,this.createcodenode(A,{type:8,link:AA(e.token_hyperlink,"!").slice(1),text:AA(e.token_hyperlinktext,";").slice(1)}))}stmt_command(e,A){return e.structured_cmd?this.go(e.structured_cmd):this.createlinenode(A,this.createcodenode(A,{type:11,words:this.go(e.words)}))}structured_cmd(e){return e.command_if?this.go(e.command_if):e.command_while?this.go(e.command_while):e.command_repeat?this.go(e.command_repeat):e.command_waitfor?this.go(e.command_waitfor):e.command_foreach?this.go(e.command_foreach):e.command_break?this.go(e.command_break):e.command_continue?this.go(e.command_continue):[]}short_go(e,A){return e.token_divide?this.createlinenode(A,this.createcodenode(A,{type:10,wait:!0,words:[this.go(e.string_token),this.go(e.dir)].flat()})):[]}short_try(e,A){return e.token_query?this.createlinenode(A,this.createcodenode(A,{type:10,wait:!1,words:[this.go(e.string_token),this.go(e.dir)].flat()})):[]}command_if(e,A){const[n]=this.createlogicnode(A,AA(e.token_if,"if").toLowerCase(),"",this.go(e.words)),[r]=this.go(e.command_if_block)??[];return this.createcodenode(A,{type:13,check:n,block:r})}command_if_block(e,A){const n=rA(),r=rA();return this.createcodenode(A,{type:15,skip:n,done:r,lines:[this.go(e.inline),this.go(e.line),this.creategotonode(A,r,"end of if"),this.createmarknode(A,n,"alt logic")].flat(),altlines:[this.go(e.command_else_if),this.go(e.command_else),this.createmarknode(A,r,"end of if")].flat()})}command_block(e){return[this.go(e.inline),this.go(e.line)].flat()}command_fork(e){return[this.go(e.inline),this.go(e.line)].flat()}command_else_if(e,A){const n=rA(),r=rA();return this.createcodenode(A,{type:16,done:r,lines:[this.createlogicnode(A,AA(e.token_if,"if"),n,this.go(e.words)),this.go(e.command_fork),this.creategotonode(A,r,"end of if"),this.createmarknode(A,n,"skip")].flat()})}command_else(e,A){const n=[];return e.words&&n.push(...this.createlinenode(A,this.createcodenode(A,{type:11,words:this.go(e.words)}))),e.command_fork&&n.push(...this.go(e.command_fork)),this.createcodenode(A,{type:17,lines:n})}command_while(e,A){const n=rA(),r=rA();return this.createcodenode(A,{type:18,loop:n,done:r,lines:[this.createmarknode(A,n,"start of while"),this.createlogicnode(A,"if",r,this.go(e.words)),this.go(e.command_block),this.creategotonode(A,n,"loop of while"),this.createmarknode(A,r,"end of while")].flat()})}command_repeat(e,A){const n=rA(),r=rA(),i=[this.createcountnode(A),this.go(e.words)].flat();return this.createcodenode(A,{type:21,loop:n,done:r,lines:[this.createapinode(A,"repeatstart",i),this.createmarknode(A,n,"start of repeat"),this.createlogicnode(A,"repeat",r,i),this.go(e.command_block),this.creategotonode(A,n,"loop of repeat"),this.createmarknode(A,r,"end of repeat")].flat()})}command_foreach(e,A){const n=rA(),r=rA(),i=[this.createcountnode(A),this.go(e.words)].flat();return this.createcodenode(A,{type:23,loop:n,done:r,lines:[this.createapinode(A,"foreachstart",i),this.createmarknode(A,n,"start of foreach"),this.createlogicnode(A,"foreach",r,i),this.go(e.command_block),this.creategotonode(A,n,"loop of foreach"),this.createmarknode(A,r,"end of foreach")].flat()})}command_waitfor(e,A){const n=rA();return this.createcodenode(A,{type:22,loop:n,lines:[this.createmarknode(A,n,"start of waitfor"),this.createlogicnode(A,"waitfor",n,this.go(e.words))].flat()})}command_break(e,A){return this.createcodenode(A,{type:19,goto:0})}command_continue(e,A){return this.createcodenode(A,{type:20,goto:0})}command_play(e,A){const n=AA(e.token_command_play,"").trim(),[r,...s]=n.split(" ");return[this.createstringnode(A,r),this.createstringnode(A,s.join(" "))].flat()}command_toast(e,A){const r=AA(e.token_command_toast,"").replace("toast","").trim();return[this.createstringnode(A,"toast"),this.createtemplatenode(A,r)].flat()}command_ticker(e,A){const r=AA(e.token_command_ticker,"").replace("ticker","").trim();return[this.createstringnode(A,"ticker"),this.createtemplatenode(A,r)].flat()}expr(e,A){return e.RHS?this.createcodenode(A,{type:24,items:[this.createexprnodeondemand(this.go(e.LHS),A),this.createexprnodeondemand(this.go(e.RHS),A)]}):this.go(e.LHS)}and_test(e,A){return e.RHS?this.createcodenode(A,{type:25,items:[this.createexprnodeondemand(this.go(e.LHS),A),this.createexprnodeondemand(this.go(e.RHS),A)]}):this.go(e.LHS)}not_test(e,A){return e.comparison?this.go(e.comparison):e.LHS?this.createcodenode(A,{type:26,items:this.go(e.LHS)}):[]}comparison(e,A){if(e.RHS){const[n]=this.go(e.comp_op);return this.createcodenode(A,{type:27,compare:n,lhs:this.createexprnodeondemand(this.go(e.LHS),A),rhs:this.createexprnodeondemand(this.go(e.RHS),A)})}return this.go(e.LHS)}comp_op(e,A){return e.token_iseq?this.createcodenode(A,{type:28,method:0}):e.token_isnoteq?this.createcodenode(A,{type:28,method:1}):e.token_islessthan?this.createcodenode(A,{type:28,method:2}):e.token_isgreaterthan?this.createcodenode(A,{type:28,method:3}):e.token_islessthanorequal?this.createcodenode(A,{type:28,method:4}):e.token_isgreaterthanorequal?this.createcodenode(A,{type:28,method:5}):[]}expr_value(e,A){return e.RHS?this.createcodenode(A,{type:24,items:[this.createexprnodeondemand(this.go(e.LHS),A),this.createexprnodeondemand(this.go(e.RHS),A)]}):this.go(e.LHS)}and_test_value(e,A){return e.RHS?this.createcodenode(A,{type:25,items:[this.createexprnodeondemand(this.go(e.LHS),A),this.createexprnodeondemand(this.go(e.RHS),A)]}):this.go(e.LHS)}not_test_value(e,A){return e.arith_expr?this.go(e.arith_expr):e.LHS?this.createcodenode(A,{type:26,items:this.go(e.LHS)}):[]}arith_expr(e,A){if(e.LHS)return this.go(e.LHS);const n=this.go(e.term);return e.RHS?this.createcodenode(A,{type:29,lhs:n[0],items:this.go(e.RHS)}):n}arith_expr_item(e,A){return this.createcodenode(A,{type:30,operator:e.token_plus?1:2,rhs:this.go(e.term)[0]})}term(e,A){return e.term_item?this.createcodenode(A,{type:29,lhs:this.go(e.factor)[0],items:this.go(e.term_item)}):this.go(e.factor)}term_item(e,A){let n=0;return e.token_multiply&&(n=4),e.token_divide&&(n=5),e.token_moddivide&&(n=6),e.token_floordivide&&(n=7),this.createcodenode(A,{type:30,operator:n,rhs:this.go(e.factor)[0]})}factor(e,A){if(e.power)return this.go(e.power);let n=0;return e.token_plus&&(n=8),e.token_minus&&(n=9),this.createcodenode(A,{type:29,lhs:void 0,items:this.createcodenode(A,{type:30,operator:n,rhs:this.go(e.LHS)[0]})})}power(e,A){const n=this.go(e.token);return e.factor?this.createcodenode(A,{type:29,lhs:n[0],items:this.createcodenode(A,{type:30,operator:3,rhs:this.go(e.factor)[0]})}):n}words(e){return this.go(e.expr)}kind(e){return[this.go(e.color),this.go(e.string_token)].flat()}category(e,A){return e.token_isterrain?this.createcodenode(A,{type:12,literal:1,value:"isterrain"}):e.token_isobject?this.createcodenode(A,{type:12,literal:1,value:"isobject"}):[]}collision(e,A){return e.token_iswalkable?this.createcodenode(A,{type:12,literal:1,value:"iswalkable"}):e.token_iswalking?this.createcodenode(A,{type:12,literal:1,value:"iswalking"}):e.token_iswalk?this.createcodenode(A,{type:12,literal:1,value:"iswalk"}):e.token_isswimmable?this.createcodenode(A,{type:12,literal:1,value:"isswimmable"}):e.token_isswimming?this.createcodenode(A,{type:12,literal:1,value:"isswimming"}):e.token_isswim?this.createcodenode(A,{type:12,literal:1,value:"isswim"}):e.token_issolid?this.createcodenode(A,{type:12,literal:1,value:"issolid"}):e.token_isbullet?this.createcodenode(A,{type:12,literal:1,value:"isbullet"}):e.token_isghost?this.createcodenode(A,{type:12,literal:1,value:"isghost"}):[]}color(e,A){let n="ERROR";return e.token_black&&(n="black"),e.token_dkblue&&(n="dkblue"),e.token_dkgreen&&(n="dkgreen"),e.token_dkcyan&&(n="dkcyan"),e.token_dkred&&(n="dkred"),e.token_dkpurple&&(n="dkpurple"),e.token_dkyellow&&(n="dkyellow"),e.token_ltgray&&(n="ltgray"),e.token_dkgray&&(n="dkgray"),e.token_blue&&(n="blue"),e.token_green&&(n="green"),e.token_cyan&&(n="cyan"),e.token_red&&(n="red"),e.token_purple&&(n="purple"),e.token_yellow&&(n="yellow"),e.token_white&&(n="white"),e.token_brown&&(n="brown"),e.token_dkwhite&&(n="dkwhite"),e.token_ltgrey&&(n="ltgrey"),e.token_gray&&(n="gray"),e.token_grey&&(n="grey"),e.token_dkgrey&&(n="dkgrey"),e.token_ltblack&&(n="ltblack"),e.token_onblack&&(n="onblack"),e.token_ondkblue&&(n="ondkblue"),e.token_ondkgreen&&(n="ondkgreen"),e.token_ondkcyan&&(n="ondkcyan"),e.token_ondkred&&(n="ondkred"),e.token_ondkpurple&&(n="ondkpurple"),e.token_ondkyellow&&(n="ondkyellow"),e.token_onltgray&&(n="onltgray"),e.token_ondkgray&&(n="ondkgray"),e.token_onblue&&(n="onblue"),e.token_ongreen&&(n="ongreen"),e.token_oncyan&&(n="oncyan"),e.token_onred&&(n="onred"),e.token_onpurple&&(n="onpurple"),e.token_onyellow&&(n="onyellow"),e.token_onwhite&&(n="onwhite"),e.token_onbrown&&(n="onbrown"),e.token_ondkwhite&&(n="ondkwhite"),e.token_onltgrey&&(n="onltgrey"),e.token_ongray&&(n="ongray"),e.token_ongrey&&(n="ongrey"),e.token_ondkgrey&&(n="ondkgrey"),e.token_onltblack&&(n="onltblack"),e.token_onclear&&(n="onclear"),e.token_blblack&&(n="blblack"),e.token_bldkblue&&(n="blblue"),e.token_bldkgreen&&(n="blgreen"),e.token_bldkcyan&&(n="bldkcyan"),e.token_bldkred&&(n="bldkred"),e.token_bldkpurple&&(n="bldkpurple"),e.token_bldkyellow&&(n="bldkyellow"),e.token_blltgray&&(n="blltgray"),e.token_bldkgray&&(n="bldkgray"),e.token_blblue&&(n="blblue"),e.token_blgreen&&(n="blgreen"),e.token_blcyan&&(n="blcyan"),e.token_blred&&(n="blred"),e.token_blpurple&&(n="blpurple"),e.token_blyellow&&(n="blyellow"),e.token_blwhite&&(n="blwhite"),e.token_blbrown&&(n="blbrown"),e.token_bldkwhite&&(n="bldkwhite"),e.token_blltgrey&&(n="blltgrey"),e.token_blgray&&(n="blgray"),e.token_blgrey&&(n="blgrey"),e.token_bldkgrey&&(n="bldkgrey"),e.token_blltblack&&(n="blltblack"),this.createcodenode(A,{type:12,literal:1,value:n})}dir_mod(e,A){if(e.dir_within)return this.go(e.dir_within);if(e.dir_awayby)return this.go(e.dir_awayby);let n="ERROR";return e.token_cw&&(n="cw"),e.token_ccw&&(n="ccw"),e.token_opp&&(n="opp"),e.token_rndp&&(n="rndp"),e.token_over&&(n="over"),e.token_under&&(n="under"),e.token_ground&&(n="ground"),e.token_elements&&(n="elements"),this.createcodenode(A,{type:12,literal:1,value:n})}dir_by(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"by"}),...this.go(e.simple_token)]}dir_at(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"at"}),...this.go(e.simple_token)]}dir_away(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"away"}),...this.go(e.simple_token)]}dir_toward(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"toward"}),...this.go(e.simple_token)]}dir_find(e,A){const n=this.go(e.kind);if(e.token_numberliteral){const r=parseFloat(AA(e.token_numberliteral,"0"));n.push(...this.createcodenode(A,{type:12,literal:0,value:r}))}return[...this.createcodenode(A,{type:12,literal:1,value:"find"}),...n]}dir_flee(e,A){const n=this.go(e.kind);if(e.token_numberliteral){const r=parseFloat(AA(e.token_numberliteral,"0"));n.push(...this.createcodenode(A,{type:12,literal:0,value:r}))}return[...this.createcodenode(A,{type:12,literal:1,value:"flee"}),...n]}dir_to(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"to"}),...this.go(e.dir)]}dir_within(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"within"}),...this.go(e.simple_token)]}dir_awayby(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"awayby"}),...this.go(e.simple_token)]}dir(e,A){const n=this.go(e.dir_mod)??[];return e.token_i&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"i"})),e.token_idle&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"idle"})),e.token_n&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"n"})),e.token_u&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"u"})),e.token_north&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"north"})),e.token_up&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"up"})),e.token_s&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"s"})),e.token_d&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"d"})),e.token_south&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"south"})),e.token_down&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"down"})),e.token_w&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"w"})),e.token_l&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"l"})),e.token_west&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"west"})),e.token_left&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"left"})),e.token_e&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"e"})),e.token_r&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"r"})),e.token_east&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"east"})),e.token_right&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"right"})),e.token_rnd&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"rnd"})),e.token_rndne&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"rndne"})),e.token_rndns&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"rndns"})),e.token_flow&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"flow"})),e.token_seek&&n.push(...this.createcodenode(A,{type:12,literal:1,value:"seek"})),e.dir_by&&n.push(...this.go(e.dir_by)),e.dir_at&&n.push(...this.go(e.dir_at)),e.dir_away&&n.push(...this.go(e.dir_away)),e.dir_toward&&n.push(...this.go(e.dir_toward)),e.dir_find&&n.push(...this.go(e.dir_find)),e.dir_flee&&n.push(...this.go(e.dir_flee)),e.dir_to&&n.push(...this.go(e.dir_to)),n.flat()}expr_any(e){return[this.go(e.dir),this.go(e.kind),this.go(e.color)].flat()}token_expr_any(e,A){return[this.createcodenode(A,{type:12,literal:1,value:"any"}),this.go(e.expr_any)].flat()}token_expr_count(e,A){return[this.createcodenode(A,{type:12,literal:1,value:"countof"}),this.go(e.expr_any)].flat()}token_expr_blocked(e,A){return[this.createcodenode(A,{type:12,literal:1,value:"blocked"}),this.go(e.dir)].flat()}token_expr_abs(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"abs"}),...this.go(e.simple_token)]}token_expr_intceil(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"intceil"}),...this.go(e.simple_token)]}token_expr_intfloor(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"intfloor"}),...this.go(e.simple_token)]}token_expr_intround(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"intround"}),...this.go(e.simple_token)]}token_expr_clamp(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"clamp"}),...this.go(e.simple_token)]}token_expr_min(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"min"}),...this.go(e.simple_token)]}token_expr_max(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"max"}),...this.go(e.simple_token)]}token_expr_pick(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"pick"}),...this.go(e.simple_token)]}token_expr_pickwith(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"pickwith"}),...this.go(e.simple_token)]}token_expr_random(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"random"}),...this.go(e.simple_token)]}token_expr_randomwith(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"randomwith"}),...this.go(e.simple_token)]}token_expr_run(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"run"}),...this.go(e.string_token)]}token_expr_runwith(e,A){return[...this.createcodenode(A,{type:12,literal:1,value:"runwith"}),...this.go(e.simple_token),...this.go(e.string_token)]}token_expr(e,A){return e.token_expr_aligned?this.createcodenode(A,{type:12,literal:1,value:"aligned"}):e.token_contact?this.createcodenode(A,{type:12,literal:1,value:"contact"}):e.token_expr_any?this.go(e.token_expr_any):e.token_expr_count?this.go(e.token_expr_count):e.token_expr_blocked?this.go(e.token_expr_blocked):e.token_expr_abs?this.go(e.token_expr_abs):e.token_expr_intceil?this.go(e.token_expr_intceil):e.token_expr_intfloor?this.go(e.token_expr_intfloor):e.token_expr_intround?this.go(e.token_expr_intround):e.token_expr_clamp?this.go(e.token_expr_clamp):e.token_expr_min?this.go(e.token_expr_min):e.token_expr_max?this.go(e.token_expr_max):e.token_expr_pick?this.go(e.token_expr_pick):e.token_expr_pickwith?this.go(e.token_expr_pickwith):e.token_expr_random?this.go(e.token_expr_random):e.token_expr_randomwith?this.go(e.token_expr_randomwith):e.token_expr_run?this.go(e.token_expr_run):e.token_expr_runwith?this.go(e.token_expr_runwith):[]}string_token(e,A){if(e.token_stringliteraldouble){const n=AA(e.token_stringliteraldouble,"");return this.createcodenode(A,{type:12,literal:2,value:n})}if(e.token_stringliteral){const n=AA(e.token_stringliteral,"");return this.createcodenode(A,{type:12,literal:1,value:n})}return[]}simple_token(e,A){if(e.token_stringliteraldouble){const n=AA(e.token_stringliteraldouble,"");return this.createcodenode(A,{type:12,literal:2,value:n})}if(e.token_stringliteral){const n=AA(e.token_stringliteral,"");return this.createcodenode(A,{type:12,literal:1,value:n})}if(e.token_numberliteral){const n=parseFloat(AA(e.token_numberliteral,"0"));return this.createcodenode(A,{type:12,literal:0,value:n})}return e.color?this.go(e.color):[]}token(e,A){if(e.category)return this.go(e.category);if(e.collision)return this.go(e.collision);if(e.color)return this.go(e.color);if(e.dir)return this.go(e.dir);if(e.command_play)return this.go(e.command_play);if(e.command_toast)return this.go(e.command_toast);if(e.command_ticker)return this.go(e.command_ticker);if(e.token_label){const n=AA(e.token_label,"");return this.createcodenode(A,{type:12,literal:1,value:n})}if(e.token_stringliteraldouble){const n=AA(e.token_stringliteraldouble,"");return this.createcodenode(A,{type:12,literal:2,value:n})}if(e.token_stringliteral){const n=AA(e.token_stringliteral,"");return this.createcodenode(A,{type:12,literal:1,value:n})}if(e.token_numberliteral){const n=parseFloat(AA(e.token_numberliteral,"0"));return this.createcodenode(A,{type:12,literal:0,value:n})}if(e.token_lparen)return[this.createexprnodeondemand(this.go(e.expr),A)];if(e.token_stop){const n=AA(e.token_stop,"");return this.createcodenode(A,{type:12,literal:1,value:n})}return[]}}const cQ=new aQ;function ow(t){if(!t||t.type===void 0)return;const e=[{start:t.startOffset,end:t.endOffset??0}];return Object.keys(t).forEach(A=>{if(A!=="parent"){const n=t[A];st(n)?n.forEach(r=>{e.push(ow(r))}):e.push(ow(n))}}),t.range={start:Math.min(...e.filter(A=>A).map(A=>A?.start??0)),end:Math.max(...e.filter(A=>A).map(A=>A?.end??0))},t.range}function lQ(t){const e=M8(`${t}
`);if(e.errors.length>0)return e;aa.input=e.tokens;const A=aa.program();if(aa.errors.length>0)return{tokens:e.tokens,errors:aa.errors.map(r=>({offset:r.token.startOffset,line:r.token.startLine,column:r.token.startColumn,length:r.token.image.length,message:r.message}))};const[n]=cQ.go(A);return n?(ow(n),{tokens:e.tokens,cst:A,ast:n}):{tokens:e.tokens,cst:A,errors:[{message:"no ast output",offset:0,line:0,column:0,length:0}]}}var Tl={},aw={},cw={},lw={},gT;function uQ(){if(gT)return lw;gT=1;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return lw.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},lw}var wT;function bT(){if(wT)return cw;wT=1;const t=uQ(),e=5,A=1<<e,n=A-1,r=A;function s(i){return i<0?(-i<<1)+1:(i<<1)+0}return cw.encode=function(o){let a="",c,l=s(o);do c=l&n,l>>>=e,l>0&&(c|=r),a+=t.encode(c);while(l>0);return a},cw}var Er={},Ao={},Ol={exports:{}};var hQ=Ol.exports,_T;function fQ(){return _T||(_T=1,(function(t,e){(function(A){var n=e&&!e.nodeType&&e,r=t&&!t.nodeType&&t,s=typeof Ys=="object"&&Ys;(s.global===s||s.window===s||s.self===s)&&(A=s);var i,o=2147483647,a=36,c=1,l=26,u=38,f=700,h=72,d=128,m="-",p=/^xn--/,w=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=a-c,_=Math.floor,G=String.fromCharCode,y;function v(q){throw new RangeError(g[q])}function O(q,C){for(var j=q.length,te=[];j--;)te[j]=C(q[j]);return te}function B(q,C){var j=q.split("@"),te="";j.length>1&&(te=j[0]+"@",q=j[1]),q=q.replace(b,".");var W=q.split("."),J=O(W,C).join(".");return te+J}function Y(q){for(var C=[],j=0,te=q.length,W,J;j<te;)W=q.charCodeAt(j++),W>=55296&&W<=56319&&j<te?(J=q.charCodeAt(j++),(J&64512)==56320?C.push(((W&1023)<<10)+(J&1023)+65536):(C.push(W),j--)):C.push(W);return C}function D(q){return O(q,function(C){var j="";return C>65535&&(C-=65536,j+=G(C>>>10&1023|55296),C=56320|C&1023),j+=G(C),j}).join("")}function N(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:a}function M(q,C){return q+22+75*(q<26)-((C!=0)<<5)}function Z(q,C,j){var te=0;for(q=j?_(q/f):q>>1,q+=_(q/C);q>x*l>>1;te+=a)q=_(q/x);return _(te+(x+1)*q/(q+u))}function R(q){var C=[],j=q.length,te,W=0,J=d,fe=h,be,me,_e,ke,Oe,Ze,Fe,P,X;for(be=q.lastIndexOf(m),be<0&&(be=0),me=0;me<be;++me)q.charCodeAt(me)>=128&&v("not-basic"),C.push(q.charCodeAt(me));for(_e=be>0?be+1:0;_e<j;){for(ke=W,Oe=1,Ze=a;_e>=j&&v("invalid-input"),Fe=N(q.charCodeAt(_e++)),(Fe>=a||Fe>_((o-W)/Oe))&&v("overflow"),W+=Fe*Oe,P=Ze<=fe?c:Ze>=fe+l?l:Ze-fe,!(Fe<P);Ze+=a)X=a-P,Oe>_(o/X)&&v("overflow"),Oe*=X;te=C.length+1,fe=Z(W-ke,te,ke==0),_(W/te)>o-J&&v("overflow"),J+=_(W/te),W%=te,C.splice(W++,0,J)}return D(C)}function I(q){var C,j,te,W,J,fe,be,me,_e,ke,Oe,Ze=[],Fe,P,X,ee;for(q=Y(q),Fe=q.length,C=d,j=0,J=h,fe=0;fe<Fe;++fe)Oe=q[fe],Oe<128&&Ze.push(G(Oe));for(te=W=Ze.length,W&&Ze.push(m);te<Fe;){for(be=o,fe=0;fe<Fe;++fe)Oe=q[fe],Oe>=C&&Oe<be&&(be=Oe);for(P=te+1,be-C>_((o-j)/P)&&v("overflow"),j+=(be-C)*P,C=be,fe=0;fe<Fe;++fe)if(Oe=q[fe],Oe<C&&++j>o&&v("overflow"),Oe==C){for(me=j,_e=a;ke=_e<=J?c:_e>=J+l?l:_e-J,!(me<ke);_e+=a)ee=me-ke,X=a-ke,Ze.push(G(M(ke+ee%X,0))),me=_(ee/X);Ze.push(G(M(me,0))),J=Z(j,P,te==W),j=0,++te}++j,++C}return Ze.join("")}function $(q){return B(q,function(C){return p.test(C)?R(C.slice(4).toLowerCase()):C})}function V(q){return B(q,function(C){return w.test(C)?"xn--"+I(C):C})}if(i={version:"1.4.1",ucs2:{decode:Y,encode:D},decode:R,encode:I,toASCII:V,toUnicode:$},n&&r)if(t.exports==n)r.exports=i;else for(y in i)i.hasOwnProperty(y)&&(n[y]=i[y]);else A.punycode=i})(hQ)})(Ol,Ol.exports)),Ol.exports}var uw,xT;function ca(){return xT||(xT=1,uw=TypeError),uw}var dQ={},mQ=Object.freeze({__proto__:null,default:dQ}),pQ=z_(mQ),hw,yT;function Gf(){if(yT)return hw;yT=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,A=t&&e&&typeof e.get=="function"?e.get:null,n=t&&Map.prototype.forEach,r=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,i=r&&s&&typeof s.get=="function"?s.get:null,o=r&&Set.prototype.forEach,a=typeof WeakMap=="function"&&WeakMap.prototype,c=a?WeakMap.prototype.has:null,l=typeof WeakSet=="function"&&WeakSet.prototype,u=l?WeakSet.prototype.has:null,f=typeof WeakRef=="function"&&WeakRef.prototype,h=f?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,m=Object.prototype.toString,p=Function.prototype.toString,w=String.prototype.match,b=String.prototype.slice,g=String.prototype.replace,x=String.prototype.toUpperCase,_=String.prototype.toLowerCase,G=RegExp.prototype.test,y=Array.prototype.concat,v=Array.prototype.join,O=Array.prototype.slice,B=Math.floor,Y=typeof BigInt=="function"?BigInt.prototype.valueOf:null,D=Object.getOwnPropertySymbols,N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,M=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Z=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===M||!0)?Symbol.toStringTag:null,R=Object.prototype.propertyIsEnumerable,I=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(F){return F.__proto__}:null);function $(F,se){if(F===1/0||F===-1/0||F!==F||F&&F>-1e3&&F<1e3||G.call(/e/,se))return se;var Ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof F=="number"){var We=F<0?-B(-F):B(F);if(We!==F){var Ke=String(We),Re=b.call(se,Ke.length+1);return g.call(Ke,Ve,"$&_")+"."+g.call(g.call(Re,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(se,Ve,"$&_")}var V=pQ,q=V.custom,C=P(q)?q:null,j={__proto__:null,double:'"',single:"'"},te={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};hw=function F(se,Ve,We,Ke){var Re=Ve||{};if(U(Re,"quoteStyle")&&!U(j,Re.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(U(Re,"maxStringLength")&&(typeof Re.maxStringLength=="number"?Re.maxStringLength<0&&Re.maxStringLength!==1/0:Re.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Tn=U(Re,"customInspect")?Re.customInspect:!0;if(typeof Tn!="boolean"&&Tn!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(Re,"indent")&&Re.indent!==null&&Re.indent!=="	"&&!(parseInt(Re.indent,10)===Re.indent&&Re.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(Re,"numericSeparator")&&typeof Re.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var lr=Re.numericSeparator;if(typeof se>"u")return"undefined";if(se===null)return"null";if(typeof se=="boolean")return se?"true":"false";if(typeof se=="string")return vt(se,Re);if(typeof se=="number"){if(se===0)return 1/0/se>0?"0":"-0";var Ln=String(se);return lr?$(se,Ln):Ln}if(typeof se=="bigint"){var fi=String(se)+"n";return lr?$(se,fi):fi}var T_=typeof Re.depth>"u"?5:Re.depth;if(typeof We>"u"&&(We=0),We>=T_&&T_>0&&typeof se=="object")return be(se)?"[Array]":"[Object]";var Da=L(Re,We);if(typeof Ke>"u")Ke=[];else if(de(Ke,se)>=0)return"[Circular]";function Cr(Ba,vd,lle){if(vd&&(Ke=O.call(Ke),Ke.push(vd)),lle){var yS={depth:Re.depth};return U(Re,"quoteStyle")&&(yS.quoteStyle=Re.quoteStyle),F(Ba,yS,We+1,Ke)}return F(Ba,Re,We+1,Ke)}if(typeof se=="function"&&!_e(se)){var mS=Q(se),pS=ue(se,Cr);return"[Function"+(mS?": "+mS:" (anonymous)")+"]"+(pS.length>0?" { "+v.call(pS,", ")+" }":"")}if(P(se)){var gS=M?g.call(String(se),/^(Symbol\(.*\))_[^)]*$/,"$1"):N.call(se);return typeof se=="object"&&!M?DA(gS):gS}if(Ue(se)){for(var Jl="<"+_.call(String(se.nodeName)),O_=se.attributes||[],Md=0;Md<O_.length;Md++)Jl+=" "+O_[Md].name+"="+W(J(O_[Md].value),"double",Re);return Jl+=">",se.childNodes&&se.childNodes.length&&(Jl+="..."),Jl+="</"+_.call(String(se.nodeName))+">",Jl}if(be(se)){if(se.length===0)return"[]";var Y_=ue(se,Cr);return Da&&!S(Y_)?"["+ne(Y_,Da)+"]":"[ "+v.call(Y_,", ")+" ]"}if(ke(se)){var S_=ue(se,Cr);return!("cause"in Error.prototype)&&"cause"in se&&!R.call(se,"cause")?"{ ["+String(se)+"] "+v.call(y.call("[cause]: "+Cr(se.cause),S_),", ")+" }":S_.length===0?"["+String(se)+"]":"{ ["+String(se)+"] "+v.call(S_,", ")+" }"}if(typeof se=="object"&&Tn){if(C&&typeof se[C]=="function"&&V)return V(se,{depth:T_-We});if(Tn!=="symbol"&&typeof se.inspect=="function")return se.inspect()}if(pe(se)){var wS=[];return n&&n.call(se,function(Ba,vd){wS.push(Cr(vd,se,!0)+" => "+Cr(Ba,se))}),T("Map",A.call(se),wS,Da)}if(Se(se)){var bS=[];return o&&o.call(se,function(Ba){bS.push(Cr(Ba,se))}),T("Set",i.call(se),bS,Da)}if(oe(se))return z("WeakMap");if(Be(se))return z("WeakSet");if(Me(se))return z("WeakRef");if(Ze(se))return DA(Cr(Number(se)));if(X(se))return DA(Cr(Y.call(se)));if(Fe(se))return DA(d.call(se));if(Oe(se))return DA(Cr(String(se)));if(typeof window<"u"&&se===window)return"{ [object Window] }";if(typeof globalThis<"u"&&se===globalThis||typeof Ys<"u"&&se===Ys)return"{ [object globalThis] }";if(!me(se)&&!_e(se)){var C_=ue(se,Cr),_S=I?I(se)===Object.prototype:se instanceof Object||se.constructor===Object,P_=se instanceof Object?"":"null prototype",xS=!_S&&Z&&Object(se)===se&&Z in se?b.call(H(se),8,-1):P_?"Object":"",cle=_S||typeof se.constructor!="function"?"":se.constructor.name?se.constructor.name+" ":"",Z_=cle+(xS||P_?"["+v.call(y.call([],xS||[],P_||[]),": ")+"] ":"");return C_.length===0?Z_+"{}":Da?Z_+"{"+ne(C_,Da)+"}":Z_+"{ "+v.call(C_,", ")+" }"}return String(se)};function W(F,se,Ve){var We=Ve.quoteStyle||se,Ke=j[We];return Ke+F+Ke}function J(F){return g.call(String(F),/"/g,"&quot;")}function fe(F){return!Z||!(typeof F=="object"&&(Z in F||typeof F[Z]<"u"))}function be(F){return H(F)==="[object Array]"&&fe(F)}function me(F){return H(F)==="[object Date]"&&fe(F)}function _e(F){return H(F)==="[object RegExp]"&&fe(F)}function ke(F){return H(F)==="[object Error]"&&fe(F)}function Oe(F){return H(F)==="[object String]"&&fe(F)}function Ze(F){return H(F)==="[object Number]"&&fe(F)}function Fe(F){return H(F)==="[object Boolean]"&&fe(F)}function P(F){if(M)return F&&typeof F=="object"&&F instanceof Symbol;if(typeof F=="symbol")return!0;if(!F||typeof F!="object"||!N)return!1;try{return N.call(F),!0}catch{}return!1}function X(F){if(!F||typeof F!="object"||!Y)return!1;try{return Y.call(F),!0}catch{}return!1}var ee=Object.prototype.hasOwnProperty||function(F){return F in this};function U(F,se){return ee.call(F,se)}function H(F){return m.call(F)}function Q(F){if(F.name)return F.name;var se=w.call(p.call(F),/^function\s*([\w$]+)/);return se?se[1]:null}function de(F,se){if(F.indexOf)return F.indexOf(se);for(var Ve=0,We=F.length;Ve<We;Ve++)if(F[Ve]===se)return Ve;return-1}function pe(F){if(!A||!F||typeof F!="object")return!1;try{A.call(F);try{i.call(F)}catch{return!0}return F instanceof Map}catch{}return!1}function oe(F){if(!c||!F||typeof F!="object")return!1;try{c.call(F,c);try{u.call(F,u)}catch{return!0}return F instanceof WeakMap}catch{}return!1}function Me(F){if(!h||!F||typeof F!="object")return!1;try{return h.call(F),!0}catch{}return!1}function Se(F){if(!i||!F||typeof F!="object")return!1;try{i.call(F);try{A.call(F)}catch{return!0}return F instanceof Set}catch{}return!1}function Be(F){if(!u||!F||typeof F!="object")return!1;try{u.call(F,u);try{c.call(F,c)}catch{return!0}return F instanceof WeakSet}catch{}return!1}function Ue(F){return!F||typeof F!="object"?!1:typeof HTMLElement<"u"&&F instanceof HTMLElement?!0:typeof F.nodeName=="string"&&typeof F.getAttribute=="function"}function vt(F,se){if(F.length>se.maxStringLength){var Ve=F.length-se.maxStringLength,We="... "+Ve+" more character"+(Ve>1?"s":"");return vt(b.call(F,0,se.maxStringLength),se)+We}var Ke=te[se.quoteStyle||"single"];Ke.lastIndex=0;var Re=g.call(g.call(F,Ke,"\\$1"),/[\x00-\x1f]/g,tt);return W(Re,"single",se)}function tt(F){var se=F.charCodeAt(0),Ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[se];return Ve?"\\"+Ve:"\\x"+(se<16?"0":"")+x.call(se.toString(16))}function DA(F){return"Object("+F+")"}function z(F){return F+" { ? }"}function T(F,se,Ve,We){var Ke=We?ne(Ve,We):v.call(Ve,", ");return F+" ("+se+") {"+Ke+"}"}function S(F){for(var se=0;se<F.length;se++)if(de(F[se],`
`)>=0)return!1;return!0}function L(F,se){var Ve;if(F.indent==="	")Ve="	";else if(typeof F.indent=="number"&&F.indent>0)Ve=v.call(Array(F.indent+1)," ");else return null;return{base:Ve,prev:v.call(Array(se+1),Ve)}}function ne(F,se){if(F.length===0)return"";var Ve=`
`+se.prev+se.base;return Ve+v.call(F,","+Ve)+`
`+se.prev}function ue(F,se){var Ve=be(F),We=[];if(Ve){We.length=F.length;for(var Ke=0;Ke<F.length;Ke++)We[Ke]=U(F,Ke)?se(F[Ke],F):""}var Re=typeof D=="function"?D(F):[],Tn;if(M){Tn={};for(var lr=0;lr<Re.length;lr++)Tn["$"+Re[lr]]=Re[lr]}for(var Ln in F)U(F,Ln)&&(Ve&&String(Number(Ln))===Ln&&Ln<F.length||M&&Tn["$"+Ln]instanceof Symbol||(G.call(/[^\w$]/,Ln)?We.push(se(Ln,F)+": "+se(F[Ln],F)):We.push(Ln+": "+se(F[Ln],F))));if(typeof D=="function")for(var fi=0;fi<Re.length;fi++)R.call(F,Re[fi])&&We.push("["+se(Re[fi])+"]: "+se(F[Re[fi]],F));return We}return hw}var fw,GT;function gQ(){if(GT)return fw;GT=1;var t=Gf(),e=ca(),A=function(o,a,c){for(var l=o,u;(u=l.next)!=null;l=u)if(u.key===a)return l.next=u.next,c||(u.next=o.next,o.next=u),u},n=function(o,a){if(o){var c=A(o,a);return c&&c.value}},r=function(o,a,c){var l=A(o,a);l?l.value=c:o.next={key:a,next:o.next,value:c}},s=function(o,a){return o?!!A(o,a):!1},i=function(o,a){if(o)return A(o,a,!0)};return fw=function(){var a,c={assert:function(l){if(!c.has(l))throw new e("Side channel does not contain "+t(l))},delete:function(l){var u=a&&a.next,f=i(a,l);return f&&u&&u===f&&(a=void 0),!!f},get:function(l){return n(a,l)},has:function(l){return s(a,l)},set:function(l,u){a||(a={next:void 0}),r(a,l,u)}};return c},fw}var dw,MT;function vT(){return MT||(MT=1,dw=Object),dw}var mw,DT;function wQ(){return DT||(DT=1,mw=Error),mw}var pw,BT;function bQ(){return BT||(BT=1,pw=EvalError),pw}var gw,kT;function _Q(){return kT||(kT=1,gw=RangeError),gw}var ww,ET;function xQ(){return ET||(ET=1,ww=ReferenceError),ww}var bw,NT;function yQ(){return NT||(NT=1,bw=SyntaxError),bw}var _w,TT;function GQ(){return TT||(TT=1,_w=URIError),_w}var xw,OT;function MQ(){return OT||(OT=1,xw=Math.abs),xw}var yw,YT;function vQ(){return YT||(YT=1,yw=Math.floor),yw}var Gw,ST;function DQ(){return ST||(ST=1,Gw=Math.max),Gw}var Mw,CT;function BQ(){return CT||(CT=1,Mw=Math.min),Mw}var vw,PT;function kQ(){return PT||(PT=1,vw=Math.pow),vw}var Dw,ZT;function EQ(){return ZT||(ZT=1,Dw=Math.round),Dw}var Bw,IT;function NQ(){return IT||(IT=1,Bw=Number.isNaN||function(e){return e!==e}),Bw}var kw,RT;function TQ(){if(RT)return kw;RT=1;var t=NQ();return kw=function(A){return t(A)||A===0?A:A<0?-1:1},kw}var Ew,jT;function OQ(){return jT||(jT=1,Ew=Object.getOwnPropertyDescriptor),Ew}var Nw,zT;function HT(){if(zT)return Nw;zT=1;var t=OQ();if(t)try{t([],"length")}catch{t=null}return Nw=t,Nw}var Tw,LT;function YQ(){if(LT)return Tw;LT=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Tw=t,Tw}var Ow,UT;function SQ(){return UT||(UT=1,Ow=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},A=Symbol("test"),n=Object(A);if(typeof A=="string"||Object.prototype.toString.call(A)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[A]=r;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==A||!Object.prototype.propertyIsEnumerable.call(e,A))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,A);if(o.value!==r||o.enumerable!==!0)return!1}return!0}),Ow}var Yw,FT;function CQ(){if(FT)return Yw;FT=1;var t=typeof Symbol<"u"&&Symbol,e=SQ();return Yw=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Yw}var Sw,$T;function VT(){return $T||($T=1,Sw=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Sw}var Cw,qT;function WT(){if(qT)return Cw;qT=1;var t=vT();return Cw=t.getPrototypeOf||null,Cw}var Pw,QT;function PQ(){if(QT)return Pw;QT=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,A=Math.max,n="[object Function]",r=function(a,c){for(var l=[],u=0;u<a.length;u+=1)l[u]=a[u];for(var f=0;f<c.length;f+=1)l[f+a.length]=c[f];return l},s=function(a,c){for(var l=[],u=c,f=0;u<a.length;u+=1,f+=1)l[f]=a[u];return l},i=function(o,a){for(var c="",l=0;l<o.length;l+=1)c+=o[l],l+1<o.length&&(c+=a);return c};return Pw=function(a){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(t+c);for(var l=s(arguments,1),u,f=function(){if(this instanceof u){var w=c.apply(this,r(l,arguments));return Object(w)===w?w:this}return c.apply(a,r(l,arguments))},h=A(0,c.length-l.length),d=[],m=0;m<h;m++)d[m]="$"+m;if(u=Function("binder","return function ("+i(d,",")+"){ return binder.apply(this,arguments); }")(f),c.prototype){var p=function(){};p.prototype=c.prototype,u.prototype=new p,p.prototype=null}return u},Pw}var Zw,KT;function Mf(){if(KT)return Zw;KT=1;var t=PQ();return Zw=Function.prototype.bind||t,Zw}var Iw,JT;function Rw(){return JT||(JT=1,Iw=Function.prototype.call),Iw}var jw,XT;function eO(){return XT||(XT=1,jw=Function.prototype.apply),jw}var zw,tO;function ZQ(){return tO||(tO=1,zw=typeof Reflect<"u"&&Reflect&&Reflect.apply),zw}var Hw,AO;function IQ(){if(AO)return Hw;AO=1;var t=Mf(),e=eO(),A=Rw(),n=ZQ();return Hw=n||t.call(A,e),Hw}var Lw,nO;function rO(){if(nO)return Lw;nO=1;var t=Mf(),e=ca(),A=Rw(),n=IQ();return Lw=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(t,A,s)},Lw}var Uw,sO;function RQ(){if(sO)return Uw;sO=1;var t=rO(),e=HT(),A;try{A=[].__proto__===Array.prototype}catch(i){if(!i||typeof i!="object"||!("code"in i)||i.code!=="ERR_PROTO_ACCESS")throw i}var n=!!A&&e&&e(Object.prototype,"__proto__"),r=Object,s=r.getPrototypeOf;return Uw=n&&typeof n.get=="function"?t([n.get]):typeof s=="function"?function(o){return s(o==null?o:r(o))}:!1,Uw}var Fw,iO;function jQ(){if(iO)return Fw;iO=1;var t=VT(),e=WT(),A=RQ();return Fw=t?function(r){return t(r)}:e?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return e(r)}:A?function(r){return A(r)}:null,Fw}var $w,oO;function zQ(){if(oO)return $w;oO=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,A=Mf();return $w=A.call(t,e),$w}var Vw,aO;function qw(){if(aO)return Vw;aO=1;var t,e=vT(),A=wQ(),n=bQ(),r=_Q(),s=xQ(),i=yQ(),o=ca(),a=GQ(),c=MQ(),l=vQ(),u=DQ(),f=BQ(),h=kQ(),d=EQ(),m=TQ(),p=Function,w=function(_e){try{return p('"use strict"; return ('+_e+").constructor;")()}catch{}},b=HT(),g=YQ(),x=function(){throw new o},_=b?(function(){try{return arguments.callee,x}catch{try{return b(arguments,"callee").get}catch{return x}}})():x,G=CQ()(),y=jQ(),v=WT(),O=VT(),B=eO(),Y=Rw(),D={},N=typeof Uint8Array>"u"||!y?t:y(Uint8Array),M={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":G&&y?y([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":D,"%AsyncGenerator%":D,"%AsyncGeneratorFunction%":D,"%AsyncIteratorPrototype%":D,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":A,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":D,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":G&&y?y(y([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!G||!y?t:y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":r,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!G||!y?t:y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":G&&y?y(""[Symbol.iterator]()):t,"%Symbol%":G?Symbol:t,"%SyntaxError%":i,"%ThrowTypeError%":_,"%TypedArray%":N,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":Y,"%Function.prototype.apply%":B,"%Object.defineProperty%":g,"%Object.getPrototypeOf%":v,"%Math.abs%":c,"%Math.floor%":l,"%Math.max%":u,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":d,"%Math.sign%":m,"%Reflect.getPrototypeOf%":O};if(y)try{null.error}catch(_e){var Z=y(y(_e));M["%Error.prototype%"]=Z}var R=function _e(ke){var Oe;if(ke==="%AsyncFunction%")Oe=w("async function () {}");else if(ke==="%GeneratorFunction%")Oe=w("function* () {}");else if(ke==="%AsyncGeneratorFunction%")Oe=w("async function* () {}");else if(ke==="%AsyncGenerator%"){var Ze=_e("%AsyncGeneratorFunction%");Ze&&(Oe=Ze.prototype)}else if(ke==="%AsyncIteratorPrototype%"){var Fe=_e("%AsyncGenerator%");Fe&&y&&(Oe=y(Fe.prototype))}return M[ke]=Oe,Oe},I={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$=Mf(),V=zQ(),q=$.call(Y,Array.prototype.concat),C=$.call(B,Array.prototype.splice),j=$.call(Y,String.prototype.replace),te=$.call(Y,String.prototype.slice),W=$.call(Y,RegExp.prototype.exec),J=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fe=/\\(\\)?/g,be=function(ke){var Oe=te(ke,0,1),Ze=te(ke,-1);if(Oe==="%"&&Ze!=="%")throw new i("invalid intrinsic syntax, expected closing `%`");if(Ze==="%"&&Oe!=="%")throw new i("invalid intrinsic syntax, expected opening `%`");var Fe=[];return j(ke,J,function(P,X,ee,U){Fe[Fe.length]=ee?j(U,fe,"$1"):X||P}),Fe},me=function(ke,Oe){var Ze=ke,Fe;if(V(I,Ze)&&(Fe=I[Ze],Ze="%"+Fe[0]+"%"),V(M,Ze)){var P=M[Ze];if(P===D&&(P=R(Ze)),typeof P>"u"&&!Oe)throw new o("intrinsic "+ke+" exists, but is not available. Please file an issue!");return{alias:Fe,name:Ze,value:P}}throw new i("intrinsic "+ke+" does not exist!")};return Vw=function(ke,Oe){if(typeof ke!="string"||ke.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Oe!="boolean")throw new o('"allowMissing" argument must be a boolean');if(W(/^%?[^%]*%?$/,ke)===null)throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ze=be(ke),Fe=Ze.length>0?Ze[0]:"",P=me("%"+Fe+"%",Oe),X=P.name,ee=P.value,U=!1,H=P.alias;H&&(Fe=H[0],C(Ze,q([0,1],H)));for(var Q=1,de=!0;Q<Ze.length;Q+=1){var pe=Ze[Q],oe=te(pe,0,1),Me=te(pe,-1);if((oe==='"'||oe==="'"||oe==="`"||Me==='"'||Me==="'"||Me==="`")&&oe!==Me)throw new i("property names with quotes must have matching quotes");if((pe==="constructor"||!de)&&(U=!0),Fe+="."+pe,X="%"+Fe+"%",V(M,X))ee=M[X];else if(ee!=null){if(!(pe in ee)){if(!Oe)throw new o("base intrinsic for "+ke+" exists, but the property is not available.");return}if(b&&Q+1>=Ze.length){var Se=b(ee,pe);de=!!Se,de&&"get"in Se&&!("originalValue"in Se.get)?ee=Se.get:ee=ee[pe]}else de=V(ee,pe),ee=ee[pe];de&&!U&&(M[X]=ee)}}return ee},Vw}var Ww,cO;function lO(){if(cO)return Ww;cO=1;var t=qw(),e=rO(),A=e([t("%String.prototype.indexOf%")]);return Ww=function(r,s){var i=t(r,!!s);return typeof i=="function"&&A(r,".prototype.")>-1?e([i]):i},Ww}var Qw,uO;function hO(){if(uO)return Qw;uO=1;var t=qw(),e=lO(),A=Gf(),n=ca(),r=t("%Map%",!0),s=e("Map.prototype.get",!0),i=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),a=e("Map.prototype.delete",!0),c=e("Map.prototype.size",!0);return Qw=!!r&&function(){var u,f={assert:function(h){if(!f.has(h))throw new n("Side channel does not contain "+A(h))},delete:function(h){if(u){var d=a(u,h);return c(u)===0&&(u=void 0),d}return!1},get:function(h){if(u)return s(u,h)},has:function(h){return u?o(u,h):!1},set:function(h,d){u||(u=new r),i(u,h,d)}};return f},Qw}var Kw,fO;function HQ(){if(fO)return Kw;fO=1;var t=qw(),e=lO(),A=Gf(),n=hO(),r=ca(),s=t("%WeakMap%",!0),i=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),a=e("WeakMap.prototype.has",!0),c=e("WeakMap.prototype.delete",!0);return Kw=s?function(){var u,f,h={assert:function(d){if(!h.has(d))throw new r("Side channel does not contain "+A(d))},delete:function(d){if(s&&d&&(typeof d=="object"||typeof d=="function")){if(u)return c(u,d)}else if(n&&f)return f.delete(d);return!1},get:function(d){return s&&d&&(typeof d=="object"||typeof d=="function")&&u?i(u,d):f&&f.get(d)},has:function(d){return s&&d&&(typeof d=="object"||typeof d=="function")&&u?a(u,d):!!f&&f.has(d)},set:function(d,m){s&&d&&(typeof d=="object"||typeof d=="function")?(u||(u=new s),o(u,d,m)):n&&(f||(f=n()),f.set(d,m))}};return h}:n,Kw}var Jw,dO;function mO(){if(dO)return Jw;dO=1;var t=ca(),e=Gf(),A=gQ(),n=hO(),r=HQ(),s=r||n||A;return Jw=function(){var o,a={assert:function(c){if(!a.has(c))throw new t("Side channel does not contain "+e(c))},delete:function(c){return!!o&&o.delete(c)},get:function(c){return o&&o.get(c)},has:function(c){return!!o&&o.has(c)},set:function(c,l){o||(o=s()),o.set(c,l)}};return a},Jw}var Xw,pO;function eb(){if(pO)return Xw;pO=1;var t=String.prototype.replace,e=/%20/g,A={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Xw={default:A.RFC3986,formatters:{RFC1738:function(n){return t.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:A.RFC1738,RFC3986:A.RFC3986},Xw}var tb,gO;function wO(){if(gO)return tb;gO=1;var t=eb(),e=mO(),A=Object.prototype.hasOwnProperty,n=Array.isArray,r=e(),s=function(y,v){return r.set(y,v),y},i=function(y){return r.has(y)},o=function(y){return r.get(y)},a=function(y,v){r.set(y,v)},c=(function(){for(var G=[],y=0;y<256;++y)G.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return G})(),l=function(y){for(;y.length>1;){var v=y.pop(),O=v.obj[v.prop];if(n(O)){for(var B=[],Y=0;Y<O.length;++Y)typeof O[Y]<"u"&&B.push(O[Y]);v.obj[v.prop]=B}}},u=function(y,v){for(var O=v&&v.plainObjects?{__proto__:null}:{},B=0;B<y.length;++B)typeof y[B]<"u"&&(O[B]=y[B]);return O},f=function G(y,v,O){if(!v)return y;if(typeof v!="object"&&typeof v!="function"){if(n(y))y.push(v);else if(y&&typeof y=="object")if(i(y)){var B=o(y)+1;y[B]=v,a(y,B)}else(O&&(O.plainObjects||O.allowPrototypes)||!A.call(Object.prototype,v))&&(y[v]=!0);else return[y,v];return y}if(!y||typeof y!="object"){if(i(v)){for(var Y=Object.keys(v),D=O&&O.plainObjects?{__proto__:null,0:y}:{0:y},N=0;N<Y.length;N++){var M=parseInt(Y[N],10);D[M+1]=v[Y[N]]}return s(D,o(v)+1)}return[y].concat(v)}var Z=y;return n(y)&&!n(v)&&(Z=u(y,O)),n(y)&&n(v)?(v.forEach(function(R,I){if(A.call(y,I)){var $=y[I];$&&typeof $=="object"&&R&&typeof R=="object"?y[I]=G($,R,O):y.push(R)}else y[I]=R}),y):Object.keys(v).reduce(function(R,I){var $=v[I];return A.call(R,I)?R[I]=G(R[I],$,O):R[I]=$,R},Z)},h=function(y,v){return Object.keys(v).reduce(function(O,B){return O[B]=v[B],O},y)},d=function(G,y,v){var O=G.replace(/\+/g," ");if(v==="iso-8859-1")return O.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(O)}catch{return O}},m=1024,p=function(y,v,O,B,Y){if(y.length===0)return y;var D=y;if(typeof y=="symbol"?D=Symbol.prototype.toString.call(y):typeof y!="string"&&(D=String(y)),O==="iso-8859-1")return escape(D).replace(/%u[0-9a-f]{4}/gi,function(V){return"%26%23"+parseInt(V.slice(2),16)+"%3B"});for(var N="",M=0;M<D.length;M+=m){for(var Z=D.length>=m?D.slice(M,M+m):D,R=[],I=0;I<Z.length;++I){var $=Z.charCodeAt(I);if($===45||$===46||$===95||$===126||$>=48&&$<=57||$>=65&&$<=90||$>=97&&$<=122||Y===t.RFC1738&&($===40||$===41)){R[R.length]=Z.charAt(I);continue}if($<128){R[R.length]=c[$];continue}if($<2048){R[R.length]=c[192|$>>6]+c[128|$&63];continue}if($<55296||$>=57344){R[R.length]=c[224|$>>12]+c[128|$>>6&63]+c[128|$&63];continue}I+=1,$=65536+(($&1023)<<10|Z.charCodeAt(I)&1023),R[R.length]=c[240|$>>18]+c[128|$>>12&63]+c[128|$>>6&63]+c[128|$&63]}N+=R.join("")}return N},w=function(y){for(var v=[{obj:{o:y},prop:"o"}],O=[],B=0;B<v.length;++B)for(var Y=v[B],D=Y.obj[Y.prop],N=Object.keys(D),M=0;M<N.length;++M){var Z=N[M],R=D[Z];typeof R=="object"&&R!==null&&O.indexOf(R)===-1&&(v.push({obj:D,prop:Z}),O.push(R))}return l(v),y},b=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},g=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},x=function(y,v,O,B){if(i(y)){var Y=o(y)+1;return y[Y]=v,a(y,Y),y}var D=[].concat(y,v);return D.length>O?s(u(D,{plainObjects:B}),D.length-1):D},_=function(y,v){if(n(y)){for(var O=[],B=0;B<y.length;B+=1)O.push(v(y[B]));return O}return v(y)};return tb={arrayToObject:u,assign:h,combine:x,compact:w,decode:d,encode:p,isBuffer:g,isOverflow:i,isRegExp:b,maybeMap:_,merge:f},tb}var Ab,bO;function LQ(){if(bO)return Ab;bO=1;var t=mO(),e=wO(),A=eb(),n=Object.prototype.hasOwnProperty,r={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,w){return p+"["+w+"]"},repeat:function(p){return p}},s=Array.isArray,i=Array.prototype.push,o=function(m,p){i.apply(m,s(p)?p:[p])},a=Date.prototype.toISOString,c=A.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:c,formatter:A.formatters[c],indices:!1,serializeDate:function(p){return a.call(p)},skipNulls:!1,strictNullHandling:!1},u=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},f={},h=function m(p,w,b,g,x,_,G,y,v,O,B,Y,D,N,M,Z,R,I){for(var $=p,V=I,q=0,C=!1;(V=V.get(f))!==void 0&&!C;){var j=V.get(p);if(q+=1,typeof j<"u"){if(j===q)throw new RangeError("Cyclic object value");C=!0}typeof V.get(f)>"u"&&(q=0)}if(typeof O=="function"?$=O(w,$):$ instanceof Date?$=D($):b==="comma"&&s($)&&($=e.maybeMap($,function(X){return X instanceof Date?D(X):X})),$===null){if(_)return v&&!Z?v(w,l.encoder,R,"key",N):w;$=""}if(u($)||e.isBuffer($)){if(v){var te=Z?w:v(w,l.encoder,R,"key",N);return[M(te)+"="+M(v($,l.encoder,R,"value",N))]}return[M(w)+"="+M(String($))]}var W=[];if(typeof $>"u")return W;var J;if(b==="comma"&&s($))Z&&v&&($=e.maybeMap($,v)),J=[{value:$.length>0?$.join(",")||null:void 0}];else if(s(O))J=O;else{var fe=Object.keys($);J=B?fe.sort(B):fe}var be=y?String(w).replace(/\./g,"%2E"):String(w),me=g&&s($)&&$.length===1?be+"[]":be;if(x&&s($)&&$.length===0)return me+"[]";for(var _e=0;_e<J.length;++_e){var ke=J[_e],Oe=typeof ke=="object"&&ke&&typeof ke.value<"u"?ke.value:$[ke];if(!(G&&Oe===null)){var Ze=Y&&y?String(ke).replace(/\./g,"%2E"):String(ke),Fe=s($)?typeof b=="function"?b(me,Ze):me:me+(Y?"."+Ze:"["+Ze+"]");I.set(p,q);var P=t();P.set(f,I),o(W,m(Oe,Fe,b,g,x,_,G,y,b==="comma"&&Z&&s($)?null:v,O,B,Y,D,N,M,Z,R,P))}}return W},d=function(p){if(!p)return l;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.encodeDotInKeys<"u"&&typeof p.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(p.encoder!==null&&typeof p.encoder<"u"&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=p.charset||l.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=A.default;if(typeof p.format<"u"){if(!n.call(A.formatters,p.format))throw new TypeError("Unknown format option provided.");b=p.format}var g=A.formatters[b],x=l.filter;(typeof p.filter=="function"||s(p.filter))&&(x=p.filter);var _;if(p.arrayFormat in r?_=p.arrayFormat:"indices"in p?_=p.indices?"indices":"repeat":_=l.arrayFormat,"commaRoundTrip"in p&&typeof p.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var G=typeof p.allowDots>"u"?p.encodeDotInKeys===!0?!0:l.allowDots:!!p.allowDots;return{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:l.addQueryPrefix,allowDots:G,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:_,charset:w,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:l.charsetSentinel,commaRoundTrip:!!p.commaRoundTrip,delimiter:typeof p.delimiter>"u"?l.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:l.encode,encodeDotInKeys:typeof p.encodeDotInKeys=="boolean"?p.encodeDotInKeys:l.encodeDotInKeys,encoder:typeof p.encoder=="function"?p.encoder:l.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:l.encodeValuesOnly,filter:x,format:b,formatter:g,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:l.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:l.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:l.strictNullHandling}};return Ab=function(m,p){var w=m,b=d(p),g,x;typeof b.filter=="function"?(x=b.filter,w=x("",w)):s(b.filter)&&(x=b.filter,g=x);var _=[];if(typeof w!="object"||w===null)return"";var G=r[b.arrayFormat],y=G==="comma"&&b.commaRoundTrip;g||(g=Object.keys(w)),b.sort&&g.sort(b.sort);for(var v=t(),O=0;O<g.length;++O){var B=g[O],Y=w[B];b.skipNulls&&Y===null||o(_,h(Y,B,G,y,b.allowEmptyArrays,b.strictNullHandling,b.skipNulls,b.encodeDotInKeys,b.encode?b.encoder:null,b.filter,b.sort,b.allowDots,b.serializeDate,b.format,b.formatter,b.encodeValuesOnly,b.charset,v))}var D=_.join(b.delimiter),N=b.addQueryPrefix===!0?"?":"";return b.charsetSentinel&&(b.charset==="iso-8859-1"?N+="utf8=%26%2310003%3B&":N+="utf8=%E2%9C%93&"),D.length>0?N+D:""},Ab}var nb,_O;function UQ(){if(_O)return nb;_O=1;var t=wO(),e=Object.prototype.hasOwnProperty,A=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},r=function(h){return h.replace(/&#(\d+);/g,function(d,m){return String.fromCharCode(parseInt(m,10))})},s=function(h,d,m){if(h&&typeof h=="string"&&d.comma&&h.indexOf(",")>-1)return h.split(",");if(d.throwOnLimitExceeded&&m>=d.arrayLimit)throw new RangeError("Array limit exceeded. Only "+d.arrayLimit+" element"+(d.arrayLimit===1?"":"s")+" allowed in an array.");return h},i="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",a=function(d,m){var p={__proto__:null},w=m.ignoreQueryPrefix?d.replace(/^\?/,""):d;w=w.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var b=m.parameterLimit===1/0?void 0:m.parameterLimit,g=w.split(m.delimiter,m.throwOnLimitExceeded?b+1:b);if(m.throwOnLimitExceeded&&g.length>b)throw new RangeError("Parameter limit exceeded. Only "+b+" parameter"+(b===1?"":"s")+" allowed.");var x=-1,_,G=m.charset;if(m.charsetSentinel)for(_=0;_<g.length;++_)g[_].indexOf("utf8=")===0&&(g[_]===o?G="utf-8":g[_]===i&&(G="iso-8859-1"),x=_,_=g.length);for(_=0;_<g.length;++_)if(_!==x){var y=g[_],v=y.indexOf("]="),O=v===-1?y.indexOf("="):v+1,B,Y;if(O===-1?(B=m.decoder(y,n.decoder,G,"key"),Y=m.strictNullHandling?null:""):(B=m.decoder(y.slice(0,O),n.decoder,G,"key"),B!==null&&(Y=t.maybeMap(s(y.slice(O+1),m,A(p[B])?p[B].length:0),function(N){return m.decoder(N,n.decoder,G,"value")}))),Y&&m.interpretNumericEntities&&G==="iso-8859-1"&&(Y=r(String(Y))),y.indexOf("[]=")>-1&&(Y=A(Y)?[Y]:Y),B!==null){var D=e.call(p,B);D&&m.duplicates==="combine"?p[B]=t.combine(p[B],Y,m.arrayLimit,m.plainObjects):(!D||m.duplicates==="last")&&(p[B]=Y)}}return p},c=function(h,d,m,p){var w=0;if(h.length>0&&h[h.length-1]==="[]"){var b=h.slice(0,-1).join("");w=Array.isArray(d)&&d[b]?d[b].length:0}for(var g=p?d:s(d,m,w),x=h.length-1;x>=0;--x){var _,G=h[x];if(G==="[]"&&m.parseArrays)t.isOverflow(g)?_=g:_=m.allowEmptyArrays&&(g===""||m.strictNullHandling&&g===null)?[]:t.combine([],g,m.arrayLimit,m.plainObjects);else{_=m.plainObjects?{__proto__:null}:{};var y=G.charAt(0)==="["&&G.charAt(G.length-1)==="]"?G.slice(1,-1):G,v=m.decodeDotInKeys?y.replace(/%2E/g,"."):y,O=parseInt(v,10);!m.parseArrays&&v===""?_={0:g}:!isNaN(O)&&G!==v&&String(O)===v&&O>=0&&m.parseArrays&&O<=m.arrayLimit?(_=[],_[O]=g):v!=="__proto__"&&(_[v]=g)}g=_}return g},l=function(d,m){var p=m.allowDots?d.replace(/\.([^.[]+)/g,"[$1]"):d;if(m.depth<=0)return!m.plainObjects&&e.call(Object.prototype,p)&&!m.allowPrototypes?void 0:[p];var w=/(\[[^[\]]*])/,b=/(\[[^[\]]*])/g,g=w.exec(p),x=g?p.slice(0,g.index):p,_=[];if(x){if(!m.plainObjects&&e.call(Object.prototype,x)&&!m.allowPrototypes)return;_.push(x)}for(var G=0;(g=b.exec(p))!==null&&G<m.depth;){G+=1;var y=g[1].slice(1,-1);if(!m.plainObjects&&e.call(Object.prototype,y)&&!m.allowPrototypes)return;_.push(g[1])}if(g){if(m.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+m.depth+" and strictDepth is true");_.push("["+p.slice(g.index)+"]")}return _},u=function(d,m,p,w){if(d){var b=l(d,p);if(b)return c(b,m,p,w)}},f=function(d){if(!d)return n;if(typeof d.allowEmptyArrays<"u"&&typeof d.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof d.decodeDotInKeys<"u"&&typeof d.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(d.decoder!==null&&typeof d.decoder<"u"&&typeof d.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof d.charset<"u"&&d.charset!=="utf-8"&&d.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof d.throwOnLimitExceeded<"u"&&typeof d.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var m=typeof d.charset>"u"?n.charset:d.charset,p=typeof d.duplicates>"u"?n.duplicates:d.duplicates;if(p!=="combine"&&p!=="first"&&p!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var w=typeof d.allowDots>"u"?d.decodeDotInKeys===!0?!0:n.allowDots:!!d.allowDots;return{allowDots:w,allowEmptyArrays:typeof d.allowEmptyArrays=="boolean"?!!d.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof d.allowPrototypes=="boolean"?d.allowPrototypes:n.allowPrototypes,allowSparse:typeof d.allowSparse=="boolean"?d.allowSparse:n.allowSparse,arrayLimit:typeof d.arrayLimit=="number"?d.arrayLimit:n.arrayLimit,charset:m,charsetSentinel:typeof d.charsetSentinel=="boolean"?d.charsetSentinel:n.charsetSentinel,comma:typeof d.comma=="boolean"?d.comma:n.comma,decodeDotInKeys:typeof d.decodeDotInKeys=="boolean"?d.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof d.decoder=="function"?d.decoder:n.decoder,delimiter:typeof d.delimiter=="string"||t.isRegExp(d.delimiter)?d.delimiter:n.delimiter,depth:typeof d.depth=="number"||d.depth===!1?+d.depth:n.depth,duplicates:p,ignoreQueryPrefix:d.ignoreQueryPrefix===!0,interpretNumericEntities:typeof d.interpretNumericEntities=="boolean"?d.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof d.parameterLimit=="number"?d.parameterLimit:n.parameterLimit,parseArrays:d.parseArrays!==!1,plainObjects:typeof d.plainObjects=="boolean"?d.plainObjects:n.plainObjects,strictDepth:typeof d.strictDepth=="boolean"?!!d.strictDepth:n.strictDepth,strictNullHandling:typeof d.strictNullHandling=="boolean"?d.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof d.throwOnLimitExceeded=="boolean"?d.throwOnLimitExceeded:!1}};return nb=function(h,d){var m=f(d);if(h===""||h===null||typeof h>"u")return m.plainObjects?{__proto__:null}:{};for(var p=typeof h=="string"?a(h,m):h,w=m.plainObjects?{__proto__:null}:{},b=Object.keys(p),g=0;g<b.length;++g){var x=b[g],_=u(x,p[x],m,typeof h=="string");w=t.merge(w,_,m)}return m.allowSparse===!0?w:t.compact(w)},nb}var rb,xO;function FQ(){if(xO)return rb;xO=1;var t=LQ(),e=UQ(),A=eb();return rb={formats:A,parse:e,stringify:t},rb}var yO;function $Q(){if(yO)return Ao;yO=1;var t=fQ();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var A=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],i=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(i),a=["%","/","?",";","#"].concat(o),c=["/","?","#"],l=255,u=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},p=FQ();function w(_,G,y){if(_&&typeof _=="object"&&_ instanceof e)return _;var v=new e;return v.parse(_,G,y),v}e.prototype.parse=function(_,G,y){if(typeof _!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _);var v=_.indexOf("?"),O=v!==-1&&v<_.indexOf("#")?"?":"#",B=_.split(O),Y=/\\/g;B[0]=B[0].replace(Y,"/"),_=B.join(O);var D=_;if(D=D.trim(),!y&&_.split("#").length===1){var N=r.exec(D);if(N)return this.path=D,this.href=D,this.pathname=N[1],N[2]?(this.search=N[2],G?this.query=p.parse(this.search.substr(1)):this.query=this.search.substr(1)):G&&(this.search="",this.query={}),this}var M=A.exec(D);if(M){M=M[0];var Z=M.toLowerCase();this.protocol=Z,D=D.substr(M.length)}if(y||M||D.match(/^\/\/[^@/]+@[^@/]+/)){var R=D.substr(0,2)==="//";R&&!(M&&d[M])&&(D=D.substr(2),this.slashes=!0)}if(!d[M]&&(R||M&&!m[M])){for(var I=-1,$=0;$<c.length;$++){var V=D.indexOf(c[$]);V!==-1&&(I===-1||V<I)&&(I=V)}var q,C;I===-1?C=D.lastIndexOf("@"):C=D.lastIndexOf("@",I),C!==-1&&(q=D.slice(0,C),D=D.slice(C+1),this.auth=decodeURIComponent(q)),I=-1;for(var $=0;$<a.length;$++){var V=D.indexOf(a[$]);V!==-1&&(I===-1||V<I)&&(I=V)}I===-1&&(I=D.length),this.host=D.slice(0,I),D=D.slice(I),this.parseHost(),this.hostname=this.hostname||"";var j=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!j)for(var te=this.hostname.split(/\./),$=0,W=te.length;$<W;$++){var J=te[$];if(J&&!J.match(u)){for(var fe="",be=0,me=J.length;be<me;be++)J.charCodeAt(be)>127?fe+="x":fe+=J[be];if(!fe.match(u)){var _e=te.slice(0,$),ke=te.slice($+1),Oe=J.match(f);Oe&&(_e.push(Oe[1]),ke.unshift(Oe[2])),ke.length&&(D="/"+ke.join(".")+D),this.hostname=_e.join(".");break}}}this.hostname.length>l?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=t.toASCII(this.hostname));var Ze=this.port?":"+this.port:"",Fe=this.hostname||"";this.host=Fe+Ze,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),D[0]!=="/"&&(D="/"+D))}if(!h[Z])for(var $=0,W=o.length;$<W;$++){var P=o[$];if(D.indexOf(P)!==-1){var X=encodeURIComponent(P);X===P&&(X=escape(P)),D=D.split(P).join(X)}}var ee=D.indexOf("#");ee!==-1&&(this.hash=D.substr(ee),D=D.slice(0,ee));var U=D.indexOf("?");if(U!==-1?(this.search=D.substr(U),this.query=D.substr(U+1),G&&(this.query=p.parse(this.query)),D=D.slice(0,U)):G&&(this.search="",this.query={}),D&&(this.pathname=D),m[Z]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ze=this.pathname||"",H=this.search||"";this.path=Ze+H}return this.href=this.format(),this};function b(_){return typeof _=="string"&&(_=w(_)),_ instanceof e?_.format():e.prototype.format.call(_)}e.prototype.format=function(){var _=this.auth||"";_&&(_=encodeURIComponent(_),_=_.replace(/%3A/i,":"),_+="@");var G=this.protocol||"",y=this.pathname||"",v=this.hash||"",O=!1,B="";this.host?O=_+this.host:this.hostname&&(O=_+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(O+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(B=p.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Y=this.search||B&&"?"+B||"";return G&&G.substr(-1)!==":"&&(G+=":"),this.slashes||(!G||m[G])&&O!==!1?(O="//"+(O||""),y&&y.charAt(0)!=="/"&&(y="/"+y)):O||(O=""),v&&v.charAt(0)!=="#"&&(v="#"+v),Y&&Y.charAt(0)!=="?"&&(Y="?"+Y),y=y.replace(/[?#]/g,function(D){return encodeURIComponent(D)}),Y=Y.replace("#","%23"),G+O+y+Y+v};function g(_,G){return w(_,!1,!0).resolve(G)}e.prototype.resolve=function(_){return this.resolveObject(w(_,!1,!0)).format()};function x(_,G){return _?w(_,!1,!0).resolveObject(G):G}return e.prototype.resolveObject=function(_){if(typeof _=="string"){var G=new e;G.parse(_,!1,!0),_=G}for(var y=new e,v=Object.keys(this),O=0;O<v.length;O++){var B=v[O];y[B]=this[B]}if(y.hash=_.hash,_.href==="")return y.href=y.format(),y;if(_.slashes&&!_.protocol){for(var Y=Object.keys(_),D=0;D<Y.length;D++){var N=Y[D];N!=="protocol"&&(y[N]=_[N])}return m[y.protocol]&&y.hostname&&!y.pathname&&(y.pathname="/",y.path=y.pathname),y.href=y.format(),y}if(_.protocol&&_.protocol!==y.protocol){if(!m[_.protocol]){for(var M=Object.keys(_),Z=0;Z<M.length;Z++){var R=M[Z];y[R]=_[R]}return y.href=y.format(),y}if(y.protocol=_.protocol,!_.host&&!d[_.protocol]){for(var W=(_.pathname||"").split("/");W.length&&!(_.host=W.shift()););_.host||(_.host=""),_.hostname||(_.hostname=""),W[0]!==""&&W.unshift(""),W.length<2&&W.unshift(""),y.pathname=W.join("/")}else y.pathname=_.pathname;if(y.search=_.search,y.query=_.query,y.host=_.host||"",y.auth=_.auth,y.hostname=_.hostname||_.host,y.port=_.port,y.pathname||y.search){var I=y.pathname||"",$=y.search||"";y.path=I+$}return y.slashes=y.slashes||_.slashes,y.href=y.format(),y}var V=y.pathname&&y.pathname.charAt(0)==="/",q=_.host||_.pathname&&_.pathname.charAt(0)==="/",C=q||V||y.host&&_.pathname,j=C,te=y.pathname&&y.pathname.split("/")||[],W=_.pathname&&_.pathname.split("/")||[],J=y.protocol&&!m[y.protocol];if(J&&(y.hostname="",y.port=null,y.host&&(te[0]===""?te[0]=y.host:te.unshift(y.host)),y.host="",_.protocol&&(_.hostname=null,_.port=null,_.host&&(W[0]===""?W[0]=_.host:W.unshift(_.host)),_.host=null),C=C&&(W[0]===""||te[0]==="")),q)y.host=_.host||_.host===""?_.host:y.host,y.hostname=_.hostname||_.hostname===""?_.hostname:y.hostname,y.search=_.search,y.query=_.query,te=W;else if(W.length)te||(te=[]),te.pop(),te=te.concat(W),y.search=_.search,y.query=_.query;else if(_.search!=null){if(J){y.host=te.shift(),y.hostname=y.host;var fe=y.host&&y.host.indexOf("@")>0?y.host.split("@"):!1;fe&&(y.auth=fe.shift(),y.hostname=fe.shift(),y.host=y.hostname)}return y.search=_.search,y.query=_.query,(y.pathname!==null||y.search!==null)&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y}if(!te.length)return y.pathname=null,y.search?y.path="/"+y.search:y.path=null,y.href=y.format(),y;for(var be=te.slice(-1)[0],me=(y.host||_.host||te.length>1)&&(be==="."||be==="..")||be==="",_e=0,ke=te.length;ke>=0;ke--)be=te[ke],be==="."?te.splice(ke,1):be===".."?(te.splice(ke,1),_e++):_e&&(te.splice(ke,1),_e--);if(!C&&!j)for(;_e--;_e)te.unshift("..");C&&te[0]!==""&&(!te[0]||te[0].charAt(0)!=="/")&&te.unshift(""),me&&te.join("/").substr(-1)!=="/"&&te.push("");var Oe=te[0]===""||te[0]&&te[0].charAt(0)==="/";if(J){y.hostname=Oe?"":te.length?te.shift():"",y.host=y.hostname;var fe=y.host&&y.host.indexOf("@")>0?y.host.split("@"):!1;fe&&(y.auth=fe.shift(),y.hostname=fe.shift(),y.host=y.hostname)}return C=C||y.host&&te.length,C&&!Oe&&te.unshift(""),te.length>0?y.pathname=te.join("/"):(y.pathname=null,y.path=null),(y.pathname!==null||y.search!==null)&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=_.auth||y.auth,y.slashes=y.slashes||_.slashes,y.href=y.format(),y},e.prototype.parseHost=function(){var _=this.host,G=n.exec(_);G&&(G=G[0],G!==":"&&(this.port=G.substr(1)),_=_.substr(0,_.length-G.length)),_&&(this.hostname=_)},Ao.parse=w,Ao.resolve=g,Ao.resolveObject=x,Ao.format=b,Ao.Url=e,Ao}var sb,GO;function VQ(){return GO||(GO=1,sb=typeof URL=="function"?URL:$Q().URL),sb}var MO;function vf(){if(MO)return Er;MO=1;const t=VQ();function e(B,Y,D){if(Y in B)return B[Y];if(arguments.length===3)return D;throw new Error('"'+Y+'" is a required argument.')}Er.getArg=e;const A=(function(){return!("__proto__"in Object.create(null))})();function n(B){return B}function r(B){return i(B)?"$"+B:B}Er.toSetString=A?n:r;function s(B){return i(B)?B.slice(1):B}Er.fromSetString=A?n:s;function i(B){if(!B)return!1;const Y=B.length;if(Y<9||B.charCodeAt(Y-1)!==95||B.charCodeAt(Y-2)!==95||B.charCodeAt(Y-3)!==111||B.charCodeAt(Y-4)!==116||B.charCodeAt(Y-5)!==111||B.charCodeAt(Y-6)!==114||B.charCodeAt(Y-7)!==112||B.charCodeAt(Y-8)!==95||B.charCodeAt(Y-9)!==95)return!1;for(let D=Y-10;D>=0;D--)if(B.charCodeAt(D)!==36)return!1;return!0}function o(B,Y){return B===Y?0:B===null?1:Y===null?-1:B>Y?1:-1}function a(B,Y){let D=B.generatedLine-Y.generatedLine;return D!==0||(D=B.generatedColumn-Y.generatedColumn,D!==0)||(D=o(B.source,Y.source),D!==0)||(D=B.originalLine-Y.originalLine,D!==0)||(D=B.originalColumn-Y.originalColumn,D!==0)?D:o(B.name,Y.name)}Er.compareByGeneratedPositionsInflated=a;function c(B){return JSON.parse(B.replace(/^\)]}'[^\n]*\n/,""))}Er.parseSourceMapInput=c;const l="http:",u=`${l}//host`;function f(B){return Y=>{const D=w(Y),N=m(Y),M=new t(Y,N);B(M);const Z=M.toString();return D==="absolute"?Z:D==="scheme-relative"?Z.slice(l.length):D==="path-absolute"?Z.slice(u.length):b(N,Z)}}function h(B,Y){return new t(B,Y).toString()}function d(B,Y){let D=0;do{const N=B+D++;if(Y.indexOf(N)===-1)return N}while(!0)}function m(B){const Y=B.split("..").length-1,D=d("p",B);let N=`${u}/`;for(let M=0;M<Y;M++)N+=`${D}/`;return N}const p=/^[A-Za-z0-9\+\-\.]+:/;function w(B){return B[0]==="/"?B[1]==="/"?"scheme-relative":"path-absolute":p.test(B)?"absolute":"path-relative"}function b(B,Y){typeof B=="string"&&(B=new t(B)),typeof Y=="string"&&(Y=new t(Y));const D=Y.pathname.split("/"),N=B.pathname.split("/");for(N.length>0&&!N[N.length-1]&&N.pop();D.length>0&&N.length>0&&D[0]===N[0];)D.shift(),N.shift();return N.map(()=>"..").concat(D).join("/")+Y.search+Y.hash}const g=f(B=>{B.pathname=B.pathname.replace(/\/?$/,"/")}),x=f(B=>{B.href=new t(".",B.toString()).toString()}),_=f(B=>{});Er.normalize=_;function G(B,Y){const D=w(Y),N=w(B);if(B=g(B),D==="absolute")return h(Y,void 0);if(N==="absolute")return h(Y,B);if(D==="scheme-relative")return _(Y);if(N==="scheme-relative")return h(Y,h(B,u)).slice(l.length);if(D==="path-absolute")return _(Y);if(N==="path-absolute")return h(Y,h(B,u)).slice(u.length);const M=m(Y+B),Z=h(Y,h(B,M));return b(M,Z)}Er.join=G;function y(B,Y){const D=v(B,Y);return typeof D=="string"?D:_(Y)}Er.relative=y;function v(B,Y){if(w(B)!==w(Y))return null;const N=m(B+Y),M=new t(B,N),Z=new t(Y,N);try{new t("",Z.toString())}catch{return null}return Z.protocol!==M.protocol||Z.user!==M.user||Z.password!==M.password||Z.hostname!==M.hostname||Z.port!==M.port?null:b(M,Z)}function O(B,Y,D){B&&w(Y)==="path-absolute"&&(Y=Y.replace(/^\//,""));let N=_(Y||"");return B&&(N=G(B,N)),D&&(N=G(x(D),N)),N}return Er.computeSourceURL=O,Er}var ib={},vO;function DO(){if(vO)return ib;vO=1;class t{constructor(){this._array=[],this._set=new Map}static fromArray(A,n){const r=new t;for(let s=0,i=A.length;s<i;s++)r.add(A[s],n);return r}size(){return this._set.size}add(A,n){const r=this.has(A),s=this._array.length;(!r||n)&&this._array.push(A),r||this._set.set(A,s)}has(A){return this._set.has(A)}indexOf(A){const n=this._set.get(A);if(n>=0)return n;throw new Error('"'+A+'" is not in the set.')}at(A){if(A>=0&&A<this._array.length)return this._array[A];throw new Error("No element indexed by "+A)}toArray(){return this._array.slice()}}return ib.ArraySet=t,ib}var ob={},BO;function qQ(){if(BO)return ob;BO=1;const t=vf();function e(n,r){const s=n.generatedLine,i=r.generatedLine,o=n.generatedColumn,a=r.generatedColumn;return i>s||i==s&&a>=o||t.compareByGeneratedPositionsInflated(n,r)<=0}class A{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(r,s){this._array.forEach(r,s)}add(r){e(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))}toArray(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}return ob.MappingList=A,ob}var kO;function EO(){if(kO)return aw;kO=1;const t=bT(),e=vf(),A=DO().ArraySet,n=qQ().MappingList;class r{constructor(i){i||(i={}),this._file=e.getArg(i,"file",null),this._sourceRoot=e.getArg(i,"sourceRoot",null),this._skipValidation=e.getArg(i,"skipValidation",!1),this._sources=new A,this._names=new A,this._mappings=new n,this._sourcesContents=null}static fromSourceMap(i){const o=i.sourceRoot,a=new r({file:i.file,sourceRoot:o});return i.eachMapping(function(c){const l={generated:{line:c.generatedLine,column:c.generatedColumn}};c.source!=null&&(l.source=c.source,o!=null&&(l.source=e.relative(o,l.source)),l.original={line:c.originalLine,column:c.originalColumn},c.name!=null&&(l.name=c.name)),a.addMapping(l)}),i.sources.forEach(function(c){let l=c;o!=null&&(l=e.relative(o,c)),a._sources.has(l)||a._sources.add(l);const u=i.sourceContentFor(c);u!=null&&a.setSourceContent(c,u)}),a}addMapping(i){const o=e.getArg(i,"generated"),a=e.getArg(i,"original",null);let c=e.getArg(i,"source",null),l=e.getArg(i,"name",null);this._skipValidation||this._validateMapping(o,a,c,l),c!=null&&(c=String(c),this._sources.has(c)||this._sources.add(c)),l!=null&&(l=String(l),this._names.has(l)||this._names.add(l)),this._mappings.add({generatedLine:o.line,generatedColumn:o.column,originalLine:a&&a.line,originalColumn:a&&a.column,source:c,name:l})}setSourceContent(i,o){let a=i;this._sourceRoot!=null&&(a=e.relative(this._sourceRoot,a)),o!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(a)]=o):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(a)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(i,o,a){let c=o;if(o==null){if(i.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);c=i.file}const l=this._sourceRoot;l!=null&&(c=e.relative(l,c));const u=this._mappings.toArray().length>0?new A:this._sources,f=new A;this._mappings.unsortedForEach(function(h){if(h.source===c&&h.originalLine!=null){const p=i.originalPositionFor({line:h.originalLine,column:h.originalColumn});p.source!=null&&(h.source=p.source,a!=null&&(h.source=e.join(a,h.source)),l!=null&&(h.source=e.relative(l,h.source)),h.originalLine=p.line,h.originalColumn=p.column,p.name!=null&&(h.name=p.name))}const d=h.source;d!=null&&!u.has(d)&&u.add(d);const m=h.name;m!=null&&!f.has(m)&&f.add(m)},this),this._sources=u,this._names=f,i.sources.forEach(function(h){const d=i.sourceContentFor(h);d!=null&&(a!=null&&(h=e.join(a,h)),l!=null&&(h=e.relative(l,h)),this.setSourceContent(h,d))},this)}_validateMapping(i,o,a,c){if(o&&typeof o.line!="number"&&typeof o.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(i&&"line"in i&&"column"in i&&i.line>0&&i.column>=0&&!o&&!a&&!c)){if(!(i&&"line"in i&&"column"in i&&o&&"line"in o&&"column"in o&&i.line>0&&i.column>=0&&o.line>0&&o.column>=0&&a))throw new Error("Invalid mapping: "+JSON.stringify({generated:i,source:a,original:o,name:c}))}}_serializeMappings(){let i=0,o=1,a=0,c=0,l=0,u=0,f="",h,d,m,p;const w=this._mappings.toArray();for(let b=0,g=w.length;b<g;b++){if(d=w[b],h="",d.generatedLine!==o)for(i=0;d.generatedLine!==o;)h+=";",o++;else if(b>0){if(!e.compareByGeneratedPositionsInflated(d,w[b-1]))continue;h+=","}h+=t.encode(d.generatedColumn-i),i=d.generatedColumn,d.source!=null&&(p=this._sources.indexOf(d.source),h+=t.encode(p-u),u=p,h+=t.encode(d.originalLine-1-c),c=d.originalLine-1,h+=t.encode(d.originalColumn-a),a=d.originalColumn,d.name!=null&&(m=this._names.indexOf(d.name),h+=t.encode(m-l),l=m)),f+=h}return f}_generateSourcesContent(i,o){return i.map(function(a){if(!this._sourcesContents)return null;o!=null&&(a=e.relative(o,a));const c=e.toSetString(a);return Object.prototype.hasOwnProperty.call(this._sourcesContents,c)?this._sourcesContents[c]:null},this)}toJSON(){const i={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(i.file=this._file),this._sourceRoot!=null&&(i.sourceRoot=this._sourceRoot),this._sourcesContents&&(i.sourcesContent=this._generateSourcesContent(i.sources,i.sourceRoot)),i}toString(){return JSON.stringify(this.toJSON())}}return r.prototype._version=3,aw.SourceMapGenerator=r,aw}var Yl={},ab={},NO;function WQ(){return NO||(NO=1,(function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function e(A,n,r,s,i,o){const a=Math.floor((n-A)/2)+A,c=i(r,s[a],!0);return c===0?a:c>0?n-a>1?e(a,n,r,s,i,o):o===t.LEAST_UPPER_BOUND?n<s.length?n:-1:a:a-A>1?e(A,a,r,s,i,o):o==t.LEAST_UPPER_BOUND?a:A<0?-1:A}t.search=function(n,r,s,i){if(r.length===0)return-1;let o=e(-1,r.length,n,r,s,i||t.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&s(r[o],r[o-1],!0)===0;)--o;return o}})(ab)),ab}var Df={exports:{}},TO;function OO(){if(TO)return Df.exports;TO=1;let t=null;return Df.exports=function(){if(typeof t=="string")return fetch(t).then(A=>A.arrayBuffer());if(t instanceof ArrayBuffer)return Promise.resolve(t);throw new Error("You must provide the string URL or ArrayBuffer contents of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer")},Df.exports.initialize=e=>{t=e},Df.exports}var cb,YO;function QQ(){if(YO)return cb;YO=1;const t=OO();function e(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}let A=null;return cb=function(){if(A)return A;const r=[];return A=t().then(s=>WebAssembly.instantiate(s,{env:{mapping_callback(i,o,a,c,l,u,f,h,d,m){const p=new e;p.generatedLine=i+1,p.generatedColumn=o,a&&(p.lastGeneratedColumn=c-1),l&&(p.source=u,p.originalLine=f+1,p.originalColumn=h,d&&(p.name=m)),r[r.length-1](p)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(s=>({exports:s.instance.exports,withMappingCallback:(i,o)=>{r.push(i);try{o()}finally{r.pop()}}})).then(null,s=>{throw A=null,s}),A},cb}var SO;function KQ(){if(SO)return Yl;SO=1;const t=vf(),e=WQ(),A=DO().ArraySet;bT();const n=OO(),r=QQ(),s=Symbol("smcInternal");class i{constructor(f,h){return f==s?Promise.resolve(this):c(f,h)}static initialize(f){n.initialize(f["lib/mappings.wasm"])}static fromSourceMap(f,h){return l(f,h)}static async with(f,h,d){const m=await new i(f,h);try{return await d(m)}finally{m.destroy()}}eachMapping(f,h,d){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(f){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}}i.prototype._version=3,i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,Yl.SourceMapConsumer=i;class o extends i{constructor(f,h){return super(s).then(d=>{let m=f;typeof f=="string"&&(m=t.parseSourceMapInput(f));const p=t.getArg(m,"version"),w=t.getArg(m,"sources").map(String),b=t.getArg(m,"names",[]),g=t.getArg(m,"sourceRoot",null),x=t.getArg(m,"sourcesContent",null),_=t.getArg(m,"mappings"),G=t.getArg(m,"file",null),y=t.getArg(m,"x_google_ignoreList",null);if(p!=d._version)throw new Error("Unsupported version: "+p);return d._sourceLookupCache=new Map,d._names=A.fromArray(b.map(String),!0),d._sources=A.fromArray(w,!0),d._absoluteSources=A.fromArray(d._sources.toArray().map(function(v){return t.computeSourceURL(g,v,h)}),!0),d.sourceRoot=g,d.sourcesContent=x,d._mappings=_,d._sourceMapURL=h,d.file=G,d.x_google_ignoreList=y,d._computedColumnSpans=!1,d._mappingsPtr=0,d._wasm=null,r().then(v=>(d._wasm=v,d))})}_findSourceIndex(f){const h=this._sourceLookupCache.get(f);if(typeof h=="number")return h;const d=t.computeSourceURL(null,f,this._sourceMapURL);if(this._absoluteSources.has(d)){const p=this._absoluteSources.indexOf(d);return this._sourceLookupCache.set(f,p),p}const m=t.computeSourceURL(this.sourceRoot,f,this._sourceMapURL);if(this._absoluteSources.has(m)){const p=this._absoluteSources.indexOf(m);return this._sourceLookupCache.set(f,p),p}return-1}static fromSourceMap(f,h){return new o(f.toString())}get sources(){return this._absoluteSources.toArray()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(),this._mappingsPtr}_parseMappings(){const f=this._mappings,h=f.length,d=this._wasm.exports.allocate_mappings(h)>>>0,m=new Uint8Array(this._wasm.exports.memory.buffer,d,h);for(let w=0;w<h;w++)m[w]=f.charCodeAt(w);const p=this._wasm.exports.parse_mappings(d);if(!p){const w=this._wasm.exports.get_last_error();let b=`Error parsing mappings (code ${w}): `;switch(w){case 1:b+="the mappings contained a negative line, column, source index, or name index";break;case 2:b+="the mappings contained a number larger than 2**32";break;case 3:b+="reached EOF while in the middle of parsing a VLQ";break;case 4:b+="invalid base 64 character while parsing a VLQ";break;default:b+="unknown error code";break}throw new Error(b)}this._mappingsPtr=p}eachMapping(f,h,d){const m=h||null,p=d||i.GENERATED_ORDER;this._wasm.withMappingCallback(w=>{w.source!==null&&(w.source=this._absoluteSources.at(w.source),w.name!==null&&(w.name=this._names.at(w.name))),this._computedColumnSpans&&w.lastGeneratedColumn===null&&(w.lastGeneratedColumn=1/0),f.call(m,w)},()=>{switch(p){case i.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case i.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(f){let h=t.getArg(f,"source");const d=t.getArg(f,"line"),m=f.column||0;if(h=this._findSourceIndex(h),h<0)return[];if(d<1)throw new Error("Line numbers must be >= 1");if(m<0)throw new Error("Column numbers must be >= 0");const p=[];return this._wasm.withMappingCallback(w=>{let b=w.lastGeneratedColumn;this._computedColumnSpans&&b===null&&(b=1/0),p.push({line:w.generatedLine,column:w.generatedColumn,lastColumn:b})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),h,d-1,"column"in f,m)}),p}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(f){const h={generatedLine:t.getArg(f,"line"),generatedColumn:t.getArg(f,"column")};if(h.generatedLine<1)throw new Error("Line numbers must be >= 1");if(h.generatedColumn<0)throw new Error("Column numbers must be >= 0");let d=t.getArg(f,"bias",i.GREATEST_LOWER_BOUND);d==null&&(d=i.GREATEST_LOWER_BOUND);let m;if(this._wasm.withMappingCallback(p=>m=p,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),h.generatedLine-1,h.generatedColumn,d)}),m&&m.generatedLine===h.generatedLine){let p=t.getArg(m,"source",null);p!==null&&(p=this._absoluteSources.at(p));let w=t.getArg(m,"name",null);return w!==null&&(w=this._names.at(w)),{source:p,line:t.getArg(m,"originalLine",null),column:t.getArg(m,"originalColumn",null),name:w}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(f){return f==null}):!1}sourceContentFor(f,h){if(!this.sourcesContent)return null;const d=this._findSourceIndex(f);if(d>=0)return this.sourcesContent[d];if(h)return null;throw new Error('"'+f+'" is not in the SourceMap.')}generatedPositionFor(f){let h=t.getArg(f,"source");if(h=this._findSourceIndex(h),h<0)return{line:null,column:null,lastColumn:null};const d={source:h,originalLine:t.getArg(f,"line"),originalColumn:t.getArg(f,"column")};if(d.originalLine<1)throw new Error("Line numbers must be >= 1");if(d.originalColumn<0)throw new Error("Column numbers must be >= 0");let m=t.getArg(f,"bias",i.GREATEST_LOWER_BOUND);m==null&&(m=i.GREATEST_LOWER_BOUND);let p;if(this._wasm.withMappingCallback(w=>p=w,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),d.source,d.originalLine-1,d.originalColumn,m)}),p&&p.source===d.source){let w=p.lastGeneratedColumn;return this._computedColumnSpans&&w===null&&(w=1/0),{line:t.getArg(p,"generatedLine",null),column:t.getArg(p,"generatedColumn",null),lastColumn:w}}return{line:null,column:null,lastColumn:null}}}o.prototype.consumer=i,Yl.BasicSourceMapConsumer=o;class a extends i{constructor(f,h){return super(s).then(d=>{let m=f;typeof f=="string"&&(m=t.parseSourceMapInput(f));const p=t.getArg(m,"version"),w=t.getArg(m,"sections");if(p!=d._version)throw new Error("Unsupported version: "+p);let b={line:-1,column:0};return Promise.all(w.map(g=>{if(g.url)throw new Error("Support for url field in sections not implemented.");const x=t.getArg(g,"offset"),_=t.getArg(x,"line"),G=t.getArg(x,"column");if(_<b.line||_===b.line&&G<b.column)throw new Error("Section offsets must be ordered and non-overlapping.");return b=x,new i(t.getArg(g,"map"),h).then(v=>({generatedOffset:{generatedLine:_+1,generatedColumn:G+1},consumer:v}))})).then(g=>(d._sections=g,d))})}get sources(){const f=[];for(let h=0;h<this._sections.length;h++)for(let d=0;d<this._sections[h].consumer.sources.length;d++)f.push(this._sections[h].consumer.sources[d]);return f}originalPositionFor(f){const h={generatedLine:t.getArg(f,"line"),generatedColumn:t.getArg(f,"column")},d=e.search(h,this._sections,function(p,w){const b=p.generatedLine-w.generatedOffset.generatedLine;return b||p.generatedColumn-(w.generatedOffset.generatedColumn-1)}),m=this._sections[d];return m?m.consumer.originalPositionFor({line:h.generatedLine-(m.generatedOffset.generatedLine-1),column:h.generatedColumn-(m.generatedOffset.generatedLine===h.generatedLine?m.generatedOffset.generatedColumn-1:0),bias:f.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(f){return f.consumer.hasContentsOfAllSources()})}sourceContentFor(f,h){for(let d=0;d<this._sections.length;d++){const p=this._sections[d].consumer.sourceContentFor(f,!0);if(p)return p}if(h)return null;throw new Error('"'+f+'" is not in the SourceMap.')}_findSectionIndex(f){for(let h=0;h<this._sections.length;h++){const{consumer:d}=this._sections[h];if(d._findSourceIndex(f)!==-1)return h}return-1}generatedPositionFor(f){const h=this._findSectionIndex(t.getArg(f,"source")),d=h>=0?this._sections[h]:null,m=h>=0&&h+1<this._sections.length?this._sections[h+1]:null,p=d&&d.consumer.generatedPositionFor(f);if(p&&p.line!==null){const w=d.generatedOffset.generatedLine-1,b=d.generatedOffset.generatedColumn-1;return p.line===1&&(p.column+=b,typeof p.lastColumn=="number"&&(p.lastColumn+=b)),p.lastColumn===1/0&&m&&p.line===m.generatedOffset.generatedLine&&(p.lastColumn=m.generatedOffset.generatedColumn-2),p.line+=w,p}return{line:null,column:null,lastColumn:null}}allGeneratedPositionsFor(f){const h=this._findSectionIndex(t.getArg(f,"source")),d=h>=0?this._sections[h]:null,m=h>=0&&h+1<this._sections.length?this._sections[h+1]:null;return d?d.consumer.allGeneratedPositionsFor(f).map(p=>{const w=d.generatedOffset.generatedLine-1,b=d.generatedOffset.generatedColumn-1;return p.line===1&&(p.column+=b,typeof p.lastColumn=="number"&&(p.lastColumn+=b)),p.lastColumn===1/0&&m&&p.line===m.generatedOffset.generatedLine&&(p.lastColumn=m.generatedOffset.generatedColumn-2),p.line+=w,p}):[]}eachMapping(f,h,d){this._sections.forEach((m,p)=>{const w=p+1<this._sections.length?this._sections[p+1]:null,{generatedOffset:b}=m,g=b.generatedLine-1,x=b.generatedColumn-1;m.consumer.eachMapping(function(_){_.generatedLine===1&&(_.generatedColumn+=x,typeof _.lastGeneratedColumn=="number"&&(_.lastGeneratedColumn+=x)),_.lastGeneratedColumn===1/0&&w&&_.generatedLine===w.generatedOffset.generatedLine&&(_.lastGeneratedColumn=w.generatedOffset.generatedColumn-2),_.generatedLine+=g,f.call(this,_)},h,d)})}computeColumnSpans(){for(let f=0;f<this._sections.length;f++)this._sections[f].consumer.computeColumnSpans()}destroy(){for(let f=0;f<this._sections.length;f++)this._sections[f].consumer.destroy()}}Yl.IndexedSourceMapConsumer=a;function c(u,f){let h=u;typeof u=="string"&&(h=t.parseSourceMapInput(u));const d=h.sections!=null?new a(h,f):new o(h,f);return Promise.resolve(d)}function l(u,f){return o.fromSourceMap(u,f)}return Yl}var lb={},CO;function JQ(){if(CO)return lb;CO=1;const t=EO().SourceMapGenerator,e=vf(),A=/(\r?\n)/,n=10,r="$$$isSourceNode$$$";class s{constructor(o,a,c,l,u){this.children=[],this.sourceContents={},this.line=o??null,this.column=a??null,this.source=c??null,this.name=u??null,this[r]=!0,l!=null&&this.add(l)}static fromStringWithSourceMap(o,a,c){const l=new s,u=o.split(A);let f=0;const h=function(){const g=_(),x=_()||"";return g+x;function _(){return f<u.length?u[f++]:void 0}};let d=1,m=0,p=null,w;return a.eachMapping(function(g){if(p!==null)if(d<g.generatedLine)b(p,h()),d++,m=0;else{w=u[f]||"";const x=w.substr(0,g.generatedColumn-m);u[f]=w.substr(g.generatedColumn-m),m=g.generatedColumn,b(p,x),p=g;return}for(;d<g.generatedLine;)l.add(h()),d++;m<g.generatedColumn&&(w=u[f]||"",l.add(w.substr(0,g.generatedColumn)),u[f]=w.substr(g.generatedColumn),m=g.generatedColumn),p=g},this),f<u.length&&(p&&b(p,h()),l.add(u.splice(f).join(""))),a.sources.forEach(function(g){const x=a.sourceContentFor(g);x!=null&&(c!=null&&(g=e.join(c,g)),l.setSourceContent(g,x))}),l;function b(g,x){if(g===null||g.source===void 0)l.add(x);else{const _=c?e.join(c,g.source):g.source;l.add(new s(g.originalLine,g.originalColumn,_,x,g.name))}}}add(o){if(Array.isArray(o))o.forEach(function(a){this.add(a)},this);else if(o[r]||typeof o=="string")o&&this.children.push(o);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+o);return this}prepend(o){if(Array.isArray(o))for(let a=o.length-1;a>=0;a--)this.prepend(o[a]);else if(o[r]||typeof o=="string")this.children.unshift(o);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+o);return this}walk(o){let a;for(let c=0,l=this.children.length;c<l;c++)a=this.children[c],a[r]?a.walk(o):a!==""&&o(a,{source:this.source,line:this.line,column:this.column,name:this.name})}join(o){let a,c;const l=this.children.length;if(l>0){for(a=[],c=0;c<l-1;c++)a.push(this.children[c]),a.push(o);a.push(this.children[c]),this.children=a}return this}replaceRight(o,a){const c=this.children[this.children.length-1];return c[r]?c.replaceRight(o,a):typeof c=="string"?this.children[this.children.length-1]=c.replace(o,a):this.children.push("".replace(o,a)),this}setSourceContent(o,a){this.sourceContents[e.toSetString(o)]=a}walkSourceContents(o){for(let c=0,l=this.children.length;c<l;c++)this.children[c][r]&&this.children[c].walkSourceContents(o);const a=Object.keys(this.sourceContents);for(let c=0,l=a.length;c<l;c++)o(e.fromSetString(a[c]),this.sourceContents[a[c]])}toString(){let o="";return this.walk(function(a){o+=a}),o}toStringWithSourceMap(o){const a={code:"",line:1,column:0},c=new t(o);let l=!1,u=null,f=null,h=null,d=null;return this.walk(function(m,p){a.code+=m,p.source!==null&&p.line!==null&&p.column!==null?((u!==p.source||f!==p.line||h!==p.column||d!==p.name)&&c.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:a.line,column:a.column},name:p.name}),u=p.source,f=p.line,h=p.column,d=p.name,l=!0):l&&(c.addMapping({generated:{line:a.line,column:a.column}}),u=null,l=!1);for(let w=0,b=m.length;w<b;w++)m.charCodeAt(w)===n?(a.line++,a.column=0,w+1===b?(u=null,l=!1):l&&c.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:a.line,column:a.column},name:p.name})):a.column++}),this.walkSourceContents(function(m,p){c.setSourceContent(m,p)}),{code:a.code,map:c}}}return lb.SourceNode=s,lb}var PO;function XQ(){return PO||(PO=1,Tl.SourceMapGenerator=EO().SourceMapGenerator,Tl.SourceMapConsumer=KQ().SourceMapConsumer,Tl.SourceNode=JQ().SourceNode),Tl}var e9=XQ();const t9=navigator.userAgent.includes("Mac");navigator.userAgent.includes("Linux"),navigator.userAgent.includes("Firefox")||navigator.userAgent.includes("FxiOS");const A9=t9?"cmd":"ctrl",n9=zc(32,126).map(t=>String.fromCharCode(t)),r9=nn({name:"Whitespace",pattern:/ +/}),s9=nn({name:"WhitespaceSkipped",pattern:/ +/,group:SA.SKIPPED}),ub=nn({name:"Newline",line_breaks:!0,start_chars_hint:[`
`,"\r"],pattern:/\n|\r\n?/}),ZO=nn({name:"StringLiteral",pattern:/[^ $;\r\n]+/,start_chars_hint:n9}),hb=nn({name:"StringLiteralDouble",pattern:/"(?:[^\\"]|\\(?:[^\n\r]|u[0-9a-fA-F]{4}))*"/}),fb=nn({name:"EscapedDollar",pattern:"$$",start_chars_hint:["$"]}),Bf=nn({name:"MaybeFlag",pattern:/\$[^-0-9"!;@#/?\s]+[^-"!;@#/?\s]*/,start_chars_hint:["$"]}),db=nn({name:"Center",pattern:/\$CENTER/i,start_chars_hint:["$"]}),mb=nn({name:"MetaKey",pattern:/\$META/i,start_chars_hint:["$"]}),pb=nn({name:"NumberLiteral",pattern:/\$-?(\d*\.)?\d+([eE][+-]?\d+)?[jJ]?[lL]?\+?/}),IO=nn({name:"HyperLinkText",pattern:/;[^;\r\n]*/,start_chars_hint:[";"]});function i9(t,e=""){return nn({name:e||t,pattern:new RegExp(t.toLowerCase(),"i")})}const RO=Object.keys(Lc).map(t=>i9(`\\$(${t})`,t)),o9=[r9,ub,...RO,hb,ZO,pb,fb,IO,db,mb,Bf],a9=new SA(o9,{skipValidations:!Kr,ensureOptimizations:Kr}),c9=new SA([s9,ub,...RO,hb,ZO,pb,fb,IO,db,mb,Bf],{skipValidations:!Kr,ensureOptimizations:Kr}),jO=/\$CENTER/i;function l9(t){if(jO.test(t))return t.replace(jO,"")}function kf(t,e=!1){return e?c9.tokenize(t):a9.tokenize(t)}function zO(t,e,A,n,r,s,i,o){return{disablewrap:!1,measureonly:!1,measuredwidth:0,writefullwidth:void 0,x:0,y:0,iseven:!0,active:{color:A,bg:n,topedge:r,leftedge:s,rightedge:i,bottomedge:o},reset:{color:A,bg:n,topedge:r,leftedge:s,rightedge:i,bottomedge:o},width:t,height:e,char:[],color:[],bg:[],changed(){}}}function u9(t){t.active={...t.reset}}function HO(t,e){const A=e.y;function n(){++e.x;const o=e.active.rightedge??e.width-1;!e.disablewrap&&e.x>o&&(e.x=e.active.leftedge??0,++e.y),e.x>e.measuredwidth&&(e.measuredwidth=e.x)}function r(){return e.x>=(e.active.leftedge??0)&&e.x<=(e.active.rightedge??e.width-1)&&e.y>=(e.active.topedge??0)&&e.y<=(e.active.bottomedge??e.height-1)}function s(o){for(let a=0;a<o.length;++a){if(e.measureonly!==!0&&r()){const c=e.x+e.y*e.width;e.char[c]=o.charCodeAt(a),e.active.color!==void 0&&(e.color[c]=e.active.color),e.active.bg!==void 0&&(e.bg[c]=e.active.bg)}n()}}for(let o=0;o<t.length;++o){const a=t[o];switch(a.tokenType){case fb:s("$");break;case pb:if(e.measureonly!==!0&&r()){const c=e.x+e.y*e.width;e.char[c]=parseFloat(a.image.replace("$","")),e.active.color!==void 0&&(e.color[c]=e.active.color),e.active.bg!==void 0&&(e.bg[c]=e.active.bg)}n();break;case hb:s(a.image.substring(1,a.image.length-1).replaceAll('\\"','"'));break;case ub:{e.x=e.active.leftedge??0,++e.y;break}case db:break;case mb:{s(A9);break}default:{const c=a.tokenType.name,l=Lc[c],u=ZR(Xe[l]),f=Lp(Xe[l]);l==="ONCLEAR"?(e.active.color=e.reset.color,e.active.bg=e.reset.bg):E(u)?e.active.color=u:E(f)?e.active.bg=f:s(a.image);break}}}e.x>e.measuredwidth&&(e.measuredwidth=e.x+1);const i=e.active.leftedge??0;if(E(e.writefullwidth)&&(e.x>i||e.y===A)){const a=(e.active.rightedge??e.width-1)-e.x;if(a>0){u9(e);const c=String.fromCharCode(e.writefullwidth).repeat(a),l=e.x+e.y*e.width;m9(l,l+c.length,e.active.color,e.active.bg,e),d9(l,c,e)}}}function h9(t,e,A){const n=kf(t);n.tokens&&(HO(n.tokens,e),e.changed())}function f9(t,e,A){const n=kf(t);if(!n.tokens)return;const r=zO(e,A,Xe.WHITE,Xe.BLACK);return r.measureonly=!0,HO(n.tokens,r),r.x>0&&++r.y,r}function d9(t,e,A){let n=0;const r=t+e.length;for(let s=t;s<r;++s)A.char[s]=e.charCodeAt(n++);A.changed()}function m9(t,e,A,n,r){const s=Math.min(t,e),i=Math.max(t,e);for(let o=s;o<=i;++o)r.color[o]=A,r.bg[o]=n;r.changed()}const En={labels:{},internal:0,lineindex:0,linelookup:{},isfirststat:!1},Ef="zss.js";function mt(t,e){return new e9.SourceNode(t.startLine??1,t.startColumn??1,Ef,e)}function gb(t){return t.replace(/\\/g,"\\\\").replace(/'/g,"\\'")}function Nf(t){return`'${gb(t)}'`}function wb(t){const e=kf(t);return e.errors.length?t:`['${e.tokens.map(n=>{if(n.tokenType===Bf){const r=gb(n.image.substring(1));return je(r)==="center"?"$CENTER":`', api.print(api.get('${r}')), '`}return gb(n.image)}).join("")}'].join('')`}function Sl(t){return t.filter(e=>e!==void 0).map(yt)}function LO(t){return mt(t,"")}function p9(t,e){const A=[];return t.forEach(n=>{A.push(n,e)}),A.pop(),A}function TA(t,e,A){return mt(t,[`api.${e}(`,...p9(A,", "),")"])}function g9(t){if(t.type===Pe.COMPARE&&t.compare.type===Pe.COMPARE_ITEM)switch(t.compare.method){case to.IS_EQ:return TA(t,"isEq",[yt(t.lhs),yt(t.rhs)]);case to.IS_NOT_EQ:return TA(t,"isNotEq",[yt(t.lhs),yt(t.rhs)]);case to.IS_LESS_THAN:return TA(t,"isLessThan",[yt(t.lhs),yt(t.rhs)]);case to.IS_GREATER_THAN:return TA(t,"isGreaterThan",[yt(t.lhs),yt(t.rhs)]);case to.IS_LESS_THAN_OR_EQ:return TA(t,"isLessThanOrEq",[yt(t.lhs),yt(t.rhs)]);case to.IS_GREATER_THAN_OR_EQ:return TA(t,"isGreaterThanOrEq",[yt(t.lhs),yt(t.rhs)])}return mt(t,"")}function no(t,e,A){return t.prepend(`api.${e}(`),t.add([", ",yt(A),")"])}function UO(t,e,A){return t.prepend(`api.${e}(`),t.add([yt(A),")"])}function w9(t,e){if(t.type===Pe.OPERATOR_ITEM)switch(t.operator){case ns.PLUS:return no(e,"opPlus",t.rhs);case ns.MINUS:return no(e,"opMinus",t.rhs);case ns.POWER:return no(e,"opPower",t.rhs);case ns.MULTIPLY:return no(e,"opMultiply",t.rhs);case ns.DIVIDE:return no(e,"opDivide",t.rhs);case ns.MOD_DIVIDE:return no(e,"opModDivide",t.rhs);case ns.FLOOR_DIVIDE:return no(e,"opFloorDivide",t.rhs);case ns.UNI_PLUS:return UO(e,"opUniPlus",t.rhs);case ns.UNI_MINUS:return UO(e,"opUniMinus",t.rhs)}return mt(t,"")}function b9(t){if(t.type===Pe.OPERATOR){const e=t.lhs?yt(t.lhs):mt(t,"");return t.items.forEach(A=>w9(A,e)),e}return mt(t,"")}function Tf(t,e){return mt(t,[TA(t,"jump",[`${e}`]),"; continue;"])}function Ds(t){return En.linelookup[t??""]??-1}function bb(t,e){En.linelookup[t]=e}function la(t,e,A){for(let n=0;n<t.length;++n){const r=t[n];switch(r.type){case Pe.WHILE:case Pe.REPEAT:case Pe.FOREACH:case Pe.ELSE_IF:r.type===e&&(r.done=A);break;case Pe.IF_BLOCK:case Pe.IF_CHECK:r.type===e&&(r.skip=A);break;case Pe.LINE:la(r.stmts,e,A);break}}}function FO(t,e,A){for(let n=0;n<t.length;++n){const r=t[n];switch(r.type){case Pe.WHILE:case Pe.REPEAT:case Pe.FOREACH:case Pe.ELSE_IF:r.type===e&&bb(r.done,A);break;case Pe.IF_BLOCK:case Pe.IF_CHECK:r.type===e&&bb(r.skip,A);break;case Pe.LINE:FO(r.stmts,e,A);break}}}function yt(t){switch(t.type){case Pe.PROGRAM:return mt(t,[`try { // first-line
`,`while (true) {
`,`if (api.sy()) { return 1; }
`,`switch (api.getcase()) {
`,...t.lines.map(yt).flat(),`default:
`,`  return 0;
`,`}
`,`api.nextcase();
`,`} // end of logic
`,`} catch (e) {
`,`console.error(e);
`,`const source = api.stacktrace(e);
`,`const err = new Error(e.message);
`,`err.name = 'GameError';
`,`err.meta = { line: source.line, column: source.column };
`,`throw err;
`,`}
`,`//# sourceURL=${Ef}`]);case Pe.API:return mt(t,["  ",TA(t,t.method,Sl(t.words)),`;
`]);case Pe.LINE:return mt(t,[`case ${t.lineindex}:
`,...t.stmts.map(yt).flat(),`  break;
`]);case Pe.MARK:return mt(t,`  // ${t.comment}
`);case Pe.GOTO:{const e=Ds(t.id);return mt(t,["  ",Tf(t,e),`
`])}case Pe.COUNT:return mt(t,`${t.index}`);case Pe.LITERAL:switch(t.literal){case yf.NUMBER:return mt(t,`${t.value}`);case yf.STRING:return mt(t,Nf(t.value));case yf.TEMPLATE:return mt(t,wb(t.value))}return LO(t);case Pe.TEXT:return mt(t,["  ",TA(t,"text",[wb(t.value)]),`;
`]);case Pe.STAT:if(En.isfirststat){En.isfirststat=!1;const e=t.value.trim().split(" ").map(Nf);return mt(t,["  ",TA(t,"stat",e),`;
`])}return mt(t,`  // skipped ${t.value}
`);case Pe.LABEL:{const e=je(t.name),A=t.active?"label":"comment";En.labels[e]||(En.labels[e]=[]);const n=(t.active?1:-1)*t.lineindex;return En.labels[e].push(n),mt(t,`  // ${n} '${e}' ${A}
`)}case Pe.HYPERLINK:return mt(t,["  ",TA(t,"hyperlink",[wb(t.text),...t.link.split(" ").filter(e=>e.length>0).map(Nf)]),`;
`]);case Pe.MOVE:{const e=TA(t,"command",[Nf("go"),Sl(t.words)].flat());return t.wait?mt(t,["  if (",e,`) { continue; };
`]):mt(t,["  ",e,`;
`])}case Pe.COMMAND:return mt(t,["  if (",TA(t,"command",Sl(t.words)),`) { continue; };
`]);case Pe.IF:{const e=t.block?.type===Pe.IF_BLOCK?t.block:void 0;if(E(e)){la([t.check],Pe.IF_CHECK,e.skip);const A=mt(t,yt(t.check));return e.lines.forEach(n=>A.add(yt(n))),FO(e.altlines,Pe.ELSE_IF,Ds(e.done)),e.altlines.forEach(n=>A.add(yt(n))),A}return mt(t,yt(t.check))}case Pe.IF_CHECK:{const e=Ds(t.skip);return e===-1?mt(t,["  ",TA(t,t.method,Sl(t.words)),`;
`]):mt(t,["  if (!",TA(t,t.method,Sl(t.words)),") { ",Tf(t,e),` }
`])}case Pe.ELSE_IF:case Pe.ELSE:{const e=mt(t,"");return t.lines.forEach(A=>e.add(yt(A))),e}case Pe.WHILE:{const e=Ds(t.loop),A=Ds(t.done),n=mt(t,"");return la(t.lines,Pe.IF_CHECK,t.done),t.lines.forEach(r=>{switch(r.type){case Pe.BREAK:r.goto=A;break;case Pe.CONTINUE:r.goto=e;break}n.add(yt(r))}),n}case Pe.REPEAT:{const e=Ds(t.loop),A=Ds(t.done),n=mt(t,"");return la(t.lines,Pe.IF_CHECK,t.done),t.lines.forEach(r=>{switch(r.type){case Pe.BREAK:r.goto=A;break;case Pe.CONTINUE:r.goto=e;break}n.add(yt(r))}),n}case Pe.WAITFOR:{const e=mt(t,"");return la(t.lines,Pe.IF_CHECK,t.loop),t.lines.forEach(A=>{e.add(yt(A))}),e}case Pe.FOREACH:{const e=Ds(t.loop),A=Ds(t.done),n=mt(t,"");return la(t.lines,Pe.IF_CHECK,t.done),t.lines.forEach(r=>{switch(r.type){case Pe.BREAK:r.goto=A;break;case Pe.CONTINUE:r.goto=e;break}n.add(yt(r))}),n}case Pe.BREAK:return mt(t,["  ",Tf(t,t.goto),`
`]);case Pe.CONTINUE:return mt(t,["  ",Tf(t,t.goto),`
`]);case Pe.OR:return TA(t,"or",t.items.map(yt));case Pe.AND:return TA(t,"and",t.items.map(yt));case Pe.NOT:return TA(t,"not",t.items.map(yt));case Pe.COMPARE:return g9(t);case Pe.OPERATOR:return b9(t);case Pe.EXPR:return TA(t,"expr",t.words.map(yt));default:return console.error("<unsupported node>",t.type,t),LO(t)}}function rs(t){if(E(t))switch(t.type===Pe.LINE&&++En.lineindex,t.lineindex=En.lineindex,t.type){case Pe.PROGRAM:t.lines.forEach(rs);break;case Pe.LINE:t.stmts.forEach(rs);break;case Pe.MARK:bb(t.id,t.lineindex);break;case Pe.IF:rs(t.check),rs(t.block);break;case Pe.IF_BLOCK:t.lines.forEach(rs),t.altlines.forEach(rs);break;case Pe.ELSE_IF:t.lines.forEach(rs);break;case Pe.ELSE:case Pe.WHILE:case Pe.REPEAT:case Pe.FOREACH:case Pe.WAITFOR:t.lines.forEach(rs);break;case Pe.MOVE:case Pe.COMMAND:case Pe.IF_CHECK:t.words.forEach(rs);break}}function _9(t){En.labels={},En.internal=1,En.lineindex=0,En.isfirststat=!0,rs(t)}function x9(t){return _9(t),{...yt(t).toStringWithSourceMap({file:`${Ef}.map`}),...En}}function y9(t,e){const A=`compile-${t}`;console.time(A);const n=lQ(e);if(console.timeEnd(A),pB&&console.info(e,n.errors),n.errors&&n.errors.length>0)return console.info(e,n.tokens,n.errors),n;if(!n.ast)return{...n,errors:[{message:"no ast output",offset:0,line:0,column:0,length:0}]};const r=x9(n.ast);if(r.code){pB&&console.info(r.code);try{return{...n,...r,source:r.code,code:new Function("api",r.code)}}catch(s){return{errors:[{message:`unexpected error ${s.message}`,offset:0,line:0,column:0,length:0}],source:"",code:new Function("api"," ")}}}return{...n,...r,source:"",code:new Function("api"," ")}}function G9(){const t={},e={};function A(r,s){const i=t[s];if(i)return i;const o=y9(r,s);return t[s]=o,o}const n={ids(){return Object.keys(e)},isended(r){const s=e[r];return E(s)?s.isended():!0},scrollunlock(r,s){const i=e[r];E(i)&&i.scrollunlock(s)},halt(r){const s=e[r];return E(s)&&(s.halt(),delete e[r]),!!s},gc(){const r=n.ids();for(let s=0;s<r.length;++s)n.isended(r[s])&&n.halt(r[s])},arg(r,s){const i=e[r];E(i)&&i.set("arg",s)},boot(r,s,i,o){let a=e[r];if(!E(e[r])){const c=A(i,o);if(a=e[r]=yoe(r,s,c),c.errors?.length){const[l]=c.errors,u=(l?.line??2)-1,f=o.replaceAll(`\r
`,"").split(`
`).map((b,g)=>[b,g]),h=f.slice(u-2,u);for(let b=0;b<h.length;++b){const[g,x]=h[b];xt(Ae,gA(),"build",`$grey${x+1} $grey${g}`)}const[d,m]=f[u]??[];if(xe(d)&&E(m)){const b=(l.column??1)-1,g=b+l.length,x=b<d.length?d:`${d}*`,_=x.substring(0,b),G=x.substring(b,g),y=x.substring(g);xt(Ae,gA(),"build",`$red${m+1} $grey${_}$red${G}$grey${y}`)}const p=f.slice(u+1,u+3);for(let b=0;b<p.length;++b){const[g,x]=p[b];xt(Ae,gA(),"build",`$grey${x+1} $grey${g}`)}const w=l.message.split(`
`).slice(0,4).join(" ");xt(Ae,gA(),"build",w);return}}return a},tick(r,s,i,o,a){return!!n.boot(r,s,o,a)?.tick(i)},once(r,s,i,o){n.boot(r,s,i,o)?.once(),n.halt(r)},message(r){const{target:s,path:i}=Un(r.target),o=e[s];if(E(o)){const a={...r,target:i};o.message(a)}}};return n}const Of={};function $O(t,e,A,n,r){const s=VO(e,A);for(let i=0;i<s.length;++i){const o=`${rA()}_loader`;Of[o]={arg:t,format:e,content:n,player:r},jU(o,s[i].code)}}function M9(t){return Of[t]?.arg}function ua(t){return Of[t]?.content}function v9(t){return Of[t]?.format}function VO(t,e){const A=wt(He.MAIN);if(!E(A))return[];const n=Vs(A,e);return E(n)?[n]:Li(A,Ye.LOADER).filter(s=>{const i=$s(s),o=i.format,a=xe(o)?new RegExp(o).test(t):!1,c=i.event,l=xe(c)?new RegExp(c).test(e):!1;return xe(o)&&xe(c)?a&&l:xe(o)?a:xe(c)?l:!1})}function ro(t){return st(t)&&typeof t[0]=="string"}function D9(t){const e=k.words[t];return xe(e)?[e,t+1]:[void 0,t]}function _b(t){const e=k.words[t];if(ro(e))return[e,t+1];const[A,n]=Yu(t),[r,s]=D9(n);return xe(r)&&(r==="empty"||Zn({kind:r}))?[[r,A],s]:[void 0,t]}function Cl(t){if(!ro(t))return;const[e]=t;return e}function Yf(t){if(!ro(t))return;const[,e]=t,A=E(e)?Tu(e):void 0;return E(A)?A:void 0}function qO(t){if(!ro(t))return;const[,e]=t,A=E(e)?Ou(e):void 0;return E(A)?Lp(A):void 0}function xb(t,e,A,n){if(!E(t))return!1;const r=pA(t);return!(E(e)&&e!==r.name||E(A)&&A!==r.color||E(n)&&n!==r.bg)}function so(t,e){const A=t??$e.ISWALK,n=e??$e.ISWALK;if(A===$e.ISGHOST||n===$e.ISGHOST)return!1;switch(A){case $e.ISWALK:return n!==$e.ISWALK;case $e.ISSWIM:return n!==$e.ISSWIM;case $e.ISSOLID:return!0;case $e.ISBULLET:return n!==$e.ISWALK&&n!==$e.ISSWIM}}function Pl(t,e,A){const n=t?.objects[A];if(E(n))return n;const r=ha(t,"player");return E(e)?(e.x<0&&(e.x=tn(0,Ie-1)),e.y<0&&(e.y=tn(0,rt-1)),JO(e,r)):qn(...r)}function WO(t,e){const A=E(e)?Tu(e):void 0,n=E(e)?Ou(e):void 0,r=[];if(E(t)){for(let i=0;i<t.terrain.length;++i){const o=t.terrain[i];E(o)&&xb(o,void 0,A,n)&&r.push(o)}const s=Object.values(t.objects);for(let i=0;i<s.length;++i){const o=s[i];xb(o,void 0,A,n)&&r.push(o)}}return r}function QO(t,e){return E(t)?e.map(A=>{if(typeof A=="string"){const n=t.objects[A];if(E(n))return n;const r=ha(t,je(A));if(r.length)return r}else if(Rs(A)&&A.x>=0&&A.x<Ie&&A.y>=0&&A.y<rt){const n=A.x+A.y*Ie,r=t.lookup?.[n];return E(r)?t.objects[r]:t.terrain[n]}}).flat().filter(E):[]}function B9(t,e,A,n){if(!E(t))return;E(t.distmaps)||(t.distmaps={});const r=`${e}.${A.x}.${A.y}.${n.x}.${n.y}`;let s=t.distmaps[r];if(!E(s)){s=new Array(Up).fill(-2);const i=[{...n}];let o=0;for(;i.length;){const a=i.shift();if(E(a)&&ai(a)){const c=wn(a,Ie);if(s[c]===-2){const l=cr(t,a.x,a.y);so(e,qe(l,"collision"))||(s[c]=o,i.push({x:a.x,y:a.y-1},{x:a.x,y:a.y+1},{x:a.x-1,y:a.y},{x:a.x+1,y:a.y})),++o}}}t.distmaps[r]=s}return s}function KO(t,e){return ai(t)?e[wn(t,Ie)]:-1}function Sf(t,e){const A=Cl(e),n=Yf(e),r=qO(e);return ha(t,A??"").filter(s=>xb(s,A,n,r))}function ha(t,e){const A=t?.named?.[e];return E(A)?[...A.values()].map(r=>typeof r=="string"?t?.objects[r]:t?.terrain[r]).filter(E):[]}function k9(t){const e=[];for(let A=0;A<rt;++A)for(let n=0;n<Ie;++n){const r={x:n,y:A},s=nt(t,r);!s?.name&&!s?.kind&&e.push(r)}return e}function JO(t,e){let A=0,n;for(let r=0;r<e.length;++r){const s=e[r];if(s){const i=t.x-(s.x??0),o=t.y-(s.y??0),a=Math.sqrt(i*i+o*o);(n===void 0||a<A)&&(A=a,n=s)}}return n}function XO(t,e,A,n,r){if(!E(t))return;const s=B9(t,e,A,n);if(!E(s))return;const i=[{x:A.x,y:A.y-1},{x:A.x,y:A.y+1},{x:A.x-1,y:A.y},{x:A.x+1,y:A.y}];let o;if(r){let a=r?0:1e4;for(let c=0;c<i.length;++c){const l=KO(i[c],s);l>=0&&l>a&&(a=l,o=i[c])}}else{let a=1e5;for(let c=0;c<i.length;++c){const l=KO(i[c],s);l>=0&&l<a&&(a=l,o=i[c])}}return o}function ni(t,e,A,n){const r=kt(e);if(!E(t)||!E(r))return!1;const s=uA(r,e);if(!Mt(s)||!s?.id)return!1;const i=ct(A);if(!E(i))return!1;eA(i);const o=e_(i,$e.ISWALK,n,!0);if(!E(o)&&!Mt(o)){const a=qe(o,"collision");if(so($e.ISWALK,a))return!1}return Ch(r,s),delete r.objects[s.id],s.x=n.x,s.y=n.y,i.objects[s.id]=s,a0(i,s),P8(i,s),fl(t,e,"enterx",n.x),fl(t,e,"entery",n.y),Pf(t,e,i.id),!0}function E9(t){const A=(t?.activelist??[]).map(n=>{const r=Ro(t,n,"board");return xe(r)?r:""});return CR(A)}function N9(t,e){return t?.activelist.includes(e)??!1}function Cf(t){const e=E9(t),A=new Set,n=[];for(let r=0;r<e.length;++r){const s=ct(e[r]);if(E(s)&&!A.has(s.id)){f4(s);const i=ct(s.overboard??"");E(i)&&(A.has(i.id)||n.push(i)),n.push(s)}}return n}function Pf(t,e,A){if(!E(t))return;fl(t,e,"board",A);const n=ct(A);E(n)?t.activelist.includes(e)||t.activelist.push(e):t.activelist=t.activelist.filter(r=>r!==e)}function eY(t,e){if(!xe(t)||!t)return xt(Ae,t,"login",`failed for playerid ==>${t}<==`);const A=wt(He.MAIN);if(!E(A))return xt(Ae,t,"login:main","login failed to find book 'main'","login",`failed for playerid ==>${t}<==`);let n=kt(t);if(E(n?.objects[t]))return!0;if(!E(n)){const l=yA(Ye.BOARD,He.TITLE);n=Ar(l)}if(!E(n))return xt(Ae,t,"login:title",`login failed to find board with '${He.TITLE}' stat`);const r=yA(Ye.OBJECT,He.PLAYER);if(!E(r))return xt(Ae,t,"login:player",`login failed to find object type '${He.PLAYER}'`);const s=n.startx??0,i=n.starty??0,o=Ne(s)?s:Math.round(Ie*.5),a=Ne(i)?i:Math.round(rt*.5),c=r_(n,{x:o,y:a},He.PLAYER,t);if(E(c?.id)){c.player=t;const l=Ui(A,t);return Object.assign(l,e),l.enterx=o,l.entery=a,l.deaths=l.deaths??0,l.highscore=l.highscore??0,Pf(A,t,n.id),!0}return!1}function T9(t,e){const A=wt(He.MAIN);if(!E(A))return;const n=[];for(let s=0;s<A.activelist.length;++s){const i=A.activelist[s];i.startsWith(t)&&n.push(i)}const r=kt(t);for(let s=0;s<n.length;++s){const i=n[s],o=Ui(A,i),a={};if(e&&(a.deaths=Cs(o.deaths,0)+1,a.highscore=Math.max(Cs(o.score,0),Cs(o.highscore,0))),Pf(A,i,""),Ch(r,uA(r,i)),l4(r,i),Zl(i),T8(A,i),e){const c=Ui(A,i);Object.assign(c,a)}}}function O9(t){const e=wt(He.MAIN),A=e?.activelist??[];for(let r=0;r<A.length;++r){const s=A[r];E(t[s])||(t[s]=0)}const n=Cf(e);for(let r=0;r<n.length;++r){const s=n[r],i=Object.keys(s.objects);for(let o=0;o<i.length;++o){const c=s.objects[i[o]].id;$t(c)&&(Pf(e,c,s.id),E(t[c])||(t[c]=0))}}}function Y9(t){const e=wt(He.MAIN),A=N9(e,t),n=kt(t),r=uA(n,t);return A&&E(r)}function kt(t){const e=wt(He.MAIN),A=Ro(e,t,"board"),n=yA(Ye.BOARD,A);return Ar(n)}const zn=G9();function Zl(t){zn.halt(t)}function S9(){const t=zn.ids();for(let A=0;A<t.length;++A)zn.halt(t[A]);const e=wt(He.MAIN);E(e)&&(e.flags={})}function tY(t){zn.message(t)}function C9(t){const e=on(t),A=e.playbuffer=xe(e.playbuffer)?e.playbuffer:"";A&&nY(t,A,!1)}function P9(t=!1){const e=wt(He.MAIN);if(!E(e))return;const A=e.timestamp+1,n=RU();n.forEach((s,i)=>{const o={...k};k.timestamp=e.timestamp,k.book=e,k.board=void 0,k.element=void 0,k.elementid="",k.elementisplayer=!1,k.elementfocus=gA();const a=M9(i);E(a)&&zn.arg(i,a),zn.tick(i,oi.LOADER,1,"loader",s),zn.isended(i)&&(zn.halt(i),n.delete(i)),mn(o).forEach(c=>{k[c]=o[c]})}),e.timestamp=A,k.timestamp=A;const r=Cf(e);for(let s=0;s<r.length;++s){const i=r[s];eA(i);const o=Toe(i,A);for(let c=0;c<o.length;++c){const{id:l,type:u,code:f,object:h}=o[c];u===Ye.ERROR?zn.halt(l):(!t||$t(h?.id??""))&&AY(e,i,h,f)}const a=nQ(i.id);if(a.length>0){const[c,l]=a[0],u=l-1;c&&(Wd(Ae,"",i.id,c),console.info("play queue",i.id,c)),u>0?a[0]=["",u]:a.shift()}}}function AY(t,e,A,n){if(!E(t)||!E(e)||!E(A))return;const r={...k};k.book=t,k.board=e,k.element=A,k.elementid=A.id??"",k.elementisplayer=$t(k.elementid);const s=k.element.player??gA();k.elementfocus=k.elementisplayer?k.elementid:s;const i=qe(A,"cycle"),o=A.id??"",a=je(A.name??A.kinddata?.name??"");if(zn.tick(o,oi.RUNTIME,i,a,n),Ne(A?.tickertime)&&k.timestamp-A.tickertime>wx*5&&(A.tickertime=0,A.tickertext=""),k.elementisplayer){const c=on(k.elementid);Ne(c.inputcurrent)&&(c.inputcurrent=0)}mn(r).forEach(c=>{k[c]=r[c]})}function nY(t,e,A=!0){const n=CA(He.MAIN);if(!E(n))return;const r=`${t}_cli`;if(k.timestamp=n.timestamp,k.book=n,k.board=kt(t),k.element=uA(k.board,t),k.elementid=k.element?.id??"",k.elementisplayer=!0,k.elementfocus=k.elementid||t,zn.once(r,oi.CLI,"cli",e),A){const s=on(t);s.playbuffer=e}}function Zf(t){const e=CA(He.MAIN),A=Vs(e,t);if(!E(e)||!E(A))return;const n={...k},r=`${t}_run`,s=k.element?.name??k.element?.kinddata?.name??"",i=A?.code??"";zn.once(r,oi.RUNTIME,je(s),i),mn(n).forEach(o=>{k[o]=n[o]})}function Z9(t,e){zn.scrollunlock(t,e)}const yb={issolid:"ISSOLID",iswalk:"ISWALK",isswim:"ISSWIM",isbullet:"ISBULLET",isghost:"ISGHOST",iswalking:"ISWALK",iswalkable:"ISWALK",isswimming:"ISSWIM",isswimmable:"ISSWIM"};$e.ISSOLID,$e.ISWALK,$e.ISSWIM,$e.ISBULLET,$e.ISGHOST,$e.ISWALK,$e.ISSWIM;function If(t){return st(t)&&Gb(t[0])}function Gb(t){return E($e[t])&&xe(t)}function rY(t){if(xe(t))return yb[je(t)]}function I9(t){const e=k.words[t];if(If(e))return[e,t+1];if(Gb(e))return[[e],t+1];const[A,n]=un(t);return If(A)?[A,n]:Gb(A)?[[A],n]:[void 0,t]}function fa(t,e=0){const A=[];let n=t;for(;n<k.words.length;){const[r,s]=un(n);if(st(r)&&!Cn(r)&&!Il(r)&&!If(r)&&!BA(r)&&A.push(...r),r==="|")return[A,s];if(n=s,A.push(r),e>0&&A.length>=e)return[A,n]}return[A,n]}function un(t){const e=k.words[t],A=t+1;if(vb(e)){const[n,r]=R9(t);if(E(n))return[n,r]}if(rY(e)){const[n,r]=I9(t);if(E(n))return[n,r]}if(Bo(e)){const[n,r]=Yu(t);if(E(n))return[n,r]}if(xe(e)&&je(e)==="rnd"){const[n,r]=un(A),[s,i]=un(r);return Ne(n)&&Ne(s)?[tn(n,s),i]:Ne(n)?[tn(0,n),r]:[tn(0,1),A]}if(Hc(e)){const[n,r]=I1(t);if(E(n))return[n,r]}if(!E(e))return[void 0,t];if(Ne(e)||st(e))return[e,A];if(xe(e)){const n=je(e),r=k.get?.(e);if(E(r))return[r,A];switch(n){case"aligned":case"alligned":{const s=Pl(k.board,{x:k.element?.x??-1,y:k.element?.y??-1},k.elementfocus);return!E(k.element)||!E(s)?[0,A]:[k.element.x===s.x||k.element.y===s.y?1:0,A]}case"contact":{const s=Pl(k.board,{x:k.element?.x??-1,y:k.element?.y??-1},k.elementfocus);if(!E(k.element)||!E(s))return[0,A];const i=(s.x??0)-(k.element?.x??0),o=(s.y??0)-(k.element?.y??0);return[i===0&&Math.abs(o)<2||o===0&&Math.abs(i)<2?1:0,A]}case"blocked":{const[s,i]=ce(k.words,A,[K.DIR]);return[Goe(k.board,k.element,s.destpt)?1:0,i]}case"any":{const[s]=ce(k.words,A,[K.ANY]);if(Cn(s)){const[c,l,u]=ce(k.words,A,[K.DIR,K.COLOR_OR_KIND]);if(c.targets.length){const[h,d]=l,m=[];for(let p=0;p<c.targets.length;++p){const w=c.targets[p],b=["any","at",w.x,w.y,...st(d)?d:[],h].filter(x=>x!==void 0),[g]=ce(b,0,[K.ANY]);st(g)&&g.length&&m.push(...g)}return[m,u]}let f;switch(c.layer){default:case De.MID:f=nt(k.board,c.destpt);break;case De.GROUND:f=cr(k.board,c.destpt.x,c.destpt.y);break}if(E(f)){const h=pA(f);if(BA(l))return[Tu(l)===h.color||Ou(l)===h.bg?[f]:[],u];const d=je(Cl(l)),m=Yf(l);if((d.length&&d!==h.name||E(m)&&m!==h.color)===!1)return[[f],u]}return[[],u]}const[i,o]=ce(k.words,A,[K.COLOR_OR_KIND]);return BA(i)?[WO(k.board,i),o]:[Sf(k.board,i),o]}case"countof":{const[s]=ce(k.words,A,[K.ANY]);if(Cn(s)){const[c,l,u]=ce(k.words,A,[K.DIR,K.COLOR_OR_KIND]);if(c.targets.length){let h=0;const[d,m]=l;for(let p=0;p<c.targets.length;++p){const w=c.targets[p],b=["countof","at",w.x,w.y,...st(m)?m:[],d].filter(x=>x!==void 0),[g]=ce(b,0,[K.ANY]);Ne(g)&&(h+=g)}return[h,u]}let f;switch(c.layer){default:case De.MID:f=nt(k.board,c.destpt);break;case De.GROUND:f=cr(k.board,c.destpt.x,c.destpt.y);break}if(E(f)){const h=pA(f);if(BA(l))return[Tu(l)===h.color||Ou(l)===h.bg?1:0,u];const d=je(Cl(l)),m=Yf(l),p=d.length?d===h.name:!0,w=E(m)?m===h.color:!0;if(p&&w)return[1,u]}return[0,u]}const[i,o]=ce(k.words,A,[K.COLOR_OR_KIND]);return BA(i)?[WO(k.board,i).length,o]:[Sf(k.board,i).length,o]}case"rnd":return[tn(0,1),A];case"abs":{const[s,i]=ce(k.words,A,[K.NUMBER]);return[Math.abs(s),i]}case"intceil":{const[s,i]=ce(k.words,A,[K.NUMBER]);return[Math.ceil(s),i]}case"intfloor":{const[s,i]=ce(k.words,A,[K.NUMBER]);return[Math.floor(s),i]}case"intround":{const[s,i]=ce(k.words,A,[K.NUMBER]);return[Math.round(s),i]}case"clamp":{const[s,i,o,a]=ce(k.words,A,[K.NUMBER,K.NUMBER,K.NUMBER]);return[gr(s,i,o),a]}case"min":{const[s,i]=fa(A);return[Math.min(...s),i]}case"max":{const[s,i]=fa(A);return[Math.max(...s),i]}case"pick":{const[s,i]=fa(A);return[qn(s),i]}case"pickwith":{const[s,i]=ce(k.words,A,[K.NUMBER_OR_STRING]),[o,a]=fa(i);return[SR(`${s}`,o),a]}case"random":{const[s,i]=fa(A,2),[o,a]=s;return[tn(o,a??0),i]}case"randomwith":{const[s,i]=ce(k.words,A,[K.NUMBER_OR_STRING]),[o,a]=fa(i,2),[c,l]=o;return[S1(`${s}`,c,l??0),a]}case"run":{const[s,i]=ce(k.words,A,[K.NAME]);return Zf(s),[k.get?.("arg"),i]}case"runwith":{const[s,i,o]=ce(k.words,A,[K.ANY,K.NAME]);return E(k.element)&&(k.element.arg=s),Zf(i),[k.get?.("arg"),o]}}}return[e,A]}const Mb={isterrain:"ISTERRAIN",isobject:"ISOBJECT"};function Il(t){return st(t)&&sY(t[0])}function sY(t){return E(pn[t])&&xe(t)}function vb(t){if(xe(t))return Mb[je(t)]}function iY(t){if(Il(t))return t;if(sY(t))return[t];const e=vb(t);if(E(e))return[e]}function R9(t){const e=k.words[t],A=iY(e);if(Il(A))return[A,t+1];const[n,r]=un(t),s=iY(n);return Il(s)?[s,r]:[void 0,t]}function Nn(t,e,A,n,r){const[s,i]=ce(r,0,[K.NUMBER_OR_STRING,K.MAYBE_NUMBER_OR_STRING]);lx(Ae,t,e,A,n,s,i),fT(e,A,n,s,i)}const j9=["echo","reverb","autofilter","distortion","vibrato","fc","fcrush","autowah"];function Db(t,e,A,n){const[r,s]=ce(n,0,[K.NUMBER_OR_STRING]);if(Ne(r))Qd(Ae,t,e,A,"volume",r),sw(e,A,"volume",r);else if(j9.includes(je(r))){const[i,o]=ce(n,s,[K.NUMBER_OR_STRING,K.MAYBE_NUMBER_OR_STRING]);lx(Ae,t,e,A,r,i,o),fT(e,A,r,i,o)}else{const[i]=ce(n,s,[K.MAYBE_NUMBER_OR_STRING]);if(Ne(i)){const o=n.length-s,a=new Array(o).fill(K.NUMBER),c=ce(n,s,a).slice(0,o),l=c.length===1?c[0]:c;Qd(Ae,t,e,A,r,l),sw(e,A,r,l)}else{const[o]=ce(n,s,[K.MAYBE_NUMBER_OR_STRING]);Qd(Ae,t,e,A,r,o),sw(e,A,r,o)}}}function oY(t,e){const[A]=ce(e,0,[K.MAYBE_NAME]);let n="";if(xe(A)){const r=t.get(A);n=xe(r)&&!E(vb(r))&&!E(rY(r))&&!E(Bo(r))&&!E(Hc(r))?r:A}return n}function ri(t,e,A){TC(Ae,k.elementfocus,k.board?.id??"",oY(t,e),A)}const Rf=qs().command("ttsengine",(t,e)=>{const[A,n]=ce(e,0,[K.STRING,K.MAYBE_STRING]);return PC(Ae,k.elementfocus,k.board?.id??"",A,n??""),0}).command("tts",(t,e)=>{const[A,n]=ce(e,0,[K.MAYBE_NUMBER_OR_STRING,K.MAYBE_STRING]);return E(A)&&E(n)?ZC(Ae,k.elementfocus,k.board?.id??"",A,n):xe(A)?IC(Ae,k.elementfocus,k.board?.id??"",A):jC(Ae,k.elementfocus,k.board?.id??""),0}).command("ttsqueue",(t,e)=>{const[A,n]=ce(e,0,[K.NUMBER_OR_STRING,K.STRING]);return RC(Ae,k.elementfocus,k.board?.id??"",A,n),0}).command("bpm",(t,e)=>{const[A]=ce(e,0,[K.NUMBER]);return OC(Ae,k.elementfocus,k.board?.id??"",A),0}).command("vol",(t,e)=>{const[A]=ce(e,0,[K.NUMBER]);return YC(Ae,k.elementfocus,k.board?.id??"",A),0}).command("bgvol",(t,e)=>{const[A]=ce(e,0,[K.NUMBER]);return SC(Ae,k.elementfocus,k.board?.id??"",A),0}).command("ttsvol",(t,e)=>{const[A]=ce(e,0,[K.NUMBER]);return CC(Ae,k.elementfocus,k.board?.id??"",A),0}).command("play",(t,e)=>(rQ(k.board?.id??"",oY(t,e)),0)).command("bgplay",(t,e)=>(ri(t,e,""),0)).command("bgplayon64n",(t,e)=>(ri(t,e,"@64n"),0)).command("bgplayon32n",(t,e)=>(ri(t,e,"@32n"),0)).command("bgplayon16n",(t,e)=>(ri(t,e,"@16n"),0)).command("bgplayon8n",(t,e)=>(ri(t,e,"@8n"),0)).command("bgplayon4n",(t,e)=>(ri(t,e,"@4n"),0)).command("bgplayon2n",(t,e)=>(ri(t,e,"@2n"),0)).command("bgplayon1n",(t,e)=>(ri(t,e,"@1m"),0)).command("synth",(t,e)=>{for(let A=0;A<4;++A)Db(k.elementfocus,k.board?.id??"",A,e);return 0}).command("synthrecord",(t,e)=>{const[A]=ce(e,0,[K.MAYBE_STRING]);return zC(Ae,k.elementfocus,A??""),0}).command("synthflush",()=>(HC(Ae,k.elementfocus),0)).command("echo",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"echo",e);return 0}).command("fcrush",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"fc",e);return 0}).command("autofilter",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"autofilter",e);return 0}).command("reverb",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"reverb",e);return 0}).command("distort",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"distort",e);return 0}).command("vibrato",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"vibrato",e);return 0}).command("autowah",(t,e)=>{for(let A=0;A<2;++A)Nn(k.elementfocus,k.board?.id??"",A,"autowah",e);return 0});for(let t=0;t<4;++t)Rf.command(`synth${t+1}`,(e,A)=>{const n=k.board?.id??"";return Db(k.elementfocus,n,t,A),0});Rf.command("synth5",(t,e)=>{for(let A=4;A<8;++A){const n=k.board?.id??"";Db(k.elementfocus,n,A,e)}return 0});for(let t=0;t<4;++t){const e=t+1;Rf.command(`echo${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"echo",n),0}).command(`fcrush${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"fcrush",n),0}).command(`autofilter${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"autofilter",n),0}).command(`reverb${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"reverb",n),0}).command(`distort${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"distort",n),0}).command(`vibrato${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"vibrato",n),0}).command(`autowah${e}`,(A,n)=>{const r=k.board?.id??"";return Nn(k.elementfocus,r,t,"autowah",n),0})}function aY(t,e,A,n){for(let r=A.y;r<=n.y;++r)for(let s=A.x;s<=n.x;++s){const i=nt(e,{x:s,y:r});Mt(i)&&UA(e,i,t.timestamp),Wt(e,{x:s,y:r})}}function z9(t,e,A){for(let n=e.y;n<=A.y;++n)for(let r=e.x;r<=A.x;++r)Wt(t,{x:r,y:n})}function cY(t,e,A,n){for(let r=A.y;r<=n.y;++r)for(let s=A.x;s<=n.x;++s){const i=nt(e,{x:s,y:r});Mt(i)&&UA(e,i,t.timestamp),Wt(e,{x:s,y:r})}}function io(t,e){E(t)&&(t.name=e.name,t.char=e.char,t.color=e.color,t.bg=e.bg,t.displaychar=e.displaychar,t.displaycolor=e.displaycolor,t.displaybg=e.displaybg,t.p1=e.p1,t.p2=e.p2,t.p3=e.p3,t.p4=e.p4,t.p5=e.p5,t.p6=e.p6,t.p7=e.p7,t.p8=e.p8,t.p9=e.p9,t.p10=e.p10,t.code=e.code,t.item=e.item,t.group=e.group,t.party=e.party,t.cycle=e.cycle,t.light=e.light,t.lightdir=e.lightdir,t.stepx=e.stepx,t.stepy=e.stepy,t.shootx=e.shootx,t.shooty=e.shooty,t.pushable=e.pushable,t.collision=e.collision,t.breakable=e.breakable,t.tickertext=e.tickertext,t.tickertime=e.tickertime)}function jf(t,e,A,n,r){switch(r){case"all":case"object":case"terrain":break;default:return H9(t,e,A,"",r)}if(!E(k.book))return;const s=k.book,i=ct(t);if(!E(i))return;const o=ct(e);if(!E(o))return;eA(i),eA(o);let a=!1;if(E(i)&&E(o)){switch(r){case"all":aY(s,o,A,n);break;case"object":cY(s,o,A,n);break;case"terrain":z9(o,A,n);break;default:a=!0;break}for(let c=A.y;c<=n.y;++c)for(let l=A.x;l<=n.x;++l){let u=!1,f=!1;switch(r){case"all":u=!0,f=!0;break;case"object":u=!0;break;case"terrain":f=!0;break}const h={x:l,y:c};let d,m=nt(i,h);if(Mt(m)?(d=cr(i,l,c),$t(m?.id)&&(m=void 0)):(d=m,m=void 0),E(d)&&(f||a&&qe(d,"group")===r)){a&&aY(s,o,h,h);const p=In(o,[d.kind??""],h);io(p,d)}if(E(m)&&(u||a&&qe(m,"group")===r)){a&&cY(s,o,h,h);const p=In(o,[m.kind??""],h);io(p,m)}}eA(o)}}function H9(t,e,A,n,r){if(!E(k.book))return;const s=k.book,i=ct(t);if(!E(i))return;const o=ct(e);if(E(o)&&(eA(i),eA(o),E(i)&&E(o))){const{terrainelements:a,objectelements:c}=h4(i,n,r);if(a.length===0&&c.length===0)return;const l={x:Ie,y:rt};for(let u=0;u<a.length;++u){const f=a[u];Ne(f.x)&&(l.x=Math.min(l.x,f.x)),Ne(f.y)&&(l.y=Math.min(l.y,f.y))}for(let u=0;u<c.length;++u){const f=c[u];Ne(f.x)&&(l.x=Math.min(l.x,f.x)),Ne(f.y)&&(l.y=Math.min(l.y,f.y))}for(let u=0;u<a.length;++u){const f=a[u],h={x:A.x+(f.x??0)-l.x,y:A.y+(f.y??0)-l.y},d=nt(o,h);E(d)&&(Mt(d)&&UA(o,d,s.timestamp),Wt(o,h));const m=In(o,[f.kind??""],h);io(m,f)}for(let u=0;u<c.length;++u){const f=c[u],h={x:A.x+(f.x??0)-l.x,y:A.y+(f.y??0)-l.y},d=In(o,[f.kind??""],h);io(d,f)}eA(o)}}function zf(t,e,A){if(!E(k.element?.x)||!E(k.element.y))return 0;if(k.elementisplayer){const a=k.board?.maxplayershots??0;if(a>0&&Eoe(k.board).filter(l=>!l.removed&&$t(l.party)&&qe(l,"collision")===$e.ISBULLET).length>=a)return t.set("didshoot",0),t.yield(),0}const[n,r]=ce(e,0,[K.DIR,K.MAYBE_KIND]),[s]=r??[];if(je(s)==="player")return t.set("didshoot",0),t.yield(),0;k.element.shootx=gr(n.destpt.x-n.startpt.x,-1,1),k.element.shooty=gr(n.destpt.y-n.startpt.y,-1,1);const i=r??["bullet"],o=QU(k.board,i,{x:k.element.x,y:k.element.y});if(E(o)){E(A)&&(o.arg=A),o.cycle=1,o.party=k.element.party??k.element.id??"",o.collision=$e.ISBULLET,o.breakable=1,o.stepx=n.destpt.x-k.element.x,o.stepy=n.destpt.y-k.element.y,o.bg=Xe.ONCLEAR;const a=Zn(o),c=o.code??a?.code??"";AY(k.book,k.board,o,c)}return k.elementisplayer&&t.set("didshoot",E(o)?1:0),t.yield(),0}function Rl(t,e,A){if(!Rs(k.element)||!E(k.book)||!E(k.board)||!E(k.element))return 0;const[n,r]=ce(t,0,[K.DIR,K.KIND]),[s]=r;if(je(s)==="player")return 0;if(n.targets.length){for(let f=0;f<n.targets.length;++f){const h=n.targets[f];Rl(["at",h.x,h.y,...r],e,A)}return 0}const{destpt:i}=n;if(i.x<0||i.x>=Ie||i.y<0||i.y>=rt)return 0;const[o]=r,a={x:k.element?.x??0,y:k.element?.y??0},c=Zn({kind:o});if(qe(c,"collision")===$e.ISGHOST)return In(k.board,r,n.destpt,e),0;let u=nt(k.board,n.destpt);if(Mt(u)&&qe(u,"pushable")){const f=FA(n.destpt),h=Jt(f,Wn(a,f));Hn(k.book,k.board,u,h),u=nt(k.board,n.destpt)}if(o==="empty")return UA(k.board,u,k.timestamp),0;if(u?.kind===o){const[,f]=r;return Yi(u,f),0}if(Mt(u)&&UA(k.board,u,k.timestamp),Mt(c)||In(k.board,r,n.destpt,e),Mt(c)){const f=In(k.board,r,n.destpt,e);E(f)&&E(A)&&(f.arg=A)}return 0}function Hf(t,e,A){if(!E(k.book)||!E(k.board))return 1;const[n,r]=ce(e,0,[K.DIR,K.DIR]),s=nt(k.board,n.destpt);if(E(s)&&E(s.kind)){const[i]=s.kind;if(je(i)==="player")return 1;const o=qe(s,"collision"),a=e_(k.board,o,r.destpt);if(E(a))return 1;const c=In(k.board,[s.kind],r.destpt);if(!E(c))return 1;io(c,s),E(A)&&(c.arg=A)}else return 1;return 0}const L9={x:0,y:0},U9={x:Ie-1,y:rt-1},F9="all",$9=qs().command("build",(t,e)=>{if(!E(k.book)||!E(k.board)||!E(k.element))return 0;const[A,n]=ce(e,0,[K.NAME,K.MAYBE_STRING]),[r]=Vi(He.TEMP,rA(),Ye.BOARD);if(!E(r))return 0;const s=Ar(r);if(!E(s))return 0;if(xe(n)){const i=ct(n);if(E(i))switch(jf(i.id,s.id,L9,U9,F9),s.isdark=i.isdark,s.startx=i.startx,s.starty=i.starty,s.over=i.over,s.under=i.under,s.camera=i.camera,s.graphics=i.graphics,s.facing=i.facing,s.charset=i.charset,s.palette=i.palette,s.timelimit=i.timelimit,s.restartonzap=i.restartonzap,s.maxplayershots=i.maxplayershots,s.b1=i.b1,s.b2=i.b2,s.b3=i.b3,s.b4=i.b4,s.b5=i.b5,s.b6=i.b6,s.b7=i.b7,s.b8=i.b8,s.b9=i.b9,s.b10=i.b10,je(A)){case"exitwest":s.exiteast=k.board.id;break;case"exiteast":s.exitwest=k.board.id;break;case"exitnorth":s.exitsouth=k.board.id;break;case"exitsouth":s.exitnorth=k.board.id;break}}return t.set(A,s.id),0}).command("goto",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.STRING]),[r,s]=ce(e,n,[K.MAYBE_NUMBER,K.MAYBE_NUMBER]),i=ct(A);if(!E(i))return 0;eA(i);const o={x:r??i.startx??Math.round(Ie*.5),y:s??i.starty??Math.round(rt*.5)},a=pA(k.element);if(a.name!=="player"){const c=qe(k.element,"color"),l=qe(k.element,"bg"),u=js(c,l),f=Sf(i,[a.name,u]),[h]=f.sort((d,m)=>{const p=d.y??1e4,w=m.y??1e4,b=p-w;if(b!==0)return b;const g=d.x??1e4,x=m.x??1e4;return g-x});E(h)&&Ne(h.x)&&Ne(h.y)&&(o.x=h.x,o.y=h.y)}return ni(k.book,k.elementfocus,i.id,o),0}).command("transport",(t,e)=>{if(!E(k.book)||!E(k.board)||!E(k.element))return 0;const[A]=ce(e,0,[K.STRING]),n=uA(k.board,A);if(E(k.element?.x)&&E(k.element.y)&&E(n?.x)&&E(n.y)){let r=!0;const s={x:k.element.x,y:k.element.y},i=s.x-n.x,o=s.y-n.y;if(qe(k.element,"shootx")!==i||qe(k.element,"shooty")!==o)return 0;for(;r&&(s.x+=i,s.y+=o,!(s.x<0||s.x>=Ie||s.y<0||s.y>=rt));){const a=nt(k.board,s);a?.kind===k.element.kind&&qe(a,"shootx")===-i&&qe(a,"shooty")===-o&&Hn(k.book,k.board,n,{x:s.x+i,y:s.y+o})&&(r=!1)}r&&Hn(k.book,k.board,n,{x:k.element.x+i,y:k.element.y+o})}return 0}).command("shove",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.DIR,K.DIR]),r=nt(k.board,A.destpt);if(Mt(r)){const s=A.destpt.x+(n.destpt.x-n.startpt.x),i=A.destpt.y+(n.destpt.y-n.startpt.y);Hn(k.book,k.board,r,{x:s,y:i})}return 0}).command("push",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.DIR,K.DIR]),r=nt(k.board,A.destpt);if(Mt(r)&&qe(r,"pushable")){const s=A.destpt.x+(n.destpt.x-n.startpt.x),i=A.destpt.y+(n.destpt.y-n.startpt.y);Hn(k.book,k.board,r,{x:s,y:i})}return 0}).command("duplicate",Hf).command("duplicatewith",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);return Hf(e.slice(n),A)}).command("dupe",Hf).command("dupewith",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);return Hf(e.slice(n),A)}).command("write",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n,r]=ce(e,0,[K.DIR,K.COLOR]),s=e.slice(r).map(Ct).join(" "),{color:i,bg:o}=ko(n),a=f9(s,256,1)?.measuredwidth??1,c=zO(256,1,i??Xe.WHITE,o??Xe.BLACK);h9(s,c);const l=a-1;switch(Wn(A.startpt,A.destpt)){case De.EAST:for(let f=0;f<a;++f)Wt(k.board,{x:A.destpt.x+f,y:A.destpt.y,name:"text",char:c.char[f],color:c.color[f],bg:c.bg[f]});break;case De.WEST:for(let f=0;f<a;++f)Wt(k.board,{x:A.destpt.x+f-l,y:A.destpt.y,name:"text",char:c.char[f],color:c.color[f],bg:c.bg[f]});break;case De.NORTH:for(let f=0;f<a;++f)Wt(k.board,{x:A.destpt.x,y:A.destpt.y+f-l,name:"text",char:c.char[f],color:c.color[f],bg:c.bg[f]});break;case De.SOUTH:for(let f=0;f<a;++f)Wt(k.board,{x:A.destpt.x,y:A.destpt.y+f,name:"text",char:c.char[f],color:c.color[f],bg:c.bg[f]});break}return 0}).command("change",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.KIND,K.KIND]),[r]=A,[s]=n;if(je(r)==="player"||je(s)==="player")return 0;(Cl(A)??"")==="empty"&&k9(k.board).forEach(l=>{In(k.board,n,l)});const o=Cl(n),a=Yf(n),c=qO(n);return Sf(k.board,A).forEach(l=>{if(E(a)&&(l.color=a),E(c)&&(l.bg=c),pA(l).name!==o){const f=qe(l,"color"),h=qe(l,"bg");if(UA(k.board,l,k.timestamp),o!=="empty"){const d={x:l.x??0,y:l.y??0},m=In(k.board,n,d);E(m)&&(m.color=f,m.bg=h)}}}),0}).command("put",(t,e)=>Rl(e)).command("putwith",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);return Rl(e.slice(n),void 0,A)}).command("oneof",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);return E(k.board)&&uA(k.board,A)?0:Rl(e.slice(n),A)}).command("oneofwith",(t,e)=>{const[A,n,r]=ce(e,0,[K.ANY,K.ANY]);return E(k.board)&&uA(k.board,n)?0:Rl(e.slice(r),n,A)}).command("shoot",zf).command("shootwith",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);return zf(t,e.slice(n),A)}).command("throwstar",(t,e)=>zf(t,[...e,"star"])).command("throwstarwith",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);return zf(t,[...e.slice(n),"star"],A)});var V9=`desc;$DKGRAYname and type of codepage
`,q9=Object.freeze({__proto__:null,default:V9}),W9=`desc;$DKGRAYShow admin scroll
`,Q9=Object.freeze({__proto__:null,default:W9}),K9=`desc;$DKGRAYStart/stop/list AI agents; prompt with <id> <values>
`,J9=Object.freeze({__proto__:null,default:K9}),X9=`desc;$DKGRAYCreate array variable
`,eK=Object.freeze({__proto__:null,default:X9}),tK=`desc;$DKGRAYApply autofilter to fx 0-1
`,AK=Object.freeze({__proto__:null,default:tK}),nK=`desc;$DKGRAYAutofilter for fx 0
`,rK=Object.freeze({__proto__:null,default:nK}),sK=`desc;$DKGRAYAutofilter for fx 1
`,iK=Object.freeze({__proto__:null,default:sK}),oK=`desc;$DKGRAYAutofilter for fx 2
`,aK=Object.freeze({__proto__:null,default:oK}),cK=`desc;$DKGRAYApply autowah to fx 0-1
`,lK=Object.freeze({__proto__:null,default:cK}),uK=`desc;$DKGRAYAutowah for fx 0
`,hK=Object.freeze({__proto__:null,default:uK}),fK=`desc;$DKGRAYAutowah for fx 1
`,dK=Object.freeze({__proto__:null,default:fK}),mK=`desc;$DKGRAYAutowah for fx 2
`,pK=Object.freeze({__proto__:null,default:mK}),gK=`desc;$DKGRAYBBS login/publish actions
`,wK=Object.freeze({__proto__:null,default:gK}),bK="desc;$DKGRAYchanges object into specified element",_K=Object.freeze({__proto__:null,default:bK}),xK="desc;$DKGRAYlike #play but for sound effects",yK=Object.freeze({__proto__:null,default:xK}),GK=`desc;$DKGRAYQuantized bgplay on 16n
`,MK=Object.freeze({__proto__:null,default:GK}),vK=`desc;$DKGRAYQuantized bgplay on 1m
`,DK=Object.freeze({__proto__:null,default:vK}),BK=`desc;$DKGRAYQuantized bgplay on 2n
`,kK=Object.freeze({__proto__:null,default:BK}),EK=`desc;$DKGRAYQuantized bgplay on 32n
`,NK=Object.freeze({__proto__:null,default:EK}),TK=`desc;$DKGRAYQuantized bgplay on 4n
`,OK=Object.freeze({__proto__:null,default:TK}),YK=`desc;$DKGRAYQuantized bgplay on 64n
`,SK=Object.freeze({__proto__:null,default:YK}),CK=`desc;$DKGRAYQuantized bgplay on 8n
`,PK=Object.freeze({__proto__:null,default:CK}),ZK=`desc;$DKGRAYSet bgplay volume
`,IK=Object.freeze({__proto__:null,default:ZK}),RK=`desc;$DKGRAYCopy code from named element
`,jK=Object.freeze({__proto__:null,default:RK}),zK=`desc;$DKGRAY
`,HK=Object.freeze({__proto__:null,default:zK}),LK=`desc;$DKGRAYUsed to move player to board
`,UK=Object.freeze({__proto__:null,default:LK}),FK=`desc;$DKGRAYList all boards as goto hyperlinks
`,$K=Object.freeze({__proto__:null,default:FK}),VK=`desc;$DKGRAYExport entire book as JSON (operator only)
`,qK=Object.freeze({__proto__:null,default:VK}),WK=`desc;$DKGRAYShow book export options (operator only)
`,QK=Object.freeze({__proto__:null,default:WK}),KK=`desc;$DKGRAYRename the main book (operator only)
`,JK=Object.freeze({__proto__:null,default:KK}),XK=`desc;$DKGRAYList all books
`,eJ=Object.freeze({__proto__:null,default:XK}),tJ=`desc;$DKGRAYTrash a book by address (operator only)
`,AJ=Object.freeze({__proto__:null,default:tJ}),nJ=`desc;$DKGRAYSet BPM
`,rJ=Object.freeze({__proto__:null,default:nJ}),sJ=`desc;$DKGRAY
`,iJ=Object.freeze({__proto__:null,default:sJ}),oJ=`desc;$DKGRAYStart/stop stream broadcast (operator only)
`,aJ=Object.freeze({__proto__:null,default:oJ}),cJ=`desc;$DKGRAYCreate new board and write id to stat
`,lJ=Object.freeze({__proto__:null,default:cJ}),uJ=`desc;$DKGRAYChange elements of one kind to another
`,hJ=Object.freeze({__proto__:null,default:uJ}),fJ=`desc;$DKGRAYSet character (self or at direction)
`,dJ=Object.freeze({__proto__:null,default:fJ}),mJ=`desc;$DKGRAY
`,pJ=Object.freeze({__proto__:null,default:mJ}),gJ=`desc;$DKGRAYStart/stop twitch chat integration (operator only)
`,wJ=Object.freeze({__proto__:null,default:gJ}),bJ="desc;$DKGRAYClear variables (set to 0)",_J=Object.freeze({__proto__:null,default:bJ}),xJ=`desc;$DKGRAYSet color (self or at direction)
`,yJ=Object.freeze({__proto__:null,default:xJ}),GJ=`desc;$DKGRAY
`,MJ=Object.freeze({__proto__:null,default:GJ}),vJ=`desc;$DKGRAYCopy region from source to current board
`,DJ=Object.freeze({__proto__:null,default:vJ}),BJ=`desc;$DKGRAYSet element cycle value (1-255)
`,kJ=Object.freeze({__proto__:null,default:BJ}),EJ=`desc;$DKGRAYEnter dev mode / halt execution (operator only)
`,NJ=Object.freeze({__proto__:null,default:EJ}),TJ=`desc;$DKGRAYDelete element (halt execution unless @isitem)
`,OJ=Object.freeze({__proto__:null,default:TJ}),YJ=`desc;$DKGRAYApply distortion to fx 0-1
`,SJ=Object.freeze({__proto__:null,default:YJ}),CJ=`desc;$DKGRAYDistortion for fx 0
`,PJ=Object.freeze({__proto__:null,default:CJ}),ZJ=`desc;$DKGRAYDistortion for fx 1
`,IJ=Object.freeze({__proto__:null,default:ZJ}),RJ=`desc;$DKGRAYDistortion for fx 2
`,jJ=Object.freeze({__proto__:null,default:RJ}),zJ=`desc;$DKGRAYstarts a do-done block
`,HJ=Object.freeze({__proto__:null,default:zJ}),LJ=`desc;$DKGRAYcompletes an if-do-done block
`,UJ=Object.freeze({__proto__:null,default:LJ}),FJ=`desc;$DKGRAYDuplicate element at direction in given direction
`,$J=Object.freeze({__proto__:null,default:FJ}),VJ=`desc;$DKGRAYDuplicate element with argument
`,qJ=Object.freeze({__proto__:null,default:VJ}),WJ="desc;$DKGRAYDuplicate element at direction in given direction",QJ=Object.freeze({__proto__:null,default:WJ}),KJ=`desc;$DKGRAYDuplicate element with argument
`,JJ=Object.freeze({__proto__:null,default:KJ}),XJ="desc;$DKGRAYApply echo effect to fx 0-1",eX=Object.freeze({__proto__:null,default:XJ}),tX=`desc;$DKGRAYEcho for fx 0
`,AX=Object.freeze({__proto__:null,default:tX}),nX=`desc;$DKGRAYEcho for fx 1
`,rX=Object.freeze({__proto__:null,default:nX}),sX=`desc;$DKGRAYEcho for fx 2
`,iX=Object.freeze({__proto__:null,default:sX}),oX=`desc;$DKGRAYelse logic in an if-do-done block
`,aX=Object.freeze({__proto__:null,default:oX}),cX=`desc;$DKGRAYconditional else logic in an if-do-done block
`,lX=Object.freeze({__proto__:null,default:cX}),uX="desc;$DKGRAYEnd program (optionally set 'arg' variable)",hX=Object.freeze({__proto__:null,default:uX}),fX="desc;$DKGRAYSet health to 0",dX=Object.freeze({__proto__:null,default:fX}),mX=`desc;$DKGRAY
`,pX=Object.freeze({__proto__:null,default:mX}),gX=`desc;$DKGRAYShow export menu (operator only)
`,wX=Object.freeze({__proto__:null,default:gX}),bX=`desc;$DKGRAYApply frequency crush to fx 0-1
`,_X=Object.freeze({__proto__:null,default:bX}),xX=`desc;$DKGRAYFrequency crush for fx 0
`,yX=Object.freeze({__proto__:null,default:xX}),GX=`desc;$DKGRAYFrequency crush for fx 1
`,MX=Object.freeze({__proto__:null,default:GX}),vX=`desc;$DKGRAYFrequency crush for fx 2
`,DX=Object.freeze({__proto__:null,default:vX}),BX=`desc;$DKGRAYFetch URL with label, method, and optional data
`,kX=Object.freeze({__proto__:null,default:BX}),EX=`desc;$DKGRAYFetch URL with argument, label, method, and optional data
`,NX=Object.freeze({__proto__:null,default:EX}),TX=`desc;$DKGRAYHighlight matched elements
`,OX=Object.freeze({__proto__:null,default:TX}),YX=`desc;$DKGRAY
`,SX=Object.freeze({__proto__:null,default:YX}),CX=`desc;$DKGRAYOpen tab with copy of state (operator only)
`,PX=Object.freeze({__proto__:null,default:CX}),ZX=`desc;$DKGRAYToggle built-in inspector
`,IX=Object.freeze({__proto__:null,default:ZX}),RX=`desc;$DKGRAYMove element in direction
`,jX=Object.freeze({__proto__:null,default:RX}),zX=`desc;$DKGRAYTeleport player to board by stat with optional x, y
`,HX=Object.freeze({__proto__:null,default:zX}),LX=`desc;$DKGRAYShow help scroll
`,UX=Object.freeze({__proto__:null,default:LX}),FX=`desc;$DKGRAYhyperlink
`,$X=Object.freeze({__proto__:null,default:FX}),VX=`desc;$DKGRAYYield execution until next tick
`,qX=Object.freeze({__proto__:null,default:VX}),WX=`desc;$DKGRAYevals condition for true or false
`,QX=Object.freeze({__proto__:null,default:WX}),KX=`desc;$DKGRAYExport zip file for itch.io (operator only)
`,JX=Object.freeze({__proto__:null,default:KX}),XX=`desc;$DKGRAYStart multiplayer session (operator only)
`,eee=Object.freeze({__proto__:null,default:XX}),tee=`desc;$DKGRAYOpen new tab with the join url (operator only)
`,Aee=Object.freeze({__proto__:null,default:tee}),nee=`desc;$DKGRAYLoad code from object codepage into object at given direction
`,ree=Object.freeze({__proto__:null,default:nee}),see=`desc;$DKGRAYLock against external messages
`,iee=Object.freeze({__proto__:null,default:see}),oee=`desc;$DKGRAYDoes a countdown and reloads into an empty state (operator only)
`,aee=Object.freeze({__proto__:null,default:oee}),cee=`desc;$DKGRAYUses given id to ensure only one element of given kind is made
`,lee=Object.freeze({__proto__:null,default:cee}),uee=`desc;$DKGRAYPut element with argument and oneof logic
`,hee=Object.freeze({__proto__:null,default:uee}),fee=`desc;$DKGRAYExport code page as JSON (operator only)
`,dee=Object.freeze({__proto__:null,default:fee}),mee=`desc;$DKGRAYOpen a code page editor
`,pee=Object.freeze({__proto__:null,default:mee}),gee=`desc;$DKGRAYList all pages in main book
`,wee=Object.freeze({__proto__:null,default:gee}),bee=`desc;$DKGRAYTrash a code page (operator only)
`,_ee=Object.freeze({__proto__:null,default:bee}),xee=`desc;$DKGRAY
`,yee=Object.freeze({__proto__:null,default:xee}),Gee=`desc;$DKGRAYRotate board elements by degrees
`,Mee=Object.freeze({__proto__:null,default:Gee}),vee="desc;$DKGRAYPlay music notes",Dee=Object.freeze({__proto__:null,default:vee}),Bee=`desc;$DKGRAYShove target object in direction ONLY if pushable
`,kee=Object.freeze({__proto__:null,default:Bee}),Eee="desc;$DKGRAYPut element in direction",Nee=Object.freeze({__proto__:null,default:Eee}),Tee=`desc;$DKGRAYPut element with argument
`,Oee=Object.freeze({__proto__:null,default:Tee}),Yee=`desc;$DKGRAYRead property from object into variable
`,See=Object.freeze({__proto__:null,default:Yee}),Cee=`desc;$DKGRAYParse binary data
`,Pee=Object.freeze({__proto__:null,default:Cee}),Zee=`desc;$DKGRAYParse JSON data
`,Iee=Object.freeze({__proto__:null,default:Zee}),Ree=`desc;$DKGRAYParse text data
`,jee=Object.freeze({__proto__:null,default:Ree}),zee=`desc;$DKGRAY
`,Hee=Object.freeze({__proto__:null,default:zee}),Lee=`desc;$DKGRAYRemix from source with pattern size and mirror to current board
`,Uee=Object.freeze({__proto__:null,default:Lee}),Fee=`desc;$DKGRAY
`,$ee=Object.freeze({__proto__:null,default:Fee}),Vee=`desc;$DKGRAYRestart software, deletes all chip and player state (operator only)
`,qee=Object.freeze({__proto__:null,default:Vee}),Wee=`desc;$DKGRAYRestore all labels of given name
`,Qee=Object.freeze({__proto__:null,default:Wee}),Kee=`desc;$DKGRAYApply reverb to fx 0-1
`,Jee=Object.freeze({__proto__:null,default:Kee}),Xee=`desc;$DKGRAYReverb for fx 0
`,ete=Object.freeze({__proto__:null,default:Xee}),tte=`desc;$DKGRAYReverb for fx 1
`,Ate=Object.freeze({__proto__:null,default:tte}),nte=`desc;$DKGRAYReverb for fx 2
`,rte=Object.freeze({__proto__:null,default:nte}),ste=`desc;$DKGRAYRevert board to snapshot state
`,ite=Object.freeze({__proto__:null,default:ste}),ote=`desc;$DKGRAYRun object codepage of given name
`,ate=Object.freeze({__proto__:null,default:ote}),cte=`desc;$DKGRAYRun function with argument
`,lte=Object.freeze({__proto__:null,default:cte}),ute=`desc;$DKGRAYSave state to url (operator only)
`,hte=Object.freeze({__proto__:null,default:ute}),fte=`desc;$DKGRAYRegister screenshot for capture
`,dte=Object.freeze({__proto__:null,default:fte}),mte=`desc;$DKGRAYsend
`,pte=Object.freeze({__proto__:null,default:mte}),gte="desc;$DKGRAYSet variable to value",wte=Object.freeze({__proto__:null,default:gte}),bte=`desc;$DKGRAYget share url (operator only)
`,_te=Object.freeze({__proto__:null,default:bte}),xte=`desc;$DKGRAYShoot projectile, with optional kind
`,yte=Object.freeze({__proto__:null,default:xte}),Gte=`desc;$DKGRAYShoot projectile with argument
`,Mte=Object.freeze({__proto__:null,default:Gte}),vte=`desc;$DKGRAYshortsend
`,Dte=Object.freeze({__proto__:null,default:vte}),Bte=`desc;$DKGRAYShove target object in direction
`,kte=Object.freeze({__proto__:null,default:Bte}),Ete=`desc;$DKGRAYCreate board snapshot
`,Nte=Object.freeze({__proto__:null,default:Ete}),Tte=`desc;$DKGRAYstat
`,Ote=Object.freeze({__proto__:null,default:Tte}),Yte=`desc;$DKGRAYConfigure or restart 8track synth
`,Ste=Object.freeze({__proto__:null,default:Yte}),Cte=`desc;$DKGRAYConfigure synth voice 1
`,Pte=Object.freeze({__proto__:null,default:Cte}),Zte=`desc;$DKGRAYConfigure synth voice 2
`,Ite=Object.freeze({__proto__:null,default:Zte}),Rte=`desc;$DKGRAYConfigure synth voice 3
`,jte=Object.freeze({__proto__:null,default:Rte}),zte=`desc;$DKGRAYConfigure synth voice 4
`,Hte=Object.freeze({__proto__:null,default:zte}),Lte=`desc;$DKGRAYConfigure bgplay synth (voices 4-8)
`,Ute=Object.freeze({__proto__:null,default:Lte}),Fte=`desc;$DKGRAYClear buffer of played notes
`,$te=Object.freeze({__proto__:null,default:Fte}),Vte=`desc;$DKGRAYRecord played note buffer to an mp3 file
`,qte=Object.freeze({__proto__:null,default:Vte}),Wte=`desc;$DKGRAYtext
`,Qte=Object.freeze({__proto__:null,default:Wte}),Kte="desc;$DKGRAYThrow star projectile, shorthand for `#shoot <dir> star`\n",Jte=Object.freeze({__proto__:null,default:Kte}),Xte=`desc;$DKGRAYThrow star with argument
`,eAe=Object.freeze({__proto__:null,default:Xte}),tAe=`desc;$DKGRAYSets element ticker text
`,AAe=Object.freeze({__proto__:null,default:tAe}),nAe=`desc;$DKGRAYShow toast notification
`,rAe=Object.freeze({__proto__:null,default:nAe}),sAe=`desc;$DKGRAYMove element across board with transporter logic
`,iAe=Object.freeze({__proto__:null,default:sAe}),oAe=`desc;$DKGRAYList books/codepages to delete (operator only)
`,aAe=Object.freeze({__proto__:null,default:oAe}),cAe=`desc;$DKGRAYSpeak text with voice (or clear queue)
`,lAe=Object.freeze({__proto__:null,default:cAe}),uAe=`desc;$DKGRAYSet TTS engine and config
`,hAe=Object.freeze({__proto__:null,default:uAe}),fAe=`desc;$DKGRAYQueue TTS phrase
`,dAe=Object.freeze({__proto__:null,default:fAe}),mAe=`desc;$DKGRAYSet TTS volume
`,pAe=Object.freeze({__proto__:null,default:mAe}),gAe=`desc;$DKGRAY
`,wAe=Object.freeze({__proto__:null,default:gAe}),bAe=`desc;$DKGRAY
`,_Ae=Object.freeze({__proto__:null,default:bAe}),xAe=`desc;$DKGRAYUnlock against messages from others
`,yAe=Object.freeze({__proto__:null,default:xAe}),GAe=`desc;$DKGRAYAutomate user input actions (up/down/left/right/etc)
`,MAe=Object.freeze({__proto__:null,default:GAe}),vAe=`desc;$DKGRAYApply vibrato to fx 0-1
`,DAe=Object.freeze({__proto__:null,default:vAe}),BAe=`desc;$DKGRAYVibrato for fx 0
`,kAe=Object.freeze({__proto__:null,default:BAe}),EAe=`desc;$DKGRAYVibrato for fx 1
`,NAe=Object.freeze({__proto__:null,default:EAe}),TAe=`desc;$DKGRAYVibrato for fx 2
`,OAe=Object.freeze({__proto__:null,default:TAe}),YAe="desc;$DKGRAYSet main volume",SAe=Object.freeze({__proto__:null,default:YAe}),CAe="desc;$DKGRAY",PAe=Object.freeze({__proto__:null,default:CAe}),ZAe="desc;$DKGRAYWill cause element to move in direction each tick",IAe=Object.freeze({__proto__:null,default:ZAe}),RAe="desc;$DKGRAYWeave board elements in direction",jAe=Object.freeze({__proto__:null,default:RAe}),zAe="desc;$DKGRAYlooping do-done block",HAe=Object.freeze({__proto__:null,default:zAe}),LAe="desc;$DKGRAYSwitch to target board by id, name, or stat",UAe=Object.freeze({__proto__:null,default:LAe}),FAe="desc;$DKGRAYSwitch to target object id",$Ae=Object.freeze({__proto__:null,default:FAe}),VAe="desc;$DKGRAYWrite text to board at direction",qAe=Object.freeze({__proto__:null,default:VAe}),WAe="desc;$DKGRAYDe-activate first label of given name",QAe=Object.freeze({__proto__:null,default:WAe}),KAe=`desc;$DKGRAYGet random ZZT content
`,JAe=Object.freeze({__proto__:null,default:KAe}),XAe=`desc;$DKGRAYSearch ZZT content by field and text
`,ene=Object.freeze({__proto__:null,default:XAe}),tne=`desc;$DKGRAYdesignates an inactive label or comment
`,Ane=Object.freeze({__proto__:null,default:tne}),nne=`desc;$DKGRAYadds hyperlink text

`,rne=Object.freeze({__proto__:null,default:nne}),sne=`desc;$DKGRAYsends the given message when hotkey is pressed

`,ine=Object.freeze({__proto__:null,default:sne}),one=`desc;$DKGRAYread number input into given stat/flag
`,ane=Object.freeze({__proto__:null,default:one}),cne=`desc;$DKGRAYa slider input from 1 to 9 

`,lne=Object.freeze({__proto__:null,default:cne}),une=`desc;$DKGRAYlist with label value pairs to pick from
`,hne=Object.freeze({__proto__:null,default:une}),fne=`desc;$DKGRAYread text input into given stat/flag
`,dne=Object.freeze({__proto__:null,default:fne}),mne=`desc;$DKGRAYdesignates a starting point for running code
`,pne=Object.freeze({__proto__:null,default:mne}),gne=`desc;$DKGRAYwaits until the object can move in the given direction and moves
`,wne=Object.freeze({__proto__:null,default:gne}),bne=`desc;$DKGRAYwill move the object in the given direction
`,_ne=Object.freeze({__proto__:null,default:bne}),xne=`desc;$DKGRAYcreates a 60x25 space for terrain and object elements
`,yne=Object.freeze({__proto__:null,default:xne}),Gne=`desc;$DKGRAYcustom 8x14 charset
`,Mne=Object.freeze({__proto__:null,default:Gne}),vne=`desc;$DKGRAYsets stat to given value

`,Dne=Object.freeze({__proto__:null,default:vne}),Bne=`desc;$DKGRAYsends the given message when hotkey is pressed

`,kne=Object.freeze({__proto__:null,default:Bne}),Ene=`desc;$DKGRAYread external content and/or handle events
`,Nne=Object.freeze({__proto__:null,default:Ene}),Tne=`desc;$DKGRAYread number input into given stat/flag
`,One=Object.freeze({__proto__:null,default:Tne}),Yne=`desc;$DKGRAYelements that can walk, swim, or be used with #shoot

`,Sne=Object.freeze({__proto__:null,default:Yne}),Cne=`desc;$DKGRAYcustom palette colors
`,Pne=Object.freeze({__proto__:null,default:Cne}),Zne=`desc;$DKGRAYa slider input from 1 to 9 

`,Ine=Object.freeze({__proto__:null,default:Zne}),Rne=`desc;$DKGRAYlist with label value pairs to pick from
`,jne=Object.freeze({__proto__:null,default:Rne}),zne=`desc;$DKGRAYterrain for solid, walkable, swimable board elements
`,Hne=Object.freeze({__proto__:null,default:zne}),Lne=`desc;$DKGRAYread text input into given stat/flag
`,Une=Object.freeze({__proto__:null,default:Lne}),Fne=`desc;$DKGRAYadds text
`,$ne=Object.freeze({__proto__:null,default:Fne}),Vne=`$white no pages found
$white use @ to create a page
$white @board name of board
$white @object name of object
$white @terrain name of terrain
$white You can omit the type and it will default to object
$white @object name of object
$white @name of object`,qne=Object.freeze({__proto__:null,default:Vne}),Wne=`section;legend
s1, s2, s3, s4 = sound sources/operators
m = modulator
c = carrier
--> = signal flow
section;algo0
S1 --> M --> S2 --> M --> S3 --> M --> S4 --> C
`,Qne=Object.freeze({__proto__:null,default:Wne}),Kne=`section;#autofilter on
#autofilter <number>
$white 0-100, 0 is off, 100 is full volume
#autofilter depth <number>
$white Controls the intensity of the filter.
#autofilter frequency <number>
$white The rate of oscilation of the effect.
#autofilter octaves <number>
$white Controls the range of the effect.
#autofilter q <number>
$white Sets the intensity of the effect.
#autofilter type <lowpass, highpass, ...>
$white Sets the behavior of the filter.
!openit https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode/type;filter types`,Jne=Object.freeze({__proto__:null,default:Kne}),Xne=`section;#autowah on
#autowah <number>
$white 0-100, 0 is off, 100 is full volume
#autowah basefrequency <frequency>
$white The frequency the filter is set to at the
$white low point of the wah.
#autowah octaves <number>
$white The number of octaves above the baseFrequency 
$white the filter will sweep to when fully open.
#autowah sensitivity <number>
$white The decibel threshold sensitivity for 
$white the incoming signal.
$white Normal range of -40 to 0.
#autowah gain <number>
$white Controls the loudness of the effect.
#autowah follower <seconds>
$white Sets the smoothing time for the effect.`,ere=Object.freeze({__proto__:null,default:Xne}),tre=`press$white C$yellow to chat
press$white #$yellow to run a quick command
section;dev-tools
#gadget
$white toggles inspector tool on/off
#zztrandom
$white downloads random from the museumofzzt api
#zztsearch <field> <value>
$white searches the museumofzzt api for zzt games
section;multi-player
#set user <name>
$white sets your display name when talking to others
#joincode OR $meta+O 
$white starts a multi-player session showing a
$white QR code. It also provides are sharable link
$white you can give to other to join the game.`,Are=Object.freeze({__proto__:null,default:tre}),nre=`section;element - movement and state
#go <dir>
$whitemove element one step
#walk <dir>
$whiteset step for continuous movement
#idle
$whitepause until next tick
#set <name> <value>
$whiteset stat or variable
#clear <stat>
$whiteset stats to 0
#cycle <1-255>
$whiteset element cycle speed
section;element - transformation
#become <kind>
$whitetransform into kind
#char [dir] <value>
$whiteset char at dir or self
#color [dir] <color>
$whiteset color at dir or self
#bind <name>
$whiteset copy code from named element
section;element - lifecycle
#end [result]
$whiteend program, optional arg
#die
$whitedelete element
#lock / #unlock
$whitelock or unlock chip
#restore <id>
$whiterestore labels
#zap <id>
$whitedeactivate label
section;element - execution
#run <func>
$whiterun codepage by name
#runwith <arg> <func>
$whiterun with argument
#load <dir> [action]
$whiteload code from object
#read <from> <prop> <name>
$whiteread property into stat
#array <name> val
$whiteset stat to array
section;element - ui
#toast text
$whiteshow toast notification
#ticker text
$whiteset ticker text
section;board - navigation
#build <stat> [source]
$whitecreate board, write id to stat
#goto <stat> [x y]
$whiteteleport player to board
#transport <target>
$whitemove object along transporter
section;board - placement
#put <dir> <kind>
$whiteplace element at direction
#putwith <arg> <dir> <kind>
$whiteplace with arg
#oneof <mark> <dir> <kind>
$whiteplace only if none with mark
#oneofwith <arg> <mark> <dir> <kind>
$whiteoneof with arg
#write <dir> <color> text
$whitewrite colored text
section;board - projectiles
#shoot <dir> [kind]
$whiteshoot bullet
#shootwith <arg> <dir> [kind]
$whiteshoot with arg
#throwstar <dir>
$whiteshoot star
#throwstarwith <arg> <dir>
$whitestar with arg
section;board - manipulation
#duplicate / #dupe <dir> <dupedir>
$whiteduplicate element
#duplicatewith / #dupewith <arg> <dir> <dupedir>
$whitedupe with arg
#shove <dir> <movedir>
$whitemove object
#push <dir> <movedir>
$whiteshove if pushable only
#change <target> <into>
$whitechange elements to kind
section;transforms
#snapshot
$whitesave board state
#revert
$whiterestore snapshot
#copy <stat> [filter]
$whitecopy region from board
#remix <stat> <size> <mirror> [filter]
$whiteremix with pattern
#weave <dir> [filter]
$whiteshift/wrap board
#pivot <degrees> [filter]
$whiterotate by degrees
section;loader - file read
#readline <kind> [args]
$whiteread text line or regex
#readjson <jmespath> <name>
$whitequery json into stat
#readbin <kind> [args]
$whiteread binary (uint8, int16, etc)
section;loader - context
#withboard <stat>
$whiteset board context
#withobject <id>
$whiteset element context
#userinput <action>
$whitesimulate input (up, down, ok, etc)
section;network
#fetch <label> <url> [method] [args]
$whitehttp request, callback at label
#fetchwith <arg> <label> <url> [method] [args]
$whitefetch with arg
section;audio - playback
#play [buffer]
$whiteplay music
#bgplay [buffer]
$whitebackground play
#bgplayon64n $26 #bgplayon1n
$whitequantized bg play
#vol / #bgvol <volume>
$whiteset volume
#bpm <bpm>
$whiteset tempo
section;audio - synthesis
#synth [config]
$whiteconfigure play voices
#synth1  #synth5
$whiteper-voice config
#synthrecord [filename]
$whiterecord output
#synthflush
$whiteclear synth buffer
section;audio - tts
#ttsengine <engine> [config]
$whiteset tts engine
#tts [voice] [phrase]
$whitespeak or clear queue
#ttsqueue <voice> <phrase>
$whitequeue phrase
#ttsvol <volume>
$whiteset tts volume
section;audio - effects
#echo / #fcrush / #autofilter
$whitevoices 0 $26 1
#reverb / #distort / #vibrato / #autowah
$whitevoices 0 $26 1
#echo1-3, #reverb1-3, etc
$whiteper-voice
section;runtime
#send <spec>
$whitedispatch to elements
#shortsend <spec>
$whiteshort send
#text text
$whiteset gadget text
#hyperlink <label> words
$whitecreate hyperlink
#help
$whiteopen reference scroll
#endgame
$whiteset health to 0
`,rre=Object.freeze({__proto__:null,default:nre}),sre=`section;#distort on
#distort <number>
$white 0-100, 0 is off, 100 is full volume
#distort distortion <number>
$white 0 or higher, controls strength of effect.
#distort oversample <2x|4x|none>
$white oversample improves quality.`,ire=Object.freeze({__proto__:null,default:sre}),ore=`section;#echo on
#echo <number>
$white 0-100, 0 is off, 100 is full volume
#echo delaytime <seconds>
$white duration between echos.
#echo feedback <number>
$white A number that is between [0, 1]
$white 1 is forever feedback and 0 is none.`,are=Object.freeze({__proto__:null,default:ore}),cre=`!fcrushscroll hk c C next;#fcrush on
!echoscroll hk e E next;#echo on
!reverbscroll hk r R next;#reverb on
!autofilterscroll hk f F next;#autofilter on
!distortscroll hk d D next;#distort on
!vibratoscroll hk v V next;#vibrato on
!autowahscroll hk w W next;#autowah on`,lre=Object.freeze({__proto__:null,default:cre}),ure=`section;#fcrush on
#fcrush <number>
$white 0-100, 0 is off, 100 is full volume
#fcrush rate <number>
$white 1 or higher, more rate, more crush`,hre=Object.freeze({__proto__:null,default:ure}),fre=`section;keyboard input
option;arrow keys;$greenmove
option;shift + arrow keys;$greenshoot
option;enter;$greenok / accept
option;escape;$greencancel / close
option;tab;$greenmenu / layout
section;controller input
option;left stick;$greenmove
option;right stick;$greenshoot
option;left trigger;$greenalt
option;right trigger;$green$meta
option;left shoulder;$greencancel / close
option;right shoulder;$greenok / accept
option;d-pad;$greenmove
option;a X;$greenshoot down
option;b $9;$greenshoot right
option;x $254;$greenshoot left
option;y $30;$greenshoot up
option;menu;$greenmenu / change layout
`,dre=Object.freeze({__proto__:null,default:fre}),mre=`option;#books;list books in memory
option;#pages;list pages in opened book
option;@[pagetype:]page name;create & edit a new codepage in the currently opened book
option;#trash;list books and pages from open book you can delete
option;#save;flush state to register
option;#share;creates a click to copy share url and QR code
`,pre=Object.freeze({__proto__:null,default:mre}),gre=`!helpcontrols hk c C next;read help on controls
!helptext hk t T next;read help on text and inputs
"
keyboard input
option;? or /;$greenopen cli
option;esc;$greenclose cli, scroll, or editor
option;tab;$greenchange layout
option;up or down arrow keys;$greennavigate cli lines
option;left or right arrow keys;$greenchange cli lines
option;enter;$greenaction on selected line
option;alt + arrow keys;$greenskip words and cli lines
option;$meta + up / down arrow keys;$greeninput history`,wre=Object.freeze({__proto__:null,default:gre}),bre=`player settings
$white#set user "name goes here"
`,_re=Object.freeze({__proto__:null,default:bre}),xre=`section;typography
plain text
use $34@quoted strings for special chars$34
$$0-255 for ascii chars $159$176$240
use color names like $RED$$red$yellow to change
 foreground color
use color names like $black$ONGREEN$$ongreen$ONCLEAR$yellow to change
 background color
use onclear $WHITE$$onclear$yellow to change
 background to transparent
section;hyperlinks
"
option;!message$59 Label;
send the given #message when the
<hyperlink> is pressed
"
option;!message hotkey <shortcut>$59 Label;
option;!message hk <shortcut>$59 Label;
send the given #message when the <shortcut>
is pressed. is-hotkey listens for <shortcut>
!openit https://github.com/ianstormtaylor/is-hotkey;$whiteis-hotkey on https://github.com/
"
option;!flagorstat range [minword] [maxword]$59 Label;
option;!flagorstat rn [minword] [maxword]$59 Label;
uses the standard 1 to 9 values input range
[minword] is the label for value 1
[maxword] is the label for value 9
write user range input into a flagorstat
"
option;!flagorstat select <choices>$59 Label;
option;!flagorstat sl <choices>$59 Label;
<choices> is a list of <word> <value> pairs
select gives a user a way to cycle through
preset choices
write user select input into a flagorstat
"
option;!flagorstat number$59 Label;
option;!flagorstat nm$59 Label;
write user number input into a flagorstat
"
option;!flagorstat text$59 Label;
option;!flagorstat tx$59 Label;
write user text input into a flagorstat
"
option;!copyit content goes here$59 Label;
copies given content into the clipboard
"
option;!openit url$59 Label;
opens the given url in a new browser tab
"
option;!runit content goes here$59 Label;
opens the cli, with the input filled out with 
the given content`,yre=Object.freeze({__proto__:null,default:xre}),Gre=`!helpmenu hk 1 1 next;controls and $greenstart here
!objectlistscroll hk 2 2 next;list object elements
!terrainlistscroll hk 3 3 next;list terrain elements
!adminscroll hk 4 4 next;cpu #admin
!cliscroll hk t T next;cli commands
!commandsscroll hk d D next;dictionary of all commands
!charscroll hk a A next;char
!colorscroll hk c C next;color
!bgscroll hk b B next;bg
!notesscroll hk n N next;notes
!synthscroll hk s S next;synth
!effectsscroll hk e E next;effects
!voicescroll hk v V next;tts voices
`,Mre=Object.freeze({__proto__:null,default:Gre}),vre=`"duration             cdefgab = notes 
"y = 64th note        x = rest
"t = 32nd note        
"s = 16th note        drums
"i = eight note       0 = hihat
"q = quarter note     1 = open hihat
"h = half note        2 = cowbell
"w = whole note       p = clap
"mods                 4 = high snare
"3 = triplet          5 = high woodblock
". = time and a half  6 = low snare
"# = sharp            7 = low tom
"! = flat             8 = low woodblock
"+ = increase octave  9 = bass drum
"- = decrease octave
helpful resource on scales
!openit https://www.pianoscales.org/;https://www.pianoscales.org/`,Dre=Object.freeze({__proto__:null,default:vre}),Bre=`section;sine, square, triangle, sawtooth
#synth phase <degrees>
$white The phase is the starting position within 
$white the oscillator's cycle. For example a phase 
$white of 180 would start halfway through the
$white oscillator's cycle.
section;amsine, amsquare, amtriangle, amsawtooth
#synth harmonicity <number>
$white Harmonicity is the frequency ratio between 
$white the carrier and the modulator oscillators.
$white A harmonicity of 1 gives both oscillators 
$white the same frequency. Harmonicity = 2 
$white means a change of an octave.
#synth modtype <sine, square, triangle, sawtooth>
#synth modenv <a> <d> <s> <r> - in seconds
section;fmsine, fmsquare, fmtriangle, fmsawtooth
#synth harmonicity <number>
$white Harmonicity is the frequency ratio between 
$white the carrier and the modulator oscillators.
$white A harmonicity of 1 gives both oscillators 
$white the same frequency. Harmonicity = 2 
$white means a change of an octave.
#synth modtype <sine, square, triangle, sawtooth>
#synth modenv <a> <d> <s> <r> - in seconds
#synth modindex <degrees>
$white The modulation index which is in essence
$white the depth or amount of the modulation.
$white In other terms it is the ratio of the 
$white frequency of the modulating signal (mf) 
$white to the amplitude of the modulating signal 
$white (ma) -- as in ma/mf
section;fatsine, fatsquare, fattriangle, fatsawtooth
#synth phase <degrees>
#synth count <number>
$white This sets the number of oscillators to 
$white spread along the given range.
#synth spread <cents>
$white This signals the number of cents between
$white oscillators.`,kre=Object.freeze({__proto__:null,default:Bre}),Ere=`section;pulse
#synth width <range>
$white A number that is between [-1, 1] altering
$white this value changes the shape of the square
$white wave`,Nre=Object.freeze({__proto__:null,default:Ere}),Tre=`section;pwm
#synth modfreq <frequency>
$white This sets the frequency of change for the 
$white pulse width of this oscillator.`,Ore=Object.freeze({__proto__:null,default:Tre}),Yre=`section;#reverb on
#reverb <number>
$white 0-100, 0 is off, 100 is full volume
#reverb predelay <seconds>
$white The amount of time before the reverb
$white is fully ramped in.
#reverb decay <seconds>
$white The duration of the reverb.
`,Sre=Object.freeze({__proto__:null,default:Yre}),Cre=`switching voices
#synth <sine, square, triangle, sawtooth> 
#synth <pwm, pulse, bells, doot>
#synth <retro, buzz, clang, metallic>
#synth <retro, buzz, clang, metallic>
#synth <algo0, algo1, ... ,algo7> 
voice settings
#synth restart - resets voice to default
#synth vol <db> - control volume
#synth port <seconds>
#synth env <attack> <delay> <sustain> <release>
voice specific 
!oscscroll hk o O next;sine, square, triangle, sawtooth
!pwmscroll hk m M next;pwm
!pulsescroll hk p P next;pulse
!algoscroll hk a A next;algo0 -> algo7
`,Pre=Object.freeze({__proto__:null,default:Cre}),Zre=`section;#vibrato on
#vibrato <number>
$white 0-100, 0 is off, 100 is full volume
#vibrato maxdelay <seconds>
$white longer delay increases the vibrato`,Ire=Object.freeze({__proto__:null,default:Zre}),Rre=`update this to explain

#tts
#ttsqueue
#ttsengine
`,jre=Object.freeze({__proto__:null,default:Rre}),oo=(t=>(t[t.Border=-1]="Border",t[t.Data=0]="Data",t[t.Function=1]="Function",t[t.Position=2]="Position",t[t.Timing=3]="Timing",t[t.Alignment=4]="Alignment",t))(oo||{}),zre=Object.defineProperty,Hre=(t,e,A)=>e in t?zre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:A}):t[e]=A,Lf=(t,e,A)=>(Hre(t,typeof e!="symbol"?e+"":e,A),A);const Lre=[0,1],lY=[1,0],uY=[2,3],hY=[3,2],Ure={L:Lre,M:lY,Q:uY,H:hY},Fre=/^[0-9]*$/,$re=/^[A-Z0-9 $%*+.\/:-]*$/,Bb="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kb=1,Eb=40,fY=3,Vre=3,Uf=40,qre=10,dY=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],mY=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];class Wre{constructor(e,A,n,r){if(this.version=e,this.ecc=A,Lf(this,"size"),Lf(this,"mask"),Lf(this,"modules",[]),Lf(this,"types",[]),e<kb||e>Eb)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;const s=Array.from({length:this.size},()=>!1);for(let o=0;o<this.size;o++)this.modules.push(s.slice()),this.types.push(s.map(()=>0));this.drawFunctionPatterns();const i=this.addEccAndInterleave(n);if(this.drawCodewords(i),r===-1){let o=1e9;for(let a=0;a<8;a++){this.applyMask(a),this.drawFormatBits(a);const c=this.getPenaltyScore();c<o&&(r=a,o=c),this.applyMask(a)}}this.mask=r,this.applyMask(r),this.drawFormatBits(r)}getModule(e,A){return e>=0&&e<this.size&&A>=0&&A<this.size&&this.modules[A][e]}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2===0,oo.Timing),this.setFunctionModule(n,6,n%2===0,oo.Timing);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),A=e.length;for(let n=0;n<A;n++)for(let r=0;r<A;r++)n===0&&r===0||n===0&&r===A-1||n===A-1&&r===0||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const A=this.ecc[1]<<3|e;let n=A;for(let s=0;s<10;s++)n=n<<1^(n>>>9)*1335;const r=(A<<10|n)^21522;for(let s=0;s<=5;s++)this.setFunctionModule(8,s,ks(r,s));this.setFunctionModule(8,7,ks(r,6)),this.setFunctionModule(8,8,ks(r,7)),this.setFunctionModule(7,8,ks(r,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,ks(r,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,ks(r,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,ks(r,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^(e>>>11)*7973;const A=this.version<<12|e;for(let n=0;n<18;n++){const r=ks(A,n),s=this.size-11+n%3,i=Math.floor(n/3);this.setFunctionModule(s,i,r),this.setFunctionModule(i,s,r)}}drawFinderPattern(e,A){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const s=Math.max(Math.abs(r),Math.abs(n)),i=e+r,o=A+n;i>=0&&i<this.size&&o>=0&&o<this.size&&this.setFunctionModule(i,o,s!==2&&s!==4,oo.Position)}}drawAlignmentPattern(e,A){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,A+n,Math.max(Math.abs(r),Math.abs(n))!==1,oo.Alignment)}setFunctionModule(e,A,n,r=oo.Function){this.modules[A][e]=n,this.types[A][e]=r}addEccAndInterleave(e){const A=this.version,n=this.ecc;if(e.length!==Ff(A,n))throw new RangeError("Invalid argument");const r=mY[n[0]][A],s=dY[n[0]][A],i=Math.floor(Tb(A)/8),o=r-i%r,a=Math.floor(i/r),c=[],l=rse(s);for(let f=0,h=0;f<r;f++){const d=e.slice(h,h+a-s+(f<o?0:1));h+=d.length;const m=sse(d,l);f<o&&d.push(0),c.push(d.concat(m))}const u=[];for(let f=0;f<c[0].length;f++)c.forEach((h,d)=>{(f!==a-s||d>=o)&&u.push(h[f])});return u}drawCodewords(e){if(e.length!==Math.floor(Tb(this.version)/8))throw new RangeError("Invalid argument");let A=0;for(let n=this.size-1;n>=1;n-=2){n===6&&(n=5);for(let r=0;r<this.size;r++)for(let s=0;s<2;s++){const i=n-s,a=(n+1&2)===0?this.size-1-r:r;!this.types[a][i]&&A<e.length*8&&(this.modules[a][i]=ks(e[A>>>3],7-(A&7)),A++)}}}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let A=0;A<this.size;A++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+A)%2===0;break;case 1:r=A%2===0;break;case 2:r=n%3===0;break;case 3:r=(n+A)%3===0;break;case 4:r=(Math.floor(n/3)+Math.floor(A/2))%2===0;break;case 5:r=n*A%2+n*A%3===0;break;case 6:r=(n*A%2+n*A%3)%2===0;break;case 7:r=((n+A)%2+n*A%3)%2===0;break;default:throw new Error("Unreachable")}!this.types[A][n]&&r&&(this.modules[A][n]=!this.modules[A][n])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let i=!1,o=0;const a=[0,0,0,0,0,0,0];for(let c=0;c<this.size;c++)this.modules[s][c]===i?(o++,o===5?e+=fY:o>5&&e++):(this.finderPenaltyAddHistory(o,a),i||(e+=this.finderPenaltyCountPatterns(a)*Uf),i=this.modules[s][c],o=1);e+=this.finderPenaltyTerminateAndCount(i,o,a)*Uf}for(let s=0;s<this.size;s++){let i=!1,o=0;const a=[0,0,0,0,0,0,0];for(let c=0;c<this.size;c++)this.modules[c][s]===i?(o++,o===5?e+=fY:o>5&&e++):(this.finderPenaltyAddHistory(o,a),i||(e+=this.finderPenaltyCountPatterns(a)*Uf),i=this.modules[c][s],o=1);e+=this.finderPenaltyTerminateAndCount(i,o,a)*Uf}for(let s=0;s<this.size-1;s++)for(let i=0;i<this.size-1;i++){const o=this.modules[s][i];o===this.modules[s][i+1]&&o===this.modules[s+1][i]&&o===this.modules[s+1][i+1]&&(e+=Vre)}let A=0;for(const s of this.modules)A=s.reduce((i,o)=>i+(o?1:0),A);const n=this.size*this.size,r=Math.ceil(Math.abs(A*20-n*10)/n)-1;return e+=r*qre,e}getAlignmentPatternPositions(){if(this.version===1)return[];{const e=Math.floor(this.version/7)+2,A=this.version===32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,n=[6];for(let r=this.size-7;n.length<e;r-=A)n.splice(1,0,r);return n}}finderPenaltyCountPatterns(e){const A=e[1],n=A>0&&e[2]===A&&e[3]===A*3&&e[4]===A&&e[5]===A;return(n&&e[0]>=A*4&&e[6]>=A?1:0)+(n&&e[6]>=A*4&&e[0]>=A?1:0)}finderPenaltyTerminateAndCount(e,A,n){return e&&(this.finderPenaltyAddHistory(A,n),A=0),A+=this.size,this.finderPenaltyAddHistory(A,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,A){A[0]===0&&(e+=this.size),A.pop(),A.unshift(e)}}function Bs(t,e,A){if(e<0||e>31||t>>>e)throw new RangeError("Value out of range");for(let n=e-1;n>=0;n--)A.push(t>>>n&1)}function ks(t,e){return(t>>>e&1)!==0}class Nb{constructor(e,A,n){if(this.mode=e,this.numChars=A,this.bitData=n,A<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}getData(){return this.bitData.slice()}}const Qre=[1,10,12,14],Kre=[2,9,11,13],Jre=[4,8,16,16];function pY(t,e){return t[Math.floor((e+7)/17)+1]}function gY(t){const e=[];for(const A of t)Bs(A,8,e);return new Nb(Jre,t.length,e)}function Xre(t){if(!wY(t))throw new RangeError("String contains non-numeric characters");const e=[];for(let A=0;A<t.length;){const n=Math.min(t.length-A,3);Bs(Number.parseInt(t.substring(A,A+n),10),n*3+1,e),A+=n}return new Nb(Qre,t.length,e)}function ese(t){if(!bY(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");const e=[];let A;for(A=0;A+2<=t.length;A+=2){let n=Bb.indexOf(t.charAt(A))*45;n+=Bb.indexOf(t.charAt(A+1)),Bs(n,11,e)}return A<t.length&&Bs(Bb.indexOf(t.charAt(A)),6,e),new Nb(Kre,t.length,e)}function tse(t){return t===""?[]:wY(t)?[Xre(t)]:bY(t)?[ese(t)]:[gY(nse(t))]}function wY(t){return Fre.test(t)}function bY(t){return $re.test(t)}function Ase(t,e){let A=0;for(const n of t){const r=pY(n.mode,e);if(n.numChars>=1<<r)return Number.POSITIVE_INFINITY;A+=4+r+n.bitData.length}return A}function nse(t){t=encodeURI(t);const e=[];for(let A=0;A<t.length;A++)t.charAt(A)!=="%"?e.push(t.charCodeAt(A)):(e.push(Number.parseInt(t.substring(A+1,A+3),16)),A+=2);return e}function Tb(t){if(t<kb||t>Eb)throw new RangeError("Version number out of range");let e=(16*t+128)*t+64;if(t>=2){const A=Math.floor(t/7)+2;e-=(25*A-10)*A-55,t>=7&&(e-=36)}return e}function Ff(t,e){return Math.floor(Tb(t)/8)-dY[e[0]][t]*mY[e[0]][t]}function rse(t){if(t<1||t>255)throw new RangeError("Degree out of range");const e=[];for(let n=0;n<t-1;n++)e.push(0);e.push(1);let A=1;for(let n=0;n<t;n++){for(let r=0;r<e.length;r++)e[r]=Ob(e[r],A),r+1<e.length&&(e[r]^=e[r+1]);A=Ob(A,2)}return e}function sse(t,e){const A=e.map(n=>0);for(const n of t){const r=n^A.shift();A.push(0),e.forEach((s,i)=>A[i]^=Ob(s,r))}return A}function Ob(t,e){if(t>>>8||e>>>8)throw new RangeError("Byte out of range");let A=0;for(let n=7;n>=0;n--)A=A<<1^(A>>>7)*285,A^=(e>>>n&1)*t;return A}function ise(t,e,A=1,n=40,r=-1,s=!0){if(!(kb<=A&&A<=n&&n<=Eb)||r<-1||r>7)throw new RangeError("Invalid value");let i,o;for(i=A;;i++){const u=Ff(i,e)*8,f=Ase(t,i);if(f<=u){o=f;break}if(i>=n)throw new RangeError("Data too long")}for(const u of[lY,uY,hY])s&&o<=Ff(i,u)*8&&(e=u);const a=[];for(const u of t){Bs(u.mode[0],4,a),Bs(u.numChars,pY(u.mode,i),a);for(const f of u.getData())a.push(f)}const c=Ff(i,e)*8;Bs(0,Math.min(4,c-a.length),a),Bs(0,(8-a.length%8)%8,a);for(let u=236;a.length<c;u^=253)Bs(u,8,a);const l=Array.from({length:Math.ceil(a.length/8)},()=>0);return a.forEach((u,f)=>l[f>>>3]|=u<<7-(f&7)),new Wre(i,e,l,r)}function ose(t,e){const{ecc:A="L",boostEcc:n=!1,minVersion:r=1,maxVersion:s=40,maskPattern:i=-1,border:o=1}=e||{},a=typeof t=="string"?tse(t):Array.isArray(t)?[gY(t)]:void 0;if(!a)throw new Error(`uqr only supports encoding string and binary data, but got: ${typeof t}`);const c=ise(a,Ure[A],r,s,i,n),l=ase({version:c.version,maskPattern:c.mask,size:c.size,data:c.modules,types:c.types},o);return e?.invert&&(l.data=l.data.map(u=>u.map(f=>!f))),e?.onEncoded?.(l),l}function ase(t,e=1){if(!e)return t;const{size:A}=t,n=A+e*2;t.size=n,t.data.forEach(s=>{for(let i=0;i<e;i++)s.unshift(!1),s.push(!1)});for(let s=0;s<e;s++)t.data.unshift(Array.from({length:n},i=>!1)),t.data.push(Array.from({length:n},i=>!1));const r=oo.Border;t.types.forEach(s=>{for(let i=0;i<e;i++)s.unshift(r),s.push(r)});for(let s=0;s<e;s++)t.types.unshift(Array.from({length:n},i=>r)),t.types.push(Array.from({length:n},i=>r));return t}function cse(t,e,A,n=!1){return e<0||A<0||e>=t.length||A>=t.length?n:t[A][e]}function lse(t,e={}){const A={WHITE_ALL:"",WHITE_BLACK:"",BLACK_WHITE:"",BLACK_ALL:" "},n=ose(t,e),r=!1,s=!0,i=(c,l)=>cse(n.data,c,l,!0),o=[];let a="";for(let c=0;c<n.size;c+=2){for(let l=0;l<n.size;l++)i(l,c)===r&&i(l,c+1)===r?a+=A.WHITE_ALL:i(l,c)===r&&i(l,c+1)===s?a+=A.WHITE_BLACK:i(l,c)===s&&i(l,c+1)===r?a+=A.BLACK_WHITE:a+=A.BLACK_ALL;o.push(a),a=""}return o.join(`
`)}function _Y(t){const e=[],A=lse(t).split(`
`),n={32:32,9600:223,9604:220,9608:219};for(let r=0;r<A.length;r++){const s=[...A[r]].map(i=>`$${n[i.charCodeAt(0)]}`).join("");e.push(s)}return e}const ao="$dkpurple",use="$196",hse="$205",St="$yellow$205$205$205$196";function bt(t,e,A){_A(t,e,A)}function fse(t,e,A){const n=use.repeat(A);bt(t,e,`${ao}${n}`)}function Yb(t,e,A){const n=hse.repeat(A);bt(t,e,`${ao}${n}`)}function $f(t,e,A){fse(t,e,A.length+2),bt(t,e,`${ao} $white${A} `),Yb(t,e,A.length+2)}function co(t,e,A){bt(t,e,`${ao} ${" ".repeat(A.length)} `),bt(t,e,`${ao} $gray${A} `),Yb(t,e,A.length+2)}function si(t,e,A,n){bt(t,e,`${ao} $white${A} $blue${n}`)}function bA(t,e,A){bt(t,e,`${ao}$blue${A}`)}function dse(t,e,A,n){bt(t,e,`!${A};${n}`)}function mse(t,e,A){const n=_Y(A);for(let r=0;r<n.length;r++)bt(t,e,n[r])}function pse(t,e,A,n,r=!0){r&&(mse(t,e,A),setTimeout(()=>UC(t,e),200)),bt(t,e,`!copyit ${A};${n}`)}function gse(t,e,A,n){bt(t,e,`!openit ${A};${n}`)}const xY=Object.assign({"./editor/codepagename.txt":q9,"./editor/command/admin.txt":Q9,"./editor/command/agent.txt":J9,"./editor/command/array.txt":eK,"./editor/command/autofilter.txt":AK,"./editor/command/autofilter1.txt":rK,"./editor/command/autofilter2.txt":iK,"./editor/command/autofilter3.txt":aK,"./editor/command/autowah.txt":lK,"./editor/command/autowah1.txt":hK,"./editor/command/autowah2.txt":dK,"./editor/command/autowah3.txt":pK,"./editor/command/bbs.txt":wK,"./editor/command/become.txt":_K,"./editor/command/bgplay.txt":yK,"./editor/command/bgplayon16n.txt":MK,"./editor/command/bgplayon1n.txt":DK,"./editor/command/bgplayon2n.txt":kK,"./editor/command/bgplayon32n.txt":NK,"./editor/command/bgplayon4n.txt":OK,"./editor/command/bgplayon64n.txt":SK,"./editor/command/bgplayon8n.txt":PK,"./editor/command/bgvol.txt":IK,"./editor/command/bind.txt":jK,"./editor/command/board.txt":HK,"./editor/command/boardopen.txt":UK,"./editor/command/boards.txt":$K,"./editor/command/bookallexport.txt":qK,"./editor/command/bookexport.txt":QK,"./editor/command/bookrename.txt":JK,"./editor/command/books.txt":eJ,"./editor/command/booktrash.txt":AJ,"./editor/command/bpm.txt":rJ,"./editor/command/break.txt":iJ,"./editor/command/broadcast.txt":aJ,"./editor/command/build.txt":lJ,"./editor/command/change.txt":hJ,"./editor/command/char.txt":dJ,"./editor/command/charset.txt":pJ,"./editor/command/chat.txt":wJ,"./editor/command/clear.txt":_J,"./editor/command/color.txt":yJ,"./editor/command/continue.txt":MJ,"./editor/command/copy.txt":DJ,"./editor/command/cycle.txt":kJ,"./editor/command/dev.txt":NJ,"./editor/command/die.txt":OJ,"./editor/command/distort.txt":SJ,"./editor/command/distort1.txt":PJ,"./editor/command/distort2.txt":IJ,"./editor/command/distort3.txt":jJ,"./editor/command/do.txt":HJ,"./editor/command/done.txt":UJ,"./editor/command/dupe.txt":$J,"./editor/command/dupewith.txt":qJ,"./editor/command/duplicate.txt":QJ,"./editor/command/duplicatewith.txt":JJ,"./editor/command/echo.txt":eX,"./editor/command/echo1.txt":AX,"./editor/command/echo2.txt":rX,"./editor/command/echo3.txt":iX,"./editor/command/else.txt":aX,"./editor/command/elseif.txt":lX,"./editor/command/end.txt":hX,"./editor/command/endgame.txt":dX,"./editor/command/endwith.txt":pX,"./editor/command/export.txt":wX,"./editor/command/fcrush.txt":_X,"./editor/command/fcrush1.txt":yX,"./editor/command/fcrush2.txt":MX,"./editor/command/fcrush3.txt":DX,"./editor/command/fetch.txt":kX,"./editor/command/fetchwith.txt":NX,"./editor/command/findany.txt":OX,"./editor/command/foreach.txt":SX,"./editor/command/fork.txt":PX,"./editor/command/gadget.txt":IX,"./editor/command/go.txt":jX,"./editor/command/goto.txt":HX,"./editor/command/help.txt":UX,"./editor/command/hyperlink.txt":$X,"./editor/command/idle.txt":qX,"./editor/command/if.txt":QX,"./editor/command/itchiopublish.txt":JX,"./editor/command/joincode.txt":eee,"./editor/command/jointab.txt":Aee,"./editor/command/load.txt":ree,"./editor/command/lock.txt":iee,"./editor/command/nuke.txt":aee,"./editor/command/oneof.txt":lee,"./editor/command/oneofwith.txt":hee,"./editor/command/pageexport.txt":dee,"./editor/command/pageopen.txt":pee,"./editor/command/pages.txt":wee,"./editor/command/pagetrash.txt":_ee,"./editor/command/palette.txt":yee,"./editor/command/pivot.txt":Mee,"./editor/command/play.txt":Dee,"./editor/command/push.txt":kee,"./editor/command/put.txt":Nee,"./editor/command/putwith.txt":Oee,"./editor/command/read.txt":See,"./editor/command/readbin.txt":Pee,"./editor/command/readjson.txt":Iee,"./editor/command/readline.txt":jee,"./editor/command/readrexpaint.txt":Hee,"./editor/command/remix.txt":Uee,"./editor/command/repeat.txt":$ee,"./editor/command/restart.txt":qee,"./editor/command/restore.txt":Qee,"./editor/command/reverb.txt":Jee,"./editor/command/reverb1.txt":ete,"./editor/command/reverb2.txt":Ate,"./editor/command/reverb3.txt":rte,"./editor/command/revert.txt":ite,"./editor/command/run.txt":ate,"./editor/command/runwith.txt":lte,"./editor/command/save.txt":hte,"./editor/command/screenshot.txt":dte,"./editor/command/send.txt":pte,"./editor/command/set.txt":wte,"./editor/command/share.txt":_te,"./editor/command/shoot.txt":yte,"./editor/command/shootwith.txt":Mte,"./editor/command/shortsend.txt":Dte,"./editor/command/shove.txt":kte,"./editor/command/snapshot.txt":Nte,"./editor/command/stat.txt":Ote,"./editor/command/synth.txt":Ste,"./editor/command/synth1.txt":Pte,"./editor/command/synth2.txt":Ite,"./editor/command/synth3.txt":jte,"./editor/command/synth4.txt":Hte,"./editor/command/synth5.txt":Ute,"./editor/command/synthflush.txt":$te,"./editor/command/synthrecord.txt":qte,"./editor/command/text.txt":Qte,"./editor/command/throwstar.txt":Jte,"./editor/command/throwstarwith.txt":eAe,"./editor/command/ticker.txt":AAe,"./editor/command/toast.txt":rAe,"./editor/command/transport.txt":iAe,"./editor/command/trash.txt":aAe,"./editor/command/tts.txt":lAe,"./editor/command/ttsengine.txt":hAe,"./editor/command/ttsqueue.txt":dAe,"./editor/command/ttsvol.txt":pAe,"./editor/command/twitchbroadcast.txt":wAe,"./editor/command/twitchchat.txt":_Ae,"./editor/command/unlock.txt":yAe,"./editor/command/userinput.txt":MAe,"./editor/command/vibrato.txt":DAe,"./editor/command/vibrato1.txt":kAe,"./editor/command/vibrato2.txt":NAe,"./editor/command/vibrato3.txt":OAe,"./editor/command/vol.txt":SAe,"./editor/command/waitfor.txt":PAe,"./editor/command/walk.txt":IAe,"./editor/command/weave.txt":jAe,"./editor/command/while.txt":HAe,"./editor/command/withboard.txt":UAe,"./editor/command/withobject.txt":$Ae,"./editor/command/write.txt":qAe,"./editor/command/zap.txt":QAe,"./editor/command/zztrandom.txt":JAe,"./editor/command/zztsearch.txt":ene,"./editor/comment.txt":Ane,"./editor/hyperlink.txt":rne,"./editor/hyperlink/hotkey.txt":ine,"./editor/hyperlink/number.txt":ane,"./editor/hyperlink/range.txt":lne,"./editor/hyperlink/select.txt":hne,"./editor/hyperlink/text.txt":dne,"./editor/label.txt":pne,"./editor/shortgo.txt":wne,"./editor/shorttry.txt":_ne,"./editor/stat/board.txt":yne,"./editor/stat/charset.txt":Mne,"./editor/stat/const.txt":Dne,"./editor/stat/hotkey.txt":kne,"./editor/stat/loader.txt":Nne,"./editor/stat/number.txt":One,"./editor/stat/object.txt":Sne,"./editor/stat/palette.txt":Pne,"./editor/stat/range.txt":Ine,"./editor/stat/select.txt":jne,"./editor/stat/terrain.txt":Hne,"./editor/stat/text.txt":Une,"./editor/text.txt":$ne,"./help/nopages.txt":qne,"./refscroll/algoscroll.txt":Qne,"./refscroll/autofilterscroll.txt":Jne,"./refscroll/autowahscroll.txt":ere,"./refscroll/cliscroll.txt":Are,"./refscroll/commandsscroll.txt":rre,"./refscroll/distortscroll.txt":ire,"./refscroll/echoscroll.txt":are,"./refscroll/effectsscroll.txt":lre,"./refscroll/fcrushscroll.txt":hre,"./refscroll/helpcontrols.txt":dre,"./refscroll/helpdeveloper.txt":pre,"./refscroll/helpmenu.txt":wre,"./refscroll/helpplayer.txt":_re,"./refscroll/helptext.txt":yre,"./refscroll/menu.txt":Mre,"./refscroll/notesscroll.txt":Dre,"./refscroll/oscscroll.txt":kre,"./refscroll/pulsescroll.txt":Nre,"./refscroll/pwmscroll.txt":Ore,"./refscroll/reverbscroll.txt":Sre,"./refscroll/synthscroll.txt":Pre,"./refscroll/vibratoscroll.txt":Ire,"./refscroll/voicescroll.txt":jre}),yY={};mn(xY).forEach(t=>{const e=t.replace(".txt","").replace("./","").replaceAll("/",":");yY[e]=xY[t].default});function Vf(t){const e=je(t.trim().replaceAll(`
`,"").replace(/:+$/,"")),A=yY[e];if(E(A))return A;const{target:n,path:r}=Un(e);switch(n){case"editor":{const s=Un(r);switch(s.target){case"command":if(s.path.length)return`desc;$DKGRAYsends the message ${s.path}`}break}}}function Sb(t,e){const A=(t??"").split(`
`);for(let n=0;n<A.length;++n)e(A[n].split(";"))}function wse(t,e){const[A,...n]=e,r=n[0]??"",s=n[1]??"";switch(je(A.trim())){case"header":$f(Ae,t,r);break;case"section":co(Ae,t,r);break;case"option":si(Ae,t,r,s);break;default:A.trimStart().startsWith("!")?dse(Ae,t,A.trimStart().slice(1),r):bt(Ae,t,A);break}}const lo="$dkpurple",bse="$196",_se="$205";function xse(t,e){const A=bse.repeat(e);we(t,`${lo}${A}`)}function GY(t,e){const A=_se.repeat(e);we(t,`${lo}${A}`)}function yse(t,e){we(t,`${lo} ${" ".repeat(e.length)} `),xse(t,e.length+2),we(t,`${lo} $white${e} `),GY(t,e.length+2)}function Gse(t,e){we(t,`${lo} ${" ".repeat(e.length)} `),we(t,`${lo} $gray${e} `),GY(t,e.length+2)}function Mse(t,e,A){we(t,`${lo} $white${e} $blue${A}`)}function MY(t,e){const[A,...n]=e,r=n[0]??"",s=n[1]??"";switch(je(A.trim())){case"header":yse(t,r);break;case"section":Gse(t,r);break;case"option":Mse(t,r,s);break;default:if(A.trimStart().startsWith("!")){const i=A.trimStart().slice(1).split(" ");switch(je(i[1]??"")){case"hk":case"hotkey":Te(t,"refscroll",r,[i[0]??"",i[1]??"",i[2]??"",` ${i[3]??""} `,i[4]??""]);break;default:Te(t,"refscroll",r,i);break}}else A.trimStart().startsWith('"')?we(t,A.trimStart().slice(1)):we(t,A);break}}function qf(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cb={exports:{}},vY;function vse(){return vY||(vY=1,(function(t,e){(function(A){t.exports=A()})(function(){return(function A(n,r,s){function i(c,l){if(!r[c]){if(!n[c]){var u=typeof qf=="function"&&qf;if(!l&&u)return u(c,!0);if(o)return o(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var h=r[c]={exports:{}};n[c][0].call(h.exports,function(d){var m=n[c][1][d];return i(m||d)},h,h.exports,A,n,r,s)}return r[c].exports}for(var o=typeof qf=="function"&&qf,a=0;a<s.length;a++)i(s[a]);return i})({1:[function(A,n,r){var s=A("./utils"),i=A("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(a){for(var c,l,u,f,h,d,m,p=[],w=0,b=a.length,g=b,x=s.getTypeOf(a)!=="string";w<a.length;)g=b-w,u=x?(c=a[w++],l=w<b?a[w++]:0,w<b?a[w++]:0):(c=a.charCodeAt(w++),l=w<b?a.charCodeAt(w++):0,w<b?a.charCodeAt(w++):0),f=c>>2,h=(3&c)<<4|l>>4,d=1<g?(15&l)<<2|u>>6:64,m=2<g?63&u:64,p.push(o.charAt(f)+o.charAt(h)+o.charAt(d)+o.charAt(m));return p.join("")},r.decode=function(a){var c,l,u,f,h,d,m=0,p=0,w="data:";if(a.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var b,g=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===o.charAt(64)&&g--,a.charAt(a.length-2)===o.charAt(64)&&g--,g%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=i.uint8array?new Uint8Array(0|g):new Array(0|g);m<a.length;)c=o.indexOf(a.charAt(m++))<<2|(f=o.indexOf(a.charAt(m++)))>>4,l=(15&f)<<4|(h=o.indexOf(a.charAt(m++)))>>2,u=(3&h)<<6|(d=o.indexOf(a.charAt(m++))),b[p++]=c,h!==64&&(b[p++]=l),d!==64&&(b[p++]=u);return b}},{"./support":30,"./utils":32}],2:[function(A,n,r){var s=A("./external"),i=A("./stream/DataWorker"),o=A("./stream/Crc32Probe"),a=A("./stream/DataLengthProbe");function c(l,u,f,h,d){this.compressedSize=l,this.uncompressedSize=u,this.crc32=f,this.compression=h,this.compressedContent=d}c.prototype={getContentWorker:function(){var l=new i(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),u=this;return l.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new i(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(l,u,f){return l.pipe(new o).pipe(new a("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new a("compressedSize")).withStreamInfo("compression",u)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(A,n,r){var s=A("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=A("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(A,n,r){var s=A("./utils"),i=(function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a})();n.exports=function(o,a){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?(function(c,l,u,f){var h=i,d=f+u;c^=-1;for(var m=f;m<d;m++)c=c>>>8^h[255&(c^l[m])];return-1^c})(0|a,o,o.length,0):(function(c,l,u,f){var h=i,d=f+u;c^=-1;for(var m=f;m<d;m++)c=c>>>8^h[255&(c^l.charCodeAt(m))];return-1^c})(0|a,o,o.length,0):0}},{"./utils":32}],5:[function(A,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(A,n,r){var s=null;s=typeof Promise<"u"?Promise:A("lie"),n.exports={Promise:s}},{lie:37}],7:[function(A,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=A("pako"),o=A("./utils"),a=A("./stream/GenericWorker"),c=s?"uint8array":"array";function l(u,f){a.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}r.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,u.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},r.compressWorker=function(u){return new l("Deflate",u)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(A,n,r){function s(h,d){var m,p="";for(m=0;m<d;m++)p+=String.fromCharCode(255&h),h>>>=8;return p}function i(h,d,m,p,w,b){var g,x,_=h.file,G=h.compression,y=b!==c.utf8encode,v=o.transformTo("string",b(_.name)),O=o.transformTo("string",c.utf8encode(_.name)),B=_.comment,Y=o.transformTo("string",b(B)),D=o.transformTo("string",c.utf8encode(B)),N=O.length!==_.name.length,M=D.length!==B.length,Z="",R="",I="",$=_.dir,V=_.date,q={crc32:0,compressedSize:0,uncompressedSize:0};d&&!m||(q.crc32=h.crc32,q.compressedSize=h.compressedSize,q.uncompressedSize=h.uncompressedSize);var C=0;d&&(C|=8),y||!N&&!M||(C|=2048);var j=0,te=0;$&&(j|=16),w==="UNIX"?(te=798,j|=(function(J,fe){var be=J;return J||(be=fe?16893:33204),(65535&be)<<16})(_.unixPermissions,$)):(te=20,j|=(function(J){return 63&(J||0)})(_.dosPermissions)),g=V.getUTCHours(),g<<=6,g|=V.getUTCMinutes(),g<<=5,g|=V.getUTCSeconds()/2,x=V.getUTCFullYear()-1980,x<<=4,x|=V.getUTCMonth()+1,x<<=5,x|=V.getUTCDate(),N&&(R=s(1,1)+s(l(v),4)+O,Z+="up"+s(R.length,2)+R),M&&(I=s(1,1)+s(l(Y),4)+D,Z+="uc"+s(I.length,2)+I);var W="";return W+=`
\0`,W+=s(C,2),W+=G.magic,W+=s(g,2),W+=s(x,2),W+=s(q.crc32,4),W+=s(q.compressedSize,4),W+=s(q.uncompressedSize,4),W+=s(v.length,2),W+=s(Z.length,2),{fileRecord:u.LOCAL_FILE_HEADER+W+v+Z,dirRecord:u.CENTRAL_FILE_HEADER+s(te,2)+W+s(Y.length,2)+"\0\0\0\0"+s(j,4)+s(p,4)+v+Z+Y}}var o=A("../utils"),a=A("../stream/GenericWorker"),c=A("../utf8"),l=A("../crc32"),u=A("../signature");function f(h,d,m,p){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=m,this.encodeFileName=p,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,a),f.prototype.push=function(h){var d=h.meta.percent||0,m=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,a.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:m?(d+100*(m-p-1))/m:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var d=this.streamFiles&&!h.file.dir;if(d){var m=i(h,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var d=this.streamFiles&&!h.file.dir,m=i(h,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),d)this.push({data:(function(p){return u.DATA_DESCRIPTOR+s(p.crc32,4)+s(p.compressedSize,4)+s(p.uncompressedSize,4)})(h),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var m=this.bytesWritten-h,p=(function(w,b,g,x,_){var G=o.transformTo("string",_(x));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(w,2)+s(w,2)+s(b,4)+s(g,4)+s(G.length,2)+G})(this.dirRecords.length,m,h,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var d=this;return h.on("data",function(m){d.processChunk(m)}),h.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),h.on("error",function(m){d.error(m)}),this},f.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var d=this._sources;if(!a.prototype.error.call(this,h))return!1;for(var m=0;m<d.length;m++)try{d[m].error(h)}catch{}return!0},f.prototype.lock=function(){a.prototype.lock.call(this);for(var h=this._sources,d=0;d<h.length;d++)h[d].lock()},n.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(A,n,r){var s=A("../compressions"),i=A("./ZipFileWorker");r.generateWorker=function(o,a,c){var l=new i(a.streamFiles,c,a.platform,a.encodeFileName),u=0;try{o.forEach(function(f,h){u++;var d=(function(b,g){var x=b||g,_=s[x];if(!_)throw new Error(x+" is not a valid compression method !");return _})(h.options.compression,a.compression),m=h.options.compressionOptions||a.compressionOptions||{},p=h.dir,w=h.date;h._compressWorker(d,m).withStreamInfo("file",{name:f,dir:p,date:w,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(l)}),l.entriesCount=u}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(A,n,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new s;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(s.prototype=A("./object")).loadAsync=A("./load"),s.support=A("./support"),s.defaults=A("./defaults"),s.version="3.10.1",s.loadAsync=function(i,o){return new s().loadAsync(i,o)},s.external=A("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(A,n,r){var s=A("./utils"),i=A("./external"),o=A("./utf8"),a=A("./zipEntries"),c=A("./stream/Crc32Probe"),l=A("./nodejsUtils");function u(f){return new i.Promise(function(h,d){var m=f.decompressed.getContentWorker().pipe(new c);m.on("error",function(p){d(p)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}n.exports=function(f,h){var d=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(m){var p=new a(h);return p.load(m),p}).then(function(m){var p=[i.Promise.resolve(m)],w=m.files;if(h.checkCRC32)for(var b=0;b<w.length;b++)p.push(u(w[b]));return i.Promise.all(p)}).then(function(m){for(var p=m.shift(),w=p.files,b=0;b<w.length;b++){var g=w[b],x=g.fileNameStr,_=s.resolve(g.fileNameStr);d.file(_,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:h.createFolders}),g.dir||(d.file(_).unsafeOriginalName=x)}return p.zipComment.length&&(d.comment=p.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(A,n,r){var s=A("../utils"),i=A("../stream/GenericWorker");function o(a,c){i.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,i),o.prototype._bindStream=function(a){var c=this;(this._stream=a).pause(),a.on("data",function(l){c.push({data:l,meta:{percent:0}})}).on("error",function(l){c.isPaused?this.generatedError=l:c.error(l)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(A,n,r){var s=A("readable-stream").Readable;function i(o,a,c){s.call(this,a),this._helper=o;var l=this;o.on("data",function(u,f){l.push(u)||l._helper.pause(),c&&c(f)}).on("error",function(u){l.emit("error",u)}).on("end",function(){l.push(null)})}A("../utils").inherits(i,s),i.prototype._read=function(){this._helper.resume()},n.exports=i},{"../utils":32,"readable-stream":16}],14:[function(A,n,r){n.exports={isNode:typeof Tt<"u",newBufferFrom:function(s,i){if(Tt.from&&Tt.from!==Uint8Array.from)return Tt.from(s,i);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Tt(s,i)},allocBuffer:function(s){if(Tt.alloc)return Tt.alloc(s);var i=new Tt(s);return i.fill(0),i},isBuffer:function(s){return Tt.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(A,n,r){function s(_,G,y){var v,O=o.getTypeOf(G),B=o.extend(y||{},l);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(_=w(_)),B.createFolders&&(v=p(_))&&b.call(this,v,!0);var Y=O==="string"&&B.binary===!1&&B.base64===!1;y&&y.binary!==void 0||(B.binary=!Y),(G instanceof u&&G.uncompressedSize===0||B.dir||!G||G.length===0)&&(B.base64=!1,B.binary=!0,G="",B.compression="STORE",O="string");var D=null;D=G instanceof u||G instanceof a?G:d.isNode&&d.isStream(G)?new m(_,G):o.prepareContent(_,G,B.binary,B.optimizedBinaryString,B.base64);var N=new f(_,D,B);this.files[_]=N}var i=A("./utf8"),o=A("./utils"),a=A("./stream/GenericWorker"),c=A("./stream/StreamHelper"),l=A("./defaults"),u=A("./compressedObject"),f=A("./zipObject"),h=A("./generate"),d=A("./nodejsUtils"),m=A("./nodejs/NodejsStreamInputAdapter"),p=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var G=_.lastIndexOf("/");return 0<G?_.substring(0,G):""},w=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},b=function(_,G){return G=G!==void 0?G:l.createFolders,_=w(_),this.files[_]||s.call(this,_,null,{dir:!0,createFolders:G}),this.files[_]};function g(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var G,y,v;for(G in this.files)v=this.files[G],(y=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&_(y,v)},filter:function(_){var G=[];return this.forEach(function(y,v){_(y,v)&&G.push(v)}),G},file:function(_,G,y){if(arguments.length!==1)return _=this.root+_,s.call(this,_,G,y),this;if(g(_)){var v=_;return this.filter(function(B,Y){return!Y.dir&&v.test(B)})}var O=this.files[this.root+_];return O&&!O.dir?O:null},folder:function(_){if(!_)return this;if(g(_))return this.filter(function(O,B){return B.dir&&_.test(O)});var G=this.root+_,y=b.call(this,G),v=this.clone();return v.root=y.name,v},remove:function(_){_=this.root+_;var G=this.files[_];if(G||(_.slice(-1)!=="/"&&(_+="/"),G=this.files[_]),G&&!G.dir)delete this.files[_];else for(var y=this.filter(function(O,B){return B.name.slice(0,_.length)===_}),v=0;v<y.length;v++)delete this.files[y[v].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var G,y={};try{if((y=o.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=y.type.toLowerCase(),y.compression=y.compression.toUpperCase(),y.type==="binarystring"&&(y.type="string"),!y.type)throw new Error("No output type specified.");o.checkSupport(y.type),y.platform!=="darwin"&&y.platform!=="freebsd"&&y.platform!=="linux"&&y.platform!=="sunos"||(y.platform="UNIX"),y.platform==="win32"&&(y.platform="DOS");var v=y.comment||this.comment||"";G=h.generateWorker(this,y,v)}catch(O){(G=new a("error")).error(O)}return new c(G,y.type||"string",y.mimeType)},generateAsync:function(_,G){return this.generateInternalStream(_).accumulate(G)},generateNodeStream:function(_,G){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(G)}};n.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(A,n,r){n.exports=A("stream")},{stream:void 0}],17:[function(A,n,r){var s=A("./DataReader");function i(o){s.call(this,o);for(var a=0;a<this.data.length;a++)o[a]=255&o[a]}A("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var a=o.charCodeAt(0),c=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===a&&this.data[f+1]===c&&this.data[f+2]===l&&this.data[f+3]===u)return f-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var a=o.charCodeAt(0),c=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.readData(4);return a===f[0]&&c===f[1]&&l===f[2]&&u===f[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},n.exports=i},{"../utils":32,"./DataReader":18}],18:[function(A,n,r){var s=A("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var a,c=0;for(this.checkOffset(o),a=this.index+o-1;a>=this.index;a--)c=(c<<8)+this.byteAt(a);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=i},{"../utils":32}],19:[function(A,n,r){var s=A("./Uint8ArrayReader");function i(o){s.call(this,o)}A("../utils").inherits(i,s),i.prototype.readData=function(o){this.checkOffset(o);var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},n.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(A,n,r){var s=A("./DataReader");function i(o){s.call(this,o)}A("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var a=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},n.exports=i},{"../utils":32,"./DataReader":18}],21:[function(A,n,r){var s=A("./ArrayReader");function i(o){s.call(this,o)}A("../utils").inherits(i,s),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,a},n.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(A,n,r){var s=A("../utils"),i=A("../support"),o=A("./ArrayReader"),a=A("./StringReader"),c=A("./NodeBufferReader"),l=A("./Uint8ArrayReader");n.exports=function(u){var f=s.getTypeOf(u);return s.checkSupport(f),f!=="string"||i.uint8array?f==="nodebuffer"?new c(u):i.uint8array?new l(s.transformTo("uint8array",u)):new o(s.transformTo("array",u)):new a(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(A,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(A,n,r){var s=A("./GenericWorker"),i=A("../utils");function o(a){s.call(this,"ConvertWorker to "+a),this.destType=a}i.inherits(o,s),o.prototype.processChunk=function(a){this.push({data:i.transformTo(this.destType,a.data),meta:a.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(A,n,r){var s=A("./GenericWorker"),i=A("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}A("../utils").inherits(o,s),o.prototype.processChunk=function(a){this.streamInfo.crc32=i(a.data,this.streamInfo.crc32||0),this.push(a)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(A,n,r){var s=A("../utils"),i=A("./GenericWorker");function o(a){i.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}s.inherits(o,i),o.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}i.prototype.processChunk.call(this,a)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(A,n,r){var s=A("../utils"),i=A("./GenericWorker");function o(a){i.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(l){c.dataIsReady=!0,c.data=l,c.max=l&&l.length||0,c.type=s.getTypeOf(l),c.isPaused||c._tickAndRepeat()},function(l){c.error(l)})}s.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,c);break;case"uint8array":a=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":a=this.data.slice(this.index,c)}return this.index=c,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(A,n,r){function s(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var a=0;a<this._listeners[i].length;a++)this._listeners[i][a].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(a){o.processChunk(a)}),i.on("end",function(){o.end()}),i.on("error",function(a){o.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},n.exports=s},{}],29:[function(A,n,r){var s=A("../utils"),i=A("./ConvertWorker"),o=A("./GenericWorker"),a=A("../base64"),c=A("../support"),l=A("../external"),u=null;if(c.nodestream)try{u=A("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(d,m){return new l.Promise(function(p,w){var b=[],g=d._internalType,x=d._outputType,_=d._mimeType;d.on("data",function(G,y){b.push(G),m&&m(y)}).on("error",function(G){b=[],w(G)}).on("end",function(){try{var G=(function(y,v,O){switch(y){case"blob":return s.newBlob(s.transformTo("arraybuffer",v),O);case"base64":return a.encode(v);default:return s.transformTo(y,v)}})(x,(function(y,v){var O,B=0,Y=null,D=0;for(O=0;O<v.length;O++)D+=v[O].length;switch(y){case"string":return v.join("");case"array":return Array.prototype.concat.apply([],v);case"uint8array":for(Y=new Uint8Array(D),O=0;O<v.length;O++)Y.set(v[O],B),B+=v[O].length;return Y;case"nodebuffer":return Tt.concat(v);default:throw new Error("concat : unsupported type '"+y+"'")}})(g,b),_);p(G)}catch(y){w(y)}b=[]}).resume()})}function h(d,m,p){var w=m;switch(m){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=m,this._mimeType=p,s.checkSupport(w),this._worker=d.pipe(new i(w)),d.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}h.prototype={accumulate:function(d){return f(this,d)},on:function(d,m){var p=this;return d==="data"?this._worker.on(d,function(w){m.call(p,w.data,w.meta)}):this._worker.on(d,function(){s.delay(m,arguments,p)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},d)}},n.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(A,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Tt<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(s),r.blob=i.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!A("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(A,n,r){for(var s=A("./utils"),i=A("./support"),o=A("./nodejsUtils"),a=A("./stream/GenericWorker"),c=new Array(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;c[254]=c[254]=1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function f(){a.call(this,"utf-8 encode")}r.utf8encode=function(h){return i.nodebuffer?o.newBufferFrom(h,"utf-8"):(function(d){var m,p,w,b,g,x=d.length,_=0;for(b=0;b<x;b++)(64512&(p=d.charCodeAt(b)))==55296&&b+1<x&&(64512&(w=d.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(w-56320),b++),_+=p<128?1:p<2048?2:p<65536?3:4;for(m=i.uint8array?new Uint8Array(_):new Array(_),b=g=0;g<_;b++)(64512&(p=d.charCodeAt(b)))==55296&&b+1<x&&(64512&(w=d.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(w-56320),b++),p<128?m[g++]=p:(p<2048?m[g++]=192|p>>>6:(p<65536?m[g++]=224|p>>>12:(m[g++]=240|p>>>18,m[g++]=128|p>>>12&63),m[g++]=128|p>>>6&63),m[g++]=128|63&p);return m})(h)},r.utf8decode=function(h){return i.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):(function(d){var m,p,w,b,g=d.length,x=new Array(2*g);for(m=p=0;m<g;)if((w=d[m++])<128)x[p++]=w;else if(4<(b=c[w]))x[p++]=65533,m+=b-1;else{for(w&=b===2?31:b===3?15:7;1<b&&m<g;)w=w<<6|63&d[m++],b--;1<b?x[p++]=65533:w<65536?x[p++]=w:(w-=65536,x[p++]=55296|w>>10&1023,x[p++]=56320|1023&w)}return x.length!==p&&(x.subarray?x=x.subarray(0,p):x.length=p),s.applyFromCharCode(x)})(h=s.transformTo(i.uint8array?"uint8array":"array",h))},s.inherits(u,a),u.prototype.processChunk=function(h){var d=s.transformTo(i.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var m=d;(d=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),d.set(m,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var p=(function(b,g){var x;for((g=g||b.length)>b.length&&(g=b.length),x=g-1;0<=x&&(192&b[x])==128;)x--;return x<0||x===0?g:x+c[b[x]]>g?x:g})(d),w=d;p!==d.length&&(i.uint8array?(w=d.subarray(0,p),this.leftOver=d.subarray(p,d.length)):(w=d.slice(0,p),this.leftOver=d.slice(p,d.length))),this.push({data:r.utf8decode(w),meta:h.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,s.inherits(f,a),f.prototype.processChunk=function(h){this.push({data:r.utf8encode(h.data),meta:h.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(A,n,r){var s=A("./support"),i=A("./base64"),o=A("./nodejsUtils"),a=A("./external");function c(m){return m}function l(m,p){for(var w=0;w<m.length;++w)p[w]=255&m.charCodeAt(w);return p}A("setimmediate"),r.newBlob=function(m,p){r.checkSupport("blob");try{return new Blob([m],{type:p})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(m),w.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(m,p,w){var b=[],g=0,x=m.length;if(x<=w)return String.fromCharCode.apply(null,m);for(;g<x;)p==="array"||p==="nodebuffer"?b.push(String.fromCharCode.apply(null,m.slice(g,Math.min(g+w,x)))):b.push(String.fromCharCode.apply(null,m.subarray(g,Math.min(g+w,x)))),g+=w;return b.join("")},stringifyByChar:function(m){for(var p="",w=0;w<m.length;w++)p+=String.fromCharCode(m[w]);return p},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function f(m){var p=65536,w=r.getTypeOf(m),b=!0;if(w==="uint8array"?b=u.applyCanBeUsed.uint8array:w==="nodebuffer"&&(b=u.applyCanBeUsed.nodebuffer),b)for(;1<p;)try{return u.stringifyByChunk(m,w,p)}catch{p=Math.floor(p/2)}return u.stringifyByChar(m)}function h(m,p){for(var w=0;w<m.length;w++)p[w]=m[w];return p}r.applyFromCharCode=f;var d={};d.string={string:c,array:function(m){return l(m,new Array(m.length))},arraybuffer:function(m){return d.string.uint8array(m).buffer},uint8array:function(m){return l(m,new Uint8Array(m.length))},nodebuffer:function(m){return l(m,o.allocBuffer(m.length))}},d.array={string:f,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},d.arraybuffer={string:function(m){return f(new Uint8Array(m))},array:function(m){return h(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},d.uint8array={string:f,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return o.newBufferFrom(m)}},d.nodebuffer={string:f,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return d.nodebuffer.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:c},r.transformTo=function(m,p){if(p=p||"",!m)return p;r.checkSupport(m);var w=r.getTypeOf(p);return d[w][m](p)},r.resolve=function(m){for(var p=m.split("/"),w=[],b=0;b<p.length;b++){var g=p[b];g==="."||g===""&&b!==0&&b!==p.length-1||(g===".."?w.pop():w.push(g))}return w.join("/")},r.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(m){var p,w,b="";for(w=0;w<(m||"").length;w++)b+="\\x"+((p=m.charCodeAt(w))<16?"0":"")+p.toString(16).toUpperCase();return b},r.delay=function(m,p,w){setImmediate(function(){m.apply(w||null,p||[])})},r.inherits=function(m,p){function w(){}w.prototype=p.prototype,m.prototype=new w},r.extend=function(){var m,p,w={};for(m=0;m<arguments.length;m++)for(p in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],p)&&w[p]===void 0&&(w[p]=arguments[m][p]);return w},r.prepareContent=function(m,p,w,b,g){return a.Promise.resolve(p).then(function(x){return s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new a.Promise(function(_,G){var y=new FileReader;y.onload=function(v){_(v.target.result)},y.onerror=function(v){G(v.target.error)},y.readAsArrayBuffer(x)}):x}).then(function(x){var _=r.getTypeOf(x);return _?(_==="arraybuffer"?x=r.transformTo("uint8array",x):_==="string"&&(g?x=i.decode(x):w&&b!==!0&&(x=(function(G){return l(G,s.uint8array?new Uint8Array(G.length):new Array(G.length))})(x))),x):a.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(A,n,r){var s=A("./reader/readerFor"),i=A("./utils"),o=A("./signature"),a=A("./zipEntry"),c=A("./support");function l(u){this.files=[],this.loadOptions=u}l.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(u)+")")}},isSignature:function(u,f){var h=this.reader.index;this.reader.setIndex(u);var d=this.reader.readString(4)===f;return this.reader.setIndex(h),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=c.uint8array?"uint8array":"array",h=i.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,h,d=this.zip64EndOfCentralSize-44;0<d;)u=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var d=f-h;if(0<d)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(A,n,r){var s=A("./reader/readerFor"),i=A("./utils"),o=A("./compressedObject"),a=A("./crc32"),c=A("./utf8"),l=A("./compressions"),u=A("./support");function f(h,d){this.options=h,this.loadOptions=d}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var d,m;if(h.skip(22),this.fileNameLength=h.readInt(2),m=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=(function(p){for(var w in l)if(Object.prototype.hasOwnProperty.call(l,w)&&l[w].magic===p)return l[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,d,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var d=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(d),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var d,m,p,w=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<w;)d=h.readInt(2),m=h.readInt(2),p=h.readData(m),this.extraFields[d]={id:d,length:m,value:p};h.setIndex(w)},handleUTF8:function(){var h=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var m=i.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var w=i.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var d=s(h.value);return d.readInt(1)!==1||a(this.fileName)!==d.readInt(4)?null:c.utf8decode(d.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var d=s(h.value);return d.readInt(1)!==1||a(this.fileComment)!==d.readInt(4)?null:c.utf8decode(d.readData(h.length-5))}return null}},n.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(A,n,r){function s(d,m,p){this.name=d,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=m,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var i=A("./stream/StreamHelper"),o=A("./stream/DataWorker"),a=A("./utf8"),c=A("./compressedObject"),l=A("./stream/GenericWorker");s.prototype={internalStream:function(d){var m=null,p="string";try{if(!d)throw new Error("No output type specified.");var w=(p=d.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),m=this._decompressWorker();var b=!this._dataBinary;b&&!w&&(m=m.pipe(new a.Utf8EncodeWorker)),!b&&w&&(m=m.pipe(new a.Utf8DecodeWorker))}catch(g){(m=new l("error")).error(g)}return new i(m,p,"")},async:function(d,m){return this.internalStream(d).accumulate(m)},nodeStream:function(d,m){return this.internalStream(d||"nodebuffer").toNodejsStream(m)},_compressWorker:function(d,m){if(this._data instanceof c&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(p,d,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)s.prototype[u[h]]=f;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(A,n,r){(function(s){var i,o,a=s.MutationObserver||s.WebKitMutationObserver;if(a){var c=0,l=new a(d),u=s.document.createTextNode("");l.observe(u,{characterData:!0}),i=function(){u.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)i="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){d(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(d,0)};else{var f=new s.MessageChannel;f.port1.onmessage=d,i=function(){f.port2.postMessage(0)}}var h=[];function d(){var m,p;o=!0;for(var w=h.length;w;){for(p=h,h=[],m=-1;++m<w;)p[m]();w=h.length}o=!1}n.exports=function(m){h.push(m)!==1||o||i()}}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(A,n,r){var s=A("immediate");function i(){}var o={},a=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function u(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,w!==i&&m(this,w)}function f(w,b,g){this.promise=w,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}function h(w,b,g){s(function(){var x;try{x=b(g)}catch(_){return o.reject(w,_)}x===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,x)})}function d(w){var b=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof b=="function")return function(){b.apply(w,arguments)}}function m(w,b){var g=!1;function x(y){g||(g=!0,o.reject(w,y))}function _(y){g||(g=!0,o.resolve(w,y))}var G=p(function(){b(_,x)});G.status==="error"&&x(G.value)}function p(w,b){var g={};try{g.value=w(b),g.status="success"}catch(x){g.status="error",g.value=x}return g}(n.exports=u).prototype.finally=function(w){if(typeof w!="function")return this;var b=this.constructor;return this.then(function(g){return b.resolve(w()).then(function(){return g})},function(g){return b.resolve(w()).then(function(){throw g})})},u.prototype.catch=function(w){return this.then(null,w)},u.prototype.then=function(w,b){if(typeof w!="function"&&this.state===c||typeof b!="function"&&this.state===a)return this;var g=new this.constructor(i);return this.state!==l?h(g,this.state===c?w:b,this.outcome):this.queue.push(new f(g,w,b)),g},f.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},f.prototype.otherCallFulfilled=function(w){h(this.promise,this.onFulfilled,w)},f.prototype.callRejected=function(w){o.reject(this.promise,w)},f.prototype.otherCallRejected=function(w){h(this.promise,this.onRejected,w)},o.resolve=function(w,b){var g=p(d,b);if(g.status==="error")return o.reject(w,g.value);var x=g.value;if(x)m(w,x);else{w.state=c,w.outcome=b;for(var _=-1,G=w.queue.length;++_<G;)w.queue[_].callFulfilled(b)}return w},o.reject=function(w,b){w.state=a,w.outcome=b;for(var g=-1,x=w.queue.length;++g<x;)w.queue[g].callRejected(b);return w},u.resolve=function(w){return w instanceof this?w:o.resolve(new this(i),w)},u.reject=function(w){var b=new this(i);return o.reject(b,w)},u.all=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=w.length,x=!1;if(!g)return this.resolve([]);for(var _=new Array(g),G=0,y=-1,v=new this(i);++y<g;)O(w[y],y);return v;function O(B,Y){b.resolve(B).then(function(D){_[Y]=D,++G!==g||x||(x=!0,o.resolve(v,_))},function(D){x||(x=!0,o.reject(v,D))})}},u.race=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=w.length,x=!1;if(!g)return this.resolve([]);for(var _=-1,G=new this(i);++_<g;)y=w[_],b.resolve(y).then(function(v){x||(x=!0,o.resolve(G,v))},function(v){x||(x=!0,o.reject(G,v))});var y;return G}},{immediate:36}],38:[function(A,n,r){var s={};(0,A("./lib/utils/common").assign)(s,A("./lib/deflate"),A("./lib/inflate"),A("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(A,n,r){var s=A("./zlib/deflate"),i=A("./utils/common"),o=A("./utils/strings"),a=A("./zlib/messages"),c=A("./zlib/zstream"),l=Object.prototype.toString,u=0,f=-1,h=0,d=8;function m(w){if(!(this instanceof m))return new m(w);this.options=i.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},w||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(g!==u)throw new Error(a[g]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var x;if(x=typeof b.dictionary=="string"?o.string2buf(b.dictionary):l.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(g=s.deflateSetDictionary(this.strm,x))!==u)throw new Error(a[g]);this._dict_set=!0}}function p(w,b){var g=new m(b);if(g.push(w,!0),g.err)throw g.msg||a[g.err];return g.result}m.prototype.push=function(w,b){var g,x,_=this.strm,G=this.options.chunkSize;if(this.ended)return!1;x=b===~~b?b:b===!0?4:0,typeof w=="string"?_.input=o.string2buf(w):l.call(w)==="[object ArrayBuffer]"?_.input=new Uint8Array(w):_.input=w,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new i.Buf8(G),_.next_out=0,_.avail_out=G),(g=s.deflate(_,x))!==1&&g!==u)return this.onEnd(g),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(_.output,_.next_out))):this.onData(i.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&g!==1);return x===4?(g=s.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u):x!==2||(this.onEnd(u),!(_.avail_out=0))},m.prototype.onData=function(w){this.chunks.push(w)},m.prototype.onEnd=function(w){w===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},r.Deflate=m,r.deflate=p,r.deflateRaw=function(w,b){return(b=b||{}).raw=!0,p(w,b)},r.gzip=function(w,b){return(b=b||{}).gzip=!0,p(w,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(A,n,r){var s=A("./zlib/inflate"),i=A("./utils/common"),o=A("./utils/strings"),a=A("./zlib/constants"),c=A("./zlib/messages"),l=A("./zlib/zstream"),u=A("./zlib/gzheader"),f=Object.prototype.toString;function h(m){if(!(this instanceof h))return new h(m);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},m||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||m&&m.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&(15&p.windowBits)==0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var w=s.inflateInit2(this.strm,p.windowBits);if(w!==a.Z_OK)throw new Error(c[w]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function d(m,p){var w=new h(p);if(w.push(m,!0),w.err)throw w.msg||c[w.err];return w.result}h.prototype.push=function(m,p){var w,b,g,x,_,G,y=this.strm,v=this.options.chunkSize,O=this.options.dictionary,B=!1;if(this.ended)return!1;b=p===~~p?p:p===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof m=="string"?y.input=o.binstring2buf(m):f.call(m)==="[object ArrayBuffer]"?y.input=new Uint8Array(m):y.input=m,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new i.Buf8(v),y.next_out=0,y.avail_out=v),(w=s.inflate(y,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&O&&(G=typeof O=="string"?o.string2buf(O):f.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,w=s.inflateSetDictionary(this.strm,G)),w===a.Z_BUF_ERROR&&B===!0&&(w=a.Z_OK,B=!1),w!==a.Z_STREAM_END&&w!==a.Z_OK)return this.onEnd(w),!(this.ended=!0);y.next_out&&(y.avail_out!==0&&w!==a.Z_STREAM_END&&(y.avail_in!==0||b!==a.Z_FINISH&&b!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(g=o.utf8border(y.output,y.next_out),x=y.next_out-g,_=o.buf2string(y.output,g),y.next_out=x,y.avail_out=v-x,x&&i.arraySet(y.output,y.output,g,x,0),this.onData(_)):this.onData(i.shrinkBuf(y.output,y.next_out)))),y.avail_in===0&&y.avail_out===0&&(B=!0)}while((0<y.avail_in||y.avail_out===0)&&w!==a.Z_STREAM_END);return w===a.Z_STREAM_END&&(b=a.Z_FINISH),b===a.Z_FINISH?(w=s.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===a.Z_OK):b!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(y.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Inflate=h,r.inflate=d,r.inflateRaw=function(m,p){return(p=p||{}).raw=!0,d(m,p)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(A,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var l=c.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])}}return a},r.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var i={arraySet:function(a,c,l,u,f){if(c.subarray&&a.subarray)a.set(c.subarray(l,l+u),f);else for(var h=0;h<u;h++)a[f+h]=c[l+h]},flattenChunks:function(a){var c,l,u,f,h,d;for(c=u=0,l=a.length;c<l;c++)u+=a[c].length;for(d=new Uint8Array(u),c=f=0,l=a.length;c<l;c++)h=a[c],d.set(h,f),f+=h.length;return d}},o={arraySet:function(a,c,l,u,f){for(var h=0;h<u;h++)a[f+h]=c[l+h]},flattenChunks:function(a){return[].concat.apply([],a)}};r.setTyped=function(a){a?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(A,n,r){var s=A("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var a=new s.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(u,f){if(f<65537&&(u.subarray&&o||!u.subarray&&i))return String.fromCharCode.apply(null,s.shrinkBuf(u,f));for(var h="",d=0;d<f;d++)h+=String.fromCharCode(u[d]);return h}a[254]=a[254]=1,r.string2buf=function(u){var f,h,d,m,p,w=u.length,b=0;for(m=0;m<w;m++)(64512&(h=u.charCodeAt(m)))==55296&&m+1<w&&(64512&(d=u.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(d-56320),m++),b+=h<128?1:h<2048?2:h<65536?3:4;for(f=new s.Buf8(b),m=p=0;p<b;m++)(64512&(h=u.charCodeAt(m)))==55296&&m+1<w&&(64512&(d=u.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(d-56320),m++),h<128?f[p++]=h:(h<2048?f[p++]=192|h>>>6:(h<65536?f[p++]=224|h>>>12:(f[p++]=240|h>>>18,f[p++]=128|h>>>12&63),f[p++]=128|h>>>6&63),f[p++]=128|63&h);return f},r.buf2binstring=function(u){return l(u,u.length)},r.binstring2buf=function(u){for(var f=new s.Buf8(u.length),h=0,d=f.length;h<d;h++)f[h]=u.charCodeAt(h);return f},r.buf2string=function(u,f){var h,d,m,p,w=f||u.length,b=new Array(2*w);for(h=d=0;h<w;)if((m=u[h++])<128)b[d++]=m;else if(4<(p=a[m]))b[d++]=65533,h+=p-1;else{for(m&=p===2?31:p===3?15:7;1<p&&h<w;)m=m<<6|63&u[h++],p--;1<p?b[d++]=65533:m<65536?b[d++]=m:(m-=65536,b[d++]=55296|m>>10&1023,b[d++]=56320|1023&m)}return l(b,d)},r.utf8border=function(u,f){var h;for((f=f||u.length)>u.length&&(f=u.length),h=f-1;0<=h&&(192&u[h])==128;)h--;return h<0||h===0?f:h+a[u[h]]>f?h:f}},{"./common":41}],43:[function(A,n,r){n.exports=function(s,i,o,a){for(var c=65535&s|0,l=s>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;l=l+(c=c+i[a++]|0)|0,--u;);c%=65521,l%=65521}return c|l<<16|0}},{}],44:[function(A,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(A,n,r){var s=(function(){for(var i,o=[],a=0;a<256;a++){i=a;for(var c=0;c<8;c++)i=1&i?3988292384^i>>>1:i>>>1;o[a]=i}return o})();n.exports=function(i,o,a,c){var l=s,u=c+a;i^=-1;for(var f=c;f<u;f++)i=i>>>8^l[255&(i^o[f])];return-1^i}},{}],46:[function(A,n,r){var s,i=A("../utils/common"),o=A("./trees"),a=A("./adler32"),c=A("./crc32"),l=A("./messages"),u=0,f=4,h=0,d=-2,m=-1,p=4,w=2,b=8,g=9,x=286,_=30,G=19,y=2*x+1,v=15,O=3,B=258,Y=B+O+1,D=42,N=113,M=1,Z=2,R=3,I=4;function $(P,X){return P.msg=l[X],X}function V(P){return(P<<1)-(4<P?9:0)}function q(P){for(var X=P.length;0<=--X;)P[X]=0}function C(P){var X=P.state,ee=X.pending;ee>P.avail_out&&(ee=P.avail_out),ee!==0&&(i.arraySet(P.output,X.pending_buf,X.pending_out,ee,P.next_out),P.next_out+=ee,X.pending_out+=ee,P.total_out+=ee,P.avail_out-=ee,X.pending-=ee,X.pending===0&&(X.pending_out=0))}function j(P,X){o._tr_flush_block(P,0<=P.block_start?P.block_start:-1,P.strstart-P.block_start,X),P.block_start=P.strstart,C(P.strm)}function te(P,X){P.pending_buf[P.pending++]=X}function W(P,X){P.pending_buf[P.pending++]=X>>>8&255,P.pending_buf[P.pending++]=255&X}function J(P,X){var ee,U,H=P.max_chain_length,Q=P.strstart,de=P.prev_length,pe=P.nice_match,oe=P.strstart>P.w_size-Y?P.strstart-(P.w_size-Y):0,Me=P.window,Se=P.w_mask,Be=P.prev,Ue=P.strstart+B,vt=Me[Q+de-1],tt=Me[Q+de];P.prev_length>=P.good_match&&(H>>=2),pe>P.lookahead&&(pe=P.lookahead);do if(Me[(ee=X)+de]===tt&&Me[ee+de-1]===vt&&Me[ee]===Me[Q]&&Me[++ee]===Me[Q+1]){Q+=2,ee++;do;while(Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Me[++Q]===Me[++ee]&&Q<Ue);if(U=B-(Ue-Q),Q=Ue-B,de<U){if(P.match_start=X,pe<=(de=U))break;vt=Me[Q+de-1],tt=Me[Q+de]}}while((X=Be[X&Se])>oe&&--H!=0);return de<=P.lookahead?de:P.lookahead}function fe(P){var X,ee,U,H,Q,de,pe,oe,Me,Se,Be=P.w_size;do{if(H=P.window_size-P.lookahead-P.strstart,P.strstart>=Be+(Be-Y)){for(i.arraySet(P.window,P.window,Be,Be,0),P.match_start-=Be,P.strstart-=Be,P.block_start-=Be,X=ee=P.hash_size;U=P.head[--X],P.head[X]=Be<=U?U-Be:0,--ee;);for(X=ee=Be;U=P.prev[--X],P.prev[X]=Be<=U?U-Be:0,--ee;);H+=Be}if(P.strm.avail_in===0)break;if(de=P.strm,pe=P.window,oe=P.strstart+P.lookahead,Me=H,Se=void 0,Se=de.avail_in,Me<Se&&(Se=Me),ee=Se===0?0:(de.avail_in-=Se,i.arraySet(pe,de.input,de.next_in,Se,oe),de.state.wrap===1?de.adler=a(de.adler,pe,Se,oe):de.state.wrap===2&&(de.adler=c(de.adler,pe,Se,oe)),de.next_in+=Se,de.total_in+=Se,Se),P.lookahead+=ee,P.lookahead+P.insert>=O)for(Q=P.strstart-P.insert,P.ins_h=P.window[Q],P.ins_h=(P.ins_h<<P.hash_shift^P.window[Q+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[Q+O-1])&P.hash_mask,P.prev[Q&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=Q,Q++,P.insert--,!(P.lookahead+P.insert<O)););}while(P.lookahead<Y&&P.strm.avail_in!==0)}function be(P,X){for(var ee,U;;){if(P.lookahead<Y){if(fe(P),P.lookahead<Y&&X===u)return M;if(P.lookahead===0)break}if(ee=0,P.lookahead>=O&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+O-1])&P.hash_mask,ee=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),ee!==0&&P.strstart-ee<=P.w_size-Y&&(P.match_length=J(P,ee)),P.match_length>=O)if(U=o._tr_tally(P,P.strstart-P.match_start,P.match_length-O),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=O){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+O-1])&P.hash_mask,ee=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else U=o._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(U&&(j(P,!1),P.strm.avail_out===0))return M}return P.insert=P.strstart<O-1?P.strstart:O-1,X===f?(j(P,!0),P.strm.avail_out===0?R:I):P.last_lit&&(j(P,!1),P.strm.avail_out===0)?M:Z}function me(P,X){for(var ee,U,H;;){if(P.lookahead<Y){if(fe(P),P.lookahead<Y&&X===u)return M;if(P.lookahead===0)break}if(ee=0,P.lookahead>=O&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+O-1])&P.hash_mask,ee=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=O-1,ee!==0&&P.prev_length<P.max_lazy_match&&P.strstart-ee<=P.w_size-Y&&(P.match_length=J(P,ee),P.match_length<=5&&(P.strategy===1||P.match_length===O&&4096<P.strstart-P.match_start)&&(P.match_length=O-1)),P.prev_length>=O&&P.match_length<=P.prev_length){for(H=P.strstart+P.lookahead-O,U=o._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-O),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart<=H&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+O-1])&P.hash_mask,ee=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=O-1,P.strstart++,U&&(j(P,!1),P.strm.avail_out===0))return M}else if(P.match_available){if((U=o._tr_tally(P,0,P.window[P.strstart-1]))&&j(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return M}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(U=o._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<O-1?P.strstart:O-1,X===f?(j(P,!0),P.strm.avail_out===0?R:I):P.last_lit&&(j(P,!1),P.strm.avail_out===0)?M:Z}function _e(P,X,ee,U,H){this.good_length=P,this.max_lazy=X,this.nice_length=ee,this.max_chain=U,this.func=H}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*y),this.dyn_dtree=new i.Buf16(2*(2*_+1)),this.bl_tree=new i.Buf16(2*(2*G+1)),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(v+1),this.heap=new i.Buf16(2*x+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*x+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Oe(P){var X;return P&&P.state?(P.total_in=P.total_out=0,P.data_type=w,(X=P.state).pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap?D:N,P.adler=X.wrap===2?0:1,X.last_flush=u,o._tr_init(X),h):$(P,d)}function Ze(P){var X=Oe(P);return X===h&&(function(ee){ee.window_size=2*ee.w_size,q(ee.head),ee.max_lazy_match=s[ee.level].max_lazy,ee.good_match=s[ee.level].good_length,ee.nice_match=s[ee.level].nice_length,ee.max_chain_length=s[ee.level].max_chain,ee.strstart=0,ee.block_start=0,ee.lookahead=0,ee.insert=0,ee.match_length=ee.prev_length=O-1,ee.match_available=0,ee.ins_h=0})(P.state),X}function Fe(P,X,ee,U,H,Q){if(!P)return d;var de=1;if(X===m&&(X=6),U<0?(de=0,U=-U):15<U&&(de=2,U-=16),H<1||g<H||ee!==b||U<8||15<U||X<0||9<X||Q<0||p<Q)return $(P,d);U===8&&(U=9);var pe=new ke;return(P.state=pe).strm=P,pe.wrap=de,pe.gzhead=null,pe.w_bits=U,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=H+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+O-1)/O),pe.window=new i.Buf8(2*pe.w_size),pe.head=new i.Buf16(pe.hash_size),pe.prev=new i.Buf16(pe.w_size),pe.lit_bufsize=1<<H+6,pe.pending_buf_size=4*pe.lit_bufsize,pe.pending_buf=new i.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=X,pe.strategy=Q,pe.method=ee,Ze(P)}s=[new _e(0,0,0,0,function(P,X){var ee=65535;for(ee>P.pending_buf_size-5&&(ee=P.pending_buf_size-5);;){if(P.lookahead<=1){if(fe(P),P.lookahead===0&&X===u)return M;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var U=P.block_start+ee;if((P.strstart===0||P.strstart>=U)&&(P.lookahead=P.strstart-U,P.strstart=U,j(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-Y&&(j(P,!1),P.strm.avail_out===0))return M}return P.insert=0,X===f?(j(P,!0),P.strm.avail_out===0?R:I):(P.strstart>P.block_start&&(j(P,!1),P.strm.avail_out),M)}),new _e(4,4,8,4,be),new _e(4,5,16,8,be),new _e(4,6,32,32,be),new _e(4,4,16,16,me),new _e(8,16,32,32,me),new _e(8,16,128,128,me),new _e(8,32,128,256,me),new _e(32,128,258,1024,me),new _e(32,258,258,4096,me)],r.deflateInit=function(P,X){return Fe(P,X,b,15,8,0)},r.deflateInit2=Fe,r.deflateReset=Ze,r.deflateResetKeep=Oe,r.deflateSetHeader=function(P,X){return P&&P.state?P.state.wrap!==2?d:(P.state.gzhead=X,h):d},r.deflate=function(P,X){var ee,U,H,Q;if(!P||!P.state||5<X||X<0)return P?$(P,d):d;if(U=P.state,!P.output||!P.input&&P.avail_in!==0||U.status===666&&X!==f)return $(P,P.avail_out===0?-5:d);if(U.strm=P,ee=U.last_flush,U.last_flush=X,U.status===D)if(U.wrap===2)P.adler=0,te(U,31),te(U,139),te(U,8),U.gzhead?(te(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),te(U,255&U.gzhead.time),te(U,U.gzhead.time>>8&255),te(U,U.gzhead.time>>16&255),te(U,U.gzhead.time>>24&255),te(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),te(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(te(U,255&U.gzhead.extra.length),te(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(P.adler=c(P.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(te(U,0),te(U,0),te(U,0),te(U,0),te(U,0),te(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),te(U,3),U.status=N);else{var de=b+(U.w_bits-8<<4)<<8;de|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(de|=32),de+=31-de%31,U.status=N,W(U,de),U.strstart!==0&&(W(U,P.adler>>>16),W(U,65535&P.adler)),P.adler=1}if(U.status===69)if(U.gzhead.extra){for(H=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>H&&(P.adler=c(P.adler,U.pending_buf,U.pending-H,H)),C(P),H=U.pending,U.pending!==U.pending_buf_size));)te(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>H&&(P.adler=c(P.adler,U.pending_buf,U.pending-H,H)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){H=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>H&&(P.adler=c(P.adler,U.pending_buf,U.pending-H,H)),C(P),H=U.pending,U.pending===U.pending_buf_size)){Q=1;break}Q=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,te(U,Q)}while(Q!==0);U.gzhead.hcrc&&U.pending>H&&(P.adler=c(P.adler,U.pending_buf,U.pending-H,H)),Q===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){H=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>H&&(P.adler=c(P.adler,U.pending_buf,U.pending-H,H)),C(P),H=U.pending,U.pending===U.pending_buf_size)){Q=1;break}Q=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,te(U,Q)}while(Q!==0);U.gzhead.hcrc&&U.pending>H&&(P.adler=c(P.adler,U.pending_buf,U.pending-H,H)),Q===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&C(P),U.pending+2<=U.pending_buf_size&&(te(U,255&P.adler),te(U,P.adler>>8&255),P.adler=0,U.status=N)):U.status=N),U.pending!==0){if(C(P),P.avail_out===0)return U.last_flush=-1,h}else if(P.avail_in===0&&V(X)<=V(ee)&&X!==f)return $(P,-5);if(U.status===666&&P.avail_in!==0)return $(P,-5);if(P.avail_in!==0||U.lookahead!==0||X!==u&&U.status!==666){var pe=U.strategy===2?(function(oe,Me){for(var Se;;){if(oe.lookahead===0&&(fe(oe),oe.lookahead===0)){if(Me===u)return M;break}if(oe.match_length=0,Se=o._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,Se&&(j(oe,!1),oe.strm.avail_out===0))return M}return oe.insert=0,Me===f?(j(oe,!0),oe.strm.avail_out===0?R:I):oe.last_lit&&(j(oe,!1),oe.strm.avail_out===0)?M:Z})(U,X):U.strategy===3?(function(oe,Me){for(var Se,Be,Ue,vt,tt=oe.window;;){if(oe.lookahead<=B){if(fe(oe),oe.lookahead<=B&&Me===u)return M;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=O&&0<oe.strstart&&(Be=tt[Ue=oe.strstart-1])===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]){vt=oe.strstart+B;do;while(Be===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]&&Be===tt[++Ue]&&Ue<vt);oe.match_length=B-(vt-Ue),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=O?(Se=o._tr_tally(oe,1,oe.match_length-O),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(Se=o._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),Se&&(j(oe,!1),oe.strm.avail_out===0))return M}return oe.insert=0,Me===f?(j(oe,!0),oe.strm.avail_out===0?R:I):oe.last_lit&&(j(oe,!1),oe.strm.avail_out===0)?M:Z})(U,X):s[U.level].func(U,X);if(pe!==R&&pe!==I||(U.status=666),pe===M||pe===R)return P.avail_out===0&&(U.last_flush=-1),h;if(pe===Z&&(X===1?o._tr_align(U):X!==5&&(o._tr_stored_block(U,0,0,!1),X===3&&(q(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),C(P),P.avail_out===0))return U.last_flush=-1,h}return X!==f?h:U.wrap<=0?1:(U.wrap===2?(te(U,255&P.adler),te(U,P.adler>>8&255),te(U,P.adler>>16&255),te(U,P.adler>>24&255),te(U,255&P.total_in),te(U,P.total_in>>8&255),te(U,P.total_in>>16&255),te(U,P.total_in>>24&255)):(W(U,P.adler>>>16),W(U,65535&P.adler)),C(P),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?h:1)},r.deflateEnd=function(P){var X;return P&&P.state?(X=P.state.status)!==D&&X!==69&&X!==73&&X!==91&&X!==103&&X!==N&&X!==666?$(P,d):(P.state=null,X===N?$(P,-3):h):d},r.deflateSetDictionary=function(P,X){var ee,U,H,Q,de,pe,oe,Me,Se=X.length;if(!P||!P.state||(Q=(ee=P.state).wrap)===2||Q===1&&ee.status!==D||ee.lookahead)return d;for(Q===1&&(P.adler=a(P.adler,X,Se,0)),ee.wrap=0,Se>=ee.w_size&&(Q===0&&(q(ee.head),ee.strstart=0,ee.block_start=0,ee.insert=0),Me=new i.Buf8(ee.w_size),i.arraySet(Me,X,Se-ee.w_size,ee.w_size,0),X=Me,Se=ee.w_size),de=P.avail_in,pe=P.next_in,oe=P.input,P.avail_in=Se,P.next_in=0,P.input=X,fe(ee);ee.lookahead>=O;){for(U=ee.strstart,H=ee.lookahead-(O-1);ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[U+O-1])&ee.hash_mask,ee.prev[U&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=U,U++,--H;);ee.strstart=U,ee.lookahead=O-1,fe(ee)}return ee.strstart+=ee.lookahead,ee.block_start=ee.strstart,ee.insert=ee.lookahead,ee.lookahead=0,ee.match_length=ee.prev_length=O-1,ee.match_available=0,P.next_in=pe,P.input=oe,P.avail_in=de,ee.wrap=Q,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(A,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(A,n,r){n.exports=function(s,i){var o,a,c,l,u,f,h,d,m,p,w,b,g,x,_,G,y,v,O,B,Y,D,N,M,Z;o=s.state,a=s.next_in,M=s.input,c=a+(s.avail_in-5),l=s.next_out,Z=s.output,u=l-(i-s.avail_out),f=l+(s.avail_out-257),h=o.dmax,d=o.wsize,m=o.whave,p=o.wnext,w=o.window,b=o.hold,g=o.bits,x=o.lencode,_=o.distcode,G=(1<<o.lenbits)-1,y=(1<<o.distbits)-1;e:do{g<15&&(b+=M[a++]<<g,g+=8,b+=M[a++]<<g,g+=8),v=x[b&G];t:for(;;){if(b>>>=O=v>>>24,g-=O,(O=v>>>16&255)===0)Z[l++]=65535&v;else{if(!(16&O)){if((64&O)==0){v=x[(65535&v)+(b&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}B=65535&v,(O&=15)&&(g<O&&(b+=M[a++]<<g,g+=8),B+=b&(1<<O)-1,b>>>=O,g-=O),g<15&&(b+=M[a++]<<g,g+=8,b+=M[a++]<<g,g+=8),v=_[b&y];A:for(;;){if(b>>>=O=v>>>24,g-=O,!(16&(O=v>>>16&255))){if((64&O)==0){v=_[(65535&v)+(b&(1<<O)-1)];continue A}s.msg="invalid distance code",o.mode=30;break e}if(Y=65535&v,g<(O&=15)&&(b+=M[a++]<<g,(g+=8)<O&&(b+=M[a++]<<g,g+=8)),h<(Y+=b&(1<<O)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=O,g-=O,(O=l-u)<Y){if(m<(O=Y-O)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(N=w,(D=0)===p){if(D+=d-O,O<B){for(B-=O;Z[l++]=w[D++],--O;);D=l-Y,N=Z}}else if(p<O){if(D+=d+p-O,(O-=p)<B){for(B-=O;Z[l++]=w[D++],--O;);if(D=0,p<B){for(B-=O=p;Z[l++]=w[D++],--O;);D=l-Y,N=Z}}}else if(D+=p-O,O<B){for(B-=O;Z[l++]=w[D++],--O;);D=l-Y,N=Z}for(;2<B;)Z[l++]=N[D++],Z[l++]=N[D++],Z[l++]=N[D++],B-=3;B&&(Z[l++]=N[D++],1<B&&(Z[l++]=N[D++]))}else{for(D=l-Y;Z[l++]=Z[D++],Z[l++]=Z[D++],Z[l++]=Z[D++],2<(B-=3););B&&(Z[l++]=Z[D++],1<B&&(Z[l++]=Z[D++]))}break}}break}}while(a<c&&l<f);a-=B=g>>3,b&=(1<<(g-=B<<3))-1,s.next_in=a,s.next_out=l,s.avail_in=a<c?c-a+5:5-(a-c),s.avail_out=l<f?f-l+257:257-(l-f),o.hold=b,o.bits=g}},{}],49:[function(A,n,r){var s=A("../utils/common"),i=A("./adler32"),o=A("./crc32"),a=A("./inffast"),c=A("./inftrees"),l=1,u=2,f=0,h=-2,d=1,m=852,p=592;function w(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(D){var N;return D&&D.state?(N=D.state,D.total_in=D.total_out=N.total=0,D.msg="",N.wrap&&(D.adler=1&N.wrap),N.mode=d,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new s.Buf32(m),N.distcode=N.distdyn=new s.Buf32(p),N.sane=1,N.back=-1,f):h}function x(D){var N;return D&&D.state?((N=D.state).wsize=0,N.whave=0,N.wnext=0,g(D)):h}function _(D,N){var M,Z;return D&&D.state?(Z=D.state,N<0?(M=0,N=-N):(M=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?h:(Z.window!==null&&Z.wbits!==N&&(Z.window=null),Z.wrap=M,Z.wbits=N,x(D))):h}function G(D,N){var M,Z;return D?(Z=new b,(D.state=Z).window=null,(M=_(D,N))!==f&&(D.state=null),M):h}var y,v,O=!0;function B(D){if(O){var N;for(y=new s.Buf32(512),v=new s.Buf32(32),N=0;N<144;)D.lens[N++]=8;for(;N<256;)D.lens[N++]=9;for(;N<280;)D.lens[N++]=7;for(;N<288;)D.lens[N++]=8;for(c(l,D.lens,0,288,y,0,D.work,{bits:9}),N=0;N<32;)D.lens[N++]=5;c(u,D.lens,0,32,v,0,D.work,{bits:5}),O=!1}D.lencode=y,D.lenbits=9,D.distcode=v,D.distbits=5}function Y(D,N,M,Z){var R,I=D.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new s.Buf8(I.wsize)),Z>=I.wsize?(s.arraySet(I.window,N,M-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(Z<(R=I.wsize-I.wnext)&&(R=Z),s.arraySet(I.window,N,M-Z,R,I.wnext),(Z-=R)?(s.arraySet(I.window,N,M-Z,Z,0),I.wnext=Z,I.whave=I.wsize):(I.wnext+=R,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=R))),0}r.inflateReset=x,r.inflateReset2=_,r.inflateResetKeep=g,r.inflateInit=function(D){return G(D,15)},r.inflateInit2=G,r.inflate=function(D,N){var M,Z,R,I,$,V,q,C,j,te,W,J,fe,be,me,_e,ke,Oe,Ze,Fe,P,X,ee,U,H=0,Q=new s.Buf8(4),de=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return h;(M=D.state).mode===12&&(M.mode=13),$=D.next_out,R=D.output,q=D.avail_out,I=D.next_in,Z=D.input,V=D.avail_in,C=M.hold,j=M.bits,te=V,W=q,X=f;e:for(;;)switch(M.mode){case d:if(M.wrap===0){M.mode=13;break}for(;j<16;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(2&M.wrap&&C===35615){Q[M.check=0]=255&C,Q[1]=C>>>8&255,M.check=o(M.check,Q,2,0),j=C=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&C)<<8)+(C>>8))%31){D.msg="incorrect header check",M.mode=30;break}if((15&C)!=8){D.msg="unknown compression method",M.mode=30;break}if(j-=4,P=8+(15&(C>>>=4)),M.wbits===0)M.wbits=P;else if(P>M.wbits){D.msg="invalid window size",M.mode=30;break}M.dmax=1<<P,D.adler=M.check=1,M.mode=512&C?10:12,j=C=0;break;case 2:for(;j<16;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(M.flags=C,(255&M.flags)!=8){D.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){D.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=C>>8&1),512&M.flags&&(Q[0]=255&C,Q[1]=C>>>8&255,M.check=o(M.check,Q,2,0)),j=C=0,M.mode=3;case 3:for(;j<32;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}M.head&&(M.head.time=C),512&M.flags&&(Q[0]=255&C,Q[1]=C>>>8&255,Q[2]=C>>>16&255,Q[3]=C>>>24&255,M.check=o(M.check,Q,4,0)),j=C=0,M.mode=4;case 4:for(;j<16;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}M.head&&(M.head.xflags=255&C,M.head.os=C>>8),512&M.flags&&(Q[0]=255&C,Q[1]=C>>>8&255,M.check=o(M.check,Q,2,0)),j=C=0,M.mode=5;case 5:if(1024&M.flags){for(;j<16;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}M.length=C,M.head&&(M.head.extra_len=C),512&M.flags&&(Q[0]=255&C,Q[1]=C>>>8&255,M.check=o(M.check,Q,2,0)),j=C=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(V<(J=M.length)&&(J=V),J&&(M.head&&(P=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),s.arraySet(M.head.extra,Z,I,J,P)),512&M.flags&&(M.check=o(M.check,Z,J,I)),V-=J,I+=J,M.length-=J),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(V===0)break e;for(J=0;P=Z[I+J++],M.head&&P&&M.length<65536&&(M.head.name+=String.fromCharCode(P)),P&&J<V;);if(512&M.flags&&(M.check=o(M.check,Z,J,I)),V-=J,I+=J,P)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(V===0)break e;for(J=0;P=Z[I+J++],M.head&&P&&M.length<65536&&(M.head.comment+=String.fromCharCode(P)),P&&J<V;);if(512&M.flags&&(M.check=o(M.check,Z,J,I)),V-=J,I+=J,P)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;j<16;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(C!==(65535&M.check)){D.msg="header crc mismatch",M.mode=30;break}j=C=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),D.adler=M.check=0,M.mode=12;break;case 10:for(;j<32;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}D.adler=M.check=w(C),j=C=0,M.mode=11;case 11:if(M.havedict===0)return D.next_out=$,D.avail_out=q,D.next_in=I,D.avail_in=V,M.hold=C,M.bits=j,2;D.adler=M.check=1,M.mode=12;case 12:if(N===5||N===6)break e;case 13:if(M.last){C>>>=7&j,j-=7&j,M.mode=27;break}for(;j<3;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}switch(M.last=1&C,j-=1,3&(C>>>=1)){case 0:M.mode=14;break;case 1:if(B(M),M.mode=20,N!==6)break;C>>>=2,j-=2;break e;case 2:M.mode=17;break;case 3:D.msg="invalid block type",M.mode=30}C>>>=2,j-=2;break;case 14:for(C>>>=7&j,j-=7&j;j<32;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if((65535&C)!=(C>>>16^65535)){D.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&C,j=C=0,M.mode=15,N===6)break e;case 15:M.mode=16;case 16:if(J=M.length){if(V<J&&(J=V),q<J&&(J=q),J===0)break e;s.arraySet(R,Z,I,J,$),V-=J,I+=J,q-=J,$+=J,M.length-=J;break}M.mode=12;break;case 17:for(;j<14;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(M.nlen=257+(31&C),C>>>=5,j-=5,M.ndist=1+(31&C),C>>>=5,j-=5,M.ncode=4+(15&C),C>>>=4,j-=4,286<M.nlen||30<M.ndist){D.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;j<3;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}M.lens[de[M.have++]]=7&C,C>>>=3,j-=3}for(;M.have<19;)M.lens[de[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,ee={bits:M.lenbits},X=c(0,M.lens,0,19,M.lencode,0,M.work,ee),M.lenbits=ee.bits,X){D.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;_e=(H=M.lencode[C&(1<<M.lenbits)-1])>>>16&255,ke=65535&H,!((me=H>>>24)<=j);){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(ke<16)C>>>=me,j-=me,M.lens[M.have++]=ke;else{if(ke===16){for(U=me+2;j<U;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(C>>>=me,j-=me,M.have===0){D.msg="invalid bit length repeat",M.mode=30;break}P=M.lens[M.have-1],J=3+(3&C),C>>>=2,j-=2}else if(ke===17){for(U=me+3;j<U;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}j-=me,P=0,J=3+(7&(C>>>=me)),C>>>=3,j-=3}else{for(U=me+7;j<U;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}j-=me,P=0,J=11+(127&(C>>>=me)),C>>>=7,j-=7}if(M.have+J>M.nlen+M.ndist){D.msg="invalid bit length repeat",M.mode=30;break}for(;J--;)M.lens[M.have++]=P}}if(M.mode===30)break;if(M.lens[256]===0){D.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,ee={bits:M.lenbits},X=c(l,M.lens,0,M.nlen,M.lencode,0,M.work,ee),M.lenbits=ee.bits,X){D.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,ee={bits:M.distbits},X=c(u,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,ee),M.distbits=ee.bits,X){D.msg="invalid distances set",M.mode=30;break}if(M.mode=20,N===6)break e;case 20:M.mode=21;case 21:if(6<=V&&258<=q){D.next_out=$,D.avail_out=q,D.next_in=I,D.avail_in=V,M.hold=C,M.bits=j,a(D,W),$=D.next_out,R=D.output,q=D.avail_out,I=D.next_in,Z=D.input,V=D.avail_in,C=M.hold,j=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;_e=(H=M.lencode[C&(1<<M.lenbits)-1])>>>16&255,ke=65535&H,!((me=H>>>24)<=j);){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(_e&&(240&_e)==0){for(Oe=me,Ze=_e,Fe=ke;_e=(H=M.lencode[Fe+((C&(1<<Oe+Ze)-1)>>Oe)])>>>16&255,ke=65535&H,!(Oe+(me=H>>>24)<=j);){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}C>>>=Oe,j-=Oe,M.back+=Oe}if(C>>>=me,j-=me,M.back+=me,M.length=ke,_e===0){M.mode=26;break}if(32&_e){M.back=-1,M.mode=12;break}if(64&_e){D.msg="invalid literal/length code",M.mode=30;break}M.extra=15&_e,M.mode=22;case 22:if(M.extra){for(U=M.extra;j<U;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}M.length+=C&(1<<M.extra)-1,C>>>=M.extra,j-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;_e=(H=M.distcode[C&(1<<M.distbits)-1])>>>16&255,ke=65535&H,!((me=H>>>24)<=j);){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if((240&_e)==0){for(Oe=me,Ze=_e,Fe=ke;_e=(H=M.distcode[Fe+((C&(1<<Oe+Ze)-1)>>Oe)])>>>16&255,ke=65535&H,!(Oe+(me=H>>>24)<=j);){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}C>>>=Oe,j-=Oe,M.back+=Oe}if(C>>>=me,j-=me,M.back+=me,64&_e){D.msg="invalid distance code",M.mode=30;break}M.offset=ke,M.extra=15&_e,M.mode=24;case 24:if(M.extra){for(U=M.extra;j<U;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}M.offset+=C&(1<<M.extra)-1,C>>>=M.extra,j-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){D.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(q===0)break e;if(J=W-q,M.offset>J){if((J=M.offset-J)>M.whave&&M.sane){D.msg="invalid distance too far back",M.mode=30;break}fe=J>M.wnext?(J-=M.wnext,M.wsize-J):M.wnext-J,J>M.length&&(J=M.length),be=M.window}else be=R,fe=$-M.offset,J=M.length;for(q<J&&(J=q),q-=J,M.length-=J;R[$++]=be[fe++],--J;);M.length===0&&(M.mode=21);break;case 26:if(q===0)break e;R[$++]=M.length,q--,M.mode=21;break;case 27:if(M.wrap){for(;j<32;){if(V===0)break e;V--,C|=Z[I++]<<j,j+=8}if(W-=q,D.total_out+=W,M.total+=W,W&&(D.adler=M.check=M.flags?o(M.check,R,W,$-W):i(M.check,R,W,$-W)),W=q,(M.flags?C:w(C))!==M.check){D.msg="incorrect data check",M.mode=30;break}j=C=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;j<32;){if(V===0)break e;V--,C+=Z[I++]<<j,j+=8}if(C!==(4294967295&M.total)){D.msg="incorrect length check",M.mode=30;break}j=C=0}M.mode=29;case 29:X=1;break e;case 30:X=-3;break e;case 31:return-4;default:return h}return D.next_out=$,D.avail_out=q,D.next_in=I,D.avail_in=V,M.hold=C,M.bits=j,(M.wsize||W!==D.avail_out&&M.mode<30&&(M.mode<27||N!==4))&&Y(D,D.output,D.next_out,W-D.avail_out)?(M.mode=31,-4):(te-=D.avail_in,W-=D.avail_out,D.total_in+=te,D.total_out+=W,M.total+=W,M.wrap&&W&&(D.adler=M.check=M.flags?o(M.check,R,W,D.next_out-W):i(M.check,R,W,D.next_out-W)),D.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(te==0&&W===0||N===4)&&X===f&&(X=-5),X)},r.inflateEnd=function(D){if(!D||!D.state)return h;var N=D.state;return N.window&&(N.window=null),D.state=null,f},r.inflateGetHeader=function(D,N){var M;return D&&D.state?(2&(M=D.state).wrap)==0?h:((M.head=N).done=!1,f):h},r.inflateSetDictionary=function(D,N){var M,Z=N.length;return D&&D.state?(M=D.state).wrap!==0&&M.mode!==11?h:M.mode===11&&i(1,N,Z,0)!==M.check?-3:Y(D,N,Z,Z)?(M.mode=31,-4):(M.havedict=1,f):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(A,n,r){var s=A("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,u,f,h,d,m,p,w){var b,g,x,_,G,y,v,O,B,Y=w.bits,D=0,N=0,M=0,Z=0,R=0,I=0,$=0,V=0,q=0,C=0,j=null,te=0,W=new s.Buf16(16),J=new s.Buf16(16),fe=null,be=0;for(D=0;D<=15;D++)W[D]=0;for(N=0;N<h;N++)W[u[f+N]]++;for(R=Y,Z=15;1<=Z&&W[Z]===0;Z--);if(Z<R&&(R=Z),Z===0)return d[m++]=20971520,d[m++]=20971520,w.bits=1,0;for(M=1;M<Z&&W[M]===0;M++);for(R<M&&(R=M),D=V=1;D<=15;D++)if(V<<=1,(V-=W[D])<0)return-1;if(0<V&&(l===0||Z!==1))return-1;for(J[1]=0,D=1;D<15;D++)J[D+1]=J[D]+W[D];for(N=0;N<h;N++)u[f+N]!==0&&(p[J[u[f+N]]++]=N);if(y=l===0?(j=fe=p,19):l===1?(j=i,te-=257,fe=o,be-=257,256):(j=a,fe=c,-1),D=M,G=m,$=N=C=0,x=-1,_=(q=1<<(I=R))-1,l===1&&852<q||l===2&&592<q)return 1;for(;;){for(v=D-$,B=p[N]<y?(O=0,p[N]):p[N]>y?(O=fe[be+p[N]],j[te+p[N]]):(O=96,0),b=1<<D-$,M=g=1<<I;d[G+(C>>$)+(g-=b)]=v<<24|O<<16|B|0,g!==0;);for(b=1<<D-1;C&b;)b>>=1;if(b!==0?(C&=b-1,C+=b):C=0,N++,--W[D]==0){if(D===Z)break;D=u[f+p[N]]}if(R<D&&(C&_)!==x){for($===0&&($=R),G+=M,V=1<<(I=D-$);I+$<Z&&!((V-=W[I+$])<=0);)I++,V<<=1;if(q+=1<<I,l===1&&852<q||l===2&&592<q)return 1;d[x=C&_]=R<<24|I<<16|G-m|0}}return C!==0&&(d[G+C]=D-$<<24|64<<16|0),w.bits=R,0}},{"../utils/common":41}],51:[function(A,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(A,n,r){var s=A("../utils/common"),i=0,o=1;function a(H){for(var Q=H.length;0<=--Q;)H[Q]=0}var c=0,l=29,u=256,f=u+1+l,h=30,d=19,m=2*f+1,p=15,w=16,b=7,g=256,x=16,_=17,G=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(f+2));a(Y);var D=new Array(2*h);a(D);var N=new Array(512);a(N);var M=new Array(256);a(M);var Z=new Array(l);a(Z);var R,I,$,V=new Array(h);function q(H,Q,de,pe,oe){this.static_tree=H,this.extra_bits=Q,this.extra_base=de,this.elems=pe,this.max_length=oe,this.has_stree=H&&H.length}function C(H,Q){this.dyn_tree=H,this.max_code=0,this.stat_desc=Q}function j(H){return H<256?N[H]:N[256+(H>>>7)]}function te(H,Q){H.pending_buf[H.pending++]=255&Q,H.pending_buf[H.pending++]=Q>>>8&255}function W(H,Q,de){H.bi_valid>w-de?(H.bi_buf|=Q<<H.bi_valid&65535,te(H,H.bi_buf),H.bi_buf=Q>>w-H.bi_valid,H.bi_valid+=de-w):(H.bi_buf|=Q<<H.bi_valid&65535,H.bi_valid+=de)}function J(H,Q,de){W(H,de[2*Q],de[2*Q+1])}function fe(H,Q){for(var de=0;de|=1&H,H>>>=1,de<<=1,0<--Q;);return de>>>1}function be(H,Q,de){var pe,oe,Me=new Array(p+1),Se=0;for(pe=1;pe<=p;pe++)Me[pe]=Se=Se+de[pe-1]<<1;for(oe=0;oe<=Q;oe++){var Be=H[2*oe+1];Be!==0&&(H[2*oe]=fe(Me[Be]++,Be))}}function me(H){var Q;for(Q=0;Q<f;Q++)H.dyn_ltree[2*Q]=0;for(Q=0;Q<h;Q++)H.dyn_dtree[2*Q]=0;for(Q=0;Q<d;Q++)H.bl_tree[2*Q]=0;H.dyn_ltree[2*g]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function _e(H){8<H.bi_valid?te(H,H.bi_buf):0<H.bi_valid&&(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function ke(H,Q,de,pe){var oe=2*Q,Me=2*de;return H[oe]<H[Me]||H[oe]===H[Me]&&pe[Q]<=pe[de]}function Oe(H,Q,de){for(var pe=H.heap[de],oe=de<<1;oe<=H.heap_len&&(oe<H.heap_len&&ke(Q,H.heap[oe+1],H.heap[oe],H.depth)&&oe++,!ke(Q,pe,H.heap[oe],H.depth));)H.heap[de]=H.heap[oe],de=oe,oe<<=1;H.heap[de]=pe}function Ze(H,Q,de){var pe,oe,Me,Se,Be=0;if(H.last_lit!==0)for(;pe=H.pending_buf[H.d_buf+2*Be]<<8|H.pending_buf[H.d_buf+2*Be+1],oe=H.pending_buf[H.l_buf+Be],Be++,pe===0?J(H,oe,Q):(J(H,(Me=M[oe])+u+1,Q),(Se=y[Me])!==0&&W(H,oe-=Z[Me],Se),J(H,Me=j(--pe),de),(Se=v[Me])!==0&&W(H,pe-=V[Me],Se)),Be<H.last_lit;);J(H,g,Q)}function Fe(H,Q){var de,pe,oe,Me=Q.dyn_tree,Se=Q.stat_desc.static_tree,Be=Q.stat_desc.has_stree,Ue=Q.stat_desc.elems,vt=-1;for(H.heap_len=0,H.heap_max=m,de=0;de<Ue;de++)Me[2*de]!==0?(H.heap[++H.heap_len]=vt=de,H.depth[de]=0):Me[2*de+1]=0;for(;H.heap_len<2;)Me[2*(oe=H.heap[++H.heap_len]=vt<2?++vt:0)]=1,H.depth[oe]=0,H.opt_len--,Be&&(H.static_len-=Se[2*oe+1]);for(Q.max_code=vt,de=H.heap_len>>1;1<=de;de--)Oe(H,Me,de);for(oe=Ue;de=H.heap[1],H.heap[1]=H.heap[H.heap_len--],Oe(H,Me,1),pe=H.heap[1],H.heap[--H.heap_max]=de,H.heap[--H.heap_max]=pe,Me[2*oe]=Me[2*de]+Me[2*pe],H.depth[oe]=(H.depth[de]>=H.depth[pe]?H.depth[de]:H.depth[pe])+1,Me[2*de+1]=Me[2*pe+1]=oe,H.heap[1]=oe++,Oe(H,Me,1),2<=H.heap_len;);H.heap[--H.heap_max]=H.heap[1],(function(tt,DA){var z,T,S,L,ne,ue,F=DA.dyn_tree,se=DA.max_code,Ve=DA.stat_desc.static_tree,We=DA.stat_desc.has_stree,Ke=DA.stat_desc.extra_bits,Re=DA.stat_desc.extra_base,Tn=DA.stat_desc.max_length,lr=0;for(L=0;L<=p;L++)tt.bl_count[L]=0;for(F[2*tt.heap[tt.heap_max]+1]=0,z=tt.heap_max+1;z<m;z++)Tn<(L=F[2*F[2*(T=tt.heap[z])+1]+1]+1)&&(L=Tn,lr++),F[2*T+1]=L,se<T||(tt.bl_count[L]++,ne=0,Re<=T&&(ne=Ke[T-Re]),ue=F[2*T],tt.opt_len+=ue*(L+ne),We&&(tt.static_len+=ue*(Ve[2*T+1]+ne)));if(lr!==0){do{for(L=Tn-1;tt.bl_count[L]===0;)L--;tt.bl_count[L]--,tt.bl_count[L+1]+=2,tt.bl_count[Tn]--,lr-=2}while(0<lr);for(L=Tn;L!==0;L--)for(T=tt.bl_count[L];T!==0;)se<(S=tt.heap[--z])||(F[2*S+1]!==L&&(tt.opt_len+=(L-F[2*S+1])*F[2*S],F[2*S+1]=L),T--)}})(H,Q),be(Me,vt,H.bl_count)}function P(H,Q,de){var pe,oe,Me=-1,Se=Q[1],Be=0,Ue=7,vt=4;for(Se===0&&(Ue=138,vt=3),Q[2*(de+1)+1]=65535,pe=0;pe<=de;pe++)oe=Se,Se=Q[2*(pe+1)+1],++Be<Ue&&oe===Se||(Be<vt?H.bl_tree[2*oe]+=Be:oe!==0?(oe!==Me&&H.bl_tree[2*oe]++,H.bl_tree[2*x]++):Be<=10?H.bl_tree[2*_]++:H.bl_tree[2*G]++,Me=oe,vt=(Be=0)===Se?(Ue=138,3):oe===Se?(Ue=6,3):(Ue=7,4))}function X(H,Q,de){var pe,oe,Me=-1,Se=Q[1],Be=0,Ue=7,vt=4;for(Se===0&&(Ue=138,vt=3),pe=0;pe<=de;pe++)if(oe=Se,Se=Q[2*(pe+1)+1],!(++Be<Ue&&oe===Se)){if(Be<vt)for(;J(H,oe,H.bl_tree),--Be!=0;);else oe!==0?(oe!==Me&&(J(H,oe,H.bl_tree),Be--),J(H,x,H.bl_tree),W(H,Be-3,2)):Be<=10?(J(H,_,H.bl_tree),W(H,Be-3,3)):(J(H,G,H.bl_tree),W(H,Be-11,7));Me=oe,vt=(Be=0)===Se?(Ue=138,3):oe===Se?(Ue=6,3):(Ue=7,4)}}a(V);var ee=!1;function U(H,Q,de,pe){W(H,(c<<1)+(pe?1:0),3),(function(oe,Me,Se,Be){_e(oe),te(oe,Se),te(oe,~Se),s.arraySet(oe.pending_buf,oe.window,Me,Se,oe.pending),oe.pending+=Se})(H,Q,de)}r._tr_init=function(H){ee||((function(){var Q,de,pe,oe,Me,Se=new Array(p+1);for(oe=pe=0;oe<l-1;oe++)for(Z[oe]=pe,Q=0;Q<1<<y[oe];Q++)M[pe++]=oe;for(M[pe-1]=oe,oe=Me=0;oe<16;oe++)for(V[oe]=Me,Q=0;Q<1<<v[oe];Q++)N[Me++]=oe;for(Me>>=7;oe<h;oe++)for(V[oe]=Me<<7,Q=0;Q<1<<v[oe]-7;Q++)N[256+Me++]=oe;for(de=0;de<=p;de++)Se[de]=0;for(Q=0;Q<=143;)Y[2*Q+1]=8,Q++,Se[8]++;for(;Q<=255;)Y[2*Q+1]=9,Q++,Se[9]++;for(;Q<=279;)Y[2*Q+1]=7,Q++,Se[7]++;for(;Q<=287;)Y[2*Q+1]=8,Q++,Se[8]++;for(be(Y,f+1,Se),Q=0;Q<h;Q++)D[2*Q+1]=5,D[2*Q]=fe(Q,5);R=new q(Y,y,u+1,f,p),I=new q(D,v,0,h,p),$=new q(new Array(0),O,0,d,b)})(),ee=!0),H.l_desc=new C(H.dyn_ltree,R),H.d_desc=new C(H.dyn_dtree,I),H.bl_desc=new C(H.bl_tree,$),H.bi_buf=0,H.bi_valid=0,me(H)},r._tr_stored_block=U,r._tr_flush_block=function(H,Q,de,pe){var oe,Me,Se=0;0<H.level?(H.strm.data_type===2&&(H.strm.data_type=(function(Be){var Ue,vt=4093624447;for(Ue=0;Ue<=31;Ue++,vt>>>=1)if(1&vt&&Be.dyn_ltree[2*Ue]!==0)return i;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return o;for(Ue=32;Ue<u;Ue++)if(Be.dyn_ltree[2*Ue]!==0)return o;return i})(H)),Fe(H,H.l_desc),Fe(H,H.d_desc),Se=(function(Be){var Ue;for(P(Be,Be.dyn_ltree,Be.l_desc.max_code),P(Be,Be.dyn_dtree,Be.d_desc.max_code),Fe(Be,Be.bl_desc),Ue=d-1;3<=Ue&&Be.bl_tree[2*B[Ue]+1]===0;Ue--);return Be.opt_len+=3*(Ue+1)+5+5+4,Ue})(H),oe=H.opt_len+3+7>>>3,(Me=H.static_len+3+7>>>3)<=oe&&(oe=Me)):oe=Me=de+5,de+4<=oe&&Q!==-1?U(H,Q,de,pe):H.strategy===4||Me===oe?(W(H,2+(pe?1:0),3),Ze(H,Y,D)):(W(H,4+(pe?1:0),3),(function(Be,Ue,vt,tt){var DA;for(W(Be,Ue-257,5),W(Be,vt-1,5),W(Be,tt-4,4),DA=0;DA<tt;DA++)W(Be,Be.bl_tree[2*B[DA]+1],3);X(Be,Be.dyn_ltree,Ue-1),X(Be,Be.dyn_dtree,vt-1)})(H,H.l_desc.max_code+1,H.d_desc.max_code+1,Se+1),Ze(H,H.dyn_ltree,H.dyn_dtree)),me(H),pe&&_e(H)},r._tr_tally=function(H,Q,de){return H.pending_buf[H.d_buf+2*H.last_lit]=Q>>>8&255,H.pending_buf[H.d_buf+2*H.last_lit+1]=255&Q,H.pending_buf[H.l_buf+H.last_lit]=255&de,H.last_lit++,Q===0?H.dyn_ltree[2*de]++:(H.matches++,Q--,H.dyn_ltree[2*(M[de]+u+1)]++,H.dyn_dtree[2*j(Q)]++),H.last_lit===H.lit_bufsize-1},r._tr_align=function(H){W(H,2,3),J(H,g,Y),(function(Q){Q.bi_valid===16?(te(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)})(H)}},{"../utils/common":41}],53:[function(A,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(A,n,r){(function(s){(function(i,o){if(!i.setImmediate){var a,c,l,u,f=1,h={},d=!1,m=i.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(i);p=p&&p.setTimeout?p:i,a={}.toString.call(i.process)==="[object process]"?function(x){xu.nextTick(function(){b(x)})}:(function(){if(i.postMessage&&!i.importScripts){var x=!0,_=i.onmessage;return i.onmessage=function(){x=!1},i.postMessage("","*"),i.onmessage=_,x}})()?(u="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",g,!1):i.attachEvent("onmessage",g),function(x){i.postMessage(u+x,"*")}):i.MessageChannel?((l=new MessageChannel).port1.onmessage=function(x){b(x.data)},function(x){l.port2.postMessage(x)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(x){var _=m.createElement("script");_.onreadystatechange=function(){b(x),_.onreadystatechange=null,c.removeChild(_),_=null},c.appendChild(_)}):function(x){setTimeout(b,0,x)},p.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var _=new Array(arguments.length-1),G=0;G<_.length;G++)_[G]=arguments[G+1];var y={callback:x,args:_};return h[f]=y,a(f),f++},p.clearImmediate=w}function w(x){delete h[x]}function b(x){if(d)setTimeout(b,0,x);else{var _=h[x];if(_){d=!0;try{(function(G){var y=G.callback,v=G.args;switch(v.length){case 0:y();break;case 1:y(v[0]);break;case 2:y(v[0],v[1]);break;case 3:y(v[0],v[1],v[2]);break;default:y.apply(o,v)}})(_)}finally{w(x),d=!1}}}}function g(x){x.source===i&&typeof x.data=="string"&&x.data.indexOf(u)===0&&b(+x.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Cb)),Cb.exports}var Dse=vse(),Pb=di(Dse);const DY={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/dicom":["dcm"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg","one","onea"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"application/zip+dotlottie":["lottie"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a","m4b"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/ief":["ief"],"image/jaii":["jaii"],"image/jais":["jais"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpg","jpeg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxl":["jxl"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/pjpeg":["jfif"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime","mht","mhtml"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step":["step","stp","stpnc","p21","210"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts","m2t","m2ts","mts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(DY);var ar=function(t,e,A,n){if(A==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return A==="m"?n:A==="a"?n.call(t):n?n.value:e.get(t)},da,jl,uo;class Bse{constructor(...e){da.set(this,new Map),jl.set(this,new Map),uo.set(this,new Map);for(const A of e)this.define(A)}define(e,A=!1){for(let[n,r]of Object.entries(e)){n=n.toLowerCase(),r=r.map(o=>o.toLowerCase()),ar(this,uo,"f").has(n)||ar(this,uo,"f").set(n,new Set);const s=ar(this,uo,"f").get(n);let i=!0;for(let o of r){const a=o.startsWith("*");if(o=a?o.slice(1):o,s?.add(o),i&&ar(this,jl,"f").set(n,o),i=!1,a)continue;const c=ar(this,da,"f").get(o);if(c&&c!=n&&!A)throw new Error(`"${n} -> ${o}" conflicts with "${c} -> ${o}". Pass \`force=true\` to override this definition.`);ar(this,da,"f").set(o,n)}}return this}getType(e){if(typeof e!="string")return null;const A=e.replace(/^.*[/\\]/s,"").toLowerCase(),n=A.replace(/^.*\./s,"").toLowerCase(),r=A.length<e.length;return!(n.length<A.length-1)&&r?null:ar(this,da,"f").get(n)??null}getExtension(e){return typeof e!="string"?null:(e=e?.split?.(";")[0],(e&&ar(this,jl,"f").get(e.trim().toLowerCase()))??null)}getAllExtensions(e){return typeof e!="string"?null:ar(this,uo,"f").get(e.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(const e of ar(this,uo,"f").values())Object.freeze(e);return this}_getTestState(){return{types:ar(this,da,"f"),extensions:ar(this,jl,"f")}}}da=new WeakMap,jl=new WeakMap,uo=new WeakMap;var kse=new Bse(DY)._freeze(),Wf={},BY;function Ese(){if(BY)return Wf;BY=1,Object.defineProperty(Wf,"__esModule",{value:!0});function t(o){return typeof o=="string"?o.startsWith("#")?"hex":null:"r"in o&&"g"in o&&"b"in o?"rgb":"h"in o&&"s"in o&&"l"in o?"hsl":"h"in o&&"s"in o&&"v"in o?"hsv":null}function e(o){const a=o.replace("#",""),c=parseInt(a.substring(0,2),16),l=parseInt(a.substring(2,4),16),u=parseInt(a.substring(4,6),16);return{r:c,g:l,b:u}}function A(o){const{r:a,g:c,b:l}=o;return`#${(a<<16|c<<8|l).toString(16).padStart(6,"0")}`}function n(o,a,c){a/=100,c/=100;const l=h=>(h+o/30)%12,u=a*Math.min(c,1-c),f=h=>c-u*Math.max(-1,Math.min(l(h)-3,Math.min(9-l(h),1)));return{r:Math.round(f(0)*255),g:Math.round(f(8)*255),b:Math.round(f(4)*255)}}function r(o,a,c){a/=100,c/=100;const l=f=>(f+o/60)%6,u=f=>c-c*a*Math.max(0,Math.min(l(f),4-l(f),1));return{r:Math.round(u(5)*255),g:Math.round(u(3)*255),b:Math.round(u(1)*255)}}function s(o,a){const c=Math.abs(o.r-a.r),l=Math.abs(o.g-a.g),u=Math.abs(o.b-a.b),f=1-c/255,h=1-l/255,d=1-u/255;return(f+h+d)/3}function i(o){let a=Math.min(Math.max(o.similarityThreshold||.8,.01),1);const{targetColor:c,colorArray:l}=o,u=t(c);if(u===null)return null;let f;if(u==="hex")f=e(c);else if(u==="rgb")f=c;else if(u==="hsl"){const{h:m,s:p,l:w}=c;f=n(m,p,w)}else if(u==="hsv"){const{h:m,s:p,v:w}=c;f=r(m,p,w)}else return null;let h=null,d=0;for(const m of l){t(m.hex?m.hex:m.rgb),m.hex?m.rgb||(m.rgb=e(m.hex)):m.hex=A(m.rgb);const p=Math.round(s(f,m.rgb)*100)/100;p>=a&&p>d&&(d=p,h={name:m.name,hex:m.hex,rgb:m.rgb,similarity:p})}return h}return Wf.default=i,Wf}var Nse=Ese(),Tse=di(Nse);function Ose(t,e=16){return t?zc(e-1).map(A=>{const n=A*Zu;return new Nu(t.bits[n]/63,t.bits[n+1]/63,t.bits[n+2]/63)}):[]}let Es=class{pos;bytes;size;sauce;SAUCE_ID=new Uint8Array([83,65,85,67,69]);COMNT_ID=new Uint8Array([67,79,77,78,84]);constructor(e){this.bytes=e,this.pos=0,this.size=e.length,this.parseSauce()}get(){if(this.pos>=this.bytes.length)throw new Error("Unexpected end of file reached.");return this.bytes[this.pos++]}get16(){return this.get()+(this.get()<<8)}get32(){let e=this.get();return e+=this.get()<<8,e+=this.get()<<16,e+(this.get()<<24)}getC(){return String.fromCharCode(this.get())}getS(e){let A="";for(;e-- >0;)A+=this.getC();return A.replace(/\s+$/,"")}getSZ(e){let A="",n;for(;e-- >0&&(n=this.get(),n!==0);)A+=String.fromCharCode(n);return A}lookahead(e){let A;for(A=0;A<e.length&&!(this.pos+A===this.bytes.length||this.bytes[this.pos+A]!==e[A]);++A);return A===e.length}read(e){const A=this.pos;for(e=e??this.size-this.pos;++this.pos<this.size&&--e!==0;);return this.bytes.subarray(A,this.pos)}seek(e){this.pos=e}peek(e){return e=e??0,this.bytes[this.pos+e]}getPos(){return this.pos}eof(){return this.pos===this.size}parseSauce(){if(this.pos=this.bytes.length-128,this.lookahead(this.SAUCE_ID)){this.sauce={},this.getS(5),this.sauce.version=this.getS(2),this.sauce.title=this.getS(35),this.sauce.author=this.getS(20),this.sauce.group=this.getS(20),this.sauce.date=this.getS(8),this.sauce.fileSize=this.get32(),this.sauce.dataType=this.get(),this.sauce.fileType=this.get(),this.sauce.tInfo1=this.get16(),this.sauce.tInfo2=this.get16(),this.sauce.tInfo3=this.get16(),this.sauce.tInfo4=this.get16(),this.sauce.comments=[];const e=this.get();if(this.sauce.flags=this.get(),this.sauce.blinkMode=(this.sauce.flags&1)===1,this.sauce.letterSpacing=this.sauce.flags>>1&3,this.sauce.aspectRatio=this.sauce.flags>>3&3,this.sauce.tInfoS=this.getSZ(22),e>0&&(this.pos=this.bytes.length-128-e*64-5,this.lookahead(this.COMNT_ID))){this.getS(5);let A=e;for(;A-- >0;)this.sauce.comments.push(this.getS(64))}}this.pos=0,this.sauce?this.sauce.fileSize>0&&this.sauce.fileSize<this.bytes.length?this.size=this.sauce.fileSize:this.size=this.bytes.length-128:this.size=this.bytes.length}};function kY(t,e,A){const n=t.getData();e=e*t.columns*10;const r=Math.min(e+A*t.columns*10,n.length),s=[];for(let i=e;i<r;i+=10)if(n[i+1]){const o=n[i],a=n.subarray(i+2,i+6),c=n.subarray(i+6,i+10);s.push([o,a[0],c[0]])}else{const o=n[i],a=n[i+2],c=n[i+3];s.push([o,a,c])}return{screen:s,palette:t.palette,width:t.columns,height:t.rows}}function Yse(t){t=t??{};const e={};switch(e.icecolors=typeof t.icecolors=="number"&&t.icecolors>=0&&t.icecolors<=1?t.icecolors:0,t.bits){case"8":case"9":case"ced":case"workbench":e.bits=t.bits;break;default:e.bits="8"}return e.columns=typeof t.columns=="number"&&t.columns>0?t.columns:160,e.font=typeof t.font=="string"&&t.font?t.font:"80x25",e.thumbnail=typeof t.thumbnail=="number"&&t.thumbnail>=0&&t.thumbnail<=3?t.thumbnail:0,e["2x"]=typeof t["2x"]=="number"&&t["2x"]>=0&&t["2x"]<=1?t["2x"]:0,e.imagedata=typeof t.imagedata=="number"&&t.imagedata>=0&&t.imagedata<=1?t.imagedata:0,e.rows=typeof t.rows=="number"&&t.rows>0?t.rows:26,e["2J"]=typeof t["2J"]=="number"&&t["2J"]>=0&&t["2J"]<=1?t["2J"]:1,e.filetype=typeof t.filetype=="string"?t.filetype:"ans",e}const ho={"b-strict":{width:8,height:8,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgAGABsbAAAAAAAAGxs/mz+bGwAGD5gPAZ8GAAAdpx4PGrMADxmZD9sxn8AGBgwAAAAAAAMGDAwMBgMADAYDAwMGDAAAMd+PH7/GBAAGBj/GBgAAAAAAAAAGBgwAAAA/gAAAAAAAAAAABgYAAMGDBgwYMCAAnzO1tbmfIAAfAwMDAwMAHzGxgZ8wP4A/AZ8BsbGfADAwMbGxn8GAP7AfAbGxnwAfMD8xsbGfAD+xgwYMDAwAHzGxsZ8xnwAfMbGxn4GfAAAGBgAABgYAAAYGAAAGBgwAAYYYBgGAAAAAH4AfgAAAABgGAYYYAAAfMbGBnwwADB+w9/z38B9AHzGxsb+xsYA/MbGxvzG/AB8xsbAwMZ8APjMxsbGxvwAPmbGwPjA/gA+ZsbA+MDAAHzGxsDexn4AxsbGxv7GxgAYGBgYGBgYAP7GBgbGzPgAxsbGzPjGxgDAwMDAwMD+AMbu/tbGxsYAxub23s7GxgB8xsbGxsZ8APzGxsb8wMAAfMbGxsbOfgP8xsbM+MbGAHzGxsB8BnwAfhgYGBgYGADGxsbGxsZ8AMbGxsZsbDgAxsbG1v7uxgDGxsbGfMbGAMbGbGw4MGAA/sbGBnzA/AA8MDAwMDA8AMBgMBgMBgMBPAwMDAwMPAAYPGbDAAAAAAAAAAAAAAD/GBgOAAAAAAAAfAZ+xsZ+AMD8xsbGxvwAAHzGwMDGfAAGfsbGxsZ+AAB8xsb+wHwAADxmZmZg/GAAfsbGxn4GfMD8xsbGxsYAGAAYGBgYGAAGAAYGxsbGfMDGxsbM/sYAwMDAwMbGfAAA/NbW1sbGAAD8xsbGxsYAAHzGxsbGfAAA/MbGxvzAAAB+xsbGfgYAAHzGxsbAwAAAfMbAfAZ8AGD+YGZmZjwAAMbGxsbGfgAAxsbGbHw4AADGxtbW1nwAAMbGxnzGxgAAwMbGxn4GfAD+xgZ8wP4ADhgYcBgYDgAYGBgYGBgYGHAYGA4YGHAAdtwAAAAAAAAPPvjjDz74AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAAAAAAAAAABgAGBgYGBgA//////////8cMDB8MDB+AGM+dz5jAAAAw2Y8GD4YGAAYGBgAGBgYAD5wPnc+Bz4AZmYAAAAAAAB+gZ2xnYF+AB42Zj4AfwAAADt37nc7AAD/DgAAAAAAAAAAAP4AAAAAf8H99/33wX//AAAAAAAAADxmPAAAAAAAHBx/HBwAfwB8Dhw4fgAAAHwOHA58AAAAHDhwAAAAAAAAAHd3d3d/cD9/fz8PDw8AAAAcHAAAAAAAAAAAAAAcODh4ODg4AAAAPGZmPAB+AAAA7nc7d+4AAGDnbnw7d+8DYOdufD9z5g/gM3c+/Tt34RwAHDhwdz4AOBw+d393dwAOHD53f3d3ABx3Pnd/d3cAec8+d393dwB3AD53f3d3ABw2Pnd/d3cAHz4+f37u7wAfOHBwOB8OHDgcf3B8cH8ADhx/cHxwfwAcd39wfHB/AP9/Pw8ff///OBw+HBwcPgAOHD4cHBw+ABx3PhwcHD4A//788Pj+//98fnf/d358AHnv9///7+cAOBw+d3d3PgAOHD53d3c+ABx3Pnd3dz4Aec8+d3d3PgDjPnd3d3c+AADnfjx+5wAAP3d/f393/gA4HHd3d3c+AA4cd3d3dz4AHDZ3d3d3PgB3AHd3d3c+AAcM43c+HBwA4OD+5/7g4AA+d3d+d3d+cDgcPgc/dz8ADhw+Bz93PwAcdz4HP3c/AHnPPgc/dz8AdwA+Bz93PwAcNj4HP3c/AAAAfx9//H8AAAA+cHBwPhw4HD53f3A+AA4cPnd/cD4AHHc+d39wPgAPP39//////zgcABwcHA4ADhwAHBwcDgAcdwAcHBwOAPD8/v7/////cP4cPnd3PgB5zwB+d3d3ADgcAD53dz4ADhwAPnd3PgAcdwA+d3c+AHnPAD53dz4AAHcAPnd3PgAAHAB/ABwAAAADfu//937AOBwAd3d3PwAOHAB3d3c/ABx3AHd3dz8A/////39/Pw8OHAB3dz4cOHBwfnd3fnBw//////7+/PA=",amigaFont:!0},"b-struct":{width:8,height:8,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgAGABsbAAAAAAAAGxs/mz+bGwAGD5gPAZ8GAAAdpx4PGrMADxmZD9sxn8AGBgwAAAAAAAMGDAwMBgMADAYDAwMGDAAAMd+PH7/GBAAGBj/GBgAAAAAAAAAGBgwAAAA/gAAAAAAAAAAABgYAAMGDBgwYMCAAnzO1tbmfIAAfAwMDAwMAHzGxgZ8wP4A/AZ8BsbGfADAwMbGxn8GAP7AfAbGxnwAfMD8xsbGfAD+xgwYMDAwAHzGxsZ8xnwAfMbGxn4GfAAAGBgAABgYAAAYGAAAGBgwAAYYYBgGAAAAAH4AfgAAAABgGAYYYAAAfMbGBnwwADB+w9/z38B9AHwGfsbGxn4A/MbGxvzG/AB8xsbAwMZ8APjMxsbGxvwAfMbGxv7AfAA8ZmZmYP5gAHbOxsZ+BnwAxsbGxv7GxgAYGBgYGBgYAH4GBsbGxnwAxsbGzPjGxgDAwMDAxsZ8AMbu/tbGxsYA/MbGxsbGxgB8xsbGxsZ8APzGxsbG/MAAfMbGxsbMfgP8xsbM+MbGAHzGxsB8BnwAYPxgZmZmPADGxsbGxsZ8AMbGxsZsbDgAxsbG1v7uxgDGxsbGfMbGAMbGxsZ+BnwA/sbGBnzA/gA8MDAwMDA8AMBgMBgMBgMBPAwMDAwMPAAYPGbDAAAAAAAAAAAAAAD/GBgOAAAAAAB8BnbOxsZ+APzGzPjGxvwAfMbAxsbGfAAGfsbGxsZ+AHzG/sDGxnwAPGZmZmD8YAB+xsbOdgZ8AMbG/sbGxsYAGAAYGBgYGAAGAB7GxsZ8AMbGxsz8xsYAYGBgYGZmPAD81tbWxsbGAMbm9t7OxsYAfMbGxsbGfAD8xsbG/MDAAHzGxsbOdgYA/MbG+MzGxgB8xsbAfAZ8AP5gZmZmZjwABsbGxsbOdgAGxsbGbHw4AAbGxtbW1nwABsbGxnzGxgAGxsbGfgZ8AP4GfMDGxv4ADhgYcBgYDgAYGBgYGBgYGHAYGA4YGHAAdtwAAAAAAAAGPOCGDjjAAAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAf3d3d3d/AAB/d3d3d38AAH93d3d3fwAAAAAAAAAAABgAGBgYGBgA//////////8cMDB8MDB+AGM+dz5jAAAAw2Y8GD4YGAAYGBgAGBgYAAAzZsxmMwAAZmYAAAAAAAB+gZ2xnYF+AB42Zj4AfwAAADNmzGYzAAD/DgAAAAAAAAAAAP4AAAAA6U9JAAAAAAD/AAAAAAAAADxmPAAAAAAAAAAYfhgAfgB4DBgwfAAAAHgMGAx4AAAAGDBgAAAAAAAAAGZmZmZ/YD56ejoKCgoAAAAAGBgAAAAAAAAAAAAcOHgYGBgAAAAAPGZmPAB+AAAAzGYzZswAAEDGTFgyZs4CQMNGTB4yZA7gM2Y8+TNnAQwADD5gY2M+YDB8xsb+xgAMGHzGxv7GADjGfMbG/sYAdtx8xsb+xgBsAHzGxv7GABhmfMbG/sYAAH/MzP/MzwB8xsDAwMZ8GHA+ZsD4wP4ADD5mwPjA/gAwzP7A+MD+AP9/Pw8ff///MBgAGBgYGAAMGAAYGBgYABhmGBgYGBgA//788Pj+//94bGb2ZmZ8ADtuAOb23s4AYDB8xsbGfAAMGHzGxsZ8ADDMfMbGxnwAbNh8xsbGfADGAHzGxsZ8AADDZhhmwwAAfM7O1ubmfAAwGMbGxsZ8ABgwxsbGxnwAEGyCxsbGfABsAMbGxsZ8ABgwxsbGfgZ8YGB8ZnxgYAB8xsbG3MbcwGAwPAZ+xn4ADBg8Bn7GfgAYZjwGfsZ+AHbcPAZ+xn4AbAA8Bn7GfgAYZjwGfsZ+AAAAPht/2G4AAHzGwMDGfBhgMHzG/sB8AAwYfMb+wHwAMMx8xv7AfAADHz9/f////zAYABgYGAwADBgAGBgYDAAYZgAYGBgMAMD4/P7+////Dz9///9/Pw9m2PzGxsbGADAYfMbGxnwAGDB8xsbGfADw/P7///788HbcfMbGxnwAbAB8xsbGfAAAGAB+ABgAAAB8ztbW5nwAYDDGxsbGfgAYMMbGxsZ+ABhmAMbGxn4A////f38/HwMYMMbGxn4GfGBgfGZmfGBg/////v78+MA=",amigaFont:!0},microknight:{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGAAAGBgAAGxsbGwkJAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAEBB8fNDQfHwWFhYWfHwQEGBglpZ8fBgYMDBsbNLSDAxwcNjYcHD29tzc2Nh8fAYGGBgYGDAwAAAAAAAAAAAAABgYMDBgYGBgYGAwMBgYAAAwMBgYDAwMDAwMGBgwMAAAAABsbDg4/v44OGxsAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAAf38AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwICAAAB4eMzM3t729ubmfHwAABgYGBg4OBgYGBgYGH5+AAB8fAYGPDxgYMDAwMD+/gAAPDwGBhwcBgZGRsbGfHwAABgYGBgwMGxszMz+/gwMAAD4+MDA/PwGBkZGzMx4eAAAcHDAwPz8xsbGxszMeHgAAP7+BgYMDBgYGBgYGBgYAAB4eMzMfHzGxsbGzMx4eAAAeHjMzMbGxsZ+fgYGHBwAAAAAAAAYGBgYAAAYGBgYAAAAAAAAGBgYGAAAGBgYGDAwAAAYGDAwYGAwMBgYAAAAAAAAAAB+fgAAAAB+fgAAAAAAADAwGBgMDBgYMDAAAAAAfHzGxgYGPDwwMAAAMDAAAHx8xsbe3tbW3t7AwH5+AAB4eMzMxsb+/sbGxsbGxgAA+PjMzPz8xsbGxszM+PgAAHh4zMzAwMDAwMDGxnx8AAD4+MzMxsbGxsbGxsb8/AAA/v7AwPz8wMDAwMDA/v4AAP7+wMD8/MDAwMDAwMDAAAA4OGBgwMDOzsbGxsZ+fgYGxsbGxsbG/v7GxsbGxsYAAH5+GBgYGBgYGBgYGH5+AAAODgYGBgYGBsbGxsZ8fAAAxsbMzNjY8PDY2MzMxsYAAMDAwMDAwMDAwMDAwP7+AADGxu7u/v7W1sbGxsbGxgAAxsbm5vb23t7OzsbGxsYAAHh4zMzGxsbGxsbGxnx8AAD4+MzMxsbGxvz8wMDAwAAAeHjMzMbGxsbGxtbWfHwMDPj4zMzGxsbG/PzY2MzMBgZ4eMDAfHwGBkZGxsZ8fAAAfn4YGBgYGBgYGBgYGBgAAMbGxsbGxsbGxsbGxnx8AADGxsbGxsZsbGxsODg4OAAAxsbGxsbG1tb+/u7uxsYAAMbGbGw4ODg4bGzGxsbGAADGxsbGxsZ8fAwMDAwMDAAA/v4MDBgYMDBgYMDA/v4AADg4MDAwMDAwMDAwMDg4AADAwGBgMDAYGAwMBgYDAwEBODgYGBgYGBgYGBgYODgAABAQODhsbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//GBgYGAwMAAAAAAAAAAAAAAAAPDwGBn5+xsbGxn5+AADAwPj4zMzGxsbGxsb8/AAAAAB4eMzMwMDAwMbGfHwAAAYGPj5mZsbGxsbGxn5+AAAAAHh4zMz8/MDAxsZ8fAAAODhsbGBgeHhgYGBgYGBgYAAAfn7GxsbGxsZ+fgYGfHzAwPj4zMzGxsbGxsbGxgAAGBgAADg4GBgYGBgYfn4AAAwMAAAcHAwMDAwMDExMODjAwMzM2Njw8NjYzMzGxgAAODgYGBgYGBgYGBgYfn4AAAAAxMTu7v7+1tbGxsbGAAAAAPj4zMzGxsbGxsbGxgAAAAB4eMzMxsbGxsbGfHwAAAAA+PjMzMbGxsbGxvz8wMAAAD4+ZmbGxsbGxsZ+fgYGAAD8/MbGwMDAwMDAwMAAAAAAeHjAwHx8BgbGxnx8AAAwMHx8MDAwMDAwMjIcHAAAAADGxsbGxsbGxsbGfn4AAAAAxsbGxmxsbGw4ODg4AAAAAMbG1tb+/nx8bGxERAAAAADGxmxsODg4OGxsxsYAAAAAxsbGxsbGxsZ+fgYGfHwAAP7+DAwYGDAwYGD+/gAADAwYGBgYMDAYGBgYDAwAABgYGBgYGBgYGBgYGBgYGBgwMBgYGBgMDBgYGBgwMAAAcnKcnAAAAAAAAAAAAAAAADg4cHDg4MHBg4MHBw4OHBzPz/f3h4czMwEBOTk5Of//5+ff34eHMzMBATk5OTn//8/PMzOHhzMzAQE5OTk5//+NjWNjh4czMwEBOTk5Of//k5P//4eHMzMBATk5OTn//4eHMzOHhzMzAQE5OTk5///AwJOTMDADAzMzMzMwMP//h4czMz8/Pz8/PzMzh4fPz8/P9/cBAT8/AwM/PwEB///n59/fAQE/PwMDPz8BAf//5+eZmQEBPz8DAz8/AQH//5OT//8BAT8/AwM/PwEB///Pz/f3gYHn5+fn5+eBgf//5+ff34GB5+fn5+fngYH//+fnmZmBgefn5+fn54GB//+Tk///gYHn5+fn5+eBgf//BwczMzk5GRk5OTk5AwP//42NY2MZGQkJISExMTk5///Pz/f3h4czMzk5OTmDg///5+ff34eHMzM5OTk5g4P//8/PMzOHhzMzOTk5OYOD//+NjWNjh4czMzk5OTmDg///k5P//4eHMzM5OTk5g4P/////g4MpKQAAJCQ4OIGB//+HhzMzISEJCRkZOTmDg///z8/39zk5OTk5OTk5g4P//+fn3985OTk5OTk5OYOD///n55mZOTk5OTk5OTmDg///k5P//zk5OTk5OTk5g4P//+fn3985OTk5g4Pz8/Pz//8/PwcHMzM5OQMDPz8/Pz8///+HhzMzIyM5OTk5IyM/PwAAAAAAAAAAAAAAAAAAAAAYGAAAGBgYGBgYGBgYGAAAMDB4eMzMwMDAwMbGfHwwMDg4bGxgYPj4YGBgYP7+AAAAAMbGfHzGxsbGfHzGxgAAxsbGxsbGfHwMDD4+DAwAABgYGBgYGAAAGBgYGBgYAAB4eMDAfHzGxsbGfHwGBjw8bGwAAAAAAAAAAAAAAAAAADw8QkKZmaGhoaGZmUJCPDwAAH5+xsbGxn5+AAB8fAAAAAA2Nmxs2NhsbDY2AAAAAHx8DAwAAAAAAAAAAAAAAAAAAAAAAAB+fgAAAAAAAAAAPDxCQrm5paW5uaWlQkI8PHx8AAAAAAAAAAAAAAAAAAA4OGxsbGw4OAAAAAAAAAAAAAAQEHx8EBAAAHx8AAAAAHBwGBgwMGBgeHgAAAAAAABwcBgYMDAYGHBwAAAAAAAAGBgwMGBgAAAAAAAAAAAAAAAAxsbGxsbGxsbGxvz8wMAAAH5+9PR0dBQUFBQUFAAAAAAAAAAAGBgYGAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMHh4AAAAAAAAAAB8fMbGxsZ8fAAAfHwAAAAA2NhsbDY2bGzY2AAAAABgYObmbGx6ejY2b2/PzwMDYGDm5mxseHg+PmNjzs4fH+DgNjZsbDo69vZvb8/PAwMwMAAAMDA8PAYGxsZ8fAAAMDAICHh4zMz+/sbGxsYAABgYICB4eMzM/v7GxsbGAAAwMMzMeHjMzP7+xsbGxgAAcnKcnHh4zMz+/sbGxsYAAGxsAAB4eMzM/v7GxsbGAAB4eMzMeHjMzP7+xsbGxgAAPz9sbM/P/PzMzMzMz88AAHh4zMzAwMDAwMDGxnx8MDAwMAgI/v7AwPz8wMD+/gAAGBggIP7+wMD8/MDA/v4AABgYZmb+/sDA/PzAwP7+AABsbAAA/v7AwPz8wMD+/gAAMDAICH5+GBgYGBgYfn4AABgYICB+fhgYGBgYGH5+AAAYGGZmfn4YGBgYGBh+fgAAbGwAAH5+GBgYGBgYfn4AAPj4zMzGxubmxsbGxvz8AABycpyc5ub29t7ezs7GxgAAMDAICHh4zMzGxsbGfHwAABgYICB4eMzMxsbGxnx8AAAwMMzMeHjMzMbGxsZ8fAAAcnKcnHh4zMzGxsbGfHwAAGxsAAB4eMzMxsbGxnx8AAAAAHx81tb//9vbx8d+fgAAeHjMzN7e9vbm5sbGfHwAADAwCAjGxsbGxsbGxnx8AAAYGCAgxsbGxsbGxsZ8fAAAGBhmZsbGxsbGxsbGfHwAAGxsAADGxsbGxsbGxnx8AAAYGCAgxsbGxnx8DAwMDAAAwMD4+MzMxsb8/MDAwMDAwAAAeHjMzNzcxsbGxtzcwMAwMAgIPDwGBn5+xsZ+fgAAGBggIDw8BgZ+fsbGfn4AABgYZmY8PAYGfn7Gxn5+AABycpycPDwGBn5+xsZ+fgAAbGwAADw8BgZ+fsbGfn4AADw8ZmY8PAYGfn7Gxn5+AAAAAH5+Gxt/f9jY2Nh/fwAAAAB4eMzMwMDAwMbGfHwwMDAwCAh4ePz8wMDGxnx8AAAYGCAgeHj8/MDAxsZ8fAAAMDDMzHh4/PzAwMbGfHwAAGxsAAB4ePz8wMDGxnx8AAAwMAgIODgYGBgYGBh+fgAAGBggIDg4GBgYGBgYfn4AABgYZmY4OBgYGBgYGH5+AABsbAAAODgYGBgYGBh+fgAADAwWFj4+ZmbGxsbGfn4AAHJynJz4+MzMxsbGxsbGAAAwMAgIeHjMzMbGxsZ8fAAAGBggIHh4zMzGxsbGfHwAABgYZmZ4eMzMxsbGxnx8AABycpyceHjMzMbGxsZ8fAAAbGwAAHh4zMzGxsbGfHwAAAAAGBgAAH5+AAAYGAAAAAAAAHh4zMze3vb25uZ8fAAAMDAICMbGxsbGxsbGfn4AABgYICDGxsbGxsbGxn5+AAAYGGZmxsbGxsbGxsZ+fgAAbGwAAMbGxsbGxsbGfn4AABgYICDGxsbGxsZ+fgYGfHzAwMDA+PjMzMbG/PzAwMDAbGwAAMbGxsbGxn5+BgZ8fA==",amigaFont:!0},"microknight+":{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGAAAGBgAAGxsbGwkJAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAEBB8fNDQfHwWFhYWfHwQEGBglpZsbBgYMDBsbNLSDAxwcNjYcHD29tzc2Nh8fAYGGBgYGDAwAAAAAAAAAAAAAAMHDgwYGBgYGBgMDgcDAADA4HAwGBgYGBgYMHDgwAAAAABsbDg4/v44OGxsAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwICAAAB4eMzM3t729ubmfHwAABgYGBg4OBgYGBgYGH5+AAB8fAYGPDxgYMDAwMD+/gAAPDwGBhwcBgZGRsbGfHwAABgYGBgwMGxszMz+/gwMAAD4+MDA/PwGBkZGzMx4eAAAcHDAwPz8xsbGxszMeHgAAP7+BgYMDBgYGBgYGBgYAAB4eMzMfHzGxsbGzMx4eAAAeHjMzMbGxsZ+fgYGHBwAAAAAAAAYGBgYAAAYGBgYAAAAAAAAGBgYGAAAGBgYGDAwAwMGBgwMGBgMDAYGAwMAAAAAAAB+fgAAAAB+fgAAAADAwGBgMDAYGDAwYGDAwAAAfHzGxgYGPDwwMAAAMDAAAHx8xsbe3tbW3t7AwH5+AAB4eMzMxsb+/sbGxsbGxgAA+PjMzPz8xsbGxszM+PgAAHh4zMzAwMDAwMDGxnx8AAD4+MzMxsbGxsbGxsb8/AAA/v7AwPz8wMDAwMDA/v4AAP7+wMD8/MDAwMDAwMDAAAA4OGBgwMDOzsbGxsZ+fgYGxsbGxsbG/v7GxsbGxsYAAH5+GBgYGBgYGBgYGH5+AAAODgYGBgYGBsbGxsZ8fAAAxsbMzNjY8PDY2MzMxsYAAMDAwMDAwMDAwMDAwP7+AADGxu7u/v7W1sbGxsbGxgAAxsbm5vb23t7OzsbGxsYAAHh4zMzGxsbGxsbGxnx8AAD4+MzMxsbGxvz8wMDAwAAAeHjMzMbGxsbGxtbWfHwMDPj4zMzGxsbG/PzY2MzMBgZ4eMDAfHwGBkZGxsZ8fAAAfn4YGBgYGBgYGBgYGBgAAMbGxsbGxsbGxsbGxnx8AADGxsbGxsZsbGxsODg4OAAAxsbGxsbG1tb+/u7uxsYAAMbGbGw4ODg4bGzGxsbGAADGxsbGxsZ8fAwMDAwMDAAA/v4MDBgYMDBgYMDA/v4AADw/MDAwMDAwMDAwMD88AADAwGBgMDAYGAwMBgYDAwEBPPwMDAwMDAwMDAwM/DwAABAQODhsbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//GBgYGAwMAAAAAAAAAAAAAAAAPDwGBn5+xsbGxn5+AADAwPj4zMzGxsbGxsb8/AAAAAB4eMzMwMDAwMbGfHwAAAYGPj5mZsbGxsbGxn5+AAAAAHh4zMz8/MDAxsZ8fAAAODhsbGBgeHhgYGBgYGBgYAAAfn7GxsbGxsZ+fgYGfHzAwPj4zMzGxsbGxsbGxgAAGBgAADg4GBgYGBgYfn4AAAwMAAAcHAwMDAwMDExMODjAwMzM2Njw8NjYzMzGxgAAODgYGBgYGBgYGBgYfn4AAAAAxMTu7v7+1tbGxsbGAAAAAPj4zMzGxsbGxsbGxgAAAAB4eMzMxsbGxsbGfHwAAAAA+PjMzMbGxsbGxvz8wMAAAD4+ZmbGxsbGxsZ+fgYGAAD8/MbGwMDAwMDAwMAAAAAAeHjAwHx8BgbGxnx8AAAwMHx8MDAwMDAwMjIcHAAAAADGxsbGxsbGxsbGfn4AAAAAxsbGxmxsbGw4ODg4AAAAAMbG1tb+/nx8bGxERAAAAADGxmxsODg4OGxsxsYAAAAAxsbGxsbGxsZ+fgYGfHwAAP7+DAwYGDAwYGD+/gAADg8ZGBgYcHAYGBgZDw4AABgYGBgYGBgYGBgYGBgYGBhw8JgYGBgODhgYGJjwcAAAcnKcnAAAAAAAAAAAAAAAADg4cHDg4MHBg4MHBw4OHBzPz/f3h4czMwEBOTk5Of//5+ff34eHMzMBATk5OTn//8/PMzOHhzMzAQE5OTk5//+NjWNjh4czMwEBOTk5Of//k5P//4eHMzMBATk5OTn//4eHMzOHhzMzAQE5OTk5///AwJOTMDADAzMzMzMwMP//h4czMz8/Pz8/PzMzh4fPz8/P9/cBAT8/AwM/PwEB///n59/fAQE/PwMDPz8BAf//5+eZmQEBPz8DAz8/AQH//5OT//8BAT8/AwM/PwEB///Pz/f3gYHn5+fn5+eBgf//5+ff34GB5+fn5+fngYH//+fnmZmBgefn5+fn54GB//+Tk///gYHn5+fn5+eBgf//BwczMzk5GRk5OTk5AwP//42NY2MZGQkJISExMTk5///Pz/f3h4czMzk5OTmDg///5+ff34eHMzM5OTk5g4P//8/PMzOHhzMzOTk5OYOD//+NjWNjh4czMzk5OTmDg///k5P//4eHMzM5OTk5g4P/////g4MpKQAAJCQ4OIGB//+HhzMzISEJCRkZOTmDg///z8/39zk5OTk5OTk5g4P//+fn3985OTk5OTk5OYOD///n55mZOTk5OTk5OTmDg///k5P//zk5OTk5OTk5g4P//+fn3985OTk5g4Pz8/Pz//8/PwcHMzM5OQMDPz8/Pz8///+HhzMzIyM5OTk5IyM/PwAAAAAAAAAAAAAAAAAAAAAYGAAAGBgYGBgYGBgYGAAAMDB4eMzMwMDAwMbGfHwwMDg4bGxgYPj4YGBgYP7+AAAAAMbGfHzGxsbGfHzGxgAAxsbGxsbGfHwMDD4+DAwAABgYGBgYGBgAABgYGBgYGBh4eMDAfHzGxsbGfHwGBjw8bGwAAAAAAAAAAAAAAAAAADw8QkKZmaGhoaGZmUJCPDwAAH5+xsbGxn5+AAB8fAAAAAA2Nmxs2NhsbDY2AAAAAP5/AwMAAAAAAAAAAAAAAAAAAAAAAAB+fgAAAAAAAAAAPDxCQrm5paW5uaWlQkI8PP//AAAAAAAAAAAAAAAAAAA8PGZmZmY8PAAAAAAAAAAAAAAQEHx8EBAAAHx8AAAAAHBwGBgwMGBgeHgAAAAAAABwcBgYMDAYGHBwAAAAAAAAGBgwMGBgAAAAAAAAAAAAAAAAxsbGxsbGxsbGxvz8wMAAAH5+9PR0dBQUFBQUFAAAAAAAABgYGBgAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMHh4AAAAAAAAAAB8fMbGxsZ8fAAAfHwAAAAA2NhsbDY2bGzY2AAAAABjY+bmbGx7ezc1bW/Dw4CAY2Pm5mxsfn8zNmZvz8CAgMDAZsZsbNvbNzVtb8PDAAAwMAAAMDA8PAYGxsZ8fAAAMDAICHh4zMz+/sbGxsYAABgYICB4eMzM/v7GxsbGAAAwMMzMeHjMzP7+xsbGxgAAcnKcnHh4zMz+/sbGxsYAAGxsAAB4eMzM/v7GxsbGAAB4eMzMeHjMzP7+xsbGxgAAPz9sbM/P/PzMzMzMz88AAHh4zMzAwMDAwMDGxnx8MDAwMAgI/v7AwPz8wMD+/gAAGBggIP7+wMD8/MDA/v4AABgYZmb+/sDA/PzAwP7+AABsbAAA/v7AwPz8wMD+/gAAMDAICH5+GBgYGBgYfn4AABgYICB+fhgYGBgYGH5+AAAYGGZmfn4YGBgYGBh+fgAAbGwAAH5+GBgYGBgYfn4AAPj4zMzGxubmxsbGxvz8AABycpyc5ub29t7ezs7GxgAAMDAICHh4zMzGxsbGfHwAABgYICB4eMzMxsbGxnx8AAAwMMzMeHjMzMbGxsZ8fAAAcnKcnHh4zMzGxsbGfHwAAGxsAAB4eMzMxsbGxnx8AAAAAHx81tb//9vbx8d+fgAAeHjMzN7e9vbm5sbGfHwAADAwCAjGxsbGxsbGxnx8AAAYGCAgxsbGxsbGxsZ8fAAAGBhmZsbGxsbGxsbGfHwAAGxsAADGxsbGxsbGxnx8AAAYGCAgxsbGxnx8DAwMDAAAwMD4+MzMxsb8/MDAwMDAwAAAeHjMzNzcxsbGxtzcwMAwMAgIPDwGBn5+xsZ+fgAAGBggIDw8BgZ+fsbGfn4AABgYZmY8PAYGfn7Gxn5+AABycpycPDwGBn5+xsZ+fgAAbGwAADw8BgZ+fsbGfn4AADw8ZmY8PAYGfn7Gxn5+AAAAAH5+Gxt/f9jY2Nh/fwAAAAB4eMzMwMDAwMbGfHwwMDAwCAh4ePz8wMDGxnx8AAAYGCAgeHj8/MDAxsZ8fAAAMDDMzHh4/PzAwMbGfHwAAGxsAAB4ePz8wMDGxnx8AAAwMAgIODgYGBgYGBh+fgAAGBggIDg4GBgYGBgYfn4AABgYZmY4OBgYGBgYGH5+AABsbAAAODgYGBgYGBh+fgAADAwWFj4+ZmbGxsbGfn4AAHJynJz4+MzMxsbGxsbGAAAwMAgIeHjMzMbGxsZ8fAAAGBggIHh4zMzGxsbGfHwAABgYZmZ4eMzMxsbGxnx8AABycpyceHjMzMbGxsZ8fAAAbGwAAHh4zMzGxsbGfHwAAAAAGBgAAH/+AAAYGAAAAAAAAHh4zMze3vb25uZ8fAAAMDAICMbGxsbGxsbGfn4AABgYICDGxsbGxsbGxn5+AAAYGGZmxsbGxsbGxsZ+fgAAbGwAAMbGxsbGxsbGfn4AABgYICDGxsbGxsZ+fgYGfHzAwMDA+PjMzMbG/PzAwMDAbGwAAMbGxsbGxn5+BgZ8fA==",amigaFont:!0},mosoul:{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGAAAGBgAAGxsbGwAAAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAGBg+PmBgPDwGBnx8GBgAAAAAZmasrNjYNjZqaszMAAA4OGxsaGh2dtzczs57ewAAGBgYGDAwAAAAAAAAAAAAAAwMGBgwMDAwMDAYGAwMAAAwMBgYDAwMDAwMGBgwMAAAAABmZjw8//88PGZmAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwICAPDxmZm5ufn52dmZmPDwAADg4GBgYGBgYGBgYGBgYAAA8PAYGPDxgYGBgYGB+fgAAfHwGBhwcBgYGBgYGfHwAAAwMzMzMzMzM/v4MDAwMAAB8fGBgfHwGBgYGBgZ8fAAAPDxgYHx8ZmZmZmZmPDwAAH5+BgYGBgwMGBgYGBgYAAA8PGZmPDxmZmZmZmY8PAAAPDxmZmZmZmY+PgYGPDwAAAAAGBgYGAAAAAAYGBgYAAAAABgYGBgAAAAAGBgYGDAwAAAGBhgYYGAYGAYGAAAAAAAAAAD//wAA//8AAAAAAAAAAGBgGBgGBhgYYGAAAAAAPDxmZgYGHBwYGAAAGBgAAHx8xsbe3tbW3t7AwHh4AAA8PGZmZmZmZn5+ZmZmZgAAfHxmZnx8ZmZmZmZmfHwAAB4eMDBgYGBgYGAwMB4eAAB8fGZmZmZmZmZmZmZ8fAAAfn5gYGBgYGB4eGBgfn4AAH5+YGBgYGBgeHhgYGBgAAA8PGBgbm5mZmZmZmY+PgAAZmZmZmZmZmZ+fmZmZmYAADw8GBgYGBgYGBgYGDw8AAAODgYGBgYGBgYGBgY8PAAAxsbMzNjY8PDY2MzMxsYAAGBgYGBgYGBgYGBgYH5+AADGxu7u/v7W1sbGxsbGxgAAxsbm5vb23t7OzsbGxsYAADw8ZmZmZmZmZmZmZjw8AAB8fGZmZmZmZnx8YGBgYAAAeHjMzMzMzMzMzNzcfn4AAHx8ZmZmZmZmfHxmZmZmAAA8PGBgPDwGBgYGBgZ8fAAAfn4YGBgYGBgYGBgYGBgAAGZmZmZmZmZmZmZmZjw8AABmZmZmZmZmZjw8PDwYGAAAxsbGxsbG1tb+/u7uxsYAAMPDZmY8PBgYPDxmZsPDAADDw2ZmPDwYGBgYGBgYGAAA/v4MDBgYMDBgYMDA/PwAADw8MDAwMDAwMDAwMDw8AADAwGBgMDAYGAwMBgYDAwEBPDwMDAwMDAwMDAwMPDwAABAQODhsbMbGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//GBgYGAwMAAAAAAAAAAAAAAAAAAA8PAYGPj5mZj4+AABgYGBgfHxmZmZmZmZ8fAAAAAAAADw8YGBgYGBgPDwAAAYGBgY+PmZmZmZmZj4+AAAAAAAAPDxmZn5+YGA8PAAAHBwwMDAwMDB8fDAwMDAAAAAAAAA+PmZmZmY+PgYGPDxgYGBgfHxmZmZmZmZmZgAAGBgAABgYGBgYGBgYDAwAAAwMAAAMDAwMDAwMDAwMeHhgYGBgZmZsbHh4bGxmZgAAGBgYGBgYGBgYGBgYDAwAAAAAAADs7P7+1tbGxsbGAAAAAAAAfHxmZmZmZmZmZgAAAAAAADw8ZmZmZmZmPDwAAAAAAAB8fGZmZmZ8fGBgYGAAAAAAPj5mZmZmPj4GBgYGAAAAAD4+YGBgYGBgYGAAAAAAAAA8PGBgPDwGBnx8AAAwMDAwfHwwMDAwMDAcHAAAAAAAAGZmZmZmZmZmPDwAAAAAAABmZmZmZmY8PBgYAAAAAAAAxsbGxtbW/v5sbAAAAAAAAMbGbGw4OGxsxsYAAAAAAABmZmZmZmY+PgYGPDwAAAAAfn4MDBgYMDB+fgAADg4YGBgYcHAYGBgYDg4AABgYGBgYGBgYGBgYGBgYGBhwcBgYGBgODhgYGBhwcAAAcnKcnAAAAAAAAAAAAAAAAA8PPDzw8MPDDw88PPDwAAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAfn5mZmZmZmZmZn5+AAAAAH5+ZmZmZmZmZmZ+fgAAAAB+fmZmZmZmZmZmfn4AAAAAAAAAAAAAAAAAAAAAAAAYGAAAGBgYGBgYGBgYGAAAAAAMDD4+bGw+PgwMAAAAABwcNjYwMHh4MDAwMH5+AABCQjw8ZmY8PEJCAAAAAAAAw8NmZjw8GBg8PBgYGBgAABgYGBgYGAAAGBgYGBgYAAA8PGBgPDxmZjw8BgY8PAAAZmZmZgAAAAAAAAAAAAAAADw8QkKdnaGhoaGdnUJCPDwcHCQkREQ8PAAAfn4AAAAAAAAzM2ZmzMxmZjMzAAAAAD4+BgYAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAPDxCQrm5paW5uaWlQkI8PP//AAAAAAAAAAAAAAAAAAA8PGZmPDwAAAAAAAAAAAAAGBgYGH5+GBgYGAAAfn4AAHh4DAwYGDAwfHwAAAAAAAB4eAwMGBgMDHh4AAAAAAAAGBgwMGBgAAAAAAAAAAAAAAAAAABmZmZmZmZmZn9/YGA+Pnp6eno6OgoKCgoKCgAAAAAAABgYGBgAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMDAwAAAAAAAAODhEREREODgAAHx8AAAAAAAAzMxmZjMzZmbMzAAAAABAQMbGTExYWDIyZmbPzwICQEDGxkxMWFg+PmJixMQODsDAIyNmZiws2dkzM2dnAQEYGAAAGBgwMGBgZmY8PAAAMDAYGDw8ZmZ+fmZmZmYAAAwMGBg8PGZmfn5mZmZmAAAYGGZmPDxmZn5+ZmZmZgAAcXGOjjw8ZmZ+fmZmZmYAAGZmAAA8PGZmfn5mZmZmAAAYGCQkPDxmZn5+ZmZmZgAAHx88PDw8b298fMzMz88AAB4eMDBgYGBgMDAeHgwMGBgwMBgYfn5gYHh4YGB+fgAADAwYGH5+YGB4eGBgfn4AABgYZmZ+fmBgeHhgYH5+AABmZgAAfn5gYHh4YGB+fgAAMDAYGDw8GBgYGBgYPDwAAAwMGBg8PBgYGBgYGDw8AAAYGGZmPDwYGBgYGBg8PAAAZmYAADw8GBgYGBgYPDwAAHh4bGxmZvb2ZmZsbHh4AABxcc7O5ub29t7ezs7GxgAAMDAYGDw8ZmZmZmZmPDwAAAwMGBg8PGZmZmZmZjw8AAAYGGZmPDxmZmZmZmY8PAAAcXGOjjw8ZmZmZmZmPDwAAMPDPDxmZmZmZmZmZjw8AAAAAMbGbGw4OGxsxsYAAAAAPz9mZm5ufn52dmZm/PwAADAwGBhmZmZmZmZmZjw8AAAMDBgYZmZmZmZmZmY8PAAAGBgkJGZmZmZmZmZmPDwAAGZmAABmZmZmZmZmZjw8AAAGBggIw8NmZjw8GBgYGAAAwMDAwPz8xsb8/MDAwMAAADw8ZmZmZmxsZmZmZmxsYGAwMBgYPDwGBj4+ZmY+PgAADAwYGDw8BgY+PmZmPj4AABgYZmY8PAYGPj5mZj4+AABxcY6OPDwGBj4+ZmY+PgAAZmYAADw8BgY+PmZmPj4AABgYJCQ8PAYGPj5mZj4+AAAAAAAAfn4bG39/2Nh3dwAAAAAAADw8YGBgYGBgPDwYGDAwGBg8PGZmfn5gYDw8AAAMDBgYPDxmZn5+YGA8PAAAGBhmZjw8ZmZ+fmBgPDwAAGZmAAA8PGZmfn5gYDw8AAAwMBgYAAAYGBgYGBgMDAAADAwYGAAAGBgYGBgYDAwAABgYZmYAABgYGBgYGAwMAAAAAGZmAAAYGBgYGBgMDAAAYGD8/BgYPDxmZmZmPDwAAHFxjo4AAHx8ZmZmZmZmAAAwMBgYAAA8PGZmZmY8PAAADAwYGAAAPDxmZmZmPDwAABgYZmYAADw8ZmZmZjw8AABxcY6OAAA8PGZmZmY8PAAAAABmZgAAPDxmZmZmPDwAAAAAGBgAAP//AAAYGAAAAAAAAAICfHzOztbW5uZ8fICAMDAYGAAAZmZmZmZmPj4AAAwMGBgAAGZmZmZmZj4+AAAYGGZmAABmZmZmZmY+PgAAAABmZgAAZmZmZmZmPj4AAAwMGBgAAGZmZmY8PBgYMDBgYGBgfHxmZmZmfHxgYGBgAABmZgAAZmZmZjw8GBgwMA==",amigaFont:!0},"pot-noodle":{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAP//g4M5OSkpIyM/P4GB/////4ODOTkhITk5OTk5OX9///8DA5mZk5OZmZmZAwP/////g4M5OT8/Pz85OYOD9/f//w8Ph4eTk5mZmZkDA/////8BAZ+fg4Ofn5mZAwP39/v7AQGcnIeHn5+fnx8f///394ODOTk/PzExOTmBgf39//85OTk5ISE5OTk5OTl/f///gYHn5+fn5+fn54GB///9/fn5+fn5+RkZOTkDA39///85OTMzJyczMzk5OTl/f///Hx+fn5+fn5+ZmQMD9/f//zk5EREBASkpOTk5OX9///85OSkpISExMTk5OTn/////g4M5OTk5OTk5OYOD/////wMDmZmZmZOTn58fH/////+Dgzk5OTkpKTU1i4v9/f//AwOZmZOTmZmZmRkZ+/v//4ODPz+Dg/n5OTkDA39/9/cDA8nJz8/Pz8/Pz8/f339/MTEzMzMzMzMzM4GB//9/fzk5OTmTk5OTx8fv7///f385OTk5KSkBAREROTn//z8/OTk5OaOjOTk5OTk5/f39/Tk5OTmjo+fn5+fn5/////8BAfPz5+fNzZmZgYH9/f//gYHPz8/Pz8/Pz4GB//8/P5+fz8/n5/Pz+fn8/P7+//+BgfPz8/Pz8/PzgYH/////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAcHBwcGBgYGAAAGBgQEGZmZmYAAAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAGBh+fsDAfHwGBvz8MDAAAGNjpqbMzBgYMzNlZcbGgIA8PGZmZGR7e87OxsZ7ewAAGBgYGDAwAAAAAAAAAAAAAAwMGBgwMDAwMDAYGAwMAAAwMBgYDAwMDAwMGBgwMAAAAABmZjw8//88PGZmAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwICAAAB8fM7O1tbW1ubmfHwAAAAAGBg4OBgYGBgYGH5+AAAAAHx8xsaMjDg4Zmb+/gAAICB8fMbGHh4GBsbGfHwAAICAxsbGxn5+BgYGBgYGAgIAAP7+wMD8/AYGxsb8/AAAAAB8fMDA/PzGxsbGfHwAAICA/v7MzJiYMDBgYMDAAAAAAHx8xsZ8fMbGxsZ8fAAAAAB8fMbGxsZ+fgYGfHwAAAAAGBgYGAAAAAAYGBgYAAAAABgYGBgAAAAAGBgYGDAwGBgwMGBgwMBgYDAwGBgAAAAAAAD//wAAAAD//wAAAAAwMBgYDAwGBgwMGBgwMAAAAAA8PGZmDAwYGAAAGBgQEAAAfHzGxtbW3NzAwH5+AAAAAHx8xsbe3sbGxsbGxoCAAAD8/GZmbGxmZmZm/PwAAAAAfHzGxsDAwMDGxnx8CAgAAPDweHhsbGZmZmb8/AAAAAD+/mBgfHxgYGZm/PwICAQE/v5jY3h4YGBgYODgAAAICHx8xsbAwM7OxsZ+fwICAADGxsbG3t7GxsbGxsaAgAAAfn4YGBgYGBgYGH5+AAACAgYGBgYGBubmxsb8/ICAAADGxszM2NjMzMbGxsaAgAAA4OBgYGBgYGBmZvz8CAgAAMbG7u7+/tbWxsbGxoCAAADGxtbW3t7OzsbGxsYAAAAAfHzGxsbGxsbGxnx8AAAAAPz8ZmZmZmxsYGDg4AAAAAB8fMbGxsbW1srKdHQCAgAA/PxmZmxsZmZmZubmBAQAAH5+wMB8fAYGxsb8/ICACAj8/DY2MDAwMDAwMDAgIICAzs7MzMzMzMzMzH5+AACAgMbGxsZsbGxsODgQEAAAgIDGxsbG1tb+/u7uxsYAAICAxsbGxlxcxsbGxsbGAgICAsbGxsZcXBgYGBgYGAgIAAD+/gwMGBgyMmZm/v4CAgAAfn4wMDAwMDAwMH5+AADAwGBgMDAYGAwMBgYDAwEBAAB+fgwMDAwMDAwMfn4AABgYPDxmZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//GBgYGAwMAAAAAAAAAAAAAAAAAAB8fAYGdnbGxn5+AADg4GBgbGxmZmZmZmb8/AAAAAAAAH5+wsLAwMLCfn4AAA4ODAxsbMzMzMzMzH5+AAAAAAAAfHzGxtzcwMB+fgAAHh4wMHx8MDAwMDAwMDAgIAAAAAB8fMbGxsZ2dgYG/Pzg4GBgbGxmZmZmZmbm5gAAGBgAABgYGBgYGBgYGBgQEAICBgYAAAYGBgbGxsbGfHzg4GBgZmZsbHh4bGzm5gICGBgYGBgYGBgYGBgYGBgQEAAAAAD8/NbW1tbW1tbWgIAAAAAA/PxmZmZmZmbm5gQEAAAAAHx8xsbGxsbGfHwAAAAAAAD8/GZmZmZsbGBg4OAAAAAAfn7MzMzMbGwMDA4OAAAICPz8ZmZgYGBgYGBAQAAAAAB+fsDAfHwGBvz8AAAwMDAwfHwwMDAwMDAwMCAgAACAgM7OzMzMzMzMfn4AAAAAgIDGxsbGbGxsbDg4AAAAAAIC1tbW1tbW1tZ8fAAAAAAAAMbGxsZcXMbGxsYCAgAAgIDGxsbGxsZeXgYGfHwAAAAA/v6MjBgYMjL+/gAAHBwwMDAwYGAwMDAwHBwAABgYGBgYGBgYGBgYGBgYGBg4OAwMDAwGBgwMDAw4OAAAdnbc3AAAAAAAAAAAAAAAAMzMMzPMzDMzzMwzM8zMMzOfn+fng4M5OSEhOTk5OXt78/PPz4ODOTkhITk5OTl7e4ODOTmDgzk5ISE5OTk5e3uJiSMjg4M5OSEhOTk5OXt7OTn//4ODOTkhITk5OTl7e4ODOTmDgzk5ISE5OTk5e3v//4CAMzMgIDMzMzMwMHd3//+Dgzk5Pz8/Pzk5g4PPz5+fz88DA5+fg4OfnwEB///n58/PAwOfn4ODn58BAf//z88zMwMDn5+Dg5+fAQH//zMz//8DA5+fg4OfnwEB//8/P8/PAwPPz8/Pz88DA///8/PPzwMDz8/Pz8/PAwP//8/PMzP//wMDz8/PzwMD//8zM///AwPPz8/Pz88DA/////8fH4+Ph4cTE5mZAwP//4mJIyMZGQkJISExMTk5///Pz+fng4M5OTk5OTmDg///5+fPz4ODOTk5OTk5g4P//8/PMzP//4eHMzMzM4eH//+JiSMj//+Dgzk5OTmDg///OTn//4ODOTk5OTk5g4P///////88PJmZ5+eZmTw8///+/oWFOzs1NSkpWVmjo39/z8/n539/MTEzMzMzgYH//+fnz89/fzExMzMzM4GB///PzzMzf38xMTMzMzOBgf////8zM39/MTEzMzMzgYH///Pz5+c8PJmZw8Pn58PD//8PD5+fg4OZmYODn5+fnw8Pg4M5OTk5IyM5OTk5IyM/P+fnw8OZmf////////////8QEBgYAAAYGBgYHBwcHAAAAAAYGH5+wMDAwMDAfn4YGAgIPDxmZvj4YGBmZvz8CAjGxnx8xsbGxnx8xsYAAAAAxsbGxmxsODgQEP7+EBAQEBgYGBgYGAAAGBgYGBgYAAB8fMDAPDxmZmZmPDwDAz4+JCQAAAAAAAAAAAAAAAAAAHx8goKamqKioqKamoKCfHwAAHh4zMzMzPb2AAD+/gAAAAASEmxs2NhsbBISAAAAAP7+BgYAAAAAAAAAAAAAAAAAAAAAfn5+fgAAAAAAAAAAfHyCgrKyqqqysqqqgoJ8fP//AAAAAAAAAAAAAAAAAAB4eMzMeHgAAAAAAAAAAAAAMDAwMPz8MDAwMAAA/PwAAHBw2NgwMGBg+PgAAAAAAADw8BgYcHAYGPDwAAAAAAAAMDBgYMDAAAAAAAAAAAAAAAAAAACAgMbGxsbGxv//wMB+fuzs7OxsbCwsLCwuLgAAAAAAABgYGBgAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDBgYODgYGBgYPDwAAAAAAAAAAB4eMzMeHgAAPz8AAAAAAAASEg2NhsbNjZISAAAAABjY+bmbGx7ezc3b2/DwwAAY2Pm5mxsfn4zM2Zmz88AAMPD5uZsbNvbNzdvb8PDAAAICBgYAAAYGDAwZmY8PAAAYGAYGHx8xsbe3sbGxsaEhAwMMDB8fMbG3t7GxsbGhIR8fMbGfHzGxt7exsbGxoSEdnbc3Hx8xsbe3sbGxsaEhMbGAAB8fMbG3t7GxsbGhIR8fMbGfHzGxt7exsbGxoSEAAB/f8zM39/MzMzMz8+IiAAAfHzGxsDAwMDGxnx8MDBgYDAw/PxgYHx8YGD+/gAAGBgwMPz8YGB8fGBg/v4AADAwzMz8/GBgfHxgYP7+AADMzAAA/PxgYHx8YGD+/gAAwMAwMPz8MDAwMDAw/PwAAAwMMDD8/DAwMDAwMPz8AAAwMMzMAAD8/DAwMDD8/AAAzMwAAPz8MDAwMDAw/PwAAAAA4OBwcHh47OxmZvz8AAB2dtzc5ub29t7ezs7GxgAAMDAYGHx8xsbGxsbGfHwAABgYMDB8fMbGxsbGxnx8AAAwMMzMAAB4eMzMzMx4eAAAdnbc3AAAfHzGxsbGfHwAAMbGAAB8fMbGxsbGxnx8AAAAAAAAw8NmZhgYZmbDwwAAAQF6esTEysrW1qamXFyAgDAwGBiAgM7OzMzMzH5+AAAYGDAwgIDOzszMzMx+fgAAMDDMzICAzs7MzMzMfn4AAAAAzMyAgM7OzMzMzH5+AAAMDBgYw8NmZjw8GBg8PAAA8PBgYHx8ZmZ8fGBgYGDw8Hx8xsbGxtzcxsbGxtzcwMAwMBgYfHwGBnZ2xsZ+fgAAGBgwMHx8BgZ2dsbGfn4AABgYZmZ8fAYGdnbGxn5+AAB2dtzcfHwGBnZ2xsZ+fgAAxsYAAHx8BgZ2dsbGfn4AAHx8xsZ8fAYGdnbGxn5+AAAAAAAAfn4bG35+yMh/fwAAAAAAAHx8xsbAwMbGfHwwMDAwGBh8fMbG3NzAwH5+AAAYGDAwfHzGxtzcwMB+fgAAGBhmZnx8xsbc3MDAfn4AAMbGAAB8fMbG3NzAwH5+AAAwMBgYAAAYGBgYGBgMDAAADAwYGAAAGBgYGBgYDAwAABgYZmYAABgYGBgYGAwMAAAAAGZmAAAYGBgYGBgMDAAAMDB+fhgYfHzGxsbGfHwAAHZ23NwAAPz8xsbGxsbGAgIwMBgYAAB8fMbGxsZ8fAAAGBgwMAAAfHzGxsbGfHwAABgYZmYAAHx8xsbGxnx8AAB2dtzcAAB8fMbGxsZ8fAAAAABsbAAAfHzGxsbGfHwAAAAAGBgAAH5+AAAYGAAAAAAAAAMDPj5ubn5+dnZ8fMDAdnbc3ICAxsbGxsbGfn4AAAwMGBiAgMbGxsbGxn5+AAAYGGZmgIDGxsbGxsZ+fgAAAADGxoCAxsbGxsbGfn4AAAwMGBiAgMbGxsZsbDg48PDw8GBgfHxmZmZmfHxgYPDwAADGxoCAxsbGxmxsODjw8A==",amigaFont:!0},topaz:{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAIODOTkhISkpISE/P4eH///Dw5mZmZmBgZmZmZmZmf//g4OZmZmZg4OZmZmZg4P//+Hhz8+fn5+fn5/Pz+Hh//+Hh5OTmZmZmZmZk5OHh///gYGfn5+fh4efn5+fgYH//4GBn5+fn4eHn5+fn5+f///Dw5mZn5+RkZmZmZnBwf//mZmZmZmZgYGZmZmZmZn//8PD5+fn5+fn5+fn58PD///5+fn5+fn5+fn5mZnDw///nJyZmZOTh4eTk5mZnJz//5+fn5+fn5+fn5+fn4GB//+cnIiIgICUlJycnJycnP//nJyMjISEkJCYmJycnJz//8PDmZmZmZmZmZmZmcPD//+Dg5mZmZmDg5+fn5+fn///w8OZmZmZmZmZmZGRwMD//4ODmZmZmYODk5OZmZmZ///Dw5mZj4/Dw/HxmZnDw///gYHn5+fn5+fn5+fn5+f//5mZmZmZmZmZmZmZmcPD//+ZmZmZmZmZmZmBw8Pn5///nJycnJyclJSAgIiInJz//zw8mZnDw+fnw8OZmTw8//88PJmZw8Pn5+fn5+fn5///gID5+fPz5+fPz5+fgID//8PDz8/Pz8/Pz8/Pz8PD//8/P5+fz8/n5/Pz+fn8/P//w8Pz8/Pz8/Pz8/Pzw8P/////////////////////gIAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGAAAGBgAAGxsbGwAAAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAGBg+PmBgPDwGBnx8GBgAAAAAZmasrNjYNjZqaszMAAA4OGxsaGh2dtzczs57ewAAGBgYGDAwAAAAAAAAAAAAAAwMGBgwMDAwMDAYGAwMAAAwMBgYDAwMDAwMGBgwMAAAAABmZjw8//88PGZmAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAAfn4AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwAAAPDxmZm5ufn52dmZmPDwAABgYODh4eBgYGBgYGBgYAAA8PGZmBgYMDBgYMDB+fgAAPDxmZgYGHBwGBmZmPDwAABwcPDxsbMzM/v4MDAwMAAB+fmBgfHwGBgYGZmY8PAAAHBwwMGBgfHxmZmZmPDwAAH5+BgYGBgwMGBgYGBgYAAA8PGZmZmY8PGZmZmY8PAAAPDxmZmZmPj4GBgwMODgAAAAAGBgYGAAAAAAYGBgYAAAAABgYGBgAAAAAGBgYGDAwAAAGBhgYYGAYGAYGAAAAAAAAAAB+fgAAfn4AAAAAAAAAAGBgGBgGBhgYYGAAAAAAPDxmZgYGDAwYGAAAGBgAAHx8xsbe3tbW3t7AwHh4AAA8PGZmZmZ+fmZmZmZmZgAAfHxmZmZmfHxmZmZmfHwAAB4eMDBgYGBgYGAwMB4eAAB4eGxsZmZmZmZmbGx4eAAAfn5gYGBgeHhgYGBgfn4AAH5+YGBgYHh4YGBgYGBgAAA8PGZmYGBubmZmZmY+PgAAZmZmZmZmfn5mZmZmZmYAADw8GBgYGBgYGBgYGDw8AAAGBgYGBgYGBgYGZmY8PAAAxsbMzNjY8PDY2MzMxsYAAGBgYGBgYGBgYGBgYH5+AADGxu7u/v7W1sbGxsbGxgAAxsbm5vb23t7OzsbGxsYAADw8ZmZmZmZmZmZmZjw8AAB8fGZmZmZ8fGBgYGBgYAAAeHjMzMzMzMzMzNzcfn4AAHx8ZmZmZnx8bGxmZmZmAAA8PGZmcHA8PA4OZmY8PAAAfn4YGBgYGBgYGBgYGBgAAGZmZmZmZmZmZmZmZjw8AABmZmZmZmZmZjw8PDwYGAAAxsbGxsbG1tb+/u7uxsYAAMPDZmY8PBgYPDxmZsPDAADDw2ZmPDwYGBgYGBgYGAAA/v4MDBgYMDBgYMDA/v4AADw8MDAwMDAwMDAwMDw8AADAwGBgMDAYGAwMBgYDAwAAPDwMDAwMDAwMDAwMPDwAABAQODhsbMbGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+GBgYGAwMAAAAAAAAAAAAAAAAAAA8PAYGPj5mZj4+AABgYGBgfHxmZmZmZmZ8fAAAAAAAADw8YGBgYGBgPDwAAAYGBgY+PmZmZmZmZj4+AAAAAAAAPDxmZn5+YGA8PAAAHBwwMHx8MDAwMDAwMDAAAAAAAAA+PmZmZmY+PgYGPDxgYGBgfHxmZmZmZmZmZgAAGBgAABgYGBgYGBgYDAwAAAwMAAAMDAwMDAwMDAwMeHhgYGBgZmZsbHh4bGxmZgAAGBgYGBgYGBgYGBgYDAwAAAAAAADs7P7+1tbGxsbGAAAAAAAAfHxmZmZmZmZmZgAAAAAAADw8ZmZmZmZmPDwAAAAAAAB8fGZmZmZ8fGBgYGAAAAAAPj5mZmZmPj4GBgYGAAAAAHx8ZmZgYGBgYGAAAAAAAAA8PGBgPDwGBnx8AAAwMDAwfHwwMDAwMDAcHAAAAAAAAGZmZmZmZmZmPj4AAAAAAABmZmZmZmY8PBgYAAAAAAAAxsbGxtbW/v5sbAAAAAAAAMbGbGw4OGxsxsYAAAAAAABmZmZmZmY8PBgYMDAAAAAAfn4MDBgYMDB+fgAADg4YGBgYcHAYGBgYDg4AABgYGBgYGBgYGBgYGBgYAABwcBgYGBgODhgYGBhwcAAAcnKcnAAAAAAAAAAAAAAAAA8PPDzw8MPDDw88PPDwAADPz+fnw8OZmYGBmZmZmf//8/Pn58PDmZmBgZmZmZn//+fnmZnDw5mZgYGZmZmZ//+OjnFxw8OZmYGBmZmZmf//mZn//8PDmZmBgZmZmZn//+fn29vDw5mZgYGZmZmZ///g4MPDw8OQkIODMzMwMP//4eHPz5+fn5/Pz+Hh8/Pn58/P5+eBgZ+fh4efn4GB///z8+fngYGfn4eHn5+Bgf//5+eZmYGBn5+Hh5+fgYH//5mZ//+BgZ+fh4efn4GB///Pz+fnw8Pn5+fn5+fDw///8/Pn58PD5+fn5+fnw8P//+fnmZnDw+fn5+fn58PD//+Zmf//w8Pn5+fn5+fDw///h4eTk5mZCQmZmZOTh4f//46OMTEZGQkJISExMTk5///Pz+fnw8OZmZmZmZnDw///8/Pn58PDmZmZmZmZw8P//+fnmZnDw5mZmZmZmcPD//+OjnFxw8OZmZmZmZnDw///PDzDw5mZmZmZmZmZw8P/////OTmTk8fHk5M5Of/////AwJmZkZGBgYmJmZkDA///z8/n55mZmZmZmZmZw8P///Pz5+eZmZmZmZmZmcPD///n59vbmZmZmZmZmZnDw///mZn//5mZmZmZmZmZw8P///n59/c8PJmZw8Pn5+fn//8/Pz8/AwM5OQMDPz8/P///w8OZmZmZk5OZmZmZk5Ofn/f34+PJyZyc//////////8YGAAAGBgYGBgYGBgYGAAAAAAMDD4+bGw+PgwMAAAAABwcNjYwMHh4MDAwMH5+AABCQjw8ZmY8PEJCAAAAAAAAw8NmZjw8GBg8PBgYGBgAABgYGBgYGAAAGBgYGBgYAAA8PGBgPDxmZjw8BgY8PAAAZmZmZgAAAAAAAAAAAAAAAH5+gYGdnbGxnZ2BgX5+AAAcHCQkREQ8PAAAfn4AAAAAAAAzM2ZmzMxmZjMzAAAAAD4+BgYAAAAAAAAAAAAAAAAAAAAAAAB+fgAAAAAAAAAAfn6Bgbm5paW5uaWlgYF+fn5+AAAAAAAAAAAAAAAAAAA8PGZmPDwAAAAAAAAAAAAAGBgYGH5+GBgYGAAAfn4AAHh4DAwYGDAwfHwAAAAAAAB4eAwMGBgMDHh4AAAAAAAAGBgwMGBgAAAAAAAAAAAAAAAAAABmZmZmZmZmZn9/YGA+Pnp6eno6OgoKCgoKCgAAAAAAABgYGBgAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMDAwAAAAAAAAODhEREREODgAAHx8AAAAAAAAzMxmZjMzZmbMzAAAAABAQMbGTExYWDIyZmbPzwICQEDGxkxMWFg+PmJixMQODsDAIyNmZiws2dkzM2dnAQEYGAAAGBgwMGBgZmY8PAAAMDAYGDw8ZmZ+fmZmZmYAAAwMGBg8PGZmfn5mZmZmAAAYGGZmPDxmZn5+ZmZmZgAAcXGOjjw8ZmZ+fmZmZmYAAGZmAAA8PGZmfn5mZmZmAAAYGCQkPDxmZn5+ZmZmZgAAHx88PDw8b298fMzMz88AAB4eMDBgYGBgMDAeHgwMGBgwMBgYfn5gYHh4YGB+fgAADAwYGH5+YGB4eGBgfn4AABgYZmZ+fmBgeHhgYH5+AABmZgAAfn5gYHh4YGB+fgAAMDAYGDw8GBgYGBgYPDwAAAwMGBg8PBgYGBgYGDw8AAAYGGZmPDwYGBgYGBg8PAAAZmYAADw8GBgYGBgYPDwAAHh4bGxmZvb2ZmZsbHh4AABxcc7O5ub29t7ezs7GxgAAMDAYGDw8ZmZmZmZmPDwAAAwMGBg8PGZmZmZmZjw8AAAYGGZmPDxmZmZmZmY8PAAAcXGOjjw8ZmZmZmZmPDwAAMPDPDxmZmZmZmZmZjw8AAAAAMbGbGw4OGxsxsYAAAAAPz9mZm5ufn52dmZm/PwAADAwGBhmZmZmZmZmZjw8AAAMDBgYZmZmZmZmZmY8PAAAGBgkJGZmZmZmZmZmPDwAAGZmAABmZmZmZmZmZjw8AAAGBggIw8NmZjw8GBgYGAAAwMDAwPz8xsb8/MDAwMAAADw8ZmZmZmxsZmZmZmxsYGAwMBgYPDwGBj4+ZmY+PgAADAwYGDw8BgY+PmZmPj4AABgYZmY8PAYGPj5mZj4+AABxcY6OPDwGBj4+ZmY+PgAAZmYAADw8BgY+PmZmPj4AABgYJCQ8PAYGPj5mZj4+AAAAAAAAfn4bG39/2Nh3dwAAAAAAADw8YGBgYGBgPDwYGDAwGBg8PGZmfn5gYDw8AAAMDBgYPDxmZn5+YGA8PAAAGBhmZjw8ZmZ+fmBgPDwAAGZmAAA8PGZmfn5gYDw8AAAwMBgYAAAYGBgYGBgMDAAADAwYGAAAGBgYGBgYDAwAABgYZmYAABgYGBgYGAwMAAAAAGZmAAAYGBgYGBgMDAAAYGD8/BgYPDxmZmZmPDwAAHFxjo4AAHx8ZmZmZmZmAAAwMBgYAAA8PGZmZmY8PAAADAwYGAAAPDxmZmZmPDwAABgYZmYAADw8ZmZmZjw8AABxcY6OAAA8PGZmZmY8PAAAAABmZgAAPDxmZmZmPDwAAAAAGBgAAH5+AAAYGAAAAAAAAAICfHzOztbW5uZ8fICAMDAYGAAAZmZmZmZmPj4AAAwMGBgAAGZmZmZmZj4+AAAYGGZmAABmZmZmZmY+PgAAAABmZgAAZmZmZmZmPj4AAAwMGBgAAGZmZmY8PBgYMDBgYGBgfHxmZmZmfHxgYGBgAABmZgAAZmZmZjw8GBgwMA==",amigaFont:!0},"topaz+":{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAIODOTkhISkpISE/P4eH///Dw5mZmZmBgZmZmZmZmf//g4OZmZmZg4OZmZmZg4P//+Hhz8+fn5+fn5/Pz+Hh//+Hh5OTmZmZmZmZk5OHh///gYGfn5+fh4efn5+fgYH//4GBn5+fn4eHn5+fn5+f///Dw5mZn5+RkZmZmZnBwf//mZmZmZmZgYGZmZmZmZn//8PD5+fn5+fn5+fn58PD///5+fn5+fn5+fn5mZnDw///nJyZmZOTh4eTk5mZnJz//5+fn5+fn5+fn5+fn4GB//+cnIiIgICUlJycnJycnP//nJyMjISEkJCYmJycnJz//8PDmZmZmZmZmZmZmcPD//+Dg5mZmZmDg5+fn5+fn///w8OZmZmZmZmZmZGRwMD//4ODmZmZmYODk5OZmZmZ///Dw5mZj4/Dw/HxmZnDw///gYHn5+fn5+fn5+fn5+f//5mZmZmZmZmZmZmZmcPD//+ZmZmZmZmZmZmBw8Pn5///nJycnJyclJSAgIiInJz//zw8mZnDw+fnw8OZmTw8//88PJmZw8Pn5+fn5+fn5///gID5+fPz5+fPz5+fgID//8PAz8/Pz8/Pz8/Pz8DD//8/P5+fz8/n5/Pz+fn8/P7+wwPz8/Pz8/Pz8/PzA8P/////////////////////AAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGAAAGBgAAGxsbGwAAAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAGBg+PmBgPDwGBnx8GBgAAAMDZmasrNjYNjZqaszMAAA4OGxsaGh2dtzczs57ewAAGBgYGDAwAAAAAAAAAAAAAAMHDgwYGBgYGBgMDgcDAADA4HAwGBgYGBgYMHDgwAAAAABmZjw8//88PGZmAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwICAPDxmZm5ufn52dmZmPDwAABgYODh4eBgYGBgYGBgYAAA8PGZmBgYMDBgYMDB+fgAAPDxmZgYGHBwGBmZmPDwAABwcPDxsbMzM/v4MDAwMAAB+fmBgfHwGBgYGZmY8PAAAHBwwMGBgfHxmZmZmPDwAAH5+BgYGBgwMGBgYGBgYAAA8PGZmZmY8PGZmZmY8PAAAPDxmZmZmPj4GBgwMODgAAAAAGBgYGAAAAAAYGBgYAAAAABgYGBgAAAAAGBgYGDAwAwMGBgwMGBgMDAYGAwMAAAAAAAD//wAA//8AAAAAAADAwGBgMDAYGDAwYGDAwAAAPDxmZgYGDAwYGAAAGBgAAHx8xsbe3tbW3t7AwHh4AAA8PGZmZmZ+fmZmZmZmZgAAfHxmZmZmfHxmZmZmfHwAAB4eMDBgYGBgYGAwMB4eAAB4eGxsZmZmZmZmbGx4eAAAfn5gYGBgeHhgYGBgfn4AAH5+YGBgYHh4YGBgYGBgAAA8PGZmYGBubmZmZmY+PgAAZmZmZmZmfn5mZmZmZmYAADw8GBgYGBgYGBgYGDw8AAAGBgYGBgYGBgYGZmY8PAAAxsbMzNjY8PDY2MzMxsYAAGBgYGBgYGBgYGBgYH5+AADGxu7u/v7W1sbGxsbGxgAAxsbm5vb23t7OzsbGxsYAADw8ZmZmZmZmZmZmZjw8AAB8fGZmZmZ8fGBgYGBgYAAAeHjMzMzMzMzMzNzcfn4AAHx8ZmZmZnx8bGxmZmZmAAA8PGZmcHA8PA4OZmY8PAAAfn4YGBgYGBgYGBgYGBgAAGZmZmZmZmZmZmZmZjw8AABmZmZmZmZmZjw8PDwYGAAAxsbGxsbG1tb+/u7uxsYAAMPDZmY8PBgYPDxmZsPDAADDw2ZmPDwYGBgYGBgYGAAA/v4MDBgYMDBgYMDA/v4AADw/MDAwMDAwMDAwMD88AADAwGBgMDAYGAwMBgYDAwEBPPwMDAwMDAwMDAwM/DwAABAQODhsbMbGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//GBgYGAwMAAAAAAAAAAAAAAAAAAA8PAYGPj5mZj4+AABgYGBgfHxmZmZmZmZ8fAAAAAAAADw8YGBgYGBgPDwAAAYGBgY+PmZmZmZmZj4+AAAAAAAAPDxmZn5+YGA8PAAAHBwwMHx8MDAwMDAwMDAAAAAAAAA+PmZmZmY+PgYGPDxgYGBgfHxmZmZmZmZmZgAAGBgAABgYGBgYGBgYDAwAAAwMAAAMDAwMDAwMDAwMeHhgYGBgZmZsbHh4bGxmZgAAGBgYGBgYGBgYGBgYDAwAAAAAAADs7P7+1tbGxsbGAAAAAAAAfHxmZmZmZmZmZgAAAAAAADw8ZmZmZmZmPDwAAAAAAAB8fGZmZmZ8fGBgYGAAAAAAPj5mZmZmPj4GBgYGAAAAAHx8ZmZgYGBgYGAAAAAAAAA8PGBgPDwGBnx8AAAwMDAwfHwwMDAwMDAcHAAAAAAAAGZmZmZmZmZmPj4AAAAAAABmZmZmZmY8PBgYAAAAAAAAxsbGxtbW/v5sbAAAAAAAAMbGbGw4OGxsxsYAAAAAAABmZmZmZmY8PBgYMDAAAAAAfn4MDBgYMDB+fgAADg8ZGBgYcHAYGBgZDw4AABgYGBgYGBgYGBgYGBgYGBhw8JgYGBgODhgYGJjwcAAAcnKcnAAAAAAAAAAAAAAAAA8PPDzw8MPDDw88PPDwAADPz+fnw8OZmYGBmZmZmf//8/Pn58PDmZmBgZmZmZn//+fnmZnDw5mZgYGZmZmZ//+OjnFxw8OZmYGBmZmZmf//mZn//8PDmZmBgZmZmZn//+fn29vDw5mZgYGZmZmZ///g4MPDw8OQkIODMzMwMP//4eHPz5+fn5/Pz+Hh8/Pn58/P5+eBgZ+fh4efn4GB///z8+fngYGfn4eHn5+Bgf//5+eZmYGBn5+Hh5+fgYH//5mZ//+BgZ+fh4efn4GB///Pz+fnw8Pn5+fn5+fDw///8/Pn58PD5+fn5+fnw8P//+fnmZnDw+fn5+fn58PD//+Zmf//w8Pn5+fn5+fDw///h4eTk5mZCQmZmZOTh4f//46OMTEZGQkJISExMTk5///Pz+fnw8OZmZmZmZnDw///8/Pn58PDmZmZmZmZw8P//+fnmZnDw5mZmZmZmcPD//+OjnFxw8OZmZmZmZnDw///PDzDw5mZmZmZmZmZw8P/////OTmTk8fHk5M5Of/////AwJmZkZGBgYmJmZkDA///z8/n55mZmZmZmZmZw8P///Pz5+eZmZmZmZmZmcPD///n59vbmZmZmZmZmZnDw///mZn//5mZmZmZmZmZw8P///n59/c8PJmZw8Pn5+fn//8/Pz8/AwM5OQMDPz8/P///w8OZmZmZk5OZmZmZk5Ofn/f34+PJyZyc//////////8YGAAAGBgYGBgYGBgYGAAAAAAMDD4+bGw+PgwMAAAAABwcNjYwMHh4MDAwMH5+AABCQjw8ZmY8PEJCAAAAAAAAw8NmZjw8GBg8PBgYGBgAABgYGBgYGAAAGBgYGBgYAAA8PGBgPDxmZjw8BgY8PAAAZmZmZgAAAAAAAAAAAAAAAH5+gYGdnbGxnZ2BgX5+AAAcHCQkREQ8PAAAfn4AAAAAAAAzM2ZmzMxmZjMzAAAAAP5/AwMAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAfn6Bgbm5paW5uaWlgYF+fv//AAAAAAAAAAAAAAAAAAA8PGZmPDwAAAAAAAAAAAAAGBgYGH5+GBgYGAAAfn4AAHh4DAwYGDAwfHwAAAAAAAB4eAwMGBgMDHh4AAAAAAAAGBgwMGBgAAAAAAAAAAAAAAAAAABmZmZmZmZmZn9/YGA+Pnp6eno6OgoKCgoKCgAAAAAYGBgYAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMDAwAAAAAAAAODhEREREODgAAHx8AAAAAAAAzMxmZjMzZmbMzAAAAABAQMbGTExYWDAyYmbGzwICQEDGxkxMWFg+PmJixMQODsDAIyNmZiws2BoyNmZvwsIYGAAAGBgwMGBgZmY8PAAAMDAYGDw8ZmZ+fmZmZmYAAAwMGBg8PGZmfn5mZmZmAAAYGGZmPDxmZn5+ZmZmZgAAcXGOjjw8ZmZ+fmZmZmYAAGZmAAA8PGZmfn5mZmZmAAAYGCQkPDxmZn5+ZmZmZgAAHx88PDw8b298fMzMz88AAB4eMDBgYGBgMDAeHgwMGBgwMBgYfn5gYHh4YGB+fgAADAwYGH5+YGB4eGBgfn4AABgYZmZ+fmBgeHhgYH5+AABmZgAAfn5gYHh4YGB+fgAAMDAYGDw8GBgYGBgYPDwAAAwMGBg8PBgYGBgYGDw8AAAYGGZmPDwYGBgYGBg8PAAAZmYAADw8GBgYGBgYPDwAAHh4bGxmZvb2ZmZsbHh4AABxcc7O5ub29t7ezs7GxgAAMDAYGDw8ZmZmZmZmPDwAAAwMGBg8PGZmZmZmZjw8AAAYGGZmPDxmZmZmZmY8PAAAcXGOjjw8ZmZmZmZmPDwAAMPDPDxmZmZmZmZmZjw8AAAAAMbGbGw4OGxsxsYAAAAAPz9mZm5ufn52dmZm/PwAADAwGBhmZmZmZmZmZjw8AAAMDBgYZmZmZmZmZmY8PAAAGBgkJGZmZmZmZmZmPDwAAGZmAABmZmZmZmZmZjw8AAAGBggIw8NmZjw8GBgYGAAAwMDAwPz8xsb8/MDAwMAAADw8ZmZmZmxsZmZmZmxsYGAwMBgYPDwGBj4+ZmY+PgAADAwYGDw8BgY+PmZmPj4AABgYZmY8PAYGPj5mZj4+AABxcY6OPDwGBj4+ZmY+PgAAZmYAADw8BgY+PmZmPj4AABgYJCQ8PAYGPj5mZj4+AAAAAAAAfn4bG39/2Nh3dwAAAAAAADw8YGBgYGBgPDwYGDAwGBg8PGZmfn5gYDw8AAAMDBgYPDxmZn5+YGA8PAAAGBhmZjw8ZmZ+fmBgPDwAAGZmAAA8PGZmfn5gYDw8AAAwMBgYAAAYGBgYGBgMDAAADAwYGAAAGBgYGBgYDAwAABgYZmYAABgYGBgYGAwMAAAAAGZmAAAYGBgYGBgMDAAAYGD8/BgYPDxmZmZmPDwAAHFxjo4AAHx8ZmZmZmZmAAAwMBgYAAA8PGZmZmY8PAAADAwYGAAAPDxmZmZmPDwAABgYZmYAADw8ZmZmZjw8AABxcY6OAAA8PGZmZmY8PAAAAABmZgAAPDxmZmZmPDwAAAAAGBgAAH5+AAAYGAAAAAAAAAICfHzOztbW5uZ8fICAMDAYGAAAZmZmZmZmPj4AAAwMGBgAAGZmZmZmZj4+AAAYGGZmAABmZmZmZmY+PgAAAABmZgAAZmZmZmZmPj4AAAwMGBgAAGZmZmY8PBgYMDBgYGBgfHxmZmZmfHxgYGBgAABmZgAAZmZmZjw8GBgwMA==",amigaFont:!0},topaz500:{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBg8PDw8GBgYGAAAGBgAAGxsbGwAAAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAGBg+PmBgPDwGBnx8GBgAAAAAxsbMzBgYMDBmZsbGAAA4OGxsaGh2dtzczMx2dgAAGBgYGDAwAAAAAAAAAAAAAAwMGBgwMDAwMDAYGAwMAAAwMBgYDAwMDAwMGBgwMAAAAABmZjw8//88PGZmAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAAfn4AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwAAAPDxmZm5ufn52dmZmPDwAABgYODgYGBgYGBgYGH5+AAA8PGZmBgYcHDAwZmZ+fgAAPDxmZgYGHBwGBmZmPDwAABwcPDxsbMzM/v4MDB4eAAB+fmBgfHwGBgYGZmY8PAAAHBwwMGBgfHxmZmZmPDwAAH5+ZmYGBgwMGBgYGBgYAAA8PGZmZmY8PGZmZmY8PAAAPDxmZmZmPj4GBgwMODgAAAAAGBgYGAAAAAAYGBgYAAAAABgYGBgAAAAAGBgYGDAwDAwYGDAwYGAwMBgYDAwAAAAAAAB+fgAAAAB+fgAAAAAwMBgYDAwGBgwMGBgwMAAAPDxmZgYGDAwYGAAAGBgAAHx8xsbe3t7e3t7AwHh4AAAYGDw8PDxmZn5+w8PDwwAA/PxmZmZmfHxmZmZm/PwAADw8ZmbAwMDAwMBmZjw8AAD4+GxsZmZmZmZmbGz4+AAA/v5mZmBgeHhgYGZm/v4AAP7+ZmZgYHh4YGBgYPDwAAA8PGZmwMDOzsbGZmY+PgAAZmZmZmZmfn5mZmZmZmYAAH5+GBgYGBgYGBgYGH5+AAAODgYGBgYGBmZmZmY8PAAA5uZmZmxseHhsbGZm5uYAAPDwYGBgYGBgYmJmZv7+AACCgsbG7u7+/tbWxsbGxgAAxsbm5vb23t7OzsbGxsYAADg4bGzGxsbGxsZsbDg4AAD8/GZmZmZ8fGBgYGDw8AAAODhsbMbGxsbGxmxsPDwGBvz8ZmZmZnx8bGxmZuPjAAA8PGZmcHA4OA4OZmY8PAAAfn5aWhgYGBgYGBgYPDwAAGZmZmZmZmZmZmZmZj4+AADDw8PDZmZmZjw8PDwYGAAAxsbGxsbG1tb+/u7uxsYAAMPDZmY8PBgYPDxmZsPDAADDw8PDZmY8PBgYGBg8PAAA/v7GxoyMGBgyMmZm/v4AADw8MDAwMDAwMDAwMDw8AADAwGBgMDAYGAwMBgYDAwAAPDwMDAwMDAwMDAwMPDwAABAQODhsbMbGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7+GBgYGAwMAAAAAAAAAAAAAAAAAAA8PAYGHh5mZjs7AADg4GBgbGx2dmZmZmY8PAAAAAAAADw8ZmZgYGZmPDwAAA4OBgY2Nm5uZmZmZjs7AAAAAAAAPDxmZn5+YGA8PAAAHBw2NjAweHgwMDAweHgAAAAAAAA7O2ZmZmY8PMbGfHzg4GBgbGx2dmZmZmbm5gAAGBgAADg4GBgYGBgYPDwAAAYGAAAGBgYGBgYGBmZmPDzg4GBgZmZsbHh4bGzm5gAAODgYGBgYGBgYGBgYPDwAAAAAAABmZnd3a2tjY2NjAAAAAAAAfHxmZmZmZmZmZgAAAAAAADw8ZmZmZmZmPDwAAAAAAADc3GZmZmZ8fGBg8PAAAAAAPT1mZmZmPj4GBgcHAAAAAOzsdnZmZmBg8PAAAAAAAAA+PmBgPDwGBnx8AAAICBgYPj4YGBgYGhoMDAAAAAAAAGZmZmZmZmZmOzsAAAAAAABmZmZmZmY8PBgYAAAAAAAAY2Nra2trNjY2NgAAAAAAAGNjNjYcHDY2Y2MAAAAAAABmZmZmZmY8PBgYcHAAAAAAfn5MTBgYMjJ+fgAADg4YGBgYcHAYGBgYDg4AABgYGBgYGBgYGBgYGBgYAABwcBgYGBgODhgYGBhwcAAAcnKcnAAAAAAAAAAAAAAAAA8PPDzw8MPDDw88PPDwAAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAAAAAAAAAAAAAAAAAAAAAAAYGAAAGBgYGDw8PDwYGAAADAw+PmxsbGw+PgwMAAAAABwcNjYwMHh4MDAwMH5+AABCQjw8ZmY8PEJCAAAAAAAAw8NmZjw8GBg8PBgYPDwAABgYGBgYGAAAGBgYGBgYAAA8PEBAPDxmZjw8AgI8PAAAZmYAAAAAAAAAAAAAAAAAAH5+gYGdnbGxsbGdnYGBfn4wMEhIiIj4+AAA/PwAAAAAAAAzM2ZmzMxmZjMzAAAAAD4+BgYAAAAAAAAAAAAAAAAAAAAAfn5+fgAAAAAAAAAAfn6Bgbm5ubmxsampgYF+fn5+AAAAAAAAAAAAAAAAAAA8PGZmPDwAAAAAAAAAAAAAGBgYGH5+GBgYGAAAfn4AAPDwGBgwMGBg+PgAAAAAAADw8BgYMDAYGPDwAAAAAAAAGBgwMAAAAAAAAAAAAAAAAAAAAADGxsbGxsbu7vr6wMB+fvT09PR0dBQUFBQUFAAAAAAAABgYGBgAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMDAwAAAAAAAAcHCIiIiIcHAAAPj4AAAAAAAAzMxmZjMzZmbMzAAAAAAgIGNjJiYsLBkZMzNnZwEBICBjYyYmLCwbGzExYmIHB8DAIyNmZiws2dkzM2dnAQEYGAAAGBgwMGBgZmY8PAAAMDAICDw8ZmZ+fsPDw8MAAAwMEBA8PGZmfn7Dw8PDAAAYGCQkPDxmZn5+w8PDwwAAcXGOjjw8ZmZ+fsPDw8MAAMPDGBg8PGZmfn7Dw8PDAAA8PGZmPDxmZn5+w8PDwwAAHx88PDw8b298fMzMz88AADw8ZmbAwMDAZmY8PAgIMDBgYBAQ/v5gYHh4YGD+/gAAGBggIP7+YGB4eGBg/v4AADAwSEj+/mBgeHhgYP7+AABmZgAA/v5gYHh4YGD+/gAAMDAICH5+GBgYGBgYfn4AAAwMEBB+fhgYGBgYGH5+AAAYGCQkfn4YGBgYGBh+fgAAZmYAAH5+GBgYGBgYfn4AAPj4bGxmZvb2ZmZsbPj4AABxcY6Oxsbm5tbWzs7GxgAAMDAICDw8ZmbDw2ZmPDwAAAwMEBA8PGZmw8NmZjw8AAAYGCQkPDxmZsPDZmY8PAAAcXGOjjw8ZmbDw2ZmPDwAAMPDPDxmZsPDw8NmZjw8AAAAAGNjNjYcHDY2Y2MAAAAAPT1mZs/P29vz82ZmvLwAADAwCAhmZmZmZmZmZj4+AAAMDBAQZmZmZmZmZmY+PgAAGBgkJGZmZmZmZmZmPj4AAGZmAABmZmZmZmZmZj4+AAAGBggIw8NmZjw8GBg8PAAA8PBgYH5+Y2NjY35+YGDw8Hx8ZmZmZmxsZmZmZmxsYGAwMAgIPDwGBh4eZmY7OwAADAwQEDw8BgYeHmZmOzsAABgYJCQ8PAYGHh5mZjs7AABxcY6OPDwGBh4eZmY7OwAAMzMAADw8BgYeHmZmOzsAADw8ZmY8PAYGHh5mZjs7AAAAAAAAfn4bG39/2Nh3dwAAAAAAADw8ZmZgYGZmPDwQEDAwCAg8PGZmfn5gYDw8AAAMDBAQPDxmZn5+YGA8PAAAGBgkJDw8ZmZ+fmBgPDwAAGZmAAA8PGZmfn5gYDw8AAAwMAgIODgYGBgYGBg8PAAADAwQEDg4GBgYGBgYPDwAABgYJCQ4OBgYGBgYGDw8AABmZgAAODgYGBgYGBg8PAAAYGD8/BgYfHzGxsbGfHwAAHFxjo58fGZmZmZmZmZmAAAwMAgIPDxmZmZmZmY8PAAADAwQEDw8ZmZmZmZmPDwAABgYJCQ8PGZmZmZmZjw8AABxcY6OPDxmZmZmZmY8PAAAZmYAADw8ZmZmZmZmPDwAAAAAGBgAAH5+AAAYGAAAAAAAAAEBPj5nZ2trc3M+PkBAMDAICGZmZmZmZmZmOzsAAAwMEBBmZmZmZmZmZjs7AAAYGCQkZmZmZmZmZmY7OwAAZmYAAGZmZmZmZmZmOzsAAAwMEBBmZmZmZmY8PBgYcHDw8GBgfHxmZmZmfHxgYPDwZmYAAGZmZmZmZjw8GBhwcA==",amigaFont:!0},"topaz500+":{width:8,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBg8PDw8GBgYGAAAGBgAAGxsbGwAAAAAAAAAAAAAAABsbGxs/v5sbP7+bGxsbAAAGBg+PmBgPDwGBnx8GBgAAAMDxsbMzBgYMDBmZsbGgIA4OGxsaGh2dtzczMx2dgAAGBgYGDAwAAAAAAAAAAAAAAMHDgwYGBgYGBgMDgcDAADA4HAwGBgYGBgYMHDgwAAAAABmZjw8//88PGZmAAAAAAAAGBgYGH5+GBgYGAAAAAAAAAAAAAAAAAAAGBgYGDAwAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAYGBgYAAADAwYGDAwYGDAwYGDAwICAPDxmZm5ufn52dmZmPDwAABgYODgYGBgYGBgYGH5+AAA8PGZmBgYcHDAwZmZ+fgAAPDxmZgYGHBwGBmZmPDwAABwcPDxsbMzM/v4MDB4eAAB+fmBgfHwGBgYGZmY8PAAAHBwwMGBgfHxmZmZmPDwAAH5+ZmYGBgwMGBgYGBgYAAA8PGZmZmY8PGZmZmY8PAAAPDxmZmZmPj4GBgwMODgAAAAAGBgYGAAAAAAYGBgYAAAAABgYGBgAAAAAGBgYGDAwAwMGBgwMGBgMDAYGAwMAAAAAAAD//wAA//8AAAAAAADAwGBgMDAYGDAwYGDAwAAAPDxmZgYGDAwYGAAAGBgAAHx8xsbe3t7e3t7AwHh4AAAYGDw8PDxmZn5+w8PDwwAA/PxmZmZmfHxmZmZm/PwAADw8ZmbAwMDAwMBmZjw8AAD4+GxsZmZmZmZmbGz4+AAA/v5mZmBgeHhgYGZm/v4AAP7+ZmZgYHh4YGBgYPDwAAA8PGZmwMDOzsbGZmY+PgAAZmZmZmZmfn5mZmZmZmYAAH5+GBgYGBgYGBgYGH5+AAAODgYGBgYGBmZmZmY8PAAA5uZmZmxseHhsbGZm5uYAAPDwYGBgYGBgYmJmZv7+AACCgsbG7u7+/tbWxsbGxgAAxsbm5vb23t7OzsbGxsYAADg4bGzGxsbGxsZsbDg4AAD8/GZmZmZ8fGBgYGDw8AAAODhsbMbGxsbGxmxsPDwGBvz8ZmZmZnx8bGxmZuPjAAA8PGZmcHA4OA4OZmY8PAAAfn5aWhgYGBgYGBgYPDwAAGZmZmZmZmZmZmZmZj4+AADDw8PDZmZmZjw8PDwYGAAAxsbGxsbG1tb+/u7uxsYAAMPDZmY8PBgYPDxmZsPDAADDw8PDZmY8PBgYGBg8PAAA/v7GxoyMGBgyMmZm/v4AADw/MDAwMDAwMDAwMD88AADAwGBgMDAYGAwMBgYDAwEBPPwMDAwMDAwMDAwM/DwAABgYPDxmZsPDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//GBgYGAwMAAAAAAAAAAAAAAAAAAA8PAYGHh5mZjs7AADg4GBgbGx2dmZmZmY8PAAAAAAAADw8ZmZgYGZmPDwAAA4OBgY2Nm5uZmZmZjs7AAAAAAAAPDxmZn5+YGA8PAAAHBw2NjAweHgwMDAweHgAAAAAAAA7O2ZmZmY8PMbGfHzg4GBgbGx2dmZmZmbm5gAAGBgAADg4GBgYGBgYPDwAAAYGAAAGBgYGBgYGBmZmPDzg4GBgZmZsbHh4bGzm5gAAODgYGBgYGBgYGBgYPDwAAAAAAABmZnd3a2tjY2NjAAAAAAAAfHxmZmZmZmZmZgAAAAAAADw8ZmZmZmZmPDwAAAAAAADc3GZmZmZ8fGBg8PAAAAAAPT1mZmZmPj4GBgcHAAAAAOzsdnZmZmBg8PAAAAAAAAA+PmBgPDwGBnx8AAAICBgYPj4YGBgYGhoMDAAAAAAAAGZmZmZmZmZmOzsAAAAAAABmZmZmZmY8PBgYAAAAAAAAY2Nra2trNjY2NgAAAAAAAGNjNjYcHDY2Y2MAAAAAAABmZmZmZmY8PBgYcHAAAAAAfn5MTBgYMjJ+fgAADg8ZGBgYcHAYGBgZDw4AABgYGBgYGBgYGBgYGBgYGBhw8JgYGBgODhgYGJjwcAAAcnKcnAAAAAAAAAAAAAAAAA8PPDzw8MPDDw88PPDwAAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAH5+ZmZmZmZmZmZmZn5+AAB+fmZmZmZmZmZmZmZ+fgAAfn5mZmZmZmZmZmZmfn4AAAAAAAAAAAAAAAAAAAAAAAAYGAAAGBgYGDw8PDwYGAAADAw+PmxsbGw+PgwMAAAAABwcNjYwMHh4MDAwMH5+AABCQjw8ZmY8PEJCAAAAAAAAw8NmZjw8GBg8PBgYPDwAABgYGBgYGAAAGBgYGBgYAAA8PEBAPDxmZjw8AgI8PAAAZmYAAAAAAAAAAAAAAAAAAH5+gYGdnbGxsbGdnYGBfn4wMEhIiIj4+AAA/PwAAAAAAAAzM2ZmzMxmZjMzAAAAAP5/AwMAAAAAAAAAAAAAAAAAAAAAfn5+fgAAAAAAAAAAfn6Bgbm5ubmxsampgYF+fv//AAAAAAAAAAAAAAAAAAA8PGZmPDwAAAAAAAAAAAAAGBgYGH5+GBgYGAAAfn4AAPDwGBgwMGBg+PgAAAAAAADw8BgYMDAYGPDwAAAAAAAAGBgwMAAAAAAAAAAAAAAAAAAAAADGxsbGxsbu7vr6wMB+fvT09PR0dBQUFBQUFAAAAAAYGBgYAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgYMDAwMHBwMDAwMDAwAAAAAAAAcHCIiIiIcHAAAPj4AAAAAAAAzMxmZjMzZmbMzAAAAAAgIGNjJiYsLBkZMzNnZwEBICBjYyYmLCwbGzExYmIHB8DAIyNmZiws2dkzM2dnAQEYGAAAGBgwMGBgZmY8PAAAMDAICDw8ZmZ+fsPDw8MAAAwMEBA8PGZmfn7Dw8PDAAAYGCQkPDxmZn5+w8PDwwAAcXGOjjw8ZmZ+fsPDw8MAAMPDGBg8PGZmfn7Dw8PDAAA8PGZmPDxmZn5+w8PDwwAAHx88PDw8b298fMzMz88AADw8ZmbAwMDAZmY8PAgIMDBgYBAQ/v5gYHh4YGD+/gAAGBggIP7+YGB4eGBg/v4AADAwSEj+/mBgeHhgYP7+AABmZgAA/v5gYHh4YGD+/gAAMDAICH5+GBgYGBgYfn4AAAwMEBB+fhgYGBgYGH5+AAAYGCQkfn4YGBgYGBh+fgAAZmYAAH5+GBgYGBgYfn4AAPj4bGxmZvb2ZmZsbPj4AABxcY6Oxsbm5tbWzs7GxgAAMDAICDw8ZmbDw2ZmPDwAAAwMEBA8PGZmw8NmZjw8AAAYGCQkPDxmZsPDZmY8PAAAcXGOjjw8ZmbDw2ZmPDwAAMPDPDxmZsPDw8NmZjw8AAAAAGNjNjYcHDY2Y2MAAAAAPT1mZs/P29vz82ZmvLwAADAwCAhmZmZmZmZmZj4+AAAMDBAQZmZmZmZmZmY+PgAAGBgkJGZmZmZmZmZmPj4AAGZmAABmZmZmZmZmZj4+AAAGBggIw8NmZjw8GBg8PAAA8PBgYH5+Y2NjY35+YGDw8Hx8ZmZmZmxsZmZmZmxsYGAwMAgIPDwGBh4eZmY7OwAADAwQEDw8BgYeHmZmOzsAABgYJCQ8PAYGHh5mZjs7AABxcY6OPDwGBh4eZmY7OwAAMzMAADw8BgYeHmZmOzsAADw8ZmY8PAYGHh5mZjs7AAAAAAAAfn4bG39/2Nh3dwAAAAAAADw8ZmZgYGZmPDwQEDAwCAg8PGZmfn5gYDw8AAAMDBAQPDxmZn5+YGA8PAAAGBgkJDw8ZmZ+fmBgPDwAAGZmAAA8PGZmfn5gYDw8AAAwMAgIODgYGBgYGBg8PAAADAwQEDg4GBgYGBgYPDwAABgYJCQ4OBgYGBgYGDw8AABmZgAAODgYGBgYGBg8PAAAYGD8/BgYfHzGxsbGfHwAAHFxjo58fGZmZmZmZmZmAAAwMAgIPDxmZmZmZmY8PAAADAwQEDw8ZmZmZmZmPDwAABgYJCQ8PGZmZmZmZjw8AABxcY6OPDxmZmZmZmY8PAAAZmYAADw8ZmZmZmZmPDwAAAAAGBgAAH5+AAAYGAAAAAAAAAEBPj5nZ2trc3M+PkBAMDAICGZmZmZmZmZmOzsAAAwMEBBmZmZmZmZmZjs7AAAYGCQkZmZmZmZmZmY7OwAAZmYAAGZmZmZmZmZmOzsAAAwMEBBmZmZmZmY8PBgYcHDw8GBgfn5jY2Njfn5gYPDwZmYAAGZmZmZmZjw8GBhwcA==",amigaFont:!0},"80x25":{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GDgAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAzAAADwDD4zGYzDsAAAAAAADAMAwADwDD4zGYzDsAAAAAAABwbBwADwDD4zGYzDsAAAAAAAAAAAAAD4xmAwGAxj4GDgAAAAAgODYAD4xn8wGAxj4AAAAAAAAAxgAAD4xn8wGAxj4AAAAAAADAMAwAD4xn8wGAxj4AAAAAAAAAZgAABwGAwGAwGB4AAAAAAAAwPDMABwGAwGAwGB4AAAAAAADAMAwABwGAwGAwGB4AAAAAAAGMAAgODYxmM/mMxmMAAAAAAODYOAgODYxn8xmMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAHYNhsfmw2DcAAAAAAAAAPjYzGY/mYzGYzGcAAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAxgAAD4xmMxmMxj4AAAAAAADAMAwAD4xmMxmMxj4AAAAAAABgeGYAGYzGYzGYzDsAAAAAAADAMAwAGYzGYzGYzDsAAAAAAAAAxgAAGMxmMxmMxj8BgYeAAAGMAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAwGD4xmAwGAxj4GAwAAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAAZjMPAwfgwfgwGAwAAAAAAAHwzGY+GIzG8zGYzGMAAAAAAAAcGwwGAwfgwGAw2DgAAAAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAdm4AG4ZjMZjMZjMAAAAAAdm4AGM5ns/m8zmMxmMAAAAAAAAAPDYbB8AD8AAAAAAAAAAAAAAAODYbBwAD4AAAAAAAAAAAAAAAMBgABgMDAwGMxj4AAAAAAAAAAAAAAA/mAwGAwAAAAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADs3Gw2Gw3DsAAAAAAAAAeGYzGY2GYxmMxmYAAAAAAAAA/mMxmAwGAwGAwGAAAAAAAAAAAAAAH8bDYbDYbDYAAAAAAAAA/mMYBgGAwMDAxn8AAAAAAAAAAAAAD82Gw2Gw2DgAAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAdm4GAwGAwGAwAAAAAAAAAfgwPDMZjMZh4GD8AAAAAAAAAODYxmM/mMxmMbBwAAAAAAAAAODYxmMxjYbDYbHcAAAAAAAAAHhgGAYPjMZjMZh4AAAAAAAAAAAAAD82222z8AAAAAAAAAAAAAAGBj82228z8YGAAAAAAAAAAHBgYDAfDAYDAMA4AAAAAAAAAAD4xmMxmMxmMxmMAAAAAAAAAAAA/gAAH8AAA/gAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAAAADg2GwwGAwGAwGAwGAwGAwGAwGAwGAwGAwGGw2GwcAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAADYNhsNhsNgAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},"80x25small":{width:4,height:8,data:"AAAAAACQD2Bvb/CfCu5EAATu5AAE6k4ABO5OAAAGYAD/+Z//AGmWAP+Waf8CSqQABKpEAAdESAAHVVoABEpEAAjOyAACbmIABOTkAAqqCgAHpiIwaGlhYAAA7gAE5OTgBOREQATkREAALyAAAE9AAAAI8AAAb2AAAE7gAADuQAAAAAAABEQEAAqgAAAE5OQARoQsQACSSQAE5JpQBIAAAAJERCAEIiJACk5KAABOQAAAAASAAA4AAAAABAAAJEgABKqkAAxETgAMJI4ADCQsAAiORAAOhCwABIykAA4kRAAEpKQABqYiAABAQAAAQEgAAkhCAADw8AAIQkgASiQEAATuhgAErqoADKysAASopAAMqqwADoyOAA6MiAAEqOQACq6qAA5ETgAOIqQACqyqAAiIjgAK7qoACu7qAASqpAAMrIgABKqmAAysqgAGhCwADkREAAqqpAAKqkQACq7kAAqkqgAKpEQADiSOAAZERgAAhEIABiImAEoAAAAAAADwCEAAAABqpgAIyqwAAGiGAAJqpgAAToYAAkZEAABKpiQIyqoABAREAAQERIAIrKoABEREAADuqgAAyqoAAEqkAADKyAAAamIAAMqIAABoLAAE5EQAAKqmAACqpAAAqu4AAKRKAACqRAAA4s4AAkxCAARERAAIRkgAbAAAAABKrgAEqKSACgqmACQk6OBKBuYACgbmAEIG5gAEBuYAAAaGSEoE6OAKBOjghATo4AoERABKBEQAhAREAKBK6gBASuoAJA6MjgBv5wAHr6sASgSqQKAEqkCEBKpASgqkAIQKpACgqkQAoEqqQKCqqkAARoZASoyOAKpORADKyrohJU5EgCQG5gAkBEQAJASqQCQKpABsDKoAbAru6gbmDgAEpA4AQEikAAAOiAAADiIARA4EjkQOCOQEBO5AAFhQAAChoAAUFBQUWlpaWtfX19dERERERExERETMRERVXVVVAA9VVQDMRERV3VVVVVVVVQD9VVVV3wAAVV8AAETMAAAADEREREcAAERPAAAAD0REREdERAAPAABET0RERHdERFVXVVVVdwAAAHdVVVX/AAAA/1VVVXdVVQD/AABV/1VVRP8AAFVfAAAA/0REAA9VVVVXAABEdwAAAHdERAAHVVVVX1VVRP9ERERMAAAAB0RE/////wAA///MzMzMMzMzM///AAAFqqUAaamSAA6oiAAA6qoA+EJI8AB6qkAAVVZIAKREQOSqpOBKrqpAaZZmkGQmmWAA+Z8AEmlkgAaOhgAGmZkADg4OAABOQOAAQkBgACQgYAJUREREREzABA4EAAWgWgBKQAAAAAZgAAAGAAADIqYgDKoAAEJGAAAAZmYAAAAAAA==",amigaFont:!1},"80x50":{width:9,height:8,data:"AAAAAAAAAAAAfkCpUCvUygT8fn+23+w3O/z8bH8/n8fBwEAAEBwfH8fBwEAAOD4OH8/msEBwEBwfH8/j4EBwAAAGB4PAwAAA/3+52Gw3O/3+AB4ZiEQjMPAA/2GmV6vUyw3+DwODz6zGYzDwPDMZjMPAwfgwPxmPxgMDg8HAfzGfzGYzO5mAGG2PHO5x42wwgHA+H8+HAgAAAgcPn8PgcAgAGB4fgwGD8PAwZjMZjMZgAZgAf222z2Gw2GwAPjCPDMZh4hj4AAAAAAfj8fgAGB4fgwfh4GH+GB4fgwGAwGAAGAwGAwfh4GAAAAwDH8DAwAAAABgYH8YBgAAAAAAwGAwH8AAAABIZn+ZhIAAAAAwPD8/3+AAAAH+/z8PAwAAAAAAAAAAAAAAAGB4PAwGAAGAAZjMJAAAAAAAAbDY/jY/jYbAAGB8YB4Bj4GAAAGMzAwMDMxgAODYODs3GYdgAGAwMAAAAAAAADAwMBgMAwDAAMAwDAYDAwMAAADMPH+PDMAAAAAwGD8GAwAAAAAAAAAAAwGBgAAAAD8AAAAAAAAAAAAAAwGAABgYGBgYGAgAAODYxmsxjYOAAGBwGAwGAwfgAfGMBg4MDM/gAfGMBh4BmMfAAHB4bGY/gYHgA/mAwH4BmMfAAODAwH4xmMfAA/mMDAwMBgMAAfGMxj4xmMfAAfGMxj8BgYeAAAAwGAAAAwGAAAAwGAAAAwGBgBgYGBgGAYBgAAAAfgAAD8AAAYBgGAYGBgYAAfGMDAwGAAGAAfGM3m83mAeAAODYxn8xmMxgA/DMZj4ZjM/AAPDMwGAwDMPAA+DYZjMZjY+AA/jEaDwaDE/gA/jEaDwaDA8AAPDMwGAzjMOgAxmMxn8xmMxgAPAwGAwGAwPAAHgYDAYzGYeAA5jMbDwbDM5gA8DAYDAYjM/gAxnc/n81mMxgAxnM9m8zmMxgAfGMxmMxmMfAA/DMZj4YDA8AAfGMxmMxmcfAc/DMZj4bDM5gAPDMMAwDDMPAAfj8WgwGAwPAAxmMxmMxmMfAAxmMxmMxjYOAAxmMxms1n8bAAxmMbBwbGMxgAZjMZh4GAwPAA/mMjAwMjM/gAPBgMBgMBgPAAwDAMAwDAMAgAPAYDAYDAYPAAEBwbGMAAAAAAAAAAAAAAAAH+MAwDAAAAAAAAAAAeAYfGYdgA4DAfDMZjM3AAAAAfGMwGMfAAHAYfGYzGYdgAAAAfGM/mAfAAPDMYHwYDA8AAAAAdmYzD4DHw4DAbDsZjM5gAGAAOAwGAwPAABgABgMBjMZh44DAZjYeDY5gAOAwGAwGAwPAAAAA7H81ms1gAAAA3DMZjMZgAAAAfGMxmMfAAAAA3DMZj4YHgAAAdmYzD4DA8AAA3DsYDA8AAAAAfmAfAM/AAMBg/BgMBsHAAAAAzGYzGYdgAAAAxmMxjYOAAAAAxms1n8bAAAAAxjYODYxgAAAAxmMxj8Bn4AAAfiYGBkfgADgwGDgGAwDgAGAwGAwGAwGAAcAwGAcGAwcAAdm4AAAAAAAAAAAgODYxmM/gAfGMwGAxj4DDwzAAzGYzGYdgADAwfGM/mAfAAfEEeAYfGYdgAxgAeAYfGYdgAMAweAYfGYdgAMBgeAYfGYdgAAAAfmAwD8DBwfEEfGM/mAfAAxgAfGM/mAfAAMAwfGM/mAfAAZgAOAwGAwPAAfEEOAwGAwPAAMAwABwGAwPAAxhwbGM/mMxgAODYfGM/mMxgAGBg/mA+GA/gAAAAfgwfmwfgAPjYzH8zGYzgAfEEfGMxmMfAAxgAfGMxmMfAAMAwfGMxmMfAAeEIAGYzGYdgAYBgzGYzGYdgAxgAxmMxj8Bn4xhwbGMxjYOAAxgAxmMxmMfAAGAwfmAwD8GAwODYZHgYDM/AAZjMPD8GD8GAw+GYzH0xmexmODg2GB4GGwcAAGBgeAYfGYdgADAwABwGAwPAADAwfGMxmMfAAGBgzGYzGYdgAdm4AG4ZjMZgAdm4AHM9m8zgAPDYbB8AD8AAAODYbBwAD4AAAGAAGAwMDGPgAAAAAH8wGAAAAAAAAH8BgMAAAY3MbD8MzMzAeY3MbD0NjU3wMGAAGAwPB4GAAABmZmYZhmAAAAGYZhmZmYAAAIkQIkQIkQIkQVVUVVUVVUVVUd26d26d26d26GAwGAwGAwGAwGAwGAw+AwGAwGAw+Aw+AwGAwNhsNhs9hsNhsAAAAAA/hsNhsAAA+Aw+AwGAwNhs9gM9hsNhsNhsNhsNhsNhsAAA/gM9hsNhsNhs9gM/gAAAANhsNhs/gAAAAGAw+Aw+AAAAAAAAAAA+AwGAwGAwGAwH4AAAAGAwGAw/4AAAAAAAAAA/4wGAwGAwGAwH4wGAwAAAAAA/4AAAAGAwGAw/4wGAwGAwH4wH4wGAwNhsNhsN5sNhsNhsN5gP4AAAAAAAP5gN5sNhsNhs94A/4AAAAAAA/4A95sNhsNhsN5gN5sNhsAAA/4A/4AAAANhs94A95sNhsGAw/4A/4AAAANhsNhs/4AAAAAAA/4A/4wGAwAAAAAA/5sNhsNhsNhsP4AAAAGAwH4wH4AAAAAAAH4wH4wGAwAAAAAAP5sNhsNhsNhs/5sNhsGAw/4w/4wGAwGAwGAw+AAAAAAAAAAAH4wGAw////////////AAAAAA//////8Hg8Hg8Hg8HgD4fD4fD4fD4f//////AAAAAAAAAdm4yG4dgAeGYzGwzGMzAA/mMwGAwGAwAAAAA/jYbDYbAA/mMYBgYGM/gAAAAfmw2GwcAAAAAZjMZjMfGAADs3AwGAwGAAfgwPDMZh4GD8ODYxn8xjYOAAODYxmMbDY7gADgwDB8ZjMPAAAAAfm22z8AAABgYfm22z8YGAHhgYD8YBgHgAAD4xmMxmMxgAAH8AH8AH8AAAGAwfgwGAAfgAMAwDAwMAAfgADAwMAwDAAfgADg2GwwGAwGAwGAwGAwGGw2DgAAwAD8AAwAAAADs3AAdm4AAAODYbBwAAAAAAAAAAAwGAAAAAAAAAAwAAAAAADwYDAY7DYPA4bBsNhsNgAAAAeAYGBgfAAAAAAAAPB4PB4AAAAAAAAAAAAAAA",amigaFont:!1},armenian:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABIZn+ZhIAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAPDMw2G222w2GZh4AAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAw3O/3+22Gw2Gw2GAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAA/22mQwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAw2Gw2Gw2GwzMPAwAAAAAAAAAw2Gw2Gw2223+ZjMAAAAAAAAAw2GZh4GAwPDMw2GAAAAAAAAAw2GwzMPAwGAwGB4AAAAAAAAA/2GhgYGBgYGCw3+AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAMBgGAAAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAODYZDA8DAYDAYHgAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHM/22222222AAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGGw2GwzMPAwAAAAAAAAAAAAAGGw2G222/zMAAAAAAAAAAAAAGGZh4GB4ZmGAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwAAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAAAAdm4AAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAzGYzGYzGY3G4zjsAAAAAAAAAAAAAG22222222zeAAAAAAAAAeGYzGYzGAwH8wGAAAAAAAAAAAAAAHwzGYzGAwH8wGAwAAAAAeGYzGYzGYfwYDAYAAAAAAAAAAAAAD4zGYzGYzD+DAYDAAAAAeGYzGYzGYzwYDAYAAAAAAAAAAAAAHwzGYzGYzGeDAYDAAAAAwGA/mAwGYzGYzDwAAAAAAAAAwGA/GAwGAzGYzD4AAAAAAAAAPDMZjMZh8BgY2H8wwAAAAAAAAAAAGYzGYzGYzD4DAYDwAAAAwGA/mAwGAwHwDAYeAAAAAAAAwGAwH4wGAwGA+AYeAAAAAAAAeGYzGYzGYwGAwH8AAAAAAAAAAAAAHwzGYzGYzGAwGA/gAAAAfGMz2s1ms1ms1mYAAAAAAAAAAAAAH4xme1ms1mYwGAwAAAAADAYf2YzGYzGYzDwAAAAAAAAADAYDD+zGYzGYzD4AAAAAAAAAwGA+GYzGYzGYwGAAAAAAAAAAwGAwHwzGYzGYzGYwGAwAAAAAwGAwGAwGAwGAwH4BgAAAAAAAAAAADAYDAYDAYDAYDAfAAAAAwGA+2222222222cAAAAAAAAAwGAwH222222222ewGAwAAAAAwD8+2YzGYzGYzDwAAAAAAAGAeAYDD+zGYzGYzD4AAAAAAAAAwGAzGYzGYzD4DAYAAAAAAAAAwGAwGYzGYzGYzD4DAYDAAAAAMAwDAwMDAwGAwH4DgAAAAAAAwGAwHwzGYzGYzGYAAAAAAAAAPDMZjMZgMBjY2DcAAAAAAAAAID8DAwMDg2GYzjsAAAAAAAAAeGYzGYzGYzAYDAeAAAAAAAAAAAAAHwzGYzGYzGYDAYDAeAAAzj2cGwzGYzGYzD4AAAAAAAAAGHgYDg2GYzGYzD4AAAAAAAAAz2YzGYzGYzGYzDwAAAAAAAAADwYDGYzGYzGYzD4AAAAAAAAAeGYDBwbAYDGYzDwAAAAAAAAAAAAAAYDAYDAYDAYbG4eAAAAA4DAYDMZjMZjMZh4AAAAAAAAA4DAYDMZjMZjMZh8AAAAAAAAA+AYfGYwGAzGYzDwAAAAAAAAAAAAADwzGYzAYGBgYGAfgAAAAeGYzGYzGYzGYzGYAAAAAAAAAAAAAHwzGYzGYzGYAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAeGYzGYDAYDGwcBgGAAAAAAAAAAAAAwMAwDAwMDAwGAfgAAAAfm2222222Gw2AwGAAAAAAAAAAAAAG22222222z+AwGAwAAAAYHg2GYZhsFg42H8wwAAAAAAAAAAADg2GYzDYOBgYGAfgAAAAeGYzGYzGezGYzGYAAAAAAAAAAAAAHwzGYzGYzGeAAAAAAAAAzGYzGYzGYzGYzDwAAAAAAAAAAAAAGYzGYzGYzD4AAAAAAAAADAYzGYzGYzD4DAeAAAAAAAAADAYDGYzGYzGYzD4DAYDwAAAAeGYzDAMAwDGYzDwAAAAAAAAAAAAAG82222222z2AAAAAAAAAeGYzGYzGYzGAwGAAAAAAAAAAAAAAHwzGYzGYzGYwGAwAAAAAeGYzDwzAYDAYzDwAAAAAAAAAAAAAGYzGYzGYzD4DAYeAAAAAwGA+GYzGYzGMwGAAAAAAAAAAAAAADAYDAYDAYD4AAAAAAAAAGAwfm22222z8GAwAAAAAAAAAGAwGG82222222z2GAwGAAAAAPDMZjMfDAYH8YDAAAAAAAAAAAAAAD4ZjMZjMZj4YH8YAAAAAeGYzGYzGYzGYzDwAAAAAAAAAAAAADwzGYzGYzDwAAAAAAAAAeGw2D8Gw22222z8AAAAAAAAAeGw2D8Gw22222z8GAwGAAAAAOCIlAQAAAAAAAAAAAAAAAAAYGBgYAAAAAAAAAAAAAAAAAAAAAAAfD4fD4fD4fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},baltic:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAADAwAB4ZmEwGAwGEZh4AAAAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAAfgAADwDD4zGYzDsAAAAAAAAAzAAADwDD4zGYzDsAAAAAAAAAHBgGDszGYzGIzD4DGYeAAABwbBwADwDD4zGYzDsAAAAAAAAYGBgAD4xmAwGAxj4AAAAAAAAAOA0Hg4GBweCwGB4AAAAAAAAAfgAAD4xn8wGAxj4AAAAAAAAA/DMZjMfDYZjMZnMDAMPAAAAAAAAAG4djMYDAYHgGAYeAAAAAfAAABwGAwGAwGB4AAAAAAGBgAH8hgYGBgYGExn8AAAAAAAGMAAgODYxmM/mMxmMAAAAAAODYOAgODYxmM/mMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAHYNhsfmw2DcAAAAAAAAAPjYzGY/mYzGYzGcAAAAAAAAAfgAAD4xmMxmMxj4AAAAAAAAAxgAAD4xmMxmMxj4AAAAAAAAAPDMwmAwG8xmMZh0DAMPAAAAAGAwfGMwGAxj4GAwAAAAAAGBgAD4xmMYBwDGMxj4AAAAAAAAADAwAD4xjAOAYxj4AAAAAAAGMAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAAAAAAD4zm89nMxj4AAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAIfGczms1ms1nM5j4QAAAAAAAAAAAAGMbBwODYxgAAAAAAAAAAAAAxj4xmMxmMfGMAAAAAAfgAEBwbGMxn8xmMxmMAAAAAAfgAPAwGAwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAGAwAH8hgYGBgYGExn8AAAAAAAAAGAwAH8zAwMDAxn8AAAAAAAAYGBgAH8zAwMDAxn8AAAAAAABsbGwAAAAAAAAAAAAAAAAAAAAwGAwGAwAAAGAwGAwGAAAAAAAAfEEmlEolEmkEfAAAAAAAAAAAfEEslUslUqkEfAAAAAAAAAAAAAAAAAAD8AgEAAAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAA8DIbDwcHA4DEZn8AAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwAAAEBwbGMxn8xmMxmMGBgHgAZh4AB4ZmEwGAwGEZh4AAAAAAAAA/jMYjQeDQYDEZn8GBgHgAGAw/jMYjQeDQYDEZn8AAAAAANhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAAAAAPAwGAwGAwGAwGB4GBgHgAbBwAD4xmAYBwDAMxj4AAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwAAAxmMxmMxmMxmMxj4MDAPAAfgAxmMxmMxmMxmMxj4AAAAAANhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsbBwAH8xkYGBgYGExn8AAAAAAAAAAAAADwDD4zGYzDsGBgHgAAAAbBwAD4xmAwGAxj4AAAAAAAAAAAAAD4xn8wGAxj4MDAPAAAAAGAwAD4xn8wGAxj4AAAAAAAAAGAwABwGAwGAwGB4GBgHgAAAAbBwAD4xjAOAYxj4AAAAAAAAAAAAAGYzGYzGYzDsMDAPAAAAAfAAAGYzGYzGYzDsAAAAAAAAAbBwAH8zAwMDAxn8AAAAAAGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAGBgAD4xmMxmMxmMxj4AAAAAAAAAeGYzGY2GYxmMxmYAAAAAAfgAAD4xmMxmMxmMxj4AAAAAADAwAGM5ns/m8zmMxmMAAAAAAAAAdm4AD4xmMxmMxj4AAAAAAdm4AD4xmMxmMxmMxj4AAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAYGBgAG4ZjMZjMZjMAAAAAAAAA5jMZjYeDwbDMZnMGAYeAAAAA4DAYDMbDweDYZnMGAYeAAAAA8DAYDAYDAYDEZn8GAYeAAAAAOAwGAwGAwGAwGB4GAYeAAAAAAAAAG4ZjMZjMZjMDAMPAAfgA/jMYjQeDQYDEZn8AAAAAAAAAAGM5ns/m8zmMxmMGAYeAAAAYGBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAABsbGwAAAAAAAAAAAAAAAAAAAHAMDENnYGBgZmcmh+BgMAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAAAAAAAAAA2DYNgAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAwOAwGAwPAAAAAAAAAAAAAAAD4Bh4BgMfAAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},cyrillic:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAfGMxmc1nMxmMxj4AAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAYDA+DAYD4ZjMZnMBgICAAAAA/DAYDAbDsZjMZnYAAAAAAAAADAwAH8YjAYDAYHgAAAAAADAwAH8ZjEYDAYDAYHgAAAAAAAAAADYAD4xmM/GAxj4AAAAAAbAA/jMYjQeDQYDEZn8AAAAAAAAAAAAAD4xmA+GAxj4AAAAAAAAAfGMwGQ+GQwGAxj4AAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAADYABwGAwGAwGB4AAAAAAZgAPAwGAwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAAHgYDAYDAYzGYzDwAAAAAAAAAAAAAH4WC4Wi0Wm4AAAAAAAAA/CwWCwXC0Wi0Wm4AAAAAAAAAAAAAGw2H42m02m4AAAAAAAAA2Gw2Gw/G02m02m4AAAAAAAAAYHwYDAfDMZjMZnMAAAAAAAAA/DAYDAfDMZjMZnMAAAAAAAAADAwAHMbDweDYZnMAAAAAADAwAHMZjYeDwbDYZnMAAAAAAAAAADYOGMxmMxmMfgMBmMfAAbBwxmMxmMxj8BgMxj4AAAAAAAAAAAAAHcbDYbDYbH8EAAAAAAAA7jYbDYbDYbDYbH8EAAAAAAAAAAAAGc222+2222cAAAAAAAAAzm2222+2222222cAAAAAAAAAAAAAHwsFgPhmMz8AAAAAAAAA+HgsBgPhmMxmMz8AAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAAHhsZmMxn8xmMxmMAAAAAAAAEBj4wGA/GMxmMxj4AAAAAAAAA/jEYjAfDMZjMZn4AAAAAAAAAAAAAGMxmMxmMxn+AwGAAAAAAxmMxmMxmMxmMxn+AwGAAAAAAAAAAA8NjMZjMZn+w2GAAAAAAHhsZjMZjMZjMZn+w0CAAAAAAAAAAD4xmM/mAxj4AAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAAAB4GD82222222z8GAwPAAAAAfm22222222z8GB4AAAAAAAAAAAAAH8YjEYDAYHgAAAAAAAAA/jMYjAYDAYDAYHgAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAARAiRAiRAiRAiRAiRAiRAiRAiqiqqiqqiqqiqqiqqiqqiqqiqd26d26d26d26d26d26d26d26GAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAw+AwGAwGAwGAwAAAAAAAGMbBwOBwbGMAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAAAAAGMxmc1nMxmMAAAAAAAAAxmMxmc3ns5mMxmMAAAAAANhsNhsNhs9gM9hsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAAA/gM9hsNhsNhsNhsNhsNhsNhs9gM/gAAAAAAAAAAAAAADYOGMxmc1nMxmMAAAAAAbBwxmMxmc3ns5mMxmMAAAAAAAAAAAAAAAAAA+AwGAwGAwGAwGAwGAwGAwGAwH4AAAAAAAAAAGAwGAwGAwGAw/4AAAAAAAAAAAAAAAAAAAAAA/4wGAwGAwGAwGAwGAwGAwGAwH4wGAwGAwGAwAAAAAAAAAAAA/4AAAAAAAAAAGAwGAwGAwGAw/4wGAwGAwGAwAAAAAAAHMbDweDYZnMAAAAAAAAA5jMbDYeDwbDYZnMAAAAAANhsNhsNhsN5gP4AAAAAAAAAAAAAAAAAAAP5gN5sNhsNhsNhsNhsNhsNhs94A/4AAAAAAAAAAAAAAAAAAA/4A95sNhsNhsNhsNhsNhsNhsN5gN5sNhsNhsNhsAAAAAAAAA/4A/4AAAAAAAAAANhsNhsNhs94A95sNhsNhsNhsAAAAGMfGMxmMxmMfGMAAAAAAAAAAAAAA8NjMZjMZnMAAAAAAAAAHhsZjMZjMZjMZmMAAAAAAAAAAAAAGM7n8/ms1mMAAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAAAAAGMxmM/mMxmMAAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAAAAAAH8xmMxmMxmMAAAAAAGAwGAwGAwGAw+AAAAAAAAAAAAAAAAAAAAAAAH4wGAwGAwGAw////////////////////////AAAAAAAAAAAA////////////AAA/mMxmMxmMxmMxmMAAAAAAAAAAAAAD8xmMfhsZmMAAAAAA////////////AAAAAAAAAAAAAAAPzMZjMPh8ZjMZnOAAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAA/DMZjMZj4YDAYHgAAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAfGMxmAwGAwGExj4AAAAAAAAAAAAAD8WgwGAwGB4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAAAAAGMxmMxmMfgMBmMfAAAAAxmMxmMxj8BgMxj4AAAAAAAAAAAAAGs1iofCo1msAAAAAAAAA222Wi0fj8Wm2222AAAAAAAAAAAAAH4ZjMfDMZn4AAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAAAAAHgYDAfDMZn4AAAAAAAAA8DAYDAfDMZjMZn4AAAAAAAAAz2a73Y/243GYzGYAAAAAAAAAAAAAAAAD8AAAAAAAAAAAAAAAAAAAGMxmM9m83nsAAAAAAAAAw2Gw2G82222223mAAAAAAAAAAAAAD4xgMPAMxj4AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAAAAAAGs1ms1ms1n8AAAAAAAAA1ms1ms1ms1ms1n8AAAAAAAAAAAAAD4xgMPgMxj4AAAAAAAAAfGMBhMPhMBgMxj4AAAAAAAAAAAAAGs1ms1ms1n8AwGAAAAAA1ms1ms1ms1ms1n8BgMAAAAAAAAAAGMxmMxj8BgMAAAAAAAAAxmMxmMxj8BgMBgMAAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAfD4fD4fD4fD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},french_canadian:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GDgAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAODYxggODYxmM/mMxmMAAAAAAADAMAwADwDD4zGYzDsAAAAAAAAAAD+2222z2Gw2Gw2AAAAAAAAAAAAAD4xmAwGAxj4GDgAAAAAgODYAD4xn8wGAxj4AAAAAAAAAxgAAD4xn8wGAxj4AAAAAAADAMAwAD4xn8wGAxj4AAAAAAAAAZgAABwGAwGAwGB4AAAAAAAAwPDMABwGAwGAwGB4AAAAAAAAAAAAAAAAAAAAAAAA/wA/wAGAYBggODYxmM/mMxmMAAAAAAAD4xjAODYxmMbBwDGMfAAAAADAwAH8ZjEaDwaDEZn8AAAAAAMAwAH8ZjEaDwaDEZn8AAAAAAODYAH8ZjEaDwaDEZn8AAAAAAAAgODYAD4xmMxmMxj4AAAAAAAGMAH8ZjEaDwaDEZn8AAAAAAADMAB4GAwGAwGAwGB4AAAAAAABgeGYAGYzGYzGYzDsAAAAAAADAMAwAGYzGYzGYzDsAAAAAAAAAAAAxj4xmMxmMfGMAAAAAAODYAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAwGD4xmAwGAxj4GAwAAAAAAABwbDIYHgYDAYDA5n4AAAAAAMAwAGMxmMxmMxmMxj4AAAAAAODYAGMxmMxmMxmMxj4AAAAAAAAcGwwGAwfgwGAw2DgAAAAAAAAwGAwGAwAAAGAwGAwGAAAAAAAYGBgAAAAAAAAAAAAAAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwDDwAAAAD4Bh4BgMfAAAAAAAAAAAAAAAH+AAAAAAAAAAAAAAAAAAAAAPDMAB4GAwGAwGAwGB4AAAAAAAAAAAAAAA/mAwGAwAAAAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAHAMHENnYGBgZmcmh+BgMAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADs3Gw2Gw3DsAAAAAAAAAeGYzGY2GYxmMxmYAAAAAAAAA/mMxmAwGAwGAwGAAAAAAAAAAAAAAH8bDYbDYbDYAAAAAAAAA/mMYBgGAwMDAxn8AAAAAAAAAAAAAD82Gw2Gw2DgAAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAdm4GAwGAwGAwAAAAAAAAAfgwPDMZjMZh4GD8AAAAAAAAAODYxmM/mMxmMbBwAAAAAAAAAODYxmMxjYbDYbHcAAAAAAAAAHhgGAYPjMZjMZh4AAAAAAAAAAAAAD82222z8AAAAAAAAAAAAAAGBj82228z8YGAAAAAAAAAAHBgYDAfDAYDAMA4AAAAAAAAAAD4xmMxmMxmMxmMAAAAAAAAAAAA/gAAH8AAA/gAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAAAADg2GwwGAwGAwGAwGAwGAwGAwGAwGAwGAwGGw2GwcAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAADYNhsNhsNgAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},greek:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAA/jEYDAYDAYDAYHgAAAAAAAAAEBwbGMxmMxmMxn8AAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAfGMxmM/mMxmMxj4AAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAAEBwbGMxmMxmMxmMAAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAA/kEAAAfAAAAAgn8AAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/mMxmMxmMxmMxmMAAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAA/mAYBgGAwMDAwH8AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAAPAwfkymUyfgwGB4AAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAGG2222222fgwGB4AAAAAAAAAPDMw2Gw2GwzMJHOAAAAAAAAAAAAAD2zmYzGYzD2AAAAAAAAAfGMxmMxn4xmMxn4wGAwAAAAAAAAAGGZh4GB4ZiEZh4AAAAAAfDAMAweGYzGYzDwAAAAAAAAAAAAAD4xmAeGAxj4AAAAAAAAA/AYGBgYGAwGAwDwDAYeAAAAAAAAAG4ZjMZjMZjMBgMBgAAAAPjGYzGfzGYzGYx8AAAAAAAAAAAAAAwGAwGAwGgYAAAAAAAAAAAAAHMbDweDYZnMAAAAAAAAAPDMBgMBh8ZjMZjMAAAAAAAAAAAAADMZjMZjMZj+YDAYAAAAAAAAAHMZjMZjYeBgAAAAAAAAA/DAwDwMDAwGAwD4BgMPAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAH+ZjMZjMZjMAAAAAAAAAAAAAB4ZjMZjMZj4YDAYAAAAAAAAAD+zGYzGYzDwAAAAAAAAAAAAAD4xmAYB4BmMfAAAAAAAAAAAAH4MBgMBgNAwAAAAAAAAAAAAAHOZjMZjMZh4AAAAAAAAAAAAAC41ms1ms1j4EAgEAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGs1ms1ms1j4EAgEAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADMw2Gw22/zMAAAAAAAAAOAgAD2zmYzGYzD2AAAAAAAAAOAgAD4xmAeGAxj4AAAAAAAAAOAgAG4ZjMZjMZjMBgMBgAAAAZgAAAwGAwGAwGgYAAAAAAAAAOAgAAwGAwGAwGgYAAAAAAAAAOAgAD4xmMxmMxj4AAAAAAAAAOAgAHOZjMZjMZh4AAAAAAAAAZgAAHOZjMZjMZh4AAAAAAAAAOAgADMw2Gw22/zMAAAAAAQEAEBwbGMxn8xmMxmMAAAAAAQEA/jMYjQeDQYDEZn8AAAAAAQEAxmMxmM/mMxmMxmMAAAAAAQEAPAwGAwGAwGAwGB4AAAAAAQEAfGMxmMxmMxmMxj4AAAAAAQEAZjMZjMPAwGAwGB4AAAAAAQEAPDMw2Gw2GwzMJHOAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAZgAPAwGAwGAwGAwGB4AAAAAAZgAZjMZjMPAwGAwGB4AAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAADYNhsNhsNgAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},greek_869:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABASA4NjGYz+YzGYzGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAAAAAAAAAAH8BgMAAAAAAAAAAAwGAwGAwGAAAAwGAwGAwGAAAAAGAwEAQAAAAAAAAAAAAAAAAAAGAwCAgAAAAAAAAAAAAAAAACAvxgMBgPhgMBgMB+AAAAAAAAAAAAAAAAH+AAAAAAAAAAAAACAsxmMxmPxmMxmMxmAAAAAAABAXgYDAYDAYDAYDA8AAAAAAZgAfgwGAwGAwGAwGD8AAAAAAACAvjGYzGYzGYzGYx8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAsxmMxmHgYDAYDAYAAAAAAZgAZjMZjMPAwGAwGAwAAAAAAAAAPCEmVKoVKmSEPAAAAAAAAACAuDYxmMxmMxjYKHcAAAAAAABwbAYGBgfAAAAAAAAAAAAAAAD4DBgDAYeAAAAAAAAAAAAAAAAACAgADszGYzGYzDsAAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAACAgAD4xmAeGAxj4AAAAAAAAACAgAG4ZjMZjMZjMBgAAAAAAACAgABgMBgMBgMA4AAAAAAAAAAGYABgMBgMBgMA4AAAAAACAgAGYABgMBgMBgMA4AAAAAAAAACAgAD4xmMxmMxj4AAAAAAAAABAQAHMZjMZjMZh4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAA/mAwGAwGAwGAwGAAAAAAAAAAEBwbDYxmMxmMxn8AAAAAAAAA/mAwGA/GAwGAwH8AAAAAAAAA/gMBgYGBgYGAwH8AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAADA4DEZjYGBgYG4hgYGB8AAAAAAfGMxmMxn8xmMxj4AAAAAAAAAfgwGAwGAwGAwGD8AAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwAAAxmY2Hg4Hg2GYxmMAAAAAAAAAEBwbDYxmMxmMxmMAAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAANhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAAAAA/mMAAAfD4AAAxn8AAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwAAA/7MZjMZjMZjMZjMAAAAAAAAA/GMxmM/GAwGAwGAAAAAAANhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsAAA/mAYBgGAwMDAwH8AAAAAAAAAfgwGAwGAwGAwGAwAAAAAAAAAZjMZjMPAwGAwGAwAAAAAAAAAED41ms1msfAgEBwAAAAAAAAAxmMbDYOBwbDYxmMAAAAAAAAAEGs1ms1msfAgEBwAAAAAAAAAODYxmMxmMxjYKHcAAAAAAAAAAAAADszGYzGYzDsAAAAAAAAAeGYzGY2H4xmMxn4wEAAAAAAAAAAAEExjYOD4xmMxmMfAAGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////AAAfjAMAwfGMxmMxj4AAAAAAAAAAAAAD4xmAeGAxj4AAAAAA//////////4AAAAAAAAAAAAAAAAfgMDAwMDAYDAYB8Bh4AAAAAAAAAAG4ZjMZjMZjMBgAAAAAAAfGMxjMNh8hmMxj4AAAAAAAAAAAAABgMBgMBgMA4AAAAAAAAAAAAAGMzGw8GwzGMAAAAAAAAAfGMBgMPjMZmMxmMAAAAAAAAAAAAAGMxmMxmM5m6wGAwAAAAAAAAAEExmMxjYbBwAAAAAAAAAfgwMBgHBgYDAYB8Bh4AAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAH+ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmM5m4wGAwAAAAAAAAAD82GYzGYzDwAAAAAAAAAAAAAD4xmAwD4BgMPAAAAAAAAAAAAH4MBgMBgNg4AAAAAAAAYGAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAAAAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAAAAAHMZjMZjMZh4AAAAAAAAAAAAAA4Vms1ms1j4EAgEAAAAAAAAAGEbBwOBwbEMAAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAg1ms1ms1j4EAgEAABAQADMAAAAAAAAAAAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAADMAAAAAAAAAAAAAAAAAAAAAAAAACIxmM1ms1jYAAAAAAAAAADMAHMZjMZjMZh4AAAAAABAQADMAHMZjMZjMZh4AAAAAAAAACAgACIxmM1ms1jYAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},hebrew:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZm4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAAAAxmMZjs3GYxmMAAAAAAAAAAAA+AYDAYDAYDH8AAAAAAAAAAAAOAYDAYDA4NnMAAAAAAAAAAAA/gYDAYDAYDAYAAAAAAAAAAAA/AMBgMxmMxmMAAAAAAAAAAAAcAwGAwGAwGAwAAAAAAAAAAAA/BgMBgGAwMDAAAAAAAAAAAAA/DMxmMxmMxmMAAAAAAAAAAAAzGs1mMxmMxj4AAAAAAAAAAAAcAwGAwMAAAAAAAAAAAAAAAAA/AMBgMDAYDAYDAYDgAAAAAAA/AMBgMBgMBn4AAAAAAAAAwGA/AMBgMBgYGAwAAAAAAAAAAAA/DMxmMxmMxn8AAAAAAAAAAAA3DsZmMxmMxm8AAAAAAAAAAAAOAYDAwGAwGAwGAwHAAAAAAAAOAYDAYDAYDD4AAAAAAAAAAAA/DMxmMxmMzDwAAAAAAAAAAAA7jMZjMZjMLHwAAAAAAAAAAAA+CYzGY7AYDAYDAYDgAAAAAAA/CMxmM5gMBn8AAAAAAAAAAAA7jMZjYeDAYDAYDAcAAAAAAAA7jMZhoGAYBn8AAAAAAAAAAAA/AMBjMZDYbjAYDAYAAAAAAAA/AMBgMBgMBgMAAAAAAAAAAAA1ms1ms1nsxj4AAAAAAAAAAAA/DMZjMZjM5nMAAAAAAAAwGD4xmAwGAxj4GAwAAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAAZjMPAwfgwfgwGAwAAAAAAAHwzGY+GIzG8zGYzGMAAAAAAAAcGwwGAwfgwGAw2DgAAAAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAdm4AG4ZjMZjMZjMAAAAAAdm4AGM5ns/m8zmMxmMAAAAAAAAAPDYbB8AD8AAAAAAAAAAAAAAAODYbBwAD4AAAAAAAAAAAAAAAMBgABgMDAwGMxj4AAAAAAAAAAAAAAA/mAwGAwAAAAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADs3Gw2Gw3DsAAAAAAAAAeGYzGY2GYxmMxmYAAAAAAAAA/mMxmAwGAwGAwGAAAAAAAAAAAAAAH8bDYbDYbDYAAAAAAAAA/mMYBgGAwMDAxn8AAAAAAAAAAAAAD82Gw2Gw2DgAAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAdm4GAwGAwGAwAAAAAAAAAfgwPDMZjMZh4GD8AAAAAAAAAODYxmM/mMxmMbBwAAAAAAAAAODYxmMxjYbDYbHcAAAAAAAAAHhgGAYPjMZjMZh4AAAAAAAAAAAAAD82222z8AAAAAAAAAAAAAAGBj82228z8YGAAAAAAAAAAHBgYDAfDAYDAMA4AAAAAAAAAAD4xmMxmMxmMxmMAAAAAAAAAAAA/gAAH8AAA/gAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAAAADg2GwwGAwGAwGAwGAwGAwGAwGAwGAwGAwGGw2GwcAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAADYNhsNhsNgAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},icelandic:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcHhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwGD8PAwAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAAAH8/n8AAAAAAAAAGB4fgwGAwGD8PAwfgAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAGAwGAwH8AAAAAAAAAAAAAAAABIZn+ZhIAAAAAAAAAAAAAAgEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAAAwGD4xmEwD4BkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAAAwGAwMAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGH+GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAABgMDAYGAwMBgYDAAAAAAAAAAfGMxms1ms1mMxj4AAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAAA/gAAH8AAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgMDAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAADwMBgMBgMBmMxj4AAAAAAAAA5jMbDYeD4bDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAODYxmMxmMxmMbBwAAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmMxms1n8bDYAAAAAAAAAxmMbDYOBwbDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAYDAMBgGAwDAYBgMAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZm4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAODYZDA8DAYDAYHgAAAAAAAAAAAAADszGYzGYfAYDGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1msxmMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMfDAYDA8AAAAAAAAADszGYzGYfAYDAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAADMZjMZjMPAwAAAAAAAAAAAAAGMxmM1ms/jYAAAAAAAAAAAAAGMxjYODYxmMAAAAAAAAAAAAAGMxmMxmMfgMBgYeAAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcDgGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgcGAwGDgAAAAAAAAAdm4AAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GAYOAAAAAzGYAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAzGYADwDD4zGYzDsAAAAAAADAMAwADwDD4zGYzDsAAAAAAABwbBwADwDD4zGYzDsAAAAAAAAAAAAAD4xmAwGAxj4GAYOAAAAgODYAD4xn8wGAxj4AAAAAAAAAzGYAD4xn8wGAxj4AAAAAAADAMAwAD4xn8wGAxj4AAAAAAAAA+DYZjM9jMZjMbHwAAAAAAAAAbBg2AYfmMxmMxj4AAAAAAAAA8DAfDMZjMZj4YHgAAAAAAxmMEBwbGMxn8xmMxmMAAAAAAODYOAAODYxmM/mMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAHYNjs3mw2DcAAAAAAAAAPjYzGY/mYzGYzGcAAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAxmMAD4xmMxmMxj4AAAAAAAAA4DAYD4ZjMZjMfDAYDA8AAABgeGYAGYzGYzGYzDsAAAAAADAwADMZjMZh4GAwGB4AAAAAAAAYGBgAGMxmMxmMfgMBgYeAAxmMODYxmMxmMxmMbBwAAAAAAxmMAGMxmMxmMxmMxj4AAAAAAAAAAAABj4zm81nM5j4wAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAMPDYzmc1ms5nMbDwwAAAAAAHwzGY+GIzG8zGYzGMAAAAAAAAcGwwGAwfgwGAwGAw2DgAAAAAYGBgADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAYGBgAD4xmMxmMxj4AAAAAAAAYGBgAGYzGYzGYzDsAAAAAADAwABwbGMxn8xmMxmMAAAAAADAwAB4GAwGAwGAwGB4AAAAAADAwABwbGMxmMxmMbBwAAAAAADAwAGMxmMxmMxmMxj4AAAAAAAAAMBgABgMDAwGMxj4AAAAAAAAAAAAAAA/mAwGAAAAAAAAAAAAAAAAAAA/gMBgMAAAAAAAAAAGAwGExmYGBgYG4pgYGB8AAAAGAwGExmYGBgZmcnh8BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABmZmYZhmAAAAAAAAAAAAAAAAGYZhmZmYAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADs3Gw2Gw3DsAAAAAAAAAeGYzGY2GYxmMxm4AAAAAAAAA/mMxmAwGAwGAwGAAAAAAAAAAAAAAH8bDYbDYbDYAAAAAAAAA/mMYBgGAwMDAxn8AAAAAAAAAAAAAD82Gw2Gw2DgAAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAADs3AwGAwGAwAAAAAAAAAPAwPDMZjMZh4GB4AAAAAAAAAODYxmM/mMxmMbBwAAAAAAAAAODYxmMxmMxjYbHcAAAAAAAAAHhgGAYPjMZjMZh4AAAAAAAAAAAAAD82222z8AAAAAAAAAAAAAAGBj82228z8YGAAAAAAAAAAHBgYDAfDAYDAMA4AAAAAAAAAfGMxmMxmMxmMxmMAAAAAAAAAAAA/gAAH8AAA/gAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAAAADg2GwwGAwGAwGAwGAwGAwGAwGAwGAwGAw2Gw2DgAAAAAAAAAAAAGAwAD8AAwGAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAAGAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAAGwbDYbDYbAAAAAAAAAAAAAAADg2BgYGQ+AAAAAAAAAAAAAAAAAAAAfD4fD4fD4fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},latin1:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GDgAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAzAAADwDD4zGYzDsAAAAAAADAMAwADwDD4zGYzDsAAAAAAABwbBwADwDD4zGYzDsAAAAAAAAAAAAAD4xmAwGAxj4GDgAAAAAgODYAD4xn8wGAxj4AAAAAAAAAxgAAD4xn8wGAxj4AAAAAAADAMAwAD4xn8wGAxj4AAAAAAAAAZgAABwGAwGAwGB4AAAAAAAAwPDMABwGAwGAwGB4AAAAAAADAMAwABwGAwGAwGB4AAAAAAAGMAAgODYxmM/mMxmMAAAAAAODYOAgODYxmM/mMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAHYNhsfmw2DcAAAAAAAAAPjYzGY/mYzGYzGcAAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAxgAAD4xmMxmMxj4AAAAAAADAMAwAD4xmMxmMxj4AAAAAAABgeGYAGYzGYzGYzDsAAAAAAADAMAwAGYzGYzGYzDsAAAAAAAAAxgAAGMxmMxmMxj8BgYeAAAGMAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAAAAAAD4zm89nMxj4AAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAIfGczms1ms1nM5j4QAAAAAAAAAAAAGMbBwODYxgAAAAAAAAAcGwwGAwfgwGAw2DgAAAAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAdm4AG4ZjMZjMZjMAAAAAAdm4AGM5ns/m8zmMxmMAAAAAAAAAPDYbB8AD8AAAAAAAAAAAAAAAODYbBwAD4AAAAAAAAAAAAAAAMBgABgMDAwGMxj4AAAAAAAAAfEEslUslUqkEfAAAAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwYGAEBwbGMxn8xmMxmMAAAAAAfGMEBwbGMxn8xmMxmMAAAAAADAMEBwbGMxn8xmMxmMAAAAAAAAAfEEmlEolEmkEfAAAAAAAANhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAAAAAGAwfGMwGAxj4GAwAAAAAAAAAADMZh4GD8GD8GAwAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwAAAdm4ADwDD4zGYzDsAAAAAAdm4ABwbGMxn8xmMxmMAAAAAANhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsAAAAAAxj4xmMxmMfGMAAAAAAAAANAwLAMPjMZjMZh4AAAAAAAAA+DYZjM9jMZjMbHwAAAAAAODYAH8ZjEaDwaDEZn8AAAAAAAGMAH8ZjEaDwaDEZn8AAAAAAMAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAABwGAwGAwGB4AAAAAADAwAB4GAwGAwGAwGB4AAAAAAPDMAB4GAwGAwGAwGB4AAAAAAADMAB4GAwGAwGAwGB4AAAAAAGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////AAwGAwGAwAAAGAwGAwGAAAAAMAwAB4GAwGAwGAwGB4AAAAAA//////////4AAAAAAAAAAAAAGBgAD4xmMxmMxmMxj4AAAAAAAAAeGYzGY2GYxmMxmYAAAAAAODYAD4xmMxmMxmMxj4AAAAAAMAwAD4xmMxmMxmMxj4AAAAAAAAAdm4AD4xmMxmMxj4AAAAAAdm4AD4xmMxmMxmMxj4AAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAA4DAYD4ZjMZjMZj4YDA8AAAAA8DAfDMZjMZj4YHgAAAAAAGBgAGMxmMxmMxmMxj4AAAAAAODYAGMxmMxmMxmMxj4AAAAAAMAwAGMxmMxmMxmMxj4AAAAAAAAYGBgAGMxmMxmMxj8BgY+AADAwADMZjMZh4GAwGB4AAAAAAAH+AAAAAAAAAAAAAAAAAAAAAAAYGBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAAAAAAAAAAAAAAAA/wA/wAAHAMDENnYGBgZmcmh+BgMAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAAAAAAAAAAAAwDDwAAAABwbDYOAAAAAAAAAAAAAAAAAAGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAwOAwGAwPAAAAAAAAAAAAAAAD4Bh4BgMfAAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},latin2:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPhsPhgMBgMDg8HAAAAAAAAAAfjMfjMZjMZjc7nYwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH4YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAAGMxmMRAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgYGBgMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnsAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAMBgGAAAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGYzGYzGYeBgAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwAAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAAAAdm4AAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4DAMfAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAzAAADwDD4zGYzDsAAAAAAADwzDwAGYzGYzGYzDsAAAAAAAAYGBgAD4xmAwGAxj4AAAAAAAAAAAAAD4xmAwGAxj4GAYeAAAAAOA0Hg4GBweCwGB4AAAAAAAAAxgAAD4xn8wGAxj4AAAAAANjYAD4xmMxmMxmMxj4AAAAAAAAANjYAD4xmMxmMxj4AAAAAAAAwPDMABwGAwGAwGB4AAAAAAGBgAH8hgYGBgYGExn8AAAAAAAGMEBwbGMxn8xmMxmMAAAAAADAwAB4ZmEwGAwGEZh4AAAAAAGBgYAA/jMYDwYDEZn8AAAAAAMDAAHgYDAYDAYDEZn8AAAAAAMDAAHAYDAYDAYDAYHgAAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAxgAAD4xmMxmMxj4AAAAAAAAA9jEZDAYDAYDEZn8AAAAAAAAA7DIaDAYDAYDAYHgAAAAAAGBgAD4xmMYBwDGMxj4AAAAAAAAADAwAD4xjAOAYxj4AAAAAAAGMAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAZh4AD8fi0GAwGAwGB4AAAAAAAAMEhoMH4MBgMBgNg4AAAAAAAAA8DIbDwcHA4DEZn8AAAAAAAAAAAAAAAxjYODYxgAAAAAAAAAAbBwAD4xmAwGAxj4AAAAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAEBwbGMxn8xmMxmMGBgHgAAAAAAAADwDD4zGYzDsGBgHgAbBwAH8xkYGBgYGExn8AAAAAAAAAbBwAH8zAwMDAxn8AAAAAAAAA/jMYjQeDQYDEZn8GBgHgAAAAAAAAD4xn8wGAxj4MDAPAAAAAAAAAAA/gMBgMBgAAAAAAAAAYGBgAH8zAwMDAxn8AAAAAAZh4AB4ZmEwGAwGEZh4AAAAAAAAAAAAAD4xjAOAYxj4GAYeAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAADYNg2NjYAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGBgAAgODYxmM/mMxmMAAAAAAODYAAgODYxmM/mMxmMAAAAAAbBwAH8ZjEaDwaDEZn8AAAAAAAAAfGMxjAOAYBmMxj4GAYeAANhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAAGAwAH8hgYGBgYGExn8AAAAAAAAAGAwAH8zAwMDAxn8AAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwxj4AAgODYxmM/mMxmMAAAAAAAAAxj4ADwDD4zGYzDsAAAAAANhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsAAAAAAAGMfGMxmMfGMAAAAAAAAADAYfgYPDYzGYzDsAAAAAAAAA+DYZjM9jMZjMbHwAAAAAAbBwAHwbDMZjMZjMbHwAAAAAAbAAAH8ZjEaDwaDEZn8AAAAAAAAAHYbDZ4bGYzGYzDsAAAAAAbBwAGM5ns/m8zmMxmMAAAAAADAwAB4GAwGAwGAwGB4AAAAAAPDMAB4GAwGAwGAwGB4AAAAAAAAAZh4AD4xn8wGAxj4AAAAAAGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////AAAfj8WgwGAwGAwGB4GAYeAAODYOAAxmMxmMxmMxj4AAAAAA//////////4AAAAAAAAAAAAADAwAD4xmMxmMxmMxj4AAAAAAAAAeGYzGY2GYxmMxmYAAAAAAODYAD4xmMxmMxmMxj4AAAAAADAwAGM5ns/m8zmMxmMAAAAAAAAYGBgAG4ZjMZjMZjMAAAAAAAAAbBwAG4ZjMZjMZjMAAAAAAbBwAD4xmAYBwDAMxj4AAAAAAAAAbBwAD4xjAOAYxj4AAAAAAGBgAH4ZjMZj4bDMZnsAAAAAAGBgAGMxmMxmMxmMxj4AAAAAAAAYGBgAG4djMYDAYHgAAAAAANjYAGMxmMxmMxmMxj4AAAAAAAAYGBgAGMxmMxmMxj8BgY+AADAwADMZjMZh4GAwGB4AAAAAAAAAEBgMH4MBgMBgNg4GAYeAAAAYGBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAAAAAAAAAAABsbGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDAPAAADYOAAAAAAAAAAAAAAAAAAAAAGMfAAAAAAAAAAAAAAAAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAGAwAD8AAwGAAAAAAAAAAAAAAAAAAAAAAAAAAGAYeAAABwbDYOAAAAAAAAAAAAAAAAAADYbAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAANjYAGYzGYzGYzDsAAAAAAbBwAH4ZjMZj4bDMZnsAAAAAAAAAbBwAG4djMYDAYHgAAAAAAAAAAAAfD4fD4fD4fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},nordic:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GDgAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAzAAADwDD4zGYzDsAAAAAAADAMAwADwDD4zGYzDsAAAAAAABwbBwADwDD4zGYzDsAAAAAAAAAAAAAD4xmAwGAxj4GDgAAAAAgODYAD4xn8wGAxj4AAAAAAAAAxgAAD4xn8wGAxj4AAAAAAADAMAwAD4xn8wGAxj4AAAAAAAAAZgAABwGAwGAwGB4AAAAAAAAwPDMABwGAwGAwGB4AAAAAAADAMAwABwGAwGAwGB4AAAAAAAGMAAgODYxmM/mMxmMAAAAAAODYOAgODYxmM/mMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAHYNhsfmw2DcAAAAAAAAAPjYzGY/mYzGYzGcAAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAxgAAD4xmMxmMxj4AAAAAAADAMAwAD4xmMxmMxj4AAAAAAABgeGYAGYzGYzGYzDsAAAAAAADAMAwAGYzGYzGYzDsAAAAAAAAAxgAAGMxmMxmMxj8BgYeAAAGMAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAAAAAAD4xmc1nMxj4AAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAIfGczms1ms1nM5j4QAAAAAAHwzGY+GIzG8zGYzGMAAAAAAAAcGwwGAwfgwGAw2DgAAAAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAdm4AG4ZjMZjMZjMAAAAAAdm4AGM5ns/m8zmMxmMAAAAAAAAAPDYbB8AD8AAAAAAAAAAAAAAAODYbBwAD4AAAAAAAAAAAAAAAMBgABgMDAwGMxj4AAAAAAAAAAAAAAA/mAwGAwAAAAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAxj4xmMxmMfGMAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADs3Gw2Gw3DsAAAAAAAAAeGYzGY2GYxmMxmYAAAAAAAAA/mMxmAwGAwGAwGAAAAAAAAAAAAAAH8bDYbDYbDYAAAAAAAAA/mMYBgGAwMDAxn8AAAAAAAAAAAAAD82Gw2Gw2DgAAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAdm4GAwGAwGAwAAAAAAAAAfgwPDMZjMZh4GD8AAAAAAAAAODYxmM/mMxmMbBwAAAAAAAAAODYxmMxjYbDYbHcAAAAAAAAAHhgGAYPjMZjMZh4AAAAAAAAAAAAAD82222z8AAAAAAAAAAAAAAGBj82228z8YGAAAAAAAAAAHBgYDAfDAYDAMA4AAAAAAAAAAD4xmMxmMxmMxmMAAAAAAAAAAAA/gAAH8AAA/gAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAAAADg2GwwGAwGAwGAwGAwGAwGAwGAwGAwGAwGGw2GwcAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAADYNhsNhsNgAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},persian:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABIZn+ZhIAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAPDMw2G222w2GZh4AAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAw3O/3+22Gw2Gw2GAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAA/22mQwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAw2Gw2Gw2GwzMPAwAAAAAAAAAw2Gw2Gw2223+ZjMAAAAAAAAAw2GZh4GAwPDMw2GAAAAAAAAAw2GwzMPAwGAwGB4AAAAAAAAA/2GhgYGBgYGCw3+AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAMBgGAAAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAODYZDA8DAYDAYHgAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHM/22222222AAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGGw2GwzMPAwAAAAAAAAAAAAAGGw2G222/zMAAAAAAAAAAAAAGGZh4GB4ZmGAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwAAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAAAAAAAAAAAAAAAQEAgCAOAAAAAAAAAAAACAgDwAAAAAAAAAAAAAAAAAAAAAAAAgOAgAAAAAAAAAAAgEAgEAQCAQBAIBAIAAAAAAAAEQj4QBAIBAEAgEAgAAAAAAACSSTsQBAIBAEAgEAgAAAAAAAAMCAgEAYCAgIBAIA8AAAAAAAAAEAQFBIIiEQUCkTcAAAAAAACEPgEAgIBAIBAEAgEAAAAAAACEQiEQhEJBIFAwGAgAAAAAAAAQGAwFBIJBEQiEQiEAAAAAAAAwJCIRB4BAIBAEAgEAAAAAAAAAAAADAwGAwAAAAAAAAAAAAAAAAAAAAAAH+AAAAAAAAAAB4QiAQBAEAYDAAAAYDAAAAAAACPiACAQCAQCAQCAAAAAAAAAAAAAMCAcEACAX8AAAAAAAAAAAAAAAAAQEAgDAgBAQAAAAAAAACAQCAQCAQCAQCAAAAAAAAAAAIBAIBAIBAIBAGAAAAAAAAAAAAAAAAAAACCgT8AAAEAAAAAAAAAAAAAAAACAX8AAAEAAAAAAAAAAAAAAACCgT8AAAFAQAAAAAAAAAAAAAACAX8AAAKAgAAAAAAAAAFAAACCgT8AAAAAAAAAAAAAAAFAAAACAX8AAAAAAAAAAAAAAQFAAACCgT8AAAAAAAAAAAAAAQFAAAACAX8AAAAAAAAAAAAAAAAAwJAEHxAQCARCAIQ8AAAAAAAAAGBIAn+AAACAAAAAAAAAAAAAwJAEHxAQCURCAIQ8AAAAAAAAAGBIAn+AAAKAgAAAAAAAAAAAwJAEHxAQCAQCAIQ8AAAAAAAAAGBIAn+AAAAAAAAAAAAEAAAAwJAEHxAQCAQCAIQ8AAAAAgAAAGBIAn+AAAAAAAAAAAAAAAAAIAgCIQ8AAAAAAAAAAAACAAAAIAgCIQ8AAAAAAAAAAAAAAAAAAAAEAQCAQEBBwAAAAAAAAAAgAAAEAQCAQEBBwAAAAAAAAICgAAAEAQCAQEBBwAAAAAAAAAAAAABKFQ+EAgIGAAAAAAAAAAAAAAACJX8AAAAAAAAAAAAAAICgAABKFQ+EAgIGAAAAAAAAAQFAAAACJX8AAAAAAAAAAAAAAAAAAAgKKQ8EAgIGAAAAAAAAAAAAABhSMX8AAAAAAAAAAAAAAIAAAAgKKQ8EAgIGAAAAAAABAAAAABhSMX8AAAAAAAAAABAIBAIBAJhSMX8AAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVUAAAAQCAgEBEISBQEAAAAAAAAGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAw+AwGAwGAwGAwGAwGAwGAw+Aw+AwGAwGAwGAwNhsNhsNhsNhs9hsNhsNhsNhsAAAAAAAAAAAA/hsNhsNhsNhsAAAAAAAAA+Aw+AwGAwGAwGAwNhsNhsNhs9gM9hsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAAA/gM9hsNhsNhsNhsNhsNhsNhs9gM/gAAAAAAAAAANhsNhsNhsNhs/gAAAAAAAAAAGAwGAwGAw+Aw+AAAAAAAAAAAAAAAAAAAAAAA+AwGAwGAwGAwGAwGAwGAwGAwH4AAAAAAAAAAGAwGAwGAwGAw/4AAAAAAAAAAAAAAAAAAAAAA/4wGAwGAwGAwGAwGAwGAwGAwH4wGAwGAwGAwAAAAAAAAAAAA/4AAAAAAAAAAGAwGAwGAwGAw/4wGAwGAwGAwGAwGAwGAwH4wH4wGAwGAwGAwNhsNhsNhsNhsN5sNhsNhsNhsNhsNhsNhsN5gP4AAAAAAAAAAAAAAAAAAAP5gN5sNhsNhsNhsNhsNhsNhs94A/4AAAAAAAAAAAAAAAAAAA/4A95sNhsNhsNhsNhsNhsNhsN5gN5sNhsNhsNhsAAAAAAAAA/4A/4AAAAAAAAAANhsNhsNhs94A95sNhsNhsNhsGAwGAwGAw/4A/4AAAAAAAAAANhsNhsNhsNhs/4AAAAAAAAAAAAAAAAAAA/4A/4wGAwGAwGAwAAAAAAAAAAAA/5sNhsNhsNhsNhsNhsNhsNhsP4AAAAAAAAAAGAwGAwGAwH4wH4AAAAAAAAAAAAAAAAAAAH4wH4wGAwGAwGAwAAAAAAAAAAAAP5sNhsNhsNhsNhsNhsNhsNhs/5sNhsNhsNhsGAwGAwGAw/4w/4wGAwGAwGAwGAwGAwGAwGAw+AAAAAAAAAAAAAAAAAAAAAAAH4wGAwGAwGAw////////////////////////AAAAAAAAAAAA////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f////////////AAAAAAAAAAAAABAIBIIBAJhSMX8AAAAAAAAAAAAAAADAgEAQHhAQCAQCAIQ8AAAAAAAAcHgYExAQCAQCAIQ8AAAAAAAAAHB4GHOAAAAAAAAAAAAAAAAAYEggCH+AAAAAAAAAAAACAADAgEAQHhAQCAQCAIQ8AAABAAAAcHgYExAQCAQCAIQ8AAAAAQAAAHB4GHOAAAAAAAAAAAACAAAAYEggCH+AAAAAAAAAAAAAgAAAEBSOgT8AAAAAAAAAAAAAgAAAEBQOAX8AAAAAAAAAAAAAAUAAAAgKJSGQSCQREHAAAAACgAAAEBQOAX8AAAAAAAAAAACAQCCQiCQigT8AAAAAAAAAAQEBAQEAgDgCAX8AAAAAAAAABQUFAQEAwBgCgT8AAAAAAAAABQUFAQEAgDgCAX8AAAAAAAAAAACAQCAQCAQCISCQSCQR8AAAAACIRCEQiCQSBg+AAAAAAAAAAACAQCAQCAQCAX8AAAAAAAAAAAAAAAAAADAcHxAIBAIBAIBAAAAAAAAAAAAMCXsAAAAAAAAAAAAAAAAAIAACISCQSCQRCHgAAAAAAACAAAACAX8AAAAAAAAAAAAAAAAAAAgKBQGAQEBDwAAAAAAAAAAAIBgSCQMAAAAAAAAAAAAAAAAAAHBIKHmJAkDgAAAAAAAAAACAIHhKGXsAAAAAAAAAAAAAAAAAAAAAAAOCCQhEEgj4AAAAAAAAABgQSEIgkEgj4AAAAAAAAAAAAAACAX8AAAKAAAAAAAAAH+VX+VX+VX+5Xu/X+/3+",amigaFont:!1},portuguese:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GDgAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAdm4ADwDD4zGYzDsAAAAAAADAMAwADwDD4zGYzDsAAAAAAYGAEBwbGMxn8xmMxmMAAAAAAAAAAAAAD4xmAwGAxj4GDgAAAAAgODYAD4xn8wGAxj4AAAAAAODYAH8ZjEaDwaDEZn8AAAAAAADAMAwAD4xn8wGAxj4AAAAAADAwAB4GAwGAwGAwGB4AAAAAAODYAD4xmMxmMxmMxj4AAAAAAADAMAwABwGAwGAwGB4AAAAAAdm4ABwbGMxn8xmMxmMAAAAAAODYxhwbGMxn8xmMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAADAMEBwbGMxn8xmMxmMAAAAAAMAwAH8ZjEaDwaDEZn8AAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAdm4AD4xmMxmMxj4AAAAAAADAMAwAD4xmMxmMxj4AAAAAAGBgAGMxmMxmMxmMxj4AAAAAAADAMAwAGYzGYzGYzDsAAAAAAMAwAB4GAwGAwGAwGB4AAAAAAdm4AD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAwGD4xmAwGAxj4GAwAAAAAAABwbDIYHgYDAYDA5n4AAAAAAMAwAGMxmMxmMxmMxj4AAAAAAAHwzGY+GIzG8zGYzGMAAAAAAGBgAD4xmMxmMxmMxj4AAAAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAdm4AG4ZjMZjMZjMAAAAAAdm4AGM5ns/m8zmMxmMAAAAAAAAAPDYbB8AD8AAAAAAAAAAAAAAAODYbBwAD4AAAAAAAAAAAAAAAMBgABgMDAwGMxj4AAAAAAMAwAD4xmMxmMxmMxj4AAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAADs3Gw2Gw3DsAAAAAAAAAeGYzGY2GYxmMxmYAAAAAAAAA/mMxmAwGAwGAwGAAAAAAAAAAAAAAH8bDYbDYbDYAAAAAAAAA/mMYBgGAwMDAxn8AAAAAAAAAAAAAD82Gw2Gw2DgAAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAdm4GAwGAwGAwAAAAAAAAAfgwPDMZjMZh4GD8AAAAAAAAAODYxmM/mMxmMbBwAAAAAAAAAODYxmMxjYbDYbHcAAAAAAAAAHhgGAYPjMZjMZh4AAAAAAAAAAAAAD82222z8AAAAAAAAAAAAAAGBj82228z8YGAAAAAAAAAAHBgYDAfDAYDAMA4AAAAAAAAAAD4xmMxmMxmMxmMAAAAAAAAAAAA/gAAH8AAA/gAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAABgGAYBgYGBgAD8AAAAAAAAAAAYGBgYBgGAYAD8AAAAAAAAADg2GwwGAwGAwGAwGAwGAwGAwGAwGAwGAwGGw2GwcAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAADs3AAdm4AAAAAAAAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAeDAYDAYDHYbDYPA4AAAAAAADYNhsNhsNgAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},russian:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAfGMxmc1nMxmMxj4AAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAHhsZmMxn8xmMxmMAAAAAAAAA/jEYDAfDMZjMZn4AAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAA/jMYjAYDAYDAYHgAAAAAAAAAHhsZjMZjMZjMZn+w0CAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA222Wi0fj8Wm2222AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAAxmMxmc3ns5mMxmMAAAAAAbBwxmMxmc3ns5mMxmMAAAAAAAAA5jMbDYeDwbDYZnMAAAAAAAAAHxsZjMZjMZjMZmeAAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/mMxmMxmMxmMxmMAAAAAAAAA/DMZjMZj4YDAYHgAAAAAAAAAfGMxmAwGAwGExj4AAAAAAAAA/22mQwGAwGAwGB4AAAAAAAAAxmMxmMxj8BgMxj4AAAAAAAAAfm22222222z8GB4AAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAxmMxmMxmMxmMxn+AwGAAAAAAxmMxmMxj8BgMBgMAAAAAAAAA1ms1ms1ms1ms1n8AAAAAAAAA1ms1ms1ms1ms1n+AwGAAAAAA+HgsBgPhmMxmMz8AAAAAAAAAw2Gw2G82222223mAAAAAAAAA8DAYDAfDMZjMZn4AAAAAAAAAfGMBhMPhMBgMxj4AAAAAAAAAzm2222+2222222cAAAAAAAAAPzMZjMPh8ZjMZnOAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAEBj4wGA/GMxmMxj4AAAAAAAAAAAAAH4ZjMfDMZn4AAAAAAAAAAAAAH8YjEYDAYHgAAAAAAAAAAAAAA8NjMZjMZn+w2GAAAAAAAAAAD4xmM/mAxj4AAAAAAAAAAAAAGs1iofCo1msAAAAAAAAAAAAAD4xgMPAMxj4AAAAAAAAAAAAAGMxmc1nMxmMAAAAAAAAAADYOGMxmc1nMxmMAAAAAAAAAAAAAHMbDweDYZnMAAAAAAAAAAAAAA8NjMZjMZnMAAAAAAAAAAAAAGM7n8/ms1mMAAAAAAAAAAAAAGMxmM/mMxmMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAH8xmMxmMxmMAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwGAwGAwGHwGHwGAwGAwGAwGAwNhsNhsNhsNnsNhsNhsNhsNhsAAAAAAAAAAH8NhsNhsNhsNhsAAAAAAAHwGHwGAwGAwGAwGAwNhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAANhsNhsNhsNn8AAAAAAAAAAAAGAwGAwGHwGHwAAAAAAAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwGAwGAwGA/GA/GAwGAwGAwGAwNhsNhsNhsNhvNhsNhsNhsNhsNhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsGAwGAwGH/AH/AAAAAAAAAAAANhsNhsNhsNn/AAAAAAAAAAAAAAAAAAAH/AH/GAwGAwGAwGAwAAAAAAAAAAH/NhsNhsNhsNhsNhsNhsNhsNh/AAAAAAAAAAAAGAwGAwGA/GA/AAAAAAAAAAAAAAAAAAAA/GA/GAwGAwGAwGAwAAAAAAAAAAB/NhsNhsNhsNhsNhsNhsNhsNn/NhsNhsNhsNhsGAwGAwGH/GH/GAwGAwGAwGAwGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f//////////4AAAAAAAAAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAAD4xmAwGAxj4AAAAAAAAAAAAAD8WgwGAwGB4AAAAAAAAAAAAAGMxmMxmMfgMBmMfAAAAAAB4GD82222222z8GAwPAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxn+AwGAAAAAAAAAAGMxmMxj8BgMAAAAAAAAAAAAAGs1ms1ms1n8AAAAAAAAAAAAAGs1ms1ms1n8AwGAAAAAAAAAAHwsFgPhmMz8AAAAAAAAAAAAAGMxmM9m83nsAAAAAAAAAAAAAHgYDAfDMZn4AAAAAAAAAAAAAD4xgMPgMxj4AAAAAAAAAAAAAGc222+2222cAAAAAAAAAAAAAD+xmMfhsZnOAAAAAAbAA/jMYjQeDQYDEZn8AAAAAAAAAADYAD4xmM/GAxj4AAAAAAAAAfGMwGQ+GQwGAxj4AAAAAAAAAAAAAD4xmA+GAxj4AAAAAAZgAPAwGAwGAwGAwGB4AAAAAAAAAADYABwGAwGAwGB4AAAAAAbBwxmMxmMxj8BgMxj4AAAAAAAAAADYOGMxmMxmMfgMBmMfAAABwbDYOAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAcDAYDAYDAY7DYPA4AAAAAAAAAz2a73Y/243GYzGYAAAAAAAAAAGMfGMxmMxmMfGMAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},terminus:{width:9,height:16,data:"AAAfiEQiEQiEQiEQj8AAAAAAAAAfEEqkEgl0kkEgj4AAAAAAAAAfH81n8/mM7n8/j4AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAEBwOAgVH8/ioEBwAAAAAAAAAEAgOD4/n8fAgEBwAAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAAAGBIJAwAAAAAAAAA/3+/3+/3+52223O/3+/3+/3+AAAHgMCgkOCIRCIRBwAAAAAAAAAOCIRCIRBwED4EAgAAAAAAAAAPhEPhAIBAIBAIGAAAAAAAAAAfiEfiEQiEQiEQiIgAAAAAAAAAAgkioOHcOCokggAAAAAAAAAAAAwHg/H+/HgwAAAAAAAAAAAAAAAweP3+PweAwAAAAAAAAAAEBwVAgEAgECoOAgAAAAAAAAAJBIJBIJBIJAAJBIAAAAAAAAAfkkkkkkjkEgkEgkAAAAAAABwRCAMCQRCIJAwBCIOAAAAAAAAAAAAAAAAAfj8fj8AAAAAAAAAEBwVAgEAgVBwED4AAAAAAAAAEBwVAgEAgEAgEAgAAAAAAAAAEAgEAgEAgECoOAgAAAAAAAAAAAAAAQBH8BAQAAAAAAAAAAAAAAAABAQH8QBAAAAAAAAAAAAAAAAQCAQCAQD8AAAAAAAAAAAAAAAABIQn+QhIAAAAAAAAAAAAAAAEAgOBwfD4/n8AAAAAAAAAAAA/n8fD4OBwEAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAgEAgEAgEAAEAgAAAAAAABIJBIAAAAAAAAAAAAAAAAAAAAAJBIJD8JBIfhIJBIAAAAAAAAgED4kkgkD4Egkkj4EAgAAAAAAZEoaAQEAgIBYUiYAAAAAAAAAGBIJAwMCURCIRB0AAAAAAAAgEAgAAAAAAAAAAAAAAAAAAAAACAgIBAIBAIBAEAQAAAAAAAAAIAgCAQCAQCAQEBAAAAAAAAAAAAAABIGD8GBIAAAAAAAAAAAAAAAAAgED4EAgAAAAAAAAAAAAAAAAAAAAAAAAEAgIAAAAAAAAAAAAAAAD8AAAAAAAAAAAAAAAAAAAAAAAAAAAEAgAAAAAAAAABAICAQEAgIBAQCAAAAAAAAAAPCEQiMSikYiEQh4AAAAAAAAACAwKAQCAQCAQCB8AAAAAAAAAPCEQgEBAQEBAQD8AAAAAAAAAPCEQgEHAEAiEQh4AAAAAAAAAAgMCgkIiEfgEAgEAAAAAAAAAfiAQCAfAEAgEQh4AAAAAAAAAHBAQCAfCEQiEQh4AAAAAAAAAfgEAgIBAQCAgEAgAAAAAAAAAPCEQiEPCEQiEQh4AAAAAAAAAPCEQiEQh8AgEBBwAAAAAAAAAAAAAAgEAAAAAEAgAAAAAAAAAAAAAAgEAAAAAEAgIAAAAAAAAAAICAgICAIAgCAIAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAACAIAgCAICAgICAAAAAAAAAAPCEQiEBAQCAACAQAAAAAAAAAfEEnlEolEpk0gD8AAAAAAAAAPCEQiEQj8QiEQiEAAAAAAAAAfCEQiEfCEQiEQj4AAAAAAAAAPCEQiAQCAQCEQh4AAAAAAAAAeCIQiEQiEQiERDwAAAAAAAAAfiAQCAeCAQCAQD8AAAAAAAAAfiAQCAeCAQCAQCAAAAAAAAAAPCEQiAQCcQiEQh4AAAAAAAAAQiEQiEfiEQiEQiEAAAAAAAAAOAgEAgEAgEAgEBwAAAAAAAAADgIBAIBAIBCIRBwAAAAAAAAAQiISCgYDAUCQRCEAAAAAAAAAQCAQCAQCAQCAQD8AAAAAAAAAgmMqkkkkEgkEgkEAAAAAAAAAQiEQjEUiURiEQiEAAAAAAAAAPCEQiEQiEQiEQh4AAAAAAAAAfCEQiEQj4QCAQCAAAAAAAAAAPCEQiEQiEQiESh4AgAAAAAAAfCEQiEQj4UCQRCEAAAAAAAAAPCEQCAPAEAiEQh4AAAAAAAAA/ggEAgEAgEAgEAgAAAAAAAAAQiEQiEQiEQiEQh4AAAAAAAAAQiEQiEQhIJBIGAwAAAAAAAAAgkEgkEgkkklUxkEAAAAAAAAAQiEJBIGAwJBIQiEAAAAAAAAAgkERCIKAgEAgEAgAAAAAAAAAfgEAgICAgICAQD8AAAAAAAAAOBAIBAIBAIBAIBwAAAAAAAAAQCAIBAEAgCAQBAIAAAAAAAAAOAQCAQCAQCAQCBwAAAAAAAAgKCIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAEAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4Ah8QiEQh8AAAAAAAAAQCAQD4QiEQiEQj4AAAAAAAAAAAAAB4QiAQCAQh4AAAAAAAAAAgEAh8QiEQiEQh8AAAAAAAAAAAAAB4QiEfiAQB4AAAAAAAAADggED4EAgEAgEAgAAAAAAAAAAAAAB8QiEQiEQh8AgEPAAAAAQCAQD4QiEQiEQiEAAAAAAAAAEAgABgEAgEAgEBwAAAAAAAAABAIAAYBAIBAIBAIRCIOAAAAAQCAQCERCQcCQRCEAAAAAAAAAMAgEAgEAgEAgEBwAAAAAAAAAAAAAH4kkkkkkkkkAAAAAAAAAAAAAD4QiEQiEQiEAAAAAAAAAAAAAB4QiEQiEQh4AAAAAAAAAAAAAD4QiEQiEQj4QCAQAAAAAAAAAB8QiEQiEQh8AgEAgAAAAAAAAC8YCAQCAQCAAAAAAAAAAAAAAB8QCAPAEAj4AAAAAAAAAEAgED4EAgEAgEAcAAAAAAAAAAAAACEQiEQiEQh8AAAAAAAAAAAAACEQiEJBIGAwAAAAAAAAAAAAAEEgkkkkkkj4AAAAAAAAAAAAACEQhIGBIQiEAAAAAAAAAAAAACEQiEQiEQh8AgEPAAAAAAAAAD8BAQEBAQD8AAAAAAAAADAgEAgIAgEAgEAYAAAAAAAAAEAgEAgEAgEAgEAgAAAAAAAAAMAQCAQBAQCAQCBgAAAAAAADEkkYAAAAAAAAAAAAAAAAAAAAAAAAEBQREEgkEgn8AAAAAAAAAPCEQiAQCAQCEQh4EAgIAAAAAJBIACEQiEQiEQh8AAAAAAAAACAgAB4QiEfiAQB4AAAAAAAAAGBIAB4Ah8QiEQh8AAAAAAAAAJBIAB4Ah8QiEQh8AAAAAAAAAEAQAB4Ah8QiEQh8AAAAAAAAAGBIGB4Ah8QiEQh8AAAAAAAAAAAAAB4QiAQCAQh4EAgIAAAAAGBIAB4QiEfiAQB4AAAAAAAAAJBIAB4QiEfiAQB4AAAAAAAAAEAQAB4QiEfiAQB4AAAAAAAAASCQABgEAgEAgEBwAAAAAAAAAMCQABgEAgEAgEBwAAAAAAAAAIAgABgEAgEAgEBwAAAAAAJBIAB4QiEQj8QiEQiEAAAAAAGBIGB4QiEQj8QiEQiEAAAAAACAgAD8QCAQDwQCAQD8AAAAAAAAAAAAADYEjknkgkDYAAAAAAAAAfkgkEg/EgkEgkE8AAAAAAAAAGBIAB4QiEQiEQh4AAAAAAAAAJBIAB4QiEQiEQh4AAAAAAAAAEAQAB4QiEQiEQh4AAAAAAAAAGBIACEQiEQiEQh8AAAAAAAAAEAQACEQiEQiEQh8AAAAAAAAAJBIACEQiEQiEQh8AgEPAAJBIAB4QiEQiEQiEQh4AAAAAAJBIACEQiEQiEQiEQh4AAAAAAAAAAAgED4kkgkEgkj4EAgAAAAAAGBIIBAeBAIBAIj8AAAAAAAAAgkERBQED4ED4EAgAAAAAAAAA8EQiEQ9EIjkIhEEAAAAAAAAADAkEAgfAgEAgEAgEEgYAAAAACAgAB4Ah8QiEQh8AAAAAAAAACAgABgEAgEAgEBwAAAAAAAAACAgAB4QiEQiEQh4AAAAAAAAACAgACEQiEQiEQh8AAAAAAAAAMiYAD4QiEQiEQiEAAAAAAMiYACEQjEUiURiEQiEAAAAAAABwBB4RB4AD4AAAAAAAAAAAAABwRCIRBwAD4AAAAAAAAAAAAAAAEAgAAgEBAQiEQh4AAAAAAAAAAAAAD8QCAQAAAAAAAAAAAAAAAAAAD8AgEAgAAAAAAAAAAABAYBAIhICAgICYkgICA8AAAABAYBAIhICAgIiMig8AgEAAAAAAEAgAAgEAgEAgEAgAAAAAAAAAAAAAAkJCQkCQJAkAAAAAAAAAAAAAEgSBIEhISEgAAAAAAiBEiBEiBEiBEiBEiBEiBEiBEqiqqiqqiqqiqqiqqiqqiqqiq7l27l27l27l27l27l27l27l2EAgEAgEAgEAgEAgEAgEAgEAgEAgEAgEAgEHgEAgEAgEAgEAgEAgEAgEAg8Ag8AgEAgEAgEAgKBQKBQKBQKHQKBQKBQKBQKBQAAAAAAAAAAHwKBQKBQKBQKBQAAAAAAAAA8Ag8AgEAgEAgEAgKBQKBQKBQ6AQ6BQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQAAAAAAAAA+AQ6BQKBQKBQKBQKBQKBQKBQ6AQ+AAAAAAAAAAAKBQKBQKBQKHwAAAAAAAAAAAAEAgEAgEAg8Ag8AAAAAAAAAAAAAAAAAAAAAHgEAgEAgEAgEAgEAgEAgEAgEA/AAAAAAAAAAAAEAgEAgEAgEH/AAAAAAAAAAAAAAAAAAAAAAH/EAgEAgEAgEAgEAgEAgEAgEA/EAgEAgEAgEAgAAAAAAAAAAH/AAAAAAAAAAAAEAgEAgEAgEH/EAgEAgEAgEAgEAgEAgEAgH4gH4gEAgEAgEAgKBQKBQKBQKBfKBQKBQKBQKBQKBQKBQKBQL5AP4AAAAAAAAAAAAAAAAAAAP5AL5QKBQKBQKBQKBQKBQKBQ74A/4AAAAAAAAAAAAAAAAAAA/4A75QKBQKBQKBQKBQKBQKBQL5AL5QKBQKBQKBQAAAAAAAAA/4A/4AAAAAAAAAAKBQKBQKBQ74A75QKBQKBQKBQEAgEAgEAg/4A/4AAAAAAAAAAKBQKBQKBQKH/AAAAAAAAAAAAAAAAAAAAA/4A/4gEAgEAgEAgAAAAAAAAAAH/KBQKBQKBQKBQKBQKBQKBQKB/AAAAAAAAAAAAEAgEAgEAgH4gH4AAAAAAAAAAAAAAAAAAAH4gH4gEAgEAgEAgAAAAAAAAAAB/KBQKBQKBQKBQKBQKBQKBQKH/KBQKBQKBQKBQEAgEAgEAg/4g/4gEAgEAgEAgEAgEAgEAgEHgAAAAAAAAAAAAAAAAAAAAAAA/EAgEAgEAgEAg////////////////////////AAAAAAAAAAAA////////////8Hg8Hg8Hg8Hg8Hg8Hg8Hg8HgD4fD4fD4fD4fD4fD4fD4fD4f////////////AAAAAAAAAAAAAAAAAAAB0RiIRCIRh0AAAAAAAAAOCIRCQfCEQiEQj4QCAQAAAAAfiAQCAQCAQCAQCAAAAAAAAAAAAAAD8QiEQiEQiEAAAAAAAAAfiAIAgCAQEBAQD8AAAAAAAAAAAAAB8RCIRCIRBwAAAAAAAAAAAAACEQiEQiERj0QCAQAAAAAAAAAH8EAgEAgEAYAAAAAAAAAED4kkkkkkkkkfAgAAAAAAAAAPCEQiEWiEQiEQh4AAAAAAAAAPCEQiEQiEQhIJDMAAAAAAAAAPggCB4QiEQiEQh4AAAAAAAAAAAAADYkkkkjYAAAAAAAAAAAAAgIfEUkkkoj4QEAAAAAAAAAAAAAHhAQD8QBAHgAAAAAAAAAAAAAPCEQiEQiEQiEAAAAAAAAAAAAfgAAD8AAAfgAAAAAAAAAAAAAAAgED4EAgAD4AAAAAAAAAABAEAQBAQEBAAD4AAAAAAAAAAAICAgIAgCAIAB8AAAAAAAAADAkEggEAgEAgEAgEAgEAgEAgEAgEAgEAgEEgkDAAAAAAAAAAAAAEAgAD4AAgEAAAAAAAAAAAAAAABkTAAMiYAAAAAAAAAAAwJBIGAAAAAAAAAAAAAAAAAAAAAAAAAAAAwGAAAAAAAAAAAAAAAAAAAAAAgEAAAAAAAAAAAAAMBAIBAIRCIRBIFAYAAAAAAABwJBIJBIAAAAAAAAAAAAAAAAAwJAQEB4AAAAAAAAAAAAAAAAAAAAAAB4PB4PB4PAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1},turkish:{width:9,height:16,data:"AAAAAAAAAAAAAAAAAAAAAAAAAAAfkCpUCgV6mUCgT8AAAAAAAAAfn+23+/2G53+/z8AAAAAAAAAAAAbH8/n8/j4OAgAAAAAAAAAAAAEBwfH8fBwEAAAAAAAAAAAAAwPB453O5wwGB4AAAAAAAAAAAwPD8/3+fgwGB4AAAAAAAAAAAAAAAGB4PAwAAAAAAAAA/3+/3+/3+52Gw3O/3+/3+/3+AAAAAAAB4ZiEQjMPAAAAAAAA/3+/3+/2GmV6vUyw3+/3+/3+AAAHgcGhkeGYzGYzDwAAAAAAAAAPDMZjMZh4GD8GAwAAAAAAAAAPxmPxgMBgMDg8HAAAAAAAAAAfzGfzGYzGYzO53MwAAAAAAAAAAwGG2PHOPG2GAwAAAAAAAEAwHA8Hw/nw8HAwEAAAAAAAAAEBgcHh8/h8HgcBgEAAAAAAAAAGB4fgwGAwfh4GAAAAAAAAAAAZjMZjMZjMZgAZjMAAAAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAAAAA/n8/n8AAAAAAAAAGB4fgwGAwfh4GD8AAAAAAAAAGB4fgwGAwGAwGAwAAAAAAAAAGAwGAwGAwGD8PAwAAAAAAAAAAAAAAwDH8DAwAAAAAAAAAAAAAAAABgYH8YBgAAAAAAAAAAAAAAAAAAwGAwH8AAAAAAAAAAAAAAAABQbH8bBQAAAAAAAAAAAAAAAEBwOD4fH8/gAAAAAAAAAAAAA/n8fD4OBwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGB4PB4GAwGAAGAwAAAAAAADMZjMJAAAAAAAAAAAAAAAAAAAAADYbH8bDYbH8bDYAAAAAAGAwfGMwmAfAMBkMxj4GAwAAAAAAAAAwmMDAwMDAxkMAAAAAAAAAODYbBwdm4zGYzDsAAAAAAABgMBgYAAAAAAAAAAAAAAAAAAAADAwMBgMBgMBgGAYAAAAAAAAAMAwDAYDAYDAYGBgAAAAAAAAAAAAADMPH+PDMAAAAAAAAAAAAAAAAAwGD8GAwAAAAAAAAAAAAAAAAAAAAAAAwGAwMAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAGAwAAAAAAAAAAAAAgMDAwMDAwEAAAAAAAAAAODYxmM1msxmMbBwAAAAAAAAAGBweAwGAwGAwGD8AAAAAAAAAfGMBgYGBgYGAxn8AAAAAAAAAfGMBgMPAMBgMxj4AAAAAAAAADA4PDYzH8DAYDA8AAAAAAAAA/mAwGA/AMBgMxj4AAAAAAAAAODAwGA/GMxmMxj4AAAAAAAAA/mMBgMDAwMBgMBgAAAAAAAAAfGMxmMfGMxmMxj4AAAAAAAAAfGMxmMfgMBgMDDwAAAAAAAAAAAAGAwAAAAAwGAAAAAAAAAAAAAAGAwAAAAAwGBgAAAAAAAAAAAMDAwMDAMAwDAMAAAAAAAAAAAAAD8AAAfgAAAAAAAAAAAAAADAMAwDAMDAwMDAAAAAAAAAAfGMxgYGAwGAAGAwAAAAAAAAAAD4xmM3m83m4wD4AAAAAAAAAEBwbGMxn8xmMxmMAAAAAAAAA/DMZjMfDMZjMZn4AAAAAAAAAPDMwmAwGAwGEZh4AAAAAAAAA+DYZjMZjMZjMbHwAAAAAAAAA/jMYjQeDQYDEZn8AAAAAAAAA/jMYjQeDQYDAYHgAAAAAAAAAPDMwmAwG8xmMZh0AAAAAAAAAxmMxmM/mMxmMxmMAAAAAAAAAPAwGAwGAwGAwGB4AAAAAAAAAHgYDAYDAYzGYzDwAAAAAAAAA5jMZjYeDwbDMZnMAAAAAAAAA8DAYDAYDAYDEZn8AAAAAAAAAxnc/n81mMxmMxmMAAAAAAAAAxnM9n83mcxmMxmMAAAAAAAAAfGMxmMxmMxmMxj4AAAAAAAAA/DMZjMfDAYDAYHgAAAAAAAAAfGMxmMxmMxms3j4DAcAAAAAA/DMZjMfDYZjMZnMAAAAAAAAAfGMxjAOAYBmMxj4AAAAAAAAAfj8WgwGAwGAwGB4AAAAAAAAAxmMxmMxmMxmMxj4AAAAAAAAAxmMxmMxmMxjYOAgAAAAAAAAAxmMxmM1ms1n87jYAAAAAAAAAxmMbD4OBwfDYxmMAAAAAAAAAZjMZjMPAwGAwGB4AAAAAAAAA/mMhgYGBgYGExn8AAAAAAAAAPBgMBgMBgMBgMB4AAAAAAAAAAEAwHAcBwHAcBgEAAAAAAAAAPAYDAYDAYDAYDB4AAAAAAEBwbGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAABgGAYAAAAAAAAAAAAAAAAAAAAAAAAADwDD4zGYzDsAAAAAAAAA4DAYDwbDMZjMZj4AAAAAAAAAAAAAD4xmAwGAxj4AAAAAAAAAHAYDB4bGYzGYzDsAAAAAAAAAAAAAD4xn8wGAxj4AAAAAAAAAHBsMhgeBgMBgMDwAAAAAAAAAAAAADszGYzGYzD4DGYeAAAAA4DAYDYdjMZjMZnMAAAAAAAAAGAwABwGAwGAwGB4AAAAAAAAABgMAAcBgMBgMBgMZjMPAAAAA4DAYDMbDweDYZnMAAAAAAAAAOAwGAwGAwGAwGB4AAAAAAAAAAAAAHY/ms1ms1mMAAAAAAAAAAAAAG4ZjMZjMZjMAAAAAAAAAAAAAD4xmMxmMxj4AAAAAAAAAAAAAG4ZjMZjMZj4YDA8AAAAAAAAADszGYzGYzD4DAYHgAAAAAAAAG4djMYDAYHgAAAAAAAAAAAAAD4xjAOAYxj4AAAAAAAAAEBgMH4MBgMBgNg4AAAAAAAAAAAAAGYzGYzGYzDsAAAAAAAAAAAAAGMxmMxmMbBwAAAAAAAAAAAAAGMxms1ms/jYAAAAAAAAAAAAAGMbBwOBwbGMAAAAAAAAAAAAAGMxmMxmMxj8BgY+AAAAAAAAAH8zAwMDAxn8AAAAAAAAADgwGAwcAwGAwGAcAAAAAAAAAGAwGAwGAwGAwGAwAAAAAAAAAcAwGAwDgwGAwGDgAAAAAAADs3AAAAAAAAAAAAAAAAAAAAAAAAAAEBwbGMxmM/gAAAAAAAAAAPDMwmAwGAwGEZh4GBgAAAAAAzAAAGYzGYzGYzDsAAAAAAAAYGBgAD4xn8wGAxj4AAAAAAAAgODYADwDD4zGYzDsAAAAAAAAAzAAADwDD4zGYzDsAAAAAAADAMAwADwDD4zGYzDsAAAAAAABwbBwADwDD4zGYzDsAAAAAAAAAAAAAD4xmAwGAxj4GBgAAAAAgODYAD4xn8wGAxj4AAAAAAAAAxgAAD4xn8wGAxj4AAAAAAADAMAwAD4xn8wGAxj4AAAAAAAAAZgAABwGAwGAwGB4AAAAAAAAwPDMABwGAwGAwGB4AAAAAAAAAAAAABwGAwGAwGB4AAAAAAAGMAAgODYxmM/mMxmMAAAAAAODYOAgODYxn8xmMxmMAAAAAADAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAGYdhsfmw2DcAAAAAAAAAPjYzGY/mYzGYzGcAAAAAAAAgODYAD4xmMxmMxj4AAAAAAAAAxgAAD4xmMxmMxj4AAAAAAADAMAwAD4xmMxmMxj4AAAAAAABgeGYAGYzGYzGYzDsAAAAAAADAMAwAGYzGYzGYzDsAAAAAAAAwAB4GAwGAwGAwGB4AAAAAAAGMAD4xmMxmMxmMxj4AAAAAAAGMAGMxmMxmMxmMxj4AAAAAAAAAAAAAD4zm89nMxj4AAAAAAABwbDIYHgYDAYDA5n4AAAAAAAAAfGMxmc3ns5mMxj4AAAAAAAAAfGMxjAOAYBmMxj4GBgAAAAAAAAAAD4xjAOAYxj4GBgAAAAAwMDAADwDD4zGYzDsAAAAAAAAYGBgABwGAwGAwGB4AAAAAAAAwMDAAD4xmMxmMxj4AAAAAAAAwMDAAGYzGYzGYzDsAAAAAAAAAdm4AG4ZjMZjMZjMAAAAAAdm4AGM5ns/m8zmMxmMAAAAAAADMfh4ZmEwGA3mMbh0AAAAAAAAAzDwADszGYzGYzD4DGYeAAAAAMBgABgMDAwGMxj4AAAAAAAAAfEEslUslUqkEfAAAAAAAAAAAAAAAAA/gMBgMBgAAAAAAAADA4DEZjYGBgYG4hgYGB8AAAADA4DEZjYGBgZmcmh+BgMAAAAAAGAwAAwGAwPB4PAwAAAAAAAAAAAAABsbGwbBsAAAAAAAAAAAAAAAAGwbBsbGwAAAAAAAAAESIESIESIESIESIESIESIESIVVUVVUVVUVVUVVUVVUVVUVVU3Tu3Tu3Tu3Tu3Tu3Tu3Tu3TuGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGAwGHwGAwGAwGAwGAwYGAEBwbGMxn8xmMxmMAAAAAAfGMEBwbGMxn8xmMxmMAAAAAADAMEBwbGMxn8xmMxmMAAAAAAAAAfEEmlEolEmkEfAAAAAAAANhsNhsNnsBnsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsNhsAAAAAAAH8BnsNhsNhsNhsNhsNhsNhsNnsBn8AAAAAAAAAAAAAAAGAwfGMwGAxj4GAwAAAAAAAAAADMZh4GD8GD8GAwAAAAAAAAAAAAAAAAHwGAwGAwGAwGAwGAwGAwGAwGA/AAAAAAAAAAAAGAwGAwGAwGH/AAAAAAAAAAAAAAAAAAAAAAH/GAwGAwGAwGAwGAwGAwGAwGA/GAwGAwGAwGAwAAAAAAAAAAH/AAAAAAAAAAAAGAwGAwGAwGH/GAwGAwGAwGAwAAAdm4ADwDD4zGYzDsAAAAAAdm4ABwbGMxn8xmMxmMAAAAAANhsNhsNhvMB/AAAAAAAAAAAAAAAAAAAB/MBvNhsNhsNhsNhsNhsNhsNnvAH/AAAAAAAAAAAAAAAAAAAH/AHvNhsNhsNhsNhsNhsNhsNhvMBvNhsNhsNhsNhsAAAAAAAH/AH/AAAAAAAAAAAANhsNhsNnvAHvNhsNhsNhsNhsAAAAAAxj4xmMxmMfGMAAAAAAAAAODYbBwAD4AAAAAAAAAAAAAAAPDYbB8AD8AAAAAAAAAAAAODYAH8ZjEaDwaDEZn8AAAAAAAGMAH8ZjEaDwaDEZn8AAAAAAMAwAH8ZjEaDwaDEZn8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwAB4GAwGAwGAwGB4AAAAAAPDMAB4GAwGAwGAwGB4AAAAAAADMAB4GAwGAwGAwGB4AAAAAAGAwGAwGAwGHwAAAAAAAAAAAAAAAAAAAAAAA/GAwGAwGAwGAw////////////////////////AAAAAAAAAAH/////////////AAwGAwGAwAAAGAwGAwGAAAAAMAwAB4GAwGAwGAwGB4AAAAAA//////////4AAAAAAAAAAAAAGBgAD4xmMxmMxmMxj4AAAAAAAAAeGYzGY2GYxmMxmYAAAAAAODYAD4xmMxmMxmMxj4AAAAAAMAwAD4xmMxmMxmMxj4AAAAAAAAAdm4AD4xmMxmMxj4AAAAAAdm4AD4xmMxmMxmMxj4AAAAAAAAAAAAADMZjMZjMZj4YDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGMbBwODYxgAAAAAAAGBgAGMxmMxmMxmMxj4AAAAAAODYAGMxmMxmMxmMxj4AAAAAAMAwAGMxmMxmMxmMxj4AAAAAAADAMAwABwGAwGAwGB4AAAAAAAAAxgAAGMxmMxmMxj8BgYeAAAH+AAAAAAAAAAAAAAAAAAAAAAAYGBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAGAwfgwGAAAD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAMDENnYGBgZmcmh+BgMAAAAAAf22222ew2Gw2Gw2AAAAAAAD4xjAODYxmMbBwDGMfAAAAAAAAAAAAAwAD8AAwAAAAAAAAAAAAAAAAAAAAAAAAAAwDDwAAAABwbDYOAAAAAAAAAAAAAAAAAAGMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAwOAwGAwPAAAAAAAAAAAAAAAD4Bh4BgMfAAAAAAAAAAAAAAAB4ZgYGBkfgAAAAAAAAAAAAAAAAAAAfj8fj8fj8fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",amigaFont:!1}},Qf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Zb={};function EY(t,e){const A=e*4,n=A*2,r=new Uint8Array(t.length*4);for(let s=0,i=0;s<t.length;s+=4){const o=t.subarray(s,s+4);if(r.set(o,i),i+=4,r.set(o,i),i+=4,(s+4)%A===0){const a=i-n;r.set(r.subarray(a,a+n),i),i+=n}}return r}function Ib(t,e,A,n,r){const s=e*A,i={},o=e===9&&r.bits!=="9"||e===9&&r.thumbnail,a=new Uint8Array((o?e-1:e)*A*4);function c(u,f,h,d){const m=u+(h<<8)+(d<<12);if(!i[m]){i[m]=new Uint8Array((o?e-1:e)*A*4);for(let p=0,w=u*s,b=0;p<s;++p,++w)(!o||(p+1)%9!==0)&&(t[w]||n&&h>7&&p%e>0&&t[w-1]&&(r.bits==="ced"||r.bits==="workbench")?i[m].set(f[h],b):i[m].set(f[d],b),b+=4);r["2x"]&&(i[m]=EY(i[m],o?e-1:e))}return i[m]}function l(u,f,h){for(let d=0,m=u*s,p=0;d<s;++d,++m)(!o||(d+1)%9!==0)&&(t[m]?a.set(f,p):a.set(h,p),p+=4);return r["2x"]?EY(a,o?e-1:e):a}return{getData:c,get24BitData:l,height:A*(r["2x"]?2:1),width:(o?8:e)*(r["2x"]?2:1)}}function Rb(t,e,A){const n=new Uint8Array(e*A*256);for(let r=e*A*256/8,s=0;r>0;--r){const i=t.get();for(let o=7;o>=0;--o)n[s++]=i>>o&1?1:0}return n}function Sse(t){const e=new Uint32Array(1),A=new Uint8Array(t.length/4*3);for(let n=0,r=0;n<t.length;e[0]=0)e[0]+=(Qf.indexOf(t.charAt(n++))&63)<<18,e[0]+=(Qf.indexOf(t.charAt(n++))&63)<<12,e[0]+=(Qf.indexOf(t.charAt(n++))&63)<<6,e[0]+=Qf.indexOf(t.charAt(n++))&63,A[r++]=e[0]>>16&255,A[r++]=e[0]>>8&255,A[r++]=e[0]&255;return new Es(A)}function Cse(t,e){switch(t){case"amiga":t="topaz";break;case"microknightplus":t="microknight+";break;case"topazplus":t="topaz+";break;case"topaz500plus":t="topaz500+";break}return Zb[t]||(Zb[t]=Rb(Sse(ho[t].data),ho[t].width,ho[t].height)),Ib(Zb[t],ho[t].width,ho[t].height,ho[t].amigaFont,e)}function Pse(t,e,A){return Ib(Rb(t,8,e),8,e,!1,A)}function Zse(t,e){return Ib(Rb(t,8,16),8,16,!1,e)}function Ise(t){switch(t){case"amiga":case"microknightplus":case"topazplus":case"topaz500plus":return!0;default:return Object.prototype.hasOwnProperty.call(ho,t)}}const Ns={preset:Cse,xbin:Pse,font8x16x256:Zse,has:Ise};function Kf(t){return new Uint8Array([(((t&32)>>5)+((t&4)>>1))*85,(((t&16)>>4)+(t&2))*85,(((t&8)>>3)+((t&1)<<1))*85,255])}const Rse=[0,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7].map(Kf),jse=[0,4,2,20,1,5,3,7,56,60,58,62,57,61,59,63].map(Kf),zse=[0,1,2,3,4,5,20,7,56,57,58,59,60,61,62,63].map(Kf),Hse=[7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].map(Kf),Lse=[new Uint8Array([170,170,170,255]),new Uint8Array([170,170,170,255]),new Uint8Array([0,0,0,255]),new Uint8Array([0,0,0,255]),new Uint8Array([255,255,255,255]),new Uint8Array([255,255,255,255]),new Uint8Array([102,136,187,255]),new Uint8Array([102,136,187,255]),new Uint8Array([0,0,255,255]),new Uint8Array([0,0,255,255]),new Uint8Array([255,0,255,255]),new Uint8Array([255,0,255,255]),new Uint8Array([0,255,255,255]),new Uint8Array([0,255,255,255]),new Uint8Array([255,255,255,255]),new Uint8Array([255,255,255,255])];function Use(t){const e=[];for(let A=0;A<16;++A){const n=t.get(),r=t.get(),s=t.get();e.push(new Uint8Array([n<<2|n>>4,r<<2|r>>4,s<<2|s>>4,255]))}return e}function Fse(t){const e=[];for(let A=0;A<64;++A){const n=t.get(),r=t.get(),s=t.get();e.push(new Uint8Array([n<<2|n>>4,r<<2|r>>4,s<<2|s>>4,255]))}return[e[0],e[1],e[2],e[3],e[4],e[5],e[20],e[7],e[56],e[57],e[58],e[59],e[60],e[61],e[62],e[63]]}const Nr={ASC_PC:Rse,ANSI:jse,BIN:zse,CED:Hse,WORKBENCH:Lse,adf:Fse,triplets16:Use};class ii{imageData;pos;columns;rows;palette;font;constructor(e){this.columns=e,this.rows=0,this.pos=0,this.imageData=new Uint8Array(e*1e3*10)}reset(){this.imageData=new Uint8Array(this.columns*1e3*10),this.pos=0,this.rows=0}extendImageData(e){const A=new Uint8Array(this.columns*(e+1e3)*10+this.imageData.length);A.set(this.imageData,0),this.imageData=A}set(e,A,n,r,s,i){this.pos=(A*this.columns+e)*10,this.pos>=this.imageData.length&&this.extendImageData(A),this.imageData[this.pos]=n,r?(this.imageData[this.pos+1]=1,this.imageData.set(s,this.pos+2),this.imageData.set(i,this.pos+6)):(this.imageData[this.pos+2]=s,this.imageData[this.pos+3]=i),A+1>this.rows&&(this.rows=A+1)}raw(e){this.rows=Math.ceil(e.length/2/this.columns),this.imageData=new Uint8Array(this.columns*this.rows*10);for(let A=0,n=0;n<e.length;A+=10,n+=2)this.imageData[A]=e[n],this.imageData[A+2]=e[n+1]&15,this.imageData[A+3]=e[n+1]>>4}trimColumns(){let e=0;const A=this.imageData.length/10/this.columns;for(let r=0;r<this.imageData.length;r+=10)this.imageData[r]&&(e=Math.max(r/10%this.columns,e));++e;const n=new Uint8Array((e+1)*A*10);for(let r=0,s=0;r<n.length;r+=e*10,s+=this.columns*10)n.set(this.imageData.subarray(s,s+this.columns*10),r);this.imageData=n,this.columns=e}getData(){const e=this.imageData.subarray(0,this.columns*this.rows*10);for(let A=0;A<e.length;A+=10)e[A+5]=255,e[A+9]=255;return e}}function $se(t,e){const A=new Es(t);A.getC();const n=new ii(80);return n.palette=Nr.adf(A),n.font=Ns.font8x16x256(A,e),n.raw(A.read()),{imageData:n,sauce:A.sauce}}function NY(t,e){const A=new Es(t);let n=!1,r="",s,i,o,a;const c=new ii(80);let l=0,u=1,f=1,h,d,m=7,p=0,w,b,g,x,_=!1,G=!1,y=!1,v;function O(){m=7,p=0,w=void 0,b=void 0,_=!1,G=!1,y=!1}function B(){u=1,f===25?++l:++f}function Y(N,M){u=Math.min(a,Math.max(1,N)),f=Math.min(26,Math.max(1,M))}function D(){return r.substr(1,r.length-2).split(";").map(N=>{const M=Number.parseInt(N,10);return Number.isNaN(M)?1:M})}if(A.sauce){switch(A.sauce.tInfo1>0?a=A.sauce.tInfo1:a=80,v=A.sauce.flags&1||(e.icecolors??0),A.sauce.letterSpacing){case 1:e.bits="8";break;case 2:e.bits="9";break}switch(A.sauce.tInfoS){case"IBM VGA":e.font="80x25";break;case"IBM VGA50":e.font="80x50";break;case"Amiga Topaz 1":e.font="topaz500";break;case"Amiga Topaz 1+":e.font="topaz500+";break;case"Amiga Topaz 2":e.font="topaz";break;case"Amiga Topaz 2+":e.font="topaz+";break;case"Amiga P0T-NOoDLE":e.font="pot-noodle";break;case"Amiga MicroKnight":e.font="microknight";break;case"Amiga MicroKnight+":e.font="microknight+";break;case"Amiga mOsOul":e.font="mosoul";break}}else e.mode==="ced"?a=78:a=80,v=e.icecolors??0;switch(c.columns=a,c.font=Ns.preset(e.font??"80x25",e),e.bits){case"ced":c.palette=Nr.CED;break;case"workbench":c.palette=Nr.WORKBENCH;break;default:c.palette=Nr.ANSI}for(;!A.eof();)if(i=A.get(),n){if(r+=String.fromCharCode(i),i>=65&&i<=90||i>=97&&i<=122){if(n=!1,o=D(),r.startsWith("["))switch(r.charAt(r.length-1)){case"A":f=Math.max(1,f-o[0]);break;case"B":f=Math.min(25,f+o[0]);break;case"C":u===a&&B(),u=Math.min(a,u+o[0]);break;case"D":u=Math.max(1,u-o[0]);break;case"H":o.length===1?Y(1,o[0]):Y(o[1],o[0]);break;case"J":o[0]===2&&(u=1,f=1,c.reset());break;case"K":for(s=u-1;s<a;++s)c.set(s,f-1+l,0,!1,0,0);break;case"m":for(s=0;s<o.length;++s)if(o[s]>=30&&o[s]<=37)m=o[s]-30,w&&(w=void 0);else if(o[s]>=40&&o[s]<=47)p=o[s]-40,b&&(b=void 0);else switch(o[s]){case 0:O();break;case 1:_=!0,w&&(w=void 0);break;case 5:G=!0,b&&(b=void 0);break;case 7:y=!0;break;case 22:_=!1;break;case 25:G=!1;break;case 27:y=!1;break}break;case"s":h=u,d=f;break;case"t":if(o.length===4)switch(o[0]){case 0:b=new Uint8Array([o[1],o[2],o[3]]);break;case 1:w=new Uint8Array([o[1],o[2],o[3]]);break}break;case"u":u=h??u,f=d??f;break}r=""}}else switch(i){case 10:B();break;case 13:A.peek()===10&&(A.read(1),B());break;case 26:break;default:i===27&&A.peek()===91?n=!0:(e.mode==="ced"?c.set(u-1,f-1+l,i,!1,1,0):(y?(g=p,x=m):(g=m,x=p),_&&(g+=8),G&&v&&!b&&(x+=8),w||b?c.set(u-1,f-1+l,i,!0,w??c.palette[g],b??c.palette[x]):c.set(u-1,f-1+l,i,!1,g,x)),++u===a+1&&B())}return{imageData:c,sauce:A.sauce}}function TY(t,e){const A=new Es(t),n=new ii(80);n.font=Ns.preset(e.font??"80x25",e),n.palette=Nr.ASC_PC;let r=0,s=0;for(;!A.eof();){const i=A.get();i===13&&A.peek()===10?(A.read(1),++s,r=0):i===10?(++s,r=0):(n.set(r,s,i,!1,1,0),++r===80&&(++s,r=0))}return{imageData:n,sauce:A.sauce}}function Vse(t,e){const A=new Es(t),n=new ii(e.columns??160);n.font=Ns.preset(e.font??"80x25",e),n.palette=Nr.BIN,n.raw(A.read());let r;if(A.sauce){switch(r=A.sauce.flags&1||(e.icecolors??0),A.sauce.letterSpacing){case 1:e.bits="8";break;case 2:e.bits="9";break}switch(A.sauce.tInfoS){case"IBM VGA":e.font="80x25";break;case"IBM VGA50":e.font="80x50";break;case"Amiga Topaz 1":e.font="topaz500";break;case"Amiga Topaz 1+":e.font="topaz500+";break;case"Amiga Topaz 2":e.font="topaz";break;case"Amiga Topaz 2+":e.font="topaz+";break;case"Amiga P0T-NOoDLE":e.font="pot-noodle";break;case"Amiga MicroKnight":e.font="microknight";break;case"Amiga MicroKnight+":e.font="microknight+";break;case"Amiga mOsOul":e.font="mosoul";break}}else r=e.icecolors??0;if(!r){const s=n.getData();for(let i=1;i<s.length;i+=2)s[i]=s[i]&127}return{imageData:n,sauce:A.sauce}}function qse(t,e){const A=new Es(t);A.seek(8);const n=A.get16()+1,r=new ii(n);A.seek(12);let s=0,i=0;for(;A.getPos()<A.size-4144;){const o=A.get16();if(o===1){let a=A.get();A.get();const c=A.get(),l=A.get();for(;a-- >0;)r.set(s++,i,c,!1,l&15,l>>4),s===n&&(s=0,++i)}else r.set(s++,i,o&255,!1,o>>8&15,o>>12),s===n&&(s=0,++i)}return r.font=Ns.font8x16x256(A,e),r.palette=Nr.triplets16(A),{imageData:r,sauce:A.sauce}}function Wse(t,e){const A=new Es(t),n=new ii(80);n.font=Ns.preset(e.font??"80x25",e),n.palette=Nr.BIN;let r=0,s=7,i=0,o=0;const a=A.sauce&&A.sauce.flags&1||(e.icecolors??0);function c(u){n.set(i,o,u,!1,s,r),++i===80&&(o++,i=0)}let l=0;for(;l<A.size;){const u=t[l];if(u===26)break;switch(u){case 13:break;case 10:o++,i=0;break;case 9:i+=8;break;case 64:t[l+1]===88?(r=t[l+2]-(t[l+2]>=65?55:48),!a&&r>7&&(r-=8),s=t[l+3]-(t[l+3]>=65?55:48),l+=3):t[l+1]===67&&t[l+2]===76&&t[l+3]===83?(i=o=0,n.reset(),l+=4):t[l+1]===80&&t[l+2]===79&&t[l+3]===83&&t[l+4]===58?t[l+6]===64?(i=t[l+5]-48-1,l+=5):(i=10*(t[l+5]-48)+t[l+6]-48-1,l+=6):c(u);break;default:c(u)}l++}return{imageData:n,sauce:A.sauce}}function Qse(t,e){const A=new Es(t);function n(c){let l=c.get()<<24;return l+=c.get()<<16,l+=c.get()<<8,l+c.get()}if(A.get()!==24)throw new Error("File ID does not match.");if(A.getS(8)!=="TUNDRA24")throw new Error("File ID does not match.");const r=new Uint8Array(3),s=new Uint8Array(3);let i=0,o=0;const a=new ii(80);for(a.font=Ns.preset(e.font??"80x25",e),a.palette=Nr.ANSI;!A.eof();){i===80&&(i=0,++o);let c=A.get();c===1&&(o=n(A),i=n(A)),c===2&&(c=A.get(),A.get(),r.set(A.read(3),0)),c===4&&(c=A.get(),A.get(),s.set(A.read(3),0)),c===6&&(c=A.get(),A.get(),r.set(A.read(3),0),A.get(),s.set(A.read(3),0)),c!==1&&c!==2&&c!==4&&c!==6&&(a.set(i,o,c,!0,r,s),++i)}return{imageData:a,sauce:A.sauce}}function Kse(t,e){const A=new Es(t);function n(o){if(o.getS(4)!=="XBIN")throw new Error("File ID does not match.");if(o.get()!==26)throw new Error("File ID does not match.");const a={};if(a.width=o.get16(),a.height=o.get16(),a.fontHeight=o.get(),a.fontHeight===0||a.fontHeight>32)throw new Error(`Illegal value for the font height (${a.fontHeight}).`);const c=o.get();if(a.palette=(c&1)===1,a.font=(c&2)===2,a.fontHeight!==16&&!a.font)throw new Error("A non-standard font size was defined, but no font information was included with the file.");return a.compressed=(c&4)===4,a.nonBlink=(c&8)===8,a.char512=(c&16)===16,a}function r(o,a,c){const l=new Uint8Array(a*c*2);let u=0;for(;u<l.length;){const f=o.get(),h=f&63;switch(f>>6){case 1:{const d=o.get();for(let m=0;m<=h;++m)l[u++]=d,l[u++]=o.get();break}case 2:{const d=o.get();for(let m=0;m<=h;++m)l[u++]=o.get(),l[u++]=d;break}case 3:{const d=o.get(),m=o.get();for(let p=0;p<=h;++p)l[u++]=d,l[u++]=m;break}default:for(let d=0;d<=h;++d)l[u++]=o.get(),l[u++]=o.get()}}return l}const s=n(A),i=new ii(s.width);return i.palette=s.palette?Nr.triplets16(A):Nr.BIN,i.font=s.font?Ns.xbin(A,s.fontHeight,e):Ns.preset("80x25",e),s.compressed?i.raw(r(A,s.width,s.height)):i.raw(A.read(s.width*s.height*2)),{imageData:i,sauce:A.sauce}}function Jse(t,e,A,n){n=Yse(n);let r;switch(n.filetype){case"txt":r=TY(t,n);break;case"ion":r=TY(t,n),r.imageData.trimColumns();break;case"adf":r=$se(t,n);break;case"bin":r=Vse(t,n);break;case"idf":r=qse(t,n);break;case"pcb":r=Wse(t,n);break;case"tnd":r=Qse(t,n);break;case"xb":r=Kse(t,n);break;case"diz":r=NY(t,n),r.imageData.trimColumns();break;default:r=NY(t,n)}if(A>0){const s=[];for(let i=0;i<r.imageData.rows;i+=A){const o=kY(r.imageData,i,A);s.push(o)}e(s,r.sauce)}else{const s=kY(r.imageData,0,r.imageData.rows);e(s,r.sauce)}}const Xse={readBytes:Jse};function eie(t,e,A,n){try{Xse.readBytes(t,e,0,A)}catch(r){if(n)n(r);else throw r}}function tie(t,e,A,n){const r=dl();E(r)&&eie(n,(s,i)=>{const o=i?.title??"",a=i?.author??"",c=new Map,l=Ose(F1(V1));if(E(s.palette)&&E(l)){const b=[];for(let g=0;g<l.length;++g){const x=l[g];b.push({name:`${g}`,rgb:{r:Math.round(x.r*255),g:Math.round(x.g*255),b:Math.round(x.b*255)}})}for(let g=0;g<s.palette.length;++g){const x=s.palette[g][0],_=s.palette[g][1],G=s.palette[g][2],y=Tse({targetColor:{r:x,g:_,b:G},colorArray:b}),v=parseFloat(y?.name??"0");c.set(g,v)}}const u=`${o||e}${a?` by ${a}`:""}`,f=Math.ceil(s.width/Ie),h=Math.ceil(s.height/rt),d=[];for(let b=0;b<f*h;++b)d.push(void 0);let m=0,p=0;const w=Pd();for(let b=0;b<s.screen.length;++b){const g=m%Ie,x=p%rt,_=Math.floor(m/Ie),G=Math.floor(p/rt),y=_+G*f;let v=d[y];if(!E(v)){const O=[`@${w}_${_}_${G}`,`@exitnorth ${w}_${_}_${G-1}`,`@exitsouth ${w}_${_}_${G+1}`,`@exitwest ${w}_${_-1}_${G}`,`@exiteast ${w}_${_+1}_${G}`],B=`${y}`.padStart(3,"0"),Y=`@board ${u} ${B}
${O.join(`
`)}
`,D=Io(Y,{});$i(r,D),d[y]=v=Ar(D)}if(E(v)&&ai({x:g,y:x})){const[O,B,Y]=s.screen[b],D=c.get(B)??0,N=c.get(Y)??0;Wt(v,{x:g,y:x,kind:"fake",char:O,color:D,bg:N})}++m,m>=s.width&&(m=0,++p)}is(Ae,t,`imported ansi file ${u} into ${r.name} book`)},{filetype:A,imagedata:1})}function Aie(t,e,A){const n=dl();if(!E(n))return;const r=`@charset ${e.toLowerCase().replace(".chr","")}`,s=Io(r,{}),i=gt(s),o=$1(A),a=Ar(s);E(o)&&E(a)&&(Object.assign(a,o),$i(n,s),is(Ae,t,`imported chr file ${i} into ${n.name} book`))}const nie=/; \$(\w+) ?(.*)/,rie=/title (.+?) (.*)/i;function jb(t){return t.replace(/\\/g,"\\\\").replace(/'/g,"\\'")}function sie(t,e){const A=dl();if(!E(A))return;const n=e.split(/\r?\n/),r={title:"",gendate:"",gentime:"",songs:[]};function s(d){return r.songs.find(m=>m.order===d)}function i(d,m){return{order:d,title:m,lines:[]}}for(let d=0;d<n.length;++d){const m=n[d],p=nie.exec(m);if(E(p)){const w=p[1].toLowerCase(),b=p[2];switch(w){case"title":r.title=b;break;case"gendate":r.gendate=b;break;case"gentime":r.gentime=b;break;case"song":{const g=rie.exec(b);if(E(g)){const x=parseFloat(g[1]),_=g[2],G=s(x);E(G)?G.title=_:r.songs.push(i(x,_))}else{const x=parseFloat(b);if(Ne(x)){const _=s(x);E(_)||r.songs.push(i(x,""))}}break}}}else{const w=r.songs[r.songs.length-1];E(w)&&m.trim().length&&w.lines.push(m)}}r.songs.sort((d,m)=>d.order-m.order);const o=r.songs.map(d=>d.title),a=`@play_${je(r.title).replace(/\W/g,"")}
@cycle 1
@char 14
#end

:touch
"ALBUM: ${jb(r.title)}"
"$purple  ${jb(r.gendate)}"
"$purple  ${jb(r.gentime)}"
${o.map((d,m)=>`!song_${m};${m+1} ${d||"untitled"}`).join(`
`)}
#end

${r.songs.map((d,m)=>`:song_${m}
${d.lines.map(p=>`#play ${p}`).join(`
`)}
#end
`).join(`
`)}
`,c=Io(a,{}),l=gt(c);$i(A,c),is(Ae,t,`imported zzt zzm file ${l} into ${A.name} book`);const u=gt(c),f=Jr(c);bt(Ae,t,`!pageopen ${c.id};$blue[${f}]$white ${u}`);const h=`#put n ${l}`;pse(Ae,t,h,h,!1)}function OY(t,e){let A=t;return A.trim()===`:${e}`&&(A=A.replace(`:${e}`,`:_${e}`)),A.trim()===`'${e}`&&(A=A.replace(`'${e}`,`'_${e}`)),A.startsWith(`#${e}`)&&(A=A.replace(`#${e}`,`#_${e}`)),A.endsWith(` ${e}`)&&(A=A.replace(` ${e}`,` _${e}`)),A}function iie(t,e,A){let n=t;return n.trimStart().startsWith(`#${e}`)&&(n=n.replace(`#${e}`,`#${A}`)),n.trimStart().startsWith("#")&&n.includes(` ${e}`)&&(n=n.replace(` ${e}`,` ${A}`)),n}function zb(t){return t.replaceAll(/\r?\n|\r/g,`
`).split(`
`).map(A=>{let n=A;n.trimStart().startsWith("$")&&(n=n.replace("$","$CENTER")),n.trimStart().startsWith("#")&&n.includes(" $")&&(n=n.replace(" $",' "$CENTER')+'"');let r="";for(let s=0;s<n.length;++s){const i=n.charCodeAt(s);i<32||i>127?r+=`$${i}`:r+=n[s]}return r=OY(r,"do"),r=OY(r,"done"),r=iie(r,"fgplay","play"),r.includes("do")||r.includes("run")||r.includes("done")||r.includes("load"),r}).join(`
`)}const Jf=60,oie=Jf*25;function YY(t){let e=0;const A=new DataView(t.buffer);function n(c){e=c}function r(){return e}function s(){const c=A.getUint8(e);return e++,c}function i(){const c=A.getInt16(e,!0);return e+=2,c}function o(){const c=A.getInt32(e,!0);return e+=4,c}function a(c){let l="";const u=t.subarray(e,e+c);for(let f=0;f<u.length;++f)l+=String.fromCharCode(u[f]);return e+=c,l.replace("\r",`
`)}return{seek:n,index:r,readuint8:s,readint16:i,readint32:o,readstring:a}}function SY(t){const e=t.index(),A=t.readint16(),n=t.readuint8(),s={boardname:t.readstring(50).slice(0,n),elements:[],stats:[]};for(;s.elements.length<oie;){let o=t.readuint8();o===0&&(o=1500);const a=t.readuint8(),c=t.readuint8();for(let l=0;l<o;++l)s.elements.push({type:a,color:c})}s.maxplayershots=t.readuint8(),s.isdark=t.readuint8(),s.exitnorth=t.readuint8(),s.exitsouth=t.readuint8(),s.exitwest=t.readuint8(),s.exiteast=t.readuint8(),s.restartonzap=t.readuint8(),s.messagelength=t.readuint8(),s.message=t.readstring(58).slice(0,s.messagelength),s.playerenterx=t.readuint8(),s.playerentery=t.readuint8(),s.timelimit=t.readint16(),t.seek(t.index()+16);const i=t.readint16()+1;for(;s.stats.length<i;){const o={};o.x=t.readuint8()-1,o.y=t.readuint8()-1,o.stepx=t.readint16(),o.stepy=t.readint16(),o.cycle=t.readint16(),o.p1=t.readuint8(),o.p2=t.readuint8(),o.p3=t.readuint8(),o.follower=t.readint16(),o.leader=t.readint16(),o.underelement=t.readuint8(),o.undercolor=t.readuint8(),o.pointer=t.readint32(),o.currentinstruction=t.readint16();const a=t.readint16();t.seek(t.index()+8),a<0?o.bind=Math.abs(a):o.code=t.readstring(a),s.stats.push(o)}return t.seek(e+A+2),s}function CY(t,e,A){function n(o,a,c,l){const u=In(o,a,c);if(E(u)&&E(l)){const f=mn(l);for(let h=0;h<f.length;++h){const d=f[h];u[d]=l[d]}}}function r(o){const a=o%16,c=Math.floor(o/16);return{color:a,bg:c}}function s(o,a,c,l,u){const f=r(l.color),h=js(f.color,f.bg),d=js((f.bg+8)%16,f.color),m={},p=u.find(w=>w.x===a&&w.y===c);if(E(p)&&(Ne(p.cycle)&&p.cycle>0&&(m.cycle=p.cycle),E(p.p1)&&(m.p1=p.p1),E(p.p2)&&(m.p2=p.p2),E(p.p3)&&(m.p3=p.p3),E(p.code)&&p.code&&(m.code=zb(p.code)),E(p.stepx)&&(m.stepx=p.stepx),E(p.stepy)&&(m.stepy=p.stepy),E(p.bind)&&p.bind>0)){const w=u[p.bind];E(w?.code)&&xe(w.code)&&(m.code=zb(w.code))}switch(l.type){case 0:case 1:case 2:case 3:break;case 4:break;case 5:n(o,["ammo",h],{x:a,y:c},m);break;case 6:n(o,["torch",h],{x:a,y:c},m);break;case 7:n(o,["gem",h],{x:a,y:c},m);break;case 8:n(o,["key",h],{x:a,y:c},m);break;case 9:n(o,["door",d],{x:a,y:c},m);break;case 10:n(o,["scroll",h],{x:a,y:c},m);break;case 11:{m.p3=i(p?.p3)??"",n(o,["passage",h],{x:a,y:c},m);break}case 12:n(o,["duplicator",h],{x:a,y:c},{...m,stepx:0,stepy:0,shootx:m.stepx??0,shooty:m.stepy??0});break;case 13:n(o,["bomb",h],{x:a,y:c},m);break;case 14:n(o,["energize",h],{x:a,y:c},m);break;case 15:n(o,["star",h],{x:a,y:c},m);break;case 16:n(o,["clockwise",h],{x:a,y:c},m);break;case 17:n(o,["counter",h],{x:a,y:c},m);break;case 18:n(o,["bullet",h],{x:a,y:c},m);break;case 19:n(o,["water",h],{x:a,y:c},m);break;case 20:n(o,["forest",h],{x:a,y:c},m);break;case 21:n(o,["solid",h],{x:a,y:c},m);break;case 22:n(o,["normal",h],{x:a,y:c},m);break;case 23:n(o,["breakable",h],{x:a,y:c},m);break;case 24:n(o,["boulder",h],{x:a,y:c},m);break;case 25:n(o,["sliderns",h],{x:a,y:c},m);break;case 26:n(o,["sliderew",h],{x:a,y:c},m);break;case 27:n(o,["fake",h],{x:a,y:c},m);break;case 28:n(o,["invisible",h],{x:a,y:c},m);break;case 29:n(o,["blinkwall",h],{x:a,y:c},{...m,stepx:0,stepy:0,shootx:m.stepx??0,shooty:m.stepy??0});break;case 30:n(o,["transporter",h],{x:a,y:c},{...m,stepx:0,stepy:0,shootx:m.stepx??0,shooty:m.stepy??0});break;case 31:n(o,["line",h],{x:a,y:c},m);break;case 32:n(o,["ricochet",h],{x:a,y:c},m);break;case 33:n(o,["blinkew",h],{x:a,y:c},m);break;case 34:n(o,["bear",h],{x:a,y:c},m);break;case 35:n(o,["ruffian",h],{x:a,y:c},m);break;case 36:n(o,["object",h],{x:a,y:c},{...m,char:p?.p1??1});break;case 37:n(o,["slime",h],{x:a,y:c},m);break;case 38:n(o,["shark",h],{x:a,y:c},m);break;case 39:n(o,["spinninggun",h],{x:a,y:c},m);break;case 40:n(o,["pusher",h],{x:a,y:c},m);break;case 41:n(o,["lion",h],{x:a,y:c},m);break;case 42:n(o,["tiger",h],{x:a,y:c},m);break;case 43:n(o,["blinkns",h],{x:a,y:c},m);break;case 44:n(o,["head",h],{x:a,y:c},m);break;case 45:n(o,["segment",h],{x:a,y:c},m);break;case 46:n(o,["customtext"],{x:a,y:c},{...m,char:l.color});break;default:if(l.type>=47&&l.type<=53){const w=r(l.type===53?15:(l.type-46)*16+15),b=js(w.color,w.bg%8);n(o,["text",b],{x:a,y:c},{...m,char:l.color})}else if(l.type>=128){const w=r(l.type),b=js(w.color,w.bg%8);n(o,["text",b],{x:a,y:c},{...m,char:l.color})}break}}function i(o){if(Ne(o)&&o>0)return`zztboard${o}`}for(let o=0;o<A.length;++o){const a=A[o],c=[`@zztboard${o}`,""];o===0?c.push("@title"):o===e&&c.push("@zztstartboard");for(let g=0;g<a.elements.length;++g)a.elements[g].type===4&&(c.push(`@startx ${b1(g,Jf)}`),c.push(`@starty ${_1(g,Jf)}`));Ne(a.maxplayershots)&&c.push(`@maxplayershots ${a.maxplayershots}`),Ne(a.isdark)&&a.isdark&&c.push("@isdark"),Ne(a.restartonzap)&&a.restartonzap&&c.push("@restartonzap"),Ne(a.timelimit)&&c.push(`@timelimit ${a.timelimit}`);const l=i(a.exitnorth);xe(l)&&c.push(`@exitnorth ${l}`);const u=i(a.exitsouth);xe(u)&&c.push(`@exitsouth ${u}`);const f=i(a.exitwest);xe(f)&&c.push(`@exitwest ${f}`);const h=i(a.exiteast);xe(h)&&c.push(`@exiteast ${h}`);const d=`@board ${String(o).padStart(3,"0")}. ${a.boardname}
${c.join(`
`)}`,m=Io(d,{});$i(t,m);const p=Ar(m);if(!E(p))continue;let w=0,b=0;for(let g=0;g<a.elements.length;++g){const x=a.elements[g];s(p,w,b,x,a.stats),++w,w===Jf&&(w=0,++b)}eA(p)}}function aie(t,e){const A=dl();if(!E(A))return;const n=YY(e),r=SY(n);CY(A,-1,[r]),is(Ae,t,`imported zzt brd ${r.boardname} into ${A.name} book`)}function cie(t,e){const A=YY(e);if(A.readint16()!=-1)return;const r=A.readint16()+1,s=A.readint16(),i=A.readint16(),o=A.readstring(7),a=A.readint16(),c=A.readint16(),l=A.readint16(),u=A.readint16(),f=A.readint16();A.readint16();const h=A.readint16(),d=A.readuint8(),m=A.readstring(20).slice(0,d);for(let _=0;_<10;_++){const G=A.readuint8();A.readstring(20).slice(0,G)}const p=A.readint16(),w=A.readint16(),b=A.readuint8();console.info(s,i,o,a,c,l,u,f,h,p,w,b),A.seek(512);const g=[];for(let _=0;_<r;++_){const G=SY(A);g.push(G)}const x=s0([]);x.name=m,CY(x,c,g),Sh(x),is(Ae,t,`imported zzt file into ${x.name} book`)}function lie(t,e,A){const n=dl();if(!E(n))return;const s=Yh(A).name?A:`@${e.toLowerCase().replace(".obj","")}
${A}`,i=Io(zb(s),{}),o=gt(i);$i(n,i),is(Ae,t,`imported zzt obj file ${o} into ${n.name} book`)}function PY(t,e){switch([...e.slice(0,4)].map(r=>r.toString(16)).join("").toUpperCase()){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip"}return kse.getType(t)??"application/octet-stream"}function ZY(t,e){if(!E(e))return"";switch(t){case"model/obj":return"obj";case"text/plain":return"txt";case"application/json":return"json";case"application/zip":return"zip";case"application/octet-stream":if(/.zzt$/i.test(e.name))return"zzt";if(/.brd$/i.test(e.name))return"brd";if(/.chr$/i.test(e.name))return"chr";if(/.zzm$/i.test(e.name))return"zzm";if(/.ans$/i.test(e.name))return"ans";if(/.adf$/i.test(e.name))return"adf";if(/.bin$/i.test(e.name))return"bin";if(/.idf$/i.test(e.name))return"idf";if(/.pcb$/i.test(e.name))return"pcb";if(/.tnd$/i.test(e.name))return"tnd";if(/.xb$/i.test(e.name))return"xb";if(/.diz$/i.test(e.name))return"diz";break}return""}let ma=[],Xf={};async function uie(t,e){try{_A(Ae,t,"parsezipfile",e.name);const A=await e.arrayBuffer(),r=await new Pb().loadAsync(A);ma=[],Xf={};const s=[];r.forEach((i,o)=>s.push([i,o]));for(let i=0;i<s.length;++i){const[o,a]=s[i],c=await a.async("uint8array"),l=PY(o,c),u=new File([c],a.name,{type:l});ma.push(u)}AP(Ae,t)}catch(A){xt(Ae,t,"crash",A.message)}}function hie(){const t=[];for(let e=0;e<ma.length;++e){const A=ma[e];t.push([ZY(A.type,A),A.name])}return t}function fie(t,e){Xf[t.toLowerCase()]=e}function die(t){return Xf[t.toLowerCase()]}async function mie(t){for(let e=0;e<ma.length;++e){const A=ma[e];Xf[A.name.toLowerCase()]&&(Hb(t,A),await bi(2e3))}await bi(2e3),Ta(Ae,t,!1)}function IY(t,e,A){if(!E(A))return;const n=ZY(e,A);switch(n){case"obj":A.text().then(r=>lie(t,A.name,r)).catch(r=>xt(Ae,t,"crash",r.message));break;case"txt":A.text().then(r=>Oa(Ae,t,void 0,"text",`file:${A.name}`,r)).catch(r=>xt(Ae,t,"crash",r.message));break;case"json":A.text().then(r=>Oa(Ae,t,void 0,"json",`file:${A.name}`,r)).catch(r=>xt(Ae,t,"crash",r.message));break;case"zip":uie(t,A).catch(r=>xt(Ae,t,"crash",r.message));break;case"zzt":A.arrayBuffer().then(r=>{cie(t,new Uint8Array(r))}).catch(r=>xt(Ae,t,"crash",r.message));break;case"brd":A.arrayBuffer().then(r=>{aie(t,new Uint8Array(r))}).catch(r=>xt(Ae,t,"crash",r.message));break;case"chr":A.arrayBuffer().then(r=>{Aie(t,A.name,new Uint8Array(r))}).catch(r=>xt(Ae,t,"crash",r.message));break;case"zzm":A.text().then(r=>{sie(t,r)}).catch(r=>xt(Ae,t,"crash",r.message));break;case"ans":case"adf":case"bin":case"idf":case"pcb":case"tnd":case"xb":A.arrayBuffer().then(r=>{tie(t,A.name,n,new Uint8Array(r))}).catch(r=>xt(Ae,t,"crash",r.message));break;default:e||A.arrayBuffer().then(r=>{const s=PY(A.name,new Uint8Array(r));if(s)IY(t,s,A);else return xt(Ae,t,"parsewebfile",`unsupported file ${A.name}`)}).catch(r=>xt(Ae,t,"crash",r.message));return}}function Hb(t,e){IY(t,e?.type??"",e)}function RY(){return location.href.includes("/join/")}const ed="https://bridge.zed.cafe";async function pie(t,e,A){const n=`offset=${A}&${t}=${e}`,r=new Request(`${ed}/api/v1/search/files/?${n}`);return(await(await fetch(r)).json()).data.results}async function gie(){const t=new Request(`${ed}/api/v1/get/random-file/`);return[(await(await fetch(t)).json()).data]}function wie(t){return`${ed}/static/${t}`}async function bie(t,e){const n=await(await fetch(`${ed}/zgames/${e}`)).arrayBuffer(),r=new File([n],e);Hb(t,r)}async function _ie(t,e){const A=new FormData;A.append("email",t),A.append("tag",e);const n=new Request("https://bbs.zed.cafe/api/login",{method:"POST",body:A});return await(await fetch(n)).json()}async function xie(t,e){const A=new FormData;A.append("email",t),A.append("code",e);const n=new Request("https://bbs.zed.cafe/api/code",{method:"POST",body:A});return await(await fetch(n)).json()}async function yie(t,e){const A=new FormData;A.append("email",t),A.append("code",e);const n=new Request("https://bbs.zed.cafe/api/list",{method:"POST",body:A});return await(await fetch(n)).json()}async function Gie(t,e,A){const n=new FormData;n.append("email",t),n.append("code",e),n.append("filename",A);const r=new Request("https://bbs.zed.cafe/api/delete",{method:"POST",body:n});return await(await fetch(r)).json()}function zt(t,e,A){A().catch(n=>{console.error(n),xt(t,e,"crash",n?.message)})}function td(t){if(sn(t)!==Ye.TERRAIN&&sn(t)!==Ye.OBJECT)return"";const A={kind:gt(t)};return Zn(A),`${Ub(A)}$ONCLEAR$BLUE `}function Mie(t,e,A){const n=Bie(t,e),r=uA(A,t);if(!E(A)||!E(r))return[];n.focusid=r.id??"",n.focusx=r.x??0,n.focusy=r.y??0;const{graphics:s,camera:i,facing:o}=HY(t,A);if(xe(s)){const a=je(s);switch(s){case"fpv":case"iso":case"flat":case"mode7":n.graphics=a;break;default:n.graphics="flat";break}}if(xe(i))switch(je(i)){default:n.viewscale=Iu.MID;break;case"near":n.viewscale=Iu.NEAR;break;case"far":n.viewscale=Iu.FAR;break}return Ne(o)&&(n.facing=O1(o)),[n]}function Lb(t,e,A,n,r,s=!1){if(!E(A)||!E(A.terrain)||!E(A.objects))return[];eA(A),f4(A);const i=je(HY(t,A).graphics),o=[];let a=e;const c=A.id,l=Ie,u=rt,f=Eie(c,a++,l,u,Xe.BLACK);o.push(f);const h=a++,d=vie(c,h);d.sprites=[],o.push(d);const m=A.isdark?1:0,p=Die(c,a++,l,u,m);o.push(p),p.alphas.fill(m);for(let g=0;g<A.terrain.length;++g){const x=A.terrain[g],_=pA(x,0,Xe.WHITE,r===De.OVER?Xe.ONCLEAR:Xe.BLACK),G=qe(x,"collision");f.char[g]=_.char,f.color[g]=_.color,f.bg[g]=_.bg,f.stats[g]=G}if(i==="fpv")for(let g=0;g<A.terrain.length;++g){const x=A.terrain[g];(s||E(qe(x,"sky")))&&(f.char[g]=-f.char[g])}const w=Object.values(A.objects??{}),b=new Set;for(let g=0;g<w.length;++g){const x=w[g];$t(x.id)&&Ne(x.x)&&Ne(x.y)&&b.add(wn(x,Ie))}for(let g=0;g<w.length;++g){const x=w[g],_=qe(x,"collision");if(E(x.removed)||_===$e.ISGHOST)continue;const G=x.id??"";if($t(G)===!1&&Ne(x.x)&&Ne(x.y)&&b.has(wn(x,Ie))===!0)continue;const y=pA(x),v=jY(c,h,G,g);if(v.x=x.x??0,v.y=x.y??0,v.char=y.char,v.color=y.color,v.bg=y.bg,v.stat=_,v.pid=$t(G)?G:void 0,d.sprites.push(v),m){if(y.light>0){const O=Os(A,v),B=gr(Math.round(y.light),1,rt),Y=1/(B*.5);if(p.alphas[O]=0,B>1){const D=[];for(let N=1;N<=B;++N){if(N===2){const R=qe(x,"lightdir");if(Cn(R)){const I=fo(A,x,"",R,v);switch(Wn(v,I.destpt)){case De.EAST:D.push([45,315,1]);break;case De.WEST:D.push([225,135,1]);break;case De.NORTH:D.push([315,225,1]);break;case De.SOUTH:D.push([135,45,1]);break}}}const M=[];for(let R=v.y-N;R<=v.y+N;++R)nd(A,p.alphas,D,M,v,B,Y,v.x-N,R),nd(A,p.alphas,D,M,v,B,Y,v.x+N,R);const Z=N-1;for(let R=v.x-Z;R<=v.x+Z;++R)nd(A,p.alphas,D,M,v,B,Y,R,v.y-N),nd(A,p.alphas,D,M,v,B,Y,R,v.y+N);for(let R=0;R<M.length;++R){const I=M[R];let $=0;for($=0;$<D.length;++$){const V=D[$];if(V[1]>V[0]&&I[1]>=V[0]&&I[0]<=V[1]&&I[2]>=1&&V[2]>=1){D[$]=[Math.min(I[0],V[0]),Math.max(I[1],V[1]),1];break}}$===D.length&&D.push(I)}}}}else if($t(G)){const O=Os(A,v);p.alphas[O]=0}}}for(let g=0;g<w.length;++g){const x=w[g],_=qe(x,"collision");if(E(x.removed)||_!==$e.ISGHOST)continue;const G=x.id??"",y=pA(x),v=jY(c,h,G,g);v.x=x.x??0,v.y=x.y??0,v.char=y.char,v.color=y.color,v.bg=y.bg,v.stat=_,d.sprites.push(v)}for(let g=0;g<w.length;++g){const x=w[g];xe(x.tickertext)&&Ne(x.tickertime)&&x.tickertext.length&&n.push(`${LY(x)}${x.tickertext}`)}if(r===De.MID){if(o.push(Ad(c,a++,"text/mood",m?"dark":"bright")),xe(A.palettepage)){const x=yA(Ye.PALETTE,A.palettepage),_=Ar(x);E(_?.bits)&&o.push(Ad(c,a++,"image/palette",Array.from(_.bits)))}if(xe(A.charsetpage)){const x=yA(Ye.CHARSET,A.charsetpage),_=Ar(x);E(_?.bits)&&o.push(Ad(c,a++,"image/charset",Array.from(_.bits)))}const g=Object.keys(A.objects).filter($t);o.push(Ad(c,a++,"text/players",g.join(",")))}return o}function jY(t,e,A,n){const r=`sprites:${t}:${e}:${A}`,s=`sprite:${t}:${e}:${n}`;return E(rd[s])||(rd[s]=HR(t,e,A)),rd[s].id=r,rd[s]}function vie(t,e){const A=`sprites:${t}:${e}`;return E(hn[A])||(hn[A]=LR(t,e)),hn[A]}function Die(t,e,A,n,r=0){const s=`dither:${t}:${e}`;return E(hn[s])||(hn[s]=UR(t,e,A,n,r)),hn[s]}function Ad(t,e,A,n){const r=`media:${t}:${e}`;E(hn[r])||(hn[r]=FR(t,e,A,n));const s=hn[r];return s.mime=A,s.media=n,s}function Bie(t,e){const A=`control:${t}:${e}`;return E(hn[A])||(hn[A]=VR(t,e)),hn[A]}function zY(t,e){const A=[],n=(t.x+.5)*Hr,r=(t.y+.5)*hs,s=e.x*Hr,i=e.y*hs,o=s-n,a=i-r;KA.x=o-zs,KA.y=a-zs,A.push(KA.angle()),KA.x=o+Hr+zs,KA.y=a-zs,A.push(KA.angle()),KA.x=o-zs,KA.y=a+hs+zs,A.push(KA.angle()),KA.x=o+Hr+zs,KA.y=a+hs+zs,A.push(KA.angle());const c=A.map(h=>Math.round(Y1(h))),l=Math.min(...c),u=Math.max(...c);if(u-l>180){const h=c.filter(w=>w<180),d=c.filter(w=>w>180),m=Math.max(...h);return[Math.min(...d),m]}return[l,u]}function nd(t,e,A,n,r,s,i,o,a){const c={x:o,y:a},l=Os(t,c);if(l===-1)return;KA.x=o-r.x,KA.y=Math.round((a-r.y)*1.333);const u=KA.length();if(u>s)return;const f=Math.round(Y1(KA.angle()));let h=0;for(let g=0;g<A.length;++g){const[x,_,G]=A[g];x>_?(f>=x||f<=_)&&(h=Math.max(h,G)):f>=x&&f<=_&&(h=Math.max(h,G))}const d=s*.5;e[l]=Math.min(e[l],h+(u<d?0:(u-d)*i)),e[l]=gr(e[l],0,1);const m=uA(t,t.lookup?.[l]??"");if(E(m)){const g=[...zY(r,c),.45];n.push(g)}const p=t.terrain[l],w=Zn(p),b=p?.collision??w?.collision;if(so($e.ISBULLET,b)){const g=[...zY(r,c),1];n.push(g)}}function HY(t,e){const{graphics:A,camera:n,facing:r}=on(t),s=A??e.graphics??"",i=n??e.camera??"",o=r??e.facing??"";return{graphics:s,camera:i,facing:o}}function Ub(t){const e=pA(t),A=`${Xe[e.color]}`,n=`${Xe[e.bg>Xe.WHITE?Xe.BLACK:e.bg]}`;return`$${A}$ON${n}$${e.char}`}function LY(t){if(!E(t?.id))return"";let e=pA(t).name;if(t.kind==="player"){const{user:n}=on(t.id);e=xe(n)?n:"player"}return`${Ub(t)}$ONCLEAR$CYAN ${e}:$WHITE `}function kie(t,e){const A=[],n=[],r=[],s=[];if(!E(e))return{id:"",board:"",exiteast:"",exitwest:"",exitnorth:"",exitsouth:"",over:A,under:n,layers:r,tickers:s};const i=[`${e.id}`],o=KU(e);o?.id&&i.push(o.id);const a=JU(e);a?.id&&i.push(a.id),n.push(...Lb(t,0,a,s,De.UNDER));const c=E(o);r.push(...Lb(t,n.length,e,s,De.MID,c)),A.push(...Lb(t,n.length+r.length,o,s,De.OVER,c));const l=$R(r);for(let u=0;u<l.length;++u){const f=l[u];f.type===H1.MEDIA&&(i.push(f.id),xe(f.media)&&i.push(f.media))}return{id:i.join("|"),board:e.id,exiteast:ct(e.exiteast??"")?.id??"",exitwest:ct(e.exitwest??"")?.id??"",exitnorth:ct(e.exitnorth??"")?.id??"",exitsouth:ct(e.exitsouth??"")?.id??"",over:A,under:n,layers:r,tickers:s}}const KA=new Rc,hn={},rd={};function Eie(t,e,A,n,r=0){const s=`tiles:${t}:${e}`;return E(hn[s])||(hn[s]=zR(t,e,A,n,r)),hn[s]}function pa(t,e=!1){const[A,n]=ce(t,0,[K.ANY]);if(e&&Cn(A)){const[r,s,i]=ce(t,0,[K.DIR,K.NAME]);return s.startsWith(":")?{targetdir:r,label:s.substring(1).trim(),args:t.slice(i)}:{targetdir:r,label:s,args:t.slice(i)}}else{const[r,s,i]=ce(t,0,[K.NAME,K.ANY]);return xe(s)&&s.startsWith(":")?{targetname:r,label:s.substring(1).trim(),args:t.slice(i)}:{targetname:"self",label:r,args:t.slice(n)}}}let Ts="",Tr="";function Nie(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.exec(String(t).toLowerCase())}function vA(t){return t===gA()}function ga(){px(Ae,gA())}const Tie=qs().command("shortsend",(t,e)=>{const A=pa(e);return A.targetname==="self"?Oa(Ae,k.elementfocus,void 0,"text",`cli:${A.label}`,A.args.join(" ")):_a(t,k.element,A),0}).command("send",(t,e)=>{const A=pa(e,!0);return _a(t,k.element,A),0}).command("stat",(t,e)=>(tP(Ae,k.elementfocus,e.map(Ct).join(" ")),0)).command("text",(t,e)=>{const A=e.map(Ct).join(" ");if(E(k.element)&&k.elementisplayer){k.element.tickertext=A,k.element.tickertime=k.timestamp,Xb("",k.element,A);const{user:n}=on(k.elementid),r=xe(n)?n:"player";Oa(Ae,k.elementid,void 0,"text",`chat:message:${k.board?.id??""}`,`${r}:${A}`)}return 0}).command("hyperlink",(t,e)=>{const[A,...n]=e,{user:r}=on(k.elementid),s=xe(r)?r:"player",i=pA(k.element),o=`$${Xe[i.color]}$ON${Xe[i.bg]}$${i.char}$ONCLEAR $WHITE${s}$BLUE `,a=t.template(Ct(A).split(" "));return _A(Ae,k.elementid,`!${t.template(n)};${o}${a}`),0}).command("bookrename",()=>{if(!vA(k.elementfocus))return 0;const t=CA(He.MAIN);return IU(t),E(t)&&si(Ae,k.elementfocus,"main",`${t?.name??"empty"} $GREEN${t?.id??""}`),0}).command("booktrash",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.NAME]),n=wt(He.MAIN),r=bs(A);return E(r)&&(n===r&&Y8(He.MAIN,""),tF(A),_A(Ae,k.elementfocus,`trashed [book] ${r.name}`),ga(),t.command("pages")),0}).command("boardopen",(t,e)=>{const[A]=ce(e,0,[K.NAME]),n=ct(A);return E(n)&&ni(k.book,k.elementfocus,n.id,{x:tn(0,Ie-1),y:tn(0,rt-1)}),0}).command("pageopen",(t,e)=>{const[A,n]=ce(e,0,[K.NAME,K.MAYBE_NAME]);let r,s;const i=HA();for(let o=0;o<i.length&&(s=i[o],r=Vs(s,A),!E(r));++o);if(E(r)&&E(s)){const o=gt(r),a=[r.id,n];yp(nu(s.id,a),r.code);const c=Jr(r),l=`${td(r)}$ONCLEAR$GREEN ${o} - ${s.name}`;fx(Ae,k.elementfocus,s.id,a,c,l)}else xt(Ae,"pageopen",`page ${A} not found`,k.elementfocus);return 0}).command("pagetrash",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.NAME]),n=CA(He.MAIN),r=N8(n,A);if(E(A)){const s=gt(r),i=Jr(r);_A(Ae,k.elementfocus,`trashed [${i}] ${s}`),ga(),t.command("pages")}return 0}).command("help",()=>(dx(Ae,k.elementfocus),0)).command("books",()=>{if(!vA(k.elementfocus))return 0;co(Ae,k.elementfocus,"books");const t=wt(He.MAIN);si(Ae,k.elementfocus,"main",`${t?.name??"empty"} $GREEN${t?.id??""}`);const e=wt(He.MAIN);si(Ae,k.elementfocus,"content",`${e?.name??"empty"} ${e?.id??""}`),Yb(Ae,k.elementfocus,7);const A=HA();return A.length?A.forEach(n=>{bt(Ae,k.elementfocus,`!bookopen ${n.id};${n.name}`)}):bA(Ae,k.elementfocus,"no books found"),bt(Ae,k.elementfocus,"!bookcreate;create a new book"),0}).command("pages",()=>{const t=CA(He.MAIN);if(!E(t))return 0;co(Ae,k.elementfocus,"pages"),si(Ae,k.elementfocus,"main",`${t.name} $GREEN${t.id}`),t.pages.length?Fi(t).forEach(n=>{const r=gt(n),s=Jr(n),i=td(n);bt(Ae,k.elementfocus,`!pageopen ${n.id};$blue[${s}] ${i}$white${r}`)}):(bt(Ae,k.elementfocus,""),Sb(Vf("help:nopages"),A=>wse(k.elementfocus,A)));const e=HA();for(let A=0;A<e.length;++A){const n=e[A];n.id!==t.id&&(si(Ae,k.elementfocus,"content",`${n.name} $GREEN${n.id}`),Fi(n).forEach(s=>{const i=gt(s),o=Jr(s);bt(Ae,k.elementfocus,`!pageopen ${s.id};$blue[${o}]$white ${i}`)}))}return 0}).command("boards",()=>{co(Ae,k.elementfocus,"boards");const t=CA(He.MAIN);if(E(t)){si(Ae,k.elementfocus,"main",`${t.name} $GREEN${t.id}`);const A=Fi(t);A.filter(n=>sn(n)===Ye.BOARD).forEach(n=>{const r=gt(n);bt(Ae,k.elementfocus,`!boardopen ${n.id};$blue[#goto]$white ${r}`)}),A.length===0&&(bt(Ae,k.elementfocus,""),bA(Ae,k.elementfocus,"$white no boards found"),bA(Ae,k.elementfocus,"$white use @ to create a board"),bA(Ae,k.elementfocus,"$white @board name of board"))}const e=HA();for(let A=0;A<e.length;++A){const n=e[A];n.id!==t.id&&(si(Ae,k.elementfocus,"content",`${n.name} $GREEN${n.id}`),Fi(n).filter(s=>sn(s)===Ye.BOARD).forEach(s=>{const i=gt(s);bt(Ae,k.elementfocus,`!boardopen ${s.id};$blue[#goto]$white ${i}`)}))}return 0}).command("trash",()=>{if(!vA(k.elementfocus))return 0;co(Ae,k.elementfocus,"$REDTRASH"),bA(Ae,k.elementfocus,"books");const t=HA();t.length&&(t.forEach(A=>{bt(Ae,k.elementfocus,`!booktrash ${A.id};$REDTRASH ${A.name}`)}),bt(Ae,k.elementfocus,""));const e=wt(He.MAIN);return E(e)&&(bA(Ae,k.elementfocus,`pages in open ${e.name} book`),e.pages.forEach(A=>{const n=gt(A),r=Jr(A),s=td(A);bt(Ae,k.elementfocus,`!pagetrash ${A.id};$REDTRASH [${r}] ${s}${n}`)}),bt(Ae,k.elementfocus,"")),0}).command("dev",()=>(vA(k.elementfocus)&&(ga(),qC(Ae,k.elementfocus)),0)).command("share",()=>(vA(k.elementfocus)&&(ga(),EC(Ae,k.elementfocus)),0)).command("save",()=>(vA(k.elementfocus)&&ga(),0)).command("fork",(t,e)=>{if(vA(k.elementfocus)){const[A]=ce(e,0,[K.MAYBE_NAME]);rP(Ae,k.elementfocus,A??"")}return 0}).command("nuke",()=>(vA(k.elementfocus)&&NC(Ae,k.elementfocus),0)).command("endgame",()=>(Ta(Ae,k.elementfocus,!1),0)).command("restart",()=>(vA(k.elementfocus)&&(nP(Ae,k.elementfocus),ga()),0)).command("export",()=>{if(!vA(k.elementfocus))return 0;$f(Ae,k.elementfocus,"E X P O R T"),co(Ae,k.elementfocus,"books");const t=HA();return t.length&&t.forEach(e=>bt(Ae,k.elementfocus,`!bookexport ${e.id};${e.name}`)),0}).command("bookexport",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.NAME]),n=bs(A);return E(n)&&($f(Ae,k.elementfocus,"E X P O R T"),co(Ae,k.elementfocus,"pages"),setTimeout(()=>{if(n.pages.length){const r=Fi(n);bt(Ae,k.elementfocus,`!bookallexport ${A};$blue[all] $whiteexport book`),r.forEach(s=>{const i=gt(s),o=Jr(s),a=td(s);bt(Ae,k.elementfocus,`!pageexport ${A}:${s.id};$blue[${o}] ${a}$white${i}`)})}},1e3)),0}).command("bookallexport",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.NAME]),n=bs(A);return E(n)&&cx(Ae,k.elementfocus,FA(n),`${n.name}.book.json`),0}).command("pageexport",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.NAME]),{target:n,path:r}=Un(A),s=bs(n),i=Vs(s,r);return E(i)&&cx(Ae,k.elementfocus,FA(i),`${gt(i)}.${Jr(i)}.json`),0}).command("itchiopublish",()=>{if(!vA(k.elementfocus))return 0;const t=wt(He.MAIN);return gx(Ae,k.elementfocus,"itchio",t?.name??""),0}).command("gadget",()=>(ux(Ae,k.elementfocus,void 0),0)).command("findany",(t,e)=>{const[A]=ce(e,0,[K.ANY]);if(st(A)){const n=A.filter(Rs);hx(Ae,k.elementfocus,n)}else hx(Ae,k.elementfocus,[]);return 0}).command("zztsearch",(t,e)=>{const[A,n]=ce(e,0,[K.NAME,K.MAYBE_NAME]),r=E(n)?A:"title",s=E(n)?n:A;return $C(Ae,k.elementfocus,r,s),0}).command("zztrandom",()=>(VC(Ae,k.elementfocus),0)).command("admin",()=>(FC(Ae,k.elementfocus),0)).command("joincode",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.MAYBE_NAME]),n=kt(k.elementfocus);return E(n)?wC(Ae,k.elementfocus,!!A):xt(Ae,k.elementfocus,"multiplayer","need to have an active player on a board in order to start multiplayer"),0}).command("jointab",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.MAYBE_NAME]);return bC(Ae,k.elementfocus,!!A),0}).command("chat",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.MAYBE_NAME]);return A?mC(Ae,k.elementfocus,A):pC(Ae,k.elementfocus),0}).command("broadcast",(t,e)=>{if(!vA(k.elementfocus))return 0;const[A]=ce(e,0,[K.MAYBE_NAME]);return A?fC(Ae,k.elementfocus,A):dC(Ae,k.elementfocus),0}).command("agent",(t,e)=>{const[A,n]=ce(e,0,[K.MAYBE_NAME]);switch(je(A)){case"start":JC(Ae,k.elementfocus);break;case"stop":{const[r]=ce(e,1,[K.NAME]);E(r)?XC(Ae,k.elementfocus,r):xt(Ae,k.elementfocus,"agent","#agent stop <id>");break}case"":case"list":Kd(Ae,k.elementfocus);break;default:{if(xe(A)){let r=n;const s=[];for(;r<e.length;){const[i,o]=ce(e,r,[K.ANY]);s.push(i),r=o}eP(Ae,k.elementfocus,A,s.map(Ct).join(" "))}else xt(Ae,k.elementfocus,"agent","#agent <id> <prompt>");break}}return 0}).command("screenshot",()=>(kC(Ae,k.elementfocus),0)).command("bbs",(t,e)=>{const[A,n]=ce(e,0,[K.ANY]);switch(je(A)){default:if(Tr)Ts?bA(Ae,k.elementfocus,"you are already logged in, use #bbs restart to login again"):zt(Ae,k.elementfocus,async()=>{bA(Ae,k.elementfocus,`confirming login with $green${A}`),(await xie(Tr,A)).success&&(Ts=`${A}`,bA(Ae,k.elementfocus,`$green${Tr} has been logged in`))});else{const[r,s]=ce(e,0,[K.NAME,K.NAME]);Nie(r)&&s?zt(Ae,k.elementfocus,async()=>{bA(Ae,k.elementfocus,`starting login with $green${r} ${s}`),(await _ie(r,s)).success&&(Tr=r,bA(Ae,k.elementfocus,"check your email for #bbs <code>"))}):bA(Ae,k.elementfocus,"please login with $green#bbs <email> <tag>")}break;case"restart":Tr="",Ts="",bA(Ae,k.elementfocus,"bbs restarted"),bA(Ae,k.elementfocus,"please login with $green#bbs <email> <tag>");break;case"list":!Tr||!Ts?bA(Ae,k.elementfocus,"please login with $green#bbs <email> <tag>$blue first"):zt(Ae,k.elementfocus,async()=>{bA(Ae,k.elementfocus,"listing files");const r=await yie(Tr,Ts);if(r.success)for(let s=0;s<r.list.length;++s){const{metadata:i}=r.list[s];gse(Ae,k.elementfocus,i.url,i.filename),bA(Ae,k.elementfocus,i.tags)}});break;case"pub":case"publish":if(!Tr||!Ts)bA(Ae,k.elementfocus,"please login with $green#bbs <email> <tag>$blue first");else{const[r,s]=ce(e,n,[K.NAME]),i=[];for(let o=s;o<e.length;){const[a,c]=ce(e,o,[K.NAME]);o=c,i.push(a)}gx(Ae,k.elementfocus,"bbs",Tr,Ts,r,...i)}break;case"del":case"delete":if(!Tr||!Ts)bA(Ae,k.elementfocus,"please login with $green#bbs <email> <tag>$blue first");else{const[r]=ce(e,n,[K.NAME]);zt(Ae,k.elementfocus,async()=>{bA(Ae,k.elementfocus,`deleting ${r}`),(await Gie(Tr,Ts,r)).success&&bA(Ae,k.elementfocus,`$red${r} has been deleted`)})}break}return 0}),Oie=new Set(["inputmove","inputalt","inputctrl","inputshift","inputok","inputcancel","inputmenu"]),UY=new Set(["char","color","bg","displaychar","displaycolor","displaybg","item","group","party","player","pushable","collision","breakable","p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","cycle","stepx","stepy","shootx","shooty","light","lightdir","arg"]),Yie=["NORTH","SOUTH","WEST","EAST"];function Sie(t,e,A){const n=on(t);if(Ne(n.inputcurrent)||(n.inputcurrent=0),st(n.inputqueue)||(n.inputqueue=[]),n.inputcurrent>0)return n;const[r]=n.inputqueue,[s=Lt.NONE,i=0]=r??[Lt.NONE,0];switch(n.inputmove=[],n.inputok=0,n.inputcancel=0,n.inputmenu=0,n.inputalt=i&qR?1:0,n.inputctrl=i&WR?1:0,n.inputshift=i&QR?1:0,s){case Lt.MOVE_UP:case Lt.MOVE_DOWN:case Lt.MOVE_LEFT:case Lt.MOVE_RIGHT:{const o=Yie[s-Lt.MOVE_UP];if(xe(e)&&e==="fpv"&&Ne(A))switch(Math.round(A/90)){default:case 0:n.inputmove=[o];break;case 1:switch(o){default:case"NORTH":n.inputmove=["EAST"];break;case"EAST":n.inputmove=["SOUTH"];break;case"SOUTH":n.inputmove=["WEST"];break;case"WEST":n.inputmove=["NORTH"];break}break;case 2:switch(o){default:case"NORTH":n.inputmove=["SOUTH"];break;case"EAST":n.inputmove=["WEST"];break;case"SOUTH":n.inputmove=["NORTH"];break;case"WEST":n.inputmove=["EAST"];break}break;case 3:switch(o){default:case"NORTH":n.inputmove=["WEST"];break;case"EAST":n.inputmove=["NORTH"];break;case"SOUTH":n.inputmove=["EAST"];break;case"WEST":n.inputmove=["SOUTH"];break}break}else n.inputmove=[o];break}case Lt.OK_BUTTON:n.inputok=1;break;case Lt.CANCEL_BUTTON:n.inputcancel=1;break;case Lt.MENU_BUTTON:n.inputmenu=1;break}return n.inputcurrent=s,n.inputqueue=n.inputqueue.filter(o=>{const[a]=o;return a!==Lt.NONE&&a!==s}),n}function Cie(t){const e=Mb[t];if(E(e))return e;const A=yb[t];if(E(A))return A;const n=Lc[t];if(E(n))return n;const r=Hp[t];if(E(r))return r}const Pie=qs({get(t,e){const A=Cie(e);if(E(A))return[!0,A];if(k.elementisplayer&&Oie.has(e)){const a=t.get("graphics"),c=t.get("facing"),l=Sie(k.elementid,a,c)[e];return[E(l),l]}const n=Pl(k.board,{x:k.element?.x??-1,y:k.element?.y??-1},k.elementfocus),r=n?.id??k.elementfocus??gA(),s=k.element?.sender,i=A_(k.board,xe(s)?s:"");switch(e){case"camera":case"graphics":case"facing":{const a=on(r)[e];return[!0,E(a)?a:k.board?.[e]??0]}case"isdark":return[!0,k.board?.isdark?1:0];case"startx":return[!0,k.board?.startx??0];case"starty":return[!0,k.board?.starty??0];case"over":return[!0,k.board?.over??""];case"under":return[!0,k.board?.under??""];case"palette":return[!0,k.board?.palette??""];case"charset":return[!0,k.board?.charset??""];case"exitnorth":return[!0,k.board?.exitnorth??""];case"exitsouth":return[!0,k.board?.exitsouth??""];case"exitwest":return[!0,k.board?.exitwest??""];case"exiteast":return[!0,k.board?.exiteast??""];case"timelimit":return[!0,k.board?.timelimit??0];case"restartonzap":return[!0,k.board?.restartonzap??0];case"maxplayershots":return[!0,k.board?.maxplayershots??0];case"b1":return[!0,k.board?.b1??0];case"b2":return[!0,k.board?.b2??0];case"b3":return[!0,k.board?.b3??0];case"b4":return[!0,k.board?.b4??0];case"b5":return[!0,k.board?.b5??0];case"b6":return[!0,k.board?.b6??0];case"b7":return[!0,k.board?.b7??0];case"b8":return[!0,k.board?.b8??0];case"b9":return[!0,k.board?.b9??0];case"b10":return[!0,k.board?.b10??0];case"currenttick":return[!0,k.timestamp];case"boardid":return[!0,k.board?.id??""];case"playerid":return[!0,r];case"playerx":return[!0,n?.x??-1];case"playery":return[!0,n?.y??-1];case"thisid":return[!0,k.element?.id??""];case"thisx":return[!0,k.element?.x??-1];case"thisy":return[!0,k.element?.y??-1];case"senderid":return[!0,i?.id??""];case"senderx":return[!0,i?.x??-1];case"sendery":return[!0,i?.y??-1];default:{if(UY.has(e))return[!0,qe(k.element,e)??0];break}}const o=on(r)[e];return[E(o),o]},set(t,e,A){const n={x:k.element?.x??-1,y:k.element?.y??-1},s=Pl(k.board,n,k.elementfocus)?.id??k.elementfocus;switch(e){case"camera":case"graphics":break;case"facing":A=BR.euclideanModulo(A,360);break;case"isdark":if(E(k.board))return k.board.isdark=A?1:0,[!0,k.board.isdark];break;case"startx":if(E(k.board))return k.board.startx=Cs(A,0),[!0,k.board.startx];break;case"starty":if(E(k.board))return k.board.starty=Cs(A,0),[!0,k.board.starty];break;case"over":if(E(k.board)){const o=Ct(A);return k.board.over!==o&&(k.board.overboard=void 0),k.board.over=o,[!0,o]}break;case"under":if(E(k.board)){const o=Ct(A);return k.board.under!==o&&(k.board.underboard=void 0),k.board.under=o,[!0,o]}break;case"palette":if(E(k.board)){const o=Ct(A);return k.board.palette!==o&&(k.board.palettepage=void 0),k.board.palette=o,[!0,o]}break;case"charset":if(E(k.board)){const o=Ct(A);return k.board.charset!==o&&(k.board.charsetpage=void 0),k.board.charset=o,[!0,o]}break;case"exitnorth":if(E(k.board))return[!0,k.board.exitnorth=Ct(A)];break;case"exitsouth":if(E(k.board))return[!0,k.board.exitsouth=Ct(A)];break;case"exitwest":if(E(k.board))return[!0,k.board.exitwest=Ct(A)];break;case"exiteast":if(E(k.board))return[!0,k.board.exiteast=Ct(A)];break;case"timelimit":if(E(k.board))return[!0,k.board.timelimit=Cs(A,0)];break;case"restartonzap":if(E(k.board))return[!0,k.board.restartonzap=A?1:0];break;case"maxplayershots":if(E(k.board))return[!0,k.board.maxplayershots=Cs(A,0)];break;case"b1":if(E(k.board))return[!0,k.board.b1=A];break;case"b2":if(E(k.board))return[!0,k.board.b2=A];break;case"b3":if(E(k.board))return[!0,k.board.b3=A];break;case"b4":if(E(k.board))return[!0,k.board.b4=A];break;case"b5":if(E(k.board))return[!0,k.board.b5=A];break;case"b6":if(E(k.board))return[!0,k.board.b6=A];break;case"b7":if(E(k.board))return[!0,k.board.b7=A];break;case"b8":if(E(k.board))return[!0,k.board.b8=A];break;case"b9":if(E(k.board))return[!0,k.board.b9=A];break;case"b10":if(E(k.board))return[!0,k.board.b10=A];break;case"currenttick":case"boardid":return[!0,A];case"playerid":case"playerx":case"playery":return[!0,A];case"thisid":case"thisx":case"thisy":return[!0,A];case"senderid":return E(k.element)&&(k.element.sender=A),[!0,A];case"senderx":case"sendery":return[!0,A];default:{if(UY.has(e)){if(E(k.element))switch(e){case"color":if(BA(A)){const{color:o,bg:a}=ko(A);E(o)&&(k.element.color=o),E(a)&&(k.element.bg=a)}else Ne(A)&&(k.element.color=A);break;case"bg":if(BA(A)){const{color:o,bg:a}=ko(A);k.element.bg=o??a??Xe.PURPLE}else Ne(A)&&(k.element.bg=A);break;case"displaycolor":if(BA(A)){const{color:o,bg:a}=ko(A);E(o)&&(k.element.displaycolor=o),E(a)&&(k.element.displaybg=a)}else Ne(A)&&(k.element.displaycolor=A);break;case"displaybg":{if(BA(A)){const{color:o,bg:a}=ko(A);k.element.displaybg=o??a??Xe.PURPLE}else Ne(A)&&(k.element.displaybg=A);break}default:k.element[e]=A;break}return[!0,A]}break}}const i=on(s);return E(i)?(i[e]=A,e==="user"&&LC(Ae,s,e,A),[!0,A]):[!1,A]},everytick(t){if(k.elementisplayer){const e=t.get("health");Ne(e)&&e<=0&&(t.endofprogram(),Ta(Ae,k.elementid,!0))}!k.element?.removed&&E(k.element?.x)&&E(k.element.y)&&E(k.element.stepx)&&E(k.element.stepy)&&(k.element.stepx||k.element.stepy)&&Hn(k.book,k.board,k.element,{x:k.element.x+k.element.stepx,y:k.element.y+k.element.stepy})}}).command("clear",(t,e)=>{for(let A=0;A<e.length;++A)t.set(Ct(e[A]),0);return 0}).command("set",(t,e)=>{const[A,n]=ce(e,0,[K.NAME,K.ANY]);return t.set(A,n??1),0}).command("become",(t,e)=>{const[A]=ce(e,0,[K.KIND]),n=pA(k.element),[r,s]=A,i=[...js(n.color,n.bg),...s??[]],o=[r,i];if(Ch(k.board,k.element),UA(k.board,k.element,k.timestamp)){const a={x:k.element?.x??0,y:k.element?.y??0};In(k.board,o,a)}return t.endofprogram(),0}).command("bind",(t,e)=>{const[A]=ce(e,0,[K.NAME]),n=ha(k.board,A);return E(k.element)&&n.length>0&&(k.element.code=qn(...n).code??"",Zl(k.elementid)),0}).command("char",(t,e)=>{const[A]=ce(e,0,[K.ANY]);if(Cn(A)){const[n,r]=ce(e,0,[K.DIR,K.NUMBER]);if(n.targets.length){for(let i=0;i<n.targets.length;++i){const o=n.targets[i],a=nt(k.board,o);E(a)&&(a.char=r)}return 0}const s=nt(k.board,n.destpt);E(s)&&(s.char=r)}else E(k.element)&&Ne(A)&&(k.element.char=A);return 0}).command("color",(t,e)=>{const[A]=ce(e,0,[K.ANY]);if(Cn(A)){const[n,r]=ce(e,0,[K.DIR,K.COLOR]);if(n.targets.length){for(let i=0;i<n.targets.length;++i){const o=n.targets[i],a=nt(k.board,o);E(a)&&Yi(a,r??Xe.PURPLE)}return 0}const s=nt(k.board,n.destpt);E(s)&&Yi(s,r??Xe.PURPLE)}else{const[n]=ce(e,0,[K.COLOR]);E(k.element)&&E(n)&&Yi(k.element,n)}return 0}).command("go",(t,e)=>{if(E(k.element)){const[A]=ce(e,0,[K.DIR]);if(Hn(k.book,k.board,k.element,A.destpt),t.yield(),k.element.x===A.destpt.x&&k.element.y===A.destpt.y)return 0}return 1}).command("walk",(t,e)=>{if(!E(k.element))return 0;const[A]=ce(e,0,[K.DIR]),n=k.element.x??0,r=k.element.y??0;return k.element.stepx=A.destpt.x-n,k.element.stepy=A.destpt.y-r,0}).command("idle",t=>(t.yield(),0)).command("end",(t,e)=>{const[A]=ce(e,0,[K.ANY]);return E(A)&&t.set("arg",A),t.endofprogram(),0}).command("lock",t=>(t.lock(t.id()),0)).command("restore",(t,e)=>(t.restore(Ct(e[0])),0)).command("unlock",t=>(t.unlock(),0)).command("zap",(t,e)=>(t.zap(Ct(e[0])),0)).command("cycle",(t,e)=>{if(E(k.element)){const[A]=ce(e,0,[K.NUMBER]);k.element.cycle=gr(Math.round(A),1,255)}return 0}).command("die",t=>{if(UA(k.board,k.element,k.timestamp),qe(k.element,"item")){const e={x:k.element?.x??-1,y:k.element?.y??-1},A=Pl(k.board,e,k.elementfocus);E(A?.x)&&E(A.y)&&Math.abs(A.x-e.x)+Math.abs(A.y-e.y)<2&&(A.x=e.x,A.y=e.y)}else t.endofprogram();return 0}).command("run",(t,e)=>{const[A]=ce(e,0,[K.NAME]);return Zf(A),0}).command("runwith",(t,e)=>{const[A,n]=ce(e,0,[K.ANY,K.NAME]);return t.set("arg",A),Zf(n),0}).command("array",(t,e)=>{const A=[],[n,r]=ce(e,0,[K.NAME]);for(let s=r;s<e.length;){const[i,o]=ce(e,s,[K.ANY]);A.push(i),s=o}return t.set(n,A),0}).command("read",(t,e)=>{const[A,n,r]=ce(e,0,[K.ANY,K.NUMBER_OR_STRING,K.NAME]);if(E(A)){const s=A[n];t.set(r,s)}return 0}).command("load",(t,e)=>{const[A,n,r]=ce(e,0,[K.DIR,K.NAME]),s=nt(k.board,A.destpt);if(E(s)&&Mt(s))if(je(n)==="append"){const[i]=ce(e,r,[K.NAME]),o=yA(Ye.OBJECT,i);E(o)&&(s.code+=o.code,Zl(s.id??""))}else{const i=yA(Ye.OBJECT,n);E(i)&&(s.code=i.code,Zl(s.id??""))}return 0}).command("toast",(t,e)=>{const A=e.map(Ct).join("");return is(Ae,k.elementfocus,A),0}).command("ticker",(t,e)=>{const A=e.map(Ct).join("");return E(k.element)&&(k.element.tickertext=A,k.element.tickertime=k.timestamp,Xb(k.board?.id,k.element,A)),0});function FY(t,e){if(!E(t))return;const A=je(e),n=A.endsWith("le");switch(A){case"float32":case"float32le":{const r=t.dataview.getFloat32(t.cursor,n);return t.cursor+=4,r}case"float64":case"float64le":{const r=t.dataview.getFloat64(t.cursor,n);return t.cursor+=8,r}case"int8":case"int8le":{const r=t.dataview.getInt8(t.cursor);return t.cursor+=1,r}case"int16":case"int16le":{const r=t.dataview.getInt16(t.cursor,n);return t.cursor+=2,r}case"int32":case"int32le":{const r=t.dataview.getInt32(t.cursor,n);return t.cursor+=4,r}case"int64":case"int64le":{const r=t.dataview.getBigInt64(t.cursor,n);return t.cursor+=8,r}case"uint8":case"uint8le":{const r=t.dataview.getUint8(t.cursor);return t.cursor+=1,r}case"uint16":case"uint16le":{const r=t.dataview.getUint16(t.cursor,n);return t.cursor+=2,r}case"uint32":case"uint32le":{const r=t.dataview.getUint32(t.cursor,n);return t.cursor+=4,r}case"uint64":case"uint64le":{const r=t.dataview.getBigUint64(t.cursor,n);return t.cursor+=8,r}}}const Zie=(t,e)=>{const A=ua(t.id());if(!E(A))return 0;const[n,r]=ce(e,0,[K.NAME]),s=je(n);switch(s){case"seek":{const[i]=ce(e,r,[K.NUMBER]);A.cursor=i;break}case"float32":case"float32le":case"float64":case"float64le":case"int8":case"int8le":case"int16":case"int16le":case"int32":case"int32le":case"int64":case"int64le":case"uint8":case"uint8le":case"uint16":case"uint16le":case"uint32":case"uint32le":case"uint64":case"uint64le":{const[i]=ce(e,r,[K.NAME]);t.set(i,FY(A,s));break}case"text":{const[i,o]=ce(e,r,[K.NAME,K.NAME]),a=FY(A,i);if(Ne(a)&&xe(o)){const c=new Uint8Array(A.bytes.buffer,A.cursor,a),u=new TextDecoder("utf-8").decode(c);t.set(o,u),A.cursor+=a}break}}return 0},wa=t=>t!==null&&Object.prototype.toString.call(t)==="[object Object]",sd=(t,e)=>{if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let A=0;A<t.length;A+=1)if(!sd(t[A],e[A]))return!1;return!0}if(wa(t)&&wa(e)){const A=Object.entries(t),n=new Set(Object.keys(e));if(A.length!==n.size)return!1;for(const[r,s]of A){if(!sd(s,e[r]))return!1;n.delete(r)}return n.size===0}return!1},id=t=>{if(t===""||t===!1||t===null||t===void 0||Array.isArray(t)&&t.length===0)return!0;if(wa(t)){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}return!1},Iie=t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_",$Y=t=>t>="0"&&t<="9"||t==="-",Rie=t=>t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="_";var ae;(function(t){t.TOK_EOF="EOF",t.TOK_UNQUOTEDIDENTIFIER="UnquotedIdentifier",t.TOK_QUOTEDIDENTIFIER="QuotedIdentifier",t.TOK_RBRACKET="Rbracket",t.TOK_RPAREN="Rparen",t.TOK_COMMA="Comma",t.TOK_COLON="Colon",t.TOK_RBRACE="Rbrace",t.TOK_NUMBER="Number",t.TOK_CURRENT="Current",t.TOK_ROOT="Root",t.TOK_EXPREF="Expref",t.TOK_PIPE="Pipe",t.TOK_OR="Or",t.TOK_AND="And",t.TOK_EQ="EQ",t.TOK_GT="GT",t.TOK_LT="LT",t.TOK_GTE="GTE",t.TOK_LTE="LTE",t.TOK_NE="NE",t.TOK_FLATTEN="Flatten",t.TOK_STAR="Star",t.TOK_FILTER="Filter",t.TOK_DOT="Dot",t.TOK_NOT="Not",t.TOK_LBRACE="Lbrace",t.TOK_LBRACKET="Lbracket",t.TOK_LPAREN="Lparen",t.TOK_LITERAL="Literal"})(ae||(ae={}));const VY={"(":ae.TOK_LPAREN,")":ae.TOK_RPAREN,"*":ae.TOK_STAR,",":ae.TOK_COMMA,".":ae.TOK_DOT,":":ae.TOK_COLON,"@":ae.TOK_CURRENT,$:ae.TOK_ROOT,"]":ae.TOK_RBRACKET,"{":ae.TOK_LBRACE,"}":ae.TOK_RBRACE},jie={"!":!0,"<":!0,"=":!0,">":!0},zie={"	":!0,"\n":!0,"\r":!0," ":!0};class Hie{constructor(){this._current=0}tokenize(e){const A=[];this._current=0;let n,r,s;for(;this._current<e.length;)if(Iie(e[this._current]))n=this._current,r=this.consumeUnquotedIdentifier(e),A.push({start:n,type:ae.TOK_UNQUOTEDIDENTIFIER,value:r});else if(VY[e[this._current]]!==void 0)A.push({start:this._current,type:VY[e[this._current]],value:e[this._current]}),this._current+=1;else if($Y(e[this._current]))s=this.consumeNumber(e),A.push(s);else if(e[this._current]==="[")s=this.consumeLBracket(e),A.push(s);else if(e[this._current]==='"')n=this._current,r=this.consumeQuotedIdentifier(e),A.push({start:n,type:ae.TOK_QUOTEDIDENTIFIER,value:r});else if(e[this._current]==="'")n=this._current,r=this.consumeRawStringLiteral(e),A.push({start:n,type:ae.TOK_LITERAL,value:r});else if(e[this._current]==="`"){n=this._current;const i=this.consumeLiteral(e);A.push({start:n,type:ae.TOK_LITERAL,value:i})}else if(jie[e[this._current]]!==void 0)s=this.consumeOperator(e),s&&A.push(s);else if(zie[e[this._current]]!==void 0)this._current+=1;else if(e[this._current]==="&")n=this._current,this._current+=1,e[this._current]==="&"?(this._current+=1,A.push({start:n,type:ae.TOK_AND,value:"&&"})):A.push({start:n,type:ae.TOK_EXPREF,value:"&"});else if(e[this._current]==="|")n=this._current,this._current+=1,e[this._current]==="|"?(this._current+=1,A.push({start:n,type:ae.TOK_OR,value:"||"})):A.push({start:n,type:ae.TOK_PIPE,value:"|"});else{const i=new Error(`Unknown character: ${e[this._current]}`);throw i.name="LexerError",i}return A}consumeUnquotedIdentifier(e){const A=this._current;for(this._current+=1;this._current<e.length&&Rie(e[this._current]);)this._current+=1;return e.slice(A,this._current)}consumeQuotedIdentifier(e){const A=this._current;this._current+=1;const n=e.length;for(;e[this._current]!=='"'&&this._current<n;){let r=this._current;e[r]==="\\"&&(e[r+1]==="\\"||e[r+1]==='"')?r+=2:r+=1,this._current=r}return this._current+=1,JSON.parse(e.slice(A,this._current))}consumeRawStringLiteral(e){const A=this._current;this._current+=1;const n=e.length;for(;e[this._current]!=="'"&&this._current<n;){let s=this._current;e[s]==="\\"&&(e[s+1]==="\\"||e[s+1]==="'")?s+=2:s+=1,this._current=s}return this._current+=1,e.slice(A+1,this._current-1).replace("\\'","'")}consumeNumber(e){const A=this._current;this._current+=1;const n=e.length;for(;$Y(e[this._current])&&this._current<n;)this._current+=1;const r=parseInt(e.slice(A,this._current),10);return{start:A,value:r,type:ae.TOK_NUMBER}}consumeLBracket(e){const A=this._current;return this._current+=1,e[this._current]==="?"?(this._current+=1,{start:A,type:ae.TOK_FILTER,value:"[?"}):e[this._current]==="]"?(this._current+=1,{start:A,type:ae.TOK_FLATTEN,value:"[]"}):{start:A,type:ae.TOK_LBRACKET,value:"["}}consumeOperator(e){const A=this._current,n=e[A];if(this._current+=1,n==="!")return e[this._current]==="="?(this._current+=1,{start:A,type:ae.TOK_NE,value:"!="}):{start:A,type:ae.TOK_NOT,value:"!"};if(n==="<")return e[this._current]==="="?(this._current+=1,{start:A,type:ae.TOK_LTE,value:"<="}):{start:A,type:ae.TOK_LT,value:"<"};if(n===">")return e[this._current]==="="?(this._current+=1,{start:A,type:ae.TOK_GTE,value:">="}):{start:A,type:ae.TOK_GT,value:">"};if(n==="="&&e[this._current]==="=")return this._current+=1,{start:A,type:ae.TOK_EQ,value:"=="}}consumeLiteral(e){this._current+=1;const A=this._current,n=e.length;for(;e[this._current]!=="`"&&this._current<n;){let i=this._current;e[i]==="\\"&&(e[i+1]==="\\"||e[i+1]==="`")?i+=2:i+=1,this._current=i}let r=e.slice(A,this._current).trimLeft();r=r.replace("\\`","`");const s=this.looksLikeJSON(r)?JSON.parse(r):JSON.parse(`"${r}"`);return this._current+=1,s}looksLikeJSON(e){const n=["true","false","null"],r="-0123456789";if(e==="")return!1;if('[{"'.includes(e[0])||n.includes(e))return!0;if(r.includes(e[0]))try{return JSON.parse(e),!0}catch{return!1}return!1}}const Lie=new Hie,JA={[ae.TOK_EOF]:0,[ae.TOK_UNQUOTEDIDENTIFIER]:0,[ae.TOK_QUOTEDIDENTIFIER]:0,[ae.TOK_RBRACKET]:0,[ae.TOK_RPAREN]:0,[ae.TOK_COMMA]:0,[ae.TOK_RBRACE]:0,[ae.TOK_NUMBER]:0,[ae.TOK_CURRENT]:0,[ae.TOK_EXPREF]:0,[ae.TOK_ROOT]:0,[ae.TOK_PIPE]:1,[ae.TOK_OR]:2,[ae.TOK_AND]:3,[ae.TOK_EQ]:5,[ae.TOK_GT]:5,[ae.TOK_LT]:5,[ae.TOK_GTE]:5,[ae.TOK_LTE]:5,[ae.TOK_NE]:5,[ae.TOK_FLATTEN]:9,[ae.TOK_STAR]:20,[ae.TOK_FILTER]:21,[ae.TOK_DOT]:40,[ae.TOK_NOT]:45,[ae.TOK_LBRACE]:50,[ae.TOK_LBRACKET]:55,[ae.TOK_LPAREN]:60};class Uie{constructor(){this.index=0,this.tokens=[]}parse(e){this.loadTokens(e),this.index=0;const A=this.expression(0);if(this.lookahead(0)!==ae.TOK_EOF){const n=this.lookaheadToken(0);this.errorToken(n,`Unexpected token type: ${n.type}, value: ${n.value}`)}return A}loadTokens(e){this.tokens=[...Lie.tokenize(e),{type:ae.TOK_EOF,value:"",start:e.length}]}expression(e){const A=this.lookaheadToken(0);this.advance();let n=this.nud(A),r=this.lookahead(0);for(;e<JA[r];)this.advance(),n=this.led(r,n),r=this.lookahead(0);return n}lookahead(e){return this.tokens[this.index+e].type}lookaheadToken(e){return this.tokens[this.index+e]}advance(){this.index+=1}nud(e){let A,n,r;switch(e.type){case ae.TOK_LITERAL:return{type:"Literal",value:e.value};case ae.TOK_UNQUOTEDIDENTIFIER:return{type:"Field",name:e.value};case ae.TOK_QUOTEDIDENTIFIER:const s={type:"Field",name:e.value};if(this.lookahead(0)===ae.TOK_LPAREN)throw new Error("Quoted identifier not allowed for function names.");return s;case ae.TOK_NOT:return n=this.expression(JA.Not),{type:"NotExpression",children:[n]};case ae.TOK_STAR:return A={type:"Identity"},n=this.lookahead(0)===ae.TOK_RBRACKET&&{type:"Identity"}||this.parseProjectionRHS(JA.Star),{type:"ValueProjection",children:[A,n]};case ae.TOK_FILTER:return this.led(e.type,{type:"Identity"});case ae.TOK_LBRACE:return this.parseMultiselectHash();case ae.TOK_FLATTEN:return A={type:ae.TOK_FLATTEN,children:[{type:"Identity"}]},n=this.parseProjectionRHS(JA.Flatten),{type:"Projection",children:[A,n]};case ae.TOK_LBRACKET:return this.lookahead(0)===ae.TOK_NUMBER||this.lookahead(0)===ae.TOK_COLON?(n=this.parseIndexExpression(),this.projectIfSlice({type:"Identity"},n)):this.lookahead(0)===ae.TOK_STAR&&this.lookahead(1)===ae.TOK_RBRACKET?(this.advance(),this.advance(),n=this.parseProjectionRHS(JA.Star),{children:[{type:"Identity"},n],type:"Projection"}):this.parseMultiselectList();case ae.TOK_CURRENT:return{type:ae.TOK_CURRENT};case ae.TOK_ROOT:return{type:ae.TOK_ROOT};case ae.TOK_EXPREF:return r=this.expression(JA.Expref),{type:"ExpressionReference",children:[r]};case ae.TOK_LPAREN:const i=[];for(;this.lookahead(0)!==ae.TOK_RPAREN;)this.lookahead(0)===ae.TOK_CURRENT?(r={type:ae.TOK_CURRENT},this.advance()):r=this.expression(0),i.push(r);return this.match(ae.TOK_RPAREN),i[0];default:this.errorToken(e)}}led(e,A){let n;switch(e){case ae.TOK_DOT:const r=JA.Dot;return this.lookahead(0)!==ae.TOK_STAR?(n=this.parseDotRHS(r),{type:"Subexpression",children:[A,n]}):(this.advance(),n=this.parseProjectionRHS(r),{type:"ValueProjection",children:[A,n]});case ae.TOK_PIPE:return n=this.expression(JA.Pipe),{type:ae.TOK_PIPE,children:[A,n]};case ae.TOK_OR:return n=this.expression(JA.Or),{type:"OrExpression",children:[A,n]};case ae.TOK_AND:return n=this.expression(JA.And),{type:"AndExpression",children:[A,n]};case ae.TOK_LPAREN:const s=A.name,i=[];let o;for(;this.lookahead(0)!==ae.TOK_RPAREN;)this.lookahead(0)===ae.TOK_CURRENT?(o={type:ae.TOK_CURRENT},this.advance()):o=this.expression(0),this.lookahead(0)===ae.TOK_COMMA&&this.match(ae.TOK_COMMA),i.push(o);return this.match(ae.TOK_RPAREN),{name:s,type:"Function",children:i};case ae.TOK_FILTER:const c=this.expression(0);return this.match(ae.TOK_RBRACKET),n=this.lookahead(0)===ae.TOK_FLATTEN&&{type:"Identity"}||this.parseProjectionRHS(JA.Filter),{type:"FilterProjection",children:[A,n,c]};case ae.TOK_FLATTEN:const l={type:ae.TOK_FLATTEN,children:[A]},u=this.parseProjectionRHS(JA.Flatten);return{type:"Projection",children:[l,u]};case ae.TOK_EQ:case ae.TOK_NE:case ae.TOK_GT:case ae.TOK_GTE:case ae.TOK_LT:case ae.TOK_LTE:return this.parseComparator(A,e);case ae.TOK_LBRACKET:const f=this.lookaheadToken(0);return f.type===ae.TOK_NUMBER||f.type===ae.TOK_COLON?(n=this.parseIndexExpression(),this.projectIfSlice(A,n)):(this.match(ae.TOK_STAR),this.match(ae.TOK_RBRACKET),n=this.parseProjectionRHS(JA.Star),{type:"Projection",children:[A,n]});default:return this.errorToken(this.lookaheadToken(0))}}match(e){if(this.lookahead(0)===e){this.advance();return}else{const A=this.lookaheadToken(0);this.errorToken(A,`Expected ${e}, got: ${A.type}`)}}errorToken(e,A=""){const n=new Error(A||`Invalid token (${e.type}): "${e.value}"`);throw n.name="ParserError",n}parseIndexExpression(){if(this.lookahead(0)===ae.TOK_COLON||this.lookahead(1)===ae.TOK_COLON)return this.parseSliceExpression();const e={type:"Index",value:this.lookaheadToken(0).value};return this.advance(),this.match(ae.TOK_RBRACKET),e}projectIfSlice(e,A){const n={type:"IndexExpression",children:[e,A]};return A.type==="Slice"?{children:[n,this.parseProjectionRHS(JA.Star)],type:"Projection"}:n}parseSliceExpression(){const e=[null,null,null];let A=0,n=this.lookahead(0);for(;n!==ae.TOK_RBRACKET&&A<3;){if(n===ae.TOK_COLON)A+=1,this.advance();else if(n===ae.TOK_NUMBER)e[A]=this.lookaheadToken(0).value,this.advance();else{const r=this.lookaheadToken(0);this.errorToken(r,`Syntax error, unexpected token: ${r.value}(${r.type})`)}n=this.lookahead(0)}return this.match(ae.TOK_RBRACKET),{children:e,type:"Slice"}}parseComparator(e,A){const n=this.expression(JA[A]);return{type:"Comparator",name:A,children:[e,n]}}parseDotRHS(e){const A=this.lookahead(0);if([ae.TOK_UNQUOTEDIDENTIFIER,ae.TOK_QUOTEDIDENTIFIER,ae.TOK_STAR].includes(A))return this.expression(e);if(A===ae.TOK_LBRACKET)return this.match(ae.TOK_LBRACKET),this.parseMultiselectList();if(A===ae.TOK_LBRACE)return this.match(ae.TOK_LBRACE),this.parseMultiselectHash();const r=this.lookaheadToken(0);this.errorToken(r,`Syntax error, unexpected token: ${r.value}(${r.type})`)}parseProjectionRHS(e){if(JA[this.lookahead(0)]<10)return{type:"Identity"};if(this.lookahead(0)===ae.TOK_LBRACKET)return this.expression(e);if(this.lookahead(0)===ae.TOK_FILTER)return this.expression(e);if(this.lookahead(0)===ae.TOK_DOT)return this.match(ae.TOK_DOT),this.parseDotRHS(e);const A=this.lookaheadToken(0);this.errorToken(A,`Syntax error, unexpected token: ${A.value}(${A.type})`)}parseMultiselectList(){const e=[];for(;this.lookahead(0)!==ae.TOK_RBRACKET;){const A=this.expression(0);if(e.push(A),this.lookahead(0)===ae.TOK_COMMA&&(this.match(ae.TOK_COMMA),this.lookahead(0)===ae.TOK_RBRACKET))throw new Error("Unexpected token Rbracket")}return this.match(ae.TOK_RBRACKET),{type:"MultiSelectList",children:e}}parseMultiselectHash(){const e=[],A=[ae.TOK_UNQUOTEDIDENTIFIER,ae.TOK_QUOTEDIDENTIFIER];let n,r,s;for(;;){if(n=this.lookaheadToken(0),!A.includes(n.type))throw new Error(`Expecting an identifier token, got: ${n.type}`);if(r=n.value,this.advance(),this.match(ae.TOK_COLON),s=this.expression(0),e.push({value:s,type:"KeyValuePair",name:r}),this.lookahead(0)===ae.TOK_COMMA)this.match(ae.TOK_COMMA);else if(this.lookahead(0)===ae.TOK_RBRACE){this.match(ae.TOK_RBRACE);break}}return{type:"MultiSelectHash",children:e}}}const Fie=new Uie;var Ge;(function(t){t[t.TYPE_NUMBER=0]="TYPE_NUMBER",t[t.TYPE_ANY=1]="TYPE_ANY",t[t.TYPE_STRING=2]="TYPE_STRING",t[t.TYPE_ARRAY=3]="TYPE_ARRAY",t[t.TYPE_OBJECT=4]="TYPE_OBJECT",t[t.TYPE_BOOLEAN=5]="TYPE_BOOLEAN",t[t.TYPE_EXPREF=6]="TYPE_EXPREF",t[t.TYPE_NULL=7]="TYPE_NULL",t[t.TYPE_ARRAY_NUMBER=8]="TYPE_ARRAY_NUMBER",t[t.TYPE_ARRAY_STRING=9]="TYPE_ARRAY_STRING"})(Ge||(Ge={}));class $ie{constructor(e){this.TYPE_NAME_TABLE={[Ge.TYPE_NUMBER]:"number",[Ge.TYPE_ANY]:"any",[Ge.TYPE_STRING]:"string",[Ge.TYPE_ARRAY]:"array",[Ge.TYPE_OBJECT]:"object",[Ge.TYPE_BOOLEAN]:"boolean",[Ge.TYPE_EXPREF]:"expression",[Ge.TYPE_NULL]:"null",[Ge.TYPE_ARRAY_NUMBER]:"Array<number>",[Ge.TYPE_ARRAY_STRING]:"Array<string>"},this.functionAbs=([A])=>Math.abs(A),this.functionAvg=([A])=>{let n=0;for(let r=0;r<A.length;r+=1)n+=A[r];return n/A.length},this.functionCeil=([A])=>Math.ceil(A),this.functionContains=A=>{const[n,r]=A;return n.includes(r)},this.functionEndsWith=A=>{const[n,r]=A;return n.includes(r,n.length-r.length)},this.functionFloor=([A])=>Math.floor(A),this.functionJoin=A=>{const[n,r]=A;return r.join(n)},this.functionKeys=([A])=>Object.keys(A),this.functionLength=([A])=>wa(A)?Object.keys(A).length:A.length,this.functionMap=A=>{if(!this._interpreter)return[];const n=[],r=this._interpreter,s=A[0],i=A[1];for(let o=0;o<i.length;o+=1)n.push(r.visit(s,i[o]));return n},this.functionMax=([A])=>{if(!A.length)return null;if(this.getTypeName(A[0])===Ge.TYPE_NUMBER)return Math.max(...A);const r=A;let s=r[0];for(let i=1;i<r.length;i+=1)s.localeCompare(r[i])<0&&(s=r[i]);return s},this.functionMaxBy=A=>{const n=A[1],r=A[0],s=this.createKeyFunction(n,[Ge.TYPE_NUMBER,Ge.TYPE_STRING]);let i=-1/0,o,a;for(let c=0;c<r.length;c+=1)a=s&&s(r[c]),a!==void 0&&a>i&&(i=a,o=r[c]);return o},this.functionMerge=A=>{let n={};for(let r=0;r<A.length;r+=1){const s=A[r];n=Object.assign(n,s)}return n},this.functionMin=([A])=>{if(!A.length)return null;if(this.getTypeName(A[0])===Ge.TYPE_NUMBER)return Math.min(...A);const r=A;let s=r[0];for(let i=1;i<r.length;i+=1)r[i].localeCompare(s)<0&&(s=r[i]);return s},this.functionMinBy=A=>{const n=A[1],r=A[0],s=this.createKeyFunction(n,[Ge.TYPE_NUMBER,Ge.TYPE_STRING]);let i=1/0,o,a;for(let c=0;c<r.length;c+=1)a=s&&s(r[c]),a!==void 0&&a<i&&(i=a,o=r[c]);return o},this.functionNotNull=A=>{for(let n=0;n<A.length;n+=1)if(this.getTypeName(A[n])!==Ge.TYPE_NULL)return A[n];return null},this.functionReverse=([A])=>{if(this.getTypeName(A)===Ge.TYPE_STRING){const s=A;let i="";for(let o=s.length-1;o>=0;o-=1)i+=s[o];return i}const r=A.slice(0);return r.reverse(),r},this.functionSort=([A])=>[...A].sort(),this.functionSortBy=A=>{if(!this._interpreter)return[];const n=A[0].slice(0);if(n.length===0)return n;const r=this._interpreter,s=A[1],i=this.getTypeName(r.visit(s,n[0]));if(i!==void 0&&![Ge.TYPE_NUMBER,Ge.TYPE_STRING].includes(i))throw new Error(`TypeError: unexpected type (${this.TYPE_NAME_TABLE[i]})`);const o=[];for(let a=0;a<n.length;a+=1)o.push([a,n[a]]);o.sort((a,c)=>{const l=r.visit(s,a[1]),u=r.visit(s,c[1]);if(this.getTypeName(l)!==i)throw new Error(`TypeError: expected (${this.TYPE_NAME_TABLE[i]}), received ${this.TYPE_NAME_TABLE[this.getTypeName(l)]}`);if(this.getTypeName(u)!==i)throw new Error(`TypeError: expected (${this.TYPE_NAME_TABLE[i]}), received ${this.TYPE_NAME_TABLE[this.getTypeName(u)]}`);return l>u?1:l<u?-1:a[0]-c[0]});for(let a=0;a<o.length;a+=1)n[a]=o[a][1];return n},this.functionStartsWith=([A,n])=>A.startsWith(n),this.functionSum=([A])=>A.reduce((n,r)=>n+r,0),this.functionToArray=([A])=>this.getTypeName(A)===Ge.TYPE_ARRAY?A:[A],this.functionToNumber=([A])=>{const n=this.getTypeName(A);let r;return n===Ge.TYPE_NUMBER?A:n===Ge.TYPE_STRING&&(r=+A,!isNaN(r))?r:null},this.functionToString=([A])=>this.getTypeName(A)===Ge.TYPE_STRING?A:JSON.stringify(A),this.functionType=([A])=>{switch(this.getTypeName(A)){case Ge.TYPE_NUMBER:return"number";case Ge.TYPE_STRING:return"string";case Ge.TYPE_ARRAY:return"array";case Ge.TYPE_OBJECT:return"object";case Ge.TYPE_BOOLEAN:return"boolean";case Ge.TYPE_EXPREF:return"expref";case Ge.TYPE_NULL:return"null";default:return}},this.functionValues=([A])=>Object.values(A),this.functionTable={abs:{_func:this.functionAbs,_signature:[{types:[Ge.TYPE_NUMBER]}]},avg:{_func:this.functionAvg,_signature:[{types:[Ge.TYPE_ARRAY_NUMBER]}]},ceil:{_func:this.functionCeil,_signature:[{types:[Ge.TYPE_NUMBER]}]},contains:{_func:this.functionContains,_signature:[{types:[Ge.TYPE_STRING,Ge.TYPE_ARRAY]},{types:[Ge.TYPE_ANY]}]},ends_with:{_func:this.functionEndsWith,_signature:[{types:[Ge.TYPE_STRING]},{types:[Ge.TYPE_STRING]}]},floor:{_func:this.functionFloor,_signature:[{types:[Ge.TYPE_NUMBER]}]},join:{_func:this.functionJoin,_signature:[{types:[Ge.TYPE_STRING]},{types:[Ge.TYPE_ARRAY_STRING]}]},keys:{_func:this.functionKeys,_signature:[{types:[Ge.TYPE_OBJECT]}]},length:{_func:this.functionLength,_signature:[{types:[Ge.TYPE_STRING,Ge.TYPE_ARRAY,Ge.TYPE_OBJECT]}]},map:{_func:this.functionMap,_signature:[{types:[Ge.TYPE_EXPREF]},{types:[Ge.TYPE_ARRAY]}]},max:{_func:this.functionMax,_signature:[{types:[Ge.TYPE_ARRAY_NUMBER,Ge.TYPE_ARRAY_STRING]}]},max_by:{_func:this.functionMaxBy,_signature:[{types:[Ge.TYPE_ARRAY]},{types:[Ge.TYPE_EXPREF]}]},merge:{_func:this.functionMerge,_signature:[{types:[Ge.TYPE_OBJECT],variadic:!0}]},min:{_func:this.functionMin,_signature:[{types:[Ge.TYPE_ARRAY_NUMBER,Ge.TYPE_ARRAY_STRING]}]},min_by:{_func:this.functionMinBy,_signature:[{types:[Ge.TYPE_ARRAY]},{types:[Ge.TYPE_EXPREF]}]},not_null:{_func:this.functionNotNull,_signature:[{types:[Ge.TYPE_ANY],variadic:!0}]},reverse:{_func:this.functionReverse,_signature:[{types:[Ge.TYPE_STRING,Ge.TYPE_ARRAY]}]},sort:{_func:this.functionSort,_signature:[{types:[Ge.TYPE_ARRAY_STRING,Ge.TYPE_ARRAY_NUMBER]}]},sort_by:{_func:this.functionSortBy,_signature:[{types:[Ge.TYPE_ARRAY]},{types:[Ge.TYPE_EXPREF]}]},starts_with:{_func:this.functionStartsWith,_signature:[{types:[Ge.TYPE_STRING]},{types:[Ge.TYPE_STRING]}]},sum:{_func:this.functionSum,_signature:[{types:[Ge.TYPE_ARRAY_NUMBER]}]},to_array:{_func:this.functionToArray,_signature:[{types:[Ge.TYPE_ANY]}]},to_number:{_func:this.functionToNumber,_signature:[{types:[Ge.TYPE_ANY]}]},to_string:{_func:this.functionToString,_signature:[{types:[Ge.TYPE_ANY]}]},type:{_func:this.functionType,_signature:[{types:[Ge.TYPE_ANY]}]},values:{_func:this.functionValues,_signature:[{types:[Ge.TYPE_OBJECT]}]}},this._interpreter=e}registerFunction(e,A,n){if(e in this.functionTable)throw new Error(`Function already defined: ${e}()`);this.functionTable[e]={_func:A.bind(this),_signature:n}}callFunction(e,A){const n=this.functionTable[e];if(n===void 0)throw new Error(`Unknown function: ${e}()`);return this.validateArgs(e,A,n._signature),n._func.call(this,A)}validateInputSignatures(e,A){for(let n=0;n<A.length;n+=1)if("variadic"in A[n]&&n!==A.length-1)throw new Error(`ArgumentError: ${e}() 'variadic' argument ${n+1} must occur last`)}validateArgs(e,A,n){var r,s;let i;this.validateInputSignatures(e,n);const o=n.filter(m=>{var p;return(p=!m.optional)!==null&&p!==void 0?p:!1}).length,a=(s=(r=n[n.length-1])===null||r===void 0?void 0:r.variadic)!==null&&s!==void 0?s:!1,c=A.length<o,l=A.length>n.length,u=c&&(!a&&o>1||a)?"at least ":"";if(a&&c||!a&&(c||l))throw i=n.length>1,new Error(`ArgumentError: ${e}() takes ${u}${o} argument${i&&"s"||""} but received ${A.length}`);let f,h,d;for(let m=0;m<n.length;m+=1){d=!1,f=n[m].types,h=this.getTypeName(A[m]);let p;for(p=0;p<f.length;p+=1)if(h!==void 0&&this.typeMatches(h,f[p],A[m])){d=!0;break}if(!d&&h!==void 0){const w=f.map(b=>this.TYPE_NAME_TABLE[b]).join(" | ");throw new Error(`TypeError: ${e}() expected argument ${m+1} to be type (${w}) but received type ${this.TYPE_NAME_TABLE[h]} instead.`)}}}typeMatches(e,A,n){if(A===Ge.TYPE_ANY)return!0;if(A===Ge.TYPE_ARRAY_STRING||A===Ge.TYPE_ARRAY_NUMBER||A===Ge.TYPE_ARRAY){if(A===Ge.TYPE_ARRAY)return e===Ge.TYPE_ARRAY;if(e===Ge.TYPE_ARRAY){let r;A===Ge.TYPE_ARRAY_NUMBER?r=Ge.TYPE_NUMBER:A===Ge.TYPE_ARRAY_STRING&&(r=Ge.TYPE_STRING);for(let s=0;s<n.length;s+=1){const i=this.getTypeName(n[s]);if(i!==void 0&&r!==void 0&&!this.typeMatches(i,r,n[s]))return!1}return!0}}else return e===A;return!1}getTypeName(e){switch(Object.prototype.toString.call(e)){case"[object String]":return Ge.TYPE_STRING;case"[object Number]":return Ge.TYPE_NUMBER;case"[object Array]":return Ge.TYPE_ARRAY;case"[object Boolean]":return Ge.TYPE_BOOLEAN;case"[object Null]":return Ge.TYPE_NULL;case"[object Object]":return e.jmespathType===ae.TOK_EXPREF?Ge.TYPE_EXPREF:Ge.TYPE_OBJECT;default:return}}createKeyFunction(e,A){if(!this._interpreter)return;const n=this._interpreter;return s=>{const i=n.visit(e,s);if(!A.includes(this.getTypeName(i))){const o=`TypeError: expected one of (${A.map(a=>this.TYPE_NAME_TABLE[a]).join(" | ")}), received ${this.TYPE_NAME_TABLE[this.getTypeName(i)]}`;throw new Error(o)}return i}}}class Vie{constructor(){this._rootValue=null,this.runtime=new $ie(this)}search(e,A){return this._rootValue=A,this.visit(e,A)}visit(e,A){let n,r,s,i,o,a,c,l,u,f,h;switch(e.type){case"Field":return A===null?null:wa(A)?(a=A[e.name],a===void 0?null:a):null;case"Subexpression":for(s=this.visit(e.children[0],A),f=1;f<e.children.length;f+=1)if(s=this.visit(e.children[1],s),s===null)return null;return s;case"IndexExpression":return c=this.visit(e.children[0],A),l=this.visit(e.children[1],c),l;case"Index":if(!Array.isArray(A))return null;let d=e.value;return d<0&&(d=A.length+d),s=A[d],s===void 0&&(s=null),s;case"Slice":if(!Array.isArray(A))return null;const m=[...e.children],p=this.computeSliceParams(A.length,m),[w,b,g]=p;if(s=[],g>0)for(f=w;f<b;f+=g)s.push(A[f]);else for(f=w;f>b;f+=g)s.push(A[f]);return s;case"Projection":if(h=this.visit(e.children[0],A),!Array.isArray(h))return null;for(u=[],f=0;f<h.length;f+=1)r=this.visit(e.children[1],h[f]),r!==null&&u.push(r);return u;case"ValueProjection":if(h=this.visit(e.children[0],A),!wa(h))return null;u=[];const x=Object.values(h);for(f=0;f<x.length;f+=1)r=this.visit(e.children[1],x[f]),r!==null&&u.push(r);return u;case"FilterProjection":if(h=this.visit(e.children[0],A),!Array.isArray(h))return null;const _=[],G=[];for(f=0;f<h.length;f+=1)n=this.visit(e.children[2],h[f]),id(n)||_.push(h[f]);for(let D=0;D<_.length;D+=1)r=this.visit(e.children[1],_[D]),r!==null&&G.push(r);return G;case"Comparator":switch(i=this.visit(e.children[0],A),o=this.visit(e.children[1],A),e.name){case ae.TOK_EQ:s=sd(i,o);break;case ae.TOK_NE:s=!sd(i,o);break;case ae.TOK_GT:s=i>o;break;case ae.TOK_GTE:s=i>=o;break;case ae.TOK_LT:s=i<o;break;case ae.TOK_LTE:s=i<=o;break;default:throw new Error(`Unknown comparator: ${e.name}`)}return s;case ae.TOK_FLATTEN:const y=this.visit(e.children[0],A);if(!Array.isArray(y))return null;let v=[];for(f=0;f<y.length;f+=1)r=y[f],Array.isArray(r)?v=[...v,...r]:v.push(r);return v;case"Identity":return A;case"MultiSelectList":if(A===null)return null;for(u=[],f=0;f<e.children.length;f+=1)u.push(this.visit(e.children[f],A));return u;case"MultiSelectHash":if(A===null)return null;u={};let O;for(f=0;f<e.children.length;f+=1)O=e.children[f],u[O.name]=this.visit(O.value,A);return u;case"OrExpression":return n=this.visit(e.children[0],A),id(n)&&(n=this.visit(e.children[1],A)),n;case"AndExpression":return i=this.visit(e.children[0],A),id(i)?i:this.visit(e.children[1],A);case"NotExpression":return i=this.visit(e.children[0],A),id(i);case"Literal":return e.value;case ae.TOK_PIPE:return c=this.visit(e.children[0],A),this.visit(e.children[1],c);case ae.TOK_CURRENT:return A;case ae.TOK_ROOT:return this._rootValue;case"Function":const B=[];for(let D=0;D<e.children.length;D+=1)B.push(this.visit(e.children[D],A));return this.runtime.callFunction(e.name,B);case"ExpressionReference":const Y=e.children[0];return Y.jmespathType=ae.TOK_EXPREF,Y;default:throw new Error(`Unknown node type: ${e.type}`)}}computeSliceParams(e,A){let[n,r,s]=A;if(s===null)s=1;else if(s===0){const o=new Error("Invalid slice, step cannot be 0");throw o.name="RuntimeError",o}const i=s<0;return n=n===null?i?e-1:0:this.capSliceRange(e,n,s),r=r===null?i?-1:e:this.capSliceRange(e,r,s),[n,r,s]}capSliceRange(e,A,n){let r=A;return r<0?(r+=e,r<0&&(r=n<0?-1:0)):r>=e&&(r=n<0?e-1:e),r}}const qie=new Vie;Ge.TYPE_ANY,Ge.TYPE_ARRAY,Ge.TYPE_ARRAY_NUMBER,Ge.TYPE_ARRAY_STRING,Ge.TYPE_BOOLEAN,Ge.TYPE_EXPREF,Ge.TYPE_NULL,Ge.TYPE_NUMBER,Ge.TYPE_OBJECT,Ge.TYPE_STRING;function Wie(t,e){const A=Fie.parse(e);return qie.search(A,t)}const Qie=(t,e)=>{const A=ua(t.id());if(!E(A))return 0;const[n,r]=ce(e,0,[K.NAME,K.NAME]),s=Wie(A.json,n);return t.set(r,s),0},Kie=(t,e)=>{const A=ua(t.id());if(!E(A))return 0;const[n,r]=ce(e,0,[K.NAME]);switch(je(n)){case"seek":{const[i]=ce(e,r,[K.NUMBER]);A.cursor=gr(i,0,A.lines.length-1);break}case"line":A.cursor=gr(A.cursor+1,0,A.lines.length-1);break;default:{const i=A.lines[A.cursor]??"",a=new RegExp(n,"i").exec(i)??[];let c=1;for(let l=r;l<e.length;){const[u,f]=ce(e,l,[K.NAME]);t.set(u,a[c]??0),++c,l=f}break}}return 0},Jie=qs({get(t,e){const A=v9(t.id());if(e==="format")return[!0,A];switch(A){case"text":{const n=ua(t.id());switch(e){case"filename":return[!0,n.filename];case"cursor":return[!0,n.cursor];case"lines":return[!0,n.lines.length]}break}case"json":{const n=ua(t.id());if(e==="filename")return[!0,n.filename];break}case"binary":{const n=ua(t.id());switch(e){case"filename":return[!0,n.filename];case"cursor":return[!0,n.cursor];case"bytes":return[!0,n.bytes.length]}break}}return[!1,void 0]}}).command("endgame",()=>0).command("shortsend",(t,e)=>{const A=pa(e);return _a(t,k.element,A),0}).command("send",(t,e)=>{const A=pa(e,!0);return _a(t,k.element,A),0}).command("stat",()=>0).command("text",(t,e)=>{const A=e.map(Ct).join(" ");return Vd(Ae,"","$GREEN",A),0}).command("hyperlink",(t,e)=>{const[A,...n]=e,r=t.template(Ct(A).split(" "));return Vd(Ae,"",`!${t.template(n)};${r}`),0}).command("readline",Kie).command("readjson",Qie).command("readbin",Zie).command("withboard",(t,e)=>{const[A]=ce(e,0,[K.STRING]),n=ct(A);return E(n)&&(k.board=n,k.element={x:tn(0,Ie-1),y:tn(0,rt-1)}),0}).command("withobject",(t,e)=>{const[A]=ce(e,0,[K.STRING]),n=uA(k.board,A);return E(n)&&(k.element=n,k.elementid=n.id??"",k.elementisplayer=$t(k.elementid),k.elementfocus=k.elementisplayer?k.elementid:k.element?.player??gA()),0}).command("userinput",(t,e)=>{const[A]=ce(e,0,[K.NAME]),n=gA();switch(je(A)){case"up":Pr(Ae,n,Lt.MOVE_UP,!1);break;case"down":Pr(Ae,n,Lt.MOVE_DOWN,!1);break;case"left":Pr(Ae,n,Lt.MOVE_RIGHT,!1);break;case"right":Pr(Ae,n,Lt.MOVE_RIGHT,!1);break;case"shootup":Pr(Ae,n,Lt.MOVE_UP,!0);break;case"shootdown":Pr(Ae,n,Lt.MOVE_DOWN,!0);break;case"shootleft":Pr(Ae,n,Lt.MOVE_RIGHT,!0);break;case"shootright":Pr(Ae,n,Lt.MOVE_RIGHT,!0);break;case"ok":Pr(Ae,n,Lt.OK_BUTTON,!1);break;case"cancel":Pr(Ae,n,Lt.CANCEL_BUTTON,!1);break}return 0});function qY(t,e,A,n,r,s){const i=[];for(let o=s;o<r.length;){const[a,c]=ce(r,o,[K.ANY]);st(a)&&!Cn(a)&&!Il(a)&&!If(a)&&!BA(a)?i.push(...a):i.push(a),o=c}switch(je(n)){case"get":case"post:json":gC(Ae,k.elementfocus,t,e,A,n,i);break}return 0}const Xie=qs().command("fetch",(t,e)=>{const[A,n,r="get",s]=ce(e,0,[K.NAME,K.NAME,K.MAYBE_STRING]);return qY(void 0,A,n,r,e,s),0}).command("fetchwith",(t,e)=>{const[A,n,r,s="get",i]=ce(e,0,[K.ANY,K.NAME,K.NAME,K.MAYBE_STRING]);return qY(A,n,r,s,e,i),0}),eoe=qs({set(t,e,A){return Ioe(t,e,A),[!1,void 0]},aftertick(t){const e=Ht(k.elementid),[A]=e;if(e.length===1&&xe(A)){if(E(k.element))if(A.trim().length===0){const n=_t(k.elementid);n.sidebar=[]}else k.element.tickertext=A,k.element.tickertime=k.timestamp,Xb(k.board?.id,k.element,A)}else if(e.length>1)if(k.elementisplayer){const n=_t(k.elementid);n.sidebar=w4(e)}else{const n=k.elementfocus;t.scrolllock(n);const r=_t(n);r.scrollname=k.element?.name??k.element?.kinddata?.name??"",r.scroll=w4(e)}}}).command("endgame",t=>(t.set("health",0),0)).command("shortsend",(t,e)=>{const A=pa(e);return _a(t,k.element,A),0}).command("send",(t,e)=>{const A=pa(e,!0);return _a(t,k.element,A),0}).command("stat",()=>0).command("text",(t,e)=>{const A=e.map(Ct).join("");return we(k.elementid,A),0}).command("hyperlink",(t,e)=>{const[A,...n]=e,r=t.template(Ct(A).split(" ")),s=t.template(n);return Te(k.elementid,t.id(),r,s.split(" "),t.get,t.set),0}).command("help",()=>(dx(Ae,k.elementfocus),0));function toe(t,e,A,n,r){if(!E(k.book))return;const s=ct(t);if(!E(s))return;const i=s_(),o=r==="all"||r==="object",a=r==="all"||r==="terrain";eA(s),eA(i);const c=-Math.tan(e*.5),l=Math.sin(e),u=Math.round(12.5*c),f=Math.round(12.5*l),h=new Array(rt).fill(0);y1(u,0,-u,rt-1).forEach(b=>{b.x<0?h[b.y]=Math.min(h[b.y],b.x):h[b.y]=Math.max(h[b.y],b.x)});const m=new Array(Ie).fill(0);y1(0,f,Ie-1,-f).forEach(b=>{b.y<0?m[b.x]=Math.min(m[b.x],b.y):m[b.x]=Math.max(m[b.x],b.y)});const w=[h,m,h];for(let b=0;b<w.length;++b){const g=w[b];if(b!==1){for(let x=0;x<rt;++x){const _=g[x],G=x*Ie;for(let y=0;y<Ie;y++){const v=(y+_+Ie)%Ie;a&&(i.terrain[v+G]=s.terrain[y+G])}}if(o){const x=Object.keys(s.objects);for(let _=0;_<x.length;++_){const G=x[_],{x:y,y:v}=s.objects[G];if(E(y)&&E(v)){const O=g[v];s.objects[G].x=(y+O+Ie)%Ie,s.objects[G].lx=s.objects[G].x}}}}if(b===1){for(let x=0;x<Ie;++x){const _=g[x];for(let G=0;G<rt;++G){const y=(G+_+rt)%rt;a&&(i.terrain[x+y*Ie]=s.terrain[x+G*Ie])}}if(o){const x=Object.keys(s.objects);for(let _=0;_<x.length;++_){const G=x[_],{x:y,y:v}=s.objects[G];if(E(y)&&E(v)){const O=g[y];s.objects[G].y=(v+O+rt)%rt,s.objects[G].ly=s.objects[G].y}}}}a&&(s.terrain=[...i.terrain]),eA(i),eA(s)}}var Fb,WY;function Aoe(){if(WY)return Fb;WY=1;function t(e,A){let n=0,r=0,s=0;for(;s<e.length;s++)n+=e[s];for(s=0,A*=n;A&&s<e.length;){if(r+=e[s],A<=r)return s;s++}return 0}return Fb=t,Fb}var $b,QY;function KY(){if(QY)return $b;QY=1;const t=Aoe(),e=function(){};return e.prototype.FMX=0,e.prototype.FMY=0,e.prototype.FMXxFMY=0,e.prototype.T=0,e.prototype.N=0,e.prototype.initiliazedField=!1,e.prototype.generationComplete=!1,e.prototype.wave=null,e.prototype.compatible=null,e.prototype.weightLogWeights=null,e.prototype.sumOfWeights=0,e.prototype.sumOfWeightLogWeights=0,e.prototype.startingEntropy=0,e.prototype.sumsOfOnes=null,e.prototype.sumsOfWeights=null,e.prototype.sumsOfWeightLogWeights=null,e.prototype.entropies=null,e.prototype.propagator=null,e.prototype.observed=null,e.prototype.distribution=null,e.prototype.stack=null,e.prototype.stackSize=0,e.prototype.DX=[-1,0,1,0],e.prototype.DY=[0,1,0,-1],e.prototype.opposite=[2,3,0,1],e.prototype.initialize=function(){this.distribution=new Array(this.T),this.wave=new Array(this.FMXxFMY),this.compatible=new Array(this.FMXxFMY);for(let A=0;A<this.FMXxFMY;A++){this.wave[A]=new Array(this.T),this.compatible[A]=new Array(this.T);for(let n=0;n<this.T;n++)this.compatible[A][n]=[0,0,0,0]}this.weightLogWeights=new Array(this.T),this.sumOfWeights=0,this.sumOfWeightLogWeights=0;for(let A=0;A<this.T;A++)this.weightLogWeights[A]=this.weights[A]*Math.log(this.weights[A]),this.sumOfWeights+=this.weights[A],this.sumOfWeightLogWeights+=this.weightLogWeights[A];this.startingEntropy=Math.log(this.sumOfWeights)-this.sumOfWeightLogWeights/this.sumOfWeights,this.sumsOfOnes=new Array(this.FMXxFMY),this.sumsOfWeights=new Array(this.FMXxFMY),this.sumsOfWeightLogWeights=new Array(this.FMXxFMY),this.entropies=new Array(this.FMXxFMY),this.stack=new Array(this.FMXxFMY*this.T),this.stackSize=0},e.prototype.observe=function(A){let n=1e3,r=-1;for(let o=0;o<this.FMXxFMY;o++){if(this.onBoundary(o%this.FMX,o/this.FMX|0))continue;const a=this.sumsOfOnes[o];if(a===0)return!1;const c=this.entropies[o];if(a>1&&c<=n){const l=1e-6*A();c+l<n&&(n=c+l,r=o)}}if(r===-1){this.observed=new Array(this.FMXxFMY);for(let o=0;o<this.FMXxFMY;o++)for(let a=0;a<this.T;a++)if(this.wave[o][a]){this.observed[o]=a;break}return!0}for(let o=0;o<this.T;o++)this.distribution[o]=this.wave[r][o]?this.weights[o]:0;const s=t(this.distribution,A()),i=this.wave[r];for(let o=0;o<this.T;o++)i[o]!==(o===s)&&this.ban(r,o);return null},e.prototype.propagate=function(){for(;this.stackSize>0;){const A=this.stack[this.stackSize-1];this.stackSize--;const n=A[0],r=n%this.FMX,s=n/this.FMX|0;for(let i=0;i<4;i++){const o=this.DX[i],a=this.DY[i];let c=r+o,l=s+a;if(this.onBoundary(c,l))continue;c<0?c+=this.FMX:c>=this.FMX&&(c-=this.FMX),l<0?l+=this.FMY:l>=this.FMY&&(l-=this.FMY);const u=c+l*this.FMX,f=this.propagator[i][A[1]],h=this.compatible[u];for(let d=0;d<f.length;d++){const m=f[d],p=h[m];p[i]--,p[i]==0&&this.ban(u,m)}}}},e.prototype.singleIteration=function(A){const n=this.observe(A);return n!==null?(this.generationComplete=n,!!n):(this.propagate(),null)},e.prototype.iterate=function(A,n){this.wave||this.initialize(),this.initiliazedField||this.clear(),A=A||0,n=n||Math.random;for(let r=0;r<A||A===0;r++){const s=this.singleIteration(n);if(s!==null)return!!s}return!0},e.prototype.generate=function(A){for(A=A||Math.random,this.wave||this.initialize(),this.clear();;){const n=this.singleIteration(A);if(n!==null)return!!n}},e.prototype.isGenerationComplete=function(){return this.generationComplete},e.prototype.ban=function(A,n){const r=this.compatible[A][n];for(let i=0;i<4;i++)r[i]=0;this.wave[A][n]=!1,this.stack[this.stackSize]=[A,n],this.stackSize++,this.sumsOfOnes[A]-=1,this.sumsOfWeights[A]-=this.weights[n],this.sumsOfWeightLogWeights[A]-=this.weightLogWeights[n];const s=this.sumsOfWeights[A];this.entropies[A]=Math.log(s)-this.sumsOfWeightLogWeights[A]/s},e.prototype.clear=function(){for(let A=0;A<this.FMXxFMY;A++){for(let n=0;n<this.T;n++){this.wave[A][n]=!0;for(let r=0;r<4;r++)this.compatible[A][n][r]=this.propagator[this.opposite[r]][n].length}this.sumsOfOnes[A]=this.weights.length,this.sumsOfWeights[A]=this.sumOfWeights,this.sumsOfWeightLogWeights[A]=this.sumOfWeightLogWeights,this.entropies[A]=this.startingEntropy}this.initiliazedField=!0,this.generationComplete=!1},$b=e,$b}var Vb,JY;function noe(){if(JY)return Vb;JY=1;const t=KY(),e=function(n,r,s,i,o,a,c,l,u,f){f=f||0,this.N=i,this.FMX=o,this.FMY=a,this.FMXxFMY=o*a,this.periodic=l;const h=r,d=new Array(h);for(let Y=0;Y<h;Y++)d[Y]=new Array(s);this.colors=[];const m={};for(let Y=0;Y<s;Y++)for(let D=0;D<r;D++){const N=(Y*r+D)*4,M=[n[N],n[N+1],n[N+2],n[N+3]],Z=M.join("-");m.hasOwnProperty(Z)||(m[Z]=this.colors.length,this.colors.push(M)),d[D][Y]=m[Z]}const p=this.colors.length,w=Math.pow(p,i*i),b=function(D){let N=new Array(i*i);for(let M=0;M<i;M++)for(let Z=0;Z<i;Z++)N[Z+M*i]=D(Z,M);return N},g=function(D,N){return b(function(M,Z){return d[(D+M)%r][(N+Z)%s]})},x=function(D){return b(function(N,M){return D[i-1-M+N*i]})},_=function(D){return b(function(N,M){return D[i-1-N+M*i]})},G=function(D){let N=0,M=1;for(let Z=0;Z<D.length;Z++)N+=D[D.length-1-Z]*M,M*=p;return N},y=function(D){let N=D,M=w;const Z=new Array(i*i);for(let R=0;R<Z.length;R++){M/=p;let I=0;for(;N>=M;)N-=M,I++;Z[R]=I}return Z},v={},O=[];for(let Y=0;Y<(c?s:s-i+1);Y++)for(let D=0;D<(c?r:r-i+1);D++){const N=new Array(8);N[0]=g(D,Y),N[1]=_(N[0]),N[2]=x(N[0]),N[3]=_(N[2]),N[4]=x(N[2]),N[5]=_(N[4]),N[6]=x(N[4]),N[7]=_(N[6]);for(let M=0;M<u;M++){const Z=G(N[M]);v[Z]?v[Z]++:(O.push(Z),v[Z]=1)}}this.T=O.length,this.ground=(f+this.T)%this.T,this.patterns=new Array(this.T),this.weights=new Array(this.T);for(let Y=0;Y<this.T;Y++){const D=parseInt(O[Y],10);this.patterns[Y]=y(D),this.weights[Y]=v[D]}const B=function(D,N,M,Z){const R=M<0?0:M,I=M<0?M+i:i,$=Z<0?0:Z,V=Z<0?Z+i:i;for(let q=$;q<V;q++)for(let C=R;C<I;C++)if(D[C+i*q]!=N[C-M+i*(q-Z)])return!1;return!0};this.propagator=new Array(4);for(let Y=0;Y<4;Y++){this.propagator[Y]=new Array(this.T);for(let D=0;D<this.T;D++){const N=[];for(let M=0;M<this.T;M++)B(this.patterns[D],this.patterns[M],this.DX[Y],this.DY[Y])&&N.push(M);this.propagator[Y][D]=N}}};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.onBoundary=function(A,n){return!this.periodic&&(A+this.N>this.FMX||n+this.N>this.FMY||A<0||n<0)},e.prototype.clear=function(){if(t.prototype.clear.call(this),this.ground!==0){for(let A=0;A<this.FMX;A++){for(let n=0;n<this.T;n++)n!==this.ground&&this.ban(A+(this.FMY-1)*this.FMX,n);for(let n=0;n<this.FMY-1;n++)this.ban(A+n*this.FMX,this.ground)}this.propagate()}},e.prototype.graphics=function(A){return A=A||new Uint8Array(this.FMXxFMY*4),this.isGenerationComplete()?this.graphicsComplete(A):this.graphicsIncomplete(A),A},e.prototype.graphicsComplete=function(A){for(let n=0;n<this.FMY;n++){const r=n<this.FMY-this.N+1?0:this.N-1;for(let s=0;s<this.FMX;s++){const i=s<this.FMX-this.N+1?0:this.N-1,o=(n*this.FMX+s)*4,a=this.colors[this.patterns[this.observed[s-i+(n-r)*this.FMX]][i+r*this.N]];A[o]=a[0],A[o+1]=a[1],A[o+2]=a[2],A[o+3]=a[3]}}},e.prototype.graphicsIncomplete=function(A){for(let n=0;n<this.FMXxFMY;n++){const r=n%this.FMX,s=n/this.FMX|0;let i=0,o=0,a=0,c=0,l=0;for(let f=0;f<this.N;f++)for(let h=0;h<this.N;h++){let d=r-h;d<0&&(d+=this.FMX);let m=s-f;if(m<0&&(m+=this.FMY),this.onBoundary(d,m))continue;const p=d+m*this.FMX;for(let w=0;w<this.T;w++)if(this.wave[p][w]){i++;const b=this.colors[this.patterns[w][h+f*this.N]];o+=b[0],a+=b[1],c+=b[2],l+=b[3]}}const u=n*4;A[u]=o/i,A[u+1]=a/i,A[u+2]=c/i,A[u+3]=l/i}},Vb=e,Vb}var qb,XY;function roe(){if(XY)return qb;XY=1;const t=KY(),e=function(n,r,s,i,o){const a=n.tilesize||16;this.FMX=s,this.FMY=i,this.FMXxFMY=s*i,this.periodic=o,this.tilesize=a;const c=!!n.unique;let l=null;r&&n.subsets&&n.subsets[r]&&(l=n.subsets[r]);const u=function(G){const y=new Array(a*a);for(let v=0;v<a;v++)for(let O=0;O<a;O++)y[O+v*a]=G(O,v);return y},f=function(G){return u(function(y,v){return G[a-1-v+y*a]})},h=function(G){return u(function(y,v){return G[a-1-y+v*a]})};this.tiles=[];const d=[],m=[],p={};let w,b,g;for(let _=0;_<n.tiles.length;_++){const G=n.tiles[_];if(l!==null&&l.indexOf(G.name)===-1)continue;switch(G.symmetry){case"L":g=4,w=function(v){return(v+1)%4},b=function(v){return v%2===0?v+1:v-1};break;case"T":g=4,w=function(v){return(v+1)%4},b=function(v){return v%2===0?v:4-v};break;case"I":g=2,w=function(v){return 1-v},b=function(v){return v};break;case"\\":g=2,w=function(v){return 1-v},b=function(v){return 1-v};break;case"F":g=8,w=function(v){return v<4?(v+1)%4:4+(v-1)%4},b=function(v){return v<4?v+4:v-4};break;default:g=1,w=function(v){return v},b=function(v){return v};break}this.T=m.length,p[G.name]=this.T;for(let v=0;v<g;v++)m.push([this.T+v,this.T+w(v),this.T+w(w(v)),this.T+w(w(w(v))),this.T+b(v),this.T+b(w(v)),this.T+b(w(w(v))),this.T+b(w(w(w(v))))]);let y;if(c)for(let v=0;v<g;v++)y=G.bitmap[v],this.tiles.push(u(function(O,B){return[y[(a*B+O)*4],y[(a*B+O)*4+1],y[(a*B+O)*4+2],y[(a*B+O)*4+3]]}));else{y=G.bitmap,this.tiles.push(u(function(v,O){return[y[(a*O+v)*4],y[(a*O+v)*4+1],y[(a*O+v)*4+2],y[(a*O+v)*4+3]]}));for(let v=1;v<g;v++)this.tiles.push(v<4?f(this.tiles[this.T+v-1]):h(this.tiles[this.T+v-4]))}for(let v=0;v<g;v++)d.push(G.weight||1)}this.T=m.length,this.weights=d,this.propagator=new Array(4);const x=new Array(4);for(let _=0;_<4;_++){this.propagator[_]=new Array(this.T),x[_]=new Array(this.T);for(let G=0;G<this.T;G++){x[_][G]=new Array(this.T);for(let y=0;y<this.T;y++)x[_][G][y]=!1}}for(let _=0;_<n.neighbors.length;_++){const G=n.neighbors[_],y=G.left.split(" ").filter(function(N){return N.length}),v=G.right.split(" ").filter(function(N){return N.length});if(l!==null&&(l.indexOf(y[0])===-1||l.indexOf(v[0])===-1))continue;const O=m[p[y[0]]][y.length==1?0:parseInt(y[1],10)],B=m[O][1],Y=m[p[v[0]]][v.length==1?0:parseInt(v[1],10)],D=m[Y][1];x[0][Y][O]=!0,x[0][m[Y][6]][m[O][6]]=!0,x[0][m[O][4]][m[Y][4]]=!0,x[0][m[O][2]][m[Y][2]]=!0,x[1][D][B]=!0,x[1][m[B][6]][m[D][6]]=!0,x[1][m[D][4]][m[B][4]]=!0,x[1][m[B][2]][m[D][2]]=!0}for(let _=0;_<this.T;_++)for(let G=0;G<this.T;G++)x[2][_][G]=x[0][G][_],x[3][_][G]=x[1][G][_];for(let _=0;_<4;_++)for(let G=0;G<this.T;G++){const y=[],v=x[_][G];for(let O=0;O<this.T;O++)v[O]&&y.push(O);this.propagator[_][G]=y}};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.onBoundary=function(A,n){return!this.periodic&&(A<0||n<0||A>=this.FMX||n>=this.FMY)},e.prototype.graphics=function(A,n){return A=A||new Uint8Array(this.FMXxFMY*this.tilesize*this.tilesize*4),this.isGenerationComplete()?this.graphicsComplete(A):this.graphicsIncomplete(A,n),A},e.prototype.graphicsComplete=function(A){for(let n=0;n<this.FMX;n++)for(let r=0;r<this.FMY;r++){const s=this.tiles[this.observed[n+r*this.FMX]];for(let i=0;i<this.tilesize;i++)for(let o=0;o<this.tilesize;o++){const a=(n*this.tilesize+o+(r*this.tilesize+i)*this.FMX*this.tilesize)*4,c=s[o+i*this.tilesize];A[a]=c[0],A[a+1]=c[1],A[a+2]=c[2],A[a+3]=c[3]}}},e.prototype.graphicsIncomplete=function(A,n){(!n||n.length!==4)&&(n=!1);for(let r=0;r<this.FMX;r++)for(let s=0;s<this.FMY;s++){const i=this.wave[r+s*this.FMX];let o=0,a=0;for(let l=0;l<this.T;l++)i[l]&&(o++,a+=this.weights[l]);const c=1/a;for(let l=0;l<this.tilesize;l++)for(let u=0;u<this.tilesize;u++){const f=(r*this.tilesize+u+(s*this.tilesize+l)*this.FMX*this.tilesize)*4;if(n&&o===this.T)A[f]=n[0],A[f+1]=n[1],A[f+2]=n[2],A[f+3]=n[3];else{let h=0,d=0,m=0,p=0;for(let w=0;w<this.T;w++)if(i[w]){const b=this.tiles[w][u+l*this.tilesize],g=this.weights[w]*c;h+=b[0]*g,d+=b[1]*g,m+=b[2]*g,p+=b[3]*g}A[f]=h,A[f+1]=d,A[f+2]=m,A[f+3]=p}}}},qb=e,qb}var Wb,e4;function soe(){return e4||(e4=1,Wb={OverlappingModel:noe(),SimpleTiledModel:roe()}),Wb}var ioe=soe(),ooe=di(ioe);function t4(t,e,A,n,r,s,i){if(!E(k.book))return!1;const o=k.book,a=ct(t);if(!E(a))return!1;const c=ct(e);if(!E(c))return!1;eA(a),eA(c);let l=0;const u=new Map,f=new Map;let h=0;const d=32,m=new Uint8Array(Up*4);for(let x=0;x<rt;++x)for(let _=0;_<Ie;++_){const G=nt(c,{x:_,y:x}),y=G?.char??0,v=G?.color??d,O=G?.bg??d;let B=0;const Y=Zn(G),D=je(Y?.name??"empty"),N=u.get(D);Ne(N)?B=N:(B=l,u.set(D,l),f.set(l,D),l++),m[h++]=y,m[h++]=v,m[h++]=O,m[h++]=B}const p=s.x-r.x+1,w=s.y-r.y+1,b=new ooe.OverlappingModel(m,Ie,rt,A,p,w,!0,!1,n);if(!b.generate())return!1;h=0;const g=b.graphics();for(let x=r.y;x<=s.y;++x)for(let _=r.x;_<=s.x;++_){const G={x:_,y:x},y=g[h++],v=g[h++],O=g[h++],B=g[h++];switch(i){case"all":{const M=nt(a,{x:_,y:x});Mt(M)&&UA(a,M,o.timestamp),Wt(a,{x:_,y:x});break}case"object":{const M=nt(a,{x:_,y:x});Mt(M)&&UA(a,M,o.timestamp);break}case"terrain":Wt(a,{x:_,y:x});break}let Y=f.get(B)??"";const D=Zn({kind:Y});switch(i){case"all":break;case"object":Mt(D)||(Y="");break;case"terrain":Mt(D)&&(Y="");break;default:if(qe(D,"group")!==i&&(Y=""),Y){const M=nt(a,{x:_,y:x});Mt(M)&&UA(a,M,o.timestamp),Wt(a,{x:_,y:x})}break}const N=Y?In(a,[Y],G):void 0;if(!(!E(N)||!E(D))&&(io(N,D),y>0&&(N.char=y),v<d&&(N.color=v),O<d&&(N.bg=O),Mt(N))){const M=qn(ha(c,Y));E(M)&&(Wt(a,{...cr(c,M.x??0,M.y??0),x:_,y:x}),io(N,M))}}return!0}function A4(t){return`zss_snapshot_${t}`}const n4={x:0,y:0},r4={x:Ie-1,y:rt-1},s4="all";function aoe(t){const e=ct(t);if(!E(e))return;const A=HA(),n=A4(e.id);for(let s=0;s<A.length;++s)N8(A[s],n);const r=ct(n);if(E(r))return jf(t,r.id,n4,r4,s4),r}function coe(t){const e=ct(t);if(!E(e))return;const A=A4(e.id),n=ct(A);if(E(n))return jf(n.id,t,n4,r4,s4),n}function loe(t,e,A,n,r,s){switch(s){case"all":case"object":case"terrain":break;default:return uoe(t,e,r,s)}if(!E(k.book))return;const i=ct(t);if(!E(i))return;const o=s_();eA(i);for(let a=A.y;a<=n.y;++a)for(let c=A.x;c<=n.x;++c){let l=!1,u=!1;switch(s){case"all":l=!0,u=!0;break;case"object":l=!0;break;case"terrain":u=!0;break}const f=(c+e.x+Ie)%Ie,h=(a+e.y+rt)%rt;if(l){const d=nt(i,{x:c,y:a});Mt(d)&&E(d?.x)&&E(d?.y)&&(d.x=f,d.lx=f,d.y=h,d.ly=h)}u&&(o.terrain[f+h*Ie]=i.terrain[c+a*Ie])}(s==="all"||s==="terrain")&&(i.terrain=[...o.terrain]),eA(i)}function uoe(t,e,A,n){if(!E(k.book))return;const r=k.book,s=ct(t);if(!E(s))return;eA(s);const{terrainelements:i,objectelements:o}=h4(s,A,n);if(i.length===0&&o.length===0)return;e.x<0&&(i.sort((h,d)=>{const m=h.x??0,p=d.x??0;return m-p}),o.sort((h,d)=>{const m=h.x??0,p=d.x??0;return m-p})),e.x>0&&(i.sort((h,d)=>{const m=h.x??0;return(d.x??0)-m}),o.sort((h,d)=>{const m=h.x??0;return(d.x??0)-m})),e.y<0&&(i.sort((h,d)=>{const m=h.y??0,p=d.y??0;return m-p}),o.sort((h,d)=>{const m=h.y??0,p=d.y??0;return m-p})),e.y>0&&(i.sort((h,d)=>{const m=h.y??0;return(d.y??0)-m}),o.sort((h,d)=>{const m=h.y??0;return(d.y??0)-m}));const a=o.map(h=>h.id??""),c=i.map(h=>wn({x:h.x??0,y:h.y??0},Ie)),l=[],u=[];for(let h=0;h<i.length;++h){const d=i[h],m={x:d.x??-1,y:d.y??-1},p=nt(s,m);E(p)&&Mt(p)&&(l.push(p.id??""),l.push(p.id??""),u.push(wn({x:p.x??0,y:p.y??0},Ie)))}let f=!1;for(let h=0;h<i.length;++h){const d=i[h],m=qe(d,"collision"),p={x:d.x??-1,y:d.y??-1},w=wn(p,Ie),b={x:p.x+e.x,y:p.y+e.y};if(ai(b)){const g=nt(s,b),x=g?.id??"",_=wn({x:g?.x??0,y:g?.y??0},Ie),G=qe(g,"collision");if(E(g)&&Mt(g)&&l.includes(x)!==!0&&a.includes(x)!==!0){let y=!1;const v=u.includes(w),O=v?nt(s,p):void 0,B=v?qe(O,"pushable"):!1,Y=v&&B;if(o0(d,g)&&(m!==$e.ISWALK||v)){let D=v;E(O)&&B&&(f=Hn(r,s,O,{x:(O.x??0)-e.x,y:(O.y??0)-e.y})!==!0,f||(D=!1)),(D||m!==$e.ISWALK)&&(f=Hn(r,s,g,{x:(g.x??0)+e.x,y:(g.y??0)+e.y})!==!0,f&&(y=Y))}else(m!==$e.ISWALK||Y)&&(f=!0,y=Y);y&&E(O)&&(f=Hn(r,s,O,{x:(O.x??0)-e.x,y:(O.y??0)-e.y})!==!0)}else G===$e.ISSOLID&&c.includes(_)===!1&&(f=!0)}else f=!0}if(!f){for(let h=0;h<o.length;++h){const d=o[h],m=qe(d,"collision"),p={x:d.x??0,y:d.y??0},w={x:p.x+e.x,y:p.y+e.y};if(ai(w)){const b=nt(s,w),g=b?.id??"",x=qe(b,"collision"),_=qe(b,"group");E(b)&&Mt(b)&&l.includes(g)&&a.includes(g)!==!0?o0(d,b)?f=Hn(r,s,b,w)!==!0:f=!0:so(m,x)&&n!==_&&(f=!0)}else f=!0}if(!f){for(let h=0;h<i.length;++h){const d=i[h],m={x:d.x??-1,y:d.y??-1},p={x:m.x+e.x,y:m.y+e.y},w=cr(s,p.x,p.y);if(E(d)&&E(w)){Wt(s,{...d,x:p.x,y:p.y}),Wt(s,{...w,x:m.x,y:m.y});const b=nt(s,m);Mt(b)&&E(b)&&(b.x=(b.x??0)+e.x,b.y=(b.y??0)+e.y,b.lx=(b.lx??0)+e.x,b.ly=(b.ly??0)+e.y)}}eA(s);for(let h=0;h<o.length;++h){const d=o[h],m={x:d.x??-1,y:d.y??-1},p={x:m.x+e.x,y:m.y+e.y};if(!Hn(r,s,d,p))break}eA(s)}}}function od(t,e){let A="all";const n={x:0,y:0},r={x:Ie-1,y:rt-1};for(let s=e;s<t.length;){const[i,o]=ce(t,s,[K.MAYBE_NUMBER_OR_STRING]);if(xe(i))A=je(i),s=o;else if(Ne(i)){const[a,c,l,u]=ce(t,o,[K.NUMBER,K.MAYBE_NUMBER,K.MAYBE_NUMBER]);n.x=Math.min(i,c??i),n.y=Math.min(a,l??a),r.x=Math.max(i,c??i),r.y=Math.max(a,l??a),s=u}else break}return{targetset:A,pt1:n,pt2:r}}function i4(t,e){const A=HA();for(let n=0;n<A.length;++n){const r=A[n],s=qn(n0(r,t,e));if(E(s))return s}}const hoe=qs().command("snapshot",()=>(!E(k.book)||!E(k.board)||aoe(k.board.id),0)).command("revert",()=>(!E(k.book)||!E(k.board)||coe(k.board.id),0)).command("copy",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.STRING]),r=i4(Ye.BOARD,A);if(E(r)){const s=od(e,n);jf(r.id,k.board.id,s.pt1,s.pt2,s.targetset)}return 0}).command("remix",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n,r,s]=ce(e,0,[K.STRING,K.NUMBER,K.NUMBER]),i=i4(Ye.BOARD,A);if(E(i)){const o=od(e,s);t4(k.board.id,i.id,n,r,o.pt1,o.pt2,o.targetset)}return 0}).command("weave",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.DIR]),r={x:A.destpt.x-(k.element?.x??0),y:A.destpt.y-(k.element?.y??0)},s=od(e,n);return loe(k.board.id,r,s.pt1,s.pt2,k.elementid,s.targetset),0}).command("pivot",(t,e)=>{if(!E(k.book)||!E(k.board))return 0;const[A,n]=ce(e,0,[K.NUMBER]),r=od(e,n);return toe(k.board.id,O1(A),r.pt1,r.pt2,r.targetset),0});var oi=(t=>(t[t.ERROR=0]="ERROR",t[t.CLI=1]="CLI",t[t.LOADER=2]="LOADER",t[t.RUNTIME=3]="RUNTIME",t))(oi||{});const foe={audio:Rf,board:$9,cli:Tie,element:Pie,runtime:eoe,loader:Jie,network:Xie,transform:hoe},Qb=["audio","board","network","transform","element"],doe={0:[],1:["cli",...Qb],2:["loader",...Qb],3:["runtime",...Qb]},moe={0:new Map,1:new Map,2:new Map,3:new Map};function ba(t){return(doe[t]??[]).map(A=>foe[A]).filter(E)}function Kb(t){const e=[],A=ba(t);for(let n=0;n<A.length;++n)e.push(...A[n].listcommands());return e}function poe(t,e){const A=moe[t];if(!A.has(e)){let n;const r=ba(t);for(let s=0;s<r.length&&(n=r[s].getcommand(e),!E(n));++s);A.set(e,n)}return A.get(e)}function goe(t,e,A){const n=ba(t);for(let r=0;r<n.length;++r){const s=n[r];if(s.get!==void 0){const[i,o]=s.get(e,A);if(i)return[i,o]}}return[!1,void 0]}function woe(t,e,A,n){const r=ba(t);for(let s=0;s<r.length;++s){const i=r[s];if(i.set!==void 0){const[o]=i.set(e,A,n);if(o)return[o,n]}}return[!1,void 0]}function boe(t,e){const A=ba(t);for(let n=0;n<A.length;++n)A[n].everytick(e)}function _oe(t,e){const A=ba(t);for(let n=0;n<A.length;++n)A[n].aftertick(e)}function Jb(t){return st(t)?t.length>0?1:0:t??0}function xoe(t){return`${t}_chip`}function o4(t=""){return`vm:${t??""}`}function yoe(t,e,A){const n=xoe(t),r=on(n);let s;const i=FA(Object.entries(A.labels??{}));(!st(r.lb)||r.lb.length!==i.length)&&(r.lb=i,r.lk="",r.sk="",r.mg=void 0,r.ec=1,r.lc=0,r.ys=0,r.ps=0,r.es=(A.errors?.length??0)!==0?1:0);function o(c,l){k.words=l;const u=poe(e,c);return E(u)?u(a,l):c!=="send"?o("shortsend",[c,...l]):0}const a={halt(){XU(n)},id(){return t},set(c,l){const[u,f]=woe(e,a,c,l);if(u)return f},get(c){const[l,u]=goe(e,a,c);if(l)return u},once(){r.lc=0,r.ys=0,k.get=a.get;try{s?.(a)||(r.es=1)}catch(c){xt(Ae,k.elementfocus,"crash",c.message),r.es=1}},tick(c){const l=Ne(r.ps)?r.ps:0,u=l%c===0;if(r.ps=l+1,u===!1)return!1;boe(e,a);const f=a.shouldtick();return f&&a.once(),_oe(e,a),f},isended(){return r.es===1},isfirstpulse(){return r.ps===1},shouldtick(){return!r.sk&&(r.es===0||a.hm()!==0)},checkcount(){return Ne(r.lc)?++r.lc>GU.YIELD_AT_COUNT:!0},haslabel(c){if(st(r.lb))for(let l=0;l<r.lb.length;++l){const[u,f]=r.lb[l];if(u===c)return(f.find(d=>Ne(d)&&d>0)??0)>0}return!1},hm(){if(st(r.mg)&&st(r.lb)){const[c]=r.mg;if(E(c))for(let l=0;l<r.lb.length;++l){const[u,f]=r.lb[l];if(u===c)return f.find(h=>Ne(h)&&h>0)??0}}return 0},yield(){r.ys=1},jump(c){r.ec=c},sy(){return!!r.ys||a.checkcount()},send(c,l,u,f){Ae.emit(c,`${o4(l)}:${u}`,f)},lock(c){r.lk=c},unlock(){r.lk=""},scrolllock(c){r.sk=c},scrollunlock(c){r.sk===c&&(r.sk="")},message(c){r.sk&&c.player!==r.sk||r.lk&&c.sender!==r.lk||a.haslabel(c.target)&&(r.mg=[c.target,c.data,c.sender,c.player])},zap(c){if(st(r.lb))for(let l=0;l<r.lb.length;++l){const u=r.lb[l];if(u[0]===c){const f=u[1].findIndex(h=>h>0);if(f>=0&&E(u[1])){u[1][f]*=-1;break}}}},restore(c){if(st(r.lb))for(let l=0;l<r.lb.length;++l){const u=r.lb[l];if(u[0]===c)for(let f=0;f<u[1].length;f++)u[1][f]=Math.abs(u[1][f])}},getcase(){r.ec=Ne(r.ec)?r.ec:1;const c=a.hm();if(c&&st(r.mg)){const[,l,u,f]=r.mg;a.set("senderid",u),E(l)&&a.set("arg",l),f&&(a.set("player",f),k.elementfocus=f),r.mg=void 0,r.ys=0,r.es=0,r.ec=c}return r.ec},nextcase(){const c=Ne(r.ec)?r.ec:1;return r.ec=c+1,r.ec},endofprogram(){a.yield(),r.es=1},stacktrace(c){const l=lF.parse(c),[u]=l.filter(f=>f.fileName===Ef);return{line:u?.lineNumber??0,column:u?.columnNumber??0}},text(c){return o("text",[c])},stat(...c){return o("stat",c)},hyperlink(...c){return o("hyperlink",c)},print(c){return st(c)?`array ${c.length} ${c.length===1?"item":"items"}`:typeof c=="object"?`obj ${Object.keys(c).join(", ")}`:c},template(c){return kf(c.join(" "),!0).tokens.map(u=>{if(u.tokenType===Bf){const f=a.get(u.image.substring(1));if(E(f))return f}return u.image}).join(" ")},command(...c){if(c.length===0)return 0;const[l,...u]=c;return o(je(Ct(l)),u)},if(...c){const[l,u]=ce(c,0,[K.ANY]),f=Jb(l);return f&&u<c.length&&a.command(...c.slice(u)),f?1:0},try(...c){const[,l]=ce(c,0,[K.DIR]),u=a.command("go",...c);return u&&l<c.length&&a.command(...c.slice(l)),u?1:0},take(...c){const[l,u,f]=ce(c,0,[K.NAME,K.ANY]),h=Ne(u),d=h?f:1,m=a.get(l),p=h?u:1;if(!Ne(m))return d<c.length&&a.command(...c.slice(d)),1;const w=m-p;return w<0?(d<c.length&&a.command(...c.slice(d)),1):(a.set(l,w),0)},give(...c){const[l,u,f]=ce(c,0,[K.NAME,K.ANY]),h=Ne(u),d=h?f:1,m=a.get(l),p=h?u:1,w=m===void 0?1:0;return w&&d<c.length&&a.command(...c.slice(d)),a.set(l,Cs(m,0)+p),w},duplicate(...c){return a.command("duplicate",...c)},repeatstart(c,...l){const[u,f]=ce(l,0,[K.NUMBER]),h=`repeatcount${c}`,d=`repeatwords${c}`;r[h]=u,r[d]=f<l.length?l.slice(f):void 0},repeat(c){const l=`repeatcount${c}`,u=`repeatwords${c}`;if(!Ne(r[l]))return 0;const f=r[l];r[l]=f-1;const h=f>0,d=r[u];return h&&st(d)&&a.command(...d),h?1:0},foreachstart(c,...l){const[u,f]=ce(l,0,[K.NAME,K.ANY]);if(st(f)){const h=`${u}_values`,d=FA(f);a.set(u,d.shift()),a.set(h,d)}else{const[,h,d,m]=ce(l,0,[K.NAME,K.NUMBER,K.NUMBER,K.MAYBE_NUMBER]);let p=Math.min(h,d),w=Math.max(h,d);const b=(m??0)||1;if(b<0){const g=p;p=w,w=g}a.set(u,p-b)}return 0},foreach(c,...l){const[u,f]=ce(l,0,[K.NAME,K.ANY]);if(st(f)){const G=`${u}_values`,y=a.get(G),v=y.shift();return a.set(u,v),y.length>0?1:0}const[,h,d,m,p]=ce(l,0,[K.NAME,K.NUMBER,K.NUMBER,K.MAYBE_NUMBER]);let w=Math.min(h,d),b=Math.max(h,d);const g=(m??0)||1;if(g<0){const G=w;w=b,b=G}let x=a.get(u);!Ne(x)||x<w||x>b?x=w:x+=g;const _=x<=b?1:0;return _&&(a.set(u,x),p<l.length&&a.command(...l.slice(p))),_},waitfor(...c){const[l]=ce(c,0,[K.ANY]),u=Jb(l);return u||a.yield(),u?1:0},or(...c){let l=0;for(let u=0;u<c.length;){const[f,h]=ce(c,u,[K.ANY]);if(l=f,l)break;u=h}return l},and(...c){let l=0;for(let u=0;u<c.length;){const[f,h]=ce(c,u,[K.ANY]);if(l=f,!l)break;u=h}return l},not(...c){const[l]=ce(c,0,[K.ANY]);return Jb(l)?0:1},expr(...c){const[l]=ce(c,0,[K.ANY]);return l},isEq(c,l){const[u]=ce([c],0,[K.ANY]),[f]=ce([l],0,[K.ANY]);return typeof u=="object"||typeof f=="object"?cC(u,f)?1:0:u===f?1:0},isNotEq(c,l){return this.isEq(c,l)?0:1},isLessThan(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u<f?1:0},isGreaterThan(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u>f?1:0},isLessThanOrEq(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u<=f?1:0},isGreaterThanOrEq(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u>=f?1:0},opPlus(c,l){const[u]=ce([c],0,[K.ANY]),[f]=ce([l],0,[K.ANY]);return u+f},opMinus(c,l){const[u]=ce([c],0,[K.ANY]),[f]=ce([l],0,[K.ANY]);return u-f},opPower(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return Math.pow(u,f)},opMultiply(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u*f},opDivide(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u/f},opModDivide(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return u%f},opFloorDivide(c,l){const[u]=ce([c],0,[K.NUMBER]),[f]=ce([l],0,[K.NUMBER]);return Math.floor(u/f)},opUniPlus(c){const[l]=ce([c],0,[K.NUMBER]);return+l},opUniMinus(c){const[l]=ce([c],0,[K.NUMBER]);return-l}};return s=A.code,a}function a4(t,e){const A=$t(t.id),n=$t(t.party??t.id),r=t.kind==="object"||t.kind==="scroll";let s="";t.party&&n&&(s=t.party),A&&(s=t.id??"");const i=$t(e.party??e.id),o=e.kind==="object"||e.kind==="scroll";return{sameparty:n===i&&!o&&!r,fromelementplayer:s}}function c4(t,e,A,n){const r=wt(He.MAIN);if(!E(r))return;function s(i){for(let o=0;o<i.length;++o){const a=i[o];if(E(a.id)){const c=`${o4(a.id)}:${e}`;Ae.emit("",c,A)}}}if(Rs(t)){for(let i=0;i<n.length;++i){const o=n[i],a=nt(o,t);E(a)&&s([a])}return}for(let i=0;i<n.length;++i){const o=n[i];switch(je(t)){case"all":case"self":case"others":{s(Object.values(o.objects));break}default:{s(QO(o,[t]));break}}}}function nA(t,e,A){if(!E(k.board)||!E(t))return;const n=$t(t.id),r=$t(e.id);let s=A,i=n&&!r?t.id??"":"";switch(A){case"shot":{const{sameparty:o,fromelementplayer:a}=a4(t,e);o&&Mt(e)?s="partyshot":i=a;break}case"touch":{const{sameparty:o,fromelementplayer:a}=a4(t,e);o?s="bump":i=a;break}}if(s==="shot"&&qe(e,"breakable")&&UA(k.board,e,k.timestamp),E(e?.id)){let o="";E(t?.id)?o=t.id:o=`${wn({x:t.x??0,y:t.y??0},Ie)}`,tY({id:rA(),session:Ae.session(),player:i,sender:o,target:`${e.id}:${s}`,data:void 0})}}function _a(t,e,A){if(E(A.targetname)){const n=Object.keys(k.board?.objects??{});switch(A.targetname){case"all":for(let r=0;r<n.length;++r){const s=n[r],i=uA(k.board,s);E(i)&&nA(e,i,A.label)}break;case"others":for(let r=0;r<n.length;++r){const s=n[r],i=uA(k.board,s);s!==t.id()&&E(i)&&nA(e,i,A.label)}break;case"sender":{const r=A_(k.board,k.element?.sender??"");E(r)&&Mt(r)&&nA(e,r,A.label);break}case"self":k.elementid!==t.id()?t.send(k.elementfocus,k.elementid,A.label):E(k.element)&&nA(e,k.element,A.label);break;case"ping":{const r=wt(He.MAIN),s=Cf(r);c4("all",A.label,void 0,s);break}default:{const r=QO(k.board,[A.targetname]);for(let s=0;s<r.length;++s){const i=r[s];E(i)&&nA(e,i,A.label)}break}}}else if(E(A.targetdir))if(A.targetdir.targets.length)for(let n=0;n<A.targetdir.targets.length;++n){const r=nt(k.board,A.targetdir.targets[n]);E(r)&&nA(e,r,A.label)}else{const n=nt(k.board,A.targetdir.destpt);E(n)&&nA(e,n,A.label)}}function Xb(t,e,A){!E(t)||!E(e?.id)||Vd(Ae,t,`${LY(e)}${A}`)}function e_(t,e,A,n=!1){if(!E(t)||!E(t.lookup)||A.x<0||A.x>=Ie||A.y<0||A.y>=rt)return{name:"edge",kind:"edge",collision:$e.ISSOLID,x:A.x,y:A.y};const r=A.x+A.y*Ie,s=uA(t,t.lookup[r]??"404");if(E(s))return n&&$t(s.id)?void 0:s;const i=t.terrain[r];if(E(i)&&so(e,qe(i,"collision")))return i}function Goe(t,e,A){const n=uA(t,e?.id??""),r=n?.x??-1,s=n?.y??-1;if(r-A.x===0&&s-A.y===0)return!0;const i=qe(n,"collision"),o=e_(t,i,A);return E(o)}function Moe(t,e){const A=[];if(!E(t))return A;const n=Object.values(t.objects);for(let r=0;r<n.length;++r){const s=n[r];E(s.id)&&E(s.removed)&&e-s.removed>wx*5&&(A.push(s.id),l4(t,s.id))}return A}function t_(t,e,A){const n=uA(t,e?.id??"");if(!E(t)||!E(n)||!E(n.x)||!E(n.y)||!E(t.lookup)||A.x<0||A.x>=Ie||A.y<0||A.y>=rt)return{name:"edge",kind:"edge",collision:$e.ISSOLID,x:A.x,y:A.y};if(n.x-A.x===0&&n.y-A.y===0)return;const r=Os(t,n),s=Os(t,A),i=qe(n,"collision");if(i===$e.ISGHOST){n.x=A.x,n.y=A.y;return}const o=$t(n?.id),a=uA(t,t.lookup[s]??"");if(qe(a,"collision")===$e.ISGHOST)return;const c=$t(a?.id??"");if(E(a)&&(!o||!c))return{...a};const l=t.terrain[s],u=qe(l,"collision");if(so(i,u))return{...l,x:A.x,y:A.y};n.x=A.x,n.y=A.y,E(n.removed)||(t.lookup[r]=void 0,t.lookup[s]=n.id??"")}function Hn(t,e,A,n,r={}){if(!E(A?.id))return!1;let s=t_(e,A,n);const i=qe(A,"collision"),o=$t(A.id),a=i===$e.ISBULLET;if(i!==$e.ISBULLET&&E(s)&&Mt(s)){const c=cr(e,s.x??-1,s.y??-1),l=qe(c,"collision");if(!so(i,l)){const u=$t(A?.id),f=!!qe(s,"item"),h=o0(A,s),d=s.id??"";if(h&&(!u||!f)&&!r[d]){r[d]=!0;const m=Wn({x:A.x??0,y:A.y??0},n),p=Jt({x:s.x??0,y:s.y??0},m);!Hn(t,e,s,p)&&u&&nA(A,s,"touch")}s=t_(e,A,n)}}if(E(s)){const c=$t(s.id),l=qe(s,"collision")===$e.ISBULLET,u=s.kind==="edge";return o?u?Ooe(t,e,A,n)||nA(s,A,"thud"):l?(e?.restartonzap&&d4(t,e,A,A.id??""),nA(s,A,"shot"),nA(A,s,"thud")):(nA(s,A,"touch"),nA(A,s,"touch")):a?l?(nA(s,A,"thud"),nA(A,s,"thud")):(c&&e?.restartonzap&&d4(t,e,s,s.id??""),nA(s,A,"thud"),nA(A,s,"shot")):c?(nA(s,A,"touch"),nA(A,s,"touch")):l?(nA(s,A,"shot"),nA(A,s,"thud")):(nA(s,A,"thud"),nA(A,s,"bump")),!1}return!0}function voe(){return new Array(Ie*rt).map(()=>{})}function l4(t,e){return E(t?.objects[e])?(delete t.objects[e],!0):!1}function Os(t,e){return!E(t)||!E(e?.x)||!E(e?.y)||e.x<0||e.x>=Ie||e.y<0||e.y>=rt?-1:e.x+e.y*Ie}function nt(t,e){const A=Os(t,e);if(A<0||!E(t?.lookup))return;const n=uA(t,t.lookup[A]??"");return E(n)?n:t.terrain[A]}function A_(t,e){const A=uA(t,e);if(E(A))return A;const n=parseFloat(e),r=iR(isNaN(n)?-1:n,Ie);return cr(t,r.x,r.y)}function fo(t,e,A,n,r){const s=De.MID;if(!E(t)||!E(e))return{dir:n,startpt:r,destpt:r,layer:s,targets:[]};const i={x:e.x??0,y:e.y??0},o={x:i.x+(e.stepx??0),y:i.y+(e.stepy??0)},a=Wn(i,o);for(let c=0;c<n.length;++c){const l=P1(n[c]);switch(l){case De.IDLE:break;case De.NORTH:case De.SOUTH:case De.WEST:case De.EAST:Jt(i,l);break;case De.BY:{const[u,f]=n.slice(c+1);Ne(u)&&Ne(f)&&(i.x+=u,i.y+=f),c+=2;break}case De.TO:{const[u,f]=n.slice(c+1);Ne(u)&&Ne(f)&&(i.x=u,i.y=f),c+=2;break}case De.AT:{const[u,f]=n.slice(c+1);Ne(u)&&Ne(f)&&(i.x=u,i.y=f),c+=2;break}case De.FLOW:Jt(i,a);break;case De.SEEK:{const u=Boe(t,e,A);Rs(u)&&Jt(i,Wn(r,u));break}case De.RNDNS:Jt(i,qn(De.NORTH,De.SOUTH));break;case De.RNDNE:Jt(i,qn(De.NORTH,De.EAST));break;case De.RND:Jt(i,qn(De.NORTH,De.SOUTH,De.WEST,De.EAST));break;case De.CW:case De.CCW:case De.OPP:case De.RNDP:{const u=fo(t,e,A,n.slice(c+1),r);switch(i.x=r.x,i.y=r.y,l){case De.CW:switch(Wn(r,u.destpt)){case De.NORTH:Jt(i,De.EAST);break;case De.SOUTH:Jt(i,De.WEST);break;case De.EAST:Jt(i,De.SOUTH);break;case De.WEST:Jt(i,De.NORTH);break}break;case De.CCW:switch(Wn(r,u.destpt)){case De.NORTH:Jt(i,De.WEST);break;case De.SOUTH:Jt(i,De.EAST);break;case De.EAST:Jt(i,De.NORTH);break;case De.WEST:Jt(i,De.SOUTH);break}break;case De.OPP:switch(Wn(r,u.destpt)){case De.NORTH:Jt(i,De.SOUTH);break;case De.SOUTH:Jt(i,De.NORTH);break;case De.EAST:Jt(i,De.WEST);break;case De.WEST:Jt(i,De.EAST);break}break;case De.RNDP:switch(Wn(r,u.destpt)){case De.NORTH:case De.SOUTH:i.x+=qn(-1,1);break;case De.WEST:case De.EAST:i.y+=qn(-1,1);break}break}return{dir:n,startpt:r,destpt:i,layer:s,targets:[]}}case De.FLEE:break;case De.FIND:break;case De.AWAY:{const[u,f]=n.slice(c+1);if(Ne(u)&&Ne(f)){const h={x:u,y:f},d=h.x-i.x,m=h.y-i.y;if(Math.abs(d)>1||Math.abs(m)>1){const p=qe(e,"collision"),w=XO(t,p,i,h,!0);if(E(w)&&(w.x!==u||w.y!==f)){const b=u4(t,w);E(b)||(i.x=w.x,i.y=w.y)}}else{const p=zp(-d,-m);Jt(i,p)}}c+=2;break}case De.TOWARD:{const[u,f]=n.slice(c+1);if(Ne(u)&&Ne(f)){const h={x:u,y:f},d=h.x-i.x,m=h.y-i.y;if(Math.abs(d)>1||Math.abs(m)>1){const p=qe(e,"collision"),w=XO(t,p,i,h,!1);if(E(w)&&(w.x!==u||w.y!==f)){const b=u4(t,w);E(b)||(i.x=w.x,i.y=w.y)}}else{const p=zp(d,m);Jt(i,p)}}c+=2;break}case De.MID:case De.OVER:case De.UNDER:case De.GROUND:{const u=fo(t,e,A,n.slice(c+1),r);return u.layer=l,u}case De.WITHIN:{const[u]=n.slice(c+1),f=fo(t,e,A,n.slice(c+2),r);if(f.targets.length===0&&Ne(u)&&u>0)for(let h=-u;h<=u;++h)for(let d=-u;d<=u;++d){const m={x:f.destpt.x+d,y:f.destpt.y+h};ai(m)&&f.targets.push(m)}return Ne(u)&&u>0?{...f,targets:f.targets.filter(h=>Rs(h)?x1(h,f.destpt)<=u:!1)}:f}case De.AWAYBY:{const[u]=n.slice(c+1),f=fo(t,e,A,n.slice(c+2),r);if(f.targets.length===0)for(let h=-Ie;h<=Ie;++h)for(let d=-Ie;d<=Ie;++d){const m={x:f.destpt.x+d,y:f.destpt.y+h};ai(m)&&f.targets.push(m)}return Ne(u)&&u>0?{...f,targets:f.targets.filter(h=>Rs(h)?x1(h,f.destpt)>=u:!1)}:f}case De.ELEMENTS:{const u=fo(t,e,A,n.slice(c+1),r);i.x=r.x,i.y=r.y,u.targets=[];const f=Wn(u.startpt,u.destpt);for(let h=0;h<Ie&&(Jt(i,f),!!ai(i));++h)u.targets.push({x:i.x,y:i.y});return u}}}return{dir:n,startpt:r,destpt:i,layer:s,targets:[]}}function Doe(t){return us(t,$p,{terrain:e=>e.map(Cu),objects:e=>Object.values(e).filter(A=>!A.removed).map(Cu),id:Yt,name:Yt,named:Yt,lookup:Yt,codepage:Yt,distmaps:Yt,overboard:Yt,underboard:Yt,charsetpage:Yt,palettepage:Yt})}function Boe(t,e,A){if(!E(t)||!E(e))return;const n=t.objects[A];if(E(n))return n;if(Rs(e))return JO(e,ha(t,"player"))}function cr(t,e,A){return(e>=0&&e<Ie)??(A>=0&&A<rt)?t?.terrain[e+A*Ie]:void 0}function koe(t){return Zc(t,$p,{terrain:e=>e.map(Pu),objects:e=>{const A={};for(let n=0;n<e.length;++n){const r=Pu(e[n]);E(r?.id)&&(A[r.id]=r)}return A}})}function n_(t,e){if(!E(t)||!E(e))return;const A=FA(e);return A.id=A.id??rA(),t.objects[A.id]=A,t.objects[A.id]}function r_(t,e,A,n){return n_(t,{...e,kind:A,id:n})}function uA(t,e){if(t)return t.objects[e]}function u4(t,e){const A=Os(t,e);if(A<0||!E(t?.lookup))return;const n=uA(t,t.lookup[A]??"");if(E(n))return n}function Eoe(t){return E(t)?[...Object.values(t.objects)]:[]}function h4(t,e,A){const n=[],r=[];if(!E(t))return{objectelements:n,terrainelements:r};function s(i,o){if(i.removed)return!1;switch(A){case"all":return!0;case"self":return i?.id===e;case"others":return i?.id!==e;case"terrain":return o===!0;case"object":return o===!1}const a=qe(i,A);return E(a)||pA(i).name===A||qe(i,"group")===A}for(let i=0;i<Up;++i){const o=t.terrain[i],a=t.objects[t.lookup?.[i]??""];if(E(o)&&s(o,!0)){r.push(o);const c=t.objects[t.lookup?.[i]??""];E(c)&&Mt(c)&&n.push(c)}else Mt(a)&&s(a,!1)&&n.push(a)}return{objectelements:n,terrainelements:r}}function UA(t,e,A){return!E(e)||pA(e).name==="player"?!1:(e.id?(e.removed=A,Ch(t,e)):(Wt(t,{x:e?.x??0,y:e?.y??0}),rF(t,e)),!0)}function Wt(t,e){if(!E(t)||!E(e)||!E(e.x)||!E(e.y)||e.x<0||e.x>=Ie||e.y<0||e.y>=rt)return;const A=FA(e),n=e.x+e.y*Ie;return t.terrain[n]=A,delete t.distmaps,t.terrain[n]}function Noe(t,e,A){return Wt(t,{...e,kind:A})}function Toe(t,e){const A=[];if(!E(t))return A;function n(l){for(let u=0;u<l.length;++u){const f=l[u];if(!E(f.id))continue;f.lx=f.x,f.ly=f.y;const d=`${Zn(f)?.code??""}
${f.code??""}`;if(d){if(f.removed){const m=e-f.removed,p=qe(f,"cycle");if(m>p)continue}A.push({id:f.id,type:Ye.OBJECT,code:d,object:f,terrain:void 0})}}}const r=Object.values(t.objects),s=[],i=[],o=[],a=[];for(let l=0;l<r.length;++l){const u=r[l];if($t(u.id))o.push(u);else switch(qe(u,"collision")){case $e.ISSWIM:case $e.ISBULLET:a.push(u);break;case $e.ISGHOST:i.push(u);break;default:s.push(u);break}}n(a),n(o),n(s),n(i);const c=Moe(t,e);for(let l=0;l<c.length;++l)A.push({id:c[l],type:Ye.ERROR,code:"",object:void 0,terrain:void 0});return A}function f4(t){if(E(t)){if(xe(t.over))if(xe(t.overboard)){const e=ct(t.overboard);E(e)||delete t.overboard}else{const e=ct(t.over);E(e)&&(t.overboard=e.id)}else xe(t.overboard)&&delete t.overboard;if(xe(t.under))if(xe(t.underboard)){const e=ct(t.underboard);E(e)||delete t.underboard}else{const e=ct(t.under);E(e)&&(t.underboard=e.id)}else xe(t.underboard)&&delete t.underboard;if(xe(t.charset))if(xe(t.charsetpage)){const e=yA(Ye.CHARSET,t.charset);E(e)||delete t.charsetpage}else{const e=yA(Ye.CHARSET,t.charset);E(e)&&(t.charsetpage=e.id)}else xe(t.charsetpage)&&delete t.charsetpage;if(xe(t.palette))if(xe(t.palettepage)){const e=yA(Ye.PALETTE,t.palette);E(e)||delete t.palettepage}else{const e=yA(Ye.PALETTE,t.palette);E(e)&&(t.palettepage=e.id)}else xe(t.palettepage)&&delete t.palettepage}}function s_(t=$d){const e={terrain:voe(),objects:{},id:"",name:""};return t(e)}function Ooe(t,e,A,n){const r=A.id??"";if(n.x<0){const s=ct(e?.exitwest??"");if(E(s))return ni(t,r,s.id,{x:Ie-1,y:n.y})}else if(n.x>=Ie){const s=ct(e?.exiteast??"");if(E(s))return ni(t,r,s.id,{x:0,y:n.y})}else if(n.y<0){const s=ct(e?.exitnorth??"");if(E(s))return ni(t,r,s.id,{x:n.x,y:rt-1})}else if(n.y>=rt){const s=ct(e?.exitsouth??"");if(E(s))return ni(t,r,s.id,{x:n.x,y:0})}return!1}function d4(t,e,A,n){const r=Ro(t,n,"enterx"),s=Ro(t,n,"entery");Ne(r)&&Ne(s)&&E(A)&&t_(e,A,{x:r,y:s})}function ai(t){return Cp(t.x,t.y,0,Ie-1,rt-1,0)}const k={timestamp:0,book:void 0,board:void 0,element:void 0,elementid:"",elementisplayer:!1,elementfocus:"",words:[],get:void 0};var K=(t=>(t[t.COLOR=0]="COLOR",t[t.KIND=1]="KIND",t[t.DIR=2]="DIR",t[t.NAME=3]="NAME",t[t.NUMBER=4]="NUMBER",t[t.STRING=5]="STRING",t[t.NUMBER_OR_STRING=6]="NUMBER_OR_STRING",t[t.COLOR_OR_KIND=7]="COLOR_OR_KIND",t[t.MAYBE_KIND=8]="MAYBE_KIND",t[t.MAYBE_NAME=9]="MAYBE_NAME",t[t.MAYBE_NUMBER=10]="MAYBE_NUMBER",t[t.MAYBE_STRING=11]="MAYBE_STRING",t[t.MAYBE_NUMBER_OR_STRING=12]="MAYBE_NUMBER_OR_STRING",t[t.ANY=13]="ANY",t))(K||{});function IA(t,e,A){throw console.info(A,k.element,k.elementid,k.elementfocus),new Error(`Invalid arg, expected: ${t} but got ${JSON.stringify(e)}`)}function m4(t){const e={x:k.element?.x??0,y:k.element?.y??0};return fo(k.board,k.element,k.elementfocus,t,e)}function ce(t,e,A){const n=k.words;k.words=t;const r=[];let s=e;for(let i=0;i<A.length;++i)switch(A[i]){case 1:{const[o,a]=_b(s);ro(o)?(s=a,r.push(o)):IA("kind",o,t);break}case 0:{if(Bo(t[s])===void 0){const[o,a]=un(s);BA(o)?(s=a,r.push(o)):Ne(o)?(s=a,r.push(js(o,void 0))):IA("color",o,t)}else{const[o,a]=Yu(s);BA(o)?(s=a,r.push(o)):IA("color",o,t)}break}case 2:{if(Hc(t[s])===void 0){const[o,a]=un(s);Cn(o)?(s=a,r.push(m4(o))):IA("direction",o,t)}else{const[o,a]=I1(s);Cn(o)?(s=a,r.push(m4(o))):IA("direction",o,t)}break}case 3:{const o=k.words[s];xe(o)||IA("string",o,t),++s,r.push(o);break}case 4:{const[o,a]=un(s);if(xe(o)){const c=parseFloat(o);Ne(c)?r.push(c):IA("number",o,t)}else Ne(o)?r.push(o):IA("number",o,t);s=a;break}case 5:{const[o,a]=un(s);xe(o)||IA("string",o,t),s=a,r.push(o);break}case 6:{const[o,a]=un(s);let c=o;if(xe(c)){const l=parseFloat(c);Ne(l)&&(c=l)}else Ne(c)||IA("number or string",c,t);s=a,r.push(c);break}case 7:{const[o,a]=_b(s);if(ro(o))s=a,r.push(o);else if(Bo(t[s])===void 0){const[c,l]=un(s);BA(c)?(s=l,r.push(c)):IA("color",c,t)}else{const[c,l]=Yu(s);BA(c)?(s=l,r.push(c)):IA("color or kind",c,t)}break}case 8:{const[o,a]=_b(s);o!==void 0&&!ro(o)&&IA("optional kind",o,t),s=a,r.push(o);break}case 9:{const o=k.words[s];o!==void 0&&!xe(o)&&IA("optional string",o,t),++s,r.push(o);break}case 10:{const[o,a]=un(s);if(xe(o)){const c=parseFloat(o);Ne(c)?r.push(c):IA("optional number",o,t)}else Ne(o)||o===void 0?r.push(o):IA("optional number",o,t);s=a;break}case 11:{const[o,a]=un(s);o!==void 0&&!xe(o)&&IA("optional string",o,t),s=a,r.push(o);break}case 12:{const[o,a]=un(s);let c=o;if(xe(c)){const l=parseFloat(c);Ne(l)&&(c=l)}else c!==void 0&&!Ne(c)&&IA("number or string",c,t);s=a,r.push(c);break}case 13:{const[o,a]=un(s);s=a,r.push(o);break}}return k.words=n,[...r,s]}const ad={},xa={};function i_(){return{id:rA(),board:"",layers:[],scroll:[],sidebar:[],exiteast:"",exitwest:"",exitnorth:"",exitsouth:""}}const Yoe=new Set(["rn","range","sl","select","nm","number","tx","text","zssedit","charedit","coloredit","bgedit"]),Soe=new Set(["tx","text"]),Coe={rn:1,range:1,sl:0,select:0,nm:0,number:0,tx:"",text:"",zssedit:"",charedit:"",coloredit:""},p4={};let g4=t=>{let e=p4[t];return E(e)||(p4[t]=e=i_()),e};function Poe(t){g4=t}function _t(t){return g4(t)}function o_(t){return E(ad[t])||(ad[t]=[]),ad[t]}function Zoe(t){const e=_t(t);e.scrollname="",e.scroll=[]}function Ioe(t,e,A){Object.values(xa).forEach(n=>{if(n[e]!==void 0){const r=L1(t.id(),e);Ne(A)&&CI(r,A),xe(A)&&PI(r,A)}})}function Ht(t){const e=o_(t);return ad[t]=[],e}function w4(t){const e=[];let A;for(let n=0;n<t.length;++n){const r=t[n],s=xe(r)&&E(l9(r));E(A)&&A!==s&&e.push(" "),e.push(r),A=s}return e}function we(t,e){o_(t).push(e)}function Te(t,e,A,n,r=()=>0,s=$d){switch(je(Ct(n[0]))){case"copyit":case"openit":case"viewit":case"runit":n.unshift("istargetless");break}const o=[e,A,...n],a=je(`${o[3]}`),c={...k};function l(u,f){E(f)&&f!==r(u)&&(k.board=c.board,k.element=c.element,k.elementfocus=c.elementfocus,s(u,f))}if(Yoe.has(a)){const u=`${o[2]}`;xa[e]=xa[e]??{};const f=r(u)??Coe[a];if(xa[e][u]===void 0){const h=L1(e,u);Soe.has(a)?(xe(f)&&yp(h,f),xa[e][u]=WM(h,d=>{l(u,d)})):(Ne(f)&&SI(h,f),xa[e][u]=ZI(h,d=>{l(u,d)}))}}o_(t).push(o)}var b4=(t=>(t[t.id=0]="id",t[t.x=1]="x",t[t.y=2]="y",t[t.char=3]="char",t[t.color=4]="color",t[t.bg=5]="bg",t[t.stat=6]="stat",t[t.pid=7]="pid",t))(b4||{});function Roe(t){return us(t,b4)}var _4=(t=>(t[t.id=0]="id",t[t.type=1]="type",t[t.tag=2]="tag",t[t.width=3]="width",t[t.height=4]="height",t[t.char=5]="char",t[t.color=6]="color",t[t.bg=7]="bg",t[t.stats=8]="stats",t[t.sprites=9]="sprites",t[t.alphas=10]="alphas",t[t.mime=11]="mime",t[t.media=12]="media",t[t.focusx=13]="focusx",t[t.focusy=14]="focusy",t[t.focusid=15]="focusid",t[t.viewscale=16]="viewscale",t[t.graphics=17]="graphics",t[t.facing=18]="facing",t))(_4||{});function joe(t){return us(t,_4,{sprites:e=>e.map(Roe)})}var x4=(t=>(t[t.id=0]="id",t[t.board=1]="board",t[t.over=2]="over",t[t.under=3]="under",t[t.layers=4]="layers",t[t.tickers=5]="tickers",t[t.scrollname=6]="scrollname",t[t.scroll=7]="scroll",t[t.sidebar=8]="sidebar",t[t.synthstate=9]="synthstate",t))(x4||{});function y4(t){return us(t,x4,{layers:e=>e.map(joe)})}const zoe=new xP;Poe(t=>{if($t(t)){const e=wt(He.MAIN),A=Ui(e,He.GADGETSTORE);let n=A[t];return E(n)||(A[t]=n=i_()),n}return i_()});const a_=new Map,cd=gi("gadgetserver",["tock"],t=>{if(!cd.session(t))return;const e=wt(He.MAIN),A=new Set(e?.activelist??[]);A.add(gA());const n=[...A];switch(t.target){case"tock":if(gA()){const r=new Map;for(let s=0;s<n.length;++s){const i=n[s],o=kt(i),a=o?.id??"";let c=r.get(a);E(o)&&!E(c)&&(c=FA(kie(i,o)),r.set(o.id,c));const l=_t(i);if(E(c)){const d=Mie(i,1e3,o);l.id=c.id,l.board=c.board,l.exiteast=c.exiteast,l.exitwest=c.exitwest,l.exitnorth=c.exitnorth,l.exitsouth=c.exitsouth,l.over=c.over,l.under=c.under,l.layers=[...c.layers,...d],l.tickers=c.tickers}else l.id="",l.board="",l.exiteast="",l.exitwest="",l.exitnorth="",l.exitsouth="",l.over=[],l.under=[],l.layers=[],l.tickers=[],l.sidebar=[];l.synthstate=tQ(a);const u=y4(l);if(!E(u))continue;const f=a_.get(i)??[],h=ox(f,u);if(a_.set(i,u),h.length){const d=zoe.encode(bZ(h,{}));xC(cd,i,d)}}}break;case"desync":{const r=_t(t.player),s=y4(r);if(!E(s))break;a_.set(t.player,s),_C(cd,t.player,s);break}case"clearscroll":Zoe(t.player),mx(cd,t.player);break}});async function Hoe(t){const e=tn(1111111,9999999),A=je(t.replace(/[^a-zA-Z/]/g,""));return await(await fetch(`https://raw.githubusercontent.com/wiki/goldbuick/zed-software-system/${A}.md?q=${e}`)).text()}const c_=10;function Loe(){const t=FS();let e=c_;const A=gi(`agent_${t}`,["second"],n=>{switch(n.target){case"second":++e,e>=c_&&(e-=c_,KC(A,t));break;case"acklogin":lC(n.data)&&bt(A,n.player,`agent login ${n.data?"success":"failure"}`);break}},Ae.session());return WC(A,t,{}),{id(){return t},stop(){Ta(A,t,!1),A.disconnect()}}}function l_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var mo=l_();function G4(t){mo=t}var zl={exec:()=>null};function Gt(t,e=""){let A=typeof t=="string"?t:t.source,n={replace:(r,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(fn.caret,"$1"),A=A.replace(r,i),n},getRegex:()=>new RegExp(A,e)};return n}var Uoe=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),fn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Foe=/^(?:[ \t]*(?:\n|$))+/,$oe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Voe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Hl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,qoe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,u_=/(?:[*+-]|\d{1,9}[.)])/,M4=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,v4=Gt(M4).replace(/bull/g,u_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Woe=Gt(M4).replace(/bull/g,u_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),h_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Qoe=/^[^\n]+/,f_=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Koe=Gt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",f_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Joe=Gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,u_).getRegex(),ld="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",d_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Xoe=Gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",d_).replace("tag",ld).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),D4=Gt(h_).replace("hr",Hl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ld).getRegex(),eae=Gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",D4).getRegex(),m_={blockquote:eae,code:$oe,def:Koe,fences:Voe,heading:qoe,hr:Hl,html:Xoe,lheading:v4,list:Joe,newline:Foe,paragraph:D4,table:zl,text:Qoe},B4=Gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Hl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ld).getRegex(),tae={...m_,lheading:Woe,table:B4,paragraph:Gt(h_).replace("hr",Hl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",B4).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ld).getRegex()},Aae={...m_,html:Gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",d_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Gt(h_).replace("hr",Hl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",v4).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},nae=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rae=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,k4=/^( {2,}|\\)\n(?!\s*$)/,sae=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ud=/[\p{P}\p{S}]/u,p_=/[\s\p{P}\p{S}]/u,E4=/[^\s\p{P}\p{S}]/u,iae=Gt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,p_).getRegex(),N4=/(?!~)[\p{P}\p{S}]/u,oae=/(?!~)[\s\p{P}\p{S}]/u,aae=/(?:[^\s\p{P}\p{S}]|~)/u,cae=Gt(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Uoe?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),T4=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,lae=Gt(T4,"u").replace(/punct/g,ud).getRegex(),uae=Gt(T4,"u").replace(/punct/g,N4).getRegex(),O4="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",hae=Gt(O4,"gu").replace(/notPunctSpace/g,E4).replace(/punctSpace/g,p_).replace(/punct/g,ud).getRegex(),fae=Gt(O4,"gu").replace(/notPunctSpace/g,aae).replace(/punctSpace/g,oae).replace(/punct/g,N4).getRegex(),dae=Gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,E4).replace(/punctSpace/g,p_).replace(/punct/g,ud).getRegex(),mae=Gt(/\\(punct)/,"gu").replace(/punct/g,ud).getRegex(),pae=Gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gae=Gt(d_).replace("(?:-->|$)","-->").getRegex(),wae=Gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gae).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),hd=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,bae=Gt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",hd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Y4=Gt(/^!?\[(label)\]\[(ref)\]/).replace("label",hd).replace("ref",f_).getRegex(),S4=Gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",f_).getRegex(),_ae=Gt("reflink|nolink(?!\\()","g").replace("reflink",Y4).replace("nolink",S4).getRegex(),C4=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,g_={_backpedal:zl,anyPunctuation:mae,autolink:pae,blockSkip:cae,br:k4,code:rae,del:zl,emStrongLDelim:lae,emStrongRDelimAst:hae,emStrongRDelimUnd:dae,escape:nae,link:bae,nolink:S4,punctuation:iae,reflink:Y4,reflinkSearch:_ae,tag:wae,text:sae,url:zl},xae={...g_,link:Gt(/^!?\[(label)\]\((.*?)\)/).replace("label",hd).getRegex(),reflink:Gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hd).getRegex()},w_={...g_,emStrongRDelimAst:fae,emStrongLDelim:uae,url:Gt(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",C4).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Gt(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",C4).getRegex()},yae={...w_,br:Gt(k4).replace("{2,}","*").getRegex(),text:Gt(w_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},fd={normal:m_,gfm:tae,pedantic:Aae},Ll={normal:g_,gfm:w_,breaks:yae,pedantic:xae},Gae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},P4=t=>Gae[t];function ss(t,e){if(e){if(fn.escapeTest.test(t))return t.replace(fn.escapeReplace,P4)}else if(fn.escapeTestNoEncode.test(t))return t.replace(fn.escapeReplaceNoEncode,P4);return t}function Z4(t){try{t=encodeURI(t).replace(fn.percentDecode,"%")}catch{return null}return t}function I4(t,e){let A=t.replace(fn.findPipe,(s,i,o)=>{let a=!1,c=i;for(;--c>=0&&o[c]==="\\";)a=!a;return a?"|":" |"}),n=A.split(fn.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(fn.slashPipe,"|");return n}function Ul(t,e,A){let n=t.length;if(n===0)return"";let r=0;for(;r<n&&t.charAt(n-r-1)===e;)r++;return t.slice(0,n-r)}function Mae(t,e){if(t.indexOf(e[1])===-1)return-1;let A=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])A++;else if(t[n]===e[1]&&(A--,A<0))return n;return A>0?-2:-1}function R4(t,e,A,n,r){let s=e.href,i=e.title||null,o=t[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let a={type:t[0].charAt(0)==="!"?"image":"link",raw:A,href:s,title:i,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}function vae(t,e,A){let n=t.match(A.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(s=>{let i=s.match(A.other.beginningSpace);if(i===null)return s;let[o]=i;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var dd=class{options;rules;lexer;constructor(t){this.options=t||mo}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let A=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?A:Ul(A,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let A=e[0],n=vae(A,e[3]||"",this.rules);return{type:"code",raw:A,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let A=e[2].trim();if(this.rules.other.endingHash.test(A)){let n=Ul(A,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(A=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:A,tokens:this.lexer.inline(A)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ul(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let A=Ul(e[0],`
`).split(`
`),n="",r="",s=[];for(;A.length>0;){let i=!1,o=[],a;for(a=0;a<A.length;a++)if(this.rules.other.blockquoteStart.test(A[a]))o.push(A[a]),i=!0;else if(!i)o.push(A[a]);else break;A=A.slice(a);let c=o.join(`
`),l=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${c}`:c,r=r?`${r}
${l}`:l;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,s,!0),this.lexer.state.top=u,A.length===0)break;let f=s.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let h=f,d=h.raw+`
`+A.join(`
`),m=this.blockquote(d);s[s.length-1]=m,n=n.substring(0,n.length-h.raw.length)+m.raw,r=r.substring(0,r.length-h.text.length)+m.text;break}else if(f?.type==="list"){let h=f,d=h.raw+`
`+A.join(`
`),m=this.list(d);s[s.length-1]=m,n=n.substring(0,n.length-f.raw.length)+m.raw,r=r.substring(0,r.length-h.raw.length)+m.raw,A=d.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:s,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let A=e[1].trim(),n=A.length>1,r={type:"list",raw:"",ordered:n,start:n?+A.slice(0,-1):"",loose:!1,items:[]};A=n?`\\d{1,9}\\${A.slice(-1)}`:`\\${A}`,this.options.pedantic&&(A=n?A:"[*+-]");let s=this.rules.other.listItemRegex(A),i=!1;for(;t;){let a=!1,c="",l="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let u=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,w=>" ".repeat(3*w.length)),f=t.split(`
`,1)[0],h=!u.trim(),d=0;if(this.options.pedantic?(d=2,l=u.trimStart()):h?d=e[1].length+1:(d=e[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,l=u.slice(d),d+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,t=t.substring(f.length+1),a=!0),!a){let w=this.rules.other.nextBulletRegex(d),b=this.rules.other.hrRegex(d),g=this.rules.other.fencesBeginRegex(d),x=this.rules.other.headingBeginRegex(d),_=this.rules.other.htmlBeginRegex(d);for(;t;){let G=t.split(`
`,1)[0],y;if(f=G,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),y=f):y=f.replace(this.rules.other.tabCharGlobal,"    "),g.test(f)||x.test(f)||_.test(f)||w.test(f)||b.test(f))break;if(y.search(this.rules.other.nonSpaceChar)>=d||!f.trim())l+=`
`+y.slice(d);else{if(h||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(u)||x.test(u)||b.test(u))break;l+=`
`+f}!h&&!f.trim()&&(h=!0),c+=G+`
`,t=t.substring(G.length+1),u=y.slice(d)}}r.loose||(i?r.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(i=!0));let m=null,p;this.options.gfm&&(m=this.rules.other.listIsTask.exec(l),m&&(p=m[0]!=="[ ] ",l=l.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:c,task:!!m,checked:p,loose:!1,text:l,tokens:[]}),r.raw+=c}let o=r.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let a=0;a<r.items.length;a++)if(this.lexer.state.top=!1,r.items[a].tokens=this.lexer.blockTokens(r.items[a].text,[]),!r.loose){let c=r.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>this.rules.other.anyLine.test(u.raw));r.loose=l}if(r.loose)for(let a=0;a<r.items.length;a++)r.items[a].loose=!0;return r}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let A=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:A,raw:e[0],href:n,title:r}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let A=I4(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(A.length===n.length){for(let i of n)this.rules.other.tableAlignRight.test(i)?s.align.push("right"):this.rules.other.tableAlignCenter.test(i)?s.align.push("center"):this.rules.other.tableAlignLeft.test(i)?s.align.push("left"):s.align.push(null);for(let i=0;i<A.length;i++)s.header.push({text:A[i],tokens:this.lexer.inline(A[i]),header:!0,align:s.align[i]});for(let i of r)s.rows.push(I4(i,s.header.length).map((o,a)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:s.align[a]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let A=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:A,tokens:this.lexer.inline(A)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let A=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(A)){if(!this.rules.other.endAngleBracket.test(A))return;let s=Ul(A.slice(0,-1),"\\");if((A.length-s.length)%2===0)return}else{let s=Mae(e[2],"()");if(s===-2)return;if(s>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(n);s&&(n=s[1],r=s[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(A)?n=n.slice(1):n=n.slice(1,-1)),R4(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let A;if((A=this.rules.inline.reflink.exec(t))||(A=this.rules.inline.nolink.exec(t))){let n=(A[2]||A[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let s=A[0].charAt(0);return{type:"text",raw:s,text:s}}return R4(A,r,A[0],this.lexer,this.rules)}}emStrong(t,e,A=""){let n=this.rules.inline.emStrongLDelim.exec(t);if(!(!n||n[3]&&A.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!A||this.rules.inline.punctuation.exec(A))){let r=[...n[0]].length-1,s,i,o=r,a=0,c=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+r);(n=c.exec(e))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(i=[...s].length,n[3]||n[4]){o+=i;continue}else if((n[5]||n[6])&&r%3&&!((r+i)%3)){a+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+a);let l=[...n[0]][0].length,u=t.slice(0,r+n.index+l+i);if(Math.min(r,i)%2){let h=u.slice(1,-1);return{type:"em",raw:u,text:h,tokens:this.lexer.inlineTokens(h)}}let f=u.slice(2,-2);return{type:"strong",raw:u,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let A=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(A),r=this.rules.other.startingSpaceChar.test(A)&&this.rules.other.endingSpaceChar.test(A);return n&&r&&(A=A.substring(1,A.length-1)),{type:"codespan",raw:e[0],text:A}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let A,n;return e[2]==="@"?(A=e[1],n="mailto:"+A):(A=e[1],n=A),{type:"link",raw:e[0],text:A,href:n,tokens:[{type:"text",raw:A,text:A}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let A,n;if(e[2]==="@")A=e[0],n="mailto:"+A;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);A=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:A,href:n,tokens:[{type:"text",raw:A,text:A}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let A=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:A}}}},Or=class R_{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||mo,this.options.tokenizer=this.options.tokenizer||new dd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let A={other:fn,block:fd.normal,inline:Ll.normal};this.options.pedantic?(A.block=fd.pedantic,A.inline=Ll.pedantic):this.options.gfm&&(A.block=fd.gfm,this.options.breaks?A.inline=Ll.breaks:A.inline=Ll.gfm),this.tokenizer.rules=A}static get rules(){return{block:fd,inline:Ll}}static lex(e,A){return new R_(A).lex(e)}static lexInline(e,A){return new R_(A).inlineTokens(e)}lex(e){e=e.replace(fn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let A=0;A<this.inlineQueue.length;A++){let n=this.inlineQueue[A];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,A=[],n=!1){for(this.options.pedantic&&(e=e.replace(fn.tabCharGlobal,"    ").replace(fn.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(i=>(r=i.call({lexer:this},e,A))?(e=e.substring(r.raw.length),A.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let i=A.at(-1);r.raw.length===1&&i!==void 0?i.raw+=`
`:A.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let i=A.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.at(-1).src=i.text):A.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let i=A.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},A.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),A.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),A.push(r);continue}let s=e;if(this.options.extensions?.startBlock){let i=1/0,o=e.slice(1),a;this.options.extensions.startBlock.forEach(c=>{a=c.call({lexer:this},o),typeof a=="number"&&a>=0&&(i=Math.min(i,a))}),i<1/0&&i>=0&&(s=e.substring(0,i+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let i=A.at(-1);n&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):A.push(r),n=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let i=A.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):A.push(r);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,A}inline(e,A=[]){return this.inlineQueue.push({src:e,tokens:A}),A}inlineTokens(e,A=[]){let n=e,r=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)a.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)s=r[2]?r[2].length:0,n=n.slice(0,r.index+s)+"["+"a".repeat(r[0].length-s-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,o="";for(;e;){i||(o=""),i=!1;let a;if(this.options.extensions?.inline?.some(l=>(a=l.call({lexer:this},e,A))?(e=e.substring(a.raw.length),A.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let l=A.at(-1);a.type==="text"&&l?.type==="text"?(l.raw+=a.raw,l.text+=a.text):A.push(a);continue}if(a=this.tokenizer.emStrong(e,n,o)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),A.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),A.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),A.push(a);continue}let c=e;if(this.options.extensions?.startInline){let l=1/0,u=e.slice(1),f;this.options.extensions.startInline.forEach(h=>{f=h.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(c=e.substring(0,l+1))}if(a=this.tokenizer.inlineText(c)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),i=!0;let l=A.at(-1);l?.type==="text"?(l.raw+=a.raw,l.text+=a.text):A.push(a);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return A}},md=class{options;parser;constructor(t){this.options=t||mo}space(t){return""}code({text:t,lang:e,escaped:A}){let n=(e||"").match(fn.notSpaceStart)?.[0],r=t.replace(fn.endingNewline,"")+`
`;return n?'<pre><code class="language-'+ss(n)+'">'+(A?r:ss(r,!0))+`</code></pre>
`:"<pre><code>"+(A?r:ss(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,A=t.start,n="";for(let i=0;i<t.items.length;i++){let o=t.items[i];n+=this.listitem(o)}let r=e?"ol":"ul",s=e&&A!==1?' start="'+A+'"':"";return"<"+r+s+`>
`+n+"</"+r+`>
`}listitem(t){let e="";if(t.task){let A=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=A+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=A+" "+ss(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:A+" ",text:A+" ",escaped:!0}):e+=A+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",A="";for(let r=0;r<t.header.length;r++)A+=this.tablecell(t.header[r]);e+=this.tablerow({text:A});let n="";for(let r=0;r<t.rows.length;r++){let s=t.rows[r];A="";for(let i=0;i<s.length;i++)A+=this.tablecell(s[i]);n+=this.tablerow({text:A})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),A=t.header?"th":"td";return(t.align?`<${A} align="${t.align}">`:`<${A}>`)+e+`</${A}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ss(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:A}){let n=this.parser.parseInline(A),r=Z4(t);if(r===null)return n;t=r;let s='<a href="'+t+'"';return e&&(s+=' title="'+ss(e)+'"'),s+=">"+n+"</a>",s}image({href:t,title:e,text:A,tokens:n}){n&&(A=this.parser.parseInline(n,this.parser.textRenderer));let r=Z4(t);if(r===null)return ss(A);t=r;let s=`<img src="${t}" alt="${A}"`;return e&&(s+=` title="${ss(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ss(t.text)}},b_=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Yr=class j_{options;renderer;textRenderer;constructor(e){this.options=e||mo,this.options.renderer=this.options.renderer||new md,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new b_}static parse(e,A){return new j_(A).parse(e)}static parseInline(e,A){return new j_(A).parseInline(e)}parse(e,A=!0){let n="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){n+=a||"";continue}}let i=s;switch(i.type){case"space":{n+=this.renderer.space(i);continue}case"hr":{n+=this.renderer.hr(i);continue}case"heading":{n+=this.renderer.heading(i);continue}case"code":{n+=this.renderer.code(i);continue}case"table":{n+=this.renderer.table(i);continue}case"blockquote":{n+=this.renderer.blockquote(i);continue}case"list":{n+=this.renderer.list(i);continue}case"html":{n+=this.renderer.html(i);continue}case"def":{n+=this.renderer.def(i);continue}case"paragraph":{n+=this.renderer.paragraph(i);continue}case"text":{let o=i,a=this.renderer.text(o);for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],a+=`
`+this.renderer.text(o);A?n+=this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):n+=a;continue}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,A=this.renderer){let n="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=o||"";continue}}let i=s;switch(i.type){case"escape":{n+=A.text(i);break}case"html":{n+=A.html(i);break}case"link":{n+=A.link(i);break}case"image":{n+=A.image(i);break}case"strong":{n+=A.strong(i);break}case"em":{n+=A.em(i);break}case"codespan":{n+=A.codespan(i);break}case"br":{n+=A.br(i);break}case"del":{n+=A.del(i);break}case"text":{n+=A.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}},Fl=class{options;block;constructor(t){this.options=t||mo}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Or.lex:Or.lexInline}provideParser(){return this.block?Yr.parse:Yr.parseInline}},Dae=class{defaults=l_();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Yr;Renderer=md;TextRenderer=b_;Lexer=Or;Tokenizer=dd;Hooks=Fl;constructor(...t){this.use(...t)}walkTokens(t,e){let A=[];for(let n of t)switch(A=A.concat(e.call(this,n)),n.type){case"table":{let r=n;for(let s of r.header)A=A.concat(this.walkTokens(s.tokens,e));for(let s of r.rows)for(let i of s)A=A.concat(this.walkTokens(i.tokens,e));break}case"list":{let r=n;A=A.concat(this.walkTokens(r.items,e));break}default:{let r=n;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{let i=r[s].flat(1/0);A=A.concat(this.walkTokens(i,e))}):r.tokens&&(A=A.concat(this.walkTokens(r.tokens,e)))}}return A}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(A=>{let n={...A};if(n.async=this.defaults.async||n.async||!1,A.extensions&&(A.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let s=e.renderers[r.name];s?e.renderers[r.name]=function(...i){let o=r.renderer.apply(this,i);return o===!1&&(o=s.apply(this,i)),o}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[r.level];s?s.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),A.renderer){let r=this.defaults.renderer||new md(this.defaults);for(let s in A.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let i=s,o=A.renderer[i],a=r[i];r[i]=(...c)=>{let l=o.apply(r,c);return l===!1&&(l=a.apply(r,c)),l||""}}n.renderer=r}if(A.tokenizer){let r=this.defaults.tokenizer||new dd(this.defaults);for(let s in A.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let i=s,o=A.tokenizer[i],a=r[i];r[i]=(...c)=>{let l=o.apply(r,c);return l===!1&&(l=a.apply(r,c)),l}}n.tokenizer=r}if(A.hooks){let r=this.defaults.hooks||new Fl;for(let s in A.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let i=s,o=A.hooks[i],a=r[i];Fl.passThroughHooks.has(s)?r[i]=c=>{if(this.defaults.async&&Fl.passThroughHooksRespectAsync.has(s))return(async()=>{let u=await o.call(r,c);return a.call(r,u)})();let l=o.call(r,c);return a.call(r,l)}:r[i]=(...c)=>{if(this.defaults.async)return(async()=>{let u=await o.apply(r,c);return u===!1&&(u=await a.apply(r,c)),u})();let l=o.apply(r,c);return l===!1&&(l=a.apply(r,c)),l}}n.hooks=r}if(A.walkTokens){let r=this.defaults.walkTokens,s=A.walkTokens;n.walkTokens=function(i){let o=[];return o.push(s.call(this,i)),r&&(o=o.concat(r.call(this,i))),o}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Or.lex(t,e??this.defaults)}parser(t,e){return Yr.parse(t,e??this.defaults)}parseMarkdown(t){return(e,A)=>{let n={...A},r={...this.defaults,...n},s=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=t),r.async)return(async()=>{let i=r.hooks?await r.hooks.preprocess(e):e,o=await(r.hooks?await r.hooks.provideLexer():t?Or.lex:Or.lexInline)(i,r),a=r.hooks?await r.hooks.processAllTokens(o):o;r.walkTokens&&await Promise.all(this.walkTokens(a,r.walkTokens));let c=await(r.hooks?await r.hooks.provideParser():t?Yr.parse:Yr.parseInline)(a,r);return r.hooks?await r.hooks.postprocess(c):c})().catch(s);try{r.hooks&&(e=r.hooks.preprocess(e));let i=(r.hooks?r.hooks.provideLexer():t?Or.lex:Or.lexInline)(e,r);r.hooks&&(i=r.hooks.processAllTokens(i)),r.walkTokens&&this.walkTokens(i,r.walkTokens);let o=(r.hooks?r.hooks.provideParser():t?Yr.parse:Yr.parseInline)(i,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(i){return s(i)}}}onError(t,e){return A=>{if(A.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let n="<p>An error occurred:</p><pre>"+ss(A.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(A);throw A}}},po=new Dae;function Bt(t,e){return po.parse(t,e)}Bt.options=Bt.setOptions=function(t){return po.setOptions(t),Bt.defaults=po.defaults,G4(Bt.defaults),Bt},Bt.getDefaults=l_,Bt.defaults=mo,Bt.use=function(...t){return po.use(...t),Bt.defaults=po.defaults,G4(Bt.defaults),Bt},Bt.walkTokens=function(t,e){return po.walkTokens(t,e)},Bt.parseInline=po.parseInline,Bt.Parser=Yr,Bt.parser=Yr.parse,Bt.Renderer=md,Bt.TextRenderer=b_,Bt.Lexer=Or,Bt.lexer=Or.lex,Bt.Tokenizer=dd,Bt.Hooks=Fl,Bt.parse=Bt,Bt.options,Bt.setOptions,Bt.use,Bt.walkTokens,Bt.parseInline,Yr.parse,Or.lex;const pd="$dkpurple",Bae="$196",kae="$205";function j4(t,e){const A=Bae.repeat(e);we(t,`${pd}${A}`)}function Eae(t,e){const A=kae.repeat(e);we(t,`${pd}${A}`)}function Nae(t,e){we(t,`${pd} ${" ".repeat(e.length)} `),j4(t,e.length+2),we(t,`${pd} $white${e} `),Eae(t,e.length+2)}function z4(t,e,A){const n=e.split(" ");switch(je(n[0]??"")){case"copyit":Te(t,"refscroll",A,["",n[0]??"",n[1]??""]);break;default:{switch(je(n[1]??"")){case"hk":case"hotkey":Te(t,"refscroll",A,[n[0]??"",n[1]??"",n[2]??"",` ${n[3]??""} `,n[4]??""]);break;default:Te(t,"refscroll",A,[n[0]??""]);break}break}}}function ci(t,e){switch(e.type){default:console.info("unknown",e);break;case"heading":Nae(t,e.text),we(t," ");break;case"hr":we(t," "),j4(t,10),we(t," ");break;case"paragraph":for(let A=0;A<(e.tokens?.length??0);++A)E(e.tokens?.[A])&&ci(t,e.tokens[A]);break;case"code":e.text.split(`
`).forEach(A=>we(t,A.replace(/\s+/g," ").trim()));break;case"text":we(t,e.text);break;case"link":{const[A,...n]=e.text.split("|").map(s=>s.trim()),r=[...n,e.href??""];z4(t,r.join(" "),A);break}case"image":z4(t,`openit ${e.href}`,`show ${e.title??e.href}`);break;case"blockquote":e.text.split(`
`).forEach(A=>{we(t,`$dkpurple$221$white  ${A}`)}),we(t," ");break;case"list":for(let A=0;A<(e.items?.length??0);++A)E(e.items?.[A])&&ci(t,e.items[A]);we(t," ");break;case"list_item":we(t,` $grey$7 ${e.text}`);break}}function Tae(t,e){Bt.use({pedantic:!1,gfm:!0,breaks:!1,renderer:{heading(A){return ci(t,A),""},blockquote(A){return ci(t,A),""},hr(A){return ci(t,A),""},list(A){return ci(t,A),""},listitem(A){return ci(t,A),""},paragraph(A){return ci(t,A),""}}}),Bt.parse(e)}typeof SuppressedError=="function"&&SuppressedError;var H4;(function(t){t[t.Audio=1]="Audio",t[t.Cache=2]="Cache",t[t.Config=3]="Config",t[t.Data=4]="Data",t[t.LocalData=5]="LocalData",t[t.Document=6]="Document",t[t.Download=7]="Download",t[t.Picture=8]="Picture",t[t.Public=9]="Public",t[t.Video=10]="Video",t[t.Resource=11]="Resource",t[t.Temp=12]="Temp",t[t.AppConfig=13]="AppConfig",t[t.AppData=14]="AppData",t[t.AppLocalData=15]="AppLocalData",t[t.AppCache=16]="AppCache",t[t.AppLog=17]="AppLog",t[t.Desktop=18]="Desktop",t[t.Executable=19]="Executable",t[t.Font=20]="Font",t[t.Home=21]="Home",t[t.Runtime=22]="Runtime",t[t.Template=23]="Template"})(H4||(H4={}));var L4;(function(t){t[t.Start=0]="Start",t[t.Current=1]="Current",t[t.End=2]="End"})(L4||(L4={}));function gd(t){return new Promise((e,A)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>A(t.error)})}function Oae(t,e){let A;const n=()=>{if(A)return A;const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),A=gd(r),A.then(s=>{s.onclose=()=>A=void 0},()=>{}),A};return(r,s)=>n().then(i=>s(i.transaction(e,r).objectStore(e)))}let __;function x_(){return __||(__=Oae("keyval-store","keyval")),__}function $l(t,e=x_()){return e("readonly",A=>gd(A.get(t)))}function Yae(t,e=x_()){return e("readonly",A=>Promise.all(t.map(n=>gd(A.get(n)))))}function Vl(t,e,A=x_()){return A("readwrite",n=>new Promise((r,s)=>{n.get(t).onsuccess=function(){try{n.put(e(this.result),t),r(gd(n.transaction))}catch(i){s(i)}}}))}async function Sae(t){return $l(t)}async function Cae(t,e){return Vl(t,e)}function y_(t){return t==="crt"?"on":"off"}async function Pae(t){const e=await Sae(`config_${t}`);return e?e&&e!=="off"?"on":"off":y_(t)}async function Zae(t,e){return Cae(`config_${t}`,()=>e)}async function Iae(){const t=["config_crt","config_lowrez","config_scanlines","config_voice2text","config_loaderlogging"];return(await Yae(t)).map((A,n)=>{const s=t[n].replace("config_","");return A?[s,A&&A!=="off"?"on":"off"]:[s,y_(s)]})}let Sr={stylechars:1,stylecolors:1,stylebgs:1};async function Rae(t,e,A,n){await Hae(()=>Sr);const r=kt(t),s=await G_();if(!E(r)||!E(s))return;const i=Math.min(e.x,A.x),o=Math.min(e.y,A.y),a=Math.max(e.x,A.x),c=Math.max(e.y,A.y),l=a-i+1,u=c-o+1,f=Math.min(s.width,l),h=Math.min(s.height,u);for(let d=0;d<h;++d)for(let m=0;m<f;++m){const p=wn({x:m,y:d},s.width),w=s.flattened[p],b=pA(w),g={x:i+m,y:o+d};if(n==="styleall"||n==="styleobjects"){const x=nt(r,g);E(x)&&Mt(x)&&(Sr.stylechars&&(x.char=b.char),Sr.stylecolors&&(x.color=b.color),Sr.stylebgs&&(x.bg=b.bg))}if(n==="styleall"||n==="styleterrain"){const x=cr(r,g.x,g.y);E(x)&&(Sr.stylechars&&(x.char=b.char),Sr.stylecolors&&(x.color=b.color),Sr.stylebgs&&(x.bg=b.bg))}}}async function jae(t,e,A){const n=await zae();Sr={...Sr,...n};const r=dr(e,A);function s(a){return Sr[a]}function i(a,c){(Ne(c)||xe(c))&&(Sr[a]=c)}we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,"apply visuals from the terrain"),we(t,"stored in the paste buffer"),Te(t,"batch","style chars?",["stylechars","select","no","0","yes","1"],s,i),Te(t,"batch","style colors?",["stylecolors","select","no","0","yes","1"],s,i),Te(t,"batch","style bgs?",["stylebgs","select","no","0","yes","1"],s,i),we(t,St),Te(t,"batch","style terrain & objects",[`styleall:${r}`,"hk","1"]),Te(t,"batch","style objects",[`styleobjects:${r}`,"hk","2"]),Te(t,"batch","style terrain",[`styleterrain:${r}`,"hk","3"]);const o=_t(t);o.scrollname="style",o.scroll=Ht(t)}async function zae(){return $l("styleconfig")}async function Hae(t){return Vl("styleconfig",t)}function U4(t,e,A){const n=Math.min(e.x,A.x),r=Math.min(e.y,A.y),s=Math.max(e.x,A.x),i=Math.max(e.y,A.y),o=s-n+1,a=i-r+1,c=[],l=[],u=[];for(let f=r;f<=i;++f)for(let h=n;h<=s;++h){const d={x:h-n,y:f-r},m=nt(t,{x:h,y:f});if(m?.kind==="player"){const p=FA(cr(t,h,f));c.push(p),u.push(p)}else m?.category===pn.ISOBJECT?(c.push(FA(cr(t,h,f))),l.push({...FA(m),...d,id:"blank"})):c.push({...FA(m),...d}),u.push(FA(m))}return{board:t.id,width:o,height:a,terrain:c,objects:l,flattened:u}}async function F4(t){return Vl("secretheap",t)}async function Lae(){return!!await G_()}async function Uae(t,e){const A=kt(e);if(!E(A))return;const n=Un(t),[r,s,i,o]=n.path.split(",").map(l=>parseFloat(l)),a={x:Math.min(r,i),y:Math.min(s,o)},c={x:Math.max(r,i),y:Math.max(s,o)};switch(n.target){case"copy":$ae(e,a,c);break;case"copyall":case"copyobjects":case"copyterrain":await Fae(e,a,c,n.target);break;case"copyastext":{const l=Math.min(a.x,c.x),u=Math.min(a.y,c.y),f=Math.max(a.x,c.x),h=Math.max(a.y,c.y);let d="";for(let m=u;m<=h;++m){let p=Xe.ONCLEAR,w=Xe.ONCLEAR;d+="";for(let b=l;b<=f;++b){const g=cr(A,b,m),x=pA(g);x.color!=p&&(p=x.color,d+=`$${Xe[x.color]}`.toLowerCase()),x.bg!=w&&(w=x.bg,d+=`$ON${Xe[x.bg]}`.toLowerCase()),d+=`$${x.char}`}d+=`
`}Au(Ae,e,d),is(Ae,e,`copied! chars ${l},${u} to ${f},${h}`);break}case"cut":qae(e,a,c);break;case"cutall":case"cutobjects":case"cutterrain":await Vae(e,a,c,n.target);break;case"paste":Qae(e,a,c);break;case"pasteall":case"pasteobjects":case"pasteterrain":case"pasteterraintiled":await Wae(e,a,c,n.target);break;case"style":await jae(e,a,c);break;case"styleall":case"styleobjects":case"styleterrain":await Rae(e,a,c,n.target);break;case"empty":oce(e,a,c);break;case"emptyall":case"emptyobjects":case"emptyterrain":ice(e,a,c,n.target);break;case"chars":tce(e,a,c,"char");break;case"colors":nce(e,a,c,"color");break;case"bgs":Xae(e,a,c,"bg");break;case"copycoords":Au(Ae,e,[r,s,i,o].join(" "));break;case"pageopen":zt(Ae,e,async()=>{await bi(800),wi(Ae,e,`#pageopen ${n.path}`)});break;default:console.info("unknown batch",n);break}}async function Fae(t,e,A,n){const r=kt(t);if(!E(r))return;const s=U4(r,e,A);switch(n){case"copyobjects":s.terrain=[];break;case"copyterrain":s.objects=[];break}await F4(()=>s)}function $ae(t,e,A){const n=dr(e,A);we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,"batch","copy terrain & objects",[`copyall:${n}`,"hk","1"]),Te(t,"batch","copy objects",[`copyobjects:${n}`,"hk","2"]),Te(t,"batch","copy terrain",[`copyterrain:${n}`,"hk","3"]),Te(t,"batch","copy as text",[`copyastext:${n}`,"hk","4"]);const r=_t(t);r.scrollname="copy",r.scroll=Ht(t)}async function Vae(t,e,A,n){const r=CA(He.MAIN);if(!E(r))return;const s=kt(t);if(!E(s))return;const i=U4(s,e,A);switch(n){case"cutobjects":i.terrain=[];break;case"cutterrain":i.objects=[];break}switch(n){case"cutall":{for(let o=e.y;o<=A.y;++o)for(let a=e.x;a<=A.x;++a){const c=nt(s,{x:a,y:o});c?.category===pn.ISOBJECT&&UA(s,c,r.timestamp),Wt(s,{x:a,y:o})}break}case"cutobjects":{for(let o=e.y;o<=A.y;++o)for(let a=e.x;a<=A.x;++a){const c=nt(s,{x:a,y:o});c?.category===pn.ISOBJECT&&UA(s,c,r.timestamp)}break}case"cutterrain":{for(let o=e.y;o<=A.y;++o)for(let a=e.x;a<=A.x;++a)Wt(s,{x:a,y:o});break}}await F4(()=>i)}function qae(t,e,A){const n=dr(e,A);we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,"batch","cut terrain & objects",[`cutall:${n}`,"hk","1"]),Te(t,"batch","cut objects",[`cutobjects:${n}`,"hk","2"]),Te(t,"batch","cut terrain",[`cutterrain:${n}`,"hk","3"]);const r=_t(t);r.scrollname="cut",r.scroll=Ht(t)}async function Wae(t,e,A,n){const r=kt(t),s=await G_();if(!E(r)||!E(s))return;const i=Math.min(e.x,A.x),o=Math.min(e.y,A.y),a=Math.max(e.x,A.x),c=Math.max(e.y,A.y),l=a-i+1,u=c-o+1,f=Math.min(s.width,l),h=Math.min(s.height,u);switch(n){case"pasteall":{for(let d=0;d<h;++d)for(let m=0;m<f;++m){const p=wn({x:m,y:d},s.width);Wt(r,{...s.terrain[p],x:i+m,y:o+d})}for(let d=0;d<s.objects.length;++d){const m=s.objects[d];E(m.x)&&E(m.y)&&Cp(m.x,m.y,0,l-1,u-1,0)&&n_(r,{...m,id:void 0,x:i+m.x,y:o+m.y})}break}case"pasteobjects":for(let d=0;d<s.objects.length;++d){const m=s.objects[d];E(m.x)&&E(m.y)&&Cp(m.x,m.y,0,l-1,u-1,0)&&n_(r,{...m,id:void 0,x:i+m.x,y:o+m.y})}break;case"pasteterrain":for(let d=0;d<h;++d)for(let m=0;m<f;++m){const p=wn({x:m,y:d},s.width);Wt(r,{...s.terrain[p],x:i+m,y:o+d})}break;case"pasteterraintiled":for(let d=o;d<=c;++d)for(let m=i;m<=a;++m){const p=(m-i)%s.width,w=(d-o)%s.height,b=wn({x:p,y:w},s.width);Wt(r,{...s.terrain[b],x:m,y:d})}break}}function Qae(t,e,A){const n=dr(e,A);we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,"batch","paste terrain & objects",[`pasteall:${n}`,"hk","1"]),Te(t,"batch","paste objects",[`pasteobjects:${n}`,"hk","2"]),Te(t,"batch","paste terrain",[`pasteterrain:${n}`,"hk","3"]),Te(t,"batch","paste terrain tiled",[`pasteterraintiled:${n}`,"hk","4"]);const r=_t(t);r.scrollname="paste",r.scroll=Ht(t)}async function G_(){return $l("secretheap")}function M_(t,e){return`inspect:${e?.id??Os(t,e)}`}function v_(t,e){const A=yA(Ye.BOARD,e);we(t,`board ${gt(A)}:`),Te(t,"batch",`board id ${e}`,["copyit",e]),Te(t,"batch","edit board codepage",[`pageopen:${e}`])}function D_(t,e,A){const n=VO("text","gadget:action");n.length&&we(t,"gadget actions:");const r=dr(e,A);for(let s=0;s<n.length;++s){const i=n[s],o=gt(i);Te(t,"gadget",`run ${o}`,["action","",i.id,r])}}async function Kae(t,e,A){const n=CA(He.MAIN),r=await Lae();if(!E(n))return;const s=kt(t);if(!E(s))return;if(eA(s),e.x===A.x&&e.y===A.y){const o=nt(s,e),a=E8(n,o);E(o)&&E(a)&&sce(t,s,a,o,e,Mt(o)),o?.kind||(we(t,`empty: ${e.x}, ${e.y}`),we(t,St),Te(t,"empty","copy coords",[`copycoords:${e.x},${e.y}`,"hk","5"," 5 "]),D_(t,e,A),v_(t,s.id))}else Jae(t,e,A,r);const i=_t(t);i.scrollname="inspect",i.scroll=Ht(t)}function Jae(t,e,A,n){const r=CA(He.MAIN);if(!E(r))return;const s=kt(t);if(!E(s))return;let i=0;function o(m){return m==="group"?i:0}function a(m,p){m==="group"&&Ne(p)&&(i=p,Pp(e.x,e.y,A.x,A.y).forEach(w=>{const b=nt(s,w);E(b)&&(b[m]=`group${p}`)}))}const c=dr(e,A);we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,"batch","copy elements",[`copy:${c}`,"hk","1"," 1 ","next"]),Te(t,"batch","cut elements",[`cut:${c}`,"hk","2"," 2 ","next"]),n&&Te(t,"batch","paste elements",[`paste:${c}`,"hk","3"," 3 ","next"]),Te(t,"batch","copy coords",[`copycoords:${c}`,"hk","5"," 5 "]),n&&Te(t,"batch","style transfer",[`style:${c}`,"hk","s"," S ","next"]),Te(t,"remix","remix coords",[`remix:${c}`,"hk","r"," R ","next"]),we(t,St),Te(t,"batch","set chars:",[`chars:${c}`,"hk","a"," A ","next"]),Te(t,"batch","set colors:",[`colors:${c}`,"hk","c"," C ","next"]),Te(t,"batch","set bgs:",[`bgs:${c}`,"hk","b"," B ","next"]),Te(t,`groups:${c}`,"group",["group","select","none","0",...zc(1,127).map(m=>[`group${m}`,`${m}`]).flat()],o,a),we(t,St),Te(t,"batch","make empty",[`empty:${c}`,"hk","0"," 0 ","next"]),we(t,St),D_(t,e,A),we(t,"codepages:");const l=Math.min(e.x,A.x),u=Math.min(e.y,A.y),f=Math.max(e.x,A.x),h=Math.max(e.y,A.y),d=new Set;for(let m=u;m<=h;++m)for(let p=l;p<=f;++p){const w=nt(s,{x:p,y:m}),b=E8(r,w);E(b)&&!d.has(b.id)&&(d.add(b.id),Te(t,"batch",`edit @${gt(b)}`,[`pageopen:${b.id}`]))}v_(t,s.id)}function Xae(t,e,A,n){const r=kt(t);if(!E(r))return;let s=0;function i(){return s}function o(c,l){Ne(l)&&(s=l,Pp(e.x,e.y,A.x,A.y).forEach(u=>{const f=nt(r,u);E(f)&&(f[c]=l)}))}we(t,`batch chars: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,`batch:${dr(e,A)}`,"bg",[n,"bgedit"],i,o);const a=_t(t);a.scrollname="bulk set bg",a.scroll=Ht(t)}function ece(t,e,A){const n=CA(He.MAIN);if(!E(n))return;const r=kt(t);if(!E(r))return;function s(f){return e?.[f]??e?.kinddata?.[f]??0}function i(f,h){E(e)&&(e[f]=h)}const o=e.category===pn.ISTERRAIN?"terrain":"object",a=e.name??e.kind??"ERR",c=`${e.x??-1}, ${e.y??-1}`,l=M_(r,e);we(t,`${o}: ${a} ${c}`),we(t,St),Te(t,l,"char",[A,"charedit"],s,i);const u=_t(t);u.scrollname="char",u.scroll=Ht(t)}function tce(t,e,A,n){const r=kt(t);if(!E(r))return;let s=0;function i(){return s}function o(c,l){Ne(l)&&(s=l,Pp(e.x,e.y,A.x,A.y).forEach(u=>{const f=nt(r,u);E(f)&&(f[c]=l)}))}we(t,`batch chars: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,`batch:${dr(e,A)}`,"char",[n,"charedit"],i,o);const a=_t(t);a.scrollname="bulk set char",a.scroll=Ht(t)}function Ace(t,e,A){const n=CA(He.MAIN);if(!E(n))return;const r=kt(t);if(!E(r))return;function s(f){return e?.[f]??e?.kinddata?.[f]??0}function i(f,h){E(e)&&(e[f]=h)}const o=e.category===pn.ISTERRAIN?"terrain":"object",a=e.name??e.kind??"ERR",c=`${e.x??-1}, ${e.y??-1}`,l=M_(r,e);we(t,`${o}: ${a} ${c}`),we(t,St),Te(t,l,"color",[A,`${A}edit`],s,i);const u=_t(t);u.scrollname=A,u.scroll=Ht(t)}function nce(t,e,A,n){const r=kt(t);if(!E(r))return;let s=0;function i(){return s}function o(c,l){if(Ne(l)){s=l;for(let u=e.y;u<=A.y;++u)for(let f=e.x;f<=A.x;++f){const h=nt(r,{x:f,y:u});E(h)&&(h[c]=l)}}}we(t,`batch chars: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,`batch:${dr(e,A)}`,"color",[n,"coloredit"],i,o);const a=_t(t);a.scrollname="bulk set color",a.scroll=Ht(t)}function rce(t,e){const A=wt(He.MAIN);if(!E(A))return;const n=kt(e);if(!E(n))return;const r=Un(t),s=A_(n,r.target);if(E(s))switch(r.path){case"copycoords":Au(Ae,gA(),[s.x??0,s.y??0].join(" "));break;case"bg":case"color":Ace(e,s,r.path);break;case"char":ece(e,s,r.path);break;case"empty":UA(n,s,A.timestamp);break;case"code":zt(Ae,e,async()=>{const i="object",o=[n.id,s.id];yp(nu(A.id,o),s.code??""),yC(Ae,e),await bi(800);const c=`${Ub(s)}$ONCLEAR$GREEN ${s.name??s.kind??"??"} - ${A.name}`;fx(Ae,e,A.id,o,i,c)});break;default:console.info("unknown inspect",r);break}}function sce(t,e,A,n,r,s){const i=CA(He.MAIN);if(!E(i))return;function o(h){const d=n?.[h]??n?.kinddata?.[h];if(h==="group")return parseFloat(n.group?.replace("group","")??"0");if(!E(d))switch(h){case"color":return 15;case"bg":return 0;case"group":return 0;case"cycle":return bx;case"collision":return $e.ISWALK;case"pushable":return 0;case"breakable":return 0}return d}function a(h,d){E(n)&&(h==="group"?n.group=`group${d}`:n[h]=d)}s?we(t,`object: ${n.name??n.kind??"ERR"} ${r.x}, ${r.y}`):we(t,`terrain: ${n.kind??"ERR"} ${r.x}, ${r.y}`);const c=M_(e,n);switch(s&&we(t,`cycle: ${qe(n,"cycle")}`),qe(n,"collision")){case $e.ISWALK:we(t,"collision: iswalk");break;case $e.ISSWIM:we(t,"collision: isswim");break;case $e.ISSOLID:we(t,"collision: issolid");break;case $e.ISBULLET:we(t,"collision: isbullet");break;case $e.ISGHOST:we(t,"collision: isghost");break}s&&we(t,`ispushable: ${qe(n,"pushable")?"yes":"no"}`),we(t,`isbreakable: ${qe(n,"breakable")?"yes":"no"}`),we(t,St);const u=Zo(A),f=mn(u);for(let h=0;h<f.length;++h){const d=f[h];switch(d){case"char":case"cycle":case"color":case"bg":case"group":case"collision":case"pushable":case"breakable":break;default:if(st(u[d])){const[m,p,...w]=u[d];xe(p)&&Te(t,c,p||d,[d,m,...w],o,a)}break}}Te(t,c,"copy coords",["copycoords","hk","5"," 5 "]),we(t,St),Te(t,c,`char: ${n.char??n.kinddata?.char??1}`,["char","hk","a"," A ","next"],o,a),Te(t,c,`color: ${n.color??n.kinddata?.color??15}`,["color","hk","c"," C ","next"],o,a),Te(t,c,`bg: ${n.bg??n.kinddata?.bg??0}`,["bg","hk","b"," B ","next"],o,a),Te(t,c,"group",["group","select","none","0",...zc(1,127).map(h=>[`group${h}`,`${h}`]).flat()],o,a),we(t,St),Te(t,c,"make empty",["empty","hk","0"],o,a),we(t,St),D_(t,r,r),we(t,"codepages:"),Te(t,"batch",`edit @${gt(A)}`,[`pageopen:${A.id}`]),v_(t,e.id)}function ice(t,e,A,n){const r=CA(He.MAIN);if(!E(r))return;const s=kt(t);if(E(s))switch(n){case"emptyall":{for(let i=e.y;i<=A.y;++i)for(let o=e.x;o<=A.x;++o){const a=nt(s,{x:o,y:i});a?.category===pn.ISOBJECT&&UA(s,a,r.timestamp),Wt(s,{x:o,y:i})}break}case"emptyobjects":{for(let i=e.y;i<=A.y;++i)for(let o=e.x;o<=A.x;++o){const a=nt(s,{x:o,y:i});a?.category===pn.ISOBJECT&&UA(s,a,r.timestamp)}break}case"emptyterrain":{for(let i=e.y;i<=A.y;++i)for(let o=e.x;o<=A.x;++o)Wt(s,{x:o,y:i});break}}}function oce(t,e,A){const n=CA(He.MAIN);if(!E(n))return;const r=kt(t);if(!E(r))return;const s=dr(e,A);we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St),Te(t,"batch","clear terrain & objects",[`emptyall:${s}`,"hk","1"]),Te(t,"batch","clear objects",[`emptyobjects:${s}`,"hk","2"]),Te(t,"batch","clear terrain",[`emptyterrain:${s}`,"hk","3"]);const i=_t(t);i.scrollname="empty",i.scroll=Ht(t)}let ya={expr1:"player",expr2:"",expr3:"",expr4:""};async function ace(t,e){const A=kt(e);if(!E(A))return;await uce(()=>ya);const n=ya[t]??"";E(n)?wi(Ae,e,`#findany ${n?`any ${n}`:""}`):wi(Ae,e,"#findany")}async function cce(t){const e=await lce();ya={...ya,...e};const A=kt(t);if(!E(A))return;we(t,"find any element(s)"),we(t,St);function n(i){return ya[i]}function r(i,o){(Ne(o)||xe(o))&&(ya[i]=o)}Te(t,"findany","slot 1: any",["expr1","text"],n,r),Te(t,"findany","slot 2: any",["expr2","text"],n,r),Te(t,"findany","slot 3: any",["expr3","text"],n,r),Te(t,"findany","slot 4: any",["expr4","text"],n,r),we(t,St),Te(t,"findany","clear find(s)",["clear","hk","c"," C "]),Te(t,"findany","find 1",["expr1","hk","1"," 1 "]),Te(t,"findany","find 2",["expr2","hk","2"," 2 "]),Te(t,"findany","find 3",["expr3","hk","3"," 3 "]),Te(t,"findany","find 4",["expr4","hk","4"," 4 "]);const s=_t(t);s.scrollname="findany",s.scroll=Ht(t)}async function lce(){return $l("findanyconfig")}async function uce(t){return Vl("findanyconfig",t)}function go(t,e){switch(t){case Ye.OBJECT:we(e,"$greenobject - moving board elements");break;case Ye.TERRAIN:we(e,"$greenterrain - walkable, walls, or water");break;case Ye.BOARD:we(e,"$greenboard - 60 x 25 area of terrain & object");break;case Ye.LOADER:we(e,"$greenloader - run code on @event(s)");break;case Ye.PALETTE:we(e,"$greenpalette - custom 16 colors");break;case Ye.CHARSET:we(e,"$greencharset - custom ascii font");break}}function hce(t,e){const A=sn(t);go(A,e),Te(e,"makeit",`edit$CYAN @${Jr(t)} ${gt(t)}`,["edit","",t.id]),t.code.split(`
`).slice(1,6).forEach(r=>we(e,`$WHITE  ${r}`))}function fce(t,e){const A=HA();let n=!0;for(let r=0;r<A.length;++r){const s=ZU(A[r],t);for(let i=0;i<s.length;++i)n=!1,hce(s[i],e)}return n}function dce(t){const e=HA();for(let A=0;A<e.length;++A){const n=Vs(e[A],t);if(E(n))return n}}function mce(t,e,A){function n(s){const i=Jr(s),o=gt(s);bt(Ae,A,`!pageopen ${s.id};$blue[${i}]$white ${o}`)}function r(s,i){zt(Ae,A,async()=>{E(s)&&(i&&n(s),await bi(800),wi(Ae,A,`#pageopen ${s.id}`))})}switch(t){case"edit":{const[s]=e;r(dce(s),!1);break}case"create":{const[s,i]=e;switch(s){case vn(ye.LOADER):{const[o,a]=Vi(He.MAIN,i,Ye.LOADER);r(o,a);break}case vn(ye.BOARD):{const[o]=Vi(He.MAIN,i,Ye.BOARD);if(E(o)){n(o);const a=wt(He.MAIN),c={x:Math.round(Ie*.5),y:Math.round(rt*.5)};ni(a,A,o.id,c)}break}case vn(ye.OBJECT):{const[o,a]=Vi(He.MAIN,i,Ye.OBJECT);r(o,a);break}case vn(ye.TERRAIN):{const[o,a]=Vi(He.MAIN,i,Ye.TERRAIN);r(o,a);break}case vn(ye.CHARSET):{const[o,a]=Vi(He.MAIN,i,Ye.CHARSET);r(o,a);break}case vn(ye.PALETTE):{const[o,a]=Vi(He.MAIN,i,Ye.PALETTE);r(o,a);break}}break}}}function pce(t,e){const[A,n]=t.split(";"),r=A.split(" "),s=t0(n,r,!0),i=t0(n,r,!1);function o(l,u){const f=vn(l);switch(l){case ye.OBJECT:go(Ye.OBJECT,e);break;case ye.TERRAIN:go(Ye.TERRAIN,e);break;case ye.BOARD:go(Ye.BOARD,e);break;case ye.LOADER:go(Ye.LOADER,e);break;case ye.PALETTE:go(Ye.PALETTE,e);break;case ye.CHARSET:go(Ye.CHARSET,e);break}switch(l){case ye.OBJECT:Te(e,"makeit",`create object$CYAN @${u}`,["create","hk","o","","",f,u]);break;case ye.TERRAIN:Te(e,"makeit",`create$CYAN @terrain ${u}`,["create","hk","t","","",f,u]);break;case ye.BOARD:Te(e,"makeit",`create$CYAN @board ${u}`,["create","hk","b","","",f,u]);break;case ye.LOADER:Te(e,"makeit",`create$CYAN @loader ${u}`,["create","hk","l","","",f,u]);break;case ye.PALETTE:Te(e,"makeit",`create$CYAN @palette ${u}`,["create","hk","p","","",f,u]);break;case ye.CHARSET:Te(e,"makeit",`create$CYAN @charset ${u}`,["create","hk","c","","",f,u]);break}we(e,"")}if(fce(A,e))switch(s.type){case ye.LOADER:case ye.BOARD:case ye.TERRAIN:case ye.CHARSET:case ye.PALETTE:{const l=s.values.join(" ");o(s.type,l);break}case ye.OBJECT:if(i.values[0].toLowerCase()==="object"){const u=i.values.slice(1).join(" ");o(s.type,u)}else{const l=i.values.join(" ");switch(i.type){case ye.CONST:o(ye.OBJECT,l),i.values.length===1&&(o(ye.TERRAIN,l),o(ye.BOARD,l),o(ye.LOADER,l),o(ye.PALETTE,l),o(ye.CHARSET,l)),we(e,"$purple  if you typed in @char 12 or similar"),we(e,"$purple  try using #set <stat> <value> instead"),we(e,"$purple  or you can edit the @player codepage"),we(e,"$purple  to make changes to player stats");break;case ye.RANGE:case ye.SELECT:case ye.NUMBER:case ye.TEXT:case ye.HOTKEY:case ye.COPYIT:case ye.OPENIT:case ye.VIEWIT:case ye.ZSSEDIT:case ye.CHAREDIT:case ye.COLOREDIT:break}}break}const c=_t(e);c.scrollname="makeit",c.scroll=Ht(e)}async function gce(t,e){const A=kt(e);if(!E(A))return;const n=Un(t),[r,s,i,o]=n.path.split(",").map(l=>parseFloat(l)),a={x:Math.min(r,i),y:Math.min(s,o)},c={x:Math.max(r,i),y:Math.max(s,o)};switch(n.target){case"remix":{await $4(e,a,c);break}case"remixrun":{const l=ct(li.stat);E(l)&&(t4(A.id,l.id,li.patternsize,li.mirror,a,c,"all")?await bi(3e3):is(Ae,e,"failed to remix")),await bce(()=>li),await bi(100),await $4(e,a,c);break}default:console.info("unknown remix",n);break}}async function $4(t,e,A){const n=await wce();li={...li,...n};const r=dr(e,A);we(t,`selected: ${e.x},${e.y} - ${A.x},${A.y}`),we(t,St);function s(a){return li[a]}function i(a,c){(Ne(c)||xe(c))&&(li[a]=c)}Te(t,"remix","source board",["stat","text"],s,i),Te(t,"remix","patternsize",["patternsize","number","1","5"],s,i),Te(t,"remix","mirror",["mirror","number","1","8"],s,i),we(t,St),Te(t,"remix","run",[`remixrun:${r}`,"hk","r"," R "]);const o=_t(t);o.scrollname="remix",o.scroll=Ht(t)}async function wce(){return $l("remixconfig")}async function bce(t){return Vl("remixconfig",t)}let li={stat:"",patternsize:2,mirror:1};var Ee=typeof Ee<"u"?Ee:{},ql={},ui;for(ui in Ee)Ee.hasOwnProperty(ui)&&(ql[ui]=Ee[ui]);var Ga=Ee.printErr||console.warn.bind(console);for(ui in ql)ql.hasOwnProperty(ui)&&(Ee[ui]=ql[ui]);var B_=(t,e)=>{throw e};ql=null,Ee.arguments&&Ee.arguments,Ee.thisProgram&&(thisProgram=Ee.thisProgram),Ee.quit&&(B_=Ee.quit),typeof WebAssembly!="object"&&k_("no native wasm support detected");var wd,bd=!1,_d,V4;function q4(){var t=wd.buffer;Ee.HEAP8=new Int8Array(t),Ee.HEAPU8=V4=new Uint8Array(t)}var W4=[],Q4=[],K4=[];function _ce(){if(Ee.preRun)for(typeof Ee.preRun=="function"&&(Ee.preRun=[Ee.preRun]);Ee.preRun.length;)Gce(Ee.preRun.shift());E_(W4)}function xce(){E_(Q4)}function yce(){if(Ee.postRun)for(typeof Ee.postRun=="function"&&(Ee.postRun=[Ee.postRun]);Ee.postRun.length;)vce(Ee.postRun.shift());E_(K4)}function Gce(t){W4.unshift(t)}function Mce(t){Q4.unshift(t)}function vce(t){K4.unshift(t)}var wo=0,Wl=null;function Dce(t){var e;wo++,(e=Ee.monitorRunDependencies)===null||e===void 0||e.call(Ee,wo)}function Bce(t){var e;if(wo--,(e=Ee.monitorRunDependencies)===null||e===void 0||e.call(Ee,wo),wo==0&&Wl){var A=Wl;Wl=null,A()}}function k_(t){var e;(e=Ee.onAbort)===null||e===void 0||e.call(Ee,t),t="Aborted("+t+")",Ga(t),bd=!0,t+=". Build with -sASSERTIONS for more info.";var A=new WebAssembly.RuntimeError(t);throw A}function kce(){return{a:Lce}}function Ece(t){return fetch(t,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})}function Nce(t){var e=kce();function A(o,a){return RA=o.exports,wd=RA.f,q4(),Mce(RA.g),Bce(),RA}Dce();function n(o){A(o.instance)}function r(o){return Ece(t).then(function(a){var c=WebAssembly.instantiate(a,e);return c}).then(o,function(a){Ga("failed to asynchronously prepare wasm: "+a),k_(a)})}function s(){return t&&t.byteLength>0?WebAssembly.instantiate(t,e).then(n,function(o){Ga("wasm compile failed: "+o)}):typeof WebAssembly.instantiateStreaming=="function"&&typeof t=="string"&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(function(o){var a=WebAssembly.instantiateStreaming(o,e);return a.then(n,function(c){return Ga("wasm streaming compile failed: "+c),Ga("falling back to ArrayBuffer instantiation"),r(n)})}):r(n)}if(Ee.instantiateWasm)try{var i=Ee.instantiateWasm(e,A);return i}catch(o){return Ga("Module.instantiateWasm callback failed with error: "+o),!1}return s(),{}}class J4{constructor(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}}var E_=t=>{for(;t.length>0;)t.shift()(Ee)},X4=Ee.noExitRuntime||!0,Tce=()=>k_(""),eS=0,Oce=()=>{X4=!1,eS=0},Ql={},tS=t=>{if(t instanceof J4||t=="unwind")return _d;B_(1,t)},AS=()=>X4||eS>0,nS=t=>{var e;_d=t,AS()||((e=Ee.onExit)===null||e===void 0||e.call(Ee,t),bd=!0),B_(t,new J4(t))},Yce=(t,e)=>{_d=t,nS(t)},Sce=Yce,Cce=()=>{if(!AS())try{Sce(_d)}catch(t){tS(t)}},Pce=t=>{if(!bd)try{t(),Cce()}catch(e){tS(e)}},Zce=()=>performance.now(),Ice=(t,e)=>{if(Ql[t]&&(clearTimeout(Ql[t].id),delete Ql[t]),!e)return 0;var A=setTimeout(()=>{delete Ql[t],Pce(()=>rS(t,Zce()))},e);return Ql[t]={id:A,timeout_ms:e},0},Rce=()=>2147483648,jce=(t,e)=>Math.ceil(t/e)*e,zce=t=>{var e=wd.buffer,A=(t-e.byteLength+65535)/65536|0;try{return wd.grow(A),q4(),1}catch{}},Hce=t=>{var e=V4.length;t>>>=0;var A=Rce();if(t>A)return!1;for(var n=1;n<=4;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var s=Math.min(A,jce(Math.max(t,r),65536)),i=zce(s);if(i)return!0}return!1},Lce={c:Tce,b:Oce,d:Ice,e:Hce,a:nS},RA;Ee._ZSTD_isError=t=>(Ee._ZSTD_isError=RA.h)(t),Ee._ZSTD_compressBound=t=>(Ee._ZSTD_compressBound=RA.i)(t),Ee._ZSTD_createCCtx=()=>(Ee._ZSTD_createCCtx=RA.j)(),Ee._ZSTD_freeCCtx=t=>(Ee._ZSTD_freeCCtx=RA.k)(t),Ee._ZSTD_compress_usingDict=(t,e,A,n,r,s,i,o)=>(Ee._ZSTD_compress_usingDict=RA.l)(t,e,A,n,r,s,i,o),Ee._ZSTD_compress=(t,e,A,n,r)=>(Ee._ZSTD_compress=RA.m)(t,e,A,n,r),Ee._ZSTD_createDCtx=()=>(Ee._ZSTD_createDCtx=RA.n)(),Ee._ZSTD_freeDCtx=t=>(Ee._ZSTD_freeDCtx=RA.o)(t),Ee._ZSTD_getFrameContentSize=(t,e)=>(Ee._ZSTD_getFrameContentSize=RA.p)(t,e),Ee._ZSTD_decompress_usingDict=(t,e,A,n,r,s,i)=>(Ee._ZSTD_decompress_usingDict=RA.q)(t,e,A,n,r,s,i),Ee._ZSTD_decompress=(t,e,A,n)=>(Ee._ZSTD_decompress=RA.r)(t,e,A,n),Ee._malloc=t=>(Ee._malloc=RA.s)(t),Ee._free=t=>(Ee._free=RA.t)(t);var rS=(t,e)=>(rS=RA.v)(t,e),xd;Wl=function t(){xd||sS(),xd||(Wl=t)};function sS(){if(wo>0||(_ce(),wo>0))return;function t(){var e;xd||(xd=!0,Ee.calledRun=!0,!bd&&(xce(),(e=Ee.onRuntimeInitialized)===null||e===void 0||e.call(Ee),yce()))}Ee.setStatus?(Ee.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>Ee.setStatus(""),1),t()},1)):t()}if(Ee.run=sS,Ee.preInit)for(typeof Ee.preInit=="function"&&(Ee.preInit=[Ee.preInit]);Ee.preInit.length>0;)Ee.preInit.pop()();Ee.init=Nce;var Uce=function(t,e,A,n){function r(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(l){try{c(n.next(l))}catch(u){i(u)}}function a(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?s(l.value):r(l.value).then(o,a)}c((n=n.apply(t,e||[])).next())})};const Fce=new Promise(t=>{Ee.onRuntimeInitialized=t}),$ce=()=>Uce(void 0,void 0,void 0,function*(){yield Fce}),iS=t=>{const e=Ee._ZSTD_isError;return e(t)},Vce=(t,e)=>{const A=Ee._ZSTD_getFrameContentSize;return A(t,e)},qce=(t,e={defaultHeapSize:1024*1024})=>{const A=Ee._malloc,n=A(t.byteLength);Ee.HEAP8.set(t,n);const r=Vce(n,t.byteLength),s=r===-1?e.defaultHeapSize:r,i=Ee._free,o=A(s);try{const a=Ee._ZSTD_decompress,c=a(o,s,n,t.byteLength);if(iS(c))throw new Error(`Failed to compress with code ${c}`);const l=new Uint8Array(Ee.HEAPU8.buffer,o,c).slice();return i(o,s),i(n,t.byteLength),l}catch(a){throw i(o,s),i(n,t.byteLength),a}},Wce=t=>{const e=Ee._ZSTD_compressBound;return e(t)},Qce=(t,e)=>{const A=Wce(t.byteLength),n=Ee._malloc,r=n(A),s=n(t.byteLength);Ee.HEAP8.set(t,s);const i=Ee._free;try{const o=Ee._ZSTD_compress,a=o(r,A,s,t.byteLength,e??3);if(iS(a))throw new Error(`Failed to compress with code ${a}`);const c=new Uint8Array(Ee.HEAPU8.buffer,r,a).slice();return i(r,A),i(s,t.byteLength),c}catch(o){throw i(r,A),i(s,t.byteLength),o}};var Kce=function(t,e,A,n){function r(s){return s instanceof A?s:new A(function(i){i(s)})}return new(A||(A=Promise))(function(s,i){function o(l){try{c(n.next(l))}catch(u){i(u)}}function a(l){try{c(n.throw(l))}catch(u){i(u)}}function c(l){l.done?s(l.value):r(l.value).then(o,a)}c((n=n.apply(t,e||[])).next())})};const Jce=t=>Kce(void 0,void 0,void 0,function*(){const e=new URL("/assets/zstd-CV7N7xSg.wasm",self.location.href).href;Ee.init(e),yield $ce()});let oS=!1;async function aS(){oS||(await Jce(),oS=!0)}function Xce(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),A="=".repeat((4-e.length%4)%4);return e+A}function ele(t){return t.replace(/\+/g,"-").replace(/\//g,"_")}function tle(t){if(t===void 0)return"";const e=Math.floor((Date.now()-t)/1e3);if(e<60)return`${e}s`;const A=Math.floor(e/60);return A<60?`${A}m`:`${Math.floor(A/60)}h`}async function cS(t,e){const A=HU(t),n=wt(He.MAIN),r=new Set(n?.activelist??[]);r.add(gA());const s=[...r];we(t,"active player list"),we(t,St);for(let u=0;u<s.length;++u){const f=s[u],{user:h}=on(f),d=xe(h)?h:"player",m=kt(f),p=uA(m,f),w=pA(p),b=`$${Xe[w.color]}$ON${Xe[w.bg]}$${w.char}$ONCLEAR$CYAN`,g=`$WHITEis on ${m?.name??"void board"}`,x=e?tle(e[f]):"",_=x?` $GREY(idle ${x})`:"";A&&E(m)?Te(t,"admingoto",`${b} ${d} ${g}${_}`,[f]):we(t,`${b} ${d} ${A?g:""}${_}`)}we(t,""),we(t,"util list"),we(t,St),Te(t,"adminop","toggle #gadget inspector",["gadget"]);const i=i0();we(t,`#dev mode is ${i?"on":"off"}`),A&&Te(t,"adminop",`turn ${i?"off":"on"} #dev mode`,["dev"]);const o=await Iae(),a={};we(t,""),we(t,"config list"),we(t,St);for(let u=0;u<o.length;++u){const[f,h]=o[u];Te(t,"admin",f,[f,"select","off","0","on","1"],d=>(a[d]??h??y_(d))==="on"?1:0,(d,m)=>{a[d]=m?"on":"off",zt(Ae,t,async()=>{await Zae(d,a[d])})})}we(t,""),we(t,"multiplayer"),we(t,St);const c=UU();if(c){const u=RY()?location.href:`${location.origin}/join/#${c}`;Te(t,"adminop",c,["copyit",u]),we(t,"");const f=_Y(u);for(let h=0;h<f.length;h++)we(t,f[h])}else we(t,"session not active"),RY()||Te(t,"adminop","open multiplayer session",["joincode"]),we(t,"");const l=_t(t);l.scrollname="cpu #admin",l.scroll=Ht(t)}async function N_(t){await aS(),console.info("saved",t);const e=new Pb;for(let n=0;n<t.length;++n){const r=t[n],s=CU(r);if(s){const i=sR(s);if(E(i)){const o=Qce(i,15);e.file(r.id,o,{date:jR})}}}const A=await e.generateAsync({type:"base64"});return ele(A)}async function Ale(t){await aS();const e=[],A=Xce(t),n=await Pb.loadAsync(A,{base64:!0}),r=[];n.forEach((s,i)=>r.push(i));for(let s=0;s<r.length;++s){const i=r[s],o=await i.async("string"),a=Sp(o);if(E(a)){const h=A0(a);if(E(h)){e.push(h);continue}}const c=await i.async("uint8array"),l=Sp(c);if(E(l)){const h=A0(l);if(E(h)){e.push(h);continue}}const u=qce(c),f=Sp(u);if(E(f)){const h=A0(f);E(h)&&e.push(h)}}return e}const nle=16,hi={},yd={},Ma={},rle=60;let lS=0;const va={},Gd={},Kl={};async function uS(t){const e=HA(),A=wt(He.MAIN);if(e.length&&E(A)){const n=await N_(e),r=`${t?"autosave ":""}${new Date().toISOString()} ${A.name} ${n.length} chars`;vC(Le,gA(),r,n,e)}}async function sle(t){const e=HA(),A=wt(He.MAIN);if(e.length&&E(A)){const n=await N_(e);DC(Le,gA(),n,t)}}async function ile(){const t=HA(),e=wt(He.MAIN);return t.length&&E(e)?await N_(t):""}const hS="$176$176$177$177$178 ZZT BRIDGE $178$177$177$176$176";function fS(t){we(t,`Searching ${"$6".repeat(tn(1,6))}`);const e=_t(t);e.scrollname=hS,e.scroll=Ht(t)}function dS(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=`pub: ${new Date(r.publish_date).toLocaleDateString()}`;we(e,`$white${r.title}`),we(e,`$yellow  ${r.author.join(", ")}`),we(e,`$dkgreen  ${r.genres.join(", ")}`),we(e,`$purple  ${s}`),r.screenshot&&Te(e,"zztbridge",r.screenshot,["viewit",wie(r.screenshot)]),Te(e,"zztbridge",r.filename,["zztimport","",`${r.letter}/${r.filename}`]),we(e," ")}const A=_t(e);A.scrollname=hS,A.scroll=Ht(e)}const Le=gi("vm",["tick","second"],t=>{if(!Le.session(t))return;const e=gA();switch(t.target){case"operator":LU(t.player),_A(Le,t.player,`operator set to ${t.player}`),Le.replynext(t,"ackoperator",!0);break;case"topic":xe(t.data)&&FU(t.data);break;case"admin":zt(Le,t.player,async()=>{await cS(t.player,Ma)});break;case"zsswords":{const A=wt(He.MAIN),n=["cw","ccw","oop","rndp","to","over","under","ground","within","awayby","elements"];Le.replynext(t,"ackzsswords",{cli:Kb(oi.CLI),loader:Kb(oi.LOADER),runtime:Kb(oi.RUNTIME),flags:[...mn(on(t.player)),"inputmove","inputalt","inputctrl","inputshift","inputok","inputcancel","inputmenu","didshoot"],stats:["currenttick","boardid","isdark","notdark","startx","starty","over","under","camera","graphics","charset","palette","facing","exitnorth","exitsouth","exitwest","exiteast","timelimit","restartonzap","norestartonzap","maxplayershots","b1","b2","b3","b4","b5","b6","b7","b8","b9","b10","playerid","playerx","playery","thisid","thisx","thisy","senderid","senderx","sendery","item","group","party","player","pushable","collision","breakable","ispushable","notpushable","iswalk","iswalking","iswalkable","isswim","isswimming","isswimable","issolid","isbullet","isghost","isbreakable","notbreakable","p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","cycle","stepx","stepy","shootx","shooty","light","lightdir","arg"],kinds:[...Li(A,Ye.OBJECT).map(r=>gt(r)),...mn(Mb)],altkinds:[...Li(A,Ye.TERRAIN),...Li(A,Ye.BOARD),...Li(A,Ye.PALETTE),...Li(A,Ye.CHARSET),...Li(A,Ye.LOADER)].map(r=>gt(r)),colors:[...mn(Lc)],dirs:[...mn(Hp).filter(r=>n.includes(r)===!1)],dirmods:[...n,...mn(yb)],exprs:["aligned","alligned","contact","blocked","any","countof","color","detect","rnd","abs","intceil","intfloor","intround","clamp","min","max","pick","pickwith","random","randomwith","run","runwith"]});break}case"books":t.player===e&&zt(Le,t.player,async()=>{let A=[];st(t.data)?A=t.data:xe(t.data)&&(A=await Ale(t.data));const n=A.map(r=>r.name);_A(Le,t.player,`loading ${n.join(", ")}`),eF(A),qd(Le,t.player)});break;case"search":Y9(t.player)||qd(Le,t.player);break;case"logout":mx(Le,t.player),T9(t.player,!!t.data),delete hi[t.player],delete Ma[t.player],_A(Le,e,`player ${t.player} logout`),qd(Le,t.player);break;case"login":eY(t.player,t.data)?(hi[t.player]=0,Ma[t.player]=Date.now(),_A(Le,gA(),`login from ${t.player}`),Le.replynext(t,"acklogin",!0)):Le.replynext(t,"acklogin",!1);break;case"local":eY(t.player,{})?(hi[t.player]=0,Ma[t.player]=Date.now(),_A(Le,gA(),`login from ${t.player}`),Le.replynext(t,"acklogin",!0)):Le.replynext(t,"acklogin",!1);break;case"doot":hi[t.player]=0,yd[t.player]=yd[t.player]??0,yd[t.player]%32===0&&_A(Le,t.player,`$whiteactive $blue${t.player}`),++yd[t.player];break;case"input":{if(t.player.includes("local")&&!C8(t.player)&&QC(Le,t.player),!t.player.includes("local")||C8(t.player)){Ma[t.player]=Date.now();const A=on(t.player),[n=Lt.NONE,r=0]=t.data??[Lt.NONE,0];st(A.inputqueue)||(A.inputqueue=[]),n!==Lt.NONE&&A.inputqueue.push([n,r])}break}case"look":{const A=kt(t.player),n=_t(t.player);Le.reply(t,"acklook",{board:A,tickers:n.tickers??[],scrollname:n.scrollname??"",scroll:n.scroll??[],sidebar:n.sidebar??[]});break}case"agentstart":{const A=Loe(),n=A.id();Kl[n]=A,bt(Le,t.player,`agent ${n} started`),Kd(Le,t.player);break}case"agentstop":if(xe(t.data)){const A=t.data,n=Kl[A];E(n)?(n.stop(),delete Kl[A],bt(Le,t.player,`agent ${A} stopped`),Kd(Le,t.player)):xt(Le,t.player,"vm",`agent ${A} not found`)}break;case"agentlist":{const A=Object.values(Kl);if(A.length===0){bt(Le,t.player,"no agents running");return}else{$f(Le,t.player,"agents");for(let n=0;n<A.length;++n){const r=A[n];bt(Le,t.player,`!copyit ${r.id()};agent ${r.id()}`)}}break}case"agentprompt":if(st(t.data)){const[A,n]=t.data,r=Kl[A];E(r)?GC(Le,t.player,A,n):xt(Le,t.player,"vm",`agent ${A} not found`)}break;case"codewatch":if(st(t.data)){const[A,n]=t.data,r=nu(A,n);E(Gd[r])||(Gd[r]=WM(r,s=>{const[i,o]=n,a=bs(A),c=Vs(a,i);if(E(c))if(sn(c)===Ye.BOARD&&E(o)){const l=Ar(c),u=uA(l,o);E(u)&&(u.code=s,Th(Yh(s),u))}else c.code=s,YU(c)})),va[r]=va[r]??new Set,va[r].add(t.player)}break;case"coderelease":if(st(t.data)){const[A,n]=t.data,[,r]=n,s=nu(A,n);E(va[s])&&(va[s].delete(t.player),va[s].size===0&&(Gd[s]?.(),Gd[s]=void 0,xe(r)&&Zl(r)))}break;case"clearscroll":{const A=kt(t.player);if(E(A)){const n=Object.keys(A.objects);for(let r=0;r<n.length;++r)Z9(n[r],t.player)}break}case"halt":if(t.player===e){const A=!i0();$U(A),_A(Le,t.player,`#dev mode is ${A?"$greenon":"$redoff"}`),ux(Le,t.player,A)}break;case"tick":{P9(i0());break}case"second":{O9(hi);const A=Object.keys(hi);for(let n=0;n<A.length;++n)++hi[A[n]];for(let n=0;n<A.length;++n){const r=A[n];hi[r]>=nle&&Ta(Le,r,!1)}++lS>=rle&&(lS=0,zt(Le,t.player,async()=>{await uS(!0)}));break}case"makeitscroll":xe(t.data)&&pce(t.data,t.player);break;case"refscroll":{Sb(Vf("refscroll:menu"),n=>MY(t.player,n));const A=_t(t.player);A.scrollname="#help or $meta+h",A.scroll=Ht(t.player);break}case"readzipfilelist":{const A=hie();we(t.player,"$CENTER Select Files"),Te(t.player,"zipfilelist","import selected",["importfiles"]);for(let r=0;r<A.length;++r){const[s,i]=A[r];s&&(we(t.player,i),Te(t.player,"zipfilelist",`[${s}]`,[je(i),"select","NO","0","YES","1"],o=>die(o)?1:0,(o,a)=>{fie(o,!!a)}))}const n=_t(t.player);n.scrollname="zipfilelist",n.scroll=Ht(t.player);break}case"fork":t.player===e&&zt(Le,t.player,async()=>{await sle(t.data)});break;case"zztsearch":zt(Le,t.player,async()=>{if(st(t.data)){const[A,n]=t.data;let r=0;const s=[];for(;s.length<256;){fS(t.player);const i=await pie(A,n,r);if(r+=i.length,s.push(...i),i.length<25)break}dS(s,t.player)}});break;case"zztrandom":zt(Le,t.player,async()=>{fS(t.player);const A=await gie();dS(A,t.player)});break;case"publish":zt(Le,t.player,async()=>{if(t.player===e&&st(t.data)){const A=await ile();BC(Le,t.player,A,...t.data)}});break;case"flush":t.player===e&&zt(Le,t.player,async()=>{await uS()});break;case"cli":nY(t.player,t.data);break;case"clirepeatlast":C9(t.player);break;case"restart":t.player===e&&(S9(),px(Le,t.player));break;case"inspect":zt(Le,t.player,async()=>{if(st(t.data)){const[A,n]=t.data;await Kae(t.player,A,n)}});break;case"findany":zt(Le,t.player,async()=>{await cce(t.player)});break;case"loader":if(st(t.data)){const[A,n,r,s]=t.data;switch(zt(Le,t.player,async()=>{await Pae("loaderlogging")==="on"&&(console.info("loader event",r,n,A,s),_A(Le,t.player,`loader event ${r} ${n}`))}),n){case"file":Hb(t.player,s);break;case"json":if(/file:.*\.book.json/.test(r)){_A(Le,t.player,`loading ${r}`);const i=JSON.parse(s.json);E(i.data)&&xe(i.exported)&&(Sh(i.data),_A(Le,t.player,`loaded ${i.exported}`))}else if(/file:.*\..*\.codepage.json/.test(r)){_A(Le,t.player,`loading ${r}`);const i=JSON.parse(s.json),o=wt(He.MAIN);E(o)&&E(i.data)&&xe(i.exported)&&($i(o,i.data),_A(Le,t.player,`loaded ${i.exported}`))}else $O(A,n,r,s,t.player);break;default:$O(A,n,r,s,t.player);break}}break;default:{const{target:A,path:n}=Un(t.target);switch(je(A)){case"adminop":{switch(n){case"dev":wi(Le,t.player,"#dev");break;case"gadget":wi(Le,t.player,"#gadget");break;case"joincode":wi(Le,t.player,"#joincode");break}break}case"admingoto":{const r=wt(He.MAIN),s=kt(n),i=uA(s,n);if(E(s)&&E(i)){const o={x:i.x??0,y:i.y??0};ni(r,t.player,s.id,o)}break}case"refscroll":switch(n){case"adminscroll":zt(Le,t.player,async()=>{await cS(t.player,Ma)});break;case"objectlistscroll":{const r=S8(Ye.OBJECT);for(let i=0;i<r.length;++i){const o=r[i],a=gt(o),c=o.code.split(`
`).slice(0,2);Te(t.player,"list",`@${a}$ltgrey ${c[1]??""}`,["copyit",a])}const s=_t(t.player);s.scrollname="object list",s.scroll=Ht(t.player);break}case"terrainlistscroll":{const r=S8(Ye.TERRAIN);for(let i=0;i<r.length;++i){const o=r[i],a=gt(o),c=o.code.split(`
`).slice(0,2);Te(t.player,"list",`@${a}$ltgrey ${c[1]??""}`,["copyit",a])}const s=_t(t.player);s.scrollname="terrain list",s.scroll=Ht(t.player);break}case"charscroll":{Te(t.player,"refscroll","char",["char","charedit"]);const r=_t(t.player);r.scrollname="chars",r.scroll=Ht(t.player);break}case"colorscroll":{Te(t.player,"refscroll","color",["color","coloredit"]);const r=_t(t.player);r.scrollname="colors",r.scroll=Ht(t.player);break}case"bgscroll":{Te(t.player,"refscroll","bg",["bg","bgedit"]);const r=_t(t.player);r.scrollname="bgs",r.scroll=Ht(t.player);break}default:{zt(Le,t.player,async()=>{const r=Vf(`refscroll:${n}`);if(E(r))Sb(Vf(`refscroll:${n}`),i=>MY(t.player,i));else{const i=_t(t.player);i.scrollname="$7$7$7 please wait",i.scroll=["loading $7$7$7"];const o=await Hoe(n);Tae(t.player,o)}const s=_t(t.player);s.scrollname=n,s.scroll=Ht(t.player)});break}}break;case"batch":zt(Le,t.player,async()=>{await Uae(n,t.player)});break;case"remix":zt(Le,t.player,async()=>{await gce(n,t.player)});break;case"empty":{const r=Un(n);r.target==="copycoords"&&Au(Le,gA(),r.path.split(",").join(" "));break}case"inspect":rce(n,t.player);break;case"gadget":if(st(t.data)){const[r,s]=t.data;Oa(Le,t.player,void 0,"text",r,s)}break;case"findany":zt(Le,t.player,async()=>{await ace(n,t.player)});break;case"makeit":mce(n,t.data??"",t.player);break;case"zztbridge":zt(Le,t.player,async()=>{if(st(t.data)){const[r]=t.data;await bie(t.player,r)}});break;case"zipfilelist":zt(Le,t.player,async()=>{await mie(t.player)});break;default:{const r=Un(n);if(je(r.target)==="self"||!r.path)t.target=t.target.replace("self:",""),tY(t);else{const s=wt(He.MAIN);c4(r.target,r.path,void 0,Cf(s))}break}}break}}},zU());function ole(){MC(Le)}const{forward:ale}=aP(t=>{cP(t)&&postMessage(t)});onmessage=function(e){ale(e.data)},setTimeout(ole,100)})();
