var T2=Object.defineProperty;var R2=(Zn,Ce,bt)=>Ce in Zn?T2(Zn,Ce,{enumerable:!0,configurable:!0,writable:!0,value:bt}):Zn[Ce]=bt;var fe=(Zn,Ce,bt)=>(R2(Zn,typeof Ce!="symbol"?Ce+"":Ce,bt),bt);(function(){"use strict";const Zn=new Set,Ce={emit(t,e,n,i){Ce.invoke(sy(t,e,n,i))},invoke(t){Zn.forEach(e=>e.handle(t))},connect(t){Zn.add(t)},disconnect(t){Zn.delete(t)}};var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wx(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Xp={};(function(t){var e=bt&&bt.__spreadArray||function(l,u,d){if(d||arguments.length===2)for(var f=0,p=u.length,h;f<p;f++)(h||!(f in u))&&(h||(h=Array.prototype.slice.call(u,0,f)),h[f]=u[f]);return l.concat(h||Array.prototype.slice.call(u))};Object.defineProperty(t,"__esModule",{value:!0}),t.minLength=t.maxLength=t.poolSize=t.humanId=t.adverbs=t.verbs=t.nouns=t.adjectives=void 0,t.adjectives=["afraid","all","angry","beige","big","better","bitter","blue","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","crazy","cruel","cuddly","curly","curvy","cute","common","cold","cool","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","evil","fair","famous","fast","fancy","few","fine","fifty","five","flat","fluffy","floppy","forty","four","free","fresh","fruity","full","funny","fuzzy","gentle","giant","gold","good","great","green","grumpy","happy","heavy","hip","honest","hot","huge","hungry","icy","itchy","khaki","kind","large","late","lazy","lemon","legal","light","little","long","loose","loud","lovely","lucky","major","many","mean","metal","mighty","modern","moody","nasty","neat","new","nice","nine","ninety","odd","old","olive","open","orange","pink","plain","plenty","polite","poor","pretty","proud","public","puny","petite","purple","quick","quiet","rare","real","ready","red","rich","ripe","rotten","rude","sad","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","spicy","spotty","stale","strong","stupid","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","warm","weak","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],t.nouns=["apes","animals","areas","bars","banks","baths","breads","bushes","cloths","clowns","clubs","hoops","loops","memes","papers","parks","paths","showers","sides","signs","sites","streets","teeth","tires","webs","actors","ads","adults","aliens","ants","apples","baboons","badgers","bags","bananas","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","brooms","buckets","bugs","buses","buttons","camels","cases","cameras","candies","candles","carpets","carrots","carrots","cars","cats","chairs","chefs","chicken","clocks","clouds","coats","cobras","coins","corners","colts","comics","cooks","cougars","regions","results","cows","crabs","crabs","crews","cups","cities","cycles","dancers","days","deer","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","ducks","eagles","ears","eels","eggs","ends","mammals","emus","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lines","lions","lizards","llamas","mails","mangos","maps","masks","meals","melons","mice","mirrors","moments","moles","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","parents","parts","parrots","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","rice","rings","rivers","rockets","rocks","rooms","roses","rules","schools","bats","seals","seas","sheep","shirts","shoes","shrimps","singers","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stars","states","steaks","wings","suits","suns","swans","symbols","tables","taxes","taxis","teams","terms","things","ties","tigers","times","tips","toes","towns","tools","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","walls","wasps","waves","ways","weeks","windows","wolves","women","wombats","words","worlds","worms","yaks","years","zebras","zoos"],t.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enter","enjoy","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","like","lie","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","play","poke","post","press","prove","pull","pump","pick","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","see","search","sell","send","serve","shake","share","shave","shine","show","shop","shout","sin","sink","sing","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","start","stay","stick","stop","stare","study","strive","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],t.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowlingly","lazily","oddly","mysteriously","noisily","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"];function n(l){return l[Math.floor(Math.random()*l.length)]}function i(l){return l.reduce(function(u,d){return u.length>d.length?u:d})}function r(l){return l.reduce(function(u,d){return u.length<d.length?u:d})}function s(l){l===void 0&&(l={}),typeof l=="string"&&(l={separator:l}),typeof l=="boolean"&&(l={capitalize:l});var u=l.separator,d=u===void 0?"":u,f=l.capitalize,p=f===void 0?!0:f,h=l.adjectiveCount,m=h===void 0?1:h,y=l.addAdverb,x=y===void 0?!1:y,v=e(e(e([],e([],Array(m),!0).map(function(k){return n(t.adjectives)}),!0),[n(t.nouns),n(t.verbs)],!1),x?[n(t.adverbs)]:[],!0);return p&&(v=v.map(function(k){return k.charAt(0).toUpperCase()+k.substr(1)})),v.join(d)}t.humanId=s;function a(l){l===void 0&&(l={});var u=l.adjectiveCount,d=u===void 0?1:u,f=l.addAdverb,p=f===void 0?!1:f;return t.adjectives.length*d*t.nouns.length*t.verbs.length*(p?t.adverbs.length:1)}t.poolSize=a;function o(l){l===void 0&&(l={});var u=l.adjectiveCount,d=u===void 0?1:u,f=l.addAdverb,p=f===void 0?!1:f,h=l.separator,m=h===void 0?"":h;return i(t.adjectives).length*d+d*m.length+i(t.nouns).length+m.length+i(t.verbs).length+(p?i(t.adverbs).length+m.length:0)}t.maxLength=o;function c(l){l===void 0&&(l={});var u=l.adjectiveCount,d=u===void 0?1:u,f=l.addAdverb,p=f===void 0?!1:f,h=l.separator,m=h===void 0?"":h;return r(t.adjectives).length*d+d*m.length+r(t.nouns).length+m.length+r(t.verbs).length+(p?r(t.adverbs).length+m.length:0)}t.minLength=c,t.default=s})(Xp);var Gx=yr(Xp);const Kx="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Hx=t=>crypto.getRandomValues(new Uint8Array(t)),Vx=(t,e,n)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*i*e/t.length);return(s=e)=>{let a="";for(;;){let o=n(r),c=r;for(;c--;)if(a+=t[o[c]&i]||"",a.length===s)return a}}},Zp=(t,e=21)=>Vx(t,e,Hx),qx=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=Kx[n[t]&63];return e};var Jp="abcdefghijklmnopqrstuvwxyz",Qp="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ed="0123456789",Yx="346789ABCDEFGHJKLMNPQRTUVWXYabcdefghijkmnpqrtwxyz",Xx="6789BCDFGHJKLMNPQRTWbcdfghjkmnpqrtwz";const Zx=ed,Jx=Jp,Qx=Qp;var ey=Zx+Jx+Qx,wc={lowercase:Jp,uppercase:Qp,numbers:ed,nolookalikes:Yx,nolookalikesSafe:Xx,alphanumeric:ey};function dn(){return`sid_${qx().replaceAll("-",".")}`}const ty=Zp(wc.numbers,4),ny=Zp(`${wc.numbers}${wc.lowercase}`,16);function iy(){return`pid_${ty()}_${ny()}`}function ry(){return Gx({capitalize:!1,adjectiveCount:1})}function sy(t,e,n,i){return{id:dn(),target:t,sender:e,data:n,player:i}}function td(t){const[e,...n]=t.split(":");return{target:e,path:n.join(":")}}function us(t,e,n){const i=dn(),r=t.toLowerCase(),s=e.map(o=>o.toLowerCase()),a={id(){return i},name(){return t},tags(){return e},emit(o,c,l){Ce.emit(o,i,c,l)},reply(o,c,l,u){a.emit(`${o.sender}:${c}`,l,u)},handle(o){const{target:c,path:l}=td(o.target),u=c.toLowerCase();s.findIndex(d=>d==="all"||d===u)!==-1&&n(o),(i===c||u==="all"||r===u)&&n({...o,target:l})}};return Ce.connect(a),a}function ay(t){const e=new Set;function n(i){e.has(i.id)||(e.add(i.id),Ce.invoke(i))}return us("forward",["all"],i=>{e.has(i.id)||(e.add(i.id),t(i))}),n}var nd={},Jn={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.throwUnsupportedData=Qn.throwUnknownDataType=Qn.getType=void 0;function id(t){return Object.prototype.toString.call(t)}Qn.getType=id;function oy(t){throw new TypeError("unsupported data type: "+id(t))}Qn.throwUnknownDataType=oy;function cy(t){throw new TypeError("unsupported data type: "+t)}Qn.throwUnsupportedData=cy;var ht={},mt={};Object.defineProperty(mt,"__esModule",{value:!0}),mt.s_to_num=mt.int_str_to_s=mt.num_to_s=mt.big_int_to_s=mt.int_to_s=mt.s_to_big_int=mt.s_to_int=void 0;let ei="";for(let t=0;t<10;t++){const e=String.fromCharCode(48+t);ei+=e}for(let t=0;t<26;t++){const e=String.fromCharCode(65+t);ei+=e}for(let t=0;t<26;t++){const e=String.fromCharCode(97+t);ei+=e}const _r=ei.length,Ec={};for(let t=0;t<_r;t++){const e=ei[t];Ec[e]=t}function kc(t){let e=0,n=1;for(let i=t.length-1;i>=0;i--){const r=t[i];let s=Ec[r];s*=n,e+=s,n*=_r}return e}mt.s_to_int=kc;function rd(t){let e=BigInt(0),n=BigInt(1);const i=BigInt(_r);for(let r=t.length-1;r>=0;r--){const s=t[r];let a=BigInt(Ec[s]);a*=n,e+=a,n*=i}return e}mt.s_to_big_int=rd;function Sc(t){if(t===0)return ei[0];const e=[];for(;t!==0;){const n=t%_r,i=ei[n];e.push(i),t-=n,t/=_r}return e.reverse().join("")}mt.int_to_s=Sc;function sd(t){const e=BigInt(0),n=BigInt(_r);if(t===e)return ei[0];const i=[];for(;t!==e;){const r=t%n,s=ei[Number(r)];i.push(s),t/=n}return i.reverse().join("")}mt.big_int_to_s=sd;function ad(t){return t.split("").reverse().join("")}function od(t){if(t<0)return"-"+od(-t);let[e,n]=t.toString().split(".");if(!n)return Sc(t);let i;n&&([n,i]=n.split("e")),e=xa(e),n=ad(n),n=xa(n);let r=e+"."+n;if(i){switch(r+=".",i[0]){case"+":i=i.slice(1);break;case"-":r+="-",i=i.slice(1);break}i=xa(i),r+=i}return r}mt.num_to_s=od;function xa(t){const e=+t;return e.toString()===t&&e+1!==e&&e-1!==e?Sc(e):":"+sd(BigInt(t))}mt.int_str_to_s=xa;function Ac(t){return t[0]===":"?rd(t.substring(1)).toString():kc(t).toString()}function cd(t){if(t[0]==="-")return-cd(t.substr(1));let[e,n,i]=t.split(".");if(!n)return kc(e);e=Ac(e),n=Ac(n),n=ad(n);let r=e+"."+n;if(i){r+="e";let s=!1;i[0]==="-"&&(s=!0,i=i.slice(1)),i=Ac(i),r+=s?-i:+i}return+r}mt.s_to_num=cd,Object.defineProperty(ht,"__esModule",{value:!0}),ht.decodeStr=ht.encodeStr=ht.decodeBool=ht.encodeBool=ht.decodeKey=ht.decodeNum=ht.encodeNum=void 0;const Tc=mt;function ly(t){return"n|"+(0,Tc.num_to_s)(t)}ht.encodeNum=ly;function uy(t){return t=t.replace("n|",""),(0,Tc.s_to_num)(t)}ht.decodeNum=uy;function py(t){return typeof t=="number"?t:(0,Tc.s_to_int)(t)}ht.decodeKey=py;function dy(t){return t?"b|T":"b|F"}ht.encodeBool=dy;function fy(t){switch(t){case"b|T":return!0;case"b|F":return!1}return!!t}ht.decodeBool=fy;function hy(t){switch(t[0]+t[1]){case"b|":case"o|":case"n|":case"a|":case"s|":t="s|"+t}return t}ht.encodeStr=hy;function my(t){return t[0]+t[1]==="s|"?t.substr(2):t}ht.decodeStr=my;var zt={},ps={};Object.defineProperty(ps,"__esModule",{value:!0}),ps.config=void 0,ps.config={sort_key:!1,error_on_nan:!1,error_on_infinite:!1},Object.defineProperty(zt,"__esModule",{value:!0}),zt.addValue=zt.makeInMemoryMemory=zt.makeInMemoryCache=zt.makeInMemoryStore=zt.memToValues=void 0;const Rc=ps,Oc=Qn,Ic=ht,gy=mt;function vy(t){return t.store.toArray()}zt.memToValues=vy;function ld(){const t=[];return{forEach(e){for(let n=0;n<t.length;n++)if(e(t[n])==="break")return},add(e){t.push(e)},toArray(){return t}}}zt.makeInMemoryStore=ld;function ud(){const t=Object.create(null),e=Object.create(null);return{getValue(n){return t[n]},getSchema(n){return e[n]},forEachValue(n){for(const[i,r]of Object.entries(t))if(n(i,r)==="break")return},forEachSchema(n){for(const[i,r]of Object.entries(e))if(n(i,r)==="break")return},setValue(n,i){t[n]=i},setSchema(n,i){e[n]=i},hasValue(n){return n in t},hasSchema(n){return n in e}}}zt.makeInMemoryCache=ud;function by(){return{store:ld(),cache:ud(),keyCount:0}}zt.makeInMemoryMemory=by;function zi(t,e){if(t.cache.hasValue(e))return t.cache.getValue(e);const n=t.keyCount++,i=(0,gy.num_to_s)(n);return t.store.add(e),t.cache.setValue(e,i),i}function xy(t,e){Rc.config.sort_key&&e.sort();const n=e.join(",");if(t.cache.hasSchema(n))return t.cache.getSchema(n);const i=ds(t,e,void 0);return t.cache.setSchema(n,i),i}function ds(t,e,n){if(e===null)return"";switch(typeof e){case"undefined":if(Array.isArray(n))return ds(t,null,n);break;case"object":if(e===null)return zi(t,null);if(Array.isArray(e)){let i="a";for(let r=0;r<e.length;r++){const s=e[r],a=s===null?"_":ds(t,s,e);i+="|"+a}return i==="a"&&(i="a|"),zi(t,i)}else{const i=Object.keys(e);if(i.length===0)return zi(t,"o|");let r="o";const s=xy(t,i);r+="|"+s;for(const a of i){const o=e[a],c=ds(t,o,e);r+="|"+c}return zi(t,r)}case"boolean":return zi(t,(0,Ic.encodeBool)(e));case"number":return Number.isNaN(e)?(Rc.config.error_on_nan&&(0,Oc.throwUnsupportedData)("[number NaN]"),""):Number.POSITIVE_INFINITY===e||Number.NEGATIVE_INFINITY===e?(Rc.config.error_on_infinite&&(0,Oc.throwUnsupportedData)("[number Infinity]"),""):zi(t,(0,Ic.encodeNum)(e));case"string":return zi(t,(0,Ic.encodeStr)(e))}return(0,Oc.throwUnknownDataType)(e)}zt.addValue=ds,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.decompress=Jn.decode=Jn.compress=void 0;const yy=Qn,ya=ht,Cc=zt;function _y(t){const e=(0,Cc.makeInMemoryMemory)(),n=(0,Cc.addValue)(e,t,void 0);return[(0,Cc.memToValues)(e),n]}Jn.compress=_y;function wy(t,e){if(e==="o|")return{};const n={},i=e.split("|"),r=i[1];let s=fs(t,r);const a=i.length;a-2===1&&!Array.isArray(s)&&(s=[s]);for(let o=2;o<a;o++){const c=s[o-2];let l=i[o];l=fs(t,l),n[c]=l}return n}function Ey(t,e){if(e==="a|")return[];const n=e.split("|"),i=n.length-1,r=new Array(i);for(let s=0;s<i;s++){let a=n[s+1];a=fs(t,a),r[s]=a}return r}function fs(t,e){if(e===""||e==="_")return null;const n=(0,ya.decodeKey)(e),i=t[n];if(i===null)return i;switch(typeof i){case"undefined":return i;case"number":return i;case"string":switch(i[0]+i[1]){case"b|":return(0,ya.decodeBool)(i);case"o|":return wy(t,i);case"n|":return(0,ya.decodeNum)(i);case"a|":return Ey(t,i);default:return(0,ya.decodeStr)(i)}}return(0,yy.throwUnknownDataType)(i)}Jn.decode=fs;function ky(t){const[e,n]=t;return fs(e,n)}Jn.decompress=ky;var wr={};Object.defineProperty(wr,"__esModule",{value:!0}),wr.trimUndefinedRecursively=wr.trimUndefined=void 0;function Sy(t){for(const e in t)t[e]===void 0&&delete t[e]}wr.trimUndefined=Sy;function Ay(t){pd(t,new Set)}wr.trimUndefinedRecursively=Ay;function pd(t,e){e.add(t);for(const n in t)if(t[n]===void 0)delete t[n];else{const i=t[n];i&&typeof i=="object"&&!e.has(i)&&pd(i,e)}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.trimUndefinedRecursively=t.trimUndefined=t.addValue=t.decode=t.decompress=t.compress=void 0;var e=Jn;Object.defineProperty(t,"compress",{enumerable:!0,get:function(){return e.compress}}),Object.defineProperty(t,"decompress",{enumerable:!0,get:function(){return e.decompress}});var n=Jn;Object.defineProperty(t,"decode",{enumerable:!0,get:function(){return n.decode}});var i=zt;Object.defineProperty(t,"addValue",{enumerable:!0,get:function(){return i.addValue}});var r=wr;Object.defineProperty(t,"trimUndefined",{enumerable:!0,get:function(){return r.trimUndefined}}),Object.defineProperty(t,"trimUndefinedRecursively",{enumerable:!0,get:function(){return r.trimUndefinedRecursively}});var s=ps;Object.defineProperty(t,"config",{enumerable:!0,get:function(){return s.config}})})(nd);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Ty=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ry=Object.prototype.hasOwnProperty;function Nc(t,e){return Ry.call(t,e)}function Lc(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var i=[];for(var r in t)Nc(t,r)&&i.push(r);return i}function Et(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function Mc(t){for(var e=0,n=t.length,i;e<n;){if(i=t.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function Wi(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function dd(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Uc(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(Uc(t[e]))return!0}else if(typeof t=="object"){for(var i=Lc(t),r=i.length,s=0;s<r;s++)if(Uc(t[i[s]]))return!0}}return!1}function fd(t,e){var n=[t];for(var i in e){var r=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var hd=function(t){Ty(e,t);function e(n,i,r,s,a){var o=this.constructor,c=t.call(this,fd(n,{name:i,index:r,operation:s,tree:a}))||this;return c.name=i,c.index=r,c.operation=s,c.tree=a,Object.setPrototypeOf(c,o.prototype),c.message=fd(n,{name:i,index:r,operation:s,tree:a}),c}return e}(Error),Ke=hd,Oy=Et,Er={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=_a(n,this.path);i&&(i=Et(i));var r=Gi(n,{op:"remove",path:this.from}).removed;return Gi(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=_a(n,this.from);return Gi(n,{op:"add",path:this.path,value:Et(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:hs(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Iy={add:function(t,e,n){return Mc(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var i=t.splice(e,1);return{newDocument:n,removed:i[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:Er.move,copy:Er.copy,test:Er.test,_get:Er._get};function _a(t,e){if(e=="")return t;var n={op:"_get",path:e};return Gi(t,n),n.value}function Gi(t,e,n,i,r,s){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(e,0,t,e.path):wa(e,0)),e.path===""){var a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=_a(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=hs(t,e.value),a.test===!1)throw new Ke("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new Ke("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{i||(t=Et(t));var o=e.path||"",c=o.split("/"),l=t,u=1,d=c.length,f=void 0,p=void 0,h=void 0;for(typeof n=="function"?h=n:h=wa;;){if(p=c[u],p&&p.indexOf("~")!=-1&&(p=dd(p)),r&&(p=="__proto__"||p=="prototype"&&u>0&&c[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(l[p]===void 0?f=c.slice(0,u).join("/"):u==d-1&&(f=e.path),f!==void 0&&h(e,0,t,f)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(n&&!Mc(p))throw new Ke("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);Mc(p)&&(p=~~p)}if(u>=d){if(n&&e.op==="add"&&p>l.length)throw new Ke("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var a=Iy[e.op].call(e,l,p,t);if(a.test===!1)throw new Ke("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a}}else if(u>=d){var a=Er[e.op].call(e,l,p,t);if(a.test===!1)throw new Ke("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a}if(l=l[p],n&&u<d&&(!l||typeof l!="object"))throw new Ke("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Pc(t,e,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(e))throw new Ke("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=Et(t));for(var s=new Array(e.length),a=0,o=e.length;a<o;a++)s[a]=Gi(t,e[a],n,!0,r,a),t=s[a].newDocument;return s.newDocument=t,s}function Cy(t,e,n){var i=Gi(t,e);if(i.test===!1)throw new Ke("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function wa(t,e,n,i){if(typeof t!="object"||t===null||Array.isArray(t))throw new Ke("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Er[t.op]){if(typeof t.path!="string")throw new Ke("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Ke('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Ke("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Ke("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Uc(t.value))throw new Ke("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var r=t.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new Ke("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==i)throw new Ke("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=md([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ke("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Ke("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function md(t,e,n){try{if(!Array.isArray(t))throw new Ke("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Pc(Et(e),Et(t),n||!0);else{n=n||wa;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(r){if(r instanceof Ke)return r;throw r}}function hs(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),r,s,a;if(n&&i){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!hs(t[r],e[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!e.hasOwnProperty(o[r]))return!1;for(r=s;r--!==0;)if(a=o[r],!hs(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}var Ny=Object.freeze({__proto__:null,JsonPatchError:Ke,_areEquals:hs,applyOperation:Gi,applyPatch:Pc,applyReducer:Cy,deepClone:Oy,getValueByPointer:_a,validate:md,validator:wa});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Dc=new WeakMap,Ly=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),My=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function Uy(t){return Dc.get(t)}function Py(t,e){return t.observers.get(e)}function Dy(t,e){t.observers.delete(e.callback)}function jy(t,e){e.unobserve()}function Fy(t,e){var n=[],i,r=Uy(t);if(!r)r=new Ly(t),Dc.set(t,r);else{var s=Py(r,e);i=s&&s.observer}if(i)return i;if(i={},r.value=Et(t),e){i.callback=e,i.next=null;var a=function(){jc(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=t,i.unobserve=function(){jc(i),clearTimeout(i.next),Dy(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(e,new My(e,i)),i}function jc(t,e){e===void 0&&(e=!1);var n=Dc.get(t.object);Fc(n.value,t.object,t.patches,"",e),t.patches.length&&Pc(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function Fc(t,e,n,i,r){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=Lc(e),a=Lc(t),o=!1,c=a.length-1;c>=0;c--){var l=a[c],u=t[l];if(Nc(e,l)&&!(e[l]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var d=e[l];typeof u=="object"&&u!=null&&typeof d=="object"&&d!=null&&Array.isArray(u)===Array.isArray(d)?Fc(u,d,n,i+"/"+Wi(l),r):u!==d&&(r&&n.push({op:"test",path:i+"/"+Wi(l),value:Et(u)}),n.push({op:"replace",path:i+"/"+Wi(l),value:Et(d)}))}else Array.isArray(t)===Array.isArray(e)?(r&&n.push({op:"test",path:i+"/"+Wi(l),value:Et(u)}),n.push({op:"remove",path:i+"/"+Wi(l)}),o=!0):(r&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}))}if(!(!o&&s.length==a.length))for(var c=0;c<s.length;c++){var l=s[c];!Nc(t,l)&&e[l]!==void 0&&n.push({op:"add",path:i+"/"+Wi(l),value:Et(e[l])})}}}function Bc(t,e,n){n===void 0&&(n=!1);var i=[];return Fc(t,e,i,"",n),i}var By=Object.freeze({__proto__:null,compare:Bc,generate:jc,observe:Fy,unobserve:jy});Object.assign({},Ny,By,{JsonPatchError:hd,deepClone:Et,escapePathComponent:Wi,unescapePathComponent:dd});function T(t){return t!=null}function $y(t,e){return Bc(t,e).length===0}function gd(t){return Et(t)}function nt(t){return typeof t=="number"}function Re(t){return typeof t=="string"}function it(t){return Array.isArray(t)}function zy(t){return t}function Wy(t){return typeof t=="object"&&Re(t.id)===!0&&Re(t.name)===!0&&typeof t.flags=="object"&&typeof t.players=="object"&&it(t.pages)===!0}var pt=(t=>(t[t.BLACK=0]="BLACK",t[t.DKBLUE=1]="DKBLUE",t[t.DKGREEN=2]="DKGREEN",t[t.DKCYAN=3]="DKCYAN",t[t.DKRED=4]="DKRED",t[t.DKPURPLE=5]="DKPURPLE",t[t.DKYELLOW=6]="DKYELLOW",t[t.LTGRAY=7]="LTGRAY",t[t.DKGRAY=8]="DKGRAY",t[t.BLUE=9]="BLUE",t[t.GREEN=10]="GREEN",t[t.CYAN=11]="CYAN",t[t.RED=12]="RED",t[t.PURPLE=13]="PURPLE",t[t.YELLOW=14]="YELLOW",t[t.WHITE=15]="WHITE",t[t.ONBLACK=16]="ONBLACK",t[t.ONDKBLUE=17]="ONDKBLUE",t[t.ONDKGREEN=18]="ONDKGREEN",t[t.ONDKCYAN=19]="ONDKCYAN",t[t.ONDKRED=20]="ONDKRED",t[t.ONDKPURPLE=21]="ONDKPURPLE",t[t.ONDKYELLOW=22]="ONDKYELLOW",t[t.ONLTGRAY=23]="ONLTGRAY",t[t.ONDKGRAY=24]="ONDKGRAY",t[t.ONBLUE=25]="ONBLUE",t[t.ONGREEN=26]="ONGREEN",t[t.ONCYAN=27]="ONCYAN",t[t.ONRED=28]="ONRED",t[t.ONPURPLE=29]="ONPURPLE",t[t.ONYELLOW=30]="ONYELLOW",t[t.ONWHITE=31]="ONWHITE",t[t.CLEAR=32]="CLEAR",t[t.SHADOW=33]="SHADOW",t[t.BORROW=34]="BORROW",t))(pt||{});function Ea(t,e){return new Array(t).fill(e)}function Gy(t,e,n,i,r=0){const s=n*i;return{id:`tiles:${t}:${e}`,type:1,width:n,height:i,char:Ea(s,0),color:Ea(s,0),bg:Ea(s,r)}}function Ky(t,e,n,i=1,r=15){return{id:`sprites:${t}:${e}:${n}`,x:0,y:0,char:i,color:r,bg:32}}function Hy(t,e){return{id:`sprites:${t}:${e}`,type:2,sprites:[]}}function Vy(t,e,n,i,r=0){const s=n*i;return{id:`dither:${t}:${e}`,type:3,width:n,height:i,alphas:Ea(s,r)}}function qy(t,e){return{id:`control:${t}:${e}`,type:5,focusx:0,focusy:0,focusid:t,viewscale:2}}var qt=(t=>(t[t.START=0]="START",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.TOP=3]="TOP",t[t.BOTTOM=4]="BOTTOM",t[t.SCROLL=5]="SCROLL",t))(qt||{});const Yy={start:0,left:1,right:2,top:3,bottom:4,scroll:5},Xy={0:1,1:20,2:20,3:1,4:1,5:40};function vd(t,e){return`${t}:${e}`}const Zy=1,Jy=16,Qy=256;var rt=(t=>(t[t.NONE=0]="NONE",t[t.MOVE_UP=1]="MOVE_UP",t[t.MOVE_DOWN=2]="MOVE_DOWN",t[t.MOVE_LEFT=3]="MOVE_LEFT",t[t.MOVE_RIGHT=4]="MOVE_RIGHT",t[t.OK_BUTTON=5]="OK_BUTTON",t[t.CANCEL_BUTTON=6]="CANCEL_BUTTON",t[t.MENU_BUTTON=7]="MENU_BUTTON",t))(rt||{});function ka(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bd={exports:{}};/*!

  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>

  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  */(function(t,e){(function(n){t.exports=n()})(function(){return function n(i,r,s){function a(l,u){if(!r[l]){if(!i[l]){var d=typeof ka=="function"&&ka;if(!u&&d)return d(l,!0);if(o)return o(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var p=r[l]={exports:{}};i[l][0].call(p.exports,function(h){var m=i[l][1][h];return a(m||h)},p,p.exports,n,i,r,s)}return r[l].exports}for(var o=typeof ka=="function"&&ka,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(n,i,r){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(c){for(var l,u,d,f,p,h,m,y=[],x=0,v=c.length,k=v,O=s.getTypeOf(c)!=="string";x<c.length;)k=v-x,d=O?(l=c[x++],u=x<v?c[x++]:0,x<v?c[x++]:0):(l=c.charCodeAt(x++),u=x<v?c.charCodeAt(x++):0,x<v?c.charCodeAt(x++):0),f=l>>2,p=(3&l)<<4|u>>4,h=1<k?(15&u)<<2|d>>6:64,m=2<k?63&d:64,y.push(o.charAt(f)+o.charAt(p)+o.charAt(h)+o.charAt(m));return y.join("")},r.decode=function(c){var l,u,d,f,p,h,m=0,y=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var v,k=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&k--,c.charAt(c.length-2)===o.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|k):new Array(0|k);m<c.length;)l=o.indexOf(c.charAt(m++))<<2|(f=o.indexOf(c.charAt(m++)))>>4,u=(15&f)<<4|(p=o.indexOf(c.charAt(m++)))>>2,d=(3&p)<<6|(h=o.indexOf(c.charAt(m++))),v[y++]=l,p!==64&&(v[y++]=u),h!==64&&(v[y++]=d);return v}},{"./support":30,"./utils":32}],2:[function(n,i,r){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function l(u,d,f,p,h){this.compressedSize=u,this.uncompressedSize=d,this.crc32=f,this.compression=p,this.compressedContent=h}l.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(u,d,f){return u.pipe(new o).pipe(new c("uncompressedSize")).pipe(d.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",d)},i.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,r){var s=n("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,r){var s=n("./utils"),a=function(){for(var o,c=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;c[l]=o}return c}();i.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(l,u,d,f){var p=a,h=f+d;l^=-1;for(var m=f;m<h;m++)l=l>>>8^p[255&(l^u[m])];return-1^l}(0|c,o,o.length,0):function(l,u,d,f){var p=a,h=f+d;l^=-1;for(var m=f;m<h;m++)l=l>>>8^p[255&(l^u.charCodeAt(m))];return-1^l}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(n,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(n,i,r){var s=null;s=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:s}},{lie:37}],7:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),c=n("./stream/GenericWorker"),l=s?"uint8array":"array";function u(d,f){c.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=f,this.meta={}}r.magic="\b\0",o.inherits(u,c),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,d.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(f){d.push({data:f,meta:d.meta})}},r.compressWorker=function(d){return new u("Deflate",d)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,r){function s(p,h){var m,y="";for(m=0;m<h;m++)y+=String.fromCharCode(255&p),p>>>=8;return y}function a(p,h,m,y,x,v){var k,O,E=p.file,w=p.compression,_=v!==l.utf8encode,S=o.transformTo("string",v(E.name)),R=o.transformTo("string",l.utf8encode(E.name)),j=E.comment,V=o.transformTo("string",v(j)),C=o.transformTo("string",l.utf8encode(j)),P=R.length!==E.name.length,b=C.length!==j.length,D="",J="",B="",re=E.dir,z=E.date,se={crc32:0,compressedSize:0,uncompressedSize:0};h&&!m||(se.crc32=p.crc32,se.compressedSize=p.compressedSize,se.uncompressedSize=p.uncompressedSize);var M=0;h&&(M|=8),_||!P&&!b||(M|=2048);var L=0,Q=0;re&&(L|=16),x==="UNIX"?(Q=798,L|=function(G,le){var be=G;return G||(be=le?16893:33204),(65535&be)<<16}(E.unixPermissions,re)):(Q=20,L|=function(G){return 63&(G||0)}(E.dosPermissions)),k=z.getUTCHours(),k<<=6,k|=z.getUTCMinutes(),k<<=5,k|=z.getUTCSeconds()/2,O=z.getUTCFullYear()-1980,O<<=4,O|=z.getUTCMonth()+1,O<<=5,O|=z.getUTCDate(),P&&(J=s(1,1)+s(u(S),4)+R,D+="up"+s(J.length,2)+J),b&&(B=s(1,1)+s(u(V),4)+C,D+="uc"+s(B.length,2)+B);var H="";return H+=`
\0`,H+=s(M,2),H+=w.magic,H+=s(k,2),H+=s(O,2),H+=s(se.crc32,4),H+=s(se.compressedSize,4),H+=s(se.uncompressedSize,4),H+=s(S.length,2),H+=s(D.length,2),{fileRecord:d.LOCAL_FILE_HEADER+H+S+D,dirRecord:d.CENTRAL_FILE_HEADER+s(Q,2)+H+s(V.length,2)+"\0\0\0\0"+s(L,4)+s(y,4)+S+D+V}}var o=n("../utils"),c=n("../stream/GenericWorker"),l=n("../utf8"),u=n("../crc32"),d=n("../signature");function f(p,h,m,y){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=h,this.zipPlatform=m,this.encodeFileName=y,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,c),f.prototype.push=function(p){var h=p.meta.percent||0,m=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:m?(h+100*(m-y-1))/m:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var h=this.streamFiles&&!p.file.dir;if(h){var m=a(p,h,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var h=this.streamFiles&&!p.file.dir,m=a(p,h,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),h)this.push({data:function(y){return d.DATA_DESCRIPTOR+s(y.crc32,4)+s(y.compressedSize,4)+s(y.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,h=0;h<this.dirRecords.length;h++)this.push({data:this.dirRecords[h],meta:{percent:100}});var m=this.bytesWritten-p,y=function(x,v,k,O,E){var w=o.transformTo("string",E(O));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(x,2)+s(x,2)+s(v,4)+s(k,4)+s(w.length,2)+w}(this.dirRecords.length,m,p,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var h=this;return p.on("data",function(m){h.processChunk(m)}),p.on("end",function(){h.closedSource(h.previous.streamInfo),h._sources.length?h.prepareNextSource():h.end()}),p.on("error",function(m){h.error(m)}),this},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var h=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var m=0;m<h.length;m++)try{h[m].error(p)}catch{}return!0},f.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,h=0;h<p.length;h++)p[h].lock()},i.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,r){var s=n("../compressions"),a=n("./ZipFileWorker");r.generateWorker=function(o,c,l){var u=new a(c.streamFiles,l,c.platform,c.encodeFileName),d=0;try{o.forEach(function(f,p){d++;var h=function(v,k){var O=v||k,E=s[O];if(!E)throw new Error(O+" is not a valid compression method !");return E}(p.options.compression,c.compression),m=p.options.compressionOptions||c.compressionOptions||{},y=p.dir,x=p.date;p._compressWorker(h,m).withStreamInfo("file",{name:f,dir:y,date:x,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(f){u.error(f)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,r){var s=n("./utils"),a=n("./external"),o=n("./utf8"),c=n("./zipEntries"),l=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(f){return new a.Promise(function(p,h){var m=f.decompressed.getContentWorker().pipe(new l);m.on("error",function(y){h(y)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?h(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}i.exports=function(f,p){var h=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(m){var y=new c(p);return y.load(m),y}).then(function(m){var y=[a.Promise.resolve(m)],x=m.files;if(p.checkCRC32)for(var v=0;v<x.length;v++)y.push(d(x[v]));return a.Promise.all(y)}).then(function(m){for(var y=m.shift(),x=y.files,v=0;v<x.length;v++){var k=x[v],O=k.fileNameStr,E=s.resolve(k.fileNameStr);h.file(E,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:p.createFolders}),k.dir||(h.file(E).unsafeOriginalName=O)}return y.zipComment.length&&(h.comment=y.zipComment),h})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,r){var s=n("../utils"),a=n("../stream/GenericWorker");function o(c,l){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(c){var l=this;(this._stream=c).pause(),c.on("data",function(u){l.push({data:u,meta:{percent:0}})}).on("error",function(u){l.isPaused?this.generatedError=u:l.error(u)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,r){var s=n("readable-stream").Readable;function a(o,c,l){s.call(this,c),this._helper=o;var u=this;o.on("data",function(d,f){u.push(d)||u._helper.pause(),l&&l(f)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,i,r){function s(E,w,_){var S,R=o.getTypeOf(w),j=o.extend(_||{},u);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(E=x(E)),j.createFolders&&(S=y(E))&&v.call(this,S,!0);var V=R==="string"&&j.binary===!1&&j.base64===!1;_&&_.binary!==void 0||(j.binary=!V),(w instanceof d&&w.uncompressedSize===0||j.dir||!w||w.length===0)&&(j.base64=!1,j.binary=!0,w="",j.compression="STORE",R="string");var C=null;C=w instanceof d||w instanceof c?w:h.isNode&&h.isStream(w)?new m(E,w):o.prepareContent(E,w,j.binary,j.optimizedBinaryString,j.base64);var P=new f(E,C,j);this.files[E]=P}var a=n("./utf8"),o=n("./utils"),c=n("./stream/GenericWorker"),l=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),f=n("./zipObject"),p=n("./generate"),h=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),y=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var w=E.lastIndexOf("/");return 0<w?E.substring(0,w):""},x=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},v=function(E,w){return w=w!==void 0?w:u.createFolders,E=x(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:w}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var w,_,S;for(w in this.files)S=this.files[w],(_=w.slice(this.root.length,w.length))&&w.slice(0,this.root.length)===this.root&&E(_,S)},filter:function(E){var w=[];return this.forEach(function(_,S){E(_,S)&&w.push(S)}),w},file:function(E,w,_){if(arguments.length!==1)return E=this.root+E,s.call(this,E,w,_),this;if(k(E)){var S=E;return this.filter(function(j,V){return!V.dir&&S.test(j)})}var R=this.files[this.root+E];return R&&!R.dir?R:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(R,j){return j.dir&&E.test(R)});var w=this.root+E,_=v.call(this,w),S=this.clone();return S.root=_.name,S},remove:function(E){E=this.root+E;var w=this.files[E];if(w||(E.slice(-1)!=="/"&&(E+="/"),w=this.files[E]),w&&!w.dir)delete this.files[E];else for(var _=this.filter(function(R,j){return j.name.slice(0,E.length)===E}),S=0;S<_.length;S++)delete this.files[_[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var w,_={};try{if((_=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");o.checkSupport(_.type),_.platform!=="darwin"&&_.platform!=="freebsd"&&_.platform!=="linux"&&_.platform!=="sunos"||(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var S=_.comment||this.comment||"";w=p.generateWorker(this,_,S)}catch(R){(w=new c("error")).error(R)}return new l(w,_.type||"string",_.mimeType)},generateAsync:function(E,w){return this.generateInternalStream(E).accumulate(w)},generateNodeStream:function(E,w){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(w)}};i.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,r){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,r){var s=n("./DataReader");function a(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),l=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===c&&this.data[f+1]===l&&this.data[f+2]===u&&this.data[f+3]===d)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),l=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),f=this.readData(4);return c===f[0]&&l===f[1]&&u===f[2]&&d===f[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,i,r){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,l=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(n,i,r){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,r){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,i,r){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,r){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),c=n("./StringReader"),l=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");i.exports=function(d){var f=s.getTypeOf(d);return s.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new l(d):a.uint8array?new u(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new c(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,r){var s=n("./GenericWorker"),a=n("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,r){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,r){var s=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,a),o.prototype.processChunk=function(c){if(c){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+c.data.length}a.prototype.processChunk.call(this,c)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,r){var s=n("../utils"),a=n("./GenericWorker");function o(c){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){l.dataIsReady=!0,l.data=u,l.max=u&&u.length||0,l.type=s.getTypeOf(u),l.isPaused||l._tickAndRepeat()},function(u){l.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,l);break;case"uint8array":c=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":c=this.data.slice(this.index,l)}return this.index=l,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(n,i,r){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),c=n("../base64"),l=n("../support"),u=n("../external"),d=null;if(l.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(h,m){return new u.Promise(function(y,x){var v=[],k=h._internalType,O=h._outputType,E=h._mimeType;h.on("data",function(w,_){v.push(w),m&&m(_)}).on("error",function(w){v=[],x(w)}).on("end",function(){try{var w=function(_,S,R){switch(_){case"blob":return s.newBlob(s.transformTo("arraybuffer",S),R);case"base64":return c.encode(S);default:return s.transformTo(_,S)}}(O,function(_,S){var R,j=0,V=null,C=0;for(R=0;R<S.length;R++)C+=S[R].length;switch(_){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(V=new Uint8Array(C),R=0;R<S.length;R++)V.set(S[R],j),j+=S[R].length;return V;case"nodebuffer":return Buffer.concat(S);default:throw new Error("concat : unsupported type '"+_+"'")}}(k,v),E);y(w)}catch(_){x(_)}v=[]}).resume()})}function p(h,m,y){var x=m;switch(m){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=m,this._mimeType=y,s.checkSupport(x),this._worker=h.pipe(new a(x)),h.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}p.prototype={accumulate:function(h){return f(this,h)},on:function(h,m){var y=this;return h==="data"?this._worker.on(h,function(x){m.call(y,x.data,x.meta)}):this._worker.on(h,function(){s.delay(m,arguments,y)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},h)}},i.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!n("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,r){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),c=n("./stream/GenericWorker"),l=new Array(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;l[254]=l[254]=1;function d(){c.call(this,"utf-8 decode"),this.leftOver=null}function f(){c.call(this,"utf-8 encode")}r.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(h){var m,y,x,v,k,O=h.length,E=0;for(v=0;v<O;v++)(64512&(y=h.charCodeAt(v)))==55296&&v+1<O&&(64512&(x=h.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),v++),E+=y<128?1:y<2048?2:y<65536?3:4;for(m=a.uint8array?new Uint8Array(E):new Array(E),v=k=0;k<E;v++)(64512&(y=h.charCodeAt(v)))==55296&&v+1<O&&(64512&(x=h.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),v++),y<128?m[k++]=y:(y<2048?m[k++]=192|y>>>6:(y<65536?m[k++]=224|y>>>12:(m[k++]=240|y>>>18,m[k++]=128|y>>>12&63),m[k++]=128|y>>>6&63),m[k++]=128|63&y);return m}(p)},r.utf8decode=function(p){return a.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(h){var m,y,x,v,k=h.length,O=new Array(2*k);for(m=y=0;m<k;)if((x=h[m++])<128)O[y++]=x;else if(4<(v=l[x]))O[y++]=65533,m+=v-1;else{for(x&=v===2?31:v===3?15:7;1<v&&m<k;)x=x<<6|63&h[m++],v--;1<v?O[y++]=65533:x<65536?O[y++]=x:(x-=65536,O[y++]=55296|x>>10&1023,O[y++]=56320|1023&x)}return O.length!==y&&(O.subarray?O=O.subarray(0,y):O.length=y),s.applyFromCharCode(O)}(p=s.transformTo(a.uint8array?"uint8array":"array",p))},s.inherits(d,c),d.prototype.processChunk=function(p){var h=s.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=h;(h=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),h.set(m,this.leftOver.length)}else h=this.leftOver.concat(h);this.leftOver=null}var y=function(v,k){var O;for((k=k||v.length)>v.length&&(k=v.length),O=k-1;0<=O&&(192&v[O])==128;)O--;return O<0||O===0?k:O+l[v[O]]>k?O:k}(h),x=h;y!==h.length&&(a.uint8array?(x=h.subarray(0,y),this.leftOver=h.subarray(y,h.length)):(x=h.slice(0,y),this.leftOver=h.slice(y,h.length))),this.push({data:r.utf8decode(x),meta:p.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=d,s.inherits(f,c),f.prototype.processChunk=function(p){this.push({data:r.utf8encode(p.data),meta:p.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,r){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),c=n("./external");function l(m){return m}function u(m,y){for(var x=0;x<m.length;++x)y[x]=255&m.charCodeAt(x);return y}n("setimmediate"),r.newBlob=function(m,y){r.checkSupport("blob");try{return new Blob([m],{type:y})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(m),x.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,y,x){var v=[],k=0,O=m.length;if(O<=x)return String.fromCharCode.apply(null,m);for(;k<O;)y==="array"||y==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(k,Math.min(k+x,O)))):v.push(String.fromCharCode.apply(null,m.subarray(k,Math.min(k+x,O)))),k+=x;return v.join("")},stringifyByChar:function(m){for(var y="",x=0;x<m.length;x++)y+=String.fromCharCode(m[x]);return y},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(m){var y=65536,x=r.getTypeOf(m),v=!0;if(x==="uint8array"?v=d.applyCanBeUsed.uint8array:x==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<y;)try{return d.stringifyByChunk(m,x,y)}catch{y=Math.floor(y/2)}return d.stringifyByChar(m)}function p(m,y){for(var x=0;x<m.length;x++)y[x]=m[x];return y}r.applyFromCharCode=f;var h={};h.string={string:l,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return h.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,o.allocBuffer(m.length))}},h.array={string:f,array:l,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},h.arraybuffer={string:function(m){return f(new Uint8Array(m))},array:function(m){return p(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:l,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},h.uint8array={string:f,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:l,nodebuffer:function(m){return o.newBufferFrom(m)}},h.nodebuffer={string:f,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return h.nodebuffer.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:l},r.transformTo=function(m,y){if(y=y||"",!m)return y;r.checkSupport(m);var x=r.getTypeOf(y);return h[x][m](y)},r.resolve=function(m){for(var y=m.split("/"),x=[],v=0;v<y.length;v++){var k=y[v];k==="."||k===""&&v!==0&&v!==y.length-1||(k===".."?x.pop():x.push(k))}return x.join("/")},r.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(m){var y,x,v="";for(x=0;x<(m||"").length;x++)v+="\\x"+((y=m.charCodeAt(x))<16?"0":"")+y.toString(16).toUpperCase();return v},r.delay=function(m,y,x){setImmediate(function(){m.apply(x||null,y||[])})},r.inherits=function(m,y){function x(){}x.prototype=y.prototype,m.prototype=new x},r.extend=function(){var m,y,x={};for(m=0;m<arguments.length;m++)for(y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&x[y]===void 0&&(x[y]=arguments[m][y]);return x},r.prepareContent=function(m,y,x,v,k){return c.Promise.resolve(y).then(function(O){return s.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new c.Promise(function(E,w){var _=new FileReader;_.onload=function(S){E(S.target.result)},_.onerror=function(S){w(S.target.error)},_.readAsArrayBuffer(O)}):O}).then(function(O){var E=r.getTypeOf(O);return E?(E==="arraybuffer"?O=r.transformTo("uint8array",O):E==="string"&&(k?O=a.decode(O):x&&v!==!0&&(O=function(w){return u(w,s.uint8array?new Uint8Array(w.length):new Array(w.length))}(O))),O):c.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,r){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),c=n("./zipEntry"),l=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(d)+")")}},isSignature:function(d,f){var p=this.reader.index;this.reader.setIndex(d);var h=this.reader.readString(4)===f;return this.reader.setIndex(p),h},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),f=l.uint8array?"uint8array":"array",p=a.transformTo(f,d);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,f,p,h=this.zip64EndOfCentralSize-44;0<h;)d=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[d]={id:d,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,f;for(d=0;d<this.files.length;d++)f=this.files[d],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var f=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var h=f-p;if(0<h)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=h);else if(h<0)throw new Error("Corrupted zip: missing "+Math.abs(h)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,r){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),c=n("./crc32"),l=n("./utf8"),u=n("./compressions"),d=n("./support");function f(p,h){this.options=p,this.loadOptions=h}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var h,m;if(p.skip(22),this.fileNameLength=p.readInt(2),m=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((h=function(y){for(var x in u)if(Object.prototype.hasOwnProperty.call(u,x)&&u[x].magic===y)return u[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,h,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var h=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(h),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var h,m,y,x=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<x;)h=p.readInt(2),m=p.readInt(2),y=p.readData(m),this.extraFields[h]={id:h,length:m,value:y};p.setIndex(x)},handleUTF8:function(){var p=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var h=this.findExtraFieldUnicodePath();if(h!==null)this.fileNameStr=h;else{var m=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var x=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var h=s(p.value);return h.readInt(1)!==1||c(this.fileName)!==h.readInt(4)?null:l.utf8decode(h.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var h=s(p.value);return h.readInt(1)!==1||c(this.fileComment)!==h.readInt(4)?null:l.utf8decode(h.readData(p.length-5))}return null}},i.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,r){function s(h,m,y){this.name=h,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=m,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),c=n("./utf8"),l=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(h){var m=null,y="string";try{if(!h)throw new Error("No output type specified.");var x=(y=h.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!x&&(m=m.pipe(new c.Utf8EncodeWorker)),!v&&x&&(m=m.pipe(new c.Utf8DecodeWorker))}catch(k){(m=new u("error")).error(k)}return new a(m,y,"")},async:function(h,m){return this.internalStream(h).accumulate(m)},nodeStream:function(h,m){return this.internalStream(h||"nodebuffer").toNodejsStream(m)},_compressWorker:function(h,m){if(this._data instanceof l&&this._data.compression.magic===h.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new c.Utf8EncodeWorker)),l.createWorkerFrom(y,h,m)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<d.length;p++)s.prototype[d[p]]=f;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,r){(function(s){var a,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var l=0,u=new c(h),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){h(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(h,0)};else{var f=new s.MessageChannel;f.port1.onmessage=h,a=function(){f.port2.postMessage(0)}}var p=[];function h(){var m,y;o=!0;for(var x=p.length;x;){for(y=p,p=[],m=-1;++m<x;)y[m]();x=p.length}o=!1}i.exports=function(m){p.push(m)!==1||o||a()}}).call(this,typeof bt<"u"?bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,r){var s=n("immediate");function a(){}var o={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function d(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,x!==a&&m(this,x)}function f(x,v,k){this.promise=x,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function p(x,v,k){s(function(){var O;try{O=v(k)}catch(E){return o.reject(x,E)}O===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,O)})}function h(x){var v=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof v=="function")return function(){v.apply(x,arguments)}}function m(x,v){var k=!1;function O(_){k||(k=!0,o.reject(x,_))}function E(_){k||(k=!0,o.resolve(x,_))}var w=y(function(){v(E,O)});w.status==="error"&&O(w.value)}function y(x,v){var k={};try{k.value=x(v),k.status="success"}catch(O){k.status="error",k.value=O}return k}(i.exports=d).prototype.finally=function(x){if(typeof x!="function")return this;var v=this.constructor;return this.then(function(k){return v.resolve(x()).then(function(){return k})},function(k){return v.resolve(x()).then(function(){throw k})})},d.prototype.catch=function(x){return this.then(null,x)},d.prototype.then=function(x,v){if(typeof x!="function"&&this.state===l||typeof v!="function"&&this.state===c)return this;var k=new this.constructor(a);return this.state!==u?p(k,this.state===l?x:v,this.outcome):this.queue.push(new f(k,x,v)),k},f.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},f.prototype.otherCallFulfilled=function(x){p(this.promise,this.onFulfilled,x)},f.prototype.callRejected=function(x){o.reject(this.promise,x)},f.prototype.otherCallRejected=function(x){p(this.promise,this.onRejected,x)},o.resolve=function(x,v){var k=y(h,v);if(k.status==="error")return o.reject(x,k.value);var O=k.value;if(O)m(x,O);else{x.state=l,x.outcome=v;for(var E=-1,w=x.queue.length;++E<w;)x.queue[E].callFulfilled(v)}return x},o.reject=function(x,v){x.state=c,x.outcome=v;for(var k=-1,O=x.queue.length;++k<O;)x.queue[k].callRejected(v);return x},d.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},d.reject=function(x){var v=new this(a);return o.reject(v,x)},d.all=function(x){var v=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=x.length,O=!1;if(!k)return this.resolve([]);for(var E=new Array(k),w=0,_=-1,S=new this(a);++_<k;)R(x[_],_);return S;function R(j,V){v.resolve(j).then(function(C){E[V]=C,++w!==k||O||(O=!0,o.resolve(S,E))},function(C){O||(O=!0,o.reject(S,C))})}},d.race=function(x){var v=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=x.length,O=!1;if(!k)return this.resolve([]);for(var E=-1,w=new this(a);++E<k;)_=x[E],v.resolve(_).then(function(S){O||(O=!0,o.resolve(w,S))},function(S){O||(O=!0,o.reject(w,S))});var _;return w}},{immediate:36}],38:[function(n,i,r){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,r){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/messages"),l=n("./zlib/zstream"),u=Object.prototype.toString,d=0,f=-1,p=0,h=8;function m(x){if(!(this instanceof m))return new m(x);this.options=a.assign({level:f,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},x||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(k!==d)throw new Error(c[k]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var O;if(O=typeof v.dictionary=="string"?o.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(k=s.deflateSetDictionary(this.strm,O))!==d)throw new Error(c[k]);this._dict_set=!0}}function y(x,v){var k=new m(v);if(k.push(x,!0),k.err)throw k.msg||c[k.err];return k.result}m.prototype.push=function(x,v){var k,O,E=this.strm,w=this.options.chunkSize;if(this.ended)return!1;O=v===~~v?v:v===!0?4:0,typeof x=="string"?E.input=o.string2buf(x):u.call(x)==="[object ArrayBuffer]"?E.input=new Uint8Array(x):E.input=x,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(w),E.next_out=0,E.avail_out=w),(k=s.deflate(E,O))!==1&&k!==d)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return O===4?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===d):O!==2||(this.onEnd(d),!(E.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},r.Deflate=m,r.deflate=y,r.deflateRaw=function(x,v){return(v=v||{}).raw=!0,y(x,v)},r.gzip=function(x,v){return(v=v||{}).gzip=!0,y(x,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,r){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),c=n("./zlib/constants"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),f=Object.prototype.toString;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||m&&m.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var x=s.inflateInit2(this.strm,y.windowBits);if(x!==c.Z_OK)throw new Error(l[x]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function h(m,y){var x=new p(y);if(x.push(m,!0),x.err)throw x.msg||l[x.err];return x.result}p.prototype.push=function(m,y){var x,v,k,O,E,w,_=this.strm,S=this.options.chunkSize,R=this.options.dictionary,j=!1;if(this.ended)return!1;v=y===~~y?y:y===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof m=="string"?_.input=o.binstring2buf(m):f.call(m)==="[object ArrayBuffer]"?_.input=new Uint8Array(m):_.input=m,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new a.Buf8(S),_.next_out=0,_.avail_out=S),(x=s.inflate(_,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&R&&(w=typeof R=="string"?o.string2buf(R):f.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,x=s.inflateSetDictionary(this.strm,w)),x===c.Z_BUF_ERROR&&j===!0&&(x=c.Z_OK,j=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);_.next_out&&(_.avail_out!==0&&x!==c.Z_STREAM_END&&(_.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=o.utf8border(_.output,_.next_out),O=_.next_out-k,E=o.buf2string(_.output,k),_.next_out=O,_.avail_out=S-O,O&&a.arraySet(_.output,_.output,k,O,0),this.onData(E)):this.onData(a.shrinkBuf(_.output,_.next_out)))),_.avail_in===0&&_.avail_out===0&&(j=!0)}while((0<_.avail_in||_.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(x=s.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(_.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Inflate=p,r.inflate=h,r.inflateRaw=function(m,y){return(y=y||{}).raw=!0,h(m,y)},r.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(c){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var u=l.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])}}return c},r.shrinkBuf=function(c,l){return c.length===l?c:c.subarray?c.subarray(0,l):(c.length=l,c)};var a={arraySet:function(c,l,u,d,f){if(l.subarray&&c.subarray)c.set(l.subarray(u,u+d),f);else for(var p=0;p<d;p++)c[f+p]=l[u+p]},flattenChunks:function(c){var l,u,d,f,p,h;for(l=d=0,u=c.length;l<u;l++)d+=c[l].length;for(h=new Uint8Array(d),l=f=0,u=c.length;l<u;l++)p=c[l],h.set(p,f),f+=p.length;return h}},o={arraySet:function(c,l,u,d,f){for(var p=0;p<d;p++)c[f+p]=l[u+p]},flattenChunks:function(c){return[].concat.apply([],c)}};r.setTyped=function(c){c?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(n,i,r){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(d,f){if(f<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,f));for(var p="",h=0;h<f;h++)p+=String.fromCharCode(d[h]);return p}c[254]=c[254]=1,r.string2buf=function(d){var f,p,h,m,y,x=d.length,v=0;for(m=0;m<x;m++)(64512&(p=d.charCodeAt(m)))==55296&&m+1<x&&(64512&(h=d.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),m++),v+=p<128?1:p<2048?2:p<65536?3:4;for(f=new s.Buf8(v),m=y=0;y<v;m++)(64512&(p=d.charCodeAt(m)))==55296&&m+1<x&&(64512&(h=d.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),m++),p<128?f[y++]=p:(p<2048?f[y++]=192|p>>>6:(p<65536?f[y++]=224|p>>>12:(f[y++]=240|p>>>18,f[y++]=128|p>>>12&63),f[y++]=128|p>>>6&63),f[y++]=128|63&p);return f},r.buf2binstring=function(d){return u(d,d.length)},r.binstring2buf=function(d){for(var f=new s.Buf8(d.length),p=0,h=f.length;p<h;p++)f[p]=d.charCodeAt(p);return f},r.buf2string=function(d,f){var p,h,m,y,x=f||d.length,v=new Array(2*x);for(p=h=0;p<x;)if((m=d[p++])<128)v[h++]=m;else if(4<(y=c[m]))v[h++]=65533,p+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&p<x;)m=m<<6|63&d[p++],y--;1<y?v[h++]=65533:m<65536?v[h++]=m:(m-=65536,v[h++]=55296|m>>10&1023,v[h++]=56320|1023&m)}return u(v,h)},r.utf8border=function(d,f){var p;for((f=f||d.length)>d.length&&(f=d.length),p=f-1;0<=p&&(192&d[p])==128;)p--;return p<0||p===0?f:p+c[d[p]]>f?p:f}},{"./common":41}],43:[function(n,i,r){i.exports=function(s,a,o,c){for(var l=65535&s|0,u=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;u=u+(l=l+a[c++]|0)|0,--d;);l%=65521,u%=65521}return l|u<<16|0}},{}],44:[function(n,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,r){var s=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();i.exports=function(a,o,c,l){var u=s,d=l+c;a^=-1;for(var f=l;f<d;f++)a=a>>>8^u[255&(a^o[f])];return-1^a}},{}],46:[function(n,i,r){var s,a=n("../utils/common"),o=n("./trees"),c=n("./adler32"),l=n("./crc32"),u=n("./messages"),d=0,f=4,p=0,h=-2,m=-1,y=4,x=2,v=8,k=9,O=286,E=30,w=19,_=2*O+1,S=15,R=3,j=258,V=j+R+1,C=42,P=113,b=1,D=2,J=3,B=4;function re(g,$){return g.msg=u[$],$}function z(g){return(g<<1)-(4<g?9:0)}function se(g){for(var $=g.length;0<=--$;)g[$]=0}function M(g){var $=g.state,F=$.pending;F>g.avail_out&&(F=g.avail_out),F!==0&&(a.arraySet(g.output,$.pending_buf,$.pending_out,F,g.next_out),g.next_out+=F,$.pending_out+=F,g.total_out+=F,g.avail_out-=F,$.pending-=F,$.pending===0&&($.pending_out=0))}function L(g,$){o._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,$),g.block_start=g.strstart,M(g.strm)}function Q(g,$){g.pending_buf[g.pending++]=$}function H(g,$){g.pending_buf[g.pending++]=$>>>8&255,g.pending_buf[g.pending++]=255&$}function G(g,$){var F,I,A=g.max_chain_length,N=g.strstart,W=g.prev_length,K=g.nice_match,U=g.strstart>g.w_size-V?g.strstart-(g.w_size-V):0,q=g.window,te=g.w_mask,Y=g.prev,ae=g.strstart+j,$e=q[N+W-1],ke=q[N+W];g.prev_length>=g.good_match&&(A>>=2),K>g.lookahead&&(K=g.lookahead);do if(q[(F=$)+W]===ke&&q[F+W-1]===$e&&q[F]===q[N]&&q[++F]===q[N+1]){N+=2,F++;do;while(q[++N]===q[++F]&&q[++N]===q[++F]&&q[++N]===q[++F]&&q[++N]===q[++F]&&q[++N]===q[++F]&&q[++N]===q[++F]&&q[++N]===q[++F]&&q[++N]===q[++F]&&N<ae);if(I=j-(ae-N),N=ae-j,W<I){if(g.match_start=$,K<=(W=I))break;$e=q[N+W-1],ke=q[N+W]}}while(($=Y[$&te])>U&&--A!=0);return W<=g.lookahead?W:g.lookahead}function le(g){var $,F,I,A,N,W,K,U,q,te,Y=g.w_size;do{if(A=g.window_size-g.lookahead-g.strstart,g.strstart>=Y+(Y-V)){for(a.arraySet(g.window,g.window,Y,Y,0),g.match_start-=Y,g.strstart-=Y,g.block_start-=Y,$=F=g.hash_size;I=g.head[--$],g.head[$]=Y<=I?I-Y:0,--F;);for($=F=Y;I=g.prev[--$],g.prev[$]=Y<=I?I-Y:0,--F;);A+=Y}if(g.strm.avail_in===0)break;if(W=g.strm,K=g.window,U=g.strstart+g.lookahead,q=A,te=void 0,te=W.avail_in,q<te&&(te=q),F=te===0?0:(W.avail_in-=te,a.arraySet(K,W.input,W.next_in,te,U),W.state.wrap===1?W.adler=c(W.adler,K,te,U):W.state.wrap===2&&(W.adler=l(W.adler,K,te,U)),W.next_in+=te,W.total_in+=te,te),g.lookahead+=F,g.lookahead+g.insert>=R)for(N=g.strstart-g.insert,g.ins_h=g.window[N],g.ins_h=(g.ins_h<<g.hash_shift^g.window[N+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[N+R-1])&g.hash_mask,g.prev[N&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=N,N++,g.insert--,!(g.lookahead+g.insert<R)););}while(g.lookahead<V&&g.strm.avail_in!==0)}function be(g,$){for(var F,I;;){if(g.lookahead<V){if(le(g),g.lookahead<V&&$===d)return b;if(g.lookahead===0)break}if(F=0,g.lookahead>=R&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+R-1])&g.hash_mask,F=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),F!==0&&g.strstart-F<=g.w_size-V&&(g.match_length=G(g,F)),g.match_length>=R)if(I=o._tr_tally(g,g.strstart-g.match_start,g.match_length-R),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=R){for(g.match_length--;g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+R-1])&g.hash_mask,F=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart,--g.match_length!=0;);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else I=o._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(I&&(L(g,!1),g.strm.avail_out===0))return b}return g.insert=g.strstart<R-1?g.strstart:R-1,$===f?(L(g,!0),g.strm.avail_out===0?J:B):g.last_lit&&(L(g,!1),g.strm.avail_out===0)?b:D}function de(g,$){for(var F,I,A;;){if(g.lookahead<V){if(le(g),g.lookahead<V&&$===d)return b;if(g.lookahead===0)break}if(F=0,g.lookahead>=R&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+R-1])&g.hash_mask,F=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=R-1,F!==0&&g.prev_length<g.max_lazy_match&&g.strstart-F<=g.w_size-V&&(g.match_length=G(g,F),g.match_length<=5&&(g.strategy===1||g.match_length===R&&4096<g.strstart-g.match_start)&&(g.match_length=R-1)),g.prev_length>=R&&g.match_length<=g.prev_length){for(A=g.strstart+g.lookahead-R,I=o._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-R),g.lookahead-=g.prev_length-1,g.prev_length-=2;++g.strstart<=A&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+R-1])&g.hash_mask,F=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),--g.prev_length!=0;);if(g.match_available=0,g.match_length=R-1,g.strstart++,I&&(L(g,!1),g.strm.avail_out===0))return b}else if(g.match_available){if((I=o._tr_tally(g,0,g.window[g.strstart-1]))&&L(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return b}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(I=o._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<R-1?g.strstart:R-1,$===f?(L(g,!0),g.strm.avail_out===0?J:B):g.last_lit&&(L(g,!1),g.strm.avail_out===0)?b:D}function ue(g,$,F,I,A){this.good_length=g,this.max_lazy=$,this.nice_length=F,this.max_chain=I,this.func=A}function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*_),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*w+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(S+1),this.heap=new a.Buf16(2*O+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*O+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(g){var $;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=x,($=g.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?C:P,g.adler=$.wrap===2?0:1,$.last_flush=d,o._tr_init($),p):re(g,h)}function Fe(g){var $=xe(g);return $===p&&function(F){F.window_size=2*F.w_size,se(F.head),F.max_lazy_match=s[F.level].max_lazy,F.good_match=s[F.level].good_length,F.nice_match=s[F.level].nice_length,F.max_chain_length=s[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=R-1,F.match_available=0,F.ins_h=0}(g.state),$}function Be(g,$,F,I,A,N){if(!g)return h;var W=1;if($===m&&($=6),I<0?(W=0,I=-I):15<I&&(W=2,I-=16),A<1||k<A||F!==v||I<8||15<I||$<0||9<$||N<0||y<N)return re(g,h);I===8&&(I=9);var K=new Se;return(g.state=K).strm=g,K.wrap=W,K.gzhead=null,K.w_bits=I,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=A+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+R-1)/R),K.window=new a.Buf8(2*K.w_size),K.head=new a.Buf16(K.hash_size),K.prev=new a.Buf16(K.w_size),K.lit_bufsize=1<<A+6,K.pending_buf_size=4*K.lit_bufsize,K.pending_buf=new a.Buf8(K.pending_buf_size),K.d_buf=1*K.lit_bufsize,K.l_buf=3*K.lit_bufsize,K.level=$,K.strategy=N,K.method=F,Fe(g)}s=[new ue(0,0,0,0,function(g,$){var F=65535;for(F>g.pending_buf_size-5&&(F=g.pending_buf_size-5);;){if(g.lookahead<=1){if(le(g),g.lookahead===0&&$===d)return b;if(g.lookahead===0)break}g.strstart+=g.lookahead,g.lookahead=0;var I=g.block_start+F;if((g.strstart===0||g.strstart>=I)&&(g.lookahead=g.strstart-I,g.strstart=I,L(g,!1),g.strm.avail_out===0)||g.strstart-g.block_start>=g.w_size-V&&(L(g,!1),g.strm.avail_out===0))return b}return g.insert=0,$===f?(L(g,!0),g.strm.avail_out===0?J:B):(g.strstart>g.block_start&&(L(g,!1),g.strm.avail_out),b)}),new ue(4,4,8,4,be),new ue(4,5,16,8,be),new ue(4,6,32,32,be),new ue(4,4,16,16,de),new ue(8,16,32,32,de),new ue(8,16,128,128,de),new ue(8,32,128,256,de),new ue(32,128,258,1024,de),new ue(32,258,258,4096,de)],r.deflateInit=function(g,$){return Be(g,$,v,15,8,0)},r.deflateInit2=Be,r.deflateReset=Fe,r.deflateResetKeep=xe,r.deflateSetHeader=function(g,$){return g&&g.state?g.state.wrap!==2?h:(g.state.gzhead=$,p):h},r.deflate=function(g,$){var F,I,A,N;if(!g||!g.state||5<$||$<0)return g?re(g,h):h;if(I=g.state,!g.output||!g.input&&g.avail_in!==0||I.status===666&&$!==f)return re(g,g.avail_out===0?-5:h);if(I.strm=g,F=I.last_flush,I.last_flush=$,I.status===C)if(I.wrap===2)g.adler=0,Q(I,31),Q(I,139),Q(I,8),I.gzhead?(Q(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),Q(I,255&I.gzhead.time),Q(I,I.gzhead.time>>8&255),Q(I,I.gzhead.time>>16&255),Q(I,I.gzhead.time>>24&255),Q(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),Q(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(Q(I,255&I.gzhead.extra.length),Q(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(g.adler=l(g.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(Q(I,0),Q(I,0),Q(I,0),Q(I,0),Q(I,0),Q(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),Q(I,3),I.status=P);else{var W=v+(I.w_bits-8<<4)<<8;W|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(W|=32),W+=31-W%31,I.status=P,H(I,W),I.strstart!==0&&(H(I,g.adler>>>16),H(I,65535&g.adler)),g.adler=1}if(I.status===69)if(I.gzhead.extra){for(A=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>A&&(g.adler=l(g.adler,I.pending_buf,I.pending-A,A)),M(g),A=I.pending,I.pending!==I.pending_buf_size));)Q(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>A&&(g.adler=l(g.adler,I.pending_buf,I.pending-A,A)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){A=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>A&&(g.adler=l(g.adler,I.pending_buf,I.pending-A,A)),M(g),A=I.pending,I.pending===I.pending_buf_size)){N=1;break}N=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,Q(I,N)}while(N!==0);I.gzhead.hcrc&&I.pending>A&&(g.adler=l(g.adler,I.pending_buf,I.pending-A,A)),N===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){A=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>A&&(g.adler=l(g.adler,I.pending_buf,I.pending-A,A)),M(g),A=I.pending,I.pending===I.pending_buf_size)){N=1;break}N=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,Q(I,N)}while(N!==0);I.gzhead.hcrc&&I.pending>A&&(g.adler=l(g.adler,I.pending_buf,I.pending-A,A)),N===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&M(g),I.pending+2<=I.pending_buf_size&&(Q(I,255&g.adler),Q(I,g.adler>>8&255),g.adler=0,I.status=P)):I.status=P),I.pending!==0){if(M(g),g.avail_out===0)return I.last_flush=-1,p}else if(g.avail_in===0&&z($)<=z(F)&&$!==f)return re(g,-5);if(I.status===666&&g.avail_in!==0)return re(g,-5);if(g.avail_in!==0||I.lookahead!==0||$!==d&&I.status!==666){var K=I.strategy===2?function(U,q){for(var te;;){if(U.lookahead===0&&(le(U),U.lookahead===0)){if(q===d)return b;break}if(U.match_length=0,te=o._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++,te&&(L(U,!1),U.strm.avail_out===0))return b}return U.insert=0,q===f?(L(U,!0),U.strm.avail_out===0?J:B):U.last_lit&&(L(U,!1),U.strm.avail_out===0)?b:D}(I,$):I.strategy===3?function(U,q){for(var te,Y,ae,$e,ke=U.window;;){if(U.lookahead<=j){if(le(U),U.lookahead<=j&&q===d)return b;if(U.lookahead===0)break}if(U.match_length=0,U.lookahead>=R&&0<U.strstart&&(Y=ke[ae=U.strstart-1])===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]){$e=U.strstart+j;do;while(Y===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]&&Y===ke[++ae]&&ae<$e);U.match_length=j-($e-ae),U.match_length>U.lookahead&&(U.match_length=U.lookahead)}if(U.match_length>=R?(te=o._tr_tally(U,1,U.match_length-R),U.lookahead-=U.match_length,U.strstart+=U.match_length,U.match_length=0):(te=o._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++),te&&(L(U,!1),U.strm.avail_out===0))return b}return U.insert=0,q===f?(L(U,!0),U.strm.avail_out===0?J:B):U.last_lit&&(L(U,!1),U.strm.avail_out===0)?b:D}(I,$):s[I.level].func(I,$);if(K!==J&&K!==B||(I.status=666),K===b||K===J)return g.avail_out===0&&(I.last_flush=-1),p;if(K===D&&($===1?o._tr_align(I):$!==5&&(o._tr_stored_block(I,0,0,!1),$===3&&(se(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),M(g),g.avail_out===0))return I.last_flush=-1,p}return $!==f?p:I.wrap<=0?1:(I.wrap===2?(Q(I,255&g.adler),Q(I,g.adler>>8&255),Q(I,g.adler>>16&255),Q(I,g.adler>>24&255),Q(I,255&g.total_in),Q(I,g.total_in>>8&255),Q(I,g.total_in>>16&255),Q(I,g.total_in>>24&255)):(H(I,g.adler>>>16),H(I,65535&g.adler)),M(g),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?p:1)},r.deflateEnd=function(g){var $;return g&&g.state?($=g.state.status)!==C&&$!==69&&$!==73&&$!==91&&$!==103&&$!==P&&$!==666?re(g,h):(g.state=null,$===P?re(g,-3):p):h},r.deflateSetDictionary=function(g,$){var F,I,A,N,W,K,U,q,te=$.length;if(!g||!g.state||(N=(F=g.state).wrap)===2||N===1&&F.status!==C||F.lookahead)return h;for(N===1&&(g.adler=c(g.adler,$,te,0)),F.wrap=0,te>=F.w_size&&(N===0&&(se(F.head),F.strstart=0,F.block_start=0,F.insert=0),q=new a.Buf8(F.w_size),a.arraySet(q,$,te-F.w_size,F.w_size,0),$=q,te=F.w_size),W=g.avail_in,K=g.next_in,U=g.input,g.avail_in=te,g.next_in=0,g.input=$,le(F);F.lookahead>=R;){for(I=F.strstart,A=F.lookahead-(R-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[I+R-1])&F.hash_mask,F.prev[I&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=I,I++,--A;);F.strstart=I,F.lookahead=R-1,le(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=R-1,F.match_available=0,g.next_in=K,g.input=U,g.avail_in=W,F.wrap=N,p},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,r){i.exports=function(s,a){var o,c,l,u,d,f,p,h,m,y,x,v,k,O,E,w,_,S,R,j,V,C,P,b,D;o=s.state,c=s.next_in,b=s.input,l=c+(s.avail_in-5),u=s.next_out,D=s.output,d=u-(a-s.avail_out),f=u+(s.avail_out-257),p=o.dmax,h=o.wsize,m=o.whave,y=o.wnext,x=o.window,v=o.hold,k=o.bits,O=o.lencode,E=o.distcode,w=(1<<o.lenbits)-1,_=(1<<o.distbits)-1;e:do{k<15&&(v+=b[c++]<<k,k+=8,v+=b[c++]<<k,k+=8),S=O[v&w];t:for(;;){if(v>>>=R=S>>>24,k-=R,(R=S>>>16&255)===0)D[u++]=65535&S;else{if(!(16&R)){if(!(64&R)){S=O[(65535&S)+(v&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}j=65535&S,(R&=15)&&(k<R&&(v+=b[c++]<<k,k+=8),j+=v&(1<<R)-1,v>>>=R,k-=R),k<15&&(v+=b[c++]<<k,k+=8,v+=b[c++]<<k,k+=8),S=E[v&_];n:for(;;){if(v>>>=R=S>>>24,k-=R,!(16&(R=S>>>16&255))){if(!(64&R)){S=E[(65535&S)+(v&(1<<R)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(V=65535&S,k<(R&=15)&&(v+=b[c++]<<k,(k+=8)<R&&(v+=b[c++]<<k,k+=8)),p<(V+=v&(1<<R)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=R,k-=R,(R=u-d)<V){if(m<(R=V-R)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(P=x,(C=0)===y){if(C+=h-R,R<j){for(j-=R;D[u++]=x[C++],--R;);C=u-V,P=D}}else if(y<R){if(C+=h+y-R,(R-=y)<j){for(j-=R;D[u++]=x[C++],--R;);if(C=0,y<j){for(j-=R=y;D[u++]=x[C++],--R;);C=u-V,P=D}}}else if(C+=y-R,R<j){for(j-=R;D[u++]=x[C++],--R;);C=u-V,P=D}for(;2<j;)D[u++]=P[C++],D[u++]=P[C++],D[u++]=P[C++],j-=3;j&&(D[u++]=P[C++],1<j&&(D[u++]=P[C++]))}else{for(C=u-V;D[u++]=D[C++],D[u++]=D[C++],D[u++]=D[C++],2<(j-=3););j&&(D[u++]=D[C++],1<j&&(D[u++]=D[C++]))}break}}break}}while(c<l&&u<f);c-=j=k>>3,v&=(1<<(k-=j<<3))-1,s.next_in=c,s.next_out=u,s.avail_in=c<l?l-c+5:5-(c-l),s.avail_out=u<f?f-u+257:257-(u-f),o.hold=v,o.bits=k}},{}],49:[function(n,i,r){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),c=n("./inffast"),l=n("./inftrees"),u=1,d=2,f=0,p=-2,h=1,m=852,y=592;function x(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(C){var P;return C&&C.state?(P=C.state,C.total_in=C.total_out=P.total=0,C.msg="",P.wrap&&(C.adler=1&P.wrap),P.mode=h,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new s.Buf32(m),P.distcode=P.distdyn=new s.Buf32(y),P.sane=1,P.back=-1,f):p}function O(C){var P;return C&&C.state?((P=C.state).wsize=0,P.whave=0,P.wnext=0,k(C)):p}function E(C,P){var b,D;return C&&C.state?(D=C.state,P<0?(b=0,P=-P):(b=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?p:(D.window!==null&&D.wbits!==P&&(D.window=null),D.wrap=b,D.wbits=P,O(C))):p}function w(C,P){var b,D;return C?(D=new v,(C.state=D).window=null,(b=E(C,P))!==f&&(C.state=null),b):p}var _,S,R=!0;function j(C){if(R){var P;for(_=new s.Buf32(512),S=new s.Buf32(32),P=0;P<144;)C.lens[P++]=8;for(;P<256;)C.lens[P++]=9;for(;P<280;)C.lens[P++]=7;for(;P<288;)C.lens[P++]=8;for(l(u,C.lens,0,288,_,0,C.work,{bits:9}),P=0;P<32;)C.lens[P++]=5;l(d,C.lens,0,32,S,0,C.work,{bits:5}),R=!1}C.lencode=_,C.lenbits=9,C.distcode=S,C.distbits=5}function V(C,P,b,D){var J,B=C.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new s.Buf8(B.wsize)),D>=B.wsize?(s.arraySet(B.window,P,b-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(D<(J=B.wsize-B.wnext)&&(J=D),s.arraySet(B.window,P,b-D,J,B.wnext),(D-=J)?(s.arraySet(B.window,P,b-D,D,0),B.wnext=D,B.whave=B.wsize):(B.wnext+=J,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=J))),0}r.inflateReset=O,r.inflateReset2=E,r.inflateResetKeep=k,r.inflateInit=function(C){return w(C,15)},r.inflateInit2=w,r.inflate=function(C,P){var b,D,J,B,re,z,se,M,L,Q,H,G,le,be,de,ue,Se,xe,Fe,Be,g,$,F,I,A=0,N=new s.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return p;(b=C.state).mode===12&&(b.mode=13),re=C.next_out,J=C.output,se=C.avail_out,B=C.next_in,D=C.input,z=C.avail_in,M=b.hold,L=b.bits,Q=z,H=se,$=f;e:for(;;)switch(b.mode){case h:if(b.wrap===0){b.mode=13;break}for(;L<16;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(2&b.wrap&&M===35615){N[b.check=0]=255&M,N[1]=M>>>8&255,b.check=o(b.check,N,2,0),L=M=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&M)<<8)+(M>>8))%31){C.msg="incorrect header check",b.mode=30;break}if((15&M)!=8){C.msg="unknown compression method",b.mode=30;break}if(L-=4,g=8+(15&(M>>>=4)),b.wbits===0)b.wbits=g;else if(g>b.wbits){C.msg="invalid window size",b.mode=30;break}b.dmax=1<<g,C.adler=b.check=1,b.mode=512&M?10:12,L=M=0;break;case 2:for(;L<16;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(b.flags=M,(255&b.flags)!=8){C.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){C.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=M>>8&1),512&b.flags&&(N[0]=255&M,N[1]=M>>>8&255,b.check=o(b.check,N,2,0)),L=M=0,b.mode=3;case 3:for(;L<32;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}b.head&&(b.head.time=M),512&b.flags&&(N[0]=255&M,N[1]=M>>>8&255,N[2]=M>>>16&255,N[3]=M>>>24&255,b.check=o(b.check,N,4,0)),L=M=0,b.mode=4;case 4:for(;L<16;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}b.head&&(b.head.xflags=255&M,b.head.os=M>>8),512&b.flags&&(N[0]=255&M,N[1]=M>>>8&255,b.check=o(b.check,N,2,0)),L=M=0,b.mode=5;case 5:if(1024&b.flags){for(;L<16;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}b.length=M,b.head&&(b.head.extra_len=M),512&b.flags&&(N[0]=255&M,N[1]=M>>>8&255,b.check=o(b.check,N,2,0)),L=M=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(z<(G=b.length)&&(G=z),G&&(b.head&&(g=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),s.arraySet(b.head.extra,D,B,G,g)),512&b.flags&&(b.check=o(b.check,D,G,B)),z-=G,B+=G,b.length-=G),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(z===0)break e;for(G=0;g=D[B+G++],b.head&&g&&b.length<65536&&(b.head.name+=String.fromCharCode(g)),g&&G<z;);if(512&b.flags&&(b.check=o(b.check,D,G,B)),z-=G,B+=G,g)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(z===0)break e;for(G=0;g=D[B+G++],b.head&&g&&b.length<65536&&(b.head.comment+=String.fromCharCode(g)),g&&G<z;);if(512&b.flags&&(b.check=o(b.check,D,G,B)),z-=G,B+=G,g)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;L<16;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(M!==(65535&b.check)){C.msg="header crc mismatch",b.mode=30;break}L=M=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),C.adler=b.check=0,b.mode=12;break;case 10:for(;L<32;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}C.adler=b.check=x(M),L=M=0,b.mode=11;case 11:if(b.havedict===0)return C.next_out=re,C.avail_out=se,C.next_in=B,C.avail_in=z,b.hold=M,b.bits=L,2;C.adler=b.check=1,b.mode=12;case 12:if(P===5||P===6)break e;case 13:if(b.last){M>>>=7&L,L-=7&L,b.mode=27;break}for(;L<3;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}switch(b.last=1&M,L-=1,3&(M>>>=1)){case 0:b.mode=14;break;case 1:if(j(b),b.mode=20,P!==6)break;M>>>=2,L-=2;break e;case 2:b.mode=17;break;case 3:C.msg="invalid block type",b.mode=30}M>>>=2,L-=2;break;case 14:for(M>>>=7&L,L-=7&L;L<32;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if((65535&M)!=(M>>>16^65535)){C.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&M,L=M=0,b.mode=15,P===6)break e;case 15:b.mode=16;case 16:if(G=b.length){if(z<G&&(G=z),se<G&&(G=se),G===0)break e;s.arraySet(J,D,B,G,re),z-=G,B+=G,se-=G,re+=G,b.length-=G;break}b.mode=12;break;case 17:for(;L<14;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(b.nlen=257+(31&M),M>>>=5,L-=5,b.ndist=1+(31&M),M>>>=5,L-=5,b.ncode=4+(15&M),M>>>=4,L-=4,286<b.nlen||30<b.ndist){C.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;L<3;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}b.lens[W[b.have++]]=7&M,M>>>=3,L-=3}for(;b.have<19;)b.lens[W[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,F={bits:b.lenbits},$=l(0,b.lens,0,19,b.lencode,0,b.work,F),b.lenbits=F.bits,$){C.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;ue=(A=b.lencode[M&(1<<b.lenbits)-1])>>>16&255,Se=65535&A,!((de=A>>>24)<=L);){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(Se<16)M>>>=de,L-=de,b.lens[b.have++]=Se;else{if(Se===16){for(I=de+2;L<I;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(M>>>=de,L-=de,b.have===0){C.msg="invalid bit length repeat",b.mode=30;break}g=b.lens[b.have-1],G=3+(3&M),M>>>=2,L-=2}else if(Se===17){for(I=de+3;L<I;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}L-=de,g=0,G=3+(7&(M>>>=de)),M>>>=3,L-=3}else{for(I=de+7;L<I;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}L-=de,g=0,G=11+(127&(M>>>=de)),M>>>=7,L-=7}if(b.have+G>b.nlen+b.ndist){C.msg="invalid bit length repeat",b.mode=30;break}for(;G--;)b.lens[b.have++]=g}}if(b.mode===30)break;if(b.lens[256]===0){C.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,F={bits:b.lenbits},$=l(u,b.lens,0,b.nlen,b.lencode,0,b.work,F),b.lenbits=F.bits,$){C.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,F={bits:b.distbits},$=l(d,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,F),b.distbits=F.bits,$){C.msg="invalid distances set",b.mode=30;break}if(b.mode=20,P===6)break e;case 20:b.mode=21;case 21:if(6<=z&&258<=se){C.next_out=re,C.avail_out=se,C.next_in=B,C.avail_in=z,b.hold=M,b.bits=L,c(C,H),re=C.next_out,J=C.output,se=C.avail_out,B=C.next_in,D=C.input,z=C.avail_in,M=b.hold,L=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;ue=(A=b.lencode[M&(1<<b.lenbits)-1])>>>16&255,Se=65535&A,!((de=A>>>24)<=L);){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(ue&&!(240&ue)){for(xe=de,Fe=ue,Be=Se;ue=(A=b.lencode[Be+((M&(1<<xe+Fe)-1)>>xe)])>>>16&255,Se=65535&A,!(xe+(de=A>>>24)<=L);){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}M>>>=xe,L-=xe,b.back+=xe}if(M>>>=de,L-=de,b.back+=de,b.length=Se,ue===0){b.mode=26;break}if(32&ue){b.back=-1,b.mode=12;break}if(64&ue){C.msg="invalid literal/length code",b.mode=30;break}b.extra=15&ue,b.mode=22;case 22:if(b.extra){for(I=b.extra;L<I;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}b.length+=M&(1<<b.extra)-1,M>>>=b.extra,L-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;ue=(A=b.distcode[M&(1<<b.distbits)-1])>>>16&255,Se=65535&A,!((de=A>>>24)<=L);){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(!(240&ue)){for(xe=de,Fe=ue,Be=Se;ue=(A=b.distcode[Be+((M&(1<<xe+Fe)-1)>>xe)])>>>16&255,Se=65535&A,!(xe+(de=A>>>24)<=L);){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}M>>>=xe,L-=xe,b.back+=xe}if(M>>>=de,L-=de,b.back+=de,64&ue){C.msg="invalid distance code",b.mode=30;break}b.offset=Se,b.extra=15&ue,b.mode=24;case 24:if(b.extra){for(I=b.extra;L<I;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}b.offset+=M&(1<<b.extra)-1,M>>>=b.extra,L-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){C.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(se===0)break e;if(G=H-se,b.offset>G){if((G=b.offset-G)>b.whave&&b.sane){C.msg="invalid distance too far back",b.mode=30;break}le=G>b.wnext?(G-=b.wnext,b.wsize-G):b.wnext-G,G>b.length&&(G=b.length),be=b.window}else be=J,le=re-b.offset,G=b.length;for(se<G&&(G=se),se-=G,b.length-=G;J[re++]=be[le++],--G;);b.length===0&&(b.mode=21);break;case 26:if(se===0)break e;J[re++]=b.length,se--,b.mode=21;break;case 27:if(b.wrap){for(;L<32;){if(z===0)break e;z--,M|=D[B++]<<L,L+=8}if(H-=se,C.total_out+=H,b.total+=H,H&&(C.adler=b.check=b.flags?o(b.check,J,H,re-H):a(b.check,J,H,re-H)),H=se,(b.flags?M:x(M))!==b.check){C.msg="incorrect data check",b.mode=30;break}L=M=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;L<32;){if(z===0)break e;z--,M+=D[B++]<<L,L+=8}if(M!==(4294967295&b.total)){C.msg="incorrect length check",b.mode=30;break}L=M=0}b.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return p}return C.next_out=re,C.avail_out=se,C.next_in=B,C.avail_in=z,b.hold=M,b.bits=L,(b.wsize||H!==C.avail_out&&b.mode<30&&(b.mode<27||P!==4))&&V(C,C.output,C.next_out,H-C.avail_out)?(b.mode=31,-4):(Q-=C.avail_in,H-=C.avail_out,C.total_in+=Q,C.total_out+=H,b.total+=H,b.wrap&&H&&(C.adler=b.check=b.flags?o(b.check,J,H,C.next_out-H):a(b.check,J,H,C.next_out-H)),C.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(Q==0&&H===0||P===4)&&$===f&&($=-5),$)},r.inflateEnd=function(C){if(!C||!C.state)return p;var P=C.state;return P.window&&(P.window=null),C.state=null,f},r.inflateGetHeader=function(C,P){var b;return C&&C.state&&2&(b=C.state).wrap?((b.head=P).done=!1,f):p},r.inflateSetDictionary=function(C,P){var b,D=P.length;return C&&C.state?(b=C.state).wrap!==0&&b.mode!==11?p:b.mode===11&&a(1,P,D,0)!==b.check?-3:V(C,P,D,D)?(b.mode=31,-4):(b.havedict=1,f):p},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,r){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(u,d,f,p,h,m,y,x){var v,k,O,E,w,_,S,R,j,V=x.bits,C=0,P=0,b=0,D=0,J=0,B=0,re=0,z=0,se=0,M=0,L=null,Q=0,H=new s.Buf16(16),G=new s.Buf16(16),le=null,be=0;for(C=0;C<=15;C++)H[C]=0;for(P=0;P<p;P++)H[d[f+P]]++;for(J=V,D=15;1<=D&&H[D]===0;D--);if(D<J&&(J=D),D===0)return h[m++]=20971520,h[m++]=20971520,x.bits=1,0;for(b=1;b<D&&H[b]===0;b++);for(J<b&&(J=b),C=z=1;C<=15;C++)if(z<<=1,(z-=H[C])<0)return-1;if(0<z&&(u===0||D!==1))return-1;for(G[1]=0,C=1;C<15;C++)G[C+1]=G[C]+H[C];for(P=0;P<p;P++)d[f+P]!==0&&(y[G[d[f+P]]++]=P);if(_=u===0?(L=le=y,19):u===1?(L=a,Q-=257,le=o,be-=257,256):(L=c,le=l,-1),C=b,w=m,re=P=M=0,O=-1,E=(se=1<<(B=J))-1,u===1&&852<se||u===2&&592<se)return 1;for(;;){for(S=C-re,j=y[P]<_?(R=0,y[P]):y[P]>_?(R=le[be+y[P]],L[Q+y[P]]):(R=96,0),v=1<<C-re,b=k=1<<B;h[w+(M>>re)+(k-=v)]=S<<24|R<<16|j|0,k!==0;);for(v=1<<C-1;M&v;)v>>=1;if(v!==0?(M&=v-1,M+=v):M=0,P++,--H[C]==0){if(C===D)break;C=d[f+y[P]]}if(J<C&&(M&E)!==O){for(re===0&&(re=J),w+=b,z=1<<(B=C-re);B+re<D&&!((z-=H[B+re])<=0);)B++,z<<=1;if(se+=1<<B,u===1&&852<se||u===2&&592<se)return 1;h[O=M&E]=J<<24|B<<16|w-m|0}}return M!==0&&(h[w+M]=C-re<<24|64<<16|0),x.bits=J,0}},{"../utils/common":41}],51:[function(n,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,r){var s=n("../utils/common"),a=0,o=1;function c(A){for(var N=A.length;0<=--N;)A[N]=0}var l=0,u=29,d=256,f=d+1+u,p=30,h=19,m=2*f+1,y=15,x=16,v=7,k=256,O=16,E=17,w=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(f+2));c(V);var C=new Array(2*p);c(C);var P=new Array(512);c(P);var b=new Array(256);c(b);var D=new Array(u);c(D);var J,B,re,z=new Array(p);function se(A,N,W,K,U){this.static_tree=A,this.extra_bits=N,this.extra_base=W,this.elems=K,this.max_length=U,this.has_stree=A&&A.length}function M(A,N){this.dyn_tree=A,this.max_code=0,this.stat_desc=N}function L(A){return A<256?P[A]:P[256+(A>>>7)]}function Q(A,N){A.pending_buf[A.pending++]=255&N,A.pending_buf[A.pending++]=N>>>8&255}function H(A,N,W){A.bi_valid>x-W?(A.bi_buf|=N<<A.bi_valid&65535,Q(A,A.bi_buf),A.bi_buf=N>>x-A.bi_valid,A.bi_valid+=W-x):(A.bi_buf|=N<<A.bi_valid&65535,A.bi_valid+=W)}function G(A,N,W){H(A,W[2*N],W[2*N+1])}function le(A,N){for(var W=0;W|=1&A,A>>>=1,W<<=1,0<--N;);return W>>>1}function be(A,N,W){var K,U,q=new Array(y+1),te=0;for(K=1;K<=y;K++)q[K]=te=te+W[K-1]<<1;for(U=0;U<=N;U++){var Y=A[2*U+1];Y!==0&&(A[2*U]=le(q[Y]++,Y))}}function de(A){var N;for(N=0;N<f;N++)A.dyn_ltree[2*N]=0;for(N=0;N<p;N++)A.dyn_dtree[2*N]=0;for(N=0;N<h;N++)A.bl_tree[2*N]=0;A.dyn_ltree[2*k]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0}function ue(A){8<A.bi_valid?Q(A,A.bi_buf):0<A.bi_valid&&(A.pending_buf[A.pending++]=A.bi_buf),A.bi_buf=0,A.bi_valid=0}function Se(A,N,W,K){var U=2*N,q=2*W;return A[U]<A[q]||A[U]===A[q]&&K[N]<=K[W]}function xe(A,N,W){for(var K=A.heap[W],U=W<<1;U<=A.heap_len&&(U<A.heap_len&&Se(N,A.heap[U+1],A.heap[U],A.depth)&&U++,!Se(N,K,A.heap[U],A.depth));)A.heap[W]=A.heap[U],W=U,U<<=1;A.heap[W]=K}function Fe(A,N,W){var K,U,q,te,Y=0;if(A.last_lit!==0)for(;K=A.pending_buf[A.d_buf+2*Y]<<8|A.pending_buf[A.d_buf+2*Y+1],U=A.pending_buf[A.l_buf+Y],Y++,K===0?G(A,U,N):(G(A,(q=b[U])+d+1,N),(te=_[q])!==0&&H(A,U-=D[q],te),G(A,q=L(--K),W),(te=S[q])!==0&&H(A,K-=z[q],te)),Y<A.last_lit;);G(A,k,N)}function Be(A,N){var W,K,U,q=N.dyn_tree,te=N.stat_desc.static_tree,Y=N.stat_desc.has_stree,ae=N.stat_desc.elems,$e=-1;for(A.heap_len=0,A.heap_max=m,W=0;W<ae;W++)q[2*W]!==0?(A.heap[++A.heap_len]=$e=W,A.depth[W]=0):q[2*W+1]=0;for(;A.heap_len<2;)q[2*(U=A.heap[++A.heap_len]=$e<2?++$e:0)]=1,A.depth[U]=0,A.opt_len--,Y&&(A.static_len-=te[2*U+1]);for(N.max_code=$e,W=A.heap_len>>1;1<=W;W--)xe(A,q,W);for(U=ae;W=A.heap[1],A.heap[1]=A.heap[A.heap_len--],xe(A,q,1),K=A.heap[1],A.heap[--A.heap_max]=W,A.heap[--A.heap_max]=K,q[2*U]=q[2*W]+q[2*K],A.depth[U]=(A.depth[W]>=A.depth[K]?A.depth[W]:A.depth[K])+1,q[2*W+1]=q[2*K+1]=U,A.heap[1]=U++,xe(A,q,1),2<=A.heap_len;);A.heap[--A.heap_max]=A.heap[1],function(ke,pn){var ga,Xn,va,Qe,yc,qp,_i=pn.dyn_tree,Fx=pn.max_code,k2=pn.stat_desc.static_tree,S2=pn.stat_desc.has_stree,A2=pn.stat_desc.extra_bits,Bx=pn.stat_desc.extra_base,ba=pn.stat_desc.max_length,_c=0;for(Qe=0;Qe<=y;Qe++)ke.bl_count[Qe]=0;for(_i[2*ke.heap[ke.heap_max]+1]=0,ga=ke.heap_max+1;ga<m;ga++)ba<(Qe=_i[2*_i[2*(Xn=ke.heap[ga])+1]+1]+1)&&(Qe=ba,_c++),_i[2*Xn+1]=Qe,Fx<Xn||(ke.bl_count[Qe]++,yc=0,Bx<=Xn&&(yc=A2[Xn-Bx]),qp=_i[2*Xn],ke.opt_len+=qp*(Qe+yc),S2&&(ke.static_len+=qp*(k2[2*Xn+1]+yc)));if(_c!==0){do{for(Qe=ba-1;ke.bl_count[Qe]===0;)Qe--;ke.bl_count[Qe]--,ke.bl_count[Qe+1]+=2,ke.bl_count[ba]--,_c-=2}while(0<_c);for(Qe=ba;Qe!==0;Qe--)for(Xn=ke.bl_count[Qe];Xn!==0;)Fx<(va=ke.heap[--ga])||(_i[2*va+1]!==Qe&&(ke.opt_len+=(Qe-_i[2*va+1])*_i[2*va],_i[2*va+1]=Qe),Xn--)}}(A,N),be(q,$e,A.bl_count)}function g(A,N,W){var K,U,q=-1,te=N[1],Y=0,ae=7,$e=4;for(te===0&&(ae=138,$e=3),N[2*(W+1)+1]=65535,K=0;K<=W;K++)U=te,te=N[2*(K+1)+1],++Y<ae&&U===te||(Y<$e?A.bl_tree[2*U]+=Y:U!==0?(U!==q&&A.bl_tree[2*U]++,A.bl_tree[2*O]++):Y<=10?A.bl_tree[2*E]++:A.bl_tree[2*w]++,q=U,$e=(Y=0)===te?(ae=138,3):U===te?(ae=6,3):(ae=7,4))}function $(A,N,W){var K,U,q=-1,te=N[1],Y=0,ae=7,$e=4;for(te===0&&(ae=138,$e=3),K=0;K<=W;K++)if(U=te,te=N[2*(K+1)+1],!(++Y<ae&&U===te)){if(Y<$e)for(;G(A,U,A.bl_tree),--Y!=0;);else U!==0?(U!==q&&(G(A,U,A.bl_tree),Y--),G(A,O,A.bl_tree),H(A,Y-3,2)):Y<=10?(G(A,E,A.bl_tree),H(A,Y-3,3)):(G(A,w,A.bl_tree),H(A,Y-11,7));q=U,$e=(Y=0)===te?(ae=138,3):U===te?(ae=6,3):(ae=7,4)}}c(z);var F=!1;function I(A,N,W,K){H(A,(l<<1)+(K?1:0),3),function(U,q,te,Y){ue(U),Q(U,te),Q(U,~te),s.arraySet(U.pending_buf,U.window,q,te,U.pending),U.pending+=te}(A,N,W)}r._tr_init=function(A){F||(function(){var N,W,K,U,q,te=new Array(y+1);for(U=K=0;U<u-1;U++)for(D[U]=K,N=0;N<1<<_[U];N++)b[K++]=U;for(b[K-1]=U,U=q=0;U<16;U++)for(z[U]=q,N=0;N<1<<S[U];N++)P[q++]=U;for(q>>=7;U<p;U++)for(z[U]=q<<7,N=0;N<1<<S[U]-7;N++)P[256+q++]=U;for(W=0;W<=y;W++)te[W]=0;for(N=0;N<=143;)V[2*N+1]=8,N++,te[8]++;for(;N<=255;)V[2*N+1]=9,N++,te[9]++;for(;N<=279;)V[2*N+1]=7,N++,te[7]++;for(;N<=287;)V[2*N+1]=8,N++,te[8]++;for(be(V,f+1,te),N=0;N<p;N++)C[2*N+1]=5,C[2*N]=le(N,5);J=new se(V,_,d+1,f,y),B=new se(C,S,0,p,y),re=new se(new Array(0),R,0,h,v)}(),F=!0),A.l_desc=new M(A.dyn_ltree,J),A.d_desc=new M(A.dyn_dtree,B),A.bl_desc=new M(A.bl_tree,re),A.bi_buf=0,A.bi_valid=0,de(A)},r._tr_stored_block=I,r._tr_flush_block=function(A,N,W,K){var U,q,te=0;0<A.level?(A.strm.data_type===2&&(A.strm.data_type=function(Y){var ae,$e=4093624447;for(ae=0;ae<=31;ae++,$e>>>=1)if(1&$e&&Y.dyn_ltree[2*ae]!==0)return a;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return o;for(ae=32;ae<d;ae++)if(Y.dyn_ltree[2*ae]!==0)return o;return a}(A)),Be(A,A.l_desc),Be(A,A.d_desc),te=function(Y){var ae;for(g(Y,Y.dyn_ltree,Y.l_desc.max_code),g(Y,Y.dyn_dtree,Y.d_desc.max_code),Be(Y,Y.bl_desc),ae=h-1;3<=ae&&Y.bl_tree[2*j[ae]+1]===0;ae--);return Y.opt_len+=3*(ae+1)+5+5+4,ae}(A),U=A.opt_len+3+7>>>3,(q=A.static_len+3+7>>>3)<=U&&(U=q)):U=q=W+5,W+4<=U&&N!==-1?I(A,N,W,K):A.strategy===4||q===U?(H(A,2+(K?1:0),3),Fe(A,V,C)):(H(A,4+(K?1:0),3),function(Y,ae,$e,ke){var pn;for(H(Y,ae-257,5),H(Y,$e-1,5),H(Y,ke-4,4),pn=0;pn<ke;pn++)H(Y,Y.bl_tree[2*j[pn]+1],3);$(Y,Y.dyn_ltree,ae-1),$(Y,Y.dyn_dtree,$e-1)}(A,A.l_desc.max_code+1,A.d_desc.max_code+1,te+1),Fe(A,A.dyn_ltree,A.dyn_dtree)),de(A),K&&ue(A)},r._tr_tally=function(A,N,W){return A.pending_buf[A.d_buf+2*A.last_lit]=N>>>8&255,A.pending_buf[A.d_buf+2*A.last_lit+1]=255&N,A.pending_buf[A.l_buf+A.last_lit]=255&W,A.last_lit++,N===0?A.dyn_ltree[2*W]++:(A.matches++,N--,A.dyn_ltree[2*(b[W]+d+1)]++,A.dyn_dtree[2*L(N)]++),A.last_lit===A.lit_bufsize-1},r._tr_align=function(A){H(A,2,3),G(A,k,V),function(N){N.bi_valid===16?(Q(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)}(A)}},{"../utils/common":41}],53:[function(n,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,r){(function(s){(function(a,o){if(!a.setImmediate){var c,l,u,d,f=1,p={},h=!1,m=a.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(a);y=y&&y.setTimeout?y:a,c={}.toString.call(a.process)==="[object process]"?function(O){process.nextTick(function(){v(O)})}:function(){if(a.postMessage&&!a.importScripts){var O=!0,E=a.onmessage;return a.onmessage=function(){O=!1},a.postMessage("","*"),a.onmessage=E,O}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(O){a.postMessage(d+O,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(O){v(O.data)},function(O){u.port2.postMessage(O)}):m&&"onreadystatechange"in m.createElement("script")?(l=m.documentElement,function(O){var E=m.createElement("script");E.onreadystatechange=function(){v(O),E.onreadystatechange=null,l.removeChild(E),E=null},l.appendChild(E)}):function(O){setTimeout(v,0,O)},y.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var E=new Array(arguments.length-1),w=0;w<E.length;w++)E[w]=arguments[w+1];var _={callback:O,args:E};return p[f]=_,c(f),f++},y.clearImmediate=x}function x(O){delete p[O]}function v(O){if(h)setTimeout(v,0,O);else{var E=p[O];if(E){h=!0;try{(function(w){var _=w.callback,S=w.args;switch(S.length){case 0:_();break;case 1:_(S[0]);break;case 2:_(S[0],S[1]);break;case 3:_(S[0],S[1],S[2]);break;default:_.apply(o,S)}})(E)}finally{x(O),h=!1}}}}function k(O){O.source===a&&typeof O.data=="string"&&O.data.indexOf(d)===0&&v(+O.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof bt<"u"?bt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(bd);var e_=bd.exports,t_=yr(e_);function Ct(t,e,n,i){const r=i??"";return Ce.emit(`error:${e}`,t,n,r),l_(t,n,r)}function n_(t,e){Ce.emit("bip:retry",t,void 0,e)}function i_(t,e){Ce.emit("bip:loginfailed",t,void 0,e)}function r_(t,e,n){Ce.emit("gadgetclient:reset",t,e,n)}function s_(t,e,n){Ce.emit("gadgetclient:patch",t,e,n)}function a_(t,e){Ce.emit("register:flush",t,e)}function o_(t){Ce.emit("register:biosflash",t)}function c_(t){Ce.emit("register:bioserase",t)}function Wt(t,...e){return Ce.emit("tape:info",t,e),!0}function xd(t,...e){return Ce.emit("tape:debug",t,e),!0}function l_(t,...e){return Ce.emit("tape:error",t,e),!1}function u_(t){Ce.emit("tape:crash",t)}function p_(t,e,n,i,r,s){Ce.emit("tape:editor:open",t,[e,n,i,r],s)}function yd(t,e){return`${t}${e}`}function $c(t){Ce.emit("vm:flush",t)}var _d={exports:{}},zc={exports:{}},wd;function d_(){return wd||(wd=1,function(t,e){(function(n,i){t.exports=i()})(bt,function(){function n(m){return!isNaN(parseFloat(m))&&isFinite(m)}function i(m){return m.charAt(0).toUpperCase()+m.substring(1)}function r(m){return function(){return this[m]}}var s=["isConstructor","isEval","isNative","isToplevel"],a=["columnNumber","lineNumber"],o=["fileName","functionName","source"],c=["args"],l=["evalOrigin"],u=s.concat(a,o,c,l);function d(m){if(m)for(var y=0;y<u.length;y++)m[u[y]]!==void 0&&this["set"+i(u[y])](m[u[y]])}d.prototype={getArgs:function(){return this.args},setArgs:function(m){if(Object.prototype.toString.call(m)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=m},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(m){if(m instanceof d)this.evalOrigin=m;else if(m instanceof Object)this.evalOrigin=new d(m);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var m=this.getFileName()||"",y=this.getLineNumber()||"",x=this.getColumnNumber()||"",v=this.getFunctionName()||"";return this.getIsEval()?m?"[eval] ("+m+":"+y+":"+x+")":"[eval]:"+y+":"+x:v?v+" ("+m+":"+y+":"+x+")":m+":"+y+":"+x}},d.fromString=function(y){var x=y.indexOf("("),v=y.lastIndexOf(")"),k=y.substring(0,x),O=y.substring(x+1,v).split(","),E=y.substring(v+1);if(E.indexOf("@")===0)var w=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(E,""),_=w[1],S=w[2],R=w[3];return new d({functionName:k,args:O||void 0,fileName:_,lineNumber:S||void 0,columnNumber:R||void 0})};for(var f=0;f<s.length;f++)d.prototype["get"+i(s[f])]=r(s[f]),d.prototype["set"+i(s[f])]=function(m){return function(y){this[m]=!!y}}(s[f]);for(var p=0;p<a.length;p++)d.prototype["get"+i(a[p])]=r(a[p]),d.prototype["set"+i(a[p])]=function(m){return function(y){if(!n(y))throw new TypeError(m+" must be a Number");this[m]=Number(y)}}(a[p]);for(var h=0;h<o.length;h++)d.prototype["get"+i(o[h])]=r(o[h]),d.prototype["set"+i(o[h])]=function(m){return function(y){this[m]=String(y)}}(o[h]);return d})}(zc)),zc.exports}(function(t,e){(function(n,i){t.exports=i(d_())})(bt,function(i){var r=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(c){if(typeof c.stacktrace<"u"||typeof c["opera#sourceloc"]<"u")return this.parseOpera(c);if(c.stack&&c.stack.match(s))return this.parseV8OrIE(c);if(c.stack)return this.parseFFOrSafari(c);throw new Error("Cannot parse given Error object")},extractLocation:function(c){if(c.indexOf(":")===-1)return[c];var l=/(.+?)(?::(\d+))?(?::(\d+))?$/,u=l.exec(c.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},parseV8OrIE:function(c){var l=c.stack.split(`
`).filter(function(u){return!!u.match(s)},this);return l.map(function(u){u.indexOf("(eval ")>-1&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var d=u.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),f=d.match(/ (\(.+\)$)/);d=f?d.replace(f[0],""):d;var p=this.extractLocation(f?f[1]:d),h=f&&d||void 0,m=["eval","<anonymous>"].indexOf(p[0])>-1?void 0:p[0];return new i({functionName:h,fileName:m,lineNumber:p[1],columnNumber:p[2],source:u})},this)},parseFFOrSafari:function(c){var l=c.stack.split(`
`).filter(function(u){return!u.match(a)},this);return l.map(function(u){if(u.indexOf(" > eval")>-1&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return new i({functionName:u});var d=/((.*".+"[^@]*)?[^@]*)(?:@)/,f=u.match(d),p=f&&f[1]?f[1]:void 0,h=this.extractLocation(u.replace(d,""));return new i({functionName:p,fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:u})},this)},parseOpera:function(c){return!c.stacktrace||c.message.indexOf(`
`)>-1&&c.message.split(`
`).length>c.stacktrace.split(`
`).length?this.parseOpera9(c):c.stack?this.parseOpera11(c):this.parseOpera10(c)},parseOpera9:function(c){for(var l=/Line (\d+).*script (?:in )?(\S+)/i,u=c.message.split(`
`),d=[],f=2,p=u.length;f<p;f+=2){var h=l.exec(u[f]);h&&d.push(new i({fileName:h[2],lineNumber:h[1],source:u[f]}))}return d},parseOpera10:function(c){for(var l=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=c.stacktrace.split(`
`),d=[],f=0,p=u.length;f<p;f+=2){var h=l.exec(u[f]);h&&d.push(new i({functionName:h[3]||void 0,fileName:h[2],lineNumber:h[1],source:u[f]}))}return d},parseOpera11:function(c){var l=c.stack.split(`
`).filter(function(u){return!!u.match(r)&&!u.match(/^Error created at/)},this);return l.map(function(u){var d=u.split("@"),f=this.extractLocation(d.pop()),p=d.shift()||"",h=p.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,m;p.match(/\(([^)]*)\)/)&&(m=p.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var y=m===void 0||m==="[arguments not available]"?void 0:m.split(",");return new i({functionName:h,args:y,fileName:f[0],lineNumber:f[1],columnNumber:f[2],source:u})},this)}}})})(_d);var f_=_d.exports,h_=yr(f_),Ed={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(bt,function(){return n.importState=function(r){var s=new n;return s.importState(r),s},n;function n(){return function(r){var s=0,a=0,o=0,c=1;r.length==0&&(r=[+new Date]);var l=i();s=l(" "),a=l(" "),o=l(" ");for(var u=0;u<r.length;u++)s-=l(r[u]),s<0&&(s+=1),a-=l(r[u]),a<0&&(a+=1),o-=l(r[u]),o<0&&(o+=1);l=null;var d=function(){var f=2091639*s+c*23283064365386963e-26;return s=a,a=o,o=f-(c=f|0)};return d.next=d,d.uint32=function(){return d()*4294967296},d.fract53=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.version="Alea 0.9",d.args=r,d.exportState=function(){return[s,a,o,c]},d.importState=function(f){s=+f[0]||0,a=+f[1]||0,o=+f[2]||0,c=+f[3]||0},d}(Array.prototype.slice.call(arguments))}function i(){var r=4022871197,s=function(a){a=a.toString();for(var o=0;o<a.length;o++){r+=a.charCodeAt(o);var c=.02519603282416938*r;r=c>>>0,c-=r,c*=r,r=c>>>0,c-=r,r+=c*4294967296}return(r>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})})(Ed);var m_=Ed.exports,g_=yr(m_);function Ki(t,e,n){return Math.max(e,Math.min(n,t))}const v_=g_("089fad0j9awfem09wavefc09uwaef");function b_(){return v_()}function Sa(t,e){const n=Math.min(t,e),r=Math.max(t,e)-n+1;return n+Math.floor(b_()*r)}function Wc(t,e,n){typeof t!="number"&&(t=0,e=0,n=1),typeof e!="number"&&(e=t,t=0,n=1),typeof n!="number"&&(n=1);const i=[],r=Math.min(t,e),s=Math.max(t,e);for(let a=r;a<=s;a+=n)i.push(a);return i}function x_(t){return t[Sa(0,t.length-1)]}function ti(...t){return x_(t.flat())}function y_(t){return[...new Set(t)].filter(T)}function __(...t){const e=t.flat().filter(T);return e.reduce((n,i)=>n+i,0)/e.length}function kd(t,e){const n=t??xt.ISWALK,i=e??xt.ISWALK;switch(n){case xt.ISWALK:return i!==xt.ISWALK;case xt.ISSWIM:return i!==xt.ISSWIM;case xt.ISSOLID:return!0;case xt.ISBULLET:return i!==xt.ISWALK&&i!==xt.ISSWIM}}function Gc(t,e){var i,r;return[...((r=(i=t==null?void 0:t.named)==null?void 0:i[e])==null?void 0:r.values())??[]].map(s=>typeof s=="string"?t==null?void 0:t.objects[s]:t==null?void 0:t.terrain[s]).filter(T)}function w_(t,e){const n=tl(e),i=Kd(e),r=Hd(e);return t.filter(s=>!(T(n)&&Od(s)!==n||T(i)&&C_(s)!==i||T(r)&&N_(s)!==r)).filter(T)}function Kc(t,e){return T(t)?e.map(n=>{var i;if(typeof n=="string"){const r=t.objects[n];if(T(r))return r;const s=Gc(t,n.toLowerCase());if(s.length)return s}else if(On(n)&&n.x>=0&&n.x<t.width&&n.y>=0&&n.y<t.height){const r=n.x+n.y*t.width,s=(i=t.lookup)==null?void 0:i[r];return T(s)?t.objects[s]:t.terrain[r]}}).flat().filter(T):[]}function E_(t,e){let n=0,i;for(let r=0;r<e.length;++r){const s=e[r];if(s){const a=t.x-(s.x??0),o=t.y-(s.y??0),c=Math.sqrt(a*a+o*o);(i===void 0||c<n)&&(n=c,i=s)}}return i}function Sd(){return{}}function k_(t){if(T(t))return gd(t)}function Ad(){return{id:dn()}}function Aa(t){if(T(t))return{kind:t.kind,id:t.id,x:t.x,y:t.y,lx:t.lx,ly:t.ly,code:t.code,name:t.name,char:t.char,color:t.color,bg:t.bg,pushable:t.pushable,collision:t.collision,destructible:t.destructible,stats:k_(t.stats)}}function Hc(t,e,n){return T(t)?(t.stats=t.stats??Sd(),t.stats[e]??n):void 0}function Vc(t,e,n){T(t)&&(t.stats=t.stats??Sd(),t.stats[e]=n)}function qc(t,e){Object.entries(e).forEach(([n,i])=>Vc(t,n,i))}const Td=60,Rd=25,S_=new Array(Td*Rd);function A_(t=zy){const e={id:dn(),x:0,y:0,width:Td,height:Rd,terrain:S_.slice(0),objects:{}};return t(e)}function T_(t){if(T(t))return{id:t.id,x:t.x,y:t.y,width:t.width,height:t.height,terrain:t.terrain.map(Aa),objects:Object.fromEntries(Object.entries(t.objects).filter(([,e])=>e.kind!=="player").map(([e,n])=>[e,Aa(n)])),stats:t.stats}}function R_(t,e,n){T(t)&&(t.stats=t.stats??{},t.stats[e]=n)}function O_(t,e){return!T(t)||e.x<0||e.x>=t.width||e.y<0||e.y>=t.height?-1:e.x+e.y*t.width}function I_(t,e){const n=O_(t,e);if(n<0||!T(t==null?void 0:t.lookup))return;const i=Xc(t,t.lookup[n]??"");return T(i)?i:t.terrain[n]}function Od(t){var e;return((t==null?void 0:t.name)??((e=t==null?void 0:t.kinddata)==null?void 0:e.name)??"object").toLowerCase()}function C_(t){var e;return(t==null?void 0:t.color)??((e=t==null?void 0:t.kinddata)==null?void 0:e.color)??pt.BLACK}function N_(t){var e;return(t==null?void 0:t.bg)??((e=t==null?void 0:t.kinddata)==null?void 0:e.bg)??pt.BLACK}function Ta(t,e){if(!T(t)||!Xt(e))return;const n=Bd(e);T(n)&&(t.color=n);const i=$d(e);T(i)&&(t.bg=i)}function L_(t,e){if(!T(t)||!T(e)||!T(e.x)||!T(e.y)||e.x<0||e.x>=t.width||e.y<0||e.y>=t.height)return;const n={...e},i=e.x+e.y*t.width;return t.terrain[i]=n,e}function M_(t,e){if(!T(t)||!T(e))return;const n={...e,id:e.id??dn()};return t.objects[n.id]=n,n}function Id(t,e,n){return L_(t,{...e,kind:n})}function Yc(t,e,n,i){return M_(t,{...e,id:i??void 0,kind:n})}function Xc(t,e){if(t)return t.objects[e]}function kr(t,e,n){if(!T(t)||!T(e))return{x:0,y:0};const i={x:e.x??0,y:e.y??0},r={x:e.lx??i.x,y:e.ly??i.y},s={...i},a=wi(r,i),o=t.width-1,c=t.height-1;for(let l=0;l<n.length;++l){const u=D_(n[l]);switch(u){case Ae.IDLE:break;case Ae.NORTH:case Ae.SOUTH:case Ae.WEST:case Ae.EAST:Yt(i,u);break;case Ae.BY:{const[d,f]=n.slice(l+1);nt(d)&&nt(f)&&(i.x=Ki(i.x+d,0,o),i.y=Ki(i.y+f,0,c)),l+=2;break}case Ae.AT:{const[d,f]=n.slice(l+1);nt(d)&&nt(f)&&(i.x=Ki(d,0,o),i.y=Ki(f,0,c)),l+=2;break}case Ae.FLOW:Yt(i,a);break;case Ae.SEEK:{const d=Jc(t,e);On(d)&&Yt(i,wi(s,d));break}case Ae.RNDNS:Yt(i,ti(Ae.NORTH,Ae.SOUTH));break;case Ae.RNDNE:Yt(i,ti(Ae.NORTH,Ae.EAST));break;case Ae.RND:Yt(i,ti(Ae.NORTH,Ae.SOUTH,Ae.WEST,Ae.EAST));break;case Ae.CW:{const d=kr(t,e,n.slice(l+1));Yt(i,wi(s,d));break}case Ae.CCW:{const d=kr(t,e,n.slice(l+1));Yt(i,wi(s,d));break}case Ae.OPP:{const d=kr(t,e,n.slice(l+1));Yt(i,wi(s,d));break}case Ae.RNDP:{const d=kr(t,e,n.slice(l+1));switch(wi(s,d)){case Ae.NORTH:case Ae.SOUTH:i.x+=ti(-1,1);break;case Ae.WEST:case Ae.EAST:i.y+=ti(-1,1);break}break}}}return i}function Zc(t,e){return T(t==null?void 0:t.objects[e])?(delete t.objects[e],!0):!1}function Jc(t,e){var r;if(!T(t)||!T(e))return;const n=((r=e.stats)==null?void 0:r.player)??"",i=t.objects[n];if(T(i))return i;if(On(e))return E_(e,Gc(t,"player"))}function U_(t,e,n){return{book:t.book,board:t.board,object:t.object,terrain:t.terrain,charset:t.charset,palette:t.palette,words:e,get:n}}var Ae=(t=>(t[t.IDLE=0]="IDLE",t[t.NORTH=1]="NORTH",t[t.SOUTH=2]="SOUTH",t[t.WEST=3]="WEST",t[t.EAST=4]="EAST",t[t.BY=5]="BY",t[t.AT=6]="AT",t[t.FLOW=7]="FLOW",t[t.SEEK=8]="SEEK",t[t.RNDNS=9]="RNDNS",t[t.RNDNE=10]="RNDNE",t[t.RND=11]="RND",t[t.CW=12]="CW",t[t.CCW=13]="CCW",t[t.OPP=14]="OPP",t[t.RNDP=15]="RNDP",t))(Ae||{}),xt=(t=>(t[t.ISSOLID=0]="ISSOLID",t[t.ISWALK=1]="ISWALK",t[t.ISSWIM=2]="ISSWIM",t[t.ISBULLET=3]="ISBULLET",t))(xt||{}),Ra=(t=>(t[t.ISTERRAIN=0]="ISTERRAIN",t[t.ISOBJECT=1]="ISOBJECT",t))(Ra||{});function On(t){return T(t)&&T(t.x)&&T(t.y)}function Yt(t,e){switch(e){case 1:--t.y;break;case 2:++t.y;break;case 3:--t.x;break;case 4:++t.x;break}return t}function wi(t,e){const n=e.x-t.x,i=e.y-t.y;if(n<0)return 3;if(n>0)return 4;if(i<0)return 1;if(i>0)return 2}const Cd={isterrain:"ISTERRAIN",isobject:"ISOBJECT"};function Ei(t){return it(t)&&Nd(t[0])}function Nd(t){return T(Ra[t])&&Re(t)}function Ld(t){if(Re(t))return Cd[t.toLowerCase()]}function Md(t){if(Ei(t))return t;if(Nd(t))return[t];const e=Ld(t);if(T(e))return[e]}function Oa(t,e){const n=t.words[e],i=Md(n);if(Ei(i))return[i,e+1];const[r,s]=kt(t,e),a=Md(r);return Ei(a)?[a,s]:[void 0,e]}const Ud={issolid:"ISSOLID",iswalk:"ISWALK",isswim:"ISSWIM",isbullet:"ISBULLET",iswalkable:"ISWALKABLE",isswimmable:"ISSWIMABLE"};function Hi(t){return it(t)&&Qc(t[0])}function Qc(t){return T(xt[t])&&Re(t)}function P_(t){if(Re(t))return Ud[t.toLowerCase()]}function Pd(t,e){const n=t.words[e];if(Hi(n))return[n,e+1];if(Qc(n))return[[n],e+1];const[i,r]=kt(t,e);return Hi(i)?[i,r]:Qc(i)?[[i],r]:[void 0,e]}const el={black:"BLACK",dkblue:"DKBLUE",dkgreen:"DKGREEN",dkcyan:"DKCYAN",dkred:"DKRED",dkpurple:"DKPURPLE",dkyellow:"DKYELLOW",ltgray:"LTGRAY",dkgray:"DKGRAY",blue:"BLUE",green:"GREEN",cyan:"CYAN",red:"RED",purple:"PURPLE",yellow:"YELLOW",white:"WHITE",clear:"CLEAR",shadow:"SHADOW",borrow:"BORROW",brown:"DKYELLOW",dkwhite:"LTGRAY",ltgrey:"LTGRAY",gray:"LTGRAY",grey:"LTGRAY",dkgrey:"DKGRAY",ltblack:"DKGRAY",onblack:"ONBLACK",ondkblue:"ONDKBLUE",ondkgreen:"ONDKGREEN",ondkcyan:"ONDKCYAN",ondkred:"ONDKRED",ondkpurple:"ONDKPURPLE",ondkyellow:"ONDKYELLOW",onltgray:"ONLTGRAY",ondkgray:"ONDKGRAY",onblue:"ONBLUE",ongreen:"ONGREEN",oncyan:"ONCYAN",onred:"ONRED",onpurple:"ONPURPLE",onyellow:"ONYELLOW",onwhite:"ONWHITE",onbrown:"ONDKYELLOW",ondkwhite:"ONLTGRAY",onltgrey:"ONLTGRAY",ongray:"ONLTGRAY",ongrey:"ONLTGRAY",ondkgrey:"ONDKGRAY",onltblack:"ONDKGRAY"};function Xt(t){return it(t)&&jd(t[0])}function Dd(t){return Xt(t)&&t[0].startsWith("ON")}function jd(t){return T(pt[t])&&Re(t)}function Fd(t){if(Re(t))return el[t.toLowerCase()]}function Bd(t){return t.map(e=>pt[e]).find(e=>T(e)&&e<pt.ONBLACK)}function $d(t){return t.map(e=>pt[e]).find(e=>T(e)&&e>=pt.ONBLACK)}function zd(t){if(Xt(t))return t;if(jd(t))return[t];const e=Fd(t);if(T(e))return[e]}function Wd(t,e){const n=t.words[e],i=zd(n);if(Xt(i))return[i,e+1];const[r,s]=kt(t,e),a=zd(r);return Xt(a)?[a,s]:[void 0,e]}function Ia(t,e){const n=[];let i=e;const[r,s]=Wd(t,e);if(Xt(r)&&(n.push(...r),i=s),Xt(n)&&!Dd(n)){const[a,o]=Wd(t,s);Dd(a)&&(i=o)}return n.length?[n,i]:[void 0,e]}function Sr(t){return it(t)&&typeof t[0]=="string"}function Gd(t,e){const n=t.words[e];if(Sr(n))return[n,e+1];const[i,r]=Ia(t,e),[s,a]=kt(t,r,!1);return Re(s)?[[s,i],a]:[void 0,e]}function tl(t){if(!Sr(t))return;const[e]=t;return e}function Kd(t){if(!Sr(t))return;const[,e]=t,n=T(e)?Bd(e):void 0;return T(n)?n:void 0}function Hd(t){if(!Sr(t))return;const[,e]=t,n=T(e)?$d(e):void 0;return T(n)?n:void 0}const Vd={idle:"IDLE",up:"NORTH",down:"SOUTH",left:"WEST",right:"EAST",by:"BY",at:"AT",flow:"FLOW",seek:"SEEK",rndns:"RNDNS",rndne:"RNDNE",rnd:"RND",cw:"CW",ccw:"CCW",opp:"OPP",rndp:"RNDP",i:"IDLE",u:"NORTH",north:"NORTH",n:"NORTH",d:"SOUTH",south:"SOUTH",s:"SOUTH",l:"WEST",west:"WEST",w:"WEST",r:"EAST",east:"EAST",e:"EAST",edit:"EDIT"};function ni(t){return it(t)&&qd(t[0])}function qd(t){return T(Ae[t])&&Re(t)}function D_(t){const e=Ae[t];return T(e)?e:0}function Yd(t){if(Re(t))return Vd[t.toLowerCase()]}function Xd(t){if(ni(t))return t;if(qd(t))return[t];const e=Yd(t);if(T(e))return[e]}function Zd(t,e){const n=t.words[e],i=Xd(n);if(ni(i))return[i,e+1];const[r,s]=kt(t,e),a=Xd(r);return ni(a)?[a,s]:[void 0,e]}function nl(t,e){const n=[];let[i,r]=Zd(t,e);for(;ni(i);){if(n.push(...i),i[0]==="AT"||i[0]==="BY"){const[o,c,l]=Z(t,r,[5,5]);n.push(o,c),r=l}const[s,a]=Zd(t,r);i=s,r=a}return n.length?[n,r]:[void 0,e]}function kt(t,e,n=!0){const i=t.words[e];if(Ld(i)){const[r,s]=Oa(t,e);if(T(r))return[r,s]}if(P_(i)){const[r,s]=Pd(t,e);if(T(r))return[r,s]}if(Fd(i)){const[r,s]=Ia(t,e);if(T(r))return[r,s]}if(Re(i)&&i.toLowerCase()==="rnd"){const[r,s]=kt(t,e+1),[a,o]=kt(t,s);return nt(r)&&nt(a)?[Sa(r,a),o]:nt(r)?[Sa(0,r),s]:[Sa(0,1),e+1]}if(Yd(i)){const[r,s]=nl(t,e);if(T(r))return[r,s]}if(!T(i))return[void 0,e];if(On(i)||nt(i)||it(i))return[i,e+1];if(Re(i)){const r=i.toLowerCase();if(n){const s=t.get(i);if(T(s))return[s,e+1]}switch(r){case"aligned":case"alligned":break;case"contact":break;case"blocked":break;case"any":break;case"abs":{const[s,a]=Z(t,e+1,[5]);return[Math.abs(s),a]}case"ceil":{const[s,a]=Z(t,e+1,[5]);return[Math.ceil(s),a]}case"floor":{const[s,a]=Z(t,e+1,[5]);return[Math.floor(s),a]}case"round":{const[s,a]=Z(t,e+1,[5]);return[Math.round(s),a]}case"min":{const s=[];for(let a=e+1;a<t.words.length;){const[o,c]=kt(t,a);if(it(o)&&!On(o)&&!ni(o)&&!Ei(o)&&!Hi(o)&&!Xt(o))return[ti(o),c];a=c,s.push(o)}return[Math.min(...s),t.words.length]}case"max":{const s=[];for(let a=e+1;a<t.words.length;){const[o,c]=kt(t,a);if(it(o)&&!On(o)&&!ni(o)&&!Ei(o)&&!Hi(o)&&!Xt(o))return[ti(o),c];a=c,s.push(o)}return[Math.max(...s),t.words.length]}case"clamp":{const[s,a,o,c]=Z(t,e+1,[5,5,5]);return[Ki(s,a,o),c]}case"pick":{const s=[];for(let a=e+1;a<t.words.length;){const[o,c]=kt(t,a);if(it(o)&&!On(o)&&!ni(o)&&!Ei(o)&&!Hi(o)&&!Xt(o))return[ti(o),c];a=c,s.push(o)}return[ti(s),t.words.length]}case"range":{const[s,a,o,c]=Z(t,e+1,[5,13,13]);return[Wc(s,a,o),c]}}}return[i,e+1]}var X=(t=>(t[t.CATEGORY=0]="CATEGORY",t[t.COLLISION=1]="COLLISION",t[t.COLOR=2]="COLOR",t[t.KIND=3]="KIND",t[t.DIR=4]="DIR",t[t.NUMBER=5]="NUMBER",t[t.STRING=6]="STRING",t[t.NUMBER_OR_STRING=7]="NUMBER_OR_STRING",t[t.MAYBE_CATEGORY=8]="MAYBE_CATEGORY",t[t.MAYBE_COLLISION=9]="MAYBE_COLLISION",t[t.MAYBE_COLOR=10]="MAYBE_COLOR",t[t.MAYBE_KIND=11]="MAYBE_KIND",t[t.MAYBE_DIR=12]="MAYBE_DIR",t[t.MAYBE_NUMBER=13]="MAYBE_NUMBER",t[t.MAYBE_STRING=14]="MAYBE_STRING",t[t.MAYBE_NUMBER_OR_STRING=15]="MAYBE_NUMBER_OR_STRING",t[t.ANY=16]="ANY",t))(X||{});function yt(t,e){throw new Error(`Invalid arg, expected: ${t} but got ${JSON.stringify(e)}`)}function Z(t,e,n){const i=[];let r=e;for(let s=0;s<n.length;++s)switch(n[s]){case 0:{const[a,o]=Oa(t,r);Ei(a)||yt("terrain or object",a),r=o,i.push(a);break}case 1:{const[a,o]=Pd(t,r);Hi(a)||yt("solid, walk, swim, bullet, walkable or swimmable",a),r=o,i.push(a);break}case 2:{const[a,o]=Ia(t,r);Xt(a)||yt("color",a),r=o,i.push(a);break}case 3:{const[a,o]=Gd(t,r);Sr(a)?(r=o,i.push(a)):yt("kind",a);break}case 4:{const[a,o]=nl(t,r);if(ni(a)){const c=t.board?kr(t.board,t.object,a):{x:0,y:0};r=o,i.push(c)}else yt("direction",a);break}case 5:{const[a,o]=kt(t,r);nt(a)||yt("number",a),r=o,i.push(a);break}case 6:{const a=t.words[r];Re(a)||yt("string",a),++r,i.push(a);break}case 7:{const[a,o]=kt(t,r,!1);!nt(a)&&!Re(a)&&yt("number or string",a),r=o,i.push(a);break}case 8:{const[a,o]=Oa(t,r);a!==void 0&&!Ei(a)&&yt("optional terrain or object",a),r=o,i.push(a);break}case 9:{const[a,o]=Oa(t,r);a!==void 0&&!Hi(a)&&yt("optional solid, walk, swim, bullet, walkable or swimmable",a),r=o,i.push(a);break}case 10:{const[a,o]=Ia(t,r);a!==void 0&&!Xt(a)&&yt("optional color",a),r=o,i.push(a);break}case 11:{const[a,o]=Gd(t,r);a!==void 0&&!Sr(a)&&yt("optional kind",a),r=o,i.push(a);break}case 12:{const[a,o]=nl(t,r);if(ni(a)){const c=t.board?kr(t.board,t.object,a):{x:0,y:0};r=o,i.push(c)}else a===void 0?(r=o,i.push(void 0)):yt("optional direction",a);break}case 13:{const[a,o]=kt(t,r);a!==void 0&&!nt(a)&&yt("optional number",a),r=o,i.push(a);break}case 14:{const a=t.words[r];a!==void 0&&!Re(a)&&yt("optional string",a),++r,i.push(a);break}case 15:{const[a,o]=kt(t,r,!1);a!==void 0&&!nt(a)&&!Re(a)&&yt("optional number or string",a),r=o,i.push(a);break}case 16:{const[a,o]=kt(t,r);r=o,i.push(a);break}}return[...i,r]}var Jd={},Qd={},ef={};const tf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");ef.encode=function(t){if(0<=t&&t<tf.length)return tf[t];throw new TypeError("Must be between 0 and 63: "+t)};const j_=ef,nf=5,rf=1<<nf,F_=rf-1,B_=rf;function $_(t){return t<0?(-t<<1)+1:(t<<1)+0}Qd.encode=function(e){let n="",i,r=$_(e);do i=r&F_,r>>>=nf,r>0&&(i|=B_),n+=j_.encode(i);while(r>0);return n};var ms={};(function(t){function e(w,_,S){if(_ in w)return w[_];if(arguments.length===3)return S;throw new Error('"'+_+'" is a required argument.')}t.getArg=e;const n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function r(w){const _=w.match(n);return _?{scheme:_[1],auth:_[2],host:_[3],port:_[4],path:_[5]}:null}t.urlParse=r;function s(w){let _="";return w.scheme&&(_+=w.scheme+":"),_+="//",w.auth&&(_+=w.auth+"@"),w.host&&(_+=w.host),w.port&&(_+=":"+w.port),w.path&&(_+=w.path),_}t.urlGenerate=s;const a=32;function o(w){const _=[];return function(S){for(let j=0;j<_.length;j++)if(_[j].input===S){const V=_[0];return _[0]=_[j],_[j]=V,_[0].result}const R=w(S);return _.unshift({input:S,result:R}),_.length>a&&_.pop(),R}}const c=o(function(_){let S=_;const R=r(_);if(R){if(!R.path)return _;S=R.path}const j=t.isAbsolute(S),V=[];let C=0,P=0;for(;;)if(C=P,P=S.indexOf("/",C),P===-1){V.push(S.slice(C));break}else for(V.push(S.slice(C,P));P<S.length&&S[P]==="/";)P++;let b=0;for(P=V.length-1;P>=0;P--){const D=V[P];D==="."?V.splice(P,1):D===".."?b++:b>0&&(D===""?(V.splice(P+1,b),b=0):(V.splice(P,2),b--))}return S=V.join("/"),S===""&&(S=j?"/":"."),R?(R.path=S,s(R)):S});t.normalize=c;function l(w,_){w===""&&(w="."),_===""&&(_=".");const S=r(_),R=r(w);if(R&&(w=R.path||"/"),S&&!S.scheme)return R&&(S.scheme=R.scheme),s(S);if(S||_.match(i))return _;if(R&&!R.host&&!R.path)return R.host=_,s(R);const j=_.charAt(0)==="/"?_:c(w.replace(/\/+$/,"")+"/"+_);return R?(R.path=j,s(R)):j}t.join=l,t.isAbsolute=function(w){return w.charAt(0)==="/"||n.test(w)};function u(w,_){w===""&&(w="."),w=w.replace(/\/$/,"");let S=0;for(;_.indexOf(w+"/")!==0;){const R=w.lastIndexOf("/");if(R<0||(w=w.slice(0,R),w.match(/^([^\/]+:\/)?\/*$/)))return _;++S}return Array(S+1).join("../")+_.substr(w.length+1)}t.relative=u;const d=function(){return!("__proto__"in Object.create(null))}();function f(w){return w}function p(w){return m(w)?"$"+w:w}t.toSetString=d?f:p;function h(w){return m(w)?w.slice(1):w}t.fromSetString=d?f:h;function m(w){if(!w)return!1;const _=w.length;if(_<9||w.charCodeAt(_-1)!==95||w.charCodeAt(_-2)!==95||w.charCodeAt(_-3)!==111||w.charCodeAt(_-4)!==116||w.charCodeAt(_-5)!==111||w.charCodeAt(_-6)!==114||w.charCodeAt(_-7)!==112||w.charCodeAt(_-8)!==95||w.charCodeAt(_-9)!==95)return!1;for(let S=_-10;S>=0;S--)if(w.charCodeAt(S)!==36)return!1;return!0}function y(w,_,S){let R=v(w.source,_.source);return R!==0||(R=w.originalLine-_.originalLine,R!==0)||(R=w.originalColumn-_.originalColumn,R!==0||S)||(R=w.generatedColumn-_.generatedColumn,R!==0)||(R=w.generatedLine-_.generatedLine,R!==0)?R:v(w.name,_.name)}t.compareByOriginalPositions=y;function x(w,_,S){let R=w.generatedLine-_.generatedLine;return R!==0||(R=w.generatedColumn-_.generatedColumn,R!==0||S)||(R=v(w.source,_.source),R!==0)||(R=w.originalLine-_.originalLine,R!==0)||(R=w.originalColumn-_.originalColumn,R!==0)?R:v(w.name,_.name)}t.compareByGeneratedPositionsDeflated=x;function v(w,_){return w===_?0:w===null?1:_===null?-1:w>_?1:-1}function k(w,_){let S=w.generatedLine-_.generatedLine;return S!==0||(S=w.generatedColumn-_.generatedColumn,S!==0)||(S=v(w.source,_.source),S!==0)||(S=w.originalLine-_.originalLine,S!==0)||(S=w.originalColumn-_.originalColumn,S!==0)?S:v(w.name,_.name)}t.compareByGeneratedPositionsInflated=k;function O(w){return JSON.parse(w.replace(/^\)]}'[^\n]*\n/,""))}t.parseSourceMapInput=O;function E(w,_,S){if(_=_||"",w&&(w[w.length-1]!=="/"&&_[0]!=="/"&&(w+="/"),_=w+_),S){const R=r(S);if(!R)throw new Error("sourceMapURL could not be parsed");if(R.path){const j=R.path.lastIndexOf("/");j>=0&&(R.path=R.path.substring(0,j+1))}_=l(s(R),_)}return c(_)}t.computeSourceURL=E})(ms);var il={};let z_=class $x{constructor(){this._array=[],this._set=new Map}static fromArray(e,n){const i=new $x;for(let r=0,s=e.length;r<s;r++)i.add(e[r],n);return i}size(){return this._set.size}add(e,n){const i=this.has(e),r=this._array.length;(!i||n)&&this._array.push(e),i||this._set.set(e,r)}has(e){return this._set.has(e)}indexOf(e){const n=this._set.get(e);if(n>=0)return n;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}};il.ArraySet=z_;var sf={};const af=ms;function W_(t,e){const n=t.generatedLine,i=e.generatedLine,r=t.generatedColumn,s=e.generatedColumn;return i>n||i==n&&s>=r||af.compareByGeneratedPositionsInflated(t,e)<=0}let G_=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,n){this._array.forEach(e,n)}add(e){W_(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(af.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};sf.MappingList=G_;const gs=Qd,et=ms,Ca=il.ArraySet,K_=sf.MappingList;let of=class zx{constructor(e){e||(e={}),this._file=et.getArg(e,"file",null),this._sourceRoot=et.getArg(e,"sourceRoot",null),this._skipValidation=et.getArg(e,"skipValidation",!1),this._sources=new Ca,this._names=new Ca,this._mappings=new K_,this._sourcesContents=null}static fromSourceMap(e){const n=e.sourceRoot,i=new zx({file:e.file,sourceRoot:n});return e.eachMapping(function(r){const s={generated:{line:r.generatedLine,column:r.generatedColumn}};r.source!=null&&(s.source=r.source,n!=null&&(s.source=et.relative(n,s.source)),s.original={line:r.originalLine,column:r.originalColumn},r.name!=null&&(s.name=r.name)),i.addMapping(s)}),e.sources.forEach(function(r){let s=r;n!==null&&(s=et.relative(n,r)),i._sources.has(s)||i._sources.add(s);const a=e.sourceContentFor(r);a!=null&&i.setSourceContent(r,a)}),i}addMapping(e){const n=et.getArg(e,"generated"),i=et.getArg(e,"original",null);let r=et.getArg(e,"source",null),s=et.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,i,r,s),r!=null&&(r=String(r),this._sources.has(r)||this._sources.add(r)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:r,name:s})}setSourceContent(e,n){let i=e;this._sourceRoot!=null&&(i=et.relative(this._sourceRoot,i)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[et.toSetString(i)]=n):this._sourcesContents&&(delete this._sourcesContents[et.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(e,n,i){let r=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);r=e.file}const s=this._sourceRoot;s!=null&&(r=et.relative(s,r));const a=this._mappings.toArray().length>0?new Ca:this._sources,o=new Ca;this._mappings.unsortedForEach(function(c){if(c.source===r&&c.originalLine!=null){const d=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});d.source!=null&&(c.source=d.source,i!=null&&(c.source=et.join(i,c.source)),s!=null&&(c.source=et.relative(s,c.source)),c.originalLine=d.line,c.originalColumn=d.column,d.name!=null&&(c.name=d.name))}const l=c.source;l!=null&&!a.has(l)&&a.add(l);const u=c.name;u!=null&&!o.has(u)&&o.add(u)},this),this._sources=a,this._names=o,e.sources.forEach(function(c){const l=e.sourceContentFor(c);l!=null&&(i!=null&&(c=et.join(i,c)),s!=null&&(c=et.relative(s,c)),this.setSourceContent(c,l))},this)}_validateMapping(e,n,i,r){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!i&&!r)){if(!(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&i))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:n,name:r}))}}_serializeMappings(){let e=0,n=1,i=0,r=0,s=0,a=0,o="",c,l,u,d;const f=this._mappings.toArray();for(let p=0,h=f.length;p<h;p++){if(l=f[p],c="",l.generatedLine!==n)for(e=0;l.generatedLine!==n;)c+=";",n++;else if(p>0){if(!et.compareByGeneratedPositionsInflated(l,f[p-1]))continue;c+=","}c+=gs.encode(l.generatedColumn-e),e=l.generatedColumn,l.source!=null&&(d=this._sources.indexOf(l.source),c+=gs.encode(d-a),a=d,c+=gs.encode(l.originalLine-1-r),r=l.originalLine-1,c+=gs.encode(l.originalColumn-i),i=l.originalColumn,l.name!=null&&(u=this._names.indexOf(l.name),c+=gs.encode(u-s),s=u)),o+=c}return o}_generateSourcesContent(e,n){return e.map(function(i){if(!this._sourcesContents)return null;n!=null&&(i=et.relative(n,i));const r=et.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)}toJSON(){const e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}};of.prototype._version=3,Jd.SourceMapGenerator=of;var cf={};(function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function e(n,i,r,s,a,o){const c=Math.floor((i-n)/2)+n,l=a(r,s[c],!0);return l===0?c:l>0?i-c>1?e(c,i,r,s,a,o):o==t.LEAST_UPPER_BOUND?i<s.length?i:-1:c:c-n>1?e(n,c,r,s,a,o):o==t.LEAST_UPPER_BOUND?c:n<0?-1:n}t.search=function(i,r,s,a){if(r.length===0)return-1;let o=e(-1,r.length,i,r,s,a||t.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&s(r[o],r[o-1],!0)===0;)--o;return o}})(cf);var vs={exports:{}},H_={},V_=Object.freeze({__proto__:null,default:H_}),rl=Wx(V_);if((function(){return typeof window<"u"&&this===window}).call()){let t=null;vs.exports=function(){if(typeof t=="string")return fetch(t).then(n=>n.arrayBuffer());if(t instanceof ArrayBuffer)return Promise.resolve(t);throw new Error("You must provide the string URL or ArrayBuffer contents of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer")},vs.exports.initialize=e=>t=e}else{const t=rl,e=rl;vs.exports=function(){return new Promise((i,r)=>{const s=e.join(__dirname,"mappings.wasm");t.readFile(s,null,(a,o)=>{if(a){r(a);return}i(o.buffer)})})},vs.exports.initialize=n=>{console.debug("SourceMapConsumer.initialize is a no-op when running in node.js")}}var lf=vs.exports;const q_=lf;function Y_(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}let bs=null;var X_=function(){if(bs)return bs;const e=[];return bs=q_().then(n=>WebAssembly.instantiate(n,{env:{mapping_callback(i,r,s,a,o,c,l,u,d,f){const p=new Y_;p.generatedLine=i+1,p.generatedColumn=r,s&&(p.lastGeneratedColumn=a-1),o&&(p.source=c,p.originalLine=l+1,p.originalColumn=u,d&&(p.name=f)),e[e.length-1](p)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(n=>({exports:n.instance.exports,withMappingCallback:(i,r)=>{e.push(i);try{r()}finally{e.pop()}}})).then(null,n=>{throw bs=null,n}),bs};const ie=ms,sl=cf,Na=il.ArraySet,Z_=lf,J_=X_,al=Symbol("smcInternal");class Ze{constructor(e,n){return e==al?Promise.resolve(this):ew(e,n)}static initialize(e){Z_.initialize(e["lib/mappings.wasm"])}static fromSourceMap(e,n){return tw(e,n)}static async with(e,n,i){const r=await new Ze(e,n);try{return await i(r)}finally{r.destroy()}}_parseMappings(e,n){throw new Error("Subclasses must implement _parseMappings")}eachMapping(e,n,i){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(e){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}}Ze.prototype._version=3,Ze.GENERATED_ORDER=1,Ze.ORIGINAL_ORDER=2,Ze.GREATEST_LOWER_BOUND=1,Ze.LEAST_UPPER_BOUND=2;class xs extends Ze{constructor(e,n){return super(al).then(i=>{let r=e;typeof e=="string"&&(r=ie.parseSourceMapInput(e));const s=ie.getArg(r,"version");let a=ie.getArg(r,"sources");const o=ie.getArg(r,"names",[]);let c=ie.getArg(r,"sourceRoot",null);const l=ie.getArg(r,"sourcesContent",null),u=ie.getArg(r,"mappings"),d=ie.getArg(r,"file",null);if(s!=i._version)throw new Error("Unsupported version: "+s);return c&&(c=ie.normalize(c)),a=a.map(String).map(ie.normalize).map(function(f){return c&&ie.isAbsolute(c)&&ie.isAbsolute(f)?ie.relative(c,f):f}),i._names=Na.fromArray(o.map(String),!0),i._sources=Na.fromArray(a,!0),i._absoluteSources=i._sources.toArray().map(function(f){return ie.computeSourceURL(c,f,n)}),i.sourceRoot=c,i.sourcesContent=l,i._mappings=u,i._sourceMapURL=n,i.file=d,i._computedColumnSpans=!1,i._mappingsPtr=0,i._wasm=null,J_().then(f=>(i._wasm=f,i))})}_findSourceIndex(e){let n=e;if(this.sourceRoot!=null&&(n=ie.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(let i=0;i<this._absoluteSources.length;++i)if(this._absoluteSources[i]==e)return i;return-1}static fromSourceMap(e,n){return new xs(e.toString())}get sources(){return this._absoluteSources.slice()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(this._mappings,this.sourceRoot),this._mappingsPtr}_parseMappings(e,n){const i=e.length,r=this._wasm.exports.allocate_mappings(i),s=new Uint8Array(this._wasm.exports.memory.buffer,r,i);for(let o=0;o<i;o++)s[o]=e.charCodeAt(o);const a=this._wasm.exports.parse_mappings(r);if(!a){const o=this._wasm.exports.get_last_error();let c=`Error parsing mappings (code ${o}): `;switch(o){case 1:c+="the mappings contained a negative line, column, source index, or name index";break;case 2:c+="the mappings contained a number larger than 2**32";break;case 3:c+="reached EOF while in the middle of parsing a VLQ";break;case 4:c+="invalid base 64 character while parsing a VLQ";break;default:c+="unknown error code";break}throw new Error(c)}this._mappingsPtr=a}eachMapping(e,n,i){const r=n||null,s=i||Ze.GENERATED_ORDER,a=this.sourceRoot;this._wasm.withMappingCallback(o=>{o.source!==null&&(o.source=this._sources.at(o.source),o.source=ie.computeSourceURL(a,o.source,this._sourceMapURL),o.name!==null&&(o.name=this._names.at(o.name))),e.call(r,o)},()=>{switch(s){case Ze.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case Ze.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(e){let n=ie.getArg(e,"source");const i=ie.getArg(e,"line"),r=e.column||0;if(n=this._findSourceIndex(n),n<0)return[];if(i<1)throw new Error("Line numbers must be >= 1");if(r<0)throw new Error("Column numbers must be >= 0");const s=[];return this._wasm.withMappingCallback(a=>{let o=a.lastGeneratedColumn;this._computedColumnSpans&&o===null&&(o=1/0),s.push({line:a.generatedLine,column:a.generatedColumn,lastColumn:o})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),n,i-1,"column"in e,r)}),s}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(e){const n={generatedLine:ie.getArg(e,"line"),generatedColumn:ie.getArg(e,"column")};if(n.generatedLine<1)throw new Error("Line numbers must be >= 1");if(n.generatedColumn<0)throw new Error("Column numbers must be >= 0");let i=ie.getArg(e,"bias",Ze.GREATEST_LOWER_BOUND);i==null&&(i=Ze.GREATEST_LOWER_BOUND);let r;if(this._wasm.withMappingCallback(s=>r=s,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),n.generatedLine-1,n.generatedColumn,i)}),r&&r.generatedLine===n.generatedLine){let s=ie.getArg(r,"source",null);s!==null&&(s=this._sources.at(s),s=ie.computeSourceURL(this.sourceRoot,s,this._sourceMapURL));let a=ie.getArg(r,"name",null);return a!==null&&(a=this._names.at(a)),{source:s,line:ie.getArg(r,"originalLine",null),column:ie.getArg(r,"originalColumn",null),name:a}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1}sourceContentFor(e,n){if(!this.sourcesContent)return null;const i=this._findSourceIndex(e);if(i>=0)return this.sourcesContent[i];let r=e;this.sourceRoot!=null&&(r=ie.relative(this.sourceRoot,r));let s;if(this.sourceRoot!=null&&(s=ie.urlParse(this.sourceRoot))){const a=r.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!s.path||s.path=="/")&&this._sources.has("/"+r))return this.sourcesContent[this._sources.indexOf("/"+r)]}if(n)return null;throw new Error('"'+r+'" is not in the SourceMap.')}generatedPositionFor(e){let n=ie.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};const i={source:n,originalLine:ie.getArg(e,"line"),originalColumn:ie.getArg(e,"column")};if(i.originalLine<1)throw new Error("Line numbers must be >= 1");if(i.originalColumn<0)throw new Error("Column numbers must be >= 0");let r=ie.getArg(e,"bias",Ze.GREATEST_LOWER_BOUND);r==null&&(r=Ze.GREATEST_LOWER_BOUND);let s;if(this._wasm.withMappingCallback(a=>s=a,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),i.source,i.originalLine-1,i.originalColumn,r)}),s&&s.source===i.source){let a=s.lastGeneratedColumn;return this._computedColumnSpans&&a===null&&(a=1/0),{line:ie.getArg(s,"generatedLine",null),column:ie.getArg(s,"generatedColumn",null),lastColumn:a}}return{line:null,column:null,lastColumn:null}}}xs.prototype.consumer=Ze;class Q_ extends Ze{constructor(e,n){return super(al).then(i=>{let r=e;typeof e=="string"&&(r=ie.parseSourceMapInput(e));const s=ie.getArg(r,"version"),a=ie.getArg(r,"sections");if(s!=i._version)throw new Error("Unsupported version: "+s);i._sources=new Na,i._names=new Na,i.__generatedMappings=null,i.__originalMappings=null,i.__generatedMappingsUnsorted=null,i.__originalMappingsUnsorted=null;let o={line:-1,column:0};return Promise.all(a.map(c=>{if(c.url)throw new Error("Support for url field in sections not implemented.");const l=ie.getArg(c,"offset"),u=ie.getArg(l,"line"),d=ie.getArg(l,"column");if(u<o.line||u===o.line&&d<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,new Ze(ie.getArg(c,"map"),n).then(p=>({generatedOffset:{generatedLine:u+1,generatedColumn:d+1},consumer:p}))})).then(c=>(i._sections=c,i))})}get _generatedMappings(){return this.__generatedMappings||this._sortGeneratedMappings(),this.__generatedMappings}get _originalMappings(){return this.__originalMappings||this._sortOriginalMappings(),this.__originalMappings}get _generatedMappingsUnsorted(){return this.__generatedMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappingsUnsorted}get _originalMappingsUnsorted(){return this.__originalMappingsUnsorted||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappingsUnsorted}_sortGeneratedMappings(){const e=this._generatedMappingsUnsorted;e.sort(ie.compareByGeneratedPositionsDeflated),this.__generatedMappings=e}_sortOriginalMappings(){const e=this._originalMappingsUnsorted;e.sort(ie.compareByOriginalPositions),this.__originalMappings=e}get sources(){const e=[];for(let n=0;n<this._sections.length;n++)for(let i=0;i<this._sections[n].consumer.sources.length;i++)e.push(this._sections[n].consumer.sources[i]);return e}originalPositionFor(e){const n={generatedLine:ie.getArg(e,"line"),generatedColumn:ie.getArg(e,"column")},i=sl.search(n,this._sections,function(s,a){const o=s.generatedLine-a.generatedOffset.generatedLine;return o||s.generatedColumn-a.generatedOffset.generatedColumn}),r=this._sections[i];return r?r.consumer.originalPositionFor({line:n.generatedLine-(r.generatedOffset.generatedLine-1),column:n.generatedColumn-(r.generatedOffset.generatedLine===n.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})}sourceContentFor(e,n){for(let i=0;i<this._sections.length;i++){const s=this._sections[i].consumer.sourceContentFor(e,!0);if(s)return s}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')}generatedPositionFor(e){for(let n=0;n<this._sections.length;n++){const i=this._sections[n];if(i.consumer._findSourceIndex(ie.getArg(e,"source"))===-1)continue;const r=i.consumer.generatedPositionFor(e);if(r)return{line:r.line+(i.generatedOffset.generatedLine-1),column:r.column+(i.generatedOffset.generatedLine===r.line?i.generatedOffset.generatedColumn-1:0)}}return{line:null,column:null}}_parseMappings(e,n){const i=this.__generatedMappingsUnsorted=[],r=this.__originalMappingsUnsorted=[];for(let s=0;s<this._sections.length;s++){const a=this._sections[s],o=[];a.consumer.eachMapping(c=>o.push(c));for(let c=0;c<o.length;c++){const l=o[c];let u=ie.computeSourceURL(a.consumer.sourceRoot,null,this._sourceMapURL);this._sources.add(u),u=this._sources.indexOf(u);let d=null;l.name&&(this._names.add(l.name),d=this._names.indexOf(l.name));const f={source:u,generatedLine:l.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(a.generatedOffset.generatedLine===l.generatedLine?a.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:d};i.push(f),typeof f.originalLine=="number"&&r.push(f)}}}eachMapping(e,n,i){const r=n||null,s=i||Ze.GENERATED_ORDER;let a;switch(s){case Ze.GENERATED_ORDER:a=this._generatedMappings;break;case Ze.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}const o=this.sourceRoot;a.map(function(c){let l=null;return c.source!==null&&(l=this._sources.at(c.source),l=ie.computeSourceURL(o,l,this._sourceMapURL)),{source:l,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,r)}_findMapping(e,n,i,r,s,a){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return sl.search(e,n,s,a)}allGeneratedPositionsFor(e){const n=ie.getArg(e,"line"),i={source:ie.getArg(e,"source"),originalLine:n,originalColumn:ie.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];if(i.originalLine<1)throw new Error("Line numbers must be >= 1");if(i.originalColumn<0)throw new Error("Column numbers must be >= 0");const r=[];let s=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",ie.compareByOriginalPositions,sl.LEAST_UPPER_BOUND);if(s>=0){let a=this._originalMappings[s];if(e.column===void 0){const o=a.originalLine;for(;a&&a.originalLine===o;){let c=a.lastGeneratedColumn;this._computedColumnSpans&&c===null&&(c=1/0),r.push({line:ie.getArg(a,"generatedLine",null),column:ie.getArg(a,"generatedColumn",null),lastColumn:c}),a=this._originalMappings[++s]}}else{const o=a.originalColumn;for(;a&&a.originalLine===n&&a.originalColumn==o;){let c=a.lastGeneratedColumn;this._computedColumnSpans&&c===null&&(c=1/0),r.push({line:ie.getArg(a,"generatedLine",null),column:ie.getArg(a,"generatedColumn",null),lastColumn:c}),a=this._originalMappings[++s]}}}return r}destroy(){for(let e=0;e<this._sections.length;e++)this._sections[e].consumer.destroy()}}function ew(t,e){let n=t;typeof t=="string"&&(n=ie.parseSourceMapInput(t));const i=n.sections!=null?new Q_(n,e):new xs(n,e);return Promise.resolve(i)}function tw(t,e){return xs.fromSourceMap(t,e)}var uf={};const nw=Jd.SourceMapGenerator,La=ms,iw=/(\r?\n)/,rw=10,Ar="$$$isSourceNode$$$";let sw=class Yp{constructor(e,n,i,r,s){this.children=[],this.sourceContents={},this.line=e??null,this.column=n??null,this.source=i??null,this.name=s??null,this[Ar]=!0,r!=null&&this.add(r)}static fromStringWithSourceMap(e,n,i){const r=new Yp,s=e.split(iw);let a=0;const o=function(){const p=m(),h=m()||"";return p+h;function m(){return a<s.length?s[a++]:void 0}};let c=1,l=0,u=null,d;return n.eachMapping(function(p){if(u!==null)if(c<p.generatedLine)f(u,o()),c++,l=0;else{d=s[a]||"";const h=d.substr(0,p.generatedColumn-l);s[a]=d.substr(p.generatedColumn-l),l=p.generatedColumn,f(u,h),u=p;return}for(;c<p.generatedLine;)r.add(o()),c++;l<p.generatedColumn&&(d=s[a]||"",r.add(d.substr(0,p.generatedColumn)),s[a]=d.substr(p.generatedColumn),l=p.generatedColumn),u=p},this),a<s.length&&(u&&f(u,o()),r.add(s.splice(a).join(""))),n.sources.forEach(function(p){const h=n.sourceContentFor(p);h!=null&&(i!=null&&(p=La.join(i,p)),r.setSourceContent(p,h))}),r;function f(p,h){if(p===null||p.source===void 0)r.add(h);else{const m=i?La.join(i,p.source):p.source;r.add(new Yp(p.originalLine,p.originalColumn,m,h,p.name))}}}add(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[Ar]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}prepend(e){if(Array.isArray(e))for(let n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[Ar]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this}walk(e){let n;for(let i=0,r=this.children.length;i<r;i++)n=this.children[i],n[Ar]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let n,i;const r=this.children.length;if(r>0){for(n=[],i=0;i<r-1;i++)n.push(this.children[i]),n.push(e);n.push(this.children[i]),this.children=n}return this}replaceRight(e,n){const i=this.children[this.children.length-1];return i[Ar]?i.replaceRight(e,n):typeof i=="string"?this.children[this.children.length-1]=i.replace(e,n):this.children.push("".replace(e,n)),this}setSourceContent(e,n){this.sourceContents[La.toSetString(e)]=n}walkSourceContents(e){for(let i=0,r=this.children.length;i<r;i++)this.children[i][Ar]&&this.children[i].walkSourceContents(e);const n=Object.keys(this.sourceContents);for(let i=0,r=n.length;i<r;i++)e(La.fromSetString(n[i]),this.sourceContents[n[i]])}toString(){let e="";return this.walk(function(n){e+=n}),e}toStringWithSourceMap(e){const n={code:"",line:1,column:0},i=new nw(e);let r=!1,s=null,a=null,o=null,c=null;return this.walk(function(l,u){n.code+=l,u.source!==null&&u.line!==null&&u.column!==null?((s!==u.source||a!==u.line||o!==u.column||c!==u.name)&&i.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:n.line,column:n.column},name:u.name}),s=u.source,a=u.line,o=u.column,c=u.name,r=!0):r&&(i.addMapping({generated:{line:n.line,column:n.column}}),s=null,r=!1);for(let d=0,f=l.length;d<f;d++)l.charCodeAt(d)===rw?(n.line++,n.column=0,d+1===f?(s=null,r=!1):r&&i.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:n.line,column:n.column},name:u.name})):n.column++}),this.walkSourceContents(function(l,u){i.setSourceContent(l,u)}),{code:n.code,map:i}}};uf.SourceNode=sw;var aw=uf.SourceNode;const In=!!JSON.parse("false"),ow=!!JSON.parse("false");JSON.parse("false");const cw=!!JSON.parse("false"),lw="";JSON.parse("false"),JSON.parse("false");var pf=typeof global=="object"&&global&&global.Object===Object&&global,uw=typeof self=="object"&&self&&self.Object===Object&&self,Cn=pf||uw||Function("return this")(),Zt=Cn.Symbol,df=Object.prototype,pw=df.hasOwnProperty,dw=df.toString,ys=Zt?Zt.toStringTag:void 0;function fw(t){var e=pw.call(t,ys),n=t[ys];try{t[ys]=void 0;var i=!0}catch{}var r=dw.call(t);return i&&(e?t[ys]=n:delete t[ys]),r}var hw=Object.prototype,mw=hw.toString;function gw(t){return mw.call(t)}var vw="[object Null]",bw="[object Undefined]",ff=Zt?Zt.toStringTag:void 0;function ki(t){return t==null?t===void 0?bw:vw:ff&&ff in Object(t)?fw(t):gw(t)}function fn(t){return t!=null&&typeof t=="object"}var xw="[object Symbol]";function Ma(t){return typeof t=="symbol"||fn(t)&&ki(t)==xw}function Ua(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var we=Array.isArray,yw=1/0,hf=Zt?Zt.prototype:void 0,mf=hf?hf.toString:void 0;function gf(t){if(typeof t=="string")return t;if(we(t))return Ua(t,gf)+"";if(Ma(t))return mf?mf.call(t):"";var e=t+"";return e=="0"&&1/t==-yw?"-0":e}var _w=/\s/;function ww(t){for(var e=t.length;e--&&_w.test(t.charAt(e)););return e}var Ew=/^\s+/;function kw(t){return t&&t.slice(0,ww(t)+1).replace(Ew,"")}function Jt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var vf=NaN,Sw=/^[-+]0x[0-9a-f]+$/i,Aw=/^0b[01]+$/i,Tw=/^0o[0-7]+$/i,Rw=parseInt;function Ow(t){if(typeof t=="number")return t;if(Ma(t))return vf;if(Jt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Jt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kw(t);var n=Aw.test(t);return n||Tw.test(t)?Rw(t.slice(2),n?2:8):Sw.test(t)?vf:+t}var bf=1/0,Iw=17976931348623157e292;function Cw(t){if(!t)return t===0?t:0;if(t=Ow(t),t===bf||t===-bf){var e=t<0?-1:1;return e*Iw}return t===t?t:0}function Pa(t){var e=Cw(t),n=e%1;return e===e?n?e-n:e:0}function Tr(t){return t}var Nw="[object AsyncFunction]",Lw="[object Function]",Mw="[object GeneratorFunction]",Uw="[object Proxy]";function ii(t){if(!Jt(t))return!1;var e=ki(t);return e==Lw||e==Mw||e==Nw||e==Uw}var ol=Cn["__core-js_shared__"],xf=function(){var t=/[^.]+$/.exec(ol&&ol.keys&&ol.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Pw(t){return!!xf&&xf in t}var Dw=Function.prototype,jw=Dw.toString;function Vi(t){if(t!=null){try{return jw.call(t)}catch{}try{return t+""}catch{}}return""}var Fw=/[\\^$.*+?()[\]{}|]/g,Bw=/^\[object .+?Constructor\]$/,$w=Function.prototype,zw=Object.prototype,Ww=$w.toString,Gw=zw.hasOwnProperty,Kw=RegExp("^"+Ww.call(Gw).replace(Fw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hw(t){if(!Jt(t)||Pw(t))return!1;var e=ii(t)?Kw:Bw;return e.test(Vi(t))}function Vw(t,e){return t==null?void 0:t[e]}function qi(t,e){var n=Vw(t,e);return Hw(n)?n:void 0}var cl=qi(Cn,"WeakMap"),yf=Object.create,qw=function(){function t(){}return function(e){if(!Jt(e))return{};if(yf)return yf(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Yw(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function st(){}function Xw(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var Zw=800,Jw=16,Qw=Date.now;function e0(t){var e=0,n=0;return function(){var i=Qw(),r=Jw-(i-n);if(n=i,r>0){if(++e>=Zw)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function t0(t){return function(){return t}}var Da=function(){try{var t=qi(Object,"defineProperty");return t({},"",{}),t}catch{}}(),n0=Da?function(t,e){return Da(t,"toString",{configurable:!0,enumerable:!1,value:t0(e),writable:!0})}:Tr,i0=e0(n0);function _f(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function wf(t,e,n,i){for(var r=t.length,s=n+-1;++s<r;)if(e(t[s],s,t))return s;return-1}function r0(t){return t!==t}function s0(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function ll(t,e,n){return e===e?s0(t,e,n):wf(t,r0,n)}function Ef(t,e){var n=t==null?0:t.length;return!!n&&ll(t,e,0)>-1}var a0=9007199254740991,o0=/^(?:0|[1-9]\d*)$/;function ja(t,e){var n=typeof t;return e=e??a0,!!e&&(n=="number"||n!="symbol"&&o0.test(t))&&t>-1&&t%1==0&&t<e}function ul(t,e,n){e=="__proto__"&&Da?Da(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function _s(t,e){return t===e||t!==t&&e!==e}var c0=Object.prototype,l0=c0.hasOwnProperty;function Fa(t,e,n){var i=t[e];(!(l0.call(t,e)&&_s(i,n))||n===void 0&&!(e in t))&&ul(t,e,n)}function pl(t,e,n,i){var r=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],c=void 0;c===void 0&&(c=t[o]),r?ul(n,o,c):Fa(n,o,c)}return n}var kf=Math.max;function u0(t,e,n){return e=kf(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=kf(i.length-e,0),a=Array(s);++r<s;)a[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=n(a),Yw(t,this,o)}}function dl(t,e){return i0(u0(t,e,Tr),t+"")}var p0=9007199254740991;function fl(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=p0}function Nn(t){return t!=null&&fl(t.length)&&!ii(t)}function Sf(t,e,n){if(!Jt(n))return!1;var i=typeof e;return(i=="number"?Nn(n)&&ja(e,n.length):i=="string"&&e in n)?_s(n[e],t):!1}function d0(t){return dl(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,a&&Sf(n[0],n[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=n[i];o&&t(e,o,i,s)}return e})}var f0=Object.prototype;function ws(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||f0;return t===n}function h0(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var m0="[object Arguments]";function Af(t){return fn(t)&&ki(t)==m0}var Tf=Object.prototype,g0=Tf.hasOwnProperty,v0=Tf.propertyIsEnumerable,Ba=Af(function(){return arguments}())?Af:function(t){return fn(t)&&g0.call(t,"callee")&&!v0.call(t,"callee")};function b0(){return!1}var Rf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Of=Rf&&typeof module=="object"&&module&&!module.nodeType&&module,x0=Of&&Of.exports===Rf,If=x0?Cn.Buffer:void 0,y0=If?If.isBuffer:void 0,Es=y0||b0,_0="[object Arguments]",w0="[object Array]",E0="[object Boolean]",k0="[object Date]",S0="[object Error]",A0="[object Function]",T0="[object Map]",R0="[object Number]",O0="[object Object]",I0="[object RegExp]",C0="[object Set]",N0="[object String]",L0="[object WeakMap]",M0="[object ArrayBuffer]",U0="[object DataView]",P0="[object Float32Array]",D0="[object Float64Array]",j0="[object Int8Array]",F0="[object Int16Array]",B0="[object Int32Array]",$0="[object Uint8Array]",z0="[object Uint8ClampedArray]",W0="[object Uint16Array]",G0="[object Uint32Array]",ze={};ze[P0]=ze[D0]=ze[j0]=ze[F0]=ze[B0]=ze[$0]=ze[z0]=ze[W0]=ze[G0]=!0,ze[_0]=ze[w0]=ze[M0]=ze[E0]=ze[U0]=ze[k0]=ze[S0]=ze[A0]=ze[T0]=ze[R0]=ze[O0]=ze[I0]=ze[C0]=ze[N0]=ze[L0]=!1;function K0(t){return fn(t)&&fl(t.length)&&!!ze[ki(t)]}function $a(t){return function(e){return t(e)}}var Cf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ks=Cf&&typeof module=="object"&&module&&!module.nodeType&&module,H0=ks&&ks.exports===Cf,hl=H0&&pf.process,Si=function(){try{var t=ks&&ks.require&&ks.require("util").types;return t||hl&&hl.binding&&hl.binding("util")}catch{}}(),Nf=Si&&Si.isTypedArray,ml=Nf?$a(Nf):K0,V0=Object.prototype,q0=V0.hasOwnProperty;function Lf(t,e){var n=we(t),i=!n&&Ba(t),r=!n&&!i&&Es(t),s=!n&&!i&&!r&&ml(t),a=n||i||r||s,o=a?h0(t.length,String):[],c=o.length;for(var l in t)(e||q0.call(t,l))&&!(a&&(l=="length"||r&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ja(l,c)))&&o.push(l);return o}function Mf(t,e){return function(n){return t(e(n))}}var Y0=Mf(Object.keys,Object),X0=Object.prototype,Z0=X0.hasOwnProperty;function Uf(t){if(!ws(t))return Y0(t);var e=[];for(var n in Object(t))Z0.call(t,n)&&n!="constructor"&&e.push(n);return e}function Qt(t){return Nn(t)?Lf(t):Uf(t)}var J0=Object.prototype,Q0=J0.hasOwnProperty,Nt=d0(function(t,e){if(ws(e)||Nn(e)){pl(e,Qt(e),t);return}for(var n in e)Q0.call(e,n)&&Fa(t,n,e[n])});function eE(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var tE=Object.prototype,nE=tE.hasOwnProperty;function iE(t){if(!Jt(t))return eE(t);var e=ws(t),n=[];for(var i in t)i=="constructor"&&(e||!nE.call(t,i))||n.push(i);return n}function Pf(t){return Nn(t)?Lf(t,!0):iE(t)}var rE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sE=/^\w*$/;function gl(t,e){if(we(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ma(t)?!0:sE.test(t)||!rE.test(t)||e!=null&&t in Object(e)}var Ss=qi(Object,"create");function aE(){this.__data__=Ss?Ss(null):{},this.size=0}function oE(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var cE="__lodash_hash_undefined__",lE=Object.prototype,uE=lE.hasOwnProperty;function pE(t){var e=this.__data__;if(Ss){var n=e[t];return n===cE?void 0:n}return uE.call(e,t)?e[t]:void 0}var dE=Object.prototype,fE=dE.hasOwnProperty;function hE(t){var e=this.__data__;return Ss?e[t]!==void 0:fE.call(e,t)}var mE="__lodash_hash_undefined__";function gE(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ss&&e===void 0?mE:e,this}function Yi(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Yi.prototype.clear=aE,Yi.prototype.delete=oE,Yi.prototype.get=pE,Yi.prototype.has=hE,Yi.prototype.set=gE;function vE(){this.__data__=[],this.size=0}function za(t,e){for(var n=t.length;n--;)if(_s(t[n][0],e))return n;return-1}var bE=Array.prototype,xE=bE.splice;function yE(t){var e=this.__data__,n=za(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():xE.call(e,n,1),--this.size,!0}function _E(t){var e=this.__data__,n=za(e,t);return n<0?void 0:e[n][1]}function wE(t){return za(this.__data__,t)>-1}function EE(t,e){var n=this.__data__,i=za(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function ri(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ri.prototype.clear=vE,ri.prototype.delete=yE,ri.prototype.get=_E,ri.prototype.has=wE,ri.prototype.set=EE;var As=qi(Cn,"Map");function kE(){this.size=0,this.__data__={hash:new Yi,map:new(As||ri),string:new Yi}}function SE(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Wa(t,e){var n=t.__data__;return SE(e)?n[typeof e=="string"?"string":"hash"]:n.map}function AE(t){var e=Wa(this,t).delete(t);return this.size-=e?1:0,e}function TE(t){return Wa(this,t).get(t)}function RE(t){return Wa(this,t).has(t)}function OE(t,e){var n=Wa(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function si(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}si.prototype.clear=kE,si.prototype.delete=AE,si.prototype.get=TE,si.prototype.has=RE,si.prototype.set=OE;var IE="Expected a function";function vl(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(IE);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var a=t.apply(this,i);return n.cache=s.set(r,a)||s,a};return n.cache=new(vl.Cache||si),n}vl.Cache=si;var CE=500;function NE(t){var e=vl(t,function(i){return n.size===CE&&n.clear(),i}),n=e.cache;return e}var LE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ME=/\\(\\)?/g,UE=NE(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(LE,function(n,i,r,s){e.push(r?s.replace(ME,"$1"):i||n)}),e});function Df(t){return t==null?"":gf(t)}function Ga(t,e){return we(t)?t:gl(t,e)?[t]:UE(Df(t))}var PE=1/0;function Ts(t){if(typeof t=="string"||Ma(t))return t;var e=t+"";return e=="0"&&1/t==-PE?"-0":e}function bl(t,e){e=Ga(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[Ts(e[n++])];return n&&n==i?t:void 0}function DE(t,e,n){var i=t==null?void 0:bl(t,e);return i===void 0?n:i}function xl(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var jf=Zt?Zt.isConcatSpreadable:void 0;function jE(t){return we(t)||Ba(t)||!!(jf&&t&&t[jf])}function yl(t,e,n,i,r){var s=-1,a=t.length;for(n||(n=jE),r||(r=[]);++s<a;){var o=t[s];n(o)?xl(r,o):i||(r[r.length]=o)}return r}function Gt(t){var e=t==null?0:t.length;return e?yl(t):[]}var Ff=Mf(Object.getPrototypeOf,Object);function _l(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}function FE(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:_l(t,e,n)}var BE="\\ud800-\\udfff",$E="\\u0300-\\u036f",zE="\\ufe20-\\ufe2f",WE="\\u20d0-\\u20ff",GE=$E+zE+WE,KE="\\ufe0e\\ufe0f",HE="\\u200d",VE=RegExp("["+HE+BE+GE+KE+"]");function Bf(t){return VE.test(t)}function qE(t){return t.split("")}var $f="\\ud800-\\udfff",YE="\\u0300-\\u036f",XE="\\ufe20-\\ufe2f",ZE="\\u20d0-\\u20ff",JE=YE+XE+ZE,QE="\\ufe0e\\ufe0f",ek="["+$f+"]",wl="["+JE+"]",El="\\ud83c[\\udffb-\\udfff]",tk="(?:"+wl+"|"+El+")",zf="[^"+$f+"]",Wf="(?:\\ud83c[\\udde6-\\uddff]){2}",Gf="[\\ud800-\\udbff][\\udc00-\\udfff]",nk="\\u200d",Kf=tk+"?",Hf="["+QE+"]?",ik="(?:"+nk+"(?:"+[zf,Wf,Gf].join("|")+")"+Hf+Kf+")*",rk=Hf+Kf+ik,sk="(?:"+[zf+wl+"?",wl,Wf,Gf,ek].join("|")+")",ak=RegExp(El+"(?="+El+")|"+sk+rk,"g");function ok(t){return t.match(ak)||[]}function ck(t){return Bf(t)?ok(t):qE(t)}function lk(t){return function(e){e=Df(e);var n=Bf(e)?ck(e):void 0,i=n?n[0]:e.charAt(0),r=n?FE(n,1).join(""):e.slice(1);return i[t]()+r}}var Vf=lk("toUpperCase");function uk(t,e,n,i){var r=-1,s=t==null?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function pk(){this.__data__=new ri,this.size=0}function dk(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function fk(t){return this.__data__.get(t)}function hk(t){return this.__data__.has(t)}var mk=200;function gk(t,e){var n=this.__data__;if(n instanceof ri){var i=n.__data__;if(!As||i.length<mk-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new si(i)}return n.set(t,e),this.size=n.size,this}function Ln(t){var e=this.__data__=new ri(t);this.size=e.size}Ln.prototype.clear=pk,Ln.prototype.delete=dk,Ln.prototype.get=fk,Ln.prototype.has=hk,Ln.prototype.set=gk;function vk(t,e){return t&&pl(e,Qt(e),t)}var qf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yf=qf&&typeof module=="object"&&module&&!module.nodeType&&module,bk=Yf&&Yf.exports===qf,Xf=bk?Cn.Buffer:void 0,Zf=Xf?Xf.allocUnsafe:void 0;function xk(t,e){var n=t.length,i=Zf?Zf(n):new t.constructor(n);return t.copy(i),i}function kl(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var a=t[n];e(a,n,t)&&(s[r++]=a)}return s}function Jf(){return[]}var yk=Object.prototype,_k=yk.propertyIsEnumerable,Qf=Object.getOwnPropertySymbols,Sl=Qf?function(t){return t==null?[]:(t=Object(t),kl(Qf(t),function(e){return _k.call(t,e)}))}:Jf;function wk(t,e){return pl(t,Sl(t),e)}var Ek=Object.getOwnPropertySymbols,kk=Ek?function(t){for(var e=[];t;)xl(e,Sl(t)),t=Ff(t);return e}:Jf;function eh(t,e,n){var i=e(t);return we(t)?i:xl(i,n(t))}function Al(t){return eh(t,Qt,Sl)}function Sk(t){return eh(t,Pf,kk)}var Tl=qi(Cn,"DataView"),Rl=qi(Cn,"Promise"),Rr=qi(Cn,"Set"),th="[object Map]",Ak="[object Object]",nh="[object Promise]",ih="[object Set]",rh="[object WeakMap]",sh="[object DataView]",Tk=Vi(Tl),Rk=Vi(As),Ok=Vi(Rl),Ik=Vi(Rr),Ck=Vi(cl),en=ki;(Tl&&en(new Tl(new ArrayBuffer(1)))!=sh||As&&en(new As)!=th||Rl&&en(Rl.resolve())!=nh||Rr&&en(new Rr)!=ih||cl&&en(new cl)!=rh)&&(en=function(t){var e=ki(t),n=e==Ak?t.constructor:void 0,i=n?Vi(n):"";if(i)switch(i){case Tk:return sh;case Rk:return th;case Ok:return nh;case Ik:return ih;case Ck:return rh}return e});var Nk=Object.prototype,Lk=Nk.hasOwnProperty;function Mk(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Lk.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Ka=Cn.Uint8Array;function Uk(t){var e=new t.constructor(t.byteLength);return new Ka(e).set(new Ka(t)),e}function Pk(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Dk=/\w*$/;function jk(t){var e=new t.constructor(t.source,Dk.exec(t));return e.lastIndex=t.lastIndex,e}var ah=Zt?Zt.prototype:void 0,oh=ah?ah.valueOf:void 0;function Fk(t){return oh?Object(oh.call(t)):{}}function Bk(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var $k="[object Boolean]",zk="[object Date]",Wk="[object Map]",Gk="[object Number]",Kk="[object RegExp]",Hk="[object Set]",Vk="[object String]",qk="[object Symbol]",Yk="[object ArrayBuffer]",Xk="[object DataView]",Zk="[object Float32Array]",Jk="[object Float64Array]",Qk="[object Int8Array]",e1="[object Int16Array]",t1="[object Int32Array]",n1="[object Uint8Array]",i1="[object Uint8ClampedArray]",r1="[object Uint16Array]",s1="[object Uint32Array]";function a1(t,e,n){var i=t.constructor;switch(e){case Yk:return Uk(t);case $k:case zk:return new i(+t);case Xk:return Pk(t);case Zk:case Jk:case Qk:case e1:case t1:case n1:case i1:case r1:case s1:return Bk(t);case Wk:return new i;case Gk:case Vk:return new i(t);case Kk:return jk(t);case Hk:return new i;case qk:return Fk(t)}}function o1(t){return typeof t.constructor=="function"&&!ws(t)?qw(Ff(t)):{}}var c1="[object Map]";function l1(t){return fn(t)&&en(t)==c1}var ch=Si&&Si.isMap,u1=ch?$a(ch):l1,p1="[object Set]";function d1(t){return fn(t)&&en(t)==p1}var lh=Si&&Si.isSet,f1=lh?$a(lh):d1,uh="[object Arguments]",h1="[object Array]",m1="[object Boolean]",g1="[object Date]",v1="[object Error]",ph="[object Function]",b1="[object GeneratorFunction]",x1="[object Map]",y1="[object Number]",dh="[object Object]",_1="[object RegExp]",w1="[object Set]",E1="[object String]",k1="[object Symbol]",S1="[object WeakMap]",A1="[object ArrayBuffer]",T1="[object DataView]",R1="[object Float32Array]",O1="[object Float64Array]",I1="[object Int8Array]",C1="[object Int16Array]",N1="[object Int32Array]",L1="[object Uint8Array]",M1="[object Uint8ClampedArray]",U1="[object Uint16Array]",P1="[object Uint32Array]",Me={};Me[uh]=Me[h1]=Me[A1]=Me[T1]=Me[m1]=Me[g1]=Me[R1]=Me[O1]=Me[I1]=Me[C1]=Me[N1]=Me[x1]=Me[y1]=Me[dh]=Me[_1]=Me[w1]=Me[E1]=Me[k1]=Me[L1]=Me[M1]=Me[U1]=Me[P1]=!0,Me[v1]=Me[ph]=Me[S1]=!1;function Ha(t,e,n,i,r,s){var a;if(a!==void 0)return a;if(!Jt(t))return t;var o=we(t);if(o)return a=Mk(t),Xw(t,a);var c=en(t),l=c==ph||c==b1;if(Es(t))return xk(t);if(c==dh||c==uh||l&&!r)return a=l?{}:o1(t),wk(t,vk(a,t));if(!Me[c])return r?t:{};a=a1(t,c),s||(s=new Ln);var u=s.get(t);if(u)return u;s.set(t,a),f1(t)?t.forEach(function(p){a.add(Ha(p,e,n,p,t,s))}):u1(t)&&t.forEach(function(p,h){a.set(h,Ha(p,e,n,h,t,s))});var d=Al,f=o?void 0:d(t);return _f(f||t,function(p,h){f&&(h=p,p=t[h]),Fa(a,h,Ha(p,e,n,h,t,s))}),a}var D1=4;function gt(t){return Ha(t,D1)}function Rs(t){for(var e=-1,n=t==null?0:t.length,i=0,r=[];++e<n;){var s=t[e];s&&(r[i++]=s)}return r}var j1="__lodash_hash_undefined__";function F1(t){return this.__data__.set(t,j1),this}function B1(t){return this.__data__.has(t)}function Or(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new si;++e<n;)this.add(t[e])}Or.prototype.add=Or.prototype.push=F1,Or.prototype.has=B1;function fh(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function Ol(t,e){return t.has(e)}var $1=1,z1=2;function hh(t,e,n,i,r,s){var a=n&$1,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var l=s.get(t),u=s.get(e);if(l&&u)return l==e&&u==t;var d=-1,f=!0,p=n&z1?new Or:void 0;for(s.set(t,e),s.set(e,t);++d<o;){var h=t[d],m=e[d];if(i)var y=a?i(m,h,d,e,t,s):i(h,m,d,t,e,s);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!fh(e,function(x,v){if(!Ol(p,v)&&(h===x||r(h,x,n,i,s)))return p.push(v)})){f=!1;break}}else if(!(h===m||r(h,m,n,i,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function W1(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}function Il(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var G1=1,K1=2,H1="[object Boolean]",V1="[object Date]",q1="[object Error]",Y1="[object Map]",X1="[object Number]",Z1="[object RegExp]",J1="[object Set]",Q1="[object String]",eS="[object Symbol]",tS="[object ArrayBuffer]",nS="[object DataView]",mh=Zt?Zt.prototype:void 0,Cl=mh?mh.valueOf:void 0;function iS(t,e,n,i,r,s,a){switch(n){case nS:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tS:return!(t.byteLength!=e.byteLength||!s(new Ka(t),new Ka(e)));case H1:case V1:case X1:return _s(+t,+e);case q1:return t.name==e.name&&t.message==e.message;case Z1:case Q1:return t==e+"";case Y1:var o=W1;case J1:var c=i&G1;if(o||(o=Il),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;i|=K1,a.set(t,e);var u=hh(o(t),o(e),i,r,s,a);return a.delete(t),u;case eS:if(Cl)return Cl.call(t)==Cl.call(e)}return!1}var rS=1,sS=Object.prototype,aS=sS.hasOwnProperty;function oS(t,e,n,i,r,s){var a=n&rS,o=Al(t),c=o.length,l=Al(e),u=l.length;if(c!=u&&!a)return!1;for(var d=c;d--;){var f=o[d];if(!(a?f in e:aS.call(e,f)))return!1}var p=s.get(t),h=s.get(e);if(p&&h)return p==e&&h==t;var m=!0;s.set(t,e),s.set(e,t);for(var y=a;++d<c;){f=o[d];var x=t[f],v=e[f];if(i)var k=a?i(v,x,f,e,t,s):i(x,v,f,t,e,s);if(!(k===void 0?x===v||r(x,v,n,i,s):k)){m=!1;break}y||(y=f=="constructor")}if(m&&!y){var O=t.constructor,E=e.constructor;O!=E&&"constructor"in t&&"constructor"in e&&!(typeof O=="function"&&O instanceof O&&typeof E=="function"&&E instanceof E)&&(m=!1)}return s.delete(t),s.delete(e),m}var cS=1,gh="[object Arguments]",vh="[object Array]",Va="[object Object]",lS=Object.prototype,bh=lS.hasOwnProperty;function uS(t,e,n,i,r,s){var a=we(t),o=we(e),c=a?vh:en(t),l=o?vh:en(e);c=c==gh?Va:c,l=l==gh?Va:l;var u=c==Va,d=l==Va,f=c==l;if(f&&Es(t)){if(!Es(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new Ln),a||ml(t)?hh(t,e,n,i,r,s):iS(t,e,c,n,i,r,s);if(!(n&cS)){var p=u&&bh.call(t,"__wrapped__"),h=d&&bh.call(e,"__wrapped__");if(p||h){var m=p?t.value():t,y=h?e.value():e;return s||(s=new Ln),r(m,y,n,i,s)}}return f?(s||(s=new Ln),oS(t,e,n,i,r,s)):!1}function Nl(t,e,n,i,r){return t===e?!0:t==null||e==null||!fn(t)&&!fn(e)?t!==t&&e!==e:uS(t,e,n,i,Nl,r)}var pS=1,dS=2;function fS(t,e,n,i){var r=n.length,s=r;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){a=n[r];var o=a[0],c=t[o],l=a[1];if(a[2]){if(c===void 0&&!(o in t))return!1}else{var u=new Ln,d;if(!(d===void 0?Nl(l,c,pS|dS,i,u):d))return!1}}return!0}function xh(t){return t===t&&!Jt(t)}function hS(t){for(var e=Qt(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,xh(r)]}return e}function yh(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function mS(t){var e=hS(t);return e.length==1&&e[0][2]?yh(e[0][0],e[0][1]):function(n){return n===t||fS(n,t,e)}}function gS(t,e){return t!=null&&e in Object(t)}function _h(t,e,n){e=Ga(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var a=Ts(e[i]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&fl(r)&&ja(a,r)&&(we(t)||Ba(t)))}function vS(t,e){return t!=null&&_h(t,e,gS)}var bS=1,xS=2;function yS(t,e){return gl(t)&&xh(e)?yh(Ts(t),e):function(n){var i=DE(n,t);return i===void 0&&i===e?vS(n,t):Nl(e,i,bS|xS)}}function _S(t){return function(e){return e==null?void 0:e[t]}}function wS(t){return function(e){return bl(e,t)}}function ES(t){return gl(t)?_S(Ts(t)):wS(t)}function Mn(t){return typeof t=="function"?t:t==null?Tr:typeof t=="object"?we(t)?yS(t[0],t[1]):mS(t):ES(t)}function kS(t,e,n,i){for(var r=-1,s=t==null?0:t.length;++r<s;){var a=t[r];e(i,a,n(a),t)}return i}function SS(t){return function(e,n,i){for(var r=-1,s=Object(e),a=i(e),o=a.length;o--;){var c=a[++r];if(n(s[c],c,s)===!1)break}return e}}var AS=SS();function TS(t,e){return t&&AS(t,e,Qt)}function RS(t,e){return function(n,i){if(n==null)return n;if(!Nn(n))return t(n,i);for(var r=n.length,s=-1,a=Object(n);++s<r&&i(a[s],s,a)!==!1;);return n}}var Xi=RS(TS);function OS(t,e,n,i){return Xi(t,function(r,s,a){e(i,r,n(r),a)}),i}function IS(t,e){return function(n,i){var r=we(n)?kS:OS,s=e?e():{};return r(n,t,Mn(i),s)}}var wh=Object.prototype,CS=wh.hasOwnProperty,Ll=dl(function(t,e){t=Object(t);var n=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&Sf(e[0],e[1],r)&&(i=1);++n<i;)for(var s=e[n],a=Pf(s),o=-1,c=a.length;++o<c;){var l=a[o],u=t[l];(u===void 0||_s(u,wh[l])&&!CS.call(t,l))&&(t[l]=s[l])}return t});function Eh(t){return fn(t)&&Nn(t)}var NS=200;function LS(t,e,n,i){var r=-1,s=Ef,a=!0,o=t.length,c=[],l=e.length;if(!o)return c;e.length>=NS&&(s=Ol,a=!1,e=new Or(e));e:for(;++r<o;){var u=t[r],d=u;if(u=u!==0?u:0,a&&d===d){for(var f=l;f--;)if(e[f]===d)continue e;c.push(u)}else s(e,d,i)||c.push(u)}return c}var qa=dl(function(t,e){return Eh(t)?LS(t,yl(e,1,Eh,!0)):[]});function Ir(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function vt(t,e,n){var i=t==null?0:t.length;return i?(e=e===void 0?1:Pa(e),_l(t,e<0?0:e,i)):[]}function Os(t,e,n){var i=t==null?0:t.length;return i?(e=e===void 0?1:Pa(e),e=i-e,_l(t,0,e<0?0:e)):[]}function MS(t){return typeof t=="function"?t:Tr}function ce(t,e){var n=we(t)?_f:Xi;return n(t,MS(e))}function US(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function PS(t,e){var n=!0;return Xi(t,function(i,r,s){return n=!!e(i,r,s),n}),n}function hn(t,e,n){var i=we(t)?US:PS;return i(t,Mn(e))}function kh(t,e){var n=[];return Xi(t,function(i,r,s){e(i,r,s)&&n.push(i)}),n}function tn(t,e){var n=we(t)?kl:kh;return n(t,Mn(e))}function DS(t){return function(e,n,i){var r=Object(e);if(!Nn(e)){var s=Mn(n);e=Qt(e),n=function(o){return s(r[o],o,r)}}var a=t(e,n,i);return a>-1?r[s?e[a]:a]:void 0}}var jS=Math.max;function FS(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var r=n==null?0:Pa(n);return r<0&&(r=jS(i+r,0)),wf(t,Mn(e),r)}var Cr=DS(FS);function mn(t){return t&&t.length?t[0]:void 0}function BS(t,e){var n=-1,i=Nn(t)?Array(t.length):[];return Xi(t,function(r,s,a){i[++n]=e(r,s,a)}),i}function ee(t,e){var n=we(t)?Ua:BS;return n(t,Mn(e))}function nn(t,e){return yl(ee(t,e))}var $S=Object.prototype,zS=$S.hasOwnProperty,Sh=IS(function(t,e,n){zS.call(t,n)?t[n].push(e):ul(t,n,[e])}),WS=Object.prototype,GS=WS.hasOwnProperty;function KS(t,e){return t!=null&&GS.call(t,e)}function oe(t,e){return t!=null&&_h(t,e,KS)}var HS="[object String]";function Lt(t){return typeof t=="string"||!we(t)&&fn(t)&&ki(t)==HS}function VS(t,e){return Ua(e,function(n){return t[n]})}function tt(t){return t==null?[]:VS(t,Qt(t))}var qS=Math.max;function St(t,e,n,i){t=Nn(t)?t:tt(t),n=n&&!i?Pa(n):0;var r=t.length;return n<0&&(n=qS(r+n,0)),Lt(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&ll(t,e,n)>-1}function Ah(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var r=0;return ll(t,e,r)}var YS="[object Map]",XS="[object Set]",ZS=Object.prototype,JS=ZS.hasOwnProperty;function Ue(t){if(t==null)return!0;if(Nn(t)&&(we(t)||typeof t=="string"||typeof t.splice=="function"||Es(t)||ml(t)||Ba(t)))return!t.length;var e=en(t);if(e==YS||e==XS)return!t.size;if(ws(t))return!Uf(t).length;for(var n in t)if(JS.call(t,n))return!1;return!0}var QS="[object RegExp]";function eA(t){return fn(t)&&ki(t)==QS}var Th=Si&&Si.isRegExp,ai=Th?$a(Th):eA;function oi(t){return t===void 0}var tA="Expected a function";function nA(t){if(typeof t!="function")throw new TypeError(tA);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function iA(t,e,n,i){if(!Jt(t))return t;e=Ga(e,t);for(var r=-1,s=e.length,a=s-1,o=t;o!=null&&++r<s;){var c=Ts(e[r]),l=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(r!=a){var u=o[c];l=void 0,l===void 0&&(l=Jt(u)?u:ja(e[r+1])?[]:{})}Fa(o,c,l),o=o[c]}return t}function rA(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var a=e[i],o=bl(t,a);n(o,a)&&iA(s,Ga(a,t),o)}return s}function gn(t,e){if(t==null)return{};var n=Ua(Sk(t),function(i){return[i]});return e=Mn(e),rA(t,n,function(i,r){return e(i,r[0])})}function sA(t,e,n,i,r){return r(t,function(s,a,o){n=i?(i=!1,s):e(n,s,a,o)}),n}function Mt(t,e,n){var i=we(t)?uk:sA,r=arguments.length<3;return i(t,Mn(e),n,r,Xi)}function Ya(t,e){var n=we(t)?kl:kh;return n(t,nA(Mn(e)))}function aA(t,e){var n;return Xi(t,function(i,r,s){return n=e(i,r,s),!n}),!!n}function Ml(t,e,n){var i=we(t)?fh:aA;return i(t,Mn(e))}var oA=1/0,cA=Rr&&1/Il(new Rr([,-0]))[1]==oA?function(t){return new Rr(t)}:st,lA=200;function uA(t,e,n){var i=-1,r=Ef,s=t.length,a=!0,o=[],c=o;if(s>=lA){var l=cA(t);if(l)return Il(l);a=!1,r=Ol,c=new Or}else c=o;e:for(;++i<s;){var u=t[i],d=u;if(u=u!==0?u:0,a&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue e;o.push(u)}else r(c,d,n)||(c!==o&&c.push(d),o.push(u))}return o}function Xa(t){return t&&t.length?uA(t):[]}function Ul(t){console&&console.error&&console.error(`Error: ${t}`)}function Rh(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Oh(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function Ih(t){function e(){}e.prototype=t;const n=new e;function i(){return typeof n.bar}return i(),i(),t}function pA(t){return dA(t)?t.LABEL:t.name}function dA(t){return Lt(t.LABEL)&&t.LABEL!==""}class Un{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),ce(this.definition,n=>{n.accept(e)})}}class Ut extends Un{constructor(e){super([]),this.idx=1,Nt(this,gn(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Nr extends Un{constructor(e){super(e.definition),this.orgText="",Nt(this,gn(e,n=>n!==void 0))}}class Pt extends Un{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Nt(this,gn(e,n=>n!==void 0))}}class Dt extends Un{constructor(e){super(e.definition),this.idx=1,Nt(this,gn(e,n=>n!==void 0))}}class Pn extends Un{constructor(e){super(e.definition),this.idx=1,Nt(this,gn(e,n=>n!==void 0))}}class Dn extends Un{constructor(e){super(e.definition),this.idx=1,Nt(this,gn(e,n=>n!==void 0))}}class at extends Un{constructor(e){super(e.definition),this.idx=1,Nt(this,gn(e,n=>n!==void 0))}}class vn extends Un{constructor(e){super(e.definition),this.idx=1,Nt(this,gn(e,n=>n!==void 0))}}class bn extends Un{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Nt(this,gn(e,n=>n!==void 0))}}class Ge{constructor(e){this.idx=1,Nt(this,gn(e,n=>n!==void 0))}accept(e){e.visit(this)}}function fA(t){return ee(t,Za)}function Za(t){function e(n){return ee(n,Za)}if(t instanceof Ut){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return Lt(t.label)&&(n.label=t.label),n}else{if(t instanceof Pt)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Dt)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Pn)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Dn)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Za(new Ge({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof vn)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Za(new Ge({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof at)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof bn)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Ge){const n={type:"Terminal",name:t.terminalType.name,label:pA(t.terminalType),idx:t.idx};Lt(t.label)&&(n.terminalLabel=t.label);const i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=ai(i)?i.source:i),n}else{if(t instanceof Nr)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class Zi{visit(e){const n=e;switch(n.constructor){case Ut:return this.visitNonTerminal(n);case Pt:return this.visitAlternative(n);case Dt:return this.visitOption(n);case Pn:return this.visitRepetitionMandatory(n);case Dn:return this.visitRepetitionMandatoryWithSeparator(n);case vn:return this.visitRepetitionWithSeparator(n);case at:return this.visitRepetition(n);case bn:return this.visitAlternation(n);case Ge:return this.visitTerminal(n);case Nr:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function hA(t){return t instanceof Pt||t instanceof Dt||t instanceof at||t instanceof Pn||t instanceof Dn||t instanceof vn||t instanceof Ge||t instanceof Nr}function Ja(t,e=[]){return t instanceof Dt||t instanceof at||t instanceof vn?!0:t instanceof bn?Ml(t.definition,i=>Ja(i,e)):t instanceof Ut&&St(e,t)?!1:t instanceof Un?(t instanceof Ut&&e.push(t),hn(t.definition,i=>Ja(i,e))):!1}function mA(t){return t instanceof bn}function jn(t){if(t instanceof Ut)return"SUBRULE";if(t instanceof Dt)return"OPTION";if(t instanceof bn)return"OR";if(t instanceof Pn)return"AT_LEAST_ONE";if(t instanceof Dn)return"AT_LEAST_ONE_SEP";if(t instanceof vn)return"MANY_SEP";if(t instanceof at)return"MANY";if(t instanceof Ge)return"CONSUME";throw Error("non exhaustive match")}class Qa{walk(e,n=[]){ce(e.definition,(i,r)=>{const s=vt(e.definition,r+1);if(i instanceof Ut)this.walkProdRef(i,s,n);else if(i instanceof Ge)this.walkTerminal(i,s,n);else if(i instanceof Pt)this.walkFlat(i,s,n);else if(i instanceof Dt)this.walkOption(i,s,n);else if(i instanceof Pn)this.walkAtLeastOne(i,s,n);else if(i instanceof Dn)this.walkAtLeastOneSep(i,s,n);else if(i instanceof vn)this.walkManySep(i,s,n);else if(i instanceof at)this.walkMany(i,s,n);else if(i instanceof bn)this.walkOr(i,s,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,i){}walkProdRef(e,n,i){}walkFlat(e,n,i){const r=n.concat(i);this.walk(e,r)}walkOption(e,n,i){const r=n.concat(i);this.walk(e,r)}walkAtLeastOne(e,n,i){const r=[new Dt({definition:e.definition})].concat(n,i);this.walk(e,r)}walkAtLeastOneSep(e,n,i){const r=Ch(e,n,i);this.walk(e,r)}walkMany(e,n,i){const r=[new Dt({definition:e.definition})].concat(n,i);this.walk(e,r)}walkManySep(e,n,i){const r=Ch(e,n,i);this.walk(e,r)}walkOr(e,n,i){const r=n.concat(i);ce(e.definition,s=>{const a=new Pt({definition:[s]});this.walk(a,r)})}}function Ch(t,e,n){return[new Dt({definition:[new Ge({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function Is(t){if(t instanceof Ut)return Is(t.referencedRule);if(t instanceof Ge)return bA(t);if(hA(t))return gA(t);if(mA(t))return vA(t);throw Error("non exhaustive match")}function gA(t){let e=[];const n=t.definition;let i=0,r=n.length>i,s,a=!0;for(;r&&a;)s=n[i],a=Ja(s),e=e.concat(Is(s)),i=i+1,r=n.length>i;return Xa(e)}function vA(t){const e=ee(t.definition,n=>Is(n));return Xa(Gt(e))}function bA(t){return[t.terminalType]}const Nh="_~IN~_";class xA extends Qa{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,i){}walkProdRef(e,n,i){const r=_A(e.referencedRule,e.idx)+this.topProd.name,s=n.concat(i),a=new Pt({definition:s}),o=Is(a);this.follows[r]=o}}function yA(t){const e={};return ce(t,n=>{const i=new xA(n).startWalking();Nt(e,i)}),e}function _A(t,e){return t.name+e+Nh}function pe(t){return t.charCodeAt(0)}function Pl(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function Cs(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function Lr(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function wA(){throw Error("Internal Error - Should never get here!")}function Lh(t){return t.type==="Character"}const eo=[];for(let t=pe("0");t<=pe("9");t++)eo.push(t);const to=[pe("_")].concat(eo);for(let t=pe("a");t<=pe("z");t++)to.push(t);for(let t=pe("A");t<=pe("Z");t++)to.push(t);const Mh=[pe(" "),pe("\f"),pe(`
`),pe("\r"),pe("	"),pe("\v"),pe("	"),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe(" "),pe("\u2028"),pe("\u2029"),pe(" "),pe(" "),pe("　"),pe("\uFEFF")],EA=/[0-9a-fA-F]/,no=/[0-9]/,kA=/[1-9]/;class SA{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const i={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Cs(i,"global");break;case"i":Cs(i,"ignoreCase");break;case"m":Cs(i,"multiLine");break;case"u":Cs(i,"unicode");break;case"y":Cs(i,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:i,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}Lr(n);const i=this.disjunction();return this.consumeChar(")"),{type:n,value:i,loc:this.loc(e)}}return wA()}quantifier(e=!1){let n;const i=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const r=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:r,atMost:r};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:r,atMost:s}):n={atLeast:r,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;Lr(n);break}if(!(e===!0&&n===void 0)&&Lr(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(i),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Lr(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[pe(`
`),pe("\r"),pe("\u2028"),pe("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=eo;break;case"D":e=eo,n=!0;break;case"s":e=Mh;break;case"S":e=Mh,n=!0;break;case"w":e=to;break;case"W":e=to,n=!0;break}if(Lr(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=pe("\f");break;case"n":e=pe(`
`);break;case"r":e=pe("\r");break;case"t":e=pe("	");break;case"v":e=pe("\v");break}if(Lr(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:pe("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:pe(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:pe(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const i=this.classAtom();if(i.type,Lh(i)&&this.isRangeDash()){this.consumeChar("-");const r=this.classAtom();if(r.type,Lh(r)){if(r.value<i.value)throw Error("Range out of order in character class");e.push({from:i.value,to:r.value})}else Pl(i.value,e),e.push(pe("-")),Pl(r.value,e)}else Pl(i.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:pe("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const i={type:"Group",capturing:e,value:n};return e&&(i.idx=this.groupIdx),i}positiveInteger(){let e=this.popChar();if(kA.test(e)===!1)throw Error("Expecting a positive integer");for(;no.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(no.test(e)===!1)throw Error("Expecting an integer");for(;no.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:pe(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return no.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let r=0;r<e;r++){const s=this.popChar();if(EA.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Dl{visitChildren(e){for(const n in e){const i=e[n];e.hasOwnProperty(n)&&(i.type!==void 0?this.visit(i):Array.isArray(i)&&i.forEach(r=>{this.visit(r)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let io={};const AA=new SA;function ro(t){const e=t.toString();if(io.hasOwnProperty(e))return io[e];{const n=AA.pattern(e);return io[e]=n,n}}function TA(){io={}}const Uh="Complement Sets are not supported for first char optimization",so=`Unable to use "first char" lexer optimizations:
`;function RA(t,e=!1){try{const n=ro(t);return jl(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===Uh)e&&Rh(`${so}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let i="";e&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Ul(`${so}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+i)}}return[]}function jl(t,e,n){switch(t.type){case"Disjunction":for(let r=0;r<t.value.length;r++)jl(t.value[r],e,n);break;case"Alternative":const i=t.value;for(let r=0;r<i.length;r++){const s=i[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":ao(a.value,e,n);break;case"Set":if(a.complement===!0)throw Error(Uh);ce(a.value,c=>{if(typeof c=="number")ao(c,e,n);else{const l=c;if(n===!0)for(let u=l.from;u<=l.to;u++)ao(u,e,n);else{for(let u=l.from;u<=l.to&&u<Ls;u++)ao(u,e,n);if(l.to>=Ls){const u=l.from>=Ls?l.from:Ls,d=l.to,f=Ai(u),p=Ai(d);for(let h=f;h<=p;h++)e[h]=h}}}});break;case"Group":jl(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&Fl(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return tt(e)}function ao(t,e,n){const i=Ai(t);e[i]=i,n===!0&&OA(t,e)}function OA(t,e){const n=String.fromCharCode(t),i=n.toUpperCase();if(i!==n){const r=Ai(i.charCodeAt(0));e[r]=r}else{const r=n.toLowerCase();if(r!==n){const s=Ai(r.charCodeAt(0));e[s]=s}}}function Ph(t,e){return Cr(t.value,n=>{if(typeof n=="number")return St(e,n);{const i=n;return Cr(e,r=>i.from<=r&&r<=i.to)!==void 0}})}function Fl(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?we(t.value)?hn(t.value,Fl):Fl(t.value):!1}class IA extends Dl{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){St(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Ph(e,this.targetCharCodes)===void 0&&(this.found=!0):Ph(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Bl(t,e){if(e instanceof RegExp){const n=ro(e),i=new IA(t);return i.visit(n),i.found}else return Cr(e,n=>St(t,n.charCodeAt(0)))!==void 0}const Ji="PATTERN",Ns="defaultMode",oo="modes";let Dh=typeof new RegExp("(?:)").sticky=="boolean";function CA(t,e){e=Ll(e,{useSticky:Dh,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(v,k)=>k()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{eT()});let i;n("Reject Lexer.NA",()=>{i=Ya(t,v=>v[Ji]===ot.NA)});let r=!1,s;n("Transform Patterns",()=>{r=!1,s=ee(i,v=>{const k=v[Ji];if(ai(k)){const O=k.source;return O.length===1&&O!=="^"&&O!=="$"&&O!=="."&&!k.ignoreCase?O:O.length===2&&O[0]==="\\"&&!St(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],O[1])?O[1]:e.useSticky?Fh(k):jh(k)}else{if(ii(k))return r=!0,{exec:k};if(typeof k=="object")return r=!0,k;if(typeof k=="string"){if(k.length===1)return k;{const O=k.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),E=new RegExp(O);return e.useSticky?Fh(E):jh(E)}}else throw Error("non exhaustive match")}})});let a,o,c,l,u;n("misc mapping",()=>{a=ee(i,v=>v.tokenTypeIdx),o=ee(i,v=>{const k=v.GROUP;if(k!==ot.SKIPPED){if(Lt(k))return k;if(oi(k))return!1;throw Error("non exhaustive match")}}),c=ee(i,v=>{const k=v.LONGER_ALT;if(k)return we(k)?ee(k,E=>Ah(i,E)):[Ah(i,k)]}),l=ee(i,v=>v.PUSH_MODE),u=ee(i,v=>oe(v,"POP_MODE"))});let d;n("Line Terminator Handling",()=>{const v=zh(e.lineTerminatorCharacters);d=ee(i,k=>!1),e.positionTracking!=="onlyOffset"&&(d=ee(i,k=>oe(k,"LINE_BREAKS")?!!k.LINE_BREAKS:$h(k,v)===!1&&Bl(v,k.PATTERN)))});let f,p,h,m;n("Misc Mapping #2",()=>{f=ee(i,Bh),p=ee(s,ZA),h=Mt(i,(v,k)=>{const O=k.GROUP;return Lt(O)&&O!==ot.SKIPPED&&(v[O]=[]),v},{}),m=ee(s,(v,k)=>({pattern:s[k],longerAlt:c[k],canLineTerminator:d[k],isCustom:f[k],short:p[k],group:o[k],push:l[k],pop:u[k],tokenTypeIdx:a[k],tokenType:i[k]}))});let y=!0,x=[];return e.safeMode||n("First Char Optimization",()=>{x=Mt(i,(v,k,O)=>{if(typeof k.PATTERN=="string"){const E=k.PATTERN.charCodeAt(0),w=Ai(E);$l(v,w,m[O])}else if(we(k.START_CHARS_HINT)){let E;ce(k.START_CHARS_HINT,w=>{const _=typeof w=="string"?w.charCodeAt(0):w,S=Ai(_);E!==S&&(E=S,$l(v,S,m[O]))})}else if(ai(k.PATTERN))if(k.PATTERN.unicode)y=!1,e.ensureOptimizations&&Ul(`${so}	Unable to analyze < ${k.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const E=RA(k.PATTERN,e.ensureOptimizations);Ue(E)&&(y=!1),ce(E,w=>{$l(v,w,m[O])})}else e.ensureOptimizations&&Ul(`${so}	TokenType: <${k.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),y=!1;return v},[])}),{emptyGroups:h,patternIdxToConfig:m,charCodeToPatternIdxToConfig:x,hasCustom:r,canBeOptimized:y}}function NA(t,e){let n=[];const i=MA(t);n=n.concat(i.errors);const r=UA(i.valid),s=r.valid;return n=n.concat(r.errors),n=n.concat(LA(s)),n=n.concat(WA(s)),n=n.concat(GA(s,e)),n=n.concat(KA(s)),n}function LA(t){let e=[];const n=tn(t,i=>ai(i[Ji]));return e=e.concat(DA(n)),e=e.concat(BA(n)),e=e.concat($A(n)),e=e.concat(zA(n)),e=e.concat(jA(n)),e}function MA(t){const e=tn(t,r=>!oe(r,Ji)),n=ee(e,r=>({message:"Token Type: ->"+r.name+"<- missing static 'PATTERN' property",type:He.MISSING_PATTERN,tokenTypes:[r]})),i=qa(t,e);return{errors:n,valid:i}}function UA(t){const e=tn(t,r=>{const s=r[Ji];return!ai(s)&&!ii(s)&&!oe(s,"exec")&&!Lt(s)}),n=ee(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:He.INVALID_PATTERN,tokenTypes:[r]})),i=qa(t,e);return{errors:n,valid:i}}const PA=/[^\\][$]/;function DA(t){class e extends Dl{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const n=tn(t,r=>{const s=r.PATTERN;try{const a=ro(s),o=new e;return o.visit(a),o.found}catch{return PA.test(s.source)}});return ee(n,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:He.EOI_ANCHOR_FOUND,tokenTypes:[r]}))}function jA(t){const e=tn(t,i=>i.PATTERN.test(""));return ee(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' must not match an empty string",type:He.EMPTY_MATCH_PATTERN,tokenTypes:[i]}))}const FA=/[^\\[][\^]|^\^/;function BA(t){class e extends Dl{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const n=tn(t,r=>{const s=r.PATTERN;try{const a=ro(s),o=new e;return o.visit(a),o.found}catch{return FA.test(s.source)}});return ee(n,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:He.SOI_ANCHOR_FOUND,tokenTypes:[r]}))}function $A(t){const e=tn(t,i=>{const r=i[Ji];return r instanceof RegExp&&(r.multiline||r.global)});return ee(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:He.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[i]}))}function zA(t){const e=[];let n=ee(t,s=>Mt(t,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!St(e,o)&&o.PATTERN!==ot.NA&&(e.push(o),a.push(o)),a),[]));n=Rs(n);const i=tn(n,s=>s.length>1);return ee(i,s=>{const a=ee(s,c=>c.name);return{message:`The same RegExp pattern ->${mn(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:He.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function WA(t){const e=tn(t,i=>{if(!oe(i,"GROUP"))return!1;const r=i.GROUP;return r!==ot.SKIPPED&&r!==ot.NA&&!Lt(r)});return ee(e,i=>({message:"Token Type: ->"+i.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:He.INVALID_GROUP_TYPE_FOUND,tokenTypes:[i]}))}function GA(t,e){const n=tn(t,r=>r.PUSH_MODE!==void 0&&!St(e,r.PUSH_MODE));return ee(n,r=>({message:`Token Type: ->${r.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${r.PUSH_MODE}<-which does not exist`,type:He.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[r]}))}function KA(t){const e=[],n=Mt(t,(i,r,s)=>{const a=r.PATTERN;return a===ot.NA||(Lt(a)?i.push({str:a,idx:s,tokenType:r}):ai(a)&&VA(a)&&i.push({str:a.source,idx:s,tokenType:r})),i},[]);return ce(t,(i,r)=>{ce(n,({str:s,idx:a,tokenType:o})=>{if(r<a&&HA(s,i.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${i.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:He.UNREACHABLE_PATTERN,tokenTypes:[i,o]})}})}),e}function HA(t,e){if(ai(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(ii(e))return e(t,0,[],{});if(oe(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function VA(t){return Cr([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function jh(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Fh(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function qA(t,e,n){const i=[];return oe(t,Ns)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ns+`> property in its definition
`,type:He.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),oe(t,oo)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+oo+`> property in its definition
`,type:He.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),oe(t,oo)&&oe(t,Ns)&&!oe(t.modes,t.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${Ns}: <${t.defaultMode}>which does not exist
`,type:He.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),oe(t,oo)&&ce(t.modes,(r,s)=>{ce(r,(a,o)=>{if(oi(a))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:He.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(oe(a,"LONGER_ALT")){const c=we(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];ce(c,l=>{!oi(l)&&!St(r,l)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:He.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),i}function YA(t,e,n){const i=[];let r=!1;const s=Rs(Gt(tt(t.modes))),a=Ya(s,c=>c[Ji]===ot.NA),o=zh(n);return e&&ce(a,c=>{const l=$h(c,o);if(l!==!1){const d={message:QA(c,l),type:l.issue,tokenType:c};i.push(d)}else oe(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(r=!0):Bl(o,c.PATTERN)&&(r=!0)}),e&&!r&&i.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:He.NO_LINE_BREAKS_FLAGS}),i}function XA(t){const e={},n=Qt(t);return ce(n,i=>{const r=t[i];if(we(r))e[i]=[];else throw Error("non exhaustive match")}),e}function Bh(t){const e=t.PATTERN;if(ai(e))return!1;if(ii(e))return!0;if(oe(e,"exec"))return!0;if(Lt(e))return!1;throw Error("non exhaustive match")}function ZA(t){return Lt(t)&&t.length===1?t.charCodeAt(0):!1}const JA={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const i=t.charCodeAt(n);if(i===10)return this.lastIndex=n+1,!0;if(i===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function $h(t,e){if(oe(t,"LINE_BREAKS"))return!1;if(ai(t.PATTERN)){try{Bl(e,t.PATTERN)}catch(n){return{issue:He.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(Lt(t.PATTERN))return!1;if(Bh(t))return{issue:He.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function QA(t,e){if(e.issue===He.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===He.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function zh(t){return ee(t,n=>Lt(n)?n.charCodeAt(0):n)}function $l(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}const Ls=256;let co=[];function Ai(t){return t<Ls?t:co[t]}function eT(){if(Ue(co)){co=new Array(65536);for(let t=0;t<65536;t++)co[t]=t>255?255+~~(t/255):t}}function Ms(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function lo(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let Wh=1;const Gh={};function Us(t){const e=tT(t);nT(e),rT(e),iT(e),ce(e,n=>{n.isParent=n.categoryMatches.length>0})}function tT(t){let e=gt(t),n=t,i=!0;for(;i;){n=Rs(Gt(ee(n,s=>s.CATEGORIES)));const r=qa(n,e);e=e.concat(r),Ue(r)?i=!1:n=r}return e}function nT(t){ce(t,e=>{Hh(e)||(Gh[Wh]=e,e.tokenTypeIdx=Wh++),Vh(e)&&!we(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Vh(e)||(e.CATEGORIES=[]),sT(e)||(e.categoryMatches=[]),aT(e)||(e.categoryMatchesMap={})})}function iT(t){ce(t,e=>{e.categoryMatches=[],ce(e.categoryMatchesMap,(n,i)=>{e.categoryMatches.push(Gh[i].tokenTypeIdx)})})}function rT(t){ce(t,e=>{Kh([],e)})}function Kh(t,e){ce(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),ce(e.CATEGORIES,n=>{const i=t.concat(e);St(i,n)||Kh(i,n)})}function Hh(t){return oe(t,"tokenTypeIdx")}function Vh(t){return oe(t,"CATEGORIES")}function sT(t){return oe(t,"categoryMatches")}function aT(t){return oe(t,"categoryMatchesMap")}function oT(t){return oe(t,"tokenTypeIdx")}const cT={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,i,r){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var He;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(He||(He={}));const Ps={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:cT,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Ps);class ot{constructor(e,n=Ps){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(r,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${r}>`);const{time:o,value:c}=Oh(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${r}> time: ${o}ms`),this.traceInitIndent--,c}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Nt({},Ps,n);const i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let r,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Ps.lineTerminatorsPattern)this.config.lineTerminatorsPattern=JA;else if(this.config.lineTerminatorCharacters===Ps.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),we(e)?r={modes:{defaultMode:gt(e)},defaultMode:Ns}:(s=!1,r=gt(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(qA(r,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(YA(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),r.modes=r.modes?r.modes:{},ce(r.modes,(o,c)=>{r.modes[c]=Ya(o,l=>oi(l))});const a=Qt(r.modes);if(ce(r.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(NA(o,a))}),Ue(this.lexerDefinitionErrors)){Us(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=CA(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=Nt({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=r.defaultMode,!Ue(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=ee(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}ce(this.lexerDefinitionWarning,o=>{Rh(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Dh?(this.chopInput=Tr,this.match=this.matchWithTest):(this.updateLastIndex=st,this.match=this.matchWithExec),s&&(this.handleModes=st),this.trackStartLines===!1&&(this.computeNewColumn=Tr),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=st),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=Mt(this.canModeBeOptimized,(c,l,u)=>(l===!1&&c.push(u),c),[]);if(n.ensureOptimizations&&!Ue(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{TA()}),this.TRACE_INIT("toFastProperties",()=>{Ih(this)})})}tokenize(e,n=this.defaultMode){if(!Ue(this.lexerDefinitionErrors)){const r=ee(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+r)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let i,r,s,a,o,c,l,u,d,f,p,h,m,y,x;const v=e,k=v.length;let O=0,E=0;const w=this.hasCustom?0:Math.floor(e.length/10),_=new Array(w),S=[];let R=this.trackStartLines?1:void 0,j=this.trackStartLines?1:void 0;const V=XA(this.emptyGroups),C=this.trackStartLines,P=this.config.lineTerminatorsPattern;let b=0,D=[],J=[];const B=[],re=[];Object.freeze(re);let z;function se(){return D}function M(le){const be=Ai(le),de=J[be];return de===void 0?re:de}const L=le=>{if(B.length===1&&le.tokenType.PUSH_MODE===void 0){const be=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(le);S.push({offset:le.startOffset,line:le.startLine,column:le.startColumn,length:le.image.length,message:be})}else{B.pop();const be=Ir(B);D=this.patternIdxToConfig[be],J=this.charCodeToPatternIdxToConfig[be],b=D.length;const de=this.canModeBeOptimized[be]&&this.config.safeMode===!1;J&&de?z=M:z=se}};function Q(le){B.push(le),J=this.charCodeToPatternIdxToConfig[le],D=this.patternIdxToConfig[le],b=D.length,b=D.length;const be=this.canModeBeOptimized[le]&&this.config.safeMode===!1;J&&be?z=M:z=se}Q.call(this,n);let H;const G=this.config.recoveryEnabled;for(;O<k;){c=null;const le=v.charCodeAt(O),be=z(le),de=be.length;for(i=0;i<de;i++){H=be[i];const ue=H.pattern;l=null;const Se=H.short;if(Se!==!1?le===Se&&(c=ue):H.isCustom===!0?(x=ue.exec(v,O,_,V),x!==null?(c=x[0],x.payload!==void 0&&(l=x.payload)):c=null):(this.updateLastIndex(ue,O),c=this.match(ue,e,O)),c!==null){if(o=H.longerAlt,o!==void 0){const xe=o.length;for(s=0;s<xe;s++){const Fe=D[o[s]],Be=Fe.pattern;if(u=null,Fe.isCustom===!0?(x=Be.exec(v,O,_,V),x!==null?(a=x[0],x.payload!==void 0&&(u=x.payload)):a=null):(this.updateLastIndex(Be,O),a=this.match(Be,e,O)),a&&a.length>c.length){c=a,l=u,H=Fe;break}}}break}}if(c!==null){if(d=c.length,f=H.group,f!==void 0&&(p=H.tokenTypeIdx,h=this.createTokenInstance(c,O,p,H.tokenType,R,j,d),this.handlePayload(h,l),f===!1?E=this.addToken(_,E,h):V[f].push(h)),e=this.chopInput(e,d),O=O+d,j=this.computeNewColumn(j,d),C===!0&&H.canLineTerminator===!0){let ue=0,Se,xe;P.lastIndex=0;do Se=P.test(c),Se===!0&&(xe=P.lastIndex-1,ue++);while(Se===!0);ue!==0&&(R=R+ue,j=d-xe,this.updateTokenEndLineColumnLocation(h,f,xe,ue,R,j,d))}this.handleModes(H,L,Q,h)}else{const ue=O,Se=R,xe=j;let Fe=G===!1;for(;Fe===!1&&O<k;)for(e=this.chopInput(e,1),O++,r=0;r<b;r++){const Be=D[r],g=Be.pattern,$=Be.short;if($!==!1?v.charCodeAt(O)===$&&(Fe=!0):Be.isCustom===!0?Fe=g.exec(v,O,_,V)!==null:(this.updateLastIndex(g,O),Fe=g.exec(e)!==null),Fe===!0)break}if(m=O-ue,j=this.computeNewColumn(j,m),y=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(v,ue,m,Se,xe),S.push({offset:ue,line:Se,column:xe,length:m,message:y}),G===!1)break}}return this.hasCustom||(_.length=E),{tokens:_,groups:V,errors:S}}handleModes(e,n,i,r){if(e.pop===!0){const s=e.push;n(r),s!==void 0&&i.call(this,s)}else e.push!==void 0&&i.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,i,r,s,a,o){let c,l;n!==void 0&&(c=i===o-1,l=c?-1:0,r===1&&c===!0||(e.endLine=s+l,e.endColumn=a-1+-l))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,i,r){return{image:e,startOffset:n,tokenTypeIdx:i,tokenType:r}}createStartOnlyToken(e,n,i,r,s,a){return{image:e,startOffset:n,startLine:s,startColumn:a,tokenTypeIdx:i,tokenType:r}}createFullToken(e,n,i,r,s,a,o){return{image:e,startOffset:n,endOffset:n+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:i,tokenType:r}}addTokenUsingPush(e,n,i){return e.push(i),n}addTokenUsingMemberAccess(e,n,i){return e[n]=i,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,i){return e.test(n)===!0?n.substring(i,e.lastIndex):null}matchWithExec(e,n){const i=e.exec(n);return i!==null?i[0]:null}}ot.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",ot.NA=/NOT_APPLICABLE/;function Ds(t){return qh(t)?t.LABEL:t.name}function qh(t){return Lt(t.LABEL)&&t.LABEL!==""}const lT="parent",Yh="categories",Xh="label",Zh="group",Jh="push_mode",Qh="pop_mode",em="longer_alt",tm="line_breaks",nm="start_chars_hint";function Kt(t){return uT(t)}function uT(t){const e=t.pattern,n={};if(n.name=t.name,oi(e)||(n.PATTERN=e),oe(t,lT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return oe(t,Yh)&&(n.CATEGORIES=t[Yh]),Us([n]),oe(t,Xh)&&(n.LABEL=t[Xh]),oe(t,Zh)&&(n.GROUP=t[Zh]),oe(t,Qh)&&(n.POP_MODE=t[Qh]),oe(t,Jh)&&(n.PUSH_MODE=t[Jh]),oe(t,em)&&(n.LONGER_ALT=t[em]),oe(t,tm)&&(n.LINE_BREAKS=t[tm]),oe(t,nm)&&(n.START_CHARS_HINT=t[nm]),n}const Qi=Kt({name:"EOF",pattern:ot.NA});Us([Qi]);function uo(t,e,n,i,r,s,a,o){return{image:e,startOffset:n,endOffset:i,startLine:r,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function pT(t,e){return Ms(t,e)}const im={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:i}){return`Expecting ${qh(t)?`--> ${Ds(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:i,ruleName:r}){const s="Expecting: ",o=`
but found: '`+mn(e).image+"'";if(i)return s+i+o;{const c=Mt(t,(f,p)=>f.concat(p),[]),l=ee(c,f=>`[${ee(f,p=>Ds(p)).join(", ")}]`),d=`one of these possible Token sequences:
${ee(l,(f,p)=>`  ${p+1}. ${f}`).join(`
`)}`;return s+d+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:i}){const r="Expecting: ",a=`
but found: '`+mn(e).image+"'";if(n)return r+n+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${ee(t,l=>`[${ee(l,u=>Ds(u)).join(",")}]`).join(" ,")}>`;return r+c+a}}};Object.freeze(im);const dT={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},er={buildDuplicateFoundError(t,e){function n(u){return u instanceof Ge?u.terminalType.name:u instanceof Ut?u.nonTerminalName:""}const i=t.name,r=mn(e),s=r.idx,a=jn(r),o=n(r),c=s>0;let l=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${i}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=ee(t.prefixPath,r=>Ds(r)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=ee(t.prefixPath,r=>Ds(r)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let i=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i},buildEmptyRepetitionError(t){let e=jn(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=ee(t.leftRecursionPath,s=>s.name),i=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${i}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof Nr?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function fT(t,e){const n=new hT(t,e);return n.resolveRefs(),n.errors}class hT extends Zi{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){ce(tt(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const i=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:i,type:At.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class mT extends Qa{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=gt(this.path.ruleStack).reverse(),this.occurrenceStack=gt(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,i){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const r=n.concat(i);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}updateExpectedNext(){Ue(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class gT extends mT{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,i){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const r=n.concat(i),s=new Pt({definition:r});this.possibleTokTypes=Is(s),this.found=!0}}}class po extends Qa{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class vT extends po{walkMany(e,n,i){if(e.idx===this.occurrence){const r=mn(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof Ge&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkMany(e,n,i)}}class rm extends po{walkManySep(e,n,i){if(e.idx===this.occurrence){const r=mn(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof Ge&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkManySep(e,n,i)}}class bT extends po{walkAtLeastOne(e,n,i){if(e.idx===this.occurrence){const r=mn(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof Ge&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOne(e,n,i)}}class sm extends po{walkAtLeastOneSep(e,n,i){if(e.idx===this.occurrence){const r=mn(n.concat(i));this.result.isEndOfRule=r===void 0,r instanceof Ge&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOneSep(e,n,i)}}function zl(t,e,n=[]){n=gt(n);let i=[],r=0;function s(o){return o.concat(vt(t,r+1))}function a(o){const c=zl(s(o),e,n);return i.concat(c)}for(;n.length<e&&r<t.length;){const o=t[r];if(o instanceof Pt)return a(o.definition);if(o instanceof Ut)return a(o.definition);if(o instanceof Dt)i=a(o.definition);else if(o instanceof Pn){const c=o.definition.concat([new at({definition:o.definition})]);return a(c)}else if(o instanceof Dn){const c=[new Pt({definition:o.definition}),new at({definition:[new Ge({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof vn){const c=o.definition.concat([new at({definition:[new Ge({terminalType:o.separator})].concat(o.definition)})]);i=a(c)}else if(o instanceof at){const c=o.definition.concat([new at({definition:o.definition})]);i=a(c)}else{if(o instanceof bn)return ce(o.definition,c=>{Ue(c.definition)===!1&&(i=a(c.definition))}),i;if(o instanceof Ge)n.push(o.terminalType);else throw Error("non exhaustive match")}r++}return i.push({partialPath:n,suffixDef:vt(t,r)}),i}function am(t,e,n,i){const r="EXIT_NONE_TERMINAL",s=[r],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,l=c-i-1,u=[],d=[];for(d.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Ue(d);){const f=d.pop();if(f===a){o&&Ir(d).idx<=l&&d.pop();continue}const p=f.def,h=f.idx,m=f.ruleStack,y=f.occurrenceStack;if(Ue(p))continue;const x=p[0];if(x===r){const v={idx:h,def:vt(p),ruleStack:Os(m),occurrenceStack:Os(y)};d.push(v)}else if(x instanceof Ge)if(h<c-1){const v=h+1,k=e[v];if(n(k,x.terminalType)){const O={idx:v,def:vt(p),ruleStack:m,occurrenceStack:y};d.push(O)}}else if(h===c-1)u.push({nextTokenType:x.terminalType,nextTokenOccurrence:x.idx,ruleStack:m,occurrenceStack:y}),o=!0;else throw Error("non exhaustive match");else if(x instanceof Ut){const v=gt(m);v.push(x.nonTerminalName);const k=gt(y);k.push(x.idx);const O={idx:h,def:x.definition.concat(s,vt(p)),ruleStack:v,occurrenceStack:k};d.push(O)}else if(x instanceof Dt){const v={idx:h,def:vt(p),ruleStack:m,occurrenceStack:y};d.push(v),d.push(a);const k={idx:h,def:x.definition.concat(vt(p)),ruleStack:m,occurrenceStack:y};d.push(k)}else if(x instanceof Pn){const v=new at({definition:x.definition,idx:x.idx}),k=x.definition.concat([v],vt(p)),O={idx:h,def:k,ruleStack:m,occurrenceStack:y};d.push(O)}else if(x instanceof Dn){const v=new Ge({terminalType:x.separator}),k=new at({definition:[v].concat(x.definition),idx:x.idx}),O=x.definition.concat([k],vt(p)),E={idx:h,def:O,ruleStack:m,occurrenceStack:y};d.push(E)}else if(x instanceof vn){const v={idx:h,def:vt(p),ruleStack:m,occurrenceStack:y};d.push(v),d.push(a);const k=new Ge({terminalType:x.separator}),O=new at({definition:[k].concat(x.definition),idx:x.idx}),E=x.definition.concat([O],vt(p)),w={idx:h,def:E,ruleStack:m,occurrenceStack:y};d.push(w)}else if(x instanceof at){const v={idx:h,def:vt(p),ruleStack:m,occurrenceStack:y};d.push(v),d.push(a);const k=new at({definition:x.definition,idx:x.idx}),O=x.definition.concat([k],vt(p)),E={idx:h,def:O,ruleStack:m,occurrenceStack:y};d.push(E)}else if(x instanceof bn)for(let v=x.definition.length-1;v>=0;v--){const k=x.definition[v],O={idx:h,def:k.definition.concat(vt(p)),ruleStack:m,occurrenceStack:y};d.push(O),d.push(a)}else if(x instanceof Pt)d.push({idx:h,def:x.definition.concat(vt(p)),ruleStack:m,occurrenceStack:y});else if(x instanceof Nr)d.push(xT(x,h,m,y));else throw Error("non exhaustive match")}return u}function xT(t,e,n,i){const r=gt(n);r.push(t.name);const s=gt(i);return s.push(1),{idx:e,def:t.definition,ruleStack:r,occurrenceStack:s}}var Ve;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(Ve||(Ve={}));function om(t){if(t instanceof Dt||t==="Option")return Ve.OPTION;if(t instanceof at||t==="Repetition")return Ve.REPETITION;if(t instanceof Pn||t==="RepetitionMandatory")return Ve.REPETITION_MANDATORY;if(t instanceof Dn||t==="RepetitionMandatoryWithSeparator")return Ve.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof vn||t==="RepetitionWithSeparator")return Ve.REPETITION_WITH_SEPARATOR;if(t instanceof bn||t==="Alternation")return Ve.ALTERNATION;throw Error("non exhaustive match")}function yT(t,e,n,i,r,s){const a=Gl(t,e,n),o=pm(a)?lo:Ms;return s(a,i,o,r)}function _T(t,e,n,i,r,s){const a=Kl(t,e,r,n),o=pm(a)?lo:Ms;return s(a[0],o,i)}function wT(t,e,n,i){const r=t.length,s=hn(t,a=>hn(a,o=>o.length===1));if(e)return function(a){const o=ee(a,c=>c.GATE);for(let c=0;c<r;c++){const l=t[c],u=l.length,d=o[c];if(!(d!==void 0&&d.call(this)===!1))e:for(let f=0;f<u;f++){const p=l[f],h=p.length;for(let m=0;m<h;m++){const y=this.LA(m+1);if(n(y,p[m])===!1)continue e}return c}}};if(s&&!i){const a=ee(t,c=>Gt(c)),o=Mt(a,(c,l,u)=>(ce(l,d=>{oe(c,d.tokenTypeIdx)||(c[d.tokenTypeIdx]=u),ce(d.categoryMatches,f=>{oe(c,f)||(c[f]=u)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<r;a++){const o=t[a],c=o.length;e:for(let l=0;l<c;l++){const u=o[l],d=u.length;for(let f=0;f<d;f++){const p=this.LA(f+1);if(n(p,u[f])===!1)continue e}return a}}}}function ET(t,e,n){const i=hn(t,s=>s.length===1),r=t.length;if(i&&!n){const s=Gt(t);if(s.length===1&&Ue(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=Mt(s,(o,c,l)=>(o[c.tokenTypeIdx]=!0,ce(c.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<r;s++){const a=t[s],o=a.length;for(let c=0;c<o;c++){const l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}class kT extends Qa{constructor(e,n,i){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=i}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,i,r){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=i.concat(r),!0):!1}walkOption(e,n,i){this.checkIsTarget(e,Ve.OPTION,n,i)||super.walkOption(e,n,i)}walkAtLeastOne(e,n,i){this.checkIsTarget(e,Ve.REPETITION_MANDATORY,n,i)||super.walkOption(e,n,i)}walkAtLeastOneSep(e,n,i){this.checkIsTarget(e,Ve.REPETITION_MANDATORY_WITH_SEPARATOR,n,i)||super.walkOption(e,n,i)}walkMany(e,n,i){this.checkIsTarget(e,Ve.REPETITION,n,i)||super.walkOption(e,n,i)}walkManySep(e,n,i){this.checkIsTarget(e,Ve.REPETITION_WITH_SEPARATOR,n,i)||super.walkOption(e,n,i)}}class cm extends Zi{constructor(e,n,i){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=i,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Ve.OPTION)}visitRepetition(e){this.checkIsTarget(e,Ve.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Ve.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Ve.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Ve.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Ve.ALTERNATION)}}function lm(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function Wl(t){let e=[""];for(let n=0;n<t.length;n++){const i=t[n],r=[];for(let s=0;s<e.length;s++){const a=e[s];r.push(a+"_"+i.tokenTypeIdx);for(let o=0;o<i.categoryMatches.length;o++){const c="_"+i.categoryMatches[o];r.push(a+c)}}e=r}return e}function ST(t,e,n){for(let i=0;i<t.length;i++){if(i===n)continue;const r=t[i];for(let s=0;s<e.length;s++){const a=e[s];if(r[a]===!0)return!1}}return!0}function um(t,e){const n=ee(t,a=>zl([a],1)),i=lm(n.length),r=ee(n,a=>{const o={};return ce(a,c=>{const l=Wl(c.partialPath);ce(l,u=>{o[u]=!0})}),o});let s=n;for(let a=1;a<=e;a++){const o=s;s=lm(o.length);for(let c=0;c<o.length;c++){const l=o[c];for(let u=0;u<l.length;u++){const d=l[u].partialPath,f=l[u].suffixDef,p=Wl(d);if(ST(r,p,c)||Ue(f)||d.length===e){const m=i[c];if(Hl(m,d)===!1){m.push(d);for(let y=0;y<p.length;y++){const x=p[y];r[c][x]=!0}}}else{const m=zl(f,a+1,d);s[c]=s[c].concat(m),ce(m,y=>{const x=Wl(y.partialPath);ce(x,v=>{r[c][v]=!0})})}}}}return i}function Gl(t,e,n,i){const r=new cm(t,Ve.ALTERNATION,i);return e.accept(r),um(r.result,n)}function Kl(t,e,n,i){const r=new cm(t,n);e.accept(r);const s=r.result,o=new kT(e,t,n).startWalking(),c=new Pt({definition:s}),l=new Pt({definition:o});return um([c,l],i)}function Hl(t,e){e:for(let n=0;n<t.length;n++){const i=t[n];if(i.length===e.length){for(let r=0;r<i.length;r++){const s=e[r],a=i[r];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function AT(t,e){return t.length<e.length&&hn(t,(n,i)=>{const r=e[i];return n===r||r.categoryMatchesMap[n.tokenTypeIdx]})}function pm(t){return hn(t,e=>hn(e,n=>hn(n,i=>Ue(i.categoryMatches))))}function TT(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return ee(e,n=>Object.assign({type:At.CUSTOM_LOOKAHEAD_VALIDATION},n))}function RT(t,e,n,i){const r=nn(t,c=>OT(c,n)),s=$T(t,e,n),a=nn(t,c=>DT(c,n)),o=nn(t,c=>NT(c,t,i,n));return r.concat(s,a,o)}function OT(t,e){const n=new CT;t.accept(n);const i=n.allProductions,r=Sh(i,IT),s=gn(r,o=>o.length>1);return ee(tt(s),o=>{const c=mn(o),l=e.buildDuplicateFoundError(t,o),u=jn(c),d={message:l,type:At.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:u,occurrence:c.idx},f=dm(c);return f&&(d.parameter=f),d})}function IT(t){return`${jn(t)}_#_${t.idx}_#_${dm(t)}`}function dm(t){return t instanceof Ge?t.terminalType.name:t instanceof Ut?t.nonTerminalName:""}class CT extends Zi{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function NT(t,e,n,i){const r=[];if(Mt(e,(a,o)=>o.name===t.name?a+1:a,0)>1){const a=i.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});r.push({message:a,type:At.DUPLICATE_RULE_NAME,ruleName:t.name})}return r}function LT(t,e,n){const i=[];let r;return St(e,t)||(r=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,i.push({message:r,type:At.INVALID_RULE_OVERRIDE,ruleName:t})),i}function fm(t,e,n,i=[]){const r=[],s=fo(e.definition);if(Ue(s))return[];{const a=t.name;St(s,t)&&r.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:i}),type:At.LEFT_RECURSION,ruleName:a});const c=qa(s,i.concat([t])),l=nn(c,u=>{const d=gt(i);return d.push(u),fm(t,u,n,d)});return r.concat(l)}}function fo(t){let e=[];if(Ue(t))return e;const n=mn(t);if(n instanceof Ut)e.push(n.referencedRule);else if(n instanceof Pt||n instanceof Dt||n instanceof Pn||n instanceof Dn||n instanceof vn||n instanceof at)e=e.concat(fo(n.definition));else if(n instanceof bn)e=Gt(ee(n.definition,s=>fo(s.definition)));else if(!(n instanceof Ge))throw Error("non exhaustive match");const i=Ja(n),r=t.length>1;if(i&&r){const s=vt(t);return e.concat(fo(s))}else return e}class Vl extends Zi{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function MT(t,e){const n=new Vl;t.accept(n);const i=n.alternations;return nn(i,s=>{const a=Os(s.definition);return nn(a,(o,c)=>{const l=am([o],[],Ms,1);return Ue(l)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:c}),type:At.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:c+1}]:[]})})}function UT(t,e,n){const i=new Vl;t.accept(i);let r=i.alternations;return r=Ya(r,a=>a.ignoreAmbiguities===!0),nn(r,a=>{const o=a.idx,c=a.maxLookahead||e,l=Gl(o,t,c,a),u=FT(l,a,t,n),d=BT(l,a,t,n);return u.concat(d)})}class PT extends Zi{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function DT(t,e){const n=new Vl;t.accept(n);const i=n.alternations;return nn(i,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:At.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function jT(t,e,n){const i=[];return ce(t,r=>{const s=new PT;r.accept(s);const a=s.allProductions;ce(a,o=>{const c=om(o),l=o.maxLookahead||e,u=o.idx,f=Kl(u,r,c,l)[0];if(Ue(Gt(f))){const p=n.buildEmptyRepetitionError({topLevelRule:r,repetition:o});i.push({message:p,type:At.NO_NON_EMPTY_LOOKAHEAD,ruleName:r.name})}})}),i}function FT(t,e,n,i){const r=[],s=Mt(t,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||ce(c,u=>{const d=[l];ce(t,(f,p)=>{l!==p&&Hl(f,u)&&e.definition[p].ignoreAmbiguities!==!0&&d.push(p)}),d.length>1&&!Hl(r,u)&&(r.push(u),o.push({alts:d,path:u}))}),o),[]);return ee(s,o=>{const c=ee(o.alts,u=>u+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:At.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:o.alts}})}function BT(t,e,n,i){const r=Mt(t,(a,o,c)=>{const l=ee(o,u=>({idx:c,path:u}));return a.concat(l)},[]);return Rs(nn(r,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,l=a.path,u=tn(r,f=>e.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<c&&AT(f.path,l));return ee(u,f=>{const p=[f.idx+1,c+1],h=e.idx===0?"":e.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:p,prefixPath:f.path}),type:At.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:h,alternatives:p}})}))}function $T(t,e,n){const i=[],r=ee(e,s=>s.name);return ce(t,s=>{const a=s.name;if(St(r,a)){const o=n.buildNamespaceConflictError(s);i.push({message:o,type:At.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),i}function zT(t){const e=Ll(t,{errMsgProvider:dT}),n={};return ce(t.rules,i=>{n[i.name]=i}),fT(n,e.errMsgProvider)}function WT(t){return t=Ll(t,{errMsgProvider:er}),RT(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const hm="MismatchedTokenException",mm="NoViableAltException",gm="EarlyExitException",vm="NotAllInputParsedException",bm=[hm,mm,gm,vm];Object.freeze(bm);function ho(t){return St(bm,t.name)}class mo extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class xm extends mo{constructor(e,n,i){super(e,n),this.previousToken=i,this.name=hm}}class GT extends mo{constructor(e,n,i){super(e,n),this.previousToken=i,this.name=mm}}class KT extends mo{constructor(e,n){super(e,n),this.name=vm}}class HT extends mo{constructor(e,n,i){super(e,n),this.previousToken=i,this.name=gm}}const ql={},ym="InRuleRecoveryException";class VT extends Error{constructor(e){super(e),this.name=ym}}class qT{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=oe(e,"recoveryEnabled")?e.recoveryEnabled:ci.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=YT)}getTokenToInsert(e){const n=uo(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,i,r){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const l=this.LA(1);let u=this.LA(1);const d=()=>{const f=this.LA(0),p=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:l,previous:f,ruleName:this.getCurrRuleFullName()}),h=new xm(p,l,this.LA(0));h.resyncedTokens=Os(o),this.SAVE_ERROR(h)};for(;!c;)if(this.tokenMatcher(u,r)){d();return}else if(i.call(this)){d(),e.apply(this,n);return}else this.tokenMatcher(u,s)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,n,i){return!(i===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const i=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(i)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const i=this.SKIP_TOKEN();return this.consumeToken(),i}throw new VT("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||Ue(n))return!1;const i=this.LA(1);return Cr(n,s=>this.tokenMatcher(i,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),i=this.getFollowSetFromFollowKey(n);return St(i,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),i=2;for(;;){const r=Cr(e,s=>pT(n,s));if(r!==void 0)return r;n=this.LA(i),i++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return ql;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),i=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(i)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return ee(e,(i,r)=>r===0?ql:{ruleName:this.shortRuleNameToFullName(i),idxInCallingRule:n[r],inRule:this.shortRuleNameToFullName(e[r-1])})}flattenFollowSet(){const e=ee(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return Gt(e)}getFollowSetFromFollowKey(e){if(e===ql)return[Qi];const n=e.ruleName+e.idxInCallingRule+Nh+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,Qi)||n.push(e),n}reSyncTo(e){const n=[];let i=this.LA(1);for(;this.tokenMatcher(i,e)===!1;)i=this.SKIP_TOKEN(),this.addToResyncTokens(i,n);return Os(n)}attemptInRepetitionRecovery(e,n,i,r,s,a,o){}getCurrentGrammarPath(e,n){const i=this.getHumanReadableRuleStack(),r=gt(this.RULE_OCCURRENCE_STACK);return{ruleStack:i,occurrenceStack:r,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return ee(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function YT(t,e,n,i,r,s,a){const o=this.getKeyForAutomaticLookahead(i,r);let c=this.firstAfterRepMap[o];if(c===void 0){const f=this.getCurrRuleFullName(),p=this.getGAstProductions()[f];c=new s(p,r).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,u=c.occurrence;const d=c.isEndOfRule;this.RULE_STACK.length===1&&d&&l===void 0&&(l=Qi,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,a)&&this.tryInRepetitionRecovery(t,e,n,l)}const XT=4,Ti=8,_m=1<<Ti,wm=2<<Ti,Yl=3<<Ti,Xl=4<<Ti,Zl=5<<Ti,go=6<<Ti;function Jl(t,e,n){return n|e|t}class ZT{constructor(e){var n;this.maxLookahead=(n=e==null?void 0:e.maxLookahead)!==null&&n!==void 0?n:ci.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(Ue(n)){const i=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...i,...r,...s]}return n}validateNoLeftRecursion(e){return nn(e,n=>fm(n,n,er))}validateEmptyOrAlternatives(e){return nn(e,n=>MT(n,er))}validateAmbiguousAlternationAlternatives(e,n){return nn(e,i=>UT(i,n,er))}validateSomeNonEmptyLookaheadPath(e,n){return jT(e,n,er)}buildLookaheadForAlternation(e){return yT(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,wT)}buildLookaheadForOptional(e){return _T(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,om(e.prodType),ET)}}class JT{initLooksAhead(e){this.dynamicTokensEnabled=oe(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:ci.dynamicTokensEnabled,this.maxLookahead=oe(e,"maxLookahead")?e.maxLookahead:ci.maxLookahead,this.lookaheadStrategy=oe(e,"lookaheadStrategy")?e.lookaheadStrategy:new ZT({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){ce(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:i,repetition:r,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=eR(n);ce(i,l=>{const u=l.idx===0?"":l.idx;this.TRACE_INIT(`${jn(l)}${u}`,()=>{const d=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:n,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=Jl(this.fullRuleNameToShort[n.name],_m,l.idx);this.setLaFuncCache(f,d)})}),ce(r,l=>{this.computeLookaheadFunc(n,l.idx,Yl,"Repetition",l.maxLookahead,jn(l))}),ce(s,l=>{this.computeLookaheadFunc(n,l.idx,wm,"Option",l.maxLookahead,jn(l))}),ce(a,l=>{this.computeLookaheadFunc(n,l.idx,Xl,"RepetitionMandatory",l.maxLookahead,jn(l))}),ce(o,l=>{this.computeLookaheadFunc(n,l.idx,go,"RepetitionMandatoryWithSeparator",l.maxLookahead,jn(l))}),ce(c,l=>{this.computeLookaheadFunc(n,l.idx,Zl,"RepetitionWithSeparator",l.maxLookahead,jn(l))})})})}computeLookaheadFunc(e,n,i,r,s,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),c=Jl(this.fullRuleNameToShort[e.name],i,n);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,n){const i=this.getLastExplicitRuleShortName();return Jl(i,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class QT extends Zi{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const vo=new QT;function eR(t){vo.reset(),t.accept(vo);const e=vo.dslMethods;return vo.reset(),e}function Em(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function km(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function tR(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function nR(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}const iR="name";function Sm(t,e){Object.defineProperty(t,iR,{enumerable:!1,configurable:!0,writable:!1,value:e})}function rR(t,e){const n=Qt(t),i=n.length;for(let r=0;r<i;r++){const s=n[r],a=t[s],o=a.length;for(let c=0;c<o;c++){const l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function sR(t,e){const n=function(){};Sm(n,t+"BaseSemantics");const i={visit:function(r,s){if(we(r)&&(r=r[0]),!oi(r))return this[r.name](r.children,s)},validateVisitor:function(){const r=oR(this,e);if(!Ue(r)){const s=ee(r,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=i,n.prototype.constructor=n,n._RULE_NAMES=e,n}function aR(t,e,n){const i=function(){};Sm(i,t+"BaseSemanticsWithDefaults");const r=Object.create(n.prototype);return ce(e,s=>{r[s]=rR}),i.prototype=r,i.prototype.constructor=i,i}var Ql;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(Ql||(Ql={}));function oR(t,e){return cR(t,e)}function cR(t,e){const n=tn(e,r=>ii(t[r])===!1),i=ee(n,r=>({msg:`Missing visitor method: <${r}> on ${t.constructor.name} CST Visitor.`,type:Ql.MISSING_METHOD,methodName:r}));return Rs(i)}class lR{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=oe(e,"nodeLocationTracking")?e.nodeLocationTracking:ci.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=st,this.cstFinallyStateUpdate=st,this.cstPostTerminal=st,this.cstPostNonTerminal=st,this.cstPostRule=st;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=km,this.setNodeLocationFromNode=km,this.cstPostRule=st,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=st,this.setNodeLocationFromNode=st,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Em,this.setNodeLocationFromNode=Em,this.cstPostRule=st,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=st,this.setNodeLocationFromNode=st,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=st,this.setNodeLocationFromNode=st,this.cstPostRule=st,this.setInitialNodeLocation=st;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),i=e.location;i.startOffset<=n.startOffset?(i.endOffset=n.endOffset,i.endLine=n.endLine,i.endColumn=n.endColumn):(i.startOffset=NaN,i.startLine=NaN,i.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),i=e.location;i.startOffset<=n.startOffset?i.endOffset=n.endOffset:i.startOffset=NaN}cstPostTerminal(e,n){const i=this.CST_STACK[this.CST_STACK.length-1];tR(i,n,e),this.setNodeLocationFromToken(i.location,n)}cstPostNonTerminal(e,n){const i=this.CST_STACK[this.CST_STACK.length-1];nR(i,n,e),this.setNodeLocationFromNode(i.location,e.location)}getBaseCstVisitorConstructor(){if(oi(this.baseCstVisitorConstructor)){const e=sR(this.className,Qt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(oi(this.baseCstVisitorWithDefaultsConstructor)){const e=aR(this.className,Qt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class uR{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):yo}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?yo:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class pR{ACTION(e){return e.call(this)}consume(e,n,i){return this.consumeInternal(n,e,i)}subrule(e,n,i){return this.subruleInternal(n,e,i)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,i=_o){if(St(this.definedRulesNames,e)){const a={message:er.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:At.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const r=this.defineRule(e,n,i);return this[e]=r,r}OVERRIDE_RULE(e,n,i=_o){const r=LT(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const s=this.defineRule(e,n,i);return this[e]=s,s}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const i=this.saveRecogState();try{return e.apply(this,n),!0}catch(r){if(ho(r))return!1;throw r}finally{this.reloadRecogState(i),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return fA(tt(this.gastProductionsCache))}}class dR{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=lo,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},oe(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(we(e)){if(Ue(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(we(e))this.tokensMap=Mt(e,(s,a)=>(s[a.name]=a,s),{});else if(oe(e,"modes")&&hn(Gt(tt(e.modes)),oT)){const s=Gt(tt(e.modes)),a=Xa(s);this.tokensMap=Mt(a,(o,c)=>(o[c.name]=c,o),{})}else if(Jt(e))this.tokensMap=gt(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Qi;const i=oe(e,"modes")?Gt(tt(e.modes)):tt(e),r=hn(i,s=>Ue(s.categoryMatches));this.tokenMatcher=r?lo:Ms,Us(tt(this.tokensMap))}defineRule(e,n,i){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=oe(i,"resyncEnabled")?i.resyncEnabled:_o.resyncEnabled,s=oe(i,"recoveryValueFunc")?i.recoveryValueFunc:_o.recoveryValueFunc,a=this.ruleShortNameIdx<<XT+Ti;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,u);const d=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(d),d}catch(d){return this.invokeRuleCatch(d,r,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,u)}catch(d){return this.invokeRuleCatch(d,r,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,i){const r=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(ho(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return i(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(r)return this.moveToTerminatedState(),i(e);throw a}}else throw e}optionInternal(e,n){const i=this.getKeyForAutomaticLookahead(wm,n);return this.optionInternalLogic(e,n,i)}optionInternalLogic(e,n,i){let r=this.getLaFuncFromCache(i),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=r;r=()=>a.call(this)&&o.call(this)}}else s=e;if(r.call(this)===!0)return s.call(this)}atLeastOneInternal(e,n){const i=this.getKeyForAutomaticLookahead(Xl,e);return this.atLeastOneInternalLogic(e,n,i)}atLeastOneInternalLogic(e,n,i){let r=this.getLaFuncFromCache(i),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const o=r;r=()=>a.call(this)&&o.call(this)}}else s=n;if(r.call(this)===!0){let a=this.doSingleRepetition(s);for(;r.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,Ve.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],r,Xl,e,bT)}atLeastOneSepFirstInternal(e,n){const i=this.getKeyForAutomaticLookahead(go,e);this.atLeastOneSepFirstInternalLogic(e,n,i)}atLeastOneSepFirstInternalLogic(e,n,i){const r=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){r.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,r,sm],o,go,e,sm)}else throw this.raiseEarlyExitException(e,Ve.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const i=this.getKeyForAutomaticLookahead(Yl,e);return this.manyInternalLogic(e,n,i)}manyInternalLogic(e,n,i){let r=this.getLaFuncFromCache(i),s;if(typeof n!="function"){s=n.DEF;const o=n.GATE;if(o!==void 0){const c=r;r=()=>o.call(this)&&c.call(this)}}else s=n;let a=!0;for(;r.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],r,Yl,e,vT,a)}manySepFirstInternal(e,n){const i=this.getKeyForAutomaticLookahead(Zl,e);this.manySepFirstInternalLogic(e,n,i)}manySepFirstInternalLogic(e,n,i){const r=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){r.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,r,rm],o,Zl,e,rm)}}repetitionSepSecondInternal(e,n,i,r,s){for(;i();)this.CONSUME(n),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,i,r,s],i,go,e,s)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const i=this.getKeyForAutomaticLookahead(_m,n),r=we(e)?e:e.DEF,a=this.getLaFuncFromCache(i).call(this,r);if(a!==void 0)return r[a].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new KT(n,e))}}subruleInternal(e,n,i){let r;try{const s=i!==void 0?i.ARGS:void 0;return this.subruleIdx=n,r=e.apply(this,s),this.cstPostNonTerminal(r,i!==void 0&&i.LABEL!==void 0?i.LABEL:e.ruleName),r}catch(s){throw this.subruleInternalError(s,i,e.ruleName)}}subruleInternalError(e,n,i){throw ho(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:i),delete e.partialCstResult),e}consumeInternal(e,n,i){let r;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),r=s):this.consumeInternalError(e,s,i)}catch(s){r=this.consumeInternalRecovery(e,n,s)}return this.cstPostTerminal(i!==void 0&&i.LABEL!==void 0?i.LABEL:e.name,r),r}consumeInternalError(e,n,i){let r;const s=this.LA(0);throw i!==void 0&&i.ERR_MSG?r=i.ERR_MSG:r=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new xm(r,n,s))}consumeInternalRecovery(e,n,i){if(this.recoveryEnabled&&i.name==="MismatchedTokenException"&&!this.isBackTracking()){const r=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,r)}catch(s){throw s.name===ym?i:s}}else throw i}saveRecogState(){const e=this.errors,n=gt(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,i){this.RULE_OCCURRENCE_STACK.push(i),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Qi)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class fR{initErrorHandler(e){this._errors=[],this.errorMessageProvider=oe(e,"errorMessageProvider")?e.errorMessageProvider:ci.errorMessageProvider}SAVE_ERROR(e){if(ho(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:gt(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return gt(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,i){const r=this.getCurrRuleFullName(),s=this.getGAstProductions()[r],o=Kl(e,s,n,this.maxLookahead)[0],c=[];for(let u=1;u<=this.maxLookahead;u++)c.push(this.LA(u));const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:i,ruleName:r});throw this.SAVE_ERROR(new HT(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const i=this.getCurrRuleFullName(),r=this.getGAstProductions()[i],s=Gl(e,r,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new GT(c,this.LA(1),o))}}class hR{initContentAssist(){}computeContentAssist(e,n){const i=this.gastProductionsCache[e];if(oi(i))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return am([i],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=mn(e.ruleStack),r=this.getGAstProductions()[n];return new gT(r,e).startWalking()}}const bo={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(bo);const Am=!0,Tm=Math.pow(2,Ti)-1,Rm=Kt({name:"RECORDING_PHASE_TOKEN",pattern:ot.NA});Us([Rm]);const Om=uo(Rm,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Om);const mR={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class gR{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(i,r){return this.consumeInternalRecord(i,e,r)},this[`SUBRULE${n}`]=function(i,r){return this.subruleInternalRecord(i,e,r)},this[`OPTION${n}`]=function(i){return this.optionInternalRecord(i,e)},this[`OR${n}`]=function(i){return this.orInternalRecord(i,e)},this[`MANY${n}`]=function(i){this.manyInternalRecord(e,i)},this[`MANY_SEP${n}`]=function(i){this.manySepFirstInternalRecord(e,i)},this[`AT_LEAST_ONE${n}`]=function(i){this.atLeastOneInternalRecord(e,i)},this[`AT_LEAST_ONE_SEP${n}`]=function(i){this.atLeastOneSepFirstInternalRecord(e,i)}}this.consume=function(e,n,i){return this.consumeInternalRecord(n,e,i)},this.subrule=function(e,n,i){return this.subruleInternalRecord(n,e,i)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const i=n>0?n:"";delete e[`CONSUME${i}`],delete e[`SUBRULE${i}`],delete e[`OPTION${i}`],delete e[`OR${i}`],delete e[`MANY${i}`],delete e[`MANY_SEP${i}`],delete e[`AT_LEAST_ONE${i}`],delete e[`AT_LEAST_ONE_SEP${i}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return yo}topLevelRuleRecord(e,n){try{const i=new Nr({definition:[],name:e});return i.name=e,this.recordingProdStack.push(i),n.call(this),this.recordingProdStack.pop(),i}catch(i){if(i.KNOWN_RECORDER_ERROR!==!0)try{i.message=i.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw i}throw i}}optionInternalRecord(e,n){return js.call(this,Dt,e,n)}atLeastOneInternalRecord(e,n){js.call(this,Pn,n,e)}atLeastOneSepFirstInternalRecord(e,n){js.call(this,Dn,n,e,Am)}manyInternalRecord(e,n){js.call(this,at,n,e)}manySepFirstInternalRecord(e,n){js.call(this,vn,n,e,Am)}orInternalRecord(e,n){return vR.call(this,e,n)}subruleInternalRecord(e,n,i){if(xo(n),!e||oe(e,"ruleName")===!1){const o=new Error(`<SUBRULE${Im(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const r=Ir(this.recordingProdStack),s=e.ruleName,a=new Ut({idx:n,nonTerminalName:s,label:i==null?void 0:i.LABEL,referencedRule:void 0});return r.definition.push(a),this.outputCst?mR:bo}consumeInternalRecord(e,n,i){if(xo(n),!Hh(e)){const a=new Error(`<CONSUME${Im(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const r=Ir(this.recordingProdStack),s=new Ge({idx:n,terminalType:e,label:i==null?void 0:i.LABEL});return r.definition.push(s),Om}}function js(t,e,n,i=!1){xo(n);const r=Ir(this.recordingProdStack),s=ii(e)?e:e.DEF,a=new t({definition:[],idx:n});return i&&(a.separator=e.SEP),oe(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),r.definition.push(a),this.recordingProdStack.pop(),bo}function vR(t,e){xo(e);const n=Ir(this.recordingProdStack),i=we(t)===!1,r=i===!1?t:t.DEF,s=new bn({definition:[],idx:e,ignoreAmbiguities:i&&t.IGNORE_AMBIGUITIES===!0});oe(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const a=Ml(r,o=>ii(o.GATE));return s.hasPredicates=a,n.definition.push(s),ce(r,o=>{const c=new Pt({definition:[]});s.definition.push(c),oe(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:oe(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),bo}function Im(t){return t===0?"":`${t}`}function xo(t){if(t<0||t>Tm){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${Tm+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class bR{initPerformanceTracer(e){if(oe(e,"traceInitPerf")){const n=e.traceInitPerf,i=typeof n=="number";this.traceInitMaxIdent=i?n:1/0,this.traceInitPerf=i?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=ci.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const i=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${i}--> <${e}>`);const{time:r,value:s}=Oh(n),a=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${i}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,s}else return n()}}function xR(t,e){e.forEach(n=>{const i=n.prototype;Object.getOwnPropertyNames(i).forEach(r=>{if(r==="constructor")return;const s=Object.getOwnPropertyDescriptor(i,r);s&&(s.get||s.set)?Object.defineProperty(t.prototype,r,s):t.prototype[r]=n.prototype[r]})})}const yo=uo(Qi,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(yo);const ci=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:im,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),_o=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var At;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(At||(At={}));class Fs{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{Ih(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),ce(this.definedRulesNames,r=>{const a=this[r].originalGrammarAction;let o;this.TRACE_INIT(`${r} Rule`,()=>{o=this.topLevelRuleRecord(r,a)}),this.gastProductionsCache[r]=o})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=zT({rules:tt(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(Ue(i)&&this.skipValidations===!1){const r=WT({rules:tt(this.gastProductionsCache),tokenTypes:tt(this.tokensMap),errMsgProvider:er,grammarName:n}),s=TT({lookaheadStrategy:this.lookaheadStrategy,rules:tt(this.gastProductionsCache),tokenTypes:tt(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(r,s)}}),Ue(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const r=yA(tt(this.gastProductionsCache));this.resyncFollows=r}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var r,s;(s=(r=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(r,{rules:tt(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(tt(this.gastProductionsCache))})),!Fs.DEFER_DEFINITION_ERRORS_HANDLING&&!Ue(this.definitionErrors))throw e=ee(this.definitionErrors,r=>r.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const i=this;if(i.initErrorHandler(n),i.initLexerAdapter(),i.initLooksAhead(n),i.initRecognizerEngine(e,n),i.initRecoverable(n),i.initTreeBuilder(n),i.initContentAssist(),i.initGastRecorder(n),i.initPerformanceTracer(n),oe(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=oe(n,"skipValidations")?n.skipValidations:ci.skipValidations}}Fs.DEFER_DEFINITION_ERRORS_HANDLING=!1,xR(Fs,[qT,JT,lR,uR,dR,pR,fR,hR,gR,bR]);class yR extends Fs{constructor(e,n=ci){const i=gt(n);i.outputCst=!0,super(e,i)}}function _R(t){const e=new wR,n=tt(t);return ee(n,i=>e.visitRule(i))}class wR extends Zi{visitRule(e){const n=this.visitEach(e.definition),i=Sh(n,s=>s.propertyName),r=ee(i,(s,a)=>{const o=!Ml(s,l=>!l.canBeNull);let c=s[0].type;return s.length>1&&(c=ee(s,l=>l.type)),{name:a,type:c,optional:o}});return{name:e.name,properties:r}}visitAlternative(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitOption(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitRepetition(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitRepetitionMandatory(e){return this.visitEach(e.definition)}visitRepetitionMandatoryWithSeparator(e){return this.visitEach(e.definition).concat({propertyName:e.separator.name,canBeNull:!0,type:wo(e.separator)})}visitRepetitionWithSeparator(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0}).concat({propertyName:e.separator.name,canBeNull:!0,type:wo(e.separator)})}visitAlternation(e){return this.visitEachAndOverrideWith(e.definition,{canBeNull:!0})}visitTerminal(e){return[{propertyName:e.label||e.terminalType.name,canBeNull:!1,type:wo(e)}]}visitNonTerminal(e){return[{propertyName:e.label||e.nonTerminalName,canBeNull:!1,type:wo(e)}]}visitEachAndOverrideWith(e,n){return ee(this.visitEach(e),i=>Nt({},i,n))}visitEach(e){return Gt(ee(e,n=>this.visit(n)))}}function wo(t){return t instanceof Ut?{kind:"rule",name:t.referencedRule.name}:{kind:"token"}}function ER(t,e){let n=[];return n=n.concat('import type { CstNode, ICstVisitor, IToken } from "chevrotain";'),n=n.concat(Gt(ee(t,i=>kR(i)))),e.includeVisitorInterface&&(n=n.concat(RR(e.visitorInterfaceName,t))),n.join(`

`)+`
`}function kR(t){const e=SR(t),n=AR(t);return[e,n]}function SR(t){const e=Nm(t.name),n=eu(t.name);return`export interface ${e} extends CstNode {
  name: "${t.name}";
  children: ${n};
}`}function AR(t){return`export type ${eu(t.name)} = {
  ${ee(t.properties,n=>TR(n)).join(`
  `)}
};`}function TR(t){const e=IR(t.type);return`${t.name}${t.optional?"?":""}: ${e}[];`}function RR(t,e){return`export interface ${t}<IN, OUT> extends ICstVisitor<IN, OUT> {
  ${ee(e,n=>OR(n)).join(`
  `)}
}`}function OR(t){const e=eu(t.name);return`${t.name}(children: ${e}, param?: IN): OUT;`}function IR(t){if(we(t)){const e=Xa(ee(t,i=>Cm(i)));return"("+Mt(e,(i,r)=>i+" | "+r)+")"}else return Cm(t)}function Cm(t){return t.kind==="token"?"IToken":Nm(t.name)}function Nm(t){return Vf(t)+"CstNode"}function eu(t){return Vf(t)+"CstChildren"}const CR={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function NR(t,e){const n=Object.assign(Object.assign({},CR),e),i=_R(t);return ER(i,n)}var Lm={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),LR=Symbol.for("react.portal"),MR=Symbol.for("react.fragment"),UR=Symbol.for("react.strict_mode"),PR=Symbol.for("react.profiler"),DR=Symbol.for("react.provider"),jR=Symbol.for("react.context"),FR=Symbol.for("react.forward_ref"),BR=Symbol.for("react.suspense"),$R=Symbol.for("react.memo"),zR=Symbol.for("react.lazy"),Mm=Symbol.iterator;function WR(t){return t===null||typeof t!="object"?null:(t=Mm&&t[Mm]||t["@@iterator"],typeof t=="function"?t:null)}var Um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pm=Object.assign,Dm={};function Mr(t,e,n){this.props=t,this.context=e,this.refs=Dm,this.updater=n||Um}Mr.prototype.isReactComponent={},Mr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Mr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jm(){}jm.prototype=Mr.prototype;function tu(t,e,n){this.props=t,this.context=e,this.refs=Dm,this.updater=n||Um}var nu=tu.prototype=new jm;nu.constructor=tu,Pm(nu,Mr.prototype),nu.isPureReactComponent=!0;var Fm=Array.isArray,Bm=Object.prototype.hasOwnProperty,iu={current:null},$m={key:!0,ref:!0,__self:!0,__source:!0};function zm(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Bm.call(e,i)&&!$m.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var c=Array(o),l=0;l<o;l++)c[l]=arguments[l+2];r.children=c}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Bs,type:t,key:s,ref:a,props:r,_owner:iu.current}}function GR(t,e){return{$$typeof:Bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ru(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bs}function KR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wm=/\/+/g;function su(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KR(""+t.key):e.toString(36)}function Eo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Bs:case LR:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+su(a,0):i,Fm(r)?(n="",t!=null&&(n=t.replace(Wm,"$&/")+"/"),Eo(r,e,n,"",function(l){return l})):r!=null&&(ru(r)&&(r=GR(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Wm,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Fm(t))for(var o=0;o<t.length;o++){s=t[o];var c=i+su(s,o);a+=Eo(s,e,n,c,r)}else if(c=WR(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=i+su(s,o++),a+=Eo(s,e,n,c,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ko(t,e,n){if(t==null)return t;var i=[],r=0;return Eo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function HR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},So={transition:null},VR={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:So,ReactCurrentOwner:iu};function Gm(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:ko,forEach:function(t,e,n){ko(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ko(t,function(){e++}),e},toArray:function(t){return ko(t,function(e){return e})||[]},only:function(t){if(!ru(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},ve.Component=Mr,ve.Fragment=MR,ve.Profiler=PR,ve.PureComponent=tu,ve.StrictMode=UR,ve.Suspense=BR,ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VR,ve.act=Gm,ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Pm({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=iu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)Bm.call(e,c)&&!$m.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){o=Array(c);for(var l=0;l<c;l++)o[l]=arguments[l+2];i.children=o}return{$$typeof:Bs,type:t.type,key:r,ref:s,props:i,_owner:a}},ve.createContext=function(t){return t={$$typeof:jR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DR,_context:t},t.Consumer=t},ve.createElement=zm,ve.createFactory=function(t){var e=zm.bind(null,t);return e.type=t,e},ve.createRef=function(){return{current:null}},ve.forwardRef=function(t){return{$$typeof:FR,render:t}},ve.isValidElement=ru,ve.lazy=function(t){return{$$typeof:zR,_payload:{_status:-1,_result:t},_init:HR}},ve.memo=function(t,e){return{$$typeof:$R,type:t,compare:e===void 0?null:e}},ve.startTransition=function(t){var e=So.transition;So.transition={};try{t()}finally{So.transition=e}},ve.unstable_act=Gm,ve.useCallback=function(t,e){return Tt.current.useCallback(t,e)},ve.useContext=function(t){return Tt.current.useContext(t)},ve.useDebugValue=function(){},ve.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)},ve.useEffect=function(t,e){return Tt.current.useEffect(t,e)},ve.useId=function(){return Tt.current.useId()},ve.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)},ve.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)},ve.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)},ve.useMemo=function(t,e){return Tt.current.useMemo(t,e)},ve.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)},ve.useRef=function(t){return Tt.current.useRef(t)},ve.useState=function(t){return Tt.current.useState(t)},ve.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)},ve.useTransition=function(){return Tt.current.useTransition()},ve.version="18.3.1",Lm.exports=ve;var qR=Lm.exports;const YR=Wc(32,126).map(t=>String.fromCharCode(t)),XR=Kt({name:"Whitespace",pattern:/ +/}),ZR=Kt({name:"WhitespaceSkipped",pattern:/ +/,group:ot.SKIPPED}),Km=Kt({name:"Newline",line_breaks:!0,start_chars_hint:[`
`,"\r"],pattern:/\n|\r\n?/}),Hm=Kt({name:"StringLiteral",pattern:/[^ $;\r\n]+/,start_chars_hint:YR}),Vm=Kt({name:"StringLiteralDouble",pattern:/"(?:[^\\"]|\\(?:[^\n\r]|u[0-9a-fA-F]{4}))*"/}),qm=Kt({name:"EscapedDollar",pattern:"$$"}),au=Kt({name:"MaybeFlag",pattern:/\$[^ $\r\n]+/}),Ym=Kt({name:"NumberLiteral",pattern:/\$-?(\d*\.)?\d+([eE][+-]?\d+)?[jJ]?[lL]?\+?/}),Xm=Kt({name:"HyperLinkText",pattern:/;[^;\r\n]*/,start_chars_hint:[";"]});function JR(t,e=""){return Kt({name:e||t,pattern:new RegExp(t.toLowerCase(),"i")})}const Zm=Object.keys(el).map(t=>JR(`\\$(${t})`,t)),QR=[XR,Km,...Zm,Vm,Hm,Ym,qm,Xm,au],eO=new ot(QR,{skipValidations:!In,ensureOptimizations:In}),tO=new ot([ZR,Km,...Zm,Vm,Hm,Ym,qm,Xm,au],{skipValidations:!In,ensureOptimizations:In});function nO(t,e=!1){return e?tO.tokenize(t):eO.tokenize(t)}function iO(t,e,n,i,r,s,a,o){return{disablewrap:!1,measureonly:!1,measuredwidth:0,writefullwidth:void 0,x:0,y:0,iseven:!0,active:{color:n,bg:i,topedge:r,leftedge:s,rightedge:a,bottomedge:o},reset:{color:n,bg:i,topedge:r,leftedge:s,rightedge:a,bottomedge:o},width:t,height:e,char:[],color:[],bg:[]}}qR.createContext(iO(1,1,15,1));const ou=Wc(32,126).map(t=>String.fromCharCode(t));function ye(t){return Kt({...t,name:`token_${t.name}`})}function jt(t,e=!1){return ye(e?{name:t,pattern:new RegExp(t.toLowerCase(),"i"),longer_alt:Rt,group:ot.SKIPPED}:{name:t,pattern:new RegExp(t.toLowerCase(),"i"),longer_alt:Rt})}const tr=ye({name:"newline",line_breaks:!0,start_chars_hint:[`
`,"\r"],pattern:/\n|\r\n?/}),rO=ye({name:"whitespace",pattern:/ +/,group:ot.SKIPPED}),sO=ye({name:"whitespace",pattern:/\s+/,line_breaks:!0,group:ot.SKIPPED}),cu=ye({name:"stat",pattern:/@.*/,start_chars_hint:["@"]}),$s=ye({name:"command",pattern:/#/,start_chars_hint:["#"]});let Jm=!1;function aO(t,e,n){if(!Jm)return null;const[i]=n.slice(-1);if(i&&i.tokenType!==tr)return null;let r=e;for(;t[r]===" ";)r++;if("@#/?':!".includes(t[r]))return null;let s=e+1;for(;s<t.length&&t[s]!==`
`;)s++;return[t.substring(e,s)]}const Qm=ye({name:"text",pattern:aO,line_breaks:!1,start_chars_hint:ou.filter(t=>"@#/?':!".includes(t)===!1)}),eg=ye({name:"comment",pattern:/'.*/,start_chars_hint:["'"]}),tg=ye({name:"label",pattern:/:[^;:\n]*/,start_chars_hint:[":"]}),ng=ye({name:"hyperlink",pattern:/!/,start_chars_hint:["!"]}),ig=ye({name:"hyperlinktext",pattern:/;[^;\n]*/,start_chars_hint:[";"]}),Rt=ye({name:"stringliteral",pattern:/[^-0-9"!;@#/?\s]+[^-"!;@#/?\s]*/,start_chars_hint:ou}),rg=ye({name:"stringliteraldouble",pattern:/"(?:[^\\"]|\\(?:[^\n\r]|u[0-9a-fA-F]{4}))*"?/}),sg=ye({name:"numberliteral",pattern:/-?(\d*\.)?\d+([eE][+-]?\d+)?[jJ]?[lL]?/}),ag=ye({name:"iseq",pattern:/=|is|eq|equal/,longer_alt:Rt}),og=ye({name:"isnoteq",pattern:/!=|not ?eq|not ?equal/,longer_alt:Rt}),cg=ye({name:"islessthan",pattern:/<|below/,longer_alt:Rt}),lg=ye({name:"isgreaterthan",pattern:/>|above/,longer_alt:Rt}),ug=ye({name:"islessthanorequal",pattern:/<=|below ?or ?eq|below ?or ?equal/,longer_alt:Rt}),pg=ye({name:"isgreaterthanorequal",pattern:/>=|above ?or ?eq|above ?or ?equal/,longer_alt:Rt}),lu=ye({name:"or",pattern:/or/i,longer_alt:Rt}),uu=ye({name:"not",pattern:/not/i,longer_alt:Rt}),pu=ye({name:"and",pattern:/and/i,longer_alt:Rt}),du=ye({name:"plus",pattern:/\+/}),fu=ye({name:"minus",pattern:/-/}),dg=ye({name:"power",pattern:/\*\*/}),fg=ye({name:"multiply",pattern:/\*/}),hu=ye({name:"divide",pattern:/\//}),hg=ye({name:"moddivide",pattern:/%/}),mg=ye({name:"floordivide",pattern:/%%/}),gg=ye({name:"query",pattern:/\?/}),vg=ye({name:"lparen",pattern:/\(/,push_mode:"ignore_newlines"}),bg=ye({name:"rparen",pattern:/\)/,pop_mode:!0}),xg=ye({name:"command_play",pattern:/play .*/,start_chars_hint:ou,longer_alt:Rt}),mu=jt("if"),yg=jt("do"),oO=jt("then",!0),gu=jt("else"),_g=jt("endif"),wg=jt("while"),cO=jt("endwhile"),Eg=jt("repeat"),lO=jt("endrepeat"),kg=jt("read"),Sg=jt("into"),uO=jt("endread"),Ag=jt("break"),Tg=jt("continue");function Rg(t){return[...t,sg,ag,og,ug,cg,pg,lg,lu,uu,pu,du,fu,dg,fg,hu,mg,hg,gg,vg,bg,rg,Rt]}const Og=Rg([Qm,cu,xg,$s,eg,tg,ng,ig,tr,rO,mu,yg,oO,gu,_g,wg,cO,Eg,lO,kg,Sg,uO,Ag,Tg]),pO=new ot({defaultMode:"use_newlines",modes:{use_newlines:Og,ignore_newlines:Rg([sO])}},{skipValidations:!In,ensureOptimizations:In});function vu(t){Jm=!0;const e=pO.tokenize(t||` 
`),[n]=(it(e.tokens)?e.tokens:[]).slice(-1);return n&&n.tokenType.name!=="Newline"&&e.tokens.push(uo(tr,`
`,n.startOffset,n.endOffset??NaN,n.startLine??NaN,n.endLine??NaN,n.startColumn??NaN,n.endColumn??NaN)),e}let Ig=0;const Cg=In,dO=["Command","lines"];class fO extends yR{constructor(){super(Og,{traceInitPerf:In,skipValidations:!In,maxLookahead:2,recoveryEnabled:!0,nodeLocationTracking:"full"});fe(this,"program",this.RULED("program",()=>{this.MANY(()=>this.SUBRULE(this.line))}));fe(this,"line",this.RULED("line",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt)},{ALT:()=>this.CONSUME(tr)}])}));fe(this,"stmt",this.RULED("stmt",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt_label)},{ALT:()=>this.SUBRULE(this.stmt_stat)},{ALT:()=>this.SUBRULE(this.stmt_text)},{ALT:()=>this.SUBRULE(this.stmt_comment)},{ALT:()=>this.SUBRULE(this.stmt_hyperlink)},{ALT:()=>this.SUBRULE(this.stmt_command)},{ALT:()=>{this.AT_LEAST_ONE(()=>this.SUBRULE(this.short_commands)),this.MANY(()=>this.SUBRULE(this.commands))}}])}));fe(this,"do_block",this.RULED("do_block",()=>{this.CONSUME(yg),this.MANY(()=>this.CONSUME(tr)),this.AT_LEAST_ONE({GATE:this.BACKTRACK(this.do_line),DEF:()=>this.SUBRULE(this.do_line)})}));fe(this,"do_line",this.RULED("do_line",()=>{this.SUBRULE(this.do_stmt),this.AT_LEAST_ONE(()=>this.CONSUME(tr))}));fe(this,"do_stmt",this.RULED("do_stmt",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt_stat)},{ALT:()=>this.SUBRULE(this.stmt_text)},{ALT:()=>this.SUBRULE(this.stmt_comment)},{ALT:()=>this.SUBRULE(this.stmt_hyperlink)},{ALT:()=>this.SUBRULE(this.stmt_command)},{ALT:()=>{this.AT_LEAST_ONE(()=>this.SUBRULE(this.short_commands)),this.MANY(()=>this.SUBRULE(this.commands))}}])}));fe(this,"do_inline",this.RULED("do_inline",()=>{this.OR([{ALT:()=>this.SUBRULE(this.stmt_stat)},{ALT:()=>this.SUBRULE(this.stmt_text)},{ALT:()=>this.SUBRULE(this.stmt_comment)},{ALT:()=>this.SUBRULE(this.stmt_hyperlink)},{ALT:()=>this.SUBRULE(this.stmt_command)},{GATE:this.BACKTRACK(this.commands),ALT:()=>this.MANY(()=>this.SUBRULE(this.commands))}])}));fe(this,"stmt_label",this.RULED("stmt_label",()=>{this.CONSUME(tg)}));fe(this,"stmt_stat",this.RULED("stmt_stat",()=>{this.CONSUME(cu)}));fe(this,"stmt_text",this.RULED("stmt_text",()=>{this.CONSUME(Qm)}));fe(this,"stmt_comment",this.RULED("stmt_comment",()=>{this.CONSUME(eg)}));fe(this,"stmt_hyperlink",this.RULED("stmt_hyperlink",()=>{this.CONSUME(ng),this.SUBRULE(this.words),this.CONSUME(ig)}));fe(this,"stmt_command",this.RULED("stmt_command",()=>{this.CONSUME($s),this.AT_LEAST_ONE(()=>this.SUBRULE(this.commands))}));fe(this,"short_commands",this.RULED("short_commands",()=>{this.OR([{ALT:()=>this.SUBRULE(this.short_go)},{ALT:()=>this.SUBRULE(this.short_try)}])}));fe(this,"commands",this.RULED("commands",()=>{this.OR([{ALT:()=>this.SUBRULE(this.words)},{ALT:()=>this.SUBRULE(this.short_go)},{ALT:()=>this.SUBRULE(this.short_try)},{ALT:()=>this.SUBRULE(this.command_play)},{ALT:()=>this.SUBRULE(this.structured_cmd)}])}));fe(this,"structured_cmd",this.RULED("structured_cmd",()=>{this.OR([{ALT:()=>this.SUBRULE(this.command_if)},{ALT:()=>this.SUBRULE(this.command_read)},{ALT:()=>this.SUBRULE(this.command_while)},{ALT:()=>this.SUBRULE(this.command_repeat)},{ALT:()=>this.SUBRULE(this.command_break)},{ALT:()=>this.SUBRULE(this.command_continue)}])}));fe(this,"short_go",this.RULED("short_go",()=>{this.CONSUME(hu),this.SUBRULE(this.words)}));fe(this,"short_try",this.RULED("short_try",()=>{this.CONSUME(gg),this.SUBRULE(this.words)}));fe(this,"command_if",this.RULED("command_if",()=>{this.CONSUME(mu),this.SUBRULE(this.words),this.OPTION({GATE:this.BACKTRACK(this.command_if_block),DEF:()=>this.SUBRULE(this.command_if_block)})}));fe(this,"command_if_block",this.RULED("command_if_block",()=>{this.OR([{GATE:this.BACKTRACK(this.do_inline),ALT:()=>this.SUBRULE(this.do_inline)},{ALT:()=>{this.SUBRULE(this.do_block),this.MANY({GATE:this.BACKTRACK(this.command_else_if),DEF:()=>this.SUBRULE(this.command_else_if)}),this.OPTION2({GATE:this.BACKTRACK(this.command_else),DEF:()=>this.SUBRULE(this.command_else)}),this.MANY2(()=>this.CONSUME(tr)),this.CONSUME($s),this.CONSUME(_g)}}])}));fe(this,"command_block",this.RULED("command_block",()=>{this.OR([{GATE:this.BACKTRACK(this.do_inline),ALT:()=>this.SUBRULE(this.do_inline)},{ALT:()=>this.SUBRULE(this.do_block)}])}));fe(this,"command_else_if",this.RULED("command_else_if",()=>{this.CONSUME($s),this.CONSUME(gu),this.CONSUME(mu),this.SUBRULE(this.words),this.OPTION({GATE:this.BACKTRACK(this.command_block),DEF:()=>this.SUBRULE(this.command_block)})}));fe(this,"command_else",this.RULED("command_else",()=>{this.CONSUME($s),this.CONSUME(gu),this.OPTION({GATE:this.BACKTRACK(this.command_block),DEF:()=>this.SUBRULE(this.command_block)})}));fe(this,"command_while",this.RULED("command_while",()=>{this.CONSUME(wg),this.SUBRULE(this.words),this.OPTION({GATE:this.BACKTRACK(this.command_block),DEF:()=>this.SUBRULE(this.command_block)})}));fe(this,"command_repeat",this.RULED("command_repeat",()=>{this.CONSUME(Eg),this.SUBRULE(this.words),this.OPTION({GATE:this.BACKTRACK(this.command_block),DEF:()=>this.SUBRULE(this.command_block)})}));fe(this,"command_read",this.RULED("command_read",()=>{this.CONSUME(kg),this.SUBRULE(this.words),this.CONSUME(Sg),this.AT_LEAST_ONE(()=>this.CONSUME(Rt)),this.OPTION({GATE:this.BACKTRACK(this.command_block),DEF:()=>this.SUBRULE(this.command_block)})}));fe(this,"command_break",this.RULED("command_break",()=>{this.CONSUME(Ag)}));fe(this,"command_continue",this.RULED("command_continue",()=>{this.CONSUME(Tg)}));fe(this,"command_play",this.RULED("command_play",()=>{this.CONSUME(xg)}));fe(this,"expr",this.RULED("expr",()=>{this.SUBRULE1(this.and_test),this.MANY(()=>{this.CONSUME(lu),this.SUBRULE2(this.and_test)})}));fe(this,"and_test",this.RULED("and_test",()=>{this.SUBRULE1(this.not_test),this.MANY(()=>{this.CONSUME(pu),this.SUBRULE2(this.not_test)})}));fe(this,"not_test",this.RULED("not_test",()=>{this.OR([{ALT:()=>{this.CONSUME(uu),this.SUBRULE1(this.not_test)}},{ALT:()=>this.SUBRULE2(this.comparison)}])}));fe(this,"comparison",this.RULED("comparison",()=>{this.SUBRULE1(this.arith_expr),this.MANY(()=>{this.SUBRULE(this.comp_op),this.SUBRULE2(this.arith_expr)})}));fe(this,"comp_op",this.RULED("comp_op",()=>{this.OR([{ALT:()=>this.CONSUME(ag)},{ALT:()=>this.CONSUME(og)},{ALT:()=>this.CONSUME(cg)},{ALT:()=>this.CONSUME(lg)},{ALT:()=>this.CONSUME(ug)},{ALT:()=>this.CONSUME(pg)}])}));fe(this,"expr_value",this.RULED("expr_value",()=>{this.SUBRULE1(this.and_test_value),this.MANY(()=>{this.CONSUME(lu),this.SUBRULE2(this.and_test_value)})}));fe(this,"and_test_value",this.RULED("and_test_value",()=>{this.SUBRULE1(this.not_test_value),this.MANY(()=>{this.CONSUME(pu),this.SUBRULE2(this.not_test_value)})}));fe(this,"not_test_value",this.RULED("not_test_value",()=>{this.OR([{ALT:()=>{this.CONSUME(uu),this.SUBRULE1(this.not_test_value)}},{ALT:()=>this.SUBRULE2(this.arith_expr)}])}));fe(this,"arith_expr",this.RULED("arith_expr",()=>{this.SUBRULE1(this.term),this.MANY(()=>this.SUBRULE2(this.arith_expr_item))}));fe(this,"arith_expr_item",this.RULED("arith_expr_item",()=>{this.OR([{ALT:()=>this.CONSUME(du)},{ALT:()=>this.CONSUME(fu)}]),this.SUBRULE(this.term)}));fe(this,"term",this.RULED("term",()=>{this.SUBRULE1(this.factor),this.MANY(()=>this.SUBRULE2(this.term_item))}));fe(this,"term_item",this.RULED("term_item",()=>{this.OR([{ALT:()=>this.CONSUME(fg)},{ALT:()=>this.CONSUME(hu)},{ALT:()=>this.CONSUME(hg)},{ALT:()=>this.CONSUME(mg)}]),this.SUBRULE(this.factor)}));fe(this,"factor",this.RULED("factor",()=>{this.OR1([{ALT:()=>{this.OR2([{ALT:()=>this.CONSUME(du)},{ALT:()=>this.CONSUME(fu)}]),this.SUBRULE(this.factor)}},{ALT:()=>this.SUBRULE(this.power)}])}));fe(this,"power",this.RULED("power",()=>{this.SUBRULE(this.token),this.OPTION(()=>{this.CONSUME(dg),this.SUBRULE(this.factor)})}));fe(this,"words",this.RULED("words",()=>{this.AT_LEAST_ONE(()=>this.SUBRULE(this.expr))}));fe(this,"token",this.RULED("token",()=>{this.OR([{ALT:()=>this.CONSUME(rg)},{ALT:()=>this.CONSUME(Rt)},{ALT:()=>this.CONSUME(sg)},{ALT:()=>{this.CONSUME(vg),this.SUBRULE(this.expr),this.CONSUME(bg)}}])}));this.performSelfAnalysis()}PEEK(n,i,...r){console.info(n,r.map(s=>[s.image,s.tokenType]),i)}RULED(n,i,r){const s=dO.some(a=>n.includes(a));return this.RULE(n,()=>{const o=(Ig++).toString().padStart(3),c=s?"font-weight: bold;":"";if(Cg&&!this.RECORDING_PHASE){const l=[this.LA(1),this.LA(2),this.LA(3)].map(u=>`[${u.tokenType.name} ${u.image.replaceAll(`
`,"\\n")}]`);console.info(`${o}%c> ${n} ${l.join(" ")}`,c)}i(),Cg&&!this.RECORDING_PHASE&&console.info(`${o}%c< ${n} `,c),Ig--},r)}}const Ur=new fO;if(ow){const t=Ur.getGAstProductions(),e=NR(t);console.info(e)}const hO=Ur.getBaseCstVisitorConstructor();var Le=(t=>(t[t.PROGRAM=0]="PROGRAM",t[t.TEXT=1]="TEXT",t[t.LABEL=2]="LABEL",t[t.HYPERLINK=3]="HYPERLINK",t[t.STAT=4]="STAT",t[t.MOVE=5]="MOVE",t[t.COMMAND=6]="COMMAND",t[t.LITERAL=7]="LITERAL",t[t.IF=8]="IF",t[t.ELSE_IF=9]="ELSE_IF",t[t.ELSE=10]="ELSE",t[t.WHILE=11]="WHILE",t[t.BREAK=12]="BREAK",t[t.CONTINUE=13]="CONTINUE",t[t.REPEAT=14]="REPEAT",t[t.READ=15]="READ",t[t.OR=16]="OR",t[t.AND=17]="AND",t[t.NOT=18]="NOT",t[t.COMPARE=19]="COMPARE",t[t.COMPARE_ITEM=20]="COMPARE_ITEM",t[t.OPERATOR=21]="OPERATOR",t[t.OPERATOR_ITEM=22]="OPERATOR_ITEM",t[t.EXPR=23]="EXPR",t))(Le||{}),nr=(t=>(t[t.IS_EQ=0]="IS_EQ",t[t.IS_NOT_EQ=1]="IS_NOT_EQ",t[t.IS_LESS_THAN=2]="IS_LESS_THAN",t[t.IS_GREATER_THAN=3]="IS_GREATER_THAN",t[t.IS_LESS_THAN_OR_EQ=4]="IS_LESS_THAN_OR_EQ",t[t.IS_GREATER_THAN_OR_EQ=5]="IS_GREATER_THAN_OR_EQ",t))(nr||{}),Fn=(t=>(t[t.EMPTY=0]="EMPTY",t[t.PLUS=1]="PLUS",t[t.MINUS=2]="MINUS",t[t.POWER=3]="POWER",t[t.MULTIPLY=4]="MULTIPLY",t[t.DIVIDE=5]="DIVIDE",t[t.MOD_DIVIDE=6]="MOD_DIVIDE",t[t.FLOOR_DIVIDE=7]="FLOOR_DIVIDE",t[t.UNI_PLUS=8]="UNI_PLUS",t[t.UNI_MINUS=9]="UNI_MINUS",t))(Fn||{}),Ao=(t=>(t[t.NUMBER=0]="NUMBER",t[t.STRING=1]="STRING",t[t.TEMPLATE=2]="TEMPLATE",t))(Ao||{});function mO(t){return!!(t!=null&&t.tokenType)}function Bn(t,e){const[n]=t??[];return(n==null?void 0:n.image)??e}function Ng(t,e){return he(t,{type:7,literal:1,value:e})}function gO(t){const e=Object.values(t).flat().filter(n=>!!n).map(n=>n&&mO(n)?{startLine:n.startLine,startColumn:n.startColumn,startOffset:n.startOffset,endLine:n.endLine,endColumn:n.endColumn,endOffset:n.endOffset}:n!=null&&n.location?{...n.location}:{startLine:0,startColumn:0,startOffset:0,endLine:0,endColumn:0,endOffset:0}).filter(n=>n.startLine!==0&&n.endLine!==0);return{startLine:Math.min(...e.map(n=>n.startLine??1)),startColumn:Math.min(...e.map(n=>n.startColumn??1)),startOffset:Math.min(...e.map(n=>n.startOffset??1)),endLine:Math.max(...e.map(n=>n.endLine??1)),endColumn:Math.max(...e.map(n=>n.endColumn??1)),endOffset:Math.max(...e.map(n=>n.endOffset??1))}}function he(t,e){return[{...e,...gO(t)}]}class vO extends hO{constructor(){super(),In&&this.validateVisitor()}go(e){return Array.isArray(e)?e.map(n=>this.visit(n)).flat():T(e)?[this.visit(e)].flat():[]}program(e){return he(e,{type:0,lines:this.go(e.line)})}line(e){return this.go(e.stmt)}stmt(e){return e.stmt_label?this.go(e.stmt_label):e.stmt_stat?this.go(e.stmt_stat):e.stmt_text?this.go(e.stmt_text):e.stmt_comment?this.go(e.stmt_comment):e.stmt_command?this.go(e.stmt_command):e.stmt_hyperlink?this.go(e.stmt_hyperlink):e.short_commands?[this.go(e.short_commands),this.go(e.commands)].flat():[]}do_block(e){return this.go(e.do_line)}do_line(e){return this.go(e.do_stmt)}do_stmt(e){return e.stmt_stat?this.go(e.stmt_stat):e.stmt_text?this.go(e.stmt_text):e.stmt_comment?this.go(e.stmt_comment):e.stmt_command?this.go(e.stmt_command):e.stmt_hyperlink?this.go(e.stmt_hyperlink):e.short_commands?[this.go(e.short_commands),this.go(e.commands)].flat():[]}do_inline(e){return e.stmt_stat?this.go(e.stmt_stat):e.stmt_text?this.go(e.stmt_text):e.stmt_comment?this.go(e.stmt_comment):e.stmt_command?this.go(e.stmt_command):e.stmt_hyperlink?this.go(e.stmt_hyperlink):e.commands?this.go(e.commands):[]}stmt_label(e){return he(e,{type:2,active:!0,name:Bn(e.token_label,":").slice(1).trim()})}stmt_stat(e){return he(e,{type:4,value:Bn(e.token_stat,"@").slice(1)})}stmt_text(e){return he(e,{type:1,value:Bn(e.token_text,"")})}stmt_comment(e){return he(e,{type:2,active:!1,name:Bn(e.token_comment,"'").slice(1).trim()})}stmt_hyperlink(e){return he(e,{type:3,link:this.go(e.words),text:Bn(e.token_hyperlinktext,";").slice(1)})}stmt_command(e){return e.commands?this.go(e.commands):[]}short_commands(e){return e.short_go?this.go(e.short_go):e.short_try?this.go(e.short_try):[]}commands(e){return e.words?he(e,{type:6,words:this.go(e.words)}):e.short_go?this.go(e.short_go):e.short_try?this.go(e.short_try):e.command_play?this.go(e.command_play):e.structured_cmd?this.go(e.structured_cmd):[]}structured_cmd(e){return e.command_if?this.go(e.command_if):e.command_read?this.go(e.command_read):e.command_while?this.go(e.command_while):e.command_repeat?this.go(e.command_repeat):e.command_break?this.go(e.command_break):e.command_continue?this.go(e.command_continue):[]}short_go(e){return e.token_divide?he(e,{type:5,wait:!0,words:this.go(e.words)}):[]}short_try(e){return e.token_query?he(e,{type:5,wait:!1,words:this.go(e.words)}):[]}command_if(e){return he(e,{type:8,method:"if",words:this.go(e.words),lines:this.go(e.command_if_block)})}command_if_block(e){return[this.go(e.do_inline),this.go(e.do_block),this.go(e.command_else_if),this.go(e.command_else)].flat()}command_block(e){return[this.go(e.do_inline),this.go(e.do_block)].flat()}command_else_if(e){return he(e,{type:9,method:"if",words:this.go(e.words),lines:this.go(e.command_block)})}command_else(e){return he(e,{type:10,method:"if",lines:this.go(e.command_block)})}command_while(e){return he(e,{type:11,method:"while",words:this.go(e.words),lines:this.go(e.command_block)})}command_repeat(e){return he(e,{type:14,words:this.go(e.words),lines:this.go(e.command_block)})}command_read(e){return he(e,{type:15,flags:e.token_stringliteral.map(n=>Bn([n],"")),words:this.go(e.words),lines:this.go(e.command_block)})}command_break(e){return he(e,{type:12})}command_continue(e){return he(e,{type:13})}command_play(e){const n=Bn(e.token_command_play,"").replace("play","").trim();return he(e,{type:6,words:[Ng(e,"play"),Ng(e,n)].flat()})}expr(e){return e.and_test.length===1?this.go(e.and_test):he(e,{type:16,items:this.go(e.and_test)})}and_test(e){return e.not_test.length===1?this.go(e.not_test):he(e,{type:17,items:this.go(e.not_test)})}not_test(e){return e.comparison?this.go(e.comparison):e.not_test?he(e,{type:18,items:this.go(e.not_test)}):[]}comparison(e){if(e.arith_expr.length===1)return this.go(e.arith_expr);const[n,i]=this.go(e.arith_expr),[r]=this.go(e.comp_op);return he(e,{type:19,lhs:n,compare:r,rhs:i})}comp_op(e){return e.token_iseq?he(e,{type:20,method:0}):e.token_isnoteq?he(e,{type:20,method:1}):e.token_islessthan?he(e,{type:20,method:2}):e.token_isgreaterthan?he(e,{type:20,method:3}):e.token_isgreaterthanorequal?he(e,{type:20,method:4}):e.token_isgreaterthanorequal?he(e,{type:20,method:5}):[]}expr_value(e){return e.and_test_value.length===1?this.go(e.and_test_value):he(e,{type:16,items:this.go(e.and_test_value)})}and_test_value(e){return e.not_test_value.length===1?this.go(e.not_test_value):he(e,{type:17,items:this.go(e.not_test_value)})}not_test_value(e){return e.arith_expr?this.go(e.arith_expr):e.not_test_value?he(e,{type:18,items:this.go(e.not_test_value)}):[]}arith_expr(e){const n=this.go(e.term);return e.arith_expr_item?he(e,{type:21,lhs:n[0],items:this.go(e.arith_expr_item)}):n}arith_expr_item(e){return he(e,{type:22,operator:e.token_plus?1:2,rhs:this.go(e.term)[0]})}term(e){return e.term_item?he(e,{type:21,lhs:this.go(e.factor)[0],items:this.go(e.term_item)}):this.go(e.factor)}term_item(e){let n=0;return e.token_multiply&&(n=4),e.token_divide&&(n=5),e.token_moddivide&&(n=6),e.token_floordivide&&(n=7),he(e,{type:22,operator:n,rhs:this.go(e.factor)[0]})}factor(e){if(e.power)return this.go(e.power);let n=0;return e.token_plus&&(n=8),e.token_minus&&(n=9),he(e,{type:21,lhs:void 0,items:he(e,{type:22,operator:n,rhs:this.go(e.factor)[0]})})}power(e){const n=this.go(e.token);return e.factor?he(e,{type:21,lhs:n[0],items:he(e,{type:22,operator:3,rhs:this.go(e.factor)[0]})}):n}words(e){return this.go(e.expr)}token(e){if(e.token_stringliteraldouble){const n=Bn(e.token_stringliteraldouble,'""').replace(/(^"|"$)/g,"");return he(e,{type:7,literal:2,value:n.substring(1,n.length-1)})}return e.token_stringliteral?he(e,{type:7,literal:1,value:Bn(e.token_stringliteral,"")}):e.token_numberliteral?he(e,{type:7,literal:0,value:parseFloat(Bn(e.token_numberliteral,"0"))}):e.token_lparen?he(e,{type:23,words:this.go(e.expr)}):[]}}const bO=new vO,Ft={internal:0,labels:{},labelIndex:0},To=`
         `,Lg="if (api.hm()) { continue zss; }",xO="if (api.sy()) { yield 1; }",yO=`yield 1; ${Lg}`;let Mg=!1;const bu={};function xu(t){if(!Mg)return"";bu[t]=bu[t]??0;const e=bu[t]++;return`${To}console.info('${t}-${e}')`}function yu(){return`${yO};${xu("wait")}`}function _u(){return`${xO}; ${Lg}${xu("eol")};`}function _O(t){Mg=t===lw}const Ro="zss.js";function Je(t,e){return new aw(t.startLine??1,t.startColumn??1,Ro,e)}function wu(t){return t.replace(/\\/g,"\\\\").replace(/'/g,"\\'")}function Ug(t){return`'${wu(t)}'`}function Oo(t){if(t.startsWith('"'))return Oo(t.substring(1,t.length-1));const e=nO(t);return e.errors.length?t:`'${e.tokens.map(i=>i.tokenType===au?`', api.group('${wu(i.image.substring(1))}'), '`:wu(i.image)).join("")}'`}function Ri(t){return t.filter(e=>e!==void 0).map(Oe)}function Pg(t){return Je(t,"")}function wO(t,e){const n=[];return t.forEach(i=>{n.push(i,e)}),n.pop(),n}function qe(t,e,n){return Je(t,[`api.${e}(`,...wO(n,", "),")"])}function EO(t){if(t.type===Le.COMPARE&&t.compare.type===Le.COMPARE_ITEM)switch(t.compare.method){case nr.IS_EQ:return qe(t,"isEq",[Oe(t.lhs),Oe(t.rhs)]);case nr.IS_NOT_EQ:return qe(t,"isNotEq",[Oe(t.lhs),Oe(t.rhs)]);case nr.IS_LESS_THAN:return qe(t,"isLessThan",[Oe(t.lhs),Oe(t.rhs)]);case nr.IS_GREATER_THAN:return qe(t,"isGreaterThan",[Oe(t.lhs),Oe(t.rhs)]);case nr.IS_LESS_THAN_OR_EQ:return qe(t,"isLessThanOrEq",[Oe(t.lhs),Oe(t.rhs)]);case nr.IS_GREATER_THAN_OR_EQ:return qe(t,"isGreaterThanOrEq",[Oe(t.lhs),Oe(t.rhs)])}return Je(t,"")}function ir(t,e,n,i){return e.prepend(`api.${n}(`),e.add([", ",Oe(i),")"])}function Dg(t,e,n,i){return e.prepend(`api.${n}(`),e.add([Oe(i),")"])}function kO(t,e){if(t.type===Le.OPERATOR_ITEM)switch(t.operator){case Fn.PLUS:return ir(t,e,"opPlus",t.rhs);case Fn.MINUS:return ir(t,e,"opMinus",t.rhs);case Fn.POWER:return ir(t,e,"opPower",t.rhs);case Fn.MULTIPLY:return ir(t,e,"opMultiply",t.rhs);case Fn.DIVIDE:return ir(t,e,"opDivide",t.rhs);case Fn.MOD_DIVIDE:return ir(t,e,"opModDivide",t.rhs);case Fn.FLOOR_DIVIDE:return ir(t,e,"opFloorDivide",t.rhs);case Fn.UNI_PLUS:return Dg(t,e,"opUniPlus",t.rhs);case Fn.UNI_MINUS:return Dg(t,e,"opUniMinus",t.rhs)}return Je(t,"")}function SO(t){if(t.type===Le.OPERATOR){const e=t.lhs?Oe(t.lhs):Je(t,"");return t.items.forEach(n=>kO(n,e)),e}return Je(t,"")}function Oe(t){switch(t.type){case Le.PROGRAM:return Je(t,[`try { // first-line
`,`zss: while (true) {
`,`switch (api.getcase()) {
`,`default:
`,`case 1: 
`,...t.lines.map(e=>[Oe(e),`
`]).flat(),`}
`,`api.endofprogram();
`,`while(true) { ${yu()} }
`,`}
`,`} catch (e) {
`,`console.error(e);
`,`const source = api.stacktrace(e);
`,`const err = new Error(e.message);
`,`err.name = 'GameError';
`,`err.meta = { line: source.line, column: source.column };
`,`throw err;
`,`}
`,`//# sourceURL=${Ro}`]);case Le.LITERAL:switch(t.literal){case Ao.NUMBER:return Je(t,`${t.value}`);case Ao.STRING:return Je(t,Ug(t.value));case Ao.TEMPLATE:return Je(t,Oo(t.value))}return Pg(t);case Le.TEXT:return qe(t,"text",[Oo(t.value)]);case Le.STAT:return qe(t,"stat",[Ug(t.value)]);case Le.LABEL:{const e=Ft.labelIndex++;return Ft.labels[t.name]||(Ft.labels[t.name]=[]),Ft.labels[t.name].push(t.active?e:-e),Je(t,`case ${e}: // ${t.name}`)}case Le.HYPERLINK:return qe(t,"hyperlink",[Oo(t.text),...Ri(t.link)]);case Le.MOVE:return Je(t,["while (",qe(t,"move",[t.wait?"true":"false",...Ri(t.words)]),`) { ${yu()} };${To}${_u()}`]);case Le.COMMAND:return Je(t,["while (",qe(t,"command",Ri(t.words)),`) { ${yu()} };${To}${_u()}`]);case Le.IF:{const e=Je(t,["if (",qe(t,`${t.method}`,Ri(t.words)),`) { ${xu("if")} 
`]);return t.lines&&t.lines.forEach(n=>e.add([Oe(n),`
`])),e.add("}"),e}case Le.ELSE_IF:{const e=Je(t,["} else if (",qe(t,t.method,Ri(t.words)),`) {
`]);return t.lines&&t.lines.forEach(n=>e.add([Oe(n),`
`])),e}case Le.ELSE:{const e=Je(t,`} else {
`);return t.lines&&t.lines.forEach(n=>e.add([Oe(n),`
`])),e}case Le.WHILE:{const e=Je(t,["while (",qe(t,"if",Ri(t.words)),`) {
`]);return t.lines&&t.lines.forEach(n=>e.add([Oe(n),`
`])),e.add("}"),e}case Le.REPEAT:{const e=Je(t,[qe(t,"repeatstart",[`${Ft.internal}`,...Ri(t.words)]),`;
while (`,qe(t,"repeat",[`${Ft.internal}`]),`) {${To}${_u()}
`]);return Ft.internal+=1,t.lines&&t.lines.forEach(n=>e.add([Oe(n),`
`])),e.add("}"),e}case Le.READ:{const[e,...n]=t.words,i=Je(t,[qe(t,"readStart",[`${Ft.internal}`,Oe(e)]),`;
while (`,qe(t,"read",[`${Ft.internal}`,...Ri(n)]),`) {
`]);return Ft.internal+=1,t.lines&&t.lines.forEach(r=>i.add([Oe(r),`
`])),i.add("}"),i}case Le.BREAK:return Je(t,`break;
`);case Le.CONTINUE:return Je(t,`continue;
`);case Le.OR:return qe(t,"or",t.items.map(Oe));case Le.AND:return qe(t,"and",t.items.map(Oe));case Le.NOT:return qe(t,"not",t.items.map(Oe));case Le.COMPARE:return EO(t);case Le.OPERATOR:return SO(t);case Le.EXPR:return qe(t,"expr",t.words.map(Oe));default:return console.error("<unsupported node>",t.type,t),Pg(t)}}function AO(t){return Ft.internal=0,Ft.labels={restart:[1]},Ft.labelIndex=2,{...Oe(t).toStringWithSourceMap({file:`${Ro}.map`}),...Ft}}const TO=64;function RO(t){return it(t)?t.length>0?1:0:t??0}function Bt(t){return`${t??""}`}function OO(t,e){var k,O;const n=gd(e.labels??{});let i,r="",s,a=0;const o={},c={},l={};let u=!1,d=0,f=0,p=(((k=e.errors)==null?void 0:k.length)??0)!==0;const h=[];let m={};function y(E){if(m[E]===void 0)for(let w=0;w<h.length;++w){const _=h[w].getcommand(E);_&&(m[E]=_)}return m[E]}function x(E,w){const _=y(E);if(!_)throw new Error(`unknown firmware command ${E}`);_(v,w)}const v={id(){return t},senderid(E=v.id()){return`vm:${E??v.id()}`},install(E){T(E)&&(m={},h.push(E))},set(E,w){const _=E.toLowerCase();for(let S=0;S<h.length;++S){const[R]=h[S].set(v,_,w);if(R)return w}return w},get(E){const w=E.toLowerCase();for(let _=0;_<h.length;++_){const[S,R]=h[_].get(v,w);if(S)return R}},timestamp(){return f},tick(E,w){f=w;const _=d%E===0;for(let S=0;S<h.length;++S)h[S].shouldtick(v,_);if(!v.shouldtick()||(++d,!_))return!1;a=0,u=!1;for(let S=0;S<h.length;++S)h[S].tick(v);try{const S=i==null?void 0:i.next();S!=null&&S.done&&(console.error("we crashed?",e.source),p=!0)}catch(S){console.error("we crashed?",S),p=!0}for(let S=0;S<h.length;++S)h[S].tock(v);return!0},shouldtick(){return p===!1||v.hm()!==0},shouldhalt(){return a++>TO},hm(){var w;const E=(s==null?void 0:s.target)??"";return T(s==null?void 0:s.target)?((w=n[E])==null?void 0:w.find(_=>_>0))??0:0},yield(){u=!0},sy(){return u||v.shouldhalt()},emit(E,w,_){Ce.emit(E,v.senderid(),w,_)},send(E,w,_,S){Ce.emit(`${v.senderid(E)}:${w}`,t,_,S)},lock(E){r=E},unlock(){r=""},message(E){r&&E.sender!==r||(s=E)},zap(E){const w=n[E];if(w){const _=w.findIndex(S=>S>0);_>=0&&(w[_]*=-1)}},restore(E){const w=n[E];if(w)for(let _=0;_<w.length;_++)w[_]=Math.abs(w[_])},getcase(){const E=v.hm();return E&&T(s)&&(v.set("sender",s.sender),v.set("data",s.data),s.player&&v.set("player",s.player),s=void 0,u=!1,p=!1),E},endofprogram(){v.yield(),p=!0},stacktrace(E){const w=h_.parse(E),[_]=w.filter(S=>S.fileName===Ro);return{line:(_==null?void 0:_.lineNumber)??0,column:(_==null?void 0:_.columnNumber)??0}},text(E){return x("text",[E])},stat(...E){return x("stat",E)},hyperlink(...E){return x("hyperlink",E)},move(E,...w){const _=v.command("go",...w)&&E;return v.yield(),_?1:0},command(...E){if(E.length===0)return 0;const[w,..._]=E,S=y(Bt(w));return T(S)?S(v,_):(x("send",[w,..._]),0)},if(...E){const[w,_]=Z(ne(v,E),0,[X.ANY]),S=RO(w);return S&&_<E.length&&v.command(...E.slice(_)),S?1:0},repeatstart(E,...w){const[_,S]=Z(ne(v,w),0,[X.NUMBER]);o[E]=_,c[E]=S<w.length?w.slice(S):void 0},repeat(E){const w=o[E]??0;o[E]=w-1;const _=w>0,S=c[E];return _&&S&&v.command(...S),_?1:0},readstart(E,w){if(!Re(w))return;const _=v.get(w)??[];l[E]=it(_)?_:[_]},read(E,...w){const _=l[E];if(it(_)===!1)return 0;const S=_.shift();if(S===void 0)return 0;const R=w.map(Bt);switch(typeof S){case"number":case"string":R.forEach(j=>{v.set(j,S)});break;case"object":Array.isArray(S)||R.forEach(j=>{const V=S[j];v.set(j,V)});break}return 1},or(...E){let w=0;for(let _=0;_<E.length;){const[S,R]=Z(ne(v,E),_,[X.ANY]);if(w=S,w)break;_=R}return w},and(...E){let w=0;for(let _=0;_<E.length;){const[S,R]=Z(ne(v,E),_,[X.ANY]);if(w=S,!w)break;_=R}return w},not(...E){const[w]=Z(ne(v,E),0,[X.ANY]);return w?0:1},expr(...E){const[w]=Z(ne(v,E),0,[X.ANY]);return w},isEq(E,w){const[_]=Z(ne(v,[E]),0,[X.ANY]),[S]=Z(ne(v,[w]),0,[X.ANY]);return $y(_,S)?1:0},isNotEq(E,w){const[_]=Z(ne(v,[E]),0,[X.ANY]),[S]=Z(ne(v,[w]),0,[X.ANY]);return _!==S?1:0},isLessThan(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _<S?1:0},isGreaterThan(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _>S?1:0},isLessThanOrEq(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _<=S?1:0},isGreaterThanOrEq(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _>=S?1:0},opPlus(E,w){const[_]=Z(ne(v,[E]),0,[X.ANY]),[S]=Z(ne(v,[w]),0,[X.ANY]);return _+S},opMinus(E,w){const[_]=Z(ne(v,[E]),0,[X.ANY]),[S]=Z(ne(v,[w]),0,[X.ANY]);return _-S},opPower(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return Math.pow(_,S)},opMultiply(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _*S},opDivide(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _/S},opModDivide(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return _%S},opFloorDivide(E,w){const[_]=Z(ne(v,[E]),0,[X.NUMBER]),[S]=Z(ne(v,[w]),0,[X.NUMBER]);return Math.floor(_/S)},opUniPlus(E){const[w]=Z(ne(v,[E]),0,[X.NUMBER]);return+w},opUniMinus(E){const[w]=Z(ne(v,[E]),0,[X.NUMBER]);return-w}};return i=(O=e.code)==null?void 0:O.call(e,v),v}function zs(){return zs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zs.apply(this,arguments)}function IO(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Eu(t,e)}function Eu(t,e){return Eu=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Eu(t,e)}function CO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jg=function(){function t(n){this.trigger=n,this.observing=new Map}var e=t.prototype;return e.registerConnection=function(i){var r=this.observing.get(i.observable);r||(r={byKey:new Set,iterate:!1},this.observing.set(i.observable,r)),i.type==="iterate"?r.iterate=!0:r.byKey.add(i.key)},e.removeObservers=function(){var i=this;this.observing.forEach(function(r,s){r.iterate&&s[ct].connections.iterate.delete(i),r.byKey.forEach(function(a){s[ct].connections.byKey.get(a).delete(i)})}),this.observing.clear()},t}(),rr=[],Io=function(t){IO(e,t);function e(i,r,s){var a;if(a=t.call(this,function(){return a._trigger()})||this,a.func=i,a.options=r,a.effect=s,a.isInitial=!0,a.reaction=function(){rr.push(CO(a));try{a.func()}finally{rr.pop()}a.effect&&(!a.isInitial||a.options.fireImmediately)&&a.effect(),a.isInitial=!1},!s&&!a.options.fireImmediately)throw new Error("if no effect function passed, should always fireImmediately");return a.reaction(),a}var n=e.prototype;return n._trigger=function(){if(rr.includes(this))throw new Error("already running reaction");this.removeObservers(),this.reaction()},e}(jg);function Fg(){return!!rr.length}function Bg(){return rr.length?rr[rr.length-1]:void 0}function NO(t,e,n){var i=zs({name:"unnamed",fireImmediately:!0},n),r=new Io(t,i,e);return r}var Co=0;function $g(){return Co>0}function ku(t){Co++;try{return t()}finally{Co--,Co===0&&MO()}}var Su=!1;function zg(){return Su}function Wg(t){Su=!0;try{t()}finally{Su=!1}}function LO(t){return function(){return Wg(t)}}var Au=[];function MO(){var t=[].concat(Au);Au=[],Gg(t)}function Gg(t){var e=new Set;t.forEach(function(n){var i;(n.type==="add"||n.type==="delete")&&n.observable[ct].connections.iterate.forEach(function(r){e.add(r)}),(i=n.observable[ct].connections.byKey.get(n.key))==null||i.forEach(function(r){e.add(r)})}),e.forEach(function(n){n.trigger()})}function No(t){if($g()){Au.push(t);return}Gg([t])}function Kg(t,e){if(t.type==="iterate")t.observable[ct].connections.iterate.add(e);else{var n=t.observable[ct].connections.byKey.get(t.key);n||(n=new Set,t.observable[ct].connections.byKey.set(t.key,n)),n.add(e)}}function Lo(t,e){if(!zg()){var n=Bg();n&&(Kg(t,n),n.registerConnection(t)),e&&(Kg(t,e),e.registerConnection(t))}}var Tu=Symbol("$skipreactive"),ct=Symbol("$reactive"),rn=Symbol("$reactiveproxy");function Ws(t,e){return!!(t&&t[rn]&&t[rn].implicitObserver===e)}function Ru(t){return t[Tu]=!0,t}function Hg(t){return!!(t&&!Ws(t)&&t[ct])}function Ou(t,e,n){if(n===void 0&&(n=!1),t[Tu]||Ws(t,e))return t;var i=UO(t,n);if(!e)return i;var r=i[ct].proxiesWithImplicitObserver.get(e);if(!r){var s={implicitObserver:e};Object.setPrototypeOf(s,Vg),r=new Proxy(i[ct].raw,s),i[ct].proxiesWithImplicitObserver.set(e,r)}return r}var Gs=Ou;function UO(t,e){if(e===void 0&&(e=!1),Ws(t))return t;if(Hg(t))return t[ct].proxy;if(t[ct]||t[rn])throw new Error("unexpected");var n={connections:{iterate:new Set,byKey:new Map},proxy:{},raw:t,proxiesWithImplicitObserver:new Map,shallow:e};Object.defineProperty(t,ct,{enumerable:!1,writable:!0,configurable:!0,value:n});var i=new Proxy(t,Vg);return n.proxy=i,i}var Vg={has:function(e,n){var i=Reflect.has(e,n);return typeof n=="symbol"||Lo({observable:e,key:n,type:"has"},this.implicitObserver),i},get:function(e,n,i){if(n===rn)return{implicitObserver:this.implicitObserver};var r=Reflect.get(e,n,i);if(typeof n=="symbol")return n.toString()==="Symbol($reactiveproxy)"&&console.error("warning, Symbol($reactiveproxy) passed, but does not match $reactiveproxy. Multiple Reactive libraries loaded?"),r;if(n==="length"&&Array.isArray(e)?Lo({observable:e,type:"iterate"},this.implicitObserver):Lo({observable:e,key:n,type:"get"},this.implicitObserver),Hg(r))return Ou(r,this.implicitObserver);if(e[ct].shallow)return r;if(typeof r=="object"&&r!==null&&!Ws(r,this.implicitObserver)&&!Object.isFrozen(r)){var s=Reflect.getOwnPropertyDescriptor(e,n);if((!s||!(s.writable===!1&&s.configurable===!1))&&(Fg()||this.implicitObserver))return Ou(r,this.implicitObserver)}return r},ownKeys:function(e){return Lo({observable:e,type:"iterate"},this.implicitObserver),Reflect.ownKeys(e)},set:function(e,n,i,r){return ku(function(){if(typeof n=="symbol")return Reflect.set(e,n,i,r);var s=Object.hasOwnProperty.call(e,n),a=Reflect.get(e,n,r),o=Reflect.set(e,n,i,r);if(!s)No({observable:e,key:n,value:i,type:"add"});else if(i!==a)if(n==="length"&&Array.isArray(e)){if(!(a<i))for(var c=i+1;c<=a;c++)No({observable:e,key:""+(c-1),oldValue:void 0,type:"delete"})}else No({observable:e,key:n,value:i,oldValue:a,type:"update"});return o})},deleteProperty:function(e,n){return ku(function(){if(typeof n=="symbol")return Reflect.deleteProperty(e,n);var i=Object.hasOwnProperty.call(e,n),r=Reflect.get(e,n),s=Reflect.deleteProperty(e,n);return i&&No({observable:e,key:n,oldValue:r,type:"delete"}),s})},preventExtensions:function(e){throw new Error("Dynamic observable objects cannot be frozen")}};function PO(t,e){var n=zs({name:"unnamed",fireImmediately:!0},e),i=new Io(t,n);return i}function DO(t,e,n){var i=zs({name:"unnamed",fireImmediately:!0},n),r=new Io(function(){t(e)},i);return e=Gs(e,r),i.fireImmediately&&r.trigger(),r}var qg=function(){function t(){this._observable=Gs({_key:1})}var e=t.prototype;return e.reportObserved=function(i){return Gs(this._observable,i)._key},e.reportChanged=function(){this._observable._key++},t}();function jO(t,e,n){return new qg}var FO=Object.freeze({__proto__:null,$reactive:ct,$reactiveproxy:rn,$skipreactive:Tu,Atom:qg,Observer:jg,Reaction:Io,autorun:PO,autorunAsync:DO,createAtom:jO,hasRunningReaction:Fg,isActionRunning:$g,isReactive:Ws,isTrackingDisabled:zg,markRaw:Ru,reaction:NO,reactive:Gs,runInAction:ku,runningReaction:Bg,untracked:Wg,untrackedCB:LO});const xn=()=>new Map,Iu=t=>{const e=xn();return t.forEach((n,i)=>{e.set(i,n)}),e},Oi=(t,e,n)=>{let i=t.get(e);return i===void 0&&t.set(e,i=n()),i},BO=(t,e)=>{const n=[];for(const[i,r]of t)n.push(e(r,i));return n},$O=(t,e)=>{for(const[n,i]of t)if(e(i,n))return!0;return!1},Pr=()=>new Set,Cu=t=>t[t.length-1],zO=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Ii=Array.from,WO=Array.isArray;class GO{constructor(){this._observers=xn()}on(e,n){return Oi(this._observers,e,Pr).add(n),n}once(e,n){const i=(...r)=>{this.off(e,i),n(...r)};this.on(e,i)}off(e,n){const i=this._observers.get(e);i!==void 0&&(i.delete(n),i.size===0&&this._observers.delete(e))}emit(e,n){return Ii((this._observers.get(e)||xn()).values()).forEach(i=>i(...n))}destroy(){this._observers=xn()}}const Ci=Math.floor,Mo=Math.abs,Yg=(t,e)=>t<e?t:e,sr=(t,e)=>t>e?t:e,Xg=t=>t!==0?t<0:1/t<0,Zg=1,Jg=2,Nu=4,Lu=8,Ks=32,li=64,Ht=128,Uo=31,Mu=63,ar=127,KO=2147483647,Qg=Number.MAX_SAFE_INTEGER,HO=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Ci(t)===t),VO=t=>t.toLowerCase(),qO=/^\s*/g,YO=t=>t.replace(qO,""),XO=/([A-Z])/g,ev=(t,e)=>YO(t.replace(XO,n=>`${e}${VO(n)}`)),ZO=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.codePointAt(r);return i},Hs=typeof TextEncoder<"u"?new TextEncoder:null,JO=Hs?t=>Hs.encode(t):ZO;let Vs=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Vs&&Vs.decode(new Uint8Array).length===1&&(Vs=null);class qs{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ni=()=>new qs,QO=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},yn=t=>{const e=new Uint8Array(QO(t));let n=0;for(let i=0;i<t.bufs.length;i++){const r=t.bufs[i];e.set(r,n),n+=r.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},eI=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(sr(n,e)*2),t.cpos=0)},dt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Uu=dt,me=(t,e)=>{for(;e>ar;)dt(t,Ht|ar&e),e=Ci(e/128);dt(t,ar&e)},Pu=(t,e)=>{const n=Xg(e);for(n&&(e=-e),dt(t,(e>Mu?Ht:0)|(n?li:0)|Mu&e),e=Ci(e/64);e>0;)dt(t,(e>ar?Ht:0)|ar&e),e=Ci(e/128)},Du=new Uint8Array(3e4),tI=Du.length/3,nI=(t,e)=>{if(e.length<tI){const n=Hs.encodeInto(e,Du).written||0;me(t,n);for(let i=0;i<n;i++)dt(t,Du[i])}else _t(t,JO(e))},iI=(t,e)=>{const n=unescape(encodeURIComponent(e)),i=n.length;me(t,i);for(let r=0;r<i;r++)dt(t,n.codePointAt(r))},Dr=Hs&&Hs.encodeInto?nI:iI,Po=(t,e)=>{const n=t.cbuf.length,i=t.cpos,r=Yg(n-i,e.length),s=e.length-r;t.cbuf.set(e.subarray(0,r),i),t.cpos+=r,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(sr(n*2,s)),t.cbuf.set(e.subarray(r)),t.cpos=s)},_t=(t,e)=>{me(t,e.byteLength),Po(t,e)},ju=(t,e)=>{eI(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},rI=(t,e)=>ju(t,4).setFloat32(0,e,!1),sI=(t,e)=>ju(t,8).setFloat64(0,e,!1),aI=(t,e)=>ju(t,8).setBigInt64(0,e,!1),tv=new DataView(new ArrayBuffer(4)),oI=t=>(tv.setFloat32(0,t),tv.getFloat32(0)===t),Ys=(t,e)=>{switch(typeof e){case"string":dt(t,119),Dr(t,e);break;case"number":HO(e)&&Mo(e)<=KO?(dt(t,125),Pu(t,e)):oI(e)?(dt(t,124),rI(t,e)):(dt(t,123),sI(t,e));break;case"bigint":dt(t,122),aI(t,e);break;case"object":if(e===null)dt(t,126);else if(WO(e)){dt(t,117),me(t,e.length);for(let n=0;n<e.length;n++)Ys(t,e[n])}else if(e instanceof Uint8Array)dt(t,116),_t(t,e);else{dt(t,118);const n=Object.keys(e);me(t,n.length);for(let i=0;i<n.length;i++){const r=n[i];Dr(t,r),Ys(t,e[r])}}break;case"boolean":dt(t,e?120:121);break;default:dt(t,127)}};class nv extends qs{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&me(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const iv=t=>{t.count>0&&(Pu(t.encoder,t.count===1?t.s:-t.s),t.count>1&&me(t.encoder,t.count-2))};class Do{constructor(){this.encoder=new qs,this.s=0,this.count=0}write(e){this.s===e?this.count++:(iv(this),this.count=1,this.s=e)}toUint8Array(){return iv(this),yn(this.encoder)}}const rv=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);Pu(t.encoder,e),t.count>1&&me(t.encoder,t.count-2)}};class Fu{constructor(){this.encoder=new qs,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(rv(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return rv(this),yn(this.encoder)}}class cI{constructor(){this.sarr=[],this.s="",this.lensE=new Do}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new qs;return this.sarr.push(this.s),this.s="",Dr(e,this.sarr.join("")),Po(e,this.lensE.toUint8Array()),yn(e)}}const Li=t=>new Error(t),$n=()=>{throw Li("Method unimplemented")},zn=()=>{throw Li("Unexpected case")},sv=Li("Unexpected end of array"),av=Li("Integer out of Range");class jo{constructor(e){this.arr=e,this.pos=0}}const or=t=>new jo(t),lI=t=>t.pos!==t.arr.length,uI=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Ot=t=>uI(t,ge(t)),jr=t=>t.arr[t.pos++],ge=t=>{let e=0,n=1;const i=t.arr.length;for(;t.pos<i;){const r=t.arr[t.pos++];if(e=e+(r&ar)*n,n*=128,r<Ht)return e;if(e>Qg)throw av}throw sv},Bu=t=>{let e=t.arr[t.pos++],n=e&Mu,i=64;const r=(e&li)>0?-1:1;if(!(e&Ht))return r*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&ar)*i,i*=128,e<Ht)return r*n;if(n>Qg)throw av}throw sv},Fr=Vs?t=>Vs.decode(Ot(t)):t=>{let e=ge(t);if(e===0)return"";{let n=String.fromCodePoint(jr(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(jr(t));else for(;e>0;){const i=e<1e4?e:1e4,r=t.arr.subarray(t.pos,t.pos+i);t.pos+=i,n+=String.fromCodePoint.apply(null,r),e-=i}return decodeURIComponent(escape(n))}},$u=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},pI=[t=>{},t=>null,Bu,t=>$u(t,4).getFloat32(0,!1),t=>$u(t,8).getFloat64(0,!1),t=>$u(t,8).getBigInt64(0,!1),t=>!1,t=>!0,Fr,t=>{const e=ge(t),n={};for(let i=0;i<e;i++){const r=Fr(t);n[r]=Xs(t)}return n},t=>{const e=ge(t),n=[];for(let i=0;i<e;i++)n.push(Xs(t));return n},Ot],Xs=t=>pI[127-jr(t)](t);class ov extends jo{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),lI(this)?this.count=ge(this)+1:this.count=-1),this.count--,this.s}}class Fo extends jo{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Bu(this);const e=Xg(this.s);this.count=1,e&&(this.s=-this.s,this.count=ge(this)+2)}return this.count--,this.s}}class zu extends jo{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Bu(this),n=e&1;this.diff=Ci(e/2),this.count=1,n&&(this.count=ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class dI{constructor(e){this.decoder=new Fo(e),this.str=Fr(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const fI=crypto.getRandomValues.bind(crypto),cv=()=>fI(new Uint32Array(1))[0],hI="10000000-1000-4000-8000"+-1e11,mI=()=>hI.replace(/[018]/g,t=>(t^cv()&15>>t/4).toString(16)),lv=t=>new Promise(t);Promise.all.bind(Promise);const uv=t=>t===void 0?null:t;class gI{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let pv=new gI,vI=!0;try{typeof localStorage<"u"&&localStorage&&(pv=localStorage,vI=!1)}catch{}const bI=pv,xI=Object.assign,yI=Object.keys,_I=(t,e)=>{for(const n in t)e(t[n],n)},dv=t=>yI(t).length,wI=t=>{for(const e in t)return!1;return!0},EI=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},kI=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),SI=(t,e)=>t===e||dv(t)===dv(e)&&EI(t,(n,i)=>(n!==void 0||kI(e,i))&&e[i]===n),Wu=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&Wu(t,e,n+1)}},AI=t=>t,TI=(t,e)=>e.includes(t);var fv={};const Zs=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Wn;const RI=()=>{if(Wn===void 0)if(Zs){Wn=xn();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const i=t[n];i[0]==="-"?(e!==null&&Wn.set(e,""),e=i):e!==null&&(Wn.set(e,i),e=null)}e!==null&&Wn.set(e,"")}else typeof location=="object"?(Wn=xn(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Wn.set(`--${ev(e,"-")}`,n),Wn.set(`-${ev(e,"-")}`,n)}})):Wn=xn();return Wn},Gu=t=>RI().has(t),Ku=t=>uv(Zs?fv[t.toUpperCase().replaceAll("-","_")]:bI.getItem(t));(t=>Gu("--"+t)||Ku(t)!==null)("production");const hv=Zs&&TI(fv.FORCE_COLOR,["true","1","2"]),OI=!Gu("--no-colors")&&(!Zs||process.stdout.isTTY||hv)&&(!Zs||Gu("--color")||hv||Ku("COLORTERM")!==null||(Ku("TERM")||"").includes("color")),II=t=>new Uint8Array(t),CI=t=>{const e=II(t.byteLength);return e.set(t),e};class NI{constructor(e,n){this.left=e,this.right=n}}const ui=(t,e)=>new NI(t,e);typeof DOMParser<"u"&&new DOMParser;const LI=t=>BO(t,(e,n)=>`${n}:${e};`).join(""),pi=Symbol,mv=pi(),gv=pi(),MI=pi(),UI=pi(),PI=pi(),vv=pi(),DI=pi(),bv=pi(),jI=pi(),FI=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[];let n=0;for(;n<t.length;n++){const r=t[n];r===void 0||r.constructor===String||r.constructor===Number||r.constructor===Object&&e.push(JSON.stringify(r))}return e},BI={[mv]:ui("font-weight","bold"),[gv]:ui("font-weight","normal"),[MI]:ui("color","blue"),[PI]:ui("color","green"),[UI]:ui("color","grey"),[vv]:ui("color","red"),[DI]:ui("color","purple"),[bv]:ui("color","orange"),[jI]:ui("color","black")},$I=OI?t=>{var a;t.length===1&&((a=t[0])==null?void 0:a.constructor)===Function&&(t=t[0]());const e=[],n=[],i=xn();let r=[],s=0;for(;s<t.length;s++){const o=t[s],c=BI[o];if(c!==void 0)i.set(c.left,c.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const l=LI(i);s>0||l.length>0?(e.push("%c"+o),n.push(l)):e.push(o)}else break}}for(s>0&&(r=n,r.unshift(e.join("")));s<t.length;s++){const o=t[s];o instanceof Symbol||r.push(o)}return r}:FI,zI=(...t)=>{console.log(...$I(t)),WI.forEach(e=>e.print(t))},WI=Pr(),xv=t=>({[Symbol.iterator](){return this},next:t}),GI=(t,e)=>xv(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),Hu=(t,e)=>xv(()=>{const{done:n,value:i}=t.next();return{done:n,value:n?void 0:e(i)}});class Vu{constructor(e,n){this.clock=e,this.len=n}}class Js{constructor(){this.clients=new Map}}const yv=(t,e,n)=>e.clients.forEach((i,r)=>{const s=t.doc.store.clients.get(r);for(let a=0;a<i.length;a++){const o=i[a];jv(t,s,o.clock,o.len,n)}}),KI=(t,e)=>{let n=0,i=t.length-1;for(;n<=i;){const r=Ci((n+i)/2),s=t[r],a=s.clock;if(a<=e){if(e<a+s.len)return r;n=r+1}else i=r-1}return null},_v=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&KI(n,e.clock)!==null},qu=t=>{t.clients.forEach(e=>{e.sort((r,s)=>r.clock-s.clock);let n,i;for(n=1,i=1;n<e.length;n++){const r=e[i-1],s=e[n];r.clock+r.len>=s.clock?r.len=sr(r.len,s.clock+s.len-r.clock):(i<n&&(e[i]=s),i++)}e.length=i})},HI=t=>{const e=new Js;for(let n=0;n<t.length;n++)t[n].clients.forEach((i,r)=>{if(!e.clients.has(r)){const s=i.slice();for(let a=n+1;a<t.length;a++)zO(s,t[a].clients.get(r)||[]);e.clients.set(r,s)}});return qu(e),e},Bo=(t,e,n,i)=>{Oi(t.clients,e,()=>[]).push(new Vu(n,i))},VI=()=>new Js,qI=t=>{const e=VI();return t.clients.forEach((n,i)=>{const r=[];for(let s=0;s<n.length;s++){const a=n[s];if(a.deleted){const o=a.id.clock;let c=a.length;if(s+1<n.length)for(let l=n[s+1];s+1<n.length&&l.deleted;l=n[++s+1])c+=l.length;r.push(new Vu(o,c))}}r.length>0&&e.clients.set(i,r)}),e},Br=(t,e)=>{me(t.restEncoder,e.clients.size),Ii(e.clients.entries()).sort((n,i)=>i[0]-n[0]).forEach(([n,i])=>{t.resetDsCurVal(),me(t.restEncoder,n);const r=i.length;me(t.restEncoder,r);for(let s=0;s<r;s++){const a=i[s];t.writeDsClock(a.clock),t.writeDsLen(a.len)}})},Yu=t=>{const e=new Js,n=ge(t.restDecoder);for(let i=0;i<n;i++){t.resetDsCurVal();const r=ge(t.restDecoder),s=ge(t.restDecoder);if(s>0){const a=Oi(e.clients,r,()=>[]);for(let o=0;o<s;o++)a.push(new Vu(t.readDsClock(),t.readDsLen()))}}return e},wv=(t,e,n)=>{const i=new Js,r=ge(t.restDecoder);for(let s=0;s<r;s++){t.resetDsCurVal();const a=ge(t.restDecoder),o=ge(t.restDecoder),c=n.clients.get(a)||[],l=ft(n,a);for(let u=0;u<o;u++){const d=t.readDsClock(),f=d+t.readDsLen();if(d<l){l<f&&Bo(i,a,l,f-l);let p=_n(c,d),h=c[p];for(!h.deleted&&h.id.clock<d&&(c.splice(p+1,0,Qo(e,h,d-h.id.clock)),p++);p<c.length&&(h=c[p++],h.id.clock<f);)h.deleted||(f<h.id.clock+h.length&&c.splice(p,0,Qo(e,h,f-h.id.clock)),h.delete(e))}else Bo(i,a,d,f-d)}}if(i.clients.size>0){const s=new cr;return me(s.restEncoder,0),Br(s,i),s.toUint8Array()}return null},Ev=cv;class di extends GO{constructor({guid:e=mI(),collectionid:n=null,gc:i=!0,gcFilter:r=()=>!0,meta:s=null,autoLoad:a=!1,shouldLoad:o=!0}={}){super(),this.gc=i,this.gcFilter=r,this.clientID=Ev(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new Uv,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=a,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=lv(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})});const c=()=>lv(l=>{const u=d=>{(d===void 0||d===!0)&&(this.off("sync",u),l())};this.on("sync",u)});this.on("sync",l=>{l===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=l===void 0||l===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Pe(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ii(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Pe(this,e,n)}get(e,n=Ye){const i=Oi(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),r=i.constructor;if(n!==Ye&&r!==n)if(r===Ye){const s=new n;s._map=i._map,i._map.forEach(a=>{for(;a!==null;a=a.left)a.parent=s}),s._start=i._start;for(let a=s._start;a!==null;a=a.right)a.parent=s;return s._length=i._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,Gn)}getText(e=""){return this.get(e,wn)}getMap(e=""){return this.get(e,Kn)}getXmlElement(e=""){return this.get(e,fi)}getXmlFragment(e=""){return this.get(e,Hn)}toJSON(){const e={};return this.share.forEach((n,i)=>{e[i]=n.toJSON()}),e}destroy(){Ii(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new di({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Pe(e.parent.doc,i=>{const r=n.doc;e.deleted||i.subdocsAdded.add(r),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class kv{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ge(this.restDecoder)}readDsLen(){return ge(this.restDecoder)}}class Sv extends kv{readLeftID(){return _e(ge(this.restDecoder),ge(this.restDecoder))}readRightID(){return _e(ge(this.restDecoder),ge(this.restDecoder))}readClient(){return ge(this.restDecoder)}readInfo(){return jr(this.restDecoder)}readString(){return Fr(this.restDecoder)}readParentInfo(){return ge(this.restDecoder)===1}readTypeRef(){return ge(this.restDecoder)}readLen(){return ge(this.restDecoder)}readAny(){return Xs(this.restDecoder)}readBuf(){return CI(Ot(this.restDecoder))}readJSON(){return JSON.parse(Fr(this.restDecoder))}readKey(){return Fr(this.restDecoder)}}class YI{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ge(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ge(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class $r extends YI{constructor(e){super(e),this.keys=[],ge(e),this.keyClockDecoder=new zu(Ot(e)),this.clientDecoder=new Fo(Ot(e)),this.leftClockDecoder=new zu(Ot(e)),this.rightClockDecoder=new zu(Ot(e)),this.infoDecoder=new ov(Ot(e),jr),this.stringDecoder=new dI(Ot(e)),this.parentInfoDecoder=new ov(Ot(e),jr),this.typeRefDecoder=new Fo(Ot(e)),this.lenDecoder=new Fo(Ot(e))}readLeftID(){return new zr(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new zr(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Xs(this.restDecoder)}readBuf(){return Ot(this.restDecoder)}readJSON(){return Xs(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Av{constructor(){this.restEncoder=Ni()}toUint8Array(){return yn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){me(this.restEncoder,e)}writeDsLen(e){me(this.restEncoder,e)}}class Qs extends Av{writeLeftID(e){me(this.restEncoder,e.client),me(this.restEncoder,e.clock)}writeRightID(e){me(this.restEncoder,e.client),me(this.restEncoder,e.clock)}writeClient(e){me(this.restEncoder,e)}writeInfo(e){Uu(this.restEncoder,e)}writeString(e){Dr(this.restEncoder,e)}writeParentInfo(e){me(this.restEncoder,e?1:0)}writeTypeRef(e){me(this.restEncoder,e)}writeLen(e){me(this.restEncoder,e)}writeAny(e){Ys(this.restEncoder,e)}writeBuf(e){_t(this.restEncoder,e)}writeJSON(e){Dr(this.restEncoder,JSON.stringify(e))}writeKey(e){Dr(this.restEncoder,e)}}class Tv{constructor(){this.restEncoder=Ni(),this.dsCurrVal=0}toUint8Array(){return yn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,me(this.restEncoder,n)}writeDsLen(e){e===0&&zn(),me(this.restEncoder,e-1),this.dsCurrVal+=e}}class cr extends Tv{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Fu,this.clientEncoder=new Do,this.leftClockEncoder=new Fu,this.rightClockEncoder=new Fu,this.infoEncoder=new nv(Uu),this.stringEncoder=new cI,this.parentInfoEncoder=new nv(Uu),this.typeRefEncoder=new Do,this.lenEncoder=new Do}toUint8Array(){const e=Ni();return me(e,0),_t(e,this.keyClockEncoder.toUint8Array()),_t(e,this.clientEncoder.toUint8Array()),_t(e,this.leftClockEncoder.toUint8Array()),_t(e,this.rightClockEncoder.toUint8Array()),_t(e,yn(this.infoEncoder)),_t(e,this.stringEncoder.toUint8Array()),_t(e,yn(this.parentInfoEncoder)),_t(e,this.typeRefEncoder.toUint8Array()),_t(e,this.lenEncoder.toUint8Array()),Po(e,yn(this.restEncoder)),yn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Ys(this.restEncoder,e)}writeBuf(e){_t(this.restEncoder,e)}writeJSON(e){Ys(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const XI=(t,e,n,i)=>{i=sr(i,e[0].id.clock);const r=_n(e,i);me(t.restEncoder,e.length-r),t.writeClient(n),me(t.restEncoder,i);const s=e[r];s.write(t,i-s.id.clock);for(let a=r+1;a<e.length;a++)e[a].write(t,0)},Xu=(t,e,n)=>{const i=new Map;n.forEach((r,s)=>{ft(e,s)>r&&i.set(s,r)}),zo(e).forEach((r,s)=>{n.has(s)||i.set(s,0)}),me(t.restEncoder,i.size),Ii(i.entries()).sort((r,s)=>s[0]-r[0]).forEach(([r,s])=>{XI(t,e.clients.get(r),r,s)})},ZI=(t,e)=>{const n=xn(),i=ge(t.restDecoder);for(let r=0;r<i;r++){const s=ge(t.restDecoder),a=new Array(s),o=t.readClient();let c=ge(t.restDecoder);n.set(o,{i:0,refs:a});for(let l=0;l<s;l++){const u=t.readInfo();switch(Uo&u){case 0:{const d=t.readLen();a[l]=new Vt(_e(o,c),d),c+=d;break}case 10:{const d=ge(t.restDecoder);a[l]=new sn(_e(o,c),d),c+=d;break}default:{const d=(u&(li|Ht))===0,f=new ut(_e(o,c),null,(u&Ht)===Ht?t.readLeftID():null,null,(u&li)===li?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(u&Ks)===Ks?t.readString():null,lb(t,u));a[l]=f,c+=f.length}}}}return n},JI=(t,e,n)=>{const i=[];let r=Ii(n.keys()).sort((p,h)=>p-h);if(r.length===0)return null;const s=()=>{if(r.length===0)return null;let p=n.get(r[r.length-1]);for(;p.refs.length===p.i;)if(r.pop(),r.length>0)p=n.get(r[r.length-1]);else return null;return p};let a=s();if(a===null)return null;const o=new Uv,c=new Map,l=(p,h)=>{const m=c.get(p);(m==null||m>h)&&c.set(p,h)};let u=a.refs[a.i++];const d=new Map,f=()=>{for(const p of i){const h=p.id.client,m=n.get(h);m?(m.i--,o.clients.set(h,m.refs.slice(m.i)),n.delete(h),m.i=0,m.refs=[]):o.clients.set(h,[p]),r=r.filter(y=>y!==h)}i.length=0};for(;;){if(u.constructor!==sn){const h=Oi(d,u.id.client,()=>ft(e,u.id.client))-u.id.clock;if(h<0)i.push(u),l(u.id.client,u.id.clock-1),f();else{const m=u.getMissing(t,e);if(m!==null){i.push(u);const y=n.get(m)||{refs:[],i:0};if(y.refs.length===y.i)l(m,ft(e,m)),f();else{u=y.refs[y.i++];continue}}else(h===0||h<u.length)&&(u.integrate(t,h),d.set(u.id.client,u.id.clock+u.length))}}if(i.length>0)u=i.pop();else if(a!==null&&a.i<a.refs.length)u=a.refs[a.i++];else{if(a=s(),a===null)break;u=a.refs[a.i++]}}if(o.clients.size>0){const p=new cr;return Xu(p,o,new Map),me(p.restEncoder,0),{missing:c,update:p.toUint8Array()}}return null},QI=(t,e)=>Xu(t,e.doc.store,e.beforeState),eC=(t,e,n,i=new $r(t))=>Pe(e,r=>{r.local=!1;let s=!1;const a=r.doc,o=a.store,c=ZI(i,a),l=JI(r,o,c),u=o.pendingStructs;if(u){for(const[f,p]of u.missing)if(p<ft(o,f)){s=!0;break}if(l){for(const[f,p]of l.missing){const h=u.missing.get(f);(h==null||h>p)&&u.missing.set(f,p)}u.update=Go([u.update,l.update])}}else o.pendingStructs=l;const d=wv(i,r,o);if(o.pendingDs){const f=new $r(or(o.pendingDs));ge(f.restDecoder);const p=wv(f,r,o);d&&p?o.pendingDs=Go([d,p]):o.pendingDs=d||p}else o.pendingDs=d;if(s){const f=o.pendingStructs.update;o.pendingStructs=null,Rv(r.doc,f)}},n,!1),Rv=(t,e,n,i=$r)=>{const r=or(e);eC(r,t,n,new i(r))},tC=(t,e,n)=>Rv(t,e,n,Sv),nC=(t,e,n=new Map)=>{Xu(t,e.store,n),Br(t,qI(e.store))},iC=(t,e=new Uint8Array([0]),n=new cr)=>{const i=Ov(e);nC(n,t,i);const r=[n.toUint8Array()];if(t.store.pendingDs&&r.push(t.store.pendingDs),t.store.pendingStructs&&r.push(bC(t.store.pendingStructs.update,e)),r.length>1){if(n.constructor===Qs)return gC(r.map((s,a)=>a===0?s:yC(s)));if(n.constructor===cr)return Go(r)}return r[0]},rC=(t,e)=>iC(t,e,new Qs),sC=t=>{const e=new Map,n=ge(t.restDecoder);for(let i=0;i<n;i++){const r=ge(t.restDecoder),s=ge(t.restDecoder);e.set(r,s)}return e},Ov=t=>sC(new kv(or(t))),Iv=(t,e)=>(me(t.restEncoder,e.size),Ii(e.entries()).sort((n,i)=>i[0]-n[0]).forEach(([n,i])=>{me(t.restEncoder,n),me(t.restEncoder,i)}),t),aC=(t,e)=>Iv(t,zo(e.store)),oC=(t,e=new Tv)=>(t instanceof Map?Iv(e,t):aC(e,t),e.toUint8Array()),cC=t=>oC(t,new Av);class lC{constructor(){this.l=[]}}const Cv=()=>new lC,Nv=(t,e)=>t.l.push(e),Lv=(t,e)=>{const n=t.l,i=n.length;t.l=n.filter(r=>e!==r),i===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Mv=(t,e,n)=>Wu(t.l,[e,n]);class zr{constructor(e,n){this.client=e,this.clock=n}}const $o=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,_e=(t,e)=>new zr(t,e),uC=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw zn()},Wr=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!_v(e.ds,t.id),Zu=(t,e)=>{const n=Oi(t.meta,Zu,Pr),i=t.doc.store;n.has(e)||(e.sv.forEach((r,s)=>{r<ft(i,s)&&Mi(t,_e(s,r))}),yv(t,e.ds,r=>{}),n.add(e))};class Uv{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const zo=t=>{const e=new Map;return t.clients.forEach((n,i)=>{const r=n[n.length-1];e.set(i,r.id.clock+r.length)}),e},ft=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const i=n[n.length-1];return i.id.clock+i.length},Pv=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const i=n[n.length-1];if(i.id.clock+i.length!==e.id.clock)throw zn()}n.push(e)},_n=(t,e)=>{let n=0,i=t.length-1,r=t[i],s=r.id.clock;if(s===e)return i;let a=Ci(e/(s+r.length-1)*i);for(;n<=i;){if(r=t[a],s=r.id.clock,s<=e){if(e<s+r.length)return a;n=a+1}else i=a-1;a=Ci((n+i)/2)}throw zn()},Ju=(t,e)=>{const n=t.clients.get(e.client);return n[_n(n,e.clock)]},Qu=(t,e,n)=>{const i=_n(e,n),r=e[i];return r.id.clock<n&&r instanceof ut?(e.splice(i+1,0,Qo(t,r,n-r.id.clock)),i+1):i},Mi=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Qu(t,n,e.clock)]},Dv=(t,e,n)=>{const i=e.clients.get(n.client),r=_n(i,n.clock),s=i[r];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Vt&&i.splice(r+1,0,Qo(t,s,n.clock-s.id.clock+1)),s},pC=(t,e,n)=>{const i=t.clients.get(e.id.client);i[_n(i,e.id.clock)]=n},jv=(t,e,n,i,r)=>{if(i===0)return;const s=n+i;let a=Qu(t,e,n),o;do o=e[a++],s<o.id.clock+o.length&&Qu(t,e,s),r(o);while(a<e.length&&e[a].id.clock<s)};class dC{constructor(e,n,i){this.doc=e,this.deleteSet=new Js,this.beforeState=zo(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Fv=(t,e)=>e.deleteSet.clients.size===0&&!$O(e.afterState,(n,i)=>e.beforeState.get(i)!==n)?!1:(qu(e.deleteSet),QI(t,e),Br(t,e.deleteSet),!0),Bv=(t,e,n)=>{const i=e._item;(i===null||i.id.clock<(t.beforeState.get(i.id.client)||0)&&!i.deleted)&&Oi(t.changed,e,Pr).add(n)},Wo=(t,e)=>{let n=t[e],i=t[e-1],r=e;for(;r>0;n=i,i=t[--r-1]){if(i.deleted===n.deleted&&i.constructor===n.constructor&&i.mergeWith(n)){n instanceof ut&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,i);continue}break}const s=e-r;return s&&t.splice(e+1-s,s),s},fC=(t,e,n)=>{for(const[i,r]of t.clients.entries()){const s=e.clients.get(i);for(let a=r.length-1;a>=0;a--){const o=r[a],c=o.clock+o.len;for(let l=_n(s,o.clock),u=s[l];l<s.length&&u.id.clock<c;u=s[++l]){const d=s[l];if(o.clock+o.len<=d.id.clock)break;d instanceof ut&&d.deleted&&!d.keep&&n(d)&&d.gc(e,!1)}}}},hC=(t,e)=>{t.clients.forEach((n,i)=>{const r=e.clients.get(i);for(let s=n.length-1;s>=0;s--){const a=n[s],o=Yg(r.length-1,1+_n(r,a.clock+a.len-1));for(let c=o,l=r[c];c>0&&l.id.clock>=a.clock;l=r[c])c-=1+Wo(r,c)}})},$v=(t,e)=>{if(e<t.length){const n=t[e],i=n.doc,r=i.store,s=n.deleteSet,a=n._mergeStructs;try{qu(s),n.afterState=zo(n.doc.store),i.emit("beforeObserverCalls",[n,i]);const o=[];n.changed.forEach((c,l)=>o.push(()=>{(l._item===null||!l._item.deleted)&&l._callObserver(n,c)})),o.push(()=>{n.changedParentTypes.forEach((c,l)=>{l._dEH.l.length>0&&(l._item===null||!l._item.deleted)&&(c=c.filter(u=>u.target._item===null||!u.target._item.deleted),c.forEach(u=>{u.currentTarget=l,u._path=null}),c.sort((u,d)=>u.path.length-d.path.length),Mv(l._dEH,c,n))})}),o.push(()=>i.emit("afterTransaction",[n,i])),Wu(o,[]),n._needFormattingCleanup&&MC(n)}finally{i.gc&&fC(s,r,i.gcFilter),hC(s,r),n.afterState.forEach((u,d)=>{const f=n.beforeState.get(d)||0;if(f!==u){const p=r.clients.get(d),h=sr(_n(p,f),1);for(let m=p.length-1;m>=h;)m-=1+Wo(p,m)}});for(let u=a.length-1;u>=0;u--){const{client:d,clock:f}=a[u].id,p=r.clients.get(d),h=_n(p,f);h+1<p.length&&Wo(p,h+1)>1||h>0&&Wo(p,h)}if(!n.local&&n.afterState.get(i.clientID)!==n.beforeState.get(i.clientID)&&(zI(bv,mv,"[yjs] ",gv,vv,"Changed the client-id because another client seems to be using it."),i.clientID=Ev()),i.emit("afterTransactionCleanup",[n,i]),i._observers.has("update")){const u=new Qs;Fv(u,n)&&i.emit("update",[u.toUint8Array(),n.origin,i,n])}if(i._observers.has("updateV2")){const u=new cr;Fv(u,n)&&i.emit("updateV2",[u.toUint8Array(),n.origin,i,n])}const{subdocsAdded:o,subdocsLoaded:c,subdocsRemoved:l}=n;(o.size>0||l.size>0||c.size>0)&&(o.forEach(u=>{u.clientID=i.clientID,u.collectionid==null&&(u.collectionid=i.collectionid),i.subdocs.add(u)}),l.forEach(u=>i.subdocs.delete(u)),i.emit("subdocs",[{loaded:c,added:o,removed:l},i,n]),l.forEach(u=>u.destroy())),t.length<=e+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,t])):$v(t,e+1)}}},Pe=(t,e,n=null,i=!0)=>{const r=t._transactionCleanups;let s=!1,a=null;t._transaction===null&&(s=!0,t._transaction=new dC(t,n,i),r.push(t._transaction),r.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{a=e(t._transaction)}finally{if(s){const o=t._transaction===r[0];t._transaction=null,o&&$v(r,0)}}return a};function*mC(t){const e=ge(t.restDecoder);for(let n=0;n<e;n++){const i=ge(t.restDecoder),r=t.readClient();let s=ge(t.restDecoder);for(let a=0;a<i;a++){const o=t.readInfo();if(o===10){const c=ge(t.restDecoder);yield new sn(_e(r,s),c),s+=c}else if(Uo&o){const c=(o&(li|Ht))===0,l=new ut(_e(r,s),null,(o&Ht)===Ht?t.readLeftID():null,null,(o&li)===li?t.readRightID():null,c?t.readParentInfo()?t.readString():t.readLeftID():null,c&&(o&Ks)===Ks?t.readString():null,lb(t,o));yield l,s+=l.length}else{const c=t.readLen();yield new Vt(_e(r,s),c),s+=c}}}}class ep{constructor(e,n){this.gen=mC(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===sn);return this.curr}}class tp{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const gC=t=>Go(t,Sv,Qs),vC=(t,e)=>{if(t.constructor===Vt){const{client:n,clock:i}=t.id;return new Vt(_e(n,i+e),t.length-e)}else if(t.constructor===sn){const{client:n,clock:i}=t.id;return new sn(_e(n,i+e),t.length-e)}else{const n=t,{client:i,clock:r}=n.id;return new ut(_e(i,r+e),null,_e(i,r+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Go=(t,e=$r,n=cr)=>{if(t.length===1)return t[0];const i=t.map(u=>new e(or(u)));let r=i.map(u=>new ep(u,!0)),s=null;const a=new n,o=new tp(a);for(;r=r.filter(f=>f.curr!==null),r.sort((f,p)=>{if(f.curr.id.client===p.curr.id.client){const h=f.curr.id.clock-p.curr.id.clock;return h===0?f.curr.constructor===p.curr.constructor?0:f.curr.constructor===sn?1:-1:h}else return p.curr.id.client-f.curr.id.client}),r.length!==0;){const u=r[0],d=u.curr.id.client;if(s!==null){let f=u.curr,p=!1;for(;f!==null&&f.id.clock+f.length<=s.struct.id.clock+s.struct.length&&f.id.client>=s.struct.id.client;)f=u.next(),p=!0;if(f===null||f.id.client!==d||p&&f.id.clock>s.struct.id.clock+s.struct.length)continue;if(d!==s.struct.id.client)Ui(o,s.struct,s.offset),s={struct:f,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<f.id.clock)if(s.struct.constructor===sn)s.struct.length=f.id.clock+f.length-s.struct.id.clock;else{Ui(o,s.struct,s.offset);const h=f.id.clock-s.struct.id.clock-s.struct.length;s={struct:new sn(_e(d,s.struct.id.clock+s.struct.length),h),offset:0}}else{const h=s.struct.id.clock+s.struct.length-f.id.clock;h>0&&(s.struct.constructor===sn?s.struct.length-=h:f=vC(f,h)),s.struct.mergeWith(f)||(Ui(o,s.struct,s.offset),s={struct:f,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let f=u.curr;f!==null&&f.id.client===d&&f.id.clock===s.struct.id.clock+s.struct.length&&f.constructor!==sn;f=u.next())Ui(o,s.struct,s.offset),s={struct:f,offset:0}}s!==null&&(Ui(o,s.struct,s.offset),s=null),np(o);const c=i.map(u=>Yu(u)),l=HI(c);return Br(a,l),a.toUint8Array()},bC=(t,e,n=$r,i=cr)=>{const r=Ov(e),s=new i,a=new tp(s),o=new n(or(t)),c=new ep(o,!1);for(;c.curr;){const u=c.curr,d=u.id.client,f=r.get(d)||0;if(c.curr.constructor===sn){c.next();continue}if(u.id.clock+u.length>f)for(Ui(a,u,sr(f-u.id.clock,0)),c.next();c.curr&&c.curr.id.client===d;)Ui(a,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===d&&c.curr.id.clock+c.curr.length<=f;)c.next()}np(a);const l=Yu(o);return Br(s,l),s.toUint8Array()},zv=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:yn(t.encoder.restEncoder)}),t.encoder.restEncoder=Ni(),t.written=0)},Ui=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&zv(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),me(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},np=t=>{zv(t);const e=t.encoder.restEncoder;me(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const i=t.clientStructs[n];me(e,i.written),Po(e,i.restEncoder)}},xC=(t,e,n,i)=>{const r=new n(or(t)),s=new ep(r,!1),a=new i,o=new tp(a);for(let l=s.curr;l!==null;l=s.next())Ui(o,e(l),0);np(o);const c=Yu(r);return Br(a,c),a.toUint8Array()},yC=t=>xC(t,AI,$r,Qs),Wv="You must not compute changes after the event-handler fired.";class Ko{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=_C(this.currentTarget,this.target))}deletes(e){return _v(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Li(Wv);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(r=>{if(r!==null){const s=n._map.get(r);let a,o;if(this.adds(s)){let c=s.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(s))if(c!==null&&this.deletes(c))a="delete",o=Cu(c.content.getContent());else return;else c!==null&&this.deletes(c)?(a="update",o=Cu(c.content.getContent())):(a="add",o=void 0)}else if(this.deletes(s))a="delete",o=Cu(s.content.getContent());else return;e.set(r,{action:a,oldValue:o})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Li(Wv);const n=this.target,i=Pr(),r=Pr(),s=[];if(e={added:i,deleted:r,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let o=null;const c=()=>{o&&s.push(o)};for(let l=n._start;l!==null;l=l.right)l.deleted?this.deletes(l)&&!this.adds(l)&&((o===null||o.delete===void 0)&&(c(),o={delete:0}),o.delete+=l.length,r.add(l)):this.adds(l)?((o===null||o.insert===void 0)&&(c(),o={insert:[]}),o.insert=o.insert.concat(l.content.getContent()),i.add(l)):((o===null||o.retain===void 0)&&(c(),o={retain:0}),o.retain+=l.length);o!==null&&o.retain===void 0&&c()}this._changes=e}return e}}const _C=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let i=0,r=e._item.parent._start;for(;r!==e._item&&r!==null;)r.deleted||i++,r=r.right;n.unshift(i)}e=e._item.parent}return n},Gv=80;let ip=0;class wC{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=ip++}}const EC=t=>{t.timestamp=ip++},Kv=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=ip++},kC=(t,e,n)=>{if(t.length>=Gv){const i=t.reduce((r,s)=>r.timestamp<s.timestamp?r:s);return Kv(i,e,n),i}else{const i=new wC(e,n);return t.push(i),i}},Ho=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,a)=>Mo(e-s.index)<Mo(e-a.index)?s:a);let i=t._start,r=0;for(n!==null&&(i=n.p,r=n.index,EC(n));i.right!==null&&r<e;){if(!i.deleted&&i.countable){if(e<r+i.length)break;r+=i.length}i=i.right}for(;i.left!==null&&r>e;)i=i.left,!i.deleted&&i.countable&&(r-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(r-=i.length);return n!==null&&Mo(n.index-r)<i.parent.length/Gv?(Kv(n,i,r),n):kC(t._searchMarker,i,r)},ea=(t,e,n)=>{for(let i=t.length-1;i>=0;i--){const r=t[i];if(n>0){let s=r.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(r.index-=s.length);if(s===null||s.marker===!0){t.splice(i,1);continue}r.p=s,s.marker=!0}(e<r.index||n>0&&e===r.index)&&(r.index=sr(e,r.index+n))}},Vo=(t,e,n)=>{const i=t,r=e.changedParentTypes;for(;Oi(r,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;Mv(i._eH,n,e)};class Ye{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Cv(),this._dEH=Cv(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw $n()}clone(){throw $n()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Nv(this._eH,e)}observeDeep(e){Nv(this._dEH,e)}unobserve(e){Lv(this._eH,e)}unobserveDeep(e){Lv(this._dEH,e)}toJSON(){}}const Hv=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let i=n-e;const r=[];let s=t._start;for(;s!==null&&i>0;){if(s.countable&&!s.deleted){const a=s.content.getContent();if(a.length<=e)e-=a.length;else{for(let o=e;o<a.length&&i>0;o++)r.push(a[o]),i--;e=0}}s=s.right}return r},Vv=t=>{const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let r=0;r<i.length;r++)e.push(i[r])}n=n.right}return e},ta=(t,e)=>{let n=0,i=t._start;for(;i!==null;){if(i.countable&&!i.deleted){const r=i.content.getContent();for(let s=0;s<r.length;s++)e(r[s],n++,t)}i=i.right}},qv=(t,e)=>{const n=[];return ta(t,(i,r)=>{n.push(e(i,r,t))}),n},SC=t=>{let e=t._start,n=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),i=0,e=e.right}const r=n[i++];return n.length<=i&&(n=null),{done:!1,value:r}}}},Yv=(t,e)=>{const n=Ho(t,e);let i=t._start;for(n!==null&&(i=n.p,e-=n.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(e<i.length)return i.content.getContent()[e];e-=i.length}},qo=(t,e,n,i)=>{let r=n;const s=t.doc,a=s.clientID,o=s.store,c=n===null?e._start:n.right;let l=[];const u=()=>{l.length>0&&(r=new ut(_e(a,ft(o,a)),r,r&&r.lastId,c,c&&c.id,e,null,new pr(l)),r.integrate(t,0),l=[])};i.forEach(d=>{if(d===null)l.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:r=new ut(_e(a,ft(o,a)),r,r&&r.lastId,c,c&&c.id,e,null,new na(new Uint8Array(d))),r.integrate(t,0);break;case di:r=new ut(_e(a,ft(o,a)),r,r&&r.lastId,c,c&&c.id,e,null,new ra(d)),r.integrate(t,0);break;default:if(d instanceof Ye)r=new ut(_e(a,ft(o,a)),r,r&&r.lastId,c,c&&c.id,e,null,new hi(d)),r.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},Xv=()=>Li("Length exceeded!"),Zv=(t,e,n,i)=>{if(n>e._length)throw Xv();if(n===0)return e._searchMarker&&ea(e._searchMarker,n,i.length),qo(t,e,null,i);const r=n,s=Ho(e,n);let a=e._start;for(s!==null&&(a=s.p,n-=s.index,n===0&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));a!==null;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Mi(t,_e(a.id.client,a.id.clock+n));break}n-=a.length}return e._searchMarker&&ea(e._searchMarker,r,i.length),qo(t,e,a,i)},AC=(t,e,n)=>{let r=(e._searchMarker||[]).reduce((s,a)=>a.index>s.index?a:s,{index:0,p:e._start}).p;if(r)for(;r.right;)r=r.right;return qo(t,e,r,n)},Jv=(t,e,n,i)=>{if(i===0)return;const r=n,s=i,a=Ho(e,n);let o=e._start;for(a!==null&&(o=a.p,n-=a.index);o!==null&&n>0;o=o.right)!o.deleted&&o.countable&&(n<o.length&&Mi(t,_e(o.id.client,o.id.clock+n)),n-=o.length);for(;i>0&&o!==null;)o.deleted||(i<o.length&&Mi(t,_e(o.id.client,o.id.clock+i)),o.delete(t),i-=o.length),o=o.right;if(i>0)throw Xv();e._searchMarker&&ea(e._searchMarker,r,-s+i)},Yo=(t,e,n)=>{const i=e._map.get(n);i!==void 0&&i.delete(t)},rp=(t,e,n,i)=>{const r=e._map.get(n)||null,s=t.doc,a=s.clientID;let o;if(i==null)o=new pr([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:o=new pr([i]);break;case Uint8Array:o=new na(i);break;case di:o=new ra(i);break;default:if(i instanceof Ye)o=new hi(i);else throw new Error("Unexpected content type")}new ut(_e(a,ft(s.store,a)),r,r&&r.lastId,null,null,e,n,o).integrate(t,0)},sp=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Qv=t=>{const e={};return t._map.forEach((n,i)=>{n.deleted||(e[i]=n.content.getContent()[n.length-1])}),e},eb=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted},TC=(t,e)=>{const n={};return t._map.forEach((i,r)=>{let s=i;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&Wr(s,e)&&(n[r]=s.content.getContent()[s.length-1])}),n},Xo=t=>GI(t.entries(),e=>!e[1].deleted);class RC extends Ko{constructor(e,n){super(e,n),this._transaction=n}}class Gn extends Ye{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Gn;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Gn}clone(){const e=new Gn;return e.insert(0,this.toArray().map(n=>n instanceof Ye?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),Vo(this,e,new RC(this,e))}insert(e,n){this.doc!==null?Pe(this.doc,i=>{Zv(i,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Pe(this.doc,n=>{AC(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Pe(this.doc,i=>{Jv(i,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Yv(this,e)}toArray(){return Vv(this)}slice(e=0,n=this.length){return Hv(this,e,n)}toJSON(){return this.map(e=>e instanceof Ye?e.toJSON():e)}map(e){return qv(this,e)}forEach(e){ta(this,e)}[Symbol.iterator](){return SC(this)}_write(e){e.writeTypeRef(JC)}}const OC=t=>new Gn;class IC extends Ko{constructor(e,n,i){super(e,n),this.keysChanged=i}}class Kn extends Ye{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((i,r)=>{this.set(r,i)}),this._prelimContent=null}_copy(){return new Kn}clone(){const e=new Kn;return this.forEach((n,i)=>{e.set(i,n instanceof Ye?n.clone():n)}),e}_callObserver(e,n){Vo(this,e,new IC(this,e,n))}toJSON(){const e={};return this._map.forEach((n,i)=>{if(!n.deleted){const r=n.content.getContent()[n.length-1];e[i]=r instanceof Ye?r.toJSON():r}}),e}get size(){return[...Xo(this._map)].length}keys(){return Hu(Xo(this._map),e=>e[0])}values(){return Hu(Xo(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Hu(Xo(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,i)=>{n.deleted||e(n.content.getContent()[n.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Pe(this.doc,n=>{Yo(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Pe(this.doc,i=>{rp(i,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return sp(this,e)}has(e){return eb(this,e)}clear(){this.doc!==null?Pe(this.doc,e=>{this.forEach(function(n,i,r){Yo(e,r,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(QC)}}const CC=t=>new Kn,Pi=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&SI(t,e);class ap{constructor(e,n,i,r){this.left=e,this.right=n,this.index=i,this.currentAttributes=r}forward(){switch(this.right===null&&zn(),this.right.content.constructor){case lt:this.right.deleted||Gr(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const tb=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case lt:e.right.deleted||Gr(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Mi(t,_e(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Zo=(t,e,n,i)=>{const r=new Map,s=i?Ho(e,n):null;if(s){const a=new ap(s.p.left,s.p,s.index,r);return tb(t,a,n-s.index)}else{const a=new ap(null,e._start,0,r);return tb(t,a,n)}},nb=(t,e,n,i)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===lt&&Pi(i.get(n.right.content.key),n.right.content.value));)n.right.deleted||i.delete(n.right.content.key),n.forward();const r=t.doc,s=r.clientID;i.forEach((a,o)=>{const c=n.left,l=n.right,u=new ut(_e(s,ft(r.store,s)),c,c&&c.lastId,l,l&&l.id,e,null,new lt(o,a));u.integrate(t,0),n.right=u,n.forward()})},Gr=(t,e)=>{const{key:n,value:i}=e;i===null?t.delete(n):t.set(n,i)},ib=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===lt&&Pi(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},rb=(t,e,n,i)=>{const r=t.doc,s=r.clientID,a=new Map;for(const o in i){const c=i[o],l=n.currentAttributes.get(o)??null;if(!Pi(l,c)){a.set(o,l);const{left:u,right:d}=n;n.right=new ut(_e(s,ft(r.store,s)),u,u&&u.lastId,d,d&&d.id,e,null,new lt(o,c)),n.right.integrate(t,0),n.forward()}}return a},op=(t,e,n,i,r)=>{n.currentAttributes.forEach((f,p)=>{r[p]===void 0&&(r[p]=null)});const s=t.doc,a=s.clientID;ib(n,r);const o=rb(t,e,n,r),c=i.constructor===String?new Vn(i):i instanceof Ye?new hi(i):new ur(i);let{left:l,right:u,index:d}=n;e._searchMarker&&ea(e._searchMarker,n.index,c.getLength()),u=new ut(_e(a,ft(s.store,a)),l,l&&l.lastId,u,u&&u.id,e,null,c),u.integrate(t,0),n.right=u,n.index=d,n.forward(),nb(t,e,n,o)},sb=(t,e,n,i,r)=>{const s=t.doc,a=s.clientID;ib(n,r);const o=rb(t,e,n,r);e:for(;n.right!==null&&(i>0||o.size>0&&(n.right.deleted||n.right.content.constructor===lt));){if(!n.right.deleted)switch(n.right.content.constructor){case lt:{const{key:c,value:l}=n.right.content,u=r[c];if(u!==void 0){if(Pi(u,l))o.delete(c);else{if(i===0)break e;o.set(c,l)}n.right.delete(t)}else n.currentAttributes.set(c,l);break}default:i<n.right.length&&Mi(t,_e(n.right.id.client,n.right.id.clock+i)),i-=n.right.length;break}n.forward()}if(i>0){let c="";for(;i>0;i--)c+=`
`;n.right=new ut(_e(a,ft(s.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Vn(c)),n.right.integrate(t,0),n.forward()}nb(t,e,n,o)},ab=(t,e,n,i,r)=>{let s=e;const a=xn();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===lt){const l=s.content;a.set(l.key,l)}s=s.right}let o=0,c=!1;for(;e!==s;){if(n===e&&(c=!0),!e.deleted){const l=e.content;switch(l.constructor){case lt:{const{key:u,value:d}=l,f=i.get(u)??null;(a.get(u)!==l||f===d)&&(e.delete(t),o++,!c&&(r.get(u)??null)===d&&f!==d&&(f===null?r.delete(u):r.set(u,f))),!c&&!e.deleted&&Gr(r,l);break}}}e=e.right}return o},NC=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===lt){const i=e.content.key;n.has(i)?e.delete(t):n.add(i)}e=e.left}},LC=t=>{let e=0;return Pe(t.doc,n=>{let i=t._start,r=t._start,s=xn();const a=Iu(s);for(;r;){if(r.deleted===!1)switch(r.content.constructor){case lt:Gr(a,r.content);break;default:e+=ab(n,i,r,s,a),s=Iu(a),i=r;break}r=r.right}}),e},MC=t=>{const e=new Set,n=t.doc;for(const[i,r]of t.afterState.entries()){const s=t.beforeState.get(i)||0;r!==s&&jv(t,n.store.clients.get(i),s,r,a=>{!a.deleted&&a.content.constructor===lt&&a.constructor!==Vt&&e.add(a.parent)})}Pe(n,i=>{yv(t,t.deleteSet,r=>{if(r instanceof Vt||!r.parent._hasFormatting||e.has(r.parent))return;const s=r.parent;r.content.constructor===lt?e.add(s):NC(i,r)});for(const r of e)LC(r)})},ob=(t,e,n)=>{const i=n,r=Iu(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case hi:case ur:case Vn:n<e.right.length&&Mi(t,_e(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&ab(t,s,e.right,r,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&ea(a._searchMarker,e.index,-i+n),e};class UC extends Ko{constructor(e,n,i){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(r=>{r===null?this.childListChanged=!0:this.keysChanged.add(r)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Pe(e,i=>{const r=new Map,s=new Map;let a=this.target._start,o=null;const c={};let l="",u=0,d=0;const f=()=>{if(o!==null){let p=null;switch(o){case"delete":d>0&&(p={delete:d}),d=0;break;case"insert":(typeof l=="object"||l.length>0)&&(p={insert:l},r.size>0&&(p.attributes={},r.forEach((h,m)=>{h!==null&&(p.attributes[m]=h)}))),l="";break;case"retain":u>0&&(p={retain:u},wI(c)||(p.attributes=xI({},c))),u=0;break}p&&n.push(p),o=null}};for(;a!==null;){switch(a.content.constructor){case hi:case ur:this.adds(a)?this.deletes(a)||(f(),o="insert",l=a.content.getContent()[0],f()):this.deletes(a)?(o!=="delete"&&(f(),o="delete"),d+=1):a.deleted||(o!=="retain"&&(f(),o="retain"),u+=1);break;case Vn:this.adds(a)?this.deletes(a)||(o!=="insert"&&(f(),o="insert"),l+=a.content.str):this.deletes(a)?(o!=="delete"&&(f(),o="delete"),d+=a.length):a.deleted||(o!=="retain"&&(f(),o="retain"),u+=a.length);break;case lt:{const{key:p,value:h}=a.content;if(this.adds(a)){if(!this.deletes(a)){const m=r.get(p)??null;Pi(m,h)?h!==null&&a.delete(i):(o==="retain"&&f(),Pi(h,s.get(p)??null)?delete c[p]:c[p]=h)}}else if(this.deletes(a)){s.set(p,h);const m=r.get(p)??null;Pi(m,h)||(o==="retain"&&f(),c[p]=m)}else if(!a.deleted){s.set(p,h);const m=c[p];m!==void 0&&(Pi(m,h)?m!==null&&a.delete(i):(o==="retain"&&f(),h===null?delete c[p]:c[p]=h))}a.deleted||(o==="insert"&&f(),Gr(r,a.content));break}}a=a.right}for(f();n.length>0;){const p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class wn extends Ye{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new wn}clone(){const e=new wn;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const i=new UC(this,e,n);Vo(this,e,i),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Vn&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Pe(this.doc,i=>{const r=new ap(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const a=e[s];if(a.insert!==void 0){const o=!n&&typeof a.insert=="string"&&s===e.length-1&&r.right===null&&a.insert.slice(-1)===`
`?a.insert.slice(0,-1):a.insert;(typeof o!="string"||o.length>0)&&op(i,this,r,o,a.attributes||{})}else a.retain!==void 0?sb(i,this,r,a.retain,a.attributes||{}):a.delete!==void 0&&ob(i,r,a.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,i){const r=[],s=new Map,a=this.doc;let o="",c=this._start;function l(){if(o.length>0){const d={};let f=!1;s.forEach((h,m)=>{f=!0,d[m]=h});const p={insert:o};f&&(p.attributes=d),r.push(p),o=""}}const u=()=>{for(;c!==null;){if(Wr(c,e)||n!==void 0&&Wr(c,n))switch(c.content.constructor){case Vn:{const d=s.get("ychange");e!==void 0&&!Wr(c,e)?(d===void 0||d.user!==c.id.client||d.type!=="removed")&&(l(),s.set("ychange",i?i("removed",c.id):{type:"removed"})):n!==void 0&&!Wr(c,n)?(d===void 0||d.user!==c.id.client||d.type!=="added")&&(l(),s.set("ychange",i?i("added",c.id):{type:"added"})):d!==void 0&&(l(),s.delete("ychange")),o+=c.content.str;break}case hi:case ur:{l();const d={insert:c.content.getContent()[0]};if(s.size>0){const f={};d.attributes=f,s.forEach((p,h)=>{f[h]=p})}r.push(d);break}case lt:Wr(c,e)&&(l(),Gr(s,c.content));break}c=c.right}l()};return e||n?Pe(a,d=>{e&&Zu(d,e),n&&Zu(d,n),u()},"cleanup"):u(),r}insert(e,n,i){if(n.length<=0)return;const r=this.doc;r!==null?Pe(r,s=>{const a=Zo(s,this,e,!i);i||(i={},a.currentAttributes.forEach((o,c)=>{i[c]=o})),op(s,this,a,n,i)}):this._pending.push(()=>this.insert(e,n,i))}insertEmbed(e,n,i){const r=this.doc;r!==null?Pe(r,s=>{const a=Zo(s,this,e,!i);op(s,this,a,n,i||{})}):this._pending.push(()=>this.insertEmbed(e,n,i||{}))}delete(e,n){if(n===0)return;const i=this.doc;i!==null?Pe(i,r=>{ob(r,Zo(r,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,i){if(n===0)return;const r=this.doc;r!==null?Pe(r,s=>{const a=Zo(s,this,e,!1);a.right!==null&&sb(s,this,a,n,i)}):this._pending.push(()=>this.format(e,n,i))}removeAttribute(e){this.doc!==null?Pe(this.doc,n=>{Yo(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Pe(this.doc,i=>{rp(i,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return sp(this,e)}getAttributes(){return Qv(this)}_write(e){e.writeTypeRef(eN)}}const PC=t=>new wn;class cp{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===fi||n.constructor===Hn)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Hn extends Ye{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hn}clone(){const e=new Hn;return e.insert(0,this.toArray().map(n=>n instanceof Ye?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new cp(this,e)}querySelector(e){e=e.toUpperCase();const i=new cp(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e).next();return i.done?null:i.value}querySelectorAll(e){return e=e.toUpperCase(),Ii(new cp(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Vo(this,e,new FC(this,n,e))}toString(){return qv(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},i){const r=e.createDocumentFragment();return i!==void 0&&i._createAssociation(r,this),ta(this,s=>{r.insertBefore(s.toDOM(e,n,i),null)}),r}insert(e,n){this.doc!==null?Pe(this.doc,i=>{Zv(i,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Pe(this.doc,i=>{const r=e&&e instanceof Ye?e._item:e;qo(i,this,r,n)});else{const i=this._prelimContent,r=e===null?0:i.findIndex(s=>s===e)+1;if(r===0&&e!==null)throw Li("Reference item not found");i.splice(r,0,...n)}}delete(e,n=1){this.doc!==null?Pe(this.doc,i=>{Jv(i,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Vv(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Yv(this,e)}slice(e=0,n=this.length){return Hv(this,e,n)}forEach(e){ta(this,e)}_write(e){e.writeTypeRef(nN)}}const DC=t=>new Hn;class fi extends Hn{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((i,r)=>{this.setAttribute(r,i)}),this._prelimAttrs=null}_copy(){return new fi(this.nodeName)}clone(){const e=new fi(this.nodeName),n=this.getAttributes();return _I(n,(i,r)=>{typeof i=="string"&&e.setAttribute(r,i)}),e.insert(0,this.toArray().map(i=>i instanceof Ye?i.clone():i)),e}toString(){const e=this.getAttributes(),n=[],i=[];for(const o in e)i.push(o);i.sort();const r=i.length;for(let o=0;o<r;o++){const c=i[o];n.push(c+'="'+e[c]+'"')}const s=this.nodeName.toLocaleLowerCase(),a=n.length>0?" "+n.join(" "):"";return`<${s}${a}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Pe(this.doc,n=>{Yo(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Pe(this.doc,i=>{rp(i,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return sp(this,e)}hasAttribute(e){return eb(this,e)}getAttributes(e){return e?TC(this,e):Qv(this)}toDOM(e=document,n={},i){const r=e.createElement(this.nodeName),s=this.getAttributes();for(const a in s){const o=s[a];typeof o=="string"&&r.setAttribute(a,o)}return ta(this,a=>{r.appendChild(a.toDOM(e,n,i))}),i!==void 0&&i._createAssociation(r,this),r}_write(e){e.writeTypeRef(tN),e.writeKey(this.nodeName)}}const jC=t=>new fi(t.readKey());class FC extends Ko{constructor(e,n,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(r=>{r===null?this.childListChanged=!0:this.attributesChanged.add(r)})}}class Kr extends Kn{constructor(e){super(),this.hookName=e}_copy(){return new Kr(this.hookName)}clone(){const e=new Kr(this.hookName);return this.forEach((n,i)=>{e.set(i,n)}),e}toDOM(e=document,n={},i){const r=n[this.hookName];let s;return r!==void 0?s=r.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),i!==void 0&&i._createAssociation(s,this),s}_write(e){e.writeTypeRef(iN),e.writeKey(this.hookName)}}const BC=t=>new Kr(t.readKey());class lr extends wn{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new lr}clone(){const e=new lr;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,i){const r=e.createTextNode(this.toString());return i!==void 0&&i._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const n=[];for(const r in e.attributes){const s=[];for(const a in e.attributes[r])s.push({key:a,value:e.attributes[r][a]});s.sort((a,o)=>a.key<o.key?-1:1),n.push({nodeName:r,attrs:s})}n.sort((r,s)=>r.nodeName<s.nodeName?-1:1);let i="";for(let r=0;r<n.length;r++){const s=n[r];i+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){const o=s.attrs[a];i+=` ${o.key}="${o.value}"`}i+=">"}i+=e.insert;for(let r=n.length-1;r>=0;r--)i+=`</${n[r].nodeName}>`;return i}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(rN)}}const $C=t=>new lr;class lp{constructor(e,n){this.id=e,this.length=n}get deleted(){throw $n()}mergeWith(e){return!1}write(e,n,i){throw $n()}integrate(e,n){throw $n()}}const zC=0;class Vt extends lp{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),Pv(e.doc.store,this)}write(e,n){e.writeInfo(zC),e.writeLen(this.length-n)}getMissing(e,n){return null}}class na{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new na(this.content)}splice(e){throw $n()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const WC=t=>new na(t.readBuf());class ia{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ia(this.len)}splice(e){const n=new ia(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Bo(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const GC=t=>new ia(t.readLen()),cb=(t,e)=>new di({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class ra{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ra(cb(this.doc.guid,this.opts))}splice(e){throw $n()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const KC=t=>new ra(cb(t.readString(),t.readAny()));class ur{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ur(this.embed)}splice(e){throw $n()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const HC=t=>new ur(t.readJSON());class lt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new lt(this.key,this.value)}splice(e){throw $n()}mergeWith(e){return!1}integrate(e,n){const i=n.parent;i._searchMarker=null,i._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const VC=t=>new lt(t.readKey(),t.readJSON());class Jo{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Jo(this.arr)}splice(e){const n=new Jo(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const i=this.arr.length;e.writeLen(i-n);for(let r=n;r<i;r++){const s=this.arr[r];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const qC=t=>{const e=t.readLen(),n=[];for(let i=0;i<e;i++){const r=t.readString();r==="undefined"?n.push(void 0):n.push(JSON.parse(r))}return new Jo(n)};class pr{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new pr(this.arr)}splice(e){const n=new pr(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const i=this.arr.length;e.writeLen(i-n);for(let r=n;r<i;r++){const s=this.arr[r];e.writeAny(s)}}getRef(){return 8}}const YC=t=>{const e=t.readLen(),n=[];for(let i=0;i<e;i++)n.push(t.readAny());return new pr(n)};class Vn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Vn(this.str)}splice(e){const n=new Vn(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const XC=t=>new Vn(t.readString()),ZC=[OC,CC,PC,jC,DC,BC,$C],JC=0,QC=1,eN=2,tN=3,nN=4,iN=5,rN=6;class hi{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new hi(this.type._copy())}splice(e){throw $n()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(i=>{i.deleted?i.id.clock<(e.beforeState.get(i.id.client)||0)&&e._mergeStructs.push(i):i.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(e,!0),i=i.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const sN=t=>new hi(ZC[t.readTypeRef()](t)),Qo=(t,e,n)=>{const{client:i,clock:r}=e.id,s=new ut(_e(i,r+n),e,_e(i,r+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=_e(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s};class ut extends lp{constructor(e,n,i,r,s,a,o,c){super(e,c.getLength()),this.origin=i,this.left=n,this.right=r,this.rightOrigin=s,this.parent=a,this.parentSub=o,this.redone=null,this.content=c,this.info=this.content.isCountable()?Jg:0}set marker(e){(this.info&Lu)>0!==e&&(this.info^=Lu)}get marker(){return(this.info&Lu)>0}get keep(){return(this.info&Zg)>0}set keep(e){this.keep!==e&&(this.info^=Zg)}get countable(){return(this.info&Jg)>0}get deleted(){return(this.info&Nu)>0}set deleted(e){this.deleted!==e&&(this.info^=Nu)}markDeleted(){this.info|=Nu}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=ft(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=ft(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===zr&&this.id.client!==this.parent.client&&this.parent.clock>=ft(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Dv(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Mi(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Vt||this.right&&this.right.constructor===Vt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===ut&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===ut&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===zr){const i=Ju(n,this.parent);i.constructor===Vt?this.parent=null:this.parent=i.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=Dv(e,e.doc.store,_e(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,r;if(i!==null)r=i.right;else if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start;const s=new Set,a=new Set;for(;r!==null&&r!==this.right;){if(a.add(r),s.add(r),$o(this.origin,r.origin)){if(r.id.client<this.id.client)i=r,s.clear();else if($o(this.rightOrigin,r.rightOrigin))break}else if(r.origin!==null&&a.has(Ju(e.doc.store,r.origin)))s.has(Ju(e.doc.store,r.origin))||(i=r,s.clear());else break;r=r.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Pv(e.doc.store,this),this.content.integrate(e,this),Bv(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Vt(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:_e(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&$o(e.origin,this.lastId)&&this.right===e&&$o(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(i=>{i.p===e&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Bo(e.deleteSet,this.id.client,this.id.clock,this.length),Bv(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw zn();this.content.gc(e),n?pC(e,this,new Vt(this.id,this.length)):this.content=new ia(this.length)}write(e,n){const i=n>0?_e(this.id.client,this.id.clock+n-1):this.origin,r=this.rightOrigin,s=this.parentSub,a=this.content.getRef()&Uo|(i===null?0:Ht)|(r===null?0:li)|(s===null?0:Ks);if(e.writeInfo(a),i!==null&&e.writeLeftID(i),r!==null&&e.writeRightID(r),i===null&&r===null){const o=this.parent;if(o._item!==void 0){const c=o._item;if(c===null){const l=uC(o);e.writeParentInfo(!0),e.writeString(l)}else e.writeParentInfo(!1),e.writeLeftID(c.id)}else o.constructor===String?(e.writeParentInfo(!0),e.writeString(o)):o.constructor===zr?(e.writeParentInfo(!1),e.writeLeftID(o)):zn();s!==null&&e.writeString(s)}this.content.write(e,n)}}const lb=(t,e)=>aN[e&Uo](t),aN=[()=>{zn()},GC,qC,WC,XC,HC,VC,sN,YC,KC,()=>{zn()}],oN=10;class sn extends lp{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){zn()}write(e,n){e.writeInfo(oN),me(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},pb="__ $YJS$ __";ub[pb]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),ub[pb]=!0;let up,pp,cN=t=>t();function lN(t,e){if(pp)return pp(t,e);cN(t)}function dr(t,e,n){if(up)return up.apply(null,arguments);throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.")}function uN(t){up=function(e,n,i){const r=t.createAtom(e);return n&&n(),r},pp=(e,n)=>t.reaction(e,n,{fireImmediately:!1})}const db=new WeakSet;function pN(t){if(db.has(t))return t;db.add(t);let e;const n=new Map;function i(){if(!e){const d=f=>{(f.changes.added.size||f.changes.deleted.size||f.changes.keys.size||f.changes.delta.length)&&e.reportChanged()};e=dr("map",()=>{t.observe(d)},()=>{t.unobserve(d)})}e.reportObserved(t._implicitObserver)}function r(d){let f=n.get(d);if(!f){const p=h=>{f.reportChanged()};f=dr(d+"",()=>{t.observe(p)},()=>{t.unobserve(p)}),n.set(d,f)}f.reportObserved(t._implicitObserver)}const s=t.get;t.get=function(d){if(typeof d!="number")throw new Error("unexpected");return r(d),Reflect.apply(s,this,arguments)};function a(d){const f=t[d];t[d]=function(){return i(),Reflect.apply(f,this,arguments)}}function o(d){let f=t,p=Object.getOwnPropertyDescriptor(f,d);if(p||(f=Object.getPrototypeOf(f),p=Object.getOwnPropertyDescriptor(f,d)),p||(f=Object.getPrototypeOf(f),p=Object.getOwnPropertyDescriptor(f,d)),!p)throw new Error("property not found");const h=p.get;p.get=function(){return this._disableTracking||i(),Reflect.apply(h,this,arguments)},Object.defineProperty(t,d,p)}function c(d,f){let p=t,h=Object.getOwnPropertyDescriptor(p,d);if(h||(p=Object.getPrototypeOf(p),h=Object.getOwnPropertyDescriptor(p,d)),h||(p=Object.getPrototypeOf(p),h=Object.getOwnPropertyDescriptor(p,d)),!h)throw new Error("property not found");Object.defineProperty(t,f,h)}a("forEach"),a("toJSON"),a("toArray"),a("slice"),a("map"),c("length","lengthUntracked"),o("length");const l=t.push;t.push=function(d){this._disableTracking=!0;const f=l.call(this,d);return this._disableTracking=!1,f};const u=t.slice;return t.slice=function(d,f){this._disableTracking=!0;const p=u.call(this,d,f);return this._disableTracking=!1,p},t}const fb=new WeakSet;function dN(t){if(fb.has(t))return t;fb.add(t);let e;function n(){if(!e){let s=Array.from(t.share.keys());const a=o=>{const c=Array.from(t.share.keys());JSON.stringify(s)!==JSON.stringify(c)&&(s=c,e.reportChanged())};e=dr("map",()=>{t.on("beforeObserverCalls",a)},()=>{t.off("beforeObserverCalls",a)})}e.reportObserved(t._implicitObserver)}const i=t.get;t.get=function(s){if(typeof s!="string")throw new Error("unexpected");const a=Reflect.apply(i,this,arguments);return ec(a),a};function r(s){const a=t[s];let o;t[s]=function(){let c,l=arguments;return n(),o&&o.removeObservers(),o=lN(()=>(c=Reflect.apply(a,t,l),c),()=>e.reportChanged()),c}}return r("toJSON"),Object.defineProperty(t,"keys",{get:()=>(n(),Object.keys(t.share))}),t}const hb=new WeakSet;function fN(t){if(hb.has(t))return t;hb.add(t);let e;const n=new Map;function i(){if(!e){const o=c=>{(c.changes.added.size||c.changes.deleted.size||c.changes.keys.size||c.changes.delta.length)&&e.reportChanged()};e=dr("map",()=>{t.observe(o)},()=>{t.unobserve(o)})}e.reportObserved(t._implicitObserver)}function r(o){let c=n.get(o);if(!c){const l=u=>{u.keysChanged.has(o)&&(u.changes.added.size||u.changes.deleted.size||u.changes.keys.size||u.changes.delta.length)&&c.reportChanged()};c=dr(o,()=>{t.observe(l)},()=>{t.unobserve(l)}),n.set(o,c)}c.reportObserved(t._implicitObserver)}const s=t.get;t.get=function(o){if(typeof o!="string")throw new Error("unexpected");return r(o),Reflect.apply(s,this,arguments)};function a(o){const c=t[o];t[o]=function(){return i(),Reflect.apply(c,this,arguments)}}return a("values"),a("entries"),a("keys"),a("forEach"),a("toJSON"),t}const mb=new WeakSet;function gb(t){if(mb.has(t))return t;mb.add(t);let e;const n=r=>{e.reportChanged()};e=dr("text",()=>{t.observe(n)},()=>{t.unobserve(n)});function i(r){const s=t[r];t[r]=function(){return e.reportObserved(this._implicitObserver),Reflect.apply(s,this,arguments)}}return i("toString"),i("toJSON"),t}const vb=new WeakSet;function bb(t){if(vb.has(t))return t;vb.add(t);let e;const n=s=>{(s.changes.added.size||s.changes.deleted.size||s.changes.keys.size||s.changes.delta.length)&&e.reportChanged()};e=dr("xml",()=>{t.observe(n)},()=>{t.unobserve(n)});function i(s){const a=t[s];t[s]=function(){return e.reportObserved(this._implicitObserver),Reflect.apply(a,this,arguments)}}function r(s){let a=t,o=Object.getOwnPropertyDescriptor(a,s);if(o||(a=Object.getPrototypeOf(a),o=Object.getOwnPropertyDescriptor(a,s)),o||(a=Object.getPrototypeOf(a),o=Object.getOwnPropertyDescriptor(a,s)),!o)throw new Error("property not found");const c=o.get;o.get=function(){return e.reportObserved(this._implicitObserver),Reflect.apply(c,this,arguments)},Object.defineProperty(t,s,o)}return i("toString"),i("toDOM"),i("toArray"),i("getAttribute"),r("firstChild"),t}function ec(t){return t instanceof lr||t instanceof wn?gb(t):t instanceof Gn?pN(t):t instanceof Kn?fN(t):t instanceof di||Object.prototype.hasOwnProperty.call(t,"autoLoad")?dN(t):t instanceof Hn||t instanceof fi?bb(t):t}function xb(t){t.share.forEach(e=>{e.constructor!==Ye&&ec(e)})}function yb(t,e){for(let i=t.length-1;i>=e;i--){let r=t[i];if(!r.deleted){var n;if(r instanceof Vt)continue;(n=r.content)==null||n.getContent().forEach(s=>{s instanceof Ye&&ec(s)})}}}const _b=new WeakSet;function hN(t){_b.has(t)||(_b.add(t),ec(t),t.store.clients.forEach(e=>{e&&yb(e,0)}),xb(t),t.on("beforeObserverCalls",e=>{xb(t),e.afterState.forEach((n,i)=>{const r=e.beforeState.get(i)||0;if(r!==n){const s=e.doc.store.clients.get(i);if(!s)return;const a=_n(s,r);yb(s,a)}})}))}class sa{constructor(e){this.value=void 0,this.value=e}}function mN(t){return ArrayBuffer.isView(t)?new sa(t):new sa(Object.freeze(t))}function gN(t){const e=function(){var o;let c=(o=this[rn])==null?void 0:o.implicitObserver;return t._implicitObserver=c,t.slice.bind(t).apply(t,arguments).map(u=>{const d=tc(u,c);return c&&typeof d=="object"?Gs(d,c):d})},n=function(o){return o.map(c=>{const l=dp(c);let u=fr(l)||l;if(u instanceof sa&&(u=u.value),u instanceof Ye&&u.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return u})},i=function(){return[].findIndex.apply(e.apply(this),arguments)},r={slice:e,unshift:(...a)=>(t.unshift(n(a)),t.lengthUntracked),push:(...a)=>(t.push(n(a)),t.lengthUntracked),insert:t.insert.bind(t),toJSON:t.toJSON.bind(t),forEach:function(){return[].forEach.apply(e.apply(this),arguments)},every:function(){return[].every.apply(e.apply(this),arguments)},filter:function(){return[].filter.apply(e.apply(this),arguments)},find:function(){return[].find.apply(e.apply(this),arguments)},findIndex:i,some:function(){return[].some.apply(e.apply(this),arguments)},includes:function(){return[].includes.apply(e.apply(this),arguments)},map:function(){return[].map.apply(e.apply(this),arguments)},indexOf:function(){const a=arguments[0];return i.call(this,o=>_N(o,a))},splice:function(){let a=arguments[0]<0?t.length-Math.abs(arguments[0]):arguments[0],o=arguments[1],c=Array.from(Array.from(arguments).slice(2)),l=e.apply(this,[a,Number.isInteger(o)?a+o:void 0]);return t.doc?t.doc.transact(()=>{t.delete(a,o),t.insert(a,n(c))}):(t.delete(a,o),t.insert(a,n(c))),l}},s=[];for(let a in r)s[a]=r[a];return s}function aa(t){if(typeof t=="string"&&t.trim().length){const e=Number(t);if(Number.isInteger(e))return e}return t}function wb(t,e=new Gn){if(e[ct])throw new Error("unexpected");const n=gN(e),i=new Proxy(n,{set:(r,s,a)=>{throw typeof aa(s)!="number"?new Error:new Error("array assignment is not implemented / supported")},get:(r,s,a)=>{const o=aa(s);if(o===nc)return e;if(typeof o=="number"){let u;if(a&&a[rn]){var c;u=(c=a[rn])==null?void 0:c.implicitObserver,e._implicitObserver=u}let d=e.get(o);return d=tc(d,u),d}if(o===Symbol.toStringTag)return"Array";if(o===Symbol.iterator){const u=e.slice();return Reflect.get(u,o)}return o==="length"?e.length:Reflect.get(r,o,a)},deleteProperty:(r,s)=>{const a=aa(s);if(typeof a!="number")throw new Error;return a<e.lengthUntracked&&a>=0?(e.delete(a),!0):!1},has:(r,s)=>{const a=aa(s);return typeof a!="number"?Reflect.has(r,a):a<e.lengthUntracked&&a>=0},getOwnPropertyDescriptor(r,s){const a=aa(s);if(a==="length")return{enumerable:!1,configurable:!1,writable:!0};if(typeof a=="number"&&a>=0&&a<e.lengthUntracked)return{enumerable:!0,configurable:!0,writable:!0}},ownKeys:r=>{const s=[];for(let a=0;a<e.length;a++)s.push(a+"");return s.push("length"),s}});return n.push.apply(i,t),i}function Eb(t,e=new Kn){if(e[ct])throw new Error("unexpected");const n=new Proxy({},{set:(i,r,s)=>{if(typeof r!="string")throw new Error;const a=dp(s);let o=fr(a)||a;if(o instanceof sa&&(o=o.value),o instanceof Ye&&o.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return e.set(r,o),!0},get:(i,r,s)=>{if(r===nc)return e;if(typeof r!="string")return Reflect.get(i,r);let a;if(s&&s[rn]){var o;a=(o=s[rn])==null?void 0:o.implicitObserver,e._implicitObserver=a}let c=e.get(r);return c=tc(c,a),c},deleteProperty:(i,r)=>{if(typeof r!="string")throw new Error;return e.has(r)?(e.delete(r),!0):!1},has:(i,r)=>!!(typeof r=="string"&&e.has(r)),getOwnPropertyDescriptor(i,r){if(typeof r=="string"&&e.has(r))return{enumerable:!0,configurable:!0}},ownKeys:i=>Array.from(e.keys())});oa.set(e,n);for(let i in t)n[i]=t[i];return n}function vN(t){return t instanceof Ye}const oa=new WeakMap;function tc(t,e){if(vN(t)){if(t._implicitObserver=e,t instanceof Gn||t instanceof Kn){if(!oa.has(t)){const n=dp(t);oa.set(t,n)}t=oa.get(t)}else if(t instanceof fi||t instanceof Hn||t instanceof lr||t instanceof Kr||t instanceof wn)Ru(t),t.__v_skip=!0;else throw new Error("unknown YType");return t}else{if(t===null)return null;if(typeof t=="object")return mN(t)}return t}function dp(t){if(t==null)return t;if(t=fr(t)||t,t instanceof Gn)return wb([],t);if(t instanceof Kn)return Eb({},t);if(typeof t=="string")return t;if(Array.isArray(t))return wb(t);if(t instanceof fi||t instanceof Hn||t instanceof lr||t instanceof Kr)return t;if(t instanceof wn)return t;if(typeof t=="object")return t instanceof sa?t:Eb(t);if(typeof t=="number"||typeof t=="boolean")return t;throw new Error("invalid")}function bN(t){for(let[e,n]of Object.entries(t))if(Array.isArray(n)){if(n.length!==0)throw new Error("Root Array initializer must always be empty array")}else if(n&&typeof n=="object"){if(Object.keys(n).length!==0||Object.getPrototypeOf(n)!==Object.prototype)throw new Error("Root Object initializer must always be {}")}else if(n!=="xml"&&n!=="text")throw new Error("unknown Root initializer")}function kb(t,e,n){let i=e[n];if(!i){n!=="__v_raw"&&n!=="__v_isRef"&&n!=="__v_isReadonly"&&console.warn("property not found on root doc",n);return}return i==="xml"?t.getXmlFragment(n):i==="text"?t.getText(n):Array.isArray(i)?t.getArray(n):t.getMap(n)}function xN(t,e){if(t[ct])throw new Error("unexpected");bN(e);const n=new Proxy({},{set:(i,r,s)=>{throw typeof r!="string"?new Error:new Error("cannot set new elements on root doc")},get:(i,r,s)=>{if(r===nc)return t;if(typeof r!="string")return Reflect.get(i,r);let a;if(s&&s[rn]){var o;a=(o=s[rn])==null?void 0:o.implicitObserver,t._implicitObserver=a}if(r==="toJSON"){for(let u of Object.keys(e))kb(t,e,u);return Reflect.get(t,r)}let c=kb(t,e,r);return c=tc(c,a),c},deleteProperty:(i,r)=>{throw new Error("deleteProperty not available for doc")},has:(i,r)=>!!(typeof r=="string"&&t.share.has(r)),getOwnPropertyDescriptor(i,r){if(typeof r=="string"&&t.share.has(r)||r==="toJSON")return{enumerable:!0,configurable:!0}},ownKeys:i=>Array.from(t.share.keys())});return oa.set(t,n),n}uN(FO);const nc=Symbol("INTERNAL_SYMBOL");function Sb(t,e){const n=fr(t)||t;if(!n)throw new Error("not a valid synced object");return n instanceof di?(n.on("update",e),()=>{n.off("update",e)}):(n.observeDeep(e),()=>{n.unobserveDeep(e)})}function yN(t){const e=fr(t);if(!(e instanceof di))throw new Error("store is not a valid syncedStore that maps to a Y.Doc");return e}function fr(t){if(typeof t!="object"||t===null)return;const e=t[nc];return e&&(Ru(e),e.__v_skip=!0),e}function _N(t,e){if(t===e)return!0;if(typeof t=="object"&&typeof e=="object"){const n=fr(t),i=fr(e);return!n||!i?!1:n===i}return!1}function wN(t,e=new di){return hN(e),xN(e,t)}const fp=0,Ab=1,Tb=2,EN=(t,e)=>{me(t,fp);const n=cC(e);_t(t,n)},Rb=(t,e,n)=>{me(t,Ab),_t(t,rC(e,n))},kN=(t,e,n)=>Rb(e,n,Ot(t)),Ob=(t,e,n)=>{try{tC(e,Ot(t),n)}catch(i){console.error("Caught error while handling a Yjs update",i)}},SN=(t,e)=>{me(t,Tb),_t(t,e)},AN=Ob,TN=(t,e,n,i)=>{const r=ge(t);switch(r){case fp:kN(t,e,n);break;case Ab:Ob(t,n,i);break;case Tb:AN(t,n,i);break;default:throw new Error("Unknown message type")}return r},mi=wN({shared:[]});function ic(t,e,n){return t.find(i=>i.key===e&&i.type===n)}function Ib(t,e,n){const i=ic(mi.shared,t,e);T(i)||mi.shared.push({key:t,type:e,value:n})}function RN(t,e){Ib(t,0,e)}function Cb(t,e){const n=new wn(e);Ib(t,1,n)}function ON(t,e){const n=ic(mi.shared,t,0);if(T(n)){n.value=e;return}mi.shared.push({key:t,type:0,value:e})}function IN(t,e){const n=new wn(e),i=ic(mi.shared,t,1);if(T(i)){i.value=n;return}mi.shared.push({key:t,type:1,value:n})}function Nb(t,e,n){let i;function r(){const a=ic(mi.shared,t,e);T(a)&&(s(),i=Sb(a,()=>n(a.value)))}const s=Sb(mi.shared,r);return r(),()=>i==null?void 0:i()}function CN(t,e){return Nb(t,0,e)}function Lb(t,e){return Nb(t,1,n=>e(n.toJSON()))}function rc(t){return yn(t)}let Mb=!1;const Di=yN(mi),gi=us("modem",["second"],t=>{switch(t.target){case"second":!Mb&&t.data%2===0&&gi.emit("modem:join");break;case"join":if(t.sender!==gi.id()){gi.reply(t,"joinack");const e=Ni();EN(e,Di),gi.reply(t,"sync",rc(e));const n=Ni();Rb(n,Di),gi.reply(t,"sync",rc(n))}break;case"joinack":Mb=!0;break;case"sync":{if(T(t.data)&&t.sender!==gi.id()){const e=or(t.data),n=Ni();TN(e,n,Di,gi)===fp&&gi.emit("modem:sync",rc(n))}break}}});function Ub(t){const e=Ni();SN(e,t),gi.emit("modem:sync",rc(e))}Di.on("update",Ub),Di.on("destroy",()=>{Di==null||Di.off("update",Ub)});function En(t){const e={},n={...t,getcommand(i){return e[i]},command(i,r){return e[i]=r,n}};return n}const hp=40,mp=Math.round(1e3/hp),Pb=3;var Ne=(t=>(t[t.ERROR=0]="ERROR",t[t.CLI=1]="CLI",t[t.LOADER=2]="LOADER",t[t.BOARD=3]="BOARD",t[t.OBJECT=4]="OBJECT",t[t.TERRAIN=5]="TERRAIN",t[t.CHARSET=6]="CHARSET",t[t.PALETTE=7]="PALETTE",t[t.EIGHT_TRACK=8]="EIGHT_TRACK",t))(Ne||{});function Db(t,e){return{id:dn(),tags:new Set,code:t,...e}}function NN(t){if(T(t))return{id:t.id,code:t.code,tags:[...t.tags],func:t.func,board:T_(t.board),object:Aa(t.object),terrain:Aa(t.terrain)}}function LN(t,e){return T(t)?e.every(n=>t.tags.has(n)):!1}function jb(t,e,n,i){return!T(t)||hr(t)!==e?!1:n.some(r=>r===t.id)||i.includes(an(t))?!0:LN(t,i)}function MN(t){return t.map(e=>e.image)}function UN(t,e){const[n,i,...r]=e;if(T(t.stats)&&T(n))switch(n.image.toLowerCase()){case"rn":case"range":case"sl":case"select":case"nm":case"number":case"tx":case"text":case"ln":case"link":if(T(i)){const s=i.image.toLowerCase();t.stats[s]=MN(r??[])}break}}function Fb(t){const e={...sc(t)};return Object.keys(e).forEach(n=>{switch(n){case"type":case"name":delete e[n];break}}),e}function PN(t){return T(t)?(t.stats=void 0,sc(t)):{}}function sc(t){var i;if(!T(t))return{};if(T((i=t.stats)==null?void 0:i.type))return t.stats;t.stats={};const e=vu(t.code);let n=!0;for(let r=0;r<e.tokens.length;++r){const s=e.tokens[r];if(s.tokenType===cu){const[a,...o]=s.image.slice(1).split(" "),c=a.toLowerCase(),l=o.join(" "),u=l.toLowerCase().trim();switch(c){case"stat":{const d=vu(`!${l}`);d.tokens.length&&UN(t,d.tokens);break}case"flags":t.stats.flags=u;break;case"cli":t.stats.type=1,t.stats.name=u;break;case"board":t.stats.type=3,t.stats.name=u;break;case"object":t.stats.type=4,t.stats.name=u;break;case"terrain":t.stats.type=5,t.stats.name=u;break;case"charset":t.stats.type=6,t.stats.name=u;break;case"palette":t.stats.type=7,t.stats.name=u;break;case"8track":t.stats.type=8,t.stats.name=u;break;case"loader":t.stats.type=2,t.stats.name=u;break;default:n?t.stats.name=[c,...o].join(" ").trim():t.stats[c]=1;break}n=!1}}return T(t.stats.type)||(t.stats.type=4),t.stats}function hr(t){return sc(t).type??0}function Hr(t){switch(hr(t)){default:case 0:return"error";case 1:return"cli";case 3:return"board";case 4:return"object";case 5:return"terrain";case 6:return"charset";case 7:return"palette";case 8:return"8track"}}function an(t){return(sc(t).name??"").toLowerCase()}function on(t){var e;switch((e=t==null?void 0:t.stats)==null?void 0:e.type){default:return;case 0:return(t==null?void 0:t.error)??"";case 3:return T(t.board)||(t.board=A_()),t.board.id=t.id,t.board;case 4:return T(t.object)||(t.object=Ad()),t.object.name=an(t),t.object;case 5:return T(t.terrain)||(t.terrain=Ad()),t.terrain.name=an(t),t.terrain;case 6:return T(t.charset),t.charset;case 7:return T(t.palette),t.palette;case 8:return T(t.eighttrack),t.eighttrack;case 2:return T(t.func)||(t.func=""),t.func}}function DN(t,e){return{id:dn(),name:ry(),tags:new Set(e),pages:t,flags:{},players:{}}}function jN(t){if(T(t))return{id:t.id,name:t.name,tags:[...t.tags],pages:t.pages.map(NN).filter(T),flags:{},players:{}}}function FN(t,e){return T(t)?e.every(n=>t.tags.has(n)):!1}function BN(t,e,n){if(!T(t))return!1;if(e.some(r=>r===t.id))return!0;const i=t.name.toLowerCase();return n.includes(i)?!0:FN(t,n)}function mr(t,e){if(!T(t))return;const n=e.toLowerCase();return t.pages.find(r=>r.id===e||n===an(r))}function ac(t,e,n){if(!T(t))return;const i=n.toLowerCase();return t.pages.find(s=>hr(s)===e&&(s.id===n||i===an(s)))}function Vr(t,e){return T(t)?t.pages.filter(n=>hr(n)===e).map(n=>on(n)).filter(T):[]}function Bb(t,e){if(!T(t)||!T(e))return!1;const n=mr(t,e.id);return T(n)?!1:(t.pages.push(e),!0)}function $N(t,e){const n=mr(t,e);if(T(t)&&T(n)){const i=e.toLowerCase();return t.pages=t.pages.filter(r=>r.id!==e&&i!==an(r)),n}}function kn(t,e){if(T(e)&&T(e.kind))return T(e.kinddata)||(e.kinddata=T(e.id)?gp(t,e.kind):$b(t,e.kind)),e.kinddata}function gp(t,e){const n=e??"",i=ac(t,Ne.OBJECT,n);if(T(i)){const r=Fb(i);return{...on(i),...r,name:n,code:i.code}}else return}function zN(t,e){const n=e.map(i=>i.toLowerCase());return((t==null?void 0:t.pages)??[]).filter(i=>jb(i,Ne.OBJECT,e,n)).map(i=>on(i)).filter(T)}function $b(t,e){const n=e??"",i=ac(t,Ne.TERRAIN,n);if(T(i)){const r=Fb(i);return{...on(i),...r,name:n,code:i.code}}else return}function vp(t,e){return on(mr(t,e))}function bp(t,e){const n=e.map(i=>i.toLowerCase());return((t==null?void 0:t.pages)??[]).filter(i=>jb(i,Ne.BOARD,e,n)).map(i=>on(i)).filter(T)}function zb(t,e){if(t)return t.flags[e]=t.flags[e]??{},t.flags[e]}function Wb(t,e,n){const i=zb(t,e);return i==null?void 0:i[n]}function Gb(t,e,n,i){const r=zb(t,e);return r&&(r[n]=i),i}function Kb(t,e){return vp(t,(t==null?void 0:t.players[e])??"")}function WN(t,e,n){T(t)&&T(vp(t,n))&&(t.players[e]=n)}function GN(t){return y_(Object.values((t==null?void 0:t.players)??{})).map(n=>vp(t,n)).filter(T)}function KN(t,e,n,i){const r=Xc(e,(n==null?void 0:n.id)??"");if(!T(t)||!T(e)||!T(r)||!T(r.x)||!T(r.y)||!T(e.lookup)||i.x<0||i.x>=e.width||i.y<0||i.y>=e.height)return{kind:"edge",collision:xt.ISSOLID,x:i.x,y:i.y};if(r.x-i.x===0&&r.y-i.y===0)return;const s=i.x+i.y*e.width,a=kn(t,r),o=r.collision??(a==null?void 0:a.collision),c=Xc(e,e.lookup[s]??"");if(T(c))return{...c};const l=e.terrain[s];if(T(l)){const u=kn(t,l),d=l.collision??(u==null?void 0:u.collision);if(kd(o,d))return{...l,x:i.x,y:i.y}}r.x=i.x,r.y=i.y,T(r.removed)||(e.lookup[s]=void 0,e.lookup[r.x+r.y*e.width]=r.id??"")}function qr(t,e){const n=kn(t,e);return T(e==null?void 0:e.id)&&T(e.x)&&T(e.y)?(e.name??(n==null?void 0:n.name)??"object").toLowerCase():((e==null?void 0:e.name)??(n==null?void 0:n.name)??"terrain").toLowerCase()}function xp(t,e,n,i){if(!T(t)||!T(e)||!T(e.named)||!T(n))return;const r=qr(t,n);e.named[r]||(e.named[r]=new Set),e.named[r].add((n==null?void 0:n.id)??i??"")}function HN(t,e,n){if(!(!T(t)||!T(e)||!T(e.lookup)||!T(n==null?void 0:n.id))&&!T(n.removed)){const i=n.x??0,r=n.y??0;e.lookup[i+r*e.width]=n.id}}function ca(t,e){if(!T(t)||!T(e)||T(e.lookup)&&T(e.named))return;const n=new Array(e.width*e.height).fill(void 0),i={},r=Object.values(e.objects);for(let o=0;o<r.length;++o){const c=r[o];if(T(c.x)&&T(c.y)&&T(c.id)&&!T(c.removed)){c.category=Ra.ISOBJECT,n[c.x+c.y*e.width]=c.id;const l=qr(t,c);i[l]||(i[l]=new Set),i[l].add(c.id)}}let s=0,a=0;for(let o=0;o<e.terrain.length;++o){const c=e.terrain[o];if(T(c)){c.x=s,c.y=a,c.category=Ra.ISTERRAIN;const l=qr(t,c);i[l]||(i[l]=new Set),i[l].add(o)}++s,s>=e.width&&(s=0,++a)}e.lookup=n,e.named=i}function yp(t,e,n){return qr(t,e)!=="player"&&T(e)?(e.removed=n,!0):!1}function oc(t,e,n){var i;if(T(t)&&T(e)&&T(n==null?void 0:n.id)){if(T(e.lookup)&&T(n.x)&&T(n.y)){const s=n.x+n.y*e.width;e.lookup[s]===n.id&&delete e.lookup[s]}const r=qr(t,n);T((i=e.named)==null?void 0:i[r])&&T(n.id)&&e.named[r].delete(n.id)}}function VN(t,e,n){if(!T(t)||!T(e))return;const i=Object.values(e.objects);for(let r=0;r<i.length;++r){const s=i[r];T(s.id)&&T(s.removed)&&n-s.removed>mp*5&&Zc(e,s.id)}}function qN(t,e,n){const i=[];if(!T(t)||!T(e))return i;e.lookup=void 0,ca(t,e);const r=Object.values(e.objects);for(let s=0;s<r.length;++s){const a=r[s];if(!T(a.id))continue;a.lx=a.x,a.ly=a.y;const o=kn(t,a),c=a.code??(o==null?void 0:o.code)??"";c&&i.push({id:a.id,type:Ne.OBJECT,code:c,object:a,terrain:void 0})}return VN(t,e,n),i}function YN(t,e,n,i){if(T(t)&&T(e)&&T(n)){const[r,s]=n,a=gp(t,r);if(T(a)&&T(a.name)){const o=Yc(e,i,r);return T(o)&&(o.headless=!0,Ta(o,s),xp(t,e,o)),o}}}function cc(t,e,n,i){if(T(t)&&T(e)&&T(n)){const[r,s]=n,a=$b(t,r);if(T(a)){const c=Id(e,i,r);Ta(c,s);const l=i.x+i.y*e.width;return xp(t,e,c,l),c}const o=gp(t,r);if(T(o)&&T(o.name)){const c=Yc(e,i,r);return Ta(c,s),HN(t,e,c),xp(t,e,c),c}}}const XN=navigator.userAgent.indexOf("Mac")!==-1?"cmd":"ctrl",vi="$dkpurple",ZN="$196",Hb="$205";function Sn(t,e){return`$${t}${e}$blue`}function Vb(t,e){return`$${t}${e}$ondkblue`}function De(t){Wt("cli",t)}function la(t){const e=ZN.repeat(t.length+2),n=Hb.repeat(t.length+2);De(`${vi} ${" ".repeat(t.length)} `),De(`${vi}${e}`),De(`${vi} $white${t} `),De(`${vi}${n}`)}function bi(t){const e=Hb.repeat(t.length+2);De(`${vi} ${" ".repeat(t.length)} `),De(`${vi} $gray${t} `),De(`${vi}${e}`)}function Te(t,e){De(`${vi} $white${t} $blue${e}`)}function Ee(t){De(`${vi}$blue${t}`)}let ji="";const _p="main";function qb(t){const e=DN([],[]);return Re(t)?e.name=t:T(Yn(_p))||(e.name=_p),NL(e),Ee(`created ${e.name}`),lc(),e}function Yr(){let t=Yn(ji);return T(t)?t:(t=Yn(_p),T(t)?(ji=t.id,Ee(`opened [book] ${t.name}`),t):qb())}function lc(){$c("cli")}const JN=En({get(t,e){const n=Ie(t.id()),i=Wb(n.book,n.player,e);return[T(i),i]},set(t,e,n){const i=Ie(t.id());return Gb(i.book,i.player,e,n),[!0,n]},shouldtick(){},tick(){},tock(){}}).command("bookcreate",(t,e)=>{const[n]=Z(ne(t,e),0,[X.STRING]),i=qb(n);return t.command("bookopen",i.id),0}).command("bookopen",(t,e)=>{const n=Ie(t.id()),[i]=Z(ne(t,e),0,[X.STRING]),r=Yn(i);return T(r)?(ji=i,Ee(`opened [book] ${r.name}`),t.command("pages")):Ct("cli","bookopen",`book ${i} not found`,n.player),0}).command("bookopenorcreate",(t,e)=>{const[n]=Z(ne(t,e),0,[X.STRING]),i=Yn(n);return T(i)?t.command("bookopen",n):t.command("bookcreate",n),0}).command("booktrash",(t,e)=>{const[n]=Z(ne(t,e),0,[X.STRING]),i=Yn(ji),r=Yn(n);return T(r)&&(i===r&&(ji=""),LL(n),Ee(`trashed [book] ${r.name}`),lc(),t.command("pages")),0}).command("pagecreate",(t,e)=>{const[n]=Z(ne(t,e),0,[X.STRING]),i=Yr();if(!T(i))return 0;const r=`@${n}
`,s=Db(r,{}),a=an(s),o=ac(i,hr(s),a);if(!T(o)){Bb(i,s);const c=Hr(s);Ee(`create [${c}] ${a}`),lc(),t.command("pageopen",s.id)}return 0}).command("pageopen",(t,e)=>{const n=Ie(t.id()),[i]=Z(ne(t,e),0,[X.STRING]),r=Yr();if(!T(r))return 0;ji=r.id;const s=mr(r,i);if(T(s)){const a=an(s),o=Hr(s);Ee(`opened [${o}] ${a}`),Cb(yd(r.id,s.id),s.code);const c=Hr(s);p_("cli",ji,s.id,c,`@book ${r.name}:${a}`,n.player)}else Ct("cli","pageopen",`page ${i} not found`,n.player);return 0}).command("pageopenorcreate",(t,e)=>{const[n]=Z(ne(t,e),0,[X.STRING]),i=Yr();if(!T(i))return 0;const r=mr(i,n);return T(r)?t.command("pageopen",n):t.command("pagecreate",n),0}).command("pagetrash",(t,e)=>{const[n]=Z(ne(t,e),0,[X.STRING]),i=Yr(),r=$N(i,n);if(T(n)){const s=an(r),a=Hr(r);Ee(`trashed [${a}] ${s}`),lc(),t.command("pages")}return 0}).command("biosflash",()=>(o_("cli"),Ee("bios flashed"),0)).command("bioserase",()=>(c_("cli"),Ee("bios erased, refreshing page recommended"),0)).command("help",(t,e)=>{const n=e.map(Bt).join(" ")||"menu";return t.command(`help${n}`),0}).command("text",(t,e)=>{const n=Ie(t.id()),i=e.map(Bt).join(" ");return Wt("$2",`${n.player}: ${i}`),0}).command("hyperlink",(t,e)=>{const n=Ie(t.id()),[i,...r]=e,s=Bt(i),a=r.map(Bt).join(" ");return Wt("$2",`!${a};${n.player}: ${s}`),0}).command("books",()=>{bi("books");const t=br();return t.length?t.forEach(e=>{De(`!bookopen ${e.id};${e.name}`)}):Ee("no books found"),De("!bookcreate;create a new book"),0}).command("pages",t=>{bi("pages");const e=Yr();return T(e)?e.pages.length?e.pages.forEach(n=>{const i=an(n);De(`!pageopen ${n.id};${i}`)}):(Ee("no pages found"),Ee("use @ to create a page"),Ee("@board name of board"),Ee("@object name of object"),Ee("@terrain name of terrain"),Ee("You can omit the type and it will default to object"),Ee("@object name of object"),Ee("@name of object")):t.command("bookopen","main"),0}).command("stat",(t,e)=>{const[n]=e,i=Bt(n);if(/^book /gi.test(i)){const r=i.substring(5);t.command("bookopenorcreate",r)}else t.command("pageopenorcreate",i);return 0}).command("trash",()=>{bi("$REDTRASH"),Ee("books");const t=br();t.length&&(t.forEach(n=>{De(`!booktrash ${n.id};$REDTRASH ${n.name}`)}),De(""));const e=Yn(ji);return T(e)&&(Ee(`pages in open ${e.name} book`),e.pages.forEach(n=>{const i=an(n);De(`!pagetrash ${n.id};$REDTRASH ${i}`)}),De("")),0}).command("save",()=>($c("cli"),0)).command("update",()=>{const t=br().map(e=>e.name).join(" ");return De(`!biosflash;$GREENWrite ${t} to bios`),0}).command("factoryreset",()=>(De("!bioserase;$REDReset bios"),0)).command("send",(t,e)=>{const[n,i]=Z(ne(t,e),0,[X.STRING,X.ANY]);switch(n){case"helpmenu":la("H E L P"),Te("#help controls","zss controls and inputs"),De("!helpcontrols;read help controls"),De(""),Te("#help text","text formatting"),De("!helptext;read help text"),De(""),Te("#help developer","developer commands"),De("!helpdeveloper;read help developer"),De(""),Te("#help player","player settings"),De("!helpplayer;read help player"),De(""),bi("keyboard input"),Te("?","open console"),Te("esc","close console"),Te("tab","move console"),Te("up / down arrow keys","navigate console items"),Te("left / right arrow keys","change console items"),Te("enter","interact with console items"),Te("alt + arrow keys","skip words and console lines"),Te(`${XN} + up / down arrow keys`,"input history");break;case"helpcontrols":la("zss controls and inputs"),bi("keyboard input"),Te("arrow keys","move"),Te("shift + arrow keys","shoot"),Te("enter","ok / accept"),Te("escape","cancel / close"),Te("tab","menu / action"),bi("mouse input"),Ee("todo ???"),bi("controller input"),Te("left stick","move"),Te("right stick","aim"),Te("a","ok / accept"),Te("b","cancel / close"),Te("y","menu / action"),Te("x","shoot"),Te("triggers","shoot");break;case"helptext":la("text formatting"),bi("typography"),Ee("plain text"),Ee("$centering text"),Ee('"\\"@quoted strings for special chars\\""'),Ee("$$0-255 for ascii chars $159$176$240"),Ee(`use color names like ${Sn("red","$$red")} to change foreground color`),Ee(`use color names like ${Vb("ongreen","$$ongreen")} to change background color`),Ee(`use clear ${Vb("clear","to change background to")} transparent`),bi("hyperlinks"),Ee(`${Sn("white",'"!hotkey"')} message shortcut;${Sn("gray","Label")}`),Ee(`${Sn("white",'"!range"')} flag [labelmin] [labelmax];${Sn("gray","Input Label")}`),Ee(`${Sn("white",'"!select"')} flag ...list of values;${Sn("gray","Input Label")}`),Ee(`${Sn("white",'"!number"')} flag [minvalue] [maxvalue];${Sn("gray","Input Label")}`),Ee(`${Sn("white",'"!text"')} flag;${Sn("gray","Input Label")}`);break;case"helpdeveloper":la("developer commands"),Te("#books","list books in memory"),Te("#pages","list pages in opened book"),Te("@[pagetype:]page name","create & edit a new codepage in the currently opened book"),Te("#trash","list books and pages from open book you can delete"),Te("#save","flush state to register"),Te("#update","write current books to bios"),Te("#factoryreset","erase books stored in bios");break;case"helpplayer":la("player settings"),Ee("todo");break;default:Wt("$2",`${n} ${i??""}`);break}return 0}),Xr={},ua=new Array(64);for(let t=0,e=65,n=90;t+e<=n;t++){const i=String.fromCharCode(t+e);Xr[i]=t,ua[t]=i}for(let t=0,e=97,n=122;t+e<=n;t++){const i=String.fromCharCode(t+e),r=t+26;Xr[i]=r,ua[r]=i}for(let t=0;t<10;t++){Xr[t.toString(10)]=t+52;const e=t.toString(10),n=t+52;Xr[e]=n,ua[n]=e}Xr["+"]=62,ua[62]="+",Xr["/"]=63,ua[63]="/";var Yb={},QN=function(t,e,n,i,r){var s=new Worker(Yb[e]||(Yb[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return s.onmessage=function(a){var o=a.data,c=o.$e$;if(c){var l=new Error(c[0]);l.code=c[1],l.stack=c[2],r(l,null)}else r(null,o)},s.postMessage(n,i),s},je=Uint8Array,It=Uint16Array,pa=Int32Array,Zr=new je([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jr=new je([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),da=new je([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xb=function(t,e){for(var n=new It(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new pa(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return{b:n,r}},Zb=Xb(Zr,2),wp=Zb.b,uc=Zb.r;wp[28]=258,uc[258]=28;for(var Jb=Xb(Jr,0),Qb=Jb.b,Ep=Jb.r,fa=new It(32768),We=0;We<32768;++We){var Fi=(We&43690)>>1|(We&21845)<<1;Fi=(Fi&52428)>>2|(Fi&13107)<<2,Fi=(Fi&61680)>>4|(Fi&3855)<<4,fa[We]=((Fi&65280)>>8|(Fi&255)<<8)>>1}for(var cn=function(t,e,n){for(var i=t.length,r=0,s=new It(e);r<i;++r)t[r]&&++s[t[r]-1];var a=new It(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(n){o=new It(1<<e);var c=15-e;for(r=0;r<i;++r)if(t[r])for(var l=r<<4|t[r],u=e-t[r],d=a[t[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[fa[d]>>c]=l}else for(o=new It(i),r=0;r<i;++r)t[r]&&(o[r]=fa[a[t[r]-1]++]>>15-t[r]);return o},xi=new je(288),We=0;We<144;++We)xi[We]=8;for(var We=144;We<256;++We)xi[We]=9;for(var We=256;We<280;++We)xi[We]=7;for(var We=280;We<288;++We)xi[We]=8;for(var Qr=new je(32),We=0;We<32;++We)Qr[We]=5;var ex=cn(xi,9,0),tx=cn(xi,9,1),nx=cn(Qr,5,0),ix=cn(Qr,5,1),pc=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ln=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},dc=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},es=function(t){return(t+7)/8|0},gr=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new je(t.subarray(e,n))},rx=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Xe=function(t,e,n){var i=new Error(e||rx[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,Xe),!n)throw i;return i},kp=function(t,e,n,i){var r=t.length,s=i?i.length:0;if(!r||e.f&&!e.l)return n||new je(0);var a=!n,o=a||e.i!=2,c=e.i;a&&(n=new je(r*3));var l=function(xe){var Fe=n.length;if(xe>Fe){var Be=new je(Math.max(Fe*2,xe));Be.set(n),n=Be}},u=e.f||0,d=e.p||0,f=e.b||0,p=e.l,h=e.d,m=e.m,y=e.n,x=r*8;do{if(!p){u=ln(t,d,1);var v=ln(t,d+1,3);if(d+=3,v)if(v==1)p=tx,h=ix,m=9,y=5;else if(v==2){var w=ln(t,d,31)+257,_=ln(t,d+10,15)+4,S=w+ln(t,d+5,31)+1;d+=14;for(var R=new je(S),j=new je(19),V=0;V<_;++V)j[da[V]]=ln(t,d+V*3,7);d+=_*3;for(var C=pc(j),P=(1<<C)-1,b=cn(j,C,1),V=0;V<S;){var D=b[ln(t,d,P)];d+=D&15;var k=D>>4;if(k<16)R[V++]=k;else{var J=0,B=0;for(k==16?(B=3+ln(t,d,3),d+=2,J=R[V-1]):k==17?(B=3+ln(t,d,7),d+=3):k==18&&(B=11+ln(t,d,127),d+=7);B--;)R[V++]=J}}var re=R.subarray(0,w),z=R.subarray(w);m=pc(re),y=pc(z),p=cn(re,m,1),h=cn(z,y,1)}else Xe(1);else{var k=es(d)+4,O=t[k-4]|t[k-3]<<8,E=k+O;if(E>r){c&&Xe(0);break}o&&l(f+O),n.set(t.subarray(k,E),f),e.b=f+=O,e.p=d=E*8,e.f=u;continue}if(d>x){c&&Xe(0);break}}o&&l(f+131072);for(var se=(1<<m)-1,M=(1<<y)-1,L=d;;L=d){var J=p[dc(t,d)&se],Q=J>>4;if(d+=J&15,d>x){c&&Xe(0);break}if(J||Xe(2),Q<256)n[f++]=Q;else if(Q==256){L=d,p=null;break}else{var H=Q-254;if(Q>264){var V=Q-257,G=Zr[V];H=ln(t,d,(1<<G)-1)+wp[V],d+=G}var le=h[dc(t,d)&M],be=le>>4;le||Xe(3),d+=le&15;var z=Qb[be];if(be>3){var G=Jr[be];z+=dc(t,d)&(1<<G)-1,d+=G}if(d>x){c&&Xe(0);break}o&&l(f+131072);var de=f+H;if(f<z){var ue=s-z,Se=Math.min(z,de);for(ue+f<0&&Xe(3);f<Se;++f)n[f]=i[ue+f]}for(;f<de;++f)n[f]=n[f-z]}}e.l=p,e.p=L,e.b=f,e.f=u,p&&(u=1,e.m=m,e.d=h,e.n=y)}while(!u);return f!=n.length&&a?gr(n,0,f):n.subarray(0,f)},qn=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},ts=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},fc=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return{t:Rp,l:0};if(r==1){var a=new je(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(E,w){return E.f-w.f}),n.push({s:-1,f:25001});var o=n[0],c=n[1],l=0,u=1,d=2;for(n[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=r-1;)o=n[n[l].f<n[d].f?l++:d++],c=n[l!=u&&n[l].f<n[d].f?l++:d++],n[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var f=s[0].s,i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new It(f+1),h=hc(n[u-1],p,0);if(h>e){var i=0,m=0,y=h-e,x=1<<y;for(s.sort(function(w,_){return p[_.s]-p[w.s]||w.f-_.f});i<r;++i){var v=s[i].s;if(p[v]>e)m+=x-(1<<h-p[v]),p[v]=e;else break}for(m>>=y;m>0;){var k=s[i].s;p[k]<e?m-=1<<e-p[k]++-1:++i}for(;i>=0&&m;--i){var O=s[i].s;p[O]==e&&(--p[O],++m)}h=e}return{t:new je(p),l:h}},hc=function(t,e,n){return t.s==-1?Math.max(hc(t.l,e,n+1),hc(t.r,e,n+1)):e[t.s]=n},Sp=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new It(++e),i=0,r=t[0],s=1,a=function(c){n[i++]=c},o=1;o<=e;++o)if(t[o]==r&&o!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=t[o]}return{c:n.subarray(0,i),n:e}},ns=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},Ap=function(t,e,n){var i=n.length,r=es(e+2);t[r]=i&255,t[r+1]=i>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var s=0;s<i;++s)t[r+s+4]=n[s];return(r+4+i)*8},Tp=function(t,e,n,i,r,s,a,o,c,l,u){qn(e,u++,n),++r[256];for(var d=fc(r,15),f=d.t,p=d.l,h=fc(s,15),m=h.t,y=h.l,x=Sp(f),v=x.c,k=x.n,O=Sp(m),E=O.c,w=O.n,_=new It(19),S=0;S<v.length;++S)++_[v[S]&31];for(var S=0;S<E.length;++S)++_[E[S]&31];for(var R=fc(_,7),j=R.t,V=R.l,C=19;C>4&&!j[da[C-1]];--C);var P=l+5<<3,b=ns(r,xi)+ns(s,Qr)+a,D=ns(r,f)+ns(s,m)+a+14+3*C+ns(_,j)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&P<=b&&P<=D)return Ap(e,u,t.subarray(c,c+l));var J,B,re,z;if(qn(e,u,1+(D<b)),u+=2,D<b){J=cn(f,p,0),B=f,re=cn(m,y,0),z=m;var se=cn(j,V,0);qn(e,u,k-257),qn(e,u+5,w-1),qn(e,u+10,C-4),u+=14;for(var S=0;S<C;++S)qn(e,u+3*S,j[da[S]]);u+=3*C;for(var M=[v,E],L=0;L<2;++L)for(var Q=M[L],S=0;S<Q.length;++S){var H=Q[S]&31;qn(e,u,se[H]),u+=j[H],H>15&&(qn(e,u,Q[S]>>5&127),u+=Q[S]>>12)}}else J=ex,B=xi,re=nx,z=Qr;for(var S=0;S<o;++S){var G=i[S];if(G>255){var H=G>>18&31;ts(e,u,J[H+257]),u+=B[H+257],H>7&&(qn(e,u,G>>23&31),u+=Zr[H]);var le=G&31;ts(e,u,re[le]),u+=z[le],le>3&&(ts(e,u,G>>5&8191),u+=Jr[le])}else ts(e,u,J[G]),u+=B[G]}return ts(e,u,J[256]),u+B[256]},sx=new pa([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rp=new je(0),ax=function(t,e,n,i,r,s){var a=s.z||t.length,o=new je(i+a+5*(1+Math.ceil(a/7e3))+r),c=o.subarray(i,o.length-r),l=s.l,u=(s.r||0)&7;if(e){u&&(c[0]=s.r>>3);for(var d=sx[e-1],f=d>>13,p=d&8191,h=(1<<n)-1,m=s.p||new It(32768),y=s.h||new It(h+1),x=Math.ceil(n/3),v=2*x,k=function(g){return(t[g]^t[g+1]<<x^t[g+2]<<v)&h},O=new pa(25e3),E=new It(288),w=new It(32),_=0,S=0,R=s.i||0,j=0,V=s.w||0,C=0;R+2<a;++R){var P=k(R),b=R&32767,D=y[P];if(m[b]=D,y[P]=b,V<=R){var J=a-R;if((_>7e3||j>24576)&&(J>423||!l)){u=Tp(t,c,0,O,E,w,S,j,C,R-C,u),j=_=S=0,C=R;for(var B=0;B<286;++B)E[B]=0;for(var B=0;B<30;++B)w[B]=0}var re=2,z=0,se=p,M=b-D&32767;if(J>2&&P==k(R-M))for(var L=Math.min(f,J)-1,Q=Math.min(32767,R),H=Math.min(258,J);M<=Q&&--se&&b!=D;){if(t[R+re]==t[R+re-M]){for(var G=0;G<H&&t[R+G]==t[R+G-M];++G);if(G>re){if(re=G,z=M,G>L)break;for(var le=Math.min(M,G-2),be=0,B=0;B<le;++B){var de=R-M+B&32767,ue=m[de],Se=de-ue&32767;Se>be&&(be=Se,D=de)}}}b=D,D=m[b],M+=b-D&32767}if(z){O[j++]=268435456|uc[re]<<18|Ep[z];var xe=uc[re]&31,Fe=Ep[z]&31;S+=Zr[xe]+Jr[Fe],++E[257+xe],++w[Fe],V=R+re,++_}else O[j++]=t[R],++E[t[R]]}}for(R=Math.max(R,V);R<a;++R)O[j++]=t[R],++E[t[R]];u=Tp(t,c,l,O,E,w,S,j,C,R-C,u),l||(s.r=u&7|c[u/8|0]<<3,u-=7,s.h=y,s.p=m,s.i=R,s.w=V)}else{for(var R=s.w||0;R<a+l;R+=65535){var Be=R+65535;Be>=a&&(c[u/8|0]=l,Be=a),u=Ap(c,u+1,t.subarray(R,Be))}s.i=a}return gr(o,0,i+es(u)+r)},ox=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(n&1&&-306674912)^n>>>1;t[e]=n}return t}(),cx=function(){var t=-1;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=ox[n&255^e[i]]^n>>>8;t=n},d:function(){return~t}}},Op=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,s=n.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=i+=n[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}t=i,e=r},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},ha=function(t,e,n,i,r){if(!r&&(r={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new je(s.length+t.length);a.set(s),a.set(t,s.length),t=a,r.w=s.length}return ax(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,r)},eL=function(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n},lx=function(t,e,n){for(var i=t(),r=t.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<i.length;++a){var o=i[a],c=s[a];if(typeof o=="function"){e+=";"+c+"=";var l=o.toString();if(o.prototype)if(l.indexOf("[native code]")!=-1){var u=l.indexOf(" ",8)+1;e+=l.slice(u,l.indexOf("(",u))}else{e+=l;for(var d in o.prototype)e+=";"+c+".prototype."+d+"="+o.prototype[d].toString()}else e+=l}else n[c]=o}return e},mc=[],tL=function(t){var e=[];for(var n in t)t[n].buffer&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e},nL=function(t,e,n,i){if(!mc[n]){for(var r="",s={},a=t.length-1,o=0;o<a;++o)r=lx(t[o],r,s);mc[n]={c:lx(t[a],r,s),e:s}}var c=eL({},mc[n].e);return QN(mc[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,c,tL(c),i)},Ip=function(){return[je,It,pa,Zr,Jr,da,wp,Qb,tx,ix,fa,rx,cn,pc,ln,dc,es,gr,Xe,kp,pL,ux,oL]},Cp=function(){return[je,It,pa,Zr,Jr,da,uc,Ep,ex,xi,nx,Qr,fa,sx,Rp,cn,qn,ts,fc,hc,Sp,ns,Ap,Tp,es,gr,ax,ha,lL,ux]},iL=function(){return[px,fx,vr,cx,ox]},rL=function(){return[dx,cL]},sL=function(){return[hx,vr,Op]},aL=function(){return[mx]},ux=function(t){return postMessage(t,[t.buffer])},oL=function(t){return t&&{out:t.size&&new je(t.size),dictionary:t.dictionary}},un=function(t){return t.ondata=function(e,n){return postMessage([e,n],[e.buffer])},function(e){e.data.length?(t.push(e.data[0],e.data[1]),postMessage([e.data[0].length])):t.flush()}},is=function(t,e,n,i,r,s,a){var o,c=nL(t,i,r,function(l,u){l?(c.terminate(),e.ondata.call(e,l)):Array.isArray(u)?u.length==1?(e.queuedSize-=u[0],e.ondrain&&e.ondrain(u[0])):(u[1]&&c.terminate(),e.ondata.call(e,l,u[0],u[1])):a(u)});c.postMessage(n),e.queuedSize=0,e.push=function(l,u){e.ondata||Xe(5),o&&e.ondata(Xe(4,0,1),null,!!u),e.queuedSize+=l.length,c.postMessage([l,o=u],[l.buffer])},e.terminate=function(){c.terminate()},s&&(e.flush=function(){c.postMessage([])})},vr=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},px=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&vr(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},dx=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Xe(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!t[n++]);return n+(e&2)},cL=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},fx=function(t){return 10+(t.filename?t.filename.length+1:0)},hx=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=Op();r.p(e.dictionary),vr(t,2,r.d())}},mx=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Xe(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Xe(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function rs(t,e){return typeof t=="function"&&(e=t,t={}),this.ondata=e,t}var An=function(){function t(e,n){if(typeof e=="function"&&(n=e,e={}),this.ondata=n,this.o=e||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new je(98304),this.o.dictionary){var i=this.o.dictionary.subarray(-32768);this.b.set(i,32768-i.length),this.s.i=32768-i.length}}return t.prototype.p=function(e,n){this.ondata(ha(e,this.o,0,0,this.s),n)},t.prototype.push=function(e,n){this.ondata||Xe(5),this.s.l&&Xe(4);var i=e.length+this.s.z;if(i>this.b.length){if(i>2*this.b.length-32768){var r=new je(i&-32768);r.set(this.b.subarray(0,this.s.z)),this.b=r}var s=this.b.length-this.s.z;this.b.set(e.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(e.subarray(s),32768),this.s.z=e.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(e,this.s.z),this.s.z+=e.length;this.s.l=n&1,(this.s.z>this.s.w+8191||n)&&(this.p(this.b,n||!1),this.s.w=this.s.i,this.s.i-=2)},t.prototype.flush=function(){this.ondata||Xe(5),this.s.l&&Xe(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},t}(),gx=function(){function t(e,n){is([Cp,function(){return[un,An]}],this,rs.call(this,e,n),function(i){var r=new An(i.data);onmessage=un(r)},6,1)}return t}();function lL(t,e){return ha(t,e||{},0,0)}var Tn=function(){function t(e,n){typeof e=="function"&&(n=e,e={}),this.ondata=n;var i=e&&e.dictionary&&e.dictionary.subarray(-32768);this.s={i:0,b:i?i.length:0},this.o=new je(32768),this.p=new je(0),i&&this.o.set(i)}return t.prototype.e=function(e){if(this.ondata||Xe(5),this.d&&Xe(4),!this.p.length)this.p=e;else if(e.length){var n=new je(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length),this.p=n}},t.prototype.c=function(e){this.s.i=+(this.d=e||!1);var n=this.s.b,i=kp(this.p,this.s,this.o);this.ondata(gr(i,n,this.s.b),this.d),this.o=gr(i,this.s.b-32768),this.s.b=this.o.length,this.p=gr(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(e,n){this.e(e),this.c(n)},t}(),uL=function(){function t(e,n){is([Ip,function(){return[un,Tn]}],this,rs.call(this,e,n),function(i){var r=new Tn(i.data);onmessage=un(r)},7,0)}return t}();function pL(t,e){return kp(t,{i:2},e&&e.out,e&&e.dictionary)}var Np=function(){function t(e,n){this.c=cx(),this.l=0,this.v=1,An.call(this,e,n)}return t.prototype.push=function(e,n){this.c.p(e),this.l+=e.length,An.prototype.push.call(this,e,n)},t.prototype.p=function(e,n){var i=ha(e,this.o,this.v&&fx(this.o),n&&8,this.s);this.v&&(px(i,this.o),this.v=0),n&&(vr(i,i.length-8,this.c.d()),vr(i,i.length-4,this.l)),this.ondata(i,n)},t.prototype.flush=function(){An.prototype.flush.call(this)},t}(),dL=function(){function t(e,n){is([Cp,iL,function(){return[un,An,Np]}],this,rs.call(this,e,n),function(i){var r=new Np(i.data);onmessage=un(r)},8,1)}return t}(),Lp=function(){function t(e,n){this.v=1,this.r=0,Tn.call(this,e,n)}return t.prototype.push=function(e,n){if(Tn.prototype.e.call(this,e),this.r+=e.length,this.v){var i=this.p.subarray(this.v-1),r=i.length>3?dx(i):4;if(r>i.length){if(!n)return}else this.v>1&&this.onmember&&this.onmember(this.r-i.length);this.p=i.subarray(r),this.v=0}Tn.prototype.c.call(this,n),this.s.f&&!this.s.l&&!n&&(this.v=es(this.s.p)+9,this.s={i:0},this.o=new je(0),this.push(new je(0),n))},t}(),fL=function(){function t(e,n){var i=this;is([Ip,rL,function(){return[un,Tn,Lp]}],this,rs.call(this,e,n),function(r){var s=new Lp(r.data);s.onmember=function(a){return postMessage(a)},onmessage=un(s)},9,0,function(r){return i.onmember&&i.onmember(r)})}return t}(),Mp=function(){function t(e,n){this.c=Op(),this.v=1,An.call(this,e,n)}return t.prototype.push=function(e,n){this.c.p(e),An.prototype.push.call(this,e,n)},t.prototype.p=function(e,n){var i=ha(e,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(hx(i,this.o),this.v=0),n&&vr(i,i.length-4,this.c.d()),this.ondata(i,n)},t.prototype.flush=function(){An.prototype.flush.call(this)},t}(),hL=function(){function t(e,n){is([Cp,sL,function(){return[un,An,Mp]}],this,rs.call(this,e,n),function(i){var r=new Mp(i.data);onmessage=un(r)},10,1)}return t}(),Up=function(){function t(e,n){Tn.call(this,e,n),this.v=e&&e.dictionary?2:1}return t.prototype.push=function(e,n){if(Tn.prototype.e.call(this,e),this.v){if(this.p.length<6&&!n)return;this.p=this.p.subarray(mx(this.p,this.v-1)),this.v=0}n&&(this.p.length<4&&Xe(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Tn.prototype.c.call(this,n)},t}(),mL=function(){function t(e,n){is([Ip,aL,function(){return[un,Tn,Up]}],this,rs.call(this,e,n),function(i){var r=new Up(i.data);onmessage=un(r)},11,0)}return t}(),gL=typeof TextDecoder<"u"&&new TextDecoder,vL=0;try{gL.decode(Rp,{stream:!0}),vL=1}catch{}const ss=t=>{class e{constructor(){this.i=new t,this.i.ondata=(i,r)=>{this.ondata(null,i,r)}}push(i,r){try{this.queuedSize+=i.length,this.i.push(i,r),this.queuedSize-=i.length,this.ondrain&&this.ondrain(i.length)}catch(s){this.ondata(s,null,r||!1)}}}return e};let Pp=1;try{new gx().terminate()}catch{Pp=0}const bL=Pp?{gzip:dL,deflate:hL,"deflate-raw":gx}:{gzip:ss(Np),deflate:ss(Mp),"deflate-raw":ss(An)},xL=Pp?{gzip:fL,deflate:mL,"deflate-raw":uL}:{gzip:ss(Lp),deflate:ss(Up),"deflate-raw":ss(Tn)},vx=(t,e,n)=>{class i extends t{constructor(s){if(!arguments.length)throw new TypeError(`Failed to construct '${n}': 1 argument required, but only 0 present.`);const a=e[s];if(!a)throw new TypeError(`Failed to construct '${n}': Unsupported compression format: '${s}'`);let o=new a,c;super({start:l=>{o.ondata=(u,d,f)=>{u?l.error(u):d&&(l.enqueue(d),f&&(c?c():l.terminate()))}},transform:l=>{if(l instanceof ArrayBuffer)l=new Uint8Array(l);else if(ArrayBuffer.isView(l))l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);else throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");if(o.push(l),o.queuedSize>=32768)return new Promise(u=>{o.ondrain=()=>{o.queuedSize<32768&&u()}})},flush:()=>new Promise(l=>{c=l,o.push(new Uint8Array(0),!0)})},{size:l=>l.byteLength|0,highWaterMark:65536},{size:l=>l.byteLength|0,highWaterMark:65536})}}return i};function yL(t){return vx(t,bL,"CompressionStream")}function _L(t){return vx(t,xL,"DecompressionStream")}var bx={},wL={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var EL=wL;/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=EL,n=rl.extname,i=/^\s*([^;\s]*)(?:;|\s|$)/,r=/^text\//i;t.charset=s,t.charsets={lookup:s},t.contentType=a,t.extension=o,t.extensions=Object.create(null),t.lookup=c,t.types=Object.create(null),l(t.extensions,t.types);function s(u){if(!u||typeof u!="string")return!1;var d=i.exec(u),f=d&&e[d[1].toLowerCase()];return f&&f.charset?f.charset:d&&r.test(d[1])?"UTF-8":!1}function a(u){if(!u||typeof u!="string")return!1;var d=u.indexOf("/")===-1?t.lookup(u):u;if(!d)return!1;if(d.indexOf("charset")===-1){var f=t.charset(d);f&&(d+="; charset="+f.toLowerCase())}return d}function o(u){if(!u||typeof u!="string")return!1;var d=i.exec(u),f=d&&t.extensions[d[1].toLowerCase()];return!f||!f.length?!1:f[0]}function c(u){if(!u||typeof u!="string")return!1;var d=n("x."+u).toLowerCase().substr(1);return d&&t.types[d]||!1}function l(u,d){var f=["nginx","apache",void 0,"iana"];Object.keys(e).forEach(function(h){var m=e[h],y=m.extensions;if(!(!y||!y.length)){u[h]=y;for(var x=0;x<y.length;x++){var v=y[x];if(d[v]){var k=f.indexOf(e[d[v]].source),O=f.indexOf(m.source);if(d[v]!=="application/octet-stream"&&(k>O||k===O&&d[v].substr(0,12)==="application/"))continue}d[v]=h}}})}})(bx);var kL=yr(bx);yL(TransformStream),_L(TransformStream);function SL(t,e){switch([...e.slice(0,4)].map(r=>r.toString(16)).join("").toUpperCase()){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip"}return kL.lookup(t)}var ma=(t=>(t[t.VIEW=0]="VIEW",t[t.EDIT=1]="EDIT",t))(ma||{});function xx(t){return{id:dn(),type:t}}function yx(t,e){const n=xx(0);return n.book=t,n.board=e,n}function AL(t,e){const n=xx(1);return n.book=t,n.board=e,n}const $t={defaultplayer:"",books:new Map,chips:new Map,frames:new Map,tags:{main:new Set(["main"]),title:new Set(["title"]),player:new Set(["player"])}};function Dp(t){const e=t.toLowerCase();return[...$t.tags[e]??[]]}function as(){return Dp("main")}function _x(){return Dp("title")}function TL(){return Dp("player")}function RL(t){$t.defaultplayer=t}function wx(t){const e=[yx([],[])];return $t.frames.set(t,e),e}function OL(t,e,n){const i=gc(t);T(i)&&i.push(yx(e,n))}function IL(t,e,n){const i=gc(t);T(i)&&i.push(AL(e,n))}function gc(t){return $t.frames.get(t)??wx(t)}function br(){return[...$t.books.values()]}function Yn(t){const e=t.toLowerCase();return $t.books.get(t)??br().find(n=>n.name.toLowerCase()===e)}function Bi(t){const e=t.map(n=>n.toLowerCase());return br().filter(n=>BN(n,t,e))}function CL(t){$t.books.clear(),t.forEach(e=>{$t.books.set(e.id,e)})}function NL(t){return $t.books.set(t.id,t),t.id}function LL(t){const e=Yn(t);e&&$t.books.delete(e.id)}function Ie(t){let e=$t.chips.get(t);return T(e)||(e={book:void 0,board:void 0,object:void 0,terrain:void 0,charset:void 0,palette:void 0,player:$t.defaultplayer,inputqueue:new Set,inputmods:{[rt.NONE]:0,[rt.MOVE_UP]:0,[rt.MOVE_DOWN]:0,[rt.MOVE_LEFT]:0,[rt.MOVE_RIGHT]:0,[rt.OK_BUTTON]:0,[rt.CANCEL_BUTTON]:0,[rt.MENU_BUTTON]:0},inputcurrent:void 0},$t.chips.set(t,e)),e}function ne(t,e){const n=Ie(t.id());return U_(n,e,t.get)}function ML(t){if(!Re(t)||!t)return Ct("memory","login",`failed for playerid ==>${t}<==`,t);const e=as(),[n]=Bi(e);if(!T(n))return Ct("memory","login",`login failed to find book ${e.join(". ")}`,t);const i=_x(),[r]=bp(n,i);if(!T(r))return Ct("memory","login",`login failed to find board ${i.join(", ")}`,t);const s=TL(),[a]=zN(n,s);if(!T(a))return Ct("memory","login",`login failed to find object type ${s.join(", ")}`,t);const o={x:0,y:0},c=a.name??"player",l=Yc(r,o,c,t);return T(l==null?void 0:l.id)&&T(r.id)?(WN(n,t,r.id),!0):!1}function UL(t){$t.books.forEach(e=>Zc(Kb(e,t),t))}function PL(t,e){const n=as(),[i]=Bi(n);GN(i).forEach(s=>{const a=qN(i,s,e);for(let o=0;o<a.length;++o){const c=a[o],l=Ie(c.id);l.book=i,l.board=s,l.object=c.object,l.inputcurrent=void 0;const u=Hc(c.object,"player",""),d=kn(i,c.object),f=Hc(d,"cycle",Pb),p=Hc(c.object,"cycle",f),h=nt(p)?p:Pb;l.player=Re(u)?u:"";const m=Od(c.object);t.tick(c.id,c.type,h,e,m,c.code)}})}function DL(t,e,n,i){const r=`${n}_cli`,s=Ie(r);s.player=n,s.book=void 0,s.board=void 0,s.inputcurrent=void 0,xd("memory","running",e,r,i),t.once(r,Ne.CLI,e,"cli",i)}function Ex(t,e,n,i){if(!T(i))return;function r(o){const c=Db(o,{}),l=an(c),u=Hr(c),d=Yr(),f=ac(d,hr(c),l);T(f)?Wt("memory",`${d.name} already has a [${u}] named ${l}`):(Bb(d,c),Wt("memory",`created [${u}] ${l} in ${d.name}`))}async function s(o){const c=await o.text();r(c)}async function a(o){try{const c=await o.arrayBuffer();(await new t_().loadAsync(c)).forEach((d,f)=>{f.async("uint8array").then(p=>{const h=SL(d,p);if(h!==!1){const m=new File([p],f.name,{type:h});Ex(t,e,n,m)}}).catch(p=>{Ct("memory","crash",p.message)})})}catch(c){Ct("memory","crash",c.message)}}switch(i.type){case"text/plain":s(i).catch(o=>Ct("memory","crash",o.message));break;case"application/zip":a(i).catch(o=>Ct("memory","crash",o.message));break;default:return Ct("memory","loadfile",`${i.name} unsupported type ${i.type}`)}}function jL(t,e,n,i,r,s){const a=[];let o=e;const c=o===0,l=i.width??0,u=i.height??0,d=c?pt.BLACK:pt.CLEAR,f=Gy(t,o++,l,u,d);a.push(f);const p=Vy(t,o++,l,u);a.push(p);const h=o++,m=Hy(t,h);a.push(m);const y=qy(t,o++);r&&a.push(y),i.terrain.forEach((E,w)=>{if(E){const _=kn(n,E);f.char[w]=E.char??(_==null?void 0:_.char)??0,f.color[w]=E.color??(_==null?void 0:_.color)??d,f.bg[w]=E.bg??(_==null?void 0:_.bg)??d,f.color[w]!==pt.CLEAR&&(s[w]=f.color[w])}});const x=i.objects??{};Object.values(x).forEach(E=>{if(T(E.removed)||T(E.headless))return;const w=E.id??"",_=kn(n,E),S=Ky(t,h,w),R=E.lx??E.x??0,j=E.ly??E.y??0,V=R+j*i.width;S.x=E.x??0,S.y=E.y??0,S.char=E.char??(_==null?void 0:_.char)??1,S.color=E.color??(_==null?void 0:_.color)??pt.WHITE,S.bg=E.bg??(_==null?void 0:_.bg)??pt.BORROW,m.sprites.push(S),S.bg===pt.SHADOW&&(S.bg=pt.CLEAR,p.alphas[R+j*l]=.5),S.bg===pt.BORROW&&(S.bg=s[V]??pt.BLACK),S.color!==pt.CLEAR&&(s[V]=S.color),w===t&&(y.focusx=S.x,y.focusy=S.y,y.focusid=w)});function v(E,w){if(!(E<0||E>=i.width||w<0||w>=i.height))return p.alphas[E+w*i.width]}const k=[[1,1,1,1,1],[1,3,5,3,1],[1,5,12,5,1],[1,3,5,3,1],[1,1,1,1,1]].flat(),O=new Array(p.alphas.length);for(let E=0;E<p.alphas.length;++E){const w=E%i.width,_=Math.floor(E/i.width),S=[[v(w-2,_-2),v(w-1,_-2),v(w,_-2),v(w+1,_-2),v(w+2,_-2)],[v(w-2,_-1),v(w-1,_-1),v(w,_-1),v(w+1,_-1),v(w+2,_-1)],[v(w-2,_),v(w-1,_),v(w,_),v(w+1,_),v(w+2,_)],[v(w-2,_+1),v(w-1,_+1),v(w,_+1),v(w+1,_+1),v(w+2,_+1)],[v(w-2,_+2),v(w-1,_+2),v(w,_+2),v(w+1,_+2),v(w+2,_+2)]].flat().map((R,j)=>T(R)?R*k[j]:void 0).filter(T);O[E]=Ki(__(S),0,1)}return p.alphas=O,a}function kx(t){switch(t.type){case ma.EDIT:return 1;case ma.VIEW:return 2}return 0}function FL(t){const[e]=Bi(as()),n=Kb(e,t),i=[];if(!T(e)||!T(n))return i;let r=0;const s=[...gc(n.id??"")],a=new Array(n.width*n.height).fill(0);return s.sort((o,c)=>kx(o)-kx(c)),s.forEach(o=>{const[c]=Bi(o.book??as());if(!T(c))return;const[l]=bp(c,o.board??_x());if(!T(l))return;const u=jL(t,r,c,l,o.type===ma.VIEW,a);r+=u.length,i.push(...u)}),i}function jp(t,e,n){let i;const r=gc((e==null?void 0:e.id)??"");switch(n){case"edit":{i=r.find(o=>o.type===ma.EDIT);break}}const[s]=i?Bi((i==null?void 0:i.book)??[]):[t],[a]=i?bp(s,(i==null?void 0:i.board)??[]):[e];return{maybebook:s,maybeboard:a}}function BL(t){const e=Cd[t];if(T(e))return e;const n=Ud[t];if(T(n))return n;const i=el[t];if(T(i))return i;const r=Vd[t];if(T(r))return r}const $L=En({get(t,e){const n=BL(e);return T(n)?[!0,n]:[!1,void 0]},set(){return[!1,void 0]},shouldtick(){},tick(){},tock(){}}).command("clear",(t,e)=>{const n=Bt(e[0]);return t.set(n,void 0),0}).command("set",(t,e)=>{const[n,i]=Z(ne(t,e),0,[X.STRING,X.ANY]);return t.set(n,i),0}).command("take",(t,e)=>{const[n,i,r]=Z(ne(t,e),0,[X.STRING,X.MAYBE_NUMBER]),s=t.get(n),a=i??1;if(!nt(s))return 1;const o=s-a;return o<0?(r<e.length&&t.command(...e.slice(r)),1):(t.set(n,o),0)}).command("give",(t,e)=>{const[n,i,r]=Z(ne(t,e),0,[X.STRING,X.MAYBE_NUMBER]),s=t.get(n),a=nt(s)?s:0,o=i??1;if(!nt(o))return 0;const c=s===void 0?1:0;return c&&r<e.length&&t.command(...e.slice(r)),t.set(n,a+o),c}).command("idle",t=>(t.yield(),0)).command("end",t=>(t.endofprogram(),0)).command("lock",t=>(t.lock(t.id()),0)).command("restore",(t,e)=>(t.restore(Bt(e[0])),0)).command("unlock",t=>(t.unlock(),0)).command("zap",(t,e)=>(t.zap(Bt(e[0])),0)),zL=En({get(){return[!1,void 0]},set(){return[!1,void 0]},shouldtick(){},tick(){},tock(){}}).command("play",(t,e)=>{const n=ne(t,e),[i]=Z(n,0,[X.STRING]),r=t.get(i);return Re(r)?t.emit("pcspeaker:play",[-1,r]):t.emit("pcspeaker:play",[-1,i]),0}),WL=En({get(t,e){return[!1,void 0]},set(t,e,n){return[!1,void 0]},shouldtick(t,e){},tick(t){},tock(t){}}).command("board_stub",(t,e)=>0),GL=En({get(t,e){return[!1,void 0]},set(t,e,n){return[!1,void 0]},shouldtick(t,e){},tick(t){},tock(t){}}).command("charset_stub",(t,e)=>0);var Sx={exports:{}};/*! Case - v1.6.2 - 2020-03-24
* Copyright (c) 2020 Nathan Bubna; Licensed MIT, GPL */(function(t){(function(){var e=function(p,h){return h=h||"",p.replace(/(^|-)/g,"$1\\u"+h).replace(/,/g,"\\u"+h)},n=e("20-26,28-2F,3A-40,5B-60,7B-7E,A0-BF,D7,F7","00"),i="a-z"+e("DF-F6,F8-FF","00"),r="A-Z"+e("C0-D6,D8-DE","00"),s="A|An|And|As|At|But|By|En|For|If|In|Of|On|Or|The|To|Vs?\\.?|Via",a=function(p,h,m,y){return p=p||n,h=h||i,m=m||r,y=y||s,{capitalize:new RegExp("(^|["+p+"])(["+h+"])","g"),pascal:new RegExp("(^|["+p+"])+(["+h+m+"])","g"),fill:new RegExp("["+p+"]+(.|$)","g"),sentence:new RegExp('(^\\s*|[\\?\\!\\.]+"?\\s+"?|,\\s+")(['+h+"])","g"),improper:new RegExp("\\b("+y+")\\b","g"),relax:new RegExp("([^"+m+"])(["+m+"]*)(["+m+"])(?=[^"+m+"]|$)","g"),upper:new RegExp("^[^"+h+"]+$"),hole:/[^\s]\s[^\s]/,apostrophe:/'/g,room:new RegExp("["+p+"]")}},o=a(),c={re:o,unicodes:e,regexps:a,types:[],up:String.prototype.toUpperCase,low:String.prototype.toLowerCase,cap:function(p){return c.up.call(p.charAt(0))+p.slice(1)},decap:function(p){return c.low.call(p.charAt(0))+p.slice(1)},deapostrophe:function(p){return p.replace(o.apostrophe,"")},fill:function(p,h,m){return h!=null&&(p=p.replace(o.fill,function(y,x){return x?h+x:""})),m&&(p=c.deapostrophe(p)),p},prep:function(p,h,m,y){if(p=p==null?"":p+"",!y&&o.upper.test(p)&&(p=c.low.call(p)),!h&&!o.hole.test(p)){var x=c.fill(p," ");o.hole.test(x)&&(p=x)}return!m&&!o.room.test(p)&&(p=p.replace(o.relax,c.relax)),p},relax:function(p,h,m,y){return h+" "+(m?m+" ":"")+y}},l={_:c,of:function(p){for(var h=0,m=c.types.length;h<m;h++)if(l[c.types[h]].apply(l,arguments)===p)return c.types[h]},flip:function(p){return p.replace(/\w/g,function(h){return(h==c.up.call(h)?c.low:c.up).call(h)})},random:function(p){return p.replace(/\w/g,function(h){return(Math.round(Math.random())?c.up:c.low).call(h)})},type:function(p,h){l[p]=h,c.types.push(p)}},u={lower:function(p,h,m){return c.fill(c.low.call(c.prep(p,h)),h,m)},snake:function(p){return l.lower(p,"_",!0)},constant:function(p){return l.upper(p,"_",!0)},camel:function(p){return c.decap(l.pascal(p))},kebab:function(p){return l.lower(p,"-",!0)},upper:function(p,h,m){return c.fill(c.up.call(c.prep(p,h,!1,!0)),h,m)},capital:function(p,h,m){return c.fill(c.prep(p).replace(o.capitalize,function(y,x,v){return x+c.up.call(v)}),h,m)},header:function(p){return l.capital(p,"-",!0)},pascal:function(p){return c.fill(c.prep(p,!1,!0).replace(o.pascal,function(h,m,y){return c.up.call(y)}),"",!0)},title:function(p){return l.capital(p).replace(o.improper,function(h,m,y,x){return y>0&&y<x.lastIndexOf(" ")?c.low.call(h):h})},sentence:function(p,h,m){return p=l.lower(p).replace(o.sentence,function(y,x,v){return x+c.up.call(v)}),h&&h.forEach(function(y){p=p.replace(new RegExp("\\b"+l.lower(y)+"\\b","g"),c.cap)}),m&&m.forEach(function(y){p=p.replace(new RegExp("(\\b"+l.lower(y)+"\\. +)(\\w)"),function(x,v,k){return v+c.low.call(k)})}),p}};u.squish=u.pascal,l.default=l;for(var d in u)l.type(d,u[d]);var f=typeof f=="function"?f:function(){};f(t.exports?t.exports=l:this.Case=l)}).call(bt)})(Sx);var KL=Sx.exports,HL=yr(KL);const $i={};function Ax(t,e){return t.player=e,t.layers=[],t.layout=[],t.layoutreset=!0,t.layoutfocus="scroll",t}function Tx(t){t.text=[],Object.values($i[t.id]??{}).forEach(e=>e==null?void 0:e()),$i[t.id]={}}function Rx(t){const e=t.layout.find(n=>n.name===t.layoutfocus);if(!e){const n={id:dn(),name:t.layoutfocus,edge:qt.RIGHT,size:20,text:[]};return t.layout.push(n),t.layoutreset=!1,n}return e}const Fp={},VL=new Set(["hk","hotkey","rn","range","sl","select","nm","number","tx","text"]),qL=new Set(["rn","range","sl","select","nm","number","tx","text"]),YL=new Set(["tx","text"]),XL={rn:1,range:1,sl:0,select:0,nm:0,number:0,tx:"",text:""};function xr(t){let e=Fp[t];return T(e)?e:Fp[t]=e=Ax({},t)}function ZL(){return Object.keys(Fp)}function JL(t){const e=xr(t);e.layout=e.layout.filter(n=>n.edge!==qt.SCROLL)}function QL(t,e,n){Object.values($i).forEach(i=>{if(i[e]!==void 0){const r=vd(t.id(),e);nt(n)&&ON(r,n),Re(n)&&IN(r,n)}})}function e2(t){const e=xr(t.id());e.layout=e.layout.filter(n=>n.edge!==qt.SCROLL||n.text.length>0)}function Bp(t,e,n,i,r){const s=xr(t.id()),a=i,o=r??HL.capital(e),c=s.layout.find(l=>l.name===o);if(c)s.layoutreset=!0,s.layoutfocus=o,nt(a)&&(c.size=a);else switch(n){case qt.START:Ax(s,t.id());break;case qt.LEFT:case qt.RIGHT:case qt.TOP:case qt.BOTTOM:case qt.SCROLL:{const l={id:dn(),name:o,edge:n,size:a??Xy[n],text:[]};s.layout.push(l),s.layoutfocus=o;break}}}function t2(t,e){const n=xr(t.id()),i=Rx(n);n.layoutreset&&(n.layoutreset=!1,Tx(i)),i.text.push(e)}function n2(t,e,n,i){const r=xr(t.id()),s=Rx(r);r.layoutreset&&(r.layoutreset=!1,Tx(s));const a=n.toLowerCase(),o=[t.id(),e,...VL.has(a)?[a]:["hyperlink",n],...i],c=o[2];if(qL.has(c)){const l=`${o[3]??""}`;$i[s.id]=$i[s.id]??{};const u=t.get(l)??XL[c];if($i[s.id][l]===void 0){const d=vd(t.id(),l);nt(u)&&RN(d,u),Re(u)&&Cb(d,u),YL.has(c)?$i[s.id][l]=Lb(d,f=>{T(f)&&f!==t.get(l)&&(console.info("modemobservevaluestring??",l,f,t.get(l)),t.set(l,f))}):$i[s.id][l]=CN(d,f=>{T(f)&&f!==t.get(l)&&(console.info("modemobservevaluenumber??",l,f,t.get(l)),t.set(l,f))})}}s.text.push(o)}const i2=En({get(){return[!1,void 0]},set(t,e,n){return QL(t,e,n),[!1,void 0]},shouldtick(){},tick(t){var i;const e=Ie(t.id());let n="scroll";T((i=e.object)==null?void 0:i.name)&&(n=e.object.name),Bp(t,"scroll",qt.SCROLL,void 0,n)},tock(t){e2(t)}}).command("gadget",(t,e)=>{const n=ne(t,e),[i]=Z(n,0,[X.STRING]),r=Yy[i.toLowerCase()];if(r===qt.SCROLL){const[,s,a]=Z(n,0,[X.STRING,X.MAYBE_STRING,X.MAYBE_NUMBER]);Bp(t,i,r,a,s)}else{const[,s,a]=Z(n,0,[X.STRING,X.MAYBE_NUMBER,X.MAYBE_STRING]);Bp(t,i,r,s,a)}return 0}).command("frame",(t,e)=>{var c;const n=Ie(t.id()),[i,r,s]=Z(ne(t,e),0,[X.STRING,X.MAYBE_STRING,X.MAYBE_STRING]),a=((c=n.board)==null?void 0:c.id)??"",o=i.toLowerCase();if(o==="reset")wx(a);else if(T(r)&&T(s))switch(r.toLowerCase()){case"edit":IL(a,[o],[s]);break;case"view":OL(a,[o],[s]);break}return 0}).command("text",(t,e)=>{const n=e.map(Bt).join("");return t2(t,n),0}).command("hyperlink",(t,e)=>{const[n,i,...r]=e,s=Bt(n),a=Bt(i);return n2(t,s,a,r),0}),r2=En({get(t,e){return[!1,void 0]},set(t,e,n){return[!1,void 0]},shouldtick(t,e){},tick(t){},tock(t){}}).command("loader",(t,e)=>0),wt={book:"",board:"",object:"",terrain:"",charset:"",palette:"",eighttrack:"",cursor:""};function Ox(t){const e=t.toLowerCase();switch(e){case"modbook":case"modboard":case"modobject":case"modterrain":case"modcharset":case"modpalette":case"modeighttrack":return e.replace("mod","")}}function Ix(){const[t]=Bi([wt.book]);if(T(t))return t;const[e]=Bi(as());if(T(e))return e}function s2(t,e,n){const i=Ix();if(!T(i))return;if(t==="book"){switch(e){case"name":Re(n)&&(i.name=n);break;default:return!1}return Wt("mods",`wrote ${n} to ${e} on book ${i.id}`)}const r=mr(i,wt[t]),s=Hr(r),a=(r==null?void 0:r.id)??"";switch(hr(r)){case Ne.BOARD:{const o=on(r);if(T(o))switch(e){default:R_(o,e,n);break}break}case Ne.OBJECT:{const o=on(r);if(T(o))switch(e){case"char":case"color":case"bg":o[e]=n;break;case"cycle":Vc(o,"cycle",n);break;default:return!1}break}case Ne.TERRAIN:{const o=on(r);if(T(o))switch(e){case"char":case"color":case"bg":o[e]=n;break;default:return!1}break}case Ne.CHARSET:{on(r);break}case Ne.PALETTE:{on(r);break}case Ne.EIGHT_TRACK:{on(r);break}default:return!1}return Wt("mods",`wrote ${n} to ${e} on ${s} ${a}`)}const a2=En({get(t,e){const n=Ox(e);if(T(n))return[!0,wt[n]];const i=Ix();switch(e){case"booklist":return[!0,br()];case"boardlist":return[!0,Vr(i,Ne.BOARD)];case"objectlist":return[!0,Vr(i,Ne.OBJECT)];case"terrainlist":return[!0,Vr(i,Ne.TERRAIN)];case"charsetlist":return[!0,Vr(i,Ne.CHARSET)];case"palettelist":return[!0,Vr(i,Ne.PALETTE)];case"sblist":case"soundblasterlist":return[!0,Vr(i,Ne.SOUNDBLASTER)]}return[!1,void 0]},set(t,e,n){const i=Ox(e);return T(i)?(wt[i]=n,[Wt("mods",`wrote ${n} to ${e}`),wt[i]]):[!1,void 0]},shouldtick(){},tick(){},tock(){}}).command("mod",(t,e)=>{const[n,i,r]=Z(ne(t,e),0,[X.STRING,X.MAYBE_NUMBER_OR_STRING,X.MAYBE_NUMBER_OR_STRING]);let s="",a;switch(n.toLowerCase()){case"book":wt.cursor="book",s=i,a=r;break;case"board":wt.cursor="board",s=i,a=r;break;case"object":wt.cursor="object",s=i,a=r;break;case"terrain":wt.cursor="terrain",s=i,a=r;break;case"charset":wt.cursor="charset",s=i,a=r;break;case"palette":wt.cursor="palette",s=i,a=r;break;case"soundblaster":wt.cursor="soundblaster",s=i,a=r;break;default:s=n,a=i;break}return wt.cursor&&Wt("mods",`selected ${wt.cursor} - ${s??""} ${a??""}`),wt.cursor&&Re(s)&&T(a)&&s2(wt.cursor,s,a),0}),Cx=new Set(["cycle","player","sender","inputmove","inputalt","inputctrl","inputshift","inputok","inputcancel","inputmenu","data"]),o2=new Set(["inputmove","inputalt","inputctrl","inputshift","inputok","inputcancel","inputmenu"]),c2=["NORTH","SOUTH","WEST","EAST"];function l2(t){const e=Ie(t.id??"");if(e.inputcurrent!==void 0)return;const[n=rt.NONE]=e.inputqueue;t.stats===void 0&&(t.stats={}),t.stats.inputmove=[],t.stats.inputok=0,t.stats.inputcancel=0,t.stats.inputmenu=0;const i=e.inputmods[n];switch(t.stats.inputalt=i&Zy?1:0,t.stats.inputctrl=i&Jy?1:0,t.stats.inputshift=i&Qy?1:0,n){case rt.MOVE_UP:case rt.MOVE_DOWN:case rt.MOVE_LEFT:case rt.MOVE_RIGHT:t.stats.inputmove=[c2[n-rt.MOVE_UP]];break;case rt.OK_BUTTON:t.stats.inputok=1;break;case rt.CANCEL_BUTTON:t.stats.inputcancel=1;break;case rt.MENU_BUTTON:t.stats.inputmenu=1;break}e.inputcurrent=n,e.inputqueue.delete(n)}function os(t,e,n,i){const r=Re(e)?e:e.id,s=Re(e)?void 0:{x:e.x??0,y:e.y??0},a=Re(n)?n:n.id,o=r??s;T(a)&&T(o)&&t.send(a,i,o)}function Nx(t,e,n,i){T(n==null?void 0:n.id)?(n.headless=!0,oc(t,e,n)):Id(e,i,"empty")}function Lx(t,e,n,i,r){const s=KN(e,n,i,r);if(T(s)){os(t,s,t.id(),"thud"),i.kind==="player"?os(t,t.id(),s,"touch"):i.collision===xt.ISBULLET?os(t,t.id(),s,"shot"):os(t,t.id(),s,"bump");const a=kn(e,s);return(s.destructible??(a==null?void 0:a.destructible))&&Nx(e,n,s,r),!1}return!0}function $p(t,e){if(Re(t)){const n=t.toLowerCase();switch(n){case"edit":return[n,e+1]}}return[void 0,e]}const u2=En({get(t,e){var s;const n=Ie(t.id());if(n.object){o2.has(e)&&l2(n.object);const a=(s=n.object.stats)==null?void 0:s[e];if(T(a)||Cx.has(e))return[!0,a]}const i=n.board?Jc(n.board,n.object):void 0,r=Wb(n.book,(i==null?void 0:i.id)??"",e);return[T(r),r]},set(t,e,n){var s,a;const i=Ie(t.id());if(T(i.object)&&(T((a=(s=i.object)==null?void 0:s.stats)==null?void 0:a[e])||Cx.has(e)))return i.object.stats||(i.object.stats={}),i.object.stats[e]=n,[!0,n];const r=i.board?Jc(i.board,i.object):void 0;return Gb(i.book,(r==null?void 0:r.id)??"",e,n),[!0,n]},shouldtick(t,e){var i,r,s,a,o,c;const n=Ie(t.id());!e||!T((i=n.object)==null?void 0:i.x)||!T((r=n.object)==null?void 0:r.y)||!T((a=(s=n.object)==null?void 0:s.stats)==null?void 0:a.stepx)||!T((c=(o=n.object)==null?void 0:o.stats)==null?void 0:c.stepy)||Lx(t,n.book,n.board,n.object,{x:n.object.x+n.object.stats.stepx,y:n.object.y+n.object.stats.stepy})||qc(n.object,{stepx:0,stepy:0})},tick(){},tock(t){var n;(n=Ie(t.id()).object)!=null&&n.headless&&t.command("die")}}).command("become",(t,e)=>{var s,a;const n=Ie(t.id()),i={x:((s=n.object)==null?void 0:s.x)??0,y:((a=n.object)==null?void 0:a.y)??0},[r]=Z(ne(t,e),0,[X.KIND]);return ca(n.book,n.board),oc(n.book,n.board,n.object),yp(n.book,n.object,t.timestamp())&&cc(n.book,n.board,r,i),t.endofprogram(),0}).command("bind",()=>0).command("change",(t,e)=>{const n=Ie(t.id()),[i,r]=$p(e[0],0),[s,a]=Z(ne(t,e),r,[X.KIND,X.KIND]),{maybebook:o,maybeboard:c}=jp(n.book,n.board,i);ca(o,c);const l=tl(s)??"",u=Gc(c,l),d=w_(u,s),f=tl(a),p=Kd(a),h=Hd(a);return d.forEach(m=>{if(qr(o,m)===f)T(p)&&(m.color=p),T(h)&&(m.bg=h);else{if(T(m.id))switch(oc(o,c,m),i){case"edit":if(!Zc(c,m.id))return;break;default:if(!yp(o,m,t.timestamp()))return;break}On(m)&&cc(o,c,a,m)}}),0}).command("char",(t,e)=>{const n=Ie(t.id()),[i]=Z(ne(t,e),0,[X.NUMBER]);return T(n.object)&&(n.object.char=i),0}).command("color",(t,e)=>{const n=Ie(t.id()),[i]=Z(ne(t,e),0,[X.COLOR]);return T(n.object)&&T(i)&&Ta(n.object,i),0}).command("cycle",(t,e)=>{const n=Ie(t.id());if(T(n.object)){const[i]=Z(ne(t,e),0,[X.NUMBER]),r=Ki(Math.round(i),1,255);Vc(n.object,"cycle",r)}return 0}).command("die",t=>{var n;const e=Ie(t.id());return(n=e.object)!=null&&n.headless&&oc(e.book,e.board,e.object),yp(e.book,e.object,t.timestamp()),t.endofprogram(),0}).command("endgame",t=>(t.set("health",0),0)).command("go",(t,e)=>{const n=Ie(t.id());if(!T(n.object))return 1;const[i]=Z(ne(t,e),0,[X.DIR]);return Lx(t,n.book,n.board,n.object,i),n.object.x!==i.x&&n.object.y!==i.y?1:0}).command("put",(t,e)=>{const n=Ie(t.id()),[i,r]=$p(e[0],0),[s,a]=Z(ne(t,e),r,[X.DIR,X.KIND]),{maybebook:o,maybeboard:c}=jp(n.book,n.board,i);return ca(o,c),cc(o,c,a,s),0}).command("send",(t,e)=>{var d,f;const n=Ie(t.id()),[i,r]=Z(ne(t,e),0,[X.STRING,X.ANY]),[s,a]=i.split(":"),o=T(a)?s:"self",c=a??s;function l(p){p.forEach(h=>{T(h.id)&&t.send(h.id,c,r)})}const u=o.toLowerCase();switch(u){case"all":for(const p of Object.keys(((d=n.board)==null?void 0:d.objects)??{}))t.send(p,c,r);break;case"self":t.message({id:dn(),sender:t.id(),target:c,data:r});break;case"others":for(const p of Object.keys(((f=n.board)==null?void 0:f.objects)??{}))p!==t.id()&&t.send(p,c,r);break;case"player":break;default:{l(Kc(n.board,[o]));const p=t.get(u);it(p)?l(Kc(n.board,p)):l(Kc(n.board,[p]));break}}return 0}).command("shoot",(t,e)=>{const n=Ie(t.id());if(!On(n.object))return 0;const[i,r]=$p(e[0],0),[s,a]=Z(ne(t,e),r,[X.DIR,X.MAYBE_KIND]),{maybebook:o,maybeboard:c}=jp(n.book,n.board,i),l=wi(n.object,s),u=Yt({x:0,y:0},l),d=Yt({x:n.object.x,y:n.object.y},l);ca(o,c);let f=I_(c,d);if(T(f)&&!T(f.id)){const p=kn(o,n.object),h=kn(o,f);kd(f.collision??(p==null?void 0:p.collision),f.collision??(h==null?void 0:h.collision))||(f=void 0)}if(T(f)){T(f.id)&&os(t,t.id(),f,"shot");const p=kn(o,f);(f.destructible??(p==null?void 0:p.destructible))&&Nx(o,c,f,d);const h=YN(o,c,a??["bullet"],d);T(h)&&(h.collision=xt.ISBULLET,os(t,f,t.id(),"thud"))}else{const p=cc(o,c,a??["bullet"],d);T(p)&&(p.collision=xt.ISBULLET,qc(p,{stepx:u.x,stepy:u.y}))}return t.yield(),0}).command("throwstar",(t,e)=>t.command("shoot",...e,"star")?1:0).command("try",(t,e)=>{const[,n]=Z(ne(t,e),0,[X.DIR]);return t.command("go",...e)&&n<e.length&&t.command(...e.slice(n)),t.yield(),0}).command("walk",(t,e)=>{const n=Ie(t.id());if(!On(n.object))return 0;const[i]=Z(ne(t,e),0,[X.DIR]),r=wi(n.object,i),s=Yt({x:0,y:0},r);return qc(n.object,{stepx:s.x,stepy:s.y}),0}).command("stat",(t,e)=>{const n=Ie(t.id());return n.object&&(n.object.name=e.map(Bt).join(" ")),0}),p2=En({get(t,e){return[!1,void 0]},set(t,e,n){return[!1,void 0]},shouldtick(t,e){},tick(t){},tock(t){}}).command("stub",(t,e)=>0),d2=En({get(t,e){return[!1,void 0]},set(t,e,n){return[!1,void 0]},shouldtick(t,e){},tick(t){},tock(t){}}).command("stub",(t,e)=>0),f2={all:$L,audio:zL,board:WL,charset:GL,cli:JN,gadget:i2,loader:r2,mods:a2,object:u2,palette:p2,terrain:d2},h2={[Ne.ERROR]:[],[Ne.CLI]:["all","audio","mods","cli"],[Ne.LOADER]:["all","mods","loader"],[Ne.BOARD]:["all","audio","gadget","mods","board"],[Ne.OBJECT]:["all","audio","gadget","mods","object"],[Ne.TERRAIN]:["all","audio","gadget","mods","terrain"],[Ne.CHARSET]:["all","audio","gadget","mods","charset"],[Ne.PALETTE]:["all","audio","gadget","mods","palette"],[Ne.EIGHT_TRACK]:["all","audio","mods","board"]};function m2(t,e){(h2[e]??[]).forEach(i=>t.install(f2[i]))}function zp(t){if(!t||t.type===void 0)return;const e=[{start:t.startOffset,end:t.endOffset??0}];return Object.keys(t).forEach(n=>{if(n!=="parent"){const i=t[n];it(i)?i.forEach(r=>{e.push(zp(r))}):e.push(zp(i))}}),t.range={start:Math.min(...e.filter(n=>n).map(n=>(n==null?void 0:n.start)??0)),end:Math.max(...e.filter(n=>n).map(n=>(n==null?void 0:n.end)??0))},t.range}function g2(t){const e=vu(`${t}
`);if(e.errors.length>0)return e;Ur.input=e.tokens;const n=Ur.program();if(Ur.errors.length>0)return{tokens:e.tokens,errors:Ur.errors.map(r=>({offset:r.token.startOffset,line:r.token.startLine,column:r.token.startColumn,length:r.token.image.length,message:r.message}))};const[i]=bO.go(n);return i?(zp(i),{tokens:e.tokens,cst:n,ast:i}):{tokens:e.tokens,cst:n,errors:[{message:"no ast output",offset:0,line:0,column:0,length:0}]}}const Wp=Object.getPrototypeOf(function*(){}).constructor;function v2(t,e){_O(t);const n=g2(e);if(n.errors&&n.errors.length>0)return n;if(!n.ast)return{...n,errors:[{message:"no ast output",offset:0,line:0,column:0,length:0}]};const i=AO(n.ast);if(i.code){cw&&console.info(i.code);try{return{...n,...i,source:i.code,code:new Wp("api",i.code)}}catch(r){return{errors:[{message:`unexpected error ${r.message}`,offset:0,line:0,column:0,length:0}],source:"",code:new Wp("api"," ")}}}return{...n,...i,source:"",code:new Wp("api"," ")}}function b2(){const t={},e={};function n(r,s){const a=t[s];if(a)return a;const o=v2(r,s);return t[s]=o,o}const i={ids(){return Object.keys(e)},has(r){return T(e[r])},halt(r){const s=e[r];return s&&delete e[r],!!s},tick(r,s,a,o,c,l){var d;let u=e[r];if(!T(e[r])){const f=n(c,l);if(u=e[r]=OO(r,f),(d=f.errors)!=null&&d.length){const[p]=f.errors,h=((p==null?void 0:p.line)??2)-1,m=l.replaceAll(`\r
`,"").split(`
`).map((S,R)=>[S,R]);m.slice(h-5,h).forEach(([S,R])=>{Ct("os","build",`$grey${R+1} $grey${S}`)});const[y,x]=m[h],v=(p.column??1)-1,k=v+p.length,O=v<y.length?y:`${y}*`,E=O.substring(0,v),w=O.substring(v,k),_=O.substring(k);return Ct("os","build",`$red${x+1} $grey${E}$red${w}$grey${_}`),p.message.split(`
`).forEach(S=>{Ct("os","build",S)}),!1}m2(u,s)}return!!(u!=null&&u.tick(a,o))},once(r,s,a,o,c){return i.tick(r,s,1,a,o,c)&&i.halt(r)},message(r){const{target:s,path:a}=td(r.target),o=e[s];if(T(o)){const c={...r,target:a};o.message(c)}}};return i}const Gp=iy();RL(Gp);const vc=b2();let bc=0;const x2=32,cs={},y2=64;let Mx=0;const yi={},ls={},Rn=us("vm",["tick","second"],t=>{var e;switch(t.target){case"books":if(t.data.every(Wy)&&t.player===Gp&&it(t.data)===!0){const n=t.data,i=n.map(r=>r.name);CL(n),Wt(Rn.name(),"reset by",t.sender,"with",...i,t.player),n_(Rn.name(),t.player)}break;case"login":if(t.player)if(ML(t.player))cs[t.player]=0,Wt(Rn.name(),"player login",t.player);else{const[n]=Bi(as());T(n)?u_(Rn.name()):i_(Rn.name(),t.player)}break;case"doot":t.player&&(cs[t.player]=0,xd(Rn.name(),"active",t.player));break;case"input":if(t.player){const n=Ie(t.player),[i=rt.NONE,r=0]=t.data??{};n.inputqueue.add(i),n.inputmods[i]=r}break;case"codewatch":if(t.player&&it(t.data)){const[n,i]=t.data;if(!T(ls[i])){const r=yd(n,i);ls[i]=Lb(r,s=>{const a=mr(Yn(n),i);T(a)&&(a.code=s,PN(a))})}yi[n]=yi[n]??{},yi[n][i]=yi[n][i]??new Set,yi[n][i].add(t.player)}break;case"coderelease":if(t.player&&it(t.data)){const[n,i]=t.data;T(yi[n])&&T(yi[n][i])&&(yi[n][i].delete(t.player),yi[n][i].size===0&&((e=ls[i])==null||e.call(ls),ls[i]=void 0))}break;case"tick":bc=t.data??0,PL(vc,bc);break;case"second":Object.keys(cs).forEach(n=>{++cs[n],cs[n]>=x2&&(delete cs[n],UL(n),Wt(Rn.name(),"player logout",n),Rn.emit("logout",void 0,n))}),++Mx>=y2&&$c(Rn.name());break;case"flush":{Mx=0;const n=br().map(jN);nd.trimUndefinedRecursively(n),a_(Rn.name(),n);break}case"cli":DL(vc,bc,t.player??"",t.data??"");break;case"loadfile":Ex(vc,bc,t.player??"",t.data);break;default:vc.message(t);break}});function _2(){Rn.emit("ready",void 0,Gp)}const Kp=us("clock",[],()=>{});let Hp=0,Ux=performance.now(),Vp=0,xc=0;function w2(){Kp.emit("tick",xc),Kp.emit("tock",xc),++Vp,++xc,Vp>=mp&&(Vp%=mp,Kp.emit("second",xc))}function Px(){const t=performance.now(),e=t-Ux;Hp+=e,Hp>=hp&&(Hp%=hp,w2()),Ux=t,setTimeout(Px)}Px();const Dx={},jx=us("gadgetserver",["tock"],t=>{switch(t.target){case"tock":ZL().forEach(e=>{const n=xr(e);n.layers=FL(e);const i=Bc(Dx[e]??{},n);i.length&&(Dx[e]=Et(n),s_(jx.name(),i,e))});break;case"desync":if(t.player){const e=xr(t.player);r_(jx.name(),e,t.player)}break;case"clearscroll":t.player&&JL(t.player);break}}),E2=ay(t=>postMessage(t));onmessage=function(e){E2(e.data)},queueMicrotask(_2)})();
