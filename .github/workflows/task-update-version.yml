name: update zss version

on:
  workflow_dispatch

jobs:
  autoversion:
    runs-on: ubuntu-latest

    steps:
      - name: checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: setup node
        uses: actions/setup-node@v4
        with: 
          node-version-file: .nvmrc

      - name: log package before
        run: cat ./package.json

      - name: scan commits for versioning
        id: version
        uses: paulhatch/semantic-version@latest
        with:
          bump_each_commit: true
          minor_pattern: "feat: "
          major_pattern: "release: "
          bump_each_commit_patch_pattern: "(fix|add): "

      - name: log package after
        run: cat ./package.json
