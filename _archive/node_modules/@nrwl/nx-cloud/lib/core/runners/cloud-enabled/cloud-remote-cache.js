const a2_0x2d13=['Error\x20when\x20storing\x20artifacts','remote-cache-hit','retrieve','waitForStoreRequestsToComplete','api','storeInCurrentProcess','next','extractErrorMessage','storeRequests','distributedExecutionId','messages','map','Nx\x20Cloud:\x20Cache\x20miss\x20','note','axiosException','runContext','all','statuses','VERBOSE_LOGGING','CloudRemoteCache','response','forEach','hashUrls','indexOf','fileStorage','reduce','startRun','push','put','cache-miss','hash','cacheError','../../../utilities/environment','filter','store','There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.','.\x20Status\x20404.','apply','then','Nx\x20Cloud:\x20Skipping\x20storing\x20','done','get','storage','resolve','requests','delayedStoreRequests','../../../utilities/nx-imports','value','status'];(function(_0x13a4a0,_0x2d1341){const _0x3abe54=function(_0x4e3a5b){while(--_0x4e3a5b){_0x13a4a0['push'](_0x13a4a0['shift']());}};_0x3abe54(++_0x2d1341);}(a2_0x2d13,0x69));const a2_0x3abe=function(_0x13a4a0,_0x2d1341){_0x13a4a0=_0x13a4a0-0x0;let _0x3abe54=a2_0x2d13[_0x13a4a0];return _0x3abe54;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x46c812,_0x17715a,_0x39902e,_0x6c7cd5){function _0xb39343(_0x55f469){return _0x55f469 instanceof _0x39902e?_0x55f469:new _0x39902e(function(_0x1f93ea){_0x1f93ea(_0x55f469);});}return new(_0x39902e||(_0x39902e=Promise))(function(_0x2a9ae0,_0x185ae3){function _0x5ac7fd(_0x2fac11){try{_0x297fc3(_0x6c7cd5[a2_0x3abe('0x30')](_0x2fac11));}catch(_0x525672){_0x185ae3(_0x525672);}}function _0x4c42c8(_0x721782){try{_0x297fc3(_0x6c7cd5['throw'](_0x721782));}catch(_0x264b0b){_0x185ae3(_0x264b0b);}}function _0x297fc3(_0x3991c5){_0x3991c5[a2_0x3abe('0x21')]?_0x2a9ae0(_0x3991c5[a2_0x3abe('0x28')]):_0xb39343(_0x3991c5[a2_0x3abe('0x28')])[a2_0x3abe('0x1f')](_0x5ac7fd,_0x4c42c8);}_0x297fc3((_0x6c7cd5=_0x6c7cd5[a2_0x3abe('0x1e')](_0x46c812,_0x17715a||[]))[a2_0x3abe('0x30')]());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});exports[a2_0x3abe('0xc')]=void 0x0;const environment_1=require(a2_0x3abe('0x19'));const {output}=require(a2_0x3abe('0x27'));class CloudRemoteCache{constructor(_0x2888c1,_0x4a12f3,_0x587416,_0x4ac325,_0x34bee1,_0x3abe02){this[a2_0x3abe('0x3')]=_0x2888c1;this[a2_0x3abe('0x2e')]=_0x4a12f3;this[a2_0x3abe('0x8')]=_0x587416;this[a2_0x3abe('0x11')]=_0x4ac325;this[a2_0x3abe('0x2')]=_0x34bee1;this[a2_0x3abe('0x2f')]=_0x3abe02;this['storeRequests']=[];this[a2_0x3abe('0x26')]=[];}['retrieve'](_0x1c88a5,_0x330ba7){var _0x5dadb1;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x3abe('0x3')]['cacheError'])return![];const _0x3d9105=yield this[a2_0x3abe('0xf')](_0x1c88a5);if(!_0x3d9105||!_0x3d9105['get']){if(environment_1[a2_0x3abe('0xb')]){output[a2_0x3abe('0x6')]({'title':a2_0x3abe('0x5')+_0x1c88a5+'.'});}this[a2_0x3abe('0x8')]['statuses'][_0x1c88a5]=a2_0x3abe('0x16');return![];}try{yield this['fileStorage'][a2_0x3abe('0x2c')](_0x1c88a5,_0x3d9105[a2_0x3abe('0x22')],_0x330ba7);this['runContext'][a2_0x3abe('0xa')][_0x1c88a5]=a2_0x3abe('0x2b');return!![];}catch(_0x57a156){const _0x24f79a=(_0x5dadb1=_0x57a156[a2_0x3abe('0x7')])!==null&&_0x5dadb1!==void 0x0?_0x5dadb1:_0x57a156;if(_0x24f79a[a2_0x3abe('0xd')]&&_0x24f79a['response'][a2_0x3abe('0x29')]===0x194){if(environment_1['VERBOSE_LOGGING']){output[a2_0x3abe('0x6')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x1c88a5+a2_0x3abe('0x1d')});}}else{this[a2_0x3abe('0x3')]['cacheError']=this[a2_0x3abe('0x3')]['extractErrorMessage'](_0x24f79a,a2_0x3abe('0x23'));}this['runContext'][a2_0x3abe('0xa')][_0x1c88a5]='cache-miss';return![];}});}[a2_0x3abe('0x1b')](_0x2264ea,_0x316700){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x3abe('0x3')][a2_0x3abe('0x18')])return![];const _0x541676=Promise[a2_0x3abe('0x24')]()[a2_0x3abe('0x1f')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x153d2e;const _0x562f53=yield this[a2_0x3abe('0xf')](_0x2264ea);if(!_0x562f53)return![];if(!_0x562f53[a2_0x3abe('0x15')]){if(environment_1[a2_0x3abe('0xb')]){output['note']({'title':a2_0x3abe('0x20')+_0x2264ea+'.','bodyLines':[a2_0x3abe('0x1c'),'Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.']});}return!![];}if(!this[a2_0x3abe('0x2f')]){this[a2_0x3abe('0x26')]['push']({'hash':_0x2264ea,'url':_0x562f53[a2_0x3abe('0x15')]});return!![];}try{yield this[a2_0x3abe('0x11')][a2_0x3abe('0x1b')](_0x2264ea,_0x562f53[a2_0x3abe('0x15')],_0x316700);return!![];}catch(_0x2e960d){const _0x45a212=(_0x153d2e=_0x2e960d['axiosException'])!==null&&_0x153d2e!==void 0x0?_0x153d2e:_0x2e960d;this[a2_0x3abe('0x3')][a2_0x3abe('0x18')]=this['messages'][a2_0x3abe('0x0')](_0x45a212,a2_0x3abe('0x23'));return![];}}));this[a2_0x3abe('0x1')][a2_0x3abe('0x14')](_0x541676);return _0x541676;});}[a2_0x3abe('0xf')](_0x33ccf2){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x33ccf2 in this[a2_0x3abe('0x8')][a2_0x3abe('0x25')]){return(yield this[a2_0x3abe('0x8')][a2_0x3abe('0x25')][_0x33ccf2])[_0x33ccf2];}else{const _0x2f4ae1=this[a2_0x3abe('0x8')]['scheduledTasks'][a2_0x3abe('0x1a')](_0x36aa9d=>!this[a2_0x3abe('0x8')][a2_0x3abe('0x25')][_0x36aa9d[a2_0x3abe('0x17')]])[a2_0x3abe('0x4')](_0xec0dcb=>_0xec0dcb[a2_0x3abe('0x17')]);if(_0x2f4ae1[a2_0x3abe('0x10')](_0x33ccf2)===-0x1){_0x2f4ae1['push'](_0x33ccf2);}const _0xfb678d=this['api'][a2_0x3abe('0x13')](this[a2_0x3abe('0x2')],_0x2f4ae1);_0x2f4ae1[a2_0x3abe('0xe')](_0x3a4fac=>{this[a2_0x3abe('0x8')]['requests'][_0x3a4fac]=_0xfb678d;});return(yield _0xfb678d)[_0x33ccf2];}});}[a2_0x3abe('0x2d')](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x558ad3=yield Promise[a2_0x3abe('0x9')](this[a2_0x3abe('0x1')])[a2_0x3abe('0x1f')](_0x4a2bac=>_0x4a2bac[a2_0x3abe('0x12')]((_0x9dc6d3,_0x13e996)=>_0x9dc6d3&&_0x13e996,!![]));if(!_0x558ad3){throw new Error(a2_0x3abe('0x2a'));}});}}exports[a2_0x3abe('0xc')]=CloudRemoteCache;