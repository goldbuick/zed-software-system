const a15_0x537b=['indexOf','addTaskDependencies','find','addDependencies','defaultTargetDependencies','createTaskGraph','map','target','addTaskToGraph','project','parse','length','add','createTaskGraphCompat','dependencies','build','targetDependencies','has','self','findTask','projectGraph','projects','strip-json-comments','strictlyOrderedTargets','defineProperty','TaskGraphCreator','../../../utilities/nx-imports','push'];(function(_0x4fa4c6,_0x537b26){const _0x130bed=function(_0x1bfa62){while(--_0x1bfa62){_0x4fa4c6['push'](_0x4fa4c6['shift']());}};_0x130bed(++_0x537b26);}(a15_0x537b,0x1b2));const a15_0x130b=function(_0x4fa4c6,_0x537b26){_0x4fa4c6=_0x4fa4c6-0x0;let _0x130bed=a15_0x537b[_0x4fa4c6];return _0x130bed;};'use strict';Object[a15_0x130b('0xa')](exports,'__esModule',{'value':!![]});exports[a15_0x130b('0xb')]=exports['createTaskGraphCompat']=void 0x0;const stripJsonComments=require(a15_0x130b('0x8'));const fs_1=require('fs');const {getDependencyConfigs,workspaceRoot}=require(a15_0x130b('0xc'));function createTaskGraphCompat(_0x15340c,_0x546b8e,_0x147535){const _0x34af9f=JSON[a15_0x130b('0x18')](stripJsonComments((0x0,fs_1['readFileSync'])(workspaceRoot+'/nx.json')['toString']()));return new TaskGraphCreator(_0x546b8e,getDefaultDependencyConfigs(_0x34af9f,_0x15340c))[a15_0x130b('0x13')](_0x147535);}exports[a15_0x130b('0x1b')]=createTaskGraphCompat;function getDefaultDependencyConfigs(_0x39cb58,_0x288344){var _0x3a2da5,_0x262965;const _0x39555e=(_0x3a2da5=_0x39cb58[a15_0x130b('0x2')])!==null&&_0x3a2da5!==void 0x0?_0x3a2da5:{};const _0x486d39=_0x288344?(_0x262965=_0x288344[a15_0x130b('0x9')])!==null&&_0x262965!==void 0x0?_0x262965:[a15_0x130b('0x1')]:[];for(const _0x39a7b6 of _0x486d39){_0x39555e[_0x39a7b6]=_0x39555e[_0x39a7b6]||[];_0x39555e[_0x39a7b6][a15_0x130b('0xd')]({'target':_0x39a7b6,'projects':'dependencies'});}return _0x39555e;}class TaskGraphCreator{constructor(_0x3878d1,_0x74486e){this['projectGraph']=_0x3878d1;this['defaultTargetDependencies']=_0x74486e;}[a15_0x130b('0x13')](_0x3355ee){const _0x2b385f={'roots':[],'tasks':{},'dependencies':{}};for(const _0x4e0bba of _0x3355ee){this[a15_0x130b('0x16')](_0x4e0bba,_0x2b385f);const _0x32b6e4=getDependencyConfigs(_0x4e0bba[a15_0x130b('0x15')],this[a15_0x130b('0x12')],this[a15_0x130b('0x6')]);if(!_0x32b6e4){continue;}this[a15_0x130b('0xf')](_0x4e0bba,_0x32b6e4,_0x3355ee,_0x2b385f);}_0x2b385f['roots']=Object['keys'](_0x2b385f[a15_0x130b('0x0')])['filter'](_0x572475=>_0x2b385f[a15_0x130b('0x0')][_0x572475][a15_0x130b('0x19')]===0x0);return _0x2b385f;}['addTaskDependencies'](_0x144f9c,_0x19c7ba,_0x4898d3,_0x23eab3){for(const _0x4ac3c3 of _0x19c7ba){if(_0x4ac3c3[a15_0x130b('0x7')]===a15_0x130b('0x4')){for(const _0x47f7c6 of _0x4898d3){if(_0x47f7c6[a15_0x130b('0x15')]['project']===_0x144f9c[a15_0x130b('0x15')][a15_0x130b('0x17')]&&_0x47f7c6[a15_0x130b('0x15')][a15_0x130b('0x15')]===_0x4ac3c3[a15_0x130b('0x15')]){_0x23eab3['dependencies'][_0x144f9c['id']][a15_0x130b('0xd')](_0x47f7c6['id']);}}}else if(_0x4ac3c3['projects']===a15_0x130b('0x0')){const _0x4f8d44=new Set();this[a15_0x130b('0x11')](_0x144f9c[a15_0x130b('0x15')]['project'],_0x4ac3c3[a15_0x130b('0x15')],_0x4898d3,_0x23eab3,_0x144f9c['id'],_0x4f8d44);}}}[a15_0x130b('0x11')](_0x40b825,_0x34abdc,_0xdb29fe,_0x2e613f,_0x3c31de,_0x1143af){_0x1143af[a15_0x130b('0x1a')](_0x40b825);const _0x43572b=this[a15_0x130b('0x6')][a15_0x130b('0x0')][_0x40b825];if(_0x43572b){const _0x25e7f6=_0x43572b[a15_0x130b('0x14')](_0xb092ba=>_0xb092ba[a15_0x130b('0x15')]);for(const _0x3d1dd9 of _0x25e7f6){if(_0x1143af[a15_0x130b('0x3')](_0x3d1dd9)){continue;}const _0x15bd11=this[a15_0x130b('0x5')]({'project':_0x3d1dd9,'target':_0x34abdc},_0xdb29fe);if(_0x15bd11){if(_0x2e613f[a15_0x130b('0x0')][_0x3c31de][a15_0x130b('0xe')](_0x15bd11['id'])===-0x1){_0x2e613f[a15_0x130b('0x0')][_0x3c31de]['push'](_0x15bd11['id']);}}else{this['addDependencies'](_0x3d1dd9,_0x34abdc,_0xdb29fe,_0x2e613f,_0x3c31de,_0x1143af);}}}}[a15_0x130b('0x5')]({project,target},_0x19374a){return _0x19374a[a15_0x130b('0x10')](_0x492037=>_0x492037[a15_0x130b('0x15')][a15_0x130b('0x17')]===project&&_0x492037[a15_0x130b('0x15')][a15_0x130b('0x15')]===target);}[a15_0x130b('0x16')](_0x30ece3,_0x306aba){_0x306aba['tasks'][_0x30ece3['id']]=_0x30ece3;_0x306aba[a15_0x130b('0x0')][_0x30ece3['id']]=[];}}exports[a15_0x130b('0xb')]=TaskGraphCreator;