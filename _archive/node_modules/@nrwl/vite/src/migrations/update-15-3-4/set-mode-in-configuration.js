"use strict";
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    setModeInConfiguration: ()=>setModeInConfiguration,
    default: ()=>_default
});
const _extends = require("@swc/helpers/lib/_extends.js").default;
const _devkit = require("@nrwl/devkit");
const _executorOptionsUtils = require("@nrwl/workspace/src/utilities/executor-options-utils");
var _configuration;
async function setModeInConfiguration(tree) {
    forAllProjectsUsingViteAddMode(tree);
    await (0, _devkit.formatFiles)(tree);
}
const _default = setModeInConfiguration;
function forAllProjectsUsingViteAddMode(tree) {
    (0, _executorOptionsUtils.forEachExecutorOptions)(tree, '@nrwl/vite:build', (_options, projectName, targetName, configuration)=>{
        if (!configuration) {
            return;
        }
        const projectConfiguration = (0, _devkit.readProjectConfiguration)(tree, projectName);
        var _mode;
        (_mode = (_configuration = projectConfiguration.targets[targetName].configurations[configuration]).mode) != null ? _mode : _configuration.mode = configuration;
        (0, _devkit.updateProjectConfiguration)(tree, projectName, _extends({}, projectConfiguration));
    });
}

//# sourceMappingURL=set-mode-in-configuration.js.map